var EP=Object.defineProperty,AP=Object.defineProperties;var CP=Object.getOwnPropertyDescriptors;var AS=Object.getOwnPropertySymbols;var LP=Object.prototype.hasOwnProperty,RP=Object.prototype.propertyIsEnumerable;var CS=(i,e,t)=>e in i?EP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,sh=(i,e)=>{for(var t in e||(e={}))LP.call(e,t)&&CS(i,t,e[t]);if(AS)for(var t of AS(e))RP.call(e,t)&&CS(i,t,e[t]);return i},Zv=(i,e)=>AP(i,CP(e));/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const qi="136",IP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},PP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LS=0,Qv=1,RS=2,kP=3,OP=0,Jv=1,IS=2,ku=3,qo=0,qn=1,Is=2,ey=1,DP=2,io=0,Ou=1,ty=2,ny=3,ry=4,PS=5,rl=100,kS=101,OS=102,iy=103,sy=104,DS=200,NS=201,FS=202,BS=203,oy=204,ay=205,US=206,zS=207,HS=208,GS=209,VS=210,$S=0,WS=1,jS=2,Vp=3,qS=4,XS=5,YS=6,KS=7,oh=0,ZS=1,QS=2,so=0,JS=1,eM=2,tM=3,nM=4,rM=5,$p=300,il=301,sl=302,Du=303,ah=304,Nu=306,lh=307,Ps=1e3,hr=1001,Fu=1002,Xn=1003,uh=1004,NP=1004,ch=1005,FP=1005,Dn=1006,Wp=1007,BP=1007,oo=1008,UP=1008,ps=1009,iM=1010,sM=1011,Bu=1012,oM=1013,fh=1014,ks=1015,Xo=1016,aM=1017,lM=1018,uM=1019,ol=1020,cM=1021,ao=1022,tr=1023,fM=1024,hM=1025,Yo=1026,al=1027,dM=1028,pM=1029,mM=1030,gM=1031,vM=1032,yM=1033,ly=33776,uy=33777,cy=33778,fy=33779,hy=35840,dy=35841,py=35842,my=35843,xM=36196,gy=37492,vy=37496,wM=37808,_M=37809,bM=37810,SM=37811,MM=37812,TM=37813,EM=37814,AM=37815,CM=37816,LM=37817,RM=37818,IM=37819,PM=37820,kM=37821,OM=36492,DM=37840,NM=37841,FM=37842,BM=37843,UM=37844,zM=37845,HM=37846,GM=37847,VM=37848,$M=37849,WM=37850,jM=37851,qM=37852,XM=37853,YM=2200,KM=2201,ZM=2202,Uu=2300,ll=2301,jp=2302,ul=2400,cl=2401,hh=2402,qp=2500,yy=2501,QM=0,JM=1,xy=2,li=3e3,Or=3001,eT=3200,tT=3201,lo=0,nT=1,zP=0,Xp=7680,HP=7681,GP=7682,VP=7683,$P=34055,WP=34056,jP=5386,qP=512,XP=513,YP=514,KP=515,ZP=516,QP=517,JP=518,rT=519,zu=35044,fl=35048,ek=35040,tk=35045,nk=35049,rk=35041,ik=35046,sk=35050,ok=35042,ak="100",wy="300 es";class Ko{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let l=0,c=o.length;l<c;l++)o[l].call(this,e);e.target=null}}}const Dr=[];for(let i=0;i<256;i++)Dr[i]=(i<16?"0":"")+i.toString(16);let Yp=1234567;const hl=Math.PI/180,dh=180/Math.PI;function ki(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Dr[i&255]+Dr[i>>8&255]+Dr[i>>16&255]+Dr[i>>24&255]+"-"+Dr[e&255]+Dr[e>>8&255]+"-"+Dr[e>>16&15|64]+Dr[e>>24&255]+"-"+Dr[t&63|128]+Dr[t>>8&255]+"-"+Dr[t>>16&255]+Dr[t>>24&255]+Dr[r&255]+Dr[r>>8&255]+Dr[r>>16&255]+Dr[r>>24&255]).toUpperCase()}function Nr(i,e,t){return Math.max(e,Math.min(t,i))}function _y(i,e){return(i%e+e)%e}function lk(i,e,t,r,o){return r+(i-e)*(o-r)/(t-e)}function uk(i,e,t){return i!==e?(t-i)/(e-i):0}function ph(i,e,t){return(1-t)*i+t*e}function ck(i,e,t,r){return ph(i,e,1-Math.exp(-t*r))}function fk(i,e=1){return e-Math.abs(_y(i,e*2)-e)}function hk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function dk(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function pk(i,e){return i+Math.floor(Math.random()*(e-i+1))}function mk(i,e){return i+Math.random()*(e-i)}function gk(i){return i*(.5-Math.random())}function vk(i){return i!==void 0&&(Yp=i%2147483647),Yp=Yp*16807%2147483647,(Yp-1)/2147483646}function yk(i){return i*hl}function xk(i){return i*dh}function by(i){return(i&i-1)==0&&i!==0}function iT(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function sT(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function wk(i,e,t,r,o){const l=Math.cos,c=Math.sin,h=l(t/2),m=c(t/2),v=l((e+r)/2),b=c((e+r)/2),T=l((e-r)/2),L=c((e-r)/2),P=l((r-e)/2),O=c((r-e)/2);switch(o){case"XYX":i.set(h*b,m*T,m*L,h*v);break;case"YZY":i.set(m*L,h*b,m*T,h*v);break;case"ZXZ":i.set(m*T,m*L,h*b,h*v);break;case"XZX":i.set(h*b,m*O,m*P,h*v);break;case"YXY":i.set(m*P,h*b,m*O,h*v);break;case"ZYZ":i.set(m*O,m*P,h*b,h*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}var yi=Object.freeze({__proto__:null,DEG2RAD:hl,RAD2DEG:dh,generateUUID:ki,clamp:Nr,euclideanModulo:_y,mapLinear:lk,inverseLerp:uk,lerp:ph,damp:ck,pingpong:fk,smoothstep:hk,smootherstep:dk,randInt:pk,randFloat:mk,randFloatSpread:gk,seededRandom:vk,degToRad:yk,radToDeg:xk,isPowerOfTwo:by,ceilPowerOfTwo:iT,floorPowerOfTwo:sT,setQuaternionFromProperEuler:wk});class We{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),l=this.x-e.x,c=this.y-e.y;return this.x=l*r-c*o+e.x,this.y=l*o+c*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}We.prototype.isVector2=!0;class vn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,c,h,m,v){const b=this.elements;return b[0]=e,b[1]=o,b[2]=h,b[3]=t,b[4]=l,b[5]=m,b[6]=r,b[7]=c,b[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,c=r[0],h=r[3],m=r[6],v=r[1],b=r[4],T=r[7],L=r[2],P=r[5],O=r[8],z=o[0],G=o[3],k=o[6],A=o[1],N=o[4],I=o[7],B=o[2],V=o[5],X=o[8];return l[0]=c*z+h*A+m*B,l[3]=c*G+h*N+m*V,l[6]=c*k+h*I+m*X,l[1]=v*z+b*A+T*B,l[4]=v*G+b*N+T*V,l[7]=v*k+b*I+T*X,l[2]=L*z+P*A+O*B,l[5]=L*G+P*N+O*V,l[8]=L*k+P*I+O*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],v=e[7],b=e[8];return t*c*b-t*h*v-r*l*b+r*h*m+o*l*v-o*c*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],v=e[7],b=e[8],T=b*c-h*v,L=h*m-b*l,P=v*l-c*m,O=t*T+r*L+o*P;if(O===0)return this.set(0,0,0,0,0,0,0,0,0);const z=1/O;return e[0]=T*z,e[1]=(o*v-b*r)*z,e[2]=(h*r-o*c)*z,e[3]=L*z,e[4]=(b*t-o*m)*z,e[5]=(o*l-h*t)*z,e[6]=P*z,e[7]=(r*m-v*t)*z,e[8]=(c*t-r*l)*z,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,l,c,h){const m=Math.cos(l),v=Math.sin(l);return this.set(r*m,r*v,-r*(m*c+v*h)+c+e,-o*v,o*m,-o*(-v*c+m*h)+h+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,l=o[0],c=o[3],h=o[6],m=o[1],v=o[4],b=o[7];return o[0]=t*l+r*m,o[3]=t*c+r*v,o[6]=t*h+r*b,o[1]=-r*l+t*m,o[4]=-r*c+t*v,o[7]=-r*h+t*b,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}vn.prototype.isMatrix3=!0;function oT(i){if(i.length===0)return-1/0;let e=i[0];for(let t=1,r=i.length;t<r;++t)i[t]>e&&(e=i[t]);return e}const _k={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Hu(i,e){return new _k[i](e)}function Kp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}let Gu;class dl{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Gu===void 0&&(Gu=Kp("canvas")),Gu.width=e.width,Gu.height=e.height;const r=Gu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Gu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let bk=0;class Nn extends Ko{constructor(e=Nn.DEFAULT_IMAGE,t=Nn.DEFAULT_MAPPING,r=hr,o=hr,l=Dn,c=oo,h=tr,m=ps,v=1,b=li){super();Object.defineProperty(this,"id",{value:bk++}),this.uuid=ki(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=l,this.minFilter=c,this.anisotropy=v,this.format=h,this.internalFormat=null,this.type=m,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const o=this.image;if(o.uuid===void 0&&(o.uuid=ki()),!t&&e.images[o.uuid]===void 0){let l;if(Array.isArray(o)){l=[];for(let c=0,h=o.length;c<h;c++)o[c].isDataTexture?l.push(Sy(o[c].image)):l.push(Sy(o[c]))}else l=Sy(o);e.images[o.uuid]={uuid:o.uuid,url:l}}r.image=o.uuid}return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$p)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ps:e.x=e.x-Math.floor(e.x);break;case hr:e.x=e.x<0?0:1;break;case Fu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ps:e.y=e.y-Math.floor(e.y);break;case hr:e.y=e.y<0?0:1;break;case Fu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Nn.DEFAULT_IMAGE=void 0;Nn.DEFAULT_MAPPING=$p;Nn.prototype.isTexture=!0;function Sy(i){return typeof HTMLImageElement!="undefined"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&i instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap?dl.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class an{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=this.w,c=e.elements;return this.x=c[0]*t+c[4]*r+c[8]*o+c[12]*l,this.y=c[1]*t+c[5]*r+c[9]*o+c[13]*l,this.z=c[2]*t+c[6]*r+c[10]*o+c[14]*l,this.w=c[3]*t+c[7]*r+c[11]*o+c[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,l;const c=.01,h=.1,m=e.elements,v=m[0],b=m[4],T=m[8],L=m[1],P=m[5],O=m[9],z=m[2],G=m[6],k=m[10];if(Math.abs(b-L)<c&&Math.abs(T-z)<c&&Math.abs(O-G)<c){if(Math.abs(b+L)<h&&Math.abs(T+z)<h&&Math.abs(O+G)<h&&Math.abs(v+P+k-3)<h)return this.set(1,0,0,0),this;t=Math.PI;const N=(v+1)/2,I=(P+1)/2,B=(k+1)/2,V=(b+L)/4,X=(T+z)/4,Q=(O+G)/4;return N>I&&N>B?N<c?(r=0,o=.707106781,l=.707106781):(r=Math.sqrt(N),o=V/r,l=X/r):I>B?I<c?(r=.707106781,o=0,l=.707106781):(o=Math.sqrt(I),r=V/o,l=Q/o):B<c?(r=.707106781,o=.707106781,l=0):(l=Math.sqrt(B),r=X/l,o=Q/l),this.set(r,o,l,t),this}let A=Math.sqrt((G-O)*(G-O)+(T-z)*(T-z)+(L-b)*(L-b));return Math.abs(A)<.001&&(A=1),this.x=(G-O)/A,this.y=(T-z)/A,this.z=(L-b)/A,this.w=Math.acos((v+P+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}an.prototype.isVector4=!0;class Oi extends Ko{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t),this.texture=new Nn(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Dn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=sh({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Oi.prototype.isWebGLRenderTarget=!0;class aT extends Oi{constructor(e,t,r){super(e,t);const o=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=o.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,l=this.texture.length;o<l;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}aT.prototype.isWebGLMultipleRenderTargets=!0;class Zp extends Oi{constructor(e,t,r={}){super(e,t,r);this.samples=4,this.ignoreDepthForMultisampleCopy=r.ignoreDepth!==void 0?r.ignoreDepth:!0,this.useRenderToTexture=r.useRenderToTexture!==void 0?r.useRenderToTexture:!1,this.useRenderbuffer=this.useRenderToTexture===!1}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}Zp.prototype.isWebGLMultisampleRenderTarget=!0;class Ut{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,l,c,h){let m=r[o+0],v=r[o+1],b=r[o+2],T=r[o+3];const L=l[c+0],P=l[c+1],O=l[c+2],z=l[c+3];if(h===0){e[t+0]=m,e[t+1]=v,e[t+2]=b,e[t+3]=T;return}if(h===1){e[t+0]=L,e[t+1]=P,e[t+2]=O,e[t+3]=z;return}if(T!==z||m!==L||v!==P||b!==O){let G=1-h;const k=m*L+v*P+b*O+T*z,A=k>=0?1:-1,N=1-k*k;if(N>Number.EPSILON){const B=Math.sqrt(N),V=Math.atan2(B,k*A);G=Math.sin(G*V)/B,h=Math.sin(h*V)/B}const I=h*A;if(m=m*G+L*I,v=v*G+P*I,b=b*G+O*I,T=T*G+z*I,G===1-h){const B=1/Math.sqrt(m*m+v*v+b*b+T*T);m*=B,v*=B,b*=B,T*=B}}e[t]=m,e[t+1]=v,e[t+2]=b,e[t+3]=T}static multiplyQuaternionsFlat(e,t,r,o,l,c){const h=r[o],m=r[o+1],v=r[o+2],b=r[o+3],T=l[c],L=l[c+1],P=l[c+2],O=l[c+3];return e[t]=h*O+b*T+m*P-v*L,e[t+1]=m*O+b*L+v*T-h*P,e[t+2]=v*O+b*P+h*L-m*T,e[t+3]=b*O-h*T-m*L-v*P,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,l=e._z,c=e._order,h=Math.cos,m=Math.sin,v=h(r/2),b=h(o/2),T=h(l/2),L=m(r/2),P=m(o/2),O=m(l/2);switch(c){case"XYZ":this._x=L*b*T+v*P*O,this._y=v*P*T-L*b*O,this._z=v*b*O+L*P*T,this._w=v*b*T-L*P*O;break;case"YXZ":this._x=L*b*T+v*P*O,this._y=v*P*T-L*b*O,this._z=v*b*O-L*P*T,this._w=v*b*T+L*P*O;break;case"ZXY":this._x=L*b*T-v*P*O,this._y=v*P*T+L*b*O,this._z=v*b*O+L*P*T,this._w=v*b*T-L*P*O;break;case"ZYX":this._x=L*b*T-v*P*O,this._y=v*P*T+L*b*O,this._z=v*b*O-L*P*T,this._w=v*b*T+L*P*O;break;case"YZX":this._x=L*b*T+v*P*O,this._y=v*P*T+L*b*O,this._z=v*b*O-L*P*T,this._w=v*b*T-L*P*O;break;case"XZY":this._x=L*b*T-v*P*O,this._y=v*P*T-L*b*O,this._z=v*b*O+L*P*T,this._w=v*b*T+L*P*O;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],l=t[8],c=t[1],h=t[5],m=t[9],v=t[2],b=t[6],T=t[10],L=r+h+T;if(L>0){const P=.5/Math.sqrt(L+1);this._w=.25/P,this._x=(b-m)*P,this._y=(l-v)*P,this._z=(c-o)*P}else if(r>h&&r>T){const P=2*Math.sqrt(1+r-h-T);this._w=(b-m)/P,this._x=.25*P,this._y=(o+c)/P,this._z=(l+v)/P}else if(h>T){const P=2*Math.sqrt(1+h-r-T);this._w=(l-v)/P,this._x=(o+c)/P,this._y=.25*P,this._z=(m+b)/P}else{const P=2*Math.sqrt(1+T-r-h);this._w=(c-o)/P,this._x=(l+v)/P,this._y=(m+b)/P,this._z=.25*P}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,l=e._z,c=e._w,h=t._x,m=t._y,v=t._z,b=t._w;return this._x=r*b+c*h+o*v-l*m,this._y=o*b+c*m+l*h-r*v,this._z=l*b+c*v+r*m-o*h,this._w=c*b-r*h-o*m-l*v,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,o=this._y,l=this._z,c=this._w;let h=c*e._w+r*e._x+o*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=c,this._x=r,this._y=o,this._z=l,this;const m=1-h*h;if(m<=Number.EPSILON){const P=1-t;return this._w=P*c+t*this._w,this._x=P*r+t*this._x,this._y=P*o+t*this._y,this._z=P*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),b=Math.atan2(v,h),T=Math.sin((1-t)*b)/v,L=Math.sin(t*b)/v;return this._w=c*T+this._w*L,this._x=r*T+this._x*L,this._y=o*T+this._y*L,this._z=l*T+this._z*L,this._onChangeCallback(),this}slerpQuaternions(e,t,r){this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(l),r*Math.cos(l),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ut.prototype.isQuaternion=!0;class fe{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(lT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6]*o,this.y=l[1]*t+l[4]*r+l[7]*o,this.z=l[2]*t+l[5]*r+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=e.elements,c=1/(l[3]*t+l[7]*r+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*r+l[8]*o+l[12])*c,this.y=(l[1]*t+l[5]*r+l[9]*o+l[13])*c,this.z=(l[2]*t+l[6]*r+l[10]*o+l[14])*c,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,l=e.x,c=e.y,h=e.z,m=e.w,v=m*t+c*o-h*r,b=m*r+h*t-l*o,T=m*o+l*r-c*t,L=-l*t-c*r-h*o;return this.x=v*m+L*-l+b*-h-T*-c,this.y=b*m+L*-c+T*-l-v*-h,this.z=T*m+L*-h+v*-c-b*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o,this.y=l[1]*t+l[5]*r+l[9]*o,this.z=l[2]*t+l[6]*r+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,l=e.z,c=t.x,h=t.y,m=t.z;return this.x=o*m-l*h,this.y=l*c-r*m,this.z=r*h-o*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return My.copy(this).projectOnVector(e),this.sub(My)}reflect(e){return this.sub(My.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Nr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}fe.prototype.isVector3=!0;const My=new fe,lT=new Ut;class xi{constructor(e=new fe(1/0,1/0,1/0),t=new fe(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let m=0,v=e.length;m<v;m+=3){const b=e[m],T=e[m+1],L=e[m+2];b<t&&(t=b),T<r&&(r=T),L<o&&(o=L),b>l&&(l=b),T>c&&(c=T),L>h&&(h=L)}return this.min.set(t,r,o),this.max.set(l,c,h),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let m=0,v=e.count;m<v;m++){const b=e.getX(m),T=e.getY(m),L=e.getZ(m);b<t&&(t=b),T<r&&(r=T),L<o&&(o=L),b>l&&(l=b),T>c&&(c=T),L>h&&(h=L)}return this.min.set(t,r,o),this.max.set(l,c,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=mh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Ty.copy(t.boundingBox),Ty.applyMatrix4(e.matrixWorld),this.union(Ty));const r=e.children;for(let o=0,l=r.length;o<l;o++)this.expandByObject(r[o]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,mh),mh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gh),Qp.subVectors(this.max,gh),Vu.subVectors(e.a,gh),$u.subVectors(e.b,gh),Wu.subVectors(e.c,gh),Zo.subVectors($u,Vu),Qo.subVectors(Wu,$u),pl.subVectors(Vu,Wu);let t=[0,-Zo.z,Zo.y,0,-Qo.z,Qo.y,0,-pl.z,pl.y,Zo.z,0,-Zo.x,Qo.z,0,-Qo.x,pl.z,0,-pl.x,-Zo.y,Zo.x,0,-Qo.y,Qo.x,0,-pl.y,pl.x,0];return!Ey(t,Vu,$u,Wu,Qp)||(t=[1,0,0,0,1,0,0,0,1],!Ey(t,Vu,$u,Wu,Qp))?!1:(Jp.crossVectors(Zo,Qo),t=[Jp.x,Jp.y,Jp.z],Ey(t,Vu,$u,Wu,Qp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(mh).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(uo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}xi.prototype.isBox3=!0;const uo=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],mh=new fe,Ty=new xi,Vu=new fe,$u=new fe,Wu=new fe,Zo=new fe,Qo=new fe,pl=new fe,gh=new fe,Qp=new fe,Jp=new fe,ml=new fe;function Ey(i,e,t,r,o){for(let l=0,c=i.length-3;l<=c;l+=3){ml.fromArray(i,l);const h=o.x*Math.abs(ml.x)+o.y*Math.abs(ml.y)+o.z*Math.abs(ml.z),m=e.dot(ml),v=t.dot(ml),b=r.dot(ml);if(Math.max(-Math.max(m,v,b),Math.min(m,v,b))>h)return!1}return!0}const Sk=new xi,uT=new fe,em=new fe,Ay=new fe;class co{constructor(e=new fe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Sk.setFromPoints(e).getCenter(r);let o=0;for(let l=0,c=e.length;l<c;l++)o=Math.max(o,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ay.subVectors(e,this.center);const t=Ay.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=(r-this.radius)*.5;this.center.add(Ay.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return this.center.equals(e.center)===!0?em.set(0,0,1).multiplyScalar(e.radius):em.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(uT.copy(e.center).add(em)),this.expandByPoint(uT.copy(e.center).sub(em)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fo=new fe,Cy=new fe,tm=new fe,Jo=new fe,Ly=new fe,nm=new fe,Ry=new fe;class ea{constructor(e=new fe,t=new fe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fo.copy(this.direction).multiplyScalar(t).add(this.origin),fo.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){Cy.copy(e).add(t).multiplyScalar(.5),tm.copy(t).sub(e).normalize(),Jo.copy(this.origin).sub(Cy);const l=e.distanceTo(t)*.5,c=-this.direction.dot(tm),h=Jo.dot(this.direction),m=-Jo.dot(tm),v=Jo.lengthSq(),b=Math.abs(1-c*c);let T,L,P,O;if(b>0)if(T=c*m-h,L=c*h-m,O=l*b,T>=0)if(L>=-O)if(L<=O){const z=1/b;T*=z,L*=z,P=T*(T+c*L+2*h)+L*(c*T+L+2*m)+v}else L=l,T=Math.max(0,-(c*L+h)),P=-T*T+L*(L+2*m)+v;else L=-l,T=Math.max(0,-(c*L+h)),P=-T*T+L*(L+2*m)+v;else L<=-O?(T=Math.max(0,-(-c*l+h)),L=T>0?-l:Math.min(Math.max(-l,-m),l),P=-T*T+L*(L+2*m)+v):L<=O?(T=0,L=Math.min(Math.max(-l,-m),l),P=L*(L+2*m)+v):(T=Math.max(0,-(c*l+h)),L=T>0?l:Math.min(Math.max(-l,-m),l),P=-T*T+L*(L+2*m)+v);else L=c>0?-l:l,T=Math.max(0,-(c*L+h)),P=-T*T+L*(L+2*m)+v;return r&&r.copy(this.direction).multiplyScalar(T).add(this.origin),o&&o.copy(tm).multiplyScalar(L).add(Cy),P}intersectSphere(e,t){fo.subVectors(e.center,this.origin);const r=fo.dot(this.direction),o=fo.dot(fo)-r*r,l=e.radius*e.radius;if(o>l)return null;const c=Math.sqrt(l-o),h=r-c,m=r+c;return h<0&&m<0?null:h<0?this.at(m,t):this.at(h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,l,c,h,m;const v=1/this.direction.x,b=1/this.direction.y,T=1/this.direction.z,L=this.origin;return v>=0?(r=(e.min.x-L.x)*v,o=(e.max.x-L.x)*v):(r=(e.max.x-L.x)*v,o=(e.min.x-L.x)*v),b>=0?(l=(e.min.y-L.y)*b,c=(e.max.y-L.y)*b):(l=(e.max.y-L.y)*b,c=(e.min.y-L.y)*b),r>c||l>o||((l>r||r!==r)&&(r=l),(c<o||o!==o)&&(o=c),T>=0?(h=(e.min.z-L.z)*T,m=(e.max.z-L.z)*T):(h=(e.max.z-L.z)*T,m=(e.min.z-L.z)*T),r>m||h>o)||((h>r||r!==r)&&(r=h),(m<o||o!==o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return this.intersectBox(e,fo)!==null}intersectTriangle(e,t,r,o,l){Ly.subVectors(t,e),nm.subVectors(r,e),Ry.crossVectors(Ly,nm);let c=this.direction.dot(Ry),h;if(c>0){if(o)return null;h=1}else if(c<0)h=-1,c=-c;else return null;Jo.subVectors(this.origin,e);const m=h*this.direction.dot(nm.crossVectors(Jo,nm));if(m<0)return null;const v=h*this.direction.dot(Ly.cross(Jo));if(v<0||m+v>c)return null;const b=-h*Jo.dot(Ry);return b<0?null:this.at(b/c,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qe{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,c,h,m,v,b,T,L,P,O,z,G){const k=this.elements;return k[0]=e,k[4]=t,k[8]=r,k[12]=o,k[1]=l,k[5]=c,k[9]=h,k[13]=m,k[2]=v,k[6]=b,k[10]=T,k[14]=L,k[3]=P,k[7]=O,k[11]=z,k[15]=G,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qe().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/ju.setFromMatrixColumn(e,0).length(),l=1/ju.setFromMatrixColumn(e,1).length(),c=1/ju.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*l,t[5]=r[5]*l,t[6]=r[6]*l,t[7]=0,t[8]=r[8]*c,t[9]=r[9]*c,t[10]=r[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,l=e.z,c=Math.cos(r),h=Math.sin(r),m=Math.cos(o),v=Math.sin(o),b=Math.cos(l),T=Math.sin(l);if(e.order==="XYZ"){const L=c*b,P=c*T,O=h*b,z=h*T;t[0]=m*b,t[4]=-m*T,t[8]=v,t[1]=P+O*v,t[5]=L-z*v,t[9]=-h*m,t[2]=z-L*v,t[6]=O+P*v,t[10]=c*m}else if(e.order==="YXZ"){const L=m*b,P=m*T,O=v*b,z=v*T;t[0]=L+z*h,t[4]=O*h-P,t[8]=c*v,t[1]=c*T,t[5]=c*b,t[9]=-h,t[2]=P*h-O,t[6]=z+L*h,t[10]=c*m}else if(e.order==="ZXY"){const L=m*b,P=m*T,O=v*b,z=v*T;t[0]=L-z*h,t[4]=-c*T,t[8]=O+P*h,t[1]=P+O*h,t[5]=c*b,t[9]=z-L*h,t[2]=-c*v,t[6]=h,t[10]=c*m}else if(e.order==="ZYX"){const L=c*b,P=c*T,O=h*b,z=h*T;t[0]=m*b,t[4]=O*v-P,t[8]=L*v+z,t[1]=m*T,t[5]=z*v+L,t[9]=P*v-O,t[2]=-v,t[6]=h*m,t[10]=c*m}else if(e.order==="YZX"){const L=c*m,P=c*v,O=h*m,z=h*v;t[0]=m*b,t[4]=z-L*T,t[8]=O*T+P,t[1]=T,t[5]=c*b,t[9]=-h*b,t[2]=-v*b,t[6]=P*T+O,t[10]=L-z*T}else if(e.order==="XZY"){const L=c*m,P=c*v,O=h*m,z=h*v;t[0]=m*b,t[4]=-T,t[8]=v*b,t[1]=L*T+z,t[5]=c*b,t[9]=P*T-O,t[2]=O*T-P,t[6]=h*b,t[10]=z*T+L}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mk,e,Tk)}lookAt(e,t,r){const o=this.elements;return Di.subVectors(e,t),Di.lengthSq()===0&&(Di.z=1),Di.normalize(),ta.crossVectors(r,Di),ta.lengthSq()===0&&(Math.abs(r.z)===1?Di.x+=1e-4:Di.z+=1e-4,Di.normalize(),ta.crossVectors(r,Di)),ta.normalize(),rm.crossVectors(Di,ta),o[0]=ta.x,o[4]=rm.x,o[8]=Di.x,o[1]=ta.y,o[5]=rm.y,o[9]=Di.y,o[2]=ta.z,o[6]=rm.z,o[10]=Di.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,c=r[0],h=r[4],m=r[8],v=r[12],b=r[1],T=r[5],L=r[9],P=r[13],O=r[2],z=r[6],G=r[10],k=r[14],A=r[3],N=r[7],I=r[11],B=r[15],V=o[0],X=o[4],Q=o[8],ae=o[12],le=o[1],he=o[5],re=o[9],ee=o[13],_=o[2],p=o[6],Z=o[10],E=o[14],ye=o[3],Re=o[7],Me=o[11],pe=o[15];return l[0]=c*V+h*le+m*_+v*ye,l[4]=c*X+h*he+m*p+v*Re,l[8]=c*Q+h*re+m*Z+v*Me,l[12]=c*ae+h*ee+m*E+v*pe,l[1]=b*V+T*le+L*_+P*ye,l[5]=b*X+T*he+L*p+P*Re,l[9]=b*Q+T*re+L*Z+P*Me,l[13]=b*ae+T*ee+L*E+P*pe,l[2]=O*V+z*le+G*_+k*ye,l[6]=O*X+z*he+G*p+k*Re,l[10]=O*Q+z*re+G*Z+k*Me,l[14]=O*ae+z*ee+G*E+k*pe,l[3]=A*V+N*le+I*_+B*ye,l[7]=A*X+N*he+I*p+B*Re,l[11]=A*Q+N*re+I*Z+B*Me,l[15]=A*ae+N*ee+I*E+B*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],l=e[12],c=e[1],h=e[5],m=e[9],v=e[13],b=e[2],T=e[6],L=e[10],P=e[14],O=e[3],z=e[7],G=e[11],k=e[15];return O*(+l*m*T-o*v*T-l*h*L+r*v*L+o*h*P-r*m*P)+z*(+t*m*P-t*v*L+l*c*L-o*c*P+o*v*b-l*m*b)+G*(+t*v*T-t*h*P-l*c*T+r*c*P+l*h*b-r*v*b)+k*(-o*h*b-t*m*T+t*h*L+o*c*T-r*c*L+r*m*b)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],v=e[7],b=e[8],T=e[9],L=e[10],P=e[11],O=e[12],z=e[13],G=e[14],k=e[15],A=T*G*v-z*L*v+z*m*P-h*G*P-T*m*k+h*L*k,N=O*L*v-b*G*v-O*m*P+c*G*P+b*m*k-c*L*k,I=b*z*v-O*T*v+O*h*P-c*z*P-b*h*k+c*T*k,B=O*T*m-b*z*m-O*h*L+c*z*L+b*h*G-c*T*G,V=t*A+r*N+o*I+l*B;if(V===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const X=1/V;return e[0]=A*X,e[1]=(z*L*l-T*G*l-z*o*P+r*G*P+T*o*k-r*L*k)*X,e[2]=(h*G*l-z*m*l+z*o*v-r*G*v-h*o*k+r*m*k)*X,e[3]=(T*m*l-h*L*l-T*o*v+r*L*v+h*o*P-r*m*P)*X,e[4]=N*X,e[5]=(b*G*l-O*L*l+O*o*P-t*G*P-b*o*k+t*L*k)*X,e[6]=(O*m*l-c*G*l-O*o*v+t*G*v+c*o*k-t*m*k)*X,e[7]=(c*L*l-b*m*l+b*o*v-t*L*v-c*o*P+t*m*P)*X,e[8]=I*X,e[9]=(O*T*l-b*z*l-O*r*P+t*z*P+b*r*k-t*T*k)*X,e[10]=(c*z*l-O*h*l+O*r*v-t*z*v-c*r*k+t*h*k)*X,e[11]=(b*h*l-c*T*l-b*r*v+t*T*v+c*r*P-t*h*P)*X,e[12]=B*X,e[13]=(b*z*o-O*T*o+O*r*L-t*z*L-b*r*G+t*T*G)*X,e[14]=(O*h*o-c*z*o-O*r*m+t*z*m+c*r*G-t*h*G)*X,e[15]=(c*T*o-b*h*o+b*r*m-t*T*m-c*r*L+t*h*L)*X,this}scale(e){const t=this.elements,r=e.x,o=e.y,l=e.z;return t[0]*=r,t[4]*=o,t[8]*=l,t[1]*=r,t[5]*=o,t[9]*=l,t[2]*=r,t[6]*=o,t[10]*=l,t[3]*=r,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,o))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),l=1-r,c=e.x,h=e.y,m=e.z,v=l*c,b=l*h;return this.set(v*c+r,v*h-o*m,v*m+o*h,0,v*h+o*m,b*h+r,b*m-o*c,0,v*m-o*h,b*m+o*c,l*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,l,c){return this.set(1,r,l,0,e,1,c,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,l=t._x,c=t._y,h=t._z,m=t._w,v=l+l,b=c+c,T=h+h,L=l*v,P=l*b,O=l*T,z=c*b,G=c*T,k=h*T,A=m*v,N=m*b,I=m*T,B=r.x,V=r.y,X=r.z;return o[0]=(1-(z+k))*B,o[1]=(P+I)*B,o[2]=(O-N)*B,o[3]=0,o[4]=(P-I)*V,o[5]=(1-(L+k))*V,o[6]=(G+A)*V,o[7]=0,o[8]=(O+N)*X,o[9]=(G-A)*X,o[10]=(1-(L+z))*X,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let l=ju.set(o[0],o[1],o[2]).length();const c=ju.set(o[4],o[5],o[6]).length(),h=ju.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],ms.copy(this);const v=1/l,b=1/c,T=1/h;return ms.elements[0]*=v,ms.elements[1]*=v,ms.elements[2]*=v,ms.elements[4]*=b,ms.elements[5]*=b,ms.elements[6]*=b,ms.elements[8]*=T,ms.elements[9]*=T,ms.elements[10]*=T,t.setFromRotationMatrix(ms),r.x=l,r.y=c,r.z=h,this}makePerspective(e,t,r,o,l,c){c===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,m=2*l/(t-e),v=2*l/(r-o),b=(t+e)/(t-e),T=(r+o)/(r-o),L=-(c+l)/(c-l),P=-2*c*l/(c-l);return h[0]=m,h[4]=0,h[8]=b,h[12]=0,h[1]=0,h[5]=v,h[9]=T,h[13]=0,h[2]=0,h[6]=0,h[10]=L,h[14]=P,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,o,l,c){const h=this.elements,m=1/(t-e),v=1/(r-o),b=1/(c-l),T=(t+e)*m,L=(r+o)*v,P=(c+l)*b;return h[0]=2*m,h[4]=0,h[8]=0,h[12]=-T,h[1]=0,h[5]=2*v,h[9]=0,h[13]=-L,h[2]=0,h[6]=0,h[10]=-2*b,h[14]=-P,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Qe.prototype.isMatrix4=!0;const ju=new fe,ms=new Qe,Mk=new fe(0,0,0),Tk=new fe(1,1,1),ta=new fe,rm=new fe,Di=new fe,cT=new Qe,fT=new Ut;class wi{constructor(e=0,t=0,r=0,o=wi.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,l=o[0],c=o[4],h=o[8],m=o[1],v=o[5],b=o[9],T=o[2],L=o[6],P=o[10];switch(t){case"XYZ":this._y=Math.asin(Nr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-b,P),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(L,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Nr(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(h,P),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-T,l),this._z=0);break;case"ZXY":this._x=Math.asin(Nr(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-T,P),this._z=Math.atan2(-c,v)):(this._y=0,this._z=Math.atan2(m,l));break;case"ZYX":this._y=Math.asin(-Nr(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(L,P),this._z=Math.atan2(m,l)):(this._x=0,this._z=Math.atan2(-c,v));break;case"YZX":this._z=Math.asin(Nr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,v),this._y=Math.atan2(-T,l)):(this._x=0,this._y=Math.atan2(h,P));break;case"XZY":this._z=Math.asin(-Nr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(L,v),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-b,P),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return cT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fT.setFromEuler(this),this.setFromQuaternion(fT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new fe(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}wi.prototype.isEuler=!0;wi.DefaultOrder="XYZ";wi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class im{constructor(){this.mask=1|0}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let Ek=0;const hT=new fe,qu=new Ut,ho=new Qe,sm=new fe,vh=new fe,Ak=new fe,Ck=new Ut,dT=new fe(1,0,0),pT=new fe(0,1,0),mT=new fe(0,0,1),Lk={type:"added"},gT={type:"removed"};class Vt extends Ko{constructor(){super();Object.defineProperty(this,"id",{value:Ek++}),this.uuid=ki(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vt.DefaultUp.clone();const e=new fe,t=new wi,r=new Ut,o=new fe(1,1,1);function l(){r.setFromEuler(t,!1)}function c(){t.setFromQuaternion(r,void 0,!1)}t._onChange(l),r._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Qe},normalMatrix:{value:new vn}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=Vt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new im,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.multiply(qu),this}rotateOnWorldAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.premultiply(qu),this}rotateX(e){return this.rotateOnAxis(dT,e)}rotateY(e){return this.rotateOnAxis(pT,e)}rotateZ(e){return this.rotateOnAxis(mT,e)}translateOnAxis(e,t){return hT.copy(e).applyQuaternion(this.quaternion),this.position.add(hT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(dT,e)}translateY(e){return this.translateOnAxis(pT,e)}translateZ(e){return this.translateOnAxis(mT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ho.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?sm.copy(e):sm.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),vh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ho.lookAt(vh,sm,this.up):ho.lookAt(sm,vh,this.up),this.quaternion.setFromRotationMatrix(ho),o&&(ho.extractRotation(o.matrixWorld),qu.setFromRotationMatrix(ho),this.quaternion.premultiply(qu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Lk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(gT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(gT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ho.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ho.multiply(e.parent.matrixWorld)),e.applyMatrix4(ho),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const c=this.children[r].getObjectByProperty(e,t);if(c!==void 0)return c}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vh,e,Ak),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vh,Ck,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let l=0,c=o.length;l<c;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function l(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let v=0,b=m.length;v<b;v++){const T=m[v];l(e.shapes,T)}else l(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,v=this.material.length;m<v;m++)h.push(l(e.materials,this.material[m]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];o.animations.push(l(e.animations,m))}}if(t){const h=c(e.geometries),m=c(e.materials),v=c(e.textures),b=c(e.images),T=c(e.shapes),L=c(e.skeletons),P=c(e.animations);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),b.length>0&&(r.images=b),T.length>0&&(r.shapes=T),L.length>0&&(r.skeletons=L),P.length>0&&(r.animations=P)}return r.object=o,r;function c(h){const m=[];for(const v in h){const b=h[v];delete b.metadata,m.push(b)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Vt.DefaultUp=new fe(0,1,0);Vt.DefaultMatrixAutoUpdate=!0;Vt.prototype.isObject3D=!0;const gs=new fe,po=new fe,Iy=new fe,mo=new fe,Xu=new fe,Yu=new fe,vT=new fe,Py=new fe,ky=new fe,Oy=new fe;class nr{constructor(e=new fe,t=new fe,r=new fe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),gs.subVectors(e,t),o.cross(gs);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,r,o,l){gs.subVectors(o,t),po.subVectors(r,t),Iy.subVectors(e,t);const c=gs.dot(gs),h=gs.dot(po),m=gs.dot(Iy),v=po.dot(po),b=po.dot(Iy),T=c*v-h*h;if(T===0)return l.set(-2,-1,-1);const L=1/T,P=(v*m-h*b)*L,O=(c*b-h*m)*L;return l.set(1-P-O,O,P)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,mo),mo.x>=0&&mo.y>=0&&mo.x+mo.y<=1}static getUV(e,t,r,o,l,c,h,m){return this.getBarycoord(e,t,r,o,mo),m.set(0,0),m.addScaledVector(l,mo.x),m.addScaledVector(c,mo.y),m.addScaledVector(h,mo.z),m}static isFrontFacing(e,t,r,o){return gs.subVectors(r,t),po.subVectors(e,t),gs.cross(po).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gs.subVectors(this.c,this.b),po.subVectors(this.a,this.b),gs.cross(po).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return nr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,l){return nr.getUV(e,this.a,this.b,this.c,t,r,o,l)}containsPoint(e){return nr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,l=this.c;let c,h;Xu.subVectors(o,r),Yu.subVectors(l,r),Py.subVectors(e,r);const m=Xu.dot(Py),v=Yu.dot(Py);if(m<=0&&v<=0)return t.copy(r);ky.subVectors(e,o);const b=Xu.dot(ky),T=Yu.dot(ky);if(b>=0&&T<=b)return t.copy(o);const L=m*T-b*v;if(L<=0&&m>=0&&b<=0)return c=m/(m-b),t.copy(r).addScaledVector(Xu,c);Oy.subVectors(e,l);const P=Xu.dot(Oy),O=Yu.dot(Oy);if(O>=0&&P<=O)return t.copy(l);const z=P*v-m*O;if(z<=0&&v>=0&&O<=0)return h=v/(v-O),t.copy(r).addScaledVector(Yu,h);const G=b*O-P*T;if(G<=0&&T-b>=0&&P-O>=0)return vT.subVectors(l,o),h=(T-b)/(T-b+(P-O)),t.copy(o).addScaledVector(vT,h);const k=1/(G+z+L);return c=z*k,h=L*k,t.copy(r).addScaledVector(Xu,c).addScaledVector(Yu,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Rk=0;class rr extends Ko{constructor(){super();Object.defineProperty(this,"id",{value:Rk++}),this.uuid=ki(),this.name="",this.type="Material",this.fog=!0,this.blending=Ou,this.side=qo,this.vertexColors=!1,this.opacity=1,this.format=tr,this.transparent=!1,this.blendSrc=oy,this.blendDst=ay,this.blendEquation=rl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Vp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xp,this.stencilZFail=Xp,this.stencilZPass=Xp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===ey;continue}const o=this[t];if(o===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ou&&(r.blending=this.blending),this.side!==qo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.format!==tr&&(r.format=this.format),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function o(l){const c=[];for(const h in l){const m=l[h];delete m.metadata,c.push(m)}return c}if(t){const l=o(e.textures),c=o(e.images);l.length>0&&(r.textures=l),c.length>0&&(r.images=c)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const o=t.length;r=new Array(o);for(let l=0;l!==o;++l)r[l]=t[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}rr.prototype.isMaterial=!0;const yT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vs={h:0,s:0,l:0},om={h:0,s:0,l:0};function Dy(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}function Ny(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Fy(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}class Ke{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=_y(e,1),t=Nr(t,0,1),r=Nr(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=Dy(l,o,e+1/3),this.g=Dy(l,o,e),this.b=Dy(l,o,e-1/3)}return this}setStyle(e){function t(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,t(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,t(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const h=parseFloat(o[1])/360,m=parseInt(o[2],10)/100,v=parseInt(o[3],10)/100;return t(o[4]),this.setHSL(h,m,v)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=yT[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ny(e.r),this.g=Ny(e.g),this.b=Ny(e.b),this}copyLinearToSRGB(e){return this.r=Fy(e.r),this.g=Fy(e.g),this.b=Fy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,r=this.g,o=this.b,l=Math.max(t,r,o),c=Math.min(t,r,o);let h,m;const v=(c+l)/2;if(c===l)h=0,m=0;else{const b=l-c;switch(m=v<=.5?b/(l+c):b/(2-l-c),l){case t:h=(r-o)/b+(r<o?6:0);break;case r:h=(o-t)/b+2;break;case o:h=(t-r)/b+4;break}h/=6}return e.h=h,e.s=m,e.l=v,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(vs),vs.h+=e,vs.s+=t,vs.l+=r,this.setHSL(vs.h,vs.s,vs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(vs),e.getHSL(om);const r=ph(vs.h,om.h,t),o=ph(vs.s,om.s,t),l=ph(vs.l,om.l,t);return this.setHSL(r,o,l),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ke.NAMES=yT;Ke.prototype.isColor=!0;Ke.prototype.r=1;Ke.prototype.g=1;Ke.prototype.b=1;class qr extends rr{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}qr.prototype.isMeshBasicMaterial=!0;const En=new fe,am=new We;class Ot{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=zu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),c=new Ke),t[r++]=c.r,t[r++]=c.g,t[r++]=c.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),c=new We),t[r++]=c.x,t[r++]=c.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),c=new fe),t[r++]=c.x,t[r++]=c.y,t[r++]=c.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),c=new an),t[r++]=c.x,t[r++]=c.y,t[r++]=c.z,t[r++]=c.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)am.fromBufferAttribute(this,t),am.applyMatrix3(e),this.setXY(t,am.x,am.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)En.fromBufferAttribute(this,t),En.applyMatrix3(e),this.setXYZ(t,En.x,En.y,En.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)En.x=this.getX(t),En.y=this.getY(t),En.z=this.getZ(t),En.applyMatrix4(e),this.setXYZ(t,En.x,En.y,En.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)En.x=this.getX(t),En.y=this.getY(t),En.z=this.getZ(t),En.applyNormalMatrix(e),this.setXYZ(t,En.x,En.y,En.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)En.x=this.getX(t),En.y=this.getY(t),En.z=this.getZ(t),En.transformDirection(e),this.setXYZ(t,En.x,En.y,En.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zu&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Ot.prototype.isBufferAttribute=!0;class xT extends Ot{constructor(e,t,r){super(new Int8Array(e),t,r)}}class wT extends Ot{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class _T extends Ot{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class bT extends Ot{constructor(e,t,r){super(new Int16Array(e),t,r)}}class yh extends Ot{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ST extends Ot{constructor(e,t,r){super(new Int32Array(e),t,r)}}class lm extends Ot{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class MT extends Ot{constructor(e,t,r){super(new Uint16Array(e),t,r)}}MT.prototype.isFloat16BufferAttribute=!0;class pt extends Ot{constructor(e,t,r){super(new Float32Array(e),t,r)}}class TT extends Ot{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Ik=0;const Xi=new Qe,By=new Vt,Ku=new fe,Ni=new xi,xh=new xi,Tr=new fe;class bt extends Ko{constructor(){super();Object.defineProperty(this,"id",{value:Ik++}),this.uuid=ki(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oT(e)>65535?lm:yh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const l=new vn().getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xi.makeRotationFromQuaternion(e),this.applyMatrix4(Xi),this}rotateX(e){return Xi.makeRotationX(e),this.applyMatrix4(Xi),this}rotateY(e){return Xi.makeRotationY(e),this.applyMatrix4(Xi),this}rotateZ(e){return Xi.makeRotationZ(e),this.applyMatrix4(Xi),this}translate(e,t,r){return Xi.makeTranslation(e,t,r),this.applyMatrix4(Xi),this}scale(e,t,r){return Xi.makeScale(e,t,r),this.applyMatrix4(Xi),this}lookAt(e){return By.lookAt(e),By.updateMatrix(),this.applyMatrix4(By.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ku).negate(),this.translate(Ku.x,Ku.y,Ku.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const l=e[r];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new pt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const l=t[r];Ni.setFromBufferAttribute(l),this.morphTargetsRelative?(Tr.addVectors(this.boundingBox.min,Ni.min),this.boundingBox.expandByPoint(Tr),Tr.addVectors(this.boundingBox.max,Ni.max),this.boundingBox.expandByPoint(Tr)):(this.boundingBox.expandByPoint(Ni.min),this.boundingBox.expandByPoint(Ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new fe,1/0);return}if(e){const r=this.boundingSphere.center;if(Ni.setFromBufferAttribute(e),t)for(let l=0,c=t.length;l<c;l++){const h=t[l];xh.setFromBufferAttribute(h),this.morphTargetsRelative?(Tr.addVectors(Ni.min,xh.min),Ni.expandByPoint(Tr),Tr.addVectors(Ni.max,xh.max),Ni.expandByPoint(Tr)):(Ni.expandByPoint(xh.min),Ni.expandByPoint(xh.max))}Ni.getCenter(r);let o=0;for(let l=0,c=e.count;l<c;l++)Tr.fromBufferAttribute(e,l),o=Math.max(o,r.distanceToSquared(Tr));if(t)for(let l=0,c=t.length;l<c;l++){const h=t[l],m=this.morphTargetsRelative;for(let v=0,b=h.count;v<b;v++)Tr.fromBufferAttribute(h,v),m&&(Ku.fromBufferAttribute(e,v),Tr.add(Ku)),o=Math.max(o,r.distanceToSquared(Tr))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=t.position.array,l=t.normal.array,c=t.uv.array,h=o.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Ot(new Float32Array(4*h),4));const m=t.tangent.array,v=[],b=[];for(let le=0;le<h;le++)v[le]=new fe,b[le]=new fe;const T=new fe,L=new fe,P=new fe,O=new We,z=new We,G=new We,k=new fe,A=new fe;function N(le,he,re){T.fromArray(o,le*3),L.fromArray(o,he*3),P.fromArray(o,re*3),O.fromArray(c,le*2),z.fromArray(c,he*2),G.fromArray(c,re*2),L.sub(T),P.sub(T),z.sub(O),G.sub(O);const ee=1/(z.x*G.y-G.x*z.y);!isFinite(ee)||(k.copy(L).multiplyScalar(G.y).addScaledVector(P,-z.y).multiplyScalar(ee),A.copy(P).multiplyScalar(z.x).addScaledVector(L,-G.x).multiplyScalar(ee),v[le].add(k),v[he].add(k),v[re].add(k),b[le].add(A),b[he].add(A),b[re].add(A))}let I=this.groups;I.length===0&&(I=[{start:0,count:r.length}]);for(let le=0,he=I.length;le<he;++le){const re=I[le],ee=re.start,_=re.count;for(let p=ee,Z=ee+_;p<Z;p+=3)N(r[p+0],r[p+1],r[p+2])}const B=new fe,V=new fe,X=new fe,Q=new fe;function ae(le){X.fromArray(l,le*3),Q.copy(X);const he=v[le];B.copy(he),B.sub(X.multiplyScalar(X.dot(he))).normalize(),V.crossVectors(Q,he);const ee=V.dot(b[le])<0?-1:1;m[le*4]=B.x,m[le*4+1]=B.y,m[le*4+2]=B.z,m[le*4+3]=ee}for(let le=0,he=I.length;le<he;++le){const re=I[le],ee=re.start,_=re.count;for(let p=ee,Z=ee+_;p<Z;p+=3)ae(r[p+0]),ae(r[p+1]),ae(r[p+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ot(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let L=0,P=r.count;L<P;L++)r.setXYZ(L,0,0,0);const o=new fe,l=new fe,c=new fe,h=new fe,m=new fe,v=new fe,b=new fe,T=new fe;if(e)for(let L=0,P=e.count;L<P;L+=3){const O=e.getX(L+0),z=e.getX(L+1),G=e.getX(L+2);o.fromBufferAttribute(t,O),l.fromBufferAttribute(t,z),c.fromBufferAttribute(t,G),b.subVectors(c,l),T.subVectors(o,l),b.cross(T),h.fromBufferAttribute(r,O),m.fromBufferAttribute(r,z),v.fromBufferAttribute(r,G),h.add(b),m.add(b),v.add(b),r.setXYZ(O,h.x,h.y,h.z),r.setXYZ(z,m.x,m.y,m.z),r.setXYZ(G,v.x,v.y,v.z)}else for(let L=0,P=t.count;L<P;L+=3)o.fromBufferAttribute(t,L+0),l.fromBufferAttribute(t,L+1),c.fromBufferAttribute(t,L+2),b.subVectors(c,l),T.subVectors(o,l),b.cross(T),r.setXYZ(L+0,b.x,b.y,b.z),r.setXYZ(L+1,b.x,b.y,b.z),r.setXYZ(L+2,b.x,b.y,b.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(e.attributes[o]===void 0)continue;const c=r[o].array,h=e.attributes[o],m=h.array,v=h.itemSize*t,b=Math.min(m.length,c.length-v);for(let T=0,L=v;T<b;T++,L++)c[L]=m[T]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Tr.fromBufferAttribute(e,t),Tr.normalize(),e.setXYZ(t,Tr.x,Tr.y,Tr.z)}toNonIndexed(){function e(h,m){const v=h.array,b=h.itemSize,T=h.normalized,L=new v.constructor(m.length*b);let P=0,O=0;for(let z=0,G=m.length;z<G;z++){h.isInterleavedBufferAttribute?P=m[z]*h.data.stride+h.offset:P=m[z]*b;for(let k=0;k<b;k++)L[O++]=v[P++]}return new Ot(L,b,T)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bt,r=this.index.array,o=this.attributes;for(const h in o){const m=o[h],v=e(m,r);t.setAttribute(h,v)}const l=this.morphAttributes;for(const h in l){const m=[],v=l[h];for(let b=0,T=v.length;b<T;b++){const L=v[b],P=e(L,r);m.push(P)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,m=c.length;h<m;h++){const v=c[h];t.addGroup(v.start,v.count,v.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const v in m)m[v]!==void 0&&(e[v]=m[v]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r){const v=r[m];e.data.attributes[m]=v.toJSON(e.data)}const o={};let l=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],b=[];for(let T=0,L=v.length;T<L;T++){const P=v[T];b.push(P.toJSON(e.data))}b.length>0&&(o[m]=b,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const o=e.attributes;for(const v in o){const b=o[v];this.setAttribute(v,b.clone(t))}const l=e.morphAttributes;for(const v in l){const b=[],T=l[v];for(let L=0,P=T.length;L<P;L++)b.push(T[L].clone(t));this.morphAttributes[v]=b}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let v=0,b=c.length;v<b;v++){const T=c[v];this.addGroup(T.start,T.count,T.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}bt.prototype.isBufferGeometry=!0;const ET=new Qe,Zu=new ea,Uy=new co,na=new fe,ra=new fe,ia=new fe,zy=new fe,Hy=new fe,Gy=new fe,um=new fe,cm=new fe,fm=new fe,hm=new We,dm=new We,pm=new We,Vy=new fe,mm=new fe;class Fn extends Vt{constructor(e=new bt,t=new qr){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,l=this.matrixWorld;if(o===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Uy.copy(r.boundingSphere),Uy.applyMatrix4(l),e.ray.intersectsSphere(Uy)===!1)||(ET.copy(l).invert(),Zu.copy(e.ray).applyMatrix4(ET),r.boundingBox!==null&&Zu.intersectsBox(r.boundingBox)===!1))return;let c;if(r.isBufferGeometry){const h=r.index,m=r.attributes.position,v=r.morphAttributes.position,b=r.morphTargetsRelative,T=r.attributes.uv,L=r.attributes.uv2,P=r.groups,O=r.drawRange;if(h!==null)if(Array.isArray(o))for(let z=0,G=P.length;z<G;z++){const k=P[z],A=o[k.materialIndex],N=Math.max(k.start,O.start),I=Math.min(h.count,Math.min(k.start+k.count,O.start+O.count));for(let B=N,V=I;B<V;B+=3){const X=h.getX(B),Q=h.getX(B+1),ae=h.getX(B+2);c=gm(this,A,e,Zu,m,v,b,T,L,X,Q,ae),c&&(c.faceIndex=Math.floor(B/3),c.face.materialIndex=k.materialIndex,t.push(c))}}else{const z=Math.max(0,O.start),G=Math.min(h.count,O.start+O.count);for(let k=z,A=G;k<A;k+=3){const N=h.getX(k),I=h.getX(k+1),B=h.getX(k+2);c=gm(this,o,e,Zu,m,v,b,T,L,N,I,B),c&&(c.faceIndex=Math.floor(k/3),t.push(c))}}else if(m!==void 0)if(Array.isArray(o))for(let z=0,G=P.length;z<G;z++){const k=P[z],A=o[k.materialIndex],N=Math.max(k.start,O.start),I=Math.min(m.count,Math.min(k.start+k.count,O.start+O.count));for(let B=N,V=I;B<V;B+=3){const X=B,Q=B+1,ae=B+2;c=gm(this,A,e,Zu,m,v,b,T,L,X,Q,ae),c&&(c.faceIndex=Math.floor(B/3),c.face.materialIndex=k.materialIndex,t.push(c))}}else{const z=Math.max(0,O.start),G=Math.min(m.count,O.start+O.count);for(let k=z,A=G;k<A;k+=3){const N=k,I=k+1,B=k+2;c=gm(this,o,e,Zu,m,v,b,T,L,N,I,B),c&&(c.faceIndex=Math.floor(k/3),t.push(c))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Fn.prototype.isMesh=!0;function Pk(i,e,t,r,o,l,c,h){let m;if(e.side===qn?m=r.intersectTriangle(c,l,o,!0,h):m=r.intersectTriangle(o,l,c,e.side!==Is,h),m===null)return null;mm.copy(h),mm.applyMatrix4(i.matrixWorld);const v=t.ray.origin.distanceTo(mm);return v<t.near||v>t.far?null:{distance:v,point:mm.clone(),object:i}}function gm(i,e,t,r,o,l,c,h,m,v,b,T){na.fromBufferAttribute(o,v),ra.fromBufferAttribute(o,b),ia.fromBufferAttribute(o,T);const L=i.morphTargetInfluences;if(l&&L){um.set(0,0,0),cm.set(0,0,0),fm.set(0,0,0);for(let O=0,z=l.length;O<z;O++){const G=L[O],k=l[O];G!==0&&(zy.fromBufferAttribute(k,v),Hy.fromBufferAttribute(k,b),Gy.fromBufferAttribute(k,T),c?(um.addScaledVector(zy,G),cm.addScaledVector(Hy,G),fm.addScaledVector(Gy,G)):(um.addScaledVector(zy.sub(na),G),cm.addScaledVector(Hy.sub(ra),G),fm.addScaledVector(Gy.sub(ia),G)))}na.add(um),ra.add(cm),ia.add(fm)}i.isSkinnedMesh&&(i.boneTransform(v,na),i.boneTransform(b,ra),i.boneTransform(T,ia));const P=Pk(i,e,t,r,na,ra,ia,Vy);if(P){h&&(hm.fromBufferAttribute(h,v),dm.fromBufferAttribute(h,b),pm.fromBufferAttribute(h,T),P.uv=nr.getUV(Vy,na,ra,ia,hm,dm,pm,new We)),m&&(hm.fromBufferAttribute(m,v),dm.fromBufferAttribute(m,b),pm.fromBufferAttribute(m,T),P.uv2=nr.getUV(Vy,na,ra,ia,hm,dm,pm,new We));const O={a:v,b,c:T,normal:new fe,materialIndex:0};nr.getNormal(na,ra,ia,O.normal),P.face=O}return P}class go extends bt{constructor(e=1,t=1,r=1,o=1,l=1,c=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:l,depthSegments:c};const h=this;o=Math.floor(o),l=Math.floor(l),c=Math.floor(c);const m=[],v=[],b=[],T=[];let L=0,P=0;O("z","y","x",-1,-1,r,t,e,c,l,0),O("z","y","x",1,-1,r,t,-e,c,l,1),O("x","z","y",1,1,e,r,t,o,c,2),O("x","z","y",1,-1,e,r,-t,o,c,3),O("x","y","z",1,-1,e,t,r,o,l,4),O("x","y","z",-1,-1,e,t,-r,o,l,5),this.setIndex(m),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(b,3)),this.setAttribute("uv",new pt(T,2));function O(z,G,k,A,N,I,B,V,X,Q,ae){const le=I/X,he=B/Q,re=I/2,ee=B/2,_=V/2,p=X+1,Z=Q+1;let E=0,ye=0;const Re=new fe;for(let Me=0;Me<Z;Me++){const pe=Me*he-ee;for(let ve=0;ve<p;ve++){const Ce=ve*le-re;Re[z]=Ce*A,Re[G]=pe*N,Re[k]=_,v.push(Re.x,Re.y,Re.z),Re[z]=0,Re[G]=0,Re[k]=V>0?1:-1,b.push(Re.x,Re.y,Re.z),T.push(ve/X),T.push(1-Me/Q),E+=1}}for(let Me=0;Me<Q;Me++)for(let pe=0;pe<X;pe++){const ve=L+pe+p*Me,Ce=L+pe+p*(Me+1),_e=L+(pe+1)+p*(Me+1),Pe=L+(pe+1)+p*Me;m.push(ve,Ce,Pe),m.push(Ce,_e,Pe),ye+=6}h.addGroup(P,ye,ae),P+=ye,L+=E}}static fromJSON(e){return new go(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qu(i){const e={};for(const t in i){e[t]={};for(const r in i[t]){const o=i[t][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?e[t][r]=o.clone():Array.isArray(o)?e[t][r]=o.slice():e[t][r]=o}}return e}function Xr(i){const e={};for(let t=0;t<i.length;t++){const r=Qu(i[t]);for(const o in r)e[o]=r[o]}return e}const $y={clone:Qu,merge:Xr};var kk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ok=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Os extends rr{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=kk,this.fragmentShader=Ok,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const c=this.uniforms[o].value;c&&c.isTexture?t.uniforms[o]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[o]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[o]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[o]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[o]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[o]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[o]={type:"m4",value:c.toArray()}:t.uniforms[o]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Os.prototype.isShaderMaterial=!0;class wh extends Vt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}wh.prototype.isCamera=!0;class dr extends wh{constructor(e=50,t=1,r=.1,o=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dh*2*Math.atan(Math.tan(hl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,l,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hl*.5*this.fov)/this.zoom,r=2*t,o=this.aspect*r,l=-.5*o;const c=this.view;if(this.view!==null&&this.view.enabled){const m=c.fullWidth,v=c.fullHeight;l+=c.offsetX*o/m,t-=c.offsetY*r/v,o*=c.width/m,r*=c.height/v}const h=this.filmOffset;h!==0&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}dr.prototype.isPerspectiveCamera=!0;const Ju=90,ec=1;class vm extends Vt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const o=new dr(Ju,ec,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new fe(1,0,0)),this.add(o);const l=new dr(Ju,ec,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new fe(-1,0,0)),this.add(l);const c=new dr(Ju,ec,e,t);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(new fe(0,1,0)),this.add(c);const h=new dr(Ju,ec,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new fe(0,-1,0)),this.add(h);const m=new dr(Ju,ec,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new fe(0,0,1)),this.add(m);const v=new dr(Ju,ec,e,t);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new fe(0,0,-1)),this.add(v)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[o,l,c,h,m,v]=this.children,b=e.xr.enabled,T=e.getRenderTarget();e.xr.enabled=!1;const L=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,l),e.setRenderTarget(r,2),e.render(t,c),e.setRenderTarget(r,3),e.render(t,h),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=L,e.setRenderTarget(r,5),e.render(t,v),e.setRenderTarget(T),e.xr.enabled=b}}class tc extends Nn{constructor(e,t,r,o,l,c,h,m,v,b){e=e!==void 0?e:[],t=t!==void 0?t:il;super(e,t,r,o,l,c,h,m,v,b);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}tc.prototype.isCubeTexture=!0;class ym extends Oi{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new tc(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Dn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=tr,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new go(5,5,5),l=new Os({name:"CubemapFromEquirect",uniforms:Qu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:qn,blending:io});l.uniforms.tEquirect.value=t;const c=new Fn(o,l),h=t.minFilter;return t.minFilter===oo&&(t.minFilter=Dn),new vm(1,10,this).update(e,c),t.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,r,o){const l=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,r,o);e.setRenderTarget(l)}}ym.prototype.isWebGLCubeRenderTarget=!0;const Wy=new fe,Dk=new fe,Nk=new vn;class Ds{constructor(e=new fe(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=Wy.subVectors(r,t).cross(Dk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Wy),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(r).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Nk.getNormalMatrix(e),o=this.coplanarPoint(Wy).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Ds.prototype.isPlane=!0;const nc=new co,xm=new fe;class _h{constructor(e=new Ds,t=new Ds,r=new Ds,o=new Ds,l=new Ds,c=new Ds){this.planes=[e,t,r,o,l,c]}set(e,t,r,o,l,c){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(r),h[3].copy(o),h[4].copy(l),h[5].copy(c),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],l=r[1],c=r[2],h=r[3],m=r[4],v=r[5],b=r[6],T=r[7],L=r[8],P=r[9],O=r[10],z=r[11],G=r[12],k=r[13],A=r[14],N=r[15];return t[0].setComponents(h-o,T-m,z-L,N-G).normalize(),t[1].setComponents(h+o,T+m,z+L,N+G).normalize(),t[2].setComponents(h+l,T+v,z+P,N+k).normalize(),t[3].setComponents(h-l,T-v,z-P,N-k).normalize(),t[4].setComponents(h-c,T-b,z-O,N-A).normalize(),t[5].setComponents(h+c,T+b,z+O,N+A).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSprite(e){return nc.center.set(0,0,0),nc.radius=.7071067811865476,nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(xm.x=o.normal.x>0?e.max.x:e.min.x,xm.y=o.normal.y>0?e.max.y:e.min.y,xm.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(xm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function AT(){let i=null,e=!1,t=null,r=null;function o(l,c){t(l,c),r=i.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(r=i.requestAnimationFrame(o),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){i=l}}}function Fk(i,e){const t=e.isWebGL2,r=new WeakMap;function o(v,b){const T=v.array,L=v.usage,P=i.createBuffer();i.bindBuffer(b,P),i.bufferData(b,T,L),v.onUploadCallback();let O=5126;return T instanceof Float32Array?O=5126:T instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):T instanceof Uint16Array?v.isFloat16BufferAttribute?t?O=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):O=5123:T instanceof Int16Array?O=5122:T instanceof Uint32Array?O=5125:T instanceof Int32Array?O=5124:T instanceof Int8Array?O=5120:(T instanceof Uint8Array||T instanceof Uint8ClampedArray)&&(O=5121),{buffer:P,type:O,bytesPerElement:T.BYTES_PER_ELEMENT,version:v.version}}function l(v,b,T){const L=b.array,P=b.updateRange;i.bindBuffer(T,v),P.count===-1?i.bufferSubData(T,0,L):(t?i.bufferSubData(T,P.offset*L.BYTES_PER_ELEMENT,L,P.offset,P.count):i.bufferSubData(T,P.offset*L.BYTES_PER_ELEMENT,L.subarray(P.offset,P.offset+P.count)),P.count=-1)}function c(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function h(v){v.isInterleavedBufferAttribute&&(v=v.data);const b=r.get(v);b&&(i.deleteBuffer(b.buffer),r.delete(v))}function m(v,b){if(v.isGLBufferAttribute){const L=r.get(v);(!L||L.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const T=r.get(v);T===void 0?r.set(v,o(v,b)):T.version<v.version&&(l(T.buffer,v,b),T.version=v.version)}return{get:c,remove:h,update:m}}class gl extends bt{constructor(e=1,t=1,r=1,o=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const l=e/2,c=t/2,h=Math.floor(r),m=Math.floor(o),v=h+1,b=m+1,T=e/h,L=t/m,P=[],O=[],z=[],G=[];for(let k=0;k<b;k++){const A=k*L-c;for(let N=0;N<v;N++){const I=N*T-l;O.push(I,-A,0),z.push(0,0,1),G.push(N/h),G.push(1-k/m)}}for(let k=0;k<m;k++)for(let A=0;A<h;A++){const N=A+v*k,I=A+v*(k+1),B=A+1+v*(k+1),V=A+1+v*k;P.push(N,I,V),P.push(I,B,V)}this.setIndex(P),this.setAttribute("position",new pt(O,3)),this.setAttribute("normal",new pt(z,3)),this.setAttribute("uv",new pt(G,2))}static fromJSON(e){return new gl(e.width,e.height,e.widthSegments,e.heightSegments)}}var Bk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Uk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zk=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Hk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Gk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Vk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$k="vec3 transformed = vec3( position );",Wk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,qk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Xk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Yk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Kk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Zk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Jk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,eO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,tO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,nO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,rO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		return texture2D( envMap, uv ).rgb;
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,sO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,oO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,aO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,uO="gl_FragColor = linearToOutputTexel( gl_FragColor );",cO=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,fO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,mO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,gO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,vO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,_O=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,bO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,SO=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,MO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,TO=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,EO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,CO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,LO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,RO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,IO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,PO=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,kO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,OO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,DO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,BO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,UO=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,zO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,HO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$O=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,WO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jO=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,qO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,XO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,YO=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,KO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QO=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,JO=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,eD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,nD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,rD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,sD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,aD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,lD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,dD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,pD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,mD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,vD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_D=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,SD=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,MD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,TD=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ED=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,AD=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,CD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,LD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,RD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,ID=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const PD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,kD=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,OD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DD=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ND=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,BD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,UD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,HD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$D=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jD=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qD=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,YD=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ZD=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,QD=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JD=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,sN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oN=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,lN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Jt={alphamap_fragment:Bk,alphamap_pars_fragment:Uk,alphatest_fragment:zk,alphatest_pars_fragment:Hk,aomap_fragment:Gk,aomap_pars_fragment:Vk,begin_vertex:$k,beginnormal_vertex:Wk,bsdfs:jk,bumpmap_pars_fragment:qk,clipping_planes_fragment:Xk,clipping_planes_pars_fragment:Yk,clipping_planes_pars_vertex:Kk,clipping_planes_vertex:Zk,color_fragment:Qk,color_pars_fragment:Jk,color_pars_vertex:eO,color_vertex:tO,common:nO,cube_uv_reflection_fragment:rO,defaultnormal_vertex:iO,displacementmap_pars_vertex:sO,displacementmap_vertex:oO,emissivemap_fragment:aO,emissivemap_pars_fragment:lO,encodings_fragment:uO,encodings_pars_fragment:cO,envmap_fragment:fO,envmap_common_pars_fragment:hO,envmap_pars_fragment:dO,envmap_pars_vertex:pO,envmap_physical_pars_fragment:TO,envmap_vertex:mO,fog_vertex:gO,fog_pars_vertex:vO,fog_fragment:yO,fog_pars_fragment:xO,gradientmap_pars_fragment:wO,lightmap_fragment:_O,lightmap_pars_fragment:bO,lights_lambert_vertex:SO,lights_pars_begin:MO,lights_toon_fragment:EO,lights_toon_pars_fragment:AO,lights_phong_fragment:CO,lights_phong_pars_fragment:LO,lights_physical_fragment:RO,lights_physical_pars_fragment:IO,lights_fragment_begin:PO,lights_fragment_maps:kO,lights_fragment_end:OO,logdepthbuf_fragment:DO,logdepthbuf_pars_fragment:NO,logdepthbuf_pars_vertex:FO,logdepthbuf_vertex:BO,map_fragment:UO,map_pars_fragment:zO,map_particle_fragment:HO,map_particle_pars_fragment:GO,metalnessmap_fragment:VO,metalnessmap_pars_fragment:$O,morphnormal_vertex:WO,morphtarget_pars_vertex:jO,morphtarget_vertex:qO,normal_fragment_begin:XO,normal_fragment_maps:YO,normal_pars_fragment:KO,normal_pars_vertex:ZO,normal_vertex:QO,normalmap_pars_fragment:JO,clearcoat_normal_fragment_begin:eD,clearcoat_normal_fragment_maps:tD,clearcoat_pars_fragment:nD,output_fragment:rD,packing:iD,premultiplied_alpha_fragment:sD,project_vertex:oD,dithering_fragment:aD,dithering_pars_fragment:lD,roughnessmap_fragment:uD,roughnessmap_pars_fragment:cD,shadowmap_pars_fragment:fD,shadowmap_pars_vertex:hD,shadowmap_vertex:dD,shadowmask_pars_fragment:pD,skinbase_vertex:mD,skinning_pars_vertex:gD,skinning_vertex:vD,skinnormal_vertex:yD,specularmap_fragment:xD,specularmap_pars_fragment:wD,tonemapping_fragment:_D,tonemapping_pars_fragment:bD,transmission_fragment:SD,transmission_pars_fragment:MD,uv_pars_fragment:TD,uv_pars_vertex:ED,uv_vertex:AD,uv2_pars_fragment:CD,uv2_pars_vertex:LD,uv2_vertex:RD,worldpos_vertex:ID,background_vert:PD,background_frag:kD,cube_vert:OD,cube_frag:DD,depth_vert:ND,depth_frag:FD,distanceRGBA_vert:BD,distanceRGBA_frag:UD,equirect_vert:zD,equirect_frag:HD,linedashed_vert:GD,linedashed_frag:VD,meshbasic_vert:$D,meshbasic_frag:WD,meshlambert_vert:jD,meshlambert_frag:qD,meshmatcap_vert:XD,meshmatcap_frag:YD,meshnormal_vert:KD,meshnormal_frag:ZD,meshphong_vert:QD,meshphong_frag:JD,meshphysical_vert:eN,meshphysical_frag:tN,meshtoon_vert:nN,meshtoon_frag:rN,points_vert:iN,points_frag:sN,shadow_vert:oN,shadow_frag:aN,sprite_vert:lN,sprite_frag:uN},ot={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vn},uv2Transform:{value:new vn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vn}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vn}}},ys={basic:{uniforms:Xr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Jt.meshbasic_vert,fragmentShader:Jt.meshbasic_frag},lambert:{uniforms:Xr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.fog,ot.lights,{emissive:{value:new Ke(0)}}]),vertexShader:Jt.meshlambert_vert,fragmentShader:Jt.meshlambert_frag},phong:{uniforms:Xr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:Jt.meshphong_vert,fragmentShader:Jt.meshphong_frag},standard:{uniforms:Xr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag},toon:{uniforms:Xr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Ke(0)}}]),vertexShader:Jt.meshtoon_vert,fragmentShader:Jt.meshtoon_frag},matcap:{uniforms:Xr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Jt.meshmatcap_vert,fragmentShader:Jt.meshmatcap_frag},points:{uniforms:Xr([ot.points,ot.fog]),vertexShader:Jt.points_vert,fragmentShader:Jt.points_frag},dashed:{uniforms:Xr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jt.linedashed_vert,fragmentShader:Jt.linedashed_frag},depth:{uniforms:Xr([ot.common,ot.displacementmap]),vertexShader:Jt.depth_vert,fragmentShader:Jt.depth_frag},normal:{uniforms:Xr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Jt.meshnormal_vert,fragmentShader:Jt.meshnormal_frag},sprite:{uniforms:Xr([ot.sprite,ot.fog]),vertexShader:Jt.sprite_vert,fragmentShader:Jt.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null}},vertexShader:Jt.background_vert,fragmentShader:Jt.background_frag},cube:{uniforms:Xr([ot.envmap,{opacity:{value:1}}]),vertexShader:Jt.cube_vert,fragmentShader:Jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jt.equirect_vert,fragmentShader:Jt.equirect_frag},distanceRGBA:{uniforms:Xr([ot.common,ot.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jt.distanceRGBA_vert,fragmentShader:Jt.distanceRGBA_frag},shadow:{uniforms:Xr([ot.lights,ot.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};ys.physical={uniforms:Xr([ys.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new We(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};function cN(i,e,t,r,o){const l=new Ke(0);let c=0,h,m,v=null,b=0,T=null;function L(O,z){let G=!1,k=z.isScene===!0?z.background:null;k&&k.isTexture&&(k=e.get(k));const A=i.xr,N=A.getSession&&A.getSession();N&&N.environmentBlendMode==="additive"&&(k=null),k===null?P(l,c):k&&k.isColor&&(P(k,1),G=!0),(i.autoClear||G)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),k&&(k.isCubeTexture||k.mapping===Nu)?(m===void 0&&(m=new Fn(new go(1,1,1),new Os({name:"BackgroundCubeMaterial",uniforms:Qu(ys.cube.uniforms),vertexShader:ys.cube.vertexShader,fragmentShader:ys.cube.fragmentShader,side:qn,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,B,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),m.material.uniforms.envMap.value=k,m.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,(v!==k||b!==k.version||T!==i.toneMapping)&&(m.material.needsUpdate=!0,v=k,b=k.version,T=i.toneMapping),O.unshift(m,m.geometry,m.material,0,0,null)):k&&k.isTexture&&(h===void 0&&(h=new Fn(new gl(2,2),new Os({name:"BackgroundMaterial",uniforms:Qu(ys.background.uniforms),vertexShader:ys.background.vertexShader,fragmentShader:ys.background.fragmentShader,side:qo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=k,k.matrixAutoUpdate===!0&&k.updateMatrix(),h.material.uniforms.uvTransform.value.copy(k.matrix),(v!==k||b!==k.version||T!==i.toneMapping)&&(h.material.needsUpdate=!0,v=k,b=k.version,T=i.toneMapping),O.unshift(h,h.geometry,h.material,0,0,null))}function P(O,z){t.buffers.color.setClear(O.r,O.g,O.b,z,o)}return{getClearColor:function(){return l},setClearColor:function(O,z=1){l.set(O),c=z,P(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(O){c=O,P(l,c)},render:L}}function fN(i,e,t,r){const o=i.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),c=r.isWebGL2||l!==null,h={},m=z(null);let v=m;function b(ee,_,p,Z,E){let ye=!1;if(c){const Re=O(Z,p,_);v!==Re&&(v=Re,L(v.object)),ye=G(Z,E),ye&&k(Z,E)}else{const Re=_.wireframe===!0;(v.geometry!==Z.id||v.program!==p.id||v.wireframe!==Re)&&(v.geometry=Z.id,v.program=p.id,v.wireframe=Re,ye=!0)}ee.isInstancedMesh===!0&&(ye=!0),E!==null&&t.update(E,34963),ye&&(X(ee,_,p,Z),E!==null&&i.bindBuffer(34963,t.get(E).buffer))}function T(){return r.isWebGL2?i.createVertexArray():l.createVertexArrayOES()}function L(ee){return r.isWebGL2?i.bindVertexArray(ee):l.bindVertexArrayOES(ee)}function P(ee){return r.isWebGL2?i.deleteVertexArray(ee):l.deleteVertexArrayOES(ee)}function O(ee,_,p){const Z=p.wireframe===!0;let E=h[ee.id];E===void 0&&(E={},h[ee.id]=E);let ye=E[_.id];ye===void 0&&(ye={},E[_.id]=ye);let Re=ye[Z];return Re===void 0&&(Re=z(T()),ye[Z]=Re),Re}function z(ee){const _=[],p=[],Z=[];for(let E=0;E<o;E++)_[E]=0,p[E]=0,Z[E]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:_,enabledAttributes:p,attributeDivisors:Z,object:ee,attributes:{},index:null}}function G(ee,_){const p=v.attributes,Z=ee.attributes;let E=0;for(const ye in Z){const Re=p[ye],Me=Z[ye];if(Re===void 0||Re.attribute!==Me||Re.data!==Me.data)return!0;E++}return v.attributesNum!==E||v.index!==_}function k(ee,_){const p={},Z=ee.attributes;let E=0;for(const ye in Z){const Re=Z[ye],Me={};Me.attribute=Re,Re.data&&(Me.data=Re.data),p[ye]=Me,E++}v.attributes=p,v.attributesNum=E,v.index=_}function A(){const ee=v.newAttributes;for(let _=0,p=ee.length;_<p;_++)ee[_]=0}function N(ee){I(ee,0)}function I(ee,_){const p=v.newAttributes,Z=v.enabledAttributes,E=v.attributeDivisors;p[ee]=1,Z[ee]===0&&(i.enableVertexAttribArray(ee),Z[ee]=1),E[ee]!==_&&((r.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ee,_),E[ee]=_)}function B(){const ee=v.newAttributes,_=v.enabledAttributes;for(let p=0,Z=_.length;p<Z;p++)_[p]!==ee[p]&&(i.disableVertexAttribArray(p),_[p]=0)}function V(ee,_,p,Z,E,ye){r.isWebGL2===!0&&(p===5124||p===5125)?i.vertexAttribIPointer(ee,_,p,E,ye):i.vertexAttribPointer(ee,_,p,Z,E,ye)}function X(ee,_,p,Z){if(r.isWebGL2===!1&&(ee.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const E=Z.attributes,ye=p.getAttributes(),Re=_.defaultAttributeValues;for(const Me in ye){const pe=ye[Me];if(pe.location>=0){let ve=E[Me];if(ve===void 0&&(Me==="instanceMatrix"&&ee.instanceMatrix&&(ve=ee.instanceMatrix),Me==="instanceColor"&&ee.instanceColor&&(ve=ee.instanceColor)),ve!==void 0){const Ce=ve.normalized,_e=ve.itemSize,Pe=t.get(ve);if(Pe===void 0)continue;const Te=Pe.buffer,Oe=Pe.type,ze=Pe.bytesPerElement;if(ve.isInterleavedBufferAttribute){const He=ve.data,$=He.stride,$e=ve.offset;if(He&&He.isInstancedInterleavedBuffer){for(let Le=0;Le<pe.locationSize;Le++)I(pe.location+Le,He.meshPerAttribute);ee.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Le=0;Le<pe.locationSize;Le++)N(pe.location+Le);i.bindBuffer(34962,Te);for(let Le=0;Le<pe.locationSize;Le++)V(pe.location+Le,_e/pe.locationSize,Oe,Ce,$*ze,($e+_e/pe.locationSize*Le)*ze)}else{if(ve.isInstancedBufferAttribute){for(let He=0;He<pe.locationSize;He++)I(pe.location+He,ve.meshPerAttribute);ee.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let He=0;He<pe.locationSize;He++)N(pe.location+He);i.bindBuffer(34962,Te);for(let He=0;He<pe.locationSize;He++)V(pe.location+He,_e/pe.locationSize,Oe,Ce,_e*ze,_e/pe.locationSize*He*ze)}}else if(Re!==void 0){const Ce=Re[Me];if(Ce!==void 0)switch(Ce.length){case 2:i.vertexAttrib2fv(pe.location,Ce);break;case 3:i.vertexAttrib3fv(pe.location,Ce);break;case 4:i.vertexAttrib4fv(pe.location,Ce);break;default:i.vertexAttrib1fv(pe.location,Ce)}}}}B()}function Q(){he();for(const ee in h){const _=h[ee];for(const p in _){const Z=_[p];for(const E in Z)P(Z[E].object),delete Z[E];delete _[p]}delete h[ee]}}function ae(ee){if(h[ee.id]===void 0)return;const _=h[ee.id];for(const p in _){const Z=_[p];for(const E in Z)P(Z[E].object),delete Z[E];delete _[p]}delete h[ee.id]}function le(ee){for(const _ in h){const p=h[_];if(p[ee.id]===void 0)continue;const Z=p[ee.id];for(const E in Z)P(Z[E].object),delete Z[E];delete p[ee.id]}}function he(){re(),v!==m&&(v=m,L(v.object))}function re(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:b,reset:he,resetDefaultState:re,dispose:Q,releaseStatesOfGeometry:ae,releaseStatesOfProgram:le,initAttributes:A,enableAttribute:N,disableUnusedAttributes:B}}function hN(i,e,t,r){const o=r.isWebGL2;let l;function c(v){l=v}function h(v,b){i.drawArrays(l,v,b),t.update(b,l,1)}function m(v,b,T){if(T===0)return;let L,P;if(o)L=i,P="drawArraysInstanced";else if(L=e.get("ANGLE_instanced_arrays"),P="drawArraysInstancedANGLE",L===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}L[P](l,v,b,T),t.update(b,l,T)}this.setMode=c,this.render=h,this.renderInstances=m}function dN(i,e,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const X=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(X){if(X==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";X="mediump"}return X==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext!="undefined"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&i instanceof WebGL2ComputeRenderingContext;let h=t.precision!==void 0?t.precision:"highp";const m=l(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const v=c||e.has("WEBGL_draw_buffers"),b=t.logarithmicDepthBuffer===!0,T=i.getParameter(34930),L=i.getParameter(35660),P=i.getParameter(3379),O=i.getParameter(34076),z=i.getParameter(34921),G=i.getParameter(36347),k=i.getParameter(36348),A=i.getParameter(36349),N=L>0,I=c||e.has("OES_texture_float"),B=N&&I,V=c?i.getParameter(36183):0;return{isWebGL2:c,drawBuffers:v,getMaxAnisotropy:o,getMaxPrecision:l,precision:h,logarithmicDepthBuffer:b,maxTextures:T,maxVertexTextures:L,maxTextureSize:P,maxCubemapSize:O,maxAttributes:z,maxVertexUniforms:G,maxVaryings:k,maxFragmentUniforms:A,vertexTextures:N,floatFragmentTextures:I,floatVertexTextures:B,maxSamples:V}}function pN(i){const e=this;let t=null,r=0,o=!1,l=!1;const c=new Ds,h=new vn,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(T,L,P){const O=T.length!==0||L||r!==0||o;return o=L,t=b(T,P,0),r=T.length,O},this.beginShadows=function(){l=!0,b(null)},this.endShadows=function(){l=!1,v()},this.setState=function(T,L,P){const O=T.clippingPlanes,z=T.clipIntersection,G=T.clipShadows,k=i.get(T);if(!o||O===null||O.length===0||l&&!G)l?b(null):v();else{const A=l?0:r,N=A*4;let I=k.clippingState||null;m.value=I,I=b(O,L,N,P);for(let B=0;B!==N;++B)I[B]=t[B];k.clippingState=I,this.numIntersection=z?this.numPlanes:0,this.numPlanes+=A}};function v(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function b(T,L,P,O){const z=T!==null?T.length:0;let G=null;if(z!==0){if(G=m.value,O!==!0||G===null){const k=P+z*4,A=L.matrixWorldInverse;h.getNormalMatrix(A),(G===null||G.length<k)&&(G=new Float32Array(k));for(let N=0,I=P;N!==z;++N,I+=4)c.copy(T[N]).applyMatrix4(A,h),c.normal.toArray(G,I),G[I+3]=c.constant}m.value=G,m.needsUpdate=!0}return e.numPlanes=z,e.numIntersection=0,G}}function mN(i){let e=new WeakMap;function t(c,h){return h===Du?c.mapping=il:h===ah&&(c.mapping=sl),c}function r(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){const h=c.mapping;if(h===Du||h===ah)if(e.has(c)){const m=e.get(c).texture;return t(m,c.mapping)}else{const m=c.image;if(m&&m.height>0){const v=i.getRenderTarget(),b=new ym(m.height/2);return b.fromEquirectangularTexture(i,c),e.set(c,b),i.setRenderTarget(v),c.addEventListener("dispose",o),t(b.texture,c.mapping)}else return null}}return c}function o(c){const h=c.target;h.removeEventListener("dispose",o);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function l(){e=new WeakMap}return{get:r,dispose:l}}class vl extends wh{constructor(e=-1,t=1,r=1,o=-1,l=.1,c=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=r-e,c=r+e,h=o+t,m=o-t;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=v*this.view.offsetX,c=l+v*this.view.width,h-=b*this.view.offsetY,m=h-b*this.view.height}this.projectionMatrix.makeOrthographic(l,c,h,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}vl.prototype.isOrthographicCamera=!0;class rc extends Os{constructor(e){super(e);this.type="RawShaderMaterial"}}rc.prototype.isRawShaderMaterial=!0;const ic=4,sa=8,Ns=Math.pow(2,sa),CT=[.125,.215,.35,.446,.526,.582],LT=sa-ic+1+CT.length,sc=20,wm={[li]:0,[Or]:1},jy=new vl,{_lodPlanes:bh,_sizeLods:RT,_sigmas:_m}=gN(),IT=new Ke;let qy=null;const yl=(1+Math.sqrt(5))/2,oc=1/yl,PT=[new fe(1,1,1),new fe(-1,1,1),new fe(1,1,-1),new fe(-1,1,-1),new fe(0,yl,oc),new fe(0,yl,-oc),new fe(oc,0,yl),new fe(-oc,0,yl),new fe(yl,oc,0),new fe(-yl,oc,0)];class kT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=vN(sc),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){qy=this._renderer.getRenderTarget();const l=this._allocateTargets();return this._sceneToCubeUV(e,r,o,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=NT(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=DT(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<bh.length;e++)bh[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(qy),e.scissorTest=!1,bm(e,0,0,e.width,e.height)}_fromTexture(e){qy=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Dn,minFilter:Dn,generateMipmaps:!1,type:Xo,format:tr,encoding:li,depthBuffer:!1},r=OT(t);return r.depthBuffer=!e,this._pingPongRenderTarget=OT(t),r}_compileMaterial(e){const t=new Fn(bh[0],e);this._renderer.compile(t,jy)}_sceneToCubeUV(e,t,r,o){const l=90,c=1,h=new dr(l,c,t,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],b=this._renderer,T=b.autoClear,L=b.toneMapping;b.getClearColor(IT),b.toneMapping=so,b.autoClear=!1;const P=new qr({name:"PMREM.Background",side:qn,depthWrite:!1,depthTest:!1}),O=new Fn(new go,P);let z=!1;const G=e.background;G?G.isColor&&(P.color.copy(G),e.background=null,z=!0):(P.color.copy(IT),z=!0);for(let k=0;k<6;k++){const A=k%3;A==0?(h.up.set(0,m[k],0),h.lookAt(v[k],0,0)):A==1?(h.up.set(0,0,m[k]),h.lookAt(0,v[k],0)):(h.up.set(0,m[k],0),h.lookAt(0,0,v[k])),bm(o,A*Ns,k>2?Ns:0,Ns,Ns),b.setRenderTarget(o),z&&b.render(O,h),b.render(e,h)}O.geometry.dispose(),O.material.dispose(),b.toneMapping=L,b.autoClear=T,e.background=G}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===tr&&t.type===ps&&t.encoding===Or?e.value=wm[li]:e.value=wm[t.encoding]}_textureToCubeUV(e,t){const r=this._renderer,o=e.mapping===il||e.mapping===sl;o?this._cubemapShader==null&&(this._cubemapShader=NT()):this._equirectShader==null&&(this._equirectShader=DT());const l=o?this._cubemapShader:this._equirectShader,c=new Fn(bh[0],l),h=l.uniforms;h.envMap.value=e,o||h.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(h.inputEncoding,e),bm(t,0,0,3*Ns,2*Ns),r.setRenderTarget(t),r.render(c,jy)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<LT;o++){const l=Math.sqrt(_m[o]*_m[o]-_m[o-1]*_m[o-1]),c=PT[(o-1)%PT.length];this._blur(e,o-1,o,l,c)}t.autoClear=r}_blur(e,t,r,o,l){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,r,o,"latitudinal",l),this._halfBlur(c,e,r,r,o,"longitudinal",l)}_halfBlur(e,t,r,o,l,c,h){const m=this._renderer,v=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const b=3,T=new Fn(bh[o],v),L=v.uniforms,P=RT[r]-1,O=isFinite(l)?Math.PI/(2*P):2*Math.PI/(2*sc-1),z=l/O,G=isFinite(l)?1+Math.floor(b*z):sc;G>sc&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${G} samples when the maximum is set to ${sc}`);const k=[];let A=0;for(let V=0;V<sc;++V){const X=V/z,Q=Math.exp(-X*X/2);k.push(Q),V==0?A+=Q:V<G&&(A+=2*Q)}for(let V=0;V<k.length;V++)k[V]=k[V]/A;L.envMap.value=e.texture,L.samples.value=G,L.weights.value=k,L.latitudinal.value=c==="latitudinal",h&&(L.poleAxis.value=h),L.dTheta.value=O,L.mipInt.value=sa-r;const N=RT[o],I=3*Math.max(0,Ns-2*N),B=(o===0?0:2*Ns)+2*N*(o>sa-ic?o-sa+ic:0);bm(t,I,B,3*N,2*N),m.setRenderTarget(t),m.render(T,jy)}}function gN(){const i=[],e=[],t=[];let r=sa;for(let o=0;o<LT;o++){const l=Math.pow(2,r);e.push(l);let c=1/l;o>sa-ic?c=CT[o-sa+ic-1]:o==0&&(c=0),t.push(c);const h=1/(l-1),m=-h/2,v=1+h/2,b=[m,m,v,m,v,v,m,m,v,v,m,v],T=6,L=6,P=3,O=2,z=1,G=new Float32Array(P*L*T),k=new Float32Array(O*L*T),A=new Float32Array(z*L*T);for(let I=0;I<T;I++){const B=I%3*2/3-1,V=I>2?0:-1,X=[B,V,0,B+2/3,V,0,B+2/3,V+1,0,B,V,0,B+2/3,V+1,0,B,V+1,0];G.set(X,P*L*I),k.set(b,O*L*I);const Q=[I,I,I,I,I,I];A.set(Q,z*L*I)}const N=new bt;N.setAttribute("position",new Ot(G,P)),N.setAttribute("uv",new Ot(k,O)),N.setAttribute("faceIndex",new Ot(A,z)),i.push(N),r>ic&&r--}return{_lodPlanes:i,_sizeLods:e,_sigmas:t}}function OT(i){const e=new Oi(3*Ns,3*Ns,i);return e.texture.mapping=Nu,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function bm(i,e,t,r,o){i.viewport.set(e,t,r,o),i.scissor.set(e,t,r,o)}function vN(i){const e=new Float32Array(i),t=new fe(0,1,0);return new rc({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:Xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Yy()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function DT(){const i=new We(1,1);return new rc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:wm[li]}},vertexShader:Xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Yy()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function NT(){return new rc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:wm[li]}},vertexShader:Xy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Yy()}

			void main() {

				gl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function Xy(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Yy(){return`

		uniform int inputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else {

				return sRGBToLinear( value );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function yN(i){let e=new WeakMap,t=null;function r(h){if(h&&h.isTexture&&h.isRenderTargetTexture===!1){const m=h.mapping,v=m===Du||m===ah,b=m===il||m===sl;if(v||b){if(e.has(h))return e.get(h).texture;{const T=h.image;if(v&&T&&T.height>0||b&&T&&o(T)){const L=i.getRenderTarget();t===null&&(t=new kT(i));const P=v?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,P),i.setRenderTarget(L),h.addEventListener("dispose",l),P.texture}else return null}}}return h}function o(h){let m=0;const v=6;for(let b=0;b<v;b++)h[b]!==void 0&&m++;return m===v}function l(h){const m=h.target;m.removeEventListener("dispose",l);const v=e.get(m);v!==void 0&&(e.delete(m),v.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:c}}function xN(i){const e={};function t(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=i.getExtension(r)}return e[r]=o,o}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function wN(i,e,t,r){const o={},l=new WeakMap;function c(T){const L=T.target;L.index!==null&&e.remove(L.index);for(const O in L.attributes)e.remove(L.attributes[O]);L.removeEventListener("dispose",c),delete o[L.id];const P=l.get(L);P&&(e.remove(P),l.delete(L)),r.releaseStatesOfGeometry(L),L.isInstancedBufferGeometry===!0&&delete L._maxInstanceCount,t.memory.geometries--}function h(T,L){return o[L.id]===!0||(L.addEventListener("dispose",c),o[L.id]=!0,t.memory.geometries++),L}function m(T){const L=T.attributes;for(const O in L)e.update(L[O],34962);const P=T.morphAttributes;for(const O in P){const z=P[O];for(let G=0,k=z.length;G<k;G++)e.update(z[G],34962)}}function v(T){const L=[],P=T.index,O=T.attributes.position;let z=0;if(P!==null){const A=P.array;z=P.version;for(let N=0,I=A.length;N<I;N+=3){const B=A[N+0],V=A[N+1],X=A[N+2];L.push(B,V,V,X,X,B)}}else{const A=O.array;z=O.version;for(let N=0,I=A.length/3-1;N<I;N+=3){const B=N+0,V=N+1,X=N+2;L.push(B,V,V,X,X,B)}}const G=new(oT(L)>65535?lm:yh)(L,1);G.version=z;const k=l.get(T);k&&e.remove(k),l.set(T,G)}function b(T){const L=l.get(T);if(L){const P=T.index;P!==null&&L.version<P.version&&v(T)}else v(T);return l.get(T)}return{get:h,update:m,getWireframeAttribute:b}}function _N(i,e,t,r){const o=r.isWebGL2;let l;function c(L){l=L}let h,m;function v(L){h=L.type,m=L.bytesPerElement}function b(L,P){i.drawElements(l,P,h,L*m),t.update(P,l,1)}function T(L,P,O){if(O===0)return;let z,G;if(o)z=i,G="drawElementsInstanced";else if(z=e.get("ANGLE_instanced_arrays"),G="drawElementsInstancedANGLE",z===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}z[G](l,P,h,L*m,O),t.update(P,l,O)}this.setMode=c,this.setIndex=v,this.render=b,this.renderInstances=T}function bN(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(l,c,h){switch(t.calls++,c){case 4:t.triangles+=h*(l/3);break;case 1:t.lines+=h*(l/2);break;case 3:t.lines+=h*(l-1);break;case 2:t.lines+=h*l;break;case 0:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:r}}class Sm extends Nn{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Sm.prototype.isDataTexture2DArray=!0;function SN(i,e){return i[0]-e[0]}function MN(i,e){return Math.abs(e[1])-Math.abs(i[1])}function FT(i,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),i.divideScalar(t)}function TN(i,e,t){const r={},o=new Float32Array(8),l=new WeakMap,c=new fe,h=[];for(let v=0;v<8;v++)h[v]=[v,0];function m(v,b,T,L){const P=v.morphTargetInfluences;if(e.isWebGL2===!0){const O=b.morphAttributes.position.length;let z=l.get(b);if(z===void 0||z.count!==O){z!==void 0&&z.texture.dispose();const A=b.morphAttributes.normal!==void 0,N=b.morphAttributes.position,I=b.morphAttributes.normal||[],B=b.attributes.position.count,V=A===!0?2:1;let X=B*V,Q=1;X>e.maxTextureSize&&(Q=Math.ceil(X/e.maxTextureSize),X=e.maxTextureSize);const ae=new Float32Array(X*Q*4*O),le=new Sm(ae,X,Q,O);le.format=tr,le.type=ks,le.needsUpdate=!0;const he=V*4;for(let re=0;re<O;re++){const ee=N[re],_=I[re],p=X*Q*4*re;for(let Z=0;Z<ee.count;Z++){c.fromBufferAttribute(ee,Z),ee.normalized===!0&&FT(c,ee);const E=Z*he;ae[p+E+0]=c.x,ae[p+E+1]=c.y,ae[p+E+2]=c.z,ae[p+E+3]=0,A===!0&&(c.fromBufferAttribute(_,Z),_.normalized===!0&&FT(c,_),ae[p+E+4]=c.x,ae[p+E+5]=c.y,ae[p+E+6]=c.z,ae[p+E+7]=0)}}z={count:O,texture:le,size:new We(X,Q)},l.set(b,z)}let G=0;for(let A=0;A<P.length;A++)G+=P[A];const k=b.morphTargetsRelative?1:1-G;L.getUniforms().setValue(i,"morphTargetBaseInfluence",k),L.getUniforms().setValue(i,"morphTargetInfluences",P),L.getUniforms().setValue(i,"morphTargetsTexture",z.texture,t),L.getUniforms().setValue(i,"morphTargetsTextureSize",z.size)}else{const O=P===void 0?0:P.length;let z=r[b.id];if(z===void 0||z.length!==O){z=[];for(let I=0;I<O;I++)z[I]=[I,0];r[b.id]=z}for(let I=0;I<O;I++){const B=z[I];B[0]=I,B[1]=P[I]}z.sort(MN);for(let I=0;I<8;I++)I<O&&z[I][1]?(h[I][0]=z[I][0],h[I][1]=z[I][1]):(h[I][0]=Number.MAX_SAFE_INTEGER,h[I][1]=0);h.sort(SN);const G=b.morphAttributes.position,k=b.morphAttributes.normal;let A=0;for(let I=0;I<8;I++){const B=h[I],V=B[0],X=B[1];V!==Number.MAX_SAFE_INTEGER&&X?(G&&b.getAttribute("morphTarget"+I)!==G[V]&&b.setAttribute("morphTarget"+I,G[V]),k&&b.getAttribute("morphNormal"+I)!==k[V]&&b.setAttribute("morphNormal"+I,k[V]),o[I]=X,A+=X):(G&&b.hasAttribute("morphTarget"+I)===!0&&b.deleteAttribute("morphTarget"+I),k&&b.hasAttribute("morphNormal"+I)===!0&&b.deleteAttribute("morphNormal"+I),o[I]=0)}const N=b.morphTargetsRelative?1:1-A;L.getUniforms().setValue(i,"morphTargetBaseInfluence",N),L.getUniforms().setValue(i,"morphTargetInfluences",o)}}return{update:m}}function EN(i,e,t,r){let o=new WeakMap;function l(m){const v=r.render.frame,b=m.geometry,T=e.get(m,b);return o.get(T)!==v&&(e.update(T),o.set(T,v)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),t.update(m.instanceMatrix,34962),m.instanceColor!==null&&t.update(m.instanceColor,34962)),T}function c(){o=new WeakMap}function h(m){const v=m.target;v.removeEventListener("dispose",h),t.remove(v.instanceMatrix),v.instanceColor!==null&&t.remove(v.instanceColor)}return{update:l,dispose:c}}class Ky extends Nn{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ky.prototype.isDataTexture3D=!0;const BT=new Nn,UT=new Sm,zT=new Ky,HT=new tc,GT=[],VT=[],$T=new Float32Array(16),WT=new Float32Array(9),jT=new Float32Array(4);function ac(i,e,t){const r=i[0];if(r<=0||r>0)return i;const o=e*t;let l=GT[o];if(l===void 0&&(l=new Float32Array(o),GT[o]=l),e!==0){r.toArray(l,0);for(let c=1,h=0;c!==e;++c)h+=t,i[c].toArray(l,h)}return l}function ui(i,e){if(i.length!==e.length)return!1;for(let t=0,r=i.length;t<r;t++)if(i[t]!==e[t])return!1;return!0}function Yr(i,e){for(let t=0,r=e.length;t<r;t++)i[t]=e[t]}function Mm(i,e){let t=VT[e];t===void 0&&(t=new Int32Array(e),VT[e]=t);for(let r=0;r!==e;++r)t[r]=i.allocateTextureUnit();return t}function AN(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function CN(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;i.uniform2fv(this.addr,e),Yr(t,e)}}function LN(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ui(t,e))return;i.uniform3fv(this.addr,e),Yr(t,e)}}function RN(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;i.uniform4fv(this.addr,e),Yr(t,e)}}function IN(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Yr(t,e)}else{if(ui(t,r))return;jT.set(r),i.uniformMatrix2fv(this.addr,!1,jT),Yr(t,r)}}function PN(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Yr(t,e)}else{if(ui(t,r))return;WT.set(r),i.uniformMatrix3fv(this.addr,!1,WT),Yr(t,r)}}function kN(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Yr(t,e)}else{if(ui(t,r))return;$T.set(r),i.uniformMatrix4fv(this.addr,!1,$T),Yr(t,r)}}function ON(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function DN(i,e){const t=this.cache;ui(t,e)||(i.uniform2iv(this.addr,e),Yr(t,e))}function NN(i,e){const t=this.cache;ui(t,e)||(i.uniform3iv(this.addr,e),Yr(t,e))}function FN(i,e){const t=this.cache;ui(t,e)||(i.uniform4iv(this.addr,e),Yr(t,e))}function BN(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function UN(i,e){const t=this.cache;ui(t,e)||(i.uniform2uiv(this.addr,e),Yr(t,e))}function zN(i,e){const t=this.cache;ui(t,e)||(i.uniform3uiv(this.addr,e),Yr(t,e))}function HN(i,e){const t=this.cache;ui(t,e)||(i.uniform4uiv(this.addr,e),Yr(t,e))}function GN(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.safeSetTexture2D(e||BT,o)}function VN(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||zT,o)}function $N(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.safeSetTextureCube(e||HT,o)}function WN(i,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(i.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||UT,o)}function jN(i){switch(i){case 5126:return AN;case 35664:return CN;case 35665:return LN;case 35666:return RN;case 35674:return IN;case 35675:return PN;case 35676:return kN;case 5124:case 35670:return ON;case 35667:case 35671:return DN;case 35668:case 35672:return NN;case 35669:case 35673:return FN;case 5125:return BN;case 36294:return UN;case 36295:return zN;case 36296:return HN;case 35678:case 36198:case 36298:case 36306:case 35682:return GN;case 35679:case 36299:case 36307:return VN;case 35680:case 36300:case 36308:case 36293:return $N;case 36289:case 36303:case 36311:case 36292:return WN}}function qN(i,e){i.uniform1fv(this.addr,e)}function XN(i,e){const t=ac(e,this.size,2);i.uniform2fv(this.addr,t)}function YN(i,e){const t=ac(e,this.size,3);i.uniform3fv(this.addr,t)}function KN(i,e){const t=ac(e,this.size,4);i.uniform4fv(this.addr,t)}function ZN(i,e){const t=ac(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function QN(i,e){const t=ac(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function JN(i,e){const t=ac(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function eF(i,e){i.uniform1iv(this.addr,e)}function tF(i,e){i.uniform2iv(this.addr,e)}function nF(i,e){i.uniform3iv(this.addr,e)}function rF(i,e){i.uniform4iv(this.addr,e)}function iF(i,e){i.uniform1uiv(this.addr,e)}function sF(i,e){i.uniform2uiv(this.addr,e)}function oF(i,e){i.uniform3uiv(this.addr,e)}function aF(i,e){i.uniform4uiv(this.addr,e)}function lF(i,e,t){const r=e.length,o=Mm(t,r);i.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTexture2D(e[l]||BT,o[l])}function uF(i,e,t){const r=e.length,o=Mm(t,r);i.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture3D(e[l]||zT,o[l])}function cF(i,e,t){const r=e.length,o=Mm(t,r);i.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTextureCube(e[l]||HT,o[l])}function fF(i,e,t){const r=e.length,o=Mm(t,r);i.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||UT,o[l])}function hF(i){switch(i){case 5126:return qN;case 35664:return XN;case 35665:return YN;case 35666:return KN;case 35674:return ZN;case 35675:return QN;case 35676:return JN;case 5124:case 35670:return eF;case 35667:case 35671:return tF;case 35668:case 35672:return nF;case 35669:case 35673:return rF;case 5125:return iF;case 36294:return sF;case 36295:return oF;case 36296:return aF;case 35678:case 36198:case 36298:case 36306:case 35682:return lF;case 35679:case 36299:case 36307:return uF;case 35680:case 36300:case 36308:case 36293:return cF;case 36289:case 36303:case 36311:case 36292:return fF}}function dF(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=jN(e.type)}function qT(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=hF(e.type)}qT.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Yr(e,i)};function XT(i){this.id=i,this.seq=[],this.map={}}XT.prototype.setValue=function(i,e,t){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const c=r[o];c.setValue(i,e[c.id],t)}};const Zy=/(\w+)(\])?(\[|\.)?/g;function YT(i,e){i.seq.push(e),i.map[e.id]=e}function pF(i,e,t){const r=i.name,o=r.length;for(Zy.lastIndex=0;;){const l=Zy.exec(r),c=Zy.lastIndex;let h=l[1];const m=l[2]==="]",v=l[3];if(m&&(h=h|0),v===void 0||v==="["&&c+2===o){YT(t,v===void 0?new dF(h,i,e):new qT(h,i,e));break}else{let T=t.map[h];T===void 0&&(T=new XT(h),YT(t,T)),t=T}}}function oa(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=i.getActiveUniform(e,r),l=i.getUniformLocation(e,o.name);pF(o,l,this)}}oa.prototype.setValue=function(i,e,t,r){const o=this.map[e];o!==void 0&&o.setValue(i,t,r)};oa.prototype.setOptional=function(i,e,t){const r=e[t];r!==void 0&&this.setValue(i,t,r)};oa.upload=function(i,e,t,r){for(let o=0,l=e.length;o!==l;++o){const c=e[o],h=t[c.id];h.needsUpdate!==!1&&c.setValue(i,h.value,r)}};oa.seqWithValue=function(i,e){const t=[];for(let r=0,o=i.length;r!==o;++r){const l=i[r];l.id in e&&t.push(l)}return t};function KT(i,e,t){const r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}let mF=0;function gF(i){const e=i.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function ZT(i){switch(i){case li:return["Linear","( value )"];case Or:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function QT(i,e,t){const r=i.getShaderParameter(e,35713),o=i.getShaderInfoLog(e).trim();return r&&o===""?"":t.toUpperCase()+`

`+o+`

`+gF(i.getShaderSource(e))}function xl(i,e){const t=ZT(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function vF(i,e){const t=ZT(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function yF(i,e){let t;switch(e){case JS:t="Linear";break;case eM:t="Reinhard";break;case tM:t="OptimizedCineon";break;case nM:t="ACESFilmic";break;case rM:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function xF(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sh).join(`
`)}function wF(i){const e=[];for(const t in i){const r=i[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function _F(i,e){const t={},r=i.getProgramParameter(e,35721);for(let o=0;o<r;o++){const l=i.getActiveAttrib(e,o),c=l.name;let h=1;l.type===35674&&(h=2),l.type===35675&&(h=3),l.type===35676&&(h=4),t[c]={type:l.type,location:i.getAttribLocation(e,c),locationSize:h}}return t}function Sh(i){return i!==""}function JT(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function eE(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bF=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qy(i){return i.replace(bF,SF)}function SF(i,e){const t=Jt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Qy(t)}const MF=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,TF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tE(i){return i.replace(TF,nE).replace(MF,EF)}function EF(i,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),nE(i,e,t,r)}function nE(i,e,t,r){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function rE(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function AF(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Jv?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===IS?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ku&&(e="SHADOWMAP_TYPE_VSM"),e}function CF(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case il:case sl:e="ENVMAP_TYPE_CUBE";break;case Nu:case lh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LF(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case sl:case lh:e="ENVMAP_MODE_REFRACTION";break}return e}function RF(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case oh:e="ENVMAP_BLENDING_MULTIPLY";break;case ZS:e="ENVMAP_BLENDING_MIX";break;case QS:e="ENVMAP_BLENDING_ADD";break}return e}function IF(i,e,t,r){const o=i.getContext(),l=t.defines;let c=t.vertexShader,h=t.fragmentShader;const m=AF(t),v=CF(t),b=LF(t),T=RF(t),L=t.isWebGL2?"":xF(t),P=wF(l),O=o.createProgram();let z,G,k=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(z=[P].filter(Sh).join(`
`),z.length>0&&(z+=`
`),G=[L,P].filter(Sh).join(`
`),G.length>0&&(G+=`
`)):(z=[rE(t),"#define SHADER_NAME "+t.shaderName,P,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sh).join(`
`),G=[L,rE(t),"#define SHADER_NAME "+t.shaderName,P,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.envMap?"#define "+b:"",t.envMap?"#define "+T:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==so?"#define TONE_MAPPING":"",t.toneMapping!==so?Jt.tonemapping_pars_fragment:"",t.toneMapping!==so?yF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===ao?"#define OPAQUE":"",Jt.encodings_pars_fragment,t.map?xl("mapTexelToLinear",t.mapEncoding):"",t.matcap?xl("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?xl("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?xl("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?xl("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?xl("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?xl("lightMapTexelToLinear",t.lightMapEncoding):"",vF("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sh).join(`
`)),c=Qy(c),c=JT(c,t),c=eE(c,t),h=Qy(h),h=JT(h,t),h=eE(h,t),c=tE(c),h=tE(h),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(k=`#version 300 es
`,z=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,G=["#define varying in",t.glslVersion===wy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===wy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+G);const A=k+z+c,N=k+G+h,I=KT(o,35633,A),B=KT(o,35632,N);if(o.attachShader(O,I),o.attachShader(O,B),t.index0AttributeName!==void 0?o.bindAttribLocation(O,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(O,0,"position"),o.linkProgram(O),i.debug.checkShaderErrors){const Q=o.getProgramInfoLog(O).trim(),ae=o.getShaderInfoLog(I).trim(),le=o.getShaderInfoLog(B).trim();let he=!0,re=!0;if(o.getProgramParameter(O,35714)===!1){he=!1;const ee=QT(o,I,"vertex"),_=QT(o,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(O,35715)+`

Program Info Log: `+Q+`
`+ee+`
`+_)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(ae===""||le==="")&&(re=!1);re&&(this.diagnostics={runnable:he,programLog:Q,vertexShader:{log:ae,prefix:z},fragmentShader:{log:le,prefix:G}})}o.deleteShader(I),o.deleteShader(B);let V;this.getUniforms=function(){return V===void 0&&(V=new oa(o,O)),V};let X;return this.getAttributes=function(){return X===void 0&&(X=_F(o,O)),X},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(O),this.program=void 0},this.name=t.shaderName,this.id=mF++,this.cacheKey=e,this.usedTimes=1,this.program=O,this.vertexShader=I,this.fragmentShader=B,this}let PF=0;class kF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(t),l=this._getShaderStage(r),c=this._getShaderCacheForMaterial(e);return c.has(o)===!1&&(c.add(o),o.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new OF;t.set(e,r)}return t.get(e)}}class OF{constructor(){this.id=PF++,this.usedTimes=0}}function DF(i,e,t,r,o,l,c){const h=new im,m=new kF,v=[],b=o.isWebGL2,T=o.logarithmicDepthBuffer,L=o.floatVertexTextures,P=o.maxVertexUniforms,O=o.vertexTextures;let z=o.precision;const G={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(re){const _=re.skeleton.bones;if(L)return 1024;{const Z=Math.floor((P-20)/4),E=Math.min(Z,_.length);return E<_.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+_.length+" bones. This GPU supports "+E+"."),0):E}}function A(re){let ee;return re&&re.isTexture?ee=re.encoding:re&&re.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ee=re.texture.encoding):ee=li,b&&re&&re.isTexture&&re.format===tr&&re.type===ps&&re.encoding===Or&&(ee=li),ee}function N(re,ee,_,p,Z){const E=p.fog,ye=re.isMeshStandardMaterial?p.environment:null,Re=(re.isMeshStandardMaterial?t:e).get(re.envMap||ye),Me=G[re.type],pe=Z.isSkinnedMesh?k(Z):0;re.precision!==null&&(z=o.getMaxPrecision(re.precision),z!==re.precision&&console.warn("THREE.WebGLProgram.getParameters:",re.precision,"not supported, using",z,"instead."));let ve,Ce,_e,Pe;if(Me){const $=ys[Me];ve=$.vertexShader,Ce=$.fragmentShader}else ve=re.vertexShader,Ce=re.fragmentShader,m.update(re),_e=m.getVertexShaderID(re),Pe=m.getFragmentShaderID(re);const Te=i.getRenderTarget(),Oe=re.alphaTest>0,ze=re.clearcoat>0;return{isWebGL2:b,shaderID:Me,shaderName:re.type,vertexShader:ve,fragmentShader:Ce,defines:re.defines,customVertexShaderID:_e,customFragmentShaderID:Pe,isRawShaderMaterial:re.isRawShaderMaterial===!0,glslVersion:re.glslVersion,precision:z,instancing:Z.isInstancedMesh===!0,instancingColor:Z.isInstancedMesh===!0&&Z.instanceColor!==null,supportsVertexTextures:O,outputEncoding:Te!==null?A(Te.texture):i.outputEncoding,map:!!re.map,mapEncoding:A(re.map),matcap:!!re.matcap,matcapEncoding:A(re.matcap),envMap:!!Re,envMapMode:Re&&Re.mapping,envMapEncoding:A(Re),envMapCubeUV:!!Re&&(Re.mapping===Nu||Re.mapping===lh),lightMap:!!re.lightMap,lightMapEncoding:A(re.lightMap),aoMap:!!re.aoMap,emissiveMap:!!re.emissiveMap,emissiveMapEncoding:A(re.emissiveMap),bumpMap:!!re.bumpMap,normalMap:!!re.normalMap,objectSpaceNormalMap:re.normalMapType===nT,tangentSpaceNormalMap:re.normalMapType===lo,clearcoat:ze,clearcoatMap:ze&&!!re.clearcoatMap,clearcoatRoughnessMap:ze&&!!re.clearcoatRoughnessMap,clearcoatNormalMap:ze&&!!re.clearcoatNormalMap,displacementMap:!!re.displacementMap,roughnessMap:!!re.roughnessMap,metalnessMap:!!re.metalnessMap,specularMap:!!re.specularMap,specularIntensityMap:!!re.specularIntensityMap,specularColorMap:!!re.specularColorMap,specularColorMapEncoding:A(re.specularColorMap),alphaMap:!!re.alphaMap,alphaTest:Oe,gradientMap:!!re.gradientMap,sheen:re.sheen>0,sheenColorMap:!!re.sheenColorMap,sheenColorMapEncoding:A(re.sheenColorMap),sheenRoughnessMap:!!re.sheenRoughnessMap,transmission:re.transmission>0,transmissionMap:!!re.transmissionMap,thicknessMap:!!re.thicknessMap,combine:re.combine,vertexTangents:!!re.normalMap&&!!Z.geometry&&!!Z.geometry.attributes.tangent,vertexColors:re.vertexColors,vertexAlphas:re.vertexColors===!0&&!!Z.geometry&&!!Z.geometry.attributes.color&&Z.geometry.attributes.color.itemSize===4,vertexUvs:!!re.map||!!re.bumpMap||!!re.normalMap||!!re.specularMap||!!re.alphaMap||!!re.emissiveMap||!!re.roughnessMap||!!re.metalnessMap||!!re.clearcoatMap||!!re.clearcoatRoughnessMap||!!re.clearcoatNormalMap||!!re.displacementMap||!!re.transmissionMap||!!re.thicknessMap||!!re.specularIntensityMap||!!re.specularColorMap||!!re.sheenColorMap||!!re.sheenRoughnessMap,uvsVertexOnly:!(!!re.map||!!re.bumpMap||!!re.normalMap||!!re.specularMap||!!re.alphaMap||!!re.emissiveMap||!!re.roughnessMap||!!re.metalnessMap||!!re.clearcoatNormalMap||re.transmission>0||!!re.transmissionMap||!!re.thicknessMap||!!re.specularIntensityMap||!!re.specularColorMap||re.sheen>0||!!re.sheenColorMap||!!re.sheenRoughnessMap)&&!!re.displacementMap,fog:!!E,useFog:re.fog,fogExp2:E&&E.isFogExp2,flatShading:!!re.flatShading,sizeAttenuation:re.sizeAttenuation,logarithmicDepthBuffer:T,skinning:Z.isSkinnedMesh===!0&&pe>0,maxBones:pe,useVertexTexture:L,morphTargets:!!Z.geometry&&!!Z.geometry.morphAttributes.position,morphNormals:!!Z.geometry&&!!Z.geometry.morphAttributes.normal,morphTargetsCount:!!Z.geometry&&!!Z.geometry.morphAttributes.position?Z.geometry.morphAttributes.position.length:0,numDirLights:ee.directional.length,numPointLights:ee.point.length,numSpotLights:ee.spot.length,numRectAreaLights:ee.rectArea.length,numHemiLights:ee.hemi.length,numDirLightShadows:ee.directionalShadowMap.length,numPointLightShadows:ee.pointShadowMap.length,numSpotLightShadows:ee.spotShadowMap.length,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,format:re.format,dithering:re.dithering,shadowMapEnabled:i.shadowMap.enabled&&_.length>0,shadowMapType:i.shadowMap.type,toneMapping:re.toneMapped?i.toneMapping:so,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:re.premultipliedAlpha,doubleSided:re.side===Is,flipSided:re.side===qn,depthPacking:re.depthPacking!==void 0?re.depthPacking:!1,index0AttributeName:re.index0AttributeName,extensionDerivatives:re.extensions&&re.extensions.derivatives,extensionFragDepth:re.extensions&&re.extensions.fragDepth,extensionDrawBuffers:re.extensions&&re.extensions.drawBuffers,extensionShaderTextureLOD:re.extensions&&re.extensions.shaderTextureLOD,rendererExtensionFragDepth:b||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||r.has("EXT_shader_texture_lod"),customProgramCacheKey:re.customProgramCacheKey()}}function I(re){const ee=[];if(re.shaderID?ee.push(re.shaderID):(ee.push(re.customVertexShaderID),ee.push(re.customFragmentShaderID)),re.defines!==void 0)for(const _ in re.defines)ee.push(_),ee.push(re.defines[_]);return re.isRawShaderMaterial===!1&&(B(ee,re),V(ee,re),ee.push(i.outputEncoding)),ee.push(re.customProgramCacheKey),ee.join()}function B(re,ee){re.push(ee.precision),re.push(ee.outputEncoding),re.push(ee.mapEncoding),re.push(ee.matcapEncoding),re.push(ee.envMapMode),re.push(ee.envMapEncoding),re.push(ee.lightMapEncoding),re.push(ee.emissiveMapEncoding),re.push(ee.combine),re.push(ee.vertexUvs),re.push(ee.fogExp2),re.push(ee.sizeAttenuation),re.push(ee.maxBones),re.push(ee.morphTargetsCount),re.push(ee.numDirLights),re.push(ee.numPointLights),re.push(ee.numSpotLights),re.push(ee.numHemiLights),re.push(ee.numRectAreaLights),re.push(ee.numDirLightShadows),re.push(ee.numPointLightShadows),re.push(ee.numSpotLightShadows),re.push(ee.shadowMapType),re.push(ee.toneMapping),re.push(ee.numClippingPlanes),re.push(ee.numClipIntersection),re.push(ee.format),re.push(ee.specularColorMapEncoding),re.push(ee.sheenColorMapEncoding)}function V(re,ee){h.disableAll(),ee.isWebGL2&&h.enable(0),ee.supportsVertexTextures&&h.enable(1),ee.instancing&&h.enable(2),ee.instancingColor&&h.enable(3),ee.map&&h.enable(4),ee.matcap&&h.enable(5),ee.envMap&&h.enable(6),ee.envMapCubeUV&&h.enable(7),ee.lightMap&&h.enable(8),ee.aoMap&&h.enable(9),ee.emissiveMap&&h.enable(10),ee.bumpMap&&h.enable(11),ee.normalMap&&h.enable(12),ee.objectSpaceNormalMap&&h.enable(13),ee.tangentSpaceNormalMap&&h.enable(14),ee.clearcoat&&h.enable(15),ee.clearcoatMap&&h.enable(16),ee.clearcoatRoughnessMap&&h.enable(17),ee.clearcoatNormalMap&&h.enable(18),ee.displacementMap&&h.enable(19),ee.specularMap&&h.enable(20),ee.roughnessMap&&h.enable(21),ee.metalnessMap&&h.enable(22),ee.gradientMap&&h.enable(23),ee.alphaMap&&h.enable(24),ee.alphaTest&&h.enable(25),ee.vertexColors&&h.enable(26),ee.vertexAlphas&&h.enable(27),ee.vertexUvs&&h.enable(28),ee.vertexTangents&&h.enable(29),ee.uvsVertexOnly&&h.enable(30),ee.fog&&h.enable(31),re.push(h.mask),h.disableAll(),ee.useFog&&h.enable(0),ee.flatShading&&h.enable(1),ee.logarithmicDepthBuffer&&h.enable(2),ee.skinning&&h.enable(3),ee.useVertexTexture&&h.enable(4),ee.morphTargets&&h.enable(5),ee.morphNormals&&h.enable(6),ee.premultipliedAlpha&&h.enable(7),ee.shadowMapEnabled&&h.enable(8),ee.physicallyCorrectLights&&h.enable(9),ee.doubleSided&&h.enable(10),ee.flipSided&&h.enable(11),ee.depthPacking&&h.enable(12),ee.dithering&&h.enable(13),ee.specularIntensityMap&&h.enable(14),ee.specularColorMap&&h.enable(15),ee.transmission&&h.enable(16),ee.transmissionMap&&h.enable(17),ee.thicknessMap&&h.enable(18),ee.sheen&&h.enable(19),ee.sheenColorMap&&h.enable(20),ee.sheenRoughnessMap&&h.enable(21),re.push(h.mask)}function X(re){const ee=G[re.type];let _;if(ee){const p=ys[ee];_=$y.clone(p.uniforms)}else _=re.uniforms;return _}function Q(re,ee){let _;for(let p=0,Z=v.length;p<Z;p++){const E=v[p];if(E.cacheKey===ee){_=E,++_.usedTimes;break}}return _===void 0&&(_=new IF(i,ee,re,l),v.push(_)),_}function ae(re){if(--re.usedTimes==0){const ee=v.indexOf(re);v[ee]=v[v.length-1],v.pop(),re.destroy()}}function le(re){m.remove(re)}function he(){m.dispose()}return{getParameters:N,getProgramCacheKey:I,getUniforms:X,acquireProgram:Q,releaseProgram:ae,releaseShaderCache:le,programs:v,dispose:he}}function NF(){let i=new WeakMap;function e(l){let c=i.get(l);return c===void 0&&(c={},i.set(l,c)),c}function t(l){i.delete(l)}function r(l,c,h){i.get(l)[c]=h}function o(){i=new WeakMap}return{get:e,remove:t,update:r,dispose:o}}function FF(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function iE(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function sE(){const i=[];let e=0;const t=[],r=[],o=[];function l(){e=0,t.length=0,r.length=0,o.length=0}function c(T,L,P,O,z,G){let k=i[e];return k===void 0?(k={id:T.id,object:T,geometry:L,material:P,groupOrder:O,renderOrder:T.renderOrder,z,group:G},i[e]=k):(k.id=T.id,k.object=T,k.geometry=L,k.material=P,k.groupOrder=O,k.renderOrder=T.renderOrder,k.z=z,k.group=G),e++,k}function h(T,L,P,O,z,G){const k=c(T,L,P,O,z,G);P.transmission>0?r.push(k):P.transparent===!0?o.push(k):t.push(k)}function m(T,L,P,O,z,G){const k=c(T,L,P,O,z,G);P.transmission>0?r.unshift(k):P.transparent===!0?o.unshift(k):t.unshift(k)}function v(T,L){t.length>1&&t.sort(T||FF),r.length>1&&r.sort(L||iE),o.length>1&&o.sort(L||iE)}function b(){for(let T=e,L=i.length;T<L;T++){const P=i[T];if(P.id===null)break;P.id=null,P.object=null,P.geometry=null,P.material=null,P.group=null}}return{opaque:t,transmissive:r,transparent:o,init:l,push:h,unshift:m,finish:b,sort:v}}function BF(){let i=new WeakMap;function e(r,o){let l;return i.has(r)===!1?(l=new sE,i.set(r,[l])):o>=i.get(r).length?(l=new sE,i.get(r).push(l)):l=i.get(r)[o],l}function t(){i=new WeakMap}return{get:e,dispose:t}}function UF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new fe,color:new Ke};break;case"SpotLight":t={position:new fe,direction:new fe,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new fe,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new fe,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":t={color:new Ke,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return i[e.id]=t,t}}}function zF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let HF=0;function GF(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function VF(i,e){const t=new UF,r=zF(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let b=0;b<9;b++)o.probe.push(new fe);const l=new fe,c=new Qe,h=new Qe;function m(b,T){let L=0,P=0,O=0;for(let ae=0;ae<9;ae++)o.probe[ae].set(0,0,0);let z=0,G=0,k=0,A=0,N=0,I=0,B=0,V=0;b.sort(GF);const X=T!==!0?Math.PI:1;for(let ae=0,le=b.length;ae<le;ae++){const he=b[ae],re=he.color,ee=he.intensity,_=he.distance,p=he.shadow&&he.shadow.map?he.shadow.map.texture:null;if(he.isAmbientLight)L+=re.r*ee*X,P+=re.g*ee*X,O+=re.b*ee*X;else if(he.isLightProbe)for(let Z=0;Z<9;Z++)o.probe[Z].addScaledVector(he.sh.coefficients[Z],ee);else if(he.isDirectionalLight){const Z=t.get(he);if(Z.color.copy(he.color).multiplyScalar(he.intensity*X),he.castShadow){const E=he.shadow,ye=r.get(he);ye.shadowBias=E.bias,ye.shadowNormalBias=E.normalBias,ye.shadowRadius=E.radius,ye.shadowMapSize=E.mapSize,o.directionalShadow[z]=ye,o.directionalShadowMap[z]=p,o.directionalShadowMatrix[z]=he.shadow.matrix,I++}o.directional[z]=Z,z++}else if(he.isSpotLight){const Z=t.get(he);if(Z.position.setFromMatrixPosition(he.matrixWorld),Z.color.copy(re).multiplyScalar(ee*X),Z.distance=_,Z.coneCos=Math.cos(he.angle),Z.penumbraCos=Math.cos(he.angle*(1-he.penumbra)),Z.decay=he.decay,he.castShadow){const E=he.shadow,ye=r.get(he);ye.shadowBias=E.bias,ye.shadowNormalBias=E.normalBias,ye.shadowRadius=E.radius,ye.shadowMapSize=E.mapSize,o.spotShadow[k]=ye,o.spotShadowMap[k]=p,o.spotShadowMatrix[k]=he.shadow.matrix,V++}o.spot[k]=Z,k++}else if(he.isRectAreaLight){const Z=t.get(he);Z.color.copy(re).multiplyScalar(ee),Z.halfWidth.set(he.width*.5,0,0),Z.halfHeight.set(0,he.height*.5,0),o.rectArea[A]=Z,A++}else if(he.isPointLight){const Z=t.get(he);if(Z.color.copy(he.color).multiplyScalar(he.intensity*X),Z.distance=he.distance,Z.decay=he.decay,he.castShadow){const E=he.shadow,ye=r.get(he);ye.shadowBias=E.bias,ye.shadowNormalBias=E.normalBias,ye.shadowRadius=E.radius,ye.shadowMapSize=E.mapSize,ye.shadowCameraNear=E.camera.near,ye.shadowCameraFar=E.camera.far,o.pointShadow[G]=ye,o.pointShadowMap[G]=p,o.pointShadowMatrix[G]=he.shadow.matrix,B++}o.point[G]=Z,G++}else if(he.isHemisphereLight){const Z=t.get(he);Z.skyColor.copy(he.color).multiplyScalar(ee*X),Z.groundColor.copy(he.groundColor).multiplyScalar(ee*X),o.hemi[N]=Z,N++}}A>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=ot.LTC_FLOAT_1,o.rectAreaLTC2=ot.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=ot.LTC_HALF_1,o.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=L,o.ambient[1]=P,o.ambient[2]=O;const Q=o.hash;(Q.directionalLength!==z||Q.pointLength!==G||Q.spotLength!==k||Q.rectAreaLength!==A||Q.hemiLength!==N||Q.numDirectionalShadows!==I||Q.numPointShadows!==B||Q.numSpotShadows!==V)&&(o.directional.length=z,o.spot.length=k,o.rectArea.length=A,o.point.length=G,o.hemi.length=N,o.directionalShadow.length=I,o.directionalShadowMap.length=I,o.pointShadow.length=B,o.pointShadowMap.length=B,o.spotShadow.length=V,o.spotShadowMap.length=V,o.directionalShadowMatrix.length=I,o.pointShadowMatrix.length=B,o.spotShadowMatrix.length=V,Q.directionalLength=z,Q.pointLength=G,Q.spotLength=k,Q.rectAreaLength=A,Q.hemiLength=N,Q.numDirectionalShadows=I,Q.numPointShadows=B,Q.numSpotShadows=V,o.version=HF++)}function v(b,T){let L=0,P=0,O=0,z=0,G=0;const k=T.matrixWorldInverse;for(let A=0,N=b.length;A<N;A++){const I=b[A];if(I.isDirectionalLight){const B=o.directional[L];B.direction.setFromMatrixPosition(I.matrixWorld),l.setFromMatrixPosition(I.target.matrixWorld),B.direction.sub(l),B.direction.transformDirection(k),L++}else if(I.isSpotLight){const B=o.spot[O];B.position.setFromMatrixPosition(I.matrixWorld),B.position.applyMatrix4(k),B.direction.setFromMatrixPosition(I.matrixWorld),l.setFromMatrixPosition(I.target.matrixWorld),B.direction.sub(l),B.direction.transformDirection(k),O++}else if(I.isRectAreaLight){const B=o.rectArea[z];B.position.setFromMatrixPosition(I.matrixWorld),B.position.applyMatrix4(k),h.identity(),c.copy(I.matrixWorld),c.premultiply(k),h.extractRotation(c),B.halfWidth.set(I.width*.5,0,0),B.halfHeight.set(0,I.height*.5,0),B.halfWidth.applyMatrix4(h),B.halfHeight.applyMatrix4(h),z++}else if(I.isPointLight){const B=o.point[P];B.position.setFromMatrixPosition(I.matrixWorld),B.position.applyMatrix4(k),P++}else if(I.isHemisphereLight){const B=o.hemi[G];B.direction.setFromMatrixPosition(I.matrixWorld),B.direction.transformDirection(k),B.direction.normalize(),G++}}}return{setup:m,setupView:v,state:o}}function oE(i,e){const t=new VF(i,e),r=[],o=[];function l(){r.length=0,o.length=0}function c(T){r.push(T)}function h(T){o.push(T)}function m(T){t.setup(r,T)}function v(T){t.setupView(r,T)}return{init:l,state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:m,setupLightsView:v,pushLight:c,pushShadow:h}}function $F(i,e){let t=new WeakMap;function r(l,c=0){let h;return t.has(l)===!1?(h=new oE(i,e),t.set(l,[h])):c>=t.get(l).length?(h=new oE(i,e),t.get(l).push(h)):h=t.get(l)[c],h}function o(){t=new WeakMap}return{get:r,dispose:o}}class Tm extends rr{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=eT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Tm.prototype.isMeshDepthMaterial=!0;class Em extends rr{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new fe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Em.prototype.isMeshDistanceMaterial=!0;const WF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aE(i,e,t){let r=new _h;const o=new We,l=new We,c=new an,h=new Tm({depthPacking:tT}),m=new Em,v={},b=t.maxTextureSize,T={0:qn,1:qo,2:Is},L=new Os({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:WF,fragmentShader:jF}),P=L.clone();P.defines.HORIZONTAL_PASS=1;const O=new bt;O.setAttribute("position",new Ot(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const z=new Fn(O,L),G=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jv,this.render=function(I,B,V){if(G.enabled===!1||G.autoUpdate===!1&&G.needsUpdate===!1||I.length===0)return;const X=i.getRenderTarget(),Q=i.getActiveCubeFace(),ae=i.getActiveMipmapLevel(),le=i.state;le.setBlending(io),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);for(let he=0,re=I.length;he<re;he++){const ee=I[he],_=ee.shadow;if(_===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(_.autoUpdate===!1&&_.needsUpdate===!1)continue;o.copy(_.mapSize);const p=_.getFrameExtents();if(o.multiply(p),l.copy(_.mapSize),(o.x>b||o.y>b)&&(o.x>b&&(l.x=Math.floor(b/p.x),o.x=l.x*p.x,_.mapSize.x=l.x),o.y>b&&(l.y=Math.floor(b/p.y),o.y=l.y*p.y,_.mapSize.y=l.y)),_.map===null&&!_.isPointLightShadow&&this.type===ku){const E={minFilter:Dn,magFilter:Dn,format:tr};_.map=new Oi(o.x,o.y,E),_.map.texture.name=ee.name+".shadowMap",_.mapPass=new Oi(o.x,o.y,E),_.camera.updateProjectionMatrix()}if(_.map===null){const E={minFilter:Xn,magFilter:Xn,format:tr};_.map=new Oi(o.x,o.y,E),_.map.texture.name=ee.name+".shadowMap",_.camera.updateProjectionMatrix()}i.setRenderTarget(_.map),i.clear();const Z=_.getViewportCount();for(let E=0;E<Z;E++){const ye=_.getViewport(E);c.set(l.x*ye.x,l.y*ye.y,l.x*ye.z,l.y*ye.w),le.viewport(c),_.updateMatrices(ee,E),r=_.getFrustum(),N(B,V,_.camera,ee,this.type)}!_.isPointLightShadow&&this.type===ku&&k(_,V),_.needsUpdate=!1}G.needsUpdate=!1,i.setRenderTarget(X,Q,ae)};function k(I,B){const V=e.update(z);L.defines.VSM_SAMPLES!==I.blurSamples&&(L.defines.VSM_SAMPLES=I.blurSamples,P.defines.VSM_SAMPLES=I.blurSamples,L.needsUpdate=!0,P.needsUpdate=!0),L.uniforms.shadow_pass.value=I.map.texture,L.uniforms.resolution.value=I.mapSize,L.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(B,null,V,L,z,null),P.uniforms.shadow_pass.value=I.mapPass.texture,P.uniforms.resolution.value=I.mapSize,P.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(B,null,V,P,z,null)}function A(I,B,V,X,Q,ae,le){let he=null;const re=X.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(re!==void 0?he=re:he=X.isPointLight===!0?m:h,i.localClippingEnabled&&V.clipShadows===!0&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0){const ee=he.uuid,_=V.uuid;let p=v[ee];p===void 0&&(p={},v[ee]=p);let Z=p[_];Z===void 0&&(Z=he.clone(),p[_]=Z),he=Z}return he.visible=V.visible,he.wireframe=V.wireframe,le===ku?he.side=V.shadowSide!==null?V.shadowSide:V.side:he.side=V.shadowSide!==null?V.shadowSide:T[V.side],he.alphaMap=V.alphaMap,he.alphaTest=V.alphaTest,he.clipShadows=V.clipShadows,he.clippingPlanes=V.clippingPlanes,he.clipIntersection=V.clipIntersection,he.displacementMap=V.displacementMap,he.displacementScale=V.displacementScale,he.displacementBias=V.displacementBias,he.wireframeLinewidth=V.wireframeLinewidth,he.linewidth=V.linewidth,X.isPointLight===!0&&he.isMeshDistanceMaterial===!0&&(he.referencePosition.setFromMatrixPosition(X.matrixWorld),he.nearDistance=Q,he.farDistance=ae),he}function N(I,B,V,X,Q){if(I.visible===!1)return;if(I.layers.test(B.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&Q===ku)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,I.matrixWorld);const he=e.update(I),re=I.material;if(Array.isArray(re)){const ee=he.groups;for(let _=0,p=ee.length;_<p;_++){const Z=ee[_],E=re[Z.materialIndex];if(E&&E.visible){const ye=A(I,he,E,X,V.near,V.far,Q);i.renderBufferDirect(V,null,he,ye,I,Z)}}}else if(re.visible){const ee=A(I,he,re,X,V.near,V.far,Q);i.renderBufferDirect(V,null,he,ee,I,null)}}const le=I.children;for(let he=0,re=le.length;he<re;he++)N(le[he],B,V,X,Q)}}function qF(i,e,t){const r=t.isWebGL2;function o(){let R=!1;const D=new an;let H=null;const q=new an(0,0,0,0);return{setMask:function(K){H!==K&&!R&&(i.colorMask(K,K,K,K),H=K)},setLocked:function(K){R=K},setClear:function(K,ne,te,ue,ce){ce===!0&&(K*=ue,ne*=ue,te*=ue),D.set(K,ne,te,ue),q.equals(D)===!1&&(i.clearColor(K,ne,te,ue),q.copy(D))},reset:function(){R=!1,H=null,q.set(-1,0,0,0)}}}function l(){let R=!1,D=null,H=null,q=null;return{setTest:function(K){K?Ce(2929):_e(2929)},setMask:function(K){D!==K&&!R&&(i.depthMask(K),D=K)},setFunc:function(K){if(H!==K){if(K)switch(K){case $S:i.depthFunc(512);break;case WS:i.depthFunc(519);break;case jS:i.depthFunc(513);break;case Vp:i.depthFunc(515);break;case qS:i.depthFunc(514);break;case XS:i.depthFunc(518);break;case YS:i.depthFunc(516);break;case KS:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);H=K}},setLocked:function(K){R=K},setClear:function(K){q!==K&&(i.clearDepth(K),q=K)},reset:function(){R=!1,D=null,H=null,q=null}}}function c(){let R=!1,D=null,H=null,q=null,K=null,ne=null,te=null,ue=null,ce=null;return{setTest:function(ge){R||(ge?Ce(2960):_e(2960))},setMask:function(ge){D!==ge&&!R&&(i.stencilMask(ge),D=ge)},setFunc:function(ge,Ne,Xe){(H!==ge||q!==Ne||K!==Xe)&&(i.stencilFunc(ge,Ne,Xe),H=ge,q=Ne,K=Xe)},setOp:function(ge,Ne,Xe){(ne!==ge||te!==Ne||ue!==Xe)&&(i.stencilOp(ge,Ne,Xe),ne=ge,te=Ne,ue=Xe)},setLocked:function(ge){R=ge},setClear:function(ge){ce!==ge&&(i.clearStencil(ge),ce=ge)},reset:function(){R=!1,D=null,H=null,q=null,K=null,ne=null,te=null,ue=null,ce=null}}}const h=new o,m=new l,v=new c;let b={},T={},L=null,P=!1,O=null,z=null,G=null,k=null,A=null,N=null,I=null,B=!1,V=null,X=null,Q=null,ae=null,le=null;const he=i.getParameter(35661);let re=!1,ee=0;const _=i.getParameter(7938);_.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(_)[1]),re=ee>=1):_.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(_)[1]),re=ee>=2);let p=null,Z={};const E=i.getParameter(3088),ye=i.getParameter(2978),Re=new an().fromArray(E),Me=new an().fromArray(ye);function pe(R,D,H){const q=new Uint8Array(4),K=i.createTexture();i.bindTexture(R,K),i.texParameteri(R,10241,9728),i.texParameteri(R,10240,9728);for(let ne=0;ne<H;ne++)i.texImage2D(D+ne,0,6408,1,1,0,6408,5121,q);return K}const ve={};ve[3553]=pe(3553,3553,1),ve[34067]=pe(34067,34069,6),h.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Ce(2929),m.setFunc(Vp),$e(!1),Le(Qv),Ce(2884),He(io);function Ce(R){b[R]!==!0&&(i.enable(R),b[R]=!0)}function _e(R){b[R]!==!1&&(i.disable(R),b[R]=!1)}function Pe(R,D){return T[R]!==D?(i.bindFramebuffer(R,D),T[R]=D,r&&(R===36009&&(T[36160]=D),R===36160&&(T[36009]=D)),!0):!1}function Te(R){return L!==R?(i.useProgram(R),L=R,!0):!1}const Oe={[rl]:32774,[kS]:32778,[OS]:32779};if(r)Oe[iy]=32775,Oe[sy]=32776;else{const R=e.get("EXT_blend_minmax");R!==null&&(Oe[iy]=R.MIN_EXT,Oe[sy]=R.MAX_EXT)}const ze={[DS]:0,[NS]:1,[FS]:768,[oy]:770,[VS]:776,[HS]:774,[US]:772,[BS]:769,[ay]:771,[GS]:775,[zS]:773};function He(R,D,H,q,K,ne,te,ue){if(R===io){P===!0&&(_e(3042),P=!1);return}if(P===!1&&(Ce(3042),P=!0),R!==PS){if(R!==O||ue!==B){if((z!==rl||A!==rl)&&(i.blendEquation(32774),z=rl,A=rl),ue)switch(R){case Ou:i.blendFuncSeparate(1,771,1,771);break;case ty:i.blendFunc(1,1);break;case ny:i.blendFuncSeparate(0,0,769,771);break;case ry:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}else switch(R){case Ou:i.blendFuncSeparate(770,771,1,771);break;case ty:i.blendFunc(770,1);break;case ny:i.blendFunc(0,769);break;case ry:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}G=null,k=null,N=null,I=null,O=R,B=ue}return}K=K||D,ne=ne||H,te=te||q,(D!==z||K!==A)&&(i.blendEquationSeparate(Oe[D],Oe[K]),z=D,A=K),(H!==G||q!==k||ne!==N||te!==I)&&(i.blendFuncSeparate(ze[H],ze[q],ze[ne],ze[te]),G=H,k=q,N=ne,I=te),O=R,B=null}function $(R,D){R.side===Is?_e(2884):Ce(2884);let H=R.side===qn;D&&(H=!H),$e(H),R.blending===Ou&&R.transparent===!1?He(io):He(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.premultipliedAlpha),m.setFunc(R.depthFunc),m.setTest(R.depthTest),m.setMask(R.depthWrite),h.setMask(R.colorWrite);const q=R.stencilWrite;v.setTest(q),q&&(v.setMask(R.stencilWriteMask),v.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),v.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),qe(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),R.alphaToCoverage===!0?Ce(32926):_e(32926)}function $e(R){V!==R&&(R?i.frontFace(2304):i.frontFace(2305),V=R)}function Le(R){R!==LS?(Ce(2884),R!==X&&(R===Qv?i.cullFace(1029):R===RS?i.cullFace(1028):i.cullFace(1032))):_e(2884),X=R}function Fe(R){R!==Q&&(re&&i.lineWidth(R),Q=R)}function qe(R,D,H){R?(Ce(32823),(ae!==D||le!==H)&&(i.polygonOffset(D,H),ae=D,le=H)):_e(32823)}function De(R){R?Ce(3089):_e(3089)}function oe(R){R===void 0&&(R=33984+he-1),p!==R&&(i.activeTexture(R),p=R)}function vt(R,D){p===null&&oe();let H=Z[p];H===void 0&&(H={type:void 0,texture:void 0},Z[p]=H),(H.type!==R||H.texture!==D)&&(i.bindTexture(R,D||ve[R]),H.type=R,H.texture=D)}function j(){const R=Z[p];R!==void 0&&R.type!==void 0&&(i.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)}function Je(){try{i.compressedTexImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function Wt(){try{i.texSubImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function U(){try{i.texSubImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function n(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function s(){try{i.texStorage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function a(){try{i.texStorage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function f(){try{i.texImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function g(){try{i.texImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function y(R){Re.equals(R)===!1&&(i.scissor(R.x,R.y,R.z,R.w),Re.copy(R))}function S(R){Me.equals(R)===!1&&(i.viewport(R.x,R.y,R.z,R.w),Me.copy(R))}function C(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),r===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),b={},p=null,Z={},T={},L=null,P=!1,O=null,z=null,G=null,k=null,A=null,N=null,I=null,B=!1,V=null,X=null,Q=null,ae=null,le=null,Re.set(0,0,i.canvas.width,i.canvas.height),Me.set(0,0,i.canvas.width,i.canvas.height),h.reset(),m.reset(),v.reset()}return{buffers:{color:h,depth:m,stencil:v},enable:Ce,disable:_e,bindFramebuffer:Pe,useProgram:Te,setBlending:He,setMaterial:$,setFlipSided:$e,setCullFace:Le,setLineWidth:Fe,setPolygonOffset:qe,setScissorTest:De,activeTexture:oe,bindTexture:vt,unbindTexture:j,compressedTexImage2D:Je,texImage2D:f,texImage3D:g,texStorage2D:s,texStorage3D:a,texSubImage2D:Wt,texSubImage3D:U,compressedTexSubImage2D:n,scissor:y,viewport:S,reset:C}}function XF(i,e,t,r,o,l,c){const h=o.isWebGL2,m=o.maxTextures,v=o.maxCubemapSize,b=o.maxTextureSize,T=o.maxSamples,P=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,O=new WeakMap;let z,G=!1;try{G=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function k(U,n){return G?new OffscreenCanvas(U,n):Kp("canvas")}function A(U,n,s,a){let f=1;if((U.width>a||U.height>a)&&(f=a/Math.max(U.width,U.height)),f<1||n===!0)if(typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&U instanceof ImageBitmap){const g=n?sT:Math.floor,y=g(f*U.width),S=g(f*U.height);z===void 0&&(z=k(y,S));const C=s?k(y,S):z;return C.width=y,C.height=S,C.getContext("2d").drawImage(U,0,0,y,S),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+y+"x"+S+")."),C}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function N(U){return by(U.width)&&by(U.height)}function I(U){return h?!1:U.wrapS!==hr||U.wrapT!==hr||U.minFilter!==Xn&&U.minFilter!==Dn}function B(U,n){return U.generateMipmaps&&n&&U.minFilter!==Xn&&U.minFilter!==Dn}function V(U){i.generateMipmap(U)}function X(U,n,s,a){if(h===!1)return n;if(U!==null){if(i[U]!==void 0)return i[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let f=n;return n===6403&&(s===5126&&(f=33326),s===5131&&(f=33325),s===5121&&(f=33321)),n===6407&&(s===5126&&(f=34837),s===5131&&(f=34843),s===5121&&(f=32849)),n===6408&&(s===5126&&(f=34836),s===5131&&(f=34842),s===5121&&(f=a===Or?35907:32856)),(f===33325||f===33326||f===34842||f===34836)&&e.get("EXT_color_buffer_float"),f}function Q(U,n,s){return B(U,s)===!0||U.isFramebufferTexture&&U.minFilter!==Xn&&U.minFilter!==Dn?Math.log2(Math.max(n.width,n.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?n.mipmaps.length:1}function ae(U){return U===Xn||U===uh||U===ch?9728:9729}function le(U){const n=U.target;n.removeEventListener("dispose",le),re(n),n.isVideoTexture&&O.delete(n),c.memory.textures--}function he(U){const n=U.target;n.removeEventListener("dispose",he),ee(n)}function re(U){const n=r.get(U);n.__webglInit!==void 0&&(i.deleteTexture(n.__webglTexture),r.remove(U))}function ee(U){const n=U.texture,s=r.get(U),a=r.get(n);if(!!U){if(a.__webglTexture!==void 0&&(i.deleteTexture(a.__webglTexture),c.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let f=0;f<6;f++)i.deleteFramebuffer(s.__webglFramebuffer[f]),s.__webglDepthbuffer&&i.deleteRenderbuffer(s.__webglDepthbuffer[f]);else i.deleteFramebuffer(s.__webglFramebuffer),s.__webglDepthbuffer&&i.deleteRenderbuffer(s.__webglDepthbuffer),s.__webglMultisampledFramebuffer&&i.deleteFramebuffer(s.__webglMultisampledFramebuffer),s.__webglColorRenderbuffer&&i.deleteRenderbuffer(s.__webglColorRenderbuffer),s.__webglDepthRenderbuffer&&i.deleteRenderbuffer(s.__webglDepthRenderbuffer);if(U.isWebGLMultipleRenderTargets)for(let f=0,g=n.length;f<g;f++){const y=r.get(n[f]);y.__webglTexture&&(i.deleteTexture(y.__webglTexture),c.memory.textures--),r.remove(n[f])}r.remove(n),r.remove(U)}}let _=0;function p(){_=0}function Z(){const U=_;return U>=m&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+m),_+=1,U}function E(U,n){const s=r.get(U);if(U.isVideoTexture&&oe(U),U.version>0&&s.__version!==U.version){const a=U.image;if(a===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(a.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Pe(s,U,n);return}}t.activeTexture(33984+n),t.bindTexture(3553,s.__webglTexture)}function ye(U,n){const s=r.get(U);if(U.version>0&&s.__version!==U.version){Pe(s,U,n);return}t.activeTexture(33984+n),t.bindTexture(35866,s.__webglTexture)}function Re(U,n){const s=r.get(U);if(U.version>0&&s.__version!==U.version){Pe(s,U,n);return}t.activeTexture(33984+n),t.bindTexture(32879,s.__webglTexture)}function Me(U,n){const s=r.get(U);if(U.version>0&&s.__version!==U.version){Te(s,U,n);return}t.activeTexture(33984+n),t.bindTexture(34067,s.__webglTexture)}const pe={[Ps]:10497,[hr]:33071,[Fu]:33648},ve={[Xn]:9728,[uh]:9984,[ch]:9986,[Dn]:9729,[Wp]:9985,[oo]:9987};function Ce(U,n,s){if(s?(i.texParameteri(U,10242,pe[n.wrapS]),i.texParameteri(U,10243,pe[n.wrapT]),(U===32879||U===35866)&&i.texParameteri(U,32882,pe[n.wrapR]),i.texParameteri(U,10240,ve[n.magFilter]),i.texParameteri(U,10241,ve[n.minFilter])):(i.texParameteri(U,10242,33071),i.texParameteri(U,10243,33071),(U===32879||U===35866)&&i.texParameteri(U,32882,33071),(n.wrapS!==hr||n.wrapT!==hr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(U,10240,ae(n.magFilter)),i.texParameteri(U,10241,ae(n.minFilter)),n.minFilter!==Xn&&n.minFilter!==Dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const a=e.get("EXT_texture_filter_anisotropic");if(n.type===ks&&e.has("OES_texture_float_linear")===!1||h===!1&&n.type===Xo&&e.has("OES_texture_half_float_linear")===!1)return;(n.anisotropy>1||r.get(n).__currentAnisotropy)&&(i.texParameterf(U,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,o.getMaxAnisotropy())),r.get(n).__currentAnisotropy=n.anisotropy)}}function _e(U,n){U.__webglInit===void 0&&(U.__webglInit=!0,n.addEventListener("dispose",le),U.__webglTexture=i.createTexture(),c.memory.textures++)}function Pe(U,n,s){let a=3553;n.isDataTexture2DArray&&(a=35866),n.isDataTexture3D&&(a=32879),_e(U,n),t.activeTexture(33984+s),t.bindTexture(a,U.__webglTexture),i.pixelStorei(37440,n.flipY),i.pixelStorei(37441,n.premultiplyAlpha),i.pixelStorei(3317,n.unpackAlignment),i.pixelStorei(37443,0);const f=I(n)&&N(n.image)===!1,g=A(n.image,f,!1,b),y=N(g)||h,S=l.convert(n.format);let C=l.convert(n.type),R=X(n.internalFormat,S,C,n.encoding);Ce(a,n,y);let D;const H=n.mipmaps,q=h&&n.isVideoTexture!==!0,K=U.__version===void 0,ne=Q(n,g,y);if(n.isDepthTexture)R=6402,h?n.type===ks?R=36012:n.type===fh?R=33190:n.type===ol?R=35056:R=33189:n.type===ks&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===Yo&&R===6402&&n.type!==Bu&&n.type!==fh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Bu,C=l.convert(n.type)),n.format===al&&R===6402&&(R=34041,n.type!==ol&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=ol,C=l.convert(n.type))),q&&K?t.texStorage2D(3553,1,R,g.width,g.height):t.texImage2D(3553,0,R,g.width,g.height,0,S,C,null);else if(n.isDataTexture)if(H.length>0&&y){q&&K&&t.texStorage2D(3553,ne,R,H[0].width,H[0].height);for(let te=0,ue=H.length;te<ue;te++)D=H[te],q?t.texSubImage2D(3553,0,0,0,D.width,D.height,S,C,D.data):t.texImage2D(3553,te,R,D.width,D.height,0,S,C,D.data);n.generateMipmaps=!1}else q?(K&&t.texStorage2D(3553,ne,R,g.width,g.height),t.texSubImage2D(3553,0,0,0,g.width,g.height,S,C,g.data)):t.texImage2D(3553,0,R,g.width,g.height,0,S,C,g.data);else if(n.isCompressedTexture){q&&K&&t.texStorage2D(3553,ne,R,H[0].width,H[0].height);for(let te=0,ue=H.length;te<ue;te++)D=H[te],n.format!==tr&&n.format!==ao?S!==null?q?t.compressedTexSubImage2D(3553,te,0,0,D.width,D.height,S,D.data):t.compressedTexImage2D(3553,te,R,D.width,D.height,0,D.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):q?t.texSubImage2D(3553,te,0,0,D.width,D.height,S,C,D.data):t.texImage2D(3553,te,R,D.width,D.height,0,S,C,D.data)}else if(n.isDataTexture2DArray)q?(K&&t.texStorage3D(35866,ne,R,g.width,g.height,g.depth),t.texSubImage3D(35866,0,0,0,0,g.width,g.height,g.depth,S,C,g.data)):t.texImage3D(35866,0,R,g.width,g.height,g.depth,0,S,C,g.data);else if(n.isDataTexture3D)q?(K&&t.texStorage3D(32879,ne,R,g.width,g.height,g.depth),t.texSubImage3D(32879,0,0,0,0,g.width,g.height,g.depth,S,C,g.data)):t.texImage3D(32879,0,R,g.width,g.height,g.depth,0,S,C,g.data);else if(n.isFramebufferTexture)q&&K?t.texStorage2D(3553,ne,R,g.width,g.height):t.texImage2D(3553,0,R,g.width,g.height,0,S,C,null);else if(H.length>0&&y){q&&K&&t.texStorage2D(3553,ne,R,H[0].width,H[0].height);for(let te=0,ue=H.length;te<ue;te++)D=H[te],q?t.texSubImage2D(3553,te,0,0,S,C,D):t.texImage2D(3553,te,R,S,C,D);n.generateMipmaps=!1}else q?(K&&t.texStorage2D(3553,ne,R,g.width,g.height),t.texSubImage2D(3553,0,0,0,S,C,g)):t.texImage2D(3553,0,R,S,C,g);B(n,y)&&V(a),U.__version=n.version,n.onUpdate&&n.onUpdate(n)}function Te(U,n,s){if(n.image.length!==6)return;_e(U,n),t.activeTexture(33984+s),t.bindTexture(34067,U.__webglTexture),i.pixelStorei(37440,n.flipY),i.pixelStorei(37441,n.premultiplyAlpha),i.pixelStorei(3317,n.unpackAlignment),i.pixelStorei(37443,0);const a=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),f=n.image[0]&&n.image[0].isDataTexture,g=[];for(let te=0;te<6;te++)!a&&!f?g[te]=A(n.image[te],!1,!0,v):g[te]=f?n.image[te].image:n.image[te];const y=g[0],S=N(y)||h,C=l.convert(n.format),R=l.convert(n.type),D=X(n.internalFormat,C,R,n.encoding),H=h&&n.isVideoTexture!==!0,q=U.__version===void 0;let K=Q(n,y,S);Ce(34067,n,S);let ne;if(a){H&&q&&t.texStorage2D(34067,K,D,y.width,y.height);for(let te=0;te<6;te++){ne=g[te].mipmaps;for(let ue=0;ue<ne.length;ue++){const ce=ne[ue];n.format!==tr&&n.format!==ao?C!==null?H?t.compressedTexSubImage2D(34069+te,ue,0,0,ce.width,ce.height,C,ce.data):t.compressedTexImage2D(34069+te,ue,D,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):H?t.texSubImage2D(34069+te,ue,0,0,ce.width,ce.height,C,R,ce.data):t.texImage2D(34069+te,ue,D,ce.width,ce.height,0,C,R,ce.data)}}}else{ne=n.mipmaps,H&&q&&(ne.length>0&&K++,t.texStorage2D(34067,K,D,g[0].width,g[0].height));for(let te=0;te<6;te++)if(f){H?t.texSubImage2D(34069+te,0,0,0,g[te].width,g[te].height,C,R,g[te].data):t.texImage2D(34069+te,0,D,g[te].width,g[te].height,0,C,R,g[te].data);for(let ue=0;ue<ne.length;ue++){const ge=ne[ue].image[te].image;H?t.texSubImage2D(34069+te,ue+1,0,0,ge.width,ge.height,C,R,ge.data):t.texImage2D(34069+te,ue+1,D,ge.width,ge.height,0,C,R,ge.data)}}else{H?t.texSubImage2D(34069+te,0,0,0,C,R,g[te]):t.texImage2D(34069+te,0,D,C,R,g[te]);for(let ue=0;ue<ne.length;ue++){const ce=ne[ue];H?t.texSubImage2D(34069+te,ue+1,0,0,C,R,ce.image[te]):t.texImage2D(34069+te,ue+1,D,C,R,ce.image[te])}}}B(n,S)&&V(34067),U.__version=n.version,n.onUpdate&&n.onUpdate(n)}function Oe(U,n,s,a,f){const g=l.convert(s.format),y=l.convert(s.type),S=X(s.internalFormat,g,y,s.encoding);r.get(n).__hasExternalTextures||(f===32879||f===35866?t.texImage3D(f,0,S,n.width,n.height,n.depth,0,g,y,null):t.texImage2D(f,0,S,n.width,n.height,0,g,y,null)),t.bindFramebuffer(36160,U),n.useRenderToTexture?P.framebufferTexture2DMultisampleEXT(36160,a,f,r.get(s).__webglTexture,0,De(n)):i.framebufferTexture2D(36160,a,f,r.get(s).__webglTexture,0),t.bindFramebuffer(36160,null)}function ze(U,n,s){if(i.bindRenderbuffer(36161,U),n.depthBuffer&&!n.stencilBuffer){let a=33189;if(s||n.useRenderToTexture){const f=n.depthTexture;f&&f.isDepthTexture&&(f.type===ks?a=36012:f.type===fh&&(a=33190));const g=De(n);n.useRenderToTexture?P.renderbufferStorageMultisampleEXT(36161,g,a,n.width,n.height):i.renderbufferStorageMultisample(36161,g,a,n.width,n.height)}else i.renderbufferStorage(36161,a,n.width,n.height);i.framebufferRenderbuffer(36160,36096,36161,U)}else if(n.depthBuffer&&n.stencilBuffer){const a=De(n);s&&n.useRenderbuffer?i.renderbufferStorageMultisample(36161,a,35056,n.width,n.height):n.useRenderToTexture?P.renderbufferStorageMultisampleEXT(36161,a,35056,n.width,n.height):i.renderbufferStorage(36161,34041,n.width,n.height),i.framebufferRenderbuffer(36160,33306,36161,U)}else{const a=n.isWebGLMultipleRenderTargets===!0?n.texture[0]:n.texture,f=l.convert(a.format),g=l.convert(a.type),y=X(a.internalFormat,f,g,a.encoding),S=De(n);s&&n.useRenderbuffer?i.renderbufferStorageMultisample(36161,S,y,n.width,n.height):n.useRenderToTexture?P.renderbufferStorageMultisampleEXT(36161,S,y,n.width,n.height):i.renderbufferStorage(36161,y,n.width,n.height)}i.bindRenderbuffer(36161,null)}function He(U,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,U),!(n.depthTexture&&n.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(n.depthTexture).__webglTexture||n.depthTexture.image.width!==n.width||n.depthTexture.image.height!==n.height)&&(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);const a=r.get(n.depthTexture).__webglTexture,f=De(n);if(n.depthTexture.format===Yo)n.useRenderToTexture?P.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,f):i.framebufferTexture2D(36160,36096,3553,a,0);else if(n.depthTexture.format===al)n.useRenderToTexture?P.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,f):i.framebufferTexture2D(36160,33306,3553,a,0);else throw new Error("Unknown depthTexture format")}function $(U){const n=r.get(U),s=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!n.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");He(n.__webglFramebuffer,U)}else if(s){n.__webglDepthbuffer=[];for(let a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=i.createRenderbuffer(),ze(n.__webglDepthbuffer[a],U,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=i.createRenderbuffer(),ze(n.__webglDepthbuffer,U,!1);t.bindFramebuffer(36160,null)}function $e(U,n,s){const a=r.get(U);n!==void 0&&Oe(a.__webglFramebuffer,U,U.texture,36064,3553),s!==void 0&&$(U)}function Le(U){const n=U.texture,s=r.get(U),a=r.get(n);U.addEventListener("dispose",he),U.isWebGLMultipleRenderTargets!==!0&&(a.__webglTexture===void 0&&(a.__webglTexture=i.createTexture()),a.__version=n.version,c.memory.textures++);const f=U.isWebGLCubeRenderTarget===!0,g=U.isWebGLMultipleRenderTargets===!0,y=n.isDataTexture3D||n.isDataTexture2DArray,S=N(U)||h;if(h&&n.format===ao&&(n.type===ks||n.type===Xo)&&(n.format=tr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),f){s.__webglFramebuffer=[];for(let C=0;C<6;C++)s.__webglFramebuffer[C]=i.createFramebuffer()}else if(s.__webglFramebuffer=i.createFramebuffer(),g)if(o.drawBuffers){const C=U.texture;for(let R=0,D=C.length;R<D;R++){const H=r.get(C[R]);H.__webglTexture===void 0&&(H.__webglTexture=i.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(U.useRenderbuffer)if(h){s.__webglMultisampledFramebuffer=i.createFramebuffer(),s.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,s.__webglColorRenderbuffer);const C=l.convert(n.format),R=l.convert(n.type),D=X(n.internalFormat,C,R,n.encoding),H=De(U);i.renderbufferStorageMultisample(36161,H,D,U.width,U.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),U.depthBuffer&&(s.__webglDepthRenderbuffer=i.createRenderbuffer(),ze(s.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(f){t.bindTexture(34067,a.__webglTexture),Ce(34067,n,S);for(let C=0;C<6;C++)Oe(s.__webglFramebuffer[C],U,n,36064,34069+C);B(n,S)&&V(34067),t.unbindTexture()}else if(g){const C=U.texture;for(let R=0,D=C.length;R<D;R++){const H=C[R],q=r.get(H);t.bindTexture(3553,q.__webglTexture),Ce(3553,H,S),Oe(s.__webglFramebuffer,U,H,36064+R,3553),B(H,S)&&V(3553)}t.unbindTexture()}else{let C=3553;y&&(h?C=n.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(C,a.__webglTexture),Ce(C,n,S),Oe(s.__webglFramebuffer,U,n,36064,C),B(n,S)&&V(C),t.unbindTexture()}U.depthBuffer&&$(U)}function Fe(U){const n=N(U)||h,s=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let a=0,f=s.length;a<f;a++){const g=s[a];if(B(g,n)){const y=U.isWebGLCubeRenderTarget?34067:3553,S=r.get(g).__webglTexture;t.bindTexture(y,S),V(y),t.unbindTexture()}}}function qe(U){if(U.useRenderbuffer)if(h){const n=U.width,s=U.height;let a=16384;const f=[36064],g=U.stencilBuffer?33306:36096;U.depthBuffer&&f.push(g),U.ignoreDepthForMultisampleCopy||(U.depthBuffer&&(a|=256),U.stencilBuffer&&(a|=1024));const y=r.get(U);t.bindFramebuffer(36008,y.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,y.__webglFramebuffer),U.ignoreDepthForMultisampleCopy&&(i.invalidateFramebuffer(36008,[g]),i.invalidateFramebuffer(36009,[g])),i.blitFramebuffer(0,0,n,s,0,0,n,s,a,9728),i.invalidateFramebuffer(36008,f),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,y.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function De(U){return h&&(U.useRenderbuffer||U.useRenderToTexture)?Math.min(T,U.samples):0}function oe(U){const n=c.render.frame;O.get(U)!==n&&(O.set(U,n),U.update())}let vt=!1,j=!1;function Je(U,n){U&&U.isWebGLRenderTarget&&(vt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),vt=!0),U=U.texture),E(U,n)}function Wt(U,n){U&&U.isWebGLCubeRenderTarget&&(j===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),j=!0),U=U.texture),Me(U,n)}this.allocateTextureUnit=Z,this.resetTextureUnits=p,this.setTexture2D=E,this.setTexture2DArray=ye,this.setTexture3D=Re,this.setTextureCube=Me,this.rebindTextures=$e,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=$,this.setupFrameBufferTexture=Oe,this.safeSetTexture2D=Je,this.safeSetTextureCube=Wt}function lE(i,e,t){const r=t.isWebGL2;function o(l){let c;if(l===ps)return 5121;if(l===aM)return 32819;if(l===lM)return 32820;if(l===uM)return 33635;if(l===iM)return 5120;if(l===sM)return 5122;if(l===Bu)return 5123;if(l===oM)return 5124;if(l===fh)return 5125;if(l===ks)return 5126;if(l===Xo)return r?5131:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(l===cM)return 6406;if(l===ao)return 6407;if(l===tr)return 6408;if(l===fM)return 6409;if(l===hM)return 6410;if(l===Yo)return 6402;if(l===al)return 34041;if(l===dM)return 6403;if(l===pM)return 36244;if(l===mM)return 33319;if(l===gM)return 33320;if(l===vM)return 36248;if(l===yM)return 36249;if(l===ly||l===uy||l===cy||l===fy)if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(l===ly)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===uy)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===cy)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===fy)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===hy||l===dy||l===py||l===my)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(l===hy)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===dy)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===py)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===my)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===xM)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if((l===gy||l===vy)&&(c=e.get("WEBGL_compressed_texture_etc"),c!==null)){if(l===gy)return c.COMPRESSED_RGB8_ETC2;if(l===vy)return c.COMPRESSED_RGBA8_ETC2_EAC}if(l===wM||l===_M||l===bM||l===SM||l===MM||l===TM||l===EM||l===AM||l===CM||l===LM||l===RM||l===IM||l===PM||l===kM||l===DM||l===NM||l===FM||l===BM||l===UM||l===zM||l===HM||l===GM||l===VM||l===$M||l===WM||l===jM||l===qM||l===XM)return c=e.get("WEBGL_compressed_texture_astc"),c!==null?l:null;if(l===OM)return c=e.get("EXT_texture_compression_bptc"),c!==null?l:null;if(l===ol)return r?34042:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:o}}class Jy extends dr{constructor(e=[]){super();this.cameras=e}}Jy.prototype.isArrayCamera=!0;class Fr extends Vt{constructor(){super();this.type="Group"}}Fr.prototype.isGroup=!0;const YF={type:"move"};class ex{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Fr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Fr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Fr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let o=null,l=null,c=null;const h=this._targetRay,m=this._grip,v=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(h!==null&&(o=t.getPose(e.targetRaySpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(YF))),v&&e.hand){c=!0;for(const z of e.hand.values()){const G=t.getJointPose(z,r);if(v.joints[z.jointName]===void 0){const A=new Fr;A.matrixAutoUpdate=!1,A.visible=!1,v.joints[z.jointName]=A,v.add(A)}const k=v.joints[z.jointName];G!==null&&(k.matrix.fromArray(G.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=G.radius),k.visible=G!==null}const b=v.joints["index-finger-tip"],T=v.joints["thumb-tip"],L=b.position.distanceTo(T.position),P=.02,O=.005;v.inputState.pinching&&L>P+O?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&L<=P-O&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,r),l!==null&&(m.matrix.fromArray(l.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),l.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(l.linearVelocity)):m.hasLinearVelocity=!1,l.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(l.angularVelocity)):m.hasAngularVelocity=!1));return h!==null&&(h.visible=o!==null),m!==null&&(m.visible=l!==null),v!==null&&(v.visible=c!==null),this}}class Am extends Nn{constructor(e,t,r,o,l,c,h,m,v,b){if(b=b!==void 0?b:Yo,b!==Yo&&b!==al)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&b===Yo&&(r=Bu),r===void 0&&b===al&&(r=ol);super(null,o,l,c,h,m,b,r,v);this.image={width:e,height:t},this.magFilter=h!==void 0?h:Xn,this.minFilter=m!==void 0?m:Xn,this.flipY=!1,this.generateMipmaps=!1}}Am.prototype.isDepthTexture=!0;class KF extends Ko{constructor(e,t){super();const r=this;let o=null,l=1,c=null,h="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let v=null,b=null,T=null,L=null,P=!1,O=null;const z=t.getContextAttributes();let G=null,k=null;const A=[],N=new Map,I=new dr;I.layers.enable(1),I.viewport=new an;const B=new dr;B.layers.enable(2),B.viewport=new an;const V=[I,B],X=new Jy;X.layers.enable(1),X.layers.enable(2);let Q=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Me){let pe=A[Me];return pe===void 0&&(pe=new ex,A[Me]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(Me){let pe=A[Me];return pe===void 0&&(pe=new ex,A[Me]=pe),pe.getGripSpace()},this.getHand=function(Me){let pe=A[Me];return pe===void 0&&(pe=new ex,A[Me]=pe),pe.getHandSpace()};function le(Me){const pe=N.get(Me.inputSource);pe&&pe.dispatchEvent({type:Me.type,data:Me.inputSource})}function he(){N.forEach(function(Me,pe){Me.disconnect(pe)}),N.clear(),Q=null,ae=null,e.setRenderTarget(G),L=null,T=null,b=null,o=null,k=null,Re.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Me){l=Me,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Me){h=Me,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c},this.getBaseLayer=function(){return T!==null?T:L},this.getBinding=function(){return b},this.getFrame=function(){return O},this.getSession=function(){return o},this.setSession=async function(Me){if(o=Me,o!==null){if(G=e.getRenderTarget(),o.addEventListener("select",le),o.addEventListener("selectstart",le),o.addEventListener("selectend",le),o.addEventListener("squeeze",le),o.addEventListener("squeezestart",le),o.addEventListener("squeezeend",le),o.addEventListener("end",he),o.addEventListener("inputsourceschange",re),z.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const pe={antialias:o.renderState.layers===void 0?z.antialias:!0,alpha:z.alpha,depth:z.depth,stencil:z.stencil,framebufferScaleFactor:l};L=new XRWebGLLayer(o,t,pe),o.updateRenderState({baseLayer:L}),k=new Oi(L.framebufferWidth,L.framebufferHeight,{format:tr,type:ps,encoding:e.outputEncoding})}else{P=z.antialias;let pe=null,ve=null,Ce=null;z.depth&&(Ce=z.stencil?35056:33190,pe=z.stencil?al:Yo,ve=z.stencil?ol:Bu);const _e={colorFormat:z.alpha||P?32856:32849,depthFormat:Ce,scaleFactor:l};b=new XRWebGLBinding(o,t),T=b.createProjectionLayer(_e),o.updateRenderState({layers:[T]}),P?k=new Zp(T.textureWidth,T.textureHeight,{format:tr,type:ps,depthTexture:new Am(T.textureWidth,T.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:z.stencil,ignoreDepth:T.ignoreDepthValues,useRenderToTexture:m,encoding:e.outputEncoding}):k=new Oi(T.textureWidth,T.textureHeight,{format:z.alpha?tr:ao,type:ps,depthTexture:new Am(T.textureWidth,T.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:z.stencil,ignoreDepth:T.ignoreDepthValues,encoding:e.outputEncoding})}this.setFoveation(1),c=await o.requestReferenceSpace(h),Re.setContext(o),Re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function re(Me){const pe=o.inputSources;for(let ve=0;ve<A.length;ve++)N.set(pe[ve],A[ve]);for(let ve=0;ve<Me.removed.length;ve++){const Ce=Me.removed[ve],_e=N.get(Ce);_e&&(_e.dispatchEvent({type:"disconnected",data:Ce}),N.delete(Ce))}for(let ve=0;ve<Me.added.length;ve++){const Ce=Me.added[ve],_e=N.get(Ce);_e&&_e.dispatchEvent({type:"connected",data:Ce})}}const ee=new fe,_=new fe;function p(Me,pe,ve){ee.setFromMatrixPosition(pe.matrixWorld),_.setFromMatrixPosition(ve.matrixWorld);const Ce=ee.distanceTo(_),_e=pe.projectionMatrix.elements,Pe=ve.projectionMatrix.elements,Te=_e[14]/(_e[10]-1),Oe=_e[14]/(_e[10]+1),ze=(_e[9]+1)/_e[5],He=(_e[9]-1)/_e[5],$=(_e[8]-1)/_e[0],$e=(Pe[8]+1)/Pe[0],Le=Te*$,Fe=Te*$e,qe=Ce/(-$+$e),De=qe*-$;pe.matrixWorld.decompose(Me.position,Me.quaternion,Me.scale),Me.translateX(De),Me.translateZ(qe),Me.matrixWorld.compose(Me.position,Me.quaternion,Me.scale),Me.matrixWorldInverse.copy(Me.matrixWorld).invert();const oe=Te+qe,vt=Oe+qe,j=Le-De,Je=Fe+(Ce-De),Wt=ze*Oe/vt*oe,U=He*Oe/vt*oe;Me.projectionMatrix.makePerspective(j,Je,Wt,U,oe,vt)}function Z(Me,pe){pe===null?Me.matrixWorld.copy(Me.matrix):Me.matrixWorld.multiplyMatrices(pe.matrixWorld,Me.matrix),Me.matrixWorldInverse.copy(Me.matrixWorld).invert()}this.updateCamera=function(Me){if(o===null)return;X.near=B.near=I.near=Me.near,X.far=B.far=I.far=Me.far,(Q!==X.near||ae!==X.far)&&(o.updateRenderState({depthNear:X.near,depthFar:X.far}),Q=X.near,ae=X.far);const pe=Me.parent,ve=X.cameras;Z(X,pe);for(let _e=0;_e<ve.length;_e++)Z(ve[_e],pe);X.matrixWorld.decompose(X.position,X.quaternion,X.scale),Me.position.copy(X.position),Me.quaternion.copy(X.quaternion),Me.scale.copy(X.scale),Me.matrix.copy(X.matrix),Me.matrixWorld.copy(X.matrixWorld);const Ce=Me.children;for(let _e=0,Pe=Ce.length;_e<Pe;_e++)Ce[_e].updateMatrixWorld(!0);ve.length===2?p(X,I,B):X.projectionMatrix.copy(I.projectionMatrix)},this.getCamera=function(){return X},this.getFoveation=function(){if(T!==null)return T.fixedFoveation;if(L!==null)return L.fixedFoveation},this.setFoveation=function(Me){T!==null&&(T.fixedFoveation=Me),L!==null&&L.fixedFoveation!==void 0&&(L.fixedFoveation=Me)};let E=null;function ye(Me,pe){if(v=pe.getViewerPose(c),O=pe,v!==null){const Ce=v.views;L!==null&&(e.setRenderTargetFramebuffer(k,L.framebuffer),e.setRenderTarget(k));let _e=!1;Ce.length!==X.cameras.length&&(X.cameras.length=0,_e=!0);for(let Pe=0;Pe<Ce.length;Pe++){const Te=Ce[Pe];let Oe=null;if(L!==null)Oe=L.getViewport(Te);else{const He=b.getViewSubImage(T,Te);Oe=He.viewport,Pe===0&&(e.setRenderTargetTextures(k,He.colorTexture,T.ignoreDepthValues?void 0:He.depthStencilTexture),e.setRenderTarget(k))}const ze=V[Pe];ze.matrix.fromArray(Te.transform.matrix),ze.projectionMatrix.fromArray(Te.projectionMatrix),ze.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),Pe===0&&X.matrix.copy(ze.matrix),_e===!0&&X.cameras.push(ze)}}const ve=o.inputSources;for(let Ce=0;Ce<A.length;Ce++){const _e=A[Ce],Pe=ve[Ce];_e.update(Pe,pe,c)}E&&E(Me,pe),O=null}const Re=new AT;Re.setAnimationLoop(ye),this.setAnimationLoop=function(Me){E=Me},this.dispose=function(){}}}function ZF(i){function e(k,A){k.fogColor.value.copy(A.color),A.isFog?(k.fogNear.value=A.near,k.fogFar.value=A.far):A.isFogExp2&&(k.fogDensity.value=A.density)}function t(k,A,N,I,B){A.isMeshBasicMaterial?r(k,A):A.isMeshLambertMaterial?(r(k,A),m(k,A)):A.isMeshToonMaterial?(r(k,A),b(k,A)):A.isMeshPhongMaterial?(r(k,A),v(k,A)):A.isMeshStandardMaterial?(r(k,A),A.isMeshPhysicalMaterial?L(k,A,B):T(k,A)):A.isMeshMatcapMaterial?(r(k,A),P(k,A)):A.isMeshDepthMaterial?(r(k,A),O(k,A)):A.isMeshDistanceMaterial?(r(k,A),z(k,A)):A.isMeshNormalMaterial?(r(k,A),G(k,A)):A.isLineBasicMaterial?(o(k,A),A.isLineDashedMaterial&&l(k,A)):A.isPointsMaterial?c(k,A,N,I):A.isSpriteMaterial?h(k,A):A.isShadowMaterial?(k.color.value.copy(A.color),k.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function r(k,A){k.opacity.value=A.opacity,A.color&&k.diffuse.value.copy(A.color),A.emissive&&k.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(k.map.value=A.map),A.alphaMap&&(k.alphaMap.value=A.alphaMap),A.specularMap&&(k.specularMap.value=A.specularMap),A.alphaTest>0&&(k.alphaTest.value=A.alphaTest);const N=i.get(A).envMap;N&&(k.envMap.value=N,k.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,k.reflectivity.value=A.reflectivity,k.ior.value=A.ior,k.refractionRatio.value=A.refractionRatio),A.lightMap&&(k.lightMap.value=A.lightMap,k.lightMapIntensity.value=A.lightMapIntensity),A.aoMap&&(k.aoMap.value=A.aoMap,k.aoMapIntensity.value=A.aoMapIntensity);let I;A.map?I=A.map:A.specularMap?I=A.specularMap:A.displacementMap?I=A.displacementMap:A.normalMap?I=A.normalMap:A.bumpMap?I=A.bumpMap:A.roughnessMap?I=A.roughnessMap:A.metalnessMap?I=A.metalnessMap:A.alphaMap?I=A.alphaMap:A.emissiveMap?I=A.emissiveMap:A.clearcoatMap?I=A.clearcoatMap:A.clearcoatNormalMap?I=A.clearcoatNormalMap:A.clearcoatRoughnessMap?I=A.clearcoatRoughnessMap:A.specularIntensityMap?I=A.specularIntensityMap:A.specularColorMap?I=A.specularColorMap:A.transmissionMap?I=A.transmissionMap:A.thicknessMap?I=A.thicknessMap:A.sheenColorMap?I=A.sheenColorMap:A.sheenRoughnessMap&&(I=A.sheenRoughnessMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),k.uvTransform.value.copy(I.matrix));let B;A.aoMap?B=A.aoMap:A.lightMap&&(B=A.lightMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),k.uv2Transform.value.copy(B.matrix))}function o(k,A){k.diffuse.value.copy(A.color),k.opacity.value=A.opacity}function l(k,A){k.dashSize.value=A.dashSize,k.totalSize.value=A.dashSize+A.gapSize,k.scale.value=A.scale}function c(k,A,N,I){k.diffuse.value.copy(A.color),k.opacity.value=A.opacity,k.size.value=A.size*N,k.scale.value=I*.5,A.map&&(k.map.value=A.map),A.alphaMap&&(k.alphaMap.value=A.alphaMap),A.alphaTest>0&&(k.alphaTest.value=A.alphaTest);let B;A.map?B=A.map:A.alphaMap&&(B=A.alphaMap),B!==void 0&&(B.matrixAutoUpdate===!0&&B.updateMatrix(),k.uvTransform.value.copy(B.matrix))}function h(k,A){k.diffuse.value.copy(A.color),k.opacity.value=A.opacity,k.rotation.value=A.rotation,A.map&&(k.map.value=A.map),A.alphaMap&&(k.alphaMap.value=A.alphaMap),A.alphaTest>0&&(k.alphaTest.value=A.alphaTest);let N;A.map?N=A.map:A.alphaMap&&(N=A.alphaMap),N!==void 0&&(N.matrixAutoUpdate===!0&&N.updateMatrix(),k.uvTransform.value.copy(N.matrix))}function m(k,A){A.emissiveMap&&(k.emissiveMap.value=A.emissiveMap)}function v(k,A){k.specular.value.copy(A.specular),k.shininess.value=Math.max(A.shininess,1e-4),A.emissiveMap&&(k.emissiveMap.value=A.emissiveMap),A.bumpMap&&(k.bumpMap.value=A.bumpMap,k.bumpScale.value=A.bumpScale,A.side===qn&&(k.bumpScale.value*=-1)),A.normalMap&&(k.normalMap.value=A.normalMap,k.normalScale.value.copy(A.normalScale),A.side===qn&&k.normalScale.value.negate()),A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias)}function b(k,A){A.gradientMap&&(k.gradientMap.value=A.gradientMap),A.emissiveMap&&(k.emissiveMap.value=A.emissiveMap),A.bumpMap&&(k.bumpMap.value=A.bumpMap,k.bumpScale.value=A.bumpScale,A.side===qn&&(k.bumpScale.value*=-1)),A.normalMap&&(k.normalMap.value=A.normalMap,k.normalScale.value.copy(A.normalScale),A.side===qn&&k.normalScale.value.negate()),A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias)}function T(k,A){k.roughness.value=A.roughness,k.metalness.value=A.metalness,A.roughnessMap&&(k.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(k.metalnessMap.value=A.metalnessMap),A.emissiveMap&&(k.emissiveMap.value=A.emissiveMap),A.bumpMap&&(k.bumpMap.value=A.bumpMap,k.bumpScale.value=A.bumpScale,A.side===qn&&(k.bumpScale.value*=-1)),A.normalMap&&(k.normalMap.value=A.normalMap,k.normalScale.value.copy(A.normalScale),A.side===qn&&k.normalScale.value.negate()),A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias),i.get(A).envMap&&(k.envMapIntensity.value=A.envMapIntensity)}function L(k,A,N){T(k,A),k.ior.value=A.ior,A.sheen>0&&(k.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),k.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(k.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(k.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(k.clearcoat.value=A.clearcoat,k.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(k.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(k.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(k.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),k.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===qn&&k.clearcoatNormalScale.value.negate())),A.transmission>0&&(k.transmission.value=A.transmission,k.transmissionSamplerMap.value=N.texture,k.transmissionSamplerSize.value.set(N.width,N.height),A.transmissionMap&&(k.transmissionMap.value=A.transmissionMap),k.thickness.value=A.thickness,A.thicknessMap&&(k.thicknessMap.value=A.thicknessMap),k.attenuationDistance.value=A.attenuationDistance,k.attenuationColor.value.copy(A.attenuationColor)),k.specularIntensity.value=A.specularIntensity,k.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(k.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(k.specularColorMap.value=A.specularColorMap)}function P(k,A){A.matcap&&(k.matcap.value=A.matcap),A.bumpMap&&(k.bumpMap.value=A.bumpMap,k.bumpScale.value=A.bumpScale,A.side===qn&&(k.bumpScale.value*=-1)),A.normalMap&&(k.normalMap.value=A.normalMap,k.normalScale.value.copy(A.normalScale),A.side===qn&&k.normalScale.value.negate()),A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias)}function O(k,A){A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias)}function z(k,A){A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias),k.referencePosition.value.copy(A.referencePosition),k.nearDistance.value=A.nearDistance,k.farDistance.value=A.farDistance}function G(k,A){A.bumpMap&&(k.bumpMap.value=A.bumpMap,k.bumpScale.value=A.bumpScale,A.side===qn&&(k.bumpScale.value*=-1)),A.normalMap&&(k.normalMap.value=A.normalMap,k.normalScale.value.copy(A.normalScale),A.side===qn&&k.normalScale.value.negate()),A.displacementMap&&(k.displacementMap.value=A.displacementMap,k.displacementScale.value=A.displacementScale,k.displacementBias.value=A.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function QF(){const i=Kp("canvas");return i.style.display="block",i}function yn(i={}){const e=i.canvas!==void 0?i.canvas:QF(),t=i.context!==void 0?i.context:null,r=i.alpha!==void 0?i.alpha:!1,o=i.depth!==void 0?i.depth:!0,l=i.stencil!==void 0?i.stencil:!0,c=i.antialias!==void 0?i.antialias:!1,h=i.premultipliedAlpha!==void 0?i.premultipliedAlpha:!0,m=i.preserveDrawingBuffer!==void 0?i.preserveDrawingBuffer:!1,v=i.powerPreference!==void 0?i.powerPreference:"default",b=i.failIfMajorPerformanceCaveat!==void 0?i.failIfMajorPerformanceCaveat:!1;let T=null,L=null;const P=[],O=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=li,this.physicallyCorrectLights=!1,this.toneMapping=so,this.toneMappingExposure=1;const z=this;let G=!1,k=0,A=0,N=null,I=-1,B=null;const V=new an,X=new an;let Q=null,ae=e.width,le=e.height,he=1,re=null,ee=null;const _=new an(0,0,ae,le),p=new an(0,0,ae,le);let Z=!1;const E=[],ye=new _h;let Re=!1,Me=!1,pe=null;const ve=new Qe,Ce=new fe,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pe(){return N===null?he:1}let Te=t;function Oe(de,Ae){for(let ke=0;ke<de.length;ke++){const Ie=de[ke],be=e.getContext(Ie,Ae);if(be!==null)return be}return null}try{const de={alpha:r,depth:o,stencil:l,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:b};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${qi}`),e.addEventListener("webglcontextlost",q,!1),e.addEventListener("webglcontextrestored",K,!1),Te===null){const Ae=["webgl2","webgl","experimental-webgl"];if(z.isWebGL1Renderer===!0&&Ae.shift(),Te=Oe(Ae,de),Te===null)throw Oe(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Te.getShaderPrecisionFormat===void 0&&(Te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let ze,He,$,$e,Le,Fe,qe,De,oe,vt,j,Je,Wt,U,n,s,a,f,g,y,S,C,R;function D(){ze=new xN(Te),He=new dN(Te,ze,i),ze.init(He),C=new lE(Te,ze,He),$=new qF(Te,ze,He),E[0]=1029,$e=new bN(Te),Le=new NF,Fe=new XF(Te,ze,$,Le,He,C,$e),qe=new mN(z),De=new yN(z),oe=new Fk(Te,He),R=new fN(Te,ze,oe,He),vt=new wN(Te,oe,$e,R),j=new EN(Te,vt,oe,$e),g=new TN(Te,He,Fe),s=new pN(Le),Je=new DF(z,qe,De,ze,He,R,s),Wt=new ZF(Le),U=new BF,n=new $F(ze,He),f=new cN(z,qe,$,j,h),a=new aE(z,j,He),y=new hN(Te,ze,$e,He),S=new _N(Te,ze,$e,He),$e.programs=Je.programs,z.capabilities=He,z.extensions=ze,z.properties=Le,z.renderLists=U,z.shadowMap=a,z.state=$,z.info=$e}D();const H=new KF(z,Te);this.xr=H,this.getContext=function(){return Te},this.getContextAttributes=function(){return Te.getContextAttributes()},this.forceContextLoss=function(){const de=ze.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=ze.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(de){de!==void 0&&(he=de,this.setSize(ae,le,!1))},this.getSize=function(de){return de.set(ae,le)},this.setSize=function(de,Ae,ke){if(H.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=de,le=Ae,e.width=Math.floor(de*he),e.height=Math.floor(Ae*he),ke!==!1&&(e.style.width=de+"px",e.style.height=Ae+"px"),this.setViewport(0,0,de,Ae)},this.getDrawingBufferSize=function(de){return de.set(ae*he,le*he).floor()},this.setDrawingBufferSize=function(de,Ae,ke){ae=de,le=Ae,he=ke,e.width=Math.floor(de*ke),e.height=Math.floor(Ae*ke),this.setViewport(0,0,de,Ae)},this.getCurrentViewport=function(de){return de.copy(V)},this.getViewport=function(de){return de.copy(_)},this.setViewport=function(de,Ae,ke,Ie){de.isVector4?_.set(de.x,de.y,de.z,de.w):_.set(de,Ae,ke,Ie),$.viewport(V.copy(_).multiplyScalar(he).floor())},this.getScissor=function(de){return de.copy(p)},this.setScissor=function(de,Ae,ke,Ie){de.isVector4?p.set(de.x,de.y,de.z,de.w):p.set(de,Ae,ke,Ie),$.scissor(X.copy(p).multiplyScalar(he).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(de){$.setScissorTest(Z=de)},this.setOpaqueSort=function(de){re=de},this.setTransparentSort=function(de){ee=de},this.getClearColor=function(de){return de.copy(f.getClearColor())},this.setClearColor=function(){f.setClearColor.apply(f,arguments)},this.getClearAlpha=function(){return f.getClearAlpha()},this.setClearAlpha=function(){f.setClearAlpha.apply(f,arguments)},this.clear=function(de,Ae,ke){let Ie=0;(de===void 0||de)&&(Ie|=16384),(Ae===void 0||Ae)&&(Ie|=256),(ke===void 0||ke)&&(Ie|=1024),Te.clear(Ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",q,!1),e.removeEventListener("webglcontextrestored",K,!1),U.dispose(),n.dispose(),Le.dispose(),qe.dispose(),De.dispose(),j.dispose(),R.dispose(),Je.dispose(),H.dispose(),H.removeEventListener("sessionstart",Ne),H.removeEventListener("sessionend",Xe),pe&&(pe.dispose(),pe=null),Ge.stop()};function q(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),G=!0}function K(){console.log("THREE.WebGLRenderer: Context Restored."),G=!1;const de=$e.autoReset,Ae=a.enabled,ke=a.autoUpdate,Ie=a.needsUpdate,be=a.type;D(),$e.autoReset=de,a.enabled=Ae,a.autoUpdate=ke,a.needsUpdate=Ie,a.type=be}function ne(de){const Ae=de.target;Ae.removeEventListener("dispose",ne),te(Ae)}function te(de){ue(de),Le.remove(de)}function ue(de){const Ae=Le.get(de).programs;Ae!==void 0&&(Ae.forEach(function(ke){Je.releaseProgram(ke)}),de.isShaderMaterial&&Je.releaseShaderCache(de))}this.renderBufferDirect=function(de,Ae,ke,Ie,be,yt){Ae===null&&(Ae=_e);const wt=be.isMesh&&be.matrixWorld.determinant()<0,Lt=_n(de,Ae,ke,Ie,be);$.setMaterial(Ie,wt);let xt=ke.index;const jt=ke.attributes.position;if(xt===null){if(jt===void 0||jt.count===0)return}else if(xt.count===0)return;let Nt=1;Ie.wireframe===!0&&(xt=vt.getWireframeAttribute(ke),Nt=2),R.setup(be,Ie,Lt,ke,xt);let Dt,nn=y;xt!==null&&(Dt=oe.get(xt),nn=S,nn.setIndex(Dt));const zn=xt!==null?xt.count:jt.count,pi=ke.drawRange.start*Nt,Yt=ke.drawRange.count*Nt,rn=yt!==null?yt.start*Nt:0,et=yt!==null?yt.count*Nt:1/0,Hn=Math.max(pi,rn),Vi=Math.min(zn,pi+Yt,rn+et)-1,Tn=Math.max(0,Vi-Hn+1);if(Tn!==0){if(be.isMesh)Ie.wireframe===!0?($.setLineWidth(Ie.wireframeLinewidth*Pe()),nn.setMode(1)):nn.setMode(4);else if(be.isLine){let Gt=Ie.linewidth;Gt===void 0&&(Gt=1),$.setLineWidth(Gt*Pe()),be.isLineSegments?nn.setMode(1):be.isLineLoop?nn.setMode(2):nn.setMode(3)}else be.isPoints?nn.setMode(0):be.isSprite&&nn.setMode(4);if(be.isInstancedMesh)nn.renderInstances(Hn,Tn,be.count);else if(ke.isInstancedBufferGeometry){const Gt=Math.min(ke.instanceCount,ke._maxInstanceCount);nn.renderInstances(Hn,Tn,Gt)}else nn.render(Hn,Tn)}},this.compile=function(de,Ae){L=n.get(de),L.init(),O.push(L),de.traverseVisible(function(ke){ke.isLight&&ke.layers.test(Ae.layers)&&(L.pushLight(ke),ke.castShadow&&L.pushShadow(ke))}),L.setupLights(z.physicallyCorrectLights),de.traverse(function(ke){const Ie=ke.material;if(Ie)if(Array.isArray(Ie))for(let be=0;be<Ie.length;be++){const yt=Ie[be];wn(yt,de,ke)}else wn(Ie,de,ke)}),O.pop(),L=null};let ce=null;function ge(de){ce&&ce(de)}function Ne(){Ge.stop()}function Xe(){Ge.start()}const Ge=new AT;Ge.setAnimationLoop(ge),typeof window!="undefined"&&Ge.setContext(window),this.setAnimationLoop=function(de){ce=de,H.setAnimationLoop(de),de===null?Ge.stop():Ge.start()},H.addEventListener("sessionstart",Ne),H.addEventListener("sessionend",Xe),this.render=function(de,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(G===!0)return;de.autoUpdate===!0&&de.updateMatrixWorld(),Ae.parent===null&&Ae.updateMatrixWorld(),H.enabled===!0&&H.isPresenting===!0&&(H.cameraAutoUpdate===!0&&H.updateCamera(Ae),Ae=H.getCamera()),de.isScene===!0&&de.onBeforeRender(z,de,Ae,N),L=n.get(de,O.length),L.init(),O.push(L),ve.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),ye.setFromProjectionMatrix(ve),Me=this.localClippingEnabled,Re=s.init(this.clippingPlanes,Me,Ae),T=U.get(de,P.length),T.init(),P.push(T),St(de,Ae,0,z.sortObjects),T.finish(),z.sortObjects===!0&&T.sort(re,ee),Re===!0&&s.beginShadows();const ke=L.state.shadowsArray;if(a.render(ke,de,Ae),Re===!0&&s.endShadows(),this.info.autoReset===!0&&this.info.reset(),f.render(T,de),L.setupLights(z.physicallyCorrectLights),Ae.isArrayCamera){const Ie=Ae.cameras;for(let be=0,yt=Ie.length;be<yt;be++){const wt=Ie[be];ct(T,de,wt,wt.viewport)}}else ct(T,de,Ae);N!==null&&(Fe.updateMultisampleRenderTarget(N),Fe.updateRenderTargetMipmap(N)),de.isScene===!0&&de.onAfterRender(z,de,Ae),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1),R.resetDefaultState(),I=-1,B=null,O.pop(),O.length>0?L=O[O.length-1]:L=null,P.pop(),P.length>0?T=P[P.length-1]:T=null};function St(de,Ae,ke,Ie){if(de.visible===!1)return;if(de.layers.test(Ae.layers)){if(de.isGroup)ke=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(Ae);else if(de.isLight)L.pushLight(de),de.castShadow&&L.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||ye.intersectsSprite(de)){Ie&&Ce.setFromMatrixPosition(de.matrixWorld).applyMatrix4(ve);const wt=j.update(de),Lt=de.material;Lt.visible&&T.push(de,wt,Lt,ke,Ce.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(de.isSkinnedMesh&&de.skeleton.frame!==$e.render.frame&&(de.skeleton.update(),de.skeleton.frame=$e.render.frame),!de.frustumCulled||ye.intersectsObject(de))){Ie&&Ce.setFromMatrixPosition(de.matrixWorld).applyMatrix4(ve);const wt=j.update(de),Lt=de.material;if(Array.isArray(Lt)){const xt=wt.groups;for(let jt=0,Nt=xt.length;jt<Nt;jt++){const Dt=xt[jt],nn=Lt[Dt.materialIndex];nn&&nn.visible&&T.push(de,wt,nn,ke,Ce.z,Dt)}}else Lt.visible&&T.push(de,wt,Lt,ke,Ce.z,null)}}const yt=de.children;for(let wt=0,Lt=yt.length;wt<Lt;wt++)St(yt[wt],Ae,ke,Ie)}function ct(de,Ae,ke,Ie){const be=de.opaque,yt=de.transmissive,wt=de.transparent;L.setupLightsView(ke),yt.length>0&&Mt(be,Ae,ke),Ie&&$.viewport(V.copy(Ie)),be.length>0&&dt(be,Ae,ke),yt.length>0&&dt(yt,Ae,ke),wt.length>0&&dt(wt,Ae,ke)}function Mt(de,Ae,ke){if(pe===null){const wt=c===!0&&He.isWebGL2===!0?Zp:Oi;pe=new wt(1024,1024,{generateMipmaps:!0,type:C.convert(Xo)!==null?Xo:ps,minFilter:oo,magFilter:Xn,wrapS:hr,wrapT:hr,useRenderToTexture:ze.has("WEBGL_multisampled_render_to_texture")})}const Ie=z.getRenderTarget();z.setRenderTarget(pe),z.clear();const be=z.toneMapping;z.toneMapping=so,dt(de,Ae,ke),z.toneMapping=be,Fe.updateMultisampleRenderTarget(pe),Fe.updateRenderTargetMipmap(pe),z.setRenderTarget(Ie)}function dt(de,Ae,ke){const Ie=Ae.isScene===!0?Ae.overrideMaterial:null;for(let be=0,yt=de.length;be<yt;be++){const wt=de[be],Lt=wt.object,xt=wt.geometry,jt=Ie===null?wt.material:Ie,Nt=wt.group;Lt.layers.test(ke.layers)&&mt(Lt,Ae,ke,xt,jt,Nt)}}function mt(de,Ae,ke,Ie,be,yt){de.onBeforeRender(z,Ae,ke,Ie,be,yt),de.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),be.onBeforeRender(z,Ae,ke,Ie,de,yt),be.transparent===!0&&be.side===Is?(be.side=qn,be.needsUpdate=!0,z.renderBufferDirect(ke,Ae,Ie,be,de,yt),be.side=qo,be.needsUpdate=!0,z.renderBufferDirect(ke,Ae,Ie,be,de,yt),be.side=Is):z.renderBufferDirect(ke,Ae,Ie,be,de,yt),de.onAfterRender(z,Ae,ke,Ie,be,yt)}function wn(de,Ae,ke){Ae.isScene!==!0&&(Ae=_e);const Ie=Le.get(de),be=L.state.lights,yt=L.state.shadowsArray,wt=be.state.version,Lt=Je.getParameters(de,be.state,yt,Ae,ke),xt=Je.getProgramCacheKey(Lt);let jt=Ie.programs;Ie.environment=de.isMeshStandardMaterial?Ae.environment:null,Ie.fog=Ae.fog,Ie.envMap=(de.isMeshStandardMaterial?De:qe).get(de.envMap||Ie.environment),jt===void 0&&(de.addEventListener("dispose",ne),jt=new Map,Ie.programs=jt);let Nt=jt.get(xt);if(Nt!==void 0){if(Ie.currentProgram===Nt&&Ie.lightsStateVersion===wt)return Zt(de,Lt),Nt}else Lt.uniforms=Je.getUniforms(de),de.onBuild(ke,Lt,z),de.onBeforeCompile(Lt,z),Nt=Je.acquireProgram(Lt,xt),jt.set(xt,Nt),Ie.uniforms=Lt.uniforms;const Dt=Ie.uniforms;(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(Dt.clippingPlanes=s.uniform),Zt(de,Lt),Ie.needsLights=Xt(de),Ie.lightsStateVersion=wt,Ie.needsLights&&(Dt.ambientLightColor.value=be.state.ambient,Dt.lightProbe.value=be.state.probe,Dt.directionalLights.value=be.state.directional,Dt.directionalLightShadows.value=be.state.directionalShadow,Dt.spotLights.value=be.state.spot,Dt.spotLightShadows.value=be.state.spotShadow,Dt.rectAreaLights.value=be.state.rectArea,Dt.ltc_1.value=be.state.rectAreaLTC1,Dt.ltc_2.value=be.state.rectAreaLTC2,Dt.pointLights.value=be.state.point,Dt.pointLightShadows.value=be.state.pointShadow,Dt.hemisphereLights.value=be.state.hemi,Dt.directionalShadowMap.value=be.state.directionalShadowMap,Dt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Dt.spotShadowMap.value=be.state.spotShadowMap,Dt.spotShadowMatrix.value=be.state.spotShadowMatrix,Dt.pointShadowMap.value=be.state.pointShadowMap,Dt.pointShadowMatrix.value=be.state.pointShadowMatrix);const nn=Nt.getUniforms(),zn=oa.seqWithValue(nn.seq,Dt);return Ie.currentProgram=Nt,Ie.uniformsList=zn,Nt}function Zt(de,Ae){const ke=Le.get(de);ke.outputEncoding=Ae.outputEncoding,ke.instancing=Ae.instancing,ke.skinning=Ae.skinning,ke.morphTargets=Ae.morphTargets,ke.morphNormals=Ae.morphNormals,ke.morphTargetsCount=Ae.morphTargetsCount,ke.numClippingPlanes=Ae.numClippingPlanes,ke.numIntersection=Ae.numClipIntersection,ke.vertexAlphas=Ae.vertexAlphas,ke.vertexTangents=Ae.vertexTangents,ke.toneMapping=Ae.toneMapping}function _n(de,Ae,ke,Ie,be){Ae.isScene!==!0&&(Ae=_e),Fe.resetTextureUnits();const yt=Ae.fog,wt=Ie.isMeshStandardMaterial?Ae.environment:null,Lt=N===null?z.outputEncoding:N.texture.encoding,xt=(Ie.isMeshStandardMaterial?De:qe).get(Ie.envMap||wt),jt=Ie.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,Nt=!!Ie.normalMap&&!!ke.attributes.tangent,Dt=!!ke.morphAttributes.position,nn=!!ke.morphAttributes.normal,zn=ke.morphAttributes.position?ke.morphAttributes.position.length:0,pi=Ie.toneMapped?z.toneMapping:so,Yt=Le.get(Ie),rn=L.state.lights;if(Re===!0&&(Me===!0||de!==B)){const mr=de===B&&Ie.id===I;s.setState(Ie,de,mr)}let et=!1;Ie.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==rn.state.version||Yt.outputEncoding!==Lt||be.isInstancedMesh&&Yt.instancing===!1||!be.isInstancedMesh&&Yt.instancing===!0||be.isSkinnedMesh&&Yt.skinning===!1||!be.isSkinnedMesh&&Yt.skinning===!0||Yt.envMap!==xt||Ie.fog&&Yt.fog!==yt||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==s.numPlanes||Yt.numIntersection!==s.numIntersection)||Yt.vertexAlphas!==jt||Yt.vertexTangents!==Nt||Yt.morphTargets!==Dt||Yt.morphNormals!==nn||Yt.toneMapping!==pi||He.isWebGL2===!0&&Yt.morphTargetsCount!==zn)&&(et=!0):(et=!0,Yt.__version=Ie.version);let Hn=Yt.currentProgram;et===!0&&(Hn=wn(Ie,Ae,be));let Vi=!1,Tn=!1,Gt=!1;const gn=Hn.getUniforms(),ei=Yt.uniforms;if($.useProgram(Hn.program)&&(Vi=!0,Tn=!0,Gt=!0),Ie.id!==I&&(I=Ie.id,Tn=!0),Vi||B!==de){if(gn.setValue(Te,"projectionMatrix",de.projectionMatrix),He.logarithmicDepthBuffer&&gn.setValue(Te,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),B!==de&&(B=de,Tn=!0,Gt=!0),Ie.isShaderMaterial||Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshStandardMaterial||Ie.envMap){const mr=gn.map.cameraPosition;mr!==void 0&&mr.setValue(Te,Ce.setFromMatrixPosition(de.matrixWorld))}(Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshLambertMaterial||Ie.isMeshBasicMaterial||Ie.isMeshStandardMaterial||Ie.isShaderMaterial)&&gn.setValue(Te,"isOrthographic",de.isOrthographicCamera===!0),(Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshLambertMaterial||Ie.isMeshBasicMaterial||Ie.isMeshStandardMaterial||Ie.isShaderMaterial||Ie.isShadowMaterial||be.isSkinnedMesh)&&gn.setValue(Te,"viewMatrix",de.matrixWorldInverse)}if(be.isSkinnedMesh){gn.setOptional(Te,be,"bindMatrix"),gn.setOptional(Te,be,"bindMatrixInverse");const mr=be.skeleton;mr&&(He.floatVertexTextures?(mr.boneTexture===null&&mr.computeBoneTexture(),gn.setValue(Te,"boneTexture",mr.boneTexture,Fe),gn.setValue(Te,"boneTextureSize",mr.boneTextureSize)):gn.setOptional(Te,mr,"boneMatrices"))}return!!ke&&(ke.morphAttributes.position!==void 0||ke.morphAttributes.normal!==void 0)&&g.update(be,ke,Ie,Hn),(Tn||Yt.receiveShadow!==be.receiveShadow)&&(Yt.receiveShadow=be.receiveShadow,gn.setValue(Te,"receiveShadow",be.receiveShadow)),Tn&&(gn.setValue(Te,"toneMappingExposure",z.toneMappingExposure),Yt.needsLights&&mn(ei,Gt),yt&&Ie.fog&&Wt.refreshFogUniforms(ei,yt),Wt.refreshMaterialUniforms(ei,Ie,he,le,pe),oa.upload(Te,Yt.uniformsList,ei,Fe)),Ie.isShaderMaterial&&Ie.uniformsNeedUpdate===!0&&(oa.upload(Te,Yt.uniformsList,ei,Fe),Ie.uniformsNeedUpdate=!1),Ie.isSpriteMaterial&&gn.setValue(Te,"center",be.center),gn.setValue(Te,"modelViewMatrix",be.modelViewMatrix),gn.setValue(Te,"normalMatrix",be.normalMatrix),gn.setValue(Te,"modelMatrix",be.matrixWorld),Hn}function mn(de,Ae){de.ambientLightColor.needsUpdate=Ae,de.lightProbe.needsUpdate=Ae,de.directionalLights.needsUpdate=Ae,de.directionalLightShadows.needsUpdate=Ae,de.pointLights.needsUpdate=Ae,de.pointLightShadows.needsUpdate=Ae,de.spotLights.needsUpdate=Ae,de.spotLightShadows.needsUpdate=Ae,de.rectAreaLights.needsUpdate=Ae,de.hemisphereLights.needsUpdate=Ae}function Xt(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(de,Ae,ke){Le.get(de.texture).__webglTexture=Ae,Le.get(de.depthTexture).__webglTexture=ke;const Ie=Le.get(de);Ie.__hasExternalTextures=!0,Ie.__hasExternalTextures&&(Ie.__autoAllocateDepthBuffer=ke===void 0,Ie.__autoAllocateDepthBuffer||de.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),de.useRenderToTexture=!1,de.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(de,Ae){const ke=Le.get(de);ke.__webglFramebuffer=Ae,ke.__useDefaultFramebuffer=Ae===void 0},this.setRenderTarget=function(de,Ae=0,ke=0){N=de,k=Ae,A=ke;let Ie=!0;if(de){const xt=Le.get(de);xt.__useDefaultFramebuffer!==void 0?($.bindFramebuffer(36160,null),Ie=!1):xt.__webglFramebuffer===void 0?Fe.setupRenderTarget(de):xt.__hasExternalTextures&&Fe.rebindTextures(de,Le.get(de.texture).__webglTexture,Le.get(de.depthTexture).__webglTexture)}let be=null,yt=!1,wt=!1;if(de){const xt=de.texture;(xt.isDataTexture3D||xt.isDataTexture2DArray)&&(wt=!0);const jt=Le.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(be=jt[Ae],yt=!0):de.useRenderbuffer?be=Le.get(de).__webglMultisampledFramebuffer:be=jt,V.copy(de.viewport),X.copy(de.scissor),Q=de.scissorTest}else V.copy(_).multiplyScalar(he).floor(),X.copy(p).multiplyScalar(he).floor(),Q=Z;if($.bindFramebuffer(36160,be)&&He.drawBuffers&&Ie){let xt=!1;if(de)if(de.isWebGLMultipleRenderTargets){const jt=de.texture;if(E.length!==jt.length||E[0]!==36064){for(let Nt=0,Dt=jt.length;Nt<Dt;Nt++)E[Nt]=36064+Nt;E.length=jt.length,xt=!0}}else(E.length!==1||E[0]!==36064)&&(E[0]=36064,E.length=1,xt=!0);else(E.length!==1||E[0]!==1029)&&(E[0]=1029,E.length=1,xt=!0);xt&&(He.isWebGL2?Te.drawBuffers(E):ze.get("WEBGL_draw_buffers").drawBuffersWEBGL(E))}if($.viewport(V),$.scissor(X),$.setScissorTest(Q),yt){const xt=Le.get(de.texture);Te.framebufferTexture2D(36160,36064,34069+Ae,xt.__webglTexture,ke)}else if(wt){const xt=Le.get(de.texture),jt=Ae||0;Te.framebufferTextureLayer(36160,36064,xt.__webglTexture,ke||0,jt)}I=-1},this.readRenderTargetPixels=function(de,Ae,ke,Ie,be,yt,wt){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Lt=Le.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&wt!==void 0&&(Lt=Lt[wt]),Lt){$.bindFramebuffer(36160,Lt);try{const xt=de.texture,jt=xt.format,Nt=xt.type;if(jt!==tr&&C.convert(jt)!==Te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Dt=Nt===Xo&&(ze.has("EXT_color_buffer_half_float")||He.isWebGL2&&ze.has("EXT_color_buffer_float"));if(Nt!==ps&&C.convert(Nt)!==Te.getParameter(35738)&&!(Nt===ks&&(He.isWebGL2||ze.has("OES_texture_float")||ze.has("WEBGL_color_buffer_float")))&&!Dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Te.checkFramebufferStatus(36160)===36053?Ae>=0&&Ae<=de.width-Ie&&ke>=0&&ke<=de.height-be&&Te.readPixels(Ae,ke,Ie,be,C.convert(jt),C.convert(Nt),yt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const xt=N!==null?Le.get(N).__webglFramebuffer:null;$.bindFramebuffer(36160,xt)}}},this.copyFramebufferToTexture=function(de,Ae,ke=0){if(Ae.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Ie=Math.pow(2,-ke),be=Math.floor(Ae.image.width*Ie),yt=Math.floor(Ae.image.height*Ie);Fe.setTexture2D(Ae,0),Te.copyTexSubImage2D(3553,ke,0,0,de.x,de.y,be,yt),$.unbindTexture()},this.copyTextureToTexture=function(de,Ae,ke,Ie=0){const be=Ae.image.width,yt=Ae.image.height,wt=C.convert(ke.format),Lt=C.convert(ke.type);Fe.setTexture2D(ke,0),Te.pixelStorei(37440,ke.flipY),Te.pixelStorei(37441,ke.premultiplyAlpha),Te.pixelStorei(3317,ke.unpackAlignment),Ae.isDataTexture?Te.texSubImage2D(3553,Ie,de.x,de.y,be,yt,wt,Lt,Ae.image.data):Ae.isCompressedTexture?Te.compressedTexSubImage2D(3553,Ie,de.x,de.y,Ae.mipmaps[0].width,Ae.mipmaps[0].height,wt,Ae.mipmaps[0].data):Te.texSubImage2D(3553,Ie,de.x,de.y,wt,Lt,Ae.image),Ie===0&&ke.generateMipmaps&&Te.generateMipmap(3553),$.unbindTexture()},this.copyTextureToTexture3D=function(de,Ae,ke,Ie,be=0){if(z.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=de.max.x-de.min.x+1,wt=de.max.y-de.min.y+1,Lt=de.max.z-de.min.z+1,xt=C.convert(Ie.format),jt=C.convert(Ie.type);let Nt;if(Ie.isDataTexture3D)Fe.setTexture3D(Ie,0),Nt=32879;else if(Ie.isDataTexture2DArray)Fe.setTexture2DArray(Ie,0),Nt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Te.pixelStorei(37440,Ie.flipY),Te.pixelStorei(37441,Ie.premultiplyAlpha),Te.pixelStorei(3317,Ie.unpackAlignment);const Dt=Te.getParameter(3314),nn=Te.getParameter(32878),zn=Te.getParameter(3316),pi=Te.getParameter(3315),Yt=Te.getParameter(32877),rn=ke.isCompressedTexture?ke.mipmaps[0]:ke.image;Te.pixelStorei(3314,rn.width),Te.pixelStorei(32878,rn.height),Te.pixelStorei(3316,de.min.x),Te.pixelStorei(3315,de.min.y),Te.pixelStorei(32877,de.min.z),ke.isDataTexture||ke.isDataTexture3D?Te.texSubImage3D(Nt,be,Ae.x,Ae.y,Ae.z,yt,wt,Lt,xt,jt,rn.data):ke.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Te.compressedTexSubImage3D(Nt,be,Ae.x,Ae.y,Ae.z,yt,wt,Lt,xt,rn.data)):Te.texSubImage3D(Nt,be,Ae.x,Ae.y,Ae.z,yt,wt,Lt,xt,jt,rn),Te.pixelStorei(3314,Dt),Te.pixelStorei(32878,nn),Te.pixelStorei(3316,zn),Te.pixelStorei(3315,pi),Te.pixelStorei(32877,Yt),be===0&&Ie.generateMipmaps&&Te.generateMipmap(Nt),$.unbindTexture()},this.initTexture=function(de){Fe.setTexture2D(de,0),$.unbindTexture()},this.resetState=function(){k=0,A=0,N=null,$.reset(),R.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}yn.prototype.isWebGLRenderer=!0;class uE extends yn{}uE.prototype.isWebGL1Renderer=!0;class Mh{constructor(e,t=25e-5){this.name="",this.color=new Ke(e),this.density=t}clone(){return new Mh(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Mh.prototype.isFogExp2=!0;class Th{constructor(e,t=1,r=1e3){this.name="",this.color=new Ke(e),this.near=t,this.far=r}clone(){return new Th(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Th.prototype.isFog=!0;class Cm extends Vt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Cm.prototype.isScene=!0;class aa{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ki()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}aa.prototype.isInterleavedBuffer=!0;const ir=new fe;class vo{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=o===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ir.x=this.getX(t),ir.y=this.getY(t),ir.z=this.getZ(t),ir.applyMatrix4(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ir.x=this.getX(t),ir.y=this.getY(t),ir.z=this.getZ(t),ir.applyNormalMatrix(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ir.x=this.getX(t),ir.y=this.getY(t),ir.z=this.getZ(t),ir.transformDirection(e),this.setXYZ(t,ir.x,ir.y,ir.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new Ot(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}vo.prototype.isInterleavedBufferAttribute=!0;class Lm extends rr{constructor(e){super();this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}Lm.prototype.isSpriteMaterial=!0;let lc;const Eh=new fe,uc=new fe,cc=new fe,fc=new We,Ah=new We,cE=new Qe,Rm=new fe,Ch=new fe,Im=new fe,fE=new We,tx=new We,hE=new We;class Pm extends Vt{constructor(e){super();if(this.type="Sprite",lc===void 0){lc=new bt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new aa(t,5);lc.setIndex([0,1,2,0,2,3]),lc.setAttribute("position",new vo(r,3,0,!1)),lc.setAttribute("uv",new vo(r,2,3,!1))}this.geometry=lc,this.material=e!==void 0?e:new Lm,this.center=new We(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),uc.setFromMatrixScale(this.matrixWorld),cE.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&uc.multiplyScalar(-cc.z);const r=this.material.rotation;let o,l;r!==0&&(l=Math.cos(r),o=Math.sin(r));const c=this.center;km(Rm.set(-.5,-.5,0),cc,c,uc,o,l),km(Ch.set(.5,-.5,0),cc,c,uc,o,l),km(Im.set(.5,.5,0),cc,c,uc,o,l),fE.set(0,0),tx.set(1,0),hE.set(1,1);let h=e.ray.intersectTriangle(Rm,Ch,Im,!1,Eh);if(h===null&&(km(Ch.set(-.5,.5,0),cc,c,uc,o,l),tx.set(0,1),h=e.ray.intersectTriangle(Rm,Im,Ch,!1,Eh),h===null))return;const m=e.ray.origin.distanceTo(Eh);m<e.near||m>e.far||t.push({distance:m,point:Eh.clone(),uv:nr.getUV(Eh,Rm,Ch,Im,fE,tx,hE,new We),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}Pm.prototype.isSprite=!0;function km(i,e,t,r,o,l){fc.subVectors(i,t).addScalar(.5).multiply(r),o!==void 0?(Ah.x=l*fc.x-o*fc.y,Ah.y=o*fc.x+l*fc.y):Ah.copy(fc),i.copy(e),i.x+=Ah.x,i.y+=Ah.y,i.applyMatrix4(cE)}const Om=new fe,dE=new fe;class pE extends Vt{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,o=t.length;r<o;r++){const l=t[r];this.addLevel(l.object.clone(),l.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,o;for(r=1,o=t.length;r<o&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Om.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(Om);this.getObjectForDistance(o).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Om.setFromMatrixPosition(e.matrixWorld),dE.setFromMatrixPosition(this.matrixWorld);const r=Om.distanceTo(dE)/e.zoom;t[0].object.visible=!0;let o,l;for(o=1,l=t.length;o<l&&r>=t[o].distance;o++)t[o-1].object.visible=!1,t[o].object.visible=!0;for(this._currentLevel=o-1;o<l;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let o=0,l=r.length;o<l;o++){const c=r[o];t.object.levels.push({object:c.object.uuid,distance:c.distance})}return t}}const mE=new fe,gE=new an,vE=new an,JF=new fe,yE=new Qe;class wl extends Fn{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qe,this.bindMatrixInverse=new Qe}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;gE.fromBufferAttribute(o.attributes.skinIndex,e),vE.fromBufferAttribute(o.attributes.skinWeight,e),mE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const c=vE.getComponent(l);if(c!==0){const h=gE.getComponent(l);yE.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),t.addScaledVector(JF.copy(mE).applyMatrix4(yE),c)}}return t.applyMatrix4(this.bindMatrixInverse)}}wl.prototype.isSkinnedMesh=!0;class _l extends Vt{constructor(){super();this.type="Bone"}}_l.prototype.isBone=!0;class bl extends Nn{constructor(e=null,t=1,r=1,o,l,c,h,m,v=Xn,b=Xn,T,L){super(null,c,h,m,v,b,o,l,T,L);this.image={data:e,width:t,height:r},this.magFilter=v,this.minFilter=b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}bl.prototype.isDataTexture=!0;const xE=new Qe,eB=new Qe;class la{constructor(e=[],t=[]){this.uuid=ki(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new Qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let l=0,c=e.length;l<c;l++){const h=e[l]?e[l].matrixWorld:eB;xE.multiplyMatrices(h,t[l]),xE.toArray(r,l*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new la(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=iT(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new bl(t,e,e,tr,ks);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const l=e.bones[r];let c=t[l];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),c=new _l),this.bones.push(c),this.boneInverses.push(new Qe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,l=t.length;o<l;o++){const c=t[o];e.bones.push(c.uuid);const h=r[o];e.boneInverses.push(h.toArray())}return e}}class Sl extends Ot{constructor(e,t,r,o=1){typeof r=="number"&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Sl.prototype.isInstancedBufferAttribute=!0;const wE=new Qe,_E=new Qe,Dm=[],Lh=new Fn;class nx extends Fn{constructor(e,t,r){super(e,t);this.instanceMatrix=new Sl(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(Lh.geometry=this.geometry,Lh.material=this.material,Lh.material!==void 0)for(let l=0;l<o;l++){this.getMatrixAt(l,wE),_E.multiplyMatrices(r,wE),Lh.matrixWorld=_E,Lh.raycast(e,Dm);for(let c=0,h=Dm.length;c<h;c++){const m=Dm[c];m.instanceId=l,m.object=this,t.push(m)}Dm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Sl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}nx.prototype.isInstancedMesh=!0;class Bn extends rr{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Bn.prototype.isLineBasicMaterial=!0;const bE=new fe,SE=new fe,ME=new Qe,rx=new ea,Nm=new co;class Yi extends Vt{constructor(e=new bt,t=new Bn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let o=1,l=t.count;o<l;o++)bE.fromBufferAttribute(t,o-1),SE.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=bE.distanceTo(SE);e.setAttribute("lineDistance",new pt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,c=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Nm.copy(r.boundingSphere),Nm.applyMatrix4(o),Nm.radius+=l,e.ray.intersectsSphere(Nm)===!1)return;ME.copy(o).invert(),rx.copy(e.ray).applyMatrix4(ME);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,v=new fe,b=new fe,T=new fe,L=new fe,P=this.isLineSegments?2:1;if(r.isBufferGeometry){const O=r.index,G=r.attributes.position;if(O!==null){const k=Math.max(0,c.start),A=Math.min(O.count,c.start+c.count);for(let N=k,I=A-1;N<I;N+=P){const B=O.getX(N),V=O.getX(N+1);if(v.fromBufferAttribute(G,B),b.fromBufferAttribute(G,V),rx.distanceSqToSegment(v,b,L,T)>m)continue;L.applyMatrix4(this.matrixWorld);const Q=e.ray.origin.distanceTo(L);Q<e.near||Q>e.far||t.push({distance:Q,point:T.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}else{const k=Math.max(0,c.start),A=Math.min(G.count,c.start+c.count);for(let N=k,I=A-1;N<I;N+=P){if(v.fromBufferAttribute(G,N),b.fromBufferAttribute(G,N+1),rx.distanceSqToSegment(v,b,L,T)>m)continue;L.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(L);V<e.near||V>e.far||t.push({distance:V,point:T.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Yi.prototype.isLine=!0;const TE=new fe,EE=new fe;class Er extends Yi{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let o=0,l=t.count;o<l;o+=2)TE.fromBufferAttribute(t,o),EE.fromBufferAttribute(t,o+1),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+TE.distanceTo(EE);e.setAttribute("lineDistance",new pt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Er.prototype.isLineSegments=!0;class Fm extends Yi{constructor(e,t){super(e,t);this.type="LineLoop"}}Fm.prototype.isLineLoop=!0;class ua extends rr{constructor(e){super();this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}ua.prototype.isPointsMaterial=!0;const AE=new Qe,ix=new ea,Bm=new co,Um=new fe;class hc extends Vt{constructor(e=new bt,t=new ua){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,c=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Bm.copy(r.boundingSphere),Bm.applyMatrix4(o),Bm.radius+=l,e.ray.intersectsSphere(Bm)===!1)return;AE.copy(o).invert(),ix.copy(e.ray).applyMatrix4(AE);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h;if(r.isBufferGeometry){const v=r.index,T=r.attributes.position;if(v!==null){const L=Math.max(0,c.start),P=Math.min(v.count,c.start+c.count);for(let O=L,z=P;O<z;O++){const G=v.getX(O);Um.fromBufferAttribute(T,G),CE(Um,G,m,o,e,t,this)}}else{const L=Math.max(0,c.start),P=Math.min(T.count,c.start+c.count);for(let O=L,z=P;O<z;O++)Um.fromBufferAttribute(T,O),CE(Um,O,m,o,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}hc.prototype.isPoints=!0;function CE(i,e,t,r,o,l,c){const h=ix.distanceSqToPoint(i);if(h<t){const m=new fe;ix.closestPointToPoint(i,m),m.applyMatrix4(r);const v=o.ray.origin.distanceTo(m);if(v<o.near||v>o.far)return;l.push({distance:v,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:c})}}class LE extends Nn{constructor(e,t,r,o,l,c,h,m,v){super(e,t,r,o,l,c,h,m,v);this.format=h!==void 0?h:ao,this.minFilter=c!==void 0?c:Dn,this.magFilter=l!==void 0?l:Dn,this.generateMipmaps=!1;const b=this;function T(){b.needsUpdate=!0,e.requestVideoFrameCallback(T)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(T)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}LE.prototype.isVideoTexture=!0;class RE extends Nn{constructor(e,t,r){super({width:e,height:t});this.format=r,this.magFilter=Xn,this.minFilter=Xn,this.generateMipmaps=!1,this.needsUpdate=!0}}RE.prototype.isFramebufferTexture=!0;class sx extends Nn{constructor(e,t,r,o,l,c,h,m,v,b,T,L){super(null,c,h,m,v,b,o,l,T,L);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}sx.prototype.isCompressedTexture=!0;class IE extends Nn{constructor(e,t,r,o,l,c,h,m,v){super(e,t,r,o,l,c,h,m,v);this.needsUpdate=!0}}IE.prototype.isCanvasTexture=!0;class dc extends bt{constructor(e=1,t=8,r=0,o=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},t=Math.max(3,t);const l=[],c=[],h=[],m=[],v=new fe,b=new We;c.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let T=0,L=3;T<=t;T++,L+=3){const P=r+T/t*o;v.x=e*Math.cos(P),v.y=e*Math.sin(P),c.push(v.x,v.y,v.z),h.push(0,0,1),b.x=(c[L]/e+1)/2,b.y=(c[L+1]/e+1)/2,m.push(b.x,b.y)}for(let T=1;T<=t;T++)l.push(T,T+1,0);this.setIndex(l),this.setAttribute("position",new pt(c,3)),this.setAttribute("normal",new pt(h,3)),this.setAttribute("uv",new pt(m,2))}static fromJSON(e){return new dc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ca extends bt{constructor(e=1,t=1,r=1,o=8,l=1,c=!1,h=0,m=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:l,openEnded:c,thetaStart:h,thetaLength:m};const v=this;o=Math.floor(o),l=Math.floor(l);const b=[],T=[],L=[],P=[];let O=0;const z=[],G=r/2;let k=0;A(),c===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(b),this.setAttribute("position",new pt(T,3)),this.setAttribute("normal",new pt(L,3)),this.setAttribute("uv",new pt(P,2));function A(){const I=new fe,B=new fe;let V=0;const X=(t-e)/r;for(let Q=0;Q<=l;Q++){const ae=[],le=Q/l,he=le*(t-e)+e;for(let re=0;re<=o;re++){const ee=re/o,_=ee*m+h,p=Math.sin(_),Z=Math.cos(_);B.x=he*p,B.y=-le*r+G,B.z=he*Z,T.push(B.x,B.y,B.z),I.set(p,X,Z).normalize(),L.push(I.x,I.y,I.z),P.push(ee,1-le),ae.push(O++)}z.push(ae)}for(let Q=0;Q<o;Q++)for(let ae=0;ae<l;ae++){const le=z[ae][Q],he=z[ae+1][Q],re=z[ae+1][Q+1],ee=z[ae][Q+1];b.push(le,he,ee),b.push(he,re,ee),V+=6}v.addGroup(k,V,0),k+=V}function N(I){const B=O,V=new We,X=new fe;let Q=0;const ae=I===!0?e:t,le=I===!0?1:-1;for(let re=1;re<=o;re++)T.push(0,G*le,0),L.push(0,le,0),P.push(.5,.5),O++;const he=O;for(let re=0;re<=o;re++){const _=re/o*m+h,p=Math.cos(_),Z=Math.sin(_);X.x=ae*Z,X.y=G*le,X.z=ae*p,T.push(X.x,X.y,X.z),L.push(0,le,0),V.x=p*.5+.5,V.y=Z*.5*le+.5,P.push(V.x,V.y),O++}for(let re=0;re<o;re++){const ee=B+re,_=he+re;I===!0?b.push(_,_+1,ee):b.push(_+1,_,ee),Q+=3}v.addGroup(k,Q,I===!0?1:2),k+=Q}}static fromJSON(e){return new ca(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pc extends ca{constructor(e=1,t=1,r=8,o=1,l=!1,c=0,h=Math.PI*2){super(0,e,t,r,o,l,c,h);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:h}}static fromJSON(e){return new pc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fs extends bt{constructor(e=[],t=[],r=1,o=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o};const l=[],c=[];h(o),v(r),b(),this.setAttribute("position",new pt(l,3)),this.setAttribute("normal",new pt(l.slice(),3)),this.setAttribute("uv",new pt(c,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function h(A){const N=new fe,I=new fe,B=new fe;for(let V=0;V<t.length;V+=3)P(t[V+0],N),P(t[V+1],I),P(t[V+2],B),m(N,I,B,A)}function m(A,N,I,B){const V=B+1,X=[];for(let Q=0;Q<=V;Q++){X[Q]=[];const ae=A.clone().lerp(I,Q/V),le=N.clone().lerp(I,Q/V),he=V-Q;for(let re=0;re<=he;re++)re===0&&Q===V?X[Q][re]=ae:X[Q][re]=ae.clone().lerp(le,re/he)}for(let Q=0;Q<V;Q++)for(let ae=0;ae<2*(V-Q)-1;ae++){const le=Math.floor(ae/2);ae%2==0?(L(X[Q][le+1]),L(X[Q+1][le]),L(X[Q][le])):(L(X[Q][le+1]),L(X[Q+1][le+1]),L(X[Q+1][le]))}}function v(A){const N=new fe;for(let I=0;I<l.length;I+=3)N.x=l[I+0],N.y=l[I+1],N.z=l[I+2],N.normalize().multiplyScalar(A),l[I+0]=N.x,l[I+1]=N.y,l[I+2]=N.z}function b(){const A=new fe;for(let N=0;N<l.length;N+=3){A.x=l[N+0],A.y=l[N+1],A.z=l[N+2];const I=G(A)/2/Math.PI+.5,B=k(A)/Math.PI+.5;c.push(I,1-B)}O(),T()}function T(){for(let A=0;A<c.length;A+=6){const N=c[A+0],I=c[A+2],B=c[A+4],V=Math.max(N,I,B),X=Math.min(N,I,B);V>.9&&X<.1&&(N<.2&&(c[A+0]+=1),I<.2&&(c[A+2]+=1),B<.2&&(c[A+4]+=1))}}function L(A){l.push(A.x,A.y,A.z)}function P(A,N){const I=A*3;N.x=e[I+0],N.y=e[I+1],N.z=e[I+2]}function O(){const A=new fe,N=new fe,I=new fe,B=new fe,V=new We,X=new We,Q=new We;for(let ae=0,le=0;ae<l.length;ae+=9,le+=6){A.set(l[ae+0],l[ae+1],l[ae+2]),N.set(l[ae+3],l[ae+4],l[ae+5]),I.set(l[ae+6],l[ae+7],l[ae+8]),V.set(c[le+0],c[le+1]),X.set(c[le+2],c[le+3]),Q.set(c[le+4],c[le+5]),B.copy(A).add(N).add(I).divideScalar(3);const he=G(B);z(V,le+0,A,he),z(X,le+2,N,he),z(Q,le+4,I,he)}}function z(A,N,I,B){B<0&&A.x===1&&(c[N]=A.x-1),I.x===0&&I.z===0&&(c[N]=B/2/Math.PI+.5)}function G(A){return Math.atan2(A.z,-A.x)}function k(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}static fromJSON(e){return new Fs(e.vertices,e.indices,e.radius,e.details)}}class mc extends Fs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=1/r,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,c,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mc(e.radius,e.detail)}}const zm=new fe,Hm=new fe,ox=new fe,Gm=new nr;class ax extends bt{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const o=Math.pow(10,4),l=Math.cos(hl*t),c=e.getIndex(),h=e.getAttribute("position"),m=c?c.count:h.count,v=[0,0,0],b=["a","b","c"],T=new Array(3),L={},P=[];for(let O=0;O<m;O+=3){c?(v[0]=c.getX(O),v[1]=c.getX(O+1),v[2]=c.getX(O+2)):(v[0]=O,v[1]=O+1,v[2]=O+2);const{a:z,b:G,c:k}=Gm;if(z.fromBufferAttribute(h,v[0]),G.fromBufferAttribute(h,v[1]),k.fromBufferAttribute(h,v[2]),Gm.getNormal(ox),T[0]=`${Math.round(z.x*o)},${Math.round(z.y*o)},${Math.round(z.z*o)}`,T[1]=`${Math.round(G.x*o)},${Math.round(G.y*o)},${Math.round(G.z*o)}`,T[2]=`${Math.round(k.x*o)},${Math.round(k.y*o)},${Math.round(k.z*o)}`,!(T[0]===T[1]||T[1]===T[2]||T[2]===T[0]))for(let A=0;A<3;A++){const N=(A+1)%3,I=T[A],B=T[N],V=Gm[b[A]],X=Gm[b[N]],Q=`${I}_${B}`,ae=`${B}_${I}`;ae in L&&L[ae]?(ox.dot(L[ae].normal)<=l&&(P.push(V.x,V.y,V.z),P.push(X.x,X.y,X.z)),L[ae]=null):Q in L||(L[Q]={index0:v[A],index1:v[N],normal:ox.clone()})}}for(const O in L)if(L[O]){const{index0:z,index1:G}=L[O];zm.fromBufferAttribute(h,z),Hm.fromBufferAttribute(h,G),P.push(zm.x,zm.y,zm.z),P.push(Hm.x,Hm.y,Hm.z)}this.setAttribute("position",new pt(P,3))}}}class _i{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),l=0;t.push(0);for(let c=1;c<=e;c++)r=this.getPoint(c/e),l+=r.distanceTo(o),t.push(l),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const l=r.length;let c;t?c=t:c=e*r[l-1];let h=0,m=l-1,v;for(;h<=m;)if(o=Math.floor(h+(m-h)/2),v=r[o]-c,v<0)h=o+1;else if(v>0)m=o-1;else{m=o;break}if(o=m,r[o]===c)return o/(l-1);const b=r[o],L=r[o+1]-b,P=(c-b)/L;return(o+P)/(l-1)}getTangent(e,t){const r=1e-4;let o=e-r,l=e+r;o<0&&(o=0),l>1&&(l=1);const c=this.getPoint(o),h=this.getPoint(l),m=t||(c.isVector2?new We:new fe);return m.copy(h).sub(c).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new fe,o=[],l=[],c=[],h=new fe,m=new Qe;for(let P=0;P<=e;P++){const O=P/e;o[P]=this.getTangentAt(O,new fe)}l[0]=new fe,c[0]=new fe;let v=Number.MAX_VALUE;const b=Math.abs(o[0].x),T=Math.abs(o[0].y),L=Math.abs(o[0].z);b<=v&&(v=b,r.set(1,0,0)),T<=v&&(v=T,r.set(0,1,0)),L<=v&&r.set(0,0,1),h.crossVectors(o[0],r).normalize(),l[0].crossVectors(o[0],h),c[0].crossVectors(o[0],l[0]);for(let P=1;P<=e;P++){if(l[P]=l[P-1].clone(),c[P]=c[P-1].clone(),h.crossVectors(o[P-1],o[P]),h.length()>Number.EPSILON){h.normalize();const O=Math.acos(Nr(o[P-1].dot(o[P]),-1,1));l[P].applyMatrix4(m.makeRotationAxis(h,O))}c[P].crossVectors(o[P],l[P])}if(t===!0){let P=Math.acos(Nr(l[0].dot(l[e]),-1,1));P/=e,o[0].dot(h.crossVectors(l[0],l[e]))>0&&(P=-P);for(let O=1;O<=e;O++)l[O].applyMatrix4(m.makeRotationAxis(o[O],P*O)),c[O].crossVectors(o[O],l[O])}return{tangents:o,normals:l,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Rh extends _i{constructor(e=0,t=0,r=1,o=1,l=0,c=Math.PI*2,h=!1,m=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=c,this.aClockwise=h,this.aRotation=m}getPoint(e,t){const r=t||new We,o=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const c=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(c?l=0:l=o),this.aClockwise===!0&&!c&&(l===o?l=-o:l=l-o);const h=this.aStartAngle+e*l;let m=this.aX+this.xRadius*Math.cos(h),v=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const b=Math.cos(this.aRotation),T=Math.sin(this.aRotation),L=m-this.aX,P=v-this.aY;m=L*b-P*T+this.aX,v=L*T+P*b+this.aY}return r.set(m,v)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Rh.prototype.isEllipseCurve=!0;class lx extends Rh{constructor(e,t,r,o,l,c){super(e,t,r,r,o,l,c);this.type="ArcCurve"}}lx.prototype.isArcCurve=!0;function ux(){let i=0,e=0,t=0,r=0;function o(l,c,h,m){i=l,e=h,t=-3*l+3*c-2*h-m,r=2*l-2*c+h+m}return{initCatmullRom:function(l,c,h,m,v){o(c,h,v*(h-l),v*(m-c))},initNonuniformCatmullRom:function(l,c,h,m,v,b,T){let L=(c-l)/v-(h-l)/(v+b)+(h-c)/b,P=(h-c)/b-(m-c)/(b+T)+(m-h)/T;L*=b,P*=b,o(c,h,L,P)},calc:function(l){const c=l*l,h=c*l;return i+e*l+t*c+r*h}}}const Vm=new fe,cx=new ux,fx=new ux,hx=new ux;class dx extends _i{constructor(e=[],t=!1,r="centripetal",o=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new fe){const r=t,o=this.points,l=o.length,c=(l-(this.closed?0:1))*e;let h=Math.floor(c),m=c-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:m===0&&h===l-1&&(h=l-2,m=1);let v,b;this.closed||h>0?v=o[(h-1)%l]:(Vm.subVectors(o[0],o[1]).add(o[0]),v=Vm);const T=o[h%l],L=o[(h+1)%l];if(this.closed||h+2<l?b=o[(h+2)%l]:(Vm.subVectors(o[l-1],o[l-2]).add(o[l-1]),b=Vm),this.curveType==="centripetal"||this.curveType==="chordal"){const P=this.curveType==="chordal"?.5:.25;let O=Math.pow(v.distanceToSquared(T),P),z=Math.pow(T.distanceToSquared(L),P),G=Math.pow(L.distanceToSquared(b),P);z<1e-4&&(z=1),O<1e-4&&(O=z),G<1e-4&&(G=z),cx.initNonuniformCatmullRom(v.x,T.x,L.x,b.x,O,z,G),fx.initNonuniformCatmullRom(v.y,T.y,L.y,b.y,O,z,G),hx.initNonuniformCatmullRom(v.z,T.z,L.z,b.z,O,z,G)}else this.curveType==="catmullrom"&&(cx.initCatmullRom(v.x,T.x,L.x,b.x,this.tension),fx.initCatmullRom(v.y,T.y,L.y,b.y,this.tension),hx.initCatmullRom(v.z,T.z,L.z,b.z,this.tension));return r.set(cx.calc(m),fx.calc(m),hx.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new fe().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}dx.prototype.isCatmullRomCurve3=!0;function PE(i,e,t,r,o){const l=(r-e)*.5,c=(o-t)*.5,h=i*i,m=i*h;return(2*t-2*r+l+c)*m+(-3*t+3*r-2*l-c)*h+l*i+t}function tB(i,e){const t=1-i;return t*t*e}function nB(i,e){return 2*(1-i)*i*e}function rB(i,e){return i*i*e}function Ih(i,e,t,r){return tB(i,e)+nB(i,t)+rB(i,r)}function iB(i,e){const t=1-i;return t*t*t*e}function sB(i,e){const t=1-i;return 3*t*t*i*e}function oB(i,e){return 3*(1-i)*i*i*e}function aB(i,e){return i*i*i*e}function Ph(i,e,t,r,o){return iB(i,e)+sB(i,t)+oB(i,r)+aB(i,o)}class $m extends _i{constructor(e=new We,t=new We,r=new We,o=new We){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new We){const r=t,o=this.v0,l=this.v1,c=this.v2,h=this.v3;return r.set(Ph(e,o.x,l.x,c.x,h.x),Ph(e,o.y,l.y,c.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}$m.prototype.isCubicBezierCurve=!0;class px extends _i{constructor(e=new fe,t=new fe,r=new fe,o=new fe){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new fe){const r=t,o=this.v0,l=this.v1,c=this.v2,h=this.v3;return r.set(Ph(e,o.x,l.x,c.x,h.x),Ph(e,o.y,l.y,c.y,h.y),Ph(e,o.z,l.z,c.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}px.prototype.isCubicBezierCurve3=!0;class kh extends _i{constructor(e=new We,t=new We){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new We;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}kh.prototype.isLineCurve=!0;class kE extends _i{constructor(e=new fe,t=new fe){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new fe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wm extends _i{constructor(e=new We,t=new We,r=new We){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new We){const r=t,o=this.v0,l=this.v1,c=this.v2;return r.set(Ih(e,o.x,l.x,c.x),Ih(e,o.y,l.y,c.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Wm.prototype.isQuadraticBezierCurve=!0;class jm extends _i{constructor(e=new fe,t=new fe,r=new fe){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new fe){const r=t,o=this.v0,l=this.v1,c=this.v2;return r.set(Ih(e,o.x,l.x,c.x),Ih(e,o.y,l.y,c.y),Ih(e,o.z,l.z,c.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}jm.prototype.isQuadraticBezierCurve3=!0;class qm extends _i{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new We){const r=t,o=this.points,l=(o.length-1)*e,c=Math.floor(l),h=l-c,m=o[c===0?c:c-1],v=o[c],b=o[c>o.length-2?o.length-1:c+1],T=o[c>o.length-3?o.length-1:c+2];return r.set(PE(h,m.x,v.x,b.x,T.x),PE(h,m.y,v.y,b.y,T.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new We().fromArray(o))}return this}}qm.prototype.isSplineCurve=!0;var mx=Object.freeze({__proto__:null,ArcCurve:lx,CatmullRomCurve3:dx,CubicBezierCurve:$m,CubicBezierCurve3:px,EllipseCurve:Rh,LineCurve:kh,LineCurve3:kE,QuadraticBezierCurve:Wm,QuadraticBezierCurve3:jm,SplineCurve:qm});class OE extends _i{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new kh(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=r){const c=o[l]-r,h=this.curves[l],m=h.getLength(),v=m===0?0:1-c/m;return h.getPointAt(v,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,l=this.curves;o<l.length;o++){const c=l[o],h=c&&c.isEllipseCurve?e*2:c&&(c.isLineCurve||c.isLineCurve3)?1:c&&c.isSplineCurve?e*c.points.length:e,m=c.getPoints(h);for(let v=0;v<m.length;v++){const b=m[v];r&&r.equals(b)||(t.push(b),r=b)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(new mx[o.type]().fromJSON(o))}return this}}class Oh extends OE{constructor(e){super();this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new kh(this.currentPoint.clone(),new We(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const l=new Wm(this.currentPoint.clone(),new We(e,t),new We(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,l,c){const h=new $m(this.currentPoint.clone(),new We(e,t),new We(r,o),new We(l,c));return this.curves.push(h),this.currentPoint.set(l,c),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new qm(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,l,c){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absarc(e+h,t+m,r,o,l,c),this}absarc(e,t,r,o,l,c){return this.absellipse(e,t,r,r,o,l,c),this}ellipse(e,t,r,o,l,c,h,m){const v=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(e+v,t+b,r,o,l,c,h,m),this}absellipse(e,t,r,o,l,c,h,m){const v=new Rh(e,t,r,o,l,c,h,m);if(this.curves.length>0){const T=v.getPoint(0);T.equals(this.currentPoint)||this.lineTo(T.x,T.y)}this.curves.push(v);const b=v.getPoint(1);return this.currentPoint.copy(b),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Bs extends Oh{constructor(e){super(e);this.uuid=ki(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(new Oh().fromJSON(o))}return this}}const lB={triangulate:function(i,e,t=2){const r=e&&e.length,o=r?e[0]*t:i.length;let l=DE(i,0,o,t,!0);const c=[];if(!l||l.next===l.prev)return c;let h,m,v,b,T,L,P;if(r&&(l=dB(i,e,l,t)),i.length>80*t){h=v=i[0],m=b=i[1];for(let O=t;O<o;O+=t)T=i[O],L=i[O+1],T<h&&(h=T),L<m&&(m=L),T>v&&(v=T),L>b&&(b=L);P=Math.max(v-h,b-m),P=P!==0?1/P:0}return Dh(l,c,t,h,m,P),c}};function DE(i,e,t,r,o){let l,c;if(o===MB(i,e,t,r)>0)for(l=e;l<t;l+=r)c=BE(l,i[l],i[l+1],c);else for(l=t-r;l>=e;l-=r)c=BE(l,i[l],i[l+1],c);return c&&Xm(c,c.next)&&(Fh(c),c=c.next),c}function fa(i,e){if(!i)return i;e||(e=i);let t=i,r;do if(r=!1,!t.steiner&&(Xm(t,t.next)||Vn(t.prev,t,t.next)===0)){if(Fh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Dh(i,e,t,r,o,l,c){if(!i)return;!c&&l&&yB(i,r,o,l);let h=i,m,v;for(;i.prev!==i.next;){if(m=i.prev,v=i.next,l?cB(i,r,o,l):uB(i)){e.push(m.i/t),e.push(i.i/t),e.push(v.i/t),Fh(i),i=v.next,h=v.next;continue}if(i=v,i===h){c?c===1?(i=fB(fa(i),e,t),Dh(i,e,t,r,o,l,2)):c===2&&hB(i,e,t,r,o,l):Dh(fa(i),e,t,r,o,l,1);break}}}function uB(i){const e=i.prev,t=i,r=i.next;if(Vn(e,t,r)>=0)return!1;let o=i.next.next;for(;o!==i.prev;){if(gc(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&Vn(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function cB(i,e,t,r){const o=i.prev,l=i,c=i.next;if(Vn(o,l,c)>=0)return!1;const h=o.x<l.x?o.x<c.x?o.x:c.x:l.x<c.x?l.x:c.x,m=o.y<l.y?o.y<c.y?o.y:c.y:l.y<c.y?l.y:c.y,v=o.x>l.x?o.x>c.x?o.x:c.x:l.x>c.x?l.x:c.x,b=o.y>l.y?o.y>c.y?o.y:c.y:l.y>c.y?l.y:c.y,T=gx(h,m,e,t,r),L=gx(v,b,e,t,r);let P=i.prevZ,O=i.nextZ;for(;P&&P.z>=T&&O&&O.z<=L;){if(P!==i.prev&&P!==i.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,P.x,P.y)&&Vn(P.prev,P,P.next)>=0||(P=P.prevZ,O!==i.prev&&O!==i.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,O.x,O.y)&&Vn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;P&&P.z>=T;){if(P!==i.prev&&P!==i.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,P.x,P.y)&&Vn(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;O&&O.z<=L;){if(O!==i.prev&&O!==i.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,O.x,O.y)&&Vn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function fB(i,e,t){let r=i;do{const o=r.prev,l=r.next.next;!Xm(o,l)&&NE(o,r,r.next,l)&&Nh(o,l)&&Nh(l,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(l.i/t),Fh(r),Fh(r.next),r=i=l),r=r.next}while(r!==i);return fa(r)}function hB(i,e,t,r,o,l){let c=i;do{let h=c.next.next;for(;h!==c.prev;){if(c.i!==h.i&&_B(c,h)){let m=FE(c,h);c=fa(c,c.next),m=fa(m,m.next),Dh(c,e,t,r,o,l),Dh(m,e,t,r,o,l);return}h=h.next}c=c.next}while(c!==i)}function dB(i,e,t,r){const o=[];let l,c,h,m,v;for(l=0,c=e.length;l<c;l++)h=e[l]*r,m=l<c-1?e[l+1]*r:i.length,v=DE(i,h,m,r,!1),v===v.next&&(v.steiner=!0),o.push(wB(v));for(o.sort(pB),l=0;l<o.length;l++)mB(o[l],t),t=fa(t,t.next);return t}function pB(i,e){return i.x-e.x}function mB(i,e){if(e=gB(i,e),e){const t=FE(e,i);fa(e,e.next),fa(t,t.next)}}function gB(i,e){let t=e;const r=i.x,o=i.y;let l=-1/0,c;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const L=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(L<=r&&L>l){if(l=L,L===r){if(o===t.y)return t;if(o===t.next.y)return t.next}c=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!c)return null;if(r===l)return c;const h=c,m=c.x,v=c.y;let b=1/0,T;t=c;do r>=t.x&&t.x>=m&&r!==t.x&&gc(o<v?r:l,o,m,v,o<v?l:r,o,t.x,t.y)&&(T=Math.abs(o-t.y)/(r-t.x),Nh(t,i)&&(T<b||T===b&&(t.x>c.x||t.x===c.x&&vB(c,t)))&&(c=t,b=T)),t=t.next;while(t!==h);return c}function vB(i,e){return Vn(i.prev,i,e.prev)<0&&Vn(e.next,i,i.next)<0}function yB(i,e,t,r){let o=i;do o.z===null&&(o.z=gx(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,xB(o)}function xB(i){let e,t,r,o,l,c,h,m,v=1;do{for(t=i,i=null,l=null,c=0;t;){for(c++,r=t,h=0,e=0;e<v&&(h++,r=r.nextZ,!!r);e++);for(m=v;h>0||m>0&&r;)h!==0&&(m===0||!r||t.z<=r.z)?(o=t,t=t.nextZ,h--):(o=r,r=r.nextZ,m--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;t=r}l.nextZ=null,v*=2}while(c>1);return i}function gx(i,e,t,r,o){return i=32767*(i-t)*o,e=32767*(e-r)*o,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function wB(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function gc(i,e,t,r,o,l,c,h){return(o-c)*(e-h)-(i-c)*(l-h)>=0&&(i-c)*(r-h)-(t-c)*(e-h)>=0&&(t-c)*(l-h)-(o-c)*(r-h)>=0}function _B(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!bB(i,e)&&(Nh(i,e)&&Nh(e,i)&&SB(i,e)&&(Vn(i.prev,i,e.prev)||Vn(i,e.prev,e))||Xm(i,e)&&Vn(i.prev,i,i.next)>0&&Vn(e.prev,e,e.next)>0)}function Vn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Xm(i,e){return i.x===e.x&&i.y===e.y}function NE(i,e,t,r){const o=Km(Vn(i,e,t)),l=Km(Vn(i,e,r)),c=Km(Vn(t,r,i)),h=Km(Vn(t,r,e));return!!(o!==l&&c!==h||o===0&&Ym(i,t,e)||l===0&&Ym(i,r,e)||c===0&&Ym(t,i,r)||h===0&&Ym(t,e,r))}function Ym(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Km(i){return i>0?1:i<0?-1:0}function bB(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&NE(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Nh(i,e){return Vn(i.prev,i,i.next)<0?Vn(i,e,i.next)>=0&&Vn(i,i.prev,e)>=0:Vn(i,e,i.prev)<0||Vn(i,i.next,e)<0}function SB(i,e){let t=i,r=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==i);return r}function FE(i,e){const t=new vx(i.i,i.x,i.y),r=new vx(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,r.next=t,t.prev=r,l.next=r,r.prev=l,r}function BE(i,e,t,r){const o=new vx(i,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function Fh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function vx(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function MB(i,e,t,r){let o=0;for(let l=e,c=t-r;l<t;l+=r)o+=(i[c]-i[l])*(i[l+1]+i[c+1]),c=l;return o}class Us{static area(e){const t=e.length;let r=0;for(let o=t-1,l=0;l<t;o=l++)r+=e[o].x*e[l].y-e[l].x*e[o].y;return r*.5}static isClockWise(e){return Us.area(e)<0}static triangulateShape(e,t){const r=[],o=[],l=[];UE(e),zE(r,e);let c=e.length;t.forEach(UE);for(let m=0;m<t.length;m++)o.push(c),c+=t[m].length,zE(r,t[m]);const h=lB.triangulate(r,o);for(let m=0;m<h.length;m+=3)l.push(h.slice(m,m+3));return l}}function UE(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function zE(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class zs extends bt{constructor(e=new Bs([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],l=[];for(let h=0,m=e.length;h<m;h++){const v=e[h];c(v)}this.setAttribute("position",new pt(o,3)),this.setAttribute("uv",new pt(l,2)),this.computeVertexNormals();function c(h){const m=[],v=t.curveSegments!==void 0?t.curveSegments:12,b=t.steps!==void 0?t.steps:1;let T=t.depth!==void 0?t.depth:1,L=t.bevelEnabled!==void 0?t.bevelEnabled:!0,P=t.bevelThickness!==void 0?t.bevelThickness:.2,O=t.bevelSize!==void 0?t.bevelSize:P-.1,z=t.bevelOffset!==void 0?t.bevelOffset:0,G=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:TB;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),T=t.amount);let N,I=!1,B,V,X,Q;k&&(N=k.getSpacedPoints(b),I=!0,L=!1,B=k.computeFrenetFrames(b,!1),V=new fe,X=new fe,Q=new fe),L||(G=0,P=0,O=0,z=0);const ae=h.extractPoints(v);let le=ae.shape;const he=ae.holes;if(!Us.isClockWise(le)){le=le.reverse();for(let Le=0,Fe=he.length;Le<Fe;Le++){const qe=he[Le];Us.isClockWise(qe)&&(he[Le]=qe.reverse())}}const ee=Us.triangulateShape(le,he),_=le;for(let Le=0,Fe=he.length;Le<Fe;Le++){const qe=he[Le];le=le.concat(qe)}function p(Le,Fe,qe){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().multiplyScalar(qe).add(Le)}const Z=le.length,E=ee.length;function ye(Le,Fe,qe){let De,oe,vt;const j=Le.x-Fe.x,Je=Le.y-Fe.y,Wt=qe.x-Le.x,U=qe.y-Le.y,n=j*j+Je*Je,s=j*U-Je*Wt;if(Math.abs(s)>Number.EPSILON){const a=Math.sqrt(n),f=Math.sqrt(Wt*Wt+U*U),g=Fe.x-Je/a,y=Fe.y+j/a,S=qe.x-U/f,C=qe.y+Wt/f,R=((S-g)*U-(C-y)*Wt)/(j*U-Je*Wt);De=g+j*R-Le.x,oe=y+Je*R-Le.y;const D=De*De+oe*oe;if(D<=2)return new We(De,oe);vt=Math.sqrt(D/2)}else{let a=!1;j>Number.EPSILON?Wt>Number.EPSILON&&(a=!0):j<-Number.EPSILON?Wt<-Number.EPSILON&&(a=!0):Math.sign(Je)===Math.sign(U)&&(a=!0),a?(De=-Je,oe=j,vt=Math.sqrt(n)):(De=j,oe=Je,vt=Math.sqrt(n/2))}return new We(De/vt,oe/vt)}const Re=[];for(let Le=0,Fe=_.length,qe=Fe-1,De=Le+1;Le<Fe;Le++,qe++,De++)qe===Fe&&(qe=0),De===Fe&&(De=0),Re[Le]=ye(_[Le],_[qe],_[De]);const Me=[];let pe,ve=Re.concat();for(let Le=0,Fe=he.length;Le<Fe;Le++){const qe=he[Le];pe=[];for(let De=0,oe=qe.length,vt=oe-1,j=De+1;De<oe;De++,vt++,j++)vt===oe&&(vt=0),j===oe&&(j=0),pe[De]=ye(qe[De],qe[vt],qe[j]);Me.push(pe),ve=ve.concat(pe)}for(let Le=0;Le<G;Le++){const Fe=Le/G,qe=P*Math.cos(Fe*Math.PI/2),De=O*Math.sin(Fe*Math.PI/2)+z;for(let oe=0,vt=_.length;oe<vt;oe++){const j=p(_[oe],Re[oe],De);Oe(j.x,j.y,-qe)}for(let oe=0,vt=he.length;oe<vt;oe++){const j=he[oe];pe=Me[oe];for(let Je=0,Wt=j.length;Je<Wt;Je++){const U=p(j[Je],pe[Je],De);Oe(U.x,U.y,-qe)}}}const Ce=O+z;for(let Le=0;Le<Z;Le++){const Fe=L?p(le[Le],ve[Le],Ce):le[Le];I?(X.copy(B.normals[0]).multiplyScalar(Fe.x),V.copy(B.binormals[0]).multiplyScalar(Fe.y),Q.copy(N[0]).add(X).add(V),Oe(Q.x,Q.y,Q.z)):Oe(Fe.x,Fe.y,0)}for(let Le=1;Le<=b;Le++)for(let Fe=0;Fe<Z;Fe++){const qe=L?p(le[Fe],ve[Fe],Ce):le[Fe];I?(X.copy(B.normals[Le]).multiplyScalar(qe.x),V.copy(B.binormals[Le]).multiplyScalar(qe.y),Q.copy(N[Le]).add(X).add(V),Oe(Q.x,Q.y,Q.z)):Oe(qe.x,qe.y,T/b*Le)}for(let Le=G-1;Le>=0;Le--){const Fe=Le/G,qe=P*Math.cos(Fe*Math.PI/2),De=O*Math.sin(Fe*Math.PI/2)+z;for(let oe=0,vt=_.length;oe<vt;oe++){const j=p(_[oe],Re[oe],De);Oe(j.x,j.y,T+qe)}for(let oe=0,vt=he.length;oe<vt;oe++){const j=he[oe];pe=Me[oe];for(let Je=0,Wt=j.length;Je<Wt;Je++){const U=p(j[Je],pe[Je],De);I?Oe(U.x,U.y+N[b-1].y,N[b-1].x+qe):Oe(U.x,U.y,T+qe)}}}_e(),Pe();function _e(){const Le=o.length/3;if(L){let Fe=0,qe=Z*Fe;for(let De=0;De<E;De++){const oe=ee[De];ze(oe[2]+qe,oe[1]+qe,oe[0]+qe)}Fe=b+G*2,qe=Z*Fe;for(let De=0;De<E;De++){const oe=ee[De];ze(oe[0]+qe,oe[1]+qe,oe[2]+qe)}}else{for(let Fe=0;Fe<E;Fe++){const qe=ee[Fe];ze(qe[2],qe[1],qe[0])}for(let Fe=0;Fe<E;Fe++){const qe=ee[Fe];ze(qe[0]+Z*b,qe[1]+Z*b,qe[2]+Z*b)}}r.addGroup(Le,o.length/3-Le,0)}function Pe(){const Le=o.length/3;let Fe=0;Te(_,Fe),Fe+=_.length;for(let qe=0,De=he.length;qe<De;qe++){const oe=he[qe];Te(oe,Fe),Fe+=oe.length}r.addGroup(Le,o.length/3-Le,1)}function Te(Le,Fe){let qe=Le.length;for(;--qe>=0;){const De=qe;let oe=qe-1;oe<0&&(oe=Le.length-1);for(let vt=0,j=b+G*2;vt<j;vt++){const Je=Z*vt,Wt=Z*(vt+1),U=Fe+De+Je,n=Fe+oe+Je,s=Fe+oe+Wt,a=Fe+De+Wt;He(U,n,s,a)}}}function Oe(Le,Fe,qe){m.push(Le),m.push(Fe),m.push(qe)}function ze(Le,Fe,qe){$(Le),$(Fe),$(qe);const De=o.length/3,oe=A.generateTopUV(r,o,De-3,De-2,De-1);$e(oe[0]),$e(oe[1]),$e(oe[2])}function He(Le,Fe,qe,De){$(Le),$(Fe),$(De),$(Fe),$(qe),$(De);const oe=o.length/3,vt=A.generateSideWallUV(r,o,oe-6,oe-3,oe-2,oe-1);$e(vt[0]),$e(vt[1]),$e(vt[3]),$e(vt[1]),$e(vt[2]),$e(vt[3])}function $(Le){o.push(m[Le*3+0]),o.push(m[Le*3+1]),o.push(m[Le*3+2])}function $e(Le){l.push(Le.x),l.push(Le.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return EB(t,r,e)}static fromJSON(e,t){const r=[];for(let l=0,c=e.shapes.length;l<c;l++){const h=t[e.shapes[l]];r.push(h)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new mx[o.type]().fromJSON(o)),new zs(r,e.options)}}const TB={generateTopUV:function(i,e,t,r,o){const l=e[t*3],c=e[t*3+1],h=e[r*3],m=e[r*3+1],v=e[o*3],b=e[o*3+1];return[new We(l,c),new We(h,m),new We(v,b)]},generateSideWallUV:function(i,e,t,r,o,l){const c=e[t*3],h=e[t*3+1],m=e[t*3+2],v=e[r*3],b=e[r*3+1],T=e[r*3+2],L=e[o*3],P=e[o*3+1],O=e[o*3+2],z=e[l*3],G=e[l*3+1],k=e[l*3+2];return Math.abs(h-b)<Math.abs(c-v)?[new We(c,1-m),new We(v,1-T),new We(L,1-O),new We(z,1-k)]:[new We(h,1-m),new We(b,1-T),new We(P,1-O),new We(G,1-k)]}};function EB(i,e,t){if(t.shapes=[],Array.isArray(i))for(let r=0,o=i.length;r<o;r++){const l=i[r];t.shapes.push(l.uuid)}else t.shapes.push(i.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class vc extends Fs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,l,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vc(e.radius,e.detail)}}class yc extends bt{constructor(e=[new We(0,.5),new We(.5,0),new We(0,-.5)],t=12,r=0,o=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=Math.floor(t),o=Nr(o,0,Math.PI*2);const l=[],c=[],h=[],m=[],v=[],b=1/t,T=new fe,L=new We,P=new fe,O=new fe,z=new fe;let G=0,k=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:G=e[A+1].x-e[A].x,k=e[A+1].y-e[A].y,P.x=k*1,P.y=-G,P.z=k*0,z.copy(P),P.normalize(),m.push(P.x,P.y,P.z);break;case e.length-1:m.push(z.x,z.y,z.z);break;default:G=e[A+1].x-e[A].x,k=e[A+1].y-e[A].y,P.x=k*1,P.y=-G,P.z=k*0,O.copy(P),P.x+=z.x,P.y+=z.y,P.z+=z.z,P.normalize(),m.push(P.x,P.y,P.z),z.copy(O)}for(let A=0;A<=t;A++){const N=r+A*b*o,I=Math.sin(N),B=Math.cos(N);for(let V=0;V<=e.length-1;V++){T.x=e[V].x*I,T.y=e[V].y,T.z=e[V].x*B,c.push(T.x,T.y,T.z),L.x=A/t,L.y=V/(e.length-1),h.push(L.x,L.y);const X=m[3*V+0]*I,Q=m[3*V+1],ae=m[3*V+0]*B;v.push(X,Q,ae)}}for(let A=0;A<t;A++)for(let N=0;N<e.length-1;N++){const I=N+A*e.length,B=I,V=I+e.length,X=I+e.length+1,Q=I+1;l.push(B,V,Q),l.push(V,X,Q)}this.setIndex(l),this.setAttribute("position",new pt(c,3)),this.setAttribute("uv",new pt(h,2)),this.setAttribute("normal",new pt(v,3))}static fromJSON(e){return new yc(e.points,e.segments,e.phiStart,e.phiLength)}}class Ml extends Fs{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,o,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ml(e.radius,e.detail)}}class xc extends bt{constructor(e=.5,t=1,r=8,o=1,l=0,c=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:o,thetaStart:l,thetaLength:c},r=Math.max(3,r),o=Math.max(1,o);const h=[],m=[],v=[],b=[];let T=e;const L=(t-e)/o,P=new fe,O=new We;for(let z=0;z<=o;z++){for(let G=0;G<=r;G++){const k=l+G/r*c;P.x=T*Math.cos(k),P.y=T*Math.sin(k),m.push(P.x,P.y,P.z),v.push(0,0,1),O.x=(P.x/t+1)/2,O.y=(P.y/t+1)/2,b.push(O.x,O.y)}T+=L}for(let z=0;z<o;z++){const G=z*(r+1);for(let k=0;k<r;k++){const A=k+G,N=A,I=A+r+1,B=A+r+2,V=A+1;h.push(N,I,V),h.push(I,B,V)}}this.setIndex(h),this.setAttribute("position",new pt(m,3)),this.setAttribute("normal",new pt(v,3)),this.setAttribute("uv",new pt(b,2))}static fromJSON(e){return new xc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Tl extends bt{constructor(e=new Bs([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],l=[],c=[];let h=0,m=0;if(Array.isArray(e)===!1)v(e);else for(let b=0;b<e.length;b++)v(e[b]),this.addGroup(h,m,b),h+=m,m=0;this.setIndex(r),this.setAttribute("position",new pt(o,3)),this.setAttribute("normal",new pt(l,3)),this.setAttribute("uv",new pt(c,2));function v(b){const T=o.length/3,L=b.extractPoints(t);let P=L.shape;const O=L.holes;Us.isClockWise(P)===!1&&(P=P.reverse());for(let G=0,k=O.length;G<k;G++){const A=O[G];Us.isClockWise(A)===!0&&(O[G]=A.reverse())}const z=Us.triangulateShape(P,O);for(let G=0,k=O.length;G<k;G++){const A=O[G];P=P.concat(A)}for(let G=0,k=P.length;G<k;G++){const A=P[G];o.push(A.x,A.y,0),l.push(0,0,1),c.push(A.x,A.y)}for(let G=0,k=z.length;G<k;G++){const A=z[G],N=A[0]+T,I=A[1]+T,B=A[2]+T;r.push(N,I,B),m+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return AB(t,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++){const c=t[e.shapes[o]];r.push(c)}return new Tl(r,e.curveSegments)}}function AB(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,r=i.length;t<r;t++){const o=i[t];e.shapes.push(o.uuid)}else e.shapes.push(i.uuid);return e}class El extends bt{constructor(e=1,t=32,r=16,o=0,l=Math.PI*2,c=0,h=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:o,phiLength:l,thetaStart:c,thetaLength:h},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const m=Math.min(c+h,Math.PI);let v=0;const b=[],T=new fe,L=new fe,P=[],O=[],z=[],G=[];for(let k=0;k<=r;k++){const A=[],N=k/r;let I=0;k==0&&c==0?I=.5/t:k==r&&m==Math.PI&&(I=-.5/t);for(let B=0;B<=t;B++){const V=B/t;T.x=-e*Math.cos(o+V*l)*Math.sin(c+N*h),T.y=e*Math.cos(c+N*h),T.z=e*Math.sin(o+V*l)*Math.sin(c+N*h),O.push(T.x,T.y,T.z),L.copy(T).normalize(),z.push(L.x,L.y,L.z),G.push(V+I,1-N),A.push(v++)}b.push(A)}for(let k=0;k<r;k++)for(let A=0;A<t;A++){const N=b[k][A+1],I=b[k][A],B=b[k+1][A],V=b[k+1][A+1];(k!==0||c>0)&&P.push(N,I,V),(k!==r-1||m<Math.PI)&&P.push(I,B,V)}this.setIndex(P),this.setAttribute("position",new pt(O,3)),this.setAttribute("normal",new pt(z,3)),this.setAttribute("uv",new pt(G,2))}static fromJSON(e){return new El(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wc extends Fs{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,o,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wc(e.radius,e.detail)}}class _c extends bt{constructor(e=1,t=.4,r=8,o=6,l=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:o,arc:l},r=Math.floor(r),o=Math.floor(o);const c=[],h=[],m=[],v=[],b=new fe,T=new fe,L=new fe;for(let P=0;P<=r;P++)for(let O=0;O<=o;O++){const z=O/o*l,G=P/r*Math.PI*2;T.x=(e+t*Math.cos(G))*Math.cos(z),T.y=(e+t*Math.cos(G))*Math.sin(z),T.z=t*Math.sin(G),h.push(T.x,T.y,T.z),b.x=e*Math.cos(z),b.y=e*Math.sin(z),L.subVectors(T,b).normalize(),m.push(L.x,L.y,L.z),v.push(O/o),v.push(P/r)}for(let P=1;P<=r;P++)for(let O=1;O<=o;O++){const z=(o+1)*P+O-1,G=(o+1)*(P-1)+O-1,k=(o+1)*(P-1)+O,A=(o+1)*P+O;c.push(z,G,A),c.push(G,k,A)}this.setIndex(c),this.setAttribute("position",new pt(h,3)),this.setAttribute("normal",new pt(m,3)),this.setAttribute("uv",new pt(v,2))}static fromJSON(e){return new _c(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class bc extends bt{constructor(e=1,t=.4,r=64,o=8,l=2,c=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:o,p:l,q:c},r=Math.floor(r),o=Math.floor(o);const h=[],m=[],v=[],b=[],T=new fe,L=new fe,P=new fe,O=new fe,z=new fe,G=new fe,k=new fe;for(let N=0;N<=r;++N){const I=N/r*l*Math.PI*2;A(I,l,c,e,P),A(I+.01,l,c,e,O),G.subVectors(O,P),k.addVectors(O,P),z.crossVectors(G,k),k.crossVectors(z,G),z.normalize(),k.normalize();for(let B=0;B<=o;++B){const V=B/o*Math.PI*2,X=-t*Math.cos(V),Q=t*Math.sin(V);T.x=P.x+(X*k.x+Q*z.x),T.y=P.y+(X*k.y+Q*z.y),T.z=P.z+(X*k.z+Q*z.z),m.push(T.x,T.y,T.z),L.subVectors(T,P).normalize(),v.push(L.x,L.y,L.z),b.push(N/r),b.push(B/o)}}for(let N=1;N<=r;N++)for(let I=1;I<=o;I++){const B=(o+1)*(N-1)+(I-1),V=(o+1)*N+(I-1),X=(o+1)*N+I,Q=(o+1)*(N-1)+I;h.push(B,V,Q),h.push(V,X,Q)}this.setIndex(h),this.setAttribute("position",new pt(m,3)),this.setAttribute("normal",new pt(v,3)),this.setAttribute("uv",new pt(b,2));function A(N,I,B,V,X){const Q=Math.cos(N),ae=Math.sin(N),le=B/I*N,he=Math.cos(le);X.x=V*(2+he)*.5*Q,X.y=V*(2+he)*ae*.5,X.z=V*Math.sin(le)*.5}}static fromJSON(e){return new bc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Sc extends bt{constructor(e=new jm(new fe(-1,-1,0),new fe(-1,1,0),new fe(1,1,0)),t=64,r=1,o=8,l=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:o,closed:l};const c=e.computeFrenetFrames(t,l);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const h=new fe,m=new fe,v=new We;let b=new fe;const T=[],L=[],P=[],O=[];z(),this.setIndex(O),this.setAttribute("position",new pt(T,3)),this.setAttribute("normal",new pt(L,3)),this.setAttribute("uv",new pt(P,2));function z(){for(let N=0;N<t;N++)G(N);G(l===!1?t:0),A(),k()}function G(N){b=e.getPointAt(N/t,b);const I=c.normals[N],B=c.binormals[N];for(let V=0;V<=o;V++){const X=V/o*Math.PI*2,Q=Math.sin(X),ae=-Math.cos(X);m.x=ae*I.x+Q*B.x,m.y=ae*I.y+Q*B.y,m.z=ae*I.z+Q*B.z,m.normalize(),L.push(m.x,m.y,m.z),h.x=b.x+r*m.x,h.y=b.y+r*m.y,h.z=b.z+r*m.z,T.push(h.x,h.y,h.z)}}function k(){for(let N=1;N<=t;N++)for(let I=1;I<=o;I++){const B=(o+1)*(N-1)+(I-1),V=(o+1)*N+(I-1),X=(o+1)*N+I,Q=(o+1)*(N-1)+I;O.push(B,V,Q),O.push(V,X,Q)}}function A(){for(let N=0;N<=t;N++)for(let I=0;I<=o;I++)v.x=N/t,v.y=I/o,P.push(v.x,v.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Sc(new mx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yx extends bt{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,o=new fe,l=new fe;if(e.index!==null){const c=e.attributes.position,h=e.index;let m=e.groups;m.length===0&&(m=[{start:0,count:h.count,materialIndex:0}]);for(let v=0,b=m.length;v<b;++v){const T=m[v],L=T.start,P=T.count;for(let O=L,z=L+P;O<z;O+=3)for(let G=0;G<3;G++){const k=h.getX(O+G),A=h.getX(O+(G+1)%3);o.fromBufferAttribute(c,k),l.fromBufferAttribute(c,A),HE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}}else{const c=e.attributes.position;for(let h=0,m=c.count/3;h<m;h++)for(let v=0;v<3;v++){const b=3*h+v,T=3*h+(v+1)%3;o.fromBufferAttribute(c,b),l.fromBufferAttribute(c,T),HE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}this.setAttribute("position",new pt(t,3))}}}function HE(i,e,t){const r=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(r)===!0||t.has(o)===!0?!1:(t.add(r,o),!0)}var GE=Object.freeze({__proto__:null,BoxGeometry:go,BoxBufferGeometry:go,CircleGeometry:dc,CircleBufferGeometry:dc,ConeGeometry:pc,ConeBufferGeometry:pc,CylinderGeometry:ca,CylinderBufferGeometry:ca,DodecahedronGeometry:mc,DodecahedronBufferGeometry:mc,EdgesGeometry:ax,ExtrudeGeometry:zs,ExtrudeBufferGeometry:zs,IcosahedronGeometry:vc,IcosahedronBufferGeometry:vc,LatheGeometry:yc,LatheBufferGeometry:yc,OctahedronGeometry:Ml,OctahedronBufferGeometry:Ml,PlaneGeometry:gl,PlaneBufferGeometry:gl,PolyhedronGeometry:Fs,PolyhedronBufferGeometry:Fs,RingGeometry:xc,RingBufferGeometry:xc,ShapeGeometry:Tl,ShapeBufferGeometry:Tl,SphereGeometry:El,SphereBufferGeometry:El,TetrahedronGeometry:wc,TetrahedronBufferGeometry:wc,TorusGeometry:_c,TorusBufferGeometry:_c,TorusKnotGeometry:bc,TorusKnotBufferGeometry:bc,TubeGeometry:Sc,TubeBufferGeometry:Sc,WireframeGeometry:yx});class xx extends rr{constructor(e){super();this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}xx.prototype.isShadowMaterial=!0;class Al extends rr{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lo,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Al.prototype.isMeshStandardMaterial=!0;class yo extends Al{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ke(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}yo.prototype.isMeshPhysicalMaterial=!0;class Mc extends rr{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lo,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Mc.prototype.isMeshPhongMaterial=!0;class wx extends rr{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lo,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}wx.prototype.isMeshToonMaterial=!0;class _x extends rr{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lo,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}_x.prototype.isMeshNormalMaterial=!0;class Zm extends rr{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Zm.prototype.isMeshLambertMaterial=!0;class bx extends rr{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lo,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}bx.prototype.isMeshMatcapMaterial=!0;class Sx extends Bn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Sx.prototype.isLineDashedMaterial=!0;var CB=Object.freeze({__proto__:null,ShadowMaterial:xx,SpriteMaterial:Lm,RawShaderMaterial:rc,ShaderMaterial:Os,PointsMaterial:ua,MeshPhysicalMaterial:yo,MeshStandardMaterial:Al,MeshPhongMaterial:Mc,MeshToonMaterial:wx,MeshNormalMaterial:_x,MeshLambertMaterial:Zm,MeshDepthMaterial:Tm,MeshDistanceMaterial:Em,MeshBasicMaterial:qr,MeshMatcapMaterial:bx,LineDashedMaterial:Sx,LineBasicMaterial:Bn,Material:rr});const Rn={arraySlice:function(i,e,t){return Rn.isTypedArray(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){function e(o,l){return i[o]-i[l]}const t=i.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(e),r},sortedArray:function(i,e,t){const r=i.length,o=new i.constructor(r);for(let l=0,c=0;c!==r;++l){const h=t[l]*e;for(let m=0;m!==e;++m)o[c++]=i[h+m]}return o},flattenJSON:function(i,e,t,r){let o=1,l=i[0];for(;l!==void 0&&l[r]===void 0;)l=i[o++];if(l===void 0)return;let c=l[r];if(c!==void 0)if(Array.isArray(c))do c=l[r],c!==void 0&&(e.push(l.time),t.push.apply(t,c)),l=i[o++];while(l!==void 0);else if(c.toArray!==void 0)do c=l[r],c!==void 0&&(e.push(l.time),c.toArray(t,t.length)),l=i[o++];while(l!==void 0);else do c=l[r],c!==void 0&&(e.push(l.time),t.push(c)),l=i[o++];while(l!==void 0)},subclip:function(i,e,t,r,o=30){const l=i.clone();l.name=e;const c=[];for(let m=0;m<l.tracks.length;++m){const v=l.tracks[m],b=v.getValueSize(),T=[],L=[];for(let P=0;P<v.times.length;++P){const O=v.times[P]*o;if(!(O<t||O>=r)){T.push(v.times[P]);for(let z=0;z<b;++z)L.push(v.values[P*b+z])}}T.length!==0&&(v.times=Rn.convertArray(T,v.times.constructor),v.values=Rn.convertArray(L,v.values.constructor),c.push(v))}l.tracks=c;let h=1/0;for(let m=0;m<l.tracks.length;++m)h>l.tracks[m].times[0]&&(h=l.tracks[m].times[0]);for(let m=0;m<l.tracks.length;++m)l.tracks[m].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(i,e=0,t=i,r=30){r<=0&&(r=30);const o=t.tracks.length,l=e/r;for(let c=0;c<o;++c){const h=t.tracks[c],m=h.ValueTypeName;if(m==="bool"||m==="string")continue;const v=i.tracks.find(function(k){return k.name===h.name&&k.ValueTypeName===m});if(v===void 0)continue;let b=0;const T=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=T/3);let L=0;const P=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(L=P/3);const O=h.times.length-1;let z;if(l<=h.times[0]){const k=b,A=T-b;z=Rn.arraySlice(h.values,k,A)}else if(l>=h.times[O]){const k=O*T+b,A=k+T-b;z=Rn.arraySlice(h.values,k,A)}else{const k=h.createInterpolant(),A=b,N=T-b;k.evaluate(l),z=Rn.arraySlice(k.resultBuffer,A,N)}m==="quaternion"&&new Ut().fromArray(z).normalize().conjugate().toArray(z);const G=v.times.length;for(let k=0;k<G;++k){const A=k*P+L;if(m==="quaternion")Ut.multiplyQuaternionsFlat(v.values,A,z,0,v.values,A);else{const N=P-L*2;for(let I=0;I<N;++I)v.values[A+I]-=z[I]}}}return i.blendMode=yy,i}};class Hs{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],l=t[r-1];e:{t:{let c;n:{r:if(!(e<o)){for(let h=r+2;;){if(o===void 0){if(e<l)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,l)}if(r===h)break;if(l=o,o=t[++r],e<o)break t}c=t.length;break n}if(!(e>=l)){const h=t[1];e<h&&(r=2,l=h);for(let m=r-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=l,l=t[--r-1],e>=l)break t}c=r,r=0;break n}break e}for(;r<c;){const h=r+c>>>1;e<t[h]?c=h:r=h+1}if(o=t[r],l=t[r-1],l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(o===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,l,e)}this._cachedIndex=r,this.intervalChanged_(r,l,o)}return this.interpolate_(r,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o;for(let c=0;c!==o;++c)t[c]=r[l+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Hs.prototype.beforeStart_=Hs.prototype.copySampleValue_;Hs.prototype.afterEnd_=Hs.prototype.copySampleValue_;class VE extends Hs{constructor(e,t,r,o){super(e,t,r,o);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ul,endingEnd:ul}}intervalChanged_(e,t,r){const o=this.parameterPositions;let l=e-2,c=e+1,h=o[l],m=o[c];if(h===void 0)switch(this.getSettings_().endingStart){case cl:l=e,h=2*t-r;break;case hh:l=o.length-2,h=t+o[l]-o[l+1];break;default:l=e,h=r}if(m===void 0)switch(this.getSettings_().endingEnd){case cl:c=e,m=2*r-t;break;case hh:c=1,m=r+o[1]-o[0];break;default:c=e-1,m=t}const v=(r-t)*.5,b=this.valueSize;this._weightPrev=v/(t-h),this._weightNext=v/(m-r),this._offsetPrev=l*b,this._offsetNext=c*b}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,b=this._offsetPrev,T=this._offsetNext,L=this._weightPrev,P=this._weightNext,O=(r-t)/(o-t),z=O*O,G=z*O,k=-L*G+2*L*z-L*O,A=(1+L)*G+(-1.5-2*L)*z+(-.5+L)*O+1,N=(-1-P)*G+(1.5+P)*z+.5*O,I=P*G-P*z;for(let B=0;B!==h;++B)l[B]=k*c[b+B]+A*c[v+B]+N*c[m+B]+I*c[T+B];return l}}class Mx extends Hs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,b=(r-t)/(o-t),T=1-b;for(let L=0;L!==h;++L)l[L]=c[v+L]*T+c[m+L]*b;return l}}class $E extends Hs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class xs{constructor(e,t,r,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rn.convertArray(t,this.TimeBufferType),this.values=Rn.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Rn.convertArray(e.times,Array),values:Rn.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new $E(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Mx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Uu:t=this.InterpolantFactoryMethodDiscrete;break;case ll:t=this.InterpolantFactoryMethodLinear;break;case jp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Uu;case this.InterpolantFactoryMethodLinear:return ll;case this.InterpolantFactoryMethodSmooth:return jp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let l=0,c=o-1;for(;l!==o&&r[l]<e;)++l;for(;c!==-1&&r[c]>t;)--c;if(++c,l!==0||c!==o){l>=c&&(c=Math.max(c,1),l=c-1);const h=this.getValueSize();this.times=Rn.arraySlice(r,l,c),this.values=Rn.arraySlice(this.values,l*h,c*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,l=r.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let h=0;h!==l;h++){const m=r[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(c!==null&&c>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,c),e=!1;break}c=m}if(o!==void 0&&Rn.isTypedArray(o))for(let h=0,m=o.length;h!==m;++h){const v=o[h];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,v),e=!1;break}}return e}optimize(){const e=Rn.arraySlice(this.times),t=Rn.arraySlice(this.values),r=this.getValueSize(),o=this.getInterpolation()===jp,l=e.length-1;let c=1;for(let h=1;h<l;++h){let m=!1;const v=e[h],b=e[h+1];if(v!==b&&(h!==1||v!==e[0]))if(o)m=!0;else{const T=h*r,L=T-r,P=T+r;for(let O=0;O!==r;++O){const z=t[T+O];if(z!==t[L+O]||z!==t[P+O]){m=!0;break}}}if(m){if(h!==c){e[c]=e[h];const T=h*r,L=c*r;for(let P=0;P!==r;++P)t[L+P]=t[T+P]}++c}}if(l>0){e[c]=e[l];for(let h=l*r,m=c*r,v=0;v!==r;++v)t[m+v]=t[h+v];++c}return c!==e.length?(this.times=Rn.arraySlice(e,0,c),this.values=Rn.arraySlice(t,0,c*r)):(this.times=e,this.values=t),this}clone(){const e=Rn.arraySlice(this.times,0),t=Rn.arraySlice(this.values,0),r=this.constructor,o=new r(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=ll;class Cl extends xs{}Cl.prototype.ValueTypeName="bool";Cl.prototype.ValueBufferType=Array;Cl.prototype.DefaultInterpolation=Uu;Cl.prototype.InterpolantFactoryMethodLinear=void 0;Cl.prototype.InterpolantFactoryMethodSmooth=void 0;class Tx extends xs{}Tx.prototype.ValueTypeName="color";class Ll extends xs{}Ll.prototype.ValueTypeName="number";class WE extends Hs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=(r-t)/(o-t);let v=e*h;for(let b=v+h;v!==b;v+=4)Ut.slerpFlat(l,0,c,v-h,c,v,m);return l}}class xo extends xs{InterpolantFactoryMethodLinear(e){return new WE(this.times,this.values,this.getValueSize(),e)}}xo.prototype.ValueTypeName="quaternion";xo.prototype.DefaultInterpolation=ll;xo.prototype.InterpolantFactoryMethodSmooth=void 0;class Rl extends xs{}Rl.prototype.ValueTypeName="string";Rl.prototype.ValueBufferType=Array;Rl.prototype.DefaultInterpolation=Uu;Rl.prototype.InterpolantFactoryMethodLinear=void 0;Rl.prototype.InterpolantFactoryMethodSmooth=void 0;class Il extends xs{}Il.prototype.ValueTypeName="vector";class Pl{constructor(e,t=-1,r,o=qp){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=ki(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let c=0,h=r.length;c!==h;++c)t.push(RB(r[c]).scale(o));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,c=r.length;l!==c;++l)t.push(xs.toJSON(r[l]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const l=t.length,c=[];for(let h=0;h<l;h++){let m=[],v=[];m.push((h+l-1)%l,h,(h+1)%l),v.push(0,1,0);const b=Rn.getKeyframeOrder(m);m=Rn.sortedArray(m,1,b),v=Rn.sortedArray(v,1,b),!o&&m[0]===0&&(m.push(l),v.push(v[0])),c.push(new Ll(".morphTargetInfluences["+t[h].name+"]",m,v).scale(1/r))}return new this(e,-1,c)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},l=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const v=e[h],b=v.name.match(l);if(b&&b.length>1){const T=b[1];let L=o[T];L||(o[T]=L=[]),L.push(v)}}const c=[];for(const h in o)c.push(this.CreateFromMorphTargetSequence(h,o[h],t,r));return c}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(T,L,P,O,z){if(P.length!==0){const G=[],k=[];Rn.flattenJSON(P,G,k,O),G.length!==0&&z.push(new T(L,G,k))}},o=[],l=e.name||"default",c=e.fps||30,h=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let T=0;T<v.length;T++){const L=v[T].keys;if(!(!L||L.length===0))if(L[0].morphTargets){const P={};let O;for(O=0;O<L.length;O++)if(L[O].morphTargets)for(let z=0;z<L[O].morphTargets.length;z++)P[L[O].morphTargets[z]]=-1;for(const z in P){const G=[],k=[];for(let A=0;A!==L[O].morphTargets.length;++A){const N=L[O];G.push(N.time),k.push(N.morphTarget===z?1:0)}o.push(new Ll(".morphTargetInfluence["+z+"]",G,k))}m=P.length*(c||1)}else{const P=".bones["+t[T].name+"]";r(Il,P+".position",L,"pos",o),r(xo,P+".quaternion",L,"rot",o),r(Il,P+".scale",L,"scl",o)}}return o.length===0?null:new this(l,m,o,h)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,o=e.length;r!==o;++r){const l=this.tracks[r];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function LB(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ll;case"vector":case"vector2":case"vector3":case"vector4":return Il;case"color":return Tx;case"quaternion":return xo;case"bool":case"boolean":return Cl;case"string":return Rl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function RB(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=LB(i.type);if(i.times===void 0){const t=[],r=[];Rn.flattenJSON(i.keys,t,r,"value"),i.times=t,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const kl={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Ex{constructor(e,t,r){const o=this;let l=!1,c=0,h=0,m;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(b){h++,l===!1&&o.onStart!==void 0&&o.onStart(b,c,h),l=!0},this.itemEnd=function(b){c++,o.onProgress!==void 0&&o.onProgress(b,c,h),c===h&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(b){o.onError!==void 0&&o.onError(b)},this.resolveURL=function(b){return m?m(b):b},this.setURLModifier=function(b){return m=b,this},this.addHandler=function(b,T){return v.push(b,T),this},this.removeHandler=function(b){const T=v.indexOf(b);return T!==-1&&v.splice(T,2),this},this.getHandler=function(b){for(let T=0,L=v.length;T<L;T+=2){const P=v[T],O=v[T+1];if(P.global&&(P.lastIndex=0),P.test(b))return O}return null}}}const jE=new Ex;class Br{constructor(e){this.manager=e!==void 0?e:jE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,l){r.load(e,o,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wo={};class Fi extends Br{constructor(e){super(e)}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=kl.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(wo[e]!==void 0){wo[e].push({onLoad:t,onProgress:r,onError:o});return}wo[e]=[],wo[e].push({onLoad:t,onProgress:r,onError:o});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(c).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||h.body.getReader===void 0)return h;const m=wo[e],v=h.body.getReader(),b=h.headers.get("Content-Length"),T=b?parseInt(b):0,L=T!==0;let P=0;const O=new ReadableStream({start(z){G();function G(){v.read().then(({done:k,value:A})=>{if(k)z.close();else{P+=A.byteLength;const N=new ProgressEvent("progress",{lengthComputable:L,loaded:P,total:T});for(let I=0,B=m.length;I<B;I++){const V=m[I];V.onProgress&&V.onProgress(N)}z.enqueue(A),G()}})}}});return new Response(O)}else throw Error(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`)}).then(h=>{switch(this.responseType){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,this.mimeType));case"json":return h.json();default:return h.text()}}).then(h=>{kl.add(e,h);const m=wo[e];delete wo[e];for(let v=0,b=m.length;v<b;v++){const T=m[v];T.onLoad&&T.onLoad(h)}}).catch(h=>{const m=wo[e];if(m===void 0)throw this.manager.itemError(e),h;delete wo[e];for(let v=0,b=m.length;v<b;v++){const T=m[v];T.onError&&T.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class IB extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Fi(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=[];for(let r=0;r<e.length;r++){const o=Pl.parse(e[r]);t.push(o)}return t}}class PB extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=[],h=new sx,m=new Fi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(l.withCredentials);let v=0;function b(T){m.load(e[T],function(L){const P=l.parse(L,!0);c[T]={width:P.width,height:P.height,format:P.format,mipmaps:P.mipmaps},v+=1,v===6&&(P.mipmapCount===1&&(h.minFilter=Dn),h.image=c,h.format=P.format,h.needsUpdate=!0,t&&t(h))},r,o)}if(Array.isArray(e))for(let T=0,L=e.length;T<L;++T)b(T);else m.load(e,function(T){const L=l.parse(T,!0);if(L.isCubemap){const P=L.mipmaps.length/L.mipmapCount;for(let O=0;O<P;O++){c[O]={mipmaps:[]};for(let z=0;z<L.mipmapCount;z++)c[O].mipmaps.push(L.mipmaps[O*L.mipmapCount+z]),c[O].format=L.format,c[O].width=L.width,c[O].height=L.height}h.image=c}else h.image.width=L.width,h.image.height=L.height,h.mipmaps=L.mipmaps;L.mipmapCount===1&&(h.minFilter=Dn),h.format=L.format,h.needsUpdate=!0,t&&t(h)},r,o);return h}}class Tc extends Br{constructor(e){super(e)}load(e,t,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=kl.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(c),l.manager.itemEnd(e)},0),c;const h=Kp("img");function m(){b(),kl.add(e,this),t&&t(this),l.manager.itemEnd(e)}function v(T){b(),o&&o(T),l.manager.itemError(e),l.manager.itemEnd(e)}function b(){h.removeEventListener("load",m,!1),h.removeEventListener("error",v,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",v,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class qE extends Br{constructor(e){super(e)}load(e,t,r,o){const l=new tc,c=new Tc(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;function m(v){c.load(e[v],function(b){l.images[v]=b,h++,h===6&&(l.needsUpdate=!0,t&&t(l))},void 0,o)}for(let v=0;v<e.length;++v)m(v);return l}}class XE extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new bl,h=new Fi(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(l.withCredentials),h.load(e,function(m){const v=l.parse(m);!v||(v.image!==void 0?c.image=v.image:v.data!==void 0&&(c.image.width=v.width,c.image.height=v.height,c.image.data=v.data),c.wrapS=v.wrapS!==void 0?v.wrapS:hr,c.wrapT=v.wrapT!==void 0?v.wrapT:hr,c.magFilter=v.magFilter!==void 0?v.magFilter:Dn,c.minFilter=v.minFilter!==void 0?v.minFilter:Dn,c.anisotropy=v.anisotropy!==void 0?v.anisotropy:1,v.encoding!==void 0&&(c.encoding=v.encoding),v.flipY!==void 0&&(c.flipY=v.flipY),v.format!==void 0&&(c.format=v.format),v.type!==void 0&&(c.type=v.type),v.mipmaps!==void 0&&(c.mipmaps=v.mipmaps,c.minFilter=oo),v.mipmapCount===1&&(c.minFilter=Dn),v.generateMipmaps!==void 0&&(c.generateMipmaps=v.generateMipmaps),c.needsUpdate=!0,t&&t(c,v))},r,o),c}}class Qm extends Br{constructor(e){super(e)}load(e,t,r,o){const l=new Nn,c=new Tc(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(h){l.image=h,l.needsUpdate=!0,t!==void 0&&t(l)},r,o),l}}class ws extends Vt{constructor(e,t=1){super();this.type="Light",this.color=new Ke(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ws.prototype.isLight=!0;class Ax extends ws{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(Vt.DefaultUp),this.updateMatrix(),this.groundColor=new Ke(t)}copy(e){return ws.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Ax.prototype.isHemisphereLight=!0;const YE=new Qe,KE=new fe,ZE=new fe;class Cx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new Qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _h,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;KE.setFromMatrixPosition(e.matrixWorld),t.position.copy(KE),ZE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ZE),t.updateMatrixWorld(),YE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class QE extends Cx{constructor(){super(new dr(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=dh*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(r!==t.fov||o!==t.aspect||l!==t.far)&&(t.fov=r,t.aspect=o,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}QE.prototype.isSpotLightShadow=!0;class Bh extends ws{constructor(e,t,r=0,o=Math.PI/3,l=0,c=1){super(e,t);this.type="SpotLight",this.position.copy(Vt.DefaultUp),this.updateMatrix(),this.target=new Vt,this.distance=r,this.angle=o,this.penumbra=l,this.decay=c,this.shadow=new QE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Bh.prototype.isSpotLight=!0;const JE=new Qe,Uh=new fe,Lx=new fe;class eA extends Cx{constructor(){super(new dr(90,1,.5,500));this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new fe(1,0,0),new fe(-1,0,0),new fe(0,0,1),new fe(0,0,-1),new fe(0,1,0),new fe(0,-1,0)],this._cubeUps=[new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,0,1),new fe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),Uh.setFromMatrixPosition(e.matrixWorld),r.position.copy(Uh),Lx.copy(r.position),Lx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Lx),r.updateMatrixWorld(),o.makeTranslation(-Uh.x,-Uh.y,-Uh.z),JE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JE)}}eA.prototype.isPointLightShadow=!0;class Ec extends ws{constructor(e,t,r=0,o=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new eA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Ec.prototype.isPointLight=!0;class tA extends Cx{constructor(){super(new vl(-5,5,5,-5,.5,500))}}tA.prototype.isDirectionalLightShadow=!0;class zh extends ws{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Vt.DefaultUp),this.updateMatrix(),this.target=new Vt,this.shadow=new tA}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}zh.prototype.isDirectionalLight=!0;class Jm extends ws{constructor(e,t){super(e,t);this.type="AmbientLight"}}Jm.prototype.isAmbientLight=!0;class Rx extends ws{constructor(e,t,r=10,o=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Rx.prototype.isRectAreaLight=!0;class Ix{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new fe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,l=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.282095),t.addScaledVector(c[1],.488603*o),t.addScaledVector(c[2],.488603*l),t.addScaledVector(c[3],.488603*r),t.addScaledVector(c[4],1.092548*(r*o)),t.addScaledVector(c[5],1.092548*(o*l)),t.addScaledVector(c[6],.315392*(3*l*l-1)),t.addScaledVector(c[7],1.092548*(r*l)),t.addScaledVector(c[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,l=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.886227),t.addScaledVector(c[1],2*.511664*o),t.addScaledVector(c[2],2*.511664*l),t.addScaledVector(c[3],2*.511664*r),t.addScaledVector(c[4],2*.429043*r*o),t.addScaledVector(c[5],2*.429043*o*l),t.addScaledVector(c[6],.743125*l*l-.247708),t.addScaledVector(c[7],2*.429043*r*l),t.addScaledVector(c[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){const r=e.x,o=e.y,l=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*l,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*r*l,t[8]=.546274*(r*r-o*o)}}Ix.prototype.isSphericalHarmonics3=!0;class Hh extends ws{constructor(e=new Ix,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Hh.prototype.isLightProbe=!0;class nA extends Br{constructor(e){super(e);this.textures={}}load(e,t,r,o){const l=this,c=new Fi(l.manager);c.setPath(l.path),c.setRequestHeader(l.requestHeader),c.setWithCredentials(l.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=this.textures;function r(l){return t[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),t[l]}const o=new CB[e.type];if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new Ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.format!==void 0&&(o.format=e.format),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const c=e.uniforms[l];switch(o.uniforms[l]={},c.type){case"t":o.uniforms[l].value=r(c.value);break;case"c":o.uniforms[l].value=new Ke().setHex(c.value);break;case"v2":o.uniforms[l].value=new We().fromArray(c.value);break;case"v3":o.uniforms[l].value=new fe().fromArray(c.value);break;case"v4":o.uniforms[l].value=new an().fromArray(c.value);break;case"m3":o.uniforms[l].value=new vn().fromArray(c.value);break;case"m4":o.uniforms[l].value=new Qe().fromArray(c.value);break;default:o.uniforms[l].value=c.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const l in e.extensions)o.extensions[l]=e.extensions[l];if(e.shading!==void 0&&(o.flatShading=e.shading===1),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=r(e.map)),e.matcap!==void 0&&(o.matcap=r(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),o.normalScale=new We().fromArray(l)}return e.displacementMap!==void 0&&(o.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(o.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=r(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}}class bi{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Px extends bt{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Px.prototype.isInstancedBufferGeometry=!0;class rA extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Fi(l.manager);c.setPath(l.path),c.setRequestHeader(l.requestHeader),c.setWithCredentials(l.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t={},r={};function o(P,O){if(t[O]!==void 0)return t[O];const G=P.interleavedBuffers[O],k=l(P,G.buffer),A=Hu(G.type,k),N=new aa(A,G.stride);return N.uuid=G.uuid,t[O]=N,N}function l(P,O){if(r[O]!==void 0)return r[O];const G=P.arrayBuffers[O],k=new Uint32Array(G).buffer;return r[O]=k,k}const c=e.isInstancedBufferGeometry?new Px:new bt,h=e.data.index;if(h!==void 0){const P=Hu(h.type,h.array);c.setIndex(new Ot(P,1))}const m=e.data.attributes;for(const P in m){const O=m[P];let z;if(O.isInterleavedBufferAttribute){const G=o(e.data,O.data);z=new vo(G,O.itemSize,O.offset,O.normalized)}else{const G=Hu(O.type,O.array),k=O.isInstancedBufferAttribute?Sl:Ot;z=new k(G,O.itemSize,O.normalized)}O.name!==void 0&&(z.name=O.name),O.usage!==void 0&&z.setUsage(O.usage),O.updateRange!==void 0&&(z.updateRange.offset=O.updateRange.offset,z.updateRange.count=O.updateRange.count),c.setAttribute(P,z)}const v=e.data.morphAttributes;if(v)for(const P in v){const O=v[P],z=[];for(let G=0,k=O.length;G<k;G++){const A=O[G];let N;if(A.isInterleavedBufferAttribute){const I=o(e.data,A.data);N=new vo(I,A.itemSize,A.offset,A.normalized)}else{const I=Hu(A.type,A.array);N=new Ot(I,A.itemSize,A.normalized)}A.name!==void 0&&(N.name=A.name),z.push(N)}c.morphAttributes[P]=z}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const T=e.data.groups||e.data.drawcalls||e.data.offsets;if(T!==void 0)for(let P=0,O=T.length;P!==O;++P){const z=T[P];c.addGroup(z.start,z.count,z.materialIndex)}const L=e.data.boundingSphere;if(L!==void 0){const P=new fe;L.center!==void 0&&P.fromArray(L.center),c.boundingSphere=new co(P,L.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}}class kB extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=this.path===""?bi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const h=new Fi(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(m){let v=null;try{v=JSON.parse(m)}catch(T){o!==void 0&&o(T),console.error("THREE:ObjectLoader: Can't parse "+e+".",T.message);return}const b=v.metadata;if(b===void 0||b.type===void 0||b.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(v,t)},r,o)}async loadAsync(e,t){const r=this,o=this.path===""?bi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Fi(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const c=await l.loadAsync(e,t),h=JSON.parse(c),m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(h)}parse(e,t){const r=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,o),c=this.parseImages(e.images,function(){t!==void 0&&t(v)}),h=this.parseTextures(e.textures,c),m=this.parseMaterials(e.materials,h),v=this.parseObject(e.object,l,m,h,r),b=this.parseSkeletons(e.skeletons,v);if(this.bindSkeletons(v,b),t!==void 0){let T=!1;for(const L in c)if(c[L]instanceof HTMLImageElement){T=!0;break}T===!1&&t(v)}return v}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),l=await this.parseImagesAsync(e.images),c=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,c),m=this.parseObject(e.object,o,h,c,t),v=this.parseSkeletons(e.skeletons,m);return this.bindSkeletons(m,v),m}parseShapes(e){const t={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const l=new Bs().fromJSON(e[r]);t[l.uuid]=l}return t}parseSkeletons(e,t){const r={},o={};if(t.traverse(function(l){l.isBone&&(o[l.uuid]=l)}),e!==void 0)for(let l=0,c=e.length;l<c;l++){const h=new la().fromJSON(e[l],o);r[h.uuid]=h}return r}parseGeometries(e,t){const r={};if(e!==void 0){const o=new rA;for(let l=0,c=e.length;l<c;l++){let h;const m=e[l];switch(m.type){case"BufferGeometry":case"InstancedBufferGeometry":h=o.parse(m);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:m.type in GE?h=GE[m.type].fromJSON(m,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${m.type}"`)}h.uuid=m.uuid,m.name!==void 0&&(h.name=m.name),h.isBufferGeometry===!0&&m.userData!==void 0&&(h.userData=m.userData),r[m.uuid]=h}}return r}parseMaterials(e,t){const r={},o={};if(e!==void 0){const l=new nA;l.setTextures(t);for(let c=0,h=e.length;c<h;c++){const m=e[c];if(m.type==="MultiMaterial"){const v=[];for(let b=0;b<m.materials.length;b++){const T=m.materials[b];r[T.uuid]===void 0&&(r[T.uuid]=l.parse(T)),v.push(r[T.uuid])}o[m.uuid]=v}else r[m.uuid]===void 0&&(r[m.uuid]=l.parse(m)),o[m.uuid]=r[m.uuid]}}return o}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const o=e[r],l=Pl.parse(o);t[l.uuid]=l}return t}parseImages(e,t){const r=this,o={};let l;function c(m){return r.manager.itemStart(m),l.load(m,function(){r.manager.itemEnd(m)},void 0,function(){r.manager.itemError(m),r.manager.itemEnd(m)})}function h(m){if(typeof m=="string"){const v=m,b=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(v)?v:r.resourcePath+v;return c(b)}else return m.data?{data:Hu(m.type,m.data),width:m.width,height:m.height}:null}if(e!==void 0&&e.length>0){const m=new Ex(t);l=new Tc(m),l.setCrossOrigin(this.crossOrigin);for(let v=0,b=e.length;v<b;v++){const T=e[v],L=T.url;if(Array.isArray(L)){o[T.uuid]=[];for(let P=0,O=L.length;P<O;P++){const z=L[P],G=h(z);G!==null&&(G instanceof HTMLImageElement?o[T.uuid].push(G):o[T.uuid].push(new bl(G.data,G.width,G.height)))}}else{const P=h(T.url);P!==null&&(o[T.uuid]=P)}}}return o}async parseImagesAsync(e){const t=this,r={};let o;async function l(c){if(typeof c=="string"){const h=c,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await o.loadAsync(m)}else return c.data?{data:Hu(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){o=new Tc(this.manager),o.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const m=e[c],v=m.url;if(Array.isArray(v)){r[m.uuid]=[];for(let b=0,T=v.length;b<T;b++){const L=v[b],P=await l(L);P!==null&&(P instanceof HTMLImageElement?r[m.uuid].push(P):r[m.uuid].push(new bl(P.data,P.width,P.height)))}}else{const b=await l(m.url);b!==null&&(r[m.uuid]=b)}}}return r}parseTextures(e,t){function r(l,c){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),c[l])}const o={};if(e!==void 0)for(let l=0,c=e.length;l<c;l++){const h=e[l];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);let m;const v=t[h.image];Array.isArray(v)?(m=new tc(v),v.length===6&&(m.needsUpdate=!0)):(v&&v.data?m=new bl(v.data,v.width,v.height):m=new Nn(v),v&&(m.needsUpdate=!0)),m.uuid=h.uuid,h.name!==void 0&&(m.name=h.name),h.mapping!==void 0&&(m.mapping=r(h.mapping,OB)),h.offset!==void 0&&m.offset.fromArray(h.offset),h.repeat!==void 0&&m.repeat.fromArray(h.repeat),h.center!==void 0&&m.center.fromArray(h.center),h.rotation!==void 0&&(m.rotation=h.rotation),h.wrap!==void 0&&(m.wrapS=r(h.wrap[0],iA),m.wrapT=r(h.wrap[1],iA)),h.format!==void 0&&(m.format=h.format),h.type!==void 0&&(m.type=h.type),h.encoding!==void 0&&(m.encoding=h.encoding),h.minFilter!==void 0&&(m.minFilter=r(h.minFilter,sA)),h.magFilter!==void 0&&(m.magFilter=r(h.magFilter,sA)),h.anisotropy!==void 0&&(m.anisotropy=h.anisotropy),h.flipY!==void 0&&(m.flipY=h.flipY),h.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(m.unpackAlignment=h.unpackAlignment),h.userData!==void 0&&(m.userData=h.userData),o[h.uuid]=m}return o}parseObject(e,t,r,o,l){let c;function h(L){return t[L]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",L),t[L]}function m(L){if(L!==void 0){if(Array.isArray(L)){const P=[];for(let O=0,z=L.length;O<z;O++){const G=L[O];r[G]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",G),P.push(r[G])}return P}return r[L]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",L),r[L]}}function v(L){return o[L]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",L),o[L]}let b,T;switch(e.type){case"Scene":c=new Cm,e.background!==void 0&&(Number.isInteger(e.background)?c.background=new Ke(e.background):c.background=v(e.background)),e.environment!==void 0&&(c.environment=v(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?c.fog=new Th(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(c.fog=new Mh(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":c=new dr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(c.focus=e.focus),e.zoom!==void 0&&(c.zoom=e.zoom),e.filmGauge!==void 0&&(c.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(c.filmOffset=e.filmOffset),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"OrthographicCamera":c=new vl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(c.zoom=e.zoom),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"AmbientLight":c=new Jm(e.color,e.intensity);break;case"DirectionalLight":c=new zh(e.color,e.intensity);break;case"PointLight":c=new Ec(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":c=new Rx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":c=new Bh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":c=new Ax(e.color,e.groundColor,e.intensity);break;case"LightProbe":c=new Hh().fromJSON(e);break;case"SkinnedMesh":b=h(e.geometry),T=m(e.material),c=new wl(b,T),e.bindMode!==void 0&&(c.bindMode=e.bindMode),e.bindMatrix!==void 0&&c.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(c.skeleton=e.skeleton);break;case"Mesh":b=h(e.geometry),T=m(e.material),c=new Fn(b,T);break;case"InstancedMesh":b=h(e.geometry),T=m(e.material);const L=e.count,P=e.instanceMatrix,O=e.instanceColor;c=new nx(b,T,L),c.instanceMatrix=new Sl(new Float32Array(P.array),16),O!==void 0&&(c.instanceColor=new Sl(new Float32Array(O.array),O.itemSize));break;case"LOD":c=new pE;break;case"Line":c=new Yi(h(e.geometry),m(e.material));break;case"LineLoop":c=new Fm(h(e.geometry),m(e.material));break;case"LineSegments":c=new Er(h(e.geometry),m(e.material));break;case"PointCloud":case"Points":c=new hc(h(e.geometry),m(e.material));break;case"Sprite":c=new Pm(m(e.material));break;case"Group":c=new Fr;break;case"Bone":c=new _l;break;default:c=new Vt}if(c.uuid=e.uuid,e.name!==void 0&&(c.name=e.name),e.matrix!==void 0?(c.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=e.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(e.position!==void 0&&c.position.fromArray(e.position),e.rotation!==void 0&&c.rotation.fromArray(e.rotation),e.quaternion!==void 0&&c.quaternion.fromArray(e.quaternion),e.scale!==void 0&&c.scale.fromArray(e.scale)),e.castShadow!==void 0&&(c.castShadow=e.castShadow),e.receiveShadow!==void 0&&(c.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(c.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(c.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(c.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(c.visible=e.visible),e.frustumCulled!==void 0&&(c.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(c.renderOrder=e.renderOrder),e.userData!==void 0&&(c.userData=e.userData),e.layers!==void 0&&(c.layers.mask=e.layers),e.children!==void 0){const L=e.children;for(let P=0;P<L.length;P++)c.add(this.parseObject(L[P],t,r,o,l))}if(e.animations!==void 0){const L=e.animations;for(let P=0;P<L.length;P++){const O=L[P];c.animations.push(l[O])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(c.autoUpdate=e.autoUpdate);const L=e.levels;for(let P=0;P<L.length;P++){const O=L[P],z=c.getObjectByProperty("uuid",O.object);z!==void 0&&c.addLevel(z,O.distance)}}return c}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const o=t[r.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(o,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const OB={UVMapping:$p,CubeReflectionMapping:il,CubeRefractionMapping:sl,EquirectangularReflectionMapping:Du,EquirectangularRefractionMapping:ah,CubeUVReflectionMapping:Nu,CubeUVRefractionMapping:lh},iA={RepeatWrapping:Ps,ClampToEdgeWrapping:hr,MirroredRepeatWrapping:Fu},sA={NearestFilter:Xn,NearestMipmapNearestFilter:uh,NearestMipmapLinearFilter:ch,LinearFilter:Dn,LinearMipmapNearestFilter:Wp,LinearMipmapLinearFilter:oo};class kx extends Br{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=kl.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(c),l.manager.itemEnd(e)},0),c;const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(m){kl.add(e,m),t&&t(m),l.manager.itemEnd(e)}).catch(function(m){o&&o(m),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}kx.prototype.isImageBitmapLoader=!0;let eg;const Ox={getContext:function(){return eg===void 0&&(eg=new(window.AudioContext||window.webkitAudioContext)),eg},setContext:function(i){eg=i}};class oA extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Fi(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{const m=h.slice(0);Ox.getContext().decodeAudioData(m,function(b){t(b)})}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}}class aA extends Hh{constructor(e,t,r=1){super(void 0,r);const o=new Ke().set(e),l=new Ke().set(t),c=new fe(o.r,o.g,o.b),h=new fe(l.r,l.g,l.b),m=Math.sqrt(Math.PI),v=m*Math.sqrt(.75);this.sh.coefficients[0].copy(c).add(h).multiplyScalar(m),this.sh.coefficients[1].copy(c).sub(h).multiplyScalar(v)}}aA.prototype.isHemisphereLightProbe=!0;class lA extends Hh{constructor(e,t=1){super(void 0,t);const r=new Ke().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}lA.prototype.isAmbientLightProbe=!0;const uA=new Qe,cA=new Qe,Ol=new Qe;class DB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ol.copy(e.projectionMatrix);const o=t.eyeSep/2,l=o*t.near/t.focus,c=t.near*Math.tan(hl*t.fov*.5)/t.zoom;let h,m;cA.elements[12]=-o,uA.elements[12]=o,h=-c*t.aspect+l,m=c*t.aspect+l,Ol.elements[0]=2*t.near/(m-h),Ol.elements[8]=(m+h)/(m-h),this.cameraL.projectionMatrix.copy(Ol),h=-c*t.aspect-l,m=c*t.aspect-l,Ol.elements[0]=2*t.near/(m-h),Ol.elements[8]=(m+h)/(m-h),this.cameraR.projectionMatrix.copy(Ol)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uA)}}class fA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hA(){return(typeof performance=="undefined"?Date:performance).now()}const Dl=new fe,dA=new Ut,NB=new fe,Nl=new fe;class FB extends Vt{constructor(){super();this.type="AudioListener",this.context=Ox.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dl,dA,NB),Nl.set(0,0,-1).applyQuaternion(dA),t.positionX){const o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Dl.x,o),t.positionY.linearRampToValueAtTime(Dl.y,o),t.positionZ.linearRampToValueAtTime(Dl.z,o),t.forwardX.linearRampToValueAtTime(Nl.x,o),t.forwardY.linearRampToValueAtTime(Nl.y,o),t.forwardZ.linearRampToValueAtTime(Nl.z,o),t.upX.linearRampToValueAtTime(r.x,o),t.upY.linearRampToValueAtTime(r.y,o),t.upZ.linearRampToValueAtTime(r.z,o)}else t.setPosition(Dl.x,Dl.y,Dl.z),t.setOrientation(Nl.x,Nl.y,Nl.z,r.x,r.y,r.z)}}class Dx extends Vt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Fl=new fe,pA=new Ut,BB=new fe,Bl=new fe;class UB extends Dx{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Fl,pA,BB),Bl.set(0,0,1).applyQuaternion(pA);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Fl.x,r),t.positionY.linearRampToValueAtTime(Fl.y,r),t.positionZ.linearRampToValueAtTime(Fl.z,r),t.orientationX.linearRampToValueAtTime(Bl.x,r),t.orientationY.linearRampToValueAtTime(Bl.y,r),t.orientationZ.linearRampToValueAtTime(Bl.z,r)}else t.setPosition(Fl.x,Fl.y,Fl.z),t.setOrientation(Bl.x,Bl.y,Bl.z)}}class mA{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class gA{constructor(e,t,r){this.binding=e,this.valueSize=r;let o,l,c;switch(t){case"quaternion":o=this._slerp,l=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:o=this._lerp,l=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,l=e*o+o;let c=this.cumulativeWeight;if(c===0){for(let h=0;h!==o;++h)r[l+h]=r[h];c=t}else{c+=t;const h=t/c;this._mixBufferRegion(r,l,0,h,o)}this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,l=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const m=t*this._origIndex;this._mixBufferRegion(r,o,m,1-l,t)}c>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,v=t+t;m!==v;++m)if(r[m]!==r[m+t]){h.setValue(r,o);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,o=r*this._origIndex;e.getValue(t,o);for(let l=r,c=o;l!==c;++l)t[l]=t[o+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,l){if(o>=.5)for(let c=0;c!==l;++c)e[t+c]=e[r+c]}_slerp(e,t,r,o){Ut.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,l){const c=this._workIndex*l;Ut.multiplyQuaternionsFlat(e,c,e,t,e,r),Ut.slerpFlat(e,t,e,t,e,c,o)}_lerp(e,t,r,o,l){const c=1-o;for(let h=0;h!==l;++h){const m=t+h;e[m]=e[m]*c+e[r+h]*o}}_lerpAdditive(e,t,r,o,l){for(let c=0;c!==l;++c){const h=t+c;e[h]=e[h]+e[r+c]*o}}}const Nx="\\[\\]\\.:\\/",zB=new RegExp("["+Nx+"]","g"),Fx="[^"+Nx+"]",HB="[^"+Nx.replace("\\.","")+"]",GB=/((?:WC+[\/:])*)/.source.replace("WC",Fx),VB=/(WCOD+)?/.source.replace("WCOD",HB),$B=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fx),WB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fx),jB=new RegExp("^"+GB+VB+$B+WB+"$"),qB=["material","materials","bones"];class XB{constructor(e,t,r){const o=r||en.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,o=this._bindings[r];o!==void 0&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=r.length;o!==l;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class en{constructor(e,t,r){this.path=t,this.parsedPath=r||en.parseTrackName(t),this.node=en.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new en.Composite(e,t,r):new en(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zB,"")}static parseTrackName(e){const t=jB.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=r.nodeName.substring(o+1);qB.indexOf(l)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=l)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(l){for(let c=0;c<l.length;c++){const h=l[c];if(h.name===t||h.uuid===t)return h;const m=r(h.children);if(m)return m}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)e[t++]=r[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,o=t.propertyName;let l=t.propertyIndex;if(e||(e=en.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let v=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let b=0;b<e.length;b++)if(e[b].name===v){v=b;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const c=e[o];if(c===void 0){const v=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+o+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}m=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=l}else c.fromArray!==void 0&&c.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(m=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=o;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}en.Composite=XB;en.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};en.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};en.prototype.GetterByBindingType=[en.prototype._getValue_direct,en.prototype._getValue_array,en.prototype._getValue_arrayElement,en.prototype._getValue_toArray];en.prototype.SetterByBindingTypeAndVersioning=[[en.prototype._setValue_direct,en.prototype._setValue_direct_setNeedsUpdate,en.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[en.prototype._setValue_array,en.prototype._setValue_array_setNeedsUpdate,en.prototype._setValue_array_setMatrixWorldNeedsUpdate],[en.prototype._setValue_arrayElement,en.prototype._setValue_arrayElement_setNeedsUpdate,en.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[en.prototype._setValue_fromArray,en.prototype._setValue_fromArray_setNeedsUpdate,en.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vA{constructor(){this.uuid=ki(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,o=arguments.length;r!==o;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,o=this._parsedPaths,l=this._bindings,c=l.length;let h,m=e.length,v=this.nCachedObjects_;for(let b=0,T=arguments.length;b!==T;++b){const L=arguments[b],P=L.uuid;let O=t[P];if(O===void 0){O=m++,t[P]=O,e.push(L);for(let z=0,G=c;z!==G;++z)l[z].push(new en(L,r[z],o[z]))}else if(O<v){h=e[O];const z=--v,G=e[z];t[G.uuid]=O,e[O]=G,t[P]=z,e[z]=L;for(let k=0,A=c;k!==A;++k){const N=l[k],I=N[z];let B=N[O];N[O]=I,B===void 0&&(B=new en(L,r[k],o[k])),N[z]=B}}else e[O]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=v}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const m=arguments[c],v=m.uuid,b=t[v];if(b!==void 0&&b>=l){const T=l++,L=e[T];t[L.uuid]=b,e[b]=L,t[v]=T,e[T]=m;for(let P=0,O=o;P!==O;++P){const z=r[P],G=z[T],k=z[b];z[b]=G,z[T]=k}}}this.nCachedObjects_=l}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_,c=e.length;for(let h=0,m=arguments.length;h!==m;++h){const v=arguments[h],b=v.uuid,T=t[b];if(T!==void 0)if(delete t[b],T<l){const L=--l,P=e[L],O=--c,z=e[O];t[P.uuid]=T,e[T]=P,t[z.uuid]=L,e[L]=z,e.pop();for(let G=0,k=o;G!==k;++G){const A=r[G],N=A[L],I=A[O];A[T]=N,A[L]=I,A.pop()}}else{const L=--c,P=e[L];L>0&&(t[P.uuid]=T),e[T]=P,e.pop();for(let O=0,z=o;O!==z;++O){const G=r[O];G[T]=G[L],G.pop()}}}this.nCachedObjects_=l}subscribe_(e,t){const r=this._bindingsIndicesByPath;let o=r[e];const l=this._bindings;if(o!==void 0)return l[o];const c=this._paths,h=this._parsedPaths,m=this._objects,v=m.length,b=this.nCachedObjects_,T=new Array(v);o=l.length,r[e]=o,c.push(e),h.push(t),l.push(T);for(let L=b,P=m.length;L!==P;++L){const O=m[L];T[L]=new en(O,e,t)}return T}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const o=this._paths,l=this._parsedPaths,c=this._bindings,h=c.length-1,m=c[h],v=e[h];t[v]=r,c[r]=m,c.pop(),l[r]=l[h],l.pop(),o[r]=o[h],o.pop()}}}vA.prototype.isAnimationObjectGroup=!0;class YB{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const l=t.tracks,c=l.length,h=new Array(c),m={endingStart:ul,endingEnd:ul};for(let v=0;v!==c;++v){const b=l[v].createInterpolant(null);h[v]=b,b.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=KM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,l=e._clip.duration,c=l/o,h=o/l;e.warp(1,c,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,l=o.time,c=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,v=h.sampleValues;return m[0]=l,m[1]=l+r,v[0]=e/c,v[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const m=(e-l)*r;if(m<0||r===0)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const c=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case yy:for(let b=0,T=m.length;b!==T;++b)m[b].evaluate(c),v[b].accumulateAdditive(h);break;case qp:default:for(let b=0,T=m.length;b!==T;++b)m[b].evaluate(c),v[b].accumulate(o,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,l=this._loopCount;const c=r===ZM;if(e===0)return l===-1?o:c&&(l&1)==1?t-o:o;if(r===YM){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,l+=Math.abs(h);const m=this.repetitions-l;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const v=e<0;this._setEndings(v,!v,c)}else this._setEndings(!1,!1,c);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(c&&(l&1)==1)return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=cl,o.endingEnd=cl):(e?o.endingStart=this.zeroSlopeAtStart?cl:ul:o.endingStart=hh,t?o.endingEnd=this.zeroSlopeAtEnd?cl:ul:o.endingEnd=hh)}_scheduleFading(e,t,r){const o=this._mixer,l=o.time;let c=this._weightInterpolant;c===null&&(c=o._lendControlInterpolant(),this._weightInterpolant=c);const h=c.parameterPositions,m=c.sampleValues;return h[0]=l,m[0]=t,h[1]=l+e,m[1]=r,this}}class yA extends Ko{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,l=o.length,c=e._propertyBindings,h=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let b=v[m];b===void 0&&(b={},v[m]=b);for(let T=0;T!==l;++T){const L=o[T],P=L.name;let O=b[P];if(O!==void 0)c[T]=O;else{if(O=c[T],O!==void 0){O._cacheIndex===null&&(++O.referenceCount,this._addInactiveBinding(O,m,P));continue}const z=t&&t._propertyBindings[T].binding.parsedPath;O=new gA(en.create(r,P,z),L.ValueTypeName,L.getValueSize()),++O.referenceCount,this._addInactiveBinding(O,m,P),c[T]=O}h[T].resultBuffer=O.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];l.useCount++==0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.useCount==0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,l=this._actionsByClip;let c=l[t];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=c;else{const h=c.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),c.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,c=this._actionsByClip,h=c[l],m=h.knownActions,v=m[m.length-1],b=e._byClipCacheIndex;v._byClipCacheIndex=b,m[b]=v,m.pop(),e._byClipCacheIndex=null;const T=h.actionByRoot,L=(e._localRoot||this._root).uuid;delete T[L],m.length===0&&delete c[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.referenceCount==0&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,l=this._bindings;let c=o[t];c===void 0&&(c={},o[t]=c),c[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,l=r.path,c=this._bindingsByRootAndName,h=c[o],m=t[t.length-1],v=e._cacheIndex;m._cacheIndex=v,t[v]=m,t.pop(),delete h[l],Object.keys(h).length===0&&delete c[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Mx(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=t[o];e.__cacheIndex=o,t[o]=e,l.__cacheIndex=r,t[r]=l}clipAction(e,t,r){const o=t||this._root,l=o.uuid;let c=typeof e=="string"?Pl.findByName(o,e):e;const h=c!==null?c.uuid:e,m=this._actionsByClip[h];let v=null;if(r===void 0&&(c!==null?r=c.blendMode:r=qp),m!==void 0){const T=m.actionByRoot[l];if(T!==void 0&&T.blendMode===r)return T;v=m.knownActions[0],c===null&&(c=v._clip)}if(c===null)return null;const b=new YB(this,c,t,r);return this._bindAction(b,v),this._addInactiveAction(b,h,l),b}existingAction(e,t){const r=t||this._root,o=r.uuid,l=typeof e=="string"?Pl.findByName(r,e):e,c=l?l.uuid:e,h=this._actionsByClip[c];return h!==void 0&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,o=this.time+=e,l=Math.sign(e),c=this._accuIndex^=1;for(let v=0;v!==r;++v)t[v]._update(o,e,l,c);const h=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)h[v].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,l=o[r];if(l!==void 0){const c=l.knownActions;for(let h=0,m=c.length;h!==m;++h){const v=c[h];this._deactivateAction(v);const b=v._cacheIndex,T=t[t.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,T._cacheIndex=b,t[b]=T,t.pop(),this._removeInactiveBindingsForAction(v)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const c in r){const h=r[c].actionByRoot,m=h[t];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const o=this._bindingsByRootAndName,l=o[t];if(l!==void 0)for(const c in l){const h=l[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}yA.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class tg{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new tg(this.value.clone===void 0?this.value:this.value.clone())}}class xA extends aa{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}xA.prototype.isInstancedInterleavedBuffer=!0;class wA{constructor(e,t,r,o,l){this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=o,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}wA.prototype.isGLBufferAttribute=!0;class KB{constructor(e,t,r=0,o=1/0){this.ray=new ea(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new im,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Bx(e,this,r,t),r.sort(_A),r}intersectObjects(e,t=!0,r=[]){for(let o=0,l=e.length;o<l;o++)Bx(e[o],this,r,t);return r.sort(_A),r}}function _A(i,e){return i.distance-e.distance}function Bx(i,e,t,r){if(i.layers.test(e.layers)&&i.raycast(e,t),r===!0){const o=i.children;for(let l=0,c=o.length;l<c;l++)Bx(o[l],e,t,!0)}}class ZB{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Nr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QB{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const bA=new We;class Ac{constructor(e=new We(1/0,1/0),t=new We(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=bA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return bA.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ac.prototype.isBox2=!0;const SA=new fe,ng=new fe;class MA{constructor(e=new fe,t=new fe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){SA.subVectors(e,this.start),ng.subVectors(this.end,this.start);const r=ng.dot(ng);let l=ng.dot(SA)/r;return t&&(l=Nr(l,0,1)),l}closestPointToPoint(e,t,r){const o=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const TA=new fe;class JB extends Vt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new bt,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,h=1,m=32;c<m;c++,h++){const v=c/m*Math.PI*2,b=h/m*Math.PI*2;o.push(Math.cos(v),Math.sin(v),1,Math.cos(b),Math.sin(b),1)}r.setAttribute("position",new pt(o,3));const l=new Bn({fog:!1,toneMapped:!1});this.cone=new Er(r,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),TA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(TA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ha=new fe,rg=new Qe,Ux=new Qe;class EA extends Er{constructor(e){const t=AA(e),r=new bt,o=[],l=[],c=new Ke(0,0,1),h=new Ke(0,1,0);for(let v=0;v<t.length;v++){const b=t[v];b.parent&&b.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(c.r,c.g,c.b),l.push(h.r,h.g,h.b))}r.setAttribute("position",new pt(o,3)),r.setAttribute("color",new pt(l,3));const m=new Bn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,m);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");Ux.copy(this.root.matrixWorld).invert();for(let l=0,c=0;l<t.length;l++){const h=t[l];h.parent&&h.parent.isBone&&(rg.multiplyMatrices(Ux,h.matrixWorld),ha.setFromMatrixPosition(rg),o.setXYZ(c,ha.x,ha.y,ha.z),rg.multiplyMatrices(Ux,h.parent.matrixWorld),ha.setFromMatrixPosition(rg),o.setXYZ(c+1,ha.x,ha.y,ha.z),c+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function AA(i){const e=[];i&&i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,AA(i.children[t]));return e}class eU extends Fn{constructor(e,t,r){const o=new El(t,4,2),l=new qr({wireframe:!0,fog:!1,toneMapped:!1});super(o,l);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tU=new fe,CA=new Ke,LA=new Ke;class nU extends Vt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const o=new Ml(t);o.rotateY(Math.PI*.5),this.material=new qr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=o.getAttribute("position"),c=new Float32Array(l.count*3);o.setAttribute("color",new Ot(c,3)),this.add(new Fn(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");CA.copy(this.light.color),LA.copy(this.light.groundColor);for(let r=0,o=t.count;r<o;r++){const l=r<o/2?CA:LA;t.setXYZ(r,l.r,l.g,l.b)}t.needsUpdate=!0}e.lookAt(tU.setFromMatrixPosition(this.light.matrixWorld).negate())}}class RA extends Er{constructor(e=10,t=10,r=4473924,o=8947848){r=new Ke(r),o=new Ke(o);const l=t/2,c=e/t,h=e/2,m=[],v=[];for(let L=0,P=0,O=-h;L<=t;L++,O+=c){m.push(-h,0,O,h,0,O),m.push(O,0,-h,O,0,h);const z=L===l?r:o;z.toArray(v,P),P+=3,z.toArray(v,P),P+=3,z.toArray(v,P),P+=3,z.toArray(v,P),P+=3}const b=new bt;b.setAttribute("position",new pt(m,3)),b.setAttribute("color",new pt(v,3));const T=new Bn({vertexColors:!0,toneMapped:!1});super(b,T);this.type="GridHelper"}}class rU extends Er{constructor(e=10,t=16,r=8,o=64,l=4473924,c=8947848){l=new Ke(l),c=new Ke(c);const h=[],m=[];for(let T=0;T<=t;T++){const L=T/t*(Math.PI*2),P=Math.sin(L)*e,O=Math.cos(L)*e;h.push(0,0,0),h.push(P,0,O);const z=T&1?l:c;m.push(z.r,z.g,z.b),m.push(z.r,z.g,z.b)}for(let T=0;T<=r;T++){const L=T&1?l:c,P=e-e/r*T;for(let O=0;O<o;O++){let z=O/o*(Math.PI*2),G=Math.sin(z)*P,k=Math.cos(z)*P;h.push(G,0,k),m.push(L.r,L.g,L.b),z=(O+1)/o*(Math.PI*2),G=Math.sin(z)*P,k=Math.cos(z)*P,h.push(G,0,k),m.push(L.r,L.g,L.b)}}const v=new bt;v.setAttribute("position",new pt(h,3)),v.setAttribute("color",new pt(m,3));const b=new Bn({vertexColors:!0,toneMapped:!1});super(v,b);this.type="PolarGridHelper"}}const IA=new fe,ig=new fe,PA=new fe;class iU extends Vt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let o=new bt;o.setAttribute("position",new pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const l=new Bn({fog:!1,toneMapped:!1});this.lightPlane=new Yi(o,l),this.add(this.lightPlane),o=new bt,o.setAttribute("position",new pt([0,0,0,0,0,1],3)),this.targetLine=new Yi(o,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){IA.setFromMatrixPosition(this.light.matrixWorld),ig.setFromMatrixPosition(this.light.target.matrixWorld),PA.subVectors(ig,IA),this.lightPlane.lookAt(ig),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ig),this.targetLine.scale.z=PA.length()}}const sg=new fe,Yn=new wh;class sU extends Er{constructor(e){const t=new bt,r=new Bn({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],c={},h=new Ke(16755200),m=new Ke(16711680),v=new Ke(43775),b=new Ke(16777215),T=new Ke(3355443);L("n1","n2",h),L("n2","n4",h),L("n4","n3",h),L("n3","n1",h),L("f1","f2",h),L("f2","f4",h),L("f4","f3",h),L("f3","f1",h),L("n1","f1",h),L("n2","f2",h),L("n3","f3",h),L("n4","f4",h),L("p","n1",m),L("p","n2",m),L("p","n3",m),L("p","n4",m),L("u1","u2",v),L("u2","u3",v),L("u3","u1",v),L("c","t",b),L("p","c",T),L("cn1","cn2",T),L("cn3","cn4",T),L("cf1","cf2",T),L("cf3","cf4",T);function L(O,z,G){P(O,G),P(z,G)}function P(O,z){o.push(0,0,0),l.push(z.r,z.g,z.b),c[O]===void 0&&(c[O]=[]),c[O].push(o.length/3-1)}t.setAttribute("position",new pt(o,3)),t.setAttribute("color",new pt(l,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,o=1;Yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),sr("c",t,e,Yn,0,0,-1),sr("t",t,e,Yn,0,0,1),sr("n1",t,e,Yn,-r,-o,-1),sr("n2",t,e,Yn,r,-o,-1),sr("n3",t,e,Yn,-r,o,-1),sr("n4",t,e,Yn,r,o,-1),sr("f1",t,e,Yn,-r,-o,1),sr("f2",t,e,Yn,r,-o,1),sr("f3",t,e,Yn,-r,o,1),sr("f4",t,e,Yn,r,o,1),sr("u1",t,e,Yn,r*.7,o*1.1,-1),sr("u2",t,e,Yn,-r*.7,o*1.1,-1),sr("u3",t,e,Yn,0,o*2,-1),sr("cf1",t,e,Yn,-r,0,1),sr("cf2",t,e,Yn,r,0,1),sr("cf3",t,e,Yn,0,-o,1),sr("cf4",t,e,Yn,0,o,1),sr("cn1",t,e,Yn,-r,0,-1),sr("cn2",t,e,Yn,r,0,-1),sr("cn3",t,e,Yn,0,-o,-1),sr("cn4",t,e,Yn,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function sr(i,e,t,r,o,l,c){sg.set(o,l,c).unproject(r);const h=e[i];if(h!==void 0){const m=t.getAttribute("position");for(let v=0,b=h.length;v<b;v++)m.setXYZ(h[v],sg.x,sg.y,sg.z)}}const og=new xi;class kA extends Er{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),l=new bt;l.setIndex(new Ot(r,1)),l.setAttribute("position",new Ot(o,3));super(l,new Bn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&og.setFromObject(this.object),og.isEmpty())return;const t=og.min,r=og.max,o=this.geometry.attributes.position,l=o.array;l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=t.x,l[4]=r.y,l[5]=r.z,l[6]=t.x,l[7]=t.y,l[8]=r.z,l[9]=r.x,l[10]=t.y,l[11]=r.z,l[12]=r.x,l[13]=r.y,l[14]=t.z,l[15]=t.x,l[16]=r.y,l[17]=t.z,l[18]=t.x,l[19]=t.y,l[20]=t.z,l[21]=r.x,l[22]=t.y,l[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Er.prototype.copy.call(this,e),this.object=e.object,this}}class oU extends Er{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new bt;l.setIndex(new Ot(r,1)),l.setAttribute("position",new pt(o,3));super(l,new Bn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class aU extends Yi{constructor(e,t=1,r=16776960){const o=r,l=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],c=new bt;c.setAttribute("position",new pt(l,3)),c.computeBoundingSphere();super(c,new Bn({color:o,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],m=new bt;m.setAttribute("position",new pt(h,3)),m.computeBoundingSphere(),this.add(new Fn(m,new qr({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?qn:qo,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const OA=new fe;let ag,zx;class lU extends Vt{constructor(e=new fe(0,0,1),t=new fe(0,0,0),r=1,o=16776960,l=r*.2,c=l*.2){super();this.type="ArrowHelper",ag===void 0&&(ag=new bt,ag.setAttribute("position",new pt([0,0,0,0,1,0],3)),zx=new ca(0,.5,1,5,1),zx.translate(0,-.5,0)),this.position.copy(t),this.line=new Yi(ag,new Bn({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(zx,new qr({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,l,c)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{OA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(OA,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class DA extends Er{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new bt;o.setAttribute("position",new pt(t,3)),o.setAttribute("color",new pt(r,3));const l=new Bn({vertexColors:!0,toneMapped:!1});super(o,l);this.type="AxesHelper"}setColors(e,t,r){const o=new Ke,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(t),o.toArray(l,6),o.toArray(l,9),o.set(r),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uU{constructor(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Oh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,l,c){return this.currentPath.bezierCurveTo(e,t,r,o,l,c),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(A){const N=[];for(let I=0,B=A.length;I<B;I++){const V=A[I],X=new Bs;X.curves=V.curves,N.push(X)}return N}function o(A,N){const I=N.length;let B=!1;for(let V=I-1,X=0;X<I;V=X++){let Q=N[V],ae=N[X],le=ae.x-Q.x,he=ae.y-Q.y;if(Math.abs(he)>Number.EPSILON){if(he<0&&(Q=N[X],le=-le,ae=N[V],he=-he),A.y<Q.y||A.y>ae.y)continue;if(A.y===Q.y){if(A.x===Q.x)return!0}else{const re=he*(A.x-Q.x)-le*(A.y-Q.y);if(re===0)return!0;if(re<0)continue;B=!B}}else{if(A.y!==Q.y)continue;if(ae.x<=A.x&&A.x<=Q.x||Q.x<=A.x&&A.x<=ae.x)return!0}}return B}const l=Us.isClockWise,c=this.subPaths;if(c.length===0)return[];if(t===!0)return r(c);let h,m,v;const b=[];if(c.length===1)return m=c[0],v=new Bs,v.curves=m.curves,b.push(v),b;let T=!l(c[0].getPoints());T=e?!T:T;const L=[],P=[];let O=[],z=0,G;P[z]=void 0,O[z]=[];for(let A=0,N=c.length;A<N;A++)m=c[A],G=m.getPoints(),h=l(G),h=e?!h:h,h?(!T&&P[z]&&z++,P[z]={s:new Bs,p:G},P[z].s.curves=m.curves,T&&z++,O[z]=[]):O[z].push({h:m,p:G[0]});if(!P[0])return r(c);if(P.length>1){let A=!1;const N=[];for(let I=0,B=P.length;I<B;I++)L[I]=[];for(let I=0,B=P.length;I<B;I++){const V=O[I];for(let X=0;X<V.length;X++){const Q=V[X];let ae=!0;for(let le=0;le<P.length;le++)o(Q.p,P[le].p)&&(I!==le&&N.push({froms:I,tos:le,hole:X}),ae?(ae=!1,L[le].push(Q)):A=!0);ae&&L[I].push(Q)}}N.length>0&&(A||(O=L))}let k;for(let A=0,N=P.length;A<N;A++){v=P[A].s,b.push(v),k=O[A];for(let I=0,B=k.length;I<B;I++)v.holes.push(k[I].h)}return b}}const NA=new Float32Array(1),cU=new Int32Array(NA.buffer);class fU{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),NA[0]=e;const t=cU[0];let r=t>>16&32768,o=t>>12&2047;const l=t>>23&255;return l<103?r:l>142?(r|=31744,r|=(l==255?0:1)&&t&8388607,r):l<113?(o|=2048,r|=(o>>114-l)+(o>>113-l&1),r):(r|=l-112<<10|o>>1,r+=o&1,r)}}const hU=0,dU=1,pU=0,mU=1,gU=2;function vU(i){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),i}function yU(i=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),i.isMultiMaterial=!0,i.materials=i,i.clone=function(){return i.slice()},i}function xU(i,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new hc(i,e)}function wU(i){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Pm(i)}function _U(i,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new hc(i,e)}function bU(i){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ua(i)}function SU(i){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ua(i)}function MU(i){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ua(i)}function TU(i,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new fe(i,e,t)}function EU(i,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ot(i,e).setUsage(fl)}function AU(i,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new xT(i,e)}function CU(i,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new wT(i,e)}function LU(i,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new _T(i,e)}function RU(i,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new bT(i,e)}function IU(i,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new yh(i,e)}function PU(i,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ST(i,e)}function kU(i,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new lm(i,e)}function OU(i,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new pt(i,e)}function DU(i,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new TT(i,e)}_i.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(_i.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i};Oh.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)};function NU(i){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new DA(i)}function FU(i,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new kA(i,e)}function BU(i,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Er(new ax(i.geometry),new Bn({color:e!==void 0?e:16777215}))}RA.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};EA.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function UU(i,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Er(new yx(i.geometry),new Bn({color:e!==void 0?e:16777215}))}Br.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),bi.extractUrlBase(i)};Br.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function zU(i){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fi(i)}function HU(i){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new XE(i)}Ac.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)};Ac.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ac.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};Ac.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)};xi.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)};xi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};xi.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};xi.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};xi.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)};co.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};_h.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)};MA.prototype.center=function(i){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(i)};vn.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};vn.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};vn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};vn.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};vn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};vn.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};Qe.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)};Qe.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};Qe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new fe().setFromMatrixColumn(this,3)};Qe.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)};Qe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Qe.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Qe.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Qe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Qe.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)};Qe.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Qe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Qe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Qe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Qe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Qe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Qe.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};Qe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Qe.prototype.makeFrustum=function(i,e,t,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,r,t,o,l)};Qe.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};Ds.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)};Ut.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)};Ut.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};ea.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};ea.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)};ea.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};nr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};nr.prototype.barycoordFromPoint=function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)};nr.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)};nr.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)};nr.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)};nr.barycoordFromPoint=function(i,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),nr.getBarycoord(i,e,t,r,o)};nr.normal=function(i,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),nr.getNormal(i,e,t,r)};Bs.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)};Bs.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new zs(this,i)};Bs.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Tl(this,i)};We.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};We.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};We.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};fe.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};fe.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};fe.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)};fe.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)};fe.prototype.getColumnFromMatrix=function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)};fe.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)};fe.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};fe.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};fe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};an.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};an.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Vt.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)};Vt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Vt.prototype.translate=function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)};Vt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Vt.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(Vt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Fn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Fn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),QM},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});wl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};dr.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(i)};Object.defineProperties(ws.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}});Object.defineProperties(Ot.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===fl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(fl)}}});Ot.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?fl:zu),this};Ot.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ot.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};bt.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)};bt.prototype.addAttribute=function(i,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new Ot(arguments[1],arguments[2]))):i==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(i,e)};bt.prototype.addDrawCall=function(i,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)};bt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};bt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};bt.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)};bt.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(bt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});aa.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?fl:zu),this};aa.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};zs.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};zs.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};zs.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Cm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};tg.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(rr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ke}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===ey}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Os.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}});yn.prototype.clearTarget=function(i,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,r)};yn.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)};yn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};yn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};yn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};yn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};yn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};yn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};yn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};yn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};yn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};yn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};yn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};yn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};yn.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)};yn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};yn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};yn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};yn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};yn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};yn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};yn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};yn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};yn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};yn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(yn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=i===!0?Or:li}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(aE.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function GU(i,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new ym(i,t)}Object.defineProperties(Oi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}});Dx.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new oA().load(i,function(r){e.setBuffer(r)}),this};mA.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};vm.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)};vm.prototype.clear=function(i,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,e,t,r)};dl.crossOrigin=void 0;dl.loadTexture=function(i,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new Qm;o.setCrossOrigin(this.crossOrigin);const l=o.load(i,t,void 0,r);return e&&(l.mapping=e),l};dl.loadTextureCube=function(i,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new qE;o.setCrossOrigin(this.crossOrigin);const l=o.load(i,t,void 0,r);return e&&(l.mapping=e),l};dl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};dl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function VU(){console.error("THREE.CanvasRenderer has been removed")}function $U(){console.error("THREE.JSONLoader has been removed.")}const WU={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function jU(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function qU(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new bt}function XU(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new bt}function YU(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function KU(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function ZU(){console.error("THREE.ImmediateRenderObject has been removed.")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qi}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=qi);var YG=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:nM,AddEquation:rl,AddOperation:QS,AdditiveAnimationBlendMode:yy,AdditiveBlending:ty,AlphaFormat:cM,AlwaysDepth:WS,AlwaysStencilFunc:rT,AmbientLight:Jm,AmbientLightProbe:lA,AnimationClip:Pl,AnimationLoader:IB,AnimationMixer:yA,AnimationObjectGroup:vA,AnimationUtils:Rn,ArcCurve:lx,ArrayCamera:Jy,ArrowHelper:lU,Audio:Dx,AudioAnalyser:mA,AudioContext:Ox,AudioListener:FB,AudioLoader:oA,AxesHelper:DA,AxisHelper:NU,BackSide:qn,BasicDepthPacking:eT,BasicShadowMap:OP,BinaryTextureLoader:HU,Bone:_l,BooleanKeyframeTrack:Cl,BoundingBoxHelper:FU,Box2:Ac,Box3:xi,Box3Helper:oU,BoxBufferGeometry:go,BoxGeometry:go,BoxHelper:kA,BufferAttribute:Ot,BufferGeometry:bt,BufferGeometryLoader:rA,ByteType:iM,Cache:kl,Camera:wh,CameraHelper:sU,CanvasRenderer:VU,CanvasTexture:IE,CatmullRomCurve3:dx,CineonToneMapping:tM,CircleBufferGeometry:dc,CircleGeometry:dc,ClampToEdgeWrapping:hr,Clock:fA,Color:Ke,ColorKeyframeTrack:Tx,CompressedTexture:sx,CompressedTextureLoader:PB,ConeBufferGeometry:pc,ConeGeometry:pc,CubeCamera:vm,CubeReflectionMapping:il,CubeRefractionMapping:sl,CubeTexture:tc,CubeTextureLoader:qE,CubeUVReflectionMapping:Nu,CubeUVRefractionMapping:lh,CubicBezierCurve:$m,CubicBezierCurve3:px,CubicInterpolant:VE,CullFaceBack:Qv,CullFaceFront:RS,CullFaceFrontBack:kP,CullFaceNone:LS,Curve:_i,CurvePath:OE,CustomBlending:PS,CustomToneMapping:rM,CylinderBufferGeometry:ca,CylinderGeometry:ca,Cylindrical:QB,DataTexture:bl,DataTexture2DArray:Sm,DataTexture3D:Ky,DataTextureLoader:XE,DataUtils:fU,DecrementStencilOp:VP,DecrementWrapStencilOp:WP,DefaultLoadingManager:jE,DepthFormat:Yo,DepthStencilFormat:al,DepthTexture:Am,DirectionalLight:zh,DirectionalLightHelper:iU,DiscreteInterpolant:$E,DodecahedronBufferGeometry:mc,DodecahedronGeometry:mc,DoubleSide:Is,DstAlphaFactor:US,DstColorFactor:HS,DynamicBufferAttribute:EU,DynamicCopyUsage:sk,DynamicDrawUsage:fl,DynamicReadUsage:nk,EdgesGeometry:ax,EdgesHelper:BU,EllipseCurve:Rh,EqualDepth:qS,EqualStencilFunc:YP,EquirectangularReflectionMapping:Du,EquirectangularRefractionMapping:ah,Euler:wi,EventDispatcher:Ko,ExtrudeBufferGeometry:zs,ExtrudeGeometry:zs,FaceColors:mU,FileLoader:Fi,FlatShading:ey,Float16BufferAttribute:MT,Float32Attribute:OU,Float32BufferAttribute:pt,Float64Attribute:DU,Float64BufferAttribute:TT,FloatType:ks,Fog:Th,FogExp2:Mh,Font:KU,FontLoader:YU,FramebufferTexture:RE,FrontSide:qo,Frustum:_h,GLBufferAttribute:wA,GLSL1:ak,GLSL3:wy,GreaterDepth:YS,GreaterEqualDepth:XS,GreaterEqualStencilFunc:JP,GreaterStencilFunc:ZP,GridHelper:RA,Group:Fr,HalfFloatType:Xo,HemisphereLight:Ax,HemisphereLightHelper:nU,HemisphereLightProbe:aA,IcosahedronBufferGeometry:vc,IcosahedronGeometry:vc,ImageBitmapLoader:kx,ImageLoader:Tc,ImageUtils:dl,ImmediateRenderObject:ZU,IncrementStencilOp:GP,IncrementWrapStencilOp:$P,InstancedBufferAttribute:Sl,InstancedBufferGeometry:Px,InstancedInterleavedBuffer:xA,InstancedMesh:nx,Int16Attribute:RU,Int16BufferAttribute:bT,Int32Attribute:PU,Int32BufferAttribute:ST,Int8Attribute:AU,Int8BufferAttribute:xT,IntType:oM,InterleavedBuffer:aa,InterleavedBufferAttribute:vo,Interpolant:Hs,InterpolateDiscrete:Uu,InterpolateLinear:ll,InterpolateSmooth:jp,InvertStencilOp:jP,JSONLoader:$U,KeepStencilOp:Xp,KeyframeTrack:xs,LOD:pE,LatheBufferGeometry:yc,LatheGeometry:yc,Layers:im,LensFlare:jU,LessDepth:jS,LessEqualDepth:Vp,LessEqualStencilFunc:KP,LessStencilFunc:XP,Light:ws,LightProbe:Hh,Line:Yi,Line3:MA,LineBasicMaterial:Bn,LineCurve:kh,LineCurve3:kE,LineDashedMaterial:Sx,LineLoop:Fm,LinePieces:dU,LineSegments:Er,LineStrip:hU,LinearEncoding:li,LinearFilter:Dn,LinearInterpolant:Mx,LinearMipMapLinearFilter:UP,LinearMipMapNearestFilter:BP,LinearMipmapLinearFilter:oo,LinearMipmapNearestFilter:Wp,LinearToneMapping:JS,Loader:Br,LoaderUtils:bi,LoadingManager:Ex,LoopOnce:YM,LoopPingPong:ZM,LoopRepeat:KM,LuminanceAlphaFormat:hM,LuminanceFormat:fM,MOUSE:IP,Material:rr,MaterialLoader:nA,Math:yi,MathUtils:yi,Matrix3:vn,Matrix4:Qe,MaxEquation:sy,Mesh:Fn,MeshBasicMaterial:qr,MeshDepthMaterial:Tm,MeshDistanceMaterial:Em,MeshFaceMaterial:vU,MeshLambertMaterial:Zm,MeshMatcapMaterial:bx,MeshNormalMaterial:_x,MeshPhongMaterial:Mc,MeshPhysicalMaterial:yo,MeshStandardMaterial:Al,MeshToonMaterial:wx,MinEquation:iy,MirroredRepeatWrapping:Fu,MixOperation:ZS,MultiMaterial:yU,MultiplyBlending:ry,MultiplyOperation:oh,NearestFilter:Xn,NearestMipMapLinearFilter:FP,NearestMipMapNearestFilter:NP,NearestMipmapLinearFilter:ch,NearestMipmapNearestFilter:uh,NeverDepth:$S,NeverStencilFunc:qP,NoBlending:io,NoColors:pU,NoToneMapping:so,NormalAnimationBlendMode:qp,NormalBlending:Ou,NotEqualDepth:KS,NotEqualStencilFunc:QP,NumberKeyframeTrack:Ll,Object3D:Vt,ObjectLoader:kB,ObjectSpaceNormalMap:nT,OctahedronBufferGeometry:Ml,OctahedronGeometry:Ml,OneFactor:NS,OneMinusDstAlphaFactor:zS,OneMinusDstColorFactor:GS,OneMinusSrcAlphaFactor:ay,OneMinusSrcColorFactor:BS,OrthographicCamera:vl,PCFShadowMap:Jv,PCFSoftShadowMap:IS,PMREMGenerator:kT,ParametricGeometry:qU,Particle:wU,ParticleBasicMaterial:SU,ParticleSystem:_U,ParticleSystemMaterial:MU,Path:Oh,PerspectiveCamera:dr,Plane:Ds,PlaneBufferGeometry:gl,PlaneGeometry:gl,PlaneHelper:aU,PointCloud:xU,PointCloudMaterial:bU,PointLight:Ec,PointLightHelper:eU,Points:hc,PointsMaterial:ua,PolarGridHelper:rU,PolyhedronBufferGeometry:Fs,PolyhedronGeometry:Fs,PositionalAudio:UB,PropertyBinding:en,PropertyMixer:gA,QuadraticBezierCurve:Wm,QuadraticBezierCurve3:jm,Quaternion:Ut,QuaternionKeyframeTrack:xo,QuaternionLinearInterpolant:WE,REVISION:qi,RGBADepthPacking:tT,RGBAFormat:tr,RGBAIntegerFormat:yM,RGBA_ASTC_10x10_Format:IM,RGBA_ASTC_10x5_Format:CM,RGBA_ASTC_10x6_Format:LM,RGBA_ASTC_10x8_Format:RM,RGBA_ASTC_12x10_Format:PM,RGBA_ASTC_12x12_Format:kM,RGBA_ASTC_4x4_Format:wM,RGBA_ASTC_5x4_Format:_M,RGBA_ASTC_5x5_Format:bM,RGBA_ASTC_6x5_Format:SM,RGBA_ASTC_6x6_Format:MM,RGBA_ASTC_8x5_Format:TM,RGBA_ASTC_8x6_Format:EM,RGBA_ASTC_8x8_Format:AM,RGBA_BPTC_Format:OM,RGBA_ETC2_EAC_Format:vy,RGBA_PVRTC_2BPPV1_Format:my,RGBA_PVRTC_4BPPV1_Format:py,RGBA_S3TC_DXT1_Format:uy,RGBA_S3TC_DXT3_Format:cy,RGBA_S3TC_DXT5_Format:fy,RGBFormat:ao,RGBIntegerFormat:vM,RGB_ETC1_Format:xM,RGB_ETC2_Format:gy,RGB_PVRTC_2BPPV1_Format:dy,RGB_PVRTC_4BPPV1_Format:hy,RGB_S3TC_DXT1_Format:ly,RGFormat:mM,RGIntegerFormat:gM,RawShaderMaterial:rc,Ray:ea,Raycaster:KB,RectAreaLight:Rx,RedFormat:dM,RedIntegerFormat:pM,ReinhardToneMapping:eM,RepeatWrapping:Ps,ReplaceStencilOp:HP,ReverseSubtractEquation:OS,RingBufferGeometry:xc,RingGeometry:xc,SRGB8_ALPHA8_ASTC_10x10_Format:jM,SRGB8_ALPHA8_ASTC_10x5_Format:VM,SRGB8_ALPHA8_ASTC_10x6_Format:$M,SRGB8_ALPHA8_ASTC_10x8_Format:WM,SRGB8_ALPHA8_ASTC_12x10_Format:qM,SRGB8_ALPHA8_ASTC_12x12_Format:XM,SRGB8_ALPHA8_ASTC_4x4_Format:DM,SRGB8_ALPHA8_ASTC_5x4_Format:NM,SRGB8_ALPHA8_ASTC_5x5_Format:FM,SRGB8_ALPHA8_ASTC_6x5_Format:BM,SRGB8_ALPHA8_ASTC_6x6_Format:UM,SRGB8_ALPHA8_ASTC_8x5_Format:zM,SRGB8_ALPHA8_ASTC_8x6_Format:HM,SRGB8_ALPHA8_ASTC_8x8_Format:GM,Scene:Cm,SceneUtils:WU,ShaderChunk:Jt,ShaderLib:ys,ShaderMaterial:Os,ShadowMaterial:xx,Shape:Bs,ShapeBufferGeometry:Tl,ShapeGeometry:Tl,ShapePath:uU,ShapeUtils:Us,ShortType:sM,Skeleton:la,SkeletonHelper:EA,SkinnedMesh:wl,SmoothShading:DP,Sphere:co,SphereBufferGeometry:El,SphereGeometry:El,Spherical:ZB,SphericalHarmonics3:Ix,SplineCurve:qm,SpotLight:Bh,SpotLightHelper:JB,Sprite:Pm,SpriteMaterial:Lm,SrcAlphaFactor:oy,SrcAlphaSaturateFactor:VS,SrcColorFactor:FS,StaticCopyUsage:ik,StaticDrawUsage:zu,StaticReadUsage:tk,StereoCamera:DB,StreamCopyUsage:ok,StreamDrawUsage:ek,StreamReadUsage:rk,StringKeyframeTrack:Rl,SubtractEquation:kS,SubtractiveBlending:ny,TOUCH:PP,TangentSpaceNormalMap:lo,TetrahedronBufferGeometry:wc,TetrahedronGeometry:wc,TextGeometry:XU,Texture:Nn,TextureLoader:Qm,TorusBufferGeometry:_c,TorusGeometry:_c,TorusKnotBufferGeometry:bc,TorusKnotGeometry:bc,Triangle:nr,TriangleFanDrawMode:xy,TriangleStripDrawMode:JM,TrianglesDrawMode:QM,TubeBufferGeometry:Sc,TubeGeometry:Sc,UVMapping:$p,Uint16Attribute:IU,Uint16BufferAttribute:yh,Uint32Attribute:kU,Uint32BufferAttribute:lm,Uint8Attribute:CU,Uint8BufferAttribute:wT,Uint8ClampedAttribute:LU,Uint8ClampedBufferAttribute:_T,Uniform:tg,UniformsLib:ot,UniformsUtils:$y,UnsignedByteType:ps,UnsignedInt248Type:ol,UnsignedIntType:fh,UnsignedShort4444Type:aM,UnsignedShort5551Type:lM,UnsignedShort565Type:uM,UnsignedShortType:Bu,VSMShadowMap:ku,Vector2:We,Vector3:fe,Vector4:an,VectorKeyframeTrack:Il,Vertex:TU,VertexColors:gU,VideoTexture:LE,WebGL1Renderer:uE,WebGLCubeRenderTarget:ym,WebGLMultipleRenderTargets:aT,WebGLMultisampleRenderTarget:Zp,WebGLRenderTarget:Oi,WebGLRenderTargetCube:GU,WebGLRenderer:yn,WebGLUtils:lE,WireframeGeometry:yx,WireframeHelper:UU,WrapAroundEnding:hh,XHRLoader:zU,ZeroCurvatureEnding:ul,ZeroFactor:DS,ZeroSlopeEnding:cl,ZeroStencilOp:zP,sRGBEncoding:Or});(function(i){typeof define=="function"&&define.amd?define(i):i()})(function(){const i=6406,e=6407,t=6408,r=6409,o=6410,l=6402,c=34041,h=33321,m=36756,v=33325,b=33326,T=33330,L=33329,P=33338,O=33337,z=33340,G=33339,k=33323,A=36757,N=33327,I=33328,B=33336,V=33335,X=33332,Q=33331,ae=33334,le=33333,he=32849,re=35905,ee=36194,_=36758,p=35898,Z=35901,E=34843,ye=34837,Re=36221,Me=36239,pe=36215,ve=36233,Ce=36209,_e=36227,Pe=32856,Te=35907,Oe=36759,ze=32855,He=32854,$=32857,$e=34842,Le=34836,Fe=36220,qe=36238,De=36975,oe=36214,vt=36232,j=36226,Je=36208,Wt=33189,U=33190,n=36012,s=36013,a=35056,f=5121,g=5123,y=5125,S=5126,C=32819,R=32820,D=33635,H=5131,q=36193;let K;function ne(At){if(!K){const it={};it[i]={bytesPerElement:[1,2,2,4],type:[f,H,q,S]},it[r]={bytesPerElement:[1,2,2,4],type:[f,H,q,S]},it[o]={bytesPerElement:[2,4,4,8],type:[f,H,q,S]},it[e]={bytesPerElement:[3,6,6,12,2],type:[f,H,q,S,D]},it[t]={bytesPerElement:[4,8,8,16,2,2],type:[f,H,q,S,C,R]},it[l]={bytesPerElement:[2,4],type:[y,g]},it[c]={bytesPerElement:[4]},it[h]={bytesPerElement:[1]},it[m]={bytesPerElement:[1]},it[v]={bytesPerElement:[2]},it[b]={bytesPerElement:[4]},it[T]={bytesPerElement:[1]},it[L]={bytesPerElement:[1]},it[X]={bytesPerElement:[2]},it[Q]={bytesPerElement:[2]},it[ae]={bytesPerElement:[4]},it[le]={bytesPerElement:[4]},it[k]={bytesPerElement:[2]},it[A]={bytesPerElement:[2]},it[N]={bytesPerElement:[4]},it[I]={bytesPerElement:[8]},it[B]={bytesPerElement:[2]},it[V]={bytesPerElement:[2]},it[P]={bytesPerElement:[4]},it[O]={bytesPerElement:[4]},it[z]={bytesPerElement:[8]},it[G]={bytesPerElement:[8]},it[he]={bytesPerElement:[3]},it[re]={bytesPerElement:[3]},it[ee]={bytesPerElement:[2]},it[_]={bytesPerElement:[3]},it[p]={bytesPerElement:[4]},it[Z]={bytesPerElement:[4]},it[E]={bytesPerElement:[6]},it[ye]={bytesPerElement:[12]},it[Re]={bytesPerElement:[3]},it[Me]={bytesPerElement:[3]},it[pe]={bytesPerElement:[6]},it[ve]={bytesPerElement:[6]},it[Ce]={bytesPerElement:[12]},it[_e]={bytesPerElement:[12]},it[Pe]={bytesPerElement:[4]},it[Te]={bytesPerElement:[4]},it[Oe]={bytesPerElement:[4]},it[ze]={bytesPerElement:[2]},it[He]={bytesPerElement:[2]},it[$]={bytesPerElement:[4]},it[$e]={bytesPerElement:[8]},it[Le]={bytesPerElement:[16]},it[Fe]={bytesPerElement:[4]},it[qe]={bytesPerElement:[4]},it[De]={bytesPerElement:[4]},it[oe]={bytesPerElement:[8]},it[vt]={bytesPerElement:[8]},it[j]={bytesPerElement:[16]},it[Je]={bytesPerElement:[16]},it[Wt]={bytesPerElement:[2]},it[U]={bytesPerElement:[4]},it[n]={bytesPerElement:[4]},it[a]={bytesPerElement:[4]},it[s]={bytesPerElement:[4]},K=it}return K[At]}function te(At,it,bn){return function(Sn,ur,cr){const cs=(Sn+At-1)/At|0,Wi=(ur+it-1)/it|0;return cs*Wi*bn*cr}}function ue(At,it,bn){return function(Sn,ur,cr){return(Math.max(Sn,At)*Math.max(ur,it)/bn|0)*cr}}const ce=33776,ge=33777,Ne=33778,Xe=33779,Ge=36196,St=35840,ct=35841,Mt=35842,dt=35843,mt=37488,wn=37489,Zt=37490,_n=37491,mn=37492,Xt=37493,de=37494,Ae=37495,ke=37496,Ie=37497,be=37808,yt=37809,wt=37810,Lt=37811,xt=37812,jt=37813,Nt=37814,Dt=37815,nn=37816,zn=37817,pi=37818,Yt=37819,rn=37820,et=37821,Hn=37840,Vi=37841,Tn=37842,Gt=37843,gn=37844,ei=37845,mr=37846,je=37847,se=37848,we=37849,Ue=37850,Ye=37851,It=37852,Qt=37853,lt=35916,gr=35917,ti=35918,Oo=35919,$i=new Map([[ce,te(4,4,8)],[ge,te(4,4,8)],[Ne,te(4,4,16)],[Xe,te(4,4,16)],[Ge,te(4,4,8)],[St,ue(8,8,2)],[Mt,ue(8,8,2)],[ct,ue(16,8,4)],[dt,ue(16,8,4)],[mt,te(4,4,8)],[wn,te(4,4,8)],[mn,te(4,4,8)],[Xt,te(4,4,8)],[de,te(4,4,8)],[Ae,te(4,4,8)],[Zt,te(4,4,16)],[_n,te(4,4,16)],[ke,te(4,4,16)],[Ie,te(4,4,16)],[be,te(4,4,16)],[Hn,te(4,4,16)],[yt,te(5,4,16)],[Vi,te(5,4,16)],[wt,te(5,5,16)],[Tn,te(5,5,16)],[Lt,te(6,5,16)],[Gt,te(6,5,16)],[xt,te(6,6,16)],[gn,te(6,6,16)],[jt,te(8,5,16)],[ei,te(8,5,16)],[Nt,te(8,6,16)],[mr,te(8,6,16)],[Dt,te(8,8,16)],[je,te(8,8,16)],[nn,te(10,5,16)],[se,te(10,5,16)],[zn,te(10,6,16)],[we,te(10,6,16)],[pi,te(10,8,16)],[Ue,te(10,8,16)],[Yt,te(10,10,16)],[Ye,te(10,10,16)],[rn,te(12,10,16)],[It,te(12,10,16)],[et,te(12,12,16)],[Qt,te(12,12,16)],[lt,te(4,4,8)],[gr,te(4,4,8)],[ti,te(4,4,16)],[Oo,te(4,4,16)]]);function cp(At,it){const bn=ne(At);if(!bn)throw"unknown internal format";if(bn.type){const Sn=bn.type.indexOf(it);if(Sn<0)throw new Error(`unsupported type ${it} for internalformat ${At}`);return bn.bytesPerElement[Sn]}return bn.bytesPerElement[0]}function fp(At,it,bn,Sn,ur){const cr=cp(At,ur);return it*bn*Sn*cr}function Do(At,it,bn,Sn,ur){const cr=$i.get(At);return cr?cr(it,bn,Sn):fp(At,it,bn,Sn,ur)}function Af(At){return At&&At.buffer&&At.buffer instanceof ArrayBuffer}function hp(At){return Af(At)||At instanceof ArrayBuffer}function Cf(At){return{samples:At.getParameter(At.SAMPLES),depthBits:At.getParameter(At.DEPTH_BITS),contextAttributes:At.getContextAttributes()}}function dp(At,it){const{samples:bn,depthBits:Sn,contextAttributes:ur}=it,{width:cr,height:cs}=At.canvas,Wi=cr*cs*4,Es=ur.depth?1:0,mp=ur.stencil?1:0,Ir=Math.min(mp+Sn>16?4:2,4);return Wi+Wi*bn+Wi*Es*Ir}function pp(At){return typeof At=="number"}function Lf(At,it,bn={}){const Sn=bn.origGLErrorFn||At.getError;function ur(st){const _t=Cf(st),ft={baseContext:st,config:bn,apis:{gman_webgl_memory:{ctx:{getMemoryInfo(){const ut=dp(st,_t);return{memory:Zv(sh({},Ir),{drawingbuffer:ut,total:ut+Ir.buffer+Ir.texture+Ir.renderbuffer}),resources:sh({},No)}}}}},resources:{},memory:{texture:0,buffer:0,renderbuffer:0},bindings:new Map,defaultVertexArray:{},webglObjectToMemory:new Map};return ft.webglObjectToMemory.set(ft.defaultVertexArray,{}),ft.currentVertexArray=ft.defaultVertexArray,ft}const cr=bn.sharedState||ur(At);bn.sharedState=cr;const{apis:cs,baseContext:Wi,bindings:Es,config:mp,memory:Ir,resources:No,webglObjectToMemory:Ri}=cr,If={};function Fo(){}function mi(st,_t,ft){const ut=ft||`create${_t[0].toUpperCase()}${_t.substr(1)}`;if(!!st[ut])return No[_t]=0,function(Tt,Pt,kt,Bt){++No[_t],Ri.set(Bt,{size:0})}}function ni(st,_t=Fo,ft){const ut=ft||`delete${st[0].toUpperCase()}${st.substr(1)}`;if(!!At[ut])return function(Tt,Pt,kt){const[Bt]=kt,Kt=Ri.get(Bt);Kt&&(--No[st],_t(Bt,Kt),Ri.delete(Bt))}}function Ga(st,_t,ft,ut,Tt){const Pt=Es.get(st);if(!Pt)throw new Error(`no renderbuffer bound to ${st}`);const kt=Ri.get(Pt);if(!kt)throw new Error(`unknown renderbuffer ${Pt}`);const Kt=Do(ft,ut,Tt,1)*_t;Ir.renderbuffer-=kt.size,kt.size=Kt,Ir.renderbuffer+=Kt}const Va=34963,$a=5121,Bo=34067,du=35866,Qs=34069,av=34070,gp=34071,Ii=34072,lv=34073,uv=34074,Pf=33084,vp=33085,As=new Set([Qs,av,gp,Ii,lv,uv]);function pu(st){return As.has(st)}function Sr(st){st=pu(st)?Bo:st;const _t=Es.get(st);if(!_t)throw new Error(`no texture bound to ${st}`);const ft=Ri.get(_t);if(!ft)throw new Error(`unknown texture ${_t}`);return ft}function ji(st,_t,ft,ut,Tt,Pt,kt,Bt){const Kt=st.size,hn=Do(ut,Tt,Pt,kt,Bt),Vr=pu(_t)?_t-Qs:0;st.mips=st.mips||[],st.mips[ft]=st.mips[ft]||[];const $r=st.mips[ft][Vr]||{};st.size-=$r.size||0,$r.size=hn,$r.internalFormat=ut,$r.type=Bt,$r.width=Tt,$r.height=Pt,$r.depth=kt,st.mips[ft][Vr]=$r,st.size+=hn,Ir.texture-=Kt,Ir.texture+=st.size}function mu(st,_t,ft,ut,Tt,Pt){const kt=Sr(st),Bt=st===Bo?6:1,Kt=st===Bo?Qs:st;for(let hn=0;hn<_t;++hn){for(let Vr=0;Vr<Bt;++Vr)ji(kt,Kt+Vr,hn,ft,ut,Tt,Pt);ut=Math.ceil(Math.max(ut/2,1)),Tt=Math.ceil(Math.max(Tt/2,1)),Pt=st===du?Pt:Math.ceil(Math.max(Pt/2,1))}}function Js(st,_t,ft){const[ut]=ft;cr.currentVertexArray=ut||cr.defaultVertexArray}function kf(st,_t){switch(st){case Va:const ft=Ri.get(cr.currentVertexArray);ft.elementArrayBuffer=_t;break;default:Es.set(st,_t);break}}const cv={},yp={bufferData(st,_t,ft){const[ut,Tt,,Pt=0,kt=void 0]=ft;let Bt;switch(ut){case Va:Bt=Ri.get(cr.currentVertexArray).elementArrayBuffer;break;default:Bt=Es.get(ut);break}if(!Bt)throw new Error(`no buffer bound to ${ut}`);let Kt=0;if(kt!==void 0)Kt=kt;else if(hp(Tt))Kt=Tt.byteLength;else if(pp(Tt))Kt=Tt;else throw new Error(`unsupported bufferData src type ${Tt}`);const hn=Ri.get(Bt);if(!hn)throw new Error(`unknown buffer ${Bt}`);Ir.buffer-=hn.size,hn.size=Kt,Ir.buffer+=Kt},bindVertexArray:Js,bindVertexArrayOES:Js,bindBuffer(st,_t,ft){const[ut,Tt]=ft;kf(ut,Tt)},bindBufferBase(st,_t,ft){const[ut,Tt,Pt]=ft;kf(ut,Pt)},bindBufferRange(st,_t,ft){const[ut,Tt,Pt,kt,Bt]=ft;kf(ut,Pt)},bindRenderbuffer(st,_t,ft){const[ut,Tt]=ft;Es.set(ut,Tt)},bindTexture(st,_t,ft){const[ut,Tt]=ft;Es.set(ut,Tt)},copyTexImage2D(st,_t,ft){const[ut,Tt,Pt,kt,Bt,Kt,hn,Vr]=ft,$r=Sr(ut);ji($r,ut,Tt,Pt,Kt,hn,1,$a)},createBuffer:mi(At,"buffer"),createFramebuffer:mi(At,"framebuffer"),createRenderbuffer:mi(At,"renderbuffer"),createProgram:mi(At,"program"),createQuery:mi(At,"query"),createShader:mi(At,"shader"),createSampler:mi(At,"sampler"),createTexture:mi(At,"texture"),createTransformFeedback:mi(At,"transformFeedback"),createVertexArray:mi(At,"vertexArray"),createVertexArrayOES:mi(At,"vertexArray","createVertexArrayOES"),compressedTexImage2D(st,_t,ft){const[ut,Tt,Pt,kt,Bt]=ft,Kt=Sr(ut);ji(Kt,ut,Tt,Pt,kt,Bt,1,$a)},compressedTexImage3D(st,_t,ft){const[ut,Tt,Pt,kt,Bt,Kt]=ft,hn=Sr(ut);ji(hn,ut,Tt,Pt,kt,Bt,Kt,$a)},deleteBuffer:ni("buffer",function(st,_t){Ir.buffer-=_t.size}),deleteFramebuffer:ni("framebuffer"),deleteProgram:ni("program"),deleteQuery:ni("query"),deleteRenderbuffer:ni("renderbuffer",function(st,_t){Ir.renderbuffer-=_t.size}),deleteSampler:ni("sampler"),deleteShader:ni("shader"),deleteSync:ni("sync"),deleteTexture:ni("texture",function(st,_t){Ir.texture-=_t.size}),deleteTransformFeedback:ni("transformFeedback"),deleteVertexArray:ni("vertexArray"),deleteVertexArrayOES:ni("vertexArray",Fo,"deleteVertexArrayOES"),fenceSync:function(st){if(!!st.fenceSync)return No.sync=0,function(_t,ft,ut,Tt){++No.sync,Ri.set(Tt,{size:0})}}(At),generateMipmap(st,_t,ft){const[ut]=ft,Tt=Sr(ut),Pt=Tt.parameters&&Tt.parameters.get(Pf)||0,kt=Tt.parameters&&Tt.parameters.get(vp)||1024;let{width:Bt,height:Kt,depth:hn,internalFormat:Vr,type:$r}=Tt.mips[Pt][0],Wa=Pt+1;const ja=ut===Bo?6:1,Qn=ut===Bo?Qs:ut;for(;Wa<=kt&&!(Bt===1&&Kt===1&&(hn===1||ut===du));){Bt=Math.ceil(Math.max(Bt/2,1)),Kt=Math.ceil(Math.max(Kt/2,1)),hn=ut===du?hn:Math.ceil(Math.max(hn/2,1));for(let Of=0;Of<ja;++Of)ji(Tt,Qn+Of,Wa,Vr,Bt,Kt,hn,$r);++Wa}},getSupportedExtensions(st,_t,ft,ut){ut.push("GMAN_webgl_memory")},renderbufferStorage(st,_t,ft){const[ut,Tt,Pt,kt]=ft;Ga(ut,1,Tt,Pt,kt)},renderbufferStorageMultisample(st,_t,ft){const[ut,Tt,Pt,kt,Bt]=ft;Ga(ut,Tt,Pt,kt,Bt)},texImage2D(st,_t,ft){let[ut,Tt,Pt]=ft,kt,Bt,Kt;if(ft.length==6){const Vr=ft[5];kt=Vr.width,Bt=Vr.height,Kt=ft[4]}else kt=ft[3],Bt=ft[4],Kt=ft[7];const hn=Sr(ut);ji(hn,ut,Tt,Pt,kt,Bt,1,Kt)},texImage3D(st,_t,ft){let[ut,Tt,Pt,kt,Bt,Kt,hn,Vr,$r]=ft;const Wa=Sr(ut);ji(Wa,ut,Tt,Pt,kt,Bt,Kt,$r)},texParameteri(st,_t,ft){let[ut,Tt,Pt]=ft;const kt=Sr(ut);kt.parameters=kt.parameters||new Map,kt.parameters.set(Tt,Pt)},texStorage2D(st,_t,ft){let[ut,Tt,Pt,kt,Bt]=ft;mu(ut,Tt,Pt,kt,Bt,1)},texStorage3D(st,_t,ft){let[ut,Tt,Pt,kt,Bt,Kt]=ft;mu(ut,Tt,Pt,kt,Bt,Kt)}},fv={getExtension(st,_t){const ft=st[_t];st[_t]=function(...ut){const Tt=ut[0].toLowerCase(),Pt=cs[Tt];if(Pt)return Pt.ctx;const kt=ft.call(st,...ut);return kt&&Lf(kt,Tt,Zv(sh({},bn),{origGLErrorFn:Sn})),kt}}};function xp(st,_t){const ft=st[_t],ut=cv[_t]||Fo,Tt=yp[_t]||Fo;if(ut===Fo&&yp===Fo)return;st[_t]=function(...kt){ut(st,_t,kt);const Bt=ft.call(st,...kt);return Tt(st,_t,kt,Bt),Bt};const Pt=fv[_t];Pt&&Pt(st,_t,Sn)}for(const st in At)typeof At[st]=="function"&&(If[st]=At[st],xp(At,st));cs[it.toLowerCase()]={ctx:At,origFuncs:If}}function Rf(At){const it=At.prototype.getContext;At.prototype.getContext=function(bn,...Sn){const ur=it.call(this,bn,...Sn);return ur&&ur.bindTexture&&(Lf(ur,bn,{}),ur.getExtension("GMAN_webgl_memory")),ur}}typeof HTMLCanvasElement!="undefined"&&Rf(HTMLCanvasElement),typeof OffscreenCanvas!="undefined"&&Rf(OffscreenCanvas)});class KG extends Br{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new t4(t)}),this.register(function(t){return new a4(t)}),this.register(function(t){return new l4(t)}),this.register(function(t){return new n4(t)}),this.register(function(t){return new r4(t)}),this.register(function(t){return new i4(t)}),this.register(function(t){return new s4(t)}),this.register(function(t){return new o4(t)}),this.register(function(t){return new JU(t)}),this.register(function(t){return new u4(t)})}load(e,t,r,o){const l=this;let c;this.resourcePath!==""?c=this.resourcePath:this.path!==""?c=this.path:c=bi.extractUrlBase(e),this.manager.itemStart(e);const h=function(v){o?o(v):console.error(v),l.manager.itemError(e),l.manager.itemEnd(e)},m=new Fi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(e,function(v){try{l.parse(v,c,function(b){t(b),l.manager.itemEnd(e)},h)}catch(b){h(b)}},r,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,o){let l;const c={},h={};if(typeof e=="string")l=e;else if(bi.decodeText(new Uint8Array(e,0,4))===FA){try{c[on.KHR_BINARY_GLTF]=new c4(e)}catch(T){o&&o(T);return}l=c[on.KHR_BINARY_GLTF].content}else l=bi.decodeText(new Uint8Array(e));const m=JSON.parse(l);if(m.asset===void 0||m.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const v=new b4(m,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const T=this.pluginCallbacks[b](v);h[T.name]=T,c[T.name]=!0}if(m.extensionsUsed)for(let b=0;b<m.extensionsUsed.length;++b){const T=m.extensionsUsed[b],L=m.extensionsRequired||[];switch(T){case on.KHR_MATERIALS_UNLIT:c[T]=new e4;break;case on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:c[T]=new d4;break;case on.KHR_DRACO_MESH_COMPRESSION:c[T]=new f4(m,this.dracoLoader);break;case on.KHR_TEXTURE_TRANSFORM:c[T]=new h4;break;case on.KHR_MESH_QUANTIZATION:c[T]=new p4;break;default:L.indexOf(T)>=0&&h[T]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+T+'".')}}v.setExtensions(c),v.setPlugins(h),v.parse(r,o)}parseAsync(e,t){const r=this;return new Promise(function(o,l){r.parse(e,t,o,l)})}}function QU(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const on={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class JU{constructor(e){this.parser=e,this.name=on.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,o=t.length;r<o;r++){const l=t[r];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let o=t.cache.get(r);if(o)return o;const l=t.json,m=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let v;const b=new Ke(16777215);m.color!==void 0&&b.fromArray(m.color);const T=m.range!==void 0?m.range:0;switch(m.type){case"directional":v=new zh(b),v.target.position.set(0,0,-1),v.add(v.target);break;case"point":v=new Ec(b),v.distance=T;break;case"spot":v=new Bh(b),v.distance=T,m.spot=m.spot||{},m.spot.innerConeAngle=m.spot.innerConeAngle!==void 0?m.spot.innerConeAngle:0,m.spot.outerConeAngle=m.spot.outerConeAngle!==void 0?m.spot.outerConeAngle:Math.PI/4,v.angle=m.spot.outerConeAngle,v.penumbra=1-m.spot.innerConeAngle/m.spot.outerConeAngle,v.target.position.set(0,0,-1),v.add(v.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+m.type)}return v.position.set(0,0,0),v.decay=2,m.intensity!==void 0&&(v.intensity=m.intensity),v.name=t.createUniqueName(m.name||"light_"+e),o=Promise.resolve(v),t.cache.add(r,o),o}createNodeAttachment(e){const t=this,r=this.parser,l=r.json.nodes[e],h=(l.extensions&&l.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(m){return r._getNodeRef(t.cache,h,m)})}}class e4{constructor(){this.name=on.KHR_MATERIALS_UNLIT}getMaterialType(){return qr}extendParams(e,t,r){const o=[];e.color=new Ke(1,1,1),e.opacity=1;const l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const c=l.baseColorFactor;e.color.fromArray(c),e.opacity=c[3]}l.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",l.baseColorTexture))}return Promise.all(o)}}class t4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];if(c.clearcoatFactor!==void 0&&(t.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(l.push(r.assignTexture(t,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const h=c.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new We(h,h)}return Promise.all(l)}}class n4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[];t.sheenColor=new Ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const c=o.extensions[this.name];return c.sheenColorFactor!==void 0&&t.sheenColor.fromArray(c.sheenColorFactor),c.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&l.push(r.assignTexture(t,"sheenColorMap",c.sheenColorTexture)),c.sheenRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(l)}}class r4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];return c.transmissionFactor!==void 0&&(t.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&l.push(r.assignTexture(t,"transmissionMap",c.transmissionTexture)),Promise.all(l)}}class i4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];t.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&l.push(r.assignTexture(t,"thicknessMap",c.thicknessTexture)),t.attenuationDistance=c.attenuationDistance||0;const h=c.attenuationColor||[1,1,1];return t.attenuationColor=new Ke(h[0],h[1],h[2]),Promise.all(l)}}class s4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=o.extensions[this.name];return t.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}}class o4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:yo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];t.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&l.push(r.assignTexture(t,"specularIntensityMap",c.specularTexture));const h=c.specularColorFactor||[1,1,1];return t.specularColor=new Ke(h[0],h[1],h[2]),c.specularColorTexture!==void 0&&l.push(r.assignTexture(t,"specularColorMap",c.specularColorTexture).then(function(m){m.encoding=Or})),Promise.all(l)}}class a4{constructor(e){this.parser=e,this.name=on.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const l=o.extensions[this.name],c=r.images[l.source],h=t.options.ktx2Loader;if(!h){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,c,h)}}class l4{constructor(e){this.parser=e,this.name=on.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,o=r.json,l=o.textures[e];if(!l.extensions||!l.extensions[t])return null;const c=l.extensions[t],h=o.images[c.source];let m=r.textureLoader;if(h.uri){const v=r.options.manager.getHandler(h.uri);v!==null&&(m=v)}return this.detectSupport().then(function(v){if(v)return r.loadTextureImage(e,h,m);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class u4{constructor(e){this.name=on.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],l=this.parser.getDependency("buffer",o.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,c.ready]).then(function(h){const m=o.byteOffset||0,v=o.byteLength||0,b=o.count,T=o.byteStride,L=new ArrayBuffer(b*T),P=new Uint8Array(h[0],m,v);return c.decodeGltfBuffer(new Uint8Array(L),b,T,P,o.mode,o.filter),L})}else return null}}const FA="glTF",Gh=12,BA={JSON:1313821514,BIN:5130562};class c4{constructor(e){this.name=on.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Gh);if(this.header={magic:bi.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==FA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Gh,o=new DataView(e,Gh);let l=0;for(;l<r;){const c=o.getUint32(l,!0);l+=4;const h=o.getUint32(l,!0);if(l+=4,h===BA.JSON){const m=new Uint8Array(e,Gh+l,c);this.content=bi.decodeText(m)}else if(h===BA.BIN){const m=Gh+l;this.body=e.slice(m,m+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class f4{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=on.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,o=this.dracoLoader,l=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,h={},m={},v={};for(const b in c){const T=Gx[b]||b.toLowerCase();h[T]=c[b]}for(const b in e.attributes){const T=Gx[b]||b.toLowerCase();if(c[b]!==void 0){const L=r.accessors[e.attributes[b]],P=Vh[L.componentType];v[T]=P,m[T]=L.normalized===!0}}return t.getDependency("bufferView",l).then(function(b){return new Promise(function(T){o.decodeDracoFile(b,function(L){for(const P in L.attributes){const O=L.attributes[P],z=m[P];z!==void 0&&(O.normalized=z)}T(L)},h,v)})})}}class h4{constructor(){this.name=on.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Hx extends Al{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),h={specular:{value:new Ke().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=h,this.onBeforeCompile=function(m){for(const v in h)m.uniforms[v]=h[v];m.fragmentShader=m.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",c)},Object.defineProperties(this,{specular:{get:function(){return h.specular.value},set:function(m){h.specular.value=m}},specularMap:{get:function(){return h.specularMap.value},set:function(m){h.specularMap.value=m,m?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return h.glossiness.value},set:function(m){h.glossiness.value=m}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(m){h.glossinessMap.value=m,m?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class d4{constructor(){this.name=on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Hx}extendParams(e,t,r){const o=t.extensions[this.name];e.color=new Ke(1,1,1),e.opacity=1;const l=[];if(Array.isArray(o.diffuseFactor)){const c=o.diffuseFactor;e.color.fromArray(c),e.opacity=c[3]}if(o.diffuseTexture!==void 0&&l.push(r.assignTexture(e,"map",o.diffuseTexture)),e.emissive=new Ke(0,0,0),e.glossiness=o.glossinessFactor!==void 0?o.glossinessFactor:1,e.specular=new Ke(1,1,1),Array.isArray(o.specularFactor)&&e.specular.fromArray(o.specularFactor),o.specularGlossinessTexture!==void 0){const c=o.specularGlossinessTexture;l.push(r.assignTexture(e,"glossinessMap",c)),l.push(r.assignTexture(e,"specularMap",c))}return Promise.all(l)}createMaterial(e){const t=new Hx(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=lo,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class p4{constructor(){this.name=on.KHR_MESH_QUANTIZATION}}class Ul extends Hs{constructor(e,t,r,o){super(e,t,r,o)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o*3+o;for(let c=0;c!==o;c++)t[c]=r[l+c];return t}}Ul.prototype.beforeStart_=Ul.prototype.copySampleValue_;Ul.prototype.afterEnd_=Ul.prototype.copySampleValue_;Ul.prototype.interpolate_=function(i,e,t,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=c*2,m=c*3,v=r-e,b=(t-e)/v,T=b*b,L=T*b,P=i*m,O=P-m,z=-2*L+3*T,G=L-T,k=1-z,A=G-T+b;for(let N=0;N!==c;N++){const I=l[O+N+c],B=l[O+N+h]*v,V=l[P+N+c],X=l[P+N]*v;o[N]=k*I+A*B+z*V+G*X}return o};const m4=new Ut;class g4 extends Ul{interpolate_(e,t,r,o){const l=super.interpolate_(e,t,r,o);return m4.fromArray(l).normalize().toArray(l),l}}const _o={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Vh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},UA={9728:Xn,9729:Dn,9984:uh,9985:Wp,9986:ch,9987:oo},zA={33071:hr,33648:Fu,10497:Ps},HA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Gx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},da={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},v4={CUBICSPLINE:void 0,LINEAR:ll,STEP:Uu},Vx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function y4(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Al({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qo})),i.DefaultMaterial}function $h(i,e,t){for(const r in t.extensions)i[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function zl(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function x4(i,e,t){let r=!1,o=!1;for(let h=0,m=e.length;h<m;h++){const v=e[h];if(v.POSITION!==void 0&&(r=!0),v.NORMAL!==void 0&&(o=!0),r&&o)break}if(!r&&!o)return Promise.resolve(i);const l=[],c=[];for(let h=0,m=e.length;h<m;h++){const v=e[h];if(r){const b=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):i.attributes.position;l.push(b)}if(o){const b=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):i.attributes.normal;c.push(b)}}return Promise.all([Promise.all(l),Promise.all(c)]).then(function(h){const m=h[0],v=h[1];return r&&(i.morphAttributes.position=m),o&&(i.morphAttributes.normal=v),i.morphTargetsRelative=!0,i})}function w4(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let r=0,o=t.length;r<o;r++)i.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _4(i){const e=i.extensions&&i.extensions[on.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+GA(e.attributes):t=i.indices+":"+GA(i.attributes)+":"+i.mode,t}function GA(i){let e="";const t=Object.keys(i).sort();for(let r=0,o=t.length;r<o;r++)e+=t[r]+":"+i[t[r]]+";";return e}function $x(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class b4{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new QU,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|Safari/.test(navigator.userAgent)===!1?this.textureLoader=new kx(this.options.manager):this.textureLoader=new Qm(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Fi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,o=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(c){const h={scene:c[0][o.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:o.asset,parser:r,userData:{}};$h(l,h,o),zl(h,o),Promise.all(r._invokeAll(function(m){return m.afterRoot&&m.afterRoot(h)})).then(function(){e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let o=0,l=t.length;o<l;o++){const c=t[o].joints;for(let h=0,m=c.length;h<m;h++)e[c[h]].isBone=!0}for(let o=0,l=e.length;o<l;o++){const c=e[o];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(r[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const o=r.clone(),l=(c,h)=>{const m=this.associations.get(c);m!=null&&this.associations.set(h,m);for(const[v,b]of c.children.entries())l(b,h.children[v])};return l(r,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const o=e(t[r]);if(o)return o}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let o=0;o<t.length;o++){const l=e(t[o]);l&&r.push(l)}return r}getDependency(e,t){const r=e+":"+t;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this.loadNode(t);break;case"mesh":o=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this.loadAnimation(t);break;case"camera":o=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(l,c){return r.getDependency(e,c)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[on.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(l,c){r.load(bi.resolveURL(t.uri,o.path),l,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const o=t.byteLength||0,l=t.byteOffset||0;return r.slice(l,l+o)})}loadAccessor(e){const t=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0)return Promise.resolve(null);const l=[];return o.bufferView!==void 0?l.push(this.getDependency("bufferView",o.bufferView)):l.push(null),o.sparse!==void 0&&(l.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(l).then(function(c){const h=c[0],m=HA[o.type],v=Vh[o.componentType],b=v.BYTES_PER_ELEMENT,T=b*m,L=o.byteOffset||0,P=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,O=o.normalized===!0;let z,G;if(P&&P!==T){const k=Math.floor(L/P),A="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+k+":"+o.count;let N=t.cache.get(A);N||(z=new v(h,k*P,o.count*P/b),N=new aa(z,P/b),t.cache.add(A,N)),G=new vo(N,m,L%P/b,O)}else h===null?z=new v(o.count*m):z=new v(h,L,o.count*m),G=new Ot(z,m,O);if(o.sparse!==void 0){const k=HA.SCALAR,A=Vh[o.sparse.indices.componentType],N=o.sparse.indices.byteOffset||0,I=o.sparse.values.byteOffset||0,B=new A(c[1],N,o.sparse.count*k),V=new v(c[2],I,o.sparse.count*m);h!==null&&(G=new Ot(G.array.slice(),G.itemSize,G.normalized));for(let X=0,Q=B.length;X<Q;X++){const ae=B[X];if(G.setX(ae,V[X*m]),m>=2&&G.setY(ae,V[X*m+1]),m>=3&&G.setZ(ae,V[X*m+2]),m>=4&&G.setW(ae,V[X*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return G})}loadTexture(e){const t=this.json,r=this.options,o=t.textures[e],l=t.images[o.source];let c=this.textureLoader;if(l.uri){const h=r.manager.getHandler(l.uri);h!==null&&(c=h)}return this.loadTextureImage(e,l,c)}loadTextureImage(e,t,r){const o=this,l=this.json,c=this.options,h=l.textures[e],m=(t.uri||t.bufferView)+":"+h.sampler;if(this.textureCache[m])return this.textureCache[m];const v=self.URL||self.webkitURL;let b=t.uri||"",T=!1;if(t.bufferView!==void 0)b=o.getDependency("bufferView",t.bufferView).then(function(P){T=!0;const O=new Blob([P],{type:t.mimeType});return b=v.createObjectURL(O),b});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const L=Promise.resolve(b).then(function(P){return new Promise(function(O,z){let G=O;r.isImageBitmapLoader===!0&&(G=function(k){const A=new Nn(k);A.needsUpdate=!0,O(A)}),r.load(bi.resolveURL(P,c.path),G,void 0,z)})}).then(function(P){T===!0&&v.revokeObjectURL(b),P.flipY=!1,h.name&&(P.name=h.name);const z=(l.samplers||{})[h.sampler]||{};return P.magFilter=UA[z.magFilter]||Dn,P.minFilter=UA[z.minFilter]||oo,P.wrapS=zA[z.wrapS]||Ps,P.wrapT=zA[z.wrapT]||Ps,o.associations.set(P,{textures:e}),P}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",b),null});return this.textureCache[m]=L,L}assignTexture(e,t,r){const o=this;return this.getDependency("texture",r.index).then(function(l){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),o.extensions[on.KHR_TEXTURE_TRANSFORM]){const c=r.extensions!==void 0?r.extensions[on.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const h=o.associations.get(l);l=o.extensions[on.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),o.associations.set(l,h)}}return e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const o=t.attributes.tangent===void 0,l=t.attributes.color!==void 0,c=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new ua,rr.prototype.copy.call(m,r),m.color.copy(r.color),m.map=r.map,m.sizeAttenuation=!1,this.cache.add(h,m)),r=m}else if(e.isLine){const h="LineBasicMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new Bn,rr.prototype.copy.call(m,r),m.color.copy(r.color),this.cache.add(h,m)),r=m}if(o||l||c){let h="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),o&&(h+="derivative-tangents:"),l&&(h+="vertex-colors:"),c&&(h+="flat-shading:");let m=this.cache.get(h);m||(m=r.clone(),l&&(m.vertexColors=!0),c&&(m.flatShading=!0),o&&(m.normalScale&&(m.normalScale.y*=-1),m.clearcoatNormalScale&&(m.clearcoatNormalScale.y*=-1)),this.cache.add(h,m),this.associations.set(m,this.associations.get(r))),r=m}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Al}loadMaterial(e){const t=this,r=this.json,o=this.extensions,l=r.materials[e];let c;const h={},m=l.extensions||{},v=[];if(m[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const T=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];c=T.getMaterialType(),v.push(T.extendParams(h,l,t))}else if(m[on.KHR_MATERIALS_UNLIT]){const T=o[on.KHR_MATERIALS_UNLIT];c=T.getMaterialType(),v.push(T.extendParams(h,l,t))}else{const T=l.pbrMetallicRoughness||{};if(h.color=new Ke(1,1,1),h.opacity=1,Array.isArray(T.baseColorFactor)){const L=T.baseColorFactor;h.color.fromArray(L),h.opacity=L[3]}T.baseColorTexture!==void 0&&v.push(t.assignTexture(h,"map",T.baseColorTexture)),h.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,h.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(v.push(t.assignTexture(h,"metalnessMap",T.metallicRoughnessTexture)),v.push(t.assignTexture(h,"roughnessMap",T.metallicRoughnessTexture))),c=this._invokeOne(function(L){return L.getMaterialType&&L.getMaterialType(e)}),v.push(Promise.all(this._invokeAll(function(L){return L.extendMaterialParams&&L.extendMaterialParams(e,h)})))}l.doubleSided===!0&&(h.side=Is);const b=l.alphaMode||Vx.OPAQUE;if(b===Vx.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.format=ao,h.transparent=!1,b===Vx.MASK&&(h.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&c!==qr&&(v.push(t.assignTexture(h,"normalMap",l.normalTexture)),h.normalScale=new We(1,1),l.normalTexture.scale!==void 0)){const T=l.normalTexture.scale;h.normalScale.set(T,T)}return l.occlusionTexture!==void 0&&c!==qr&&(v.push(t.assignTexture(h,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&c!==qr&&(h.emissive=new Ke().fromArray(l.emissiveFactor)),l.emissiveTexture!==void 0&&c!==qr&&v.push(t.assignTexture(h,"emissiveMap",l.emissiveTexture)),Promise.all(v).then(function(){let T;return c===Hx?T=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):T=new c(h),l.name&&(T.name=l.name),T.map&&(T.map.encoding=Or),T.emissiveMap&&(T.emissiveMap.encoding=Or),zl(T,l),t.associations.set(T,{materials:e}),l.extensions&&$h(o,T,l),T})}createUniqueName(e){const t=en.sanitizeNodeName(e||"");let r=t;for(let o=1;this.nodeNamesUsed[r];++o)r=t+"_"+o;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,o=this.primitiveCache;function l(h){return r[on.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(m){return $A(m,h,t)})}const c=[];for(let h=0,m=e.length;h<m;h++){const v=e[h],b=_4(v),T=o[b];if(T)c.push(T.promise);else{let L;v.extensions&&v.extensions[on.KHR_DRACO_MESH_COMPRESSION]?L=l(v):L=$A(new bt,v,t),o[b]={primitive:v,promise:L},c.push(L)}}return Promise.all(c)}loadMesh(e){const t=this,r=this.json,o=this.extensions,l=r.meshes[e],c=l.primitives,h=[];for(let m=0,v=c.length;m<v;m++){const b=c[m].material===void 0?y4(this.cache):this.getDependency("material",c[m].material);h.push(b)}return h.push(t.loadGeometries(c)),Promise.all(h).then(function(m){const v=m.slice(0,m.length-1),b=m[m.length-1],T=[];for(let P=0,O=b.length;P<O;P++){const z=b[P],G=c[P];let k;const A=v[P];if(G.mode===_o.TRIANGLES||G.mode===_o.TRIANGLE_STRIP||G.mode===_o.TRIANGLE_FAN||G.mode===void 0)k=l.isSkinnedMesh===!0?new wl(z,A):new Fn(z,A),k.isSkinnedMesh===!0&&!k.geometry.attributes.skinWeight.normalized&&k.normalizeSkinWeights(),G.mode===_o.TRIANGLE_STRIP?k.geometry=WA(k.geometry,JM):G.mode===_o.TRIANGLE_FAN&&(k.geometry=WA(k.geometry,xy));else if(G.mode===_o.LINES)k=new Er(z,A);else if(G.mode===_o.LINE_STRIP)k=new Yi(z,A);else if(G.mode===_o.LINE_LOOP)k=new Fm(z,A);else if(G.mode===_o.POINTS)k=new hc(z,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+G.mode);Object.keys(k.geometry.morphAttributes).length>0&&w4(k,l),k.name=t.createUniqueName(l.name||"mesh_"+e),zl(k,l),G.extensions&&$h(o,k,G),t.assignFinalMaterial(k),T.push(k)}for(let P=0,O=T.length;P<O;P++)t.associations.set(T[P],{meshes:e,primitives:P});if(T.length===1)return T[0];const L=new Fr;t.associations.set(L,{meshes:e});for(let P=0,O=T.length;P<O;P++)L.add(T[P]);return L})}loadCamera(e){let t;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new dr(yi.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(t=new vl(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),zl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(o){return r.inverseBindMatrices=o,r})}loadAnimation(e){const r=this.json.animations[e],o=[],l=[],c=[],h=[],m=[];for(let v=0,b=r.channels.length;v<b;v++){const T=r.channels[v],L=r.samplers[T.sampler],P=T.target,O=P.node!==void 0?P.node:P.id,z=r.parameters!==void 0?r.parameters[L.input]:L.input,G=r.parameters!==void 0?r.parameters[L.output]:L.output;o.push(this.getDependency("node",O)),l.push(this.getDependency("accessor",z)),c.push(this.getDependency("accessor",G)),h.push(L),m.push(P)}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(m)]).then(function(v){const b=v[0],T=v[1],L=v[2],P=v[3],O=v[4],z=[];for(let k=0,A=b.length;k<A;k++){const N=b[k],I=T[k],B=L[k],V=P[k],X=O[k];if(N===void 0)continue;N.updateMatrix(),N.matrixAutoUpdate=!0;let Q;switch(da[X.path]){case da.weights:Q=Ll;break;case da.rotation:Q=xo;break;case da.position:case da.scale:default:Q=Il;break}const ae=N.name?N.name:N.uuid,le=V.interpolation!==void 0?v4[V.interpolation]:ll,he=[];da[X.path]===da.weights?N.traverse(function(ee){ee.morphTargetInfluences&&he.push(ee.name?ee.name:ee.uuid)}):he.push(ae);let re=B.array;if(B.normalized){const ee=$x(re.constructor),_=new Float32Array(re.length);for(let p=0,Z=re.length;p<Z;p++)_[p]=re[p]*ee;re=_}for(let ee=0,_=he.length;ee<_;ee++){const p=new Q(he[ee]+"."+da[X.path],I.array,re,le);V.interpolation==="CUBICSPLINE"&&(p.createInterpolant=function(E){const ye=this instanceof xo?g4:Ul;return new ye(this.times,this.values,this.getValueSize()/3,E)},p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),z.push(p)}}const G=r.name?r.name:"animation_"+e;return new Pl(G,void 0,z)})}createNodeMesh(e){const t=this.json,r=this,o=t.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(l){const c=r._getNodeRef(r.meshCache,o.mesh,l);return o.weights!==void 0&&c.traverse(function(h){if(!!h.isMesh)for(let m=0,v=o.weights.length;m<v;m++)h.morphTargetInfluences[m]=o.weights[m]}),c})}loadNode(e){const t=this.json,r=this.extensions,o=this,l=t.nodes[e],c=l.name?o.createUniqueName(l.name):"";return function(){const h=[],m=o._invokeOne(function(v){return v.createNodeMesh&&v.createNodeMesh(e)});return m&&h.push(m),l.camera!==void 0&&h.push(o.getDependency("camera",l.camera).then(function(v){return o._getNodeRef(o.cameraCache,l.camera,v)})),o._invokeAll(function(v){return v.createNodeAttachment&&v.createNodeAttachment(e)}).forEach(function(v){h.push(v)}),Promise.all(h)}().then(function(h){let m;if(l.isBone===!0?m=new _l:h.length>1?m=new Fr:h.length===1?m=h[0]:m=new Vt,m!==h[0])for(let v=0,b=h.length;v<b;v++)m.add(h[v]);if(l.name&&(m.userData.name=l.name,m.name=c),zl(m,l),l.extensions&&$h(r,m,l),l.matrix!==void 0){const v=new Qe;v.fromArray(l.matrix),m.applyMatrix4(v)}else l.translation!==void 0&&m.position.fromArray(l.translation),l.rotation!==void 0&&m.quaternion.fromArray(l.rotation),l.scale!==void 0&&m.scale.fromArray(l.scale);return o.associations.has(m)||o.associations.set(m,{}),o.associations.get(m).nodes=e,m})}loadScene(e){const t=this.json,r=this.extensions,o=this.json.scenes[e],l=this,c=new Fr;o.name&&(c.name=l.createUniqueName(o.name)),zl(c,o),o.extensions&&$h(r,c,o);const h=o.nodes||[],m=[];for(let v=0,b=h.length;v<b;v++)m.push(VA(h[v],c,t,l));return Promise.all(m).then(function(){const v=b=>{const T=new Map;for(const[L,P]of l.associations)(L instanceof rr||L instanceof Nn)&&T.set(L,P);return b.traverse(L=>{const P=l.associations.get(L);P!=null&&T.set(L,P)}),T};return l.associations=v(c),c})}}function VA(i,e,t,r){const o=t.nodes[i];return r.getDependency("node",i).then(function(l){if(o.skin===void 0)return l;let c;return r.getDependency("skin",o.skin).then(function(h){c=h;const m=[];for(let v=0,b=c.joints.length;v<b;v++)m.push(r.getDependency("node",c.joints[v]));return Promise.all(m)}).then(function(h){return l.traverse(function(m){if(!m.isMesh)return;const v=[],b=[];for(let T=0,L=h.length;T<L;T++){const P=h[T];if(P){v.push(P);const O=new Qe;c.inverseBindMatrices!==void 0&&O.fromArray(c.inverseBindMatrices.array,T*16),b.push(O)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',c.joints[T])}m.bind(new la(v,b),m.matrixWorld)}),l})}).then(function(l){e.add(l);const c=[];if(o.children){const h=o.children;for(let m=0,v=h.length;m<v;m++){const b=h[m];c.push(VA(b,l,t,r))}}return Promise.all(c)})}function S4(i,e,t){const r=e.attributes,o=new xi;if(r.POSITION!==void 0){const h=t.json.accessors[r.POSITION],m=h.min,v=h.max;if(m!==void 0&&v!==void 0){if(o.set(new fe(m[0],m[1],m[2]),new fe(v[0],v[1],v[2])),h.normalized){const b=$x(Vh[h.componentType]);o.min.multiplyScalar(b),o.max.multiplyScalar(b)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const h=new fe,m=new fe;for(let v=0,b=l.length;v<b;v++){const T=l[v];if(T.POSITION!==void 0){const L=t.json.accessors[T.POSITION],P=L.min,O=L.max;if(P!==void 0&&O!==void 0){if(m.setX(Math.max(Math.abs(P[0]),Math.abs(O[0]))),m.setY(Math.max(Math.abs(P[1]),Math.abs(O[1]))),m.setZ(Math.max(Math.abs(P[2]),Math.abs(O[2]))),L.normalized){const z=$x(Vh[L.componentType]);m.multiplyScalar(z)}h.max(m)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(h)}i.boundingBox=o;const c=new co;o.getCenter(c.center),c.radius=o.min.distanceTo(o.max)/2,i.boundingSphere=c}function $A(i,e,t){const r=e.attributes,o=[];function l(c,h){return t.getDependency("accessor",c).then(function(m){i.setAttribute(h,m)})}for(const c in r){const h=Gx[c]||c.toLowerCase();h in i.attributes||o.push(l(r[c],h))}if(e.indices!==void 0&&!i.index){const c=t.getDependency("accessor",e.indices).then(function(h){i.setIndex(h)});o.push(c)}return zl(i,e),S4(i,e,t),Promise.all(o).then(function(){return e.targets!==void 0?x4(i,e.targets,t):i})}function WA(i,e){let t=i.getIndex();if(t===null){const c=[],h=i.getAttribute("position");if(h!==void 0){for(let m=0;m<h.count;m++)c.push(m);i.setIndex(c),t=i.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=t.count-2,o=[];if(e===xy)for(let c=1;c<=r;c++)o.push(t.getX(0)),o.push(t.getX(c)),o.push(t.getX(c+1));else for(let c=0;c<r;c++)c%2==0?(o.push(t.getX(c)),o.push(t.getX(c+1)),o.push(t.getX(c+2))):(o.push(t.getX(c+2)),o.push(t.getX(c+1)),o.push(t.getX(c)));o.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=i.clone();return l.setIndex(o),l}/*! (c) 2019-2021 pixiv Inc. - https://github.com/pixiv/three-vrm/blob/release/LICENSE *//*!
 * @pixiv/three-vrm-core v1.0.0-beta.7
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class jA extends Vt{constructor(e){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight===0?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(o=>o.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fn(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}function qA(i,e,t){const r=i.parser.json.nodes[e].mesh;if(r==null)return null;const o=i.parser.json.meshes[r],l=[];if(t.isMesh)l.push(t);else{const c=o.primitives.length;for(let h=0;h<c;h++)l.push(t.children[h])}return l}function XA(i,e){return fn(this,void 0,void 0,function*(){const t=yield i.parser.getDependency("node",e);return qA(i,e,t)})}function YA(i){return fn(this,void 0,void 0,function*(){const e=yield i.parser.getDependencies("node"),t=new Map;return e.forEach((r,o)=>{const l=qA(i,o,r);l!=null&&t.set(o,l)}),t})}function KA(i,e){var t,r;let o=null;if(parseInt(qi,10)>=133)o=(r=(t=i.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const l=i.associations.get(e);(l==null?void 0:l.type)==="materials"&&(o=l.index)}return o}const Wx={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function ZA(i){return Math.max(Math.min(i,1),0)}class lg{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(Wx));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)&&(e[r]=o)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(Wx));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)||(e[r]=o)}),e}copy(e){return this._expressions.concat().forEach(t=>{this.unregisterExpression(t)}),e._expressions.forEach(t=>{this.registerExpression(t)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new lg().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=ZA(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const o=t.expressionName;this.blinkExpressionNames.indexOf(o)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(o)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(o)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(o=>{e-=o.overrideBlinkAmount,t-=o.overrideLookAtAmount,r-=o.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const M4=new Ke;class ug{constructor({material:e,type:t,targetValue:r}){var o,l,c;this.material=e,this.type=t,this.targetValue=r;const h=(o=Object.entries(ug._propertyNameMapMap).find(([v])=>e[v]===!0))===null||o===void 0?void 0:o[1],m=(l=h==null?void 0:h[t])!==null&&l!==void 0?l:null;if(m==null)console.warn(`Tried to add a material color bind to the material ${(c=e.name)!==null&&c!==void 0?c:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const v=e[m].clone(),b=this.targetValue.clone().sub(v);this._state={propertyName:m,initialValue:v,deltaValue:b}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,o=this.material[t];o!==void 0&&(o.add(M4.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}ug._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineFactor",rimColor:"rimFactor",shadeColor:"shadeFactor"}};class QA{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const JA=new We;class cg{constructor({material:e,scale:t,offset:r}){var o,l;this.material=e,this.scale=t,this.offset=r;const c=(o=Object.entries(cg._propertyNamesMap).find(([h])=>e[h]===!0))===null||o===void 0?void 0:o[1];c==null?(console.warn(`Tried to add a texture transform bind to the material ${(l=e.name)!==null&&l!==void 0?l:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],c.forEach(h=>{var m;const v=(m=e[h])===null||m===void 0?void 0:m.clone();if(!v)return null;e[h]=v;const b=v.offset.clone(),T=v.repeat.clone(),L=r.clone().sub(b),P=t.clone().sub(T);this._properties.push({name:h,initialOffset:b,deltaOffset:L,initialScale:T,deltaScale:P})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(JA.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(JA.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}cg._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};class fg{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);return t||(yield this._v0Import(e))||null})}_v1Import(e){var t,r;return fn(this,void 0,void 0,function*(){if(((t=this.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))===-1)return null;const o=(r=this.parser.json.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o||o.specVersion!=="1.0-beta")return null;const l=o.expressions;if(!l)return null;const c=new Set(Object.values(Wx)),h=new Map;l.preset!=null&&Object.entries(l.preset).forEach(([v,b])=>{b!=null&&(c.has(v)?h.set(v,b):console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${v}" detected. Ignoring the expression`))}),l.custom!=null&&Object.entries(l.custom).forEach(([v,b])=>{c.has(v)?console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${v}". Ignoring the expression`):h.set(v,b)});const m=new lg;return yield Promise.all(Array.from(h.entries()).map(([v,b])=>fn(this,void 0,void 0,function*(){var T,L,P,O,z,G,k;const A=new jA(v);if(e.scene.add(A),A.isBinary=(T=b.isBinary)!==null&&T!==void 0&&T,A.overrideBlink=(L=b.overrideBlink)!==null&&L!==void 0?L:"none",A.overrideLookAt=(P=b.overrideLookAt)!==null&&P!==void 0?P:"none",A.overrideMouth=(O=b.overrideMouth)!==null&&O!==void 0?O:"none",(z=b.morphTargetBinds)===null||z===void 0||z.forEach(N=>fn(this,void 0,void 0,function*(){var I;if(N.node===void 0||N.index===void 0)return;const B=yield XA(e,N.node),V=N.index;B.every(X=>Array.isArray(X.morphTargetInfluences)&&V<X.morphTargetInfluences.length)?A.addBind(new QA({primitives:B,index:V,weight:(I=N.weight)!==null&&I!==void 0?I:1})):console.warn(`VRMExpressionLoaderPlugin: ${b.name} attempts to index morph #${V} but not found.`)})),b.materialColorBinds||b.textureTransformBinds){const N=[];e.scene.traverse(I=>{const B=I.material;B&&N.push(B)}),(G=b.materialColorBinds)===null||G===void 0||G.forEach(I=>fn(this,void 0,void 0,function*(){N.filter(B=>{const V=KA(this.parser,B);return I.material===V}).forEach(B=>{A.addBind(new ug({material:B,type:I.type,targetValue:new Ke().fromArray(I.targetValue)}))})})),(k=b.textureTransformBinds)===null||k===void 0||k.forEach(I=>fn(this,void 0,void 0,function*(){N.filter(B=>{const V=KA(this.parser,B);return I.material===V}).forEach(B=>{var V,X;A.addBind(new cg({material:B,offset:new We().fromArray((V=I.offset)!==null&&V!==void 0?V:[0,0]),scale:new We().fromArray((X=I.scale)!==null&&X!==void 0?X:[1,1])}))})}))}m.registerExpression(A)}))),m})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const r=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!r)return null;const o=r.blendShapeMaster;if(!o)return null;const l=new lg,c=o.blendShapeGroups;if(!c)return l;const h=new Set;return yield Promise.all(c.map(m=>fn(this,void 0,void 0,function*(){var v;const b=m.presetName,T=b!=null&&fg.v0v1PresetNameMap[b]||null,L=T!=null?T:m.name;if(L==null)return void console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");if(h.has(L))return void console.warn(`VRMExpressionLoaderPlugin: An expression preset ${b} has duplicated entries. Ignoring the expression`);h.add(L);const P=new jA(L);e.scene.add(P),P.isBinary=(v=m.isBinary)!==null&&v!==void 0&&v,m.binds&&m.binds.forEach(z=>fn(this,void 0,void 0,function*(){if(z.mesh===void 0||z.index===void 0)return;const G=[];this.parser.json.nodes.forEach((A,N)=>{A.mesh===z.mesh&&G.push(N)});const k=z.index;yield Promise.all(G.map(A=>fn(this,void 0,void 0,function*(){var N;const I=yield XA(e,A);I.every(B=>Array.isArray(B.morphTargetInfluences)&&k<B.morphTargetInfluences.length)?P.addBind(new QA({primitives:I,index:k,weight:.01*((N=z.weight)!==null&&N!==void 0?N:100)})):console.warn(`VRMExpressionLoaderPlugin: ${m.name} attempts to index ${k}th morph but not found.`)})))}));const O=m.materialValues;O&&O.length!==0&&console.warn("Material binds of VRM 0.0 are not supported. Setup the model in VRM 1.0 and try again"),l.registerExpression(P)}))),l})}}fg.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class Gs{constructor(e,t){this._firstPersonOnlyLayer=Gs.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=Gs.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new Gs(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=Gs.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=Gs.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(o=>{r.type==="firstPersonOnly"?(o.layers.set(this._firstPersonOnlyLayer),o.traverse(l=>l.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(o.layers.set(this._thirdPersonOnlyLayer),o.traverse(l=>l.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(o)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,o){let l=0;if(t!=null&&t.length>0)for(let c=0;c<e.length;c+=3){const h=e[c],m=e[c+1],v=e[c+2],b=t[h],T=r[h];if(b[0]>0&&o.includes(T[0])||b[1]>0&&o.includes(T[1])||b[2]>0&&o.includes(T[2])||b[3]>0&&o.includes(T[3]))continue;const L=t[m],P=r[m];if(L[0]>0&&o.includes(P[0])||L[1]>0&&o.includes(P[1])||L[2]>0&&o.includes(P[2])||L[3]>0&&o.includes(P[3]))continue;const O=t[v],z=r[v];O[0]>0&&o.includes(z[0])||O[1]>0&&o.includes(z[1])||O[2]>0&&o.includes(z[2])||O[3]>0&&o.includes(z[3])||(e[l++]=h,e[l++]=m,e[l++]=v)}return l}_createErasedMesh(e,t){const r=new wl(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const o=r.geometry,l=o.getAttribute("skinIndex").array,c=[];for(let P=0;P<l.length;P+=4)c.push([l[P],l[P+1],l[P+2],l[P+3]]);const h=o.getAttribute("skinWeight").array,m=[];for(let P=0;P<h.length;P+=4)m.push([h[P],h[P+1],h[P+2],h[P+3]]);const v=o.getIndex();if(!v)throw new Error("The geometry doesn't have an index buffer");const b=Array.from(v.array),T=this._excludeTriangles(b,m,c,t),L=[];for(let P=0;P<T;P++)L[P]=b[P];return o.setIndex(L),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new la(e.skeleton.bones,e.skeleton.boneInverses),new Qe),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((l,c)=>{this._isEraseTarget(l)&&r.push(c)}),!r.length)return t.layers.enable(this._thirdPersonOnlyLayer),void t.layers.enable(this._firstPersonOnlyLayer);t.layers.set(this._thirdPersonOnlyLayer);const o=this._createErasedMesh(t,r);e.add(o)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Fr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const o=r;this._createHeadlessModelForSkinnedMesh(t,o)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getBoneNode("head")||!!e.parent&&this._isEraseTarget(e.parent)}}Gs.DEFAULT_FIRSTPERSON_ONLY_LAYER=9,Gs.DEFAULT_THIRDPERSON_ONLY_LAYER=10;class T4{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return fn(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);return r||(yield this._v0Import(e,t))||null})}_v1Import(e,t){var r,o;return fn(this,void 0,void 0,function*(){if(((r=this.parser.json.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))===-1)return null;const l=(o=this.parser.json.extensions)===null||o===void 0?void 0:o.VRMC_vrm;if(!l||l.specVersion!=="1.0-beta")return null;const c=l.firstPerson;if(!c)return null;const h=[],m=yield YA(e);return Array.from(m.entries()).forEach(([v,b])=>{var T;const L=c.meshAnnotations?c.meshAnnotations.find(P=>P.node===v):void 0;h.push({meshes:b,type:(T=L==null?void 0:L.type)!==null&&T!==void 0?T:"both"})}),new Gs(t,h)})}_v0Import(e,t){var r;return fn(this,void 0,void 0,function*(){const o=(r=this.parser.json.extensions)===null||r===void 0?void 0:r.VRM;if(!o)return null;const l=o.firstPerson;if(!l)return null;const c=[],h=yield YA(e);return Array.from(h.entries()).forEach(([m,v])=>{const b=this.parser.json.nodes[m],T=l.meshAnnotations?l.meshAnnotations.find(L=>L.mesh===b.mesh):void 0;c.push({meshes:v,type:this._convertV0FlagToV1Type(T==null?void 0:T.firstPersonFlag)})}),new Gs(t,c)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}function eC(i){return i.invert?i.invert():i.inverse(),i}const Hl=new fe,Gl=new Ut;class hg{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}copy(e){return this.humanBones=e.humanBones,this.restPose=e.restPose,this}clone(){return new hg(this.humanBones).copy(this)}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);o&&(Hl.copy(o.position),Gl.copy(o.quaternion),e[r]={position:Hl.toArray(),rotation:Gl.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);if(!o)return;Hl.set(0,0,0),Gl.identity();const l=this.restPose[r];(l==null?void 0:l.position)&&Hl.fromArray(l.position).negate(),(l==null?void 0:l.rotation)&&eC(Gl.fromArray(l.rotation)),Hl.add(o.position),Gl.premultiply(o.quaternion),e[r]={position:Hl.toArray(),rotation:Gl.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const o=t,l=this.getBoneNode(o);if(!l)return;const c=this.restPose[o];c&&((r==null?void 0:r.position)&&(l.position.fromArray(r.position),c.position&&l.position.add(Hl.fromArray(c.position))),(r==null?void 0:r.rotation)&&(l.quaternion.fromArray(r.rotation),c.rotation&&l.quaternion.multiply(Gl.fromArray(c.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);r&&((t==null?void 0:t.position)&&r.position.fromArray(t.position),(t==null?void 0:t.rotation)&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const E4={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"};class A4{constructor(e){this.parser=e}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);return t||(yield this._v0Import(e))||null})}_v1Import(e){var t,r;return fn(this,void 0,void 0,function*(){if(((t=this.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))===-1)return null;const o=(r=this.parser.json.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o||o.specVersion!=="1.0-beta")return null;const l=o.humanoid;if(!l)return null;const c={};return l.humanBones!=null&&(yield Promise.all(Object.entries(l.humanBones).map(([h,m])=>fn(this,void 0,void 0,function*(){const v=h,b=m.node,T=yield this.parser.getDependency("node",b);T!=null?c[v]={node:T}:console.warn(`A glTF node bound to the humanoid bone ${v} (index = ${b}) does not exist`)})))),new hg(this._ensureRequiredBonesExist(c))})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const r=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!r)return null;const o=r.humanoid;if(!o)return null;const l={};return o.humanBones!=null&&(yield Promise.all(o.humanBones.map(c=>fn(this,void 0,void 0,function*(){const h=c.bone,m=c.node;if(h==null||m==null)return;const v=yield this.parser.getDependency("node",m);v!=null?l[h]==null?l[h]={node:v}:console.warn(`Multiple bone entries for ${h} detected (index = ${m}), ignoring duplicated entries.`):console.warn(`A glTF node bound to the humanoid bone ${h} (index = ${m}) does not exist`)})))),new hg(this._ensureRequiredBonesExist(l))})}_ensureRequiredBonesExist(e){const t=Object.values(E4).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class tC extends bt{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new Ot(new Float32Array(195),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Ot(new Uint16Array(189),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(3*e,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class C4 extends bt{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new fe,this._currentTail=new fe,this._attrPos=new Ot(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Ot(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(2*e,e,t),this._attrIndex.setXY(64+2*e,32+e,32+t),this._attrIndex.setXY(128+2*e,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const jx=new Ut,L4=new Ut,Wh=new fe,nC=new fe,rC=Math.sqrt(2)/2,R4=new Ut(0,0,-rC,rC),I4=new fe(0,1,0);class P4 extends Fr{constructor(e){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new tC;t.radius=.5;const r=new qr({color:65280,transparent:!0,opacity:.5,side:Is,depthTest:!1,depthWrite:!1});this._meshPitch=new Fn(t,r),this.add(this._meshPitch)}{const t=new tC;t.radius=.5;const r=new qr({color:16711680,transparent:!0,opacity:.5,side:Is,depthTest:!1,depthWrite:!1});this._meshYaw=new Fn(t,r),this.add(this._meshYaw)}{const t=new C4;t.radius=.1;const r=new Bn({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new Er(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){this.vrmLookAt.getLookAtWorldPosition(Wh),this.vrmLookAt.getLookAtWorldQuaternion(jx);const t=this.vrmLookAt.euler.y,r=this.vrmLookAt.euler.x;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update(),this._meshYaw.position.copy(Wh),this._meshYaw.quaternion.copy(jx),this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this._meshPitch.position.copy(Wh),this._meshPitch.quaternion.copy(jx),this._meshPitch.quaternion.multiply(L4.setFromAxisAngle(I4,t)),this._meshPitch.quaternion.multiply(R4);const o=this.vrmLookAt.target;o!=null&&(o.getWorldPosition(nC).sub(Wh),this._lineTarget.geometry.tail.copy(nC),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Wh)),super.updateMatrixWorld(e)}}const k4=new fe,O4=new fe,D4=new fe,N4=new fe,bo=new fe,qx=new Ut,F4=new Ut;class jh{constructor(e,t){this.offsetFromHeadBone=new fe,this.autoUpdate=!0,this.faceFront=new fe(0,0,1),this._euler=new wi(0,0,0,jh.EULER_ORDER),this.humanoid=e,this.applier=t}get euler(){return this._euler.clone()}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new jh(this.humanoid,this.applier).copy(this)}reset(){this._euler.set(0,0,0),this.applier.lookAt(this._euler)}getLookAtWorldPosition(e){const t=this.humanoid.getBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getBoneNode("head");return r=e,t.matrixWorld.decompose(k4,r,O4),r;var r}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(qx),e.copy(this.faceFront).applyEuler(this._euler).applyQuaternion(qx)}lookAt(e){this._calcEuler(this._euler,e),this.applier.lookAt(this._euler)}update(e){this.target&&this.autoUpdate&&(this.lookAt(this.target.getWorldPosition(D4)),this.applier.lookAt(this._euler))}_calcEuler(e,t){const r=eC(this.getLookAtWorldQuaternion(qx)),o=this.getLookAtWorldPosition(N4),l=bo.copy(t).sub(o).applyQuaternion(r).normalize(),c=F4.setFromUnitVectors(this.faceFront,l);return bo.set(0,0,1).applyQuaternion(c),e.x=Math.atan2(-bo.y,Math.sqrt(bo.x*bo.x+bo.z*bo.z)),e.y=Math.atan2(bo.x,bo.z),e}}jh.EULER_ORDER="YXZ";const Cc=new wi(0,0,0,"YXZ");class Xx{constructor(e,t,r,o,l){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l}lookAt(e){const t=180*e.x/Math.PI,r=180*e.y/Math.PI,o=this.humanoid.getBoneNode("leftEye"),l=this.humanoid.getBoneNode("rightEye");o&&(Cc.x=t<0?-this.rangeMapVerticalDown.map(-t)/180*Math.PI:this.rangeMapVerticalUp.map(t)/180*Math.PI,Cc.y=r<0?-this.rangeMapHorizontalInner.map(-r)/180*Math.PI:this.rangeMapHorizontalOuter.map(r)/180*Math.PI,o.quaternion.setFromEuler(Cc)),l&&(Cc.x=t<0?-this.rangeMapVerticalDown.map(-t)/180*Math.PI:this.rangeMapVerticalUp.map(t)/180*Math.PI,Cc.y=r<0?-this.rangeMapHorizontalOuter.map(-r)/180*Math.PI:this.rangeMapHorizontalInner.map(r)/180*Math.PI,l.quaternion.setFromEuler(Cc))}}Xx.type="bone";class Yx{constructor(e,t,r,o,l){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l}lookAt(e){const t=180*e.x/Math.PI,r=180*e.y/Math.PI;t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),r<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-r))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(r)))}}Yx.type="expression";class iC{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*ZA(e/this.inputMaxValue)}}class B4{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return fn(this,void 0,void 0,function*(){if(t==null||r==null)return null;const o=yield this._v1Import(e,t,r);return o||(yield this._v0Import(e,t,r))||null})}_v1Import(e,t,r){var o,l,c;return fn(this,void 0,void 0,function*(){if(((o=this.parser.json.extensionsUsed)===null||o===void 0?void 0:o.indexOf("VRMC_vrm"))===-1)return null;const h=(l=this.parser.json.extensions)===null||l===void 0?void 0:l.VRMC_vrm;if(!h||h.specVersion!=="1.0-beta")return null;const m=h.lookAt;if(!m)return null;const v=m.type==="expression"?1:10,b=this._v1ImportRangeMap(m.rangeMapHorizontalInner,v),T=this._v1ImportRangeMap(m.rangeMapHorizontalOuter,v),L=this._v1ImportRangeMap(m.rangeMapVerticalDown,v),P=this._v1ImportRangeMap(m.rangeMapVerticalUp,v);let O;O=m.type==="expression"?new Yx(r,b,T,L,P):new Xx(t,b,T,L,P);const z=this._importLookAt(t,O);return z.offsetFromHeadBone.fromArray((c=m.offsetFromHeadBone)!==null&&c!==void 0?c:[0,.06,0]),z})}_v1ImportRangeMap(e,t){var r,o;return new iC((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.outputScale)!==null&&o!==void 0?o:t)}_v0Import(e,t,r){var o,l,c,h;return fn(this,void 0,void 0,function*(){const m=(o=this.parser.json.extensions)===null||o===void 0?void 0:o.VRM;if(!m)return null;const v=m.firstPerson;if(!v)return null;const b=v.lookAtTypeName==="BlendShape"?1:10,T=this._v0ImportDegreeMap(v.lookAtHorizontalInner,b),L=this._v0ImportDegreeMap(v.lookAtHorizontalOuter,b),P=this._v0ImportDegreeMap(v.lookAtVerticalDown,b),O=this._v0ImportDegreeMap(v.lookAtVerticalUp,b);let z;z=v.lookAtTypeName==="BlendShape"?new Yx(r,T,L,P,O):new Xx(t,T,L,P,O);const G=this._importLookAt(t,z);return v.firstPersonBoneOffset?G.offsetFromHeadBone.set((l=v.firstPersonBoneOffset.x)!==null&&l!==void 0?l:0,(c=v.firstPersonBoneOffset.y)!==null&&c!==void 0?c:.06,-((h=v.firstPersonBoneOffset.z)!==null&&h!==void 0?h:0)):G.offsetFromHeadBone.set(0,.06,0),G.faceFront.set(0,0,-1),G})}_v0ImportDegreeMap(e,t){var r,o;const l=e==null?void 0:e.curve;return JSON.stringify(l)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new iC((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.yRange)!==null&&o!==void 0?o:t)}_importLookAt(e,t){const r=new jh(e,t);if(this.helperRoot){const o=new P4(r);this.helperRoot.add(o),o.renderOrder=this.helperRoot.renderOrder}return r}}class U4{constructor(e,t){var r,o,l;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)===null||r===void 0||r,this.acceptLicenseUrls=(o=t==null?void 0:t.acceptLicenseUrls)!==null&&o!==void 0?o:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(l=t==null?void 0:t.acceptV0Meta)===null||l===void 0||l}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o;return fn(this,void 0,void 0,function*(){if(((t=this.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))===-1)return null;const l=(r=this.parser.json.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(l==null||l.specVersion!=="1.0-beta")return null;const c=l.meta;if(!c)return null;const h=c.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(h))throw new Error(`VRMMetaLoaderPlugin: The license url "${h}" is not accepted`);let m;return this.needThumbnailImage&&c.thumbnailImage!=null&&(m=(o=yield this._extractGLTFImage(c.thumbnailImage))!==null&&o!==void 0?o:void 0),{metaVersion:"1",name:c.name,version:c.version,authors:c.authors,copyrightInformation:c.copyrightInformation,contactInformation:c.contactInformation,references:c.references,thirdPartyLicenses:c.thirdPartyLicenses,thumbnailImage:m,licenseUrl:c.licenseUrl,avatarPermission:c.avatarPermission,allowExcessivelyViolentUsage:c.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:c.allowExcessivelySexualUsage,commercialUsage:c.commercialUsage,allowPoliticalOrReligiousUsage:c.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:c.allowAntisocialOrHateUsage,creditNotation:c.creditNotation,allowRedistribution:c.allowRedistribution,modification:c.modification,otherLicenseUrl:c.otherLicenseUrl}})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const r=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!r)return null;const o=r.meta;if(!o)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.X meta but acceptV0Meta is false");let l;return this.needThumbnailImage&&o.texture!=null&&o.texture!==-1&&(l=yield this.parser.getDependency("texture",o.texture)),{metaVersion:"0",allowedUserName:o.allowedUserName,author:o.author,commercialUssageName:o.commercialUssageName,contactInformation:o.contactInformation,licenseName:o.licenseName,otherLicenseUrl:o.otherLicenseUrl,otherPermissionUrl:o.otherPermissionUrl,reference:o.reference,sexualUssageName:o.sexualUssageName,texture:l!=null?l:void 0,title:o.title,version:o.version,violentUssageName:o.violentUssageName}})}_extractGLTFImage(e){var t;return fn(this,void 0,void 0,function*(){const r=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(r==null)return console.warn(`Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let o=r.uri;if(r.bufferView!=null){const m=yield this.parser.getDependency("bufferView",r.bufferView),v=new Blob([m],{type:r.mimeType});o=URL.createObjectURL(v)}if(o==null)return console.warn(`Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null;return yield new Tc().loadAsync((c=o,h=this.parser.options.path,typeof c!="string"||c===""?"":(/^https?:\/\//i.test(h)&&/^\//.test(c)&&(h=h.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(c)||/^data:.*,.*$/i.test(c)||/^blob:.*$/i.test(c)?c:h+c))).catch(m=>(console.error(m),console.warn("Failed to load a thumbnail image"),null));var c,h})}}class z4{constructor(e){this.scene=e.scene,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt,this.meta=e.meta}update(e){this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class H4 extends z4{constructor(e){super(e),this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.constraintManager=e.constraintManager}update(e){super.update(e),this.constraintManager&&this.constraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function dg(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.0-beta.7
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Vl(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}const Kx=(i,e)=>{const t=(r=>{switch(r){case li:return["Linear","( value )"];case Or:return["sRGB","( value )"];case void 0:return["RGBE","( value )"];case void 0:return["RGBM","( value, 7.0 )"];case void 0:return["RGBM","( value, 16.0 )"];case void 0:return["RGBD","( value, 256.0 )"];case void 0:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case void 0:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+r)}})(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"},G4={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},Zx={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"};function Qx(i,e){let t;return t=i&&i.isTexture?i.encoding:li,parseInt(qi,10)>=133&&e&&i&&i.isTexture&&i.format===tr&&i.type===ps&&i.encoding===Or&&(t=li),t}class Jx extends Os{constructor(e={}){super({vertexShader:`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,fragmentShader:`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, uvRotSin, -uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    vec4 texelColor = texture2D( map, mapUv );
    texelColor = mapTexelToLinear( texelColor );
    diffuseColor *= texelColor;
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, uv ) ).rgb;
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #if defined( OUTLINE )
    gl_FragColor = vec4(
      outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor ),
      diffuseColor.a
    );
    postCorrection();
    return;
  #endif

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}`}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.normalMapType=lo,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=G4.None,this._outlineWidthMode=Zx.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(qi,10)<129&&(e.skinning=e.skinning||!1),parseInt(qi,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=$y.merge([ot.common,ot.normalmap,ot.emissivemap,ot.fog,ot.lights,{litFactor:{value:new Ke(1,1,1)},mapUvTransform:{value:new vn},colorAlpha:{value:1},normalMapUvTransform:{value:new vn},shadeColorFactor:{value:new Ke(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new vn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new vn},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Ke(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new vn},parametricRimColorFactor:{value:new Ke(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new vn},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Ke(0,0,0)},emissiveMapUvTransform:{value:new vn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new vn},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Ke(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new vn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[this._ignoreVertexColor?"ignoreVertexColor":"",this._v0CompatShade?"v0CompatShade":"",this._debugMode!=="none"?`debugMode:${this._debugMode}`:"",this._outlineWidthMode!=="none"?`outlineWidthMode:${this._outlineWidthMode}`:"",this._isOutline?"isOutline":"",...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const o=r.capabilities.isWebGL2,l=parseInt(qi,10),c=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([m,v])=>!!v).map(([m,v])=>`#define ${m} ${v}`).join(`
`)+`
`,h=(this.matcapTexture!==null?Kx("matcapTextureTexelToLinear",Qx(this.matcapTexture,o))+`
`:"")+(this.shadeMultiplyTexture!==null?Kx("shadeMultiplyTextureTexelToLinear",Qx(this.shadeMultiplyTexture,o))+`
`:"")+(this.rimMultiplyTexture!==null?Kx("rimMultiplyTextureTexelToLinear",Qx(this.rimMultiplyTexture,o))+`
`:"");t.vertexShader=c+t.vertexShader,t.fragmentShader=c+h+t.fragmentShader,l<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(qi,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(qi,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._outlineWidthMode===Zx.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._outlineWidthMode===Zx.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class V4{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Ke().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return Vl(this,void 0,void 0,function*(){const o=(()=>Vl(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=Or))}))();return this._pendings.push(o),o})}assignTextureByIndex(e,t,r){return Vl(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}class qh{constructor(e,t={}){var r,o,l;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(o=t.v0CompatShade)!==null&&o!==void 0&&o,this.debugMode=(l=t.debugMode)!==null&&l!==void 0?l:"none",this._mToonMaterialSet=new Set}get name(){return qh.EXTENSION_NAME}beforeRoot(){return Vl(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Vl(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?Jx:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){return Vl(this,void 0,void 0,function*(){const t=this.parser,r=t.json.meshes[e].primitives,o=yield t.loadMesh(e);if(r.length===1){const l=o,c=r[0].material;c!=null&&this._setupPrimitive(l,c)}else{const l=o;for(let c=0;c<r.length;c++){const h=l.children[c],m=r[c].material;m!=null&&this._setupPrimitive(h,m)}}return o})}_removeUnlitExtensionIfMToonExists(){this.parser.json.materials.map((e,t)=>{var r;this._getMToonExtension(t)&&((r=e.extensions)===null||r===void 0?void 0:r.KHR_materials_unlit)&&delete e.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t;const r=(t=this.parser.json.materials[e].extensions)===null||t===void 0?void 0:t[qh.EXTENSION_NAME];if(r!=null)return r.specVersion==="1.0-beta"?r:void 0}_extendMaterialParams(e,t){var r;return Vl(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const o=new V4(this.parser,t);o.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),o.assignColor("shadeColorFactor",e.shadeColorFactor),o.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),o.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),o.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),o.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),o.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),o.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),o.assignColor("matcapFactor",e.matcapFactor),o.assignTexture("matcapTexture",e.matcapTexture,!0),o.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),o.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),o.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),o.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),o.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),o.assignPrimitive("outlineWidthMode",e.outlineWidthMode),o.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),o.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),o.assignColor("outlineColorFactor",e.outlineColorFactor),o.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),o.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),o.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),o.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),o.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),o.assignPrimitive("v0CompatShade",this.v0CompatShade),o.assignPrimitive("debugMode",this.debugMode),yield o.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const o=this._parseRenderOrder(r);return e.renderOrder=o+this.renderOrderOffset,this._generateOutline(e),void this._addToMaterialSet(e)}}_generateOutline(e){const t=e.material;if(!(t instanceof Jx)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=qn,e.material.push(r);const o=e.geometry,l=o.index?o.index.count:o.attributes.position.count/3;o.addGroup(0,l,0),o.addGroup(0,l,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(o=>r.add(o)):r.add(t);for(const o of r)o instanceof Jx&&this._mToonMaterialSet.add(o)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.0-beta.7
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $4(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}qh.EXTENSION_NAME="VRMC_materials_mtoon";class Xh{constructor(e){this.parser=e}get name(){return Xh.EXTENSION_NAME}afterRoot(e){return $4(this,void 0,void 0,function*(){const t=this.parser,r=[];e.scene.traverse(o=>{const l=o.material;l&&r.push(l)}),r.forEach(o=>{var l;const c=function(h,m){var v,b;let T=null;if(parseInt(qi,10)>=133)T=(b=(v=h.associations.get(m))===null||v===void 0?void 0:v.materials)!==null&&b!==void 0?b:null;else{const L=h.associations.get(m);(L==null?void 0:L.type)==="materials"&&(T=L.index)}return T}(t,o);if(c!=null){const h=this._getHDREmissiveMultiplierExtension(c);h&&((l=o.emissive)===null||l===void 0||l.multiplyScalar(h.emissiveMultiplier))}})})}_getHDREmissiveMultiplierExtension(e){var t;const r=(t=this.parser.json.materials[e].extensions)===null||t===void 0?void 0:t[Xh.EXTENSION_NAME];if(r!=null)return r}}/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.0-beta.7
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function W4(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}function Lc(i){return Math.pow(i,2.2)}Xh.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";class j4{constructor(e){var t;this.parser=e;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return W4(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,o=r==null?void 0:r.materialProperties;o&&o.forEach((l,c)=>{var h;if(l.shader==="VRM/MToon"){const m=this._parseV0MToonProperties(l,t.materials[c]);t.materials[c]=m}else if((h=l.shader)===null||h===void 0?void 0:h.startsWith("VRM/Unlit")){const m=this._parseV0UnlitProperties(l,t.materials[c]);t.materials[c]=m}else l.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${l.shader}`)})})}_parseV0MToonProperties(e,t){var r,o,l,c,h,m,v,b,T,L,P,O,z,G,k,A,N,I,B,V,X,Q,ae,le,he,re,ee,_,p,Z,E,ye,Re,Me,pe,ve,Ce,_e,Pe,Te,Oe,ze,He,$;const $e=(o=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&o!==void 0&&o,Le=((l=e.floatProperties)===null||l===void 0?void 0:l._ZWrite)===1&&$e,Fe=this._v0ParseRenderQueue(e),qe=(h=(c=e.keywordMap)===null||c===void 0?void 0:c._ALPHATEST_ON)!==null&&h!==void 0&&h,De=$e?"BLEND":qe?"MASK":"OPAQUE",oe=qe?(m=e.floatProperties)===null||m===void 0?void 0:m._Cutoff:void 0,vt=((b=(v=e.floatProperties)===null||v===void 0?void 0:v._CullMode)!==null&&b!==void 0?b:2)===0,j=this._portTextureTransform(e),Je=(L=(T=e.vectorProperties)===null||T===void 0?void 0:T._Color)===null||L===void 0?void 0:L.map((Ae,ke)=>ke===3?Ae:Lc(Ae)),Wt=(P=e.textureProperties)===null||P===void 0?void 0:P._MainTex,U=Wt!=null?{index:Wt,extensions:Object.assign({},j)}:void 0,n=(O=e.floatProperties)===null||O===void 0?void 0:O._BumpScale,s=(z=e.textureProperties)===null||z===void 0?void 0:z._BumpMap,a=s!=null?{index:s,scale:n,extensions:Object.assign({},j)}:void 0,f=(k=(G=e.vectorProperties)===null||G===void 0?void 0:G._EmissionColor)===null||k===void 0?void 0:k.map(Lc),g=(A=e.textureProperties)===null||A===void 0?void 0:A._EmissionMap,y=g!=null?{index:g,extensions:Object.assign({},j)}:void 0,S=(I=(N=e.vectorProperties)===null||N===void 0?void 0:N._ShadeColor)===null||I===void 0?void 0:I.map(Lc),C=(B=e.textureProperties)===null||B===void 0?void 0:B._ShadeTexture,R=C!=null?{index:C,extensions:Object.assign({},j)}:void 0;let D=(X=(V=e.floatProperties)===null||V===void 0?void 0:V._ShadeShift)!==null&&X!==void 0?X:0,H=(ae=(Q=e.floatProperties)===null||Q===void 0?void 0:Q._ShadeToony)!==null&&ae!==void 0?ae:.9;H=yi.lerp(H,1,.5+.5*D),D=-D-(1-H);const q=(le=e.floatProperties)===null||le===void 0?void 0:le._IndirectLightIntensity,K=q?1-q:void 0,ne=(he=e.textureProperties)===null||he===void 0?void 0:he._SphereAdd,te=ne!=null?{index:ne}:void 0,ue=(re=e.floatProperties)===null||re===void 0?void 0:re._RimLightingMix,ce=(ee=e.textureProperties)===null||ee===void 0?void 0:ee._RimTexture,ge=ce!=null?{index:ce,extensions:Object.assign({},j)}:void 0,Ne=(p=(_=e.vectorProperties)===null||_===void 0?void 0:_._RimColor)===null||p===void 0?void 0:p.map(Lc),Xe=(Z=e.floatProperties)===null||Z===void 0?void 0:Z._RimFresnelPower,Ge=(E=e.floatProperties)===null||E===void 0?void 0:E._RimLift,St=["none","worldCoordinates","screenCoordinates"][(Re=(ye=e.floatProperties)===null||ye===void 0?void 0:ye._OutlineWidthMode)!==null&&Re!==void 0?Re:0];let ct=(pe=(Me=e.floatProperties)===null||Me===void 0?void 0:Me._OutlineWidth)!==null&&pe!==void 0?pe:0;ct*=.01;const Mt=(ve=e.textureProperties)===null||ve===void 0?void 0:ve._OutlineWidthTexture,dt=Mt!=null?{index:Mt,extensions:Object.assign({},j)}:void 0,mt=(_e=(Ce=e.vectorProperties)===null||Ce===void 0?void 0:Ce._OutlineColor)===null||_e===void 0?void 0:_e.map(Lc),wn=((Pe=e.floatProperties)===null||Pe===void 0?void 0:Pe._OutlineColorMode)===1?(Te=e.floatProperties)===null||Te===void 0?void 0:Te._OutlineLightingMix:0,Zt=(Oe=e.textureProperties)===null||Oe===void 0?void 0:Oe._UvAnimMaskTexture,_n=Zt!=null?{index:Zt,extensions:Object.assign({},j)}:void 0,mn=(ze=e.floatProperties)===null||ze===void 0?void 0:ze._UvAnimScrollX;let Xt=(He=e.floatProperties)===null||He===void 0?void 0:He._UvAnimScrollY;Xt!=null&&(Xt=-Xt);const de={specVersion:"1.0-beta",transparentWithZWrite:Le,renderQueueOffsetNumber:Fe,shadeColorFactor:S,shadeMultiplyTexture:R,shadingShiftFactor:D,shadingToonyFactor:H,giEqualizationFactor:K,matcapTexture:te,rimLightingMixFactor:ue,rimMultiplyTexture:ge,parametricRimColorFactor:Ne,parametricRimFresnelPowerFactor:Xe,parametricRimLiftFactor:Ge,outlineWidthMode:St,outlineWidthFactor:ct,outlineWidthMultiplyTexture:dt,outlineColorFactor:mt,outlineLightingMixFactor:wn,uvAnimationMaskTexture:_n,uvAnimationScrollXSpeedFactor:mn,uvAnimationScrollYSpeedFactor:Xt,uvAnimationRotationSpeedFactor:($=e.floatProperties)===null||$===void 0?void 0:$._UvAnimRotation};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:Je,baseColorTexture:U},normalTexture:a,emissiveTexture:y,emissiveFactor:f,alphaMode:De,alphaCutoff:oe,doubleSided:vt,extensions:{VRMC_materials_mtoon:de}})}_parseV0UnlitProperties(e,t){var r,o,l,c;const h=e.shader==="VRM/UnlitTransparentZWrite",m=e.shader==="VRM/UnlitTransparent"||h,v=this._v0ParseRenderQueue(e),b=e.shader==="VRM/UnlitCutout",T=m?"BLEND":b?"MASK":"OPAQUE",L=b?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,P=this._portTextureTransform(e),O=(l=(o=e.vectorProperties)===null||o===void 0?void 0:o._Color)===null||l===void 0?void 0:l.map(Lc),z=(c=e.textureProperties)===null||c===void 0?void 0:c._MainTex,G=z!=null?{index:z,extensions:Object.assign({},P)}:void 0,k={specVersion:"1.0-beta",transparentWithZWrite:h,renderQueueOffsetNumber:v,shadeColorFactor:O,shadeMultiplyTexture:G};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:O,baseColorTexture:G},alphaMode:T,alphaCutoff:L,extensions:{VRMC_materials_mtoon:k}})}_portTextureTransform(e){var t,r,o,l,c;const h=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(h==null)return{};const m=[(r=h==null?void 0:h[0])!==null&&r!==void 0?r:0,(o=h==null?void 0:h[1])!==null&&o!==void 0?o:0],v=[(l=h==null?void 0:h[2])!==null&&l!==void 0?l:1,(c=h==null?void 0:h[3])!==null&&c!==void 0?c:1];return m[1]=v[1]*(1-m[1])%1,{KHR_texture_transform:{offset:m,scale:v}}}_v0ParseRenderQueue(e){var t,r,o;const l=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0&&r,c=((o=e.floatProperties)===null||o===void 0?void 0:o._ZWrite)===1;let h=0;return l&&e.renderQueue&&(h=c?Math.min(Math.max(e.renderQueue-2501,0),9):Math.min(Math.max(e.renderQueue-3e3,-9),0)),h}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.0-beta.7
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const pa=new fe;class e1 extends Fr{constructor(e){super(),this._attrPosition=new Ot(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(fl);const t=new bt;t.setAttribute("position",this._attrPosition);const r=new Bn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Yi(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){pa.setFromMatrixPosition(this.constraint.object.matrixWorld),this._attrPosition.setXYZ(0,pa.x,pa.y,pa.z),this.constraint.source&&pa.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,pa.x,pa.y,pa.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function t1(i,e){return e.set(i.elements[12],i.elements[13],i.elements[14])}const q4=new fe,X4=new fe;function pg(i,e){return i.decompose(q4,e,X4),e}function mg(i){return i.invert?i.invert():i.inverse(),i}const gg=new fe,vg=new fe,sC=new fe,oC=new Ut,Y4=new Qe;function aC(i){return i.invert?i.invert():i.getInverse(Y4.copy(i)),i}class K4{constructor(e){this._inverseCache=new Qe,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,o,l)=>(this._shouldUpdateInverse=!0,r[o]=l,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),aC(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const Rc=new Qe;class n1{constructor(e,t){this.weight=1,this.sourceSpace="model",this.destinationSpace="model",this.object=e,this.modelRoot=t}get source(){return this._source}get dependencies(){const e=new Set;return this._source&&e.add(this._source),this.destinationSpace==="model"&&this.object.parent&&e.add(this.object.parent),e}setSource(e){this._source=e}_getParentMatrixInModelSpace(e){return this.object.parent?(this.object.parent.updateWorldMatrix(!1,!1),e.copy(this.object.parent.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc)):e.identity(),e}_getDestinationMatrix(e){if(this.destinationSpace==="local")this.object.updateMatrix(),e.copy(this.object.matrix);else{if(this.destinationSpace!=="model")throw new Error(`VRMNodeConstraint: Unknown destinationSpace ${this.destinationSpace} detected`);this.object.updateWorldMatrix(!1,!1),e.copy(this.object.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc)}return e}_getSourceMatrix(e){if(!this._source)throw new Error("There is no source specified");if(this.sourceSpace==="local")this._source.updateMatrix(),e.copy(this._source.matrix);else{if(this.sourceSpace!=="model")throw new Error(`VRMNodeConstraint: Unknown sourceSpace ${this.sourceSpace} detected`);this._source.updateWorldMatrix(!1,!1),e.copy(this._source.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc)}return e}_getMatrixWorldToModel(e){let t=this.modelRoot.userData.inverseCacheProxy;return t||(t=this.modelRoot.userData.inverseCacheProxy=new K4(this.modelRoot.matrix)),e.copy(t.inverse),e}}const lC=new Ut(0,0,0,1),uC=new Ut,cC=new Ut,ma=new Qe,Z4=new fe,Q4=new fe;class J4 extends n1{constructor(){super(...arguments),this.aimVector=new fe(0,0,1),this.upVector=new fe(0,1,0),this.freezeAxes=[!0,!0],this._quatInitAim=new Ut,this._quatInvInitAim=new Ut,this._quatInitDst=new Ut}setInitState(){this._getDestinationMatrix(ma),pg(ma,this._quatInitDst),this._getAimQuat(this._quatInitAim),mg(this._quatInvInitAim.copy(this._quatInitAim))}update(){this.destinationSpace==="local"?this.object.quaternion.copy(lC):(this._getParentMatrixInModelSpace(ma),pg(ma,uC),mg(this.object.quaternion.copy(uC))),this._getAimDiffQuat(cC),this.object.quaternion.multiply(cC),this.object.quaternion.multiply(this._quatInitDst),this.object.updateMatrix()}_getAimDiffQuat(e){return this._getAimQuat(e),e.multiply(this._quatInvInitAim),e.slerp(lC,1-this.weight),e}_getAimQuat(e){return function(t,r,o,l,c,h){gg.copy(o).sub(r).normalize();const m=Math.asin(c.dot(l)),v=Math.asin(c.dot(gg));vg.crossVectors(c,l).normalize(),sC.crossVectors(vg,c);const b=Math.atan2(vg.dot(gg),sC.dot(gg));return t.setFromAxisAngle(c,h[0]?b:0),oC.setFromAxisAngle(vg,h[1]?m-v:0),t.multiply(oC),t}(e,this._getDestinationPosition(Z4),this._getSourcePosition(Q4),this.aimVector,this.upVector,this.freezeAxes)}_getDestinationPosition(e){return e.set(0,0,0),this._getDestinationMatrix(ma),t1(ma,e),e}_getSourcePosition(e){return e.set(0,0,0),this._source&&(this._getSourceMatrix(ma),t1(ma,e)),e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fC(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}function ez(i,e){const t=[];let r=i;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}class tz{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.object);t==null&&(t=new Set,this._objectConstraintsMap.set(e.object,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.object).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.update())}_processConstraint(e,t,r,o){if(r.has(e))return;if(t.has(e))throw new Error("VRMConstraintManager: Circular dependency detected while updating constraints");t.add(e);const l=e.dependencies;for(const c of l)ez(c,h=>{const m=this._objectConstraintsMap.get(h);if(m)for(const v of m)this._processConstraint(v,t,r,o)});o(e),r.add(e)}}const $l=new Qe;class nz extends n1{constructor(){super(...arguments),this.freezeAxes=[!0,!0,!0],this._v3InitDst=new fe,this._v3InitSrc=new fe}setInitState(){this._v3InitDst.copy(this.object.position),this._getSourcePosition(this._v3InitSrc)}update(){this._getSourceDiffPosition(this.object.position),this.destinationSpace==="model"&&(aC(this._getParentMatrixInModelSpace($l)),$l.elements[12]=0,$l.elements[13]=0,$l.elements[14]=0,this.object.position.applyMatrix4($l)),this.object.position.add(this._v3InitDst),this.object.updateMatrix()}_getSourceDiffPosition(e){return this._getSourcePosition(e),e.sub(this._v3InitSrc),function(t,r){r[0]&&r[1]&&r[2]||(r[0]||r[1]||r[2]?(r[0]||(t.x*=0),r[1]||(t.y*=0),r[2]||(t.z*=0)):t.set(0,0,0))}(e,this.freezeAxes),e.multiplyScalar(this.weight),e}_getSourcePosition(e){return e.set(0,0,0),this._source&&(this._getSourceMatrix($l),t1($l,e)),e}}const rz=new Ut(0,0,0,1),yg=new fe;function iz(i,e){return e[0]&&e[1]&&e[2]?i:e[0]||e[1]||e[2]?(function(t){yg.set(t.x,t.y,t.z);const r=yg.length(),o=r<Number.EPSILON?0:Math.atan2(r,t.w)/r;t.set(o*t.x,o*t.y,o*t.z,.5*Math.log(t.lengthSq()))}(i),e[0]||(i.x*=0),e[1]||(i.y*=0),e[2]||(i.z*=0),function(t){yg.set(t.x,t.y,t.z);const r=yg.length(),o=Math.exp(t.w),l=r<Number.EPSILON?0:o*Math.sin(r)/r;return t.set(l*t.x,l*t.y,l*t.z,o*Math.cos(r)),t}(i)):i.copy(rz)}const hC=new Ut(0,0,0,1),xg=new Qe,r1=new Ut,dC=new Ut;class sz extends n1{constructor(){super(...arguments),this.freezeAxes=[!0,!0,!0],this._quatInitSrc=new Ut,this._quatInvInitSrc=new Ut,this._quatInitDst=new Ut}setInitState(){this._quatInitDst.copy(this.object.quaternion),this._getSourceQuat(this._quatInitSrc),mg(this._quatInvInitSrc.copy(this._quatInitSrc))}update(){this.destinationSpace==="local"?this.object.quaternion.copy(this._quatInitDst):(this._getParentMatrixInModelSpace(xg),pg(xg,r1),mg(this.object.quaternion.copy(r1))),this._getSourceDiffQuat(dC),this.object.quaternion.multiply(dC),this.destinationSpace==="model"&&(this.object.quaternion.multiply(r1),this.object.quaternion.multiply(this._quatInitDst)),this.object.updateMatrix()}_getSourceDiffQuat(e){return this._getSourceQuat(e),this.sourceSpace==="local"?e.premultiply(this._quatInvInitSrc):e.multiply(this._quatInvInitSrc),iz(e,this.freezeAxes),e.slerp(hC,1-this.weight),e}_getSourceQuat(e){return e.copy(hC),this._source&&(this._getSourceMatrix(xg),pg(xg,e)),e}}class Ic{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return Ic.EXTENSION_NAME}afterRoot(e){return fC(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return fC(this,void 0,void 0,function*(){if(((t=this.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Ic.EXTENSION_NAME))===-1)return null;const r=new tz,o=yield this.parser.getDependencies("node");return o.forEach((l,c)=>{var h;const m=this.parser.json.nodes[c],v=(h=m==null?void 0:m.extensions)===null||h===void 0?void 0:h[Ic.EXTENSION_NAME];if(v!=null&&v.specVersion==="1.0-draft"){if(v==null?void 0:v.position){const b=this._importPositionConstraint(l,o,e.scene,v.position);r.addConstraint(b)}if(v==null?void 0:v.rotation){const b=this._importRotationConstraint(l,o,e.scene,v.rotation);r.addConstraint(b)}if(v==null?void 0:v.aim){const b=this._importAimConstraint(l,o,e.scene,v.aim);r.addConstraint(b)}}}),e.scene.updateMatrixWorld(),r.setInitState(),r})}_importPositionConstraint(e,t,r,o){const{source:l,sourceSpace:c,destinationSpace:h,weight:m,freezeAxes:v}=o,b=new nz(e,r);if(b.setSource(t[l]),c&&(b.sourceSpace=c),h&&(b.destinationSpace=h),m&&(b.weight=m),v&&(b.freezeAxes=v),this.helperRoot){const T=new e1(b);this.helperRoot.add(T),T.renderOrder=this.helperRoot.renderOrder}return b}_importRotationConstraint(e,t,r,o){const{source:l,sourceSpace:c,destinationSpace:h,weight:m,freezeAxes:v}=o,b=new sz(e,r);if(b.setSource(t[l]),c&&(b.sourceSpace=c),h&&(b.destinationSpace=h),m&&(b.weight=m),v&&(b.freezeAxes=v),this.helperRoot){const T=new e1(b);this.helperRoot.add(T)}return b}_importAimConstraint(e,t,r,o){const{source:l,aimVector:c,upVector:h,sourceSpace:m,destinationSpace:v,weight:b,freezeAxes:T}=o,L=new J4(e,r);if(L.setSource(t[l]),c&&L.aimVector.fromArray(c).normalize(),h&&L.upVector.fromArray(h).normalize(),m&&(L.sourceSpace=m),v&&(L.destinationSpace=v),b&&(L.weight=b),T&&(L.freezeAxes=T),this.helperRoot){const P=new e1(L);this.helperRoot.add(P)}return L}}Ic.EXTENSION_NAME="VRMC_node_constraint";/*!
* @pixiv/three-vrm-springbone v1.0.0-beta.7
* Spring bone module for @pixiv/three-vrm
*
* Copyright (c) 2020-2021 pixiv Inc.
* @pixiv/three-vrm-springbone is distributed under MIT License
* https://github.com/pixiv/three-vrm/blob/release/LICENSE
*/class pC{}const i1=new fe,Pc=new fe;class mC extends pC{constructor(e){var t,r,o;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new fe(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new fe(0,0,0),this.radius=(o=e==null?void 0:e.radius)!==null&&o!==void 0?o:1}get type(){return"capsule"}calculateCollision(e,t,r,o){i1.copy(this.offset).applyMatrix4(e),Pc.copy(this.tail).applyMatrix4(e),Pc.sub(i1);const l=Pc.lengthSq();o.copy(t).sub(i1);const c=Pc.dot(o);c<=0||(l<=c||Pc.multiplyScalar(c/l),o.sub(Pc));const h=r+this.radius,m=o.length()-h;return o.normalize(),m}}class gC extends pC{constructor(e){var t,r;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new fe(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:1}get type(){return"sphere"}calculateCollision(e,t,r,o){o.copy(this.offset).applyMatrix4(e),o.negate().add(t);const l=r+this.radius,c=o.length()-l;return o.normalize(),c}}const So=new fe;class oz extends bt{constructor(e){super(),this._currentRadius=0,this._currentOffset=new fe,this._currentTail=new fe,this._shape=e,this._attrPos=new Ot(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Ot(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),this._currentTail.equals(this._shape.tail)||(this._currentTail.copy(this._shape.tail),e=!0),e&&this._buildPosition()}_buildPosition(){So.copy(this._currentTail).sub(this._currentOffset);const e=So.length()/this._currentRadius;for(let o=0;o<=16;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(o,-Math.sin(l),-Math.cos(l),0),this._attrPos.setXYZ(17+o,e+Math.sin(l),Math.cos(l),0),this._attrPos.setXYZ(34+o,-Math.sin(l),0,-Math.cos(l)),this._attrPos.setXYZ(51+o,e+Math.sin(l),0,Math.cos(l))}for(let o=0;o<32;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(68+o,0,Math.sin(l),Math.cos(l)),this._attrPos.setXYZ(100+o,e,Math.sin(l),Math.cos(l))}const t=Math.atan2(So.y,Math.sqrt(So.x*So.x+So.z*So.z)),r=-Math.atan2(So.z,So.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(2*e,e,t),this._attrIndex.setXY(68+2*e,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+2*e,68+e,68+t),this._attrIndex.setXY(200+2*e,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class az extends bt{constructor(e){super(),this._currentRadius=0,this._currentOffset=new fe,this._shape=e,this._attrPos=new Ot(new Float32Array(288),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Ot(new Uint16Array(192),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(2*e,e,t),this._attrIndex.setXY(64+2*e,32+e,32+t),this._attrIndex.setXY(128+2*e,64+e,64+t)}this._attrIndex.needsUpdate=!0}}class vC extends Fr{constructor(e){if(super(),this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof gC)this._geometry=new az(this.collider.shape);else{if(!(this.collider.shape instanceof mC))throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");this._geometry=new oz(this.collider.shape)}const t=new Bn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Er(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class lz extends bt{constructor(e){super(),this._currentRadius=0,this._currentTail=new fe,this._springBone=e,this._attrPos=new Ot(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Ot(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._springBone.settings.hitRadius&&(this._currentRadius=this._springBone.settings.hitRadius,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(2*e,e,t),this._attrIndex.setXY(64+2*e,32+e,32+t),this._attrIndex.setXY(128+2*e,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}class uz extends Fr{constructor(e){super(),this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new lz(this.springBone);const t=new Bn({color:16776960,depthTest:!1,depthWrite:!1});this._line=new Er(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class yC extends Vt{constructor(e){super(),this.shape=e}}const cz=new fe,fz=new fe,hz=new Qe;function xC(i){return i.invert?i.invert():i.getInverse(hz.copy(i)),i}class dz{constructor(e){this._inverseCache=new Qe,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,o,l)=>(this._shouldUpdateInverse=!0,r[o]=l,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),xC(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const pz=Object.freeze(new Qe),mz=Object.freeze(new Ut),Wl=new fe,gz=new fe,vz=new Ut,Ar=new Qe,wg=new Qe;class yz{constructor(e,t,r={},o=[]){var l,c,h,m,v,b;this._currentTail=new fe,this._prevTail=new fe,this._nextTail=new fe,this._boneAxis=new fe,this._centerSpaceBoneLength=0,this._centerSpacePosition=new fe,this._center=null,this._parentWorldRotation=new Ut,this._initialLocalMatrix=new Qe,this._initialLocalRotation=new Ut,this._initialLocalChildPosition=new fe,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(l=r.hitRadius)!==null&&l!==void 0?l:0,stiffness:(c=r.stiffness)!==null&&c!==void 0?c:1,gravityPower:(h=r.gravityPower)!==null&&h!==void 0?h:0,gravityDir:(v=(m=r.gravityDir)===null||m===void 0?void 0:m.clone())!==null&&v!==void 0?v:new fe(0,-1,0),dragForce:(b=r.dragForce)!==null&&b!==void 0?b:.4},this.colliderGroups=o}get center(){return this._center}set center(e){var t;this._getMatrixCenterToWorld(Ar),this._currentTail.applyMatrix4(Ar),this._prevTail.applyMatrix4(Ar),this._nextTail.applyMatrix4(Ar),((t=this._center)===null||t===void 0?void 0:t.userData.inverseCacheProxy)&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new dz(this._center.matrixWorld))),this._getMatrixWorldToCenter(Ar),this._currentTail.applyMatrix4(Ar),this._prevTail.applyMatrix4(Ar),this._nextTail.applyMatrix4(Ar),Ar.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(Ar),this._centerSpaceBoneLength=Wl.copy(this._initialLocalChildPosition).applyMatrix4(Ar).sub(this._centerSpacePosition).length()}get initialLocalChildPosition(){return this._initialLocalChildPosition}setInitState(){this.bone.updateMatrix(),this.bone.updateWorldMatrix(!1,!1),this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize(),this._centerSpaceBoneLength=Wl.copy(this._initialLocalChildPosition).applyMatrix4(this.bone.matrixWorld).sub(this._centerSpacePosition).length()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail)}update(e){if(e<=0)return;var t,r;this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this.bone.parent?(t=this.bone.parent,r=this._parentWorldRotation,t.matrixWorld.decompose(cz,r,fz)):this._parentWorldRotation.copy(mz),this._getMatrixWorldToCenter(Ar),Ar.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(Ar),this._getMatrixWorldToCenter(wg),wg.multiply(this._getParentMatrixWorld());const o=this.settings.stiffness*e,l=gz.copy(this.settings.gravityDir).multiplyScalar(this.settings.gravityPower*e);this._nextTail.copy(this._currentTail).add(Wl.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(Wl.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(wg).sub(this._centerSpacePosition).normalize().multiplyScalar(o)).add(l),this._nextTail.sub(this._centerSpacePosition).normalize().multiplyScalar(this._centerSpaceBoneLength).add(this._centerSpacePosition),this._collision(this._nextTail),this._prevTail.copy(this._currentTail),this._currentTail.copy(this._nextTail);const c=xC(Ar.copy(wg.multiply(this._initialLocalMatrix))),h=vz.setFromUnitVectors(this._boneAxis,Wl.copy(this._nextTail).applyMatrix4(c).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(h),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{this._getMatrixWorldToCenter(Ar),Ar.multiply(r.matrixWorld);const o=r.shape.calculateCollision(Ar,e,this.settings.hitRadius,Wl);o<0&&(e.add(Wl.multiplyScalar(-o)),e.sub(this._centerSpacePosition).normalize().multiplyScalar(this._centerSpaceBoneLength).add(this._centerSpacePosition))})})}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}_getParentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:pz}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _g(i,e,t,r){return new(t||(t=Promise))(function(o,l){function c(v){try{m(r.next(v))}catch(b){l(b)}}function h(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){var b;v.done?o(v.value):(b=v.value,b instanceof t?b:new t(function(T){T(b)})).then(c,h)}m((r=r.apply(i,e||[])).next())})}function xz(i,e){const t=[];let r=i;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}function wC(i,e){i.children.forEach(t=>{e(t)||wC(t,e)})}class _C{constructor(){this._springBones=new Set,this._objectSpringBonesMap=new Map}get springBones(){return this._springBones}get colliderGroups(){const e=new Set;return this._springBones.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addSpringBone(e){this._springBones.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}deleteSpringBone(e){this._springBones.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._springBones)this._processSpringBone(r,e,t,o=>o.setInitState())}reset(){const e=new Set,t=new Set;for(const r of this._springBones)this._processSpringBone(r,e,t,o=>o.reset())}update(e){const t=new Set,r=new Set;for(const o of this._springBones)this._processSpringBone(o,t,r,l=>l.update(e)),wC(o.bone,l=>{var c,h;return((h=(c=this._objectSpringBonesMap.get(l))===null||c===void 0?void 0:c.size)!==null&&h!==void 0?h:0)>0||(l.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,o){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating constraints");t.add(e);const l=this._getDependencies(e);for(const c of l)xz(c,h=>{const m=this._objectSpringBonesMap.get(h);if(m)for(const v of m)this._processSpringBone(v,t,r,o)});o(e),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),t}}class kc{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return kc.EXTENSION_NAME}afterRoot(e){return _g(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return _g(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o,l,c;return _g(this,void 0,void 0,function*(){if(((t=e.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf(kc.EXTENSION_NAME))===-1)return null;const h=new _C,m=yield e.parser.getDependencies("node"),v=(r=e.parser.json.extensions)===null||r===void 0?void 0:r[kc.EXTENSION_NAME];if(!v||v.specVersion!=="1.0-beta")return null;const b=(o=v.colliders)===null||o===void 0?void 0:o.map((L,P)=>{var O,z,G,k,A;const N=m[L.node],I=L.shape;if(I.sphere)return this._importSphereCollider(N,{offset:new fe().fromArray((O=I.sphere.offset)!==null&&O!==void 0?O:[0,0,0]),radius:(z=I.sphere.radius)!==null&&z!==void 0?z:0});if(I.capsule)return this._importCapsuleCollider(N,{offset:new fe().fromArray((G=I.capsule.offset)!==null&&G!==void 0?G:[0,0,0]),radius:(k=I.capsule.radius)!==null&&k!==void 0?k:0,tail:new fe().fromArray((A=I.capsule.tail)!==null&&A!==void 0?A:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${P} has no valid shape`)}),T=(l=v.colliderGroups)===null||l===void 0?void 0:l.map((L,P)=>{var O;return{colliders:((O=L.colliders)!==null&&O!==void 0?O:[]).map(z=>{const G=b==null?void 0:b[z];if(G==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${P} attempted to use a collider #${z} but not found`);return G}),name:L.name}});return(c=v.springs)===null||c===void 0||c.forEach((L,P)=>{var O;const z=L.joints,G=(O=L.colliderGroups)===null||O===void 0?void 0:O.map(A=>{const N=T==null?void 0:T[A];if(N==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${P} attempted to use a colliderGroup ${A} but not found`);return N});let k;z.forEach(A=>{var N;if(k){const I=k.node,B=m[I],V=A.node,X=m[V],Q={hitRadius:k.hitRadius,dragForce:k.dragForce,gravityPower:k.gravityPower,stiffness:k.stiffness,gravityDir:new fe().fromArray((N=k.gravityDir)!==null&&N!==void 0?N:[0,1,0])},ae=this._importJoint(B,X,Q,G);h.addSpringBone(ae)}k=A})}),e.scene.updateMatrixWorld(),h.setInitState(),h})}_v0Import(e){var t,r,o;return _g(this,void 0,void 0,function*(){if(((t=e.parser.json.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))===-1)return null;const l=(r=e.parser.json.extensions)===null||r===void 0?void 0:r.VRM,c=l==null?void 0:l.secondaryAnimation;if(!c)return null;const h=c==null?void 0:c.boneGroups;if(!h)return null;const m=new _C,v=yield e.parser.getDependencies("node"),b=(o=c.colliderGroups)===null||o===void 0?void 0:o.map(T=>{var L;const P=v[T.node];return{colliders:((L=T.colliders)!==null&&L!==void 0?L:[]).map((O,z)=>{var G,k,A;const N=new fe(0,0,0);return O.offset&&N.set((G=O.offset.x)!==null&&G!==void 0?G:0,(k=O.offset.y)!==null&&k!==void 0?k:0,O.offset.z?-O.offset.z:0),this._importSphereCollider(P,{offset:N,radius:(A=O.radius)!==null&&A!==void 0?A:0})})}});return h==null||h.forEach((T,L)=>{const P=T.bones;P&&P.forEach(O=>{var z,G,k,A;const N=v[O],I=new fe;T.gravityDir?I.set((z=T.gravityDir.x)!==null&&z!==void 0?z:0,(G=T.gravityDir.y)!==null&&G!==void 0?G:0,(k=T.gravityDir.z)!==null&&k!==void 0?k:0):I.set(0,-1,0);const B={hitRadius:T.hitRadius,dragForce:T.dragForce,gravityPower:T.gravityPower,stiffness:T.stiffiness,gravityDir:I},V=(A=T.colliderGroups)===null||A===void 0?void 0:A.map(X=>{const Q=b==null?void 0:b[X];if(Q==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${L} attempted to use a colliderGroup ${X} but not found`);return Q});N.traverse(X=>{var Q;const ae=(Q=X.children[0])!==null&&Q!==void 0?Q:null,le=this._importJoint(X,ae,B,V);m.addSpringBone(le)})})}),e.scene.updateMatrixWorld(),m.setInitState(),m})}_importJoint(e,t,r,o){const l=new yz(e,t,r,o);if(this.jointHelperRoot){const c=new uz(l);this.jointHelperRoot.add(c),c.renderOrder=this.jointHelperRoot.renderOrder}return l}_importSphereCollider(e,t){const{offset:r,radius:o}=t,l=new gC({offset:r,radius:o}),c=new yC(l);if(e.add(c),this.colliderHelperRoot){const h=new vC(c);this.colliderHelperRoot.add(h),h.renderOrder=this.colliderHelperRoot.renderOrder}return c}_importCapsuleCollider(e,t){const{offset:r,radius:o,tail:l}=t,c=new mC({offset:r,radius:o,tail:l}),h=new yC(c);if(e.add(h),this.colliderHelperRoot){const m=new vC(h);this.colliderHelperRoot.add(m),m.renderOrder=this.colliderHelperRoot.renderOrder}return h}}kc.EXTENSION_NAME="VRMC_springBone";class ZG{constructor(e,t){var r,o,l,c,h,m,v,b,T,L;this.parser=e;const P=t==null?void 0:t.helperRoot;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new fg(e),this.firstPersonPlugin=(o=t==null?void 0:t.firstPersonPlugin)!==null&&o!==void 0?o:new T4(e),this.humanoidPlugin=(l=t==null?void 0:t.humanoidPlugin)!==null&&l!==void 0?l:new A4(e),this.lookAtPlugin=(c=t==null?void 0:t.lookAtPlugin)!==null&&c!==void 0?c:new B4(e,{helperRoot:P}),this.metaPlugin=(h=t==null?void 0:t.metaPlugin)!==null&&h!==void 0?h:new U4(e),this.mtoonMaterialPlugin=(m=t==null?void 0:t.mtoonMaterialPlugin)!==null&&m!==void 0?m:new qh(e),this.materialsHDREmissiveMultiplierPlugin=(v=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&v!==void 0?v:new Xh(e),this.materialsV0CompatPlugin=(b=t==null?void 0:t.materialsV0CompatPlugin)!==null&&b!==void 0?b:new j4(e),this.springBonePlugin=(T=t==null?void 0:t.springBonePlugin)!==null&&T!==void 0?T:new kc(e,{colliderHelperRoot:P,jointHelperRoot:P}),this.constraintPlugin=(L=t==null?void 0:t.constraintPlugin)!==null&&L!==void 0?L:new Ic(e,{helperRoot:P})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return dg(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return dg(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t!=null?t:null}extendMaterialParams(e,t){return dg(this,void 0,void 0,function*(){yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return dg(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.constraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e),yield this.materialsHDREmissiveMultiplierPlugin.afterRoot(e);const t=new H4({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:e.userData.vrmHumanoid,lookAt:e.userData.vrmLookAt,meta:e.userData.vrmMeta,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,constraintManager:e.userData.vrmConstraintManager});e.userData.vrm=t})}}function bC(i){if(Object.values(i).forEach(e=>{(e==null?void 0:e.isTexture)&&e.dispose()}),i.isShaderMaterial){const e=i.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;(r==null?void 0:r.isTexture)&&r.dispose()})}i.dispose()}function wz(i){const e=i.geometry;e&&e.dispose();const t=i.skeleton;t&&t.dispose();const r=i.material;r&&(Array.isArray(r)?r.forEach(o=>bC(o)):r&&bC(r))}class bg{constructor(){}}bg.deepDispose=function(i){i.traverse(wz)},bg.removeUnnecessaryJoints=function(i){const e=new Map;i.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,o=r.geometry.getAttribute("skinIndex");let l=e.get(o);if(!l){const c=[],h=[],m={},v=o.array;for(let b=0;b<v.length;b++){const T=v[b];m[T]===void 0&&(m[T]=c.length,c.push(r.skeleton.bones[T]),h.push(r.skeleton.boneInverses[T])),v[b]=m[T]}o.copyArray(v),o.needsUpdate=!0,l=new la(c,h),e.set(o,l)}r.bind(l,new Qe)})},bg.removeUnnecessaryVertices=function(i){const e=new Map;i.traverse(t=>{if(!t.isMesh)return;const r=t,o=r.geometry,l=o.index;if(l==null)return;const c=e.get(o);if(c!=null)return void(r.geometry=c);const h=new bt;h.morphTargetsRelative=o.morphTargetsRelative,h.setDrawRange(o.drawRange.start,o.drawRange.count),o.groups.forEach(T=>{h.addGroup(T.start,T.count,T.materialIndex)}),e.set(o,h);const m=[],v=[];{const T=l.array,L=new T.constructor(T.length);let P=0;for(let O=0;O<T.length;O++){const z=T[O];let G=m[z];G==null&&(m[z]=P,v[P]=z,G=P,P++),L[O]=G}h.setIndex(new Ot(L,1,!1))}Object.keys(o.attributes).forEach(T=>{const L=o.attributes[T];if(L.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const P=L.array,{itemSize:O,normalized:z}=L,G=new P.constructor(v.length*O);v.forEach((k,A)=>{for(let N=0;N<O;N++)G[A*O+N]=P[k*O+N]}),h.setAttribute(T,new Ot(G,O,z))});let b=!0;Object.keys(o.morphAttributes).forEach(T=>{h.morphAttributes[T]=[];const L=o.morphAttributes[T];for(let P=0;P<L.length;P++){const O=L[P];if(O.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const z=O.array,{itemSize:G,normalized:k}=O,A=new z.constructor(v.length*G);v.forEach((N,I)=>{for(let B=0;B<G;B++)A[I*G+B]=z[N*G+B]}),b=b&&A.every(N=>N===0),h.morphAttributes[T][P]=new Ot(A,G,k)}}),b&&(h.morphAttributes={}),r.geometry=h}),Array.from(e.keys()).forEach(t=>{t.dispose()})},bg.rotateVRM0=function(i){var e;((e=i.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(i.scene.rotation.y=Math.PI)};var s1=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});function _z(){var i=new s1(3);return s1!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function o1(i){var e=i[0],t=i[1],r=i[2];return Math.hypot(e,t,r)}(function(){var i=_z();return function(e,t,r,o,l,c){var h,m;for(t||(t=3),r||(r=0),o?m=Math.min(o*t+r,e.length):m=e.length,h=r;h<m;h+=t)i[0]=e[h],i[1]=e[h+1],i[2]=e[h+2],l(i,i,c),e[h]=i[0],e[h+1]=i[1],e[h+2]=i[2];return e}})();function bz(i){var e=i[0],t=i[1],r=i[2],o=i[3],l=i[4],c=i[5],h=i[6],m=i[7],v=i[8],b=i[9],T=i[10],L=i[11],P=i[12],O=i[13],z=i[14],G=i[15],k=e*c-t*l,A=e*h-r*l,N=e*m-o*l,I=t*h-r*c,B=t*m-o*c,V=r*m-o*h,X=v*O-b*P,Q=v*z-T*P,ae=v*G-L*P,le=b*z-T*O,he=b*G-L*O,re=T*G-L*z;return k*re-A*he+N*le+I*ae-B*Q+V*X}function Sz(i,e,t){var r=e[0],o=e[1],l=e[2],c=e[3],h=e[4],m=e[5],v=e[6],b=e[7],T=e[8],L=e[9],P=e[10],O=e[11],z=e[12],G=e[13],k=e[14],A=e[15],N=t[0],I=t[1],B=t[2],V=t[3];return i[0]=N*r+I*h+B*T+V*z,i[1]=N*o+I*m+B*L+V*G,i[2]=N*l+I*v+B*P+V*k,i[3]=N*c+I*b+B*O+V*A,N=t[4],I=t[5],B=t[6],V=t[7],i[4]=N*r+I*h+B*T+V*z,i[5]=N*o+I*m+B*L+V*G,i[6]=N*l+I*v+B*P+V*k,i[7]=N*c+I*b+B*O+V*A,N=t[8],I=t[9],B=t[10],V=t[11],i[8]=N*r+I*h+B*T+V*z,i[9]=N*o+I*m+B*L+V*G,i[10]=N*l+I*v+B*P+V*k,i[11]=N*c+I*b+B*O+V*A,N=t[12],I=t[13],B=t[14],V=t[15],i[12]=N*r+I*h+B*T+V*z,i[13]=N*o+I*m+B*L+V*G,i[14]=N*l+I*v+B*P+V*k,i[15]=N*c+I*b+B*O+V*A,i}function Mz(i,e){var t=e[0],r=e[1],o=e[2],l=e[4],c=e[5],h=e[6],m=e[8],v=e[9],b=e[10];return i[0]=Math.hypot(t,r,o),i[1]=Math.hypot(l,c,h),i[2]=Math.hypot(m,v,b),i}function Tz(i,e){var t=new s1(3);Mz(t,e);var r=1/t[0],o=1/t[1],l=1/t[2],c=e[0]*r,h=e[1]*o,m=e[2]*l,v=e[4]*r,b=e[5]*o,T=e[6]*l,L=e[8]*r,P=e[9]*o,O=e[10]*l,z=c+b+O,G=0;return z>0?(G=Math.sqrt(z+1)*2,i[3]=.25*G,i[0]=(T-P)/G,i[1]=(L-m)/G,i[2]=(h-v)/G):c>b&&c>O?(G=Math.sqrt(1+c-b-O)*2,i[3]=(T-P)/G,i[0]=.25*G,i[1]=(h+v)/G,i[2]=(L+m)/G):b>O?(G=Math.sqrt(1+b-c-O)*2,i[3]=(L-m)/G,i[0]=(h+v)/G,i[1]=.25*G,i[2]=(T+P)/G):(G=Math.sqrt(1+O-c-b)*2,i[3]=(h-v)/G,i[0]=(L+m)/G,i[1]=(T+P)/G,i[2]=.25*G),i}var ln,Sg,a1,jl;function $t(i,e,t,r){var o,l=arguments.length,c=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,r);else for(var h=i.length-1;h>=0;h--)(o=i[h])&&(c=(l<3?o(c):l>3?o(e,t,c):o(e,t))||c);return l>3&&c&&Object.defineProperty(e,t,c),c}(function(i){i.ACCESSOR="Accessor",i.ANIMATION="Animation",i.ANIMATION_CHANNEL="AnimationChannel",i.ANIMATION_SAMPLER="AnimationSampler",i.BUFFER="Buffer",i.CAMERA="Camera",i.MATERIAL="Material",i.MESH="Mesh",i.PRIMITIVE="Primitive",i.PRIMITIVE_TARGET="PrimitiveTarget",i.NODE="Node",i.ROOT="Root",i.SCENE="Scene",i.SKIN="Skin",i.TEXTURE="Texture",i.TEXTURE_INFO="TextureInfo"})(ln||(ln={})),function(i){i.INTERLEAVED="interleaved",i.SEPARATE="separate"}(Sg||(Sg={})),function(i){i[i.R=4096]="R",i[i.G=256]="G",i[i.B=16]="B",i[i.A=1]="A"}(a1||(a1={})),function(i){i.GLTF="GLTF",i.GLB="GLB"}(jl||(jl={}));class Mg{constructor(e,t,r){if(this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=e,this.i=t,this.h=r,!t.canLink(r))throw new Error("Cannot link disconnected graphs/documents.")}getName(){return this.t}getParent(){return this.i}getChild(){return this.h}setChild(e){return this.h=e,this}dispose(){this.o||(this.o=!0,this.u.forEach(e=>e()),this.u.length=0)}onDispose(e){return this.u.push(e),this}isDisposed(){return this.o}}class Ez{constructor(){this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}on(e,t){return this.u[e]=this.u[e]||[],this.u[e].push(t),this}emit(e,t){for(const r of this.u[e]||[])r(t);return this}getLinks(){return Array.from(this.p)}listParentLinks(e){return Array.from(this.v.get(e)||this.l)}listParents(e){return this.listParentLinks(e).map(t=>t.getParent())}listChildLinks(e){return Array.from(this.g.get(e)||this.l)}listChildren(e){return this.listChildLinks(e).map(t=>t.getChild())}disconnectChildren(e){return(this.g.get(e)||this.l).forEach(t=>t.dispose()),this}disconnectParents(e,t){let r=Array.from(this.v.get(e)||this.l);return t&&(r=r.filter(o=>t(o.getParent()))),r.forEach(o=>o.dispose()),this}swapChild(e,t,r){const o=this.g.get(e)||this.l;return Array.from(o).filter(l=>l.getChild()===t).forEach(l=>{this.v.get(t).delete(l),l.setChild(r),this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(l)}),this}link(e,t,r){if(!r)return null;const o=new Mg(e,t,r);return this.registerLink(o),o}registerLink(e){this.p.add(e);const t=e.getParent();this.g.has(t)||this.g.set(t,new Set),this.g.get(t).add(e);const r=e.getChild();return this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(e),e.onDispose(()=>this.unlink(e)),e}unlink(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}function $n(i,e){Object.defineProperty(i,e,{get:function(){return this["__"+e]},set:function(t){const r=this["__"+e];r&&!Array.isArray(r)&&r.dispose(),t&&!Array.isArray(t)&&t.onDispose(()=>{this["__"+e]=null}),this["__"+e]=t},enumerable:!0})}function pr(i,e){}class ci{static createBufferFromDataURI(e){if(typeof Buffer=="undefined"){const t=atob(e.split(",")[1]),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r.buffer}{const t=e.split(",")[1],r=e.indexOf("base64")>=0;return this.trim(Buffer.from(t,r?"base64":"utf8"))}}static encodeText(e){return typeof TextEncoder!="undefined"?new TextEncoder().encode(e).buffer:this.trim(Buffer.from(e))}static decodeText(e){return typeof TextDecoder!="undefined"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static trim(e){const{byteOffset:t,byteLength:r}=e;return e.buffer.slice(t,t+r)}static concat(e){let t=0;for(const l of e)t+=l.byteLength;const r=new Uint8Array(t);let o=0;for(const l of e)r.set(new Uint8Array(l),o),o+=l.byteLength;return r.buffer}static pad(e,t=0){const r=this.padNumber(e.byteLength);if(r!==e.byteLength){const o=new Uint8Array(r);if(o.set(new Uint8Array(e)),t!==0)for(let l=e.byteLength;l<r;l++)o[l]=t;return o.buffer}return e}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),o=new DataView(t);let l=e.byteLength;for(;l--;)if(r.getUint8(l)!==o.getUint8(l))return!1;return!0}}class Tg{static hexToFactor(e,t){e=Math.floor(e);const r=t;return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[r,o,l]=this.convertLinearToSRGB(e,t);return 255*r<<16^255*o<<8^255*l<<0}static convertSRGBToLinear(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.04045?.0773993808*r[l]:Math.pow(.9478672986*r[l]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.0031308?12.92*r[l]:1.055*Math.pow(r[l],.41666)-.055;return t}}class Eg{static basename(e){const t=e.split(/[\\/]/).pop();return t.substr(0,t.lastIndexOf("."))}static extension(e){return e.indexOf("data:")!==0?e.split(/[\\/]/).pop().split(/[.]/).pop():e.indexOf("data:image/png")===0?"png":e.indexOf("data:image/jpeg")===0?"jpeg":"bin"}}class Ag{match(e){const t=new Uint8Array(e);return t.length>=8&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}getSize(e){const t=new DataView(e);return ci.decodeText(e.slice(12,16))===Ag.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}Ag.PNG_FRIED_CHUNK_NAME="CgBI";class Oc{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let r=0;const o=this.getSize(e,t);if(!o)return null;for(;o[0]>1||o[1]>1;)r+=o[0]*o[1]*4,o[0]=Math.max(Math.floor(o[0]/2),1),o[1]=Math.max(Math.floor(o[1]/2),1);return r+=4,r}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}}function Az(i,e){if(e>i.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(i.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return i}Oc.impls={"image/jpeg":new class{match(i){const e=new Uint8Array(i);return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(i){let e,t,r=new DataView(i,4);for(;r.byteLength;){if(e=r.getUint16(0,!1),Az(r,e),t=r.getUint8(e+1),t===192||t===193||t===194)return[r.getUint16(e+7,!1),r.getUint16(e+5,!1)];r=new DataView(i,r.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(i){return 3}},"image/png":new Ag};class _r{static identity(e){return e}static eq(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>1e-5)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,r,o){let l=o1([e[0],e[1],e[2]]);const c=o1([e[4],e[5],e[6]]),h=o1([e[8],e[9],e[10]]);bz(e)<0&&(l=-l),t[0]=e[12],t[1]=e[13],t[2]=e[14];const m=e.slice(),v=1/l,b=1/c,T=1/h;m[0]*=v,m[1]*=v,m[2]*=v,m[4]*=b,m[5]*=b,m[6]*=b,m[8]*=T,m[9]*=T,m[10]*=T,Tz(r,m),o[0]=l,o[1]=c,o[2]=h}static compose(e,t,r,o){const l=o,c=t[0],h=t[1],m=t[2],v=t[3],b=c+c,T=h+h,L=m+m,P=c*b,O=c*T,z=c*L,G=h*T,k=h*L,A=m*L,N=v*b,I=v*T,B=v*L,V=r[0],X=r[1],Q=r[2];return l[0]=(1-(G+A))*V,l[1]=(O+B)*V,l[2]=(z-I)*V,l[3]=0,l[4]=(O-B)*X,l[5]=(1-(P+A))*X,l[6]=(k+N)*X,l[7]=0,l[8]=(z+I)*Q,l[9]=(k-N)*Q,l[10]=(1-(P+G))*Q,l[11]=0,l[12]=e[0],l[13]=e[1],l[14]=e[2],l[15]=1,l}}class Bi{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Bi.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Bi.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Bi.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Bi.Verbosity.ERROR&&console.error(e)}}Bi.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},Bi.DEFAULT_INSTANCE=new Bi(Bi.Verbosity.INFO);const SC="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",MC=new Set,Cz=function(){let i="";for(let e=0;e<6;e++)i+=SC.charAt(Math.floor(Math.random()*SC.length));return i},Lz=function(){for(let i=0;i<999;i++){const e=Cz();if(!MC.has(e))return MC.add(e),e}return""},Wn=i=>i;class Dc extends class{constructor(e){this.graph=void 0,this.o=!1,this.graph=e,this.graph=e}canLink(e){return this.graph===e.graph}isDisposed(){return this.o}dispose(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}detach(){return this.graph.disconnectParents(this),this}swap(e,t){return this.graph.swapChild(this,e,t),this}addGraphChild(e,t){return e.push(t),t.onDispose(()=>{const r=e.filter(o=>o!==t);e.length=0;for(const o of r)e.push(o)}),this}removeGraphChild(e,t){return e.filter(r=>r.getChild()===t).forEach(r=>r.dispose()),this}clearGraphChildList(e){for(;e.length>0;)e[0].dispose();return this}listGraphParents(){return this.graph.listParents(this)}}{constructor(e,t=""){super(e),this.graph=void 0,this.m={},this.t="",this.graph=e,this.t=t}getName(){return this.t}setName(e){return this.t=e,this}getExtras(){return this.m}setExtras(e){return this.m=e,this}clone(){const e=new this.constructor(this.graph).copy(this,Wn);return this.graph.emit("clone",e),e}copy(e,t=Wn){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.listGraphParents()}}const TC="Pass extension name (string) as lookup token, not a constructor.";class Ui extends Dc{constructor(...e){super(...e),this.extensions=[]}copy(e,t=Wn){return super.copy(e,t),this.clearGraphChildList(this.extensions),e.extensions.forEach(r=>{const o=r.getChild();this.setExtension(o.extensionName,t(o))}),this}getExtension(e){if(typeof e!="string")throw new Error(TC);const t=this.extensions.find(r=>r.getChild().extensionName===e);return t?t.getChild():null}setExtension(e,t){if(typeof e!="string")throw new Error(TC);const r=this.getExtension(e);return r&&this.removeGraphChild(this.extensions,r),t?(t.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,t))):this}listExtensions(){return this.extensions.map(e=>e.getChild())}}$t([pr],Ui.prototype,"extensions",void 0);class zt extends Ui{constructor(...e){super(...e),this.propertyType=ln.ACCESSOR,this.S=null,this.M=zt.Type.SCALAR,this.I=zt.ComponentType.FLOAT,this.N=!1,this.C=_r.identity,this.O=_r.identity,this.buffer=null}copy(e,t=Wn){return super.copy(e,t),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?t(e.buffer.getChild()):null),this}static getElementSize(e){switch(e){case zt.Type.SCALAR:return 1;case zt.Type.VEC2:return 2;case zt.Type.VEC3:return 3;case zt.Type.VEC4:case zt.Type.MAT2:return 4;case zt.Type.MAT3:return 9;case zt.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case zt.ComponentType.BYTE:case zt.ComponentType.UNSIGNED_BYTE:return 1;case zt.ComponentType.SHORT:case zt.ComponentType.UNSIGNED_SHORT:return 2;case zt.ComponentType.UNSIGNED_INT:case zt.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMin(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const c=this.S[o+l];Number.isFinite(c)&&(e[l]=Math.min(e[l],c))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMax(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=-1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const c=this.S[o+l];Number.isFinite(c)&&(e[l]=Math.max(e[l],c))}return e}getCount(){return this.S?this.S.length/this.getElementSize():0}getType(){return this.M}setType(e){return this.M=e,this}getElementSize(){return zt.getElementSize(this.M)}getComponentSize(){return this.S.BYTES_PER_ELEMENT}getComponentType(){return this.I}getNormalized(){return this.N}setNormalized(e){return this.N=e,e?(this.O=t=>_r.denormalize(t,this.I),this.C=t=>_r.normalize(t,this.I)):(this.O=_r.identity,this.C=_r.identity),this}getScalar(e){const t=this.getElementSize();return this.O(this.S[e*t])}setScalar(e,t){return this.S[e*this.getElementSize()]=this.C(t),this}getElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)t[o]=this.O(this.S[e*r+o]);return t}setElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)this.S[e*r+o]=this.C(t[o]);return this}getBuffer(){return this.buffer?this.buffer.getChild():null}setBuffer(e){return this.buffer=this.graph.link("buffer",this,e),this}getArray(){return this.S}setArray(e){return this.I=e?function(t){switch(t.constructor){case Float32Array:return zt.ComponentType.FLOAT;case Uint32Array:return zt.ComponentType.UNSIGNED_INT;case Uint16Array:return zt.ComponentType.UNSIGNED_SHORT;case Uint8Array:return zt.ComponentType.UNSIGNED_BYTE;case Int16Array:return zt.ComponentType.SHORT;case Int8Array:return zt.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):zt.ComponentType.FLOAT,this.S=e,this}getByteLength(){return this.S?this.S.byteLength:0}}zt.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},zt.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},$t([$n],zt.prototype,"buffer",void 0);class Cg extends Ui{constructor(...e){super(...e),this.propertyType=ln.ANIMATION,this.channels=[],this.samplers=[]}copy(e,t=Wn){return super.copy(e,t),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach(r=>this.addChannel(t(r.getChild()))),e.samplers.forEach(r=>this.addSampler(t(r.getChild()))),this}addChannel(e){const t=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,t)}removeChannel(e){return this.removeGraphChild(this.channels,e)}listChannels(){return this.channels.map(e=>e.getChild())}addSampler(e){const t=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,t)}removeSampler(e){return this.removeGraphChild(this.samplers,e)}listSamplers(){return this.samplers.map(e=>e.getChild())}}$t([pr],Cg.prototype,"channels",void 0),$t([pr],Cg.prototype,"samplers",void 0);class Lg extends Dc{constructor(...e){super(...e),this.propertyType=ln.ANIMATION_CHANNEL,this._=null,this.targetNode=null,this.sampler=null}copy(e,t=Wn){return super.copy(e,t),this._=e._,this.setTargetNode(e.targetNode?t(e.targetNode.getChild()):null),this.setSampler(e.sampler?t(e.sampler.getChild()):null),this}getTargetPath(){return this._}setTargetPath(e){return this._=e,this}getTargetNode(){return this.targetNode?this.targetNode.getChild():null}setTargetNode(e){return this.targetNode=this.graph.link("target.node",this,e),this}getSampler(){return this.sampler?this.sampler.getChild():null}setSampler(e){return this.sampler=this.graph.link("sampler",this,e),this}}Lg.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},$t([$n],Lg.prototype,"targetNode",void 0),$t([$n],Lg.prototype,"sampler",void 0);class ql extends Dc{constructor(...e){super(...e),this.propertyType=ln.ANIMATION_SAMPLER,this.L=ql.Interpolation.LINEAR,this.input=null,this.output=null}copy(e,t=Wn){return super.copy(e,t),this.L=e.L,this.setInput(e.input?t(e.input.getChild()):null),this.setOutput(e.output?t(e.output.getChild()):null),this}getInterpolation(){return this.L}setInterpolation(e){return this.L=e,this}getInput(){return this.input?this.input.getChild():null}setInput(e){return this.input=this.graph.link("input",this,e),this}getOutput(){return this.output?this.output.getChild():null}setOutput(e){return this.output=this.graph.link("output",this,e),this}}ql.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},$t([$n],ql.prototype,"input",void 0),$t([$n],ql.prototype,"output",void 0);class EC extends Ui{constructor(...e){super(...e),this.propertyType=ln.BUFFER,this.P=""}copy(e,t=Wn){return super.copy(e,t),this.P=e.P,this}getURI(){return this.P}setURI(e){return this.P=e,this}}class Xl extends Ui{constructor(...e){super(...e),this.propertyType=ln.CAMERA,this.M=Xl.Type.PERSPECTIVE,this.U=.1,this.k=100,this.F=null,this.j=2*Math.PI*50/360,this.D=1,this.J=1}copy(e,t=Wn){return super.copy(e,t),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}getType(){return this.M}setType(e){return this.M=e,this}getZNear(){return this.U}setZNear(e){return this.U=e,this}getZFar(){return this.k}setZFar(e){return this.k=e,this}getAspectRatio(){return this.F}setAspectRatio(e){return this.F=e,this}getYFov(){return this.j}setYFov(e){return this.j=e,this}getXMag(){return this.D}setXMag(e){return this.D=e,this}getYMag(){return this.J}setYMag(e){return this.J=e,this}}Xl.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class AC extends Dc{constructor(e,t){super(e),this.$=void 0,this.$=t,this.$.addExtensionProperty(this)}clone(){const e=new this.constructor(this.graph,this.$).copy(this,Wn);return this.graph.emit("clone",e),e}dispose(){this.$.removeExtensionProperty(this),super.dispose()}T(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}AC.EXTENSION_NAME=void 0;class CC extends Mg{constructor(...e){super(...e),this.semantic=""}copy(e){return this.semantic=e.semantic,this}}class LC extends Mg{copy(e){return this}}class Rz extends Mg{constructor(...e){super(...e),this.channels=0}copy(e){return this.channels=e.channels,this}}class Iz extends Ez{linkAttribute(e,t,r){if(!r)return null;const o=new CC(e,t,r);return o.semantic=e,this.registerLink(o),o}linkIndex(e,t,r){if(!r)return null;const o=new LC(e,t,r);return this.registerLink(o),o}linkTexture(e,t,r,o){if(!o)return null;const l=new Rz(e,r,o);return l.channels=t,this.registerLink(l),l}}class _s extends Ui{constructor(...e){super(...e),this.propertyType=ln.TEXTURE_INFO,this.V=0,this.W=null,this.q=null,this.Y=_s.WrapMode.REPEAT,this.H=_s.WrapMode.REPEAT}copy(e,t=Wn){return super.copy(e,t),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}equals(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}getTexCoord(){return this.V}setTexCoord(e){return this.V=e,this}getMagFilter(){return this.W}setMagFilter(e){return this.W=e,this}getMinFilter(){return this.q}setMinFilter(e){return this.q=e,this}getWrapS(){return this.Y}setWrapS(e){return this.Y=e,this}getWrapT(){return this.H}setWrapT(e){return this.H=e,this}}_s.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},_s.MagFilter={NEAREST:9728,LINEAR:9729},_s.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Rg,G:Ig,B:Pg,A:Pz}=a1;class Ur extends Ui{constructor(...e){super(...e),this.propertyType=ln.MATERIAL,this.Z=Ur.AlphaMode.OPAQUE,this.K=.5,this.X=!1,this.tt=[1,1,1,1],this.st=[0,0,0],this.et=1,this.it=1,this.rt=1,this.nt=1,this.baseColorTexture=null,this.baseColorTextureInfo=this.graph.link("baseColorTextureInfo",this,new _s(this.graph)),this.emissiveTexture=null,this.emissiveTextureInfo=this.graph.link("emissiveTextureInfo",this,new _s(this.graph)),this.normalTexture=null,this.normalTextureInfo=this.graph.link("normalTextureInfo",this,new _s(this.graph)),this.occlusionTexture=null,this.occlusionTextureInfo=this.graph.link("occlusionTextureInfo",this,new _s(this.graph)),this.metallicRoughnessTexture=null,this.metallicRoughnessTextureInfo=this.graph.link("metallicRoughnessTextureInfo",this,new _s(this.graph))}copy(e,t=Wn){return super.copy(e,t),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=[...e.tt],this.st=[...e.st],this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?t(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(t(e.baseColorTextureInfo.getChild()),t),this.setEmissiveTexture(e.emissiveTexture?t(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(t(e.emissiveTextureInfo.getChild()),t),this.setNormalTexture(e.normalTexture?t(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(t(e.normalTextureInfo.getChild()),t),this.setOcclusionTexture(e.occlusionTexture?t(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(t(e.occlusionTextureInfo.getChild()),t),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?t(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(t(e.metallicRoughnessTextureInfo.getChild()),t),this}equals(e){if(this.getAlphaMode()!==e.getAlphaMode()||this.getAlphaCutoff()!==e.getAlphaCutoff()||this.getDoubleSided()!==e.getDoubleSided()||!_r.eq(this.getBaseColorFactor(),e.getBaseColorFactor())||!_r.eq(this.getEmissiveFactor(),e.getEmissiveFactor())||this.getNormalScale()!==e.getNormalScale()||this.getOcclusionStrength()!==e.getOcclusionStrength()||this.getRoughnessFactor()!==e.getRoughnessFactor()||this.getMetallicFactor()!==e.getMetallicFactor()||(this.getBaseColorTexture()||e.getBaseColorTexture())&&(this.getBaseColorTexture()!==e.getBaseColorTexture()||this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))||(this.getEmissiveTexture()||e.getEmissiveTexture())&&(this.getEmissiveTexture()!==e.getEmissiveTexture()||this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))||(this.getNormalTexture()||e.getNormalTexture())&&(this.getNormalTexture()!==e.getNormalTexture()||this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))||(this.getOcclusionTexture()||e.getOcclusionTexture())&&(this.getOcclusionTexture()!==e.getOcclusionTexture()||this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))||(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture())&&(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture()||this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo())))return!1;const t=this.listExtensions(),r=e.listExtensions();if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==r[o])return!1;return!0}dispose(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),super.dispose()}getDoubleSided(){return this.X}setDoubleSided(e){return this.X=e,this}getAlpha(){return this.tt[3]}setAlpha(e){return this.tt[3]=e,this}getAlphaMode(){return this.Z}setAlphaMode(e){return this.Z=e,this}getAlphaCutoff(){return this.K}setAlphaCutoff(e){return this.K=e,this}getBaseColorFactor(){return this.tt}setBaseColorFactor(e){return this.tt=e,this}getBaseColorHex(){return Tg.factorToHex(this.tt)}setBaseColorHex(e){return Tg.hexToFactor(e,this.tt),this}getBaseColorTexture(){return this.baseColorTexture?this.baseColorTexture.getChild():null}getBaseColorTextureInfo(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}setBaseColorTexture(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",Rg|Ig|Pg|Pz,this,e),this}getEmissiveFactor(){return this.st}setEmissiveFactor(e){return this.st=e,this}getEmissiveHex(){return Tg.factorToHex(this.st)}setEmissiveHex(e){return Tg.hexToFactor(e,this.st),this}getEmissiveTexture(){return this.emissiveTexture?this.emissiveTexture.getChild():null}getEmissiveTextureInfo(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}setEmissiveTexture(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",Rg|Ig|Pg,this,e),this}getNormalScale(){return this.et}setNormalScale(e){return this.et=e,this}getNormalTexture(){return this.normalTexture?this.normalTexture.getChild():null}getNormalTextureInfo(){return this.normalTexture?this.normalTextureInfo.getChild():null}setNormalTexture(e){return this.normalTexture=this.graph.linkTexture("normalTexture",Rg|Ig|Pg,this,e),this}getOcclusionStrength(){return this.it}setOcclusionStrength(e){return this.it=e,this}getOcclusionTexture(){return this.occlusionTexture?this.occlusionTexture.getChild():null}getOcclusionTextureInfo(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}setOcclusionTexture(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",Rg,this,e),this}getRoughnessFactor(){return this.rt}setRoughnessFactor(e){return this.rt=e,this}getMetallicFactor(){return this.nt}setMetallicFactor(e){return this.nt=e,this}getMetallicRoughnessTexture(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}getMetallicRoughnessTextureInfo(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}setMetallicRoughnessTexture(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",Ig|Pg,this,e),this}}Ur.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},$t([$n],Ur.prototype,"baseColorTexture",void 0),$t([$n],Ur.prototype,"baseColorTextureInfo",void 0),$t([$n],Ur.prototype,"emissiveTexture",void 0),$t([$n],Ur.prototype,"emissiveTextureInfo",void 0),$t([$n],Ur.prototype,"normalTexture",void 0),$t([$n],Ur.prototype,"normalTextureInfo",void 0),$t([$n],Ur.prototype,"occlusionTexture",void 0),$t([$n],Ur.prototype,"occlusionTextureInfo",void 0),$t([$n],Ur.prototype,"metallicRoughnessTexture",void 0),$t([$n],Ur.prototype,"metallicRoughnessTextureInfo",void 0);class l1 extends Ui{constructor(...e){super(...e),this.propertyType=ln.MESH,this.ht=[],this.primitives=[]}copy(e,t=Wn){return super.copy(e,t),this.ht=[...e.ht],this.clearGraphChildList(this.primitives),e.primitives.forEach(r=>this.addPrimitive(t(r.getChild()))),this}addPrimitive(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}removePrimitive(e){return this.removeGraphChild(this.primitives,e)}listPrimitives(){return this.primitives.map(e=>e.getChild())}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}}$t([pr],l1.prototype,"primitives",void 0);class ga extends Ui{constructor(...e){super(...e),this.propertyType=ln.NODE,this.ot=[0,0,0],this.ut=[0,0,0,1],this.ct=[1,1,1],this.ht=[],this.i=null,this.camera=null,this.mesh=null,this.skin=null,this.children=[]}copy(e,t=Wn){return super.copy(e,t),this.ot=[...e.ot],this.ut=[...e.ut],this.ct=[...e.ct],this.ht=[...e.ht],this.setCamera(e.camera?t(e.camera.getChild()):null),this.setMesh(e.mesh?t(e.mesh.getChild()):null),this.setSkin(e.skin?t(e.skin.getChild()):null),t!==Wn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}getTranslation(){return this.ot}getRotation(){return this.ut}getScale(){return this.ct}setTranslation(e){return this.ot=e,this}setRotation(e){return this.ut=e,this}setScale(e){return this.ct=e,this}getMatrix(){return _r.compose(this.ot,this.ut,this.ct,[])}setMatrix(e){return _r.decompose(e,this.ot,this.ut,this.ct),this}getWorldTranslation(){const e=[0,0,0];return _r.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return _r.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return _r.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let o=this;o instanceof ga;o=o.i)e.push(o);let t;const r=e.pop().getMatrix();for(;t=e.pop();)Sz(r,r,t.getMatrix());return r}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}getParent(){return this.i}getMesh(){return this.mesh?this.mesh.getChild():null}setMesh(e){return this.mesh=this.graph.link("mesh",this,e),this}getCamera(){return this.camera?this.camera.getChild():null}setCamera(e){return this.camera=this.graph.link("camera",this,e),this}getSkin(){return this.skin?this.skin.getChild():null}setSkin(e){return this.skin=this.graph.link("skin",this,e),this}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}$t([$n],ga.prototype,"camera",void 0),$t([$n],ga.prototype,"mesh",void 0),$t([$n],ga.prototype,"skin",void 0),$t([pr],ga.prototype,"children",void 0);class va extends Ui{constructor(...e){super(...e),this.propertyType=ln.PRIMITIVE,this.at=va.Mode.TRIANGLES,this.material=null,this.indices=null,this.attributes=[],this.targets=[]}copy(e,t=Wn){return super.copy(e,t),this.at=e.at,this.setIndices(e.indices?t(e.indices.getChild()):null),this.setMaterial(e.material?t(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this.clearGraphChildList(this.targets),e.targets.forEach(r=>this.addTarget(t(r.getChild()))),this}getIndices(){return this.indices?this.indices.getChild():null}setIndices(e){return this.indices=this.graph.linkIndex("indices",this,e),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}getMaterial(){return this.material?this.material.getChild():null}setMaterial(e){return this.material=this.graph.link("material",this,e),this}getMode(){return this.at}setMode(e){return this.at=e,this}listTargets(){return this.targets.map(e=>e.getChild())}addTarget(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}removeTarget(e){return this.removeGraphChild(this.targets,e)}}va.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},$t([$n],va.prototype,"material",void 0),$t([$n],va.prototype,"indices",void 0),$t([pr],va.prototype,"attributes",void 0),$t([pr],va.prototype,"targets",void 0);class RC extends Dc{constructor(...e){super(...e),this.propertyType=ln.PRIMITIVE_TARGET,this.attributes=[]}copy(e,t=Wn){return super.copy(e,t),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return o.semantic=e,this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}}$t([pr],RC.prototype,"attributes",void 0);class u1 extends Ui{constructor(...e){super(...e),this.propertyType=ln.SCENE,this.children=[]}copy(e,t=Wn){return super.copy(e,t),t!==Wn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}$t([pr],u1.prototype,"children",void 0);class Yh extends Ui{constructor(...e){super(...e),this.propertyType=ln.SKIN,this.skeleton=null,this.inverseBindMatrices=null,this.joints=[]}copy(e,t=Wn){return super.copy(e,t),this.setSkeleton(e.skeleton?t(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?t(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach(r=>this.addJoint(t(r.getChild()))),this}getSkeleton(){return this.skeleton?this.skeleton.getChild():null}setSkeleton(e){return this.skeleton=this.graph.link("skeleton",this,e),this}getInverseBindMatrices(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}setInverseBindMatrices(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}addJoint(e){const t=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,t)}removeJoint(e){return this.removeGraphChild(this.joints,e)}listJoints(){return this.joints.map(e=>e.getChild())}}$t([$n],Yh.prototype,"skeleton",void 0),$t([$n],Yh.prototype,"inverseBindMatrices",void 0),$t([pr],Yh.prototype,"joints",void 0);class IC extends Ui{constructor(...e){super(...e),this.propertyType=ln.TEXTURE,this.lt=null,this.ft="",this.P=""}copy(e,t=Wn){return super.copy(e,t),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}getMimeType(){return this.ft||Oc.extensionToMimeType(Eg.extension(this.P))}setMimeType(e){return this.ft=e,this}getURI(){return this.P}setURI(e){return this.P=e,this.ft=Oc.extensionToMimeType(Eg.extension(e)),this}getImage(){return this.lt}setImage(e){return this.lt=e,this}getSize(){return this.lt?Oc.getSize(this.lt,this.getMimeType()):null}}class Ki extends Dc{constructor(e){super(e),this.propertyType=ln.ROOT,this.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},this.gt=new Set,this.defaultScene=null,this.accessors=[],this.animations=[],this.buffers=[],this.cameras=[],this.materials=[],this.meshes=[],this.nodes=[],this.scenes=[],this.skins=[],this.textures=[],e.on("clone",t=>this.wt(t))}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=Wn){if(super.copy(e,t),t===Wn)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach(r=>this.vt(t(r.getChild()))),e.animations.forEach(r=>this.Tt(t(r.getChild()))),e.buffers.forEach(r=>this.yt(t(r.getChild()))),e.cameras.forEach(r=>this.At(t(r.getChild()))),e.materials.forEach(r=>this.Et(t(r.getChild()))),e.meshes.forEach(r=>this.xt(t(r.getChild()))),e.nodes.forEach(r=>this.St(t(r.getChild()))),e.scenes.forEach(r=>this.Mt(t(r.getChild()))),e.skins.forEach(r=>this.It(t(r.getChild()))),e.textures.forEach(r=>this.bt(t(r.getChild()))),this.setDefaultScene(e.defaultScene?t(e.defaultScene.getChild()):null),this}wt(e){return e instanceof u1?this.Mt(e):e instanceof ga?this.St(e):e instanceof Xl?this.At(e):e instanceof Yh?this.It(e):e instanceof l1?this.xt(e):e instanceof Ur?this.Et(e):e instanceof IC?this.bt(e):e instanceof Cg?this.Tt(e):e instanceof zt?this.vt(e):e instanceof EC&&this.yt(e),this}getAsset(){return this.dt}listExtensionsUsed(){return Array.from(this.gt)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}Rt(e){return this.gt.add(e),this}Nt(e){return this.gt.delete(e),this}Mt(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}listScenes(){return this.scenes.map(e=>e.getChild())}setDefaultScene(e){return this.defaultScene=this.graph.link("scene",this,e),this}getDefaultScene(){return this.defaultScene?this.defaultScene.getChild():null}St(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}listNodes(){return this.nodes.map(e=>e.getChild())}At(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}listCameras(){return this.cameras.map(e=>e.getChild())}It(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}listSkins(){return this.skins.map(e=>e.getChild())}xt(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}listMeshes(){return this.meshes.map(e=>e.getChild())}Et(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}listMaterials(){return this.materials.map(e=>e.getChild())}bt(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}listTextures(){return this.textures.map(e=>e.getChild())}Tt(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}listAnimations(){return this.animations.map(e=>e.getChild())}vt(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}listAccessors(){return this.accessors.map(e=>e.getChild())}yt(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}listBuffers(){return this.buffers.map(e=>e.getChild())}}$t([$n],Ki.prototype,"defaultScene",void 0),$t([pr],Ki.prototype,"accessors",void 0),$t([pr],Ki.prototype,"animations",void 0),$t([pr],Ki.prototype,"buffers",void 0),$t([pr],Ki.prototype,"cameras",void 0),$t([pr],Ki.prototype,"materials",void 0),$t([pr],Ki.prototype,"meshes",void 0),$t([pr],Ki.prototype,"nodes",void 0),$t([pr],Ki.prototype,"scenes",void 0),$t([pr],Ki.prototype,"skins",void 0),$t([pr],Ki.prototype,"textures",void 0);class c1{constructor(){this.Ct=new Iz,this.Ot=new Ki(this.Ct),this._t=Bi.DEFAULT_INSTANCE}getRoot(){return this.Ot}getGraph(){return this.Ct}getLogger(){return this._t}setLogger(e){return this._t=e,this}clone(){return new c1().merge(this).setLogger(this._t)}merge(e){const t={};for(const c of e.getRoot().listExtensionsUsed()){const h=this.createExtension(c.constructor);c.isRequired()&&h.setRequired(!0),t[h.extensionName]=h}const r=new Set,o=new Map;r.add(e.Ot),o.set(e.Ot,this.Ot);for(const c of e.Ct.getLinks())for(const h of[c.getParent(),c.getChild()]){if(r.has(h))continue;let m;if(h.propertyType===ln.TEXTURE_INFO)m=h;else{const v=h.constructor;m=h instanceof AC?new v(this.Ct,t[h.extensionName]):new v(this.Ct)}o.set(h,m),r.add(h)}const l=c=>{const h=o.get(c);if(!h)throw new Error("Could resolve property.");return h};for(const c of r){const h=o.get(c);if(!h)throw new Error("Could resolve property.");h.copy(c,l)}return this}async transform(...e){const t=e.map(r=>r.name);for(const r of e)await r(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===t)||new e(this)}createScene(e=""){const t=new u1(this.Ct,e);return this.Ot.Mt(t),t}createNode(e=""){const t=new ga(this.Ct,e);return this.Ot.St(t),t}createCamera(e=""){const t=new Xl(this.Ct,e);return this.Ot.At(t),t}createSkin(e=""){const t=new Yh(this.Ct,e);return this.Ot.It(t),t}createMesh(e=""){const t=new l1(this.Ct,e);return this.Ot.xt(t),t}createPrimitive(){return new va(this.Ct)}createPrimitiveTarget(e=""){return new RC(this.Ct,e)}createMaterial(e=""){const t=new Ur(this.Ct,e);return this.Ot.Et(t),t}createTexture(e=""){const t=new IC(this.Ct,e);return this.Ot.bt(t),t}createAnimation(e=""){const t=new Cg(this.Ct,e);return this.Ot.Tt(t),t}createAnimationChannel(e=""){return new Lg(this.Ct,e)}createAnimationSampler(e=""){return new ql(this.Ct,e)}createAccessor(e="",t=null){t||(t=this.getRoot().listBuffers()[0]);const r=new zt(this.Ct,e).setBuffer(t);return this.Ot.vt(r),r}createBuffer(e=""){const t=new EC(this.Ct,e);return this.Ot.yt(t),t}}function Zi(){return(Zi=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i}).apply(this,arguments)}class kz{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),t.texCoord!==void 0&&e.setTexCoord(t.texCoord);const r=this.jsonDoc.json.textures[t.index];if(r.sampler===void 0)return;const o=this.jsonDoc.json.samplers[r.sampler];o.magFilter!==void 0&&e.setMagFilter(o.magFilter),o.minFilter!==void 0&&e.setMinFilter(o.minFilter),o.wrapS!==void 0&&e.setWrapS(o.wrapS),o.wrapT!==void 0&&e.setWrapT(o.wrapT)}}const f1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PC={logger:Bi.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function kg(i,e){const t=e.bufferViews[i.bufferView],r=e.jsonDoc.json.bufferViews[i.bufferView],o=f1[i.componentType],l=zt.getElementSize(i.type),c=o.BYTES_PER_ELEMENT;if(r.byteStride!==void 0&&r.byteStride!==l*c)return function(m,v){const b=v.bufferViews[m.bufferView],T=v.jsonDoc.json.bufferViews[m.bufferView],L=f1[m.componentType],P=zt.getElementSize(m.type),O=L.BYTES_PER_ELEMENT,z=m.byteOffset||0,G=new L(m.count*P),k=new DataView(b.buffer,b.byteOffset,b.byteLength),A=T.byteStride;for(let N=0;N<m.count;N++)for(let I=0;I<P;I++){const B=z+N*A+I*O;let V;switch(m.componentType){case zt.ComponentType.FLOAT:V=k.getFloat32(B,!0);break;case zt.ComponentType.UNSIGNED_INT:V=k.getUint32(B,!0);break;case zt.ComponentType.UNSIGNED_SHORT:V=k.getUint16(B,!0);break;case zt.ComponentType.UNSIGNED_BYTE:V=k.getUint8(B);break;case zt.ComponentType.SHORT:V=k.getInt16(B,!0);break;case zt.ComponentType.BYTE:V=k.getInt8(B);break;default:throw new Error(`Unexpected componentType "${m.componentType}".`)}G[N*P+I]=V}return G}(i,e);const h=t.byteOffset+(i.byteOffset||0);return new o(t.buffer.slice(h,h+i.count*l*c))}var Kh,Zh;(function(i){i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(Kh||(Kh={})),function(i){i.ARRAY_BUFFER="ARRAY_BUFFER",i.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",i.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",i.OTHER="OTHER"}(Zh||(Zh={}));class Qi{constructor(e,t,r){this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=e,this.jsonDoc=t,this.options=r;const o=e.getRoot(),l=o.listBuffers().length,c=o.listTextures().length;this.bufferURIGenerator=new kC(l>1,r.basename),this.imageURIGenerator=new kC(c>1,r.basename),this.logger=e.getLogger()}createTextureInfoDef(e,t){const r={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},o=JSON.stringify(r);this.samplerDefIndexMap.has(o)||(this.samplerDefIndexMap.set(o,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const l={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(o)},c=JSON.stringify(l);this.textureDefIndexMap.has(c)||(this.textureDefIndexMap.set(c,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(l));const h={index:this.textureDefIndexMap.get(c)};return t.getTexCoord()!==0&&(h.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,h),h}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some(r=>r.getName()==="POSITION"||r.getName()==="input")&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,r){if(this.options.format===jl.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const o=Oc.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,o),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.Lt.get(e);if(t)return t;for(const r of this.Bt.getGraph().listParentLinks(e)){if(r.getName()==="inverseBindMatrices")return Qi.BufferViewUsage.INVERSE_BIND_MATRICES;if(r instanceof CC)return Qi.BufferViewUsage.ARRAY_BUFFER;if(r instanceof LC)return Qi.BufferViewUsage.ELEMENT_ARRAY_BUFFER}return Qi.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const r=this.Lt.get(e);if(r&&r!==t)throw new Error(`Accessor with usage "${r}" cannot be reused as "${t}".`);return this.Lt.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,r]of Array.from(this.Lt.entries()))e[r]=e[r]||[],e[r].push(t);return e}}Qi.BufferViewTarget=Kh,Qi.BufferViewUsage=Zh,Qi.USAGE_TO_TARGET={[Zh.ARRAY_BUFFER]:Kh.ARRAY_BUFFER,[Zh.ELEMENT_ARRAY_BUFFER]:Kh.ELEMENT_ARRAY_BUFFER};class kC{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=t}createURI(e,t){return e.getURI()?e.getURI():this.multiple?`${this.basename}_${this.counter++}.${t}`:`${this.basename}.${t}`}}const{BufferViewUsage:h1}=Qi;var Og;(function(i){i[i.JSON=1313821514]="JSON",i[i.BIN=5130562]="BIN"})(Og||(Og={}));class Oz{constructor(){this._t=Bi.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=Sg.INTERLEAVED}setLogger(e){return this._t=e,this}registerExtensions(e){for(const t of e)this.gt.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.Pt,e),this}setVertexLayout(e){return this.Ut=e,this}kt(e){function t(r){if(r.uri&&!(r.uri in e.resources)&&r.uri.match(/data:/)){const o=`__${Lz()}.${Eg.extension(r.uri)}`;e.resources[o]=ci.createBufferFromDataURI(r.uri),r.uri=o}}(e.json.images||[]).forEach(r=>{if(r.bufferView===void 0&&r.uri===void 0)throw new Error("Missing resource URI or buffer view.");t(r)}),(e.json.buffers||[]).forEach(t)}readJSON(e){return e=this.Ft(e),this.kt(e),class{static read(t,r=PC){const o=Zi({},PC,r),{json:l}=t,c=new c1;this.validate(t,o);const h=new kz(t),m=l.asset,v=c.getRoot().getAsset();m.copyright&&(v.copyright=m.copyright),m.extras&&(v.extras=m.extras),l.extras!==void 0&&c.getRoot().setExtras(Zi({},l.extras));const b=l.extensionsUsed||[],T=l.extensionsRequired||[];for(const A of o.extensions)if(b.includes(A.EXTENSION_NAME)){const N=c.createExtension(A).setRequired(T.includes(A.EXTENSION_NAME));for(const I of N.readDependencies)N.install(I,o.dependencies[I])}const L=l.buffers||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.BUFFER)).forEach(A=>A.preread(h,ln.BUFFER)),h.buffers=L.map(A=>{const N=c.createBuffer(A.name);return A.extras&&N.setExtras(A.extras),A.uri&&A.uri.indexOf("__")!==0&&N.setURI(A.uri),N}),h.bufferViewBuffers=(l.bufferViews||[]).map((A,N)=>{if(!h.bufferViews[N]){const I=t.json.buffers[A.buffer],B=new Uint8Array(I.uri?t.resources[I.uri]:t.resources["@glb.bin"],A.byteOffset||0,A.byteLength);h.bufferViews[N]=B}return h.buffers[A.buffer]}),h.accessors=(l.accessors||[]).map(A=>{const N=c.createAccessor(A.name,h.bufferViewBuffers[A.bufferView]).setType(A.type);if(A.extras&&N.setExtras(A.extras),A.normalized!==void 0&&N.setNormalized(A.normalized),A.bufferView===void 0&&!A.sparse)return N;let I;return I=A.sparse!==void 0?function(B,V){const X=f1[B.componentType],Q=zt.getElementSize(B.type);let ae;ae=B.bufferView!==void 0?kg(B,V):new X(B.count*Q);const le=B.sparse,he=le.count,re=Zi({},B,le.indices,{count:he,type:"SCALAR"}),ee=Zi({},B,le.values,{count:he}),_=kg(re,V),p=kg(ee,V);for(let Z=0;Z<re.count;Z++)for(let E=0;E<Q;E++)ae[_[Z]*Q+E]=p[Z*Q+E];return ae}(A,h):kg(A,h),N.setArray(I),N});const P=l.images||[],O=l.textures||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.TEXTURE)).forEach(A=>A.preread(h,ln.TEXTURE)),h.textures=P.map(A=>{const N=c.createTexture(A.name);if(A.extras&&N.setExtras(A.extras),A.bufferView!==void 0){const I=l.bufferViews[A.bufferView],B=t.json.buffers[I.buffer],V=I.byteOffset||0,X=(B.uri?t.resources[B.uri]:t.resources["@glb.bin"]).slice(V,V+I.byteLength);N.setImage(X)}else A.uri!==void 0&&(N.setImage(t.resources[A.uri]),A.uri.indexOf("__")!==0&&N.setURI(A.uri));if(A.mimeType!==void 0)N.setMimeType(A.mimeType);else if(A.uri){const I=Eg.extension(A.uri);N.setMimeType(Oc.extensionToMimeType(I))}return N}),h.materials=(l.materials||[]).map(A=>{const N=c.createMaterial(A.name);A.extras&&N.setExtras(A.extras),A.alphaMode!==void 0&&N.setAlphaMode(A.alphaMode),A.alphaCutoff!==void 0&&N.setAlphaCutoff(A.alphaCutoff),A.doubleSided!==void 0&&N.setDoubleSided(A.doubleSided);const I=A.pbrMetallicRoughness||{};if(I.baseColorFactor!==void 0&&N.setBaseColorFactor(I.baseColorFactor),A.emissiveFactor!==void 0&&N.setEmissiveFactor(A.emissiveFactor),I.metallicFactor!==void 0&&N.setMetallicFactor(I.metallicFactor),I.roughnessFactor!==void 0&&N.setRoughnessFactor(I.roughnessFactor),I.baseColorTexture!==void 0){const B=I.baseColorTexture;N.setBaseColorTexture(h.textures[O[B.index].source]),h.setTextureInfo(N.getBaseColorTextureInfo(),B)}if(A.emissiveTexture!==void 0){const B=A.emissiveTexture;N.setEmissiveTexture(h.textures[O[B.index].source]),h.setTextureInfo(N.getEmissiveTextureInfo(),B)}if(A.normalTexture!==void 0){const B=A.normalTexture;N.setNormalTexture(h.textures[O[B.index].source]),h.setTextureInfo(N.getNormalTextureInfo(),B),A.normalTexture.scale!==void 0&&N.setNormalScale(A.normalTexture.scale)}if(A.occlusionTexture!==void 0){const B=A.occlusionTexture;N.setOcclusionTexture(h.textures[O[B.index].source]),h.setTextureInfo(N.getOcclusionTextureInfo(),B),A.occlusionTexture.strength!==void 0&&N.setOcclusionStrength(A.occlusionTexture.strength)}if(I.metallicRoughnessTexture!==void 0){const B=I.metallicRoughnessTexture;N.setMetallicRoughnessTexture(h.textures[O[B.index].source]),h.setTextureInfo(N.getMetallicRoughnessTextureInfo(),B)}return N});const z=l.meshes||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.PRIMITIVE)).forEach(A=>A.preread(h,ln.PRIMITIVE)),h.meshes=z.map(A=>{const N=c.createMesh(A.name);return A.extras&&N.setExtras(A.extras),A.weights!==void 0&&N.setWeights(A.weights),(A.primitives||[]).forEach(I=>{const B=c.createPrimitive();I.extras&&B.setExtras(I.extras),I.material!==void 0&&B.setMaterial(h.materials[I.material]),I.mode!==void 0&&B.setMode(I.mode);for(const[X,Q]of Object.entries(I.attributes||{}))B.setAttribute(X,h.accessors[Q]);I.indices!==void 0&&B.setIndices(h.accessors[I.indices]);const V=A.extras&&A.extras.targetNames||[];(I.targets||[]).forEach((X,Q)=>{const ae=V[Q]||Q.toString(),le=c.createPrimitiveTarget(ae);for(const[he,re]of Object.entries(X))le.setAttribute(he,h.accessors[re]);B.addTarget(le)}),N.addPrimitive(B)}),N}),h.cameras=(l.cameras||[]).map(A=>{const N=c.createCamera(A.name).setType(A.type);if(A.extras&&N.setExtras(A.extras),A.type===Xl.Type.PERSPECTIVE){const I=A.perspective;N.setYFov(I.yfov),N.setZNear(I.znear),I.zfar!==void 0&&N.setZFar(I.zfar),I.aspectRatio!==void 0&&N.setAspectRatio(I.aspectRatio)}else{const I=A.orthographic;N.setZNear(I.znear).setZFar(I.zfar).setXMag(I.xmag).setYMag(I.ymag)}return N});const G=l.nodes||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.NODE)).forEach(A=>A.preread(h,ln.NODE)),h.nodes=G.map(A=>{const N=c.createNode(A.name);if(A.extras&&N.setExtras(A.extras),A.translation!==void 0&&N.setTranslation(A.translation),A.rotation!==void 0&&N.setRotation(A.rotation),A.scale!==void 0&&N.setScale(A.scale),A.matrix!==void 0){const I=[0,0,0],B=[0,0,0,1],V=[1,1,1];_r.decompose(A.matrix,I,B,V),N.setTranslation(I),N.setRotation(B),N.setScale(V)}return A.weights!==void 0&&N.setWeights(A.weights),N}),h.skins=(l.skins||[]).map(A=>{const N=c.createSkin(A.name);A.extras&&N.setExtras(A.extras),A.inverseBindMatrices!==void 0&&N.setInverseBindMatrices(h.accessors[A.inverseBindMatrices]),A.skeleton!==void 0&&N.setSkeleton(h.nodes[A.skeleton]);for(const I of A.joints)N.addJoint(h.nodes[I]);return N}),G.map((A,N)=>{const I=h.nodes[N];(A.children||[]).forEach(B=>I.addChild(h.nodes[B])),A.mesh!==void 0&&I.setMesh(h.meshes[A.mesh]),A.camera!==void 0&&I.setCamera(h.cameras[A.camera]),A.skin!==void 0&&I.setSkin(h.skins[A.skin])}),h.animations=(l.animations||[]).map(A=>{const N=c.createAnimation(A.name);A.extras&&N.setExtras(A.extras);const I=(A.samplers||[]).map(B=>{const V=c.createAnimationSampler().setInput(h.accessors[B.input]).setOutput(h.accessors[B.output]).setInterpolation(B.interpolation||ql.Interpolation.LINEAR);return B.extras&&V.setExtras(B.extras),N.addSampler(V),V});return(A.channels||[]).forEach(B=>{const V=c.createAnimationChannel().setSampler(I[B.sampler]).setTargetNode(h.nodes[B.target.node]).setTargetPath(B.target.path);B.extras&&V.setExtras(B.extras),N.addChannel(V)}),N});const k=l.scenes||[];return c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.SCENE)).forEach(A=>A.preread(h,ln.SCENE)),h.scenes=k.map(A=>{const N=c.createScene(A.name);return A.extras&&N.setExtras(A.extras),(A.nodes||[]).map(I=>h.nodes[I]).forEach(I=>N.addChild(I)),N}),l.scene!==void 0&&c.getRoot().setDefaultScene(h.scenes[l.scene]),c.getRoot().listExtensionsUsed().forEach(A=>A.read(h)),c}static validate(t,r){const o=t.json;if(o.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${o.asset.version}".`);if(o.extensionsRequired){for(const l of o.extensionsRequired)if(!r.extensions.find(c=>c.EXTENSION_NAME===l))throw new Error(`Missing required extension, "${l}".`)}if(o.extensionsUsed)for(const l of o.extensionsUsed)r.extensions.find(c=>c.EXTENSION_NAME===l)||r.logger.warn(`Missing optional extension, "${l}".`)}}.read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}writeJSON(e,t={}){if(t.format===jl.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0\u20131 buffers.");return class{static write(r,o){const l=r.getRoot(),c={asset:Zi({generator:"glTF-Transform v1.2.4"},l.getAsset()),extras:Zi({},l.getExtras())},h={json:c,resources:{}},m=new Qi(r,h,o),v=o.logger||Bi.DEFAULT_INSTANCE,b=new Set(o.extensions.map(k=>k.EXTENSION_NAME)),T=r.getRoot().listExtensionsUsed().filter(k=>b.has(k.extensionName)),L=r.getRoot().listExtensionsRequired().filter(k=>b.has(k.extensionName));T.length<r.getRoot().listExtensionsUsed().length&&v.debug("Some extensions were not registered for I/O, and will not be written.");for(const k of T)for(const A of k.writeDependencies)k.install(A,o.dependencies[A]);function P(k,A,N,I){const B=[];let V=0;for(const Q of k){const ae=m.createAccessorDef(Q);ae.bufferView=c.bufferViews.length;const le=ci.pad(Q.getArray().buffer);ae.byteOffset=V,V+=le.byteLength,B.push(le),m.accessorIndexMap.set(Q,c.accessors.length),c.accessors.push(ae)}const X={buffer:A,byteOffset:N,byteLength:ci.concat(B).byteLength};return I&&(X.target=I),c.bufferViews.push(X),{buffers:B,byteLength:V}}function O(k,A,N){const I=k[0].getCount();let B=0;for(const ae of k){const le=m.createAccessorDef(ae);le.bufferView=c.bufferViews.length,le.byteOffset=B;const he=ae.getElementSize(),re=ae.getComponentSize();B+=ci.padNumber(he*re),m.accessorIndexMap.set(ae,c.accessors.length),c.accessors.push(le)}const V=I*B,X=new ArrayBuffer(V),Q=new DataView(X);for(let ae=0;ae<I;ae++){let le=0;for(const he of k){const re=he.getElementSize(),ee=he.getComponentSize(),_=he.getComponentType(),p=he.getArray();for(let Z=0;Z<re;Z++){const E=ae*B+le+Z*ee,ye=p[ae*re+Z];switch(_){case zt.ComponentType.FLOAT:Q.setFloat32(E,ye,!0);break;case zt.ComponentType.BYTE:Q.setInt8(E,ye);break;case zt.ComponentType.SHORT:Q.setInt16(E,ye,!0);break;case zt.ComponentType.UNSIGNED_BYTE:Q.setUint8(E,ye);break;case zt.ComponentType.UNSIGNED_SHORT:Q.setUint16(E,ye,!0);break;case zt.ComponentType.UNSIGNED_INT:Q.setUint32(E,ye,!0);break;default:throw new Error("Unexpected component type: "+_)}}le+=ci.padNumber(re*ee)}}return c.bufferViews.push({buffer:A,byteOffset:N,byteLength:V,byteStride:B,target:Qi.BufferViewTarget.ARRAY_BUFFER}),{byteLength:V,buffers:[X]}}const z=new Map;for(const k of r.getGraph().getLinks()){if(k.getParent()===l)continue;const A=k.getChild();if(A instanceof zt){const N=z.get(A)||[];N.push(k),z.set(A,N)}}if(c.accessors=[],c.bufferViews=[],c.samplers=[],c.textures=[],c.images=l.listTextures().map((k,A)=>{const N=m.createPropertyDef(k);k.getMimeType()&&(N.mimeType=k.getMimeType());const I=k.getImage();return I&&m.createImageData(N,I,k),m.imageIndexMap.set(k,A),N}),T.filter(k=>k.prewriteTypes.includes(ln.ACCESSOR)).forEach(k=>k.prewrite(m,ln.ACCESSOR)),l.listAccessors().forEach(k=>{const A=m.accessorUsageGroupedByParent,N=m.accessorParents;if(m.accessorIndexMap.has(k))return;const I=z.get(k)||[],B=m.getAccessorUsage(k);if(m.addAccessorToUsageGroup(k,B),A.has(B)){const V=I[0].getParent(),X=N.get(V)||new Set;X.add(k),N.set(V,X)}}),T.filter(k=>k.prewriteTypes.includes(ln.BUFFER)).forEach(k=>k.prewrite(m,ln.BUFFER)),(l.listAccessors().length>0||l.listTextures().length>0||m.otherBufferViews.size>0)&&l.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");c.buffers=[],l.listBuffers().forEach((k,A)=>{const N=m.createPropertyDef(k),I=m.accessorUsageGroupedByParent,B=m.accessorParents,V=k.listParents().filter(re=>re instanceof zt),X=new Set(V),Q=[],ae=c.buffers.length;let le=0;const he=m.listAccessorUsageGroups();for(const re in he)if(I.has(re))for(const ee of Array.from(B.values())){const _=Array.from(ee).filter(p=>X.has(p)).filter(p=>m.getAccessorUsage(p)===re);if(_.length)if(re!==h1.ARRAY_BUFFER||o.vertexLayout===Sg.INTERLEAVED){const p=re===h1.ARRAY_BUFFER?O(_,ae,le):P(_,ae,le);le+=p.byteLength,Q.push(...p.buffers)}else for(const p of _){const Z=O([p],ae,le);le+=Z.byteLength,Q.push(...Z.buffers)}}else{const ee=he[re].filter(p=>X.has(p));if(!ee.length)continue;const _=P(ee,ae,le,re===h1.ELEMENT_ARRAY_BUFFER?Qi.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);le+=_.byteLength,Q.push(..._.buffers)}if(m.imageBufferViews.length&&A===0){for(let re=0;re<m.imageBufferViews.length;re++)if(c.bufferViews[c.images[re].bufferView].byteOffset=le,le+=m.imageBufferViews[re].byteLength,Q.push(m.imageBufferViews[re]),le%8){const ee=8-le%8;le+=ee,Q.push(new ArrayBuffer(ee))}}if(m.otherBufferViews.has(k))for(const re of m.otherBufferViews.get(k))c.bufferViews.push({buffer:ae,byteOffset:le,byteLength:re.byteLength}),m.otherBufferViewsIndexMap.set(re,c.bufferViews.length-1),le+=re.byteLength,Q.push(re);if(le){let re;o.format===jl.GLB?re="@glb.bin":(re=m.bufferURIGenerator.createURI(k,"bin"),N.uri=re),N.byteLength=le,h.resources[re]=ci.concat(Q)}c.buffers.push(N),m.bufferIndexMap.set(k,A)}),l.listAccessors().find(k=>!k.getBuffer())&&v.warn("Skipped writing one or more Accessors: no Buffer assigned."),c.materials=l.listMaterials().map((k,A)=>{const N=m.createPropertyDef(k);if(k.getAlphaMode()!==Ur.AlphaMode.OPAQUE&&(N.alphaMode=k.getAlphaMode()),k.getAlphaMode()===Ur.AlphaMode.MASK&&(N.alphaCutoff=k.getAlphaCutoff()),k.getDoubleSided()&&(N.doubleSided=!0),N.pbrMetallicRoughness={},_r.eq(k.getBaseColorFactor(),[1,1,1,1])||(N.pbrMetallicRoughness.baseColorFactor=k.getBaseColorFactor()),_r.eq(k.getEmissiveFactor(),[0,0,0])||(N.emissiveFactor=k.getEmissiveFactor()),k.getRoughnessFactor()!==1&&(N.pbrMetallicRoughness.roughnessFactor=k.getRoughnessFactor()),k.getMetallicFactor()!==1&&(N.pbrMetallicRoughness.metallicFactor=k.getMetallicFactor()),k.getBaseColorTexture()){const I=k.getBaseColorTexture(),B=k.getBaseColorTextureInfo();N.pbrMetallicRoughness.baseColorTexture=m.createTextureInfoDef(I,B)}if(k.getEmissiveTexture()){const I=k.getEmissiveTexture(),B=k.getEmissiveTextureInfo();N.emissiveTexture=m.createTextureInfoDef(I,B)}if(k.getNormalTexture()){const I=k.getNormalTexture(),B=k.getNormalTextureInfo(),V=m.createTextureInfoDef(I,B);k.getNormalScale()!==1&&(V.scale=k.getNormalScale()),N.normalTexture=V}if(k.getOcclusionTexture()){const I=k.getOcclusionTexture(),B=k.getOcclusionTextureInfo(),V=m.createTextureInfoDef(I,B);k.getOcclusionStrength()!==1&&(V.strength=k.getOcclusionStrength()),N.occlusionTexture=V}if(k.getMetallicRoughnessTexture()){const I=k.getMetallicRoughnessTexture(),B=k.getMetallicRoughnessTextureInfo();N.pbrMetallicRoughness.metallicRoughnessTexture=m.createTextureInfoDef(I,B)}return m.materialIndexMap.set(k,A),N}),c.meshes=l.listMeshes().map((k,A)=>{const N=m.createPropertyDef(k);let I=null;return N.primitives=k.listPrimitives().map(B=>{const V={attributes:{}};V.mode=B.getMode();const X=B.getMaterial();X&&(V.material=m.materialIndexMap.get(X)),Object.keys(B.getExtras()).length&&(V.extras=B.getExtras());const Q=B.getIndices();Q&&(V.indices=m.accessorIndexMap.get(Q));for(const ae of B.listSemantics())V.attributes[ae]=m.accessorIndexMap.get(B.getAttribute(ae));for(const ae of B.listTargets()){const le={};for(const he of ae.listSemantics())le[he]=m.accessorIndexMap.get(ae.getAttribute(he));V.targets=V.targets||[],V.targets.push(le)}return B.listTargets().length&&!I&&(I=B.listTargets().map(ae=>ae.getName())),V}),k.getWeights().length&&(N.weights=k.getWeights()),I&&(N.extras=N.extras||{},N.extras.targetNames=I),m.meshIndexMap.set(k,A),N}),c.cameras=l.listCameras().map((k,A)=>{const N=m.createPropertyDef(k);if(N.type=k.getType(),N.type===Xl.Type.PERSPECTIVE){N.perspective={znear:k.getZNear(),zfar:k.getZFar(),yfov:k.getYFov()};const I=k.getAspectRatio();I!==null&&(N.perspective.aspectRatio=I)}else N.orthographic={znear:k.getZNear(),zfar:k.getZFar(),xmag:k.getXMag(),ymag:k.getYMag()};return m.cameraIndexMap.set(k,A),N}),c.nodes=l.listNodes().map((k,A)=>{const N=m.createPropertyDef(k);return _r.eq(k.getTranslation(),[0,0,0])||(N.translation=k.getTranslation()),_r.eq(k.getRotation(),[0,0,0,1])||(N.rotation=k.getRotation()),_r.eq(k.getScale(),[1,1,1])||(N.scale=k.getScale()),k.getWeights().length&&(N.weights=k.getWeights()),m.nodeIndexMap.set(k,A),N}),c.skins=l.listSkins().map((k,A)=>{const N=m.createPropertyDef(k),I=k.getInverseBindMatrices();I&&(N.inverseBindMatrices=m.accessorIndexMap.get(I));const B=k.getSkeleton();return B&&(N.skeleton=m.nodeIndexMap.get(B)),N.joints=k.listJoints().map(V=>m.nodeIndexMap.get(V)),m.skinIndexMap.set(k,A),N}),l.listNodes().forEach((k,A)=>{const N=c.nodes[A],I=k.getMesh();I&&(N.mesh=m.meshIndexMap.get(I));const B=k.getCamera();B&&(N.camera=m.cameraIndexMap.get(B));const V=k.getSkin();V&&(N.skin=m.skinIndexMap.get(V)),k.listChildren().length>0&&(N.children=k.listChildren().map(X=>m.nodeIndexMap.get(X)))}),c.animations=l.listAnimations().map(k=>{const A=m.createPropertyDef(k),N=new Map;return A.samplers=k.listSamplers().map((I,B)=>{const V=m.createPropertyDef(I);return V.input=m.accessorIndexMap.get(I.getInput()),V.output=m.accessorIndexMap.get(I.getOutput()),V.interpolation=I.getInterpolation(),N.set(I,B),V}),A.channels=k.listChannels().map(I=>{const B=m.createPropertyDef(I);return B.sampler=N.get(I.getSampler()),B.target={node:m.nodeIndexMap.get(I.getTargetNode()),path:I.getTargetPath()},B}),A}),c.scenes=l.listScenes().map(k=>{const A=m.createPropertyDef(k);return A.nodes=k.listChildren().map(N=>m.nodeIndexMap.get(N)),A});const G=l.getDefaultScene();return G&&(c.scene=l.listScenes().indexOf(G)),c.extensionsUsed=T.map(k=>k.extensionName),c.extensionsRequired=L.map(k=>k.extensionName),T.forEach(k=>k.write(m)),function(k){const A=[];for(const N in k){const I=k[N];(Array.isArray(I)&&I.length===0||I===null||I===""||I&&typeof I=="object"&&Object.keys(I).length===0)&&A.push(N)}for(const N of A)delete k[N]}(c),h}}.write(e,{format:t.format||jl.GLTF,basename:t.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:Zi({},this.Pt),extensions:Array.from(this.gt)})}Ft(e){const{images:t,buffers:r}=e.json;return e={json:Zi({},e.json),resources:Zi({},e.resources)},t&&(e.json.images=t.map(o=>Zi({},o))),r&&(e.json.buffers=r.map(o=>Zi({},o))),e}binaryToJSON(e){const t=this.Gt(e);this.kt(t);const r=t.json;if(r.buffers&&r.buffers.some(o=>function(l,c){return c.uri!==void 0&&!(c.uri in l.resources)}(t,o)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some(o=>function(l,c){return c.uri!==void 0&&!(c.uri in l.resources)&&c.bufferView===void 0}(t,o)))throw new Error("Cannot resolve external images with binaryToJSON().");return t}Gt(e){const t=new Uint32Array(e,0,3);if(t[0]!==1179937895)throw new Error("Invalid glTF asset.");if(t[1]!==2)throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const r=new Uint32Array(e,12,2);if(r[1]!==Og.JSON)throw new Error("Missing required GLB JSON chunk.");const o=r[0],l=ci.decodeText(e.slice(20,20+o)),c=JSON.parse(l),h=20+o;if(e.byteLength<=h)return{json:c,resources:{}};const m=new Uint32Array(e,h,2);if(m[1]!==Og.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:c,resources:{"@glb.bin":e.slice(h+8,h+8+m[0])}}}readBinary(e){return this.readJSON(this.binaryToJSON(e))}writeBinary(e){const{json:t,resources:r}=this.writeJSON(e,{format:jl.GLB}),o=new Uint32Array([1179937895,2,12]),l=JSON.stringify(t),c=ci.pad(ci.encodeText(l),32),h=new Uint32Array([c.byteLength,1313821514]).buffer,m=ci.concat([h,c]);o[o.length-1]+=m.byteLength;const v=Object.values(r)[0];if(!v||!v.byteLength)return ci.concat([o.buffer,m]);const b=ci.pad(v,0),T=new Uint32Array([b.byteLength,5130562]).buffer,L=ci.concat([T,b]);return o[o.length-1]+=L.byteLength,ci.concat([o.buffer,m,L])}}const Dz={};class QG extends Oz{constructor(e=Dz){super(),this.qt=void 0,this.qt=e}read(e){return this.readAsJSON(e).then(t=>this.readJSON(t))}readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||new URL(e,window.location.href).pathname.match(/\.glb$/)?this.Jt(e):this.zt(e)}Wt(e,t){const r=[...e.json.images||[],...e.json.buffers||[]].map(o=>{const l=o.uri;return!l||l.match(/data:/)?Promise.resolve():fetch(function(c,h){if(!function(b){return!/^(?:[a-zA-Z]+:)?\//.test(b)}(h))return h;const m=c.split("/"),v=h.split("/");m.pop();for(let b=0;b<v.length;b++)v[b]!=="."&&(v[b]===".."?m.pop():m.push(v[b]));return m.join("/")}(t,l),this.qt).then(c=>c.arrayBuffer()).then(c=>{e.resources[l]=c})});return Promise.all(r).then(()=>{})}zt(e){var t=this;const r={json:{},resources:{}};return fetch(e,this.qt).then(o=>o.json()).then(async function(o){return r.json=o,await t.Wt(r,OC(e)),t.kt(r),r})}Jt(e){var t=this;return fetch(e,this.qt).then(r=>r.arrayBuffer()).then(async function(r){const o=t.Gt(r);return await t.Wt(o,OC(e)),t.kt(o),o})}}function OC(i){const e=i.lastIndexOf("/");return e===-1?"./":i.substr(0,e+1)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var DC={},d1=function(i){return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},NC=function(i){return new Worker(i)};try{URL.revokeObjectURL(d1(""))}catch{d1=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},NC=function(e){return new Worker(e,{type:"module"})}}var Nz=function(i,e,t,r,o){var l=NC(DC[e]||(DC[e]=d1(i)));return l.onerror=function(c){return o(c.error,null)},l.onmessage=function(c){return o(null,c.data)},l.postMessage(t,r),l},sn=Uint8Array,Cr=Uint16Array,Mo=Uint32Array,Nc=new sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fc=new sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qh=new sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FC=function(i,e){for(var t=new Cr(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];for(var o=new Mo(t[30]),r=1;r<30;++r)for(var l=t[r];l<t[r+1];++l)o[l]=l-t[r]<<5|r;return[t,o]},BC=FC(Nc,2),p1=BC[0],Dg=BC[1];p1[28]=258,Dg[258]=28;var UC=FC(Fc,0),zC=UC[0],m1=UC[1],Jh=new Cr(32768);for(var In=0;In<32768;++In){var ya=(In&43690)>>>1|(In&21845)<<1;ya=(ya&52428)>>>2|(ya&13107)<<2,ya=(ya&61680)>>>4|(ya&3855)<<4,Jh[In]=((ya&65280)>>>8|(ya&255)<<8)>>>1}var Ji=function(i,e,t){for(var r=i.length,o=0,l=new Cr(e);o<r;++o)++l[i[o]-1];var c=new Cr(e);for(o=0;o<e;++o)c[o]=c[o-1]+l[o-1]<<1;var h;if(t){h=new Cr(1<<e);var m=15-e;for(o=0;o<r;++o)if(i[o])for(var v=o<<4|i[o],b=e-i[o],T=c[i[o]-1]++<<b,L=T|(1<<b)-1;T<=L;++T)h[Jh[T]>>>m]=v}else for(h=new Cr(r),o=0;o<r;++o)i[o]&&(h[o]=Jh[c[i[o]-1]++]>>>15-i[o]);return h},To=new sn(288);for(var In=0;In<144;++In)To[In]=8;for(var In=144;In<256;++In)To[In]=9;for(var In=256;In<280;++In)To[In]=7;for(var In=280;In<288;++In)To[In]=8;var Bc=new sn(32);for(var In=0;In<32;++In)Bc[In]=5;var HC=Ji(To,9,0),GC=Ji(To,9,1),VC=Ji(Bc,5,0),$C=Ji(Bc,5,1),Ng=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},es=function(i,e,t){var r=e/8|0;return(i[r]|i[r+1]<<8)>>(e&7)&t},Fg=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},ed=function(i){return(i/8|0)+(i&7&&1)},ts=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var r=new(i instanceof Cr?Cr:i instanceof Mo?Mo:sn)(t-e);return r.set(i.subarray(e,t)),r},td=function(i,e,t){var r=i.length;if(!r||t&&!t.l&&r<5)return e||new sn(0);var o=!e||t,l=!t||t.i;t||(t={}),e||(e=new sn(r*3));var c=function(Te){var Oe=e.length;if(Te>Oe){var ze=new sn(Math.max(Oe*2,Te));ze.set(e),e=ze}},h=t.f||0,m=t.p||0,v=t.b||0,b=t.l,T=t.d,L=t.m,P=t.n,O=r*8;do{if(!b){t.f=h=es(i,m,1);var z=es(i,m+1,3);if(m+=3,z)if(z==1)b=GC,T=$C,L=9,P=5;else if(z==2){var N=es(i,m,31)+257,I=es(i,m+10,15)+4,B=N+es(i,m+5,31)+1;m+=14;for(var V=new sn(B),X=new sn(19),Q=0;Q<I;++Q)X[Qh[Q]]=es(i,m+Q*3,7);m+=I*3;for(var ae=Ng(X),le=(1<<ae)-1,he=Ji(X,ae,1),Q=0;Q<B;){var re=he[es(i,m,le)];m+=re&15;var G=re>>>4;if(G<16)V[Q++]=G;else{var ee=0,_=0;for(G==16?(_=3+es(i,m,3),m+=2,ee=V[Q-1]):G==17?(_=3+es(i,m,7),m+=3):G==18&&(_=11+es(i,m,127),m+=7);_--;)V[Q++]=ee}}var p=V.subarray(0,N),Z=V.subarray(N);L=Ng(p),P=Ng(Z),b=Ji(p,L,1),T=Ji(Z,P,1)}else throw"invalid block type";else{var G=ed(m)+4,k=i[G-4]|i[G-3]<<8,A=G+k;if(A>r){if(l)throw"unexpected EOF";break}o&&c(v+k),e.set(i.subarray(G,A),v),t.b=v+=k,t.p=m=A*8;continue}if(m>O){if(l)throw"unexpected EOF";break}}o&&c(v+131072);for(var E=(1<<L)-1,ye=(1<<P)-1,Re=m;;Re=m){var ee=b[Fg(i,m)&E],Me=ee>>>4;if(m+=ee&15,m>O){if(l)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(Me<256)e[v++]=Me;else if(Me==256){Re=m,b=null;break}else{var pe=Me-254;if(Me>264){var Q=Me-257,ve=Nc[Q];pe=es(i,m,(1<<ve)-1)+p1[Q],m+=ve}var Ce=T[Fg(i,m)&ye],_e=Ce>>>4;if(!Ce)throw"invalid distance";m+=Ce&15;var Z=zC[_e];if(_e>3){var ve=Fc[_e];Z+=Fg(i,m)&(1<<ve)-1,m+=ve}if(m>O){if(l)throw"unexpected EOF";break}o&&c(v+131072);for(var Pe=v+pe;v<Pe;v+=4)e[v]=e[v-Z],e[v+1]=e[v+1-Z],e[v+2]=e[v+2-Z],e[v+3]=e[v+3-Z];v=Pe}}t.l=b,t.p=Re,t.b=v,b&&(h=1,t.m=L,t.d=T,t.n=P)}while(!h);return v==e.length?e:ts(e,0,v)},Vs=function(i,e,t){t<<=e&7;var r=e/8|0;i[r]|=t,i[r+1]|=t>>>8},Uc=function(i,e,t){t<<=e&7;var r=e/8|0;i[r]|=t,i[r+1]|=t>>>8,i[r+2]|=t>>>16},Bg=function(i,e){for(var t=[],r=0;r<i.length;++r)i[r]&&t.push({s:r,f:i[r]});var o=t.length,l=t.slice();if(!o)return[Eo,0];if(o==1){var c=new sn(t[0].s+1);return c[t[0].s]=1,[c,1]}t.sort(function(B,V){return B.f-V.f}),t.push({s:-1,f:25001});var h=t[0],m=t[1],v=0,b=1,T=2;for(t[0]={s:-1,f:h.f+m.f,l:h,r:m};b!=o-1;)h=t[t[v].f<t[T].f?v++:T++],m=t[v!=b&&t[v].f<t[T].f?v++:T++],t[b++]={s:-1,f:h.f+m.f,l:h,r:m};for(var L=l[0].s,r=1;r<o;++r)l[r].s>L&&(L=l[r].s);var P=new Cr(L+1),O=Ug(t[b-1],P,0);if(O>e){var r=0,z=0,G=O-e,k=1<<G;for(l.sort(function(V,X){return P[X.s]-P[V.s]||V.f-X.f});r<o;++r){var A=l[r].s;if(P[A]>e)z+=k-(1<<O-P[A]),P[A]=e;else break}for(z>>>=G;z>0;){var N=l[r].s;P[N]<e?z-=1<<e-P[N]++-1:++r}for(;r>=0&&z;--r){var I=l[r].s;P[I]==e&&(--P[I],++z)}O=e}return[new sn(P),O]},Ug=function(i,e,t){return i.s==-1?Math.max(Ug(i.l,e,t+1),Ug(i.r,e,t+1)):e[i.s]=t},g1=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Cr(++e),r=0,o=i[0],l=1,c=function(m){t[r++]=m},h=1;h<=e;++h)if(i[h]==o&&h!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(o),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(o);l=1,o=i[h]}return[t.subarray(0,r),e]},zc=function(i,e){for(var t=0,r=0;r<e.length;++r)t+=i[r]*e[r];return t},nd=function(i,e,t){var r=t.length,o=ed(e+2);i[o]=r&255,i[o+1]=r>>>8,i[o+2]=i[o]^255,i[o+3]=i[o+1]^255;for(var l=0;l<r;++l)i[o+l+4]=t[l];return(o+4+r)*8},v1=function(i,e,t,r,o,l,c,h,m,v,b){Vs(e,b++,t),++o[256];for(var T=Bg(o,15),L=T[0],P=T[1],O=Bg(l,15),z=O[0],G=O[1],k=g1(L),A=k[0],N=k[1],I=g1(z),B=I[0],V=I[1],X=new Cr(19),Q=0;Q<A.length;++Q)X[A[Q]&31]++;for(var Q=0;Q<B.length;++Q)X[B[Q]&31]++;for(var ae=Bg(X,7),le=ae[0],he=ae[1],re=19;re>4&&!le[Qh[re-1]];--re);var ee=v+5<<3,_=zc(o,To)+zc(l,Bc)+c,p=zc(o,L)+zc(l,z)+c+14+3*re+zc(X,le)+(2*X[16]+3*X[17]+7*X[18]);if(ee<=_&&ee<=p)return nd(e,b,i.subarray(m,m+v));var Z,E,ye,Re;if(Vs(e,b,1+(p<_)),b+=2,p<_){Z=Ji(L,P,0),E=L,ye=Ji(z,G,0),Re=z;var Me=Ji(le,he,0);Vs(e,b,N-257),Vs(e,b+5,V-1),Vs(e,b+10,re-4),b+=14;for(var Q=0;Q<re;++Q)Vs(e,b+3*Q,le[Qh[Q]]);b+=3*re;for(var pe=[A,B],ve=0;ve<2;++ve)for(var Ce=pe[ve],Q=0;Q<Ce.length;++Q){var _e=Ce[Q]&31;Vs(e,b,Me[_e]),b+=le[_e],_e>15&&(Vs(e,b,Ce[Q]>>>5&127),b+=Ce[Q]>>>12)}}else Z=HC,E=To,ye=VC,Re=Bc;for(var Q=0;Q<h;++Q)if(r[Q]>255){var _e=r[Q]>>>18&31;Uc(e,b,Z[_e+257]),b+=E[_e+257],_e>7&&(Vs(e,b,r[Q]>>>23&31),b+=Nc[_e]);var Pe=r[Q]&31;Uc(e,b,ye[Pe]),b+=Re[Pe],Pe>3&&(Uc(e,b,r[Q]>>>5&8191),b+=Fc[Pe])}else Uc(e,b,Z[r[Q]]),b+=E[r[Q]];return Uc(e,b,Z[256]),b+E[256]},WC=new Mo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Eo=new sn(0),jC=function(i,e,t,r,o,l){var c=i.length,h=new sn(r+c+5*(1+Math.ceil(c/7e3))+o),m=h.subarray(r,h.length-o),v=0;if(!e||c<8)for(var b=0;b<=c;b+=65535){var T=b+65535;T<c?v=nd(m,v,i.subarray(b,T)):(m[b]=l,v=nd(m,v,i.subarray(b,c)))}else{for(var L=WC[e-1],P=L>>>13,O=L&8191,z=(1<<t)-1,G=new Cr(32768),k=new Cr(z+1),A=Math.ceil(t/3),N=2*A,I=function(qe){return(i[qe]^i[qe+1]<<A^i[qe+2]<<N)&z},B=new Mo(25e3),V=new Cr(288),X=new Cr(32),Q=0,ae=0,b=0,le=0,he=0,re=0;b<c;++b){var ee=I(b),_=b&32767,p=k[ee];if(G[_]=p,k[ee]=_,he<=b){var Z=c-b;if((Q>7e3||le>24576)&&Z>423){v=v1(i,m,0,B,V,X,ae,le,re,b-re,v),le=Q=ae=0,re=b;for(var E=0;E<286;++E)V[E]=0;for(var E=0;E<30;++E)X[E]=0}var ye=2,Re=0,Me=O,pe=_-p&32767;if(Z>2&&ee==I(b-pe))for(var ve=Math.min(P,Z)-1,Ce=Math.min(32767,b),_e=Math.min(258,Z);pe<=Ce&&--Me&&_!=p;){if(i[b+ye]==i[b+ye-pe]){for(var Pe=0;Pe<_e&&i[b+Pe]==i[b+Pe-pe];++Pe);if(Pe>ye){if(ye=Pe,Re=pe,Pe>ve)break;for(var Te=Math.min(pe,Pe-2),Oe=0,E=0;E<Te;++E){var ze=b-pe+E+32768&32767,He=G[ze],$=ze-He+32768&32767;$>Oe&&(Oe=$,p=ze)}}}_=p,p=G[_],pe+=_-p+32768&32767}if(Re){B[le++]=268435456|Dg[ye]<<18|m1[Re];var $e=Dg[ye]&31,Le=m1[Re]&31;ae+=Nc[$e]+Fc[Le],++V[257+$e],++X[Le],he=b+ye,++Q}else B[le++]=i[b],++V[i[b]]}}v=v1(i,m,l,B,V,X,ae,le,re,b-re,v),!l&&v&7&&(v=nd(m,v+1,Eo))}return ts(h,0,r+ed(v)+o)},qC=function(){for(var i=new Mo(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;i[e]=t}return i}(),Hc=function(){var i=-1;return{p:function(e){for(var t=i,r=0;r<e.length;++r)t=qC[t&255^e[r]]^t>>>8;i=t},d:function(){return~i}}},y1=function(){var i=1,e=0;return{p:function(t){for(var r=i,o=e,l=t.length,c=0;c!=l;){for(var h=Math.min(c+2655,l);c<h;++c)o+=r+=t[c];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}i=r,e=o},d:function(){return i%=65521,e%=65521,(i&255)<<24|i>>>8<<16|(e&255)<<8|e>>>8}}},Yl=function(i,e,t,r,o){return jC(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,r,!o)},rd=function(i,e){var t={};for(var r in i)t[r]=i[r];for(var r in e)t[r]=e[r];return t},XC=function(i,e,t){for(var r=i(),o=i.toString(),l=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),c=0;c<r.length;++c){var h=r[c],m=l[c];if(typeof h=="function"){e+=";"+m+"=";var v=h.toString();if(h.prototype)if(v.indexOf("[native code]")!=-1){var b=v.indexOf(" ",8)+1;e+=v.slice(b,v.indexOf("(",b))}else{e+=v;for(var T in h.prototype)e+=";"+m+".prototype."+T+"="+h.prototype[T].toString()}else e+=v}else t[m]=h}return[e,t]},zg=[],Fz=function(i){var e=[];for(var t in i)(i[t]instanceof sn||i[t]instanceof Cr||i[t]instanceof Mo)&&e.push((i[t]=new i[t].constructor(i[t])).buffer);return e},YC=function(i,e,t,r){var o;if(!zg[t]){for(var l="",c={},h=i.length-1,m=0;m<h;++m)o=XC(i[m],l,c),l=o[0],c=o[1];zg[t]=XC(i[h],l,c)}var v=rd({},zg[t][1]);return Nz(zg[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,v,Fz(v),r)},Gc=function(){return[sn,Cr,Mo,Nc,Fc,Qh,p1,zC,GC,$C,Jh,Ji,Ng,es,Fg,ed,ts,td,jc,xa,x1]},Vc=function(){return[sn,Cr,Mo,Nc,Fc,Qh,Dg,m1,HC,To,VC,Bc,Jh,WC,Eo,Ji,Vs,Uc,Bg,Ug,g1,zc,nd,v1,ed,ts,jC,Yl,id,xa]},KC=function(){return[_1,S1,pn,Hc,qC]},ZC=function(){return[b1,e2]},QC=function(){return[M1,pn,y1]},JC=function(){return[t2]},xa=function(i){return postMessage(i,[i.buffer])},x1=function(i){return i&&i.size&&new sn(i.size)},$c=function(i,e,t,r,o,l){var c=YC(t,r,o,function(h,m){c.terminate(),l(h,m)});return c.postMessage([i,e],e.consume?[i.buffer]:[]),function(){c.terminate()}},ns=function(i){return i.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return i.push(e.data[0],e.data[1])}},Wc=function(i,e,t,r,o){var l,c=YC(i,r,o,function(h,m){h?(c.terminate(),e.ondata.call(e,h)):(m[1]&&c.terminate(),e.ondata.call(e,h,m[0],m[1]))});c.postMessage(t),e.push=function(h,m){if(l)throw"stream finished";if(!e.ondata)throw"no stream handler";c.postMessage([h,l=m],[h.buffer])},e.terminate=function(){c.terminate()}},fi=function(i,e){return i[e]|i[e+1]<<8},or=function(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24)>>>0},w1=function(i,e){return or(i,e)+or(i,e+4)*4294967296},pn=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},_1=function(i,e){var t=e.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=e.level<2?4:e.level==9?2:0,i[9]=3,e.mtime!=0&&pn(i,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){i[3]=8;for(var r=0;r<=t.length;++r)i[r+10]=t.charCodeAt(r)}},b1=function(i){if(i[0]!=31||i[1]!=139||i[2]!=8)throw"invalid gzip data";var e=i[3],t=10;e&4&&(t+=i[10]|(i[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!i[t++]);return t+(e&2)},e2=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},S1=function(i){return 10+(i.filename&&i.filename.length+1||0)},M1=function(i,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=r<<6|(r?32-2*r:1)},t2=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function T1(i,e){return!e&&typeof i=="function"&&(e=i,i={}),this.ondata=e,i}var $s=function(){function i(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return i.prototype.p=function(e,t){this.ondata(Yl(e,this.o,0,0,!t),t)},i.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},i}(),n2=function(){function i(e,t){Wc([Vc,function(){return[ns,$s]}],this,T1.call(this,e,t),function(r){var o=new $s(r.data);onmessage=ns(o)},6)}return i}();function r2(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Vc],function(r){return xa(id(r.data[0],r.data[1]))},0,t)}function id(i,e){return Yl(i,e||{},0,0)}var Si=function(){function i(e){this.s={},this.p=new sn(0),this.ondata=e}return i.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new sn(t+e.length);r.set(this.p),r.set(e,t),this.p=r},i.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=td(this.p,this.o,this.s);this.ondata(ts(r,t,this.s.b),this.d),this.o=ts(r,this.s.b-32768),this.s.b=this.o.length,this.p=ts(this.p,this.s.p/8|0),this.s.p&=7},i.prototype.push=function(e,t){this.e(e),this.c(t)},i}(),E1=function(){function i(e){this.ondata=e,Wc([Gc,function(){return[ns,Si]}],this,0,function(){var t=new Si;onmessage=ns(t)},7)}return i}();function A1(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Gc],function(r){return xa(jc(r.data[0],x1(r.data[1])))},1,t)}function jc(i,e){return td(i,e)}var Hg=function(){function i(e,t){this.c=Hc(),this.l=0,this.v=1,$s.call(this,e,t)}return i.prototype.push=function(e,t){$s.prototype.push.call(this,e,t)},i.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Yl(e,this.o,this.v&&S1(this.o),t&&8,!t);this.v&&(_1(r,this.o),this.v=0),t&&(pn(r,r.length-8,this.c.d()),pn(r,r.length-4,this.l)),this.ondata(r,t)},i}(),i2=function(){function i(e,t){Wc([Vc,KC,function(){return[ns,$s,Hg]}],this,T1.call(this,e,t),function(r){var o=new Hg(r.data);onmessage=ns(o)},8)}return i}();function s2(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Vc,KC,function(){return[Gg]}],function(r){return xa(Gg(r.data[0],r.data[1]))},2,t)}function Gg(i,e){e||(e={});var t=Hc(),r=i.length;t.p(i);var o=Yl(i,e,S1(e),8),l=o.length;return _1(o,e),pn(o,l-8,t.d()),pn(o,l-4,r),o}var Vg=function(){function i(e){this.v=1,Si.call(this,e)}return i.prototype.push=function(e,t){if(Si.prototype.e.call(this,e),this.v){var r=this.p.length>3?b1(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Si.prototype.c.call(this,t)},i}(),o2=function(){function i(e){this.ondata=e,Wc([Gc,ZC,function(){return[ns,Si,Vg]}],this,0,function(){var t=new Vg;onmessage=ns(t)},9)}return i}();function a2(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Gc,ZC,function(){return[$g]}],function(r){return xa($g(r.data[0]))},3,t)}function $g(i,e){return td(i.subarray(b1(i),-8),e||new sn(e2(i)))}var C1=function(){function i(e,t){this.c=y1(),this.v=1,$s.call(this,e,t)}return i.prototype.push=function(e,t){$s.prototype.push.call(this,e,t)},i.prototype.p=function(e,t){this.c.p(e);var r=Yl(e,this.o,this.v&&2,t&&4,!t);this.v&&(M1(r,this.o),this.v=0),t&&pn(r,r.length-4,this.c.d()),this.ondata(r,t)},i}(),Bz=function(){function i(e,t){Wc([Vc,QC,function(){return[ns,$s,C1]}],this,T1.call(this,e,t),function(r){var o=new C1(r.data);onmessage=ns(o)},10)}return i}();function Uz(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Vc,QC,function(){return[L1]}],function(r){return xa(L1(r.data[0],r.data[1]))},4,t)}function L1(i,e){e||(e={});var t=y1();t.p(i);var r=Yl(i,e,2,4);return M1(r,e),pn(r,r.length-4,t.d()),r}var Wg=function(){function i(e){this.v=1,Si.call(this,e)}return i.prototype.push=function(e,t){if(Si.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Si.prototype.c.call(this,t)},i}(),l2=function(){function i(e){this.ondata=e,Wc([Gc,JC,function(){return[ns,Si,Wg]}],this,0,function(){var t=new Wg;onmessage=ns(t)},11)}return i}();function u2(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return $c(i,e,[Gc,JC,function(){return[sd]}],function(r){return xa(sd(r.data[0],x1(r.data[1])))},5,t)}function sd(i,e){return td((t2(i),i.subarray(2,-4)),e)}var c2=function(){function i(e){this.G=Vg,this.I=Si,this.Z=Wg,this.ondata=e}return i.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new sn(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,l=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(l):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(l):new this.Z(l),this.s.push(this.p,t),this.p=null}}},i}(),zz=function(){function i(e){this.G=o2,this.I=E1,this.Z=l2,this.ondata=e}return i.prototype.push=function(e,t){c2.prototype.push.call(this,e,t)},i}();function Hz(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return i[0]==31&&i[1]==139&&i[2]==8?a2(i,e,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?A1(i,e,t):u2(i,e,t)}function Gz(i,e){return i[0]==31&&i[1]==139&&i[2]==8?$g(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?jc(i,e):sd(i,e)}var R1=function(i,e,t,r){for(var o in i){var l=i[o],c=e+o;l instanceof sn?t[c]=[l,r]:Array.isArray(l)?t[c]=[l[0],rd(r,l[1])]:R1(l,c+"/",t,r)}},f2=typeof TextEncoder!="undefined"&&new TextEncoder,I1=typeof TextDecoder!="undefined"&&new TextDecoder,h2=0;try{I1.decode(Eo,{stream:!0}),h2=1}catch{}var d2=function(i){for(var e="",t=0;;){var r=i[t++],o=(r>127)+(r>223)+(r>239);if(t+o>i.length)return[e,ts(i,t-1)];o?o==3?(r=((r&15)<<18|(i[t++]&63)<<12|(i[t++]&63)<<6|i[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?e+=String.fromCharCode((r&31)<<6|i[t++]&63):e+=String.fromCharCode((r&15)<<12|(i[t++]&63)<<6|i[t++]&63):e+=String.fromCharCode(r)}},Vz=function(){function i(e){this.ondata=e,h2?this.t=new TextDecoder:this.p=Eo}return i.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new sn(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=d2(r),l=o[0],c=o[1];if(t){if(c.length)throw"invalid utf-8 data";this.p=null}else this.p=c;this.ondata(l,t)},i}(),$z=function(){function i(e){this.ondata=e}return i.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(wa(e),this.d=t||!1)},i}();function wa(i,e){if(e){for(var t=new sn(i.length),r=0;r<i.length;++r)t[r]=i.charCodeAt(r);return t}if(f2)return f2.encode(i);for(var o=i.length,l=new sn(i.length+(i.length>>1)),c=0,h=function(b){l[c++]=b},r=0;r<o;++r){if(c+5>l.length){var m=new sn(c+8+(o-r<<1));m.set(l),l=m}var v=i.charCodeAt(r);v<128||e?h(v):v<2048?(h(192|v>>6),h(128|v&63)):v>55295&&v<57344?(v=65536+(v&1023<<10)|i.charCodeAt(++r)&1023,h(240|v>>18),h(128|v>>12&63),h(128|v>>6&63),h(128|v&63)):(h(224|v>>12),h(128|v>>6&63),h(128|v&63))}return ts(l,0,c)}function P1(i,e){if(e){for(var t="",r=0;r<i.length;r+=16384)t+=String.fromCharCode.apply(null,i.subarray(r,r+16384));return t}else{if(I1)return I1.decode(i);var o=d2(i),l=o[0],c=o[1];if(c.length)throw"invalid utf-8 data";return l}}var p2=function(i){return i==1?3:i<6?2:i==9?1:0},m2=function(i,e){return e+30+fi(i,e+26)+fi(i,e+28)},g2=function(i,e,t){var r=fi(i,e+28),o=P1(i.subarray(e+46,e+46+r),!(fi(i,e+8)&2048)),l=e+46+r,c=or(i,e+20),h=t&&c==4294967295?v2(i,l):[c,or(i,e+24),or(i,e+42)],m=h[0],v=h[1],b=h[2];return[fi(i,e+10),m,v,o,l+fi(i,e+30)+fi(i,e+32),b]},v2=function(i,e){for(;fi(i,e)!=1;e+=4+fi(i,e+2));return[w1(i,e+12),w1(i,e+4),w1(i,e+20)]},_a=function(i){var e=0;if(i)for(var t in i){var r=i[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},qc=function(i,e,t,r,o,l,c,h){var m=r.length,v=t.extra,b=h&&h.length,T=_a(v);pn(i,e,c!=null?33639248:67324752),e+=4,c!=null&&(i[e++]=20,i[e++]=t.os),i[e]=20,e+=2,i[e++]=t.flag<<1|(l==null&&8),i[e++]=o&&8,i[e++]=t.compression&255,i[e++]=t.compression>>8;var L=new Date(t.mtime==null?Date.now():t.mtime),P=L.getFullYear()-1980;if(P<0||P>119)throw"date not in range 1980-2099";if(pn(i,e,P<<25|L.getMonth()+1<<21|L.getDate()<<16|L.getHours()<<11|L.getMinutes()<<5|L.getSeconds()>>>1),e+=4,l!=null&&(pn(i,e,t.crc),pn(i,e+4,l),pn(i,e+8,t.size)),pn(i,e+12,m),pn(i,e+14,T),e+=16,c!=null&&(pn(i,e,b),pn(i,e+6,t.attrs),pn(i,e+10,c),e+=14),i.set(r,e),e+=m,T)for(var O in v){var z=v[O],G=z.length;pn(i,e,+O),pn(i,e+2,G),i.set(z,e+4),e+=4+G}return b&&(i.set(h,e),e+=b),e},k1=function(i,e,t,r,o){pn(i,e,101010256),pn(i,e+8,t),pn(i,e+10,t),pn(i,e+12,r),pn(i,e+16,o)},od=function(){function i(e){this.filename=e,this.c=Hc(),this.size=0,this.compression=0}return i.prototype.process=function(e,t){this.ondata(null,e,t)},i.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},i}(),Wz=function(){function i(e,t){var r=this;t||(t={}),od.call(this,e),this.d=new $s(t,function(o,l){r.ondata(null,o,l)}),this.compression=8,this.flag=p2(t.level)}return i.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},i.prototype.push=function(e,t){od.prototype.push.call(this,e,t)},i}(),jz=function(){function i(e,t){var r=this;t||(t={}),od.call(this,e),this.d=new n2(t,function(o,l,c){r.ondata(o,l,c)}),this.compression=8,this.flag=p2(t.level),this.terminate=this.d.terminate}return i.prototype.process=function(e,t){this.d.push(e,t)},i.prototype.push=function(e,t){od.prototype.push.call(this,e,t)},i}(),qz=function(){function i(e){this.ondata=e,this.u=[],this.d=1}return i.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=wa(e.filename),o=r.length,l=e.comment,c=l&&wa(l),h=o!=e.filename.length||c&&l.length!=c.length,m=o+_a(e.extra)+30;if(o>65535)throw"filename too long";var v=new sn(m);qc(v,0,e,r,h);var b=[v],T=function(){for(var G=0,k=b;G<k.length;G++){var A=k[G];t.ondata(null,A,!1)}b=[]},L=this.d;this.d=0;var P=this.u.length,O=rd(e,{f:r,u:h,o:c,t:function(){e.terminate&&e.terminate()},r:function(){if(T(),L){var G=t.u[P+1];G?G.r():t.d=1}L=1}}),z=0;e.ondata=function(G,k,A){if(G)t.ondata(G,k,A),t.terminate();else if(z+=k.length,b.push(k),A){var N=new sn(16);pn(N,0,134695760),pn(N,4,e.crc),pn(N,8,z),pn(N,12,e.size),b.push(N),O.c=z,O.b=m+z+16,O.crc=e.crc,O.size=e.size,L&&O.r(),L=1}else L&&T()},this.u.push(O)},i.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(e.d&1)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},i.prototype.e=function(){for(var e=0,t=0,r=0,o=0,l=this.u;o<l.length;o++){var c=l[o];r+=46+c.f.length+_a(c.extra)+(c.o?c.o.length:0)}for(var h=new sn(r+22),m=0,v=this.u;m<v.length;m++){var c=v[m];qc(h,e,c,c.f,c.u,c.c,t,c.o),e+=46+c.f.length+_a(c.extra)+(c.o?c.o.length:0),t+=c.b}k1(h,e,this.u.length,r,t),this.ondata(null,h,!0),this.d=2},i.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},i}();function Xz(i,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};R1(i,"",r,e);var o=Object.keys(r),l=o.length,c=0,h=0,m=l,v=new Array(l),b=[],T=function(){for(var z=0;z<b.length;++z)b[z]()},L=function(){var z=new sn(h+22),G=c,k=h-c;h=0;for(var A=0;A<m;++A){var N=v[A];try{var I=N.c.length;qc(z,h,N,N.f,N.u,I);var B=30+N.f.length+_a(N.extra),V=h+B;z.set(N.c,V),qc(z,c,N,N.f,N.u,I,h,N.m),c+=16+B+(N.m?N.m.length:0),h=V+I}catch(X){return t(X,null)}}k1(z,c,v.length,k,G),t(null,z)};l||L();for(var P=function(z){var G=o[z],k=r[G],A=k[0],N=k[1],I=Hc(),B=A.length;I.p(A);var V=wa(G),X=V.length,Q=N.comment,ae=Q&&wa(Q),le=ae&&ae.length,he=_a(N.extra),re=N.level==0?0:8,ee=function(_,p){if(_)T(),t(_,null);else{var Z=p.length;v[z]=rd(N,{size:B,crc:I.d(),c:p,f:V,m:ae,u:X!=G.length||ae&&Q.length!=le,compression:re}),c+=30+X+he+Z,h+=76+2*(X+he)+(le||0)+Z,--l||L()}};if(X>65535&&ee("filename too long",null),!re)ee(null,A);else if(B<16e4)try{ee(null,id(A,N))}catch(_){ee(_,null)}else b.push(r2(A,N,ee))},O=0;O<m;++O)P(O);return T}function Yz(i,e){e||(e={});var t={},r=[];R1(i,"",t,e);var o=0,l=0;for(var c in t){var h=t[c],m=h[0],v=h[1],b=v.level==0?0:8,T=wa(c),L=T.length,P=v.comment,O=P&&wa(P),z=O&&O.length,G=_a(v.extra);if(L>65535)throw"filename too long";var k=b?id(m,v):m,A=k.length,N=Hc();N.p(m),r.push(rd(v,{size:m.length,crc:N.d(),c:k,f:T,m:O,u:L!=c.length||O&&P.length!=z,o,compression:b})),o+=30+L+G+A,l+=76+2*(L+G)+(z||0)+A}for(var I=new sn(l+22),B=o,V=l-o,X=0;X<r.length;++X){var T=r[X];qc(I,T.o,T,T.f,T.u,T.c.length);var Q=30+T.f.length+_a(T.extra);I.set(T.c,T.o+Q),qc(I,o,T,T.f,T.u,T.c.length,T.o,T.m),o+=16+Q+(T.m?T.m.length:0)}return k1(I,o,r.length,V,B),I}var y2=function(){function i(){}return i.prototype.push=function(e,t){this.ondata(null,e,t)},i.compression=0,i}(),Kz=function(){function i(){var e=this;this.i=new Si(function(t,r){e.ondata(null,t,r)})}return i.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},i.compression=8,i}(),Zz=function(){function i(e,t){var r=this;t<32e4?this.i=new Si(function(o,l){r.ondata(null,o,l)}):(this.i=new E1(function(o,l,c){r.ondata(o,l,c)}),this.terminate=this.i.terminate)}return i.prototype.push=function(e,t){this.i.terminate&&(e=ts(e,0)),this.i.push(e,t)},i.compression=8,i}(),Qz=function(){function i(e){this.onfile=e,this.k=[],this.o={0:y2},this.p=Eo}return i.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),l=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(l,!this.c):this.k[0].push(l),e=e.subarray(o),e.length)return this.push(e,t)}else{var c=0,h=0,m=void 0,v=void 0;this.p.length?e.length?(v=new sn(this.p.length+e.length),v.set(this.p),v.set(e,this.p.length)):v=this.p:v=e;for(var b=v.length,T=this.c,L=T&&this.d,P=function(){var k,A=or(v,h);if(A==67324752){c=1,m=h,O.d=null,O.c=0;var N=fi(v,h+6),I=fi(v,h+8),B=N&2048,V=N&8,X=fi(v,h+26),Q=fi(v,h+28);if(b>h+30+X+Q){var ae=[];O.k.unshift(ae),c=2;var le=or(v,h+18),he=or(v,h+22),re=P1(v.subarray(h+30,h+=30+X),!B);le==4294967295?(k=V?[-2]:v2(v,h),le=k[0],he=k[1]):V&&(le=-1),h+=Q,O.c=le;var ee,_={name:re,compression:I,start:function(){if(!_.ondata)throw"no callback";if(!le)_.ondata(null,Eo,!0);else{var p=r.o[I];if(!p)throw"unknown compression type "+I;ee=le<0?new p(re):new p(re,le,he),ee.ondata=function(Re,Me,pe){_.ondata(Re,Me,pe)};for(var Z=0,E=ae;Z<E.length;Z++){var ye=E[Z];ee.push(ye,!1)}r.k[0]==ae&&r.c?r.d=ee:ee.push(Eo,!0)}},terminate:function(){ee&&ee.terminate&&ee.terminate()}};le>=0&&(_.size=le,_.originalSize=he),O.onfile(_)}return"break"}else if(T){if(A==134695760)return m=h+=12+(T==-2&&8),c=3,O.c=0,"break";if(A==33639248)return m=h-=4,c=3,O.c=0,"break"}},O=this;h<b-4;++h){var z=P();if(z==="break")break}if(this.p=Eo,T<0){var G=c?v.subarray(0,m-12-(T==-2&&8)-(or(v,m-16)==134695760&&4)):v.subarray(0,h);L?L.push(G,!!c):this.k[+(c==2)].push(G)}if(c&2)return this.push(v.subarray(h),t);this.p=v.subarray(h)}if(t){if(this.c)throw"invalid zip file";this.p=null}},i.prototype.register=function(e){this.o[e.compression]=e},i}();function Jz(i,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var L=0;L<t.length;++L)t[L]()},o={},l=i.length-22;or(i,l)!=101010256;--l)if(!l||i.length-l>65558){e("invalid zip file",null);return}var c=fi(i,l+8);c||e(null,{});var h=c,m=or(i,l+16),v=m==4294967295;if(v){if(l=or(i,l-12),or(i,l)!=101075792){e("invalid zip file",null);return}h=c=or(i,l+32),m=or(i,l+48)}for(var b=function(L){var P=g2(i,m,v),O=P[0],z=P[1],G=P[2],k=P[3],A=P[4],N=P[5],I=m2(i,N);m=A;var B=function(X,Q){X?(r(),e(X,null)):(o[k]=Q,--c||e(null,o))};if(!O)B(null,ts(i,I,I+z));else if(O==8){var V=i.subarray(I,I+z);if(z<32e4)try{B(null,jc(V,new sn(G)))}catch(X){B(X,null)}else t.push(A1(V,{size:G},B))}else B("unknown compression type "+O,null)},T=0;T<h;++T)b();return r}function eH(i){for(var e={},t=i.length-22;or(i,t)!=101010256;--t)if(!t||i.length-t>65558)throw"invalid zip file";var r=fi(i,t+8);if(!r)return{};var o=or(i,t+16),l=o==4294967295;if(l){if(t=or(i,t-12),or(i,t)!=101075792)throw"invalid zip file";r=or(i,t+32),o=or(i,t+48)}for(var c=0;c<r;++c){var h=g2(i,o,l),m=h[0],v=h[1],b=h[2],T=h[3],L=h[4],P=h[5],O=m2(i,P);if(o=L,!m)e[T]=ts(i,O,O+v);else if(m==8)e[T]=jc(i.subarray(O,O+v),new sn(b));else throw"unknown compression type "+m}return e}var tH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Deflate:$s,AsyncDeflate:n2,deflate:r2,deflateSync:id,Inflate:Si,AsyncInflate:E1,inflate:A1,inflateSync:jc,Gzip:Hg,AsyncGzip:i2,gzip:s2,gzipSync:Gg,Gunzip:Vg,AsyncGunzip:o2,gunzip:a2,gunzipSync:$g,Zlib:C1,AsyncZlib:Bz,zlib:Uz,zlibSync:L1,Unzlib:Wg,AsyncUnzlib:l2,unzlib:u2,unzlibSync:sd,compress:s2,AsyncCompress:i2,compressSync:Gg,Compress:Hg,Decompress:c2,AsyncDecompress:zz,decompress:Hz,decompressSync:Gz,DecodeUTF8:Vz,EncodeUTF8:$z,strToU8:wa,strFromU8:P1,ZipPassThrough:od,ZipDeflate:Wz,AsyncZipDeflate:jz,Zip:qz,zip:Xz,zipSync:Yz,UnzipPassThrough:y2,UnzipInflate:Kz,AsyncUnzipInflate:Zz,Unzip:Qz,unzip:Jz,unzipSync:eH});function x2(i,e,t){const r=t.length-i-1;if(e>=t[r])return r-1;if(e<=t[i])return i;let o=i,l=r,c=Math.floor((o+l)/2);for(;e<t[c]||e>=t[c+1];)e<t[c]?l=c:o=c,c=Math.floor((o+l)/2);return c}function nH(i,e,t,r){const o=[],l=[],c=[];o[0]=1;for(let h=1;h<=t;++h){l[h]=e-r[i+1-h],c[h]=r[i+h]-e;let m=0;for(let v=0;v<h;++v){const b=c[v+1],T=l[h-v],L=o[v]/(b+T);o[v]=m+b*L,m=T*L}o[h]=m}return o}function rH(i,e,t,r){const o=x2(i,r,e),l=nH(o,r,i,e),c=new an(0,0,0,0);for(let h=0;h<=i;++h){const m=t[o-i+h],v=l[h],b=m.w*v;c.x+=m.x*b,c.y+=m.y*b,c.z+=m.z*b,c.w+=m.w*v}return c}function iH(i,e,t,r,o){const l=[];for(let T=0;T<=t;++T)l[T]=0;const c=[];for(let T=0;T<=r;++T)c[T]=l.slice(0);const h=[];for(let T=0;T<=t;++T)h[T]=l.slice(0);h[0][0]=1;const m=l.slice(0),v=l.slice(0);for(let T=1;T<=t;++T){m[T]=e-o[i+1-T],v[T]=o[i+T]-e;let L=0;for(let P=0;P<T;++P){const O=v[P+1],z=m[T-P];h[T][P]=O+z;const G=h[P][T-1]/h[T][P];h[P][T]=L+O*G,L=z*G}h[T][T]=L}for(let T=0;T<=t;++T)c[0][T]=h[T][t];for(let T=0;T<=t;++T){let L=0,P=1;const O=[];for(let z=0;z<=t;++z)O[z]=l.slice(0);O[0][0]=1;for(let z=1;z<=r;++z){let G=0;const k=T-z,A=t-z;T>=z&&(O[P][0]=O[L][0]/h[A+1][k],G=O[P][0]*h[k][A]);const N=k>=-1?1:-k,I=T-1<=A?z-1:t-T;for(let V=N;V<=I;++V)O[P][V]=(O[L][V]-O[L][V-1])/h[A+1][k+V],G+=O[P][V]*h[k+V][A];T<=A&&(O[P][z]=-O[L][z-1]/h[A+1][T],G+=O[P][z]*h[T][A]),c[z][T]=G;const B=L;L=P,P=B}}let b=t;for(let T=1;T<=r;++T){for(let L=0;L<=t;++L)c[T][L]*=b;b*=t-T}return c}function sH(i,e,t,r,o){const l=o<i?o:i,c=[],h=x2(i,r,e),m=iH(h,r,i,l,e),v=[];for(let b=0;b<t.length;++b){const T=t[b].clone(),L=T.w;T.x*=L,T.y*=L,T.z*=L,v[b]=T}for(let b=0;b<=l;++b){const T=v[h-i].clone().multiplyScalar(m[b][0]);for(let L=1;L<=i;++L)T.add(v[h-i+L].clone().multiplyScalar(m[b][L]));c[b]=T}for(let b=l+1;b<=o+1;++b)c[b]=new an(0,0,0);return c}function oH(i,e){let t=1;for(let o=2;o<=i;++o)t*=o;let r=1;for(let o=2;o<=e;++o)r*=o;for(let o=2;o<=i-e;++o)r*=o;return t/r}function aH(i){const e=i.length,t=[],r=[];for(let l=0;l<e;++l){const c=i[l];t[l]=new fe(c.x,c.y,c.z),r[l]=c.w}const o=[];for(let l=0;l<e;++l){const c=t[l].clone();for(let h=1;h<=l;++h)c.sub(o[l-h].clone().multiplyScalar(oH(l,h)*r[h]));o[l]=c.divideScalar(r[0])}return o}function lH(i,e,t,r,o){const l=sH(i,e,t,r,o);return aH(l)}class w2 extends _i{constructor(e,t,r,o,l){super();this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=o||0,this.endKnot=l||this.knots.length-1;for(let c=0;c<r.length;++c){const h=r[c];this.controlPoints[c]=new an(h.x,h.y,h.z,h.w)}}getPoint(e,t=new fe){const r=t,o=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),l=rH(this.degree,this.knots,this.controlPoints,o);return l.w!==1&&l.divideScalar(l.w),r.set(l.x,l.y,l.z)}getTangent(e,t=new fe){const r=t,o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=lH(this.degree,this.knots,this.controlPoints,o,1);return r.copy(l[1]).normalize(),r}}let tn,ar,Mi;class JG extends Br{constructor(e){super(e)}load(e,t,r,o){const l=this,c=l.path===""?bi.extractUrlBase(e):l.path,h=new Fi(this.manager);h.setPath(l.path),h.setResponseType("arraybuffer"),h.setRequestHeader(l.requestHeader),h.setWithCredentials(l.withCredentials),h.load(e,function(m){try{t(l.parse(m,c))}catch(v){o?o(v):console.error(v),l.manager.itemError(e)}},r,o)}parse(e,t){if(pH(e))tn=new dH().parse(e);else{const o=E2(e);if(!mH(o))throw new Error("THREE.FBXLoader: Unknown format.");if(S2(o)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S2(o));tn=new hH().parse(o)}const r=new Qm(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new uH(r,this.manager).parse(tn)}}class uH{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){ar=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),o=this.parseDeformers(),l=new cH().parse(o);return this.parseScene(o,l,r),Mi}parseConnections(){const e=new Map;return"Connections"in tn&&tn.Connections.connections.forEach(function(r){const o=r[0],l=r[1],c=r[2];e.has(o)||e.set(o,{parents:[],children:[]});const h={ID:l,relationship:c};e.get(o).parents.push(h),e.has(l)||e.set(l,{parents:[],children:[]});const m={ID:o,relationship:c};e.get(l).children.push(m)}),e}parseImages(){const e={},t={};if("Video"in tn.Objects){const r=tn.Objects.Video;for(const o in r){const l=r[o],c=parseInt(o);if(e[c]=l.RelativeFilename||l.Filename,"Content"in l){const h=l.Content instanceof ArrayBuffer&&l.Content.byteLength>0,m=typeof l.Content=="string"&&l.Content!=="";if(h||m){const v=this.parseImage(r[o]);t[l.RelativeFilename||l.Filename]=v}}}}for(const r in e){const o=e[r];t[o]!==void 0?e[r]=t[o]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,o=r.slice(r.lastIndexOf(".")+1).toLowerCase();let l;switch(o){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),l="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if(typeof t=="string")return"data:"+l+";base64,"+t;{const c=new Uint8Array(t);return window.URL.createObjectURL(new Blob([c],{type:l}))}}parseTextures(e){const t=new Map;if("Texture"in tn.Objects){const r=tn.Objects.Texture;for(const o in r){const l=this.parseTexture(r[o],e);t.set(parseInt(o),l)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const o=e.WrapModeU,l=e.WrapModeV,c=o!==void 0?o.value:0,h=l!==void 0?l.value:0;if(r.wrapS=c===0?Ps:hr,r.wrapT=h===0?Ps:hr,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}return r}loadTexture(e,t){let r;const o=this.textureLoader.path,l=ar.get(e.id).children;l!==void 0&&l.length>0&&t[l[0].ID]!==void 0&&(r=t[l[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let c;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),c=new Nn):(m.setPath(this.textureLoader.path),c=m.load(r))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),c=new Nn):c=this.textureLoader.load(r);return this.textureLoader.setPath(o),c}parseMaterials(e){const t=new Map;if("Material"in tn.Objects){const r=tn.Objects.Material;for(const o in r){const l=this.parseMaterial(r[o],e);l!==null&&t.set(parseInt(o),l)}}return t}parseMaterial(e,t){const r=e.id,o=e.attrName;let l=e.ShadingModel;if(typeof l=="object"&&(l=l.value),!ar.has(r))return null;const c=this.parseParameters(e,t,r);let h;switch(l.toLowerCase()){case"phong":h=new Mc;break;case"lambert":h=new Zm;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),h=new Mc;break}return h.setValues(c),h.name=o,h}parseParameters(e,t,r){const o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=new Ke().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(o.color=new Ke().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=new Ke().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(o.emissive=new Ke().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=new Ke().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(o.specular=new Ke().fromArray(e.SpecularColor.value));const l=this;return ar.get(r).children.forEach(function(c){const h=c.relationship;switch(h){case"Bump":o.bumpMap=l.getTexture(t,c.ID);break;case"Maya|TEX_ao_map":o.aoMap=l.getTexture(t,c.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=l.getTexture(t,c.ID),o.map!==void 0&&(o.map.encoding=Or);break;case"DisplacementColor":o.displacementMap=l.getTexture(t,c.ID);break;case"EmissiveColor":o.emissiveMap=l.getTexture(t,c.ID),o.emissiveMap!==void 0&&(o.emissiveMap.encoding=Or);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=l.getTexture(t,c.ID);break;case"ReflectionColor":o.envMap=l.getTexture(t,c.ID),o.envMap!==void 0&&(o.envMap.mapping=Du,o.envMap.encoding=Or);break;case"SpecularColor":o.specularMap=l.getTexture(t,c.ID),o.specularMap!==void 0&&(o.specularMap.encoding=Or);break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=l.getTexture(t,c.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),o}getTexture(e,t){return"LayeredTexture"in tn.Objects&&t in tn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ar.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in tn.Objects){const r=tn.Objects.Deformer;for(const o in r){const l=r[o],c=ar.get(parseInt(o));if(l.attrType==="Skin"){const h=this.parseSkeleton(c,r);h.ID=o,c.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=c.parents[0].ID,e[o]=h}else if(l.attrType==="BlendShape"){const h={id:o};h.rawTargets=this.parseMorphTargets(c,r),h.id=o,c.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[o]=h}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(o){const l=t[o.ID];if(l.attrType!=="Cluster")return;const c={ID:o.ID,indices:[],weights:[],transformLink:new Qe().fromArray(l.TransformLink.a)};"Indexes"in l&&(c.indices=l.Indexes.a,c.weights=l.Weights.a),r.push(c)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let o=0;o<e.children.length;o++){const l=e.children[o],c=t[l.ID],h={name:c.attrName,initialWeight:c.DeformPercent,id:c.id,fullWeights:c.FullWeights.a};if(c.attrType!=="BlendShapeChannel")return;h.geoID=ar.get(parseInt(l.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(h)}return r}parseScene(e,t,r){Mi=new Fr;const o=this.parseModels(e.skeletons,t,r),l=tn.Objects.Model,c=this;o.forEach(function(m){const v=l[m.ID];c.setLookAtProperties(m,v),ar.get(m.ID).parents.forEach(function(T){const L=o.get(T.ID);L!==void 0&&L.add(m)}),m.parent===null&&Mi.add(m)}),this.bindSkeleton(e.skeletons,t,o),this.createAmbientLight(),Mi.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const v=M2(m.userData.transformData);m.applyMatrix4(v),m.updateWorldMatrix()}});const h=new fH().parse();Mi.children.length===1&&Mi.children[0].isGroup&&(Mi.children[0].animations=h,Mi=Mi.children[0]),Mi.animations=h}parseModels(e,t,r){const o=new Map,l=tn.Objects.Model;for(const c in l){const h=parseInt(c),m=l[c],v=ar.get(h);let b=this.buildSkeleton(v,e,h,m.attrName);if(!b){switch(m.attrType){case"Camera":b=this.createCamera(v);break;case"Light":b=this.createLight(v);break;case"Mesh":b=this.createMesh(v,t,r);break;case"NurbsCurve":b=this.createCurve(v,t);break;case"LimbNode":case"Root":b=new _l;break;case"Null":default:b=new Fr;break}b.name=m.attrName?en.sanitizeNodeName(m.attrName):"",b.ID=h}this.getTransformData(b,m),o.set(h,b)}return o}buildSkeleton(e,t,r,o){let l=null;return e.parents.forEach(function(c){for(const h in t){const m=t[h];m.rawBones.forEach(function(v,b){if(v.ID===c.ID){const T=l;l=new _l,l.matrixWorld.copy(v.transformLink),l.name=o?en.sanitizeNodeName(o):"",l.ID=r,m.bones[b]=l,T!==null&&l.add(T)}})}}),l}createCamera(e){let t,r;if(e.children.forEach(function(o){const l=tn.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Vt;else{let o=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(o=1);let l=1;r.NearPlane!==void 0&&(l=r.NearPlane.value/1e3);let c=1e3;r.FarPlane!==void 0&&(c=r.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(h=r.AspectWidth.value,m=r.AspectHeight.value);const v=h/m;let b=45;r.FieldOfView!==void 0&&(b=r.FieldOfView.value);const T=r.FocalLength?r.FocalLength.value:null;switch(o){case 0:t=new dr(b,v,l,c),T!==null&&t.setFocalLength(T);break;case 1:t=new vl(-h/2,h/2,m/2,-m/2,l,c);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),t=new Vt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(o){const l=tn.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Vt;else{let o;r.LightType===void 0?o=0:o=r.LightType.value;let l=16777215;r.Color!==void 0&&(l=new Ke().fromArray(r.Color.value));let c=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(c=0);let h=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?h=0:h=r.FarAttenuationEnd.value);const m=1;switch(o){case 0:t=new Ec(l,c,h,m);break;case 1:t=new zh(l,c);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=yi.degToRad(r.InnerAngle.value));let b=0;r.OuterAngle!==void 0&&(b=yi.degToRad(r.OuterAngle.value),b=Math.max(b,1)),t=new Bh(l,c,h,v,b,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new Ec(l,c);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let o,l=null,c=null;const h=[];return e.children.forEach(function(m){t.has(m.ID)&&(l=t.get(m.ID)),r.has(m.ID)&&h.push(r.get(m.ID))}),h.length>1?c=h:h.length>0?c=h[0]:(c=new Mc({color:13421772}),h.push(c)),"color"in l.attributes&&h.forEach(function(m){m.vertexColors=!0}),l.FBX_Deformer?(o=new wl(l,c),o.normalizeSkinWeights()):o=new Fn(l,c),o}createCurve(e,t){const r=e.children.reduce(function(l,c){return t.has(c.ID)&&(l=t.get(c.ID)),l},null),o=new Bn({color:3342591,linewidth:1});return new Yi(r,o)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=T2(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&ar.get(e.ID).children.forEach(function(o){if(o.relationship==="LookAtProperty"){const l=tn.Objects.Model[o.ID];if("Lcl_Translation"in l){const c=l.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(c),Mi.add(e.target)):e.lookAt(new fe().fromArray(c))}}})}bindSkeleton(e,t,r){const o=this.parsePoseNodes();for(const l in e){const c=e[l];ar.get(parseInt(c.ID)).parents.forEach(function(m){if(t.has(m.ID)){const v=m.ID;ar.get(v).parents.forEach(function(T){r.has(T.ID)&&r.get(T.ID).bind(new la(c.bones),o[T.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in tn.Objects){const t=tn.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const o=t[r].PoseNode;Array.isArray(o)?o.forEach(function(l){e[l.Node]=new Qe().fromArray(l.Matrix.a)}):e[o.Node]=new Qe().fromArray(o.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in tn&&"AmbientColor"in tn.GlobalSettings){const e=tn.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],o=e[2];if(t!==0||r!==0||o!==0){const l=new Ke(t,r,o);Mi.add(new Jm(l,1))}}}}class cH{parse(e){const t=new Map;if("Geometry"in tn.Objects){const r=tn.Objects.Geometry;for(const o in r){const l=ar.get(parseInt(o)),c=this.parseGeometry(l,r[o],e);t.set(parseInt(o),c)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const o=r.skeletons,l=[],c=e.parents.map(function(T){return tn.Objects.Model[T.ID]});if(c.length===0)return;const h=e.children.reduce(function(T,L){return o[L.ID]!==void 0&&(T=o[L.ID]),T},null);e.children.forEach(function(T){r.morphTargets[T.ID]!==void 0&&l.push(r.morphTargets[T.ID])});const m=c[0],v={};"RotationOrder"in m&&(v.eulerOrder=T2(m.RotationOrder.value)),"InheritType"in m&&(v.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(v.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(v.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(v.scale=m.GeometricScaling.value);const b=M2(v);return this.genGeometry(t,h,l,b)}genGeometry(e,t,r,o){const l=new bt;e.attrName&&(l.name=e.attrName);const c=this.parseGeoNode(e,t),h=this.genBuffers(c),m=new pt(h.vertex,3);if(m.applyMatrix4(o),l.setAttribute("position",m),h.colors.length>0&&l.setAttribute("color",new pt(h.colors,3)),t&&(l.setAttribute("skinIndex",new yh(h.weightsIndices,4)),l.setAttribute("skinWeight",new pt(h.vertexWeights,4)),l.FBX_Deformer=t),h.normal.length>0){const v=new vn().getNormalMatrix(o),b=new pt(h.normal,3);b.applyNormalMatrix(v),l.setAttribute("normal",b)}if(h.uvs.forEach(function(v,b){let T="uv"+(b+1).toString();b===0&&(T="uv"),l.setAttribute(T,new pt(h.uvs[b],2))}),c.material&&c.material.mappingType!=="AllSame"){let v=h.materialIndex[0],b=0;if(h.materialIndex.forEach(function(T,L){T!==v&&(l.addGroup(b,L-b,v),v=T,b=L)}),l.groups.length>0){const T=l.groups[l.groups.length-1],L=T.start+T.count;L!==h.materialIndex.length&&l.addGroup(L,h.materialIndex.length-L,v)}l.groups.length===0&&l.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(l,e,r,o),l}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let o=0;for(;e.LayerElementUV[o];)e.LayerElementUV[o].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[o])),o++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(o,l){o.indices.forEach(function(c,h){r.weightTable[c]===void 0&&(r.weightTable[c]=[]),r.weightTable[c].push({id:l,weight:o.weights[h]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,o=0,l=!1,c=[],h=[],m=[],v=[],b=[],T=[];const L=this;return e.vertexIndices.forEach(function(P,O){let z,G=!1;P<0&&(P=P^-1,G=!0);let k=[],A=[];if(c.push(P*3,P*3+1,P*3+2),e.color){const N=jg(O,r,P,e.color);m.push(N[0],N[1],N[2])}if(e.skeleton){if(e.weightTable[P]!==void 0&&e.weightTable[P].forEach(function(N){A.push(N.weight),k.push(N.id)}),A.length>4){l||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),l=!0);const N=[0,0,0,0],I=[0,0,0,0];A.forEach(function(B,V){let X=B,Q=k[V];I.forEach(function(ae,le,he){if(X>ae){he[le]=X,X=ae;const re=N[le];N[le]=Q,Q=re}})}),k=N,A=I}for(;A.length<4;)A.push(0),k.push(0);for(let N=0;N<4;++N)b.push(A[N]),T.push(k[N])}if(e.normal){const N=jg(O,r,P,e.normal);h.push(N[0],N[1],N[2])}e.material&&e.material.mappingType!=="AllSame"&&(z=jg(O,r,P,e.material)[0]),e.uv&&e.uv.forEach(function(N,I){const B=jg(O,r,P,N);v[I]===void 0&&(v[I]=[]),v[I].push(B[0]),v[I].push(B[1])}),o++,G&&(L.genFace(t,e,c,z,h,m,v,b,T,o),r++,o=0,c=[],h=[],m=[],v=[],b=[],T=[])}),t}genFace(e,t,r,o,l,c,h,m,v,b){for(let T=2;T<b;T++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(T-1)*3]]),e.vertex.push(t.vertexPositions[r[(T-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(T-1)*3+2]]),e.vertex.push(t.vertexPositions[r[T*3]]),e.vertex.push(t.vertexPositions[r[T*3+1]]),e.vertex.push(t.vertexPositions[r[T*3+2]]),t.skeleton&&(e.vertexWeights.push(m[0]),e.vertexWeights.push(m[1]),e.vertexWeights.push(m[2]),e.vertexWeights.push(m[3]),e.vertexWeights.push(m[(T-1)*4]),e.vertexWeights.push(m[(T-1)*4+1]),e.vertexWeights.push(m[(T-1)*4+2]),e.vertexWeights.push(m[(T-1)*4+3]),e.vertexWeights.push(m[T*4]),e.vertexWeights.push(m[T*4+1]),e.vertexWeights.push(m[T*4+2]),e.vertexWeights.push(m[T*4+3]),e.weightsIndices.push(v[0]),e.weightsIndices.push(v[1]),e.weightsIndices.push(v[2]),e.weightsIndices.push(v[3]),e.weightsIndices.push(v[(T-1)*4]),e.weightsIndices.push(v[(T-1)*4+1]),e.weightsIndices.push(v[(T-1)*4+2]),e.weightsIndices.push(v[(T-1)*4+3]),e.weightsIndices.push(v[T*4]),e.weightsIndices.push(v[T*4+1]),e.weightsIndices.push(v[T*4+2]),e.weightsIndices.push(v[T*4+3])),t.color&&(e.colors.push(c[0]),e.colors.push(c[1]),e.colors.push(c[2]),e.colors.push(c[(T-1)*3]),e.colors.push(c[(T-1)*3+1]),e.colors.push(c[(T-1)*3+2]),e.colors.push(c[T*3]),e.colors.push(c[T*3+1]),e.colors.push(c[T*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(o),e.materialIndex.push(o),e.materialIndex.push(o)),t.normal&&(e.normal.push(l[0]),e.normal.push(l[1]),e.normal.push(l[2]),e.normal.push(l[(T-1)*3]),e.normal.push(l[(T-1)*3+1]),e.normal.push(l[(T-1)*3+2]),e.normal.push(l[T*3]),e.normal.push(l[T*3+1]),e.normal.push(l[T*3+2])),t.uv&&t.uv.forEach(function(L,P){e.uvs[P]===void 0&&(e.uvs[P]=[]),e.uvs[P].push(h[P][0]),e.uvs[P].push(h[P][1]),e.uvs[P].push(h[P][(T-1)*2]),e.uvs[P].push(h[P][(T-1)*2+1]),e.uvs[P].push(h[P][T*2]),e.uvs[P].push(h[P][T*2+1])})}addMorphTargets(e,t,r,o){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const l=this;r.forEach(function(c){c.rawTargets.forEach(function(h){const m=tn.Objects.Geometry[h.geoID];m!==void 0&&l.genMorphGeometry(e,t,m,o,h.name)})})}genMorphGeometry(e,t,r,o,l){const c=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],h=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,b=new Float32Array(v);for(let O=0;O<m.length;O++){const z=m[O]*3;b[z]=h[O*3],b[z+1]=h[O*3+1],b[z+2]=h[O*3+2]}const T={vertexIndices:c,vertexPositions:b},L=this.genBuffers(T),P=new pt(L.vertex,3);P.name=l||r.attrName,P.applyMatrix4(o),e.morphAttributes.position.push(P)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Normals.a;let l=[];return r==="IndexToDirect"&&("NormalIndex"in e?l=e.NormalIndex.a:"NormalsIndex"in e&&(l=e.NormalsIndex.a)),{dataSize:3,buffer:o,indices:l,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.UV.a;let l=[];return r==="IndexToDirect"&&(l=e.UVIndex.a),{dataSize:2,buffer:o,indices:l,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Colors.a;let l=[];return r==="IndexToDirect"&&(l=e.ColorIndex.a),{dataSize:4,buffer:o,indices:l,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const o=e.Materials.a,l=[];for(let c=0;c<o.length;++c)l.push(c);return{dataSize:1,buffer:o,indices:l,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(w2===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new bt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new bt;const r=t-1,o=e.KnotVector.a,l=[],c=e.Points.a;for(let T=0,L=c.length;T<L;T+=4)l.push(new an().fromArray(c,T));let h,m;if(e.Form==="Closed")l.push(l[0]);else if(e.Form==="Periodic"){h=r,m=o.length-1-h;for(let T=0;T<r;++T)l.push(l[T])}const b=new w2(r,o,l,h,m).getPoints(l.length*12);return new bt().setFromPoints(b)}}class fH{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const o=t[r],l=this.addClip(o);e.push(l)}return e}parseClips(){if(tn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=tn.Objects.AnimationCurveNode,t=new Map;for(const r in e){const o=e[r];if(o.attrName.match(/S|R|T|DeformPercent/)!==null){const l={id:o.id,attr:o.attrName,curves:{}};t.set(l.id,l)}}return t}parseAnimationCurves(e){const t=tn.Objects.AnimationCurve;for(const r in t){const o={id:t[r].id,times:t[r].KeyTime.a.map(gH),values:t[r].KeyValueFloat.a},l=ar.get(o.id);if(l!==void 0){const c=l.parents[0].ID,h=l.parents[0].relationship;h.match(/X/)?e.get(c).curves.x=o:h.match(/Y/)?e.get(c).curves.y=o:h.match(/Z/)?e.get(c).curves.z=o:h.match(/d|DeformPercent/)&&e.has(c)&&(e.get(c).curves.morph=o)}}}parseAnimationLayers(e){const t=tn.Objects.AnimationLayer,r=new Map;for(const o in t){const l=[],c=ar.get(parseInt(o));c!==void 0&&(c.children.forEach(function(m,v){if(e.has(m.ID)){const b=e.get(m.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(l[v]===void 0){const T=ar.get(m.ID).parents.filter(function(L){return L.relationship!==void 0})[0].ID;if(T!==void 0){const L=tn.Objects.Model[T.toString()];if(L===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const P={modelName:L.attrName?en.sanitizeNodeName(L.attrName):"",ID:L.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Mi.traverse(function(O){O.ID===L.id&&(P.transform=O.matrix,O.userData.transformData&&(P.eulerOrder=O.userData.transformData.eulerOrder))}),P.transform||(P.transform=new Qe),"PreRotation"in L&&(P.preRotation=L.PreRotation.value),"PostRotation"in L&&(P.postRotation=L.PostRotation.value),l[v]=P}}l[v]&&(l[v][b.attr]=b)}else if(b.curves.morph!==void 0){if(l[v]===void 0){const T=ar.get(m.ID).parents.filter(function(k){return k.relationship!==void 0})[0].ID,L=ar.get(T).parents[0].ID,P=ar.get(L).parents[0].ID,O=ar.get(P).parents[0].ID,z=tn.Objects.Model[O],G={modelName:z.attrName?en.sanitizeNodeName(z.attrName):"",morphName:tn.Objects.Deformer[T].attrName};l[v]=G}l[v][b.attr]=b}}}),r.set(parseInt(o),l))}return r}parseAnimStacks(e){const t=tn.Objects.AnimationStack,r={};for(const o in t){const l=ar.get(parseInt(o)).children;l.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const c=e.get(l[0].ID);r[o]={name:t[o].attrName,layer:c}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(o){t=t.concat(r.generateTracks(o))}),new Pl(e.name,-1,t)}generateTracks(e){const t=[];let r=new fe,o=new Ut,l=new fe;if(e.transform&&e.transform.decompose(r,o,l),r=r.toArray(),o=new wi().setFromQuaternion(o,e.eulerOrder).toArray(),l=l.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");c!==void 0&&t.push(c)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const c=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotation,e.postRotation,e.eulerOrder);c!==void 0&&t.push(c)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.S.curves,l,"scale");c!==void 0&&t.push(c)}if(e.DeformPercent!==void 0){const c=this.generateMorphTrack(e);c!==void 0&&t.push(c)}return t}generateVectorTrack(e,t,r,o){const l=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(l,t,r);return new Il(e+"."+o,l,c)}generateRotationTrack(e,t,r,o,l,c){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(yi.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(yi.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(yi.degToRad));const h=this.getTimesForAllAxes(t),m=this.getKeyframeTrackValues(h,t,r);o!==void 0&&(o=o.map(yi.degToRad),o.push(c),o=new wi().fromArray(o),o=new Ut().setFromEuler(o)),l!==void 0&&(l=l.map(yi.degToRad),l.push(c),l=new wi().fromArray(l),l=new Ut().setFromEuler(l).invert());const v=new Ut,b=new wi,T=[];for(let L=0;L<m.length;L+=3)b.set(m[L],m[L+1],m[L+2],c),v.setFromEuler(b),o!==void 0&&v.premultiply(o),l!==void 0&&v.multiply(l),v.toArray(T,L/3*4);return new xo(e+".quaternion",h,T)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(l){return l/100}),o=Mi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Ll(e.modelName+".morphTargetInfluences["+o+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,o){return r-o}),t.length>1){let r=1,o=t[0];for(let l=1;l<t.length;l++){const c=t[l];c!==o&&(t[r]=c,o=c,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const o=r,l=[];let c=-1,h=-1,m=-1;return e.forEach(function(v){if(t.x&&(c=t.x.times.indexOf(v)),t.y&&(h=t.y.times.indexOf(v)),t.z&&(m=t.z.times.indexOf(v)),c!==-1){const b=t.x.values[c];l.push(b),o[0]=b}else l.push(o[0]);if(h!==-1){const b=t.y.values[h];l.push(b),o[1]=b}else l.push(o[1]);if(m!==-1){const b=t.z.values[m];l.push(b),o[2]=b}else l.push(o[2])}),l}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],o=e.values[t]-r,l=Math.abs(o);if(l>=180){const c=l/180,h=o/c;let m=r+h;const v=e.times[t-1],T=(e.times[t]-v)/c;let L=v+T;const P=[],O=[];for(;L<e.times[t];)P.push(L),L+=T,O.push(m),m+=h;e.times=A2(e.times,t,P),e.values=A2(e.values,t,O)}}}}class hH{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new b2,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(o,l){const c=o.match(/^[\s\t]*;/),h=o.match(/^[\s\t]*$/);if(c||h)return;const m=o.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),v=o.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=o.match("^\\t{"+(t.currentIndent-1)+"}}");m?t.parseNodeBegin(o,m):v?t.parseNodeProperty(o,v,r[++l]):b?t.popStack():o.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(o)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),o=t[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),l={name:r},c=this.parseNodeAttr(o),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,l):r in h?(r==="PoseNode"?h.PoseNode.push(l):h[r].id!==void 0&&(h[r]={},h[r][h[r].id]=h[r]),c.id!==""&&(h[r][c.id]=l)):typeof c.id=="number"?(h[r]={},h[r][c.id]=l):r!=="Properties70"&&(r==="PoseNode"?h[r]=[l]:h[r]=l),typeof c.id=="number"&&(l.id=c.id),c.name!==""&&(l.attrName=c.name),c.type!==""&&(l.attrType=c.type),this.pushStack(l)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",o="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),o=e[2]),{id:t,name:r,type:o}}parseNodeProperty(e,t,r){let o=t[1].replace(/^"/,"").replace(/"$/,"").trim(),l=t[2].replace(/^"/,"").replace(/"$/,"").trim();o==="Content"&&l===","&&(l=r.replace(/"/g,"").replace(/,$/,"").trim());const c=this.getCurrentNode();if(c.name==="Properties70"){this.parseNodeSpecialProperty(e,o,l);return}if(o==="C"){const m=l.split(",").slice(1),v=parseInt(m[0]),b=parseInt(m[1]);let T=l.split(",").slice(3);T=T.map(function(L){return L.trim().replace(/^"/,"")}),o="connections",l=[v,b],yH(l,T),c[o]===void 0&&(c[o]=[])}o==="Node"&&(c.id=l),o in c&&Array.isArray(c[o])?c[o].push(l):o!=="a"?c[o]=l:c.a=l,this.setCurrentProp(c,o),o==="a"&&l.slice(-1)!==","&&(c.a=D1(l))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=D1(t.a))}parseNodeSpecialProperty(e,t,r){const o=r.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),l=o[0],c=o[1],h=o[2],m=o[3];let v=o[4];switch(c){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=D1(v);break}this.getPrevNode()[l]={type:c,type2:h,flag:m,value:v},this.setCurrentProp(this.getPrevNode(),l)}}class dH{parse(e){const t=new _2(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const o=new b2;for(;!this.endOfContent(t);){const l=this.parseNode(t,r);l!==null&&o.add(l.name,l)}return o}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&~15)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},o=t>=7500?e.getUint64():e.getUint32(),l=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const c=e.getUint8(),h=e.getString(c);if(o===0)return null;const m=[];for(let L=0;L<l;L++)m.push(this.parseProperty(e));const v=m.length>0?m[0]:"",b=m.length>1?m[1]:"",T=m.length>2?m[2]:"";for(r.singleProperty=l===1&&e.getOffset()===o;o>e.getOffset();){const L=this.parseNode(e,t);L!==null&&this.parseSubNode(h,r,L)}return r.propertyList=m,typeof v=="number"&&(r.id=v),b!==""&&(r.attrName=b),T!==""&&(r.attrType=T),h!==""&&(r.name=h),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const o=r.propertyList[0];Array.isArray(o)?(t[r.name]=r,r.a=o):t[r.name]=o}else if(e==="Connections"&&r.name==="C"){const o=[];r.propertyList.forEach(function(l,c){c!==0&&o.push(l)}),t.connections===void 0&&(t.connections=[]),t.connections.push(o)}else if(r.name==="Properties70")Object.keys(r).forEach(function(l){t[l]=r[l]});else if(e==="Properties70"&&r.name==="P"){let o=r.propertyList[0],l=r.propertyList[1];const c=r.propertyList[2],h=r.propertyList[3];let m;o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),l.indexOf("Lcl ")===0&&(l=l.replace("Lcl ","Lcl_")),l==="Color"||l==="ColorRGB"||l==="Vector"||l==="Vector3D"||l.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],t[o]={type:l,type2:c,flag:h,value:m}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const o=e.getUint32(),l=e.getUint32(),c=e.getUint32();if(l===0)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}typeof tH=="undefined"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const h=sd(new Uint8Array(e.getArrayBuffer(c))),m=new _2(h.buffer);switch(t){case"b":case"c":return m.getBooleanArray(o);case"d":return m.getFloat64Array(o);case"f":return m.getFloat32Array(o);case"i":return m.getInt32Array(o);case"l":return m.getInt64Array(o)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class _2{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)==1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let o=0;o<e;o++)t[o]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),bi.decodeText(new Uint8Array(t))}}class b2{add(e,t){this[e]=t}}function pH(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===E2(i,0,e.length)}function mH(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(o){const l=i[o-1];return i=i.slice(t+o),t++,l}for(let o=0;o<e.length;++o)if(r(1)===e[o])return!1;return!0}function S2(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function gH(i){return i/46186158e3}const vH=[];function jg(i,e,t,r){let o;switch(r.mappingType){case"ByPolygonVertex":o=i;break;case"ByPolygon":o=e;break;case"ByVertice":o=t;break;case"AllSame":o=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(o=r.indices[o]);const l=o*r.dataSize,c=l+r.dataSize;return xH(vH,r.buffer,l,c)}const O1=new wi,Xc=new fe;function M2(i){const e=new Qe,t=new Qe,r=new Qe,o=new Qe,l=new Qe,c=new Qe,h=new Qe,m=new Qe,v=new Qe,b=new Qe,T=new Qe,L=new Qe,P=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Xc.fromArray(i.translation)),i.preRotation){const le=i.preRotation.map(yi.degToRad);le.push(i.eulerOrder),t.makeRotationFromEuler(O1.fromArray(le))}if(i.rotation){const le=i.rotation.map(yi.degToRad);le.push(i.eulerOrder),r.makeRotationFromEuler(O1.fromArray(le))}if(i.postRotation){const le=i.postRotation.map(yi.degToRad);le.push(i.eulerOrder),o.makeRotationFromEuler(O1.fromArray(le)),o.invert()}i.scale&&l.scale(Xc.fromArray(i.scale)),i.scalingOffset&&h.setPosition(Xc.fromArray(i.scalingOffset)),i.scalingPivot&&c.setPosition(Xc.fromArray(i.scalingPivot)),i.rotationOffset&&m.setPosition(Xc.fromArray(i.rotationOffset)),i.rotationPivot&&v.setPosition(Xc.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(T.copy(i.parentMatrix),b.copy(i.parentMatrixWorld));const O=t.clone().multiply(r).multiply(o),z=new Qe;z.extractRotation(b);const G=new Qe;G.copyPosition(b);const k=G.clone().invert().multiply(b),A=z.clone().invert().multiply(k),N=l,I=new Qe;if(P===0)I.copy(z).multiply(O).multiply(A).multiply(N);else if(P===1)I.copy(z).multiply(A).multiply(O).multiply(N);else{const he=new Qe().scale(new fe().setFromMatrixScale(T)).clone().invert(),re=A.clone().multiply(he);I.copy(z).multiply(O).multiply(re).multiply(N)}const B=v.clone().invert(),V=c.clone().invert();let X=e.clone().multiply(m).multiply(v).multiply(t).multiply(r).multiply(o).multiply(B).multiply(h).multiply(c).multiply(l).multiply(V);const Q=new Qe().copyPosition(X),ae=b.clone().multiply(Q);return L.copyPosition(ae),X=L.clone().multiply(I),X.premultiply(b.invert()),X}function T2(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function D1(i){return i.split(",").map(function(t){return parseFloat(t)})}function E2(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),bi.decodeText(new Uint8Array(i,e,t))}function yH(i,e){for(let t=0,r=i.length,o=e.length;t<o;t++,r++)i[r]=e[t]}function xH(i,e,t,r){for(let o=t,l=0;o<r;o++,l++)i[l]=e[o];return i}function A2(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}var N1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function wH(i){if(i.__esModule)return i;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(t){var r=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return i[t]}})}),e}function _H(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var C2={};(function(i){var e=typeof N1!="undefined"?N1:window,t=Object.create(e);t.scheduleImmediate=t.setImmediate?function(l){e.setImmediate(l)}:function(l){setTimeout(l,0)},t.exports=i,typeof process!="undefined"&&(t.process=process),typeof __dirname!="undefined"&&(t.__dirname=__dirname),typeof __filename!="undefined"&&(t.__filename=__filename);var r=!e.window;try{typeof WorkerGlobalScope!="undefined"&&e instanceof WorkerGlobalScope&&(r=!1),e.process&&e.process.versions&&e.process.versions.hasOwnProperty("electron")&&e.process.versions.hasOwnProperty("node")&&(r=!0)}catch{}if(r){var o=(typeof __webpack_require__!="undefined"?__non_webpack_require__:_H)("url");t.location={get href(){return o.pathToFileURL?o.pathToFileURL(process.cwd()).href+"/":"file://"+function(){var l=process.cwd();return process.platform!="win32"?l:"/"+l.replace(/\\/g,"/")}()+"/"}},function(){function l(){try{throw new Error}catch(T){var h=T.stack,m=new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","mg"),v=null;do{var b=m.exec(h);b!=null&&(v=b)}while(b!=null);return v[1]}}var c=null;t.document={get currentScript(){return c==null&&(c={src:l()}),c}}}(),t.dartDeferredLibraryLoader=function(l,c,h){try{load(l),c()}catch(m){h(m)}}}(function(){function c(n,s){for(var a=Object.keys(n),f=0;f<a.length;f++){var g=a[f];s[g]=n[g]}}var h=function(){var n=function(){};n.prototype={p:{}};var s=new n;if(!(s.__proto__&&s.__proto__.p===n.prototype.p))return!1;try{if(typeof navigator!="undefined"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if(typeof version=="function"&&version.length==0){var a=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(a))return!0}}catch{}return!1}();function m(n){function s(){}if(typeof s.name!="string")for(var a=0;a<n.length;a++)for(var f=n[a],g=Object.keys(f),y=0;y<g.length;y++){var S=g[y],C=f[S];typeof C=="function"&&(C.name=S)}}function v(n,s){if(n.prototype.constructor=n,n.prototype["$i"+n.name]=n,s!=null){if(h){n.prototype.__proto__=s.prototype;return}var a=Object.create(s.prototype);c(n.prototype,a),n.prototype=a}}function b(n,s){for(var a=0;a<s.length;a++)v(s[a],n)}function T(n,s){c(s.prototype,n.prototype),n.prototype.constructor=n}function L(n,s,a,f){var g=n;n[s]=g,n[a]=function(){n[a]=function(){p.w8(s)};var y,S=f;try{n[s]===g?(y=n[s]=S,y=n[s]=f()):y=n[s]}finally{y===S&&(n[s]=null),n[a]=function(){return this[s]}}return y}}function P(n,s,a,f){var g=n;n[s]=g,n[a]=function(){return n[s]===g&&(n[s]=f()),n[a]=function(){return this[s]},n[s]}}function O(n){return n.immutable$list=Array,n.fixed$length=Array,n}function z(n){return n}function G(n){for(var s=0;s<n.length;++s)z(n[s])}var k=0;function A(n,s,a,f,g){return g?new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+k+++"(receiver) {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, true, name);return new c(this, funcs[0], receiver, name);}")(n,s,a,f,p,null):new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+k+++"() {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, false, name);return new c(this, funcs[0], null, name);}")(n,s,a,f,p,null)}function N(n,s,a,f,g,y){var S=null;return f?function(){return S===null&&(S=p.mX(this,n,s,a,!0,!1,g).prototype),S}:A(n,s,a,g,y)}var I=0;function B(n,s,a,f,g,y,S,C,R,D){for(var H=[],q=0;q<C.length;q++){var K=C[q];typeof K=="string"&&(K=n[K]),K.$callName=S[q],H.push(K)}var K=H[0];K.$R=g,K.$D=y;var ne=R;typeof ne=="number"&&(ne+=I);var te=C[0];K.$stubName=te;var ue=N(H,D||0,ne,a,te,f);n[s]=ue,a&&(K.$tearOff=ue)}function V(n,s,a,f,g,y,S,C){return B(n,s,!0,!1,a,f,g,y,S,C)}function X(n,s,a,f,g,y,S,C,R){return B(n,s,!1,a,f,g,y,S,C,R)}function Q(n){var s=Je.interceptorsByTag;if(!s){Je.interceptorsByTag=n;return}c(n,s)}function ae(n){var s=Je.leafTags;if(!s){Je.leafTags=n;return}c(n,s)}function le(n){var s=Je.types,a=s.length;return s.push.apply(s,n),a}function he(n,s){return c(s,n),n}var re=function(){var n=function(a,f,g,y,S){return function(C,R,D,H){return X(C,R,a,f,g,y,[D],H,S)}},s=function(a,f,g,y){return function(S,C,R,D){return V(S,C,a,f,g,[R],D,y)}};return{inherit:v,inheritMany:b,mixin:T,installStaticTearOff:V,installInstanceTearOff:X,_instance_0u:n(0,0,null,["$0"],0),_instance_1u:n(0,1,null,["$1"],0),_instance_2u:n(0,2,null,["$2"],0),_instance_0i:n(1,0,null,["$0"],0),_instance_1i:n(1,1,null,["$1"],0),_instance_2i:n(1,2,null,["$2"],0),_static_0:s(0,null,["$0"],0),_static_1:s(1,null,["$1"],0),_static_2:s(2,null,["$2"],0),makeConstList:O,lazy:P,lazyOld:L,updateHolder:he,convertToFastObject:z,setFunctionNamesIfNecessary:m,updateTypes:le,setOrUpdateInterceptorsByTag:Q,setOrUpdateLeafTags:ae}}();function ee(n){for(var s=0;s<vt.length;s++)if(vt[s]!=_&&vt[s][n])return vt[s][n]}var _={},p={mD:function(){},fP:function(n,s,a){return s.h("n<0>").b(n)?new p.dC(n,s.h("@<0>").D(a).h("dC<1,2>")):new p.bX(n,s.h("@<0>").D(a).h("bX<1,2>"))},nM:function(n){return new p.eD(n)},m8:function(n){var s,a=n^48;return a<=9?a:(s=n|32,97<=s&&s<=102?s-87:-1)},p5:function(n,s){var a=p.m8(_.a.A(n,s)),f=p.m8(_.a.A(n,s+1));return a*16+f-(f&256)},du:function(n,s,a,f){return E.aU(s,"start"),a!=null&&(E.aU(a,"end"),s>a&&p.a2(E.S(s,0,a,"start",null))),new p.dt(n,s,a,f.h("dt<0>"))},ja:function(n,s,a,f){return U.O.b(n)?new p.c_(n,s,a.h("@<0>").D(f).h("c_<1,2>")):new p.b9(n,s,a.h("@<0>").D(f).h("b9<1,2>"))},o5:function(n,s,a){var f="count";return U.O.b(n)?(E.aM(s,f),E.aU(s,f),new p.cw(n,s,a.h("cw<0>"))):(E.aM(s,f),E.aU(s,f),new p.bc(n,s,a.h("bc<0>")))},mB:function(){return new E.bz("No element")},tg:function(){return new E.bz("Too few elements")},bE:function(){},d3:function(s,a){this.a=s,this.$ti=a},bX:function(s,a){this.a=s,this.$ti=a},dC:function(s,a){this.a=s,this.$ti=a},dx:function(){},b3:function(s,a){this.a=s,this.$ti=a},bY:function(s,a){this.a=s,this.$ti=a},fQ:function(s,a){this.a=s,this.b=a},eD:function(s){this.a=s},cu:function(s){this.a=s},n:function(){},af:function(){},dt:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.$ti=g},a6:function(s,a,f){var g=this;g.a=s,g.b=a,g.c=0,g.d=null,g.$ti=f},b9:function(s,a,f){this.a=s,this.b=a,this.$ti=f},c_:function(s,a,f){this.a=s,this.b=a,this.$ti=f},a7:function(s,a,f){var g=this;g.a=null,g.b=s,g.c=a,g.$ti=f},a8:function(s,a,f){this.a=s,this.b=a,this.$ti=f},l_:function(s,a,f){this.a=s,this.b=a,this.$ti=f},cm:function(s,a,f){this.a=s,this.b=a,this.$ti=f},bc:function(s,a,f){this.a=s,this.b=a,this.$ti=f},cw:function(s,a,f){this.a=s,this.b=a,this.$ti=f},dr:function(s,a,f){this.a=s,this.b=a,this.$ti=f},b6:function(s){this.$ti=s},d6:function(s){this.$ti=s},d8:function(){},f7:function(){},cI:function(){},cG:function(s){this.a=s},e4:function(){},t2:function(){throw p.c(E.ab("Cannot modify unmodifiable Map"))},pd:function(n){var s,a=p.pc(n);return a!=null?a:(s="minified:"+n,s)},p1:function(n,s){var a;return s!=null&&(a=s.x,a!=null)?a:U.aU.b(n)},b:function(n){var s;if(typeof n=="string")return n;if(typeof n=="number"){if(n!==0)return""+n}else{if(n===!0)return"true";if(n===!1)return"false";if(n==null)return"null"}if(s=Z.ag(n),typeof s!="string")throw p.c(p.bM(n));return s},cj:function(n){var s=n.$identityHash;return s==null&&(s=Math.random()*1073741823|0,n.$identityHash=s),s},o1:function(n,s){var a,f,g,y,S,C,R=null;if(typeof n!="string"&&p.a2(p.bM(n)),a=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(n),a==null)return R;if(f=a[3],s==null)return f!=null?parseInt(n,10):a[2]!=null?parseInt(n,16):R;if(s<2||s>36)throw p.c(E.S(s,2,36,"radix",R));if(s===10&&f!=null)return parseInt(n,10);if(s<10||f==null){for(g=s<=10?47+s:86+s,y=a[1],S=y.length,C=0;C<S;++C)if((_.a.H(y,C)|32)>g)return R}return parseInt(n,s)},ju:function(n){return p.tG(n)},tG:function(n){var s,a,f;if(n instanceof E.e)return p.az(p.ac(n),null);if(Z.cq(n)===_.by||U.ak.b(n)){if(s=_.a_(n),p.nV(s))return s;if(a=n.constructor,typeof a=="function"&&(f=a.name,typeof f=="string"&&p.nV(f)))return f}return p.az(p.ac(n),null)},nV:function(n){var s=n!=="Object"&&n!=="";return s},nU:function(n){var s,a,f,g,y=n.length;if(y<=500)return String.fromCharCode.apply(null,n);for(s="",a=0;a<y;a=f)f=a+500,g=f<y?f:y,s+=String.fromCharCode.apply(null,n.slice(a,g));return s},tJ:function(n){var s,a,f,g=p.a([],U.Z);for(s=n.length,a=0;a<n.length;n.length===s||(0,p.cs)(n),++a){if(f=n[a],!p.aJ(f))throw p.c(p.bM(f));if(f<=65535)g.push(f);else if(f<=1114111)g.push(55296+(_.c.ad(f-65536,10)&1023)),g.push(56320+(f&1023));else throw p.c(p.bM(f))}return p.nU(g)},tI:function(n){var s,a,f;for(s=n.length,a=0;a<s;++a){if(f=n[a],!p.aJ(f)||f<0)throw p.c(p.bM(f));if(f>65535)return p.tJ(n)}return p.nU(n)},tK:function(n,s,a){var f,g,y,S;if(a<=500&&s===0&&a===n.length)return String.fromCharCode.apply(null,n);for(f=s,g="";f<a;f=y)y=f+500,S=y<a?y:a,g+=String.fromCharCode.apply(null,n.subarray(f,S));return g},ba:function(n){var s;if(0<=n){if(n<=65535)return String.fromCharCode(n);if(n<=1114111)return s=n-65536,String.fromCharCode((55296|_.c.ad(s,10))>>>0,56320|s&1023)}throw p.c(E.S(n,0,1114111,null,null))},aw:function(n){return n.date===void 0&&(n.date=new Date(n.a)),n.date},eV:function(n){return n.b?p.aw(n).getUTCFullYear()+0:p.aw(n).getFullYear()+0},o_:function(n){return n.b?p.aw(n).getUTCMonth()+1:p.aw(n).getMonth()+1},nW:function(n){return n.b?p.aw(n).getUTCDate()+0:p.aw(n).getDate()+0},nX:function(n){return n.b?p.aw(n).getUTCHours()+0:p.aw(n).getHours()+0},nZ:function(n){return n.b?p.aw(n).getUTCMinutes()+0:p.aw(n).getMinutes()+0},o0:function(n){return n.b?p.aw(n).getUTCSeconds()+0:p.aw(n).getSeconds()+0},nY:function(n){return n.b?p.aw(n).getUTCMilliseconds()+0:p.aw(n).getMilliseconds()+0},bu:function(n,s,a){var f,g,y={};return y.a=0,f=[],g=[],y.a=s.length,_.d.K(f,s),y.b="",a!=null&&a.a!==0&&a.J(0,new p.jt(y,g,f)),""+y.a,Z.ry(n,new p.ig(_.d5,0,f,g,0))},tH:function(n,s,a){var f,g,y,S;if(s instanceof Array?f=a==null||a.a===0:f=!1,f){if(g=s,y=g.length,y===0){if(n.$0)return n.$0()}else if(y===1){if(n.$1)return n.$1(g[0])}else if(y===2){if(n.$2)return n.$2(g[0],g[1])}else if(y===3){if(n.$3)return n.$3(g[0],g[1],g[2])}else if(y===4){if(n.$4)return n.$4(g[0],g[1],g[2],g[3])}else if(y===5&&n.$5)return n.$5(g[0],g[1],g[2],g[3],g[4]);if(S=n["$"+y],S!=null)return S.apply(n,g)}return p.tF(n,s,a)},tF:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne,te,ue;if(s!=null?f=s instanceof Array?s:E.dh(s,!0,U.z):f=[],g=f.length,y=n.$R,g<y)return p.bu(n,f,a);if(S=n.$D,C=S==null,R=C?null:S(),D=Z.cq(n),H=D.$C,typeof H=="string"&&(H=D[H]),C)return a!=null&&a.a!==0?p.bu(n,f,a):g===y?H.apply(n,f):p.bu(n,f,a);if(R instanceof Array)return a!=null&&a.a!==0?p.bu(n,f,a):g>y+R.length?p.bu(n,f,null):(_.d.K(f,R.slice(g-y)),H.apply(n,f));if(g>y)return p.bu(n,f,a);if(q=Object.keys(R),a==null)for(C=q.length,K=0;K<q.length;q.length===C||(0,p.cs)(q),++K){if(ne=R[q[K]],_.a4===ne)return p.bu(n,f,a);_.d.B(f,ne)}else{for(C=q.length,te=0,K=0;K<q.length;q.length===C||(0,p.cs)(q),++K)if(ue=q[K],a.w(ue))++te,_.d.B(f,a.j(0,ue));else{if(ne=R[ue],_.a4===ne)return p.bu(n,f,a);_.d.B(f,ne)}if(te!==a.a)return p.bu(n,f,a)}return H.apply(n,f)},ef:function(n,s){var a,f="index";return p.aJ(s)?(a=Z.X(n),s<0||s>=a?E.ex(s,n,f,null,a):E.jv(s,f)):new E.ak(!0,s,f,null)},vw:function(n,s,a){return n<0||n>a?E.S(n,0,a,"start",null):s!=null&&(s<n||s>a)?E.S(s,n,a,"end",null):new E.ak(!0,s,"end",null)},bM:function(n){return new E.ak(!0,n,null,null)},c:function(n){var s,a;return n==null&&(n=new E.eR),s=new Error,s.dartException=n,a=p.w9,"defineProperty"in Object?(Object.defineProperty(s,"message",{get:a}),s.name=""):s.toString=a,s},w9:function(){return Z.ag(this.dartException)},a2:function(n){throw p.c(n)},cs:function(n){throw p.c(E.ad(n))},bd:function(n){var s,a,f,g,y,S;return n=p.p8(n.replace(String({}),"$receiver$")),s=n.match(/\\\$[a-zA-Z]+\\\$/g),s==null&&(s=p.a([],U.s)),a=s.indexOf("\\$arguments\\$"),f=s.indexOf("\\$argumentsExpr\\$"),g=s.indexOf("\\$expr\\$"),y=s.indexOf("\\$method\\$"),S=s.indexOf("\\$receiver\\$"),new p.kJ(n.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),a,f,g,y,S)},kK:function(n){return function(s){var a="$arguments$";try{s.$method$(a)}catch(f){return f.message}}(n)},o8:function(n){return function(s){try{s.$method$}catch(a){return a.message}}(n)},nT:function(n,s){return new p.eQ(n,s==null?null:s.method)},mE:function(n,s){var a=s==null,f=a?null:s.method;return new p.eC(n,f,a?null:s.receiver)},E:function(n){return n==null?new p.eS(n):n instanceof p.d7?p.bN(n,n.a):typeof n!="object"?n:"dartException"in n?p.bN(n,n.dartException):p.vc(n)},bN:function(n,s){return U.C.b(s)&&s.$thrownJsError==null&&(s.$thrownJsError=n),s},vc:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue=null;if(!("message"in n))return n;if(s=n.message,"number"in n&&typeof n.number=="number"&&(a=n.number,f=a&65535,(_.c.ad(a,16)&8191)==10))switch(f){case 438:return p.bN(n,p.mE(p.b(s)+" (Error "+f+")",ue));case 445:case 5007:return p.bN(n,p.nT(p.b(s)+" (Error "+f+")",ue))}return n instanceof TypeError?(g=j.r9(),y=j.ra(),S=j.rb(),C=j.rc(),R=j.rf(),D=j.rg(),H=j.re(),j.rd(),q=j.ri(),K=j.rh(),ne=g.a4(s),ne!=null?p.bN(n,p.mE(s,ne)):(ne=y.a4(s),ne!=null?(ne.method="call",p.bN(n,p.mE(s,ne))):(ne=S.a4(s),ne==null?(ne=C.a4(s),ne==null?(ne=R.a4(s),ne==null?(ne=D.a4(s),ne==null?(ne=H.a4(s),ne==null?(ne=C.a4(s),ne==null?(ne=q.a4(s),ne==null?(ne=K.a4(s),te=ne!=null):te=!0):te=!0):te=!0):te=!0):te=!0):te=!0):te=!0,te?p.bN(n,p.nT(s,ne)):p.bN(n,new p.f6(typeof s=="string"?s:""))))):n instanceof RangeError?typeof s=="string"&&s.indexOf("call stack")!==-1?new E.ds:(s=function(ce){try{return String(ce)}catch{}return null}(n),p.bN(n,new E.ak(!1,ue,ue,typeof s=="string"?s.replace(/^RangeError:\s*/,""):s))):typeof InternalError=="function"&&n instanceof InternalError&&typeof s=="string"&&s==="too much recursion"?new E.ds:n},aK:function(n){var s;return n instanceof p.d7?n.b:n==null?new p.dS(n):(s=n.$cachedTrace,s!=null?s:n.$cachedTrace=new p.dS(n))},p4:function(n){return n==null||typeof n!="object"?Z.aL(n):p.cj(n)},oU:function(n,s){var a,f,g,y=n.length;for(a=0;a<y;a=g)f=a+1,g=f+1,s.m(0,n[a],n[f]);return s},vA:function(n,s){var a,f=n.length;for(a=0;a<f;++a)s.B(0,n[a]);return s},vK:function(n,s,a,f,g,y){switch(s){case 0:return n.$0();case 1:return n.$1(a);case 2:return n.$2(a,f);case 3:return n.$3(a,f,g);case 4:return n.$4(a,f,g,y)}throw p.c(E.t7("Unsupported number of arguments for wrapped closure"))},m0:function(n,s){var a;return n==null?null:(a=n.$identity,a||(a=function(f,g,y){return function(S,C,R,D){return y(f,g,S,C,R,D)}}(n,s,p.vK),n.$identity=a,a))},t1:function(n,s,a,f,g,y,S){var C,R,D,H,q,K,ne,te=s[0],ue=te.$callName,ce=Object.create(g?new p.f_().constructor.prototype:new p.ct(null,null,null,"").constructor.prototype);for(ce.$initialize=ce.constructor,g?C=function(){this.$initialize()}:(R=j.b4,j.b4=R+1,R=new Function("a,b,c,d"+R,"this.$initialize(a,b,c,d"+R+")"),C=R),ce.constructor=C,C.prototype=ce,g?(ce.$static_name=S,D=te):(D=p.nF(n,te,y),D.$reflectionInfo=f),ce.$S=p.rY(f,g,y),ce[ue]=D,H=D,q=1;q<s.length;++q)K=s[q],ne=K.$callName,ne!=null&&(K=g?K:p.nF(n,K,y),ce[ne]=K),q===a&&(K.$reflectionInfo=f,H=K);return ce.$C=H,ce.$R=te.$R,ce.$D=te.$D,C},rY:function(n,s,a){var f;if(typeof n=="number")return function(g,y){return function(){return g(y)}}(p.oZ,n);if(typeof n=="string"){if(s)throw p.c("Cannot compute signature for static tearoff.");return f=a?p.rR:p.rQ,function(g,y){return function(){return y(this,g)}}(n,f)}throw p.c("Error in functionType of tearoff")},rZ:function(n,s,a,f){var g=p.nE;switch(s?-1:n){case 0:return function(y,S){return function(){return S(this)[y]()}}(a,g);case 1:return function(y,S){return function(C){return S(this)[y](C)}}(a,g);case 2:return function(y,S){return function(C,R){return S(this)[y](C,R)}}(a,g);case 3:return function(y,S){return function(C,R,D){return S(this)[y](C,R,D)}}(a,g);case 4:return function(y,S){return function(C,R,D,H){return S(this)[y](C,R,D,H)}}(a,g);case 5:return function(y,S){return function(C,R,D,H,q){return S(this)[y](C,R,D,H,q)}}(a,g);default:return function(y,S){return function(){return y.apply(S(this),arguments)}}(f,g)}},nF:function(n,s,a){var f,g,y,S,C,R,D;return a?p.t0(n,s):(f=s.$stubName,g=s.length,y=n[f],S=s==null?y==null:s===y,C=!S||g>=27,C?p.rZ(g,!S,f,s):g===0?(S=j.b4,j.b4=S+1,R="self"+p.b(S),new Function("return function(){var "+R+" = this."+p.b(p.mA())+";return "+R+"."+p.b(f)+"();}")()):(D="abcdefghijklmnopqrstuvwxyz".split("").splice(0,g).join(","),S=j.b4,j.b4=S+1,D+=p.b(S),new Function("return function("+D+"){return this."+p.b(p.mA())+"."+p.b(f)+"("+D+");}")()))},t_:function(n,s,a,f){var g=p.nE,y=p.rS;switch(s?-1:n){case 0:throw p.c(new p.eZ("Intercepted function with no arguments."));case 1:return function(S,C,R){return function(){return C(this)[S](R(this))}}(a,g,y);case 2:return function(S,C,R){return function(D){return C(this)[S](R(this),D)}}(a,g,y);case 3:return function(S,C,R){return function(D,H){return C(this)[S](R(this),D,H)}}(a,g,y);case 4:return function(S,C,R){return function(D,H,q){return C(this)[S](R(this),D,H,q)}}(a,g,y);case 5:return function(S,C,R){return function(D,H,q,K){return C(this)[S](R(this),D,H,q,K)}}(a,g,y);case 6:return function(S,C,R){return function(D,H,q,K,ne){return C(this)[S](R(this),D,H,q,K,ne)}}(a,g,y);default:return function(S,C,R,D){return function(){return D=[R(this)],Array.prototype.push.apply(D,arguments),S.apply(C(this),D)}}(f,g,y)}},t0:function(n,s){var a,f,g,y,S,C,R=p.mA(),D=j.nC;return D==null&&(D=j.nC=p.nB("receiver")),a=s.$stubName,f=s.length,g=n[a],y=s==null?g==null:s===g,S=!y||f>=28,S?p.t_(f,!y,a,s):f===1?(y="return function(){return this."+p.b(R)+"."+p.b(a)+"(this."+D+");",S=j.b4,j.b4=S+1,new Function(y+p.b(S)+"}")()):(C="abcdefghijklmnopqrstuvwxyz".split("").splice(0,f-1).join(","),y="return function("+C+"){return this."+p.b(R)+"."+p.b(a)+"(this."+D+", "+C+");",S=j.b4,j.b4=S+1,new Function(y+p.b(S)+"}")())},mX:function(n,s,a,f,g,y,S){return p.t1(n,s,a,f,!!g,!!y,S)},rQ:function(n,s){return p.fv(Je.typeUniverse,p.ac(n.a),s)},rR:function(n,s){return p.fv(Je.typeUniverse,p.ac(n.c),s)},nE:function(n){return n.a},rS:function(n){return n.c},mA:function(){var n=j.nD;return n==null?j.nD=p.nB("self"):n},nB:function(n){var s,a,f,g=new p.ct("self","target","receiver","name"),y=Z.mC(Object.getOwnPropertyNames(g));for(s=y.length,a=0;a<s;++a)if(f=y[a],g[f]===n)return f;throw p.c(E.O("Field name "+n+" not found."))},w8:function(n){throw p.c(new E.er(n))},vF:function(n){return Je.getIsolateTag(n)},zh:function(n,s,a){Object.defineProperty(n,s,{value:a,enumerable:!1,writable:!0,configurable:!0})},vX:function(n){var s,a,f,g,y,S=j.oY.$1(n),C=j.m1[S];if(C!=null)return Object.defineProperty(n,Je.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(s=j.mc[S],s!=null)return s;if(a=Je.interceptorsByTag[S],a==null&&(f=j.oR.$2(n,S),f!=null)){if(C=j.m1[f],C!=null)return Object.defineProperty(n,Je.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(s=j.mc[f],s!=null)return s;a=Je.interceptorsByTag[f],S=f}if(a==null)return null;if(s=a.prototype,g=S[0],g==="!")return C=p.mp(s),j.m1[S]=C,Object.defineProperty(n,Je.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(g==="~")return j.mc[S]=s,s;if(g==="-")return y=p.mp(s),Object.defineProperty(Object.getPrototypeOf(n),Je.dispatchPropertyName,{value:y,enumerable:!1,writable:!0,configurable:!0}),y.i;if(g==="+")return p.p6(n,s);if(g==="*")throw p.c(E.o9(S));return Je.leafTags[S]===!0?(y=p.mp(s),Object.defineProperty(Object.getPrototypeOf(n),Je.dispatchPropertyName,{value:y,enumerable:!1,writable:!0,configurable:!0}),y.i):p.p6(n,s)},p6:function(n,s){var a=Object.getPrototypeOf(n);return Object.defineProperty(a,Je.dispatchPropertyName,{value:Z.n3(s,a,null,null),enumerable:!1,writable:!0,configurable:!0}),s},mp:function(n){return Z.n3(n,!1,null,!!n.$iat)},vY:function(n,s,a){var f=s.prototype;return Je.leafTags[n]===!0?p.mp(f):Z.n3(f,a,null,null)},vI:function(){j.n1!==!0&&(j.n1=!0,p.vJ())},vJ:function(){var n,s,a,f,g,y,S,C;if(j.m1=Object.create(null),j.mc=Object.create(null),p.vH(),n=Je.interceptorsByTag,s=Object.getOwnPropertyNames(n),typeof window!="undefined")for(a=function(){},f=0;f<s.length;++f)g=s[f],y=j.p7.$1(g),y!=null&&(S=p.vY(g,n[g],y),S!=null&&(Object.defineProperty(y,Je.dispatchPropertyName,{value:S,enumerable:!1,writable:!0,configurable:!0}),a.prototype=y));for(f=0;f<s.length;++f)g=s[f],/^[A-Za-z_]/.test(g)&&(C=n[g],n["!"+g]=C,n["~"+g]=C,n["-"+g]=C,n["+"+g]=C,n["*"+g]=C)},vH:function(){var n,s,a,f,g,y,S=_.b8();if(S=p.d_(_.b9,p.d_(_.ba,p.d_(_.a0,p.d_(_.a0,p.d_(_.bb,p.d_(_.bc,p.d_(_.bd(_.a_),S))))))),typeof dartNativeDispatchHooksTransformer!="undefined"&&(n=dartNativeDispatchHooksTransformer,typeof n=="function"&&(n=[n]),n.constructor==Array))for(s=0;s<n.length;++s)a=n[s],typeof a=="function"&&(S=a(S)||S);f=S.getTag,g=S.getUnknownTag,y=S.prototypeForTag,j.oY=new p.m9(f),j.oR=new p.ma(g),j.p7=new p.mb(y)},d_:function(n,s){return n(s)||s},tj:function(n,s,a,f,g,y){var S=s?"m":"",C=a?"":"i",R=f?"u":"",D=g?"s":"",H=y?"g":"",q=function(K,ne){try{return new RegExp(K,ne)}catch(te){return te}}(n,S+C+R+D+H);if(q instanceof RegExp)return q;throw p.c(E.K("Illegal RegExp pattern ("+String(q)+")",n,null))},vx:function(n){return n.indexOf("$",0)>=0?n.replace(/\$/g,"$$$$"):n},p8:function(n){return/[[\]{}()*+?.\\^$|]/.test(n)?n.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&"):n},pa:function(n,s,a){var f=p.w6(n,s,a);return f},w6:function(n,s,a){var f,g,y,S;if(s===""){if(n==="")return a;for(f=n.length,g=a,y=0;y<f;++y)g=g+n[y]+a;return g.charCodeAt(0)==0,g}return S=n.indexOf(s,0),S<0?n:n.length<500||a.indexOf("$",0)>=0?n.split(s).join(a):n.replace(new RegExp(p.p8(s),"g"),p.vx(a))},d4:function(s,a){this.a=s,this.$ti=a},cv:function(){},aq:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.$ti=g},dz:function(s,a){this.a=s,this.$ti=a},al:function(s,a){this.a=s,this.$ti=a},ig:function(s,a,f,g,y){var S=this;S.a=s,S.c=a,S.d=f,S.e=g,S.f=y},jt:function(s,a,f){this.a=s,this.b=a,this.c=f},kJ:function(s,a,f,g,y,S){var C=this;C.a=s,C.b=a,C.c=f,C.d=g,C.e=y,C.f=S},eQ:function(s,a){this.a=s,this.b=a},eC:function(s,a,f){this.a=s,this.b=a,this.c=f},f6:function(s){this.a=s},eS:function(s){this.a=s},d7:function(s,a){this.a=s,this.b=a},dS:function(s){this.a=s,this.b=null},bZ:function(){},f1:function(){},f_:function(){},ct:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},eZ:function(s){this.a=s},lA:function(){},aG:function(s){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=s},im:function(s){this.a=s},j7:function(s,a){this.a=s,this.b=a,this.c=null},au:function(s,a){this.a=s,this.$ti=a},df:function(s,a,f){var g=this;g.a=s,g.b=a,g.d=g.c=null,g.$ti=f},m9:function(s){this.a=s},ma:function(s){this.a=s},mb:function(s){this.a=s},ih:function(s,a){var f=this;f.a=s,f.b=a,f.d=f.c=null},ly:function(s){this.b=s},cW:function(n,s,a){},uH:function(n){return n},jm:function(n,s,a){var f;return p.cW(n,s,a),f=new DataView(n,s),f},ty:function(n){return new Float32Array(n)},tz:function(n){return new Int8Array(n)},nQ:function(n,s,a){var f;return p.cW(n,s,a),f=new Uint16Array(n,s,a),f},nR:function(n,s,a){var f;return p.cW(n,s,a),f=new Uint32Array(n,s,a),f},tA:function(n){return new Uint8Array(n)},mH:function(n,s,a){var f;return p.cW(n,s,a),f=new Uint8Array(n,s,a),f},bf:function(n,s,a){if(n>>>0!==n||n>=a)throw p.c(p.ef(s,n))},bJ:function(n,s,a){var f;if(n>>>0===n?f=s>>>0!==s||n>s||s>a:f=!0,f)throw p.c(p.vw(n,s,a));return s},dm:function(){},cE:function(){},dl:function(){},av:function(){},dk:function(){},eI:function(){},eJ:function(){},eK:function(){},eL:function(){},eM:function(){},eN:function(){},dn:function(){},cf:function(){},dO:function(){},dP:function(){},dQ:function(){},dR:function(){},tN:function(n,s){var a=s.c;return a==null?s.c=p.mP(n,s.z,!0):a},o3:function(n,s){var a=s.c;return a==null?s.c=p.dZ(n,"ae",[s.z]):a},o4:function(n){var s=n.y;return s===6||s===7||s===8?p.o4(n.z):s===11||s===12},tM:function(n){return n.cy},ap:function(n){return p.fu(Je.typeUniverse,n,!1)},bL:function(n,s,a,f){var g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge=s.y;switch(Ge){case 5:case 1:case 2:case 3:case 4:return s;case 6:return g=s.z,y=p.bL(n,g,a,f),y===g?s:p.ou(n,y,!0);case 7:return g=s.z,y=p.bL(n,g,a,f),y===g?s:p.mP(n,y,!0);case 8:return g=s.z,y=p.bL(n,g,a,f),y===g?s:p.ot(n,y,!0);case 9:return S=s.Q,C=p.ed(n,S,a,f),C===S?s:p.dZ(n,s.z,C);case 10:return R=s.z,D=p.bL(n,R,a,f),H=s.Q,q=p.ed(n,H,a,f),D===R&&q===H?s:p.mN(n,D,q);case 11:return K=s.z,ne=p.bL(n,K,a,f),te=s.Q,ue=p.v9(n,te,a,f),ne===K&&ue===te?s:p.os(n,ne,ue);case 12:return ce=s.Q,f+=ce.length,ge=p.ed(n,ce,a,f),R=s.z,D=p.bL(n,R,a,f),ge===ce&&D===R?s:p.mO(n,D,ge,!0);case 13:return Ne=s.z,Ne<f||(Xe=a[Ne-f],Xe==null)?s:Xe;default:throw p.c(E.fJ("Attempted to substitute unexpected RTI kind "+Ge))}},ed:function(n,s,a,f){var g,y,S,C,R=s.length,D=[];for(g=!1,y=0;y<R;++y)S=s[y],C=p.bL(n,S,a,f),C!==S&&(g=!0),D.push(C);return g?D:s},va:function(n,s,a,f){var g,y,S,C,R,D,H=s.length,q=[];for(g=!1,y=0;y<H;y+=3)S=s[y],C=s[y+1],R=s[y+2],D=p.bL(n,R,a,f),D!==R&&(g=!0),q.push(S),q.push(C),q.push(D);return g?q:s},v9:function(n,s,a,f){var g,y=s.a,S=p.ed(n,y,a,f),C=s.b,R=p.ed(n,C,a,f),D=s.c,H=p.va(n,D,a,f);return S===y&&R===C&&H===D?s:(g=new p.fj,g.a=S,g.b=R,g.c=H,g)},a:function(n,s){return n[Je.arrayRti]=s,n},vt:function(n){var s=n.$S;return s!=null?typeof s=="number"?p.oZ(s):n.$S():null},p0:function(n,s){var a;return p.o4(s)&&n instanceof p.bZ&&(a=p.vt(n),a!=null)?a:p.ac(n)},ac:function(n){var s;return n instanceof E.e?(s=n.$ti,s!=null?s:p.mS(n)):Array.isArray(n)?p.U(n):p.mS(Z.cq(n))},U:function(n){var s=n[Je.arrayRti],a=U.b;return s==null||s.constructor!==a.constructor?a:s},r:function(n){var s=n.$ti;return s!=null?s:p.mS(n)},mS:function(n){var s=n.constructor,a=s.$ccache;return a!=null?a:p.uR(n,s)},uR:function(n,s){var a=n instanceof p.bZ?n.__proto__.__proto__.constructor:s,f=p.uj(Je.typeUniverse,a.name);return s.$ccache=f,f},oZ:function(n){var s,a=Je.types,f=a[n];return typeof f=="string"?(s=p.fu(Je.typeUniverse,f,!1),a[n]=s,s):f},vu:function(n){var s,a,f,g=n.x;return g!=null?g:(s=n.cy,a=s.replace(/\*/g,""),a===s?n.x=new p.dX(n):(f=p.fu(Je.typeUniverse,a,!0),g=f.x,n.x=g==null?f.x=new p.dX(f):g))},B:function(n){return p.vu(p.fu(Je.typeUniverse,n,!1))},uQ:function(n){var s,a,f=this,g=U.K;if(f===g)return p.e8(f,n,p.uU);if(p.bh(f)?g=!0:f!==U._?g=f===g:g=!0,g)return p.e8(f,n,p.uX);if(g=f.y,s=g===6?f.z:f,s===U.r?a=p.aJ:s===U.gR||s===U.di?a=p.uT:s===U.S?a=p.uV:a=s===U.cJ?p.e9:null,a!=null)return p.e8(f,n,a);if(s.y===9){if(g=s.z,s.Q.every(p.vL))return f.r="$i"+g,p.e8(f,n,p.uW)}else if(g===7)return p.e8(f,n,p.uK);return p.e8(f,n,p.uI)},e8:function(n,s,a){return n.b=a,n.b(s)},uP:function(n){var s,a,f=this;return p.bh(f)?s=!0:f!==U._?s=f===U.K:s=!0,s?a=p.uB:f===U.K?a=p.uA:a=p.uJ,f.a=a,f.a(n)},v1:function(n){var s,a=n.y;return p.bh(n)?s=!0:n!==U._?s=n===U.K:s=!0,s||n===U.A||a===7||n===U.P||n===U.T},uI:function(n){var s=this;return n==null?p.v1(s):p.a1(Je.typeUniverse,p.p0(n,s),null,s,null)},uK:function(n){return n==null?!0:this.z.b(n)},uW:function(n){var s=this,a=s.r;return n instanceof E.e?!!n[a]:!!Z.cq(n)[a]},zb:function(n){var s=this;if(n==null)return n;if(s.b(n))return n;p.oF(n,s)},uJ:function(n){var s=this;if(n==null)return n;if(s.b(n))return n;p.oF(n,s)},oF:function(n,s){throw p.c(p.u9(p.ok(n,p.p0(n,s),p.az(s,null))))},ok:function(n,s,a){var f=E.cx(n),g=p.az(s==null?p.ac(n):s,null);return f+": type '"+p.b(g)+"' is not a subtype of type '"+p.b(a)+"'"},u9:function(n){return new p.dY("TypeError: "+n)},ao:function(n,s){return new p.dY("TypeError: "+p.ok(n,null,s))},uU:function(n){return n!=null},uA:function(n){return n},uX:function(n){return!0},uB:function(n){return n},e9:function(n){return n===!0||n===!1},yW:function(n){if(n===!0)return!0;if(n===!1)return!1;throw p.c(p.ao(n,"bool"))},yY:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool"))},yX:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool?"))},yZ:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"double"))},z0:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double"))},z_:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double?"))},aJ:function(n){return typeof n=="number"&&Math.floor(n)===n},z1:function(n){if(typeof n=="number"&&Math.floor(n)===n)return n;throw p.c(p.ao(n,"int"))},z3:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int"))},z2:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int?"))},uT:function(n){return typeof n=="number"},z4:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"num"))},z6:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num"))},z5:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num?"))},uV:function(n){return typeof n=="string"},z7:function(n){if(typeof n=="string")return n;throw p.c(p.ao(n,"String"))},z9:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String"))},z8:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String?"))},v5:function(n,s){var a,f,g;for(a="",f="",g=0;g<n.length;++g,f=", ")a+=_.a.ah(f,p.az(n[g],s));return a},oH:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt=", ";if(a!=null){for(f=a.length,s==null?(s=p.a([],U.s),g=null):g=s.length,y=s.length,S=f;S>0;--S)s.push("T"+(y+S));for(C=U.x,R=U._,D=U.K,H="<",q="",S=0;S<f;++S,q=mt)H=_.a.ah(H+q,s[s.length-1-S]),K=a[S],ne=K.y,ne===2||ne===3||ne===4||ne===5||K===C?te=!0:K!==R?te=K===D:te=!0,te||(H+=_.a.ah(" extends ",p.az(K,s)));H+=">"}else H="",g=null;for(C=n.z,ue=n.Q,ce=ue.a,ge=ce.length,Ne=ue.b,Xe=Ne.length,Ge=ue.c,St=Ge.length,ct=p.az(C,s),Mt="",dt="",S=0;S<ge;++S,dt=mt)Mt+=_.a.ah(dt,p.az(ce[S],s));if(Xe>0){for(Mt+=dt+"[",dt="",S=0;S<Xe;++S,dt=mt)Mt+=_.a.ah(dt,p.az(Ne[S],s));Mt+="]"}if(St>0){for(Mt+=dt+"{",dt="",S=0;S<St;S+=3,dt=mt)Mt+=dt,Ge[S+1]&&(Mt+="required "),Mt+=Z.ns(p.az(Ge[S+2],s)," ")+Ge[S];Mt+="}"}return g!=null&&(s.toString,s.length=g),H+"("+Mt+") => "+p.b(ct)},az:function(n,s){var a,f,g,y,S,C,R=n.y;return R===5?"erased":R===2?"dynamic":R===3?"void":R===1?"Never":R===4?"any":R===6?(a=p.az(n.z,s),a):R===7?(f=n.z,a=p.az(f,s),g=f.y,Z.ns(g===11||g===12?_.a.ah("(",a)+")":a,"?")):R===8?"FutureOr<"+p.b(p.az(n.z,s))+">":R===9?(y=p.vb(n.z),S=n.Q,S.length!==0?y+("<"+p.v5(S,s)+">"):y):R===11?p.oH(n,s,null):R===12?p.oH(n.z,s,n.Q):R===13?(s.toString,C=n.z,s[s.length-1-C]):"?"},vb:function(n){var s,a=p.pc(n);return a!=null?a:(s="minified:"+n,s)},ov:function(n,s){for(var a=n.tR[s];typeof a=="string";)a=n.tR[a];return a},uj:function(n,s){var a,f,g,y,S,C=n.eT,R=C[s];if(R==null)return p.fu(n,s,!1);if(typeof R=="number"){for(a=R,f=p.e_(n,5,"#"),g=[],y=0;y<a;++y)g.push(f);return S=p.dZ(n,s,g),C[s]=S,S}else return R},uh:function(n,s){return p.oD(n.tR,s)},ug:function(n,s){return p.oD(n.eT,s)},fu:function(n,s,a){var f,g=n.eC,y=g.get(s);return y!=null?y:(f=p.or(p.op(n,null,s,a)),g.set(s,f),f)},fv:function(n,s,a){var f,g,y=s.ch;return y==null&&(y=s.ch=new Map),f=y.get(a),f!=null?f:(g=p.or(p.op(n,s,a,!0)),y.set(a,g),g)},ui:function(n,s,a){var f,g,y,S=s.cx;return S==null&&(S=s.cx=new Map),f=a.cy,g=S.get(f),g!=null?g:(y=p.mN(n,s,a.y===10?a.Q:[a]),S.set(f,y),y)},bI:function(n,s){return s.a=p.uP,s.b=p.uQ,s},e_:function(n,s,a){var f,g,y=n.eC.get(a);return y!=null?y:(f=new p.aI(null,null),f.y=s,f.cy=a,g=p.bI(n,f),n.eC.set(a,g),g)},ou:function(n,s,a){var f,g=s.cy+"*",y=n.eC.get(g);return y!=null?y:(f=p.ue(n,s,g,a),n.eC.set(g,f),f)},ue:function(n,s,a,f){var g,y,S;return f&&(g=s.y,p.bh(s)?y=!0:y=s===U.P||s===U.T||g===7||g===6,y)?s:(S=new p.aI(null,null),S.y=6,S.z=s,S.cy=a,p.bI(n,S))},mP:function(n,s,a){var f,g=s.cy+"?",y=n.eC.get(g);return y!=null?y:(f=p.ud(n,s,g,a),n.eC.set(g,f),f)},ud:function(n,s,a,f){var g,y,S,C;if(f){if(g=s.y,p.bh(s)||s===U.P||s===U.T?y=!0:g!==7?y=g===8&&p.md(s.z):y=!0,y)return s;if(g===1||s===U.A)return U.P;if(g===6)return S=s.z,S.y===8&&p.md(S.z)?S:p.tN(n,s)}return C=new p.aI(null,null),C.y=7,C.z=s,C.cy=a,p.bI(n,C)},ot:function(n,s,a){var f,g=s.cy+"/",y=n.eC.get(g);return y!=null?y:(f=p.ub(n,s,g,a),n.eC.set(g,f),f)},ub:function(n,s,a,f){var g,y,S;if(f){if(g=s.y,p.bh(s)?y=!0:s!==U._?y=s===U.K:y=!0,y||s===U.K)return s;if(g===1)return p.dZ(n,"ae",[s]);if(s===U.P||s===U.T)return U.eH}return S=new p.aI(null,null),S.y=8,S.z=s,S.cy=a,p.bI(n,S)},uf:function(n,s){var a,f,g=""+s+"^",y=n.eC.get(g);return y!=null?y:(a=new p.aI(null,null),a.y=13,a.z=s,a.cy=g,f=p.bI(n,a),n.eC.set(g,f),f)},ft:function(n){var s,a,f,g=n.length;for(s="",a="",f=0;f<g;++f,a=",")s+=a+n[f].cy;return s},ua:function(n){var s,a,f,g,y,S,C=n.length;for(s="",a="",f=0;f<C;f+=3,a=",")g=n[f],y=n[f+1]?"!":":",S=n[f+2].cy,s+=a+g+y+S;return s},dZ:function(n,s,a){var f,g,y,S=s;return a.length!==0&&(S+="<"+p.ft(a)+">"),f=n.eC.get(S),f!=null?f:(g=new p.aI(null,null),g.y=9,g.z=s,g.Q=a,a.length>0&&(g.c=a[0]),g.cy=S,y=p.bI(n,g),n.eC.set(S,y),y)},mN:function(n,s,a){var f,g,y,S,C,R;return s.y===10?(f=s.z,g=s.Q.concat(a)):(g=a,f=s),y=f.cy+(";<"+p.ft(g)+">"),S=n.eC.get(y),S!=null?S:(C=new p.aI(null,null),C.y=10,C.z=f,C.Q=g,C.cy=y,R=p.bI(n,C),n.eC.set(y,R),R)},os:function(n,s,a){var f,g,y,S,C,R=s.cy,D=a.a,H=D.length,q=a.b,K=q.length,ne=a.c,te=ne.length,ue="("+p.ft(D);return K>0&&(f=H>0?",":"",g=p.ft(q),ue+=f+"["+g+"]"),te>0&&(f=H>0?",":"",g=p.ua(ne),ue+=f+"{"+g+"}"),y=R+(ue+")"),S=n.eC.get(y),S!=null?S:(C=new p.aI(null,null),C.y=11,C.z=s,C.Q=a,C.cy=y,g=p.bI(n,C),n.eC.set(y,g),g)},mO:function(n,s,a,f){var g,y=s.cy+("<"+p.ft(a)+">"),S=n.eC.get(y);return S!=null?S:(g=p.uc(n,s,a,y,f),n.eC.set(y,g),g)},uc:function(n,s,a,f,g){var y,S,C,R,D,H,q,K;if(g){for(y=a.length,S=new Array(y),C=0,R=0;R<y;++R)D=a[R],D.y===1&&(S[R]=D,++C);if(C>0)return H=p.bL(n,s,S,0),q=p.ed(n,a,S,0),p.mO(n,H,q,a!==q)}return K=new p.aI(null,null),K.y=12,K.z=s,K.Q=a,K.cy=f,p.bI(n,K)},op:function(n,s,a,f){return{u:n,e:s,r:a,s:[],p:0,n:f}},or:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne=n.r,te=n.s;for(s=ne.length,a=0;a<s;)if(f=ne.charCodeAt(a),f>=48&&f<=57)a=p.u4(a+1,f,ne,te);else if((((f|32)>>>0)-97&65535)<26||f===95||f===36)a=p.oq(n,a,ne,te,!1);else if(f===46)a=p.oq(n,a,ne,te,!0);else switch(++a,f){case 44:break;case 58:te.push(!1);break;case 33:te.push(!0);break;case 59:te.push(p.bH(n.u,n.e,te.pop()));break;case 94:te.push(p.uf(n.u,te.pop()));break;case 35:te.push(p.e_(n.u,5,"#"));break;case 64:te.push(p.e_(n.u,2,"@"));break;case 126:te.push(p.e_(n.u,3,"~"));break;case 60:te.push(n.p),n.p=te.length;break;case 62:if(g=n.u,y=te.splice(n.p),p.mM(n.u,n.e,y),n.p=te.pop(),S=te.pop(),typeof S=="string")te.push(p.dZ(g,S,y));else switch(C=p.bH(g,n.e,S),C.y){case 11:te.push(p.mO(g,C,y,n.n));break;default:te.push(p.mN(g,C,y));break}break;case 38:p.u5(n,te);break;case 42:R=n.u,te.push(p.ou(R,p.bH(R,n.e,te.pop()),n.n));break;case 63:R=n.u,te.push(p.mP(R,p.bH(R,n.e,te.pop()),n.n));break;case 47:R=n.u,te.push(p.ot(R,p.bH(R,n.e,te.pop()),n.n));break;case 40:te.push(n.p),n.p=te.length;break;case 41:if(g=n.u,D=new p.fj,H=g.sEA,q=g.sEA,S=te.pop(),typeof S=="number")switch(S){case-1:H=te.pop();break;case-2:q=te.pop();break;default:te.push(S);break}else te.push(S);y=te.splice(n.p),p.mM(n.u,n.e,y),n.p=te.pop(),D.a=y,D.b=H,D.c=q,te.push(p.os(g,p.bH(g,n.e,te.pop()),D));break;case 91:te.push(n.p),n.p=te.length;break;case 93:y=te.splice(n.p),p.mM(n.u,n.e,y),n.p=te.pop(),te.push(y),te.push(-1);break;case 123:te.push(n.p),n.p=te.length;break;case 125:y=te.splice(n.p),p.u7(n.u,n.e,y),n.p=te.pop(),te.push(y),te.push(-2);break;default:throw"Bad character "+f}return K=te.pop(),p.bH(n.u,n.e,K)},u4:function(n,s,a,f){var g,y,S=s-48;for(g=a.length;n<g&&(y=a.charCodeAt(n),y>=48&&y<=57);++n)S=S*10+(y-48);return f.push(S),n},oq:function(n,s,a,f,g){var y,S,C,R,D,H,q=s+1;for(y=a.length;q<y;++q)if(S=a.charCodeAt(q),S===46){if(g)break;g=!0}else if((((S|32)>>>0)-97&65535)<26||S===95||S===36?C=!0:C=S>=48&&S<=57,!C)break;return R=a.substring(s,q),g?(y=n.u,D=n.e,D.y===10&&(D=D.z),H=p.ov(y,D.z)[R],H==null&&p.a2('No "'+R+'" in "'+p.tM(D)+'"'),f.push(p.fv(y,D,H))):f.push(R),q},u5:function(n,s){var a=s.pop();if(a===0){s.push(p.e_(n.u,1,"0&"));return}if(a===1){s.push(p.e_(n.u,4,"1&"));return}throw p.c(E.fJ("Unexpected extended operation "+p.b(a)))},bH:function(n,s,a){return typeof a=="string"?p.dZ(n,a,n.sEA):typeof a=="number"?p.u6(n,s,a):a},mM:function(n,s,a){var f,g=a.length;for(f=0;f<g;++f)a[f]=p.bH(n,s,a[f])},u7:function(n,s,a){var f,g=a.length;for(f=2;f<g;f+=3)a[f]=p.bH(n,s,a[f])},u6:function(n,s,a){var f,g,y=s.y;if(y===10){if(a===0)return s.z;if(f=s.Q,g=f.length,a<=g)return f[a-1];a-=g,s=s.z,y=s.y}else if(a===0)return s;if(y!==9)throw p.c(E.fJ("Indexed base must be an interface type"));if(f=s.Q,a<=f.length)return f[a-1];throw p.c(E.fJ("Bad index "+a+" for "+s.l(0)))},a1:function(n,s,a,f,g){var y,S,C,R,D,H,q,K,ne,te;if(s===f||(p.bh(f)?y=!0:f!==U._?y=f===U.K:y=!0,y)||(S=s.y,S===4))return!0;if(p.bh(s))return!1;if(s.y!==1?y=s===U.P||s===U.T:y=!0,y||(C=S===13,C&&p.a1(n,a[s.z],a,f,g)))return!0;if(R=f.y,S===6)return p.a1(n,s.z,a,f,g);if(R===6)return y=f.z,p.a1(n,s,a,y,g);if(S===8)return p.a1(n,s.z,a,f,g)?p.a1(n,p.o3(n,s),a,f,g):!1;if(S===7)return y=p.a1(n,s.z,a,f,g),y;if(R===8)return p.a1(n,s,a,f.z,g)?!0:p.a1(n,s,a,p.o3(n,f),g);if(R===7)return y=p.a1(n,s,a,f.z,g),y;if(C)return!1;if(y=S!==11,(!y||S===12)&&f===U.b8)return!0;if(R===12){if(s===U.g)return!0;if(S!==12||(D=s.Q,H=f.Q,q=D.length,q!==H.length))return!1;for(a=a==null?D:D.concat(a),g=g==null?H:H.concat(g),K=0;K<q;++K)if(ne=D[K],te=H[K],!p.a1(n,ne,a,te,g)||!p.a1(n,te,g,ne,a))return!1;return p.oJ(n,s.z,a,f.z,g)}return R===11?s===U.g?!0:y?!1:p.oJ(n,s,a,f,g):S===9?R!==9?!1:p.uS(n,s,a,f,g):!1},oJ:function(n,s,a,f,g){var y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt;if(!p.a1(n,s.z,a,f.z,g)||(y=s.Q,S=f.Q,C=y.a,R=S.a,D=C.length,H=R.length,D>H)||(q=H-D,K=y.b,ne=S.b,te=K.length,ue=ne.length,D+te<H+ue))return!1;for(ce=0;ce<D;++ce)if(ge=C[ce],!p.a1(n,R[ce],g,ge,a))return!1;for(ce=0;ce<q;++ce)if(ge=K[ce],!p.a1(n,R[D+ce],g,ge,a))return!1;for(ce=0;ce<ue;++ce)if(ge=K[q+ce],!p.a1(n,ne[ce],g,ge,a))return!1;for(Ne=y.c,Xe=S.c,Ge=Ne.length,St=Xe.length,ct=0,Mt=0;Mt<St;Mt+=3)for(dt=Xe[Mt];;){if(ct>=Ge||(mt=Ne[ct],ct+=3,dt<mt))return!1;if(!(mt<dt)){if(ge=Ne[ct-1],!p.a1(n,Xe[Mt+2],g,ge,a))return!1;break}}return!0},uS:function(n,s,a,f,g){var y,S,C,R,D,H,q,K,ne=s.z,te=f.z;if(ne===te){for(y=s.Q,S=f.Q,C=y.length,R=0;R<C;++R)if(D=y[R],H=S[R],!p.a1(n,D,a,H,g))return!1;return!0}if(f===U.K)return!0;if(q=p.ov(n,ne),q==null||(K=q[te],K==null))return!1;for(C=K.length,S=f.Q,R=0;R<C;++R)if(!p.a1(n,p.fv(n,s,K[R]),a,S[R],g))return!1;return!0},md:function(n){var s,a=n.y;return n===U.P||n===U.T||p.bh(n)?s=!0:a!==7?a===6&&p.md(n.z)?s=!0:s=a===8&&p.md(n.z):s=!0,s},vL:function(n){var s;return p.bh(n)?s=!0:n!==U._?s=n===U.K:s=!0,s},bh:function(n){var s=n.y;return s===2||s===3||s===4||s===5||n===U.x},oD:function(n,s){var a,f,g=Object.keys(s),y=g.length;for(a=0;a<y;++a)f=g[a],n[f]=s[f]},aI:function(s,a){var f=this;f.a=s,f.b=a,f.x=f.r=f.c=null,f.y=0,f.cy=f.cx=f.ch=f.Q=f.z=null},fj:function(){this.c=this.b=this.a=null},dX:function(s){this.a=s},fi:function(){},dY:function(s){this.a=s},pc:function(n){return Je.mangledGlobalNames[n]}},Z={n3:function(n,s,a,f){return{i:n,p:s,e:a,x:f}},fA:function(n){var s,a,f,g,y=n[Je.dispatchPropertyName];if(y==null&&j.n1==null&&(p.vI(),y=n[Je.dispatchPropertyName]),y!=null){if(s=y.p,s===!1)return y.i;if(s===!0)return n;if(a=Object.getPrototypeOf(n),s===a)return y.i;if(y.e===a)throw p.c(E.o9("Return interceptor for "+p.b(s(n,y))))}return f=n.constructor,g=f==null?null:f[Z.nL()],g!=null||(g=p.vX(n),g!=null)?g:typeof n=="function"?_.bF:(s=Object.getPrototypeOf(n),s==null||s===Object.prototype?_.aq:(typeof f=="function"&&Object.defineProperty(f,Z.nL(),{value:_.O,enumerable:!1,writable:!0,configurable:!0}),_.O))},nL:function(){var n=j.oo;return n==null?j.oo=Je.getIsolateTag("_$dart_js"):n},ie:function(n,s){if(n<0||n>4294967295)throw p.c(E.S(n,0,4294967295,"length",null));return Z.eA(new Array(n),s)},th:function(n,s){if(n<0)throw p.c(E.O("Length must be a non-negative integer: "+n));return p.a(new Array(n),s.h("p<0>"))},eA:function(n,s){return Z.mC(p.a(n,s.h("p<0>")))},mC:function(n){return n.fixed$length=Array,n},ti:function(n){if(n<256)switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 133:case 160:return!0;default:return!1}switch(n){case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}},nK:function(n,s){for(var a,f;s>0&&(a=s-1,f=_.a.A(n,a),!(f!==32&&f!==13&&!Z.ti(f)));s=a);return s},cq:function(n){return typeof n=="number"?Math.floor(n)==n?Z.de.prototype:Z.eB.prototype:typeof n=="string"?Z.br.prototype:n==null?Z.cB.prototype:typeof n=="boolean"?Z.dd.prototype:n.constructor==Array?Z.p.prototype:typeof n!="object"?typeof n=="function"?Z.aQ.prototype:n:n instanceof E.e?n:Z.fA(n)},vD:function(n){return typeof n=="number"?Z.c5.prototype:typeof n=="string"?Z.br.prototype:n==null?n:n.constructor==Array?Z.p.prototype:typeof n!="object"?typeof n=="function"?Z.aQ.prototype:n:n instanceof E.e?n:Z.fA(n)},M:function(n){return typeof n=="string"?Z.br.prototype:n==null?n:n.constructor==Array?Z.p.prototype:typeof n!="object"?typeof n=="function"?Z.aQ.prototype:n:n instanceof E.e?n:Z.fA(n)},bg:function(n){return n==null?n:n.constructor==Array?Z.p.prototype:typeof n!="object"?typeof n=="function"?Z.aQ.prototype:n:n instanceof E.e?n:Z.fA(n)},vE:function(n){return typeof n=="number"?Z.c5.prototype:n==null||n instanceof E.e?n:Z.cl.prototype},mZ:function(n){return typeof n=="string"?Z.br.prototype:n==null||n instanceof E.e?n:Z.cl.prototype},b0:function(n){return n==null?n:typeof n!="object"?typeof n=="function"?Z.aQ.prototype:n:n instanceof E.e?n:Z.fA(n)},ns:function(n,s){return typeof n=="number"&&typeof s=="number"?n+s:Z.vD(n).ah(n,s)},aA:function(n,s){return n==null?s==null:typeof n!="object"?s!=null&&n===s:Z.cq(n).N(n,s)},nt:function(n,s){return typeof s=="number"&&(n.constructor==Array||typeof n=="string"||p.p1(n,n[Je.dispatchPropertyName]))&&s>>>0===s&&s<n.length?n[s]:Z.M(n).j(n,s)},rr:function(n,s,a){return typeof s=="number"&&(n.constructor==Array||p.p1(n,n[Je.dispatchPropertyName]))&&!n.immutable$list&&s>>>0===s&&s<n.length?n[s]=a:Z.bg(n).m(n,s,a)},rs:function(n,s){return Z.mZ(n).H(n,s)},mx:function(n,s){return Z.bg(n).B(n,s)},my:function(n,s){return Z.bg(n).ae(n,s)},nu:function(n,s){return Z.bg(n).F(n,s)},eh:function(n,s){return Z.bg(n).S(n,s)},rt:function(n,s,a,f){return Z.b0(n).dZ(n,s,a,f)},aL:function(n){return Z.cq(n).gG(n)},nv:function(n){return Z.M(n).gu(n)},ru:function(n){return Z.M(n).ga3(n)},a_:function(n){return Z.bg(n).gC(n)},X:function(n){return Z.M(n).gi(n)},rv:function(n){return Z.b0(n).gep(n)},rw:function(n){return Z.b0(n).gc_(n)},rx:function(n,s,a){return Z.bg(n).aM(n,s,a)},bl:function(n,s,a){return Z.bg(n).ag(n,s,a)},ry:function(n,s){return Z.cq(n).bb(n,s)},rz:function(n,s){return Z.M(n).si(n,s)},rA:function(n,s){return Z.b0(n).sd5(n,s)},rB:function(n,s){return Z.b0(n).sey(n,s)},rC:function(n,s){return Z.b0(n).seA(n,s)},rD:function(n,s){return Z.b0(n).seB(n,s)},nw:function(n,s){return Z.bg(n).a1(n,s)},rE:function(n,s){return Z.mZ(n).V(n,s)},rF:function(n,s,a){return Z.b0(n).cV(n,s,a)},rG:function(n,s,a){return Z.b0(n).eq(n,s,a)},rH:function(n){return Z.vE(n).cW(n)},fG:function(n,s){return Z.bg(n).aL(n,s)},ag:function(n){return Z.cq(n).l(n)},rI:function(n){return Z.mZ(n).ev(n)},cz:function(){},dd:function(){},cB:function(){},aF:function(){},eU:function(){},cl:function(){},aQ:function(){},p:function(s){this.$ti=s},ii:function(s){this.$ti=s},aC:function(s,a,f){var g=this;g.a=s,g.b=a,g.c=0,g.d=null,g.$ti=f},c5:function(){},de:function(){},eB:function(){},br:function(){}},E={tY:function(){var n,s,a={};return t.scheduleImmediate!=null?E.vk():t.MutationObserver!=null&&t.document!=null?(n=t.document.createElement("div"),s=t.document.createElement("span"),a.a=null,new t.MutationObserver(p.m0(new E.lb(a),1)).observe(n,{childList:!0}),new E.la(a,n,s)):t.setImmediate!=null?E.vl():E.vm()},tZ:function(n){t.scheduleImmediate(p.m0(new E.lc(n),0))},u_:function(n){t.setImmediate(p.m0(new E.ld(n),0))},u0:function(n){E.u8(0,n)},u8:function(n,s){var a=new E.lG;return a.d6(n,s),a},ec:function(n){return new E.fc(new E.C(j.x,n.h("C<0>")),n.h("fc<0>"))},e7:function(n,s){return n.$2(0,null),s.b=!0,s.a},cV:function(n,s){E.uC(n,s)},e6:function(n,s){s.T(n)},e5:function(n,s){s.bD(p.E(n),p.aK(n))},uC:function(n,s){var a,f,g=new E.lK(s),y=new E.lL(s);n instanceof E.C?n.cu(g,y,U.z):(a=U.z,U.c.b(n)?n.ao(0,g,y,a):(f=new E.C(j.x,U.eI),f.a=4,f.c=n,f.cu(g,y,a)))},ee:function(n){var s=function(a,f){return function(g,y){for(;;)try{a(g,y);break}catch(S){y=S,g=f}}}(n,1);return j.x.bV(new E.m_(s))},lv:function(n){return new E.cO(n,1)},bF:function(){return _.dy},bG:function(n){return new E.cO(n,3)},bK:function(n,s){return new E.dW(n,s.h("dW<0>"))},ol:function(n,s){var a,f;s.a=1;try{n.ao(0,new E.lm(s),new E.ln(s),U.P)}catch(g){a=p.E(g),f=p.aK(g),E.p9(new E.lo(s,a,f))}},ll:function(n,s){for(var a,f;a=n.a,a===2;)n=n.c;a>=4?(f=s.b1(),s.a=n.a,s.c=n.c,E.cN(s,f)):(f=s.c,s.a=2,s.c=n,n.co(f))},cN:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue=null,ce={},ge=ce.a=n;for(a=U.c;;){if(f={},g=ge.a===8,s==null){g&&(a=ge.c,E.cY(ue,ue,ge.b,a.a,a.b));return}for(f.a=s,y=s.a,ge=s;y!=null;ge=y,y=S)ge.a=null,E.cN(ce.a,ge),f.a=y,S=y.a;if(C=ce.a,R=C.c,f.b=g,f.c=R,D=!g,D?(H=ge.c,H=(H&1)!=0||(H&15)==8):H=!0,H){if(q=ge.b.b,g?(H=C.b===q,H=!(H||H)):H=!1,H){E.cY(ue,ue,C.b,R.a,R.b);return}if(K=j.x,K!==q?j.x=q:K=ue,ge=ge.c,(ge&15)==8?new E.lt(f,ce,g).$0():D?(ge&1)!=0&&new E.ls(f,R).$0():(ge&2)!=0&&new E.lr(ce,f).$0(),K!=null&&(j.x=K),ge=f.c,a.b(ge)){if(ne=f.a.b,ge.a>=4){te=ne.c,ne.c=null,s=ne.b2(te),ne.a=ge.a,ne.c=ge.c,ce.a=ge;continue}else E.ll(ge,ne);return}}ne=f.a.b,te=ne.c,ne.c=null,s=ne.b2(te),ge=f.b,C=f.c,ge?(ne.a=8,ne.c=C):(ne.a=4,ne.c=C),ce.a=ne,ge=ne}},v4:function(n,s){if(U.Q.b(n))return s.bV(n);if(U.bI.b(n))return n;throw p.c(E.nz(n,"onError","Error handler must accept one Object or one Object and a StackTrace as arguments, and return a a valid result"))},v_:function(){var n,s;for(n=j.cX;n!=null;n=j.cX)j.eb=null,s=n.b,j.cX=s,s==null&&(j.ea=null),n.a.$0()},v7:function(){j.mT=!0;try{E.v_()}finally{j.eb=null,j.mT=!1,j.cX!=null&&j.np().$1(E.oS())}},oP:function(n){var s=new E.fd(n),a=j.ea;a==null?(j.cX=j.ea=s,j.mT||j.np().$1(E.oS())):j.ea=a.b=s},v6:function(n){var s,a,f,g=j.cX;if(g==null){E.oP(n),j.eb=j.ea;return}s=new E.fd(n),a=j.eb,a==null?(s.b=g,j.cX=j.eb=s):(f=a.b,s.b=f,j.eb=a.b=s,f==null&&(j.ea=s))},p9:function(n){var s=null,a=j.x;if(_.f===a){E.cZ(s,s,_.f,n);return}E.cZ(s,s,a,a.cw(n))},tR:function(n,s){var a=null,f=s.h("cT<0>"),g=new E.cT(a,a,a,a,f);return n.ao(0,new E.kC(g,s),new E.kD(g),U.P),new E.an(g,f.h("an<1>"))},mI:function(n,s){return new E.dE(new E.kE(n,s),s.h("dE<0>"))},yG:function(n){return E.aM(n,"stream"),new E.fq},o6:function(n,s,a,f){return new E.bD(null,s,a,n,f.h("bD<0>"))},mV:function(n){var s,a,f;if(n!=null)try{n.$0()}catch(g){s=p.E(g),a=p.aK(g),f=j.x,E.cY(null,null,f,s,a)}},oi:function(n,s,a,f){var g=j.x,y=f?1:0,S=E.oj(g,s);return new E.cK(n,S,a,g,y)},oj:function(n,s){if(s==null&&(s=E.vn()),U.k.b(s))return n.bV(s);if(U.d5.b(s))return s;throw p.c(E.O("handleError callback must take either an Object (the error), or both an Object (the error) and a StackTrace."))},v0:function(n,s){E.cY(null,null,j.x,n,s)},fK:function(n,s){var a=s==null?E.el(n):s;return E.aM(n,"error"),new E.ek(n,a)},el:function(n){var s;return U.C.b(n)&&(s=n.gaP(),s!=null)?s:_.bg},cY:function(n,s,a,f,g){E.v6(new E.lY(f,g))},oL:function(n,s,a,f){var g,y=j.x;if(y===a)return f.$0();j.x=a,g=y;try{return y=f.$0(),y}finally{j.x=g}},oN:function(n,s,a,f,g){var y,S=j.x;if(S===a)return f.$1(g);j.x=a,y=S;try{return S=f.$1(g),S}finally{j.x=y}},oM:function(n,s,a,f,g,y){var S,C=j.x;if(C===a)return f.$2(g,y);j.x=a,S=C;try{return C=f.$2(g,y),C}finally{j.x=S}},cZ:function(n,s,a,f){var g=_.f!==a;g&&(f=g?a.cw(f):a.dQ(f,U.H)),E.oP(f)},lb:function(s){this.a=s},la:function(s,a,f){this.a=s,this.b=a,this.c=f},lc:function(s){this.a=s},ld:function(s){this.a=s},lG:function(){},lH:function(s,a){this.a=s,this.b=a},fc:function(s,a){this.a=s,this.b=!1,this.$ti=a},lK:function(s){this.a=s},lL:function(s){this.a=s},m_:function(s){this.a=s},cO:function(s,a){this.a=s,this.b=a},aB:function(s,a){var f=this;f.a=s,f.d=f.c=f.b=null,f.$ti=a},dW:function(s,a){this.a=s,this.$ti=a},ff:function(){},ax:function(s,a){this.a=s,this.$ti=a},cM:function(s,a,f,g){var y=this;y.a=null,y.b=s,y.c=a,y.d=f,y.e=g},C:function(s,a){var f=this;f.a=0,f.b=s,f.c=null,f.$ti=a},li:function(s,a){this.a=s,this.b=a},lq:function(s,a){this.a=s,this.b=a},lm:function(s){this.a=s},ln:function(s){this.a=s},lo:function(s,a,f){this.a=s,this.b=a,this.c=f},lk:function(s,a){this.a=s,this.b=a},lp:function(s,a){this.a=s,this.b=a},lj:function(s,a,f){this.a=s,this.b=a,this.c=f},lt:function(s,a,f){this.a=s,this.b=a,this.c=f},lu:function(s){this.a=s},ls:function(s,a){this.a=s,this.b=a},lr:function(s,a){this.a=s,this.b=a},fd:function(s){this.a=s,this.b=null},aW:function(){},kC:function(s,a){this.a=s,this.b=a},kD:function(s){this.a=s},kE:function(s,a){this.a=s,this.b=a},kF:function(s,a){this.a=s,this.b=a},kG:function(s,a){this.a=s,this.b=a},f0:function(){},cS:function(){},lF:function(s){this.a=s},lE:function(s){this.a=s},fs:function(){},fe:function(){},bD:function(s,a,f,g,y){var S=this;S.a=null,S.b=0,S.c=null,S.d=s,S.e=a,S.f=f,S.r=g,S.$ti=y},cT:function(s,a,f,g,y){var S=this;S.a=null,S.b=0,S.c=null,S.d=s,S.e=a,S.f=f,S.r=g,S.$ti=y},an:function(s,a){this.a=s,this.$ti=a},dA:function(s,a,f,g,y,S){var C=this;C.x=s,C.a=a,C.b=f,C.c=g,C.d=y,C.e=S,C.r=C.f=null},cK:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y,S.r=S.f=null},lg:function(s,a,f){this.a=s,this.b=a,this.c=f},lf:function(s){this.a=s},dT:function(){},dE:function(s,a){this.a=s,this.b=!1,this.$ti=a},dL:function(s){this.b=s,this.a=0},fh:function(){},cn:function(s){this.b=s,this.a=null},dB:function(s,a){this.b=s,this.c=a,this.a=null},lh:function(){},fn:function(){},lz:function(s,a){this.a=s,this.b=a},dU:function(){this.c=this.b=null,this.a=0},fq:function(){},ek:function(s,a){this.a=s,this.b=a},lJ:function(){},lY:function(s,a){this.a=s,this.b=a},lB:function(){},lD:function(s,a,f){this.a=s,this.b=a,this.c=f},lC:function(s,a){this.a=s,this.b=a},om:function(n,s){var a=n[s];return a===n?null:a},mK:function(n,s,a){a==null?n[s]=n:n[s]=a},on:function(){var n=Object.create(null);return E.mK(n,"<non-identifier-key>",n),delete n["<non-identifier-key>"],n},mF:function(n,s,a){return p.oU(n,new p.aG(s.h("@<0>").D(a).h("aG<1,2>")))},a5:function(n,s){return new p.aG(n.h("@<0>").D(s).h("aG<1,2>"))},nN:function(n){return new E.aZ(n.h("aZ<0>"))},aR:function(n){return new E.aZ(n.h("aZ<0>"))},b8:function(n,s){return p.vA(n,new E.aZ(s.h("aZ<0>")))},mL:function(){var n=Object.create(null);return n["<non-identifier-key>"]=n,delete n["<non-identifier-key>"],n},tf:function(n,s,a){var f,g;if(E.mU(n))return s==="("&&a===")"?"(...)":s+"..."+a;f=p.a([],U.s),j.co.push(n);try{E.uY(n,f)}finally{j.co.pop()}return g=E.mJ(s,f,", ")+a,g.charCodeAt(0)==0,g},id:function(n,s,a){var f,g;if(E.mU(n))return s+"..."+a;f=new E.a9(s),j.co.push(n);try{g=f,g.a=E.mJ(g.a,n,", ")}finally{j.co.pop()}return f.a+=a,g=f.a,g.charCodeAt(0)==0,g},mU:function(n){var s,a;for(s=j.co.length,a=0;a<s;++a)if(n===j.co[a])return!0;return!1},uY:function(n,s){for(var a,f,g,y,S,C,R,D=n.gC(n),H=0,q=0;H<80||q<3;){if(!D.n())return;a=p.b(D.gq()),s.push(a),H+=a.length+2,++q}if(D.n())if(y=D.gq(),++q,D.n()){for(S=D.gq(),++q;D.n();y=S,S=C)if(C=D.gq(),++q,q>100){for(;H>75&&q>3;)H-=s.pop().length+2,--q;s.push("...");return}g=p.b(y),f=p.b(S),H+=f.length+g.length+4}else{if(q<=4){s.push(p.b(y));return}f=p.b(y),g=s.pop(),H+=f.length+2}else{if(q<=5)return;f=s.pop(),g=s.pop()}for(q>s.length+2?(H+=5,R="..."):R=null;H>80&&s.length>3;)H-=s.pop().length+2,R==null&&(H+=5,R="...");R!=null&&s.push(R),s.push(g),s.push(f)},tt:function(n,s){var a,f,g=E.nN(s);for(a=n.length,f=0;f<n.length;n.length===a||(0,p.cs)(n),++f)g.B(0,s.a(n[f]));return g},mG:function(n){var s,a={};if(E.mU(n))return"{...}";s=new E.a9("");try{j.co.push(n),s.a+="{",a.a=!0,n.J(0,new E.j8(a,s)),s.a+="}"}finally{j.co.pop()}return a=s.a,a.charCodeAt(0)==0,a},dG:function(){},dJ:function(s){var a=this;a.a=0,a.e=a.d=a.c=a.b=null,a.$ti=s},dH:function(s,a){this.a=s,this.$ti=a},dI:function(s,a,f){var g=this;g.a=s,g.b=a,g.c=0,g.d=null,g.$ti=f},aZ:function(s){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=s},lx:function(s){this.a=s,this.c=this.b=null},dM:function(s,a,f){var g=this;g.a=s,g.b=a,g.d=g.c=null,g.$ti=f},aX:function(s,a){this.a=s,this.$ti=a},dc:function(){},dg:function(){},m:function(){},di:function(){},j8:function(s,a){this.a=s,this.b=a},I:function(){},j9:function(s){this.a=s},fw:function(){},dj:function(){},be:function(s,a){this.a=s,this.$ti=a},cQ:function(){},e1:function(s,a){this.a=s,this.$ti=a},dN:function(){},e0:function(){},oK:function(n,s){var a,f,g=null;try{g=JSON.parse(n)}catch(y){throw a=p.E(y),f=E.K(String(a),null,null),p.c(f)}return f=E.lN(g),f},lN:function(n){var s;if(n==null)return null;if(typeof n!="object")return n;if(Object.getPrototypeOf(n)!==Array.prototype)return new E.fl(n,Object.create(null));for(s=0;s<n.length;++s)n[s]=E.lN(n[s]);return n},tW:function(n,s,a,f){var g,y;return s instanceof Uint8Array?(g=s,f=g.length,f-a<15||(y=E.tX(n,g,a,f),y!=null&&n&&y.indexOf("\uFFFD")>=0)?null:y):null},tX:function(n,s,a,f){var g=n?j.rk():j.rj();return g==null?null:a===0&&f===s.length?E.od(g,s):E.od(g,s.subarray(a,E.aV(a,f,s.length)))},od:function(n,s){var a;try{return a=n.decode(s),a}catch(f){p.E(f)}return null},nA:function(n,s,a,f,g,y){if(_.c.bg(y,4)!==0)throw p.c(E.K("Invalid base64 padding, padded length must be multiple of four, is "+y,n,a));if(f+g!==y)throw p.c(E.K("Invalid base64 padding, '=' not at the end",n,s));if(g>2)throw p.c(E.K("Invalid base64 padding, more than two '=' characters",n,s))},u3:function(n,s,a,f,g,y){var S,C,R,D,H,q,K="Invalid encoding before padding",ne="Invalid character",te=_.c.ad(y,2),ue=y&3,ce=j.nq();for(S=s,C=0;S<a;++S){if(R=_.a.A(n,S),C|=R,D=ce[R&127],D>=0){te=(te<<6|D)&16777215,ue=ue+1&3,ue===0&&(H=g+1,f[g]=te>>>16&255,g=H+1,f[H]=te>>>8&255,H=g+1,f[g]=te&255,g=H,te=0);continue}else if(D===-1&&ue>1){if(C>127)break;if(ue===3){if((te&3)!=0)throw p.c(E.K(K,n,S));f[g]=te>>>10,f[g+1]=te>>>2}else{if((te&15)!=0)throw p.c(E.K(K,n,S));f[g]=te>>>4}return q=(3-ue)*3,R===37&&(q+=2),E.oh(n,S+1,a,-q-1)}throw p.c(E.K(ne,n,S))}if(C>=0&&C<=127)return(te<<2|ue)>>>0;for(S=s;S<a&&(R=_.a.A(n,S),!(R>127));++S);throw p.c(E.K(ne,n,S))},u1:function(n,s,a,f){var g=E.u2(n,s,a),y=(f&3)+(g-s),S=_.c.ad(y,2)*3,C=y&3;return C!==0&&g<a&&(S+=C-1),S>0?new Uint8Array(S):j.rl()},u2:function(n,s,a){for(var f,g=a,y=g,S=0;y>s&&S<2;){e:{if(--y,f=_.a.A(n,y),f===61){++S,g=y;break e}if((f|32)==100){if(y===s)break;--y,f=_.a.A(n,y)}if(f===51){if(y===s)break;--y,f=_.a.A(n,y)}if(f===37){++S,g=y;break e}break}}return g},oh:function(n,s,a,f){var g,y;if(s===a)return f;for(g=-f-1;g>0;){if(y=_.a.A(n,s),g===3){if(y===61){g-=3,++s;break}if(y===37){if(--g,++s,s===a)break;y=_.a.A(n,s)}else break}if((g>3?g-3:g)===2){if(y!==51||(++s,--g,s===a))break;y=_.a.A(n,s)}if((y|32)!=100||(++s,--g,s===a))break}if(s!==a)throw p.c(E.K("Invalid padding character",n,s));return-g-1},oC:function(n){switch(n){case 65:return"Missing extension byte";case 67:return"Unexpected extension byte";case 69:return"Invalid UTF-8 byte";case 71:return"Overlong encoding";case 73:return"Out of unicode range";case 75:return"Encoded surrogate";case 77:return"Unfinished UTF-8 octet sequence";default:return""}},uz:function(n,s,a){var f,g,y,S=a-s,C=new Uint8Array(S);for(f=Z.M(n),g=0;g<S;++g)y=f.j(n,s+g),C[g]=(y&4294967040)>>>0!=0?255:y;return C},fl:function(s,a){this.a=s,this.b=a,this.c=null},fm:function(s){this.a=s},lw:function(s,a,f){this.b=s,this.c=a,this.a=f},kT:function(){},kU:function(){},fL:function(){},fN:function(){},fM:function(){},le:function(){this.a=0},fO:function(){},em:function(){},fo:function(s,a,f){this.a=s,this.b=a,this.$ti=f},eo:function(){},eq:function(){},hw:function(){},io:function(){},ip:function(s){this.a=s},kH:function(){},kI:function(){},dV:function(){},lI:function(s,a,f){this.a=s,this.b=a,this.c=f},kR:function(){},kS:function(s){this.a=s},fx:function(s){this.a=s,this.b=16,this.c=0},cr:function(n,s){var a=p.o1(n,s);if(a!=null)return a;throw p.c(E.K(n,null,null))},t6:function(n){return n instanceof p.bZ?n.l(0):"Instance of '"+p.b(p.ju(n))+"'"},bt:function(n,s,a,f){var g,y=Z.ie(n,f);if(n!==0&&s!=null)for(g=0;g<y.length;++g)y[g]=s;return y},dh:function(n,s,a){var f,g=p.a([],a.h("p<0>"));for(f=Z.a_(n);f.n();)g.push(f.gq());return s?g:Z.mC(g)},nO:function(n,s,a,f){var g,y=a?Z.th(n,f):Z.ie(n,f);for(g=0;g<n;++g)y[g]=s.$1(g);return y},o7:function(n,s,a){return U.bm.b(n)?p.tK(n,s,E.aV(s,a,n.length)):E.tS(n,s,a)},tS:function(n,s,a){var f,g,y,S,C,R=null;if(s<0)throw p.c(E.S(s,0,n.length,R,R));if(f=a==null,!f&&a<s)throw p.c(E.S(a,s,n.length,R,R));for(g=new p.a6(n,n.length,p.ac(n).h("a6<m.E>")),y=0;y<s;++y)if(!g.n())throw p.c(E.S(s,0,y,R,R));if(S=[],f)for(;g.n();)C=g.d,S.push(C);else for(y=s;y<a;++y){if(!g.n())throw p.c(E.S(a,s,y,R,R));C=g.d,S.push(C)}return p.tI(S)},o2:function(n){return new p.ih(n,p.tj(n,!1,!0,!1,!1,!1))},mJ:function(n,s,a){var f=Z.a_(s);if(!f.n())return n;if(a.length===0)do n+=p.b(f.gq());while(f.n());else for(n+=p.b(f.gq());f.n();)n=n+a+p.b(f.gq());return n},nS:function(n,s,a,f){return new E.eO(n,s,a,f)},nG:function(n){var s=Math.abs(n),a=n<0?"-":"";return s>=1e3?""+n:s>=100?a+"0"+s:s>=10?a+"00"+s:a+"000"+s},t5:function(n){var s=Math.abs(n),a=n<0?"-":"+";return s>=1e5?a+s:a+"0"+s},nH:function(n){return n>=100?""+n:n>=10?"0"+n:"00"+n},b5:function(n){return n>=10?""+n:"0"+n},cx:function(n){return typeof n=="number"||p.e9(n)||n==null?Z.ag(n):typeof n=="string"?JSON.stringify(n):E.t6(n)},fJ:function(n){return new E.ej(n)},O:function(n){return new E.ak(!1,null,null,n)},nz:function(n,s,a){return new E.ak(!0,n,s,a)},aM:function(n,s){if(n==null)throw p.c(new E.ak(!1,null,s,"Must not be null"));return n},jv:function(n,s){return new E.dq(null,null,!0,n,s,"Value not in range")},S:function(n,s,a,f,g){return new E.dq(s,a,!0,n,f,"Invalid value")},aV:function(n,s,a){if(0>n||n>a)throw p.c(E.S(n,0,a,"start",null));if(s!=null){if(n>s||s>a)throw p.c(E.S(s,n,a,"end",null));return s}return a},aU:function(n,s){if(n<0)throw p.c(E.S(n,0,null,s,null));return n},ex:function(n,s,a,f,g){var y=g==null?Z.X(s):g;return new E.ew(y,!0,n,a,"Index out of range")},ab:function(n){return new E.f8(n)},o9:function(n){return new E.f3(n)},cF:function(n){return new E.bz(n)},ad:function(n){return new E.ep(n)},t7:function(n){return new E.dD(n)},K:function(n,s,a){return new E.aD(n,s,a)},nJ:function(n,s,a){return n<=0?new p.b6(a.h("b6<0>")):new E.dF(n,s,a.h("dF<0>"))},nP:function(n,s,a,f,g){return new p.bY(n,s.h("@<0>").D(a).D(f).D(g).h("bY<1,2,3,4>"))},ob:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt=null,mt=n.length;if(mt>=5){if(s=E.oQ(n,0),s===0)return a=E.kM(mt<mt?_.a.t(n,0,mt):n,5,dt),a.gbd(a);if(s===32)return a=E.kM(_.a.t(n,5,mt),0,dt),a.gbd(a)}return f=E.bt(8,0,!1,U.r),f[0]=0,f[1]=-1,f[2]=-1,f[7]=-1,f[3]=0,f[4]=0,f[5]=mt,f[6]=mt,E.oO(n,0,mt,0,f)>=14&&(f[7]=mt),g=f[1],g>=0&&E.oO(n,0,g,20,f)===20&&(f[7]=g),y=f[2]+1,S=f[3],C=f[4],R=f[5],D=f[6],D<R&&(R=D),C<y?C=R:C<=g&&(C=g+1),S<y&&(S=C),H=f[7]<0,H?y>g+3?(q=dt,H=!1):(a=S>0,a&&S+1===C?(q=dt,H=!1):(R<mt&&R===C+2&&_.a.U(n,"..",C)?K=!0:K=R>C+2&&_.a.U(n,"/..",R-3),K?(q=dt,H=!1):(g===4?_.a.U(n,"file",0)?(y<=0?(_.a.U(n,"/",C)?(ne="file://",te=2):(ne="file:///",te=3),n=ne+_.a.t(n,C,mt),g-=0,a=te-0,R+=a,D+=a,mt=n.length,y=7,S=7,C=7):C===R&&(++D,ue=R+1,n=_.a.az(n,C,R,"/"),++mt,R=ue),q="file"):_.a.U(n,"http",0)?(a&&S+3===C&&_.a.U(n,"80",S+1)&&(D-=3,ce=C-3,R-=3,n=_.a.az(n,S,C,""),mt-=3,C=ce),q="http"):q=dt:g===5&&_.a.U(n,"https",0)?(a&&S+4===C&&_.a.U(n,"443",S+1)&&(D-=4,ce=C-4,R-=4,n=_.a.az(n,S,C,""),mt-=3,C=ce),q="https"):q=dt,H=!0))):q=dt,H?(mt<n.length&&(n=_.a.t(n,0,mt),g-=0,y-=0,S-=0,C-=0,R-=0,D-=0),new E.fp(n,g,y,S,C,R,D,q)):(q==null&&(g>0?q=E.us(n,0,g):(g===0&&E.cU(n,0,"Invalid empty scheme"),q="")),y>0?(ge=g+3,Ne=ge<y?E.ut(n,ge,y-1):"",Xe=E.uo(n,y,S,!1),a=S+1,a<C?(Ge=p.o1(_.a.t(n,a,C),dt),St=E.uq(Ge==null?p.a2(E.K("Invalid port",n,a)):Ge,q)):St=dt):(St=dt,Xe=St,Ne=""),ct=E.up(n,C,R,dt,q,Xe!=null),Mt=R<D?E.ur(n,R+1,D,dt):dt,new E.e2(q,Ne,Xe,St,ct,Mt,D<mt?E.un(n,D+1,mt):dt))},tV:function(n,s,a){var f,g,y,S,C,R,D="IPv4 address should contain exactly 4 parts",H="each part must be in the range 0..255",q=new E.kN(n),K=new Uint8Array(4);for(f=s,g=f,y=0;f<a;++f)S=_.a.A(n,f),S!==46?(S^48)>9&&q.$2("invalid character",f):(y===3&&q.$2(D,f),C=E.cr(_.a.t(n,g,f),null),C>255&&q.$2(H,g),R=y+1,K[y]=C,g=f+1,y=R);return y!==3&&q.$2(D,a),C=E.cr(_.a.t(n,g,a),null),C>255&&q.$2(H,g),K[y]=C,K},oc:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge=new E.kO(n),Ne=new E.kP(ge,n);for(n.length<2&&ge.$1("address is too short"),f=p.a([],U.Z),g=s,y=g,S=!1,C=!1;g<a;++g)R=_.a.A(n,g),R===58?(g===s&&(++g,_.a.A(n,g)!==58&&ge.$2("invalid start colon.",g),y=g),g===y?(S&&ge.$2("only one wildcard `::` is allowed",g),f.push(-1),S=!0):f.push(Ne.$2(y,g)),y=g+1):R===46&&(C=!0);for(f.length===0&&ge.$1("too few parts"),D=y===a,H=_.d.gaH(f),D&&H!==-1&&ge.$2("expected a part after last `:`",a),D||(C?(q=E.tV(n,y,a),f.push((q[0]<<8|q[1])>>>0),f.push((q[2]<<8|q[3])>>>0)):f.push(Ne.$2(y,a))),S?f.length>7&&ge.$1("an address with a wildcard must have less than 7 parts"):f.length!==8&&ge.$1("an address without a wildcard must contain exactly 8 parts"),K=new Uint8Array(16),H=f.length,ne=9-H,g=0,te=0;g<H;++g)if(ue=f[g],ue===-1)for(ce=0;ce<ne;++ce)K[te]=0,K[te+1]=0,te+=2;else K[te]=_.c.ad(ue,8),K[te+1]=ue&255,te+=2;return K},ow:function(n){return n==="http"?80:n==="https"?443:0},cU:function(n,s,a){throw p.c(E.K(a,n,s))},uq:function(n,s){var a=E.ow(s);return n===a?null:n},uo:function(n,s,a,f){var g,y,S,C,R,D;if(s===a)return"";if(_.a.A(n,s)===91)return g=a-1,_.a.A(n,g)!==93&&E.cU(n,s,"Missing end `]` to match `[` in host"),y=s+1,S=E.ul(n,y,g),S<g?(C=S+1,R=E.oB(n,_.a.U(n,"25",C)?S+3:C,g,"%25")):R="",E.oc(n,y,S),_.a.t(n,s,S).toLowerCase()+R+"]";for(D=s;D<a;++D)if(_.a.A(n,D)===58)return S=_.a.b7(n,"%",s),S=S>=s&&S<a?S:a,S<a?(C=S+1,R=E.oB(n,_.a.U(n,"25",C)?S+3:C,a,"%25")):R="",E.oc(n,s,S),"["+_.a.t(n,s,S)+R+"]";return E.uv(n,s,a)},ul:function(n,s,a){var f=_.a.b7(n,"%",s);return f>=s&&f<a?f:a},oB:function(n,s,a,f){var g,y,S,C,R,D,H,q,K,ne,te=f!==""?new E.a9(f):null;for(g=s,y=g,S=!0;g<a;)if(C=_.a.A(n,g),C===37){if(R=E.mR(n,g,!0),D=R==null,D&&S){g+=3;continue}te==null&&(te=new E.a9("")),H=te.a+=_.a.t(n,y,g),D?R=_.a.t(n,g,g+3):R==="%"&&E.cU(n,g,"ZoneID should not contain % anymore"),te.a=H+R,g+=3,y=g,S=!0}else C<127&&(_.aj[C>>>4]&1<<(C&15))!=0?(S&&65<=C&&90>=C&&(te==null&&(te=new E.a9("")),y<g&&(te.a+=_.a.t(n,y,g),y=g),S=!1),++g):((C&64512)==55296&&g+1<a?(q=_.a.A(n,g+1),(q&64512)==56320?(C=65536|(C&1023)<<10|q&1023,K=2):K=1):K=1,ne=_.a.t(n,y,g),te==null&&(te=new E.a9("")),D=te,D.a+=ne,D.a+=E.mQ(C),g+=K,y=g);return te==null?_.a.t(n,s,a):(y<a&&(te.a+=_.a.t(n,y,a)),D=te.a,D.charCodeAt(0)==0,D)},uv:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne;for(f=s,g=f,y=null,S=!0;f<a;)if(C=_.a.A(n,f),C===37){if(R=E.mR(n,f,!0),D=R==null,D&&S){f+=3;continue}y==null&&(y=new E.a9("")),H=_.a.t(n,g,f),q=y.a+=S?H:H.toLowerCase(),D?(R=_.a.t(n,f,f+3),K=3):R==="%"?(R="%25",K=1):K=3,y.a=q+R,f+=K,g=f,S=!0}else C<127&&(_.cG[C>>>4]&1<<(C&15))!=0?(S&&65<=C&&90>=C&&(y==null&&(y=new E.a9("")),g<f&&(y.a+=_.a.t(n,g,f),g=f),S=!1),++f):C<=93&&(_.ac[C>>>4]&1<<(C&15))!=0?E.cU(n,f,"Invalid character"):((C&64512)==55296&&f+1<a?(ne=_.a.A(n,f+1),(ne&64512)==56320?(C=65536|(C&1023)<<10|ne&1023,K=2):K=1):K=1,H=_.a.t(n,g,f),S||(H=H.toLowerCase()),y==null&&(y=new E.a9("")),D=y,D.a+=H,D.a+=E.mQ(C),f+=K,g=f);return y==null?_.a.t(n,s,a):(g<a&&(H=_.a.t(n,g,a),y.a+=S?H:H.toLowerCase()),D=y.a,D.charCodeAt(0)==0,D)},us:function(n,s,a){var f,g,y;if(s===a)return"";for(E.oy(_.a.H(n,s))||E.cU(n,s,"Scheme not starting with alphabetic character"),f=s,g=!1;f<a;++f)y=_.a.H(n,f),y<128&&(_.ah[y>>>4]&1<<(y&15))!=0||E.cU(n,f,"Illegal scheme character"),65<=y&&y<=90&&(g=!0);return n=_.a.t(n,s,a),E.uk(g?n.toLowerCase():n)},uk:function(n){return n==="http"?"http":n==="file"?"file":n==="https"?"https":n==="package"?"package":n},ut:function(n,s,a){return E.e3(n,s,a,_.cm,!1)},up:function(n,s,a,f,g,y){var S=g==="file",C=S||y,R=E.e3(n,s,a,_.am,!0);if(R.length===0){if(S)return"/"}else C&&!_.a.V(R,"/")&&(R="/"+R);return E.uu(R,g,y)},uu:function(n,s,a){var f=s.length===0;return f&&!a&&!_.a.V(n,"/")?E.uw(n,!f||a):E.ux(n)},ur:function(n,s,a,f){return E.e3(n,s,a,_.x,!0)},un:function(n,s,a){return E.e3(n,s,a,_.x,!0)},mR:function(n,s,a){var f,g,y,S,C,R=s+2;return R>=n.length||(f=_.a.A(n,s+1),g=_.a.A(n,R),y=p.m8(f),S=p.m8(g),y<0||S<0)?"%":(C=y*16+S,C<127&&(_.aj[_.c.ad(C,4)]&1<<(C&15))!=0?p.ba(a&&65<=C&&90>=C?(C|32)>>>0:C):f>=97||g>=97?_.a.t(n,s,s+3).toUpperCase():null)},mQ:function(n){var s,a,f,g,y,S="0123456789ABCDEF";if(n<128)s=new Uint8Array(3),s[0]=37,s[1]=_.a.H(S,n>>>4),s[2]=_.a.H(S,n&15);else for(n>2047?n>65535?(a=240,f=4):(a=224,f=3):(a=192,f=2),s=new Uint8Array(3*f),g=0;--f,f>=0;a=128)y=_.c.dL(n,6*f)&63|a,s[g]=37,s[g+1]=_.a.H(S,y>>>4),s[g+2]=_.a.H(S,y&15),g+=3;return E.o7(s,0,null)},e3:function(n,s,a,f,g){var y=E.oA(n,s,a,f,g);return y==null?_.a.t(n,s,a):y},oA:function(n,s,a,f,g){var y,S,C,R,D,H,q,K,ne,te=null;for(y=!g,S=s,C=S,R=te;S<a;)if(D=_.a.A(n,S),D<127&&(f[D>>>4]&1<<(D&15))!=0)++S;else{if(D===37){if(H=E.mR(n,S,!1),H==null){S+=3;continue}H==="%"?(H="%25",q=1):q=3}else y&&D<=93&&(_.ac[D>>>4]&1<<(D&15))!=0?(E.cU(n,S,"Invalid character"),q=te,H=q):((D&64512)==55296?(K=S+1,K<a?(ne=_.a.A(n,K),(ne&64512)==56320?(D=65536|(D&1023)<<10|ne&1023,q=2):q=1):q=1):q=1,H=E.mQ(D));R==null&&(R=new E.a9("")),K=R,K.a+=_.a.t(n,C,S),K.a+=p.b(H),S+=q,C=S}return R==null?te:(C<a&&(R.a+=_.a.t(n,C,a)),y=R.a,y.charCodeAt(0)==0,y)},oz:function(n){return _.a.V(n,".")?!0:_.a.bK(n,"/.")!==-1},ux:function(n){var s,a,f,g,y,S;if(!E.oz(n))return n;for(s=p.a([],U.s),a=n.split("/"),f=a.length,g=!1,y=0;y<f;++y)S=a[y],Z.aA(S,"..")?(s.length!==0&&(s.pop(),s.length===0&&s.push("")),g=!0):S==="."?g=!0:(s.push(S),g=!1);return g&&s.push(""),_.d.cL(s,"/")},uw:function(n,s){var a,f,g,y,S,C;if(!E.oz(n))return s?n:E.ox(n);for(a=p.a([],U.s),f=n.split("/"),g=f.length,y=!1,S=0;S<g;++S)C=f[S],C===".."?a.length!==0&&_.d.gaH(a)!==".."?(a.pop(),y=!0):(a.push(".."),y=!1):C==="."?y=!0:(a.push(C),y=!1);return f=a.length,f!==0?f=f===1&&a[0].length===0:f=!0,f?"./":((y||_.d.gaH(a)==="..")&&a.push(""),s||(a[0]=E.ox(a[0])),_.d.cL(a,"/"))},ox:function(n){var s,a,f=n.length;if(f>=2&&E.oy(Z.rs(n,0)))for(s=1;s<f;++s){if(a=_.a.H(n,s),a===58)return _.a.t(n,0,s)+"%3A"+_.a.bj(n,s+1);if(a>127||(_.ah[a>>>4]&1<<(a&15))==0)break}return n},um:function(n,s){var a,f,g;for(a=0,f=0;f<2;++f)if(g=_.a.A(n,s+f),48<=g&&g<=57)a=a*16+g-48;else if(g|=32,97<=g&&g<=102)a=a*16+g-87;else throw p.c(E.O("Invalid URL encoding"));return a},uy:function(n,s,a,f,g){for(var y,S,C,R,D=s;;){if(!(D<a)){y=!0;break}if(S=_.a.A(n,D),S<=127&&S!==37?C=!1:C=!0,C){y=!1;break}++D}if(y){if(_.a3!==f?C=!1:C=!0,C)return _.a.t(n,s,a);R=new p.cu(_.a.t(n,s,a))}else for(R=p.a([],U.Z),C=n.length,D=s;D<a;++D){if(S=_.a.A(n,D),S>127)throw p.c(E.O("Illegal percent encoding in URI"));if(S===37){if(D+3>C)throw p.c(E.O("Truncated URI"));R.push(E.um(n,D+1)),D+=2}else R.push(S)}return _.dw.dT(R)},oy:function(n){var s=n|32;return 97<=s&&s<=122},oa:function(n){var s;if(n.length>=5){if(s=E.oQ(n,0),s===0)return E.kM(n,5,null);if(s===32)return E.kM(_.a.bj(n,5),0,null)}throw p.c(E.K("Does not start with 'data:'",n,0))},kM:function(n,s,a){var f,g,y,S,C,R,D,H,q="Invalid MIME type",K=p.a([s-1],U.Z);for(f=n.length,g=s,y=-1,S=null;g<f&&(S=_.a.H(n,g),!(S===44||S===59));++g)if(S===47){if(y<0){y=g;continue}throw p.c(E.K(q,n,g))}if(y<0&&g>s)throw p.c(E.K(q,n,g));for(;S!==44;){for(K.push(g),++g,C=-1;g<f;++g)if(S=_.a.H(n,g),S===61)C<0&&(C=g);else if(S===59||S===44)break;if(C>=0)K.push(C);else{if(R=_.d.gaH(K),S!==44||g!==R+7||!_.a.U(n,"base64",R+1))throw p.c(E.K("Expecting '='",n,g));break}}return K.push(g),D=g+1,(K.length&1)==1?n=_.b5.ec(n,D,f):(H=E.oA(n,D,f,_.x,!0),H!=null&&(n=_.a.az(n,D,f,H))),new E.kL(n,K,a)},uG:function(){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~!$&'()*+,;=",s=".",a=":",f="/",g="?",y="#",S=E.nO(22,new E.lP,!0,U.E),C=new E.lO(S),R=new E.lQ,D=new E.lR,H=C.$2(0,225);return R.$3(H,n,1),R.$3(H,s,14),R.$3(H,a,34),R.$3(H,f,3),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(14,225),R.$3(H,n,1),R.$3(H,s,15),R.$3(H,a,34),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(15,225),R.$3(H,n,1),R.$3(H,"%",225),R.$3(H,a,34),R.$3(H,f,9),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(1,225),R.$3(H,n,1),R.$3(H,a,34),R.$3(H,f,10),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(2,235),R.$3(H,n,139),R.$3(H,f,131),R.$3(H,s,146),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(3,235),R.$3(H,n,11),R.$3(H,f,68),R.$3(H,s,18),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(4,229),R.$3(H,n,5),D.$3(H,"AZ",229),R.$3(H,a,102),R.$3(H,"@",68),R.$3(H,"[",232),R.$3(H,f,138),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(5,229),R.$3(H,n,5),D.$3(H,"AZ",229),R.$3(H,a,102),R.$3(H,"@",68),R.$3(H,f,138),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(6,231),D.$3(H,"19",7),R.$3(H,"@",68),R.$3(H,f,138),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(7,231),D.$3(H,"09",7),R.$3(H,"@",68),R.$3(H,f,138),R.$3(H,g,172),R.$3(H,y,205),R.$3(C.$2(8,8),"]",5),H=C.$2(9,235),R.$3(H,n,11),R.$3(H,s,16),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(16,235),R.$3(H,n,11),R.$3(H,s,17),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(17,235),R.$3(H,n,11),R.$3(H,f,9),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(10,235),R.$3(H,n,11),R.$3(H,s,18),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(18,235),R.$3(H,n,11),R.$3(H,s,19),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(19,235),R.$3(H,n,11),R.$3(H,f,234),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(11,235),R.$3(H,n,11),R.$3(H,f,10),R.$3(H,g,172),R.$3(H,y,205),H=C.$2(12,236),R.$3(H,n,12),R.$3(H,g,12),R.$3(H,y,205),H=C.$2(13,237),R.$3(H,n,13),R.$3(H,g,13),D.$3(C.$2(20,245),"az",21),H=C.$2(21,245),D.$3(H,"az",21),D.$3(H,"09",21),R.$3(H,"+-.",21),S},oO:function(n,s,a,f,g){var y,S,C,R,D=j.rp();for(y=s;y<a;++y)S=D[f],C=_.a.H(n,y)^96,R=S[C>95?31:C],f=R&31,g[R>>>5]=y;return f},oQ:function(n,s){return((_.a.H(n,s+4)^58)*3|_.a.H(n,s)^100|_.a.H(n,s+1)^97|_.a.H(n,s+2)^116|_.a.H(n,s+3)^97)>>>0},jn:function(s,a){this.a=s,this.b=a},d5:function(s,a){this.a=s,this.b=a},F:function(){},ej:function(s){this.a=s},f2:function(){},eR:function(){},ak:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},dq:function(s,a,f,g,y,S){var C=this;C.e=s,C.f=a,C.a=f,C.b=g,C.c=y,C.d=S},ew:function(s,a,f,g,y){var S=this;S.f=s,S.a=a,S.b=f,S.c=g,S.d=y},eO:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},f8:function(s){this.a=s},f3:function(s){this.a=s},bz:function(s){this.a=s},ep:function(s){this.a=s},eT:function(){},ds:function(){},er:function(s){this.a=s},dD:function(s){this.a=s},aD:function(s,a,f){this.a=s,this.b=a,this.c=f},i:function(){},dF:function(s,a,f){this.a=s,this.b=a,this.$ti=f},H:function(){},cC:function(s,a,f){this.a=s,this.b=a,this.$ti=f},k:function(){},e:function(){},fr:function(){},a9:function(s){this.a=s},kN:function(s){this.a=s},kO:function(s){this.a=s},kP:function(s,a){this.a=s,this.b=a},e2:function(s,a,f,g,y,S,C){var R=this;R.a=s,R.b=a,R.c=f,R.d=g,R.e=y,R.f=S,R.r=C,R.z=R.x=null},kL:function(s,a,f){this.a=s,this.b=a,this.c=f},lP:function(){},lO:function(s){this.a=s},lQ:function(){},lR:function(){},fp:function(s,a,f,g,y,S,C,R){var D=this;D.a=s,D.b=a,D.c=f,D.d=g,D.e=y,D.f=S,D.r=C,D.x=R,D.y=null},fg:function(s,a,f,g,y,S,C){var R=this;R.a=s,R.b=a,R.c=f,R.d=g,R.e=y,R.f=S,R.r=C,R.z=R.x=null},n2:function(n){if(!U.I.b(n)&&!U.U.b(n))throw p.c(E.O("object must be a Map or Iterable"));return E.uF(n)},uF:function(n){var s=new E.lM(new E.dJ(U.aH)).$1(n);return s.toString,s},lM:function(s){this.a=s},uE:function(n){var s,a=n.$dart_jsFunction;return a!=null?a:(s=function(f,g){return function(){return f(g,Array.prototype.slice.apply(arguments))}}(E.uD,n),s[j.n6()]=n,n.$dart_jsFunction=s,s)},uD:function(n,s){return p.tH(n,s,null)},cp:function(n){return typeof n=="function"?n:E.uE(n)}},ye={rM:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce="byteOffset",ge=null,Ne="normalized";switch(oe.A(n,_.cu,s),a=oe.P(n,"bufferView",s,!1),a===-1?(f=n.w(ce),f&&s.k(j.d1(),p.a(["bufferView"],U.M),ce),g=0):g=oe.W(n,ce,s,0,ge,-1,0,!1),y=oe.W(n,"componentType",s,-1,_.c3,-1,0,!0),S=oe.W(n,"count",s,-1,ge,-1,1,!0),C=oe.J(n,"type",s,ge,_.l.gL(),ge,!0),R=oe.oV(n,Ne,s),C!=null&&y!==-1?(D=_.l.j(0,C),D!=null?y===5126?(f=U.V,H=oe.aj(n,"min",s,ge,p.a([D],f),1/0,-1/0,!0),q=oe.aj(n,"max",s,ge,p.a([D],f),1/0,-1/0,!0)):(H=oe.oW(n,"min",s,y,D),q=oe.oW(n,"max",s,y,D)):(H=ge,q=H)):(H=ge,q=H),K=oe.V(n,"sparse",s,ye.vf(),!1),R?f=y===5126||y===5125:f=!1,f&&s.p(j.qw(),Ne),(C==="MAT2"||C==="MAT3"||C==="MAT4")&&g!==-1&&(g&3)!=0&&s.p(j.qv(),ce),y){case 5120:case 5121:case 5122:case 5123:case 5125:f=U.w,f.a(q),f.a(H),oe.J(n,"name",s,ge,ge,ge,!1),f=oe.y(n,_.L,s,ge),ne=oe.z(n,s),te=new ye.fb(a,g,y,S,C,R,q,H,K,Re.b_(y),f,ne,!1),H!=null&&(f=s.O(),ne=E.bt(H.length,0,!1,U.e),ue=new Array(H.length),ue.fixed$length=Array,s.W(te,new ye.eH(ne,p.a(ue,U.V),Z.fG(H,!1),f))),q!=null&&(f=s.O(),ne=E.bt(q.length,0,!1,U.e),ue=new Array(q.length),ue.fixed$length=Array,s.W(te,new ye.eF(ne,p.a(ue,U.V),Z.fG(q,!1),f)));break;default:f=U.fy,f.a(q),f.a(H),oe.J(n,"name",s,ge,ge,ge,!1),f=oe.y(n,_.L,s,ge),ne=oe.z(n,s),te=new ye.fa(a,g,y,S,C,R,q,H,K,Re.b_(y),f,ne,!1),s.W(te,new ye.ez(s.O())),H!=null&&(f=s.O(),ne=E.bt(H.length,0,!1,U.e),ue=new Array(H.length),ue.fixed$length=Array,s.W(te,new ye.eG(ne,p.a(ue,U.m),Z.fG(H,!1),f))),q!=null&&(f=s.O(),ne=E.bt(q.length,0,!1,U.e),ue=new Array(q.length),ue.fixed$length=Array,s.W(te,new ye.eE(ne,p.a(ue,U.m),Z.fG(q,!1),f)));break}return te},bm:function(n,s,a,f,g,y){var S,C,R="byteOffset";if(n===-1)return!1;if(n%s!=0)if(y!=null)y.k(j.qx(),p.a([n,s],U.M),R);else return!1;if(S=f.y,S===-1)return!1;if(C=S+n,C%s!=0)if(y!=null)y.E(j.pV(),p.a([C,s],U.M));else return!1;if(S=f.z,n>S)if(y!=null)y.k(j.nd(),p.a([n,a,g,S],U.M),R);else return!1;else if(n+a>S)if(y!=null)y.E(j.nd(),p.a([n,a,g,S],U.M));else return!1;return!0},mz:function(n,s,a,f){var g=s.byteLength,y=Re.b_(n);if(g<a+y*f)return null;switch(n){case 5121:return p.mH(s,a,f);case 5123:return p.nQ(s,a,f);case 5125:return p.nR(s,a,f);default:return null}},nx:function(n,s,a,f){var g=s.byteLength,y=Re.b_(n);if(g<a+y*f)return null;switch(n){case 5126:return p.cW(s,a,f),g=new Float32Array(s,a,f),g;default:return null}},ny:function(n,s,a,f){var g=s.byteLength,y=Re.b_(n);if(g<a+y*f)return null;switch(n){case 5120:return p.cW(s,a,f),g=new Int8Array(s,a,f),g;case 5121:return p.mH(s,a,f);case 5122:return p.cW(s,a,f),g=new Int16Array(s,a,f),g;case 5123:return p.nQ(s,a,f);case 5125:return p.nR(s,a,f);default:return null}},rL:function(n,s){var a,f,g;return oe.A(n,_.cf,s),a=oe.W(n,"count",s,-1,null,-1,1,!0),f=oe.V(n,"indices",s,ye.vd(),!0),g=oe.V(n,"values",s,ye.ve(),!0),a===-1||f==null||g==null?null:new ye.bP(a,f,g,oe.y(n,_.d8,s,null),oe.z(n,s),!1)},rJ:function(n,s){return oe.A(n,_.c8,s),new ye.bQ(oe.P(n,"bufferView",s,!0),oe.W(n,"byteOffset",s,0,null,-1,0,!1),oe.W(n,"componentType",s,-1,_.bR,-1,0,!0),oe.y(n,_.d6,s,null),oe.z(n,s),!1)},rK:function(n,s){return oe.A(n,_.cb,s),new ye.bR(oe.P(n,"bufferView",s,!0),oe.W(n,"byteOffset",s,0,null,-1,0,!1),oe.y(n,_.d7,s,null),oe.z(n,s),!1)},a0:function(){},fb:function(s,a,f,g,y,S,C,R,D,H,q,K,ne){var te=this;te.x=s,te.y=a,te.z=f,te.Q=g,te.ch=y,te.cx=S,te.cy=C,te.db=R,te.dx=D,te.dy=H,te.fr=null,te.fx=0,te.k2=te.k1=null,te.a=q,te.b=K,te.a$=ne},l6:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y},l7:function(s){this.a=s},l8:function(){},l9:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y},l4:function(s){this.a=s},l5:function(s){this.a=s},fa:function(s,a,f,g,y,S,C,R,D,H,q,K,ne){var te=this;te.x=s,te.y=a,te.z=f,te.Q=g,te.ch=y,te.cx=S,te.cy=C,te.db=R,te.dx=D,te.dy=H,te.fr=null,te.fx=0,te.k2=te.k1=null,te.a=q,te.b=K,te.a$=ne},l0:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y},l1:function(s){this.a=s},l2:function(){},l3:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y},bP:function(s,a,f,g,y,S){var C=this;C.d=s,C.e=a,C.f=f,C.a=g,C.b=y,C.a$=S},bQ:function(s,a,f,g,y,S){var C=this;C.d=s,C.e=a,C.f=f,C.r=null,C.a=g,C.b=y,C.a$=S},bR:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},ez:function(s){this.a=s},eG:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},eE:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},eH:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},eF:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},oe:function(n,s,a){var f=E.aR(U.X),g=s==null?0:s;return n!=null&&f.K(0,n),new ye.kV(g,f,a)},t4:function(){return new p.a8(_.ak,new ye.fS,U.gw)},t3:function(n){var s,a,f,g,y=U.i,S=p.a([],y),C=U._,R=p.a([],U.d6),D=E.a5(U.al,U.f9),H=p.a([],y),q=p.a([],y),K=p.a([],U.j),ne=p.a([],U.a9);return y=p.a(["image/jpeg","image/png"],y),s=U.aD,a=U.X,f=U.cn,g=E.mF(["POSITION",E.b8([_.k],s),"NORMAL",E.b8([_.k],s),"TANGENT",E.b8([_.u],s),"TEXCOORD",E.b8([_.aV,_.aQ,_.aU],s),"COLOR",E.b8([_.k,_.R,_.T,_.u,_.D,_.E],s),"JOINTS",E.b8([_.aY,_.aZ],s),"WEIGHTS",E.b8([_.u,_.D,_.E],s)],a,f),f=E.mF(["POSITION",E.b8([_.k],s),"NORMAL",E.b8([_.k],s),"TANGENT",E.b8([_.k],s)],a,f),s=n==null?ye.oe(null,null,null):n,f=new ye.j(s,S,E.a5(U.W,U.b7),E.a5(C,C),E.a5(U.f7,U.an),R,E.a5(U.u,U.gz),E.a5(U.cl,U.eG),D,H,q,K,E.aR(U.af),ne,new E.a9(""),y,g,f),g=U.em,f.dx=new E.aX(q,g),f.cy=new E.aX(H,g),f.ch=new E.be(D,U.f8),f.fr=new E.aX(K,U.go),f},kV:function(s,a,f){this.a=s,this.b=a,this.c=f},j:function n(s,a,f,g,y,S,C,R,D,n,H,q,K,ne,te,ue,ce,ge){var Ne=this;Ne.b=s,Ne.c=a,Ne.d=f,Ne.e=g,Ne.f=y,Ne.r=S,Ne.x=C,Ne.y=R,Ne.z=!1,Ne.Q=D,Ne.ch=null,Ne.cx=n,Ne.cy=null,Ne.db=H,Ne.dx=null,Ne.dy=q,Ne.fr=null,Ne.fx=K,Ne.fy=ne,Ne.go=te,Ne.id=!1,Ne.k1=ue,Ne.k2=ce,Ne.k3=ge},fS:function(){},fR:function(){},fT:function(){},fW:function(s){this.a=s},fX:function(s){this.a=s},fU:function(s){this.a=s},fV:function(){},fY:function(s,a){this.a=s,this.b=a},c4:function(){}},Re={rO:function(n,s){var a,f,g,y,S,C,R,D,H,q=null,K="channels",ne="samplers";if(oe.A(n,_.cd,s),a=oe.m6(n,K,s),a!=null){for(f=a.gi(a),g=new Array(f),g.fixed$length=Array,g=p.a(g,U.fr),y=new oe.L(g,f,K,U.eq),f=s.c,f.push(K),S=0;S<a.gi(a);++S)C=a.j(0,S),f.push(_.c.l(S)),oe.A(C,_.cM,s),g[S]=new Re.b1(oe.P(C,"sampler",s,!0),oe.V(C,"target",s,Re.vh(),!0),oe.y(C,_.da,s,q),oe.z(C,s),!1),f.pop();f.pop()}else y=q;if(R=oe.m6(n,ne,s),R!=null){for(f=R.gi(R),g=new Array(f),g.fixed$length=Array,g=p.a(g,U.es),D=new oe.L(g,f,ne,U.az),f=s.c,f.push(ne),S=0;S<R.gi(R);++S)H=R.j(0,S),f.push(_.c.l(S)),oe.A(H,_.cs,s),g[S]=new Re.b2(oe.P(H,"input",s,!0),oe.J(H,"interpolation",s,"LINEAR",_.c0,q,!1),oe.P(H,"output",s,!0),oe.y(H,_.db,s,q),oe.z(H,s),!1),f.pop();f.pop()}else D=q;return oe.J(n,"name",s,q,q,q,!1),new Re.bn(y,D,oe.y(n,_.ar,s,q),oe.z(n,s),!1)},rN:function(n,s){return oe.A(n,_.cy,s),new Re.bT(oe.P(n,"node",s,!1),oe.J(n,"path",s,null,_.an,null,!0),oe.y(n,_.d9,s,null),oe.z(n,s),!1)},bn:function(s,a,f,g,y){var S=this;S.x=s,S.y=a,S.a=f,S.b=g,S.a$=y},fH:function(s,a){this.a=s,this.b=a},fI:function(s,a,f){this.a=s,this.b=a,this.c=f},b1:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},bT:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},b2:function(s,a,f,g,y,S){var C=this;C.d=s,C.e=a,C.f=f,C.x=C.r=null,C.a=g,C.b=y,C.a$=S},ei:function(s){this.a=0,this.b=s},dp:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.e=y.d=0,y.$ti=g},b_:function(n){switch(n){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return-1}},wa:function(n){switch(n){case 5121:case 5123:case 5125:return 0;case 5120:return-128;case 5122:return-32768;case 5124:return-2147483648;default:throw p.c(E.O(null))}},pb:function(n){switch(n){case 5120:return 127;case 5121:return 255;case 5122:return 32767;case 5123:return 65535;case 5124:return 2147483647;case 5125:return 4294967295;default:throw p.c(E.O(null))}}},Me={rP:function(n,s){var a,f,g,y,S=null,C="minVersion";return oe.A(n,_.ca,s),oe.J(n,"copyright",s,S,S,S,!1),a=oe.J(n,"generator",s,S,S,S,!1),f=j.bj(),g=oe.J(n,"version",s,S,S,f,!0),f=oe.J(n,C,s,S,S,f,!1),y=new Me.bo(a,g,f,oe.y(n,_.dc,s,S),oe.z(n,s),!1),a=f!=null&&g!=null,a&&(y.gcM()>y.gb8()?a=!0:a=y.gcM()==y.gb8()&&y.geb()>y.gbO(),a&&s.k(j.qR(),p.a([f,g],U.M),C)),y},bo:function(s,a,f,g,y,S){var C=this;C.e=s,C.f=a,C.r=f,C.a=g,C.b=y,C.a$=S},te:function(n,s){var a,f,g,y,S,C,R,D,H,q="bufferView",K=null;if(oe.A(n,_.cc,s),y=oe.P(n,q,s,!1),S=s.k1,C=oe.J(n,"mimeType",s,K,S,K,!1),a=oe.J(n,"uri",s,K,K,K,!1),R=y===-1,D=!R,D&&C==null&&s.k(j.d1(),p.a(["mimeType"],U.M),q),D&&a!=null?R=!0:R=R&&a==null,R&&s.E(j.nl(),p.a(["bufferView","uri"],U.M)),f=null,a!=null){g=null;try{g=E.oa(a)}catch(ne){if(p.E(ne)instanceof E.aD)f=oe.p_(a,s);else throw ne}g!=null?(s.id&&s.p(j.nc(),"uri"),H=g.cB(),C==null&&(R=_.d.F(S,g.gax()),R||s.k(j.nm(),p.a([g.gax(),S],U.M),"uri"),C=g.gax())):H=K}else H=K;return S=f,oe.J(n,"name",s,K,K,K,!1),new Me.aO(y,C,S,H,oe.y(n,_.au,s,K),oe.z(n,s),!1)},aO:function(s,a,f,g,y,S,C){var R=this;R.x=s,R.y=a,R.z=f,R.Q=g,R.cx=R.ch=null,R.a=y,R.b=S,R.a$=C},tO:function(n,s){var a=null;return oe.A(n,_.cH,s),oe.W(n,"magFilter",s,-1,_.bU,-1,0,!1),oe.W(n,"minFilter",s,-1,_.bX,-1,0,!1),oe.W(n,"wrapS",s,10497,_.ad,-1,0,!1),oe.W(n,"wrapT",s,10497,_.ad,-1,0,!1),oe.J(n,"name",s,a,a,a,!1),new Me.bv(oe.y(n,_.dv,s,a),oe.z(n,s),!1)},bv:function(s,a,f){this.a=s,this.b=a,this.a$=f},tv:function(){return new Me.cD(new Float32Array(16))},tL:function(){return new Me.eW(new Float32Array(4))},og:function(n){var s=new Float32Array(3);return s[2]=n[2],s[1]=n[1],s[0]=n[0],new Me.cJ(s)},of:function(){return new Me.cJ(new Float32Array(3))},cD:function(s){this.a=s},eW:function(s){this.a=s},cJ:function(s){this.a=s},f9:function(s){this.a=s}},pe={rU:function(n,s){var a,f,g,y,S,C,R,D,H="byteLength",q=null,K="uri";if(oe.A(n,_.cO,s),y=oe.W(n,H,s,-1,q,-1,1,!0),a=null,S=n.w(K),S)if(f=oe.J(n,K,s,q,q,q,!1),f!=null){g=null;try{g=E.oa(f)}catch(ne){if(p.E(ne)instanceof E.aD)a=oe.p_(f,s);else throw ne}g!=null?(s.id&&s.p(j.nc(),K),g.gax()==="application/octet-stream"||g.gax()==="application/gltf-buffer"?C=g.cB():(s.k(j.qA(),p.a([g.gax()],U.M),K),C=q)):C=q,C!=null&&y!==-1&&C.length!==y&&(R=j.pw(),D=C.length,s.k(R,p.a([D,y],U.M),H),y=D)}else C=q;else C=q;return R=a,oe.J(n,"name",s,q,q,q,!1),new pe.aN(R,y,S,C,oe.y(n,_.dd,s,q),oe.z(n,s),!1)},aN:function(s,a,f,g,y,S,C){var R=this;R.x=s,R.y=a,R.z=f,R.Q=g,R.a=y,R.b=S,R.a$=C},p2:function(){var n=new pe.mo;Z.rB(t.exports,E.cp(new pe.mk(n))),Z.rC(t.exports,E.cp(new pe.ml(n))),Z.rD(t.exports,E.cp(new pe.mm)),Z.rA(t.exports,E.cp(new pe.mn))},fB:function(n,s){return pe.wc(n,s)},wc:function(n,s){var a=0,f=E.ec(U.t),g,y=2,S,C,R,D,H,q,K=E.ee(function(ne,te){for(ne===1&&(S=te,a=y);;)switch(a){case 0:if(!U.a.b(n))throw p.c(E.O("data: Argument must be a Uint8Array."));return H=pe.oE(s),C=pe.oI(H),R=null,y=4,a=7,E.cV(De.tb(E.mI(p.a([n],U.d),U.w),C),K);case 7:return D=te,a=8,E.cV(D.bU(),K);case 8:R=te,y=2,a=6;break;case 4:throw y=3,q=S,p.E(q)instanceof De.db,q;case 3:a=2;break;case 6:g=pe.fz(H,C,R),a=1;break;case 1:return E.e6(g,f);case 2:return E.e5(S,f)}});return E.e7(K,f)},n5:function(n,s){var a=0,f=E.ec(U.t),g,y,S,C=E.ee(function(R,D){if(R===1)return E.e5(D,f);for(;;)switch(a){case 0:if(typeof n!="string")throw p.c(E.O("json: Argument must be a string."));y=pe.oE(s),S=pe.oI(y),g=pe.fz(y,S,De.ta(n,S)),a=1;break;case 1:return E.e6(g,f)}});return E.e7(C,f)},oE:function(n){var s;if(n!=null?s=typeof n=="number"||p.e9(n)||typeof n=="string"||U.l.b(n):s=!1,s)throw p.c(E.O("options: Value must be an object."));return U.bv.a(n)},fz:function(n,s,a){var f=0,g=E.ec(U.t),y,S,C,R,D,H=E.ee(function(q,K){if(q===1)return E.e5(K,g);for(;;)switch(f){case 0:if(D=n==null,D)C=null,R=null;else{if(S=Z.b0(n),C=pe.uM(S.gbd(n)),S.gbE(n)!=null&&!U.b1.b(S.gbE(n)))throw p.c(E.O("options.externalResourceFunction: Value must be a function."));if(R=S.gbE(n),S.gc_(n)!=null&&!p.e9(S.gc_(n)))throw p.c(E.O("options.writeTimestamp: Value must be a boolean."))}f=(a==null?null:a.b)!=null?3:4;break;case 3:return f=5,E.cV(pe.uL(s,a,R).aJ(),H);case 5:case 4:D=D?null:Z.rw(n),y=new Fe.kW(C,s,a,D==null?!0:D).bc(),f=1;break;case 1:return E.e6(y,g)}});return E.e7(H,g)},uM:function(n){var s,a;if(n!=null)if(typeof n=="string")try{return a=E.ob(n),a}catch(f){throw a=p.E(f),a instanceof E.aD?(s=a,p.c(E.O("options.uri: "+p.b(s)+"."))):f}else throw p.c(E.O("options.uri: Value must be a string."));return null},oI:function(n){var s,a,f,g,y,S,C,R,D;if(n!=null){if(s=Z.b0(n),s.gb9(n)!=null?a=!p.aJ(s.gb9(n))||s.gb9(n)<0:a=!1,a)throw p.c(E.O("options.maxIssues: Value must be a non-negative integer."));if(s.gb6(n)!=null){if(!U.l.b(s.gb6(n)))throw p.c(E.O("options.ignoredIssues: Value must be an array."));for(f=p.a([],U.i),g=0;g<Z.X(s.gb6(n));++g)if(y=Z.nt(s.gb6(n),g),typeof y=="string"&&y.length!==0)f.push(y);else throw p.c(E.O("options.ignoredIssues["+g+"]: Value must be a non-empty String."))}else f=null;if(s.gai(n)!=null){if(typeof s.gai(n)=="number"||p.e9(s.gai(n))||typeof s.gai(n)=="string"||U.l.b(s.gai(n)))throw p.c(E.O("options.severityOverrides: Value must be an object."));for(a=U.X,S=E.a5(a,U.dz),a=Z.my(t.Object.keys(s.gai(n)),a),a=new p.a6(a,a.gi(a),p.r(a).h("a6<m.E>"));a.n();)if(C=a.d,R=s.gai(n)[C],p.aJ(R)&&R>=0&&R<=3)S.m(0,C,_.cF[R]);else throw p.c(E.O('options.severityOverrides["'+p.b(C)+'"]: Value must be one of [0, 1, 2, 3].'))}else S=null;D=ye.oe(f,s.gb9(n),S)}else D=null;return ye.t3(D)},uL:function(n,s,a){var f=new pe.lU(a),g=new E.dD("options.externalResourceFunction is required to load this resource.");return new He.jw(s.b,n,new pe.lS(n,s,a,f,g),new pe.lT(a,f,g))},bb:function(){},hx:function(){},cP:function(){},mo:function(){},mk:function(s){this.a=s},mj:function(s,a,f){this.a=s,this.b=a,this.c=f},mg:function(s){this.a=s},mh:function(s,a){this.a=s,this.b=a},ml:function(s){this.a=s},mi:function(s,a,f){this.a=s,this.b=a,this.c=f},me:function(s){this.a=s},mf:function(s,a){this.a=s,this.b=a},mm:function(){},mn:function(){},lU:function(s){this.a=s},lV:function(s){this.a=s},lW:function(s){this.a=s},lS:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y},lT:function(s,a,f){this.a=s,this.b=a,this.c=f},eP:function(s){this.a=s}},ve={rT:function(n,s){var a,f,g,y,S,C=null,R="byteStride";return oe.A(n,_.c_,s),a=oe.W(n,"byteLength",s,-1,C,-1,1,!0),f=oe.W(n,R,s,-1,C,252,4,!1),g=oe.W(n,"target",s,-1,_.bP,-1,0,!1),f!==-1&&(a!==-1&&f>a&&s.k(j.qB(),p.a([f,a],U.M),R),f%4!=0&&s.k(j.qu(),p.a([f,4],U.M),R),g===34963&&s.p(j.mv(),R)),y=oe.P(n,"buffer",s,!0),S=oe.W(n,"byteOffset",s,0,C,-1,0,!1),oe.J(n,"name",s,C,C,C,!1),new ve.bp(y,S,a,f,g,oe.y(n,_.as,s,C),oe.z(n,s),!1)},bp:function(s,a,f,g,y,S,C,R){var D=this;D.x=s,D.y=a,D.z=f,D.Q=g,D.ch=y,D.cy=D.cx=null,D.db=-1,D.a=S,D.b=C,D.a$=R},nI:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt,wn,Zt,_n,mn,Xt,de,Ae,ke,Ie,be,yt="extensionsRequired",wt="extensionsUsed",Lt=null,xt=new ve.i0(s);if(xt.$0(),oe.A(n,_.cQ,s),n.w(yt)&&!n.w(wt)&&s.k(j.d1(),p.a(["extensionsUsed"],U.M),yt),a=oe.oX(n,wt,s),a==null&&(a=p.a([],U.i)),f=oe.oX(n,yt,s),f==null&&(f=p.a([],U.i)),s.e4(a,f),g=new ve.i1(n,xt,s),y=new ve.i2(xt,n,s).$1$3$req("asset",Me.vj(),!0,U.gP),(y==null?Lt:y.f)==null)return Lt;if(y.gb8()!==2)return S=j.r5(),C=y.gb8(),s.k(S,p.a([C],U.M),"version"),Lt;for(y.gbO()>0&&(S=j.r6(),C=y.gbO(),s.k(S,p.a([C],U.M),"version")),R=g.$1$2("accessors",ye.vg(),U.W),D=g.$1$2("animations",Re.vi(),U.bj),H=g.$1$2("buffers",pe.vo(),U.cT),q=g.$1$2("bufferViews",ve.vp(),U.u),K=g.$1$2("cameras",Ce.vs(),U.h2),ne=g.$1$2("images",Me.vG(),U.ec),te=g.$1$2("materials",_e.vZ(),U.fC),ue=g.$1$2("meshes",Pe.w1(),U.eM),S=U.L,ce=g.$1$2("nodes",ve.w2(),S),ge=g.$1$2("samplers",Me.w3(),U.c2),Ne=g.$1$2("scenes",Te.w4(),U.J),xt.$0(),Xe=oe.P(n,"scene",s,!1),Ge=Ne.j(0,Xe),C=Xe!==-1&&Ge==null,C&&s.k(j.N(),p.a([Xe],U.M),"scene"),St=g.$1$2("skins",Oe.w5(),U.aV),ct=g.$1$2("textures",ze.w7(),U.ai),xt.$0(),Mt=oe.y(n,_.at,s,Lt),xt.$0(),dt=new ve.da(a,f,R,D,y,H,q,K,ne,te,ue,ce,ge,Ge,St,ct,Mt,oe.z(n,s),!1),mt=new ve.hZ(s,dt),mt.$2(q,_.as),mt.$2(R,_.L),mt.$2(ne,_.au),mt.$2(ct,_.N),mt.$2(te,_.h),mt.$2(ue,_.av),mt.$2(ce,_.M),mt.$2(St,_.az),mt.$2(D,_.ar),mt.$2(Ne,_.ay),Mt.a!==0&&(C=s.c,C.push("extensions"),Mt.J(0,new ve.hX(s,dt)),C.pop()),C=s.c,C.push("nodes"),ce.a9(new ve.hY(s,E.aR(S))),C.pop(),wn=[R,H,q,K,ne,te,ue,ce,ge,St,ct],Zt=0;Zt<11;++Zt)if(_n=wn[Zt],_n.gi(_n)!==0){for(C.push(_n.c),S=_n.b,mn=_n.a,Xt=mn.length,de=0;de<S;++de)Ae=de>=Xt,Ae=Ae?Lt:mn[de],(Ae==null?Lt:Ae.a$)===!1&&s.X(j.fD(),de);C.pop()}if(S=s.y,S.a!==0){for(mn=new p.au(S,p.r(S).h("au<1>")),mn=mn.gC(mn);mn.n();)if(Xt=mn.d,Xt.gi(Xt)!==0)for(ke=S.j(0,Xt),_.d.si(C,0),_.d.K(C,ke),Ae=Xt.b,Xt=Xt.a,Ie=Xt.length,de=0;de<Ae;++de)be=de>=Ie,be=be?Lt:Xt[de],(be==null?Lt:be.ge7())===!1&&s.X(j.fD(),de);_.d.si(C,0)}return dt},da:function(s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe){var Ge=this;Ge.d=s,Ge.e=a,Ge.f=f,Ge.r=g,Ge.x=y,Ge.y=S,Ge.z=C,Ge.Q=R,Ge.ch=D,Ge.cx=H,Ge.cy=q,Ge.db=K,Ge.dx=ne,Ge.dy=te,Ge.fx=ue,Ge.fy=ce,Ge.a=ge,Ge.b=Ne,Ge.a$=Xe},i0:function(s){this.a=s},i1:function(s,a,f){this.a=s,this.b=a,this.c=f},i2:function(s,a,f){this.a=s,this.b=a,this.c=f},hZ:function(s,a){this.a=s,this.b=a},i_:function(s,a){this.a=s,this.b=a},hX:function(s,a){this.a=s,this.b=a},hY:function(s,a){this.a=s,this.b=a},hV:function(){},hW:function(){},i3:function(s,a){this.a=s,this.b=a},i4:function(s,a){this.a=s,this.b=a},kQ:function(){},o:function(){},es:function(){},fk:function(){},d2:function(n){return new ve.u(n.ch,n.z,n.cx)},bU:function(s){this.a=s},bS:function(s){this.a=s},u:function(s,a,f){this.a=s,this.b=a,this.c=f},tB:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt,wn,Zt,_n,mn,Xt,de=null,Ae="matrix",ke="translation",Ie="rotation";return oe.A(n,_.bW,s),n.w(Ae)?(a=oe.aj(n,Ae,s,de,_.bI,1/0,-1/0,!1),a!=null?(f=new Float32Array(16),g=new Me.cD(f),y=a[0],S=a[1],C=a[2],R=a[3],D=a[4],H=a[5],q=a[6],K=a[7],ne=a[8],te=a[9],ue=a[10],ce=a[11],ge=a[12],Ne=a[13],Xe=a[14],f[15]=a[15],f[14]=Xe,f[13]=Ne,f[12]=ge,f[11]=ce,f[10]=ue,f[9]=te,f[8]=ne,f[7]=K,f[6]=q,f[5]=H,f[4]=D,f[3]=R,f[2]=C,f[1]=S,f[0]=y):g=de):g=de,n.w(ke)?(Ge=oe.aj(n,ke,s,de,_.m,1/0,-1/0,!1),St=Ge!=null?Me.og(Ge):de):St=de,n.w(Ie)?(ct=oe.aj(n,Ie,s,de,_.J,1,-1,!1),ct!=null?(f=ct[0],y=ct[1],S=ct[2],C=ct[3],R=new Float32Array(4),Mt=new Me.eW(R),R[0]=f,R[1]=y,R[2]=S,R[3]=C,f=Math.sqrt(Mt.gaI()),Math.abs(1-f)>.00769&&s.p(j.r2(),Ie)):Mt=de):Mt=de,n.w("scale")?(dt=oe.aj(n,"scale",s,de,_.m,1/0,-1/0,!1),mt=dt!=null?Me.og(dt):de):mt=de,wn=oe.P(n,"camera",s,!1),Zt=oe.mY(n,"children",s,!1),_n=oe.P(n,"mesh",s,!1),mn=oe.P(n,"skin",s,!1),Xt=oe.aj(n,"weights",s,de,de,1/0,-1/0,!1),_n===-1&&(mn!==-1&&s.k(j.d1(),p.a(["mesh"],U.M),"skin"),Xt!=null&&s.k(j.d1(),p.a(["mesh"],U.M),"weights")),g!=null&&((St!=null||Mt!=null||mt!=null)&&s.p(j.qV(),Ae),g.cK()?s.p(j.qT(),Ae):oe.vM(g)||s.p(j.qW(),Ae)),oe.J(n,"name",s,de,de,de,!1),new ve.ah(wn,Zt,mn,g,_n,St,Mt,mt,Xt,E.aR(U.J),oe.y(n,_.M,s,de),oe.z(n,s),!1)},ah:function(s,a,f,g,y,S,C,R,D,H,q,K,ne){var te=this;te.x=s,te.y=a,te.z=f,te.Q=g,te.ch=y,te.cx=S,te.cy=C,te.db=R,te.dx=D,te.dy=H,te.id=te.go=te.fy=te.fx=te.fr=null,te.k1=!1,te.a=q,te.b=K,te.a$=ne},jo:function(){},jp:function(){},jq:function(s,a){this.a=s,this.b=a}},Ce={rX:function(n,s){var a,f=null,g="orthographic",y="perspective";switch(oe.A(n,_.cN,s),a=n.w(g)&&n.w(y),a&&s.E(j.nl(),_.al),oe.J(n,"type",s,f,_.al,f,!0)){case"orthographic":oe.V(n,g,s,Ce.vq(),!0);break;case"perspective":oe.V(n,y,s,Ce.vr(),!0);break}return oe.J(n,"name",s,f,f,f,!1),new Ce.bq(oe.y(n,_.dg,s,f),oe.z(n,s),!1)},rV:function(n,s){var a,f,g,y;return oe.A(n,_.cP,s),a=oe.R(n,"xmag",s,0/0,1/0,-1/0,1/0,-1/0,!0),f=oe.R(n,"ymag",s,0/0,1/0,-1/0,1/0,-1/0,!0),g=oe.R(n,"zfar",s,0/0,1/0,0,1/0,-1/0,!0),y=oe.R(n,"znear",s,0/0,1/0,-1/0,1/0,0,!0),!isNaN(g)&&!isNaN(y)&&g<=y&&s.R(j.nn()),(a===0||f===0)&&s.R(j.qC()),new Ce.bV(oe.y(n,_.de,s,null),oe.z(n,s),!1)},rW:function(n,s){var a,f,g,y;return oe.A(n,_.c9,s),a=oe.R(n,"yfov",s,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(a)&&a>=3.141592653589793,f&&s.R(j.qD()),g=oe.R(n,"zfar",s,0/0,1/0,0,1/0,-1/0,!1),y=oe.R(n,"znear",s,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(g)&&!isNaN(y)&&g<=y,f&&s.R(j.nn()),oe.R(n,"aspectRatio",s,0/0,1/0,0,1/0,-1/0,!1),new Ce.bW(oe.y(n,_.df,s,null),oe.z(n,s),!1)},bq:function(s,a,f){this.a=s,this.b=a,this.a$=f},bV:function(s,a,f){this.a=s,this.b=a,this.a$=f},bW:function(s,a,f){this.a=s,this.b=a,this.a$=f}},_e={tu:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne=null,te="alphaCutoff";for(oe.A(n,_.c2,s),a=oe.V(n,"pbrMetallicRoughness",s,_e.w0(),!1),f=oe.V(n,"normalTexture",s,_e.p3(),!1),g=oe.V(n,"occlusionTexture",s,_e.w_(),!1),y=oe.V(n,"emissiveTexture",s,_e.bi(),!1),oe.aj(n,"emissiveFactor",s,_.a8,_.m,1,0,!1),S=oe.J(n,"alphaMode",s,"OPAQUE",_.c1,ne,!1),oe.R(n,te,s,.5,1/0,-1/0,1/0,0,!1),C=S!=="MASK"&&n.w(te),C&&s.p(j.qI(),te),oe.oV(n,"doubleSided",s),R=oe.y(n,_.h,s,ne),oe.J(n,"name",s,ne,ne,ne,!1),D=new _e.aS(a,f,g,y,E.a5(U.X,U.e),R,oe.z(n,s),!1),C=p.a([],U.M),C.push(a),C.push(f),C.push(g),C.push(y),H=R.gab(),q=p.r(H),q=new p.a7(Z.a_(H.a),H.b,q.h("@<1>").D(q.Q[1]).h("a7<1,2>"));q.n();)K=q.a,C.push(K);return s.aa(D,C),D},tE:function(n,s){var a,f,g,y,S,C,R,D;for(oe.A(n,_.ce,s),oe.aj(n,"baseColorFactor",s,_.aa,_.J,1,0,!1),a=oe.V(n,"baseColorTexture",s,_e.bi(),!1),oe.R(n,"metallicFactor",s,1,1/0,-1/0,1,0,!1),oe.R(n,"roughnessFactor",s,1,1/0,-1/0,1,0,!1),f=oe.V(n,"metallicRoughnessTexture",s,_e.bi(),!1),g=oe.y(n,_.du,s,null),y=new _e.ci(a,f,g,oe.z(n,s),!1),S=p.a([],U.M),S.push(a),S.push(f),C=g.gab(),R=p.r(C),R=new p.a7(Z.a_(C.a),C.b,R.h("@<1>").D(R.Q[1]).h("a7<1,2>"));R.n();)D=R.a,S.push(D);return s.aa(y,S),y},tD:function(n,s){var a,f,g,y;return oe.A(n,_.cq,s),a=oe.y(n,_.ax,s,_.h),f=oe.P(n,"index",s,!0),g=oe.W(n,"texCoord",s,0,null,-1,0,!1),oe.R(n,"strength",s,1,1/0,-1/0,1,0,!1),y=new _e.ch(f,g,a,oe.z(n,s),!1),s.aa(y,a.gab()),y},tC:function(n,s){var a,f,g,y;return oe.A(n,_.cp,s),a=oe.y(n,_.aw,s,_.h),f=oe.P(n,"index",s,!0),g=oe.W(n,"texCoord",s,0,null,-1,0,!1),oe.R(n,"scale",s,1,1/0,-1/0,1/0,-1/0,!1),y=new _e.cg(f,g,a,oe.z(n,s),!1),s.aa(y,a.gab()),y},tT:function(n,s){var a,f;return oe.A(n,_.co,s),a=oe.y(n,_.aA,s,_.h),f=new _e.bB(oe.P(n,"index",s,!0),oe.W(n,"texCoord",s,0,null,-1,0,!1),a,oe.z(n,s),!1),s.aa(f,a.gab()),f},aS:function(s,a,f,g,y,S,C,R){var D=this;D.x=s,D.y=a,D.z=f,D.Q=g,D.dx=y,D.a=S,D.b=C,D.a$=R},jb:function(s,a){this.a=s,this.b=a},ci:function(s,a,f,g,y){var S=this;S.e=s,S.x=a,S.a=f,S.b=g,S.a$=y},ch:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},cg:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},bB:function(s,a,f,g,y){var S=this;S.d=s,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=y},td:function(n){var s,a,f={};return f.a=f.b=null,s=new E.C(j.x,U.dD),a=new E.ax(s,U.eP),f.c=!1,f.a=n.bM(new _e.i7(f,a),new _e.i8(f),new _e.i9(f,a)),s},tc:function(n){var s=new _e.i6;return s.$2(n,_.bK)?_.aB:s.$2(n,_.bN)?_.aC:s.$2(n,_.bT)?_.aD:null},dK:function(s){this.b=s},dy:function(s,a){this.a=s,this.b=a},cL:function(s,a){this.a=s,this.b=a},c2:function(s,a){this.a=s,this.b=a},c3:function(s,a,f,g,y,S,C,R,D){var H=this;H.a=s,H.b=a,H.c=f,H.d=g,H.e=y,H.f=S,H.r=C,H.x=R,H.y=D},i7:function(s,a){this.a=s,this.b=a},i9:function(s,a){this.a=s,this.b=a},i8:function(s){this.a=s},i6:function(){},i5:function(){},ij:function(s,a){var f=this;f.f=f.e=f.d=f.c=0,f.r=null,f.a=s,f.b=a},il:function(){},ik:function(){},jr:function(s,a,f,g,y,S){var C=this;C.y=C.x=C.r=C.f=C.e=C.d=C.c=0,C.Q=C.z=!1,C.ch=s,C.cx=a,C.cy=!1,C.db=f,C.dx=g,C.a=y,C.b=S},js:function(s){this.a=s},kZ:function(s,a,f){var g=this;g.c=s,g.d=0,g.a=a,g.b=f},dw:function(){},dv:function(){},aP:function(s){this.a=s}},Pe={tx:function(n,s){var a,f,g,y,S,C,R,D,H,q,K=null,ne="primitives";if(oe.A(n,_.cE,s),a=oe.aj(n,"weights",s,K,K,1/0,-1/0,!1),f=oe.m6(n,ne,s),f!=null){for(g=f.gi(f),y=new Array(g),y.fixed$length=Array,y=p.a(y,U.bZ),S=new oe.L(y,g,ne,U.b_),g=s.c,g.push(ne),C=K,R=-1,D=0;D<f.gi(f);++D)g.push(_.c.l(D)),H=Pe.tw(f.j(0,D),s),C==null?(q=H.x,C=q==null?K:q.length):(q=H.x,C!==(q==null?K:q.length)&&s.p(j.qQ(),"targets")),R===-1?R=H.cx:R!==H.cx&&s.p(j.qP(),"attributes"),y[D]=H,g.pop();g.pop(),g=C!=null&&a!=null&&C!==a.length,g&&s.k(j.qJ(),p.a([a.length,C],U.M),"weights")}else S=K;return oe.J(n,"name",s,K,K,K,!1),new Pe.aT(S,oe.y(n,_.av,s,K),oe.z(n,s),!1)},tw:function(n,s){var a,f,g,y,S,C,R="attributes",D={};return oe.A(n,_.ct,s),D.a=D.b=D.c=!1,D.d=0,D.e=-1,D.f=0,D.r=-1,D.x=0,D.y=-1,D.z=0,D.Q=-1,a=oe.W(n,"mode",s,4,null,6,0,!1),f=oe.vB(n,R,s,new Pe.jc(D,s)),f!=null&&(g=s.c,g.push(R),D.c||s.R(j.qM()),!D.b&&D.a&&s.p(j.qO(),"TANGENT"),D.a&&a===0&&s.p(j.qN(),"TANGENT"),y=new Pe.jd(s),D.d=y.$3(D.e,D.d,"COLOR"),D.f=y.$3(D.r,D.f,"JOINTS"),D.x=y.$3(D.y,D.x,"WEIGHTS"),D.z=y.$3(D.Q,D.z,"TEXCOORD"),y=D.f,S=D.x,y!==S&&(s.E(j.qL(),p.a([y,S],U.M)),D.x=D.f=0),g.pop()),C=oe.vC(n,"targets",s,new Pe.je(s)),new Pe.aH(f,oe.P(n,"indices",s,!1),oe.P(n,"material",s,!1),a,C,D.f,D.x,D.z,E.a5(U.X,U.W),oe.y(n,_.dt,s,null),oe.z(n,s),!1)},aT:function(s,a,f,g){var y=this;y.x=s,y.a=a,y.b=f,y.a$=g},jl:function(s,a){this.a=s,this.b=a},aH:function(s,a,f,g,y,S,C,R,D,H,q,K){var ne=this;ne.d=s,ne.e=a,ne.f=f,ne.r=g,ne.x=y,ne.cx=S,ne.cy=C,ne.db=R,ne.dx=D,ne.fr=ne.dy=-1,ne.go=ne.fy=ne.fx=null,ne.a=H,ne.b=q,ne.a$=K},jc:function(s,a){this.a=s,this.b=a},jd:function(s){this.a=s},je:function(s){this.a=s},jg:function(s,a,f){this.a=s,this.b=a,this.c=f},jh:function(){},ji:function(s,a,f){this.a=s,this.b=a,this.c=f},jj:function(){},jk:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},jf:function(){},ev:function(s,a,f,g,y,S){var C=this;C.a=s,C.b=a,C.c=f,C.x=g,C.ch=C.Q=0,C.cx=y,C.cy=S},tr:function(n,s){return s.toString,oe.A(n,_.ci,s),new Pe.cc(oe.y(n,_.dr,s,null),oe.z(n,s),!1)},cc:function(s,a,f){this.a=s,this.b=a,this.a$=f}},Te={tP:function(n,s){var a,f=null;return oe.A(n,_.cz,s),a=oe.mY(n,"nodes",s,!1),oe.J(n,"name",s,f,f,f,!1),new Te.bw(a,oe.y(n,_.ay,s,f),oe.z(n,s),!1)},bw:function(s,a,f,g){var y=this;y.x=s,y.y=null,y.a=a,y.b=f,y.a$=g},jz:function(s,a){this.a=s,this.b=a},tn:function(n,s){var a,f,g,y,S,C,R,D,H;for(s.toString,oe.A(n,_.bO,s),oe.R(n,"clearcoatFactor",s,0,1/0,-1/0,1,0,!1),a=oe.V(n,"clearcoatTexture",s,_e.bi(),!1),oe.R(n,"clearcoatRoughnessFactor",s,0,1/0,-1/0,1,0,!1),f=oe.V(n,"clearcoatRoughnessTexture",s,_e.bi(),!1),g=oe.V(n,"clearcoatNormalTexture",s,_e.p3(),!1),y=oe.y(n,_.dn,s,null),S=new Te.c8(a,f,g,y,oe.z(n,s),!1),C=p.a([],U.M),C.push(a),C.push(f),C.push(g),R=y.gab(),D=p.r(R),D=new p.a7(Z.a_(R.a),R.b,D.h("@<1>").D(D.Q[1]).h("a7<1,2>"));D.n();)H=D.a,C.push(H);return s.aa(S,C),S},c8:function(s,a,f,g,y,S){var C=this;C.e=s,C.r=a,C.x=f,C.a=g,C.b=y,C.a$=S},tq:function(n,s){var a,f,g,y,S,C,R;for(s.toString,oe.A(n,_.bS,s),oe.R(n,"transmissionFactor",s,0,1/0,-1/0,1,0,!1),a=oe.V(n,"transmissionTexture",s,_e.bi(),!1),f=oe.y(n,_.dq,s,null),g=new Te.cb(a,f,oe.z(n,s),!1),y=p.a([],U.M),y.push(a),S=f.gab(),C=p.r(S),C=new p.a7(Z.a_(S.a),S.b,C.h("@<1>").D(C.Q[1]).h("a7<1,2>"));C.n();)R=C.a,y.push(R);return s.aa(g,y),g},cb:function(s,a,f,g){var y=this;y.e=s,y.a=a,y.b=f,y.a$=g}},Oe={tQ:function(n,s){var a,f,g,y=null;return oe.A(n,_.c4,s),a=oe.P(n,"inverseBindMatrices",s,!1),f=oe.P(n,"skeleton",s,!1),g=oe.mY(n,"joints",s,!0),oe.J(n,"name",s,y,y,y,!1),new Oe.by(a,f,g,E.aR(U.L),oe.y(n,_.az,s,y),oe.z(n,s),!1)},by:function(s,a,f,g,y,S,C){var R=this;R.x=s,R.y=a,R.z=f,R.cx=R.ch=R.Q=null,R.cy=g,R.a=y,R.b=S,R.a$=C},kB:function(s){this.a=s},eu:function(s){this.a=s},lX:function(n){return n==null||n.ch==null||n.z===-1||n.Q===-1||n.fr==null&&n.dx==null?null:n},wb:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St;for(n.f.a9(new Oe.mq(s)),Oe.v2(s),a=p.a([],U.B),f=p.a([],U.bd),g=s.c,_.d.si(g,0),g.push("meshes"),y=n.cy,S=y.b,C=n.db,R=C.$ti.h("a6<m.E>"),D=n.fx,y=y.a,H=y.length,q=0;q<S;++q)if(K={},ne=q>=H,te=ne?null:y[q],(te==null?null:te.x)!=null&&(ne=te.x,!ne.b4(ne,new Oe.mr))){for(K.a=K.b=-1,ue=new p.a6(C,C.gi(C),R);ue.n();)ce=ue.d,ce.fy==te?(ge=ce.id,ge=(ge==null?null:ge.ch)!=null):ge=!1,ge&&(ge=ce.id,Ne=ge.ch.length,Xe=K.b,(Xe===-1||Ne<Xe)&&(K.b=Ne,K.a=D.bK(D,ge)));K.b<1||(g.push(_.c.l(q)),g.push("primitives"),ne.a9(new Oe.ms(K,s,a,f)),g.pop(),g.pop())}if(g.pop(),a.length!==0)for(;Oe.v8(a);)for(g=f.length,Ge=0;Ge<f.length;f.length===g||(0,p.cs)(f),++Ge)St=f[Ge],St.x||St.dR(s)},v8:function(n){var s,a;for(s=n.length,a=0;a<n.length;n.length===s||(0,p.cs)(n),++a)n[a].n();return n.fixed$length&&p.a2(E.ab("removeWhere")),_.d.dI(n,new Oe.lZ,!0),n.length!==0},v2:function(n){var s,a,f,g,y,S,C,R,D,H,q,K;for(s=n.d.gdY(),s=s.gC(s),a=n.c;s.n();)if(f=s.gq(),g=Oe.lX(f.a),g!=null){for(y=_.l.j(0,g.ch),y==null&&(y=0),S=f.b,_.d.si(a,0),f=g.ac(),f=new E.aB(f.a(),p.r(f).h("aB<1>")),C=Z.M(S),R=0,D=0,H=!1;f.n();H=!0){for(q=f.gq(),K=0;K<C.gi(S);++K)!!C.j(S,K).Y(n,R,D,q);++D,D===y&&(D=0),++R}if(H)for(K=0;K<C.gi(S);++K)C.j(S,K).aw(n)}},mq:function(s){this.a=s},mr:function(){},ms:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},lZ:function(){},ey:function(s,a,f,g,y,S){var C=this;C.a=s,C.b=a,C.c=f,C.d=g,C.e=y,C.r=C.f=0,C.x=!1,C.z=C.y=0,C.Q=S}},ze={tU:function(n,s){var a,f,g=null;return oe.A(n,_.cJ,s),a=oe.P(n,"sampler",s,!1),f=oe.P(n,"source",s,!1),oe.J(n,"name",s,g,g,g,!1),new ze.bA(a,f,oe.y(n,_.N,s,g),oe.z(n,s),!1)},bA:function(s,a,f,g,y){var S=this;S.x=s,S.y=a,S.Q=S.z=null,S.a=f,S.b=g,S.a$=y},tp:function(n,s){var a,f,g,y,S,C,R,D;for(s.toString,oe.A(n,_.bM,s),oe.aj(n,"sheenColorFactor",s,_.a8,_.m,1,0,!1),a=oe.V(n,"sheenColorTexture",s,_e.bi(),!1),oe.R(n,"sheenRoughnessFactor",s,0,1/0,-1/0,1,0,!1),f=oe.V(n,"sheenRoughnessTexture",s,_e.bi(),!1),g=oe.y(n,_.dp,s,null),y=new ze.ca(a,f,g,oe.z(n,s),!1),S=p.a([],U.M),S.push(a),S.push(f),C=g.gab(),R=p.r(C),R=new p.a7(Z.a_(C.a),C.b,R.h("@<1>").D(R.Q[1]).h("a7<1,2>"));R.n();)D=R.a,S.push(D);return s.aa(y,S),y},ca:function(s,a,f,g,y){var S=this;S.e=s,S.r=a,S.a=f,S.b=g,S.a$=y},uO:function(n){var s="POSITION",a=n.k2;a.j(0,s).K(0,_.cL),a.j(0,"NORMAL").K(0,_.K),a.j(0,"TANGENT").K(0,_.cR),a.j(0,"TEXCOORD").K(0,_.bQ),a=n.k3,a.j(0,s).K(0,_.c5),a.j(0,"NORMAL").K(0,_.K),a.j(0,"TANGENT").K(0,_.K)}},He={cR:function(s,a){this.a=s,this.b=a},eX:function(s){var a=this;a.a=s,a.f=a.e=a.d=a.c=a.b=null},jw:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},jx:function(s,a,f){this.a=s,this.b=a,this.c=f},jy:function(s,a){this.a=s,this.b=a}},$={D:function(n,s,a){return new $.fZ(a,n,s)},ai:function(n,s,a){return new $.jA(a,n,s)},q:function(n,s,a){return new $.jR(a,n,s)},v:function(n,s,a){return new $.ir(a,n,s)},ar:function(n,s,a){return new $.hy(a,n,s)},v3:function(n){return"'"+p.b(n)+"'"},uZ:function(n){return typeof n=="string"?"'"+n+"'":Z.ag(n)},bx:function(s,a){this.a=s,this.b=a},ic:function(){},fZ:function(s,a,f){this.a=s,this.b=a,this.c=f},h8:function(){},h6:function(){},h5:function(){},hd:function(){},ha:function(){},hb:function(){},h9:function(){},hm:function(){},ho:function(){},hf:function(){},hl:function(){},he:function(){},hk:function(){},hi:function(){},hj:function(){},hh:function(){},hg:function(){},hr:function(){},hq:function(){},hp:function(){},hv:function(){},hu:function(){},h2:function(){},h3:function(){},h4:function(){},ht:function(){},hs:function(){},h7:function(){},hn:function(){},hc:function(){},h1:function(){},h_:function(){},h0:function(){},ia:function(s,a,f){this.a=s,this.b=a,this.c=f},ib:function(){},jA:function(s,a,f){this.a=s,this.b=a,this.c=f},jK:function(){},jL:function(){},jQ:function(){},jO:function(){},jI:function(){},jE:function(){},jM:function(){},jF:function(){},jP:function(){},jB:function(){},jJ:function(){},jD:function(){},jG:function(){},jC:function(){},jN:function(){},jH:function(){},jR:function(s,a,f){this.a=s,this.b=a,this.c=f},kp:function(){},ko:function(){},ke:function(){},kc:function(){},kd:function(){},kb:function(){},k9:function(){},ka:function(){},kk:function(){},kl:function(){},k8:function(){},k7:function(){},k6:function(){},k5:function(){},k3:function(){},k2:function(){},k0:function(){},jV:function(){},kz:function(){},ky:function(){},k_:function(){},jX:function(){},jZ:function(){},jW:function(){},jY:function(){},kx:function(){},kv:function(){},kq:function(){},kf:function(){},kw:function(){},kr:function(){},ks:function(){},kt:function(){},ku:function(){},kj:function(){},ki:function(){},kh:function(){},kg:function(){},kn:function(){},km:function(){},k1:function(){},jT:function(){},jS:function(){},k4:function(){},jU:function(){},ir:function(s,a,f){this.a=s,this.b=a,this.c=f},j0:function(){},j5:function(){},iQ:function(){},iC:function(){},j6:function(){},iy:function(){},ix:function(){},iA:function(){},iB:function(){},iw:function(){},iz:function(){},iv:function(){},iF:function(){},iD:function(){},j4:function(){},iE:function(){},iX:function(){},iI:function(){},iJ:function(){},iG:function(){},iH:function(){},iP:function(){},iO:function(){},iN:function(){},iM:function(){},iR:function(){},iL:function(){},iK:function(){},j3:function(){},iS:function(){},iV:function(){},iU:function(){},iT:function(){},iW:function(){},iY:function(){},iZ:function(){},iu:function(){},it:function(){},is:function(){},j_:function(){},j1:function(){},j2:function(){},hy:function(s,a,f){this.a=s,this.b=a,this.c=f},hE:function(){},hD:function(){},hC:function(){},hM:function(){},hA:function(){},hL:function(){},hH:function(){},hI:function(){},hB:function(){},hz:function(){},hF:function(){},hK:function(){},hJ:function(){},hG:function(){},cA:function(s,a,f,g,y){var S=this;S.a=s,S.b=a,S.c=f,S.d=g,S.e=y}},$e={uN:function(n){n.k1.push("image/webp")},t8:function(n,s){return s.toString,oe.A(n,_.cK,s),new $e.c0(oe.P(n,"source",s,!1),oe.y(n,_.di,s,null),oe.z(n,s),!1)},c0:function(s,a,f,g){var y=this;y.d=s,y.e=null,y.a=a,y.b=f,y.a$=g},T:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},a4:function(s,a){this.a=s,this.b=a},c1:function(s,a){this.a=s,this.b=a},ce:function(s,a){this.a=s,this.b=a},eY:function(s,a){this.a=s,this.b=a}},Le={tk:function(n,s){var a,f,g,y,S,C,R,D,H,q,K=null,ne="lights",te="spot";if(s.toString,oe.A(n,_.cx,s),a=oe.m6(n,ne,s),f=U.dB,g=U.du,a!=null){for(y=a.gi(a),S=new Array(y),S.fixed$length=Array,f=p.a(S,f),C=new oe.L(f,y,ne,g),g=s.c,g.push(ne),R=0;R<a.gi(a);++R)D=a.j(0,R),g.push(_.c.l(R)),oe.A(D,_.bZ,s),oe.aj(D,"color",s,_.a9,_.m,1,0,!1),oe.R(D,"intensity",s,1,1/0,-1/0,1/0,0,!1),H=oe.J(D,"type",s,K,_.ch,K,!0),H==="spot"?oe.V(D,te,s,Le.vO(),!0):(y=D.w(te),y&&s.p(j.no(),te)),q=oe.R(D,"range",s,0/0,1/0,0,1/0,-1/0,!1),y=H==="directional"&&!isNaN(q),y&&s.p(j.no(),"range"),oe.J(D,"name",s,K,K,K,!1),f[R]=new Le.b7(oe.y(D,_.dl,s,K),oe.z(D,s),!1),g.pop();g.pop()}else y=new Array(0),y.fixed$length=Array,C=new oe.L(p.a(y,f),0,ne,g);return new Le.bs(C,oe.y(n,_.dj,s,K),oe.z(n,s),!1)},tl:function(n,s){var a,f,g,y="outerConeAngle";return oe.A(n,_.cr,s),a=oe.R(n,"innerConeAngle",s,0,1.5707963267948966,-1/0,1/0,0,!1),f=oe.R(n,y,s,.7853981633974483,1/0,0,1.5707963267948966,-1/0,!1),g=!isNaN(f)&&!isNaN(a)&&f<=a,g&&s.k(j.qH(),p.a([a,f],U.M),y),new Le.c6(oe.y(n,_.dk,s,null),oe.z(n,s),!1)},tm:function(n,s){return s.toString,oe.A(n,_.cw,s),new Le.c7(oe.P(n,"light",s,!0),oe.y(n,_.dm,s,null),oe.z(n,s),!1)},bs:function(s,a,f,g){var y=this;y.d=s,y.a=a,y.b=f,y.a$=g},iq:function(s,a){this.a=s,this.b=a},b7:function(s,a,f){this.a=s,this.b=a,this.a$=f},c6:function(s,a,f){this.a=s,this.b=a,this.a$=f},c7:function(s,a,f,g){var y=this;y.d=s,y.e=null,y.a=a,y.b=f,y.a$=g}},Fe={to:function(n,s){var a,f,g,y,S,C,R,D;for(s.toString,oe.A(n,_.cg,s),oe.aj(n,"diffuseFactor",s,_.aa,_.J,1,0,!1),a=oe.V(n,"diffuseTexture",s,_e.bi(),!1),oe.aj(n,"specularFactor",s,_.a9,_.m,1,0,!1),oe.R(n,"glossinessFactor",s,1,1/0,-1/0,1,0,!1),f=oe.V(n,"specularGlossinessTexture",s,_e.bi(),!1),g=oe.y(n,_.dh,s,null),y=new Fe.c9(a,f,g,oe.z(n,s),!1),S=p.a([],U.M),S.push(a),S.push(f),C=g.gab(),R=p.r(C),R=new p.a7(Z.a_(C.a),C.b,R.h("@<1>").D(R.Q[1]).h("a7<1,2>"));R.n();)D=R.a,S.push(D);return s.aa(y,S),y},c9:function(s,a,f,g,y){var S=this;S.e=s,S.x=a,S.a=f,S.b=g,S.a$=y},d9:function(s,a,f){var g=this;g.a=s,g.b=null,g.c=a,g.d=null,g.e=f,g.f=null,g.cx=g.ch=g.Q=g.z=g.y=g.x=g.r=0,g.cy=!1,g.dy=g.dx=g.db=null,g.fr=!1,g.fx=null},hP:function(s){this.a=s},hN:function(s){this.a=s},hO:function(s){this.a=s},kW:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},kY:function(){},kX:function(){},n0:function(n){var s=_.d2.e1(n,0,new Fe.m7),a=536870911&s+((67108863&s)<<3);return a^=a>>>11,536870911&a+((16383&a)<<15)},m7:function(){},fy:function(n,s){var a=536870911&n+s;return a=536870911&a+((524287&a)<<10),a^a>>>6},oG:function(n){var s=536870911&n+((67108863&n)<<3);return s^=s>>>11,536870911&s+((16383&s)<<15)}},qe={ts:function(n,s){return s.toString,oe.A(n,_.cD,s),oe.aj(n,"offset",s,_.bH,_.ab,1/0,-1/0,!1),oe.R(n,"rotation",s,0,1/0,-1/0,1/0,-1/0,!1),oe.aj(n,"scale",s,_.bJ,_.ab,1/0,-1/0,!1),new qe.cd(oe.W(n,"texCoord",s,-1,null,-1,0,!1),oe.y(n,_.ds,s,null),oe.z(n,s),!1)},cd:function(s,a,f,g){var y=this;y.r=s,y.a=a,y.b=f,y.a$=g}},De={tb:function(n,s){var a,f={},g=new E.C(j.x,U.eD);return f.a=!1,f.b=null,a=E.o6(new De.hR(f),new De.hS(f),new De.hT(f),U.w),f.b=n.e8(new De.hU(f,a,new E.ax(g,U.a_),s),a.gdS()),g},t9:function(n,s){var a=new De.cy(n,new E.ax(new E.C(j.x,U.f),U.G));return a.e=s,a},ta:function(n,s){var a,f,g,y=null,S=null;try{S=_.a1.dV(n)}catch(C){if(g=p.E(C),g instanceof E.aD)return a=g,s.av(j.fF(),p.a([a],U.M),!0),y;throw C}if(U.t.b(S))try{return f=ve.nI(S,s),new De.as("model/gltf+json",f,y)}catch(C){if(p.E(C)instanceof ye.c4)return y;throw C}else return s.av(j.Z(),p.a([S,"object"],U.M),!0),y},as:function(s,a,f){this.a=s,this.b=a,this.c=f},hS:function(s){this.a=s},hT:function(s){this.a=s},hR:function(s){this.a=s},hU:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.d=g},cy:function(s,a){var f=this;f.a=s,f.b=null,f.c=a,f.e=f.d=null,f.f=!0},hQ:function(s){this.a=s},db:function(){}},oe={ay:function(n,s,a,f){var g=n.j(0,s);return g==null&&n.w(s)&&f.k(j.Z(),p.a([null,a],U.M),s),g},P:function(n,s,a,f){var g=oe.ay(n,s,"integer",a);if(p.aJ(g)){if(g>=0)return g;a.p(j.fE(),s)}else g==null?f&&a.E(j.bk(),p.a([s],U.M)):a.k(j.Z(),p.a([g,"integer"],U.M),s);return-1},oV:function(n,s,a){var f=oe.ay(n,s,"boolean",a);return f==null?!1:p.e9(f)?f:(a.k(j.Z(),p.a([f,"boolean"],U.M),s),!1)},W:function(n,s,a,f,g,y,S,C){var R,D=oe.ay(n,s,"integer",a);if(p.aJ(D)){if(g!=null){if(!oe.mW(s,D,g,a,!1))return-1}else if(D<S?R=!0:R=y!==-1&&D>y,R)return a.k(j.mu(),p.a([D],U.M),s),-1;return D}else if(D==null){if(!C)return f;a.E(j.bk(),p.a([s],U.M))}else a.k(j.Z(),p.a([D,"integer"],U.M),s);return-1},R:function(n,s,a,f,g,y,S,C,R){var D=oe.ay(n,s,"number",a);if(typeof D=="number")return D<C||D<=y||D>S||D>=g?(a.k(j.mu(),p.a([D],U.M),s),0/0):D;if(D==null){if(!R)return f;a.E(j.bk(),p.a([s],U.M))}else a.k(j.Z(),p.a([D,"number"],U.M),s);return 0/0},J:function(n,s,a,f,g,y,S){var C,R=oe.ay(n,s,"string",a);if(typeof R=="string"){if(g!=null)oe.mW(s,R,g,a,!1);else if(y==null?C=null:(C=y.b,C=C.test(R)),C===!1)return a.k(j.qs(),p.a([R,y.a],U.M),s),null;return R}else if(R==null){if(!S)return f;a.E(j.bk(),p.a([s],U.M))}else a.k(j.Z(),p.a([R,"string"],U.M),s);return null},p_:function(n,s){var a,f,g;try{return a=E.ob(n),g=a,(g.gcI()||g.gbG()||g.gcH()||g.gbI()||g.gbH())&&s.k(j.r0(),p.a([n],U.M),"uri"),a}catch(y){if(g=p.E(y),g instanceof E.aD)return f=g,s.k(j.qr(),p.a([n,f],U.M),"uri"),null;throw y}},n_:function(n,s,a,f){var g=oe.ay(n,s,"object",a);if(U.t.b(g))return g;if(g==null){if(f)return a.E(j.bk(),p.a([s],U.M)),null}else if(a.k(j.Z(),p.a([g,"object"],U.M),s),f)return null;return E.a5(U.X,U._)},V:function(n,s,a,f,g){var y,S,C=oe.ay(n,s,"object",a);return U.t.b(C)?(y=a.c,y.push(s),S=f.$2(C,a),y.pop(),S):(C==null?g&&a.E(j.bk(),p.a([s],U.M)):a.k(j.Z(),p.a([C,"object"],U.M),s),null)},mY:function(n,s,a,f){var g,y,S,C,R,D,H=oe.ay(n,s,"array",a);if(U.o.b(H)){if(g=Z.M(H),g.gu(H))return a.p(j.bO(),s),null;for(y=a.c,y.push(s),S=U.e,C=E.aR(S),R=0;R<g.gi(H);++R)D=g.j(H,R),p.aJ(D)&&D>=0?C.B(0,D)||a.X(j.nj(),R):(g.m(H,R,-1),a.X(j.fE(),R));return y.pop(),g.ae(H,S)}else H==null?f&&a.E(j.bk(),p.a([s],U.M)):a.k(j.Z(),p.a([H,"array"],U.M),s);return null},vB:function(n,s,a,f){var g,y=oe.ay(n,s,"object",a);return U.t.b(y)?y.gu(y)?(a.p(j.bO(),s),null):(g=a.c,g.push(s),y.J(0,new oe.m3(f,y,a)),g.pop(),y.af(0,U.X,U.e)):(g=U.M,y==null?a.E(j.bk(),p.a([s],g)):a.k(j.Z(),p.a([y,"object"],g),s),null)},vC:function(n,s,a,f){var g,y,S,C,R,D,H,q=oe.ay(n,s,"array",a);if(U.o.b(q)){if(g=Z.M(q),g.gu(q))return a.p(j.bO(),s),null;for(y=a.c,y.push(s),S=U.M,C=U.t,R=!1,D=0;D<g.gi(q);++D)H=g.j(q,D),C.b(H)?H.gu(H)?(a.X(j.bO(),D),R=!0):(y.push(_.c.l(D)),H.J(0,new oe.m4(f,H,a)),y.pop()):(a.E(j.eg(),p.a([H,"object"],S)),R=!0);return y.pop(),R?null:(g=Z.my(q,U.h),y=p.r(g).h("a8<m.E,h<f*,d*>*>"),E.dh(new p.a8(g,new oe.m5,y),!1,y.h("af.E")))}else q!=null&&a.k(j.Z(),p.a([q,"array"],U.M),s);return null},aj:function(n,s,a,f,g,y,S,C){var R,D,H,q,K,ne,te,ue=null,ce=oe.ay(n,s,"array",a);if(U.o.b(ce)){if(R=Z.M(ce),R.gu(ce))return a.p(j.bO(),s),ue;if(g!=null&&!oe.mW(s,R.gi(ce),g,a,!0))return ue;for(D=new Array(R.gi(ce)),D.fixed$length=Array,H=p.a(D,U.m),D=U.M,q=!1,K=0;K<R.gi(ce);++K)ne=R.j(ce,K),typeof ne=="number"?(te=ne<S||ne>y,te&&(a.k(j.mu(),p.a([ne],D),s),q=!0),C?(te=j.nr(),te[0]=ne,H[K]=te[0]):H[K]=ne):(a.k(j.eg(),p.a([ne,"number"],D),s),q=!0);return q?ue:H}else{if(ce==null)return f==null?R=ue:R=Z.eA(f.slice(0),p.U(f).c),R;a.k(j.Z(),p.a([ce,"array"],U.M),s)}return ue},oW:function(n,s,a,f,g){var y,S,C,R,D,H,q,K,ne,te=oe.ay(n,s,"array",a);if(U.o.b(te)){if(y=Z.M(te),y.gi(te)!==g)return a.k(j.nk(),p.a([y.gi(te),p.a([g],U.V)],U.M),s),null;for(S=Re.wa(f),C=Re.pb(f),R=oe.vv(f,g),D=U.M,H=!1,q=0;q<y.gi(te);++q)K=y.j(te,q),typeof K=="number"&&_.bE.cW(K)===K?(p.aJ(K)||a.k(j.qE(),p.a([K],D),s),ne=K<S||K>C,ne&&(a.k(j.qG(),p.a([K,_.ao.j(0,f)],D),s),H=!0),R[q]=Z.rH(K)):(a.k(j.eg(),p.a([K,"integer"],D),s),H=!0);return H?null:R}else te!=null&&a.k(j.Z(),p.a([te,"array"],U.M),s);return null},oX:function(n,s,a){var f,g,y,S,C,R,D,H,q=oe.ay(n,s,"array",a);if(U.o.b(q)){if(f=Z.M(q),f.gu(q))return a.p(j.bO(),s),null;for(g=a.c,g.push(s),y=U.X,S=E.aR(y),C=U.M,R=!1,D=0;D<f.gi(q);++D)H=f.j(q,D),typeof H=="string"?S.B(0,H)||a.X(j.nj(),D):(a.aE(j.eg(),p.a([H,"string"],C),D),R=!0);return g.pop(),R?null:f.ae(q,y)}else q!=null&&a.k(j.Z(),p.a([q,"array"],U.M),s);return null},m6:function(n,s,a){var f,g,y,S,C,R,D=oe.ay(n,s,"array",a);if(U.o.b(D)){if(f=Z.M(D),f.gu(D))return a.p(j.bO(),s),null;for(g=f.gC(D),y=U.t,S=U.M,C=!1;g.n();)R=g.gq(),y.b(R)||(a.k(j.eg(),p.a([R,"object"],S),s),C=!0);return C?null:f.ae(D,y)}else f=U.M,D==null?a.E(j.bk(),p.a([s],f)):a.k(j.Z(),p.a([D,"array"],f),s);return null},y:function(n,s,a,f){var g,y,S,C,R,D,H,q,K,ne,te,ue,ce="extensions",ge=E.a5(U.X,U._),Ne=oe.n_(n,ce,a,!1);if(Ne.gu(Ne))return ge;for(g=a.c,g.push(ce),y=Ne.gL(),y=y.gC(y),S=U.ax,C=U.v,R=f==null,D=a.f,H=a.r;y.n();){if(q=y.gq(),K=oe.n_(Ne,q,a,!1),ne=a.dx,!ne.F(ne,q)){ge.m(0,q,null),ne=a.cy,ne=ne.F(ne,q),ne||a.p(j.qo(),q);continue}if(te=a.ch.a.j(0,new $e.c1(s,q)),te==null){a.p(j.qp(),q);continue}Ne.gi(Ne)>1&&te.b&&a.p(j.qS(),q),K!=null&&(g.push(q),ue=te.a.$2(K,a),ge.m(0,q,ue),C.b(ue)&&(q=R?s:f,q=D.bS(q,new oe.m2),ne=p.a(g.slice(0),p.U(g).h("p<1>")),ne.fixed$length=Array,Z.mx(q,new $e.ce(ue,ne))),S.b(ue)&&(q=p.a(g.slice(0),p.U(g).h("p<1>")),q.fixed$length=Array,H.push(new $e.eY(ue,q))),g.pop())}return g.pop(),ge},z:function(n,s){var a=n.j(0,"extras"),f=a!=null&&!U.h.b(a);return f&&s.p(j.r_(),"extras"),a},mW:function(n,s,a,f,g){var y;return Z.nu(a,s)?!0:(y=g?j.nk():j.nm(),f.k(y,p.a([s,a],U.M),n),!1)},A:function(n,s,a){var f,g,y;for(f=n.gL(),f=f.gC(f);f.n();)g=f.gq(),_.d.F(s,g)?y=!1:(y=_.d.F(_.cl,g),y=!y),y&&a.p(j.qt(),g)},n4:function(n,s,a,f,g,y){var S,C,R,D,H,q,K=g.c;for(K.push(f),S=U.M,C=a.a,R=C.length,D=0;D<n.gi(n);++D)H=n.j(0,D),H!==-1&&(q=H==null||H<0||H>=R?null:C[H],q!=null?(q.a$=!0,s[D]=q,y.$3(q,H,D)):g.aE(j.N(),p.a([H],S),D));K.pop()},vM:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt,wn,Zt,_n,mn,Xt,de,Ae,ke,Ie,be=n.a;return be[3]!==0||be[7]!==0||be[11]!==0||be[15]!==1||n.cE()===0?!1:(s=j.rq(),a=j.rn(),f=j.ro(),g=new Me.cJ(new Float32Array(3)),g.bi(be[0],be[1],be[2]),y=Math.sqrt(g.gaI()),g.bi(be[4],be[5],be[6]),S=Math.sqrt(g.gaI()),g.bi(be[8],be[9],be[10]),C=Math.sqrt(g.gaI()),n.cE()<0&&(y=-y),s=s.a,s[0]=be[12],s[1]=be[13],s[2]=be[14],R=1/y,D=1/S,H=1/C,be=new Float32Array(16),new Me.cD(be).d_(n),be[0]=be[0]*R,be[1]=be[1]*R,be[2]=be[2]*R,be[4]=be[4]*D,be[5]=be[5]*D,be[6]=be[6]*D,be[8]=be[8]*H,be[9]=be[9]*H,be[10]=be[10]*H,q=new Float32Array(9),q[0]=be[0],q[1]=be[1],q[2]=be[2],q[3]=be[4],q[4]=be[5],q[5]=be[6],q[6]=be[8],q[7]=be[9],q[8]=be[10],a.toString,be=q[0],K=q[4],ne=q[8],te=0+be+K+ne,te>0?(ue=Math.sqrt(te+1),be=a.a,be[3]=ue*.5,ue=.5/ue,be[0]=(q[5]-q[7])*ue,be[1]=(q[6]-q[2])*ue,be[2]=(q[1]-q[3])*ue):(be<K?ce=K<ne?2:1:ce=be<ne?2:0,ge=(ce+1)%3,Ne=(ce+2)%3,be=ce*3,K=ge*3,ne=Ne*3,ue=Math.sqrt(q[be+ce]-q[K+ge]-q[ne+Ne]+1),a=a.a,a[ce]=ue*.5,ue=.5/ue,a[3]=(q[K+Ne]-q[ne+ge])*ue,a[ge]=(q[be+ge]+q[K+ce])*ue,a[Ne]=(q[be+Ne]+q[ne+ce])*ue,be=a),f=f.a,f[0]=y,f[1]=S,f[2]=C,a=j.rm(),Xe=be[0],Ge=be[1],St=be[2],ct=be[3],Mt=Xe+Xe,dt=Ge+Ge,mt=St+St,wn=Xe*Mt,Zt=Xe*dt,_n=Xe*mt,mn=Ge*dt,Xt=Ge*mt,de=St*mt,Ae=ct*Mt,ke=ct*dt,Ie=ct*mt,be=a.a,be[0]=1-(mn+de),be[1]=Zt+Ie,be[2]=_n-ke,be[3]=0,be[4]=Zt-Ie,be[5]=1-(wn+de),be[6]=Xt+Ae,be[7]=0,be[8]=_n+ke,be[9]=Xt-Ae,be[10]=1-(wn+mn),be[11]=0,be[12]=s[0],be[13]=s[1],be[14]=s[2],be[15]=1,y=f[0],S=f[1],C=f[2],be[0]=be[0]*y,be[1]=be[1]*y,be[2]=be[2]*y,be[3]=be[3]*y,be[4]=be[4]*S,be[5]=be[5]*S,be[6]=be[6]*S,be[7]=be[7]*S,be[8]=be[8]*C,be[9]=be[9]*C,be[10]=be[10]*C,be[11]=be[11]*C,be[12]=be[12],be[13]=be[13],be[14]=be[14],be[15]=be[15],Math.abs(a.cJ()-n.cJ())<5e-5)},vv:function(n,s){switch(n){case 5120:return new Int8Array(s);case 5121:return new Uint8Array(s);case 5122:return new Int16Array(s);case 5123:return new Uint16Array(s);case 5124:return new Int32Array(s);case 5125:return new Uint32Array(s);default:throw p.c(E.O(null))}},m3:function(s,a,f){this.a=s,this.b=a,this.c=f},m4:function(s,a,f){this.a=s,this.b=a,this.c=f},m5:function(){},m2:function(){},L:function(s,a,f,g){var y=this;y.a=s,y.b=a,y.c=f,y.$ti=g},Y:function(){},f4:function(s,a){this.a=0,this.b=s,this.c=a},f5:function(s,a){this.a=0,this.b=s,this.c=a},en:function(s){this.a=s}},vt=[_,p,Z,E,ye,Re,Me,pe,ve,Ce,_e,Pe,Te,Oe,ze,He,$,$e,Le,Fe,qe,De,oe];re.setFunctionNamesIfNecessary(vt);var j={};p.mD.prototype={},Z.cz.prototype={N:function(n,s){return n===s},gG:function(n){return p.cj(n)},l:function(n){return"Instance of '"+p.b(p.ju(n))+"'"},bb:function(n,s){throw p.c(E.nS(n,s.gcN(),s.gcR(),s.gcO()))}},Z.dd.prototype={l:function(n){return String(n)},gG:function(n){return n?519018:218159},$iQ:1},Z.cB.prototype={N:function(n,s){return s==null},l:function(n){return"null"},gG:function(n){return 0},bb:function(n,s){return this.d1(n,s)},$ik:1},Z.aF.prototype={gG:function(n){return 0},l:function(n){return String(n)},$ibb:1,$icP:1,gep:function(n){return n.then},cV:function(n,s){return n.then(s)},eq:function(n,s,a){return n.then(s,a)},sey:function(n,s){return n.validateBytes=s},seA:function(n,s){return n.validateString=s},seB:function(n,s){return n.version=s},sd5:function(n,s){return n.supportedExtensions=s},gbd:function(n){return n.uri},gbE:function(n){return n.externalResourceFunction},gc_:function(n){return n.writeTimestamp},gb9:function(n){return n.maxIssues},gb6:function(n){return n.ignoredIssues},gai:function(n){return n.severityOverrides}},Z.eU.prototype={},Z.cl.prototype={},Z.aQ.prototype={l:function(n){var s=n[j.n6()];return s==null?this.d2(n):"JavaScript function for "+p.b(Z.ag(s))},$iaE:1},Z.p.prototype={ae:function(n,s){return new p.b3(n,p.U(n).h("@<1>").D(s).h("b3<1,2>"))},B:function(n,s){n.fixed$length&&p.a2(E.ab("add")),n.push(s)},dI:function(n,s,a){var f,g,y,S=[],C=n.length;for(f=0;f<C;++f)if(g=n[f],s.$1(g)||S.push(g),n.length!==C)throw p.c(E.ad(n));if(y=S.length,y!==C)for(this.si(n,y),f=0;f<S.length;++f)n[f]=S[f]},K:function(n,s){var a;for(n.fixed$length&&p.a2(E.ab("addAll")),a=Z.a_(s);a.n();)n.push(a.gq())},ag:function(n,s,a){return new p.a8(n,s,p.U(n).h("@<1>").D(a).h("a8<1,2>"))},cL:function(n,s){var a,f=E.bt(n.length,"",!1,U.S);for(a=0;a<n.length;++a)f[a]=p.b(n[a]);return f.join(s)},a1:function(n,s){return p.du(n,s,null,p.U(n).c)},b5:function(n,s,a){var f,g,y=n.length;for(f=0;f<y;++f){if(g=n[f],s.$1(g))return g;if(n.length!==y)throw p.c(E.ad(n))}return a.$0()},S:function(n,s){return n[s]},Z:function(n,s,a){if(s<0||s>n.length)throw p.c(E.S(s,0,n.length,"start",null));if(a<s||a>n.length)throw p.c(E.S(a,s,n.length,"end",null));return s===a?p.a([],p.U(n)):p.a(n.slice(s,a),p.U(n))},aM:function(n,s,a){return E.aV(s,a,n.length),p.du(n,s,a,p.U(n).c)},gaH:function(n){var s=n.length;if(s>0)return n[s-1];throw p.c(p.mB())},F:function(n,s){var a;for(a=0;a<n.length;++a)if(Z.aA(n[a],s))return!0;return!1},gu:function(n){return n.length===0},ga3:function(n){return n.length!==0},l:function(n){return E.id(n,"[","]")},aL:function(n,s){var a=Z.eA(n.slice(0),p.U(n).c);return a},bX:function(n){return E.tt(n,p.U(n).c)},gC:function(n){return new Z.aC(n,n.length,p.U(n).h("aC<1>"))},gG:function(n){return p.cj(n)},gi:function(n){return n.length},si:function(n,s){if(n.fixed$length&&p.a2(E.ab("set length")),s<0)throw p.c(E.S(s,0,null,"newLength",null));n.length=s},j:function(n,s){if(s>=n.length||s<0)throw p.c(p.ef(n,s));return n[s]},m:function(n,s,a){if(n.immutable$list&&p.a2(E.ab("indexed set")),s>=n.length||s<0)throw p.c(p.ef(n,s));n[s]=a},$in:1,$ii:1,$il:1},Z.ii.prototype={},Z.aC.prototype={gq:function(){return this.d},n:function(){var n,s=this,a=s.a,f=a.length;if(s.b!==f)throw p.c(p.cs(a));return n=s.c,n>=f?(s.d=null,!1):(s.d=a[n],s.c=n+1,!0)},$iH:1},Z.c5.prototype={cW:function(n){var s;if(n>=-2147483648&&n<=2147483647)return n|0;if(isFinite(n))return s=n<0?Math.ceil(n):Math.floor(n),s+0;throw p.c(E.ab(""+n+".toInt()"))},ap:function(n,s){var a,f,g,y;if(s<2||s>36)throw p.c(E.S(s,2,36,"radix",null));return a=n.toString(s),_.a.A(a,a.length-1)!==41?a:(f=/^([\da-z]+)(?:\.([\da-z]+))?\(e\+(\d+)\)$/.exec(a),f==null&&p.a2(E.ab("Unexpected toString result: "+a)),a=f[1],g=+f[3],y=f[2],y!=null&&(a+=y,g-=y.length),a+_.a.bh("0",g))},l:function(n){return n===0&&1/n<0?"-0.0":""+n},gG:function(n){var s,a,f,g,y=n|0;return n===y?536870911&y:(s=Math.abs(n),a=Math.log(s)/.6931471805599453|0,f=Math.pow(2,a),g=s<1?s/f:f/s,536870911&((g*9007199254740992|0)+(g*3542243181176521|0))*599197+a*1259)},bg:function(n,s){var a=n%s;return a===0?0:a>0?a:s<0?a-s:a+s},aq:function(n,s){return(n|0)===n&&(s>=1||s<-1)?n/s|0:this.cs(n,s)},bA:function(n,s){return(n|0)===n?n/s|0:this.cs(n,s)},cs:function(n,s){var a=n/s;if(a>=-2147483648&&a<=2147483647)return a|0;if(a>0){if(a!==1/0)return Math.floor(a)}else if(a>-1/0)return Math.ceil(a);throw p.c(E.ab("Result of truncating division is "+p.b(a)+": "+p.b(n)+" ~/ "+s))},aA:function(n,s){if(s<0)throw p.c(p.bM(s));return s>31?0:n<<s>>>0},ad:function(n,s){var a;return n>0?a=this.cr(n,s):(a=s>31?31:s,a=n>>a>>>0),a},dL:function(n,s){if(s<0)throw p.c(p.bM(s));return this.cr(n,s)},cr:function(n,s){return s>31?0:n>>>s},$iw:1,$iG:1},Z.de.prototype={$id:1},Z.eB.prototype={},Z.br.prototype={A:function(n,s){if(s<0)throw p.c(p.ef(n,s));return s>=n.length&&p.a2(p.ef(n,s)),n.charCodeAt(s)},H:function(n,s){if(s>=n.length)throw p.c(p.ef(n,s));return n.charCodeAt(s)},ah:function(n,s){if(typeof s!="string")throw p.c(E.nz(s,null,null));return n+s},az:function(n,s,a,f){var g=E.aV(s,a,n.length),y=n.substring(0,s),S=n.substring(g);return y+f+S},U:function(n,s,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=a+s.length,f>n.length?!1:s===n.substring(a,f)},V:function(n,s){return this.U(n,s,0)},t:function(n,s,a){if(a==null&&(a=n.length),s<0||s>a)throw p.c(E.jv(s,null));if(a>n.length)throw p.c(E.jv(a,null));return n.substring(s,a)},bj:function(n,s){return this.t(n,s,null)},ev:function(n){var s,a,f;if(typeof n.trimRight!="undefined"){if(s=n.trimRight(),a=s.length,a===0)return s;f=a-1,this.A(s,f)===133&&(a=Z.nK(s,f))}else a=Z.nK(n,n.length),s=n;return a===s.length?s:a===0?"":s.substring(0,a)},bh:function(n,s){var a,f;if(0>=s)return"";if(s===1||n.length===0)return n;if(s!==s>>>0)throw p.c(_.be);for(a=n,f="";(s&1)==1&&(f=a+f),s=s>>>1,s!==0;)a+=a;return f},am:function(n,s,a){var f=s-n.length;return f<=0?n:this.bh(a,f)+n},b7:function(n,s,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=n.indexOf(s,a),f},bK:function(n,s){return this.b7(n,s,0)},l:function(n){return n},gG:function(n){var s,a,f;for(s=n.length,a=0,f=0;f<s;++f)a=536870911&a+n.charCodeAt(f),a=536870911&a+((524287&a)<<10),a^=a>>6;return a=536870911&a+((67108863&a)<<3),a^=a>>11,536870911&a+((16383&a)<<15)},gi:function(n){return n.length},$if:1},p.bE.prototype={gC:function(n){var s=p.r(this);return new p.d3(Z.a_(this.ga5()),s.h("@<1>").D(s.Q[1]).h("d3<1,2>"))},gi:function(n){return Z.X(this.ga5())},gu:function(n){return Z.nv(this.ga5())},ga3:function(n){return Z.ru(this.ga5())},a1:function(n,s){var a=p.r(this);return p.fP(Z.nw(this.ga5(),s),a.c,a.Q[1])},S:function(n,s){return p.r(this).Q[1].a(Z.eh(this.ga5(),s))},F:function(n,s){return Z.nu(this.ga5(),s)},l:function(n){return Z.ag(this.ga5())}},p.d3.prototype={n:function(){return this.a.n()},gq:function(){return this.$ti.Q[1].a(this.a.gq())},$iH:1},p.bX.prototype={ga5:function(){return this.a}},p.dC.prototype={$in:1},p.dx.prototype={j:function(n,s){return this.$ti.Q[1].a(Z.nt(this.a,s))},m:function(n,s,a){Z.rr(this.a,s,this.$ti.c.a(a))},si:function(n,s){Z.rz(this.a,s)},B:function(n,s){Z.mx(this.a,this.$ti.c.a(s))},aM:function(n,s,a){var f=this.$ti;return p.fP(Z.rx(this.a,s,a),f.c,f.Q[1])},$in:1,$il:1},p.b3.prototype={ae:function(n,s){return new p.b3(this.a,this.$ti.h("@<1>").D(s).h("b3<1,2>"))},ga5:function(){return this.a}},p.bY.prototype={af:function(n,s,a){var f=this.$ti;return new p.bY(this.a,f.h("@<1>").D(f.Q[1]).D(s).D(a).h("bY<1,2,3,4>"))},w:function(n){return this.a.w(n)},j:function(n,s){return this.$ti.h("4?").a(this.a.j(0,s))},m:function(n,s,a){var f=this.$ti;this.a.m(0,f.c.a(s),f.Q[1].a(a))},J:function(n,s){this.a.J(0,new p.fQ(this,s))},gL:function(){var n=this.$ti;return p.fP(this.a.gL(),n.c,n.Q[2])},gi:function(n){var s=this.a;return s.gi(s)},gu:function(n){var s=this.a;return s.gu(s)}},p.fQ.prototype={$2:function(n,s){var a=this.a.$ti;this.b.$2(a.Q[2].a(n),a.Q[3].a(s))},$S:function(){return this.a.$ti.h("k(1,2)")}},p.eD.prototype={l:function(n){var s="LateInitializationError: "+this.a;return s}},p.cu.prototype={gi:function(n){return this.a.length},j:function(n,s){return _.a.A(this.a,s)}},p.n.prototype={},p.af.prototype={gC:function(n){var s=this;return new p.a6(s,s.gi(s),p.r(s).h("a6<af.E>"))},gu:function(n){return this.gi(this)===0},F:function(n,s){var a,f=this,g=f.gi(f);for(a=0;a<g;++a){if(Z.aA(f.S(0,a),s))return!0;if(g!==f.gi(f))throw p.c(E.ad(f))}return!1},ag:function(n,s,a){return new p.a8(this,s,p.r(this).h("@<af.E>").D(a).h("a8<1,2>"))},a1:function(n,s){return p.du(this,s,null,p.r(this).h("af.E"))}},p.dt.prototype={gdj:function(){var n=Z.X(this.a),s=this.c;return s==null||s>n?n:s},gdM:function(){var n=Z.X(this.a),s=this.b;return s>n?n:s},gi:function(n){var s,a=Z.X(this.a),f=this.b;return f>=a?0:(s=this.c,s==null||s>=a?a-f:s-f)},S:function(n,s){var a=this,f=a.gdM()+s;if(s<0||f>=a.gdj())throw p.c(E.ex(s,a,"index",null,null));return Z.eh(a.a,f)},a1:function(n,s){var a,f,g=this;return E.aU(s,"count"),a=g.b+s,f=g.c,f!=null&&a>=f?new p.b6(g.$ti.h("b6<1>")):p.du(g.a,a,f,g.$ti.c)},aL:function(n,s){var a,f,g,y=this,S=y.b,C=y.a,R=Z.M(C),D=R.gi(C),H=y.c;if(H!=null&&H<D&&(D=H),a=D-S,a<=0)return C=Z.ie(0,y.$ti.c),C;for(f=E.bt(a,R.S(C,S),!1,y.$ti.c),g=1;g<a;++g)if(f[g]=R.S(C,S+g),R.gi(C)<D)throw p.c(E.ad(y));return f}},p.a6.prototype={gq:function(){var n=this.d;return n},n:function(){var n,s=this,a=s.a,f=Z.M(a),g=f.gi(a);if(s.b!==g)throw p.c(E.ad(a));return n=s.c,n>=g?(s.d=null,!1):(s.d=f.S(a,n),++s.c,!0)},$iH:1},p.b9.prototype={gC:function(n){var s=p.r(this);return new p.a7(Z.a_(this.a),this.b,s.h("@<1>").D(s.Q[1]).h("a7<1,2>"))},gi:function(n){return Z.X(this.a)},gu:function(n){return Z.nv(this.a)},S:function(n,s){return this.b.$1(Z.eh(this.a,s))}},p.c_.prototype={$in:1},p.a7.prototype={n:function(){var n=this,s=n.b;return s.n()?(n.a=n.c.$1(s.gq()),!0):(n.a=null,!1)},gq:function(){var n=this.a;return n}},p.a8.prototype={gi:function(n){return Z.X(this.a)},S:function(n,s){return this.b.$1(Z.eh(this.a,s))}},p.l_.prototype={gC:function(n){return new p.cm(Z.a_(this.a),this.b,this.$ti.h("cm<1>"))},ag:function(n,s,a){return new p.b9(this,s,this.$ti.h("@<1>").D(a).h("b9<1,2>"))}},p.cm.prototype={n:function(){var n,s;for(n=this.a,s=this.b;n.n();)if(s.$1(n.gq()))return!0;return!1},gq:function(){return this.a.gq()}},p.bc.prototype={a1:function(n,s){return E.aM(s,"count"),E.aU(s,"count"),new p.bc(this.a,this.b+s,p.r(this).h("bc<1>"))},gC:function(n){return new p.dr(Z.a_(this.a),this.b,p.r(this).h("dr<1>"))}},p.cw.prototype={gi:function(n){var s=Z.X(this.a)-this.b;return s>=0?s:0},a1:function(n,s){return E.aM(s,"count"),E.aU(s,"count"),new p.cw(this.a,this.b+s,this.$ti)},$in:1},p.dr.prototype={n:function(){var n,s;for(n=this.a,s=0;s<this.b;++s)n.n();return this.b=0,n.n()},gq:function(){return this.a.gq()}},p.b6.prototype={gC:function(n){return _.Y},gu:function(n){return!0},gi:function(n){return 0},S:function(n,s){throw p.c(E.S(s,0,0,"index",null))},F:function(n,s){return!1},ag:function(n,s,a){return new p.b6(a.h("b6<0>"))},a1:function(n,s){return E.aU(s,"count"),this}},p.d6.prototype={n:function(){return!1},gq:function(){throw p.c(p.mB())},$iH:1},p.d8.prototype={si:function(n,s){throw p.c(E.ab("Cannot change the length of a fixed-length list"))},B:function(n,s){throw p.c(E.ab("Cannot add to a fixed-length list"))}},p.f7.prototype={m:function(n,s,a){throw p.c(E.ab("Cannot modify an unmodifiable list"))},si:function(n,s){throw p.c(E.ab("Cannot change the length of an unmodifiable list"))},B:function(n,s){throw p.c(E.ab("Cannot add to an unmodifiable list"))}},p.cI.prototype={},p.cG.prototype={gG:function(n){var s=this._hashCode;return s!=null||(s=536870911&664597*Z.aL(this.a),this._hashCode=s),s},l:function(n){return'Symbol("'+p.b(this.a)+'")'},N:function(n,s){return s==null?!1:s instanceof p.cG&&this.a==s.a},$icH:1},p.e4.prototype={},p.d4.prototype={},p.cv.prototype={af:function(n,s,a){var f=p.r(this);return E.nP(this,f.c,f.Q[1],s,a)},gu:function(n){return this.gi(this)===0},l:function(n){return E.mG(this)},m:function(n,s,a){p.t2()},$ih:1},p.aq.prototype={gi:function(n){return this.a},w:function(n){return typeof n!="string"||n==="__proto__"?!1:this.b.hasOwnProperty(n)},j:function(n,s){return this.w(s)?this.ce(s):null},ce:function(n){return this.b[n]},J:function(n,s){var a,f,g,y=this.c;for(a=y.length,f=0;f<a;++f)g=y[f],s.$2(g,this.ce(g))},gL:function(){return new p.dz(this,p.r(this).h("dz<1>"))}},p.dz.prototype={gC:function(n){var s=this.a.c;return new Z.aC(s,s.length,p.U(s).h("aC<1>"))},gi:function(n){return this.a.c.length}},p.al.prototype={aD:function(){var n,s=this,a=s.$map;return a==null&&(n=s.$ti,a=new p.aG(n.h("@<1>").D(n.Q[1]).h("aG<1,2>")),p.oU(s.a,a),s.$map=a),a},w:function(n){return this.aD().w(n)},j:function(n,s){return this.aD().j(0,s)},J:function(n,s){this.aD().J(0,s)},gL:function(){var n=this.aD();return new p.au(n,p.r(n).h("au<1>"))},gi:function(n){return this.aD().a}},p.ig.prototype={gcN:function(){var n=this.a;return n},gcR:function(){var n,s,a,f,g=this;if(g.c===1||(n=g.d,s=n.length-g.e.length-g.f,s===0))return _.ai;for(a=[],f=0;f<s;++f)a.push(n[f]);return a.fixed$length=Array,a.immutable$list=Array,a},gcO:function(){var n,s,a,f,g,y,S=this;if(S.c!==0||(n=S.e,s=n.length,a=S.d,f=a.length-s-S.f,s===0))return _.ap;for(g=new p.aG(U.eo),y=0;y<s;++y)g.m(0,new p.cG(n[y]),a[f+y]);return new p.d4(g,U.gF)}},p.jt.prototype={$2:function(n,s){var a=this.a;a.b=a.b+"$"+p.b(n),this.b.push(n),this.c.push(s),++a.a},$S:42},p.kJ.prototype={a4:function(n){var s,a,f=this,g=new RegExp(f.a).exec(n);return g==null?null:(s=Object.create(null),a=f.b,a!==-1&&(s.arguments=g[a+1]),a=f.c,a!==-1&&(s.argumentsExpr=g[a+1]),a=f.d,a!==-1&&(s.expr=g[a+1]),a=f.e,a!==-1&&(s.method=g[a+1]),a=f.f,a!==-1&&(s.receiver=g[a+1]),s)}},p.eQ.prototype={l:function(n){var s=this.b;return s==null?"NoSuchMethodError: "+p.b(this.a):"NoSuchMethodError: method not found: '"+s+"' on null"}},p.eC.prototype={l:function(n){var s,a=this,f="NoSuchMethodError: method not found: '",g=a.b;return g==null?"NoSuchMethodError: "+p.b(a.a):(s=a.c,s==null?f+g+"' ("+p.b(a.a)+")":f+g+"' on '"+s+"' ("+p.b(a.a)+")")}},p.f6.prototype={l:function(n){var s=this.a;return s.length===0?"Error":"Error: "+s}},p.eS.prototype={l:function(n){return"Throw of null ('"+(this.a===null?"null":"undefined")+"' from JavaScript)"},$ia3:1},p.d7.prototype={},p.dS.prototype={l:function(n){var s,a=this.b;return a!=null?a:(a=this.a,s=a!==null&&typeof a=="object"?a.stack:null,this.b=s==null?"":s)},$iam:1},p.bZ.prototype={l:function(n){var s=this.constructor,a=s==null?null:s.name;return"Closure '"+p.pd(a==null?"unknown":a)+"'"},$iaE:1,geC:function(){return this},$C:"$1",$R:1,$D:null},p.f1.prototype={},p.f_.prototype={l:function(n){var s=this.$static_name;return s==null?"Closure of unknown static method":"Closure '"+p.pd(s)+"'"}},p.ct.prototype={N:function(n,s){var a=this;return s==null?!1:a===s?!0:s instanceof p.ct?a.a===s.a&&a.b===s.b&&a.c===s.c:!1},gG:function(n){var s,a=this.c;return a==null?s=p.cj(this.a):s=typeof a!="object"?Z.aL(a):p.cj(a),(s^p.cj(this.b))>>>0},l:function(n){var s=this.c;return s==null&&(s=this.a),"Closure '"+p.b(this.d)+"' of "+("Instance of '"+p.b(p.ju(s))+"'")}},p.eZ.prototype={l:function(n){return"RuntimeError: "+this.a}},p.lA.prototype={},p.aG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new p.au(this,p.r(this).h("au<1>"))},gab:function(){var n=p.r(this);return p.ja(new p.au(this,n.h("au<1>")),new p.im(this),n.c,n.Q[1])},w:function(n){var s,a,f=this;return typeof n=="string"?(s=f.b,s==null?!1:f.cc(s,n)):typeof n=="number"&&(n&67108863)===n?(a=f.c,a==null?!1:f.cc(a,n)):f.e5(n)},e5:function(n){var s=this.d;return s==null?!1:this.bL(this.bu(s,Z.aL(n)&67108863),n)>=0},j:function(n,s){var a,f,g,y,S=this,C=null;return typeof s=="string"?(a=S.b,a==null?C:(f=S.aW(a,s),g=f==null?C:f.b,g)):typeof s=="number"&&(s&67108863)===s?(y=S.c,y==null?C:(f=S.aW(y,s),g=f==null?C:f.b,g)):S.e6(s)},e6:function(n){var s,a,f=this.d;return f==null||(s=this.bu(f,Z.aL(n)&67108863),a=this.bL(s,n),a<0)?null:s[a].b},m:function(n,s,a){var f,g,y,S,C,R,D=this;typeof s=="string"?(f=D.b,D.c2(f==null?D.b=D.bx():f,s,a)):typeof s=="number"&&(s&67108863)===s?(g=D.c,D.c2(g==null?D.c=D.bx():g,s,a)):(y=D.d,y==null&&(y=D.d=D.bx()),S=Z.aL(s)&67108863,C=D.bu(y,S),C==null?D.bz(y,S,[D.by(s,a)]):(R=D.bL(C,s),R>=0?C[R].b=a:C.push(D.by(s,a))))},bS:function(n,s){var a;return this.w(n)?this.j(0,n):(a=s.$0(),this.m(0,n,a),a)},J:function(n,s){for(var a=this,f=a.e,g=a.r;f!=null;){if(s.$2(f.a,f.b),g!==a.r)throw p.c(E.ad(a));f=f.c}},c2:function(n,s,a){var f=this.aW(n,s);f==null?this.bz(n,s,this.by(s,a)):f.b=a},by:function(n,s){var a=this,f=new p.j7(n,s);return a.e==null?a.e=a.f=f:a.f=a.f.c=f,++a.a,a.r=a.r+1&67108863,f},bL:function(n,s){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(Z.aA(n[f].a,s))return f;return-1},l:function(n){return E.mG(this)},aW:function(n,s){return n[s]},bu:function(n,s){return n[s]},bz:function(n,s,a){n[s]=a},di:function(n,s){delete n[s]},cc:function(n,s){return this.aW(n,s)!=null},bx:function(){var n="<non-identifier-key>",s=Object.create(null);return this.bz(s,n,s),this.di(s,n),s}},p.im.prototype={$1:function(n){return this.a.j(0,n)},$S:function(){return p.r(this.a).h("2(1)")}},p.j7.prototype={},p.au.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var s=this.a,a=new p.df(s,s.r,this.$ti.h("df<1>"));return a.c=s.e,a},F:function(n,s){return this.a.w(s)}},p.df.prototype={gq:function(){return this.d},n:function(){var n,s=this,a=s.a;if(s.b!==a.r)throw p.c(E.ad(a));return n=s.c,n==null?(s.d=null,!1):(s.d=n.a,s.c=n.c,!0)},$iH:1},p.m9.prototype={$1:function(n){return this.a(n)},$S:33},p.ma.prototype={$2:function(n,s){return this.a(n,s)},$S:62},p.mb.prototype={$1:function(n){return this.a(n)},$S:83},p.ih.prototype={l:function(n){return"RegExp/"+this.a+"/"+this.b.flags},aG:function(n){var s;return typeof n!="string"&&p.a2(p.bM(n)),s=this.b.exec(n),s==null?null:new p.ly(s)}},p.ly.prototype={},p.dm.prototype={dv:function(n,s,a,f){var g=E.S(s,0,a,f,null);throw p.c(g)},c8:function(n,s,a,f){(s>>>0!==s||s>a)&&this.dv(n,s,a,f)}},p.cE.prototype={gi:function(n){return n.length},dJ:function(n,s,a,f,g){var y,S,C=n.length;if(this.c8(n,s,C,"start"),this.c8(n,a,C,"end"),s>a)throw p.c(E.S(s,0,a,null,null));if(y=a-s,g<0)throw p.c(E.O(g));if(S=f.length,S-g<y)throw p.c(E.cF("Not enough elements"));(g!==0||S!==y)&&(f=f.subarray(g,g+y)),n.set(f,s)},$iat:1},p.dl.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},m:function(n,s,a){p.bf(s,n,n.length),n[s]=a},$in:1,$ii:1,$il:1},p.av.prototype={m:function(n,s,a){p.bf(s,n,n.length),n[s]=a},a0:function(n,s,a,f,g){if(U.eB.b(f)){this.dJ(n,s,a,f,g);return}this.d3(n,s,a,f,g)},d0:function(n,s,a,f){return this.a0(n,s,a,f,0)},$in:1,$ii:1,$il:1},p.dk.prototype={Z:function(n,s,a){return new Float32Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eI.prototype={Z:function(n,s,a){return new Float64Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eJ.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Int16Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eK.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Int32Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eL.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Int8Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eM.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Uint16Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.eN.prototype={j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Uint32Array(n.subarray(s,p.bJ(s,a,n.length)))}},p.dn.prototype={gi:function(n){return n.length},j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Uint8ClampedArray(n.subarray(s,p.bJ(s,a,n.length)))}},p.cf.prototype={gi:function(n){return n.length},j:function(n,s){return p.bf(s,n,n.length),n[s]},Z:function(n,s,a){return new Uint8Array(n.subarray(s,p.bJ(s,a,n.length)))},$icf:1,$iaa:1},p.dO.prototype={},p.dP.prototype={},p.dQ.prototype={},p.dR.prototype={},p.aI.prototype={h:function(n){return p.fv(Je.typeUniverse,this,n)},D:function(n){return p.ui(Je.typeUniverse,this,n)}},p.fj.prototype={},p.dX.prototype={l:function(n){return p.az(this.a,null)},$ibC:1},p.fi.prototype={l:function(n){return this.a}},p.dY.prototype={},E.lb.prototype={$1:function(n){var s=this.a,a=s.a;s.a=null,a.$0()},$S:13},E.la.prototype={$1:function(n){var s,a;this.a.a=n,s=this.b,a=this.c,s.firstChild?s.removeChild(a):s.appendChild(a)},$S:58},E.lc.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.ld.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.lG.prototype={d6:function(n,s){if(t.setTimeout!=null)t.setTimeout(p.m0(new E.lH(this,s),0),n);else throw p.c(E.ab("`setTimeout()` not found."))}},E.lH.prototype={$0:function(){this.b.$0()},$C:"$0",$R:0,$S:1},E.fc.prototype={T:function(n){var s,a=this;a.b?(s=a.a,a.$ti.h("ae<1>").b(n)?s.c6(n):s.ca(n)):a.a.bk(n)},bD:function(n,s){var a;s==null&&(s=E.el(n)),a=this.a,this.b?a.aB(n,s):a.aT(n,s)}},E.lK.prototype={$1:function(n){return this.a.$2(0,n)},$S:116},E.lL.prototype={$2:function(n,s){this.a.$2(1,new p.d7(n,s))},$C:"$2",$R:2,$S:31},E.m_.prototype={$2:function(n,s){this.a(n,s)},$S:32},E.cO.prototype={l:function(n){return"IterationMarker("+this.b+", "+p.b(this.a)+")"}},E.aB.prototype={gq:function(){var n=this.c;return n==null?this.b:n.gq()},n:function(){for(var n,s,a,f,g,y=this;;){if(n=y.c,n!=null){if(n.n())return!0;y.c=null}if(s=function(S,C,R){for(var D,H=C;;)try{return S(H,D)}catch(q){D=q,H=R}}(y.a,0,1),s instanceof E.cO)if(a=s.b,a===2){if(f=y.d,f==null||f.length===0)return y.b=null,!1;y.a=f.pop();continue}else{if(n=s.a,a===3)throw n;if(g=Z.a_(n),g instanceof E.aB){n=y.d,n==null&&(n=y.d=[]),n.push(y.a),y.a=g.a;continue}else{y.c=g;continue}}else return y.b=s,!0}return!1},$iH:1},E.dW.prototype={gC:function(n){return new E.aB(this.a(),this.$ti.h("aB<1>"))}},E.ff.prototype={bD:function(n,s){var a;if(E.aM(n,"error"),a=this.a,a.a!==0)throw p.c(E.cF("Future already completed"));s==null&&(s=E.el(n)),a.aT(n,s)},M:function(n){return this.bD(n,null)}},E.ax.prototype={T:function(n){var s=this.a;if(s.a!==0)throw p.c(E.cF("Future already completed"));s.bk(n)},b3:function(){return this.T(null)}},E.cM.prototype={ea:function(n){return(this.c&15)!=6?!0:this.b.b.bW(this.d,n.a)},e2:function(n){var s=this.e,a=this.b.b;return U.Q.b(s)?a.ej(s,n.a,n.b):a.bW(s,n.a)}},E.C.prototype={ao:function(n,s,a,f){var g,y=j.x;return y!==_.f&&(a=a!=null?E.v4(a,y):a),g=new E.C(j.x,f.h("C<0>")),this.aR(new E.cM(g,a==null?1:3,s,a)),g},cV:function(n,s,a){return this.ao(n,s,null,a)},cu:function(n,s,a){var f=new E.C(j.x,a.h("C<0>"));return this.aR(new E.cM(f,19,n,s)),f},be:function(n){var s=new E.C(j.x,this.$ti);return this.aR(new E.cM(s,8,n,null)),s},dK:function(n){this.a=4,this.c=n},aR:function(n){var s,a=this,f=a.a;if(f<=1)n.a=a.c,a.c=n;else{if(f===2){if(f=a.c,s=f.a,s<4){f.aR(n);return}a.a=s,a.c=f.c}E.cZ(null,null,a.b,new E.li(a,n))}},co:function(n){var s,a,f,g,y,S,C=this,R={};if(R.a=n,n!=null)if(s=C.a,s<=1){if(a=C.c,C.c=n,a!=null){for(f=n.a,g=n;f!=null;g=f,f=y)y=f.a;g.a=a}}else{if(s===2){if(s=C.c,S=s.a,S<4){s.co(n);return}C.a=S,C.c=s.c}R.a=C.b2(n),E.cZ(null,null,C.b,new E.lq(R,C))}},b1:function(){var n=this.c;return this.c=null,this.b2(n)},b2:function(n){var s,a,f;for(s=n,a=null;s!=null;a=s,s=f)f=s.a,s.a=a;return a},c9:function(n){var s,a=this,f=a.$ti;f.h("ae<1>").b(n)?f.b(n)?E.ll(n,a):E.ol(n,a):(s=a.b1(),a.a=4,a.c=n,E.cN(a,s))},ca:function(n){var s=this,a=s.b1();s.a=4,s.c=n,E.cN(s,a)},aB:function(n,s){var a=this,f=a.b1(),g=E.fK(n,s);a.a=8,a.c=g,E.cN(a,f)},bk:function(n){if(this.$ti.h("ae<1>").b(n)){this.c6(n);return}this.d9(n)},d9:function(n){this.a=1,E.cZ(null,null,this.b,new E.lk(this,n))},c6:function(n){var s=this;if(s.$ti.b(n)){n.a===8?(s.a=1,E.cZ(null,null,s.b,new E.lp(s,n))):E.ll(n,s);return}E.ol(n,s)},aT:function(n,s){this.a=1,E.cZ(null,null,this.b,new E.lj(this,n,s))},$iae:1},E.li.prototype={$0:function(){E.cN(this.a,this.b)},$S:2},E.lq.prototype={$0:function(){E.cN(this.b,this.a.a)},$S:2},E.lm.prototype={$1:function(n){var s=this.a;s.a=0,s.c9(n)},$S:13},E.ln.prototype={$2:function(n,s){this.a.aB(n,s)},$C:"$2",$R:2,$S:41},E.lo.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lk.prototype={$0:function(){this.a.ca(this.b)},$S:2},E.lp.prototype={$0:function(){E.ll(this.b,this.a)},$S:2},E.lj.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lt.prototype={$0:function(){var n,s,a,f,g,y=this,S=null;try{a=y.a.a,S=a.b.b.cS(a.d)}catch(C){n=p.E(C),s=p.aK(C),y.c?(a=y.b.a.c.a,f=n,f=a==null?f==null:a===f,a=f):a=!1,f=y.a,a?f.c=y.b.a.c:f.c=E.fK(n,s),f.b=!0;return}if(S instanceof E.C&&S.a>=4){S.a===8&&(a=y.a,a.c=S.c,a.b=!0);return}U.c.b(S)&&(g=y.b.a,a=y.a,a.c=Z.rF(S,new E.lu(g),U.z),a.b=!1)},$S:1},E.lu.prototype={$1:function(n){return this.a},$S:47},E.ls.prototype={$0:function(){var n,s,a,f;try{a=this.a,f=a.a,a.c=f.b.b.bW(f.d,this.b)}catch(g){n=p.E(g),s=p.aK(g),a=this.a,a.c=E.fK(n,s),a.b=!0}},$S:1},E.lr.prototype={$0:function(){var n,s,a,f,g,y,S,C=this;try{n=C.a.a.c,f=C.b,f.a.ea(n)&&f.a.e!=null&&(f.c=f.a.e2(n),f.b=!1)}catch(R){s=p.E(R),a=p.aK(R),f=C.a.a.c,g=f.a,y=s,S=C.b,(g==null?y==null:g===y)?S.c=f:S.c=E.fK(s,a),S.b=!0}},$S:1},E.fd.prototype={},E.aW.prototype={gi:function(n){var s={},a=new E.C(j.x,U.fJ);return s.a=0,this.bN(new E.kF(s,this),!0,new E.kG(s,a),a.gde()),a}},E.kC.prototype={$1:function(n){var s=this.a;s.aS(n),s.aU()},$S:function(){return this.b.h("k(0)")}},E.kD.prototype={$2:function(n,s){var a=this.a;a.aQ(n,s),a.aU()},$C:"$2",$R:2,$S:48},E.kE.prototype={$0:function(){var n=this.a;return new E.dL(new Z.aC(n,1,p.U(n).h("aC<1>")))},$S:function(){return this.b.h("dL<0>()")}},E.kF.prototype={$1:function(n){++this.a.a},$S:function(){return p.r(this.b).h("k(1)")}},E.kG.prototype={$0:function(){this.b.c9(this.a.a)},$C:"$0",$R:0,$S:2},E.f0.prototype={},E.cS.prototype={gdE:function(){return(this.b&8)==0?this.a:this.a.gbZ()},aV:function(){var n,s=this;return(s.b&8)==0?(n=s.a,n==null?s.a=new E.dU:n):(n=s.a.gbZ(),n)},gau:function(){var n=this.a;return(this.b&8)!=0?n.gbZ():n},bl:function(){return(this.b&4)!=0?new E.bz("Cannot add event after closing"):new E.bz("Cannot add event while adding a stream")},cd:function(){var n=this.c;return n==null&&(n=this.c=(this.b&2)!=0?j.fC():new E.C(j.x,U.D)),n},B:function(n,s){if(this.b>=4)throw p.c(this.bl());this.aS(s)},a2:function(){var n=this,s=n.b;if((s&4)!=0)return n.cd();if(s>=4)throw p.c(n.bl());return n.aU(),n.cd()},aU:function(){var n=this.b|=4;(n&1)!=0?this.as():(n&3)==0&&this.aV().B(0,_.G)},aS:function(n){var s=this.b;(s&1)!=0?this.ak(n):(s&3)==0&&this.aV().B(0,new E.cn(n))},aQ:function(n,s){var a=this.b;(a&1)!=0?this.at(n,s):(a&3)==0&&this.aV().B(0,new E.dB(n,s))},dN:function(n,s,a,f){var g,y,S,C,R,D,H=this;if((H.b&3)!=0)throw p.c(E.cF("Stream has already been listened to."));return g=j.x,y=f?1:0,S=E.oj(g,s),C=new E.dA(H,n,S,a,g,y),R=H.gdE(),g=H.b|=1,(g&8)!=0?(D=H.a,D.sbZ(C),D.an()):H.a=C,C.cq(R),C.bv(new E.lF(H)),C},dG:function(n){var s,a,f,g,y,S,C=this,R=null;if((C.b&8)!=0&&(R=C.a.I()),C.a=null,C.b=C.b&4294967286|2,s=C.r,s!=null)if(R==null)try{a=s.$0(),U.bq.b(a)&&(R=a)}catch(D){f=p.E(D),g=p.aK(D),y=new E.C(j.x,U.D),y.aT(f,g),R=y}else R=R.be(s);return S=new E.lE(C),R!=null?R=R.be(S):S.$0(),R}},E.lF.prototype={$0:function(){E.mV(this.a.d)},$S:2},E.lE.prototype={$0:function(){var n=this.a.c;n!=null&&n.a===0&&n.bk(null)},$S:1},E.fs.prototype={ak:function(n){this.gau().aS(n)},at:function(n,s){this.gau().aQ(n,s)},as:function(){this.gau().dd()}},E.fe.prototype={ak:function(n){this.gau().ar(new E.cn(n))},at:function(n,s){this.gau().ar(new E.dB(n,s))},as:function(){this.gau().ar(_.G)}},E.bD.prototype={},E.cT.prototype={},E.an.prototype={br:function(n,s,a,f){return this.a.dN(n,s,a,f)},gG:function(n){return(p.cj(this.a)^892482866)>>>0},N:function(n,s){return s==null?!1:this===s?!0:s instanceof E.an&&s.a===this.a}},E.dA.prototype={cl:function(){return this.x.dG(this)},b_:function(){var n=this.x;(n.b&8)!=0&&n.a.aK(),E.mV(n.e)},b0:function(){var n=this.x;(n.b&8)!=0&&n.a.an(),E.mV(n.f)}},E.cK.prototype={cq:function(n){var s=this;n!=null&&(s.r=n,n.gu(n)||(s.e=(s.e|64)>>>0,n.aO(s)))},cQ:function(n){var s,a,f=this,g=f.e;(g&8)==0&&(s=(g+128|4)>>>0,f.e=s,g<128&&(a=f.r,a!=null&&a.a===1&&(a.a=3)),(g&4)==0&&(s&32)==0&&f.bv(f.gcm()))},aK:function(){return this.cQ(null)},an:function(){var n=this,s=n.e;(s&8)==0&&s>=128&&(s=n.e=s-128,s<128&&((s&64)!=0?(s=n.r,s=!s.gu(s)):s=!1,s?n.r.aO(n):(s=(n.e&4294967291)>>>0,n.e=s,(s&32)==0&&n.bv(n.gcn()))))},I:function(){var n=this,s=(n.e&4294967279)>>>0;return n.e=s,(s&8)==0&&n.bm(),s=n.f,s==null?j.fC():s},bm:function(){var n,s=this,a=s.e=(s.e|8)>>>0;(a&64)!=0&&(n=s.r,n.a===1&&(n.a=3)),(a&32)==0&&(s.r=null),s.f=s.cl()},aS:function(n){var s=this.e;(s&8)==0&&(s<32?this.ak(n):this.ar(new E.cn(n)))},aQ:function(n,s){var a=this.e;(a&8)==0&&(a<32?this.at(n,s):this.ar(new E.dB(n,s)))},dd:function(){var n=this,s=n.e;(s&8)==0&&(s=(s|2)>>>0,n.e=s,s<32?n.as():n.ar(_.G))},b_:function(){},b0:function(){},cl:function(){return null},ar:function(n){var s,a=this,f=a.r;f==null&&(f=new E.dU),a.r=f,f.B(0,n),s=a.e,(s&64)==0&&(s=(s|64)>>>0,a.e=s,s<128&&f.aO(a))},ak:function(n){var s=this,a=s.e;s.e=(a|32)>>>0,s.d.cU(s.a,n),s.e=(s.e&4294967263)>>>0,s.bn((a&4)!=0)},at:function(n,s){var a,f=this,g=f.e,y=new E.lg(f,n,s);(g&1)!=0?(f.e=(g|16)>>>0,f.bm(),a=f.f,a!=null&&a!==j.fC()?a.be(y):y.$0()):(y.$0(),f.bn((g&4)!=0))},as:function(){var n,s=this,a=new E.lf(s);s.bm(),s.e=(s.e|16)>>>0,n=s.f,n!=null&&n!==j.fC()?n.be(a):a.$0()},bv:function(n){var s=this,a=s.e;s.e=(a|32)>>>0,n.$0(),s.e=(s.e&4294967263)>>>0,s.bn((a&4)!=0)},bn:function(n){var s,a,f=this;for((f.e&64)!=0?(s=f.r,s=s.gu(s)):s=!1,s&&(s=f.e=(f.e&4294967231)>>>0,(s&4)!=0&&s<128?(s=f.r,s=s==null?null:s.gu(s),s=s!==!1):s=!1,s&&(f.e=(f.e&4294967291)>>>0));;n=a){if(s=f.e,(s&8)!=0){f.r=null;return}if(a=(s&4)!=0,n===a)break;f.e=(s^32)>>>0,a?f.b_():f.b0(),f.e=(f.e&4294967263)>>>0}s=f.e,(s&64)!=0&&s<128&&f.r.aO(f)}},E.lg.prototype={$0:function(){var n,s,a=this.a,f=a.e;(f&8)!=0&&(f&16)==0||(a.e=(f|32)>>>0,n=a.b,f=this.b,s=a.d,U.k.b(n)?s.em(n,f,this.c):s.cU(n,f),a.e=(a.e&4294967263)>>>0)},$S:1},E.lf.prototype={$0:function(){var n=this.a,s=n.e;(s&16)!=0&&(n.e=(s|42)>>>0,n.d.cT(n.c),n.e=(n.e&4294967263)>>>0)},$S:1},E.dT.prototype={bN:function(n,s,a,f){return this.br(n,f,a,s===!0)},bM:function(n,s,a){return this.bN(n,null,s,a)},e8:function(n,s){return this.bN(n,null,s,null)},br:function(n,s,a,f){return E.oi(n,s,a,f)}},E.dE.prototype={br:function(n,s,a,f){var g;if(this.b)throw p.c(E.cF("Stream has already been listened to."));return this.b=!0,g=E.oi(n,s,a,f),g.cq(this.a.$0()),g}},E.dL.prototype={gu:function(n){return this.b==null},cG:function(n){var s,a,f,g=this.b;if(g==null)throw p.c(E.cF("No events pending."));s=!1;try{g.n()?(s=!0,n.ak(g.gq())):(this.b=null,n.as())}catch(y){a=p.E(y),f=p.aK(y),s||(this.b=_.Y),n.at(a,f)}}},E.fh.prototype={gay:function(){return this.a},say:function(n){return this.a=n}},E.cn.prototype={bQ:function(n){n.ak(this.b)}},E.dB.prototype={bQ:function(n){n.at(this.b,this.c)}},E.lh.prototype={bQ:function(n){n.as()},gay:function(){return null},say:function(n){throw p.c(E.cF("No events after a done."))}},E.fn.prototype={aO:function(n){var s=this,a=s.a;if(a!==1){if(a>=1){s.a=1;return}E.p9(new E.lz(s,n)),s.a=1}}},E.lz.prototype={$0:function(){var n=this.a,s=n.a;n.a=0,s!==3&&n.cG(this.b)},$S:2},E.dU.prototype={gu:function(n){return this.c==null},B:function(n,s){var a=this,f=a.c;f==null?a.b=a.c=s:(f.say(s),a.c=s)},cG:function(n){var s=this.b,a=s.gay();this.b=a,a==null&&(this.c=null),s.bQ(n)}},E.fq.prototype={},E.ek.prototype={l:function(n){return p.b(this.a)},$iF:1,gaP:function(){return this.b}},E.lJ.prototype={},E.lY.prototype={$0:function(){var n=p.c(this.a);throw n.stack=Z.ag(this.b),n},$S:2},E.lB.prototype={cT:function(n){var s,a,f=null;try{if(_.f===j.x){n.$0();return}E.oL(f,f,this,n)}catch(g){s=p.E(g),a=p.aK(g),E.cY(f,f,this,s,a)}},eo:function(n,s){var a,f,g=null;try{if(_.f===j.x){n.$1(s);return}E.oN(g,g,this,n,s)}catch(y){a=p.E(y),f=p.aK(y),E.cY(g,g,this,a,f)}},cU:function(n,s){return this.eo(n,s,U.z)},el:function(n,s,a){var f,g,y=null;try{if(_.f===j.x){n.$2(s,a);return}E.oM(y,y,this,n,s,a)}catch(S){f=p.E(S),g=p.aK(S),E.cY(y,y,this,f,g)}},em:function(n,s,a){return this.el(n,s,a,U.z,U.z)},dQ:function(n,s){return new E.lD(this,n,s)},cw:function(n){return new E.lC(this,n)},ei:function(n){return j.x===_.f?n.$0():E.oL(null,null,this,n)},cS:function(n){return this.ei(n,U.z)},en:function(n,s){return j.x===_.f?n.$1(s):E.oN(null,null,this,n,s)},bW:function(n,s){return this.en(n,s,U.z,U.z)},ek:function(n,s,a){return j.x===_.f?n.$2(s,a):E.oM(null,null,this,n,s,a)},ej:function(n,s,a){return this.ek(n,s,a,U.z,U.z,U.z)},ef:function(n){return n},bV:function(n){return this.ef(n,U.z,U.z,U.z)}},E.lD.prototype={$0:function(){return this.a.cS(this.b)},$S:function(){return this.c.h("0()")}},E.lC.prototype={$0:function(){return this.a.cT(this.b)},$S:1},E.dG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new E.dH(this,this.$ti.h("dH<1>"))},w:function(n){var s,a;return typeof n=="string"&&n!=="__proto__"?(s=this.b,s==null?!1:s[n]!=null):typeof n=="number"&&(n&1073741823)===n?(a=this.c,a==null?!1:a[n]!=null):this.dh(n)},dh:function(n){var s=this.d;return s==null?!1:this.aj(this.cf(s,n),n)>=0},j:function(n,s){var a,f,g;return typeof s=="string"&&s!=="__proto__"?(a=this.b,f=a==null?null:E.om(a,s),f):typeof s=="number"&&(s&1073741823)===s?(g=this.c,f=g==null?null:E.om(g,s),f):this.dl(s)},dl:function(n){var s,a,f=this.d;return f==null?null:(s=this.cf(f,n),a=this.aj(s,n),a<0?null:s[a+1])},m:function(n,s,a){var f,g,y,S,C,R=this;typeof s=="string"&&s!=="__proto__"?(f=R.b,R.d8(f==null?R.b=E.on():f,s,a)):(g=R.d,g==null&&(g=R.d=E.on()),y=p.p4(s)&1073741823,S=g[y],S==null?(E.mK(g,y,[s,a]),++R.a,R.e=null):(C=R.aj(S,s),C>=0?S[C+1]=a:(S.push(s,a),++R.a,R.e=null)))},J:function(n,s){var a,f,g,y=this,S=y.cb();for(a=S.length,f=0;f<a;++f)if(g=S[f],s.$2(g,y.j(0,g)),S!==y.e)throw p.c(E.ad(y))},cb:function(){var n,s,a,f,g,y,S,C,R,D,H=this,q=H.e;if(q!=null)return q;if(q=E.bt(H.a,null,!1,U.z),n=H.b,n!=null)for(s=Object.getOwnPropertyNames(n),a=s.length,f=0,g=0;g<a;++g)q[f]=s[g],++f;else f=0;if(y=H.c,y!=null)for(s=Object.getOwnPropertyNames(y),a=s.length,g=0;g<a;++g)q[f]=+s[g],++f;if(S=H.d,S!=null)for(s=Object.getOwnPropertyNames(S),a=s.length,g=0;g<a;++g)for(C=S[s[g]],R=C.length,D=0;D<R;D+=2)q[f]=C[D],++f;return H.e=q},d8:function(n,s,a){n[s]==null&&(++this.a,this.e=null),E.mK(n,s,a)},cf:function(n,s){return n[p.p4(s)&1073741823]}},E.dJ.prototype={aj:function(n,s){var a,f,g;if(n==null)return-1;for(a=n.length,f=0;f<a;f+=2)if(g=n[f],g==null?s==null:g===s)return f;return-1}},E.dH.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var s=this.a;return new E.dI(s,s.cb(),this.$ti.h("dI<1>"))},F:function(n,s){return this.a.w(s)}},E.dI.prototype={gq:function(){return this.d},n:function(){var n=this,s=n.b,a=n.c,f=n.a;if(s!==f.e)throw p.c(E.ad(f));return a>=s.length?(n.d=null,!1):(n.d=s[a],n.c=a+1,!0)},$iH:1},E.aZ.prototype={gC:function(n){var s=this,a=new E.dM(s,s.r,p.r(s).h("dM<1>"));return a.c=s.e,a},gi:function(n){return this.a},gu:function(n){return this.a===0},ga3:function(n){return this.a!==0},F:function(n,s){var a,f;return typeof s=="string"&&s!=="__proto__"?(a=this.b,a==null?!1:a[s]!=null):typeof s=="number"&&(s&1073741823)===s?(f=this.c,f==null?!1:f[s]!=null):this.dg(s)},dg:function(n){var s=this.d;return s==null?!1:this.aj(s[this.bp(n)],n)>=0},B:function(n,s){var a,f,g=this;return typeof s=="string"&&s!=="__proto__"?(a=g.b,g.c4(a==null?g.b=E.mL():a,s)):typeof s=="number"&&(s&1073741823)===s?(f=g.c,g.c4(f==null?g.c=E.mL():f,s)):g.d7(s)},d7:function(n){var s,a,f=this,g=f.d;if(g==null&&(g=f.d=E.mL()),s=f.bp(n),a=g[s],a==null)g[s]=[f.bo(n)];else{if(f.aj(a,n)>=0)return!1;a.push(f.bo(n))}return!0},eg:function(n,s){var a=this;return typeof s=="string"&&s!=="__proto__"?a.cp(a.b,s):typeof s=="number"&&(s&1073741823)===s?a.cp(a.c,s):a.dH(s)},dH:function(n){var s,a,f,g,y=this,S=y.d;return S==null||(s=y.bp(n),a=S[s],f=y.aj(a,n),f<0)?!1:(g=a.splice(f,1)[0],a.length===0&&delete S[s],y.cv(g),!0)},dk:function(n,s){for(var a,f,g,y,S=this,C=S.e;C!=null;C=f){if(a=C.a,f=C.b,g=S.r,y=n.$1(a),g!==S.r)throw p.c(E.ad(S));y===!1&&S.eg(0,a)}},cz:function(n){var s=this;s.a>0&&(s.b=s.c=s.d=s.e=s.f=null,s.a=0,s.bw())},c4:function(n,s){return n[s]!=null?!1:(n[s]=this.bo(s),!0)},cp:function(n,s){var a;return n==null||(a=n[s],a==null)?!1:(this.cv(a),delete n[s],!0)},bw:function(){this.r=1073741823&this.r+1},bo:function(n){var s,a=this,f=new E.lx(n);return a.e==null?a.e=a.f=f:(s=a.f,s.toString,f.c=s,a.f=s.b=f),++a.a,a.bw(),f},cv:function(n){var s=this,a=n.c,f=n.b;a==null?s.e=f:a.b=f,f==null?s.f=a:f.c=a,--s.a,s.bw()},bp:function(n){return Z.aL(n)&1073741823},aj:function(n,s){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(Z.aA(n[f].a,s))return f;return-1}},E.lx.prototype={},E.dM.prototype={gq:function(){return this.d},n:function(){var n=this,s=n.c,a=n.a;if(n.b!==a.r)throw p.c(E.ad(a));return s==null?(n.d=null,!1):(n.d=s.a,n.c=s.b,!0)},$iH:1},E.aX.prototype={ae:function(n,s){return new E.aX(Z.my(this.a,s),s.h("aX<0>"))},gi:function(n){return Z.X(this.a)},j:function(n,s){return Z.eh(this.a,s)}},E.dc.prototype={},E.dg.prototype={$in:1,$ii:1,$il:1},E.m.prototype={gC:function(n){return new p.a6(n,this.gi(n),p.ac(n).h("a6<m.E>"))},S:function(n,s){return this.j(n,s)},gu:function(n){return this.gi(n)===0},ga3:function(n){return!this.gu(n)},gcF:function(n){if(this.gi(n)===0)throw p.c(p.mB());return this.j(n,0)},F:function(n,s){var a,f=this.gi(n);for(a=0;a<f;++a){if(Z.aA(this.j(n,a),s))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},b4:function(n,s){var a,f=this.gi(n);for(a=0;a<f;++a){if(!s.$1(this.j(n,a)))return!1;if(f!==this.gi(n))throw p.c(E.ad(n))}return!0},bC:function(n,s){var a,f=this.gi(n);for(a=0;a<f;++a){if(s.$1(this.j(n,a)))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},ag:function(n,s,a){return new p.a8(n,s,p.ac(n).h("@<m.E>").D(a).h("a8<1,2>"))},e0:function(n,s,a){var f,g,y=this.gi(n);for(f=s,g=0;g<y;++g)if(f=a.$2(f,this.j(n,g)),y!==this.gi(n))throw p.c(E.ad(n));return f},e1:function(n,s,a){return this.e0(n,s,a,U.z)},a1:function(n,s){return p.du(n,s,null,p.ac(n).h("m.E"))},aL:function(n,s){var a,f,g,y,S=this;if(S.gu(n))return a=Z.ie(0,p.ac(n).h("m.E")),a;for(f=S.j(n,0),g=E.bt(S.gi(n),f,!1,p.ac(n).h("m.E")),y=1;y<S.gi(n);++y)g[y]=S.j(n,y);return g},bX:function(n){var s,a=E.nN(p.ac(n).h("m.E"));for(s=0;s<this.gi(n);++s)a.B(0,this.j(n,s));return a},B:function(n,s){var a=this.gi(n);this.si(n,a+1),this.m(n,a,s)},ae:function(n,s){return new p.b3(n,p.ac(n).h("@<m.E>").D(s).h("b3<1,2>"))},Z:function(n,s,a){var f=this.gi(n);return E.aV(s,a,f),E.dh(this.aM(n,s,a),!0,p.ac(n).h("m.E"))},aM:function(n,s,a){return E.aV(s,a,this.gi(n)),p.du(n,s,a,p.ac(n).h("m.E"))},dZ:function(n,s,a,f){var g;for(E.aV(s,a,this.gi(n)),g=s;g<a;++g)this.m(n,g,f)},a0:function(n,s,a,f,g){var y,S,C,R,D;if(E.aV(s,a,this.gi(n)),y=a-s,y!==0){if(E.aU(g,"skipCount"),p.ac(n).h("l<m.E>").b(f)?(S=g,C=f):(C=Z.nw(f,g).aL(0,!1),S=0),R=Z.M(C),S+y>R.gi(C))throw p.c(p.tg());if(S<s)for(D=y-1;D>=0;--D)this.m(n,s+D,R.j(C,S+D));else for(D=0;D<y;++D)this.m(n,s+D,R.j(C,S+D))}},bK:function(n,s){var a;for(a=0;a<this.gi(n);++a)if(Z.aA(this.j(n,a),s))return a;return-1},l:function(n){return E.id(n,"[","]")}},E.di.prototype={},E.j8.prototype={$2:function(n,s){var a,f=this.a;f.a||(this.b.a+=", "),f.a=!1,f=this.b,a=f.a+=p.b(n),f.a=a+": ",f.a+=p.b(s)},$S:54},E.I.prototype={af:function(n,s,a){var f=p.r(this);return E.nP(this,f.h("I.K"),f.h("I.V"),s,a)},J:function(n,s){var a,f;for(a=this.gL(),a=a.gC(a);a.n();)f=a.gq(),s.$2(f,this.j(0,f))},gdY:function(){return this.gL().ag(0,new E.j9(this),p.r(this).h("cC<I.K,I.V>"))},w:function(n){return this.gL().F(0,n)},gi:function(n){var s=this.gL();return s.gi(s)},gu:function(n){var s=this.gL();return s.gu(s)},l:function(n){return E.mG(this)},$ih:1},E.j9.prototype={$1:function(n){var s=this.a,a=p.r(s);return new E.cC(n,s.j(0,n),a.h("@<I.K>").D(a.h("I.V")).h("cC<1,2>"))},$S:function(){return p.r(this.a).h("cC<I.K,I.V>(I.K)")}},E.fw.prototype={m:function(n,s,a){throw p.c(E.ab("Cannot modify unmodifiable map"))}},E.dj.prototype={af:function(n,s,a){return this.a.af(0,s,a)},j:function(n,s){return this.a.j(0,s)},m:function(n,s,a){this.a.m(0,s,a)},w:function(n){return this.a.w(n)},J:function(n,s){this.a.J(0,s)},gu:function(n){var s=this.a;return s.gu(s)},gi:function(n){var s=this.a;return s.gi(s)},gL:function(){return this.a.gL()},l:function(n){return this.a.l(0)},$ih:1},E.be.prototype={af:function(n,s,a){return new E.be(this.a.af(0,s,a),s.h("@<0>").D(a).h("be<1,2>"))}},E.cQ.prototype={gu:function(n){return this.gi(this)===0},ga3:function(n){return this.gi(this)!==0},K:function(n,s){var a;for(a=Z.a_(s);a.n();)this.B(0,a.gq())},ag:function(n,s,a){return new p.c_(this,s,p.r(this).h("@<1>").D(a).h("c_<1,2>"))},l:function(n){return E.id(this,"{","}")},b4:function(n,s){var a;for(a=this.gC(this);a.n();)if(!s.$1(a.gq()))return!1;return!0},a1:function(n,s){return p.o5(this,s,p.r(this).c)},b5:function(n,s,a){var f,g;for(f=this.gC(this);f.n();)if(g=f.gq(),s.$1(g))return g;return a.$0()},S:function(n,s){var a,f,g,y="index";for(E.aM(s,y),E.aU(s,y),a=this.gC(this),f=0;a.n();){if(g=a.gq(),s===f)return g;++f}throw p.c(E.ex(s,this,y,null,f))},$in:1,$ii:1},E.e1.prototype={F:function(n,s){return this.a.w(s)},gC:function(n){var s=this.a.gL();return s.gC(s)},gi:function(n){var s=this.a;return s.gi(s)},B:function(n,s){throw p.c(E.ab("Cannot change unmodifiable set"))}},E.dN.prototype={},E.e0.prototype={},E.fl.prototype={j:function(n,s){var a,f=this.b;return f==null?this.c.j(0,s):typeof s!="string"?null:(a=f[s],typeof a=="undefined"?this.dF(s):a)},gi:function(n){return this.b==null?this.c.a:this.aC().length},gu:function(n){return this.gi(this)===0},gL:function(){if(this.b==null){var n=this.c;return new p.au(n,p.r(n).h("au<1>"))}return new E.fm(this)},m:function(n,s,a){var f,g,y=this;y.b==null?y.c.m(0,s,a):y.w(s)?(f=y.b,f[s]=a,g=y.a,(g==null?f!=null:g!==f)&&(g[s]=null)):y.dO().m(0,s,a)},w:function(n){return this.b==null?this.c.w(n):typeof n!="string"?!1:Object.prototype.hasOwnProperty.call(this.a,n)},J:function(n,s){var a,f,g,y,S=this;if(S.b==null)return S.c.J(0,s);for(a=S.aC(),f=0;f<a.length;++f)if(g=a[f],y=S.b[g],typeof y=="undefined"&&(y=E.lN(S.a[g]),S.b[g]=y),s.$2(g,y),a!==S.c)throw p.c(E.ad(S))},aC:function(){var n=this.c;return n==null&&(n=this.c=p.a(Object.keys(this.a),U.s)),n},dO:function(){var n,s,a,f,g,y=this;if(y.b==null)return y.c;for(n=E.a5(U.S,U.z),s=y.aC(),a=0;f=s.length,a<f;++a)g=s[a],n.m(0,g,y.j(0,g));return f===0?s.push(""):_.d.si(s,0),y.a=y.b=null,y.c=n},dF:function(n){var s;return Object.prototype.hasOwnProperty.call(this.a,n)?(s=E.lN(this.a[n]),this.b[n]=s):null}},E.fm.prototype={gi:function(n){var s=this.a;return s.gi(s)},S:function(n,s){var a=this.a;return a.b==null?a.gL().S(0,s):a.aC()[s]},gC:function(n){var s=this.a;return s.b==null?(s=s.gL(),s=s.gC(s)):(s=s.aC(),s=new Z.aC(s,s.length,p.U(s).h("aC<1>"))),s},F:function(n,s){return this.a.w(s)}},E.lw.prototype={a2:function(){var n,s,a,f=this;f.d4(),n=f.a,s=n.a,n.a="",n=f.c,a=n.b,a.push(E.oK((s.charCodeAt(0)==0,s),f.b)),n.a.$1(a)}},E.kT.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!0}),n}catch(s){p.E(s)}return null},$S:4},E.kU.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!1}),n}catch(s){p.E(s)}return null},$S:4},E.fL.prototype={ec:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe="Invalid base64 encoding length ";for(a=E.aV(s,a,n.length),f=j.nq(),g=s,y=g,S=null,C=-1,R=-1,D=0;g<a;g=H){if(H=g+1,q=_.a.H(n,g),q===37?(K=H+2,K<=a?(ne=p.p5(n,H),ne===37&&(ne=-1),H=K):ne=-1):ne=q,0<=ne&&ne<=127){if(te=f[ne],te>=0){if(ne=_.a.A("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te),ne===q)continue;q=ne}else{if(te===-1&&(C<0&&(ue=S==null?null:S.a.length,ue==null&&(ue=0),C=ue+(g-y),R=g),++D,q===61))continue;q=ne}if(te!==-2){S==null&&(S=new E.a9("")),ue=S,ue.a+=_.a.t(n,y,g),ue.a+=p.ba(q),y=H;continue}}throw p.c(E.K("Invalid base64 data",n,g))}if(S!=null){if(ue=S.a+=_.a.t(n,y,a),ce=ue.length,C>=0)E.nA(n,R,a,C,D,ce);else{if(ge=_.c.bg(ce-1,4)+1,ge===1)throw p.c(E.K(Xe,n,a));for(;ge<4;)ue+="=",S.a=ue,++ge}return ue=S.a,_.a.az(n,s,a,(ue.charCodeAt(0)==0,ue))}if(Ne=a-s,C>=0)E.nA(n,R,a,C,D,Ne);else{if(ge=_.c.bg(Ne,4),ge===1)throw p.c(E.K(Xe,n,a));ge>1&&(n=_.a.az(n,a,a,ge===2?"==":"="))}return n}},E.fN.prototype={},E.fM.prototype={dU:function(n,s){var a,f,g,y=E.aV(s,null,n.length);return s===y?new Uint8Array(0):(a=new E.le,f=a.dW(n,s,y),f.toString,g=a.a,g<-1&&p.a2(E.K("Missing padding character",n,y)),g>0&&p.a2(E.K("Invalid length, must be multiple of four",n,y)),a.a=-1,f)}},E.le.prototype={dW:function(n,s,a){var f,g=this,y=g.a;return y<0?(g.a=E.oh(n,s,a,y),null):s===a?new Uint8Array(0):(f=E.u1(n,s,a,y),g.a=E.u3(n,s,a,f,0,g.a),f)}},E.fO.prototype={},E.em.prototype={},E.fo.prototype={},E.eo.prototype={},E.eq.prototype={},E.hw.prototype={},E.io.prototype={dV:function(n){var s=E.oK(n,this.gcD().a);return s},gcD:function(){return _.bG}},E.ip.prototype={},E.kH.prototype={},E.kI.prototype={},E.dV.prototype={a2:function(){}},E.lI.prototype={a2:function(){this.a.e_(this.c),this.b.a2()},dP:function(n,s,a,f){this.c.a+=this.a.cC(n,s,a,!1)}},E.kR.prototype={},E.kS.prototype={dT:function(n){var s=this.a,a=E.tW(s,n,0,null);return a!=null?a:new E.fx(s).cC(n,0,null,!0)}},E.fx.prototype={cC:function(n,s,a,f){var g,y,S,C,R,D=this,H=E.aV(s,a,Z.X(n));if(s===H)return"";if(U.E.b(n)?(g=n,y=0):(g=E.uz(n,s,H),H-=s,y=s,s=0),S=D.bq(g,s,H,f),C=D.b,(C&1)!=0)throw R=E.oC(C),D.b=0,p.c(E.K(R,n,y+D.c));return S},bq:function(n,s,a,f){var g,y,S=this;return a-s>1e3?(g=_.c.bA(s+a,2),y=S.bq(n,s,g,!1),(S.b&1)!=0?y:y+S.bq(n,g,a,f)):S.dX(n,s,a,f)},e_:function(n){var s=this.b;if(this.b=0,!(s<=32))if(this.a)n.a+=p.ba(65533);else throw p.c(E.K(E.oC(77),null,null))},dX:function(n,s,a,f){var g,y,S,C,R,D,H,q=this,K=65533,ne=q.b,te=q.c,ue=new E.a9(""),ce=s+1,ge=n[s];e:for(g=q.a;;){for(;;ce=C){if(y=_.a.H("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHIHHHJEEBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBKCCCCCCCCCCCCDCLONNNMEEEEEEEEEEE",ge)&31,te=ne<=32?ge&61694>>>y:(ge&63|te<<6)>>>0,ne=_.a.H(" \x000:XECCCCCN:lDb \x000:XECCCCCNvlDb \x000:XECCCCCN:lDb AAAAA\0\0\0\0\0AAAAA00000AAAAA:::::AAAAAGG000AAAAA00KKKAAAAAG::::AAAAA:IIIIAAAAA000\x800AAAAA\0\0\0\0 AAAAA",ne+y),ne===0){if(ue.a+=p.ba(te),ce===a)break e;break}else if((ne&1)!=0){if(g)switch(ne){case 69:case 67:ue.a+=p.ba(K);break;case 65:ue.a+=p.ba(K),--ce;break;default:S=ue.a+=p.ba(K),ue.a=S+p.ba(K);break}else return q.b=ne,q.c=ce-1,"";ne=0}if(ce===a)break e;C=ce+1,ge=n[ce]}if(C=ce+1,ge=n[ce],ge<128){for(;;){if(!(C<a)){R=a;break}if(D=C+1,ge=n[C],ge>=128){R=D-1,C=D;break}C=D}if(R-ce<20)for(H=ce;H<R;++H)ue.a+=p.ba(n[H]);else ue.a+=E.o7(n,ce,R);if(R===a)break e;ce=C}else ce=C}if(f&&ne>32)if(g)ue.a+=p.ba(K);else return q.b=77,q.c=a,"";return q.b=ne,q.c=te,g=ue.a,g.charCodeAt(0)==0,g}},E.jn.prototype={$2:function(n,s){var a,f=this.b,g=this.a;f.a+=g.a,a=f.a+=p.b(n.a),f.a=a+": ",f.a+=E.cx(s),g.a=", "},$S:61},E.d5.prototype={N:function(n,s){return s==null?!1:s instanceof E.d5&&this.a===s.a&&this.b===s.b},gG:function(n){var s=this.a;return(s^_.c.ad(s,30))&1073741823},es:function(){var n,s;return this.b?this:(n=this.a,Math.abs(n)<=864e13?s=!1:s=!0,s&&p.a2(E.O("DateTime is outside valid range: "+n)),E.aM(!0,"isUtc"),new E.d5(n,!0))},l:function(n){var s=this,a=E.nG(p.eV(s)),f=E.b5(p.o_(s)),g=E.b5(p.nW(s)),y=E.b5(p.nX(s)),S=E.b5(p.nZ(s)),C=E.b5(p.o0(s)),R=E.nH(p.nY(s));return s.b?a+"-"+f+"-"+g+" "+y+":"+S+":"+C+"."+R+"Z":a+"-"+f+"-"+g+" "+y+":"+S+":"+C+"."+R},er:function(){var n=this,s=p.eV(n)>=-9999&&p.eV(n)<=9999?E.nG(p.eV(n)):E.t5(p.eV(n)),a=E.b5(p.o_(n)),f=E.b5(p.nW(n)),g=E.b5(p.nX(n)),y=E.b5(p.nZ(n)),S=E.b5(p.o0(n)),C=E.nH(p.nY(n));return n.b?s+"-"+a+"-"+f+"T"+g+":"+y+":"+S+"."+C+"Z":s+"-"+a+"-"+f+"T"+g+":"+y+":"+S+"."+C}},E.F.prototype={gaP:function(){return p.aK(this.$thrownJsError)}},E.ej.prototype={l:function(n){var s=this.a;return s!=null?"Assertion failed: "+E.cx(s):"Assertion failed"}},E.f2.prototype={},E.eR.prototype={l:function(n){return"Throw of null."}},E.ak.prototype={gbt:function(){return"Invalid argument"+(this.a?"":"(s)")},gbs:function(){return""},l:function(n){var s,a,f=this,g=f.c,y=g==null?"":" ("+g+")",S=f.d,C=S==null?"":": "+p.b(S),R=f.gbt()+y+C;return f.a?(s=f.gbs(),a=E.cx(f.b),R+s+": "+a):R}},E.dq.prototype={gbt:function(){return"RangeError"},gbs:function(){var n,s=this.e,a=this.f;return s==null?n=a!=null?": Not less than or equal to "+p.b(a):"":a==null?n=": Not greater than or equal to "+p.b(s):a>s?n=": Not in inclusive range "+p.b(s)+".."+p.b(a):n=a<s?": Valid value range is empty":": Only valid value is "+p.b(s),n}},E.ew.prototype={gbt:function(){return"RangeError"},gbs:function(){if(this.b<0)return": index must not be negative";var n=this.f;return n===0?": no indices are valid":": index should be less than "+n},gi:function(n){return this.f}},E.eO.prototype={l:function(n){var s,a,f,g,y,S,C,R,D=this,H={},q=new E.a9("");for(H.a="",s=D.c,a=s.length,f=0,g="",y="";f<a;++f,y=", ")S=s[f],q.a=g+y,g=q.a+=E.cx(S),H.a=", ";return D.d.J(0,new E.jn(H,q)),C=E.cx(D.a),R=q.l(0),a="NoSuchMethodError: method not found: '"+p.b(D.b.a)+`'
Receiver: `+C+`
Arguments: [`+R+"]",a}},E.f8.prototype={l:function(n){return"Unsupported operation: "+this.a}},E.f3.prototype={l:function(n){var s=this.a;return s!=null?"UnimplementedError: "+s:"UnimplementedError"}},E.bz.prototype={l:function(n){return"Bad state: "+this.a}},E.ep.prototype={l:function(n){var s=this.a;return s==null?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+E.cx(s)+"."}},E.eT.prototype={l:function(n){return"Out of Memory"},gaP:function(){return null},$iF:1},E.ds.prototype={l:function(n){return"Stack Overflow"},gaP:function(){return null},$iF:1},E.er.prototype={l:function(n){var s=this.a;return s==null?"Reading static variable during its initialization":"Reading static variable '"+s+"' during its initialization"}},E.dD.prototype={l:function(n){return"Exception: "+this.a},$ia3:1},E.aD.prototype={l:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne=this.a,te=ne!=null&&ne!==""?"FormatException: "+p.b(ne):"FormatException",ue=this.c,ce=this.b;if(typeof ce=="string"){if(ue!=null?s=ue<0||ue>ce.length:s=!1,s&&(ue=null),ue==null)return ce.length>78&&(ce=_.a.t(ce,0,75)+"..."),te+`
`+ce;for(a=1,f=0,g=!1,y=0;y<ue;++y)S=_.a.H(ce,y),S===10?((f!==y||!g)&&++a,f=y+1,g=!1):S===13&&(++a,f=y+1,g=!0);for(te=a>1?te+(" (at line "+a+", character "+(ue-f+1)+`)
`):te+(" (at character "+(ue+1)+`)
`),C=ce.length,y=ue;y<C;++y)if(S=_.a.A(ce,y),S===10||S===13){C=y;break}return C-f>78?ue-f<75?(R=f+75,D=f,H="",q="..."):(C-ue<75?(D=C-75,R=C,q=""):(D=ue-36,R=ue+36,q="..."),H="..."):(R=C,D=f,H="",q=""),K=_.a.t(ce,D,R),te+H+K+q+`
`+_.a.bh(" ",ue-D+H.length)+`^
`}else return ue!=null?te+(" (at offset "+p.b(ue)+")"):te},$ia3:1},E.i.prototype={ae:function(n,s){return p.fP(this,p.r(this).h("i.E"),s)},ag:function(n,s,a){return p.ja(this,s,p.r(this).h("i.E"),a)},F:function(n,s){var a;for(a=this.gC(this);a.n();)if(Z.aA(a.gq(),s))return!0;return!1},aL:function(n,s){return E.dh(this,!1,p.r(this).h("i.E"))},gi:function(n){var s,a=this.gC(this);for(s=0;a.n();)++s;return s},gu:function(n){return!this.gC(this).n()},ga3:function(n){return!this.gu(this)},a1:function(n,s){return p.o5(this,s,p.r(this).h("i.E"))},S:function(n,s){var a,f,g;for(E.aU(s,"index"),a=this.gC(this),f=0;a.n();){if(g=a.gq(),s===f)return g;++f}throw p.c(E.ex(s,this,"index",null,f))},l:function(n){return E.tf(this,"(",")")}},E.dF.prototype={S:function(n,s){var a=this.a;return(0>s||s>=a)&&p.a2(E.ex(s,this,"index",null,a)),this.b.$1(s)},gi:function(n){return this.a}},E.H.prototype={},E.cC.prototype={l:function(n){return"MapEntry("+p.b(Z.ag(this.a))+": "+p.b(Z.ag(this.b))+")"}},E.k.prototype={gG:function(n){return E.e.prototype.gG.call(_.bD,this)},l:function(n){return"null"}},E.e.prototype={constructor:E.e,$ie:1,N:function(n,s){return this===s},gG:function(n){return p.cj(this)},l:function(n){return"Instance of '"+p.b(p.ju(this))+"'"},bb:function(n,s){throw p.c(E.nS(this,s.gcN(),s.gcR(),s.gcO()))},toString:function(){return this.l(this)}},E.fr.prototype={l:function(n){return""},$iam:1},E.a9.prototype={gi:function(n){return this.a.length},l:function(n){var s=this.a;return s.charCodeAt(0)==0,s}},E.kN.prototype={$2:function(n,s){throw p.c(E.K("Illegal IPv4 address, "+n,this.a,s))},$S:126},E.kO.prototype={$2:function(n,s){throw p.c(E.K("Illegal IPv6 address, "+n,this.a,s))},$1:function(n){return this.$2(n,null)},$S:68},E.kP.prototype={$2:function(n,s){var a;return s-n>4&&this.a.$2("an IPv6 part can only contain a maximum of 4 hex digits",n),a=E.cr(_.a.t(this.b,n,s),16),(a<0||a>65535)&&this.a.$2("each part must be in the range of `0x0..0xFFFF`",n),a},$S:70},E.e2.prototype={gct:function(){var n,s,a,f=this,g=f.x;return g==null&&(g=f.a,n=g.length!==0?g+":":"",s=f.c,a=s==null,!a||g==="file"?(g=n+"//",n=f.b,n.length!==0&&(g=g+n+"@"),a||(g+=s),n=f.d,n!=null&&(g=g+":"+p.b(n))):g=n,g+=f.e,n=f.f,n!=null&&(g=g+"?"+n),n=f.r,n!=null&&(g=g+"#"+n),g=(g.charCodeAt(0)==0,g),f.x==null?f.x=g:g=p.a2(p.nM("Field '_text' has been assigned during initialization."))),g},gG:function(n){var s=this,a=s.z;return a==null&&(a=_.a.gG(s.gct()),s.z==null?s.z=a:a=p.a2(p.nM("Field 'hashCode' has been assigned during initialization."))),a},gcX:function(){return this.b},gbJ:function(){var n=this.c;return n==null?"":_.a.V(n,"[")?_.a.t(n,1,n.length-1):n},gbR:function(){var n=this.d;return n==null?E.ow(this.a):n},gbT:function(){var n=this.f;return n==null?"":n},gbF:function(){var n=this.r;return n==null?"":n},gcI:function(){return this.a.length!==0},gbG:function(){return this.c!=null},gbI:function(){return this.f!=null},gbH:function(){return this.r!=null},gcH:function(){return _.a.V(this.e,"/")},l:function(n){return this.gct()},N:function(n,s){var a=this;return s==null?!1:a===s?!0:U.n.b(s)&&a.a===s.gc1()&&a.c!=null===s.gbG()&&a.b===s.gcX()&&a.gbJ()===s.gbJ()&&a.gbR()===s.gbR()&&a.e===s.gcP()&&a.f!=null===s.gbI()&&a.gbT()===s.gbT()&&a.r!=null===s.gbH()&&a.gbF()===s.gbF()},$iaY:1,gc1:function(){return this.a},gcP:function(){return this.e}},E.kL.prototype={gbd:function(n){var s,a,f,g,y=this,S=null,C=y.c;return C==null&&(C=y.a,s=y.b[0]+1,a=_.a.b7(C,"?",s),f=C.length,a>=0?(g=E.e3(C,a+1,f,_.x,!1),f=a):g=S,C=y.c=new E.fg("data","",S,S,E.e3(C,s,f,_.am,!1),g,S)),C},gax:function(){var n=this.b,s=n[0]+1,a=n[1];return s===a?"text/plain":E.uy(this.a,s,a,_.a3,!1)},cB:function(){var n,s,a,f,g,y,S,C,R=this.a,D=this.b,H=_.d.gaH(D)+1;if((D.length&1)==1)return _.b6.dU(R,H);for(D=R.length,n=D-H,s=H;s<D;++s)_.a.A(R,s)===37&&(s+=2,n-=2);if(a=new Uint8Array(n),n===D)return _.j.a0(a,0,n,new p.cu(R),H),a;for(s=H,f=0;s<D;++s){if(g=_.a.A(R,s),g!==37)y=f+1,a[f]=g;else{if(S=s+2,S<D&&(C=p.p5(R,s+1),C>=0)){y=f+1,a[f]=C,s=S,f=y;continue}throw p.c(E.K("Invalid percent escape",R,s))}f=y}return a},l:function(n){var s=this.a;return this.b[0]===-1?"data:"+s:s}},E.lP.prototype={$1:function(n){return new Uint8Array(96)},$S:71},E.lO.prototype={$2:function(n,s){var a=this.a[n];return Z.rt(a,0,96,s),a},$S:82},E.lQ.prototype={$3:function(n,s,a){var f,g;for(f=s.length,g=0;g<f;++g)n[_.a.H(s,g)^96]=a},$S:16},E.lR.prototype={$3:function(n,s,a){var f,g;for(f=_.a.H(s,0),g=_.a.H(s,1);f<=g;++f)n[(f^96)>>>0]=a},$S:16},E.fp.prototype={gcI:function(){return this.b>0},gbG:function(){return this.c>0},gbI:function(){return this.f<this.r},gbH:function(){return this.r<this.a.length},gci:function(){return this.b===4&&_.a.V(this.a,"http")},gcj:function(){return this.b===5&&_.a.V(this.a,"https")},gcH:function(){return _.a.U(this.a,"/",this.e)},gc1:function(){var n=this.x;return n==null?this.x=this.df():n},df:function(){var n=this,s=n.b;return s<=0?"":n.gci()?"http":n.gcj()?"https":s===4&&_.a.V(n.a,"file")?"file":s===7&&_.a.V(n.a,"package")?"package":_.a.t(n.a,0,s)},gcX:function(){var n=this.c,s=this.b+3;return n>s?_.a.t(this.a,s,n-1):""},gbJ:function(){var n=this.c;return n>0?_.a.t(this.a,n,this.d):""},gbR:function(){var n=this;return n.c>0&&n.d+1<n.e?E.cr(_.a.t(n.a,n.d+1,n.e),null):n.gci()?80:n.gcj()?443:0},gcP:function(){return _.a.t(this.a,this.e,this.f)},gbT:function(){var n=this.f,s=this.r;return n<s?_.a.t(this.a,n+1,s):""},gbF:function(){var n=this.r,s=this.a;return n<s.length?_.a.bj(s,n+1):""},gG:function(n){var s=this.y;return s==null?this.y=_.a.gG(this.a):s},N:function(n,s){return s==null?!1:this===s?!0:U.n.b(s)&&this.a===s.l(0)},l:function(n){return this.a},$iaY:1},E.fg.prototype={},E.lM.prototype={$1:function(n){var s,a,f,g=this.a;if(g.w(n))return g.j(0,n);if(U.I.b(n)){for(s={},g.m(0,n,s),g=n.gL(),g=g.gC(g);g.n();)a=g.gq(),s[a]=this.$1(n.j(0,a));return s}else return U.U.b(n)?(f=[],g.m(0,n,f),_.d.K(f,Z.bl(n,this,U.z)),f):n},$S:90},ye.a0.prototype={gck:function(){var n,s=this.z;return s===5121||s===5120?(n=this.ch,n=n==="MAT2"||n==="MAT3"):n=!1,n?s=!0:s=(s===5123||s===5122)&&this.ch==="MAT3",s},ga7:function(){var n=_.l.j(0,this.ch);return n==null?0:n},ga8:function(){var n=this,s=n.z;return s===5121||s===5120?(s=n.ch,s==="MAT2"?6:s==="MAT3"?11:n.ga7()):s===5123||s===5122?n.ch==="MAT3"?22:2*n.ga7():4*n.ga7()},gal:function(){var n=this,s=n.fx;return s!==0?s:(s=n.z,s===5121||s===5120?(s=n.ch,s==="MAT2"?8:s==="MAT3"?12:n.ga7()):s===5123||s===5122?n.ch==="MAT3"?24:2*n.ga7():4*n.ga7())},gaF:function(){return this.gal()*(this.Q-1)+this.ga8()},v:function(n,s){var a,f,g,y=this,S="bufferView",C=n.z,R=y.x,D=y.fr=C.j(0,R),H=D==null;if(!H&&D.Q!==-1&&(y.fx=D.Q),!(y.z===-1||y.Q===-1||y.ch==null)&&(R!==-1&&(H?s.k(j.N(),p.a([R],U.M),S):(D.a$=!0,D=D.Q,D!==-1&&D<y.ga8()&&s.E(j.pU(),p.a([y.fr.Q,y.ga8()],U.M)),ye.bm(y.y,y.dy,y.gaF(),y.fr,R,s))),R=y.dx,R!=null)){if(D=R.d,D!==-1?H=!1:H=!0,H)return;H=s.c,H.push("sparse"),a=y.Q,D>a&&s.k(j.qy(),p.a([D,a],U.M),"count"),a=R.f,f=a.d,a.f=C.j(0,f),H.push("indices"),g=R.e,R=g.d,R!==-1&&(C=g.r=C.j(0,R),C==null?s.k(j.N(),p.a([R],U.M),S):(C.P(_.v,S,s),g.r.Q!==-1&&s.p(j.mv(),S),C=g.f,C!==-1&&ye.bm(g.e,Re.b_(C),Re.b_(C)*D,g.r,R,s))),H.pop(),H.push("values"),f!==-1&&(C=a.f,C==null?s.k(j.N(),p.a([f],U.M),S):(C.P(_.v,S,s),a.f.Q!==-1&&s.p(j.mv(),S),C=y.dy,R=_.l.j(0,y.ch),R==null&&(R=0),ye.bm(a.e,C,C*R*D,a.f,f,s))),H.pop(),H.pop()}},P:function(n,s,a){var f;this.a$=!0,f=this.k2,f==null?this.k2=n:f!==n&&a.k(j.pW(),p.a([f,n],U.M),s)},ex:function(n){var s=this.k1;if(s==null)this.k1=n;else if(s!==n)return!1;return!0},ed:function(n){var s,a,f=this;return!f.cx||f.z===5126?(n.toString,n):(s=f.dy*8,a=f.z,a===5120||a===5122||a===5124?Math.max(n/(_.c.aA(1,s-1)-1),-1):n/(_.c.aA(1,s)-1))}},ye.fb.prototype={ac:function(){var n=this;return E.bK(function(){var s=0,a=2,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe;return function(St,ct){for(St===1&&(f=ct,s=a);;)switch(s){case 0:if(Xe=n.z,Xe===-1||n.Q===-1||n.ch==null){s=1;break}if(g=n.ga7(),y=n.Q,S=n.fr,S!=null){if(S=S.cx,(S==null?null:S.Q)==null){s=1;break}if(n.gal()<n.ga8()){s=1;break}if(S=n.y,C=n.dy,!ye.bm(S,C,n.gaF(),n.fr,null,null)){s=1;break}if(R=n.fr,D=ye.ny(Xe,R.cx.Q.buffer,R.y+S,_.c.aq(n.gaF(),C)),D==null){s=1;break}H=D.length,n.gck()?(S=_.c.aq(n.gal(),C),C=n.ch==="MAT2",R=C?8:12,q=C?2:3,K=new ye.l6(H,D,q,q,S-R).$0()):K=new ye.l7(D).$3(H,g,_.c.aq(n.gal(),C)-g)}else K=E.nJ(y*g,new ye.l8,U.e);if(S=n.dx,S!=null){if(C=S.f,R=C.e,R!==-1?(ne=C.f,ne!=null&&ne.z!==-1&&ne.y!==-1?(ne=ne.cx,(ne==null?null:ne.Q)!=null?(ne=S.e,ne.f!==-1&&ne.e!==-1?(ne=ne.r,ne!=null&&ne.z!==-1&&ne.y!==-1?(ne=ne.cx,ne=(ne==null?null:ne.Q)==null):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0,ne){s=1;break}if(ne=S.d,ne>y){s=1;break}if(y=S.e,S=y.e,te=y.f,ye.bm(S,Re.b_(te),Re.b_(te)*ne,y.r,null,null)?(ue=n.dy,ce=_.l.j(0,n.ch),ce==null&&(ce=0),ce=!ye.bm(R,ue,ue*ce*ne,C.f,null,null),ue=ce):ue=!0,ue){s=1;break}if(y=y.r,ge=ye.mz(te,y.cx.Q.buffer,y.y+S,ne),C=C.f,Ne=ye.ny(Xe,C.cx.Q.buffer,C.y+R,ne*g),ge==null||Ne==null){s=1;break}K=new ye.l9(n,ge,K,g,Ne).$0()}return s=3,E.lv(K);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},U.e)},bf:function(){var n=this;return E.bK(function(){var s=0,a=1,f,g,y,S,C;return function(D,H){for(D===1&&(f=H,s=a);;)switch(s){case 0:S=n.dy*8,C=n.z,C=C===5120||C===5122||C===5124,g=U.F,s=C?2:4;break;case 2:return C=_.c.aA(1,S-1),y=n.ac(),y.toString,s=5,E.lv(p.ja(y,new ye.l4(1/(C-1)),y.$ti.h("i.E"),g));case 5:s=3;break;case 4:return C=_.c.aA(1,S),y=n.ac(),y.toString,s=6,E.lv(p.ja(y,new ye.l5(1/(C-1)),y.$ti.h("i.E"),g));case 6:case 3:return E.bF();case 1:return E.bG(f)}}},U.F)}},ye.l6.prototype={$0:function(){var n=this;return E.bK(function(){var s=0,a=1,f,g,y,S,C,R,D,H,q;return function(ne,te){for(ne===1&&(f=te,s=a);;)switch(s){case 0:g=n.a,y=n.c,S=n.b,C=n.d,R=n.e,D=0,H=0,q=0;case 2:if(!(D<g)){s=3;break}return s=4,S[D];case 4:++D,++H,H===y&&(D+=4-H,++q,q===C&&(D+=R,q=0),H=0),s=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},U.e)},$S:17},ye.l7.prototype={$3:function(n,s,a){return this.cZ(n,s,a)},cZ:function(n,s,a){var f=this;return E.bK(function(){var g=n,y=s,S=a,C=0,R=1,D,H,q,K;return function(te,ue){for(te===1&&(D=ue,C=R);;)switch(C){case 0:H=f.a,q=0,K=0;case 2:if(!(q<g)){C=3;break}return C=4,H[q];case 4:++q,++K,K===y&&(q+=S,K=0),C=2;break;case 3:return E.bF();case 1:return E.bG(D)}}},U.e)},$S:30},ye.l8.prototype={$1:function(n){return 0},$S:18},ye.l9.prototype={$0:function(){var n=this;return E.bK(function(){var s=0,a=1,f,g,y,S,C,R,D,H,q,K,ne;return function(ue,ce){for(ue===1&&(f=ce,s=a);;)switch(s){case 0:K=n.b,ne=K[0],g=Z.a_(n.c),y=n.d,S=n.a.dx,C=n.e,R=0,D=0,H=0;case 2:if(!g.n()){s=3;break}q=g.gq(),D===y&&(R===ne&&H!==S.d-1&&(++H,ne=K[H]),++R,D=0),s=R===ne?4:6;break;case 4:return s=7,C[H*y+D];case 7:s=5;break;case 6:return s=8,q;case 8:case 5:++D,s=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},U.e)},$S:17},ye.l4.prototype={$1:function(n){return Math.max(n*this.a,-1)},$S:5},ye.l5.prototype={$1:function(n){return n*this.a},$S:5},ye.fa.prototype={ac:function(){var n=this;return E.bK(function(){var s=0,a=2,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe;return function(St,ct){for(St===1&&(f=ct,s=a);;)switch(s){case 0:if(Xe=n.z,Xe===-1||n.Q===-1||n.ch==null){s=1;break}if(g=n.ga7(),y=n.Q,S=n.fr,S!=null){if(S=S.cx,(S==null?null:S.Q)==null){s=1;break}if(n.gal()<n.ga8()){s=1;break}if(S=n.y,C=n.dy,!ye.bm(S,C,n.gaF(),n.fr,null,null)){s=1;break}if(R=n.fr,D=ye.nx(Xe,R.cx.Q.buffer,R.y+S,_.c.aq(n.gaF(),C)),D==null){s=1;break}H=D.length,n.gck()?(S=_.c.aq(n.gal(),C),C=n.ch==="MAT2",R=C?8:12,q=C?2:3,K=new ye.l0(H,D,q,q,S-R).$0()):K=new ye.l1(D).$3(H,g,_.c.aq(n.gal(),C)-g)}else K=E.nJ(y*g,new ye.l2,U.F);if(S=n.dx,S!=null){if(C=S.f,R=C.e,R!==-1?(ne=C.f,ne!=null&&ne.z!==-1&&ne.y!==-1?(ne=ne.cx,(ne==null?null:ne.Q)!=null?(ne=S.e,ne.f!==-1&&ne.e!==-1?(ne=ne.r,ne!=null&&ne.z!==-1&&ne.y!==-1?(ne=ne.cx,ne=(ne==null?null:ne.Q)==null):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0,ne){s=1;break}if(ne=S.d,ne>y){s=1;break}if(y=S.e,S=y.e,te=y.f,ye.bm(S,Re.b_(te),Re.b_(te)*ne,y.r,null,null)?(ue=n.dy,ce=_.l.j(0,n.ch),ce==null&&(ce=0),ce=!ye.bm(R,ue,ue*ce*ne,C.f,null,null),ue=ce):ue=!0,ue){s=1;break}if(y=y.r,ge=ye.mz(te,y.cx.Q.buffer,y.y+S,ne),C=C.f,Ne=ye.nx(Xe,C.cx.Q.buffer,C.y+R,ne*g),ge==null||Ne==null){s=1;break}K=new ye.l3(n,ge,K,g,Ne).$0()}return s=3,E.lv(K);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},U.F)},bf:function(){return this.ac()}},ye.l0.prototype={$0:function(){var n=this;return E.bK(function(){var s=0,a=1,f,g,y,S,C,R,D,H,q;return function(ne,te){for(ne===1&&(f=te,s=a);;)switch(s){case 0:g=n.a,y=n.c,S=n.b,C=n.d,R=n.e,D=0,H=0,q=0;case 2:if(!(D<g)){s=3;break}return s=4,S[D];case 4:++D,++H,H===y&&(D+=4-H,++q,q===C&&(D+=R,q=0),H=0),s=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},U.F)},$S:19},ye.l1.prototype={$3:function(n,s,a){return this.cY(n,s,a)},cY:function(n,s,a){var f=this;return E.bK(function(){var g=n,y=s,S=a,C=0,R=1,D,H,q,K;return function(te,ue){for(te===1&&(D=ue,C=R);;)switch(C){case 0:H=f.a,q=0,K=0;case 2:if(!(q<g)){C=3;break}return C=4,H[q];case 4:++q,++K,K===y&&(q+=S,K=0),C=2;break;case 3:return E.bF();case 1:return E.bG(D)}}},U.F)},$S:34},ye.l2.prototype={$1:function(n){return 0},$S:5},ye.l3.prototype={$0:function(){var n=this;return E.bK(function(){var s=0,a=1,f,g,y,S,C,R,D,H,q,K,ne;return function(ue,ce){for(ue===1&&(f=ce,s=a);;)switch(s){case 0:K=n.b,ne=K[0],g=Z.a_(n.c),y=n.d,S=n.a.dx,C=n.e,R=0,D=0,H=0;case 2:if(!g.n()){s=3;break}q=g.gq(),D===y&&(R===ne&&H!==S.d-1&&(++H,ne=K[H]),++R,D=0),s=R===ne?4:6;break;case 4:return s=7,C[H*y+D];case 7:s=5;break;case 6:return s=8,q;case 8:case 5:++D,s=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},U.F)},$S:19},ye.bP.prototype={ge3:function(){var n=this.e,s=n.r,a=s==null?null:s.cx;return(a==null?null:a.Q)==null?null:ye.mz(n.f,s.cx.Q.buffer,s.y+n.e,this.d)}},ye.bQ.prototype={v:function(n,s){this.r=n.z.j(0,this.d)}},ye.bR.prototype={v:function(n,s){this.f=n.z.j(0,this.d)}},ye.ez.prototype={Y:function(n,s,a,f){return f.toString,f==1/0||f==-1/0||isNaN(f)?(n.k(j.pl(),p.a([s,f],U.M),this.a),!1):!0}},ye.eG.prototype={Y:function(n,s,a,f){var g,y=this;return(s===a||y.b[a]>f)&&(y.b[a]=f),f<y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var s,a,f,g,y,S,C,R,D,H=this;for(s=H.b,a=s.length,f=H.c,g=H.a,y=H.d,S=U.M,C=0;C<a;++C)Z.aA(f[C],s[C])||(R=j.na(),D=y+"/min/"+C,n.k(R,p.a([f[C],s[C]],S),D),g[C]>0&&(R=j.n8(),D=y+"/min/"+C,n.k(R,p.a([g[C],f[C]],S),D)));return!0}},ye.eE.prototype={Y:function(n,s,a,f){var g,y=this;return(s===a||y.b[a]<f)&&(y.b[a]=f),f>y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var s,a,f,g,y,S,C,R,D,H=this;for(s=H.b,a=s.length,f=H.c,g=H.a,y=H.d,S=U.M,C=0;C<a;++C)Z.aA(f[C],s[C])||(R=j.n9(),D=y+"/max/"+C,n.k(R,p.a([f[C],s[C]],S),D),g[C]>0&&(R=j.n7(),D=y+"/max/"+C,n.k(R,p.a([g[C],f[C]],S),D)));return!0}},ye.eH.prototype={Y:function(n,s,a,f){var g,y=this;return(s===a||y.b[a]>f)&&(y.b[a]=f),f<y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var s,a,f,g,y,S,C,R,D,H=this;for(s=H.b,a=s.length,f=H.c,g=H.a,y=H.d,S=U.M,C=0;C<a;++C)Z.aA(f[C],s[C])||(R=j.na(),D=y+"/min/"+C,n.k(R,p.a([f[C],s[C]],S),D),g[C]>0&&(R=j.n8(),D=y+"/min/"+C,n.k(R,p.a([g[C],f[C]],S),D)));return!0}},ye.eF.prototype={Y:function(n,s,a,f){var g,y=this;return(s===a||y.b[a]<f)&&(y.b[a]=f),f>y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var s,a,f,g,y,S,C,R,D,H=this;for(s=H.b,a=s.length,f=H.c,g=H.a,y=H.d,S=U.M,C=0;C<a;++C)Z.aA(f[C],s[C])||(R=j.n9(),D=y+"/max/"+C,n.k(R,p.a([f[C],s[C]],S),D),g[C]>0&&(R=j.n7(),D=y+"/max/"+C,n.k(R,p.a([g[C],f[C]],S),D)));return!0}},Re.bn.prototype={v:function(n,s){var a,f,g,y,S,C=this,R="samplers",D=C.y;if(!(D==null||C.x==null)){for(a=s.c,a.push(R),D.a9(new Re.fH(s,n)),a.pop(),a.push("channels"),C.x.a9(new Re.fI(C,s,n)),a.pop(),a.push(R),f=D.b,D=D.a,g=D.length,y=0;y<f;++y)S=y>=g,(S?null:D[y]).a$||s.X(j.fD(),y);a.pop()}}},Re.fH.prototype={$2:function(n,s){var a,f,g,y,S="input",C="output",R=this.a,D=R.c;D.push(_.c.l(n)),a=this.b.f,f=s.d,s.r=a.j(0,f),g=s.f,s.x=a.j(0,g),f!==-1&&(a=s.r,a==null?R.k(j.N(),p.a([f],U.M),S):(a.P(_.b_,S,R),a=s.r.fr,a!=null&&a.P(_.v,S,R),D.push(S),y=ve.d2(s.r),y.N(0,_.A)?R.W(s.r,new Re.ei(R.O())):R.E(j.q_(),p.a([y,p.a([_.A],U.p)],U.M)),a=s.r,(a.db==null||a.cy==null)&&R.R(j.q1()),s.e==="CUBICSPLINE"&&s.r.Q<2&&R.E(j.q0(),p.a(["CUBICSPLINE",2,s.r.Q],U.M)),D.pop())),g!==-1&&(a=s.x,a==null?R.k(j.N(),p.a([g],U.M),C):(a.P(_.b0,C,R),a=s.x.fr,a!=null&&a.P(_.v,C,R),s.x.ex(s.e==="CUBICSPLINE"))),D.pop()},$S:35},Re.fI.prototype={$2:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce=null,ge="sampler",Ne=this.b,Xe=Ne.c;if(Xe.push(_.c.l(n)),a=this.a,f=s.d,s.f=a.y.j(0,f),g=s.e,y=g!=null,y&&(S=g.d,g.f=this.c.db.j(0,S),S!==-1)){if(Xe.push("target"),C=g.f,C==null)Ne.k(j.N(),p.a([S],U.M),"node");else switch(C.a$=!0,g.e){case"translation":case"rotation":case"scale":C.Q!=null&&Ne.R(j.pX()),g.f.id!=null&&Ne.p(j.qz(),"path");break;case"weights":S=C.fy,S=S==null?ce:S.x,S=S==null?ce:S.gcF(S),(S==null?ce:S.fx)==null&&Ne.R(j.pY());break}Xe.pop()}if(f!==-1){for(S=s.f,S==null?Ne.k(j.N(),p.a([f],U.M),ge):(S.a$=!0,y&&S.x!=null&&(f=g.e,f==="rotation"&&(R=S.x,R.ga7()===4&&(Xe.push(ge),S=Ne.O(),C=R.z===5126?ce:R.gbP(),Ne.W(R,new Re.dp(s.f.e==="CUBICSPLINE",C,S,U.ed)),Xe.pop()),S=s.f,S.x.toString),D=ve.d2(S.x),H=_.cS.j(0,f),(H==null?ce:_.d.F(H,D))===!1&&Ne.k(j.q3(),p.a([D,H,f],U.M),ge),S=s.f,C=S.r,C!=null&&C.Q!==-1&&S.x.Q!==-1&&S.e!=null&&(q=C.Q,S.e==="CUBICSPLINE"&&(q*=3),f==="weights"&&(f=g.f,f=f==null?ce:f.fy,f=f==null?ce:f.x,f=f==null?ce:f.gcF(f),f=f==null?ce:f.fx,K=f==null?ce:f.length,q*=K==null?0:K),q!==0&&q!==s.f.x.Q&&Ne.k(j.q2(),p.a([q,s.f.x.Q],U.M),ge)))),ne=n+1,a=a.x,f=a.b,S=U.M,a=a.a,C=a.length;ne<f;++ne)y?(te=ne>=C,ue=(te?ce:a[ne]).e,te=ue!=null&&g.d===ue.d&&g.e==ue.e):te=!1,te&&Ne.k(j.pZ(),p.a([ne],S),"target");Xe.pop()}},$S:36},Re.b1.prototype={},Re.bT.prototype={},Re.b2.prototype={},Re.ei.prototype={Y:function(n,s,a,f){var g=this;return f<0?n.k(j.pf(),p.a([s,f],U.M),g.b):(s!==0&&f<=g.a&&n.k(j.pg(),p.a([s,f,g.a],U.M),g.b),g.a=f),!0}},Re.dp.prototype={Y:function(n,s,a,f){var g,y,S=this;return(!S.a||(4&S.d)==4)&&(g=S.b,y=g!=null?g.$1(f):f,g=S.e+y*y,S.e=g,a===3&&(Math.abs(Math.sqrt(g)-1)>.00769&&n.k(j.ph(),p.a([s-3,s,Math.sqrt(S.e)],U.M),S.c),S.e=0)),++S.d==12&&(S.d=0),!0}},Me.bo.prototype={gb8:function(){var n,s=this.f;return s!=null?(n=j.bj().b,n=!n.test(s)):n=!0,n?0:E.cr(j.bj().aG(s).b[1],null)},gbO:function(){var n,s=this.f;return s!=null?(n=j.bj().b,n=!n.test(s)):n=!0,n?0:E.cr(j.bj().aG(s).b[2],null)},gcM:function(){var n,s=this.r;return s!=null?(n=j.bj().b,n=!n.test(s)):n=!0,n?2:E.cr(j.bj().aG(s).b[1],null)},geb:function(){var n,s=this.r;return s!=null?(n=j.bj().b,n=!n.test(s)):n=!0,n?0:E.cr(j.bj().aG(s).b[2],null)}},pe.aN.prototype={},ve.bp.prototype={P:function(n,s,a){var f;this.a$=!0,f=this.cy,f==null?this.cy=n:f!==n&&a.k(j.q5(),p.a([f,n],U.M),s)},v:function(n,s){var a,f=this,g=f.x,y=f.cx=n.y.j(0,g);f.db=f.Q,a=f.ch,a===34962?f.cy=_.F:a===34963&&(f.cy=_.X),g!==-1&&(y==null?s.k(j.N(),p.a([g],U.M),"buffer"):(y.a$=!0,y=y.y,y!==-1&&(a=f.y,a>=y?s.k(j.ne(),p.a([g,y],U.M),"byteOffset"):a+f.z>y&&s.k(j.ne(),p.a([g,y],U.M),"byteLength"))))}},Ce.bq.prototype={},Ce.bV.prototype={},Ce.bW.prototype={},ve.da.prototype={ez:function(n){var s,a,f,g,y;for(new ve.i3(this,n).$1(this.fy),s=n.r,a=s.length,f=n.c,g=0;g<s.length;s.length===a||(0,p.cs)(s),++g)y=s[g],_.d.si(f,0),_.d.K(f,y.b),y.a.bY(this,n);_.d.si(f,0)}},ve.i0.prototype={$0:function(){return _.d.si(this.a.c,0),null},$S:1},ve.i1.prototype={$1$2:function(n,s,a){var f,g,y,S,C,R,D,H,q,K,ne=this,te=ne.a;if(!te.w(n))return te=new Array(0),te.fixed$length=Array,new oe.L(p.a(te,a.h("p<0*>")),0,n,a.h("L<0*>"));if(ne.b.$0(),f=te.j(0,n),U.o.b(f))if(te=Z.M(f),g=ne.c,y=a.h("p<0*>"),S=a.h("L<0*>"),te.ga3(f)){for(C=te.gi(f),R=new Array(C),R.fixed$length=Array,y=p.a(R,y),R=g.c,R.push(n),D=U.M,H=U.t,q=0;q<te.gi(f);++q)K=te.j(f,q),H.b(K)?(R.push(_.c.l(q)),y[q]=s.$2(K,g),R.pop()):g.aE(j.Z(),p.a([K,"object"],D),q);return new oe.L(y,C,n,S)}else return g.p(j.bO(),n),te=new Array(0),te.fixed$length=Array,new oe.L(p.a(te,y),0,n,S);else return ne.c.k(j.Z(),p.a([f,"array"],U.M),n),te=new Array(0),te.fixed$length=Array,new oe.L(p.a(te,a.h("p<0*>")),0,n,a.h("L<0*>"))},$2:function(n,s){return this.$1$2(n,s,U.z)},$S:37},ve.i2.prototype={$1$3$req:function(n,s,a,f){var g,y;return this.a.$0(),g=this.c,y=oe.n_(this.b,n,g,!0),y==null?null:(g.c.push(n),s.$2(y,g))},$2:function(n,s){return this.$1$3$req(n,s,!1,U.z)},$1$2:function(n,s,a){return this.$1$3$req(n,s,!1,a)},$S:38},ve.hZ.prototype={$2:function(n,s){var a,f,g,y,S,C=this.a,R=C.c;if(R.push(n.c),a=this.b,n.a9(new ve.i_(C,a)),f=C.f.j(0,s),f!=null){for(g=Z.eA(R.slice(0),p.U(R).c),y=Z.a_(f);y.n();)S=y.gq(),_.d.si(R,0),_.d.K(R,S.b),S.a.v(a,C);_.d.si(R,0),_.d.K(R,g)}R.pop()},$S:39},ve.i_.prototype={$2:function(n,s){var a=this.a,f=a.c;f.push(_.c.l(n)),s.v(this.b,a),f.pop()},$S:40},ve.hX.prototype={$2:function(n,s){var a,f;U.v.b(s)&&(a=this.a,f=a.c,f.push(n),s.v(this.b,a),f.pop())},$S:6},ve.hY.prototype={$2:function(n,s){var a,f,g,y=this;if(!s.k1&&s.fx==null&&s.fy==null&&s.fr==null&&s.a.a===0&&s.b==null&&y.a.X(j.qU(),n),s.go!=null)for(a=y.b,a.cz(0),f=s;f.go!=null;)if(a.B(0,f))f=f.go;else{f===s&&y.a.X(j.qg(),n);break}s.id!=null&&(s.go!=null&&y.a.X(j.qZ(),n),a=s.Q,a==null||a.cK()?(a=s.cx,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0):a=!0,a?(a=s.cy,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0&&a[3]===1):a=!0,a?(a=s.db,a!=null?(a=a.a,a=a[0]===1&&a[1]===1&&a[2]===1):a=!0):a=!1):a=!1):a=!1,a||y.a.X(j.qY(),n),g=s.id.cy.b5(0,new ve.hV,new ve.hW),g!=null?(a=g.dy,a=!s.dy.b4(0,a.gcA(a))):a=!1,a&&y.a.X(j.qX(),n))},$S:29},ve.hV.prototype={$1:function(n){return n.go==null},$S:43},ve.hW.prototype={$0:function(){return null},$S:2},ve.i3.prototype={$1:function(n){var s=this.b,a=s.c;_.d.si(a,0),a.push(n.c),n.a9(new ve.i4(this.a,s)),a.pop()},$S:44},ve.i4.prototype={$2:function(n,s){var a=this.b,f=a.c;f.push(_.c.l(n)),s.bY(this.a,a),f.pop()},$S:45},ve.kQ.prototype={ge7:function(){return this.a$}},ve.o.prototype={v:function(n,s){},$it:1},ve.es.prototype={},ve.fk.prototype={},Me.aO.prototype={v:function(n,s){var a,f="bufferView",g=this.x;g!==-1&&(a=this.ch=n.z.j(0,g),a==null?s.k(j.N(),p.a([g],U.M),f):(a.P(_.b4,f,s),this.ch.Q!==-1&&s.p(j.q6(),f)))},ew:function(){var n=this.ch,s=n==null?null:n.cx;if((s==null?null:s.Q)!=null)try{this.Q=p.mH(n.cx.Q.buffer,n.y,n.z)}catch(a){if(!(p.E(a)instanceof E.ak))throw a}}},_e.aS.prototype={v:function(n,s){var a=this,f=new _e.jb(s,n);f.$2(a.x,"pbrMetallicRoughness"),f.$2(a.y,"normalTexture"),f.$2(a.z,"occlusionTexture"),f.$2(a.Q,"emissiveTexture")}},_e.jb.prototype={$2:function(n,s){var a,f;n!=null&&(a=this.a,f=a.c,f.push(s),n.v(this.b,a),f.pop())},$S:46},_e.ci.prototype={v:function(n,s){var a,f=this.e;f!=null&&(a=s.c,a.push("baseColorTexture"),f.v(n,s),a.pop()),f=this.x,f!=null&&(a=s.c,a.push("metallicRoughnessTexture"),f.v(n,s),a.pop())}},_e.ch.prototype={},_e.cg.prototype={},_e.bB.prototype={v:function(n,s){var a,f=this,g=f.d,y=f.f=n.fy.j(0,g);for(g!==-1&&(y==null?s.k(j.N(),p.a([g],U.M),"index"):y.a$=!0),g=s.e,a=f;a!=null;)if(a=g.j(0,a),a instanceof _e.aS){a.dx.m(0,s.O(),f.e);break}}},ve.bU.prototype={l:function(n){return this.a}},ve.bS.prototype={l:function(n){return this.a}},ve.u.prototype={l:function(n){var s="{"+p.b(this.a)+", "+p.b(_.ao.j(0,this.b));return s+(this.c?" normalized":"")+"}"},N:function(n,s){return s==null?!1:s instanceof ve.u&&s.a==this.a&&s.b===this.b&&s.c===this.c},gG:function(n){return Fe.oG(Fe.fy(Fe.fy(Fe.fy(0,Z.aL(this.a)),_.c.gG(this.b)),_.bC.gG(this.c)))}},Pe.aT.prototype={v:function(n,s){var a,f=s.c;f.push("primitives"),a=this.x,a!=null&&a.a9(new Pe.jl(s,n)),f.pop()}},Pe.jl.prototype={$2:function(n,s){var a=this.a,f=a.c;f.push(_.c.l(n)),s.v(this.b,a),f.pop()},$S:20},Pe.aH.prototype={geu:function(){switch(this.r){case 4:return _.c.bA(this.dy,3);case 5:case 6:var n=this.dy;return n>2?n-2:0;default:return 0}},v:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne=this,te="attributes",ue="indices",ce=ne.d;for(ce!=null&&(a=s.c,a.push(te),ce.J(0,new Pe.jg(ne,n,s)),a.pop()),ce=ne.e,ce!==-1&&(a=ne.fy=n.f.j(0,ce),a==null?s.k(j.N(),p.a([ce],U.M),ue):(ne.dy=a.Q,a.P(_.b2,ue,s),ce=ne.fy.fr,ce!=null&&ce.P(_.X,ue,s),ce=s.c,ce.push(ue),a=ne.fy.fr,a!=null&&a.Q!==-1&&s.R(j.qb()),f=ve.d2(ne.fy),_.d.F(_.af,f)?(a=ne.fr,g=a!==-1?a-1:-1,a=ne.r,y=a!==-1?_.c.aA(1,a):-1,y!==0&&g>=-1&&(a=ne.fy,S=s.O(),C=_.c.bA(ne.dy,3),R=ne.fy.z,D=new Uint32Array(3),s.W(a,new Pe.ev(g,C,Re.pb(R),(16&y)==16,D,S)))):s.E(j.qa(),p.a([f,_.af],U.M)),ce.pop())),ce=ne.dy,ce!==-1?(a=ne.r,a===1&&ce%2!=0||(a===2||a===3)&&ce<2||a===4&&ce%3!=0?ce=!0:ce=(a===5||a===6)&&ce<3):ce=!1,ce&&s.E(j.q9(),p.a([ne.dy,_.c7[ne.r]],U.M)),ce=ne.f,ne.go=n.cx.j(0,ce),H=E.nO(ne.db,new Pe.jh,!1,U.e),ce!==-1&&(a=ne.go,a==null?s.k(j.N(),p.a([ce],U.M),"material"):(a.a$=!0,a.dx.J(0,new Pe.ji(ne,s,H)))),ce=_.d.gC(H),a=new p.cm(ce,new Pe.jj,p.U(H).h("cm<1>")),S=s.c;a.n();)C=ce.gq(),S.push(te),s.p(j.fD(),"TEXCOORD_"+p.b(C)),S.pop();if(ce=ne.x,ce!=null){for(a=s.c,a.push("targets"),S=new Array(ce.length),S.fixed$length=Array,ne.fx=p.a(S,U.ar),S=U.X,C=U.W,q=0;q<ce.length;++q)K=ce[q],ne.fx[q]=E.a5(S,C),a.push(_.c.l(q)),K.J(0,new Pe.jk(ne,n,s,q)),a.pop();a.pop()}},c7:function(n,s,a){var f,g=n.fr;g.Q===-1&&(f=a.x.bS(g,new Pe.jf),f.B(0,n)&&f.gi(f)>1&&a.p(j.q8(),s))}},Pe.jc.prototype={$1:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue=this;if(!(n.length!==0&&_.a.H(n,0)===95))switch(n){case"POSITION":ue.a.c=!0;break;case"NORMAL":ue.a.b=!0;break;case"TANGENT":ue.a.a=!0;break;default:if(s=n.split("_"),a=s[0],!_.d.F(_.bY,a)||s.length!==2){ue.b.p(j.mw(),n);break}if(f=s[1],f.toString,g=new p.cu(f),g.gi(g)===0)y=0,S=!1;else if(C=f.length,C===1)y=_.a.H(f,0)-48,S=!(y<0||y>9)||!1;else for(y=0,R=0;;){if(!(R<C)){S=!0;break}if(D=_.a.H(f,R)-48,D<=9&&D>=0?H=R===0&&D===0:H=!0,H){S=!1;break}y=10*y+D,++R}if(S)switch(a){case"COLOR":f=ue.a,++f.d,q=f.e,f.e=y>q?y:q;break;case"JOINTS":f=ue.a,++f.f,K=f.r,f.r=y>K?y:K;break;case"TEXCOORD":f=ue.a,++f.z,ne=f.Q,f.Q=y>ne?y:ne;break;case"WEIGHTS":f=ue.a,++f.x,te=f.y,f.y=y>te?y:te;break}else ue.b.p(j.mw(),n)}},$S:21},Pe.jd.prototype={$3:function(n,s,a){var f=n+1;return f!==s?(this.a.E(j.qK(),p.a([a,f,s],U.M)),0):s},$S:49},Pe.je.prototype={$1:function(n){var s=this.a;!s.k3.w(n)&&!Z.rE(n,"_")&&s.p(j.mw(),n)},$S:21},Pe.jg.prototype={$2:function(n,s){var a,f,g,y,S,C,R,D=this;if(s!==-1){if(a=D.b.f.j(0,s),a==null){D.c.k(j.N(),p.a([s],U.M),n);return}f=D.a,f.dx.m(0,n,a),g=D.c,a.P(_.W,n,g),y=a.fr,y!=null&&y.P(_.F,n,g),n==="POSITION"?y=a.db==null||a.cy==null:y=!1,y&&g.p(j.nh(),"POSITION"),S=ve.d2(a),C=g.k2.j(0,p.a(n.split("_"),U.s)[0]),C!=null&&(C.F(0,S)?n==="NORMAL"?(y=g.c,y.push("NORMAL"),R=g.O(),g.W(a,new oe.f4(R,a.z===5126?null:a.gbP())),y.pop()):n==="TANGENT"?(y=g.c,y.push("TANGENT"),R=g.O(),g.W(a,new oe.f5(R,a.z===5126?null:a.gbP())),y.pop()):_.a.V(n,"COLOR_")&&a.z===5126&&(y=g.c,y.push(n),g.W(a,new oe.en(g.O())),y.pop()):g.k(j.ng(),p.a([S,C],U.M),n)),y=a.y,y!==-1&&y%4!=0?y=!0:a.ga8()%4!=0?(y=a.fr,y=y!=null&&y.Q===-1):y=!1,y&&g.p(j.nf(),n),y=f.fr,y===-1?f.dy=f.fr=a.Q:y!==a.Q&&g.p(j.qf(),n),y=a.fr,y!=null&&y.Q===-1&&(y.db===-1&&(y.db=a.ga8()),f.c7(a,n,g))}},$S:7},Pe.jh.prototype={$1:function(n){return n},$S:18},Pe.ji.prototype={$2:function(n,s){s!==-1&&(s+1>this.a.db?this.b.k(j.qe(),p.a([n,s],U.M),"material"):this.c[s]=-1)},$S:7},Pe.jj.prototype={$1:function(n){return n!==-1},$S:8},Pe.jk.prototype={$2:function(n,s){var a,f,g,y,S,C,R=this;s!==-1&&(a=R.b.f.j(0,s),a==null?R.c.k(j.N(),p.a([s],U.M),n):(f=R.c,a.P(_.W,n,f),g=a.fr,g!=null&&g.P(_.F,n,f),y=R.a.dx.j(0,n),y==null?f.p(j.qd(),n):y.Q!==a.Q&&f.p(j.qc(),n),n==="POSITION"?g=a.db==null||a.cy==null:g=!1,g&&f.p(j.nh(),"POSITION"),S=ve.d2(a),C=f.k3.j(0,n),C!=null&&!C.F(0,S)&&f.k(j.ng(),p.a([S,C],U.M),n),g=a.y,g!==-1&&g%4!=0?g=!0:a.ga8()%4!=0?(g=a.fr,g=g!=null&&g.Q===-1):g=!1,g&&f.p(j.nf(),n),g=a.fr,g!=null&&g.Q===-1&&(g.db===-1&&(g.db=a.ga8()),R.a.c7(a,n,f))),R.a.fx[R.d].m(0,n,a))},$S:7},Pe.jf.prototype={$0:function(){return E.aR(U.W)},$S:52},Pe.ev.prototype={Y:function(n,s,a,f){var g,y,S=this,C=S.a;return f>C&&n.k(j.pi(),p.a([s,f,C],U.M),S.cy),f===S.c&&n.k(j.pj(),p.a([f,s],U.M),S.cy),S.x&&(C=S.cx,g=S.Q,C[g]=f,++g,S.Q=g,g===3&&(S.Q=0,g=C[0],y=C[1],g!==y?(C=C[2],C=y===C||C===g):C=!0,C&&++S.ch)),!0},aw:function(n){var s=this.ch;return s>0&&n.k(j.pk(),p.a([s,this.b],U.M),this.cy),!0}},ve.ah.prototype={v:function(n,s){var a,f,g,y=this,S=y.x;y.fr=n.Q.j(0,S),a=y.z,y.id=n.fx.j(0,a),f=y.ch,y.fy=n.cy.j(0,f),S!==-1&&(g=y.fr,g==null?s.k(j.N(),p.a([S],U.M),"camera"):g.a$=!0),a!==-1&&(S=y.id,S==null?s.k(j.N(),p.a([a],U.M),"skin"):S.a$=!0),f!==-1&&(S=y.fy,S==null?s.k(j.N(),p.a([f],U.M),"mesh"):(S.a$=!0,S=S.x,S!=null&&(a=y.dx,a!=null?(S=S.j(0,0).fx,S=S==null?null:S.length,S=S!==a.length):S=!1,S&&(S=j.qk(),a=a.length,f=y.fy.x.j(0,0).fx,s.k(S,p.a([a,f==null?null:f.length],U.M),"weights")),y.id!=null?(S=y.fy.x,S.b4(S,new ve.jo)&&s.R(j.qi())):(S=y.fy.x,S.bC(S,new ve.jp)&&s.R(j.qj()))))),S=y.y,S!=null&&(a=new Array(S.gi(S)),a.fixed$length=Array,a=p.a(a,U.R),y.fx=a,oe.n4(S,a,n.db,"children",s,new ve.jq(y,s)))},c5:function(n,s){var a,f,g,y,S=this;if(S.dy.B(0,n),!(S.fx==null||!s.B(0,S)))for(a=S.fx,f=a.length,g=0;g<f;++g)y=a[g],y!=null&&y.c5(n,s)}},ve.jo.prototype={$1:function(n){return n.cx===0},$S:3},ve.jp.prototype={$1:function(n){return n.cx!==0},$S:3},ve.jq.prototype={$3:function(n,s,a){n.go!=null&&this.b.aE(j.qh(),p.a([s],U.M),a),n.go=this.a},$S:9},Me.bv.prototype={},Te.bw.prototype={v:function(n,s){var a,f=this.x;f!=null&&(a=new Array(f.gi(f)),a.fixed$length=Array,a=p.a(a,U.R),this.y=a,oe.n4(f,a,n.db,"nodes",s,new Te.jz(this,s)))}},Te.jz.prototype={$3:function(n,s,a){n.go!=null&&this.b.aE(j.ql(),p.a([s],U.M),a),n.c5(this.a,E.aR(U.L))},$S:9},Oe.by.prototype={v:function(n,s){var a,f,g,y,S,C=this,R="inverseBindMatrices",D="skeleton",H=C.x;C.Q=n.f.j(0,H),a=n.db,f=C.y,C.cx=a.j(0,f),g=C.z,g!=null&&(y=new Array(g.gi(g)),y.fixed$length=Array,y=p.a(y,U.R),C.ch=y,oe.n4(g,y,a,"joints",s,new Oe.kB(C)),C.cy.a===0&&s.p(j.r3(),"joints")),H!==-1&&(a=C.Q,a==null?s.k(j.N(),p.a([H],U.M),R):(a.P(_.b1,R,s),H=C.Q.fr,H!=null&&H.P(_.b3,R,s),H=s.c,H.push(R),a=C.Q.fr,a!=null&&a.Q!==-1&&s.R(j.qm()),S=ve.d2(C.Q),S.N(0,_.P)?s.W(C.Q,new Oe.eu(s.O())):s.E(j.qn(),p.a([S,p.a([_.P],U.p)],U.M)),a=C.ch,a!=null&&C.Q.Q!==a.length&&s.E(j.q7(),p.a([a.length,C.Q.Q],U.M)),H.pop())),f!==-1&&(H=C.cx,H==null?s.k(j.N(),p.a([f],U.M),D):C.cy.F(0,H)||s.p(j.r4(),D))}},Oe.kB.prototype={$3:function(n,s,a){var f,g,y;for(n.k1=!0,f=E.aR(U.L),g=n;g!=null&&f.B(0,g);)g=g.go;y=this.a.cy,y.a===0?y.K(0,f):y.dk(f.gcA(f),!1)},$S:9},Oe.eu.prototype={Y:function(n,s,a,f){var g;return a===3&&f!==0||a===7&&f!==0||a===11&&f!==0?g=!0:g=a===15&&f!==1,g&&n.k(j.pm(),p.a([s,a,f],U.M),this.a),!0}},ze.bA.prototype={v:function(n,s){var a,f,g=this,y=g.y;g.Q=n.ch.j(0,y),a=g.x,g.z=n.dx.j(0,a),y!==-1&&(f=g.Q,f==null?s.k(j.N(),p.a([y],U.M),"source"):f.a$=!0),a!==-1&&(y=g.z,y==null?s.k(j.N(),p.a([a],U.M),"sampler"):y.a$=!0)},bY:function(n,s){var a,f=this.Q;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&!_.d.F(_.ae,a)&&s.k(j.ni(),p.a([a,_.ae],U.M),"source")},$ick:1},ye.kV.prototype={},ye.j.prototype={W:function(n,s){Z.mx(this.d.bS(n,new ye.fR),s)},aa:function(n,s){var a,f,g;for(a=Z.a_(s),f=this.e;a.n();)g=a.gq(),g!=null&&f.m(0,g,n)},c0:function(n){var s,a,f,g=this.c;return g.length===0&&n!=null&&_.a.V(n,"/")?n:(s=n!=null,s&&g.push(n),a=this.go,f=a.a+="/",a.a=E.mJ(f,new p.a8(g,new ye.fT,p.U(g).h("a8<1,f*>")),"/"),s&&g.pop(),g=a.a,a.a="",g.charCodeAt(0)==0,g)},O:function(){return this.c0(null)},e4:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue=this,ce="/extensionsUsed/";for(_.d.K(ue.cx,n),a=Z.M(n),f=ue.db,g=ue.fx,y=_.d3.a,S=U.M,C=Z.M(s),R=0;R<a.gi(n);++R){if(D=a.j(n,R),H=j.pe().aG(D),q=H==null?null:H.b[1],q==null?ue.p(j.qF(),ce+R):y.w(q)||(H=j.r7(),K=ce+R,ue.k(H,p.a([q],S),K)),ne=g.b5(0,new ye.fW(D),new ye.fX(D)),ne==null){H=j.qq(),K=ce+R,ue.k(H,p.a([D],S),K);continue}ne.b.J(0,new ye.fY(ue,ne)),H=ne.c,H!=null&&H.$1(ue),H=ne.d&&!C.F(s,D),H&&(H=j.r1(),K=ce+R,ue.k(H,p.a([D],S),K)),f.push(D)}for(R=0;R<C.gi(s);++R)te=C.j(s,R),a.F(n,te)||(f=j.r8(),g="/extensionsRequired/"+R,ue.k(f,p.a([te],S),g))},a6:function(n,s,a,f,g,y){var S,C,R,D=this,H=D.b,q=n.b;if(!H.b.F(0,q)){if(S=H.a,S>0&&D.fy.length===S)throw D.z=!0,p.c(_.b7);H=H.c,C=H!=null?H.j(0,q):null,y!=null?D.fy.push(new $.cA(n,C,null,y,s)):(R=a!=null?_.c.l(a):f,H=g?"":D.c0(R),D.fy.push(new $.cA(n,C,H,null,s)))}},p:function(n,s){return this.a6(n,null,null,s,!1,null)},E:function(n,s){return this.a6(n,s,null,null,!1,null)},k:function(n,s,a){return this.a6(n,s,null,a,!1,null)},R:function(n){return this.a6(n,null,null,null,!1,null)},av:function(n,s,a){return this.a6(n,s,null,null,a,null)},X:function(n,s){return this.a6(n,null,s,null,!1,null)},aE:function(n,s,a){return this.a6(n,s,a,null,!1,null)},bB:function(n,s){return this.a6(n,null,null,null,!1,s)},a_:function(n,s,a){return this.a6(n,s,null,null,!1,a)}},ye.fS.prototype={$1:function(n){return n.a},$S:55},ye.fR.prototype={$0:function(){return p.a([],U.gd)},$S:56},ye.fT.prototype={$1:function(n){var s;return n.toString,s=p.pa(n,"~","~0"),p.pa(s,"/","~1")},$S:57},ye.fW.prototype={$1:function(n){return n.a===this.a},$S:22},ye.fX.prototype={$0:function(){return _.d.b5(_.ak,new ye.fU(this.a),new ye.fV)},$S:59},ye.fU.prototype={$1:function(n){return n.a===this.a},$S:22},ye.fV.prototype={$0:function(){return null},$S:2},ye.fY.prototype={$2:function(n,s){this.a.Q.m(0,new $e.c1(n,this.b.a),s)},$S:60},ye.c4.prototype={$ia3:1},_e.dK.prototype={l:function(n){return this.b}},_e.dy.prototype={l:function(n){return this.b}},_e.cL.prototype={l:function(n){return this.b}},_e.c2.prototype={l:function(n){return this.b}},_e.c3.prototype={},_e.i7.prototype={$1:function(n){var s,a,f,g=this.a;if(!g.c)if(Z.X(n)<9){g.a.I(),this.b.M(_.a2);return}else{switch(s=_e.tc(n),a=g.a,f=this.b,s){case _.aB:g.b=new _e.ij(f,a);break;case _.aC:s=new Uint8Array(13),g.b=new _e.jr(_.r,_.p,s,new Uint8Array(32),f,a);break;case _.aD:g.b=new _e.kZ(new Uint8Array(30),f,a);break;default:a.I(),f.M(_.bf);return}g.c=!0}g.b.B(0,n)},$S:23},_e.i9.prototype={$1:function(n){this.a.a.I(),this.b.M(n)},$S:24},_e.i8.prototype={$0:function(){var n=this.a.b;n.b.I(),n=n.a,n.a.a===0&&n.M(_.a2)},$C:"$0",$R:0,$S:2},_e.i6.prototype={$2:function(n,s){var a,f,g;for(a=s.length,f=Z.M(n),g=0;g<a;++g)if(!Z.aA(f.j(n,g),s[g]))return!1;return!0},$S:63},_e.i5.prototype={},_e.ij.prototype={B:function(n,s){var a,f;try{this.du(s)}catch(g){if(f=p.E(g),f instanceof _e.aP)a=f,this.b.I(),this.a.M(a);else throw g}},du:function(n){var s,a,f,g,y,S,C,R,D,H,q=this,K=new _e.il,ne=new _e.ik;for(s=Z.M(n),a=0,f=0;a!==s.gi(n);){switch(g=s.j(n,a),q.c){case 0:if(g===255)q.c=255;else throw p.c(_.bB);break;case 255:ne.$1(g)&&(q.c=1,q.d=g,q.e=q.f=0);break;case 1:q.e=g<<8>>>0,q.c=2;break;case 2:if(y=q.e+g,q.e=y,y<2)throw p.c(_.bA);K.$1(q.d)&&(y=q.e,q.r=new Uint8Array(y-2)),q.c=3;break;case 3:if(f=Math.min(s.gi(n)-a,q.e-q.f-2),y=K.$1(q.d),S=q.f,C=S+f,y){if(y=q.r,q.f=C,(y&&_.j).a0(y,S,C,n,a),q.f===q.e-2){q.b.I(),n=q.r,R=n[0],s=n[1],y=n[2],S=n[3],C=n[4],D=n[5],D===3?H=_.n:H=D===1?_.a5:_.I,q.a.T(new _e.c3("image/jpeg",R,H,(S<<8|C)>>>0,(s<<8|y)>>>0,_.p,_.r,!1,!1));return}}else q.f=C,C===q.e-2&&(q.c=255);a+=f;continue}++a}}},_e.il.prototype={$1:function(n){return(n&240)==192&&n!==196&&n!==200&&n!==204||n===222},$S:8},_e.ik.prototype={$1:function(n){return!(n===1||(n&248)==208||n===216||n===217||n===255)},$S:8},_e.jr.prototype={B:function(n,s){var a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce=this,ge=new _e.js(ce);for(a=Z.M(s),f=ce.dx,g=ce.db,y=0,S=0;y!==a.gi(s);){switch(C=a.j(s,y),ce.y){case 0:y+=8,ce.y=1;continue;case 1:ce.c=(ce.c<<8|C)>>>0,++ce.d==4&&(ce.y=2);break;case 2:if(R=(ce.e<<8|C)>>>0,ce.e=R,++ce.f==4){switch(R){case 1229472850:if(ce.c!==13){ce.b.I(),a=ce.a,a.a.a===0&&a.M(_.o);return}ce.z=!0;break;case 1951551059:ce.Q=!0;break;case 1665684045:if(ce.c!==32){ce.b.I(),a=ce.a,a.a.a===0&&a.M(_.o);return}break;case 1934772034:if(ce.c!==1){ce.b.I(),a=ce.a,a.a.a===0&&a.M(_.o);return}break;case 1883789683:if(ce.c!==9){ce.b.I(),a=ce.a,a.a.a===0&&a.M(_.o);return}break;case 1732332865:if(ce.c!==4){ce.b.I(),a=ce.a,a.a.a===0&&a.M(_.o);return}break;case 1766015824:ce.ch=_.z,ce.cx=_.y;break;case 1229209940:switch(ce.b.I(),ce.z||ce.a.M(_.bz),a=g.buffer,s=new DataView(a,0),D=s.getUint32(0,!1),H=s.getUint32(4,!1),q=s.getUint8(8),s.getUint8(9)){case 0:K=ce.Q?_.a6:_.a5;break;case 2:case 3:K=ce.Q?_.w:_.n;break;case 4:K=_.a6;break;case 6:K=_.w;break;default:K=_.I}a=ce.cx,a===_.p&&(a=ce.cx=_.q),f=ce.ch,f===_.r&&(f=ce.ch=_.t),ce.a.T(new _e.c3("image/png",q,K,D,H,a,f,ce.cy,!1));return}ce.c===0?ce.y=4:ce.y=3}break;case 3:switch(R=a.gi(s),ne=ce.c,te=ce.x,S=Math.min(R-y,ne-te),ce.e){case 1229472850:R=te+S,ce.x=R,_.j.a0(g,te,R,s,y);break;case 1665684045:case 1732332865:case 1883789683:R=te+S,ce.x=R,_.j.a0(f,te,R,s,y);break;case 1934772034:ce.ch=_.t,ce.cx=_.q,ce.x=te+1;break;default:ce.x=te+S}if(ce.x===ce.c){switch(ce.e){case 1665684045:ce.cx===_.p&&ce.da();break;case 1732332865:ce.ch===_.r&&ce.dc();break;case 1883789683:R=f.buffer,ue=new DataView(R,0),ue.getUint32(0,!1)!==ue.getUint32(4,!1)&&(ce.cy=!0);break}ce.y=4}y+=S;continue;case 4:++ce.r==4&&(ge.$0(),ce.y=1);break}++y}},dc:function(){var n=this;if(n.ch!==_.t)switch(p.jm(n.dx.buffer,0,null).getUint32(0,!1)){case 45455:n.ch=_.t;break;case 1e5:n.ch=_.dx;break;default:n.ch=_.z}},da:function(){var n,s=this;s.cx!==_.q&&(n=p.jm(s.dx.buffer,0,null),n.getUint32(0,!1)===31270&&n.getUint32(4,!1)===32900&&n.getUint32(8,!1)===64e3&&n.getUint32(12,!1)===33e3&&n.getUint32(16,!1)===3e4&&n.getUint32(20,!1)===6e4&&n.getUint32(24,!1)===15e3&&n.getUint32(28,!1)===6e3?s.cx=_.q:s.cx=_.y)}},_e.js.prototype={$0:function(){var n=this.a;n.r=n.x=n.f=n.e=n.d=n.c=0},$S:1},_e.kZ.prototype={B:function(n,s){var a,f,g,y,S,C,R,D=this,H=Z.X(s),q=D.d,K=D.c;if(H=q+Math.min(H,30-q),D.d=H,_.j.d0(K,q,H,s),H=D.d,H>=25?H=H<30&&K[15]!==76:H=!0,!H){if(D.b.I(),a=p.jm(K.buffer,0,null),a.getUint32(0,!1)!==1380533830||a.getUint32(8,!1)!==1464156752){D.c3(_.a7);return}switch(a.getUint32(12,!1)){case 1448097824:f=a.getUint16(26,!0)&16383,g=a.getUint16(28,!0)&16383,y=_.n,S=!1,C=!1;break;case 1448097868:H=K[21],q=K[22],f=1+((H|(q&63)<<8)>>>0),H=K[23],K=K[24],g=1+((q>>>6|H<<2|(K&15)<<10)>>>0),y=(K&16)==16?_.w:_.n,S=!1,C=!1;break;case 1448097880:R=K[20],C=(R&2)==2,S=(R&32)==32,y=(R&16)==16?_.w:_.n,f=((K[24]|K[25]<<8|K[26]<<16)>>>0)+1,g=((K[27]|K[28]<<8|K[29]<<16)>>>0)+1;break;default:D.c3(_.a7);return}H=S?_.z:_.t,q=S?_.y:_.q,D.a.T(new _e.c3("image/webp",8,y,f,g,q,H,!1,C))}},c3:function(n){var s;this.b.I(),s=this.a,s.a.a===0&&s.M(n)}},_e.dw.prototype={$ia3:1},_e.dv.prototype={$ia3:1},_e.aP.prototype={l:function(n){return this.a},$ia3:1},He.cR.prototype={l:function(n){return this.b}},He.eX.prototype={bc:function(){var n,s=this,a=U.X,f=U._,g=E.a5(a,f);return g.m(0,"pointer",s.a),n=s.b,n!=null&&g.m(0,"mimeType",n),n=s.c,n!=null&&g.m(0,"storage",_.c6[n.a]),n=s.e,n!=null&&g.m(0,"uri",n),n=s.d,n!=null&&g.m(0,"byteLength",n),n=s.f,n==null?a=null:(a=E.a5(a,f),a.m(0,"width",n.d),a.m(0,"height",n.e),f=n.c,f!==_.I&&a.m(0,"format",_.cI[f.a]),f=n.f,f!==_.p&&a.m(0,"primaries",_.cB[f.a]),f=n.r,f!==_.r&&a.m(0,"transfer",_.cA[f.a]),f=n.b,f>0&&a.m(0,"bits",f)),a!=null&&g.m(0,"image",a),g}},He.jw.prototype={aJ:function(){return this.e9()},e9:function(){var n=0,s=E.ec(U.H),a,f=2,g,y=this,S,C,R=E.ee(function(D,H){for(D===1&&(g=H,n=f);;)switch(n){case 0:return S=!0,f=4,n=7,E.cV(y.aY(),R);case 7:return n=8,E.cV(y.aZ(),R);case 8:S&&Oe.wb(y.a,y.b),y.a.ez(y.b),f=2,n=6;break;case 4:if(f=3,C=g,p.E(C)instanceof ye.c4){n=1;break}else throw C;case 3:n=2;break;case 6:case 1:return E.e6(a,s);case 2:return E.e5(g,s)}});return E.e7(R,s)},aY:function(){var n=0,s=E.ec(U.H),a=1,f,g=this,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt=E.ee(function(mt,wn){for(mt===1&&(f=wn,n=a);;)switch(n){case 0:Ge=g.b,St=Ge.c,_.d.si(St,0),St.push("buffers"),D=g.a.y,H=D.b,q=Ge.dy,K=U.M,ne=U.y,te=U.a,D=D.a,ue=D.length,ce=0;case 2:if(!(ce<H)){n=4;break}if(ge=ce>=ue,y=ge?null:D[ce],y==null){n=3;break}return St.push(_.c.l(ce)),Ne=new He.eX(Ge.O()),Ne.b="application/gltf-buffer",S=new He.jx(g,Ne,ce),C=null,a=6,Mt=te,n=9,E.cV(S.$1(y),dt);case 9:C=Mt.a(wn),a=1,n=8;break;case 6:if(a=5,ct=f,ge=p.E(ct),ne.b(ge))R=ge,Ge.k(j.mt(),p.a([R],K),"uri");else throw ct;n=8;break;case 5:n=1;break;case 8:C!=null&&(Ne.d=Z.X(C),Z.X(C)<y.y?Ge.E(j.px(),p.a([Z.X(C),y.y],K)):(Ge.id&&ce===0&&!y.z&&(ge=y.y,Xe=ge+(4-(ge&3)&3),Z.X(C)>Xe&&Ge.E(j.py(),p.a([Z.X(C)-Xe],K))),ge=y,ge.Q==null&&(ge.Q=C))),q.push(Ne.bc()),St.pop();case 3:++ce,n=2;break;case 4:return E.e6(null,s);case 1:return E.e5(f,s)}});return E.e7(dt,s)},aZ:function(){var n=0,s=E.ec(U.H),a=1,f,g=this,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge,Ne,Xe,Ge,St,ct,Mt,dt,mt=E.ee(function(wn,Zt){for(wn===1&&(f=Zt,n=a);;)switch(n){case 0:ct=g.b,Mt=ct.c,_.d.si(Mt,0),Mt.push("images"),K=g.a.ch,ne=K.b,te=ct.dy,ue=U.M,ce=U.y,ge=ct.k1,K=K.a,Ne=K.length,Xe=0;case 2:if(!(Xe<ne)){n=4;break}if(Ge=Xe>=Ne,y=Ge?null:K[Xe],y==null){n=3;break}Mt.push(_.c.l(Xe)),St=new He.eX(ct.O()),S=new He.jy(g,St),C=null;try{C=S.$1(y)}catch(_n){if(Ge=p.E(_n),ce.b(Ge))R=Ge,ct.k(j.mt(),p.a([R],ue),"uri");else throw _n}D=null,n=C!=null?5:6;break;case 5:return a=8,n=11,E.cV(_e.td(C),mt);case 11:D=Zt,Ge=D,_.d.F(ge,Ge.a)||ct.E(j.pC(),p.a([D.a],ue)),a=1,n=10;break;case 8:if(a=7,dt=f,Ge=p.E(dt),Ge instanceof _e.dw)ct.R(j.pF());else if(Ge instanceof _e.dv)ct.R(j.pE());else if(Ge instanceof _e.aP)H=Ge,ct.E(j.pz(),p.a([H],ue));else if(ce.b(Ge))q=Ge,ct.k(j.mt(),p.a([q],ue),"uri");else throw dt;n=10;break;case 7:n=1;break;case 10:D!=null&&(St.b=D.a,y.y!=null&&y.y!==D.a&&ct.E(j.pB(),p.a([D.a,y.y],ue)),Ge=D.d,Ge!==0&&(Ge&Ge-1)>>>0==0?(Ge=D.e,Ge=!(Ge!==0&&(Ge&Ge-1)>>>0==0)):Ge=!0,Ge&&ct.E(j.pD(),p.a([D.d,D.e],ue)),Ge=D,(Ge.f===_.y||Ge.r===_.z||D.y||D.x)&&ct.R(j.pA()),y.cx=D,St.f=D);case 6:te.push(St.bc()),Mt.pop();case 3:++Xe,n=2;break;case 4:return E.e6(null,s);case 1:return E.e5(f,s)}});return E.e7(mt,s)}},He.jx.prototype={$1:function(n){var s,a,f,g=this;if(n.a.a===0){if(s=n.x,s!=null)return a=g.b,a.c=_.aF,a.e=s.l(0),g.a.c.$1(s);if(s=n.Q,s!=null)return g.b.c=_.aE,s;if(s=g.a,a=s.b,a.id&&g.c===0&&!n.z)return g.b.c=_.dA,f=s.c.$0(),f==null&&a.R(j.q4()),f}return null},$S:64},He.jy.prototype={$1:function(n){var s,a,f=this;if(n.a.a===0){if(s=n.z,s!=null)return a=f.b,a.c=_.aF,a.e=s.l(0),f.a.d.$1(s);if(s=n.Q,s!=null&&n.y!=null)return f.b.c=_.aE,E.mI(p.a([s],U.d),U.w);if(n.ch!=null&&(f.b.c=_.dz,n.ew(),s=n.Q,s!=null))return E.mI(p.a([s],U.d),U.w)}return null},$S:65},Oe.mq.prototype={$2:function(n,s){var a,f,g,y,S,C,R,D,H=Oe.lX(s);if((H==null?null:H.dx)!=null&&(H=this.a,a=H.c,_.d.si(a,0),a.push("accessors"),a.push(_.c.l(n)),f=s.dx.ge3(),f!=null))for(a=f.length,g=s.Q,y=U.M,S=0,C=-1,R=0;R<a;++R,C=D)D=f[R],C!==-1&&D<=C&&H.k(j.pt(),p.a([S,D,C],y),"sparse"),D>=g&&H.k(j.ps(),p.a([S,D,g],y),"sparse"),++S},$S:66},Oe.mr.prototype={$1:function(n){return n.cx===0},$S:3},Oe.ms.prototype={$2:function(n,s){var a,f,g,y,S,C,R,D,H=this,q=s.fr,K=s.cx,ne=new Array(K);for(ne.fixed$length=Array,a=p.a(ne,U.fK),ne=new Array(K),ne.fixed$length=Array,f=p.a(ne,U.e2),ne=U.hc,y=s.dx,S=0;;){if(!(S<K)){g=!1;break}if(C=Oe.lX(y.j(0,"JOINTS_"+S)),R=Oe.lX(y.j(0,"WEIGHTS_"+S)),(C==null?null:C.Q)===q?D=(R==null?null:R.Q)!==q:D=!0,D){g=!0;break}D=ne.a(C).ac(),a[S]=new E.aB(D.a(),p.r(D).h("aB<1>")),D=R.bf(),f[S]=new E.aB(D.a(),p.r(D).h("aB<1>")),++S}g||(K=H.b,ne=K.c,ne.push(_.c.l(n)),ne.push("attributes"),y=H.c,_.d.K(y,a),_.d.K(y,f),K=K.O(),y=H.a,H.d.push(new Oe.ey(a,f,y.b-1,y.a,K,E.aR(U.e))),ne.pop(),ne.pop())},$S:20},Oe.lZ.prototype={$1:function(n){return n.gq()==null},$S:67},Oe.ey.prototype={dR:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue=this;for(s=ue.a,a=s.length,f=ue.b,g=ue.c,y=ue.e,S=U.M,C=ue.Q,R=ue.d,D=0;D<a;++D){if(H=s[D].gq(),H==null){ue.x=!0;return}if(H>g){q=j.pp(),K=y+"/JOINTS_"+D,n.k(q,p.a([ue.f,ue.r,H,g,R],S),K);continue}ne=f[D].gq(),ne!==0?(C.B(0,H)?te=!0:(q=j.po(),K=y+"/JOINTS_"+D,n.k(q,p.a([ue.f,ue.r,H],S),K),te=!1),ne<0?(q=j.pu(),K=y+"/WEIGHTS_"+D,n.k(q,p.a([ue.f,ue.r,ne],S),K)):te&&(q=ue.y,K=j.nr(),K[0]=q+ne,ue.y=K[0],ue.z+=2e-7)):H!==0&&(q=j.pq(),K=y+"/JOINTS_"+D,n.k(q,p.a([ue.f,ue.r,H],S),K))}if(++ue.r==4){if(Math.abs(ue.y-1)>ue.z)for(D=0;D<a;++D)s=j.pv(),f=y+"/WEIGHTS_"+D,g=ue.f,n.k(s,p.a([g-3,g,ue.y],S),f);C.cz(0),ue.y=ue.z=ue.r=0}++ue.f}},$.bx.prototype={l:function(n){return this.b}},$.ic.prototype={},$.fZ.prototype={},$.h8.prototype={$1:function(n){return"Actual Data URI encoded data length "+p.b(n[0])+" is not equal to the declared buffer byteLength "+p.b(n[1])+"."},$S:0},$.h6.prototype={$1:function(n){return"Actual data length "+p.b(n[0])+" is less than the declared buffer byteLength "+p.b(n[1])+"."},$S:0},$.h5.prototype={$1:function(n){return"GLB-stored BIN chunk contains "+p.b(n[0])+" extra padding byte(s)."},$S:0},$.hd.prototype={$1:function(n){return"Declared minimum value for this component ("+p.b(n[0])+") does not match actual minimum ("+p.b(n[1])+")."},$S:0},$.ha.prototype={$1:function(n){return"Declared maximum value for this component ("+p.b(n[0])+") does not match actual maximum ("+p.b(n[1])+")."},$S:0},$.hb.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) less than declared minimum value "+p.b(n[1])+"."},$S:0},$.h9.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) greater than declared maximum value "+p.b(n[1])+"."},$S:0},$.hm.prototype={$1:function(n){return"Vector3 at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},$.ho.prototype={$1:function(n){return"Vector3 with sign at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" has invalid w component: "+p.b(n[2])+". Must be 1.0 or -1.0."},$S:0},$.hf.prototype={$1:function(n){return"Animation sampler output accessor element at indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},$.hl.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is not clamped to 0..1 range: "+p.b(n[1])+"."},$S:0},$.he.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is "+p.b(n[1])+"."},$S:0},$.hk.prototype={$1:function(n){return"Indices accessor element at index "+p.b(n[0])+" has value "+p.b(n[1])+" that is greater than the maximum vertex index available ("+p.b(n[2])+")."},$S:0},$.hi.prototype={$1:function(n){return"Indices accessor contains "+p.b(n[0])+" degenerate triangles (out of "+p.b(n[1])+")."},$S:0},$.hj.prototype={$1:function(n){return"Indices accessor contains primitive restart value ("+p.b(n[0])+") at index "+p.b(n[1])+"."},$S:0},$.hh.prototype={$1:function(n){return Wt.m+p.b(n[0])+" is negative: "+p.b(n[1])+"."},$S:0},$.hg.prototype={$1:function(n){return Wt.m+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},$.hr.prototype={$1:function(n){return Wt.c+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},$.hq.prototype={$1:function(n){return Wt.c+p.b(n[0])+" is greater than or equal to the number of accessor elements: "+p.b(n[1])+" >= "+p.b(n[2])+"."},$S:0},$.hp.prototype={$1:function(n){return"Matrix element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") contains invalid value: "+p.b(n[2])+"."},$S:0},$.hv.prototype={$1:function(n){return"Image data is invalid. "+p.b(n[0])},$S:0},$.hu.prototype={$1:function(n){return"Recognized image format "+("'"+p.b(n[0])+"'")+" does not match declared image format "+("'"+p.b(n[1])+"'")+"."},$S:0},$.h2.prototype={$1:function(n){return"Unexpected end of image stream."},$S:0},$.h3.prototype={$1:function(n){return"Image format not recognized."},$S:0},$.h4.prototype={$1:function(n){return"'"+p.b(n[0])+"' MIME type requires an extension."},$S:0},$.ht.prototype={$1:function(n){return"Image has non-power-of-two dimensions: "+p.b(n[0])+"x"+p.b(n[1])+"."},$S:0},$.hs.prototype={$1:function(n){return"Image contains unsupported features like non-default colorspace information, non-square pixels, or animation."},$S:0},$.h7.prototype={$1:function(n){return"Data URI is used in GLB container."},$S:0},$.hn.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is greater than the maximum joint index ("+p.b(n[3])+") set by skin "+p.b(n[4])+"."},$S:0},$.hc.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is already in use for the vertex."},$S:0},$.h1.prototype={$1:function(n){return"Weights accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has negative value "+p.b(n[2])+"."},$S:0},$.h_.prototype={$1:function(n){return"Weights accessor elements (at indices "+p.b(n[0])+".."+p.b(n[1])+") have non-normalized sum: "+p.b(n[2])+"."},$S:0},$.h0.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") is used with zero weight but has non-zero value ("+p.b(n[2])+")."},$S:0},$.ia.prototype={},$.ib.prototype={$1:function(n){return Z.ag(n[0])},$S:0},$.jA.prototype={},$.jK.prototype={$1:function(n){return"Invalid array length "+p.b(n[0])+". Valid lengths are: "+Z.bl(U.Y.a(n[1]),$.oT(),U.X).l(0)+"."},$S:0},$.jL.prototype={$1:function(n){var s=n[0];return"Type mismatch. Array element "+p.b(typeof s=="string"?"'"+s+"'":Z.ag(s))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},$.jQ.prototype={$1:function(n){return"Duplicate element."},$S:0},$.jO.prototype={$1:function(n){return"Index must be a non-negative integer."},$S:0},$.jI.prototype={$1:function(n){return"Invalid JSON data. Parser output: "+p.b(n[0])},$S:0},$.jE.prototype={$1:function(n){return"Invalid URI "+("'"+p.b(n[0])+"'")+`. Parser output:
`+p.b(n[1])},$S:0},$.jM.prototype={$1:function(n){return"Entity cannot be empty."},$S:0},$.jF.prototype={$1:function(n){return n.toString,"Exactly one of "+new p.a8(n,$.d0(),p.U(n).h("a8<1,f*>")).l(0)+" properties must be defined."},$S:0},$.jP.prototype={$1:function(n){return"Value "+("'"+p.b(n[0])+"'")+" does not match regexp pattern "+("'"+p.b(n[1])+"'")+"."},$S:0},$.jB.prototype={$1:function(n){var s=n[0];return"Type mismatch. Property value "+p.b(typeof s=="string"?"'"+s+"'":Z.ag(s))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},$.jJ.prototype={$1:function(n){var s=n[0];return"Invalid value "+p.b(typeof s=="string"?"'"+s+"'":Z.ag(s))+". Valid values are "+Z.bl(U.Y.a(n[1]),$.oT(),U.X).l(0)+"."},$S:0},$.jD.prototype={$1:function(n){return"Value "+p.b(n[0])+" is out of range."},$S:0},$.jG.prototype={$1:function(n){return"Value "+p.b(n[0])+" is not a multiple of "+p.b(n[1])+"."},$S:0},$.jC.prototype={$1:function(n){return"Property "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},$.jN.prototype={$1:function(n){return"Unexpected property."},$S:0},$.jH.prototype={$1:function(n){return"Dependency failed. "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},$.jR.prototype={},$.kp.prototype={$1:function(n){return"Unknown glTF major asset version: "+p.b(n[0])+"."},$S:0},$.ko.prototype={$1:function(n){return"Unknown glTF minor asset version: "+p.b(n[0])+"."},$S:0},$.ke.prototype={$1:function(n){return"Asset minVersion "+("'"+p.b(n[0])+"'")+" is greater than version "+("'"+p.b(n[1])+"'")+"."},$S:0},$.kc.prototype={$1:function(n){return"Invalid value "+p.b(n[0])+" for GL type "+("'"+p.b(n[1])+"'")+"."},$S:0},$.kd.prototype={$1:function(n){return"Integer value is written with fractional part: "+p.b(n[0])+"."},$S:0},$.kb.prototype={$1:function(n){return"Only (u)byte and (u)short accessors can be normalized."},$S:0},$.k9.prototype={$1:function(n){return"Offset "+p.b(n[0])+" is not a multiple of componentType length "+p.b(n[1])+"."},$S:0},$.ka.prototype={$1:function(n){return"Matrix accessors must be aligned to 4-byte boundaries."},$S:0},$.kk.prototype={$1:function(n){return"Sparse accessor overrides more elements ("+p.b(n[0])+") than the base accessor contains ("+p.b(n[1])+")."},$S:0},$.kl.prototype={$1:function(n){return"Animated TRS properties will not affect a skinned mesh."},$S:0},$.k8.prototype={$1:function(n){return"Buffer's Data URI MIME-Type must be 'application/octet-stream' or 'application/gltf-buffer'. Found "+("'"+p.b(n[0])+"'")+" instead."},$S:0},$.k7.prototype={$1:function(n){return"Buffer view's byteStride ("+p.b(n[0])+") is greater than byteLength ("+p.b(n[1])+")."},$S:0},$.k6.prototype={$1:function(n){return"Only buffer views with raw vertex data can have byteStride."},$S:0},$.k5.prototype={$1:function(n){return"xmag and ymag must not be zero."},$S:0},$.k3.prototype={$1:function(n){return"yfov should be less than Pi."},$S:0},$.k2.prototype={$1:function(n){return"zfar must be greater than znear."},$S:0},$.k0.prototype={$1:function(n){return"Alpha cutoff is supported only for 'MASK' alpha mode."},$S:0},$.jV.prototype={$1:function(n){return"Invalid attribute name."},$S:0},$.kz.prototype={$1:function(n){return"All primitives must have the same number of morph targets."},$S:0},$.ky.prototype={$1:function(n){return"All primitives should contain the same number of 'JOINTS' and 'WEIGHTS' attribute sets."},$S:0},$.k_.prototype={$1:function(n){return"No POSITION attribute found."},$S:0},$.jX.prototype={$1:function(n){return"Indices for indexed attribute semantic "+("'"+p.b(n[0])+"'")+" must start with 0 and be continuous. Total expected indices: "+p.b(n[1])+", total provided indices: "+p.b(n[2])+"."},$S:0},$.jZ.prototype={$1:function(n){return"TANGENT attribute without NORMAL found."},$S:0},$.jW.prototype={$1:function(n){return"Number of JOINTS attribute semantics ("+p.b(n[0])+") does not match the number of WEIGHTS ("+p.b(n[1])+")."},$S:0},$.jY.prototype={$1:function(n){return"TANGENT attribute defined for POINTS rendering mode."},$S:0},$.kx.prototype={$1:function(n){return"The length of weights array ("+p.b(n[0])+Wt.p+p.b(n[1])+")."},$S:0},$.kv.prototype={$1:function(n){return"A node can have either a matrix or any combination of translation/rotation/scale (TRS) properties."},$S:0},$.kq.prototype={$1:function(n){return"Do not specify default transform matrix."},$S:0},$.kf.prototype={$1:function(n){return"Matrix must be decomposable to TRS."},$S:0},$.kw.prototype={$1:function(n){return"Rotation quaternion must be normalized."},$S:0},$.kr.prototype={$1:function(n){return"Unused extension "+("'"+p.b(n[0])+"'")+" cannot be required."},$S:0},$.ks.prototype={$1:function(n){return"Extension "+("'"+p.b(n[0])+"'")+" cannot be optional."},$S:0},$.kt.prototype={$1:function(n){return"Extension uses unreserved extension prefix "+("'"+p.b(n[0])+"'")+"."},$S:0},$.ku.prototype={$1:function(n){return"Extension name has invalid format."},$S:0},$.kj.prototype={$1:function(n){return"Empty node encountered."},$S:0},$.ki.prototype={$1:function(n){return"Node with a skinned mesh is not root. Parent transforms will not affect a skinned mesh."},$S:0},$.kh.prototype={$1:function(n){return"Local transforms will not affect a skinned mesh."},$S:0},$.kg.prototype={$1:function(n){return"A node with a skinned mesh is used in a scene that does not contain joint nodes."},$S:0},$.kn.prototype={$1:function(n){return"Joints do not have a common root."},$S:0},$.km.prototype={$1:function(n){return"Skeleton node is not a common root."},$S:0},$.k1.prototype={$1:function(n){return"Non-relative URI found: "+("'"+p.b(n[0])+"'")+"."},$S:0},$.jT.prototype={$1:function(n){return"This extension may be incompatible with other extensions for the object."},$S:0},$.jS.prototype={$1:function(n){return"Prefer JSON Objects for extras."},$S:0},$.k4.prototype={$1:function(n){return"This property should not be defined as it will not be used."},$S:0},$.jU.prototype={$1:function(n){return"outerConeAngle ("+p.b(n[1])+") is less than or equal to innerConeAngle ("+p.b(n[0])+")."},$S:0},$.ir.prototype={},$.j0.prototype={$1:function(n){return"Accessor's total byteOffset "+p.b(n[0])+" isn't a multiple of componentType length "+p.b(n[1])+"."},$S:0},$.j5.prototype={$1:function(n){return"Referenced bufferView's byteStride value "+p.b(n[0])+" is less than accessor element's length "+p.b(n[1])+"."},$S:0},$.iQ.prototype={$1:function(n){return"Accessor (offset: "+p.b(n[0])+", length: "+p.b(n[1])+") does not fit referenced bufferView ["+p.b(n[2])+"] length "+p.b(n[3])+"."},$S:0},$.iC.prototype={$1:function(n){return"Override of previously set accessor usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},$.j6.prototype={$1:function(n){return"Animation channel has the same target as channel "+p.b(n[0])+"."},$S:0},$.iy.prototype={$1:function(n){return"Animation channel cannot target TRS properties of a node with defined matrix."},$S:0},$.ix.prototype={$1:function(n){return"Animation channel cannot target WEIGHTS when mesh does not have morph targets."},$S:0},$.iA.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for animation input accessor."},$S:0},$.iB.prototype={$1:function(n){return"Invalid Animation sampler input accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+"."},$S:0},$.iw.prototype={$1:function(n){return"Invalid animation sampler output accessor format "+("'"+p.b(n[0])+"'")+" for path "+("'"+p.b(n[2])+"'")+". Must be one of "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+"."},$S:0},$.iz.prototype={$1:function(n){return"Animation sampler output accessor with "+("'"+p.b(n[0])+"'")+" interpolation must have at least "+p.b(n[1])+" elements. Got "+p.b(n[2])+"."},$S:0},$.iv.prototype={$1:function(n){return"Animation sampler output accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},$.iF.prototype={$1:function(n){return"Buffer refers to an unresolved GLB binary chunk."},$S:0},$.iD.prototype={$1:function(n){return"BufferView does not fit buffer ("+p.b(n[0])+") byteLength ("+p.b(n[1])+")."},$S:0},$.j4.prototype={$1:function(n){return"Override of previously set bufferView target or usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},$.iE.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views containing image data."},$S:0},$.iX.prototype={$1:function(n){return"Accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},$.iI.prototype={$1:function(n){return"Invalid accessor format "+("'"+p.b(n[0])+"'")+" for this attribute semantic. Must be one of "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+"."},$S:0},$.iJ.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for POSITION attribute accessor."},$S:0},$.iG.prototype={$1:function(n){return"bufferView.byteStride must be defined when two or more accessors use the same buffer view."},$S:0},$.iH.prototype={$1:function(n){return"Vertex attribute data must be aligned to 4-byte boundaries."},$S:0},$.iP.prototype={$1:function(n){return"bufferView.byteStride must not be defined for indices accessor."},$S:0},$.iO.prototype={$1:function(n){return"Invalid indices accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+". "},$S:0},$.iN.prototype={$1:function(n){return"Number of vertices or indices ("+p.b(n[0])+") is not compatible with used drawing mode ("+("'"+p.b(n[1])+"'")+")."},$S:0},$.iM.prototype={$1:function(n){return"Material is incompatible with mesh primitive: Texture binding "+("'"+p.b(n[0])+"'")+" needs 'TEXCOORD_"+p.b(n[1])+"' attribute."},$S:0},$.iR.prototype={$1:function(n){return"All accessors of the same primitive must have the same count."},$S:0},$.iL.prototype={$1:function(n){return"No base accessor for this attribute semantic."},$S:0},$.iK.prototype={$1:function(n){return"Base accessor has different count."},$S:0},$.j3.prototype={$1:function(n){return"Node is a part of a node loop."},$S:0},$.iS.prototype={$1:function(n){return"Value overrides parent of node "+p.b(n[0])+"."},$S:0},$.iV.prototype={$1:function(n){var s="The length of weights array ("+p.b(n[0])+Wt.p,a=n[1];return s+p.b(a==null?0:a)+")."},$S:0},$.iU.prototype={$1:function(n){return"Node has skin defined, but mesh has no joints data."},$S:0},$.iT.prototype={$1:function(n){return"Node uses skinned mesh, but has no skin defined."},$S:0},$.iW.prototype={$1:function(n){return"Node "+p.b(n[0])+" is not a root node."},$S:0},$.iY.prototype={$1:function(n){return"Invalid IBM accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+". "},$S:0},$.iZ.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views used by inverse bind matrices accessors."},$S:0},$.iu.prototype={$1:function(n){return"Invalid MIME type "+("'"+p.b(n[0])+"'")+" for the texture source. Valid MIME types are "+Z.bl(U.Y.a(n[1]),$.d0(),U.X).l(0)+"."},$S:0},$.it.prototype={$1:function(n){return"Extension is not declared in extensionsUsed."},$S:0},$.is.prototype={$1:function(n){return"Unexpected location for this extension."},$S:0},$.j_.prototype={$1:function(n){return"Unresolved reference: "+p.b(n[0])+"."},$S:0},$.j1.prototype={$1:function(n){return"Cannot validate an extension as it is not supported by the validator: "+("'"+p.b(n[0])+"'")+"."},$S:0},$.j2.prototype={$1:function(n){return"This object may be unused."},$S:0},$.hy.prototype={},$.hE.prototype={$1:function(n){return"Invalid GLB magic value ("+p.b(n[0])+")."},$S:0},$.hD.prototype={$1:function(n){return"Invalid GLB version value "+p.b(n[0])+"."},$S:0},$.hC.prototype={$1:function(n){return"Declared GLB length ("+p.b(n[0])+") is too small."},$S:0},$.hM.prototype={$1:function(n){return"Length of "+p.b(n[0])+" chunk is not aligned to 4-byte boundaries."},$S:0},$.hA.prototype={$1:function(n){return"Declared length ("+p.b(n[0])+") does not match GLB length ("+p.b(n[1])+")."},$S:0},$.hL.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") length ("+p.b(n[1])+") does not fit total GLB length."},$S:0},$.hH.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") cannot have zero length."},$S:0},$.hI.prototype={$1:function(n){return"Chunk of type "+p.b(n[0])+" has already been used."},$S:0},$.hB.prototype={$1:function(n){return"Unexpected end of chunk header."},$S:0},$.hz.prototype={$1:function(n){return"Unexpected end of chunk data."},$S:0},$.hF.prototype={$1:function(n){return"Unexpected end of header."},$S:0},$.hK.prototype={$1:function(n){return"First chunk must be of JSON type. Found "+p.b(n[0])+" instead."},$S:0},$.hJ.prototype={$1:function(n){return"BIN chunk must be the second chunk."},$S:0},$.hG.prototype={$1:function(n){return"Unknown GLB chunk type: "+p.b(n[0])+"."},$S:0},$.cA.prototype={gba:function(){var n=Z.rI(this.a.c.$1(this.e));return n},gG:function(n){return _.a.gG(this.l(0))},N:function(n,s){return s==null?!1:s instanceof $.cA&&s.l(0)===this.l(0)},l:function(n){var s=this,a=s.c;return a!=null&&a.length!==0?p.b(a)+": "+s.gba():(a=s.d,a!=null?"@"+p.b(a)+": "+s.gba():s.gba())}},$e.c0.prototype={v:function(n,s){var a=this.d,f=this.e=n.ch.j(0,a);a!==-1&&(f==null?s.k(j.N(),p.a([a],U.M),"source"):f.a$=!0)},bY:function(n,s){var a,f=this.e;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&a!=="image/webp"&&s.k(j.ni(),p.a([a,_.cC],U.M),"source")},$ick:1},Le.bs.prototype={v:function(n,s){var a,f,g=s.c;g.push("lights"),a=this.d,f=Z.eA(g.slice(0),p.U(g).c),s.y.m(0,a,f),a.a9(new Le.iq(s,n)),g.pop()}},Le.iq.prototype={$2:function(n,s){var a=this.a.c;a.push(_.c.l(n)),a.pop()},$S:69},Le.b7.prototype={},Le.c6.prototype={},Le.c7.prototype={v:function(n,s){var a,f,g=n.a.j(0,"KHR_lights_punctual");g instanceof Le.bs?(a=this.d,f=this.e=g.d.j(0,a),a!==-1&&(f==null?s.k(j.N(),p.a([a],U.M),"light"):f.a$=!0)):s.E(j.d1(),p.a(["/extensions/KHR_lights_punctual"],U.M))}},Te.c8.prototype={v:function(n,s){var a,f=this.e;f!=null&&(a=s.c,a.push("clearcoatTexture"),f.v(n,s),a.pop()),f=this.r,f!=null&&(a=s.c,a.push("clearcoatRoughnessTexture"),f.v(n,s),a.pop()),f=this.x,f!=null&&(a=s.c,a.push("clearcoatNormalTexture"),f.v(n,s),a.pop())}},Fe.c9.prototype={v:function(n,s){var a,f=this.e;f!=null&&(a=s.c,a.push("diffuseTexture"),f.v(n,s),a.pop()),f=this.x,f!=null&&(a=s.c,a.push("specularGlossinessTexture"),f.v(n,s),a.pop())}},ze.ca.prototype={v:function(n,s){var a,f=this.e;f!=null&&(a=s.c,a.push("sheenColorTexture"),f.v(n,s),a.pop()),f=this.r,f!=null&&(a=s.c,a.push("sheenRoughnessTexture"),f.v(n,s),a.pop())}},Te.cb.prototype={v:function(n,s){var a,f=this.e;f!=null&&(a=s.c,a.push("transmissionTexture"),f.v(n,s),a.pop())}},Pe.cc.prototype={},qe.cd.prototype={v:function(n,s){var a,f;for(a=s.e,f=this;f!=null;)if(f=a.j(0,f),f instanceof _e.aS){f.dx.m(0,s.O(),this.r);break}}},$e.T.prototype={},$e.a4.prototype={},$e.c1.prototype={gG:function(n){var s=Z.aL(this.a),a=Z.aL(this.b);return Fe.oG(Fe.fy(Fe.fy(0,_.c.gG(s)),_.c.gG(a)))},N:function(n,s){return s==null?!1:s instanceof $e.c1&&this.b==s.b&&this.a==s.a}},$e.ce.prototype={},$e.eY.prototype={},Fe.d9.prototype={bU:function(){var n=this,s=n.d=n.c.bM(n.gdn(),n.gdr(),n.gcg()),a=n.dy;return a.e=s.gee(),a.f=s.geh(),a.r=new Fe.hP(n),n.e.a},aX:function(){this.d.I();var n=this.e;n.a.a===0&&n.T(new De.as("model/gltf-binary",null,this.fx))},dq:function(n){var s,a,f,g,y,S,C,R,D,H,q,K,ne,te,ue,ce,ge=this,Ne="model/gltf-binary",Xe="0";for(ge.d.aK(),s=Z.M(n),a=U.f,f=U.G,g=U.M,y=ge.a,S=0,C=0;S!==s.gi(n);)switch(ge.r){case 0:if(R=s.gi(n),D=ge.x,C=Math.min(R-S,12-D),R=D+C,ge.x=R,_.j.a0(y,D,R,n,S),S+=C,ge.y=C,ge.x!==12)break;if(H=ge.b.getUint32(0,!0),H!==1179937895){ge.f.a_(j.pK(),p.a([H],g),0),ge.d.I(),s=ge.e,s.a.a===0&&s.T(new De.as(Ne,null,ge.fx));return}if(q=ge.b.getUint32(4,!0),q!==2){ge.f.a_(j.pL(),p.a([q],g),4),ge.d.I(),s=ge.e,s.a.a===0&&s.T(new De.as(Ne,null,ge.fx));return}R=ge.z=ge.b.getUint32(8,!0),R<=ge.y&&ge.f.a_(j.pN(),p.a([R],g),8),ge.r=1,ge.x=0;break;case 1:if(R=s.gi(n),D=ge.x,C=Math.min(R-S,8-D),R=D+C,ge.x=R,_.j.a0(y,D,R,n,S),S+=C,ge.y+=C,ge.x!==8)break;switch(ge.ch=ge.b.getUint32(0,!0),R=ge.b.getUint32(4,!0),ge.cx=R,(ge.ch&3)!=0&&(D=ge.f,K=j.pG(),ne=ge.y,D.a_(K,p.a(["0x"+_.a.am(_.c.ap(R,16),8,Xe)],g),ne-8)),ge.y+ge.ch>ge.z&&ge.f.a_(j.pH(),p.a(["0x"+_.a.am(_.c.ap(ge.cx,16),8,Xe),ge.ch],g),ge.y-8),ge.Q===0&&ge.cx!==1313821514&&ge.f.a_(j.pS(),p.a(["0x"+_.a.am(_.c.ap(ge.cx,16),8,Xe)],g),ge.y-8),R=ge.cx,R===5130562&&ge.Q>1&&!ge.fr&&ge.f.a_(j.pO(),p.a(["0x"+_.a.am(_.c.ap(R,16),8,Xe)],g),ge.y-8),te=new Fe.hN(ge),R=ge.cx,R){case 1313821514:ge.ch===0&&(D=ge.f,K=j.pJ(),ne=ge.y,D.a_(K,p.a(["0x"+_.a.am(_.c.ap(R,16),8,Xe)],g),ne-8)),te.$1$seen(ge.cy),ge.cy=!0;break;case 5130562:te.$1$seen(ge.fr),ge.fr=!0;break;default:ge.f.a_(j.pT(),p.a(["0x"+_.a.am(_.c.ap(R,16),8,Xe)],g),ge.y-8),ge.r=4294967295}++ge.Q,ge.x=0;break;case 1313821514:C=Math.min(s.gi(n)-S,ge.ch-ge.x),ge.db==null&&(R=ge.dy,D=ge.f,R=new De.cy(new E.an(R,p.r(R).h("an<1>")),new E.ax(new E.C(j.x,a),f)),R.e=D,ge.db=R,ge.dx=R.bU()),R=ge.dy,ue=S+C,D=s.Z(n,S,ue),R.b>=4&&p.a2(R.bl()),K=R.b,(K&1)!=0?R.ak(D):(K&3)==0&&(R=R.aV(),D=new E.cn(D),ce=R.c,ce==null?R.b=R.c=D:(ce.say(D),R.c=D)),R=ge.x+=C,ge.y+=C,R===ge.ch&&(ge.dy.a2(),ge.r=1,ge.x=0),S=ue;break;case 5130562:R=s.gi(n),D=ge.ch,C=Math.min(R-S,D-ge.x),R=ge.fx,R==null&&(R=ge.fx=new Uint8Array(D)),D=ge.x,K=D+C,ge.x=K,_.j.a0(R,D,K,n,S),S+=C,ge.y+=C,ge.x===ge.ch&&(ge.r=1,ge.x=0);break;case 4294967295:R=s.gi(n),D=ge.ch,K=ge.x,C=Math.min(R-S,D-K),K+=C,ge.x=K,S+=C,ge.y+=C,K===D&&(ge.r=1,ge.x=0);break}ge.d.an()},ds:function(){var n,s,a=this;switch(a.r){case 0:a.f.bB(j.pR(),a.y),a.aX();break;case 1:a.x!==0?(a.f.bB(j.pQ(),a.y),a.aX()):(n=a.z,s=a.y,n!==s&&a.f.a_(j.pM(),p.a([n,s],U.M),a.y),n=a.dx,n!=null?n.ao(0,new Fe.hO(a),a.gcg(),U.P):a.e.T(new De.as("model/gltf-binary",null,a.fx)));break;default:a.ch>0&&a.f.bB(j.pP(),a.y),a.aX()}},dt:function(n){var s;this.d.I(),s=this.e,s.a.a===0&&s.M(n)},$iet:1},Fe.hP.prototype={$0:function(){var n=this.a;(n.dy.b&4)!=0?n.d.an():n.aX()},$S:2},Fe.hN.prototype={$1$seen:function(n){var s=this.a;n?(s.f.a_(j.pI(),p.a(["0x"+_.a.am(_.c.ap(s.cx,16),8,"0")],U.M),s.y-8),s.r=4294967295):s.r=s.cx},$0:function(){return this.$1$seen(null)},$S:72},Fe.hO.prototype={$1:function(n){var s=this.a,a=n==null?null:n.b;s.e.T(new De.as("model/gltf-binary",a,s.fx))},$S:73},De.as.prototype={},De.hS.prototype={$0:function(){return this.a.b.aK()},$S:1},De.hT.prototype={$0:function(){return this.a.b.an()},$S:1},De.hR.prototype={$0:function(){return this.a.b.I()},$S:74},De.hU.prototype={$1:function(n){var s,a,f,g,y=this,S=null,C=y.a;if(!C.a){if(s=Z.M(n),s.gu(n)){C.b.I(),y.b.a2(),y.c.M(_.Z);return}if(a=s.j(n,0),a===103)s=y.b,f=y.d,g=new Uint8Array(12),s=new Fe.d9(g,new E.an(s,p.r(s).h("an<1>")),new E.ax(new E.C(j.x,U.f),U.G)),f.id=!0,s.f=f,s.b=p.jm(g.buffer,0,S),s.dy=E.o6(S,S,S,U.w),y.c.T(s),C.a=!0;else if(s=a===123||a===9||a===32||a===10||a===13||a===239,f=y.c,g=y.b,s)f.T(De.t9(new E.an(g,p.r(g).h("an<1>")),y.d)),C.a=!0;else{C.b.I(),g.a2(),f.M(_.Z);return}}y.b.B(0,n)},$S:23},De.cy.prototype={bU:function(){var n=this,s=p.a([],U.M),a=new E.a9("");return n.d=new E.lI(new E.fx(!1),new E.lw(_.a1.gcD().a,new E.fo(new De.hQ(n),s,U.cy),a),a),n.b=n.a.bM(n.gdw(),n.gdA(),n.gdC()),n.c.a},dz:function(n){var s,a,f=this;f.b.aK(),f.f&&(a=Z.M(n),a.ga3(n)&&a.j(n,0)===239&&f.e.av(j.fF(),p.a(["BOM found at the beginning of UTF-8 stream."],U.M),!0),f.f=!1);try{f.d.dP(n,0,Z.X(n),!1),f.b.an()}catch(g){if(a=p.E(g),a instanceof E.aD)s=a,f.e.av(j.fF(),p.a([s],U.M),!0),f.b.I(),f.c.b3();else throw g}},dD:function(n){var s;this.b.I(),s=this.c,s.a.a===0&&s.M(n)},dB:function(){var n,s,a=this;try{a.d.a2()}catch(f){if(s=p.E(f),s instanceof E.aD)n=s,a.e.av(j.fF(),p.a([n],U.M),!0),a.b.I(),a.c.b3();else throw f}},$iet:1},De.hQ.prototype={$1:function(n){var s,a,f=n[0];if(U.t.b(f))try{a=this.a,s=ve.nI(f,a.e),a.c.T(new De.as("model/gltf+json",s,null))}catch(g){if(p.E(g)instanceof ye.c4)a=this.a,a.b.I(),a.c.b3();else throw g}else a=this.a,a.e.av(j.Z(),p.a([f,"object"],U.M),!0),a.b.I(),a.c.b3()},$S:75},De.db.prototype={l:function(n){return"Invalid data: could not detect glTF format."},$ia3:1},oe.m3.prototype={$2:function(n,s){this.a.$1(n),p.aJ(s)&&s>=0||(this.b.m(0,n,-1),this.c.p(j.fE(),n))},$S:6},oe.m4.prototype={$2:function(n,s){this.a.$1(n),p.aJ(s)&&s>=0||(this.b.m(0,n,-1),this.c.p(j.fE(),n))},$S:6},oe.m5.prototype={$1:function(n){return n.af(0,U.X,U.e)},$S:76},oe.m2.prototype={$0:function(){return p.a([],U.bH)},$S:77},oe.L.prototype={j:function(n,s){return s==null||s<0||s>=this.a.length?null:this.a[s]},m:function(n,s,a){this.a[s]=a},gi:function(n){return this.b},si:function(n,s){throw p.c(E.ab("Changing length is not supported"))},l:function(n){return E.id(this.a,"[","]")},a9:function(n){var s,a,f,g;for(s=this.b,a=this.a,f=0;f<s;++f)g=a[f],g!=null&&n.$2(f,g)}},oe.Y.prototype={aw:function(n){return!0}},oe.f4.prototype={Y:function(n,s,a,f){var g=this,y=g.c,S=y!=null?y.$1(f):f;return y=g.a+S*S,g.a=y,a===2&&(Math.abs(Math.sqrt(y)-1)>.00674&&n.k(j.nb(),p.a([s-2,s,Math.sqrt(g.a)],U.M),g.b),g.a=0),!0}},oe.f5.prototype={Y:function(n,s,a,f){var g=this,y=g.c,S=y!=null?y.$1(f):f;return a===3?S!==1&&S!==-1&&n.k(j.pn(),p.a([s-3,s,S],U.M),g.b):(y=g.a+S*S,g.a=y,a===2&&(Math.abs(Math.sqrt(y)-1)>.00674&&n.k(j.nb(),p.a([s-2,s,Math.sqrt(g.a)],U.M),g.b),g.a=0)),!0}},oe.en.prototype={Y:function(n,s,a,f){return(1<f||0>f)&&n.k(j.pr(),p.a([s,f],U.M),this.a),!0}},Fe.kW.prototype={bc:function(){var n,s,a,f,g,y,S,C,R,D,H,q,K=this,ne=U.X,te=U._,ue=E.a5(ne,te),ce=K.a;for(ce!=null&&ue.m(0,"uri",ce.l(0)),ce=K.c,n=ce==null,(n?null:ce.a)!=null&&ue.m(0,"mimeType",n?null:ce.a),ue.m(0,"validatorVersion","2.0.0-dev.3.3"),K.d&&ue.m(0,"validatedAt",new E.d5(Date.now(),!1).es().er()),ce=K.b,s=ce.fy,a=E.a5(ne,te),f=p.a([0,0,0,0],U.V),n=new Array(s.length),n.fixed$length=Array,g=p.a(n,U.j),n=g.length,y=0;y<n;++y)S=s[y],C=S.b,R=C==null,D=(R?S.a.a:C).a,f[D]=f[D]+1,D=S.a,H=S.gba(),R&&(C=D.a),q=E.mF(["code",D.b,"message",H,"severity",C.a],ne,te),C=S.c,C!=null?q.m(0,"pointer",C):(C=S.d,C!=null&&q.m(0,"offset",C)),g[y]=q;return a.m(0,"numErrors",f[0]),a.m(0,"numWarnings",f[1]),a.m(0,"numInfos",f[2]),a.m(0,"numHints",f[3]),a.m(0,"messages",g),a.m(0,"truncated",ce.z),ue.m(0,"issues",a),ne=K.dm(),ne!=null&&ue.m(0,"info",ne),ue},dm:function(){var n,s,a,f,g,y,S,C,R,D,H=null,q=this.c,K=q==null?H:q.b;if(q=K==null?H:K.x,(q==null?H:q.f)==null)return H;for(n=E.a5(U.X,U._),q=K.x,n.m(0,"version",q.f),s=q.r,s!=null&&n.m(0,"minVersion",s),q=q.e,q!=null&&n.m(0,"generator",q),q=K.d,s=Z.M(q),s.ga3(q)&&(q=s.bX(q),n.m(0,"extensionsUsed",E.dh(q,!1,p.r(q).c))),q=K.e,s=Z.M(q),s.ga3(q)&&(q=s.bX(q),n.m(0,"extensionsRequired",E.dh(q,!1,p.r(q).c))),q=this.b,s=q.fr,s.gu(s)||n.m(0,"resources",q.fr),n.m(0,"animationCount",K.r.b),n.m(0,"materialCount",K.cx.b),q=K.cy,n.m(0,"hasMorphTargets",q.bC(q,new Fe.kY)),s=K.fx,n.m(0,"hasSkins",!s.gu(s)),s=K.fy,n.m(0,"hasTextures",!s.gu(s)),n.m(0,"hasDefaultScene",K.dy!=null),q=new p.a6(q,q.gi(q),q.$ti.h("a6<m.E>")),a=0,f=0,g=0,y=0,S=0,C=0;q.n();)if(R=q.d,s=R.x,s!=null)for(a+=s.b,s=new p.a6(s,s.gi(s),s.$ti.h("a6<m.E>"));s.n();)R=s.d,D=R.fr,D!==-1&&(S+=D),C+=R.geu(),f=Math.max(f,R.dx.a),g=Math.max(g,R.db),y=Math.max(y,R.cx*4);return n.m(0,"drawCallCount",a),n.m(0,"totalVertexCount",S),n.m(0,"totalTriangleCount",C),n.m(0,"maxUVs",g),n.m(0,"maxInfluences",y),n.m(0,"maxAttributes",f),n}},Fe.kY.prototype={$1:function(n){var s=n.x;return s!=null&&s.bC(s,new Fe.kX)},$S:78},Fe.kX.prototype={$1:function(n){return n.fx!=null},$S:3},Fe.m7.prototype={$2:function(n,s){var a=536870911&n+Z.aL(s);return a=536870911&a+((524287&a)<<10),a^a>>>6},$S:79},Me.cD.prototype={d_:function(n){var s=n.a,a=this.a;a[15]=s[15],a[14]=s[14],a[13]=s[13],a[12]=s[12],a[11]=s[11],a[10]=s[10],a[9]=s[9],a[8]=s[8],a[7]=s[7],a[6]=s[6],a[5]=s[5],a[4]=s[4],a[3]=s[3],a[2]=s[2],a[1]=s[1],a[0]=s[0]},l:function(n){var s=this;return"[0] "+s.aN(0).l(0)+`
[1] `+s.aN(1).l(0)+`
[2] `+s.aN(2).l(0)+`
[3] `+s.aN(3).l(0)+`
`},N:function(n,s){var a,f,g;return s==null?!1:(s instanceof Me.cD?(a=this.a,f=a[0],g=s.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]&&a[4]===g[4]&&a[5]===g[5]&&a[6]===g[6]&&a[7]===g[7]&&a[8]===g[8]&&a[9]===g[9]&&a[10]===g[10]&&a[11]===g[11]&&a[12]===g[12]&&a[13]===g[13]&&a[14]===g[14]&&a[15]===g[15]):a=!1,a)},gG:function(n){return Fe.n0(this.a)},aN:function(n){var s=new Float32Array(4),a=this.a;return s[0]=a[n],s[1]=a[4+n],s[2]=a[8+n],s[3]=a[12+n],new Me.f9(s)},cE:function(){var n=this.a,s=n[0],a=n[5],f=n[1],g=n[4],y=s*a-f*g,S=n[6],C=n[2],R=s*S-C*g,D=n[7],H=n[3],q=s*D-H*g,K=f*S-C*a,ne=f*D-H*a,te=C*D-H*S;return S=n[8],H=n[9],D=n[10],C=n[11],-(H*te-D*ne+C*K)*n[12]+(S*te-D*q+C*R)*n[13]-(S*ne-H*q+C*y)*n[14]+(S*K-H*R+D*y)*n[15]},cJ:function(){var n=this.a,s=0+Math.abs(n[0])+Math.abs(n[1])+Math.abs(n[2])+Math.abs(n[3]),a=s>0?s:0;return s=0+Math.abs(n[4])+Math.abs(n[5])+Math.abs(n[6])+Math.abs(n[7]),s>a&&(a=s),s=0+Math.abs(n[8])+Math.abs(n[9])+Math.abs(n[10])+Math.abs(n[11]),s>a&&(a=s),s=0+Math.abs(n[12])+Math.abs(n[13])+Math.abs(n[14])+Math.abs(n[15]),s>a?s:a},cK:function(){var n=this.a;return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===0&&n[4]===0&&n[5]===1&&n[6]===0&&n[7]===0&&n[8]===0&&n[9]===0&&n[10]===1&&n[11]===0&&n[12]===0&&n[13]===0&&n[14]===0&&n[15]===1}},Me.eW.prototype={gaI:function(){var n=this.a,s=n[0],a=n[1],f=n[2],g=n[3];return s*s+a*a+f*f+g*g},gi:function(n){var s=this.a,a=s[0],f=s[1],g=s[2],y=s[3];return Math.sqrt(a*a+f*f+g*g+y*y)},l:function(n){var s=this.a;return p.b(s[0])+", "+p.b(s[1])+", "+p.b(s[2])+" @ "+p.b(s[3])}},Me.cJ.prototype={bi:function(n,s,a){var f=this.a;f[0]=n,f[1]=s,f[2]=a},l:function(n){var s=this.a;return"["+p.b(s[0])+","+p.b(s[1])+","+p.b(s[2])+"]"},N:function(n,s){var a,f,g;return s==null?!1:(s instanceof Me.cJ?(a=this.a,f=a[0],g=s.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]):a=!1,a)},gG:function(n){return Fe.n0(this.a)},gi:function(n){var s=this.a,a=s[0],f=s[1];return s=s[2],Math.sqrt(a*a+f*f+s*s)},gaI:function(){var n=this.a,s=n[0],a=n[1];return n=n[2],s*s+a*a+n*n}},Me.f9.prototype={l:function(n){var s=this.a;return p.b(s[0])+","+p.b(s[1])+","+p.b(s[2])+","+p.b(s[3])},N:function(n,s){var a,f,g;return s==null?!1:(s instanceof Me.f9?(a=this.a,f=a[0],g=s.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]):a=!1,a)},gG:function(n){return Fe.n0(this.a)},gi:function(n){var s=this.a,a=s[0],f=s[1],g=s[2];return s=s[3],Math.sqrt(a*a+f*f+g*g+s*s)}},pe.bb.prototype={},pe.hx.prototype={},pe.cP.prototype={},pe.mo.prototype={$3:function(n,s,a){var f=a.$1(Z.ag(n));return f},$S:80},pe.mk.prototype={$2:function(n,s){return new t.Promise(E.cp(new pe.mj(n,s,this.a)),U._)},$C:"$2",$R:2,$S:81},pe.mj.prototype={$2:function(n,s){pe.fB(this.a,this.b).ao(0,new pe.mg(n),new pe.mh(this.c,s),U.P)},$C:"$2",$R:2,$S:26},pe.mg.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},pe.mh.prototype={$2:function(n,s){return this.a.$3(n,s,this.b)},$C:"$2",$R:2,$S:15},pe.ml.prototype={$2:function(n,s){return new t.Promise(E.cp(new pe.mi(n,s,this.a)),U._)},$C:"$2",$R:2,$S:85},pe.mi.prototype={$2:function(n,s){pe.n5(this.a,this.b).ao(0,new pe.me(n),new pe.mf(this.c,s),U.P)},$C:"$2",$R:2,$S:26},pe.me.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},pe.mf.prototype={$2:function(n,s){return this.a.$3(n,s,this.b)},$C:"$2",$R:2,$S:15},pe.mm.prototype={$0:function(){return"2.0.0-dev.3.3"},$C:"$0",$R:0,$S:86},pe.mn.prototype={$0:function(){return E.n2(ye.t4())},$C:"$0",$R:0,$S:4},pe.lU.prototype={$1:function(n){var s=new E.C(j.x,U.q),a=new E.ax(s,U.as),f=this.a.$1(Z.ag(n));return(f==null?null:Z.rv(f))==null?a.M(new E.ak(!1,null,null,"options.externalResourceFunction: Function must return a Promise.")):Z.rG(f,E.cp(new pe.lV(a)),E.cp(new pe.lW(a))),s},$S:87},pe.lV.prototype={$1:function(n){var s=this.a;U.a.b(n)?s.T(n):s.M(new E.ak(!1,null,null,"options.externalResourceFunction: Promise must be fulfilled with Uint8Array or rejected."))},$S:24},pe.lW.prototype={$1:function(n){return this.a.M(new pe.eP(Z.ag(n)))},$S:10},pe.lS.prototype={$1:function(n){var s,a,f,g=this;return g.a.id&&n==null?g.b.c:(g.c!=null?s=g.d.$1(n):(a=g.e,E.aM(a,"error"),j.x,_.f,f=E.el(a),s=new E.C(j.x,U.q),s.aT(a,f)),s)},$0:function(){return this.$1(null)},$C:"$1",$R:0,$D:function(){return[null]},$S:88},pe.lT.prototype={$1:function(n){var s,a,f,g,y=null;return this.a!=null?(s=this.b.$1(n),s=E.tR(s,p.ac(s).c)):(s=this.c,E.aM(s,"error"),a=U.f1,f=new E.bD(y,y,y,y,a),g=E.el(s),f.aQ(s,g),f.aU(),s=new E.an(f,a.h("an<1>"))),s},$S:89},pe.eP.prototype={l:function(n){return"Node Exception: "+p.b(this.a)},$ia3:1},function(){var s=Z.cz.prototype;s.d1=s.bb,s=Z.aF.prototype,s.d2=s.l,s=E.m.prototype,s.d3=s.a0,s=E.dV.prototype,s.d4=s.a2}(),function(){var s=re._static_1,a=re._static_0,f=re._static_2,g=re._instance_2u,y=re._instance_0u,S=re.installInstanceTearOff,C=re._instance_1i,R=re._instance_1u;s(E,"vk","tZ",11),s(E,"vl","u_",11),s(E,"vm","u0",11),a(E,"oS","v7",1),f(E,"vn","v0",14),g(E.C.prototype,"gde","aB",14),y(E.cS.prototype,"gdS","a2",50);var D;y(D=E.dA.prototype,"gcm","b_",1),y(D,"gcn","b0",1),S(D=E.cK.prototype,"gee",0,0,null,["$1","$0"],["cQ","aK"],51,0),y(D,"geh","an",1),y(D,"gcm","b_",1),y(D,"gcn","b0",1),C(E.aZ.prototype,"gcA","F",53),f(ye,"vg","rM",91),f(ye,"vf","rL",92),f(ye,"vd","rJ",93),f(ye,"ve","rK",94),R(ye.a0.prototype,"gbP","ed",115),f(Re,"vi","rO",95),f(Re,"vh","rN",96),f(Me,"vj","rP",97),f(pe,"vo","rU",98),f(ve,"vp","rT",99),f(Ce,"vs","rX",100),f(Ce,"vq","rV",101),f(Ce,"vr","rW",102),f(Me,"vG","te",103),f(_e,"vZ","tu",104),f(_e,"w0","tE",105),f(_e,"w_","tD",106),f(_e,"p3","tC",107),f(_e,"bi","tT",108),f(Pe,"w1","tx",109),f(ve,"w2","tB",110),f(Me,"w3","tO",111),f(Te,"w4","tP",112),f(Oe,"w5","tQ",113),f(ze,"w7","tU",114),s($,"d0","v3",28),s($,"oT","uZ",28),s($e,"vz","uN",12),f($e,"vy","t8",117),f(Le,"vN","tk",118),f(Le,"vO","tl",119),f(Le,"vP","tm",120),f(Te,"vQ","tn",121),f(Fe,"vR","to",122),f(ze,"vS","tp",123),f(Te,"vT","tq",124),f(Pe,"vU","tr",125),f(qe,"vW","ts",84),R(D=Fe.d9.prototype,"gdn","dq",25),y(D,"gdr","ds",1),R(D,"gcg","dt",10),R(D=De.cy.prototype,"gdw","dz",25),R(D,"gdC","dD",10),y(D,"gdA","dB",1),s(ze,"vV","uO",12)}(),function(){var s=re.mixin,a=re.inherit,f=re.inheritMany;a(E.e,null),f(E.e,[p.mD,Z.cz,Z.aC,E.i,p.d3,E.I,p.bZ,E.F,E.dN,p.a6,E.H,p.d6,p.d8,p.f7,p.cG,E.dj,p.cv,p.ig,p.kJ,p.eS,p.d7,p.dS,p.lA,p.j7,p.df,p.ih,p.ly,p.aI,p.fj,p.dX,E.lG,E.fc,E.cO,E.aB,E.ff,E.cM,E.C,E.fd,E.aW,E.f0,E.cS,E.fs,E.fe,E.cK,E.fn,E.fh,E.lh,E.fq,E.ek,E.lJ,E.dI,E.cQ,E.lx,E.dM,E.m,E.fw,E.kI,E.eo,E.le,E.em,E.fx,E.d5,E.eT,E.ds,E.dD,E.aD,E.cC,E.k,E.fr,E.a9,E.e2,E.kL,E.fp,ve.fk,oe.Y,ve.kQ,ve.bU,ve.bS,ve.u,ye.kV,ye.j,ye.c4,_e.dK,_e.dy,_e.cL,_e.c2,_e.c3,_e.i5,_e.dw,_e.dv,_e.aP,He.cR,He.eX,He.jw,Oe.ey,$.bx,$.ic,$.cA,$e.T,$e.a4,$e.c1,$e.ce,$e.eY,Fe.d9,De.as,De.cy,De.db,Fe.kW,Me.cD,Me.eW,Me.cJ,Me.f9,pe.eP]),f(Z.cz,[Z.dd,Z.cB,Z.aF,Z.p,Z.c5,Z.br,p.dm]),f(Z.aF,[Z.eU,Z.cl,Z.aQ,pe.bb,pe.hx,pe.cP]),a(Z.ii,Z.p),f(Z.c5,[Z.de,Z.eB]),f(E.i,[p.bE,p.n,p.b9,p.l_,p.bc,p.dz,E.dc]),f(p.bE,[p.bX,p.e4]),a(p.dC,p.bX),a(p.dx,p.e4),a(p.b3,p.dx),a(E.di,E.I),f(E.di,[p.bY,p.aG,E.dG,E.fl]),f(p.bZ,[p.fQ,p.jt,p.f1,p.im,p.m9,p.ma,p.mb,E.lb,E.la,E.lc,E.ld,E.lH,E.lK,E.lL,E.m_,E.li,E.lq,E.lm,E.ln,E.lo,E.lk,E.lp,E.lj,E.lt,E.lu,E.ls,E.lr,E.kC,E.kD,E.kE,E.kF,E.kG,E.lF,E.lE,E.lg,E.lf,E.lz,E.lY,E.lD,E.lC,E.j8,E.j9,E.kT,E.kU,E.jn,E.kN,E.kO,E.kP,E.lP,E.lO,E.lQ,E.lR,E.lM,ye.l6,ye.l7,ye.l8,ye.l9,ye.l4,ye.l5,ye.l0,ye.l1,ye.l2,ye.l3,Re.fH,Re.fI,ve.i0,ve.i1,ve.i2,ve.hZ,ve.i_,ve.hX,ve.hY,ve.hV,ve.hW,ve.i3,ve.i4,_e.jb,Pe.jl,Pe.jc,Pe.jd,Pe.je,Pe.jg,Pe.jh,Pe.ji,Pe.jj,Pe.jk,Pe.jf,ve.jo,ve.jp,ve.jq,Te.jz,Oe.kB,ye.fS,ye.fR,ye.fT,ye.fW,ye.fX,ye.fU,ye.fV,ye.fY,_e.i7,_e.i9,_e.i8,_e.i6,_e.il,_e.ik,_e.js,He.jx,He.jy,Oe.mq,Oe.mr,Oe.ms,Oe.lZ,$.h8,$.h6,$.h5,$.hd,$.ha,$.hb,$.h9,$.hm,$.ho,$.hf,$.hl,$.he,$.hk,$.hi,$.hj,$.hh,$.hg,$.hr,$.hq,$.hp,$.hv,$.hu,$.h2,$.h3,$.h4,$.ht,$.hs,$.h7,$.hn,$.hc,$.h1,$.h_,$.h0,$.ib,$.jK,$.jL,$.jQ,$.jO,$.jI,$.jE,$.jM,$.jF,$.jP,$.jB,$.jJ,$.jD,$.jG,$.jC,$.jN,$.jH,$.kp,$.ko,$.ke,$.kc,$.kd,$.kb,$.k9,$.ka,$.kk,$.kl,$.k8,$.k7,$.k6,$.k5,$.k3,$.k2,$.k0,$.jV,$.kz,$.ky,$.k_,$.jX,$.jZ,$.jW,$.jY,$.kx,$.kv,$.kq,$.kf,$.kw,$.kr,$.ks,$.kt,$.ku,$.kj,$.ki,$.kh,$.kg,$.kn,$.km,$.k1,$.jT,$.jS,$.k4,$.jU,$.j0,$.j5,$.iQ,$.iC,$.j6,$.iy,$.ix,$.iA,$.iB,$.iw,$.iz,$.iv,$.iF,$.iD,$.j4,$.iE,$.iX,$.iI,$.iJ,$.iG,$.iH,$.iP,$.iO,$.iN,$.iM,$.iR,$.iL,$.iK,$.j3,$.iS,$.iV,$.iU,$.iT,$.iW,$.iY,$.iZ,$.iu,$.it,$.is,$.j_,$.j1,$.j2,$.hE,$.hD,$.hC,$.hM,$.hA,$.hL,$.hH,$.hI,$.hB,$.hz,$.hF,$.hK,$.hJ,$.hG,Le.iq,Fe.hP,Fe.hN,Fe.hO,De.hS,De.hT,De.hR,De.hU,De.hQ,oe.m3,oe.m4,oe.m5,oe.m2,Fe.kY,Fe.kX,Fe.m7,pe.mo,pe.mk,pe.mj,pe.mg,pe.mh,pe.ml,pe.mi,pe.me,pe.mf,pe.mm,pe.mn,pe.lU,pe.lV,pe.lW,pe.lS,pe.lT]),f(E.F,[p.eD,E.f2,p.eC,p.f6,p.eZ,p.fi,E.ej,E.eR,E.ak,E.eO,E.f8,E.f3,E.bz,E.ep,E.er]),a(E.dg,E.dN),f(E.dg,[p.cI,oe.L]),f(p.cI,[p.cu,E.aX]),f(p.n,[p.af,p.b6,p.au,E.dH]),f(p.af,[p.dt,p.a8,E.fm,E.dF]),a(p.c_,p.b9),f(E.H,[p.a7,p.cm,p.dr]),a(p.cw,p.bc),a(E.e0,E.dj),a(E.be,E.e0),a(p.d4,E.be),f(p.cv,[p.aq,p.al]),a(p.eQ,E.f2),f(p.f1,[p.f_,p.ct]),a(p.cE,p.dm),f(p.cE,[p.dO,p.dQ]),a(p.dP,p.dO),a(p.dl,p.dP),a(p.dR,p.dQ),a(p.av,p.dR),f(p.dl,[p.dk,p.eI]),f(p.av,[p.eJ,p.eK,p.eL,p.eM,p.eN,p.dn,p.cf]),a(p.dY,p.fi),a(E.dW,E.dc),a(E.ax,E.ff),f(E.cS,[E.bD,E.cT]),a(E.dT,E.aW),f(E.dT,[E.an,E.dE]),a(E.dA,E.cK),f(E.fn,[E.dL,E.dU]),f(E.fh,[E.cn,E.dB]),a(E.lB,E.lJ),a(E.dJ,E.dG),f(E.cQ,[E.aZ,E.e1]),a(E.kH,E.kI),a(E.dV,E.kH),a(E.lw,E.dV),f(E.eo,[E.fL,E.hw,E.io]),a(E.eq,E.f0),f(E.eq,[E.fN,E.fM,E.ip,E.kS]),f(E.em,[E.fO,E.fo]),a(E.lI,E.fO),a(E.kR,E.hw),f(E.ak,[E.dq,E.ew]),a(E.fg,E.e2),a(ve.o,ve.fk),f(ve.o,[ve.es,ye.bP,ye.bQ,ye.bR,Re.b1,Re.bT,Re.b2,Me.bo,Ce.bV,Ce.bW,ve.da,_e.ci,_e.bB,Pe.aH,$e.c0,Le.bs,Le.c6,Le.c7,Te.c8,Fe.c9,ze.ca,Te.cb,Pe.cc,qe.cd]),f(ve.es,[ye.a0,Re.bn,pe.aN,ve.bp,Ce.bq,Me.aO,_e.aS,Pe.aT,ve.ah,Me.bv,Te.bw,Oe.by,ze.bA,Le.b7]),f(ye.a0,[ye.fb,ye.fa]),f(oe.Y,[ye.ez,ye.eG,ye.eE,ye.eH,ye.eF,Re.ei,Re.dp,Pe.ev,Oe.eu,oe.f4,oe.f5,oe.en]),f(_e.bB,[_e.ch,_e.cg]),f(_e.i5,[_e.ij,_e.jr,_e.kZ]),f($.ic,[$.fZ,$.ia,$.jA,$.jR,$.ir,$.hy]),s(p.cI,p.f7),s(p.e4,E.m),s(p.dO,E.m),s(p.dP,p.d8),s(p.dQ,E.m),s(p.dR,p.d8),s(E.bD,E.fe),s(E.cT,E.fs),s(E.dN,E.m),s(E.e0,E.fw),s(ve.fk,ve.kQ)}();var Je={typeUniverse:{eC:new Map,tR:{},eT:{},tPV:{},sEA:[]},mangledGlobalNames:{d:"int",w:"double",G:"num",f:"String",Q:"bool",k:"Null",l:"List"},mangledNames:{},getTypeFromName:ee,metadata:[],types:["f*(l<@>*)","~()","k()","Q*(aH*)","@()","w*(d*)","k(f*,e*)","k(f*,d*)","Q*(d*)","k(ah*,d*,d*)","~(e*)","~(~())","~(j*)","k(@)","~(e,am)","~(e*,am*)","~(aa,f,d)","i<d*>*()","d*(d*)","i<w*>*()","k(d*,aH*)","~(f*)","Q*(T*)","k(l<d*>*)","k(e*)","~(l<d*>*)","k(~(e*)*,aE*)","k(h<f*,e*>*)","f*(e*)","k(d*,ah*)","i<d*>*(d*,d*,d*)","k(@,am)","k(d,@)","@(@)","i<w*>*(d*,d*,d*)","k(d*,b2*)","k(d*,b1*)","L<0^*>*(f*,0^*(h<f*,e*>*,j*)*)<e*>","0^*(f*,0^*(h<f*,e*>*,j*)*{req:Q*})<e*>","~(L<o*>*,bC*)","k(d*,o*)","k(e,am)","k(f,@)","Q*(ah*)","~(L<ck*>*)","k(d*,ck*)","~(o*,f*)","C<@>(@)","k(@,@)","d*(d*,d*,f*)","ae<@>()","~([ae<~>?])","kA<a0<G*>*>*()","Q(e?)","k(e?,e?)","f*(T*)","l<Y<G*>*>*()","f*(f*)","k(~())","T*()","k(bC*,a4*)","k(cH,@)","@(@,f)","Q*(l<d*>*,l<d*>*)","l<d*>*/*(aN*)","aW<l<d*>*>*(aO*)","k(d*,a0<G*>*)","Q*(H<G*>*)","~(f[@])","k(d*,b7*)","d(d,d)","aa(d)","~({seen:Q*})","k(as*)","ae<~>*()","k(l<e*>*)","h<f*,d*>*(h<@,@>*)","l<ce*>*()","Q*(aT*)","d*(d*,e*)","~(e*,am*,aE*)","bb<1&>*(aa*,e*)","aa(@,@)","@(f)","cd*(h<f*,e*>*,j*)","bb<1&>*(f*,e*)","f*()","ae<aa*>*(aY*)","aa*/*([aY*])","aW<l<d*>*>*(aY*)","e?(e?)","a0<G*>*(h<f*,e*>*,j*)","bP*(h<f*,e*>*,j*)","bQ*(h<f*,e*>*,j*)","bR*(h<f*,e*>*,j*)","bn*(h<f*,e*>*,j*)","bT*(h<f*,e*>*,j*)","bo*(h<f*,e*>*,j*)","aN*(h<f*,e*>*,j*)","bp*(h<f*,e*>*,j*)","bq*(h<f*,e*>*,j*)","bV*(h<f*,e*>*,j*)","bW*(h<f*,e*>*,j*)","aO*(h<f*,e*>*,j*)","aS*(h<f*,e*>*,j*)","ci*(h<f*,e*>*,j*)","ch*(h<f*,e*>*,j*)","cg*(h<f*,e*>*,j*)","bB*(h<f*,e*>*,j*)","aT*(h<f*,e*>*,j*)","ah*(h<f*,e*>*,j*)","bv*(h<f*,e*>*,j*)","bw*(h<f*,e*>*,j*)","by*(h<f*,e*>*,j*)","bA*(h<f*,e*>*,j*)","w*(G*)","~(@)","c0*(h<f*,e*>*,j*)","bs*(h<f*,e*>*,j*)","c6*(h<f*,e*>*,j*)","c7*(h<f*,e*>*,j*)","c8*(h<f*,e*>*,j*)","c9*(h<f*,e*>*,j*)","ca*(h<f*,e*>*,j*)","cb*(h<f*,e*>*,j*)","cc*(h<f*,e*>*,j*)","~(f,d)"],interceptorsByTag:null,leafTags:null,arrayRti:typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol("$ti"):"$ti"};p.uh(Je.typeUniverse,JSON.parse('{"bb":"aF","hx":"aF","cP":"aF","eU":"aF","cl":"aF","aQ":"aF","dd":{"Q":[]},"cB":{"k":[]},"aF":{"aE":[],"bb":["1&"],"cP":[]},"p":{"l":["1"],"n":["1"],"i":["1"]},"ii":{"p":["1"],"l":["1"],"n":["1"],"i":["1"]},"aC":{"H":["1"]},"c5":{"w":[],"G":[]},"de":{"w":[],"d":[],"G":[]},"eB":{"w":[],"G":[]},"br":{"f":[]},"bE":{"i":["2"]},"d3":{"H":["2"]},"bX":{"bE":["1","2"],"i":["2"],"i.E":"2"},"dC":{"bX":["1","2"],"bE":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"dx":{"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"]},"b3":{"dx":["1","2"],"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"],"m.E":"2","i.E":"2"},"bY":{"I":["3","4"],"h":["3","4"],"I.K":"3","I.V":"4"},"eD":{"F":[]},"cu":{"m":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"n":{"i":["1"]},"af":{"n":["1"],"i":["1"]},"dt":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"a6":{"H":["1"]},"b9":{"i":["2"],"i.E":"2"},"c_":{"b9":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"a7":{"H":["2"]},"a8":{"af":["2"],"n":["2"],"i":["2"],"i.E":"2","af.E":"2"},"l_":{"i":["1"],"i.E":"1"},"cm":{"H":["1"]},"bc":{"i":["1"],"i.E":"1"},"cw":{"bc":["1"],"n":["1"],"i":["1"],"i.E":"1"},"dr":{"H":["1"]},"b6":{"n":["1"],"i":["1"],"i.E":"1"},"d6":{"H":["1"]},"cI":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"cG":{"cH":[]},"d4":{"be":["1","2"],"h":["1","2"]},"cv":{"h":["1","2"]},"aq":{"cv":["1","2"],"h":["1","2"]},"dz":{"i":["1"],"i.E":"1"},"al":{"cv":["1","2"],"h":["1","2"]},"eQ":{"F":[]},"eC":{"F":[]},"f6":{"F":[]},"eS":{"a3":[]},"dS":{"am":[]},"bZ":{"aE":[]},"f1":{"aE":[]},"f_":{"aE":[]},"ct":{"aE":[]},"eZ":{"F":[]},"aG":{"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"au":{"n":["1"],"i":["1"],"i.E":"1"},"df":{"H":["1"]},"cE":{"at":["1"]},"dl":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"]},"av":{"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"]},"dk":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eI":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eJ":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eK":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eL":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eM":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eN":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dn":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"cf":{"av":[],"m":["d"],"aa":[],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dX":{"bC":[]},"fi":{"F":[]},"dY":{"F":[]},"aB":{"H":["1"]},"dW":{"i":["1"],"i.E":"1"},"ax":{"ff":["1"]},"C":{"ae":["1"]},"bD":{"cS":["1"]},"cT":{"cS":["1"]},"an":{"aW":["1"]},"dT":{"aW":["1"]},"dE":{"aW":["1"]},"ek":{"F":[]},"dG":{"I":["1","2"],"h":["1","2"]},"dJ":{"dG":["1","2"],"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"dH":{"n":["1"],"i":["1"],"i.E":"1"},"dI":{"H":["1"]},"aZ":{"cQ":["1"],"n":["1"],"i":["1"]},"dM":{"H":["1"]},"aX":{"m":["1"],"l":["1"],"n":["1"],"i":["1"],"m.E":"1"},"dc":{"i":["1"]},"dg":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"di":{"I":["1","2"],"h":["1","2"]},"I":{"h":["1","2"]},"dj":{"h":["1","2"]},"be":{"h":["1","2"]},"cQ":{"n":["1"],"i":["1"]},"e1":{"cQ":["1"],"n":["1"],"i":["1"]},"fl":{"I":["f","@"],"h":["f","@"],"I.K":"f","I.V":"@"},"fm":{"af":["f"],"n":["f"],"i":["f"],"i.E":"f","af.E":"f"},"w":{"G":[]},"d":{"G":[]},"l":{"n":["1"],"i":["1"]},"kA":{"n":["1"],"i":["1"]},"ej":{"F":[]},"f2":{"F":[]},"eR":{"F":[]},"ak":{"F":[]},"dq":{"F":[]},"ew":{"F":[]},"eO":{"F":[]},"f8":{"F":[]},"f3":{"F":[]},"bz":{"F":[]},"ep":{"F":[]},"eT":{"F":[]},"ds":{"F":[]},"er":{"F":[]},"dD":{"a3":[]},"aD":{"a3":[]},"dF":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"fr":{"am":[]},"e2":{"aY":[]},"fp":{"aY":[]},"fg":{"aY":[]},"a0":{"o":[],"t":[]},"fb":{"a0":["d*"],"o":[],"t":[]},"fa":{"a0":["w*"],"o":[],"t":[]},"bP":{"o":[],"t":[]},"bQ":{"o":[],"t":[]},"bR":{"o":[],"t":[]},"ez":{"Y":["w*"]},"eG":{"Y":["w*"]},"eE":{"Y":["w*"]},"eH":{"Y":["d*"]},"eF":{"Y":["d*"]},"bn":{"o":[],"t":[]},"b1":{"o":[],"t":[]},"bT":{"o":[],"t":[]},"b2":{"o":[],"t":[]},"ei":{"Y":["w*"]},"dp":{"Y":["1*"]},"bo":{"o":[],"t":[]},"aN":{"o":[],"t":[]},"bp":{"o":[],"t":[]},"bq":{"o":[],"t":[]},"bV":{"o":[],"t":[]},"bW":{"o":[],"t":[]},"da":{"o":[],"t":[]},"o":{"t":[]},"es":{"o":[],"t":[]},"aO":{"o":[],"t":[]},"aS":{"o":[],"t":[]},"ci":{"o":[],"t":[]},"ch":{"o":[],"t":[]},"cg":{"o":[],"t":[]},"bB":{"o":[],"t":[]},"aT":{"o":[],"t":[]},"aH":{"o":[],"t":[]},"ev":{"Y":["d*"]},"ah":{"o":[],"t":[]},"bv":{"o":[],"t":[]},"bw":{"o":[],"t":[]},"by":{"o":[],"t":[]},"eu":{"Y":["w*"]},"bA":{"o":[],"t":[],"ck":[]},"c4":{"a3":[]},"dw":{"a3":[]},"dv":{"a3":[]},"aP":{"a3":[]},"c0":{"o":[],"t":[],"ck":[]},"bs":{"o":[],"t":[]},"b7":{"o":[],"t":[]},"c6":{"o":[],"t":[]},"c7":{"o":[],"t":[]},"c8":{"o":[],"t":[]},"c9":{"o":[],"t":[]},"ca":{"o":[],"t":[]},"cb":{"o":[],"t":[]},"cc":{"o":[],"t":[]},"cd":{"o":[],"t":[]},"d9":{"et":[]},"cy":{"et":[]},"db":{"a3":[]},"L":{"m":["1*"],"l":["1*"],"n":["1*"],"i":["1*"],"m.E":"1*"},"f4":{"Y":["G*"]},"f5":{"Y":["G*"]},"en":{"Y":["w*"]},"eP":{"a3":[]},"aa":{"l":["d"],"n":["d"],"i":["d"]}}')),p.ug(Je.typeUniverse,JSON.parse('{"d8":1,"f7":1,"cI":1,"e4":2,"cE":1,"cM":2,"f0":2,"fs":1,"fe":1,"dA":1,"cK":1,"dT":1,"dL":1,"fh":1,"cn":1,"fn":1,"dU":1,"fq":1,"dc":1,"dg":1,"di":2,"fw":2,"dj":2,"dN":1,"e0":2,"em":1,"eo":2,"eq":2,"dV":1}'));var Wt={p:") does not match the number of morph targets (",c:"Accessor sparse indices element at index ",m:"Animation input accessor element at index "},U=function(){var s=p.ap;return{gF:s("d4<cH,@>"),O:s("n<@>"),C:s("F"),b8:s("aE"),c:s("ae<@>"),bq:s("ae<~>"),N:s("al<bC*,a4*>"),U:s("i<@>"),s:s("p<f>"),b:s("p<@>"),Z:s("p<d>"),p:s("p<u*>"),fr:s("p<b1*>"),es:s("p<b2*>"),gd:s("p<Y<G*>*>"),bd:s("p<ey*>"),a9:s("p<cA*>"),e2:s("p<H<w*>*>"),fK:s("p<H<d*>*>"),B:s("p<H<G*>*>"),dB:s("p<b7*>"),bH:s("p<ce*>"),d:s("p<l<d*>*>"),ar:s("p<h<f*,a0<G*>*>*>"),j:s("p<h<f*,e*>*>"),bZ:s("p<aH*>"),R:s("p<ah*>"),M:s("p<e*>"),d6:s("p<eY*>"),i:s("p<f*>"),m:s("p<w*>"),V:s("p<d*>"),T:s("cB"),g:s("aQ"),aU:s("at<@>"),eo:s("aG<cH,@>"),I:s("h<@,@>"),gw:s("a8<T*,f*>"),eB:s("av"),bm:s("cf"),P:s("k"),K:s("e"),ed:s("dp<G*>"),eq:s("L<b1*>"),az:s("L<b2*>"),du:s("L<b7*>"),b_:s("L<aH*>"),S:s("f"),E:s("aa"),ak:s("cl"),go:s("aX<h<f*,e*>*>"),em:s("aX<f*>"),f8:s("be<c1*,a4*>"),n:s("aY"),a_:s("ax<et*>"),G:s("ax<as*>"),eP:s("ax<c3*>"),as:s("ax<aa*>"),f1:s("bD<l<d*>*>"),eI:s("C<@>"),fJ:s("C<d>"),eD:s("C<et*>"),f:s("C<as*>"),dD:s("C<c3*>"),q:s("C<aa*>"),D:s("C<~>"),aH:s("dJ<@,@>"),cy:s("fo<e*>"),cJ:s("Q"),gR:s("w"),z:s("@"),bI:s("@(e)"),Q:s("@(e,am)"),r:s("d"),aD:s("u*"),hc:s("a0<d*>*"),W:s("a0<G*>*"),bj:s("bn*"),gP:s("bo*"),cT:s("aN*"),u:s("bp*"),h2:s("bq*"),y:s("a3*"),af:s("T*"),f9:s("a4*"),al:s("c1*"),b1:s("aE*"),ec:s("aO*"),Y:s("i<@>*"),v:s("t*"),l:s("l<@>*"),b7:s("l<Y<G*>*>*"),an:s("l<ce*>*"),o:s("l<e*>*"),eG:s("l<f*>*"),fy:s("l<w*>*"),w:s("l<d*>*"),h:s("h<@,@>*"),t:s("h<f*,e*>*"),fC:s("aS*"),eM:s("aT*"),A:s("0&*"),L:s("ah*"),_:s("e*"),ax:s("ck*"),cl:s("L<@>*"),c2:s("bv*"),J:s("bw*"),cn:s("kA<u*>*"),gz:s("kA<a0<G*>*>*"),dz:s("bx*"),aV:s("by*"),X:s("f*"),ai:s("bA*"),f7:s("bC*"),a:s("aa*"),bv:s("cP*"),F:s("w*"),e:s("d*"),eH:s("ae<k>?"),x:s("e?"),di:s("G"),H:s("~"),d5:s("~(e)"),k:s("~(e,am)")}}();(function(){var s=re.makeConstList;_.by=Z.cz.prototype,_.d=Z.p.prototype,_.bC=Z.dd.prototype,_.c=Z.de.prototype,_.bD=Z.cB.prototype,_.bE=Z.c5.prototype,_.a=Z.br.prototype,_.bF=Z.aQ.prototype,_.d2=p.dk.prototype,_.j=p.cf.prototype,_.aq=Z.eU.prototype,_.O=Z.cl.prototype,_.P=new ve.u("MAT4",5126,!1),_.A=new ve.u("SCALAR",5126,!1),_.aQ=new ve.u("VEC2",5121,!0),_.aU=new ve.u("VEC2",5123,!0),_.aV=new ve.u("VEC2",5126,!1),_.R=new ve.u("VEC3",5121,!0),_.T=new ve.u("VEC3",5123,!0),_.k=new ve.u("VEC3",5126,!1),_.aY=new ve.u("VEC4",5121,!1),_.D=new ve.u("VEC4",5121,!0),_.aZ=new ve.u("VEC4",5123,!1),_.E=new ve.u("VEC4",5123,!0),_.u=new ve.u("VEC4",5126,!1),_.b_=new ve.bS("AnimationInput"),_.b0=new ve.bS("AnimationOutput"),_.b1=new ve.bS("IBM"),_.b2=new ve.bS("PrimitiveIndices"),_.W=new ve.bS("VertexAttribute"),_.b3=new ve.bU("IBM"),_.b4=new ve.bU("Image"),_.X=new ve.bU("IndexBuffer"),_.v=new ve.bU("Other"),_.F=new ve.bU("VertexBuffer"),_.dB=new E.fN,_.b5=new E.fL,_.b6=new E.fM,_.Y=new p.d6(p.ap("d6<k>")),_.Z=new De.db,_.b7=new ye.c4,_.a_=function(f){var g=Object.prototype.toString.call(f);return g.substring(8,g.length-1)},_.b8=function(){var a=Object.prototype.toString;function f(D){var H=a.call(D);return H.substring(8,H.length-1)}function g(D,H){if(/^HTML[A-Z].*Element$/.test(H)){var q=a.call(D);return q=="[object Object]"?null:"HTMLElement"}}function y(D,H){return t.HTMLElement&&D instanceof HTMLElement?"HTMLElement":g(D,H)}function S(D){if(typeof window=="undefined"||typeof window[D]=="undefined")return null;var H=window[D];return typeof H!="function"?null:H.prototype}function C(D){return null}var R=typeof navigator=="object";return{getTag:f,getUnknownTag:R?y:g,prototypeForTag:S,discriminator:C}},_.bd=function(a){return function(f){if(typeof navigator!="object")return f;var g=navigator.userAgent;if(g.indexOf("DumpRenderTree")>=0)return f;if(g.indexOf("Chrome")>=0){let y=function(S){return typeof window=="object"&&window[S]&&window[S].name==S};if(y("Window")&&y("HTMLElement"))return f}f.getTag=a}},_.b9=function(a){if(typeof dartExperimentalFixupGetTag!="function")return a;a.getTag=dartExperimentalFixupGetTag(a.getTag)},_.ba=function(a){var f=a.getTag,g=a.prototypeForTag;function y(C){var R=f(C);return R=="Document"?C.xmlVersion?"!Document":"!HTMLDocument":R}function S(C){return C=="Document"?null:g(C)}a.getTag=y,a.prototypeForTag=S},_.bc=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Firefox")==-1)return a;var g=a.getTag,y={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};function S(C){var R=g(C);return y[R]||R}a.getTag=S},_.bb=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Trident/")==-1)return a;var g=a.getTag,y={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};function S(R){var D=g(R),H=y[D];return H||(D=="Object"&&window.DataView&&R instanceof window.DataView?"DataView":D)}function C(R){var D=window[R];return D==null?null:D.prototype}a.getTag=S,a.prototypeForTag=C},_.a0=function(a){return a},_.a1=new E.io,_.be=new E.eT,_.a2=new _e.dv,_.bf=new _e.dw,_.a3=new E.kR,_.G=new E.lh,_.a4=new p.lA,_.f=new E.lB,_.bg=new E.fr,_.I=new _e.c2(0,"Format.Unknown"),_.n=new _e.c2(1,"Format.RGB"),_.w=new _e.c2(2,"Format.RGBA"),_.a5=new _e.c2(3,"Format.Luminance"),_.a6=new _e.c2(4,"Format.LuminanceAlpha"),_.a7=new _e.aP("Wrong WebP header."),_.bz=new _e.aP("PNG header not found."),_.bA=new _e.aP("Invalid JPEG marker segment length."),_.o=new _e.aP("Wrong chunk length."),_.bB=new _e.aP("Invalid start of file."),_.bG=new E.ip(null),_.bH=p.a(s([0,0]),U.m),_.a8=p.a(s([0,0,0]),U.m),_.bI=p.a(s([16]),U.V),_.bJ=p.a(s([1,1]),U.m),_.a9=p.a(s([1,1,1]),U.m),_.aa=p.a(s([1,1,1,1]),U.m),_.ab=p.a(s([2]),U.V),_.bK=p.a(s([255,216]),U.V),_.bM=p.a(s(["sheenColorFactor","sheenColorTexture","sheenRoughnessFactor","sheenRoughnessTexture"]),U.i),_.ac=p.a(s([0,0,32776,33792,1,10240,0,0]),U.V),_.bN=p.a(s([137,80,78,71,13,10,26,10]),U.V),_.bO=p.a(s(["clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture"]),U.i),_.m=p.a(s([3]),U.V),_.ad=p.a(s([33071,33648,10497]),U.V),_.bP=p.a(s([34962,34963]),U.V),_.J=p.a(s([4]),U.V),_.aN=new ve.u("VEC2",5120,!1),_.aO=new ve.u("VEC2",5120,!0),_.aP=new ve.u("VEC2",5121,!1),_.aR=new ve.u("VEC2",5122,!1),_.aS=new ve.u("VEC2",5122,!0),_.aT=new ve.u("VEC2",5123,!1),_.bQ=p.a(s([_.aN,_.aO,_.aP,_.aR,_.aS,_.aT]),U.p),_.bR=p.a(s([5121,5123,5125]),U.V),_.ae=p.a(s(["image/jpeg","image/png"]),U.i),_.bS=p.a(s(["transmissionFactor","transmissionTexture"]),U.i),_.bT=p.a(s([82,73,70,70]),U.V),_.bU=p.a(s([9728,9729]),U.V),_.aH=new ve.u("SCALAR",5121,!1),_.aK=new ve.u("SCALAR",5123,!1),_.aM=new ve.u("SCALAR",5125,!1),_.af=p.a(s([_.aH,_.aK,_.aM]),U.p),_.bW=p.a(s(["camera","children","skin","matrix","mesh","rotation","scale","translation","weights","name"]),U.i),_.bX=p.a(s([9728,9729,9984,9985,9986,9987]),U.V),_.bY=p.a(s(["COLOR","JOINTS","TEXCOORD","WEIGHTS"]),U.i),_.x=p.a(s([0,0,65490,45055,65535,34815,65534,18431]),U.V),_.bZ=p.a(s(["color","intensity","spot","type","range","name"]),U.i),_.c_=p.a(s(["buffer","byteOffset","byteLength","byteStride","target","name"]),U.i),_.ah=p.a(s([0,0,26624,1023,65534,2047,65534,2047]),U.V),_.c0=p.a(s(["LINEAR","STEP","CUBICSPLINE"]),U.i),_.c1=p.a(s(["OPAQUE","MASK","BLEND"]),U.i),_.c2=p.a(s(["pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","name"]),U.i),_.c3=p.a(s([5120,5121,5122,5123,5125,5126]),U.V),_.c4=p.a(s(["inverseBindMatrices","skeleton","joints","name"]),U.i),_.Q=new ve.u("VEC3",5120,!1),_.B=new ve.u("VEC3",5120,!0),_.S=new ve.u("VEC3",5122,!1),_.C=new ve.u("VEC3",5122,!0),_.c5=p.a(s([_.Q,_.B,_.S,_.C]),U.p),_.c6=p.a(s(["data-uri","buffer-view","glb","external"]),U.i),_.c7=p.a(s(["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]),U.i),_.c8=p.a(s(["bufferView","byteOffset","componentType"]),U.i),_.K=p.a(s([_.B,_.C]),U.p),_.c9=p.a(s(["aspectRatio","yfov","zfar","znear"]),U.i),_.ca=p.a(s(["copyright","generator","version","minVersion"]),U.i),_.cb=p.a(s(["bufferView","byteOffset"]),U.i),_.cc=p.a(s(["bufferView","mimeType","uri","name"]),U.i),_.cd=p.a(s(["channels","samplers","name"]),U.i),_.ce=p.a(s(["baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture"]),U.i),_.cf=p.a(s(["count","indices","values"]),U.i),_.cg=p.a(s(["diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture"]),U.i),_.ch=p.a(s(["directional","point","spot"]),U.i),_.ai=p.a(s([]),U.b),_.ci=p.a(s([]),U.i),_.cl=p.a(s(["extensions","extras"]),U.i),_.cm=p.a(s([0,0,32722,12287,65534,34815,65534,18431]),U.V),_.co=p.a(s(["index","texCoord"]),U.i),_.cp=p.a(s(["index","texCoord","scale"]),U.i),_.cq=p.a(s(["index","texCoord","strength"]),U.i),_.cr=p.a(s(["innerConeAngle","outerConeAngle"]),U.i),_.cs=p.a(s(["input","interpolation","output"]),U.i),_.ct=p.a(s(["attributes","indices","material","mode","targets"]),U.i),_.cu=p.a(s(["bufferView","byteOffset","componentType","count","type","normalized","max","min","sparse","name"]),U.i),_.cw=p.a(s(["light"]),U.i),_.cx=p.a(s(["lights"]),U.i),_.cy=p.a(s(["node","path"]),U.i),_.cz=p.a(s(["nodes","name"]),U.i),_.cA=p.a(s([null,"linear","srgb","custom"]),U.i),_.cB=p.a(s([null,"srgb","custom"]),U.i),_.aj=p.a(s([0,0,24576,1023,65534,34815,65534,18431]),U.V),_.cC=p.a(s(["image/webp"]),U.i),_.cD=p.a(s(["offset","rotation","scale","texCoord"]),U.i),_.N=p.B("bA"),_.bh=new $e.a4($e.vy(),!1),_.d_=new p.al([_.N,_.bh],U.N),_.bu=new $e.T("EXT_texture_webp",_.d_,$e.vz(),!1),_.at=p.B("da"),_.M=p.B("ah"),_.bi=new $e.a4(Le.vN(),!1),_.bj=new $e.a4(Le.vP(),!1),_.cY=new p.al([_.at,_.bi,_.M,_.bj],U.N),_.bq=new $e.T("KHR_lights_punctual",_.cY,null,!1),_.h=p.B("aS"),_.bk=new $e.a4(Te.vQ(),!1),_.cT=new p.al([_.h,_.bk],U.N),_.bt=new $e.T("KHR_materials_clearcoat",_.cT,null,!1),_.bn=new $e.a4(Fe.vR(),!0),_.cU=new p.al([_.h,_.bn],U.N),_.bw=new $e.T("KHR_materials_pbrSpecularGlossiness",_.cU,null,!1),_.bl=new $e.a4(Te.vT(),!1),_.cV=new p.al([_.h,_.bl],U.N),_.bs=new $e.T("KHR_materials_transmission",_.cV,null,!1),_.bm=new $e.a4(ze.vS(),!1),_.cW=new p.al([_.h,_.bm],U.N),_.bp=new $e.T("KHR_materials_sheen",_.cW,null,!1),_.bo=new $e.a4(Pe.vU(),!0),_.cX=new p.al([_.h,_.bo],U.N),_.br=new $e.T("KHR_materials_unlit",_.cX,null,!1),_.cj=p.a(s([]),p.ap("p<bC*>")),_.d0=new p.aq(0,{},_.cj,p.ap("aq<bC*,a4*>")),_.bx=new $e.T("KHR_mesh_quantization",_.d0,ze.vV(),!0),_.aA=p.B("bB"),_.aw=p.B("cg"),_.ax=p.B("ch"),_.H=new $e.a4(qe.vW(),!1),_.cZ=new p.al([_.aA,_.H,_.aw,_.H,_.ax,_.H],U.N),_.bv=new $e.T("KHR_texture_transform",_.cZ,null,!1),_.ak=p.a(s([_.bu,_.bq,_.bt,_.bw,_.bs,_.bp,_.br,_.bx,_.bv]),p.ap("p<T*>")),_.al=p.a(s(["orthographic","perspective"]),U.i),_.cE=p.a(s(["primitives","weights","name"]),U.i),_.b=new $.bx(0,"Severity.Error"),_.e=new $.bx(1,"Severity.Warning"),_.i=new $.bx(2,"Severity.Information"),_.d4=new $.bx(3,"Severity.Hint"),_.cF=p.a(s([_.b,_.e,_.i,_.d4]),p.ap("p<bx*>")),_.cG=p.a(s([0,0,32754,11263,65534,34815,65534,18431]),U.V),_.cH=p.a(s(["magFilter","minFilter","wrapS","wrapT","name"]),U.i),_.cI=p.a(s([null,"rgb","rgba","luminance","luminance-alpha"]),U.i),_.am=p.a(s([0,0,65490,12287,65535,34815,65534,18431]),U.V),_.cJ=p.a(s(["sampler","source","name"]),U.i),_.cK=p.a(s(["source"]),U.i),_.aW=new ve.u("VEC3",5121,!1),_.aX=new ve.u("VEC3",5123,!1),_.cL=p.a(s([_.Q,_.B,_.aW,_.R,_.S,_.C,_.aX,_.T]),U.p),_.cM=p.a(s(["target","sampler"]),U.i),_.an=p.a(s(["translation","rotation","scale","weights"]),U.i),_.cN=p.a(s(["type","orthographic","perspective","name"]),U.i),_.cO=p.a(s(["uri","byteLength","name"]),U.i),_.cP=p.a(s(["xmag","ymag","zfar","znear"]),U.i),_.cQ=p.a(s(["extensionsUsed","extensionsRequired","accessors","animations","asset","buffers","bufferViews","cameras","images","materials","meshes","nodes","samplers","scene","scenes","skins","textures"]),U.i),_.U=new ve.u("VEC4",5120,!0),_.V=new ve.u("VEC4",5122,!0),_.cR=p.a(s([_.U,_.V]),U.p),_.ag=p.a(s([_.k]),U.p),_.bL=p.a(s([_.u,_.D,_.U,_.E,_.V]),U.p),_.aI=new ve.u("SCALAR",5121,!0),_.aG=new ve.u("SCALAR",5120,!0),_.aL=new ve.u("SCALAR",5123,!0),_.aJ=new ve.u("SCALAR",5122,!0),_.cn=p.a(s([_.A,_.aI,_.aG,_.aL,_.aJ]),U.p),_.cS=new p.aq(4,{translation:_.ag,rotation:_.bL,scale:_.ag,weights:_.cn},_.an,p.ap("aq<f*,l<u*>*>")),_.bV=p.a(s(["SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4"]),U.i),_.l=new p.aq(7,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_.bV,p.ap("aq<f*,d*>")),_.ao=new p.al([5120,"BYTE",5121,"UNSIGNED_BYTE",5122,"SHORT",5123,"UNSIGNED_SHORT",5124,"INT",5125,"UNSIGNED_INT",5126,"FLOAT",35664,"FLOAT_VEC2",35665,"FLOAT_VEC3",35666,"FLOAT_VEC4",35667,"INT_VEC2",35668,"INT_VEC3",35669,"INT_VEC4",35670,"BOOL",35671,"BOOL_VEC2",35672,"BOOL_VEC3",35673,"BOOL_VEC4",35674,"FLOAT_MAT2",35675,"FLOAT_MAT3",35676,"FLOAT_MAT4",35678,"SAMPLER_2D"],p.ap("al<d*,f*>")),_.ck=p.a(s([]),p.ap("p<cH*>")),_.ap=new p.aq(0,{},_.ck,p.ap("aq<cH*,@>")),_.cv=p.a(s(["KHR","EXT","ADOBE","AGI","AGT","ALCM","ALI","AMZN","ANIMECH","AVR","BLENDER","CAPTURE","CESIUM","CVTOOLS","EPIC","FB","FOXIT","GOOGLE","GRIFFEL","KDAB","LLQ","MAXAR","MESHOPT","MOZ","MPEG","MSFT","NV","OWLII","PANDA3D","POLUTROPON","PTC","S8S","SEIN","SI","SKFB","SKYLINE","SPECTRUM","TRYON","UX3D","VRMC","WEB3D"]),U.i),_.d1=new p.aq(41,{KHR:null,EXT:null,ADOBE:null,AGI:null,AGT:null,ALCM:null,ALI:null,AMZN:null,ANIMECH:null,AVR:null,BLENDER:null,CAPTURE:null,CESIUM:null,CVTOOLS:null,EPIC:null,FB:null,FOXIT:null,GOOGLE:null,GRIFFEL:null,KDAB:null,LLQ:null,MAXAR:null,MESHOPT:null,MOZ:null,MPEG:null,MSFT:null,NV:null,OWLII:null,PANDA3D:null,POLUTROPON:null,PTC:null,S8S:null,SEIN:null,SI:null,SKFB:null,SKYLINE:null,SPECTRUM:null,TRYON:null,UX3D:null,VRMC:null,WEB3D:null},_.cv,p.ap("aq<f*,k>")),_.d3=new E.e1(_.d1,p.ap("e1<f*>")),_.d5=new p.cG("call"),_.d6=p.B("bQ"),_.d7=p.B("bR"),_.d8=p.B("bP"),_.L=p.B("a0<G>"),_.d9=p.B("bT"),_.da=p.B("b1"),_.db=p.B("b2"),_.ar=p.B("bn"),_.dc=p.B("bo"),_.as=p.B("bp"),_.dd=p.B("aN"),_.de=p.B("bV"),_.df=p.B("bW"),_.dg=p.B("bq"),_.dh=p.B("c9"),_.di=p.B("c0"),_.au=p.B("aO"),_.dj=p.B("bs"),_.dk=p.B("c6"),_.dl=p.B("b7"),_.dm=p.B("c7"),_.dn=p.B("c8"),_.dp=p.B("ca"),_.dq=p.B("cb"),_.dr=p.B("cc"),_.ds=p.B("cd"),_.dt=p.B("aH"),_.av=p.B("aT"),_.du=p.B("ci"),_.dv=p.B("bv"),_.ay=p.B("bw"),_.az=p.B("by"),_.dw=new E.kS(!1),_.p=new _e.dy(0,"_ColorPrimaries.Unknown"),_.q=new _e.dy(1,"_ColorPrimaries.sRGB"),_.y=new _e.dy(2,"_ColorPrimaries.Custom"),_.r=new _e.cL(0,"_ColorTransfer.Unknown"),_.dx=new _e.cL(1,"_ColorTransfer.Linear"),_.t=new _e.cL(2,"_ColorTransfer.sRGB"),_.z=new _e.cL(3,"_ColorTransfer.Custom"),_.aB=new _e.dK("_ImageCodec.JPEG"),_.aC=new _e.dK("_ImageCodec.PNG"),_.aD=new _e.dK("_ImageCodec.WebP"),_.dy=new E.cO(null,2),_.aE=new He.cR(0,"_Storage.DataUri"),_.dz=new He.cR(1,"_Storage.BufferView"),_.dA=new He.cR(2,"_Storage.GLB"),_.aF=new He.cR(3,"_Storage.External")})(),function(){j.oo=null,j.b4=0,j.nD=null,j.nC=null,j.oY=null,j.oR=null,j.p7=null,j.m1=null,j.mc=null,j.n1=null,j.cX=null,j.ea=null,j.eb=null,j.mT=!1,j.x=_.f,j.co=p.a([],p.ap("p<e>"))}(),function(){var s=re.lazy,a=re.lazyOld;s(j,"wf","n6",function(){return p.vF("_$dart_dartClosure")}),s(j,"yH","r9",function(){return p.bd(p.kK({toString:function(){return"$receiver$"}}))}),s(j,"yI","ra",function(){return p.bd(p.kK({$method$:null,toString:function(){return"$receiver$"}}))}),s(j,"yJ","rb",function(){return p.bd(p.kK(null))}),s(j,"yK","rc",function(){return p.bd(function(){var f="$arguments$";try{null.$method$(f)}catch(g){return g.message}}())}),s(j,"yN","rf",function(){return p.bd(p.kK(void 0))}),s(j,"yO","rg",function(){return p.bd(function(){var f="$arguments$";try{(void 0).$method$(f)}catch(g){return g.message}}())}),s(j,"yM","re",function(){return p.bd(p.o8(null))}),s(j,"yL","rd",function(){return p.bd(function(){try{null.$method$}catch(f){return f.message}}())}),s(j,"yQ","ri",function(){return p.bd(p.o8(void 0))}),s(j,"yP","rh",function(){return p.bd(function(){try{(void 0).$method$}catch(f){return f.message}}())}),s(j,"yT","np",function(){return E.tY()}),s(j,"wN","fC",function(){var f=new E.C(_.f,p.ap("C<k>"));return f.dK(null),f}),s(j,"yR","rj",function(){return new E.kT().$0()}),s(j,"yS","rk",function(){return new E.kU().$0()}),s(j,"yV","nq",function(){return p.tz(p.uH(p.a([-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-1,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2],U.Z)))}),s(j,"yU","rl",function(){return p.tA(0)}),s(j,"zf","rp",function(){return E.uG()}),a(j,"wd","bj",function(){return E.o2("^([0-9]+)\\.([0-9]+)$")}),a(j,"we","pe",function(){return E.o2("^([A-Z0-9]+)_[A-Za-z0-9_]+$")}),a(j,"wC","pw",function(){return $.D("BUFFER_EMBEDDED_BYTELENGTH_MISMATCH",new $.h8,_.b)}),a(j,"wD","px",function(){return $.D("BUFFER_EXTERNAL_BYTELENGTH_MISMATCH",new $.h6,_.b)}),a(j,"wE","py",function(){return $.D("BUFFER_GLB_CHUNK_TOO_BIG",new $.h5,_.e)}),a(j,"wv","na",function(){return $.D("ACCESSOR_MIN_MISMATCH",new $.hd,_.b)}),a(j,"wu","n9",function(){return $.D("ACCESSOR_MAX_MISMATCH",new $.ha,_.b)}),a(j,"wk","n8",function(){return $.D("ACCESSOR_ELEMENT_OUT_OF_MIN_BOUND",new $.hb,_.b)}),a(j,"wj","n7",function(){return $.D("ACCESSOR_ELEMENT_OUT_OF_MAX_BOUND",new $.h9,_.b)}),a(j,"wz","nb",function(){return $.D("ACCESSOR_VECTOR3_NON_UNIT",new $.hm,_.b)}),a(j,"wq","pn",function(){return $.D("ACCESSOR_INVALID_SIGN",new $.ho,_.b)}),a(j,"wi","ph",function(){return $.D("ACCESSOR_ANIMATION_SAMPLER_OUTPUT_NON_NORMALIZED_QUATERNION",new $.hf,_.b)}),a(j,"ww","pr",function(){return $.D("ACCESSOR_NON_CLAMPED",new $.hl,_.b)}),a(j,"wo","pl",function(){return $.D("ACCESSOR_INVALID_FLOAT",new $.he,_.b)}),a(j,"wl","pi",function(){return $.D("ACCESSOR_INDEX_OOB",new $.hk,_.b)}),a(j,"wn","pk",function(){return $.D("ACCESSOR_INDEX_TRIANGLE_DEGENERATE",new $.hi,_.i)}),a(j,"wm","pj",function(){return $.D("ACCESSOR_INDEX_PRIMITIVE_RESTART",new $.hj,_.b)}),a(j,"wg","pf",function(){return $.D("ACCESSOR_ANIMATION_INPUT_NEGATIVE",new $.hh,_.b)}),a(j,"wh","pg",function(){return $.D("ACCESSOR_ANIMATION_INPUT_NON_INCREASING",new $.hg,_.b)}),a(j,"wy","pt",function(){return $.D("ACCESSOR_SPARSE_INDICES_NON_INCREASING",new $.hr,_.b)}),a(j,"wx","ps",function(){return $.D("ACCESSOR_SPARSE_INDEX_OOB",new $.hq,_.b)}),a(j,"wp","pm",function(){return $.D("ACCESSOR_INVALID_IBM",new $.hp,_.b)}),a(j,"wG","pz",function(){return $.D("IMAGE_DATA_INVALID",new $.hv,_.b)}),a(j,"wI","pB",function(){return $.D("IMAGE_MIME_TYPE_INVALID",new $.hu,_.b)}),a(j,"wL","pE",function(){return $.D("IMAGE_UNEXPECTED_EOS",new $.h2,_.b)}),a(j,"wM","pF",function(){return $.D("IMAGE_UNRECOGNIZED_FORMAT",new $.h3,_.e)}),a(j,"wJ","pC",function(){return $.D("IMAGE_NON_ENABLED_MIME_TYPE",new $.h4,_.b)}),a(j,"wK","pD",function(){return $.D("IMAGE_NPOT_DIMENSIONS",new $.ht,_.i)}),a(j,"wH","pA",function(){return $.D("IMAGE_FEATURES_UNSUPPORTED",new $.hs,_.e)}),a(j,"wF","nc",function(){return $.D("DATA_URI_GLB",new $.h7,_.i)}),a(j,"ws","pp",function(){return $.D("ACCESSOR_JOINTS_INDEX_OOB",new $.hn,_.b)}),a(j,"wr","po",function(){return $.D("ACCESSOR_JOINTS_INDEX_DUPLICATE",new $.hc,_.b)}),a(j,"wA","pu",function(){return $.D("ACCESSOR_WEIGHTS_NEGATIVE",new $.h1,_.b)}),a(j,"wB","pv",function(){return $.D("ACCESSOR_WEIGHTS_NON_NORMALIZED",new $.h_,_.b)}),a(j,"wt","pq",function(){return $.D("ACCESSOR_JOINTS_USED_ZERO_WEIGHT",new $.h0,_.e)}),a(j,"x1","mt",function(){return new $.ia(_.b,"IO_ERROR",new $.ib)}),a(j,"xJ","nk",function(){return $.ai("ARRAY_LENGTH_NOT_IN_LIST",new $.jK,_.b)}),a(j,"xK","eg",function(){return $.ai("ARRAY_TYPE_MISMATCH",new $.jL,_.b)}),a(j,"xI","nj",function(){return $.ai("DUPLICATE_ELEMENTS",new $.jQ,_.b)}),a(j,"xM","fE",function(){return $.ai("INVALID_INDEX",new $.jO,_.b)}),a(j,"xN","fF",function(){return $.ai("INVALID_JSON",new $.jI,_.b)}),a(j,"xO","qr",function(){return $.ai("INVALID_URI",new $.jE,_.b)}),a(j,"xL","bO",function(){return $.ai("EMPTY_ENTITY",new $.jM,_.b)}),a(j,"xP","nl",function(){return $.ai("ONE_OF_MISMATCH",new $.jF,_.b)}),a(j,"xQ","qs",function(){return $.ai("PATTERN_MISMATCH",new $.jP,_.b)}),a(j,"xR","Z",function(){return $.ai("TYPE_MISMATCH",new $.jB,_.b)}),a(j,"xW","nm",function(){return $.ai("VALUE_NOT_IN_LIST",new $.jJ,_.e)}),a(j,"xX","mu",function(){return $.ai("VALUE_NOT_IN_RANGE",new $.jD,_.b)}),a(j,"xV","qu",function(){return $.ai("VALUE_MULTIPLE_OF",new $.jG,_.b)}),a(j,"xS","bk",function(){return $.ai("UNDEFINED_PROPERTY",new $.jC,_.b)}),a(j,"xT","qt",function(){return $.ai("UNEXPECTED_PROPERTY",new $.jN,_.e)}),a(j,"xU","d1",function(){return $.ai("UNSATISFIED_DEPENDENCY",new $.jH,_.b)}),a(j,"yC","r5",function(){return $.q("UNKNOWN_ASSET_MAJOR_VERSION",new $.kp,_.b)}),a(j,"yD","r6",function(){return $.q("UNKNOWN_ASSET_MINOR_VERSION",new $.ko,_.e)}),a(j,"yn","qR",function(){return $.q("ASSET_MIN_VERSION_GREATER_THAN_VERSION",new $.ke,_.e)}),a(j,"yb","qG",function(){return $.q("INVALID_GL_VALUE",new $.kc,_.b)}),a(j,"y9","qE",function(){return $.q("INTEGER_WRITTEN_AS_FLOAT",new $.kd,_.e)}),a(j,"xZ","qw",function(){return $.q("ACCESSOR_NORMALIZED_INVALID",new $.kb,_.b)}),a(j,"y_","qx",function(){return $.q("ACCESSOR_OFFSET_ALIGNMENT",new $.k9,_.b)}),a(j,"xY","qv",function(){return $.q("ACCESSOR_MATRIX_ALIGNMENT",new $.ka,_.b)}),a(j,"y0","qy",function(){return $.q("ACCESSOR_SPARSE_COUNT_OUT_OF_RANGE",new $.kk,_.b)}),a(j,"y1","qz",function(){return $.q("ANIMATION_CHANNEL_TARGET_NODE_SKIN",new $.kl,_.e)}),a(j,"y2","qA",function(){return $.q("BUFFER_DATA_URI_MIME_TYPE_INVALID",new $.k8,_.b)}),a(j,"y4","qB",function(){return $.q("BUFFER_VIEW_TOO_BIG_BYTE_STRIDE",new $.k7,_.b)}),a(j,"y3","mv",function(){return $.q("BUFFER_VIEW_INVALID_BYTE_STRIDE",new $.k6,_.b)}),a(j,"y5","qC",function(){return $.q("CAMERA_XMAG_YMAG_ZERO",new $.k5,_.e)}),a(j,"y6","qD",function(){return $.q("CAMERA_YFOV_GEQUAL_PI",new $.k3,_.e)}),a(j,"y7","nn",function(){return $.q("CAMERA_ZFAR_LEQUAL_ZNEAR",new $.k2,_.b)}),a(j,"yd","qI",function(){return $.q("MATERIAL_ALPHA_CUTOFF_INVALID_MODE",new $.k0,_.e)}),a(j,"yg","mw",function(){return $.q("MESH_PRIMITIVE_INVALID_ATTRIBUTE",new $.jV,_.b)}),a(j,"ym","qQ",function(){return $.q("MESH_PRIMITIVES_UNEQUAL_TARGETS_COUNT",new $.kz,_.b)}),a(j,"yl","qP",function(){return $.q("MESH_PRIMITIVES_UNEQUAL_JOINTS_COUNT",new $.ky,_.e)}),a(j,"yi","qM",function(){return $.q("MESH_PRIMITIVE_NO_POSITION",new $.k_,_.e)}),a(j,"yf","qK",function(){return $.q("MESH_PRIMITIVE_INDEXED_SEMANTIC_CONTINUITY",new $.jX,_.b)}),a(j,"yk","qO",function(){return $.q("MESH_PRIMITIVE_TANGENT_WITHOUT_NORMAL",new $.jZ,_.e)}),a(j,"yh","qL",function(){return $.q("MESH_PRIMITIVE_JOINTS_WEIGHTS_MISMATCH",new $.jW,_.b)}),a(j,"yj","qN",function(){return $.q("MESH_PRIMITIVE_TANGENT_POINTS",new $.jY,_.e)}),a(j,"ye","qJ",function(){return $.q("MESH_INVALID_WEIGHTS_COUNT",new $.kx,_.b)}),a(j,"yr","qV",function(){return $.q("NODE_MATRIX_TRS",new $.kv,_.b)}),a(j,"yp","qT",function(){return $.q("NODE_MATRIX_DEFAULT",new $.kq,_.i)}),a(j,"ys","qW",function(){return $.q("NODE_MATRIX_NON_TRS",new $.kf,_.b)}),a(j,"yz","r2",function(){return $.q("ROTATION_NON_UNIT",new $.kw,_.b)}),a(j,"yF","r8",function(){return $.q("UNUSED_EXTENSION_REQUIRED",new $.kr,_.b)}),a(j,"yy","r1",function(){return $.q("NON_REQUIRED_EXTENSION",new $.ks,_.b)}),a(j,"yE","r7",function(){return $.q("UNRESERVED_EXTENSION_PREFIX",new $.kt,_.e)}),a(j,"ya","qF",function(){return $.q("INVALID_EXTENSION_NAME_FORMAT",new $.ku,_.e)}),a(j,"yq","qU",function(){return $.q("NODE_EMPTY",new $.kj,_.i)}),a(j,"yv","qZ",function(){return $.q("NODE_SKINNED_MESH_NON_ROOT",new $.ki,_.e)}),a(j,"yu","qY",function(){return $.q("NODE_SKINNED_MESH_LOCAL_TRANSFORMS",new $.kh,_.e)}),a(j,"yt","qX",function(){return $.q("NODE_SKIN_NO_SCENE",new $.kg,_.b)}),a(j,"yA","r3",function(){return $.q("SKIN_NO_COMMON_ROOT",new $.kn,_.b)}),a(j,"yB","r4",function(){return $.q("SKIN_SKELETON_INVALID",new $.km,_.b)}),a(j,"yx","r0",function(){return $.q("NON_RELATIVE_URI",new $.k1,_.e)}),a(j,"yo","qS",function(){return $.q("MULTIPLE_EXTENSIONS",new $.jT,_.e)}),a(j,"yw","r_",function(){return $.q("NON_OBJECT_EXTRAS",new $.jS,_.i)}),a(j,"y8","no",function(){return $.q("EXTRA_PROPERTY",new $.k4,_.i)}),a(j,"yc","qH",function(){return $.q("KHR_LIGHTS_PUNCTUAL_LIGHT_SPOT_ANGLES",new $.jU,_.b)}),a(j,"x4","pV",function(){return $.v("ACCESSOR_TOTAL_OFFSET_ALIGNMENT",new $.j0,_.b)}),a(j,"x2","pU",function(){return $.v("ACCESSOR_SMALL_BYTESTRIDE",new $.j5,_.b)}),a(j,"x3","nd",function(){return $.v("ACCESSOR_TOO_LONG",new $.iQ,_.b)}),a(j,"x5","pW",function(){return $.v("ACCESSOR_USAGE_OVERRIDE",new $.iC,_.b)}),a(j,"x8","pZ",function(){return $.v("ANIMATION_DUPLICATE_TARGETS",new $.j6,_.b)}),a(j,"x6","pX",function(){return $.v("ANIMATION_CHANNEL_TARGET_NODE_MATRIX",new $.iy,_.b)}),a(j,"x7","pY",function(){return $.v("ANIMATION_CHANNEL_TARGET_NODE_WEIGHTS_NO_MORPHS",new $.ix,_.b)}),a(j,"xb","q1",function(){return $.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_WITHOUT_BOUNDS",new $.iA,_.b)}),a(j,"x9","q_",function(){return $.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_INVALID_FORMAT",new $.iB,_.b)}),a(j,"xd","q3",function(){return $.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_FORMAT",new $.iw,_.b)}),a(j,"xa","q0",function(){return $.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_TOO_FEW_ELEMENTS",new $.iz,_.b)}),a(j,"xc","q2",function(){return $.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_COUNT",new $.iv,_.b)}),a(j,"xe","q4",function(){return $.v("BUFFER_MISSING_GLB_DATA",new $.iF,_.b)}),a(j,"xg","ne",function(){return $.v("BUFFER_VIEW_TOO_LONG",new $.iD,_.b)}),a(j,"xf","q5",function(){return $.v("BUFFER_VIEW_TARGET_OVERRIDE",new $.j4,_.b)}),a(j,"xh","q6",function(){return $.v("IMAGE_BUFFER_VIEW_WITH_BYTESTRIDE",new $.iE,_.b)}),a(j,"xi","q7",function(){return $.v("INVALID_IBM_ACCESSOR_COUNT",new $.iX,_.b)}),a(j,"xl","ng",function(){return $.v("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_INVALID_FORMAT",new $.iI,_.b)}),a(j,"xr","nh",function(){return $.v("MESH_PRIMITIVE_POSITION_ACCESSOR_WITHOUT_BOUNDS",new $.iJ,_.b)}),a(j,"xk","q8",function(){return $.v("MESH_PRIMITIVE_ACCESSOR_WITHOUT_BYTESTRIDE",new $.iG,_.b)}),a(j,"xj","nf",function(){return $.v("MESH_PRIMITIVE_ACCESSOR_UNALIGNED",new $.iH,_.b)}),a(j,"xo","qb",function(){return $.v("MESH_PRIMITIVE_INDICES_ACCESSOR_WITH_BYTESTRIDE",new $.iP,_.b)}),a(j,"xn","qa",function(){return $.v("MESH_PRIMITIVE_INDICES_ACCESSOR_INVALID_FORMAT",new $.iO,_.b)}),a(j,"xm","q9",function(){return $.v("MESH_PRIMITIVE_INCOMPATIBLE_MODE",new $.iN,_.e)}),a(j,"xs","qe",function(){return $.v("MESH_PRIMITIVE_TOO_FEW_TEXCOORDS",new $.iM,_.b)}),a(j,"xt","qf",function(){return $.v("MESH_PRIMITIVE_UNEQUAL_ACCESSOR_COUNT",new $.iR,_.b)}),a(j,"xq","qd",function(){return $.v("MESH_PRIMITIVE_MORPH_TARGET_NO_BASE_ACCESSOR",new $.iL,_.b)}),a(j,"xp","qc",function(){return $.v("MESH_PRIMITIVE_MORPH_TARGET_INVALID_ATTRIBUTE_COUNT",new $.iK,_.b)}),a(j,"xu","qg",function(){return $.v("NODE_LOOP",new $.j3,_.b)}),a(j,"xv","qh",function(){return $.v("NODE_PARENT_OVERRIDE",new $.iS,_.b)}),a(j,"xy","qk",function(){return $.v("NODE_WEIGHTS_INVALID",new $.iV,_.b)}),a(j,"xw","qi",function(){return $.v("NODE_SKIN_WITH_NON_SKINNED_MESH",new $.iU,_.b)}),a(j,"xx","qj",function(){return $.v("NODE_SKINNED_MESH_WITHOUT_SKIN",new $.iT,_.e)}),a(j,"xz","ql",function(){return $.v("SCENE_NON_ROOT_NODE",new $.iW,_.b)}),a(j,"xB","qn",function(){return $.v("SKIN_IBM_INVALID_FORMAT",new $.iY,_.b)}),a(j,"xA","qm",function(){return $.v("SKIN_IBM_ACCESSOR_WITH_BYTESTRIDE",new $.iZ,_.b)}),a(j,"xC","ni",function(){return $.v("TEXTURE_INVALID_IMAGE_MIME_TYPE",new $.iu,_.b)}),a(j,"xD","qo",function(){return $.v("UNDECLARED_EXTENSION",new $.it,_.b)}),a(j,"xE","qp",function(){return $.v("UNEXPECTED_EXTENSION_OBJECT",new $.is,_.b)}),a(j,"xF","N",function(){return $.v("UNRESOLVED_REFERENCE",new $.j_,_.b)}),a(j,"xG","qq",function(){return $.v("UNSUPPORTED_EXTENSION",new $.j1,_.e)}),a(j,"xH","fD",function(){return $.v("UNUSED_OBJECT",new $.j2,_.i)}),a(j,"wS","pK",function(){return $.ar("GLB_INVALID_MAGIC",new $.hE,_.b)}),a(j,"wT","pL",function(){return $.ar("GLB_INVALID_VERSION",new $.hD,_.b)}),a(j,"wV","pN",function(){return $.ar("GLB_LENGTH_TOO_SMALL",new $.hC,_.b)}),a(j,"wO","pG",function(){return $.ar("GLB_CHUNK_LENGTH_UNALIGNED",new $.hM,_.b)}),a(j,"wU","pM",function(){return $.ar("GLB_LENGTH_MISMATCH",new $.hA,_.b)}),a(j,"wP","pH",function(){return $.ar("GLB_CHUNK_TOO_BIG",new $.hL,_.b)}),a(j,"wR","pJ",function(){return $.ar("GLB_EMPTY_CHUNK",new $.hH,_.b)}),a(j,"wQ","pI",function(){return $.ar("GLB_DUPLICATE_CHUNK",new $.hI,_.b)}),a(j,"wY","pQ",function(){return $.ar("GLB_UNEXPECTED_END_OF_CHUNK_HEADER",new $.hB,_.b)}),a(j,"wX","pP",function(){return $.ar("GLB_UNEXPECTED_END_OF_CHUNK_DATA",new $.hz,_.b)}),a(j,"wZ","pR",function(){return $.ar("GLB_UNEXPECTED_END_OF_HEADER",new $.hF,_.b)}),a(j,"x_","pS",function(){return $.ar("GLB_UNEXPECTED_FIRST_CHUNK",new $.hK,_.b)}),a(j,"wW","pO",function(){return $.ar("GLB_UNEXPECTED_BIN_CHUNK",new $.hJ,_.b)}),a(j,"x0","pT",function(){return $.ar("GLB_UNKNOWN_CHUNK_TYPE",new $.hG,_.e)}),a(j,"za","nr",function(){return p.ty(1)}),a(j,"zc","rm",function(){return Me.tv()}),a(j,"zg","rq",function(){return Me.of()}),a(j,"zd","rn",function(){var f=Me.tL();return f.a[3]=1,f}),a(j,"ze","ro",function(){return Me.of()})}(),function(){(function(){var s=function(C){var R={};return R[C]=1,Object.keys(re.convertToFastObject(R))[0]};Je.getIsolateTag=function(C){return s("___dart_"+C+Je.isolateTag)};for(var a="___dart_isolate_tags_",f=Object[a]||(Object[a]=Object.create(null)),g="_ZxYxX",y=0;;y++){var S=s(g+"_"+y+"_");if(!(S in f)){f[S]=1,Je.isolateTag=S;break}}Je.dispatchPropertyName=Je.getIsolateTag("dispatch_record")})(),re.setOrUpdateInterceptorsByTag({ArrayBuffer:Z.cz,DataView:p.dm,ArrayBufferView:p.dm,Float32Array:p.dk,Float64Array:p.eI,Int16Array:p.eJ,Int32Array:p.eK,Int8Array:p.eL,Uint16Array:p.eM,Uint32Array:p.eN,Uint8ClampedArray:p.dn,CanvasPixelArray:p.dn,Uint8Array:p.cf}),re.setOrUpdateLeafTags({ArrayBuffer:!0,DataView:!0,ArrayBufferView:!1,Float32Array:!0,Float64Array:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Uint16Array:!0,Uint32Array:!0,Uint8ClampedArray:!0,CanvasPixelArray:!0,Uint8Array:!1}),p.cE.$nativeSuperclassTag="ArrayBufferView",p.dO.$nativeSuperclassTag="ArrayBufferView",p.dP.$nativeSuperclassTag="ArrayBufferView",p.dl.$nativeSuperclassTag="ArrayBufferView",p.dQ.$nativeSuperclassTag="ArrayBufferView",p.dR.$nativeSuperclassTag="ArrayBufferView",p.av.$nativeSuperclassTag="ArrayBufferView"}(),Function.prototype.$1=function(n){return this(n)},Function.prototype.$0=function(){return this()},Function.prototype.$2=function(n,s){return this(n,s)},Function.prototype.$1$1=function(n){return this(n)},Function.prototype.$3=function(n,s,a){return this(n,s,a)},Function.prototype.$1$0=function(){return this()},Function.prototype.$4=function(n,s,a,f){return this(n,s,a,f)},Function.prototype.$1$2=function(n,s){return this(n,s)},Function.prototype.$2$0=function(){return this()},G(vt),function(n){if(typeof document=="undefined"){n(null);return}if(typeof document.currentScript!="undefined"){n(document.currentScript);return}var s=document.scripts;function a(g){for(var y=0;y<s.length;++y)s[y].removeEventListener("load",a,!1);n(g.target)}for(var f=0;f<s.length;++f)s[f].addEventListener("load",a,!1)}(function(n){Je.currentScript=n,typeof dartMainRunner=="function"?dartMainRunner(pe.p2,[]):pe.p2([])})})()})(C2);const e6=(i,e)=>C2.validateBytes(i,e);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F1=function(i,e){return F1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},F1(i,e)};function bH(i,e){F1(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ft;(function(i){i[i.NONE=0]="NONE",i[i.ROTATE=1]="ROTATE",i[i.TRUCK=2]="TRUCK",i[i.OFFSET=3]="OFFSET",i[i.DOLLY=4]="DOLLY",i[i.ZOOM=5]="ZOOM",i[i.TOUCH_ROTATE=6]="TOUCH_ROTATE",i[i.TOUCH_TRUCK=7]="TOUCH_TRUCK",i[i.TOUCH_OFFSET=8]="TOUCH_OFFSET",i[i.TOUCH_DOLLY=9]="TOUCH_DOLLY",i[i.TOUCH_ZOOM=10]="TOUCH_ZOOM",i[i.TOUCH_DOLLY_TRUCK=11]="TOUCH_DOLLY_TRUCK",i[i.TOUCH_DOLLY_OFFSET=12]="TOUCH_DOLLY_OFFSET",i[i.TOUCH_ZOOM_TRUCK=13]="TOUCH_ZOOM_TRUCK",i[i.TOUCH_ZOOM_OFFSET=14]="TOUCH_ZOOM_OFFSET"})(Ft||(Ft={}));var Yc=Math.PI*2,L2=Math.PI/2,SH=1/.016,MH=1e-5;function Ti(i){return Math.abs(i)<MH}function TH(i,e){return Ti(i-e)}function R2(i,e){return Math.round(i/e)*e}function ad(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function ld(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function I2(i){return"TouchEvent"in window&&i instanceof TouchEvent}function P2(i,e){if(e.set(0,0),I2(i)){for(var t=i,r=0;r<t.touches.length;r++)e.x+=t.touches[r].clientX,e.y+=t.touches[r].clientY;return e.x/=t.touches.length,e.y/=t.touches.length,e}else{var o=i;return e.set(o.clientX,o.clientY),e}}function qg(i,e){return i.isPerspectiveCamera?!1:(console.warn(e+" is not supported in OrthographicCamera"),!0)}function k2(i){return i.invert?i.invert():i.inverse(),i}var EH=function(){function i(){this._listeners={}}return i.prototype.addEventListener=function(e,t){var r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)},i.prototype.removeEventListener=function(e,t){var r=this._listeners,o=r[e];if(o!==void 0){var l=o.indexOf(t);l!==-1&&o.splice(l,1)}},i.prototype.removeAllEventListeners=function(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)},i.prototype.dispatchEvent=function(e){var t=this._listeners,r=t[e.type];if(r!==void 0){e.target=this;for(var o=r.slice(0),l=0,c=o.length;l<c;l++)o[l].call(this,e)}},i}(),AH=typeof window!="undefined",CH=AH&&/Mac/.test(navigator.platform),LH=Object.freeze(Ft),Xg=1/8,Rt,O2,Yg,B1,rs,xn,An,Kg,Kl,Zl,Zg,bs,ud,cd,D2,U1,N2,F2,z1,Qg,t6=function(i){bH(e,i);function e(t,r){var o=i.call(this)||this;if(o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.minDistance=0,o.maxDistance=1/0,o.infinityDolly=!1,o.minZoom=.01,o.maxZoom=1/0,o.dampingFactor=.05,o.draggingDampingFactor=.25,o.azimuthRotateSpeed=1,o.polarRotateSpeed=1,o.dollySpeed=1,o.truckSpeed=2,o.dollyToCursor=!1,o.dragToOffset=!1,o.verticalDragToForward=!1,o.boundaryFriction=0,o.colliderMeshes=[],o.cancel=function(){},o._enabled=!0,o._state=Ft.NONE,o._viewport=null,o._dollyControlAmount=0,o._boundaryEnclosesCamera=!1,o._needsUpdate=!0,o._updatedLastTime=!1,typeof Rt=="undefined"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),o._camera=t,o._yAxisUpSpace=new Rt.Quaternion().setFromUnitVectors(o._camera.up,Yg),o._yAxisUpSpaceInverse=k2(o._yAxisUpSpace.clone()),o._state=Ft.NONE,o._domElement=r,o._target=new Rt.Vector3,o._targetEnd=o._target.clone(),o._focalOffset=new Rt.Vector3,o._focalOffsetEnd=o._focalOffset.clone(),o._spherical=new Rt.Spherical().setFromVector3(xn.copy(o._camera.position).applyQuaternion(o._yAxisUpSpace)),o._sphericalEnd=o._spherical.clone(),o._zoom=o._camera.zoom,o._zoomEnd=o._zoom,o._nearPlaneCorners=[new Rt.Vector3,new Rt.Vector3,new Rt.Vector3,new Rt.Vector3],o._updateNearPlaneCorners(),o._boundary=new Rt.Box3(new Rt.Vector3(-1/0,-1/0,-1/0),new Rt.Vector3(1/0,1/0,1/0)),o._target0=o._target.clone(),o._position0=o._camera.position.clone(),o._zoom0=o._zoom,o._focalOffset0=o._focalOffset.clone(),o._dollyControlAmount=0,o._dollyControlCoord=new Rt.Vector2,o.mouseButtons={left:Ft.ROTATE,middle:Ft.DOLLY,right:Ft.TRUCK,wheel:o._camera.isPerspectiveCamera?Ft.DOLLY:o._camera.isOrthographicCamera?Ft.ZOOM:Ft.NONE},o.touches={one:Ft.TOUCH_ROTATE,two:o._camera.isPerspectiveCamera?Ft.TOUCH_DOLLY_TRUCK:o._camera.isOrthographicCamera?Ft.TOUCH_ZOOM_TRUCK:Ft.NONE,three:Ft.TOUCH_TRUCK},o._domElement){var l=new Rt.Vector2,c=new Rt.Vector2,h=new Rt.Vector2,m=new Rt.Vector4,v=function(V,X,Q){if(o._camera.isPerspectiveCamera){var ae=o._camera,le=xn.copy(ae.position).sub(o._target),he=ae.getEffectiveFOV()*Rt.MathUtils.DEG2RAD,re=le.length()*Math.tan(he*.5),ee=o.truckSpeed*V*re/m.w,_=o.truckSpeed*X*re/m.w;o.verticalDragToForward?(Q?o.setFocalOffset(o._focalOffsetEnd.x+ee,o._focalOffsetEnd.y,o._focalOffsetEnd.z,!0):o.truck(ee,0,!0),o.forward(-_,!0)):Q?o.setFocalOffset(o._focalOffsetEnd.x+ee,o._focalOffsetEnd.y+_,o._focalOffsetEnd.z,!0):o.truck(ee,_,!0)}else if(o._camera.isOrthographicCamera){var p=o._camera,ee=V*(p.right-p.left)/p.zoom/m.z,_=X*(p.top-p.bottom)/p.zoom/m.w;Q?o.setFocalOffset(o._focalOffsetEnd.x+ee,o._focalOffsetEnd.y+_,o._focalOffsetEnd.z,!0):o.truck(ee,_,!0)}},b=function(V,X){var Q=Yc*o.azimuthRotateSpeed*V/m.w,ae=Yc*o.polarRotateSpeed*X/m.w;o.rotate(Q,ae,!0)},T=function(V,X,Q){var ae=Math.pow(.95,-V*o.dollySpeed),le=o._sphericalEnd.radius*ae,he=o._sphericalEnd.radius;o.dollyTo(le),o.infinityDolly&&le<o.minDistance&&(o._camera.getWorldDirection(xn),o._targetEnd.add(xn.normalize().multiplyScalar(he)),o._target.add(xn.normalize().multiplyScalar(he))),o.dollyToCursor&&(o._dollyControlAmount+=o._sphericalEnd.radius-he,o._dollyControlCoord.set(X,Q))},L=function(V){var X=Math.pow(.95,V*o.dollySpeed);o.zoomTo(o._zoom*X)},P=function(){o._state=Ft.NONE,document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I,{passive:!1}),document.removeEventListener("mouseup",B),document.removeEventListener("touchend",B)},O=function(V){if(!!o._enabled){switch(P(),V.button){case Rt.MOUSE.LEFT:o._state=o.mouseButtons.left;break;case Rt.MOUSE.MIDDLE:o._state=o.mouseButtons.middle;break;case Rt.MOUSE.RIGHT:o._state=o.mouseButtons.right;break}N(V)}},z=function(V){if(!!o._enabled){switch(P(),V.touches.length){case 1:o._state=o.touches.one;break;case 2:o._state=o.touches.two;break;case 3:o._state=o.touches.three;break}N(V)}},G=-1,k=function(V){if(!(!o._enabled||o.mouseButtons.wheel===Ft.NONE)){if(V.preventDefault(),o.dollyToCursor||o.mouseButtons.wheel===Ft.ROTATE||o.mouseButtons.wheel===Ft.TRUCK){var X=performance.now();G-X<1e3&&o._getClientRect(m),G=X}var Q=CH?-1:-3,ae=V.deltaMode===1?V.deltaY/Q:V.deltaY/(Q*10),le=o.dollyToCursor?(V.clientX-m.x)/m.z*2-1:0,he=o.dollyToCursor?(V.clientY-m.y)/m.w*-2+1:0;switch(o.mouseButtons.wheel){case Ft.ROTATE:{b(V.deltaX,V.deltaY);break}case Ft.TRUCK:{v(V.deltaX,V.deltaY,!1);break}case Ft.OFFSET:{v(V.deltaX,V.deltaY,!0);break}case Ft.DOLLY:{T(-ae,le,he);break}case Ft.ZOOM:{L(-ae);break}}o.dispatchEvent({type:"control",originalEvent:V})}},A=function(V){!o._enabled||V.preventDefault()},N=function(V){if(!!o._enabled){P2(V,rs),o._getClientRect(m),l.copy(rs),c.copy(rs);var X=I2(V)&&V.touches.length>=2;if(X){var Q=V,ae=rs.x-Q.touches[1].clientX,le=rs.y-Q.touches[1].clientY,he=Math.sqrt(ae*ae+le*le);h.set(0,he);var re=(Q.touches[0].clientX+Q.touches[1].clientX)*.5,ee=(Q.touches[0].clientY+Q.touches[1].clientY)*.5;c.set(re,ee)}document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}),document.addEventListener("mouseup",B),document.addEventListener("touchend",B),o.dispatchEvent({type:"controlstart",originalEvent:V})}},I=function(V){if(!!o._enabled){V.preventDefault(),P2(V,rs);var X=c.x-rs.x,Q=c.y-rs.y;switch(c.copy(rs),o._state){case Ft.ROTATE:case Ft.TOUCH_ROTATE:{b(X,Q);break}case Ft.DOLLY:case Ft.ZOOM:{var ae=o.dollyToCursor?(l.x-m.x)/m.z*2-1:0,le=o.dollyToCursor?(l.y-m.y)/m.w*-2+1:0;o._state===Ft.DOLLY?T(Q*Xg,ae,le):L(Q*Xg);break}case Ft.TOUCH_DOLLY:case Ft.TOUCH_ZOOM:case Ft.TOUCH_DOLLY_TRUCK:case Ft.TOUCH_ZOOM_TRUCK:case Ft.TOUCH_DOLLY_OFFSET:case Ft.TOUCH_ZOOM_OFFSET:{var he=V,re=rs.x-he.touches[1].clientX,ee=rs.y-he.touches[1].clientY,_=Math.sqrt(re*re+ee*ee),p=h.y-_;h.set(0,_);var ae=o.dollyToCursor?(c.x-m.x)/m.z*2-1:0,le=o.dollyToCursor?(c.y-m.y)/m.w*-2+1:0;o._state===Ft.TOUCH_DOLLY||o._state===Ft.TOUCH_DOLLY_TRUCK?T(p*Xg,ae,le):L(p*Xg),o._state===Ft.TOUCH_DOLLY_TRUCK||o._state===Ft.TOUCH_ZOOM_TRUCK?v(X,Q,!1):(o._state===Ft.TOUCH_DOLLY_OFFSET||o._state===Ft.TOUCH_ZOOM_OFFSET)&&v(X,Q,!0);break}case Ft.TRUCK:case Ft.TOUCH_TRUCK:{v(X,Q,!1);break}case Ft.OFFSET:case Ft.TOUCH_OFFSET:{v(X,Q,!0);break}}o.dispatchEvent({type:"control",originalEvent:V})}},B=function(V){!o._enabled||(P(),o.dispatchEvent({type:"controlend",originalEvent:V}))};o._domElement.addEventListener("mousedown",O),o._domElement.addEventListener("touchstart",z),o._domElement.addEventListener("wheel",k),o._domElement.addEventListener("contextmenu",A),o._removeAllEventListeners=function(){o._domElement.removeEventListener("mousedown",O),o._domElement.removeEventListener("touchstart",z),o._domElement.removeEventListener("wheel",k),o._domElement.removeEventListener("contextmenu",A),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I,{passive:!1}),document.removeEventListener("mouseup",B),document.removeEventListener("touchend",B)},o.cancel=function(){P(),o.dispatchEvent({type:"controlend",originalEvent:null})}}return o.update(0),o}return e.install=function(t){Rt=t.THREE,O2=Object.freeze(new Rt.Vector3(0,0,0)),Yg=Object.freeze(new Rt.Vector3(0,1,0)),B1=Object.freeze(new Rt.Vector3(0,0,1)),rs=new Rt.Vector2,xn=new Rt.Vector3,An=new Rt.Vector3,Kg=new Rt.Vector3,Kl=new Rt.Vector3,Zl=new Rt.Vector3,Zg=new Rt.Vector3,bs=new Rt.Spherical,ud=new Rt.Spherical,cd=new Rt.Box3,D2=new Rt.Box3,U1=new Rt.Sphere,N2=new Rt.Quaternion,F2=new Rt.Quaternion,z1=new Rt.Matrix4,Qg=new Rt.Raycaster},Object.defineProperty(e,"ACTION",{get:function(){return LH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,t||this.cancel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAction",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._spherical.radius},set:function(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"azimuthAngle",{get:function(){return this._spherical.theta},set:function(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polarAngle",{get:function(){return this._spherical.phi},set:function(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phiSpeed",{set:function(t){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thetaSpeed",{set:function(t){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(t,r){i.prototype.addEventListener.call(this,t,r)},e.prototype.removeEventListener=function(t,r){i.prototype.removeEventListener.call(this,t,r)},e.prototype.rotate=function(t,r,o){o===void 0&&(o=!1),this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,o)},e.prototype.rotateTo=function(t,r,o){o===void 0&&(o=!1);var l=Rt.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),c=Rt.MathUtils.clamp(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=l,this._sphericalEnd.phi=c,this._sphericalEnd.makeSafe(),o||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._needsUpdate=!0},e.prototype.dolly=function(t,r){r===void 0&&(r=!1),this.dollyTo(this._sphericalEnd.radius-t,r)},e.prototype.dollyTo=function(t,r){r===void 0&&(r=!1),!qg(this._camera,"dolly")&&(this._sphericalEnd.radius=Rt.MathUtils.clamp(t,this.minDistance,this.maxDistance),r||(this._spherical.radius=this._sphericalEnd.radius),this._needsUpdate=!0)},e.prototype.zoom=function(t,r){r===void 0&&(r=!1),this.zoomTo(this._zoomEnd+t,r)},e.prototype.zoomTo=function(t,r){r===void 0&&(r=!1),this._zoomEnd=Rt.MathUtils.clamp(t,this.minZoom,this.maxZoom),r||(this._zoom=this._zoomEnd),this._needsUpdate=!0},e.prototype.pan=function(t,r,o){o===void 0&&(o=!1),console.log("`pan` has been renamed to `truck`"),this.truck(t,r,o)},e.prototype.truck=function(t,r,o){o===void 0&&(o=!1),this._camera.updateMatrix(),Kl.setFromMatrixColumn(this._camera.matrix,0),Zl.setFromMatrixColumn(this._camera.matrix,1),Kl.multiplyScalar(t),Zl.multiplyScalar(-r);var l=xn.copy(Kl).add(Zl);this._encloseToBoundary(this._targetEnd,l,this.boundaryFriction),o||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.forward=function(t,r){r===void 0&&(r=!1),xn.setFromMatrixColumn(this._camera.matrix,0),xn.crossVectors(this._camera.up,xn),xn.multiplyScalar(t),this._encloseToBoundary(this._targetEnd,xn,this.boundaryFriction),r||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.moveTo=function(t,r,o,l){l===void 0&&(l=!1),this._targetEnd.set(t,r,o),l||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.fitToBox=function(t,r,o){var l=o===void 0?{}:o,c=l.paddingLeft,h=c===void 0?0:c,m=l.paddingRight,v=m===void 0?0:m,b=l.paddingBottom,T=b===void 0?0:b,L=l.paddingTop,P=L===void 0?0:L,O=t.isBox3?cd.copy(t):cd.setFromObject(t);if(O.isEmpty()){console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting");return}var z=R2(this._sphericalEnd.theta,L2),G=R2(this._sphericalEnd.phi,L2);this.rotateTo(z,G,r);var k=xn.setFromSpherical(this._sphericalEnd).normalize(),A=N2.setFromUnitVectors(k,B1),N=TH(Math.abs(k.y),1);N&&A.multiply(F2.setFromAxisAngle(Yg,z));var I=D2.makeEmpty();An.copy(O.min).applyQuaternion(A),I.expandByPoint(An),An.copy(O.min).setX(O.max.x).applyQuaternion(A),I.expandByPoint(An),An.copy(O.min).setY(O.max.y).applyQuaternion(A),I.expandByPoint(An),An.copy(O.max).setZ(O.min.z).applyQuaternion(A),I.expandByPoint(An),An.copy(O.min).setZ(O.max.z).applyQuaternion(A),I.expandByPoint(An),An.copy(O.max).setY(O.min.y).applyQuaternion(A),I.expandByPoint(An),An.copy(O.max).setX(O.min.x).applyQuaternion(A),I.expandByPoint(An),An.copy(O.max).applyQuaternion(A),I.expandByPoint(An),A.setFromUnitVectors(B1,k),I.min.x-=h,I.min.y-=T,I.max.x+=v,I.max.y+=P;var B=I.getSize(xn),V=I.getCenter(An).applyQuaternion(A),X=this._camera.isPerspectiveCamera,Q=this._camera.isOrthographicCamera;if(X){var ae=this.getDistanceToFitBox(B.x,B.y,B.z);this.moveTo(V.x,V.y,V.z,r),this.dollyTo(ae,r),this.setFocalOffset(0,0,0,r);return}else if(Q){var le=this._camera,he=le.right-le.left,re=le.top-le.bottom,ee=Math.min(he/B.x,re/B.y);this.moveTo(V.x,V.y,V.z,r),this.zoomTo(ee,r),this.setFocalOffset(0,0,0,r);return}},e.prototype.fitTo=function(t,r,o){o===void 0&&(o={}),console.warn("camera-controls: fitTo() has been renamed to fitToBox()"),this.fitToBox(t,r,o)},e.prototype.fitToSphere=function(t,r){var o=t instanceof Rt.Sphere,l=o?U1.copy(t):RH(t,U1),c=this.getDistanceToFitSphere(l.radius);this.moveTo(l.center.x,l.center.y,l.center.z,r),this.dollyTo(c,r),this.setFocalOffset(0,0,0,r)},e.prototype.setLookAt=function(t,r,o,l,c,h,m){m===void 0&&(m=!1);var v=xn.set(t,r,o),b=An.set(l,c,h);this._targetEnd.copy(b),this._sphericalEnd.setFromVector3(v.sub(b).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.lerpLookAt=function(t,r,o,l,c,h,m,v,b,T,L,P,O,z){z===void 0&&(z=!1);var G=xn.set(t,r,o),k=An.set(l,c,h);bs.setFromVector3(G.sub(k).applyQuaternion(this._yAxisUpSpace));var A=xn.set(T,L,P);this._targetEnd.copy(k).lerp(A,O);var N=An.set(m,v,b);ud.setFromVector3(N.sub(A).applyQuaternion(this._yAxisUpSpace));var I=ud.theta-bs.theta,B=ud.phi-bs.phi,V=ud.radius-bs.radius;this._sphericalEnd.set(bs.radius+V*O,bs.phi+B*O,bs.theta+I*O),this.normalizeRotations(),z||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.setPosition=function(t,r,o,l){l===void 0&&(l=!1),this.setLookAt(t,r,o,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,l)},e.prototype.setTarget=function(t,r,o,l){l===void 0&&(l=!1);var c=this.getPosition(xn);this.setLookAt(c.x,c.y,c.z,t,r,o,l)},e.prototype.setFocalOffset=function(t,r,o,l){l===void 0&&(l=!1),this._focalOffsetEnd.set(t,r,o),l||this._focalOffset.copy(this._focalOffsetEnd),this._needsUpdate=!0},e.prototype.setBoundary=function(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0},e.prototype.setViewport=function(t,r,o,l){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Rt.Vector4,typeof t=="number"?this._viewport.set(t,r,o,l):this._viewport.copy(t)},e.prototype.getDistanceToFitBox=function(t,r,o){if(qg(this._camera,"getDistanceToFit"))return this._spherical.radius;var l=this._camera,c=t/r,h=l.getEffectiveFOV()*Rt.MathUtils.DEG2RAD,m=l.aspect,v=c<m?r:t/m;return v*.5/Math.tan(h*.5)+o*.5},e.prototype.getDistanceToFit=function(t,r,o){return console.warn("camera-controls: getDistanceToFit() has been renamed to getDistanceToFitBox()"),this.getDistanceToFitBox(t,r,o)},e.prototype.getDistanceToFitSphere=function(t){if(qg(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var r=this._camera,o=r.getEffectiveFOV()*Rt.MathUtils.DEG2RAD,l=Math.atan(Math.tan(o*.5)*r.aspect)*2,c=1<r.aspect?o:l;return t/Math.sin(c*.5)},e.prototype.getTarget=function(t){var r=!!t&&t.isVector3?t:new Rt.Vector3;return r.copy(this._targetEnd)},e.prototype.getPosition=function(t){var r=!!t&&t.isVector3?t:new Rt.Vector3;return r.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},e.prototype.getFocalOffset=function(t){var r=!!t&&t.isVector3?t:new Rt.Vector3;return r.copy(this._focalOffsetEnd)},e.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%Yc,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Yc),this._spherical.theta+=Yc*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Yc)},e.prototype.reset=function(t){t===void 0&&(t=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)},e.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},e.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Yg),k2(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))},e.prototype.update=function(t){var r=this._state===Ft.NONE?this.dampingFactor:this.draggingDampingFactor,o=1-Math.exp(-r*t*SH),l=this._sphericalEnd.theta-this._spherical.theta,c=this._sphericalEnd.phi-this._spherical.phi,h=this._sphericalEnd.radius-this._spherical.radius,m=xn.subVectors(this._targetEnd,this._target),v=An.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Ti(l)||!Ti(c)||!Ti(h)||!Ti(m.x)||!Ti(m.y)||!Ti(m.z)||!Ti(v.x)||!Ti(v.y)||!Ti(v.z)?(this._spherical.set(this._spherical.radius+h*o,this._spherical.phi+c*o,this._spherical.theta+l*o),this._target.add(m.multiplyScalar(o)),this._focalOffset.add(v.multiplyScalar(o)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(this._camera.isPerspectiveCamera){var b=this._camera,T=xn.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),L=An.copy(T).cross(b.up).normalize();L.lengthSq()===0&&(L.x=1);var P=Kg.crossVectors(L,T),O=this._sphericalEnd.radius*Math.tan(b.getEffectiveFOV()*Rt.MathUtils.DEG2RAD*.5),z=this._sphericalEnd.radius-this._dollyControlAmount,G=(z-this._sphericalEnd.radius)/this._sphericalEnd.radius,k=xn.copy(this._targetEnd).add(L.multiplyScalar(this._dollyControlCoord.x*O*b.aspect)).add(P.multiplyScalar(this._dollyControlCoord.y*O));this._targetEnd.lerp(k,G),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var A=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,A),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);var N=!Ti(this._focalOffset.x)||!Ti(this._focalOffset.y)||!Ti(this._focalOffset.z);N&&(this._camera.updateMatrix(),Kl.setFromMatrixColumn(this._camera.matrix,0),Zl.setFromMatrixColumn(this._camera.matrix,1),Zg.setFromMatrixColumn(this._camera.matrix,2),Kl.multiplyScalar(this._focalOffset.x),Zl.multiplyScalar(-this._focalOffset.y),Zg.multiplyScalar(this._focalOffset.z),xn.copy(Kl).add(Zl).add(Zg),this._camera.position.add(xn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),xn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var I=this._zoomEnd-this._zoom;this._zoom+=I*o,this._camera.zoom!==this._zoom&&(Ti(I)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var B=this._needsUpdate;return B&&!this._updatedLastTime?(this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):B?this.dispatchEvent({type:"update"}):!B&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=B,this._needsUpdate=!1,B},e.prototype.toJSON=function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ad(this.maxDistance),minZoom:this.minZoom,maxZoom:ad(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ad(this.maxPolarAngle),minAzimuthAngle:ad(this.minAzimuthAngle),maxAzimuthAngle:ad(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:xn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})},e.prototype.fromJSON=function(t,r){r===void 0&&(r=!1);var o=JSON.parse(t),l=xn.fromArray(o.position);this.enabled=o.enabled,this.minDistance=o.minDistance,this.maxDistance=ld(o.maxDistance),this.minZoom=o.minZoom,this.maxZoom=ld(o.maxZoom),this.minPolarAngle=o.minPolarAngle,this.maxPolarAngle=ld(o.maxPolarAngle),this.minAzimuthAngle=ld(o.minAzimuthAngle),this.maxAzimuthAngle=ld(o.maxAzimuthAngle),this.dampingFactor=o.dampingFactor,this.draggingDampingFactor=o.draggingDampingFactor,this.dollySpeed=o.dollySpeed,this.truckSpeed=o.truckSpeed,this.dollyToCursor=o.dollyToCursor,this.verticalDragToForward=o.verticalDragToForward,this._target0.fromArray(o.target0),this._position0.fromArray(o.position0),this._zoom0=o.zoom0,this._focalOffset0.fromArray(o.focalOffset0),this.moveTo(o.target[0],o.target[1],o.target[2],r),bs.setFromVector3(l.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(bs.theta,bs.phi,r),this.zoomTo(o.zoom,r),this.setFocalOffset(o.focalOffset[0],o.focalOffset[1],o.focalOffset[2],r),this._needsUpdate=!0},e.prototype.dispose=function(){this._removeAllEventListeners()},e.prototype._encloseToBoundary=function(t,r,o){var l=r.lengthSq();if(l===0)return t;var c=An.copy(r).add(t),h=this._boundary.clampPoint(c,Kg),m=h.sub(c),v=m.lengthSq();if(v===0)return t.add(r);if(v===l)return t;if(o===0)return t.add(r).add(m);var b=1+o*v/r.dot(m);return t.add(An.copy(r).multiplyScalar(b)).add(m.multiplyScalar(1-o))},e.prototype._updateNearPlaneCorners=function(){if(this._camera.isPerspectiveCamera){var t=this._camera,r=t.near,o=t.getEffectiveFOV()*Rt.MathUtils.DEG2RAD,l=Math.tan(o*.5)*r,c=l*t.aspect;this._nearPlaneCorners[0].set(-c,-l,0),this._nearPlaneCorners[1].set(c,-l,0),this._nearPlaneCorners[2].set(c,l,0),this._nearPlaneCorners[3].set(-c,l,0)}else if(this._camera.isOrthographicCamera){var t=this._camera,h=1/t.zoom,m=t.left*h,v=t.right*h,b=t.top*h,T=t.bottom*h;this._nearPlaneCorners[0].set(m,b,0),this._nearPlaneCorners[1].set(v,b,0),this._nearPlaneCorners[2].set(v,T,0),this._nearPlaneCorners[3].set(m,T,0)}},e.prototype._collisionTest=function(){var t=1/0,r=this.colliderMeshes.length>=1;if(!r||qg(this._camera,"_collisionTest"))return t;t=this._spherical.radius;var o=xn.setFromSpherical(this._spherical).divideScalar(t);z1.lookAt(O2,o,this._camera.up);for(var l=0;l<4;l++){var c=An.copy(this._nearPlaneCorners[l]);c.applyMatrix4(z1);var h=Kg.addVectors(this._target,c);Qg.set(h,o),Qg.far=t;var m=Qg.intersectObjects(this.colliderMeshes);m.length!==0&&m[0].distance<t&&(t=m[0].distance)}return t},e.prototype._getClientRect=function(t){var r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.z=this._viewport.z,t.w=this._viewport.w):(t.z=r.width,t.w=r.height),t},e.prototype._removeAllEventListeners=function(){},e}(EH);function RH(i,e){var t=e,r=t.center;i.traverse(function(l){!l.isMesh||cd.expandByObject(l)}),cd.getCenter(r);var o=0;return i.traverse(function(l){if(!!l.isMesh){var c=l,h=c.geometry.clone();if(h.applyMatrix4(c.matrixWorld),c.geometry.isBufferGeometry)for(var m=h,v=m.attributes.position,b=0,T=v.count;b<T;b++)xn.fromBufferAttribute(v,b),o=Math.max(o,r.distanceToSquared(xn));else for(var L=h.vertices,b=0,T=L.length;b<T;b++)o=Math.max(o,r.distanceToSquared(L[b]))}}),t.radius=Math.sqrt(o),t}var fd={exports:{}},un={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var B2=Object.getOwnPropertySymbols,IH=Object.prototype.hasOwnProperty,PH=Object.prototype.propertyIsEnumerable;function kH(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function OH(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(l){return e[l]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var U2=OH()?Object.assign:function(i,e){for(var t,r=kH(i),o,l=1;l<arguments.length;l++){t=Object(arguments[l]);for(var c in t)IH.call(t,c)&&(r[c]=t[c]);if(B2){o=B2(t);for(var h=0;h<o.length;h++)PH.call(t,o[h])&&(r[o[h]]=t[o[h]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=U2,Kc=60103,z2=60106;un.Fragment=60107;un.StrictMode=60108;un.Profiler=60114;var H2=60109,G2=60110,V2=60112;un.Suspense=60113;var $2=60115,W2=60116;if(typeof Symbol=="function"&&Symbol.for){var Ss=Symbol.for;Kc=Ss("react.element"),z2=Ss("react.portal"),un.Fragment=Ss("react.fragment"),un.StrictMode=Ss("react.strict_mode"),un.Profiler=Ss("react.profiler"),H2=Ss("react.provider"),G2=Ss("react.context"),V2=Ss("react.forward_ref"),un.Suspense=Ss("react.suspense"),$2=Ss("react.memo"),W2=Ss("react.lazy")}var j2=typeof Symbol=="function"&&Symbol.iterator;function DH(i){return i===null||typeof i!="object"?null:(i=j2&&i[j2]||i["@@iterator"],typeof i=="function"?i:null)}function hd(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X2={};function Zc(i,e,t){this.props=i,this.context=e,this.refs=X2,this.updater=t||q2}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error(hd(85));this.updater.enqueueSetState(this,i,e,"setState")};Zc.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Y2(){}Y2.prototype=Zc.prototype;function G1(i,e,t){this.props=i,this.context=e,this.refs=X2,this.updater=t||q2}var V1=G1.prototype=new Y2;V1.constructor=G1;H1(V1,Zc.prototype);V1.isPureReactComponent=!0;var $1={current:null},K2=Object.prototype.hasOwnProperty,Z2={key:!0,ref:!0,__self:!0,__source:!0};function Q2(i,e,t){var r,o={},l=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(l=""+e.key),e)K2.call(e,r)&&!Z2.hasOwnProperty(r)&&(o[r]=e[r]);var h=arguments.length-2;if(h===1)o.children=t;else if(1<h){for(var m=Array(h),v=0;v<h;v++)m[v]=arguments[v+2];o.children=m}if(i&&i.defaultProps)for(r in h=i.defaultProps,h)o[r]===void 0&&(o[r]=h[r]);return{$$typeof:Kc,type:i,key:l,ref:c,props:o,_owner:$1.current}}function NH(i,e){return{$$typeof:Kc,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function W1(i){return typeof i=="object"&&i!==null&&i.$$typeof===Kc}function FH(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var J2=/\/+/g;function j1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?FH(""+i.key):e.toString(36)}function Jg(i,e,t,r,o){var l=typeof i;(l==="undefined"||l==="boolean")&&(i=null);var c=!1;if(i===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(i.$$typeof){case Kc:case z2:c=!0}}if(c)return c=i,o=o(c),i=r===""?"."+j1(c,0):r,Array.isArray(o)?(t="",i!=null&&(t=i.replace(J2,"$&/")+"/"),Jg(o,e,t,"",function(v){return v})):o!=null&&(W1(o)&&(o=NH(o,t+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(J2,"$&/")+"/")+i)),e.push(o)),1;if(c=0,r=r===""?".":r+":",Array.isArray(i))for(var h=0;h<i.length;h++){l=i[h];var m=r+j1(l,h);c+=Jg(l,e,t,m,o)}else if(m=DH(i),typeof m=="function")for(i=m.call(i),h=0;!(l=i.next()).done;)l=l.value,m=r+j1(l,h++),c+=Jg(l,e,t,m,o);else if(l==="object")throw e=""+i,Error(hd(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e));return c}function e0(i,e,t){if(i==null)return i;var r=[],o=0;return Jg(i,r,"","",function(l){return e.call(t,l,o++)}),r}function BH(i){if(i._status===-1){var e=i._result;e=e(),i._status=0,i._result=e,e.then(function(t){i._status===0&&(t=t.default,i._status=1,i._result=t)},function(t){i._status===0&&(i._status=2,i._result=t)})}if(i._status===1)return i._result;throw i._result}var eL={current:null};function Ao(){var i=eL.current;if(i===null)throw Error(hd(321));return i}var UH={ReactCurrentDispatcher:eL,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:$1,IsSomeRendererActing:{current:!1},assign:H1};un.Children={map:e0,forEach:function(i,e,t){e0(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return e0(i,function(){e++}),e},toArray:function(i){return e0(i,function(e){return e})||[]},only:function(i){if(!W1(i))throw Error(hd(143));return i}};un.Component=Zc;un.PureComponent=G1;un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UH;un.cloneElement=function(i,e,t){if(i==null)throw Error(hd(267,i));var r=H1({},i.props),o=i.key,l=i.ref,c=i._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,c=$1.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(m in e)K2.call(e,m)&&!Z2.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=t;else if(1<m){h=Array(m);for(var v=0;v<m;v++)h[v]=arguments[v+2];r.children=h}return{$$typeof:Kc,type:i.type,key:o,ref:l,props:r,_owner:c}};un.createContext=function(i,e){return e===void 0&&(e=null),i={$$typeof:G2,_calculateChangedBits:e,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null},i.Provider={$$typeof:H2,_context:i},i.Consumer=i};un.createElement=Q2;un.createFactory=function(i){var e=Q2.bind(null,i);return e.type=i,e};un.createRef=function(){return{current:null}};un.forwardRef=function(i){return{$$typeof:V2,render:i}};un.isValidElement=W1;un.lazy=function(i){return{$$typeof:W2,_payload:{_status:-1,_result:i},_init:BH}};un.memo=function(i,e){return{$$typeof:$2,type:i,compare:e===void 0?null:e}};un.useCallback=function(i,e){return Ao().useCallback(i,e)};un.useContext=function(i,e){return Ao().useContext(i,e)};un.useDebugValue=function(){};un.useEffect=function(i,e){return Ao().useEffect(i,e)};un.useImperativeHandle=function(i,e,t){return Ao().useImperativeHandle(i,e,t)};un.useLayoutEffect=function(i,e){return Ao().useLayoutEffect(i,e)};un.useMemo=function(i,e){return Ao().useMemo(i,e)};un.useReducer=function(i,e,t){return Ao().useReducer(i,e,t)};un.useRef=function(i){return Ao().useRef(i)};un.useState=function(i){return Ao().useState(i)};un.version="17.0.2";fd.exports=un;var n6=fd.exports,t0={exports:{}},dd={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zH=fd.exports,tL=60103;dd.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var nL=Symbol.for;tL=nL("react.element"),dd.Fragment=nL("react.fragment")}var HH=zH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GH=Object.prototype.hasOwnProperty,VH={key:!0,ref:!0,__self:!0,__source:!0};function rL(i,e,t){var r,o={},l=null,c=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)GH.call(e,r)&&!VH.hasOwnProperty(r)&&(o[r]=e[r]);if(i&&i.defaultProps)for(r in e=i.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:tL,type:i,key:l,ref:c,props:o,_owner:HH.current}}dd.jsx=rL;dd.jsxs=rL;t0.exports=dd;const $H=t0.exports.jsx,WH=t0.exports.jsxs,jH=t0.exports.Fragment;var qH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsx:$H,jsxs:WH,Fragment:jH}),Ql={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(N1,function(){var t=navigator.userAgent,r=navigator.platform,o=/gecko\/\d/i.test(t),l=/MSIE \d/.test(t),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),h=/Edge\/(\d+)/.exec(t),m=l||c||h,v=m&&(l?document.documentMode||6:+(h||c)[1]),b=!h&&/WebKit\//.test(t),T=b&&/Qt\/\d+\.\d+/.test(t),L=!h&&/Chrome\//.test(t),P=/Opera\//.test(t),O=/Apple Computer/.test(navigator.vendor),z=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),G=/PhantomJS/.test(t),k=O&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),A=/Android/.test(t),N=k||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),I=k||/Mac/.test(r),B=/\bCrOS\b/.test(t),V=/win/i.test(r),X=P&&t.match(/Version\/(\d*\.\d*)/);X&&(X=Number(X[1])),X&&X>=15&&(P=!1,b=!0);var Q=I&&(T||P&&(X==null||X<12.11)),ae=o||m&&v>=9;function le(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var he=function(u,d){var w=u.className,x=le(d).exec(w);if(x){var M=w.slice(x.index+x[0].length);u.className=w.slice(0,x.index)+(M?x[1]+M:"")}};function re(u){for(var d=u.childNodes.length;d>0;--d)u.removeChild(u.firstChild);return u}function ee(u,d){return re(u).appendChild(d)}function _(u,d,w,x){var M=document.createElement(u);if(w&&(M.className=w),x&&(M.style.cssText=x),typeof d=="string")M.appendChild(document.createTextNode(d));else if(d)for(var F=0;F<d.length;++F)M.appendChild(d[F]);return M}function p(u,d,w,x){var M=_(u,d,w,x);return M.setAttribute("role","presentation"),M}var Z;document.createRange?Z=function(u,d,w,x){var M=document.createRange();return M.setEnd(x||u,w),M.setStart(u,d),M}:Z=function(u,d,w){var x=document.body.createTextRange();try{x.moveToElementText(u.parentNode)}catch{return x}return x.collapse(!0),x.moveEnd("character",w),x.moveStart("character",d),x};function E(u,d){if(d.nodeType==3&&(d=d.parentNode),u.contains)return u.contains(d);do if(d.nodeType==11&&(d=d.host),d==u)return!0;while(d=d.parentNode)}function ye(){var u;try{u=document.activeElement}catch{u=document.body||null}for(;u&&u.shadowRoot&&u.shadowRoot.activeElement;)u=u.shadowRoot.activeElement;return u}function Re(u,d){var w=u.className;le(d).test(w)||(u.className+=(w?" ":"")+d)}function Me(u,d){for(var w=u.split(" "),x=0;x<w.length;x++)w[x]&&!le(w[x]).test(d)&&(d+=" "+w[x]);return d}var pe=function(u){u.select()};k?pe=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:m&&(pe=function(u){try{u.select()}catch{}});function ve(u){var d=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,d)}}function Ce(u,d,w){d||(d={});for(var x in u)u.hasOwnProperty(x)&&(w!==!1||!d.hasOwnProperty(x))&&(d[x]=u[x]);return d}function _e(u,d,w,x,M){d==null&&(d=u.search(/[^\s\u00a0]/),d==-1&&(d=u.length));for(var F=x||0,W=M||0;;){var Y=u.indexOf("	",F);if(Y<0||Y>=d)return W+(d-F);W+=Y-F,W+=w-W%w,F=Y+1}}var Pe=function(){this.id=null,this.f=null,this.time=0,this.handler=ve(this.onTimeout,this)};Pe.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},Pe.prototype.set=function(u,d){this.f=d;var w=+new Date+u;(!this.id||w<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=w)};function Te(u,d){for(var w=0;w<u.length;++w)if(u[w]==d)return w;return-1}var Oe=50,ze={toString:function(){return"CodeMirror.Pass"}},He={scroll:!1},$={origin:"*mouse"},$e={origin:"+move"};function Le(u,d,w){for(var x=0,M=0;;){var F=u.indexOf("	",x);F==-1&&(F=u.length);var W=F-x;if(F==u.length||M+W>=d)return x+Math.min(W,d-M);if(M+=F-x,M+=w-M%w,x=F+1,M>=d)return x}}var Fe=[""];function qe(u){for(;Fe.length<=u;)Fe.push(De(Fe)+" ");return Fe[u]}function De(u){return u[u.length-1]}function oe(u,d){for(var w=[],x=0;x<u.length;x++)w[x]=d(u[x],x);return w}function vt(u,d,w){for(var x=0,M=w(d);x<u.length&&w(u[x])<=M;)x++;u.splice(x,0,d)}function j(){}function Je(u,d){var w;return Object.create?w=Object.create(u):(j.prototype=u,w=new j),d&&Ce(d,w),w}var Wt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function U(u){return/\w/.test(u)||u>"\x80"&&(u.toUpperCase()!=u.toLowerCase()||Wt.test(u))}function n(u,d){return d?d.source.indexOf("\\w")>-1&&U(u)?!0:d.test(u):U(u)}function s(u){for(var d in u)if(u.hasOwnProperty(d)&&u[d])return!1;return!0}var a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function f(u){return u.charCodeAt(0)>=768&&a.test(u)}function g(u,d,w){for(;(w<0?d>0:d<u.length)&&f(u.charAt(d));)d+=w;return d}function y(u,d,w){for(var x=d>w?-1:1;;){if(d==w)return d;var M=(d+w)/2,F=x<0?Math.ceil(M):Math.floor(M);if(F==d)return u(F)?d:w;u(F)?w=F:d=F+x}}function S(u,d,w,x){if(!u)return x(d,w,"ltr",0);for(var M=!1,F=0;F<u.length;++F){var W=u[F];(W.from<w&&W.to>d||d==w&&W.to==d)&&(x(Math.max(W.from,d),Math.min(W.to,w),W.level==1?"rtl":"ltr",F),M=!0)}M||x(d,w,"ltr")}var C=null;function R(u,d,w){var x;C=null;for(var M=0;M<u.length;++M){var F=u[M];if(F.from<d&&F.to>d)return M;F.to==d&&(F.from!=F.to&&w=="before"?x=M:C=M),F.from==d&&(F.from!=F.to&&w!="before"?x=M:C=M)}return x!=null?x:C}var D=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function w(ie){return ie<=247?u.charAt(ie):1424<=ie&&ie<=1524?"R":1536<=ie&&ie<=1785?d.charAt(ie-1536):1774<=ie&&ie<=2220?"r":8192<=ie&&ie<=8203?"w":ie==8204?"b":"L"}var x=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,M=/[stwN]/,F=/[LRr]/,W=/[Lb1n]/,Y=/[1n]/;function J(ie,me,xe){this.level=ie,this.from=me,this.to=xe}return function(ie,me){var xe=me=="ltr"?"L":"R";if(ie.length==0||me=="ltr"&&!x.test(ie))return!1;for(var Ee=ie.length,Se=[],Be=0;Be<Ee;++Be)Se.push(w(ie.charCodeAt(Be)));for(var Ve=0,Ze=xe;Ve<Ee;++Ve){var nt=Se[Ve];nt=="m"?Se[Ve]=Ze:Ze=nt}for(var at=0,rt=xe;at<Ee;++at){var ht=Se[at];ht=="1"&&rt=="r"?Se[at]="n":F.test(ht)&&(rt=ht,ht=="r"&&(Se[at]="R"))}for(var Ct=1,Et=Se[0];Ct<Ee-1;++Ct){var qt=Se[Ct];qt=="+"&&Et=="1"&&Se[Ct+1]=="1"?Se[Ct]="1":qt==","&&Et==Se[Ct+1]&&(Et=="1"||Et=="n")&&(Se[Ct]=Et),Et=qt}for(var Mn=0;Mn<Ee;++Mn){var xr=Se[Mn];if(xr==",")Se[Mn]="N";else if(xr=="%"){var On=void 0;for(On=Mn+1;On<Ee&&Se[On]=="%";++On);for(var vi=Mn&&Se[Mn-1]=="!"||On<Ee&&Se[On]=="1"?"1":"N",si=Mn;si<On;++si)Se[si]=vi;Mn=On-1}}for(var Jn=0,oi=xe;Jn<Ee;++Jn){var Mr=Se[Jn];oi=="L"&&Mr=="1"?Se[Jn]="L":F.test(Mr)&&(oi=Mr)}for(var fr=0;fr<Ee;++fr)if(M.test(Se[fr])){var er=void 0;for(er=fr+1;er<Ee&&M.test(Se[er]);++er);for(var Gn=(fr?Se[fr-1]:xe)=="L",ai=(er<Ee?Se[er]:xe)=="L",Iu=Gn==ai?Gn?"L":"R":xe,jo=fr;jo<er;++jo)Se[jo]=Iu;fr=er-1}for(var kr=[],Rs,wr=0;wr<Ee;)if(W.test(Se[wr])){var Yv=wr;for(++wr;wr<Ee&&W.test(Se[wr]);++wr);kr.push(new J(0,Yv,wr))}else{var ro=wr,tl=kr.length,nl=me=="rtl"?1:0;for(++wr;wr<Ee&&Se[wr]!="L";++wr);for(var jr=ro;jr<wr;)if(Y.test(Se[jr])){ro<jr&&(kr.splice(tl,0,new J(1,ro,jr)),tl+=nl);var Pu=jr;for(++jr;jr<wr&&Y.test(Se[jr]);++jr);kr.splice(tl,0,new J(2,Pu,jr)),tl+=nl,ro=jr}else++jr;ro<wr&&kr.splice(tl,0,new J(1,ro,wr))}return me=="ltr"&&(kr[0].level==1&&(Rs=ie.match(/^\s+/))&&(kr[0].from=Rs[0].length,kr.unshift(new J(0,0,Rs[0].length))),De(kr).level==1&&(Rs=ie.match(/\s+$/))&&(De(kr).to-=Rs[0].length,kr.push(new J(0,Ee-Rs[0].length,Ee)))),me=="rtl"?kr.reverse():kr}}();function H(u,d){var w=u.order;return w==null&&(w=u.order=D(u.text,d)),w}var q=[],K=function(u,d,w){if(u.addEventListener)u.addEventListener(d,w,!1);else if(u.attachEvent)u.attachEvent("on"+d,w);else{var x=u._handlers||(u._handlers={});x[d]=(x[d]||q).concat(w)}};function ne(u,d){return u._handlers&&u._handlers[d]||q}function te(u,d,w){if(u.removeEventListener)u.removeEventListener(d,w,!1);else if(u.detachEvent)u.detachEvent("on"+d,w);else{var x=u._handlers,M=x&&x[d];if(M){var F=Te(M,w);F>-1&&(x[d]=M.slice(0,F).concat(M.slice(F+1)))}}}function ue(u,d){var w=ne(u,d);if(!!w.length)for(var x=Array.prototype.slice.call(arguments,2),M=0;M<w.length;++M)w[M].apply(null,x)}function ce(u,d,w){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),ue(u,w||d.type,u,d),ct(d)||d.codemirrorIgnore}function ge(u){var d=u._handlers&&u._handlers.cursorActivity;if(!!d)for(var w=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),x=0;x<d.length;++x)Te(w,d[x])==-1&&w.push(d[x])}function Ne(u,d){return ne(u,d).length>0}function Xe(u){u.prototype.on=function(d,w){K(this,d,w)},u.prototype.off=function(d,w){te(this,d,w)}}function Ge(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function St(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function ct(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function Mt(u){Ge(u),St(u)}function dt(u){return u.target||u.srcElement}function mt(u){var d=u.which;return d==null&&(u.button&1?d=1:u.button&2?d=3:u.button&4&&(d=2)),I&&u.ctrlKey&&d==1&&(d=3),d}var wn=function(){if(m&&v<9)return!1;var u=_("div");return"draggable"in u||"dragDrop"in u}(),Zt;function _n(u){if(Zt==null){var d=_("span","\u200B");ee(u,_("span",[d,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(Zt=d.offsetWidth<=1&&d.offsetHeight>2&&!(m&&v<8))}var w=Zt?_("span","\u200B"):_("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return w.setAttribute("cm-text",""),w}var mn;function Xt(u){if(mn!=null)return mn;var d=ee(u,document.createTextNode("A\u062EA")),w=Z(d,0,1).getBoundingClientRect(),x=Z(d,1,2).getBoundingClientRect();return re(u),!w||w.left==w.right?!1:mn=x.right-w.right<3}var de=`

b`.split(/\n/).length!=3?function(u){for(var d=0,w=[],x=u.length;d<=x;){var M=u.indexOf(`
`,d);M==-1&&(M=u.length);var F=u.slice(d,u.charAt(M-1)=="\r"?M-1:M),W=F.indexOf("\r");W!=-1?(w.push(F.slice(0,W)),d+=W+1):(w.push(F),d=M+1)}return w}:function(u){return u.split(/\r\n?|\n/)},Ae=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var d;try{d=u.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=u?!1:d.compareEndPoints("StartToEnd",d)!=0},ke=function(){var u=_("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),Ie=null;function be(u){if(Ie!=null)return Ie;var d=ee(u,_("span","x")),w=d.getBoundingClientRect(),x=Z(d,0,1).getBoundingClientRect();return Ie=Math.abs(w.left-x.left)>1}var yt={},wt={};function Lt(u,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),yt[u]=d}function xt(u,d){wt[u]=d}function jt(u){if(typeof u=="string"&&wt.hasOwnProperty(u))u=wt[u];else if(u&&typeof u.name=="string"&&wt.hasOwnProperty(u.name)){var d=wt[u.name];typeof d=="string"&&(d={name:d}),u=Je(d,u),u.name=d.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return jt("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return jt("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function Nt(u,d){d=jt(d);var w=yt[d.name];if(!w)return Nt(u,"text/plain");var x=w(u,d);if(Dt.hasOwnProperty(d.name)){var M=Dt[d.name];for(var F in M)!M.hasOwnProperty(F)||(x.hasOwnProperty(F)&&(x["_"+F]=x[F]),x[F]=M[F])}if(x.name=d.name,d.helperType&&(x.helperType=d.helperType),d.modeProps)for(var W in d.modeProps)x[W]=d.modeProps[W];return x}var Dt={};function nn(u,d){var w=Dt.hasOwnProperty(u)?Dt[u]:Dt[u]={};Ce(d,w)}function zn(u,d){if(d===!0)return d;if(u.copyState)return u.copyState(d);var w={};for(var x in d){var M=d[x];M instanceof Array&&(M=M.concat([])),w[x]=M}return w}function pi(u,d){for(var w;u.innerMode&&(w=u.innerMode(d),!(!w||w.mode==u));)d=w.state,u=w.mode;return w||{mode:u,state:d}}function Yt(u,d,w){return u.startState?u.startState(d,w):!0}var rn=function(u,d,w){this.pos=this.start=0,this.string=u,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=w};rn.prototype.eol=function(){return this.pos>=this.string.length},rn.prototype.sol=function(){return this.pos==this.lineStart},rn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},rn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},rn.prototype.eat=function(u){var d=this.string.charAt(this.pos),w;if(typeof u=="string"?w=d==u:w=d&&(u.test?u.test(d):u(d)),w)return++this.pos,d},rn.prototype.eatWhile=function(u){for(var d=this.pos;this.eat(u););return this.pos>d},rn.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},rn.prototype.skipToEnd=function(){this.pos=this.string.length},rn.prototype.skipTo=function(u){var d=this.string.indexOf(u,this.pos);if(d>-1)return this.pos=d,!0},rn.prototype.backUp=function(u){this.pos-=u},rn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=_e(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?_e(this.string,this.lineStart,this.tabSize):0)},rn.prototype.indentation=function(){return _e(this.string,null,this.tabSize)-(this.lineStart?_e(this.string,this.lineStart,this.tabSize):0)},rn.prototype.match=function(u,d,w){if(typeof u=="string"){var x=function(W){return w?W.toLowerCase():W},M=this.string.substr(this.pos,u.length);if(x(M)==x(u))return d!==!1&&(this.pos+=u.length),!0}else{var F=this.string.slice(this.pos).match(u);return F&&F.index>0?null:(F&&d!==!1&&(this.pos+=F[0].length),F)}},rn.prototype.current=function(){return this.string.slice(this.start,this.pos)},rn.prototype.hideFirstChars=function(u,d){this.lineStart+=u;try{return d()}finally{this.lineStart-=u}},rn.prototype.lookAhead=function(u){var d=this.lineOracle;return d&&d.lookAhead(u)},rn.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function et(u,d){if(d-=u.first,d<0||d>=u.size)throw new Error("There is no line "+(d+u.first)+" in the document.");for(var w=u;!w.lines;)for(var x=0;;++x){var M=w.children[x],F=M.chunkSize();if(d<F){w=M;break}d-=F}return w.lines[d]}function Hn(u,d,w){var x=[],M=d.line;return u.iter(d.line,w.line+1,function(F){var W=F.text;M==w.line&&(W=W.slice(0,w.ch)),M==d.line&&(W=W.slice(d.ch)),x.push(W),++M}),x}function Vi(u,d,w){var x=[];return u.iter(d,w,function(M){x.push(M.text)}),x}function Tn(u,d){var w=d-u.height;if(w)for(var x=u;x;x=x.parent)x.height+=w}function Gt(u){if(u.parent==null)return null;for(var d=u.parent,w=Te(d.lines,u),x=d.parent;x;d=x,x=x.parent)for(var M=0;x.children[M]!=d;++M)w+=x.children[M].chunkSize();return w+d.first}function gn(u,d){var w=u.first;e:do{for(var x=0;x<u.children.length;++x){var M=u.children[x],F=M.height;if(d<F){u=M;continue e}d-=F,w+=M.chunkSize()}return w}while(!u.lines);for(var W=0;W<u.lines.length;++W){var Y=u.lines[W],J=Y.height;if(d<J)break;d-=J}return w+W}function ei(u,d){return d>=u.first&&d<u.first+u.size}function mr(u,d){return String(u.lineNumberFormatter(d+u.firstLineNumber))}function je(u,d,w){if(w===void 0&&(w=null),!(this instanceof je))return new je(u,d,w);this.line=u,this.ch=d,this.sticky=w}function se(u,d){return u.line-d.line||u.ch-d.ch}function we(u,d){return u.sticky==d.sticky&&se(u,d)==0}function Ue(u){return je(u.line,u.ch)}function Ye(u,d){return se(u,d)<0?d:u}function It(u,d){return se(u,d)<0?u:d}function Qt(u,d){return Math.max(u.first,Math.min(d,u.first+u.size-1))}function lt(u,d){if(d.line<u.first)return je(u.first,0);var w=u.first+u.size-1;return d.line>w?je(w,et(u,w).text.length):gr(d,et(u,d.line).text.length)}function gr(u,d){var w=u.ch;return w==null||w>d?je(u.line,d):w<0?je(u.line,0):u}function ti(u,d){for(var w=[],x=0;x<d.length;x++)w[x]=lt(u,d[x]);return w}var Oo=function(u,d){this.state=u,this.lookAhead=d},$i=function(u,d,w,x){this.state=d,this.doc=u,this.line=w,this.maxLookAhead=x||0,this.baseTokens=null,this.baseTokenPos=1};$i.prototype.lookAhead=function(u){var d=this.doc.getLine(this.line+u);return d!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),d},$i.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},$i.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},$i.fromSaved=function(u,d,w){return d instanceof Oo?new $i(u,zn(u.mode,d.state),w,d.lookAhead):new $i(u,zn(u.mode,d),w)},$i.prototype.save=function(u){var d=u!==!1?zn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Oo(d,this.maxLookAhead):d};function cp(u,d,w,x){var M=[u.state.modeGen],F={};Rf(u,d.text,u.doc.mode,w,function(ie,me){return M.push(ie,me)},F,x);for(var W=w.state,Y=function(ie){w.baseTokens=M;var me=u.state.overlays[ie],xe=1,Ee=0;w.state=!0,Rf(u,d.text,me.mode,w,function(Se,Be){for(var Ve=xe;Ee<Se;){var Ze=M[xe];Ze>Se&&M.splice(xe,1,Se,M[xe+1],Ze),xe+=2,Ee=Math.min(Se,Ze)}if(!!Be)if(me.opaque)M.splice(Ve,xe-Ve,Se,"overlay "+Be),xe=Ve+2;else for(;Ve<xe;Ve+=2){var nt=M[Ve+1];M[Ve+1]=(nt?nt+" ":"")+"overlay "+Be}},F),w.state=W,w.baseTokens=null,w.baseTokenPos=1},J=0;J<u.state.overlays.length;++J)Y(J);return{styles:M,classes:F.bgClass||F.textClass?F:null}}function fp(u,d,w){if(!d.styles||d.styles[0]!=u.state.modeGen){var x=Do(u,Gt(d)),M=d.text.length>u.options.maxHighlightLength&&zn(u.doc.mode,x.state),F=cp(u,d,x);M&&(x.state=M),d.stateAfter=x.save(!M),d.styles=F.styles,F.classes?d.styleClasses=F.classes:d.styleClasses&&(d.styleClasses=null),w===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return d.styles}function Do(u,d,w){var x=u.doc,M=u.display;if(!x.mode.startState)return new $i(x,!0,d);var F=At(u,d,w),W=F>x.first&&et(x,F-1).stateAfter,Y=W?$i.fromSaved(x,W,F):new $i(x,Yt(x.mode),F);return x.iter(F,d,function(J){Af(u,J.text,Y);var ie=Y.line;J.stateAfter=ie==d-1||ie%5==0||ie>=M.viewFrom&&ie<M.viewTo?Y.save():null,Y.nextLine()}),w&&(x.modeFrontier=Y.line),Y}function Af(u,d,w,x){var M=u.doc.mode,F=new rn(d,u.options.tabSize,w);for(F.start=F.pos=x||0,d==""&&hp(M,w.state);!F.eol();)Cf(M,F,w.state),F.start=F.pos}function hp(u,d){if(u.blankLine)return u.blankLine(d);if(!!u.innerMode){var w=pi(u,d);if(w.mode.blankLine)return w.mode.blankLine(w.state)}}function Cf(u,d,w,x){for(var M=0;M<10;M++){x&&(x[0]=pi(u,w).mode);var F=u.token(d,w);if(d.pos>d.start)return F}throw new Error("Mode "+u.name+" failed to advance stream.")}var dp=function(u,d,w){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=d||null,this.state=w};function pp(u,d,w,x){var M=u.doc,F=M.mode,W;d=lt(M,d);var Y=et(M,d.line),J=Do(u,d.line,w),ie=new rn(Y.text,u.options.tabSize,J),me;for(x&&(me=[]);(x||ie.pos<d.ch)&&!ie.eol();)ie.start=ie.pos,W=Cf(F,ie,J.state),x&&me.push(new dp(ie,W,zn(M.mode,J.state)));return x?me:new dp(ie,W,J.state)}function Lf(u,d){if(u)for(;;){var w=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!w)break;u=u.slice(0,w.index)+u.slice(w.index+w[0].length);var x=w[1]?"bgClass":"textClass";d[x]==null?d[x]=w[2]:new RegExp("(?:^|\\s)"+w[2]+"(?:$|\\s)").test(d[x])||(d[x]+=" "+w[2])}return u}function Rf(u,d,w,x,M,F,W){var Y=w.flattenSpans;Y==null&&(Y=u.options.flattenSpans);var J=0,ie=null,me=new rn(d,u.options.tabSize,x),xe,Ee=u.options.addModeClass&&[null];for(d==""&&Lf(hp(w,x.state),F);!me.eol();){if(me.pos>u.options.maxHighlightLength?(Y=!1,W&&Af(u,d,x,me.pos),me.pos=d.length,xe=null):xe=Lf(Cf(w,me,x.state,Ee),F),Ee){var Se=Ee[0].name;Se&&(xe="m-"+(xe?Se+" "+xe:Se))}if(!Y||ie!=xe){for(;J<me.start;)J=Math.min(me.start,J+5e3),M(J,ie);ie=xe}me.start=me.pos}for(;J<me.pos;){var Be=Math.min(me.pos,J+5e3);M(Be,ie),J=Be}}function At(u,d,w){for(var x,M,F=u.doc,W=w?-1:d-(u.doc.mode.innerMode?1e3:100),Y=d;Y>W;--Y){if(Y<=F.first)return F.first;var J=et(F,Y-1),ie=J.stateAfter;if(ie&&(!w||Y+(ie instanceof Oo?ie.lookAhead:0)<=F.modeFrontier))return Y;var me=_e(J.text,null,u.options.tabSize);(M==null||x>me)&&(M=Y-1,x=me)}return M}function it(u,d){if(u.modeFrontier=Math.min(u.modeFrontier,d),!(u.highlightFrontier<d-10)){for(var w=u.first,x=d-1;x>w;x--){var M=et(u,x).stateAfter;if(M&&(!(M instanceof Oo)||x+M.lookAhead<d)){w=x+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,w)}}var bn=!1,Sn=!1;function ur(){bn=!0}function cr(){Sn=!0}function cs(u,d,w){this.marker=u,this.from=d,this.to=w}function Wi(u,d){if(u)for(var w=0;w<u.length;++w){var x=u[w];if(x.marker==d)return x}}function Es(u,d){for(var w,x=0;x<u.length;++x)u[x]!=d&&(w||(w=[])).push(u[x]);return w}function mp(u,d,w){var x=w&&window.WeakSet&&(w.markedSpans||(w.markedSpans=new WeakSet));x&&x.has(u.markedSpans)?u.markedSpans.push(d):(u.markedSpans=u.markedSpans?u.markedSpans.concat([d]):[d],x&&x.add(u.markedSpans)),d.marker.attachLine(u)}function Ir(u,d,w){var x;if(u)for(var M=0;M<u.length;++M){var F=u[M],W=F.marker,Y=F.from==null||(W.inclusiveLeft?F.from<=d:F.from<d);if(Y||F.from==d&&W.type=="bookmark"&&(!w||!F.marker.insertLeft)){var J=F.to==null||(W.inclusiveRight?F.to>=d:F.to>d);(x||(x=[])).push(new cs(W,F.from,J?null:F.to))}}return x}function No(u,d,w){var x;if(u)for(var M=0;M<u.length;++M){var F=u[M],W=F.marker,Y=F.to==null||(W.inclusiveRight?F.to>=d:F.to>d);if(Y||F.from==d&&W.type=="bookmark"&&(!w||F.marker.insertLeft)){var J=F.from==null||(W.inclusiveLeft?F.from<=d:F.from<d);(x||(x=[])).push(new cs(W,J?null:F.from-d,F.to==null?null:F.to-d))}}return x}function Ri(u,d){if(d.full)return null;var w=ei(u,d.from.line)&&et(u,d.from.line).markedSpans,x=ei(u,d.to.line)&&et(u,d.to.line).markedSpans;if(!w&&!x)return null;var M=d.from.ch,F=d.to.ch,W=se(d.from,d.to)==0,Y=Ir(w,M,W),J=No(x,F,W),ie=d.text.length==1,me=De(d.text).length+(ie?M:0);if(Y)for(var xe=0;xe<Y.length;++xe){var Ee=Y[xe];if(Ee.to==null){var Se=Wi(J,Ee.marker);Se?ie&&(Ee.to=Se.to==null?null:Se.to+me):Ee.to=M}}if(J)for(var Be=0;Be<J.length;++Be){var Ve=J[Be];if(Ve.to!=null&&(Ve.to+=me),Ve.from==null){var Ze=Wi(Y,Ve.marker);Ze||(Ve.from=me,ie&&(Y||(Y=[])).push(Ve))}else Ve.from+=me,ie&&(Y||(Y=[])).push(Ve)}Y&&(Y=If(Y)),J&&J!=Y&&(J=If(J));var nt=[Y];if(!ie){var at=d.text.length-2,rt;if(at>0&&Y)for(var ht=0;ht<Y.length;++ht)Y[ht].to==null&&(rt||(rt=[])).push(new cs(Y[ht].marker,null,null));for(var Ct=0;Ct<at;++Ct)nt.push(rt);nt.push(J)}return nt}function If(u){for(var d=0;d<u.length;++d){var w=u[d];w.from!=null&&w.from==w.to&&w.marker.clearWhenEmpty!==!1&&u.splice(d--,1)}return u.length?u:null}function Fo(u,d,w){var x=null;if(u.iter(d.line,w.line+1,function(Se){if(Se.markedSpans)for(var Be=0;Be<Se.markedSpans.length;++Be){var Ve=Se.markedSpans[Be].marker;Ve.readOnly&&(!x||Te(x,Ve)==-1)&&(x||(x=[])).push(Ve)}}),!x)return null;for(var M=[{from:d,to:w}],F=0;F<x.length;++F)for(var W=x[F],Y=W.find(0),J=0;J<M.length;++J){var ie=M[J];if(!(se(ie.to,Y.from)<0||se(ie.from,Y.to)>0)){var me=[J,1],xe=se(ie.from,Y.from),Ee=se(ie.to,Y.to);(xe<0||!W.inclusiveLeft&&!xe)&&me.push({from:ie.from,to:Y.from}),(Ee>0||!W.inclusiveRight&&!Ee)&&me.push({from:Y.to,to:ie.to}),M.splice.apply(M,me),J+=me.length-3}}return M}function mi(u){var d=u.markedSpans;if(!!d){for(var w=0;w<d.length;++w)d[w].marker.detachLine(u);u.markedSpans=null}}function ni(u,d){if(!!d){for(var w=0;w<d.length;++w)d[w].marker.attachLine(u);u.markedSpans=d}}function Ga(u){return u.inclusiveLeft?-1:0}function Va(u){return u.inclusiveRight?1:0}function $a(u,d){var w=u.lines.length-d.lines.length;if(w!=0)return w;var x=u.find(),M=d.find(),F=se(x.from,M.from)||Ga(u)-Ga(d);if(F)return-F;var W=se(x.to,M.to)||Va(u)-Va(d);return W||d.id-u.id}function Bo(u,d){var w=Sn&&u.markedSpans,x;if(w)for(var M=void 0,F=0;F<w.length;++F)M=w[F],M.marker.collapsed&&(d?M.from:M.to)==null&&(!x||$a(x,M.marker)<0)&&(x=M.marker);return x}function du(u){return Bo(u,!0)}function Qs(u){return Bo(u,!1)}function av(u,d){var w=Sn&&u.markedSpans,x;if(w)for(var M=0;M<w.length;++M){var F=w[M];F.marker.collapsed&&(F.from==null||F.from<d)&&(F.to==null||F.to>d)&&(!x||$a(x,F.marker)<0)&&(x=F.marker)}return x}function gp(u,d,w,x,M){var F=et(u,d),W=Sn&&F.markedSpans;if(W)for(var Y=0;Y<W.length;++Y){var J=W[Y];if(!!J.marker.collapsed){var ie=J.marker.find(0),me=se(ie.from,w)||Ga(J.marker)-Ga(M),xe=se(ie.to,x)||Va(J.marker)-Va(M);if(!(me>=0&&xe<=0||me<=0&&xe>=0)&&(me<=0&&(J.marker.inclusiveRight&&M.inclusiveLeft?se(ie.to,w)>=0:se(ie.to,w)>0)||me>=0&&(J.marker.inclusiveRight&&M.inclusiveLeft?se(ie.from,x)<=0:se(ie.from,x)<0)))return!0}}}function Ii(u){for(var d;d=du(u);)u=d.find(-1,!0).line;return u}function lv(u){for(var d;d=Qs(u);)u=d.find(1,!0).line;return u}function uv(u){for(var d,w;d=Qs(u);)u=d.find(1,!0).line,(w||(w=[])).push(u);return w}function Pf(u,d){var w=et(u,d),x=Ii(w);return w==x?d:Gt(x)}function vp(u,d){if(d>u.lastLine())return d;var w=et(u,d),x;if(!As(u,w))return d;for(;x=Qs(w);)w=x.find(1,!0).line;return Gt(w)+1}function As(u,d){var w=Sn&&d.markedSpans;if(w){for(var x=void 0,M=0;M<w.length;++M)if(x=w[M],!!x.marker.collapsed){if(x.from==null)return!0;if(!x.marker.widgetNode&&x.from==0&&x.marker.inclusiveLeft&&pu(u,d,x))return!0}}}function pu(u,d,w){if(w.to==null){var x=w.marker.find(1,!0);return pu(u,x.line,Wi(x.line.markedSpans,w.marker))}if(w.marker.inclusiveRight&&w.to==d.text.length)return!0;for(var M=void 0,F=0;F<d.markedSpans.length;++F)if(M=d.markedSpans[F],M.marker.collapsed&&!M.marker.widgetNode&&M.from==w.to&&(M.to==null||M.to!=w.from)&&(M.marker.inclusiveLeft||w.marker.inclusiveRight)&&pu(u,d,M))return!0}function Sr(u){u=Ii(u);for(var d=0,w=u.parent,x=0;x<w.lines.length;++x){var M=w.lines[x];if(M==u)break;d+=M.height}for(var F=w.parent;F;w=F,F=w.parent)for(var W=0;W<F.children.length;++W){var Y=F.children[W];if(Y==w)break;d+=Y.height}return d}function ji(u){if(u.height==0)return 0;for(var d=u.text.length,w,x=u;w=du(x);){var M=w.find(0,!0);x=M.from.line,d+=M.from.ch-M.to.ch}for(x=u;w=Qs(x);){var F=w.find(0,!0);d-=x.text.length-F.from.ch,x=F.to.line,d+=x.text.length-F.to.ch}return d}function mu(u){var d=u.display,w=u.doc;d.maxLine=et(w,w.first),d.maxLineLength=ji(d.maxLine),d.maxLineChanged=!0,w.iter(function(x){var M=ji(x);M>d.maxLineLength&&(d.maxLineLength=M,d.maxLine=x)})}var Js=function(u,d,w){this.text=u,ni(this,d),this.height=w?w(this):1};Js.prototype.lineNo=function(){return Gt(this)},Xe(Js);function kf(u,d,w,x){u.text=d,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),mi(u),ni(u,w);var M=x?x(u):1;M!=u.height&&Tn(u,M)}function cv(u){u.parent=null,mi(u)}var yp={},fv={};function xp(u,d){if(!u||/^\s*$/.test(u))return null;var w=d.addModeClass?fv:yp;return w[u]||(w[u]=u.replace(/\S+/g,"cm-$&"))}function st(u,d){var w=p("span",null,null,b?"padding-right: .1px":null),x={pre:p("pre",[w],"CodeMirror-line"),content:w,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};d.measure={};for(var M=0;M<=(d.rest?d.rest.length:0);M++){var F=M?d.rest[M-1]:d.line,W=void 0;x.pos=0,x.addToken=ft,Xt(u.display.measure)&&(W=H(F,u.doc.direction))&&(x.addToken=Tt(x.addToken,W)),x.map=[];var Y=d!=u.display.externalMeasured&&Gt(F);kt(F,x,fp(u,F,Y)),F.styleClasses&&(F.styleClasses.bgClass&&(x.bgClass=Me(F.styleClasses.bgClass,x.bgClass||"")),F.styleClasses.textClass&&(x.textClass=Me(F.styleClasses.textClass,x.textClass||""))),x.map.length==0&&x.map.push(0,0,x.content.appendChild(_n(u.display.measure))),M==0?(d.measure.map=x.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(x.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(b){var J=x.content.lastChild;(/\bcm-tab\b/.test(J.className)||J.querySelector&&J.querySelector(".cm-tab"))&&(x.content.className="cm-tab-wrap-hack")}return ue(u,"renderLine",u,d.line,x.pre),x.pre.className&&(x.textClass=Me(x.pre.className,x.textClass||"")),x}function _t(u){var d=_("span","\u2022","cm-invalidchar");return d.title="\\u"+u.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function ft(u,d,w,x,M,F,W){if(!!d){var Y=u.splitSpaces?ut(d,u.trailingSpace):d,J=u.cm.state.specialChars,ie=!1,me;if(!J.test(d))u.col+=d.length,me=document.createTextNode(Y),u.map.push(u.pos,u.pos+d.length,me),m&&v<9&&(ie=!0),u.pos+=d.length;else{me=document.createDocumentFragment();for(var xe=0;;){J.lastIndex=xe;var Ee=J.exec(d),Se=Ee?Ee.index-xe:d.length-xe;if(Se){var Be=document.createTextNode(Y.slice(xe,xe+Se));m&&v<9?me.appendChild(_("span",[Be])):me.appendChild(Be),u.map.push(u.pos,u.pos+Se,Be),u.col+=Se,u.pos+=Se}if(!Ee)break;xe+=Se+1;var Ve=void 0;if(Ee[0]=="	"){var Ze=u.cm.options.tabSize,nt=Ze-u.col%Ze;Ve=me.appendChild(_("span",qe(nt),"cm-tab")),Ve.setAttribute("role","presentation"),Ve.setAttribute("cm-text","	"),u.col+=nt}else Ee[0]=="\r"||Ee[0]==`
`?(Ve=me.appendChild(_("span",Ee[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Ve.setAttribute("cm-text",Ee[0]),u.col+=1):(Ve=u.cm.options.specialCharPlaceholder(Ee[0]),Ve.setAttribute("cm-text",Ee[0]),m&&v<9?me.appendChild(_("span",[Ve])):me.appendChild(Ve),u.col+=1);u.map.push(u.pos,u.pos+1,Ve),u.pos++}}if(u.trailingSpace=Y.charCodeAt(d.length-1)==32,w||x||M||ie||F||W){var at=w||"";x&&(at+=x),M&&(at+=M);var rt=_("span",[me],at,F);if(W)for(var ht in W)W.hasOwnProperty(ht)&&ht!="style"&&ht!="class"&&rt.setAttribute(ht,W[ht]);return u.content.appendChild(rt)}u.content.appendChild(me)}}function ut(u,d){if(u.length>1&&!/  /.test(u))return u;for(var w=d,x="",M=0;M<u.length;M++){var F=u.charAt(M);F==" "&&w&&(M==u.length-1||u.charCodeAt(M+1)==32)&&(F="\xA0"),x+=F,w=F==" "}return x}function Tt(u,d){return function(w,x,M,F,W,Y,J){M=M?M+" cm-force-border":"cm-force-border";for(var ie=w.pos,me=ie+x.length;;){for(var xe=void 0,Ee=0;Ee<d.length&&(xe=d[Ee],!(xe.to>ie&&xe.from<=ie));Ee++);if(xe.to>=me)return u(w,x,M,F,W,Y,J);u(w,x.slice(0,xe.to-ie),M,F,null,Y,J),F=null,x=x.slice(xe.to-ie),ie=xe.to}}}function Pt(u,d,w,x){var M=!x&&w.widgetNode;M&&u.map.push(u.pos,u.pos+d,M),!x&&u.cm.display.input.needsContentAttribute&&(M||(M=u.content.appendChild(document.createElement("span"))),M.setAttribute("cm-marker",w.id)),M&&(u.cm.display.input.setUneditable(M),u.content.appendChild(M)),u.pos+=d,u.trailingSpace=!1}function kt(u,d,w){var x=u.markedSpans,M=u.text,F=0;if(!x){for(var W=1;W<w.length;W+=2)d.addToken(d,M.slice(F,F=w[W]),xp(w[W+1],d.cm.options));return}for(var Y=M.length,J=0,ie=1,me="",xe,Ee,Se=0,Be,Ve,Ze,nt,at;;){if(Se==J){Be=Ve=Ze=Ee="",at=null,nt=null,Se=1/0;for(var rt=[],ht=void 0,Ct=0;Ct<x.length;++Ct){var Et=x[Ct],qt=Et.marker;if(qt.type=="bookmark"&&Et.from==J&&qt.widgetNode)rt.push(qt);else if(Et.from<=J&&(Et.to==null||Et.to>J||qt.collapsed&&Et.to==J&&Et.from==J)){if(Et.to!=null&&Et.to!=J&&Se>Et.to&&(Se=Et.to,Ve=""),qt.className&&(Be+=" "+qt.className),qt.css&&(Ee=(Ee?Ee+";":"")+qt.css),qt.startStyle&&Et.from==J&&(Ze+=" "+qt.startStyle),qt.endStyle&&Et.to==Se&&(ht||(ht=[])).push(qt.endStyle,Et.to),qt.title&&((at||(at={})).title=qt.title),qt.attributes)for(var Mn in qt.attributes)(at||(at={}))[Mn]=qt.attributes[Mn];qt.collapsed&&(!nt||$a(nt.marker,qt)<0)&&(nt=Et)}else Et.from>J&&Se>Et.from&&(Se=Et.from)}if(ht)for(var xr=0;xr<ht.length;xr+=2)ht[xr+1]==Se&&(Ve+=" "+ht[xr]);if(!nt||nt.from==J)for(var On=0;On<rt.length;++On)Pt(d,0,rt[On]);if(nt&&(nt.from||0)==J){if(Pt(d,(nt.to==null?Y+1:nt.to)-J,nt.marker,nt.from==null),nt.to==null)return;nt.to==J&&(nt=!1)}}if(J>=Y)break;for(var vi=Math.min(Y,Se);;){if(me){var si=J+me.length;if(!nt){var Jn=si>vi?me.slice(0,vi-J):me;d.addToken(d,Jn,xe?xe+Be:Be,Ze,J+Jn.length==Se?Ve:"",Ee,at)}if(si>=vi){me=me.slice(vi-J),J=vi;break}J=si,Ze=""}me=M.slice(F,F=w[ie++]),xe=xp(w[ie++],d.cm.options)}}}function Bt(u,d,w){this.line=d,this.rest=uv(d),this.size=this.rest?Gt(De(this.rest))-w+1:1,this.node=this.text=null,this.hidden=As(u,d)}function Kt(u,d,w){for(var x=[],M,F=d;F<w;F=M){var W=new Bt(u.doc,et(u.doc,F),F);M=F+W.size,x.push(W)}return x}var hn=null;function Vr(u){hn?hn.ops.push(u):u.ownsGroup=hn={ops:[u],delayedCallbacks:[]}}function $r(u){var d=u.delayedCallbacks,w=0;do{for(;w<d.length;w++)d[w].call(null);for(var x=0;x<u.ops.length;x++){var M=u.ops[x];if(M.cursorActivityHandlers)for(;M.cursorActivityCalled<M.cursorActivityHandlers.length;)M.cursorActivityHandlers[M.cursorActivityCalled++].call(null,M.cm)}}while(w<d.length)}function Wa(u,d){var w=u.ownsGroup;if(!!w)try{$r(w)}finally{hn=null,d(w)}}var ja=null;function Qn(u,d){var w=ne(u,d);if(!!w.length){var x=Array.prototype.slice.call(arguments,2),M;hn?M=hn.delayedCallbacks:ja?M=ja:(M=ja=[],setTimeout(Of,0));for(var F=function(Y){M.push(function(){return w[Y].apply(null,x)})},W=0;W<w.length;++W)F(W)}}function Of(){var u=ja;ja=null;for(var d=0;d<u.length;++d)u[d]()}function X_(u,d,w,x){for(var M=0;M<d.changes.length;M++){var F=d.changes[M];F=="text"?eI(u,d):F=="gutter"?K_(u,d,w,x):F=="class"?hv(u,d):F=="widget"&&tI(u,d,x)}d.changes=null}function Df(u){return u.node==u.text&&(u.node=_("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),m&&v<8&&(u.node.style.zIndex=2)),u.node}function J3(u,d){var w=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(w&&(w+=" CodeMirror-linebackground"),d.background)w?d.background.className=w:(d.background.parentNode.removeChild(d.background),d.background=null);else if(w){var x=Df(d);d.background=x.insertBefore(_("div",null,w),x.firstChild),u.display.input.setUneditable(d.background)}}function Y_(u,d){var w=u.display.externalMeasured;return w&&w.line==d.line?(u.display.externalMeasured=null,d.measure=w.measure,w.built):st(u,d)}function eI(u,d){var w=d.text.className,x=Y_(u,d);d.text==d.node&&(d.node=x.pre),d.text.parentNode.replaceChild(x.pre,d.text),d.text=x.pre,x.bgClass!=d.bgClass||x.textClass!=d.textClass?(d.bgClass=x.bgClass,d.textClass=x.textClass,hv(u,d)):w&&(d.text.className=w)}function hv(u,d){J3(u,d),d.line.wrapClass?Df(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var w=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=w||""}function K_(u,d,w,x){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var M=Df(d);d.gutterBackground=_("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(u.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px; width: "+x.gutterTotalWidth+"px"),u.display.input.setUneditable(d.gutterBackground),M.insertBefore(d.gutterBackground,d.text)}var F=d.line.gutterMarkers;if(u.options.lineNumbers||F){var W=Df(d),Y=d.gutter=_("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px");if(Y.setAttribute("aria-hidden","true"),u.display.input.setUneditable(Y),W.insertBefore(Y,d.text),d.line.gutterClass&&(Y.className+=" "+d.line.gutterClass),u.options.lineNumbers&&(!F||!F["CodeMirror-linenumbers"])&&(d.lineNumber=Y.appendChild(_("div",mr(u.options,w),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+x.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),F)for(var J=0;J<u.display.gutterSpecs.length;++J){var ie=u.display.gutterSpecs[J].className,me=F.hasOwnProperty(ie)&&F[ie];me&&Y.appendChild(_("div",[me],"CodeMirror-gutter-elt","left: "+x.gutterLeft[ie]+"px; width: "+x.gutterWidth[ie]+"px"))}}}function tI(u,d,w){d.alignable&&(d.alignable=null);for(var x=le("CodeMirror-linewidget"),M=d.node.firstChild,F=void 0;M;M=F)F=M.nextSibling,x.test(M.className)&&d.node.removeChild(M);Z_(u,d,w)}function nI(u,d,w,x){var M=Y_(u,d);return d.text=d.node=M.pre,M.bgClass&&(d.bgClass=M.bgClass),M.textClass&&(d.textClass=M.textClass),hv(u,d),K_(u,d,w,x),Z_(u,d,x),d.node}function Z_(u,d,w){if(Q_(u,d.line,d,w,!0),d.rest)for(var x=0;x<d.rest.length;x++)Q_(u,d.rest[x],d,w,!1)}function Q_(u,d,w,x,M){if(!!d.widgets)for(var F=Df(w),W=0,Y=d.widgets;W<Y.length;++W){var J=Y[W],ie=_("div",[J.node],"CodeMirror-linewidget"+(J.className?" "+J.className:""));J.handleMouseEvents||ie.setAttribute("cm-ignore-events","true"),rI(J,ie,w,x),u.display.input.setUneditable(ie),M&&J.above?F.insertBefore(ie,w.gutter||w.text):F.appendChild(ie),Qn(J,"redraw")}}function rI(u,d,w,x){if(u.noHScroll){(w.alignable||(w.alignable=[])).push(d);var M=x.wrapperWidth;d.style.left=x.fixedPos+"px",u.coverGutter||(M-=x.gutterTotalWidth,d.style.paddingLeft=x.gutterTotalWidth+"px"),d.style.width=M+"px"}u.coverGutter&&(d.style.zIndex=5,d.style.position="relative",u.noHScroll||(d.style.marginLeft=-x.gutterTotalWidth+"px"))}function Nf(u){if(u.height!=null)return u.height;var d=u.doc.cm;if(!d)return 0;if(!E(document.body,u.node)){var w="position: relative;";u.coverGutter&&(w+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),u.noHScroll&&(w+="width: "+d.display.wrapper.clientWidth+"px;"),ee(d.display.measure,_("div",[u.node],null,w))}return u.height=u.node.parentNode.offsetHeight}function eo(u,d){for(var w=dt(d);w!=u.wrapper;w=w.parentNode)if(!w||w.nodeType==1&&w.getAttribute("cm-ignore-events")=="true"||w.parentNode==u.sizer&&w!=u.mover)return!0}function wp(u){return u.lineSpace.offsetTop}function dv(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function J_(u){if(u.cachedPaddingH)return u.cachedPaddingH;var d=ee(u.measure,_("pre","x","CodeMirror-line-like")),w=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,x={left:parseInt(w.paddingLeft),right:parseInt(w.paddingRight)};return!isNaN(x.left)&&!isNaN(x.right)&&(u.cachedPaddingH=x),x}function Cs(u){return Oe-u.display.nativeBarWidth}function qa(u){return u.display.scroller.clientWidth-Cs(u)-u.display.barWidth}function pv(u){return u.display.scroller.clientHeight-Cs(u)-u.display.barHeight}function iI(u,d,w){var x=u.options.lineWrapping,M=x&&qa(u);if(!d.measure.heights||x&&d.measure.width!=M){var F=d.measure.heights=[];if(x){d.measure.width=M;for(var W=d.text.firstChild.getClientRects(),Y=0;Y<W.length-1;Y++){var J=W[Y],ie=W[Y+1];Math.abs(J.bottom-ie.bottom)>2&&F.push((J.bottom+ie.top)/2-w.top)}}F.push(w.bottom-w.top)}}function eb(u,d,w){if(u.line==d)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var x=0;x<u.rest.length;x++)if(u.rest[x]==d)return{map:u.measure.maps[x],cache:u.measure.caches[x]};for(var M=0;M<u.rest.length;M++)if(Gt(u.rest[M])>w)return{map:u.measure.maps[M],cache:u.measure.caches[M],before:!0}}}function sI(u,d){d=Ii(d);var w=Gt(d),x=u.display.externalMeasured=new Bt(u.doc,d,w);x.lineN=w;var M=x.built=st(u,x);return x.text=M.pre,ee(u.display.lineMeasure,M.pre),x}function tb(u,d,w,x){return Ls(u,gu(u,d),w,x)}function mv(u,d){if(d>=u.display.viewFrom&&d<u.display.viewTo)return u.display.view[Ka(u,d)];var w=u.display.externalMeasured;if(w&&d>=w.lineN&&d<w.lineN+w.size)return w}function gu(u,d){var w=Gt(d),x=mv(u,w);x&&!x.text?x=null:x&&x.changes&&(X_(u,x,w,wv(u)),u.curOp.forceUpdate=!0),x||(x=sI(u,d));var M=eb(x,d,w);return{line:d,view:x,rect:null,map:M.map,cache:M.cache,before:M.before,hasHeights:!1}}function Ls(u,d,w,x,M){d.before&&(w=-1);var F=w+(x||""),W;return d.cache.hasOwnProperty(F)?W=d.cache[F]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(iI(u,d.view,d.rect),d.hasHeights=!0),W=aI(u,d,w,x),W.bogus||(d.cache[F]=W)),{left:W.left,right:W.right,top:M?W.rtop:W.top,bottom:M?W.rbottom:W.bottom}}var nb={left:0,right:0,top:0,bottom:0};function rb(u,d,w){for(var x,M,F,W,Y,J,ie=0;ie<u.length;ie+=3)if(Y=u[ie],J=u[ie+1],d<Y?(M=0,F=1,W="left"):d<J?(M=d-Y,F=M+1):(ie==u.length-3||d==J&&u[ie+3]>d)&&(F=J-Y,M=F-1,d>=J&&(W="right")),M!=null){if(x=u[ie+2],Y==J&&w==(x.insertLeft?"left":"right")&&(W=w),w=="left"&&M==0)for(;ie&&u[ie-2]==u[ie-3]&&u[ie-1].insertLeft;)x=u[(ie-=3)+2],W="left";if(w=="right"&&M==J-Y)for(;ie<u.length-3&&u[ie+3]==u[ie+4]&&!u[ie+5].insertLeft;)x=u[(ie+=3)+2],W="right";break}return{node:x,start:M,end:F,collapse:W,coverStart:Y,coverEnd:J}}function oI(u,d){var w=nb;if(d=="left")for(var x=0;x<u.length&&(w=u[x]).left==w.right;x++);else for(var M=u.length-1;M>=0&&(w=u[M]).left==w.right;M--);return w}function aI(u,d,w,x){var M=rb(d.map,w,x),F=M.node,W=M.start,Y=M.end,J=M.collapse,ie;if(F.nodeType==3){for(var me=0;me<4;me++){for(;W&&f(d.line.text.charAt(M.coverStart+W));)--W;for(;M.coverStart+Y<M.coverEnd&&f(d.line.text.charAt(M.coverStart+Y));)++Y;if(m&&v<9&&W==0&&Y==M.coverEnd-M.coverStart?ie=F.parentNode.getBoundingClientRect():ie=oI(Z(F,W,Y).getClientRects(),x),ie.left||ie.right||W==0)break;Y=W,W=W-1,J="right"}m&&v<11&&(ie=lI(u.display.measure,ie))}else{W>0&&(J=x="right");var xe;u.options.lineWrapping&&(xe=F.getClientRects()).length>1?ie=xe[x=="right"?xe.length-1:0]:ie=F.getBoundingClientRect()}if(m&&v<9&&!W&&(!ie||!ie.left&&!ie.right)){var Ee=F.parentNode.getClientRects()[0];Ee?ie={left:Ee.left,right:Ee.left+yu(u.display),top:Ee.top,bottom:Ee.bottom}:ie=nb}for(var Se=ie.top-d.rect.top,Be=ie.bottom-d.rect.top,Ve=(Se+Be)/2,Ze=d.view.measure.heights,nt=0;nt<Ze.length-1&&!(Ve<Ze[nt]);nt++);var at=nt?Ze[nt-1]:0,rt=Ze[nt],ht={left:(J=="right"?ie.right:ie.left)-d.rect.left,right:(J=="left"?ie.left:ie.right)-d.rect.left,top:at,bottom:rt};return!ie.left&&!ie.right&&(ht.bogus=!0),u.options.singleCursorHeightPerLine||(ht.rtop=Se,ht.rbottom=Be),ht}function lI(u,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!be(u))return d;var w=screen.logicalXDPI/screen.deviceXDPI,x=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*w,right:d.right*w,top:d.top*x,bottom:d.bottom*x}}function ib(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var d=0;d<u.rest.length;d++)u.measure.caches[d]={}}function sb(u){u.display.externalMeasure=null,re(u.display.lineMeasure);for(var d=0;d<u.display.view.length;d++)ib(u.display.view[d])}function Ff(u){sb(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function ob(){return L&&A?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ab(){return L&&A?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function gv(u){var d=Ii(u),w=d.widgets,x=0;if(w)for(var M=0;M<w.length;++M)w[M].above&&(x+=Nf(w[M]));return x}function _p(u,d,w,x,M){if(!M){var F=gv(d);w.top+=F,w.bottom+=F}if(x=="line")return w;x||(x="local");var W=Sr(d);if(x=="local"?W+=wp(u.display):W-=u.display.viewOffset,x=="page"||x=="window"){var Y=u.display.lineSpace.getBoundingClientRect();W+=Y.top+(x=="window"?0:ab());var J=Y.left+(x=="window"?0:ob());w.left+=J,w.right+=J}return w.top+=W,w.bottom+=W,w}function lb(u,d,w){if(w=="div")return d;var x=d.left,M=d.top;if(w=="page")x-=ob(),M-=ab();else if(w=="local"||!w){var F=u.display.sizer.getBoundingClientRect();x+=F.left,M+=F.top}var W=u.display.lineSpace.getBoundingClientRect();return{left:x-W.left,top:M-W.top}}function bp(u,d,w,x,M){return x||(x=et(u.doc,d.line)),_p(u,x,tb(u,x,d.ch,M),w)}function fs(u,d,w,x,M,F){x=x||et(u.doc,d.line),M||(M=gu(u,x));function W(Be,Ve){var Ze=Ls(u,M,Be,Ve?"right":"left",F);return Ve?Ze.left=Ze.right:Ze.right=Ze.left,_p(u,x,Ze,w)}var Y=H(x,u.doc.direction),J=d.ch,ie=d.sticky;if(J>=x.text.length?(J=x.text.length,ie="before"):J<=0&&(J=0,ie="after"),!Y)return W(ie=="before"?J-1:J,ie=="before");function me(Be,Ve,Ze){var nt=Y[Ve],at=nt.level==1;return W(Ze?Be-1:Be,at!=Ze)}var xe=R(Y,J,ie),Ee=C,Se=me(J,xe,ie=="before");return Ee!=null&&(Se.other=me(J,Ee,ie!="before")),Se}function ub(u,d){var w=0;d=lt(u.doc,d),u.options.lineWrapping||(w=yu(u.display)*d.ch);var x=et(u.doc,d.line),M=Sr(x)+wp(u.display);return{left:w,right:w,top:M,bottom:M+x.height}}function vv(u,d,w,x,M){var F=je(u,d,w);return F.xRel=M,x&&(F.outside=x),F}function yv(u,d,w){var x=u.doc;if(w+=u.display.viewOffset,w<0)return vv(x.first,0,null,-1,-1);var M=gn(x,w),F=x.first+x.size-1;if(M>F)return vv(x.first+x.size-1,et(x,F).text.length,null,1,1);d<0&&(d=0);for(var W=et(x,M);;){var Y=uI(u,W,M,d,w),J=av(W,Y.ch+(Y.xRel>0||Y.outside>0?1:0));if(!J)return Y;var ie=J.find(1);if(ie.line==M)return ie;W=et(x,M=ie.line)}}function cb(u,d,w,x){x-=gv(d);var M=d.text.length,F=y(function(W){return Ls(u,w,W-1).bottom<=x},M,0);return M=y(function(W){return Ls(u,w,W).top>x},F,M),{begin:F,end:M}}function fb(u,d,w,x){w||(w=gu(u,d));var M=_p(u,d,Ls(u,w,x),"line").top;return cb(u,d,w,M)}function xv(u,d,w,x){return u.bottom<=w?!1:u.top>w?!0:(x?u.left:u.right)>d}function uI(u,d,w,x,M){M-=Sr(d);var F=gu(u,d),W=gv(d),Y=0,J=d.text.length,ie=!0,me=H(d,u.doc.direction);if(me){var xe=(u.options.lineWrapping?fI:cI)(u,d,w,F,me,x,M);ie=xe.level!=1,Y=ie?xe.from:xe.to-1,J=ie?xe.to:xe.from-1}var Ee=null,Se=null,Be=y(function(Ct){var Et=Ls(u,F,Ct);return Et.top+=W,Et.bottom+=W,xv(Et,x,M,!1)?(Et.top<=M&&Et.left<=x&&(Ee=Ct,Se=Et),!0):!1},Y,J),Ve,Ze,nt=!1;if(Se){var at=x-Se.left<Se.right-x,rt=at==ie;Be=Ee+(rt?0:1),Ze=rt?"after":"before",Ve=at?Se.left:Se.right}else{!ie&&(Be==J||Be==Y)&&Be++,Ze=Be==0?"after":Be==d.text.length?"before":Ls(u,F,Be-(ie?1:0)).bottom+W<=M==ie?"after":"before";var ht=fs(u,je(w,Be,Ze),"line",d,F);Ve=ht.left,nt=M<ht.top?-1:M>=ht.bottom?1:0}return Be=g(d.text,Be,1),vv(w,Be,Ze,nt,x-Ve)}function cI(u,d,w,x,M,F,W){var Y=y(function(xe){var Ee=M[xe],Se=Ee.level!=1;return xv(fs(u,je(w,Se?Ee.to:Ee.from,Se?"before":"after"),"line",d,x),F,W,!0)},0,M.length-1),J=M[Y];if(Y>0){var ie=J.level!=1,me=fs(u,je(w,ie?J.from:J.to,ie?"after":"before"),"line",d,x);xv(me,F,W,!0)&&me.top>W&&(J=M[Y-1])}return J}function fI(u,d,w,x,M,F,W){var Y=cb(u,d,x,W),J=Y.begin,ie=Y.end;/\s/.test(d.text.charAt(ie-1))&&ie--;for(var me=null,xe=null,Ee=0;Ee<M.length;Ee++){var Se=M[Ee];if(!(Se.from>=ie||Se.to<=J)){var Be=Se.level!=1,Ve=Ls(u,x,Be?Math.min(ie,Se.to)-1:Math.max(J,Se.from)).right,Ze=Ve<F?F-Ve+1e9:Ve-F;(!me||xe>Ze)&&(me=Se,xe=Ze)}}return me||(me=M[M.length-1]),me.from<J&&(me={from:J,to:me.to,level:me.level}),me.to>ie&&(me={from:me.from,to:ie,level:me.level}),me}var Xa;function vu(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(Xa==null){Xa=_("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)Xa.appendChild(document.createTextNode("x")),Xa.appendChild(_("br"));Xa.appendChild(document.createTextNode("x"))}ee(u.measure,Xa);var w=Xa.offsetHeight/50;return w>3&&(u.cachedTextHeight=w),re(u.measure),w||1}function yu(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var d=_("span","xxxxxxxxxx"),w=_("pre",[d],"CodeMirror-line-like");ee(u.measure,w);var x=d.getBoundingClientRect(),M=(x.right-x.left)/10;return M>2&&(u.cachedCharWidth=M),M||10}function wv(u){for(var d=u.display,w={},x={},M=d.gutters.clientLeft,F=d.gutters.firstChild,W=0;F;F=F.nextSibling,++W){var Y=u.display.gutterSpecs[W].className;w[Y]=F.offsetLeft+F.clientLeft+M,x[Y]=F.clientWidth}return{fixedPos:_v(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:w,gutterWidth:x,wrapperWidth:d.wrapper.clientWidth}}function _v(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function hb(u){var d=vu(u.display),w=u.options.lineWrapping,x=w&&Math.max(5,u.display.scroller.clientWidth/yu(u.display)-3);return function(M){if(As(u.doc,M))return 0;var F=0;if(M.widgets)for(var W=0;W<M.widgets.length;W++)M.widgets[W].height&&(F+=M.widgets[W].height);return w?F+(Math.ceil(M.text.length/x)||1)*d:F+d}}function bv(u){var d=u.doc,w=hb(u);d.iter(function(x){var M=w(x);M!=x.height&&Tn(x,M)})}function Ya(u,d,w,x){var M=u.display;if(!w&&dt(d).getAttribute("cm-not-content")=="true")return null;var F,W,Y=M.lineSpace.getBoundingClientRect();try{F=d.clientX-Y.left,W=d.clientY-Y.top}catch{return null}var J=yv(u,F,W),ie;if(x&&J.xRel>0&&(ie=et(u.doc,J.line).text).length==J.ch){var me=_e(ie,ie.length,u.options.tabSize)-ie.length;J=je(J.line,Math.max(0,Math.round((F-J_(u.display).left)/yu(u.display))-me))}return J}function Ka(u,d){if(d>=u.display.viewTo||(d-=u.display.viewFrom,d<0))return null;for(var w=u.display.view,x=0;x<w.length;x++)if(d-=w[x].size,d<0)return x}function ri(u,d,w,x){d==null&&(d=u.doc.first),w==null&&(w=u.doc.first+u.doc.size),x||(x=0);var M=u.display;if(x&&w<M.viewTo&&(M.updateLineNumbers==null||M.updateLineNumbers>d)&&(M.updateLineNumbers=d),u.curOp.viewChanged=!0,d>=M.viewTo)Sn&&Pf(u.doc,d)<M.viewTo&&zo(u);else if(w<=M.viewFrom)Sn&&vp(u.doc,w+x)>M.viewFrom?zo(u):(M.viewFrom+=x,M.viewTo+=x);else if(d<=M.viewFrom&&w>=M.viewTo)zo(u);else if(d<=M.viewFrom){var F=Sp(u,w,w+x,1);F?(M.view=M.view.slice(F.index),M.viewFrom=F.lineN,M.viewTo+=x):zo(u)}else if(w>=M.viewTo){var W=Sp(u,d,d,-1);W?(M.view=M.view.slice(0,W.index),M.viewTo=W.lineN):zo(u)}else{var Y=Sp(u,d,d,-1),J=Sp(u,w,w+x,1);Y&&J?(M.view=M.view.slice(0,Y.index).concat(Kt(u,Y.lineN,J.lineN)).concat(M.view.slice(J.index)),M.viewTo+=x):zo(u)}var ie=M.externalMeasured;ie&&(w<ie.lineN?ie.lineN+=x:d<ie.lineN+ie.size&&(M.externalMeasured=null))}function Uo(u,d,w){u.curOp.viewChanged=!0;var x=u.display,M=u.display.externalMeasured;if(M&&d>=M.lineN&&d<M.lineN+M.size&&(x.externalMeasured=null),!(d<x.viewFrom||d>=x.viewTo)){var F=x.view[Ka(u,d)];if(F.node!=null){var W=F.changes||(F.changes=[]);Te(W,w)==-1&&W.push(w)}}}function zo(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function Sp(u,d,w,x){var M=Ka(u,d),F,W=u.display.view;if(!Sn||w==u.doc.first+u.doc.size)return{index:M,lineN:w};for(var Y=u.display.viewFrom,J=0;J<M;J++)Y+=W[J].size;if(Y!=d){if(x>0){if(M==W.length-1)return null;F=Y+W[M].size-d,M++}else F=Y-d;d+=F,w+=F}for(;Pf(u.doc,w)!=w;){if(M==(x<0?0:W.length-1))return null;w+=x*W[M-(x<0?1:0)].size,M+=x}return{index:M,lineN:w}}function hI(u,d,w){var x=u.display,M=x.view;M.length==0||d>=x.viewTo||w<=x.viewFrom?(x.view=Kt(u,d,w),x.viewFrom=d):(x.viewFrom>d?x.view=Kt(u,d,x.viewFrom).concat(x.view):x.viewFrom<d&&(x.view=x.view.slice(Ka(u,d))),x.viewFrom=d,x.viewTo<w?x.view=x.view.concat(Kt(u,x.viewTo,w)):x.viewTo>w&&(x.view=x.view.slice(0,Ka(u,w)))),x.viewTo=w}function db(u){for(var d=u.display.view,w=0,x=0;x<d.length;x++){var M=d[x];!M.hidden&&(!M.node||M.changes)&&++w}return w}function Bf(u){u.display.input.showSelection(u.display.input.prepareSelection())}function pb(u,d){d===void 0&&(d=!0);var w=u.doc,x={},M=x.cursors=document.createDocumentFragment(),F=x.selection=document.createDocumentFragment(),W=u.options.$customCursor;W&&(d=!0);for(var Y=0;Y<w.sel.ranges.length;Y++)if(!(!d&&Y==w.sel.primIndex)){var J=w.sel.ranges[Y];if(!(J.from().line>=u.display.viewTo||J.to().line<u.display.viewFrom)){var ie=J.empty();if(W){var me=W(u,J);me&&Sv(u,me,M)}else(ie||u.options.showCursorWhenSelecting)&&Sv(u,J.head,M);ie||dI(u,J,F)}}return x}function Sv(u,d,w){var x=fs(u,d,"div",null,null,!u.options.singleCursorHeightPerLine),M=w.appendChild(_("div","\xA0","CodeMirror-cursor"));if(M.style.left=x.left+"px",M.style.top=x.top+"px",M.style.height=Math.max(0,x.bottom-x.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var F=bp(u,d,"div",null,null),W=F.right-F.left;M.style.width=(W>0?W:u.defaultCharWidth())+"px"}if(x.other){var Y=w.appendChild(_("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));Y.style.display="",Y.style.left=x.other.left+"px",Y.style.top=x.other.top+"px",Y.style.height=(x.other.bottom-x.other.top)*.85+"px"}}function Mp(u,d){return u.top-d.top||u.left-d.left}function dI(u,d,w){var x=u.display,M=u.doc,F=document.createDocumentFragment(),W=J_(u.display),Y=W.left,J=Math.max(x.sizerWidth,qa(u)-x.sizer.offsetLeft)-W.right,ie=M.direction=="ltr";function me(rt,ht,Ct,Et){ht<0&&(ht=0),ht=Math.round(ht),Et=Math.round(Et),F.appendChild(_("div",null,"CodeMirror-selected","position: absolute; left: "+rt+`px;
                             top: `+ht+"px; width: "+(Ct==null?J-rt:Ct)+`px;
                             height: `+(Et-ht)+"px"))}function xe(rt,ht,Ct){var Et=et(M,rt),qt=Et.text.length,Mn,xr;function On(Jn,oi){return bp(u,je(rt,Jn),"div",Et,oi)}function vi(Jn,oi,Mr){var fr=fb(u,Et,null,Jn),er=oi=="ltr"==(Mr=="after")?"left":"right",Gn=Mr=="after"?fr.begin:fr.end-(/\s/.test(Et.text.charAt(fr.end-1))?2:1);return On(Gn,er)[er]}var si=H(Et,M.direction);return S(si,ht||0,Ct==null?qt:Ct,function(Jn,oi,Mr,fr){var er=Mr=="ltr",Gn=On(Jn,er?"left":"right"),ai=On(oi-1,er?"right":"left"),Iu=ht==null&&Jn==0,jo=Ct==null&&oi==qt,kr=fr==0,Rs=!si||fr==si.length-1;if(ai.top-Gn.top<=3){var wr=(ie?Iu:jo)&&kr,Yv=(ie?jo:Iu)&&Rs,ro=wr?Y:(er?Gn:ai).left,tl=Yv?J:(er?ai:Gn).right;me(ro,Gn.top,tl-ro,Gn.bottom)}else{var nl,jr,Pu,Kv;er?(nl=ie&&Iu&&kr?Y:Gn.left,jr=ie?J:vi(Jn,Mr,"before"),Pu=ie?Y:vi(oi,Mr,"after"),Kv=ie&&jo&&Rs?J:ai.right):(nl=ie?vi(Jn,Mr,"before"):Y,jr=!ie&&Iu&&kr?J:Gn.right,Pu=!ie&&jo&&Rs?Y:ai.left,Kv=ie?vi(oi,Mr,"after"):J),me(nl,Gn.top,jr-nl,Gn.bottom),Gn.bottom<ai.top&&me(Y,Gn.bottom,null,ai.top),me(Pu,ai.top,Kv-Pu,ai.bottom)}(!Mn||Mp(Gn,Mn)<0)&&(Mn=Gn),Mp(ai,Mn)<0&&(Mn=ai),(!xr||Mp(Gn,xr)<0)&&(xr=Gn),Mp(ai,xr)<0&&(xr=ai)}),{start:Mn,end:xr}}var Ee=d.from(),Se=d.to();if(Ee.line==Se.line)xe(Ee.line,Ee.ch,Se.ch);else{var Be=et(M,Ee.line),Ve=et(M,Se.line),Ze=Ii(Be)==Ii(Ve),nt=xe(Ee.line,Ee.ch,Ze?Be.text.length+1:null).end,at=xe(Se.line,Ze?0:null,Se.ch).start;Ze&&(nt.top<at.top-2?(me(nt.right,nt.top,null,nt.bottom),me(Y,at.top,at.left,at.bottom)):me(nt.right,nt.top,at.left-nt.right,nt.bottom)),nt.bottom<at.top&&me(Y,nt.bottom,null,at.top)}w.appendChild(F)}function Mv(u){if(!!u.state.focused){var d=u.display;clearInterval(d.blinker);var w=!0;d.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?d.blinker=setInterval(function(){u.hasFocus()||xu(u),d.cursorDiv.style.visibility=(w=!w)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function mb(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||Ev(u))}function Tv(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&xu(u))},100)}function Ev(u,d){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(ue(u,"focus",u,d),u.state.focused=!0,Re(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),b&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),Mv(u))}function xu(u,d){u.state.delayingBlurEvent||(u.state.focused&&(ue(u,"blur",u,d),u.state.focused=!1,he(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function Tp(u){for(var d=u.display,w=d.lineDiv.offsetTop,x=Math.max(0,d.scroller.getBoundingClientRect().top),M=d.lineDiv.getBoundingClientRect().top,F=0,W=0;W<d.view.length;W++){var Y=d.view[W],J=u.options.lineWrapping,ie=void 0,me=0;if(!Y.hidden){if(M+=Y.line.height,m&&v<8){var xe=Y.node.offsetTop+Y.node.offsetHeight;ie=xe-w,w=xe}else{var Ee=Y.node.getBoundingClientRect();ie=Ee.bottom-Ee.top,!J&&Y.text.firstChild&&(me=Y.text.firstChild.getBoundingClientRect().right-Ee.left-1)}var Se=Y.line.height-ie;if((Se>.005||Se<-.005)&&(M<x&&(F-=Se),Tn(Y.line,ie),gb(Y.line),Y.rest))for(var Be=0;Be<Y.rest.length;Be++)gb(Y.rest[Be]);if(me>u.display.sizerWidth){var Ve=Math.ceil(me/yu(u.display));Ve>u.display.maxLineLength&&(u.display.maxLineLength=Ve,u.display.maxLine=Y.line,u.display.maxLineChanged=!0)}}}Math.abs(F)>2&&(d.scroller.scrollTop+=F)}function gb(u){if(u.widgets)for(var d=0;d<u.widgets.length;++d){var w=u.widgets[d],x=w.node.parentNode;x&&(w.height=x.offsetHeight)}}function Ep(u,d,w){var x=w&&w.top!=null?Math.max(0,w.top):u.scroller.scrollTop;x=Math.floor(x-wp(u));var M=w&&w.bottom!=null?w.bottom:x+u.wrapper.clientHeight,F=gn(d,x),W=gn(d,M);if(w&&w.ensure){var Y=w.ensure.from.line,J=w.ensure.to.line;Y<F?(F=Y,W=gn(d,Sr(et(d,Y))+u.wrapper.clientHeight)):Math.min(J,d.lastLine())>=W&&(F=gn(d,Sr(et(d,J))-u.wrapper.clientHeight),W=J)}return{from:F,to:Math.max(W,F+1)}}function pI(u,d){if(!ce(u,"scrollCursorIntoView")){var w=u.display,x=w.sizer.getBoundingClientRect(),M=null;if(d.top+x.top<0?M=!0:d.bottom+x.top>(window.innerHeight||document.documentElement.clientHeight)&&(M=!1),M!=null&&!G){var F=_("div","\u200B",null,`position: absolute;
                         top: `+(d.top-w.viewOffset-wp(u.display))+`px;
                         height: `+(d.bottom-d.top+Cs(u)+w.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");u.display.lineSpace.appendChild(F),F.scrollIntoView(M),u.display.lineSpace.removeChild(F)}}}function mI(u,d,w,x){x==null&&(x=0);var M;!u.options.lineWrapping&&d==w&&(w=d.sticky=="before"?je(d.line,d.ch+1,"before"):d,d=d.ch?je(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var F=0;F<5;F++){var W=!1,Y=fs(u,d),J=!w||w==d?Y:fs(u,w);M={left:Math.min(Y.left,J.left),top:Math.min(Y.top,J.top)-x,right:Math.max(Y.left,J.left),bottom:Math.max(Y.bottom,J.bottom)+x};var ie=Av(u,M),me=u.doc.scrollTop,xe=u.doc.scrollLeft;if(ie.scrollTop!=null&&(zf(u,ie.scrollTop),Math.abs(u.doc.scrollTop-me)>1&&(W=!0)),ie.scrollLeft!=null&&(Za(u,ie.scrollLeft),Math.abs(u.doc.scrollLeft-xe)>1&&(W=!0)),!W)break}return M}function gI(u,d){var w=Av(u,d);w.scrollTop!=null&&zf(u,w.scrollTop),w.scrollLeft!=null&&Za(u,w.scrollLeft)}function Av(u,d){var w=u.display,x=vu(u.display);d.top<0&&(d.top=0);var M=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:w.scroller.scrollTop,F=pv(u),W={};d.bottom-d.top>F&&(d.bottom=d.top+F);var Y=u.doc.height+dv(w),J=d.top<x,ie=d.bottom>Y-x;if(d.top<M)W.scrollTop=J?0:d.top;else if(d.bottom>M+F){var me=Math.min(d.top,(ie?Y:d.bottom)-F);me!=M&&(W.scrollTop=me)}var xe=u.options.fixedGutter?0:w.gutters.offsetWidth,Ee=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:w.scroller.scrollLeft-xe,Se=qa(u)-w.gutters.offsetWidth,Be=d.right-d.left>Se;return Be&&(d.right=d.left+Se),d.left<10?W.scrollLeft=0:d.left<Ee?W.scrollLeft=Math.max(0,d.left+xe-(Be?0:10)):d.right>Se+Ee-3&&(W.scrollLeft=d.right+(Be?0:10)-Se),W}function Cv(u,d){d!=null&&(Ap(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+d)}function wu(u){Ap(u);var d=u.getCursor();u.curOp.scrollToPos={from:d,to:d,margin:u.options.cursorScrollMargin}}function Uf(u,d,w){(d!=null||w!=null)&&Ap(u),d!=null&&(u.curOp.scrollLeft=d),w!=null&&(u.curOp.scrollTop=w)}function vI(u,d){Ap(u),u.curOp.scrollToPos=d}function Ap(u){var d=u.curOp.scrollToPos;if(d){u.curOp.scrollToPos=null;var w=ub(u,d.from),x=ub(u,d.to);vb(u,w,x,d.margin)}}function vb(u,d,w,x){var M=Av(u,{left:Math.min(d.left,w.left),top:Math.min(d.top,w.top)-x,right:Math.max(d.right,w.right),bottom:Math.max(d.bottom,w.bottom)+x});Uf(u,M.scrollLeft,M.scrollTop)}function zf(u,d){Math.abs(u.doc.scrollTop-d)<2||(o||Rv(u,{top:d}),yb(u,d,!0),o&&Rv(u),Vf(u,100))}function yb(u,d,w){d=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,d)),!(u.display.scroller.scrollTop==d&&!w)&&(u.doc.scrollTop=d,u.display.scrollbars.setScrollTop(d),u.display.scroller.scrollTop!=d&&(u.display.scroller.scrollTop=d))}function Za(u,d,w,x){d=Math.max(0,Math.min(d,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((w?d==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-d)<2)&&!x)&&(u.doc.scrollLeft=d,Sb(u),u.display.scroller.scrollLeft!=d&&(u.display.scroller.scrollLeft=d),u.display.scrollbars.setScrollLeft(d))}function Hf(u){var d=u.display,w=d.gutters.offsetWidth,x=Math.round(u.doc.height+dv(u.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:u.options.fixedGutter?w:0,docHeight:x,scrollHeight:x+Cs(u)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:w}}var Qa=function(u,d,w){this.cm=w;var x=this.vert=_("div",[_("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),M=this.horiz=_("div",[_("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");x.tabIndex=M.tabIndex=-1,u(x),u(M),K(x,"scroll",function(){x.clientHeight&&d(x.scrollTop,"vertical")}),K(M,"scroll",function(){M.clientWidth&&d(M.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Qa.prototype.update=function(u){var d=u.scrollWidth>u.clientWidth+1,w=u.scrollHeight>u.clientHeight+1,x=u.nativeBarWidth;if(w){this.vert.style.display="block",this.vert.style.bottom=d?x+"px":"0";var M=u.viewHeight-(d?x:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+M)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=w?x+"px":"0",this.horiz.style.left=u.barLeft+"px";var F=u.viewWidth-u.barLeft-(w?x:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+F)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(x==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:w?x:0,bottom:d?x:0}},Qa.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Qa.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Qa.prototype.zeroWidthHack=function(){var u=I&&!z?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Pe,this.disableVert=new Pe},Qa.prototype.enableZeroWidthBar=function(u,d,w){u.style.pointerEvents="auto";function x(){var M=u.getBoundingClientRect(),F=w=="vert"?document.elementFromPoint(M.right-1,(M.top+M.bottom)/2):document.elementFromPoint((M.right+M.left)/2,M.bottom-1);F!=u?u.style.pointerEvents="none":d.set(1e3,x)}d.set(1e3,x)},Qa.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var Gf=function(){};Gf.prototype.update=function(){return{bottom:0,right:0}},Gf.prototype.setScrollLeft=function(){},Gf.prototype.setScrollTop=function(){},Gf.prototype.clear=function(){};function _u(u,d){d||(d=Hf(u));var w=u.display.barWidth,x=u.display.barHeight;xb(u,d);for(var M=0;M<4&&w!=u.display.barWidth||x!=u.display.barHeight;M++)w!=u.display.barWidth&&u.options.lineWrapping&&Tp(u),xb(u,Hf(u)),w=u.display.barWidth,x=u.display.barHeight}function xb(u,d){var w=u.display,x=w.scrollbars.update(d);w.sizer.style.paddingRight=(w.barWidth=x.right)+"px",w.sizer.style.paddingBottom=(w.barHeight=x.bottom)+"px",w.heightForcer.style.borderBottom=x.bottom+"px solid transparent",x.right&&x.bottom?(w.scrollbarFiller.style.display="block",w.scrollbarFiller.style.height=x.bottom+"px",w.scrollbarFiller.style.width=x.right+"px"):w.scrollbarFiller.style.display="",x.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(w.gutterFiller.style.display="block",w.gutterFiller.style.height=x.bottom+"px",w.gutterFiller.style.width=d.gutterWidth+"px"):w.gutterFiller.style.display=""}var wb={native:Qa,null:Gf};function _b(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&he(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new wb[u.options.scrollbarStyle](function(d){u.display.wrapper.insertBefore(d,u.display.scrollbarFiller),K(d,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,w){w=="horizontal"?Za(u,d):zf(u,d)},u),u.display.scrollbars.addClass&&Re(u.display.wrapper,u.display.scrollbars.addClass)}var yI=0;function Ja(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++yI,markArrays:null},Vr(u.curOp)}function el(u){var d=u.curOp;d&&Wa(d,function(w){for(var x=0;x<w.ops.length;x++)w.ops[x].cm.curOp=null;xI(w)})}function xI(u){for(var d=u.ops,w=0;w<d.length;w++)wI(d[w]);for(var x=0;x<d.length;x++)_I(d[x]);for(var M=0;M<d.length;M++)bI(d[M]);for(var F=0;F<d.length;F++)SI(d[F]);for(var W=0;W<d.length;W++)MI(d[W])}function wI(u){var d=u.cm,w=d.display;EI(d),u.updateMaxLine&&mu(d),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<w.viewFrom||u.scrollToPos.to.line>=w.viewTo)||w.maxLineChanged&&d.options.lineWrapping,u.update=u.mustUpdate&&new Cp(d,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function _I(u){u.updatedDisplay=u.mustUpdate&&Lv(u.cm,u.update)}function bI(u){var d=u.cm,w=d.display;u.updatedDisplay&&Tp(d),u.barMeasure=Hf(d),w.maxLineChanged&&!d.options.lineWrapping&&(u.adjustWidthTo=tb(d,w.maxLine,w.maxLine.text.length).left+3,d.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(w.scroller.clientWidth,w.sizer.offsetLeft+u.adjustWidthTo+Cs(d)+d.display.barWidth),u.maxScrollLeft=Math.max(0,w.sizer.offsetLeft+u.adjustWidthTo-qa(d))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=w.input.prepareSelection())}function SI(u){var d=u.cm;u.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<d.doc.scrollLeft&&Za(d,Math.min(d.display.scroller.scrollLeft,u.maxScrollLeft),!0),d.display.maxLineChanged=!1);var w=u.focus&&u.focus==ye();u.preparedSelection&&d.display.input.showSelection(u.preparedSelection,w),(u.updatedDisplay||u.startHeight!=d.doc.height)&&_u(d,u.barMeasure),u.updatedDisplay&&Pv(d,u.barMeasure),u.selectionChanged&&Mv(d),d.state.focused&&u.updateInput&&d.display.input.reset(u.typing),w&&mb(u.cm)}function MI(u){var d=u.cm,w=d.display,x=d.doc;if(u.updatedDisplay&&bb(d,u.update),w.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(w.wheelStartX=w.wheelStartY=null),u.scrollTop!=null&&yb(d,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&Za(d,u.scrollLeft,!0,!0),u.scrollToPos){var M=mI(d,lt(x,u.scrollToPos.from),lt(x,u.scrollToPos.to),u.scrollToPos.margin);pI(d,M)}var F=u.maybeHiddenMarkers,W=u.maybeUnhiddenMarkers;if(F)for(var Y=0;Y<F.length;++Y)F[Y].lines.length||ue(F[Y],"hide");if(W)for(var J=0;J<W.length;++J)W[J].lines.length&&ue(W[J],"unhide");w.wrapper.offsetHeight&&(x.scrollTop=d.display.scroller.scrollTop),u.changeObjs&&ue(d,"changes",d,u.changeObjs),u.update&&u.update.finish()}function gi(u,d){if(u.curOp)return d();Ja(u);try{return d()}finally{el(u)}}function vr(u,d){return function(){if(u.curOp)return d.apply(u,arguments);Ja(u);try{return d.apply(u,arguments)}finally{el(u)}}}function Wr(u){return function(){if(this.curOp)return u.apply(this,arguments);Ja(this);try{return u.apply(this,arguments)}finally{el(this)}}}function yr(u){return function(){var d=this.cm;if(!d||d.curOp)return u.apply(this,arguments);Ja(d);try{return u.apply(this,arguments)}finally{el(d)}}}function Vf(u,d){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(d,ve(TI,u))}function TI(u){var d=u.doc;if(!(d.highlightFrontier>=u.display.viewTo)){var w=+new Date+u.options.workTime,x=Do(u,d.highlightFrontier),M=[];d.iter(x.line,Math.min(d.first+d.size,u.display.viewTo+500),function(F){if(x.line>=u.display.viewFrom){var W=F.styles,Y=F.text.length>u.options.maxHighlightLength?zn(d.mode,x.state):null,J=cp(u,F,x,!0);Y&&(x.state=Y),F.styles=J.styles;var ie=F.styleClasses,me=J.classes;me?F.styleClasses=me:ie&&(F.styleClasses=null);for(var xe=!W||W.length!=F.styles.length||ie!=me&&(!ie||!me||ie.bgClass!=me.bgClass||ie.textClass!=me.textClass),Ee=0;!xe&&Ee<W.length;++Ee)xe=W[Ee]!=F.styles[Ee];xe&&M.push(x.line),F.stateAfter=x.save(),x.nextLine()}else F.text.length<=u.options.maxHighlightLength&&Af(u,F.text,x),F.stateAfter=x.line%5==0?x.save():null,x.nextLine();if(+new Date>w)return Vf(u,u.options.workDelay),!0}),d.highlightFrontier=x.line,d.modeFrontier=Math.max(d.modeFrontier,x.line),M.length&&gi(u,function(){for(var F=0;F<M.length;F++)Uo(u,M[F],"text")})}}var Cp=function(u,d,w){var x=u.display;this.viewport=d,this.visible=Ep(x,u.doc,d),this.editorIsHidden=!x.wrapper.offsetWidth,this.wrapperHeight=x.wrapper.clientHeight,this.wrapperWidth=x.wrapper.clientWidth,this.oldDisplayWidth=qa(u),this.force=w,this.dims=wv(u),this.events=[]};Cp.prototype.signal=function(u,d){Ne(u,d)&&this.events.push(arguments)},Cp.prototype.finish=function(){for(var u=0;u<this.events.length;u++)ue.apply(null,this.events[u])};function EI(u){var d=u.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=Cs(u)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=Cs(u)+"px",d.scrollbarsClipped=!0)}function AI(u){if(u.hasFocus())return null;var d=ye();if(!d||!E(u.display.lineDiv,d))return null;var w={activeElt:d};if(window.getSelection){var x=window.getSelection();x.anchorNode&&x.extend&&E(u.display.lineDiv,x.anchorNode)&&(w.anchorNode=x.anchorNode,w.anchorOffset=x.anchorOffset,w.focusNode=x.focusNode,w.focusOffset=x.focusOffset)}return w}function CI(u){if(!(!u||!u.activeElt||u.activeElt==ye())&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&E(document.body,u.anchorNode)&&E(document.body,u.focusNode))){var d=window.getSelection(),w=document.createRange();w.setEnd(u.anchorNode,u.anchorOffset),w.collapse(!1),d.removeAllRanges(),d.addRange(w),d.extend(u.focusNode,u.focusOffset)}}function Lv(u,d){var w=u.display,x=u.doc;if(d.editorIsHidden)return zo(u),!1;if(!d.force&&d.visible.from>=w.viewFrom&&d.visible.to<=w.viewTo&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo)&&w.renderedView==w.view&&db(u)==0)return!1;Mb(u)&&(zo(u),d.dims=wv(u));var M=x.first+x.size,F=Math.max(d.visible.from-u.options.viewportMargin,x.first),W=Math.min(M,d.visible.to+u.options.viewportMargin);w.viewFrom<F&&F-w.viewFrom<20&&(F=Math.max(x.first,w.viewFrom)),w.viewTo>W&&w.viewTo-W<20&&(W=Math.min(M,w.viewTo)),Sn&&(F=Pf(u.doc,F),W=vp(u.doc,W));var Y=F!=w.viewFrom||W!=w.viewTo||w.lastWrapHeight!=d.wrapperHeight||w.lastWrapWidth!=d.wrapperWidth;hI(u,F,W),w.viewOffset=Sr(et(u.doc,w.viewFrom)),u.display.mover.style.top=w.viewOffset+"px";var J=db(u);if(!Y&&J==0&&!d.force&&w.renderedView==w.view&&(w.updateLineNumbers==null||w.updateLineNumbers>=w.viewTo))return!1;var ie=AI(u);return J>4&&(w.lineDiv.style.display="none"),LI(u,w.updateLineNumbers,d.dims),J>4&&(w.lineDiv.style.display=""),w.renderedView=w.view,CI(ie),re(w.cursorDiv),re(w.selectionDiv),w.gutters.style.height=w.sizer.style.minHeight=0,Y&&(w.lastWrapHeight=d.wrapperHeight,w.lastWrapWidth=d.wrapperWidth,Vf(u,400)),w.updateLineNumbers=null,!0}function bb(u,d){for(var w=d.viewport,x=!0;;x=!1){if(!x||!u.options.lineWrapping||d.oldDisplayWidth==qa(u)){if(w&&w.top!=null&&(w={top:Math.min(u.doc.height+dv(u.display)-pv(u),w.top)}),d.visible=Ep(u.display,u.doc,w),d.visible.from>=u.display.viewFrom&&d.visible.to<=u.display.viewTo)break}else x&&(d.visible=Ep(u.display,u.doc,w));if(!Lv(u,d))break;Tp(u);var M=Hf(u);Bf(u),_u(u,M),Pv(u,M),d.force=!1}d.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(d.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function Rv(u,d){var w=new Cp(u,d);if(Lv(u,w)){Tp(u),bb(u,w);var x=Hf(u);Bf(u),_u(u,x),Pv(u,x),w.finish()}}function LI(u,d,w){var x=u.display,M=u.options.lineNumbers,F=x.lineDiv,W=F.firstChild;function Y(Be){var Ve=Be.nextSibling;return b&&I&&u.display.currentWheelTarget==Be?Be.style.display="none":Be.parentNode.removeChild(Be),Ve}for(var J=x.view,ie=x.viewFrom,me=0;me<J.length;me++){var xe=J[me];if(!xe.hidden)if(!xe.node||xe.node.parentNode!=F){var Ee=nI(u,xe,ie,w);F.insertBefore(Ee,W)}else{for(;W!=xe.node;)W=Y(W);var Se=M&&d!=null&&d<=ie&&xe.lineNumber;xe.changes&&(Te(xe.changes,"gutter")>-1&&(Se=!1),X_(u,xe,ie,w)),Se&&(re(xe.lineNumber),xe.lineNumber.appendChild(document.createTextNode(mr(u.options,ie)))),W=xe.node.nextSibling}ie+=xe.size}for(;W;)W=Y(W)}function Iv(u){var d=u.gutters.offsetWidth;u.sizer.style.marginLeft=d+"px",Qn(u,"gutterChanged",u)}function Pv(u,d){u.display.sizer.style.minHeight=d.docHeight+"px",u.display.heightForcer.style.top=d.docHeight+"px",u.display.gutters.style.height=d.docHeight+u.display.barHeight+Cs(u)+"px"}function Sb(u){var d=u.display,w=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!u.options.fixedGutter))){for(var x=_v(d)-d.scroller.scrollLeft+u.doc.scrollLeft,M=d.gutters.offsetWidth,F=x+"px",W=0;W<w.length;W++)if(!w[W].hidden){u.options.fixedGutter&&(w[W].gutter&&(w[W].gutter.style.left=F),w[W].gutterBackground&&(w[W].gutterBackground.style.left=F));var Y=w[W].alignable;if(Y)for(var J=0;J<Y.length;J++)Y[J].style.left=F}u.options.fixedGutter&&(d.gutters.style.left=x+M+"px")}}function Mb(u){if(!u.options.lineNumbers)return!1;var d=u.doc,w=mr(u.options,d.first+d.size-1),x=u.display;if(w.length!=x.lineNumChars){var M=x.measure.appendChild(_("div",[_("div",w)],"CodeMirror-linenumber CodeMirror-gutter-elt")),F=M.firstChild.offsetWidth,W=M.offsetWidth-F;return x.lineGutter.style.width="",x.lineNumInnerWidth=Math.max(F,x.lineGutter.offsetWidth-W)+1,x.lineNumWidth=x.lineNumInnerWidth+W,x.lineNumChars=x.lineNumInnerWidth?w.length:-1,x.lineGutter.style.width=x.lineNumWidth+"px",Iv(u.display),!0}return!1}function kv(u,d){for(var w=[],x=!1,M=0;M<u.length;M++){var F=u[M],W=null;if(typeof F!="string"&&(W=F.style,F=F.className),F=="CodeMirror-linenumbers")if(d)x=!0;else continue;w.push({className:F,style:W})}return d&&!x&&w.push({className:"CodeMirror-linenumbers",style:null}),w}function Tb(u){var d=u.gutters,w=u.gutterSpecs;re(d),u.lineGutter=null;for(var x=0;x<w.length;++x){var M=w[x],F=M.className,W=M.style,Y=d.appendChild(_("div",null,"CodeMirror-gutter "+F));W&&(Y.style.cssText=W),F=="CodeMirror-linenumbers"&&(u.lineGutter=Y,Y.style.width=(u.lineNumWidth||1)+"px")}d.style.display=w.length?"":"none",Iv(u)}function $f(u){Tb(u.display),ri(u),Sb(u)}function RI(u,d,w,x){var M=this;this.input=w,M.scrollbarFiller=_("div",null,"CodeMirror-scrollbar-filler"),M.scrollbarFiller.setAttribute("cm-not-content","true"),M.gutterFiller=_("div",null,"CodeMirror-gutter-filler"),M.gutterFiller.setAttribute("cm-not-content","true"),M.lineDiv=p("div",null,"CodeMirror-code"),M.selectionDiv=_("div",null,null,"position: relative; z-index: 1"),M.cursorDiv=_("div",null,"CodeMirror-cursors"),M.measure=_("div",null,"CodeMirror-measure"),M.lineMeasure=_("div",null,"CodeMirror-measure"),M.lineSpace=p("div",[M.measure,M.lineMeasure,M.selectionDiv,M.cursorDiv,M.lineDiv],null,"position: relative; outline: none");var F=p("div",[M.lineSpace],"CodeMirror-lines");M.mover=_("div",[F],null,"position: relative"),M.sizer=_("div",[M.mover],"CodeMirror-sizer"),M.sizerWidth=null,M.heightForcer=_("div",null,null,"position: absolute; height: "+Oe+"px; width: 1px;"),M.gutters=_("div",null,"CodeMirror-gutters"),M.lineGutter=null,M.scroller=_("div",[M.sizer,M.heightForcer,M.gutters],"CodeMirror-scroll"),M.scroller.setAttribute("tabIndex","-1"),M.wrapper=_("div",[M.scrollbarFiller,M.gutterFiller,M.scroller],"CodeMirror"),M.wrapper.setAttribute("translate","no"),m&&v<8&&(M.gutters.style.zIndex=-1,M.scroller.style.paddingRight=0),!b&&!(o&&N)&&(M.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(M.wrapper):u(M.wrapper)),M.viewFrom=M.viewTo=d.first,M.reportedViewFrom=M.reportedViewTo=d.first,M.view=[],M.renderedView=null,M.externalMeasured=null,M.viewOffset=0,M.lastWrapHeight=M.lastWrapWidth=0,M.updateLineNumbers=null,M.nativeBarWidth=M.barHeight=M.barWidth=0,M.scrollbarsClipped=!1,M.lineNumWidth=M.lineNumInnerWidth=M.lineNumChars=null,M.alignWidgets=!1,M.cachedCharWidth=M.cachedTextHeight=M.cachedPaddingH=null,M.maxLine=null,M.maxLineLength=0,M.maxLineChanged=!1,M.wheelDX=M.wheelDY=M.wheelStartX=M.wheelStartY=null,M.shift=!1,M.selForContextMenu=null,M.activeTouch=null,M.gutterSpecs=kv(x.gutters,x.lineNumbers),Tb(M),w.init(M)}var Lp=0,to=null;m?to=-.53:o?to=15:L?to=-.7:O&&(to=-1/3);function Eb(u){var d=u.wheelDeltaX,w=u.wheelDeltaY;return d==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(d=u.detail),w==null&&u.detail&&u.axis==u.VERTICAL_AXIS?w=u.detail:w==null&&(w=u.wheelDelta),{x:d,y:w}}function II(u){var d=Eb(u);return d.x*=to,d.y*=to,d}function Ab(u,d){var w=Eb(d),x=w.x,M=w.y,F=to;d.deltaMode===0&&(x=d.deltaX,M=d.deltaY,F=1);var W=u.display,Y=W.scroller,J=Y.scrollWidth>Y.clientWidth,ie=Y.scrollHeight>Y.clientHeight;if(!!(x&&J||M&&ie)){if(M&&I&&b){e:for(var me=d.target,xe=W.view;me!=Y;me=me.parentNode)for(var Ee=0;Ee<xe.length;Ee++)if(xe[Ee].node==me){u.display.currentWheelTarget=me;break e}}if(x&&!o&&!P&&F!=null){M&&ie&&zf(u,Math.max(0,Y.scrollTop+M*F)),Za(u,Math.max(0,Y.scrollLeft+x*F)),(!M||M&&ie)&&Ge(d),W.wheelStartX=null;return}if(M&&F!=null){var Se=M*F,Be=u.doc.scrollTop,Ve=Be+W.wrapper.clientHeight;Se<0?Be=Math.max(0,Be+Se-50):Ve=Math.min(u.doc.height,Ve+Se+50),Rv(u,{top:Be,bottom:Ve})}Lp<20&&d.deltaMode!==0&&(W.wheelStartX==null?(W.wheelStartX=Y.scrollLeft,W.wheelStartY=Y.scrollTop,W.wheelDX=x,W.wheelDY=M,setTimeout(function(){if(W.wheelStartX!=null){var Ze=Y.scrollLeft-W.wheelStartX,nt=Y.scrollTop-W.wheelStartY,at=nt&&W.wheelDY&&nt/W.wheelDY||Ze&&W.wheelDX&&Ze/W.wheelDX;W.wheelStartX=W.wheelStartY=null,!!at&&(to=(to*Lp+at)/(Lp+1),++Lp)}},200)):(W.wheelDX+=x,W.wheelDY+=M))}}var Pi=function(u,d){this.ranges=u,this.primIndex=d};Pi.prototype.primary=function(){return this.ranges[this.primIndex]},Pi.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var w=this.ranges[d],x=u.ranges[d];if(!we(w.anchor,x.anchor)||!we(w.head,x.head))return!1}return!0},Pi.prototype.deepCopy=function(){for(var u=[],d=0;d<this.ranges.length;d++)u[d]=new cn(Ue(this.ranges[d].anchor),Ue(this.ranges[d].head));return new Pi(u,this.primIndex)},Pi.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},Pi.prototype.contains=function(u,d){d||(d=u);for(var w=0;w<this.ranges.length;w++){var x=this.ranges[w];if(se(d,x.from())>=0&&se(u,x.to())<=0)return w}return-1};var cn=function(u,d){this.anchor=u,this.head=d};cn.prototype.from=function(){return It(this.anchor,this.head)},cn.prototype.to=function(){return Ye(this.anchor,this.head)},cn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function hs(u,d,w){var x=u&&u.options.selectionsMayTouch,M=d[w];d.sort(function(Ee,Se){return se(Ee.from(),Se.from())}),w=Te(d,M);for(var F=1;F<d.length;F++){var W=d[F],Y=d[F-1],J=se(Y.to(),W.from());if(x&&!W.empty()?J>0:J>=0){var ie=It(Y.from(),W.from()),me=Ye(Y.to(),W.to()),xe=Y.empty()?W.from()==W.head:Y.from()==Y.head;F<=w&&--w,d.splice(--F,2,new cn(xe?me:ie,xe?ie:me))}}return new Pi(d,w)}function Ho(u,d){return new Pi([new cn(u,d||u)],0)}function Go(u){return u.text?je(u.from.line+u.text.length-1,De(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function Cb(u,d){if(se(u,d.from)<0)return u;if(se(u,d.to)<=0)return Go(d);var w=u.line+d.text.length-(d.to.line-d.from.line)-1,x=u.ch;return u.line==d.to.line&&(x+=Go(d).ch-d.to.ch),je(w,x)}function Ov(u,d){for(var w=[],x=0;x<u.sel.ranges.length;x++){var M=u.sel.ranges[x];w.push(new cn(Cb(M.anchor,d),Cb(M.head,d)))}return hs(u.cm,w,u.sel.primIndex)}function Lb(u,d,w){return u.line==d.line?je(w.line,u.ch-d.ch+w.ch):je(w.line+(u.line-d.line),u.ch)}function PI(u,d,w){for(var x=[],M=je(u.first,0),F=M,W=0;W<d.length;W++){var Y=d[W],J=Lb(Y.from,M,F),ie=Lb(Go(Y),M,F);if(M=Y.to,F=ie,w=="around"){var me=u.sel.ranges[W],xe=se(me.head,me.anchor)<0;x[W]=new cn(xe?ie:J,xe?J:ie)}else x[W]=new cn(J,J)}return new Pi(x,u.sel.primIndex)}function Dv(u){u.doc.mode=Nt(u.options,u.doc.modeOption),Wf(u)}function Wf(u){u.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,Vf(u,100),u.state.modeGen++,u.curOp&&ri(u)}function Rb(u,d){return d.from.ch==0&&d.to.ch==0&&De(d.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function Nv(u,d,w,x){function M(at){return w?w[at]:null}function F(at,rt,ht){kf(at,rt,ht,x),Qn(at,"change",at,d)}function W(at,rt){for(var ht=[],Ct=at;Ct<rt;++Ct)ht.push(new Js(ie[Ct],M(Ct),x));return ht}var Y=d.from,J=d.to,ie=d.text,me=et(u,Y.line),xe=et(u,J.line),Ee=De(ie),Se=M(ie.length-1),Be=J.line-Y.line;if(d.full)u.insert(0,W(0,ie.length)),u.remove(ie.length,u.size-ie.length);else if(Rb(u,d)){var Ve=W(0,ie.length-1);F(xe,xe.text,Se),Be&&u.remove(Y.line,Be),Ve.length&&u.insert(Y.line,Ve)}else if(me==xe)if(ie.length==1)F(me,me.text.slice(0,Y.ch)+Ee+me.text.slice(J.ch),Se);else{var Ze=W(1,ie.length-1);Ze.push(new Js(Ee+me.text.slice(J.ch),Se,x)),F(me,me.text.slice(0,Y.ch)+ie[0],M(0)),u.insert(Y.line+1,Ze)}else if(ie.length==1)F(me,me.text.slice(0,Y.ch)+ie[0]+xe.text.slice(J.ch),M(0)),u.remove(Y.line+1,Be);else{F(me,me.text.slice(0,Y.ch)+ie[0],M(0)),F(xe,Ee+xe.text.slice(J.ch),Se);var nt=W(1,ie.length-1);Be>1&&u.remove(Y.line+1,Be-1),u.insert(Y.line+1,nt)}Qn(u,"change",u,d)}function Vo(u,d,w){function x(M,F,W){if(M.linked)for(var Y=0;Y<M.linked.length;++Y){var J=M.linked[Y];if(J.doc!=F){var ie=W&&J.sharedHist;w&&!ie||(d(J.doc,ie),x(J.doc,M,ie))}}}x(u,null,!0)}function Ib(u,d){if(d.cm)throw new Error("This document is already in use.");u.doc=d,d.cm=u,bv(u),Dv(u),Pb(u),u.options.direction=d.direction,u.options.lineWrapping||mu(u),u.options.mode=d.modeOption,ri(u)}function Pb(u){(u.doc.direction=="rtl"?Re:he)(u.display.lineDiv,"CodeMirror-rtl")}function kI(u){gi(u,function(){Pb(u),ri(u)})}function Rp(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function Fv(u,d){var w={from:Ue(d.from),to:Go(d),text:Hn(u,d.from,d.to)};return Db(u,w,d.from.line,d.to.line+1),Vo(u,function(x){return Db(x,w,d.from.line,d.to.line+1)},!0),w}function kb(u){for(;u.length;){var d=De(u);if(d.ranges)u.pop();else break}}function OI(u,d){if(d)return kb(u.done),De(u.done);if(u.done.length&&!De(u.done).ranges)return De(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),De(u.done)}function Ob(u,d,w,x){var M=u.history;M.undone.length=0;var F=+new Date,W,Y;if((M.lastOp==x||M.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&M.lastModTime>F-(u.cm?u.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(W=OI(M,M.lastOp==x)))Y=De(W.changes),se(d.from,d.to)==0&&se(d.from,Y.to)==0?Y.to=Go(d):W.changes.push(Fv(u,d));else{var J=De(M.done);for((!J||!J.ranges)&&Ip(u.sel,M.done),W={changes:[Fv(u,d)],generation:M.generation},M.done.push(W);M.done.length>M.undoDepth;)M.done.shift(),M.done[0].ranges||M.done.shift()}M.done.push(w),M.generation=++M.maxGeneration,M.lastModTime=M.lastSelTime=F,M.lastOp=M.lastSelOp=x,M.lastOrigin=M.lastSelOrigin=d.origin,Y||ue(u,"historyAdded")}function DI(u,d,w,x){var M=d.charAt(0);return M=="*"||M=="+"&&w.ranges.length==x.ranges.length&&w.somethingSelected()==x.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function NI(u,d,w,x){var M=u.history,F=x&&x.origin;w==M.lastSelOp||F&&M.lastSelOrigin==F&&(M.lastModTime==M.lastSelTime&&M.lastOrigin==F||DI(u,F,De(M.done),d))?M.done[M.done.length-1]=d:Ip(d,M.done),M.lastSelTime=+new Date,M.lastSelOrigin=F,M.lastSelOp=w,x&&x.clearRedo!==!1&&kb(M.undone)}function Ip(u,d){var w=De(d);w&&w.ranges&&w.equals(u)||d.push(u)}function Db(u,d,w,x){var M=d["spans_"+u.id],F=0;u.iter(Math.max(u.first,w),Math.min(u.first+u.size,x),function(W){W.markedSpans&&((M||(M=d["spans_"+u.id]={}))[F]=W.markedSpans),++F})}function FI(u){if(!u)return null;for(var d,w=0;w<u.length;++w)u[w].marker.explicitlyCleared?d||(d=u.slice(0,w)):d&&d.push(u[w]);return d?d.length?d:null:u}function BI(u,d){var w=d["spans_"+u.id];if(!w)return null;for(var x=[],M=0;M<d.text.length;++M)x.push(FI(w[M]));return x}function Nb(u,d){var w=BI(u,d),x=Ri(u,d);if(!w)return x;if(!x)return w;for(var M=0;M<w.length;++M){var F=w[M],W=x[M];if(F&&W){e:for(var Y=0;Y<W.length;++Y){for(var J=W[Y],ie=0;ie<F.length;++ie)if(F[ie].marker==J.marker)continue e;F.push(J)}}else W&&(w[M]=W)}return w}function bu(u,d,w){for(var x=[],M=0;M<u.length;++M){var F=u[M];if(F.ranges){x.push(w?Pi.prototype.deepCopy.call(F):F);continue}var W=F.changes,Y=[];x.push({changes:Y});for(var J=0;J<W.length;++J){var ie=W[J],me=void 0;if(Y.push({from:ie.from,to:ie.to,text:ie.text}),d)for(var xe in ie)(me=xe.match(/^spans_(\d+)$/))&&Te(d,Number(me[1]))>-1&&(De(Y)[xe]=ie[xe],delete ie[xe])}}return x}function Bv(u,d,w,x){if(x){var M=u.anchor;if(w){var F=se(d,M)<0;F!=se(w,M)<0?(M=d,d=w):F!=se(d,w)<0&&(d=w)}return new cn(M,d)}else return new cn(w||d,d)}function Pp(u,d,w,x,M){M==null&&(M=u.cm&&(u.cm.display.shift||u.extend)),Pr(u,new Pi([Bv(u.sel.primary(),d,w,M)],0),x)}function Fb(u,d,w){for(var x=[],M=u.cm&&(u.cm.display.shift||u.extend),F=0;F<u.sel.ranges.length;F++)x[F]=Bv(u.sel.ranges[F],d[F],null,M);var W=hs(u.cm,x,u.sel.primIndex);Pr(u,W,w)}function Uv(u,d,w,x){var M=u.sel.ranges.slice(0);M[d]=w,Pr(u,hs(u.cm,M,u.sel.primIndex),x)}function Bb(u,d,w,x){Pr(u,Ho(d,w),x)}function UI(u,d,w){var x={ranges:d.ranges,update:function(M){this.ranges=[];for(var F=0;F<M.length;F++)this.ranges[F]=new cn(lt(u,M[F].anchor),lt(u,M[F].head))},origin:w&&w.origin};return ue(u,"beforeSelectionChange",u,x),u.cm&&ue(u.cm,"beforeSelectionChange",u.cm,x),x.ranges!=d.ranges?hs(u.cm,x.ranges,x.ranges.length-1):d}function Ub(u,d,w){var x=u.history.done,M=De(x);M&&M.ranges?(x[x.length-1]=d,kp(u,d,w)):Pr(u,d,w)}function Pr(u,d,w){kp(u,d,w),NI(u,u.sel,u.cm?u.cm.curOp.id:NaN,w)}function kp(u,d,w){(Ne(u,"beforeSelectionChange")||u.cm&&Ne(u.cm,"beforeSelectionChange"))&&(d=UI(u,d,w));var x=w&&w.bias||(se(d.primary().head,u.sel.primary().head)<0?-1:1);zb(u,Gb(u,d,x,!0)),!(w&&w.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&wu(u.cm)}function zb(u,d){d.equals(u.sel)||(u.sel=d,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,ge(u.cm)),Qn(u,"cursorActivity",u))}function Hb(u){zb(u,Gb(u,u.sel,null,!1))}function Gb(u,d,w,x){for(var M,F=0;F<d.ranges.length;F++){var W=d.ranges[F],Y=d.ranges.length==u.sel.ranges.length&&u.sel.ranges[F],J=Op(u,W.anchor,Y&&Y.anchor,w,x),ie=Op(u,W.head,Y&&Y.head,w,x);(M||J!=W.anchor||ie!=W.head)&&(M||(M=d.ranges.slice(0,F)),M[F]=new cn(J,ie))}return M?hs(u.cm,M,d.primIndex):d}function Su(u,d,w,x,M){var F=et(u,d.line);if(F.markedSpans)for(var W=0;W<F.markedSpans.length;++W){var Y=F.markedSpans[W],J=Y.marker,ie="selectLeft"in J?!J.selectLeft:J.inclusiveLeft,me="selectRight"in J?!J.selectRight:J.inclusiveRight;if((Y.from==null||(ie?Y.from<=d.ch:Y.from<d.ch))&&(Y.to==null||(me?Y.to>=d.ch:Y.to>d.ch))){if(M&&(ue(J,"beforeCursorEnter"),J.explicitlyCleared))if(F.markedSpans){--W;continue}else break;if(!J.atomic)continue;if(w){var xe=J.find(x<0?1:-1),Ee=void 0;if((x<0?me:ie)&&(xe=Vb(u,xe,-x,xe&&xe.line==d.line?F:null)),xe&&xe.line==d.line&&(Ee=se(xe,w))&&(x<0?Ee<0:Ee>0))return Su(u,xe,d,x,M)}var Se=J.find(x<0?-1:1);return(x<0?ie:me)&&(Se=Vb(u,Se,x,Se.line==d.line?F:null)),Se?Su(u,Se,d,x,M):null}}return d}function Op(u,d,w,x,M){var F=x||1,W=Su(u,d,w,F,M)||!M&&Su(u,d,w,F,!0)||Su(u,d,w,-F,M)||!M&&Su(u,d,w,-F,!0);return W||(u.cantEdit=!0,je(u.first,0))}function Vb(u,d,w,x){return w<0&&d.ch==0?d.line>u.first?lt(u,je(d.line-1)):null:w>0&&d.ch==(x||et(u,d.line)).text.length?d.line<u.first+u.size-1?je(d.line+1,0):null:new je(d.line,d.ch+w)}function $b(u){u.setSelection(je(u.firstLine(),0),je(u.lastLine()),He)}function Wb(u,d,w){var x={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return x.canceled=!0}};return w&&(x.update=function(M,F,W,Y){M&&(x.from=lt(u,M)),F&&(x.to=lt(u,F)),W&&(x.text=W),Y!==void 0&&(x.origin=Y)}),ue(u,"beforeChange",u,x),u.cm&&ue(u.cm,"beforeChange",u.cm,x),x.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:x.from,to:x.to,text:x.text,origin:x.origin}}function Mu(u,d,w){if(u.cm){if(!u.cm.curOp)return vr(u.cm,Mu)(u,d,w);if(u.cm.state.suppressEdits)return}if(!((Ne(u,"beforeChange")||u.cm&&Ne(u.cm,"beforeChange"))&&(d=Wb(u,d,!0),!d))){var x=bn&&!w&&Fo(u,d.from,d.to);if(x)for(var M=x.length-1;M>=0;--M)jb(u,{from:x[M].from,to:x[M].to,text:M?[""]:d.text,origin:d.origin});else jb(u,d)}}function jb(u,d){if(!(d.text.length==1&&d.text[0]==""&&se(d.from,d.to)==0)){var w=Ov(u,d);Ob(u,d,w,u.cm?u.cm.curOp.id:NaN),jf(u,d,w,Ri(u,d));var x=[];Vo(u,function(M,F){!F&&Te(x,M.history)==-1&&(Kb(M.history,d),x.push(M.history)),jf(M,d,null,Ri(M,d))})}}function Dp(u,d,w){var x=u.cm&&u.cm.state.suppressEdits;if(!(x&&!w)){for(var M=u.history,F,W=u.sel,Y=d=="undo"?M.done:M.undone,J=d=="undo"?M.undone:M.done,ie=0;ie<Y.length&&(F=Y[ie],!(w?F.ranges&&!F.equals(u.sel):!F.ranges));ie++);if(ie!=Y.length){for(M.lastOrigin=M.lastSelOrigin=null;;)if(F=Y.pop(),F.ranges){if(Ip(F,J),w&&!F.equals(u.sel)){Pr(u,F,{clearRedo:!1});return}W=F}else if(x){Y.push(F);return}else break;var me=[];Ip(W,J),J.push({changes:me,generation:M.generation}),M.generation=F.generation||++M.maxGeneration;for(var xe=Ne(u,"beforeChange")||u.cm&&Ne(u.cm,"beforeChange"),Ee=function(Ve){var Ze=F.changes[Ve];if(Ze.origin=d,xe&&!Wb(u,Ze,!1))return Y.length=0,{};me.push(Fv(u,Ze));var nt=Ve?Ov(u,Ze):De(Y);jf(u,Ze,nt,Nb(u,Ze)),!Ve&&u.cm&&u.cm.scrollIntoView({from:Ze.from,to:Go(Ze)});var at=[];Vo(u,function(rt,ht){!ht&&Te(at,rt.history)==-1&&(Kb(rt.history,Ze),at.push(rt.history)),jf(rt,Ze,null,Nb(rt,Ze))})},Se=F.changes.length-1;Se>=0;--Se){var Be=Ee(Se);if(Be)return Be.v}}}}function qb(u,d){if(d!=0&&(u.first+=d,u.sel=new Pi(oe(u.sel.ranges,function(M){return new cn(je(M.anchor.line+d,M.anchor.ch),je(M.head.line+d,M.head.ch))}),u.sel.primIndex),u.cm)){ri(u.cm,u.first,u.first-d,d);for(var w=u.cm.display,x=w.viewFrom;x<w.viewTo;x++)Uo(u.cm,x,"gutter")}}function jf(u,d,w,x){if(u.cm&&!u.cm.curOp)return vr(u.cm,jf)(u,d,w,x);if(d.to.line<u.first){qb(u,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>u.lastLine())){if(d.from.line<u.first){var M=d.text.length-1-(u.first-d.from.line);qb(u,M),d={from:je(u.first,0),to:je(d.to.line+M,d.to.ch),text:[De(d.text)],origin:d.origin}}var F=u.lastLine();d.to.line>F&&(d={from:d.from,to:je(F,et(u,F).text.length),text:[d.text[0]],origin:d.origin}),d.removed=Hn(u,d.from,d.to),w||(w=Ov(u,d)),u.cm?zI(u.cm,d,x):Nv(u,d,x),kp(u,w,He),u.cantEdit&&Op(u,je(u.firstLine(),0))&&(u.cantEdit=!1)}}function zI(u,d,w){var x=u.doc,M=u.display,F=d.from,W=d.to,Y=!1,J=F.line;u.options.lineWrapping||(J=Gt(Ii(et(x,F.line))),x.iter(J,W.line+1,function(Se){if(Se==M.maxLine)return Y=!0,!0})),x.sel.contains(d.from,d.to)>-1&&ge(u),Nv(x,d,w,hb(u)),u.options.lineWrapping||(x.iter(J,F.line+d.text.length,function(Se){var Be=ji(Se);Be>M.maxLineLength&&(M.maxLine=Se,M.maxLineLength=Be,M.maxLineChanged=!0,Y=!1)}),Y&&(u.curOp.updateMaxLine=!0)),it(x,F.line),Vf(u,400);var ie=d.text.length-(W.line-F.line)-1;d.full?ri(u):F.line==W.line&&d.text.length==1&&!Rb(u.doc,d)?Uo(u,F.line,"text"):ri(u,F.line,W.line+1,ie);var me=Ne(u,"changes"),xe=Ne(u,"change");if(xe||me){var Ee={from:F,to:W,text:d.text,removed:d.removed,origin:d.origin};xe&&Qn(u,"change",u,Ee),me&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(Ee)}u.display.selForContextMenu=null}function Tu(u,d,w,x,M){var F;x||(x=w),se(x,w)<0&&(F=[x,w],w=F[0],x=F[1]),typeof d=="string"&&(d=u.splitLines(d)),Mu(u,{from:w,to:x,text:d,origin:M})}function Xb(u,d,w,x){w<u.line?u.line+=x:d<u.line&&(u.line=d,u.ch=0)}function Yb(u,d,w,x){for(var M=0;M<u.length;++M){var F=u[M],W=!0;if(F.ranges){F.copied||(F=u[M]=F.deepCopy(),F.copied=!0);for(var Y=0;Y<F.ranges.length;Y++)Xb(F.ranges[Y].anchor,d,w,x),Xb(F.ranges[Y].head,d,w,x);continue}for(var J=0;J<F.changes.length;++J){var ie=F.changes[J];if(w<ie.from.line)ie.from=je(ie.from.line+x,ie.from.ch),ie.to=je(ie.to.line+x,ie.to.ch);else if(d<=ie.to.line){W=!1;break}}W||(u.splice(0,M+1),M=0)}}function Kb(u,d){var w=d.from.line,x=d.to.line,M=d.text.length-(x-w)-1;Yb(u.done,w,x,M),Yb(u.undone,w,x,M)}function qf(u,d,w,x){var M=d,F=d;return typeof d=="number"?F=et(u,Qt(u,d)):M=Gt(d),M==null?null:(x(F,M)&&u.cm&&Uo(u.cm,M,w),F)}function Xf(u){this.lines=u,this.parent=null;for(var d=0,w=0;w<u.length;++w)u[w].parent=this,d+=u[w].height;this.height=d}Xf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,d){for(var w=u,x=u+d;w<x;++w){var M=this.lines[w];this.height-=M.height,cv(M),Qn(M,"delete")}this.lines.splice(u,d)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,d,w){this.height+=w,this.lines=this.lines.slice(0,u).concat(d).concat(this.lines.slice(u));for(var x=0;x<d.length;++x)d[x].parent=this},iterN:function(u,d,w){for(var x=u+d;u<x;++u)if(w(this.lines[u]))return!0}};function Yf(u){this.children=u;for(var d=0,w=0,x=0;x<u.length;++x){var M=u[x];d+=M.chunkSize(),w+=M.height,M.parent=this}this.size=d,this.height=w,this.parent=null}Yf.prototype={chunkSize:function(){return this.size},removeInner:function(u,d){this.size-=d;for(var w=0;w<this.children.length;++w){var x=this.children[w],M=x.chunkSize();if(u<M){var F=Math.min(d,M-u),W=x.height;if(x.removeInner(u,F),this.height-=W-x.height,M==F&&(this.children.splice(w--,1),x.parent=null),(d-=F)==0)break;u=0}else u-=M}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof Xf))){var Y=[];this.collapse(Y),this.children=[new Xf(Y)],this.children[0].parent=this}},collapse:function(u){for(var d=0;d<this.children.length;++d)this.children[d].collapse(u)},insertInner:function(u,d,w){this.size+=d.length,this.height+=w;for(var x=0;x<this.children.length;++x){var M=this.children[x],F=M.chunkSize();if(u<=F){if(M.insertInner(u,d,w),M.lines&&M.lines.length>50){for(var W=M.lines.length%25+25,Y=W;Y<M.lines.length;){var J=new Xf(M.lines.slice(Y,Y+=25));M.height-=J.height,this.children.splice(++x,0,J),J.parent=this}M.lines=M.lines.slice(0,W),this.maybeSpill()}break}u-=F}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var d=u.children.splice(u.children.length-5,5),w=new Yf(d);if(u.parent){u.size-=w.size,u.height-=w.height;var M=Te(u.parent.children,u);u.parent.children.splice(M+1,0,w)}else{var x=new Yf(u.children);x.parent=u,u.children=[x,w],u=x}w.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,d,w){for(var x=0;x<this.children.length;++x){var M=this.children[x],F=M.chunkSize();if(u<F){var W=Math.min(d,F-u);if(M.iterN(u,W,w))return!0;if((d-=W)==0)break;u=0}else u-=F}}};var Kf=function(u,d,w){if(w)for(var x in w)w.hasOwnProperty(x)&&(this[x]=w[x]);this.doc=u,this.node=d};Kf.prototype.clear=function(){var u=this.doc.cm,d=this.line.widgets,w=this.line,x=Gt(w);if(!(x==null||!d)){for(var M=0;M<d.length;++M)d[M]==this&&d.splice(M--,1);d.length||(w.widgets=null);var F=Nf(this);Tn(w,Math.max(0,w.height-F)),u&&(gi(u,function(){Zb(u,w,-F),Uo(u,x,"widget")}),Qn(u,"lineWidgetCleared",u,this,x))}},Kf.prototype.changed=function(){var u=this,d=this.height,w=this.doc.cm,x=this.line;this.height=null;var M=Nf(this)-d;!M||(As(this.doc,x)||Tn(x,x.height+M),w&&gi(w,function(){w.curOp.forceUpdate=!0,Zb(w,x,M),Qn(w,"lineWidgetChanged",w,u,Gt(x))}))},Xe(Kf);function Zb(u,d,w){Sr(d)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&Cv(u,w)}function HI(u,d,w,x){var M=new Kf(u,w,x),F=u.cm;return F&&M.noHScroll&&(F.display.alignWidgets=!0),qf(u,d,"widget",function(W){var Y=W.widgets||(W.widgets=[]);if(M.insertAt==null?Y.push(M):Y.splice(Math.min(Y.length,Math.max(0,M.insertAt)),0,M),M.line=W,F&&!As(u,W)){var J=Sr(W)<u.scrollTop;Tn(W,W.height+Nf(M)),J&&Cv(F,M.height),F.curOp.forceUpdate=!0}return!0}),F&&Qn(F,"lineWidgetAdded",F,M,typeof d=="number"?d:Gt(d)),M}var Qb=0,$o=function(u,d){this.lines=[],this.type=d,this.doc=u,this.id=++Qb};$o.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,d=u&&!u.curOp;if(d&&Ja(u),Ne(this,"clear")){var w=this.find();w&&Qn(this,"clear",w.from,w.to)}for(var x=null,M=null,F=0;F<this.lines.length;++F){var W=this.lines[F],Y=Wi(W.markedSpans,this);u&&!this.collapsed?Uo(u,Gt(W),"text"):u&&(Y.to!=null&&(M=Gt(W)),Y.from!=null&&(x=Gt(W))),W.markedSpans=Es(W.markedSpans,Y),Y.from==null&&this.collapsed&&!As(this.doc,W)&&u&&Tn(W,vu(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var J=0;J<this.lines.length;++J){var ie=Ii(this.lines[J]),me=ji(ie);me>u.display.maxLineLength&&(u.display.maxLine=ie,u.display.maxLineLength=me,u.display.maxLineChanged=!0)}x!=null&&u&&this.collapsed&&ri(u,x,M+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&Hb(u.doc)),u&&Qn(u,"markerCleared",u,this,x,M),d&&el(u),this.parent&&this.parent.clear()}},$o.prototype.find=function(u,d){u==null&&this.type=="bookmark"&&(u=1);for(var w,x,M=0;M<this.lines.length;++M){var F=this.lines[M],W=Wi(F.markedSpans,this);if(W.from!=null&&(w=je(d?F:Gt(F),W.from),u==-1))return w;if(W.to!=null&&(x=je(d?F:Gt(F),W.to),u==1))return x}return w&&{from:w,to:x}},$o.prototype.changed=function(){var u=this,d=this.find(-1,!0),w=this,x=this.doc.cm;!d||!x||gi(x,function(){var M=d.line,F=Gt(d.line),W=mv(x,F);if(W&&(ib(W),x.curOp.selectionChanged=x.curOp.forceUpdate=!0),x.curOp.updateMaxLine=!0,!As(w.doc,M)&&w.height!=null){var Y=w.height;w.height=null;var J=Nf(w)-Y;J&&Tn(M,M.height+J)}Qn(x,"markerChanged",x,u)})},$o.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||Te(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},$o.prototype.detachLine=function(u){if(this.lines.splice(Te(this.lines,u),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Xe($o);function Eu(u,d,w,x,M){if(x&&x.shared)return GI(u,d,w,x,M);if(u.cm&&!u.cm.curOp)return vr(u.cm,Eu)(u,d,w,x,M);var F=new $o(u,M),W=se(d,w);if(x&&Ce(x,F,!1),W>0||W==0&&F.clearWhenEmpty!==!1)return F;if(F.replacedWith&&(F.collapsed=!0,F.widgetNode=p("span",[F.replacedWith],"CodeMirror-widget"),x.handleMouseEvents||F.widgetNode.setAttribute("cm-ignore-events","true"),x.insertLeft&&(F.widgetNode.insertLeft=!0)),F.collapsed){if(gp(u,d.line,d,w,F)||d.line!=w.line&&gp(u,w.line,d,w,F))throw new Error("Inserting collapsed marker partially overlapping an existing one");cr()}F.addToHistory&&Ob(u,{from:d,to:w,origin:"markText"},u.sel,NaN);var Y=d.line,J=u.cm,ie;if(u.iter(Y,w.line+1,function(xe){J&&F.collapsed&&!J.options.lineWrapping&&Ii(xe)==J.display.maxLine&&(ie=!0),F.collapsed&&Y!=d.line&&Tn(xe,0),mp(xe,new cs(F,Y==d.line?d.ch:null,Y==w.line?w.ch:null),u.cm&&u.cm.curOp),++Y}),F.collapsed&&u.iter(d.line,w.line+1,function(xe){As(u,xe)&&Tn(xe,0)}),F.clearOnEnter&&K(F,"beforeCursorEnter",function(){return F.clear()}),F.readOnly&&(ur(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),F.collapsed&&(F.id=++Qb,F.atomic=!0),J){if(ie&&(J.curOp.updateMaxLine=!0),F.collapsed)ri(J,d.line,w.line+1);else if(F.className||F.startStyle||F.endStyle||F.css||F.attributes||F.title)for(var me=d.line;me<=w.line;me++)Uo(J,me,"text");F.atomic&&Hb(J.doc),Qn(J,"markerAdded",J,F)}return F}var Zf=function(u,d){this.markers=u,this.primary=d;for(var w=0;w<u.length;++w)u[w].parent=this};Zf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();Qn(this,"clear")}},Zf.prototype.find=function(u,d){return this.primary.find(u,d)},Xe(Zf);function GI(u,d,w,x,M){x=Ce(x),x.shared=!1;var F=[Eu(u,d,w,x,M)],W=F[0],Y=x.widgetNode;return Vo(u,function(J){Y&&(x.widgetNode=Y.cloneNode(!0)),F.push(Eu(J,lt(J,d),lt(J,w),x,M));for(var ie=0;ie<J.linked.length;++ie)if(J.linked[ie].isParent)return;W=De(F)}),new Zf(F,W)}function Jb(u){return u.findMarks(je(u.first,0),u.clipPos(je(u.lastLine())),function(d){return d.parent})}function VI(u,d){for(var w=0;w<d.length;w++){var x=d[w],M=x.find(),F=u.clipPos(M.from),W=u.clipPos(M.to);if(se(F,W)){var Y=Eu(u,F,W,x.primary,x.primary.type);x.markers.push(Y),Y.parent=x}}}function $I(u){for(var d=function(x){var M=u[x],F=[M.primary.doc];Vo(M.primary.doc,function(J){return F.push(J)});for(var W=0;W<M.markers.length;W++){var Y=M.markers[W];Te(F,Y.doc)==-1&&(Y.parent=null,M.markers.splice(W--,1))}},w=0;w<u.length;w++)d(w)}var WI=0,ii=function(u,d,w,x,M){if(!(this instanceof ii))return new ii(u,d,w,x,M);w==null&&(w=0),Yf.call(this,[new Xf([new Js("",null)])]),this.first=w,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=w;var F=je(w,0);this.sel=Ho(F),this.history=new Rp(null),this.id=++WI,this.modeOption=d,this.lineSep=x,this.direction=M=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),Nv(this,{from:F,to:F,text:u}),Pr(this,Ho(F),He)};ii.prototype=Je(Yf.prototype,{constructor:ii,iter:function(u,d,w){w?this.iterN(u-this.first,d-u,w):this.iterN(this.first,this.first+this.size,u)},insert:function(u,d){for(var w=0,x=0;x<d.length;++x)w+=d[x].height;this.insertInner(u-this.first,d,w)},remove:function(u,d){this.removeInner(u-this.first,d)},getValue:function(u){var d=Vi(this,this.first,this.first+this.size);return u===!1?d:d.join(u||this.lineSeparator())},setValue:yr(function(u){var d=je(this.first,0),w=this.first+this.size-1;Mu(this,{from:d,to:je(w,et(this,w).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&Uf(this.cm,0,0),Pr(this,Ho(d),He)}),replaceRange:function(u,d,w,x){d=lt(this,d),w=w?lt(this,w):d,Tu(this,u,d,w,x)},getRange:function(u,d,w){var x=Hn(this,lt(this,u),lt(this,d));return w===!1?x:w===""?x.join(""):x.join(w||this.lineSeparator())},getLine:function(u){var d=this.getLineHandle(u);return d&&d.text},getLineHandle:function(u){if(ei(this,u))return et(this,u)},getLineNumber:function(u){return Gt(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=et(this,u)),Ii(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return lt(this,u)},getCursor:function(u){var d=this.sel.primary(),w;return u==null||u=="head"?w=d.head:u=="anchor"?w=d.anchor:u=="end"||u=="to"||u===!1?w=d.to():w=d.from(),w},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:yr(function(u,d,w){Bb(this,lt(this,typeof u=="number"?je(u,d||0):u),null,w)}),setSelection:yr(function(u,d,w){Bb(this,lt(this,u),lt(this,d||u),w)}),extendSelection:yr(function(u,d,w){Pp(this,lt(this,u),d&&lt(this,d),w)}),extendSelections:yr(function(u,d){Fb(this,ti(this,u),d)}),extendSelectionsBy:yr(function(u,d){var w=oe(this.sel.ranges,u);Fb(this,ti(this,w),d)}),setSelections:yr(function(u,d,w){if(!!u.length){for(var x=[],M=0;M<u.length;M++)x[M]=new cn(lt(this,u[M].anchor),lt(this,u[M].head||u[M].anchor));d==null&&(d=Math.min(u.length-1,this.sel.primIndex)),Pr(this,hs(this.cm,x,d),w)}}),addSelection:yr(function(u,d,w){var x=this.sel.ranges.slice(0);x.push(new cn(lt(this,u),lt(this,d||u))),Pr(this,hs(this.cm,x,x.length-1),w)}),getSelection:function(u){for(var d=this.sel.ranges,w,x=0;x<d.length;x++){var M=Hn(this,d[x].from(),d[x].to());w=w?w.concat(M):M}return u===!1?w:w.join(u||this.lineSeparator())},getSelections:function(u){for(var d=[],w=this.sel.ranges,x=0;x<w.length;x++){var M=Hn(this,w[x].from(),w[x].to());u!==!1&&(M=M.join(u||this.lineSeparator())),d[x]=M}return d},replaceSelection:function(u,d,w){for(var x=[],M=0;M<this.sel.ranges.length;M++)x[M]=u;this.replaceSelections(x,d,w||"+input")},replaceSelections:yr(function(u,d,w){for(var x=[],M=this.sel,F=0;F<M.ranges.length;F++){var W=M.ranges[F];x[F]={from:W.from(),to:W.to(),text:this.splitLines(u[F]),origin:w}}for(var Y=d&&d!="end"&&PI(this,x,d),J=x.length-1;J>=0;J--)Mu(this,x[J]);Y?Ub(this,Y):this.cm&&wu(this.cm)}),undo:yr(function(){Dp(this,"undo")}),redo:yr(function(){Dp(this,"redo")}),undoSelection:yr(function(){Dp(this,"undo",!0)}),redoSelection:yr(function(){Dp(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,d=0,w=0,x=0;x<u.done.length;x++)u.done[x].ranges||++d;for(var M=0;M<u.undone.length;M++)u.undone[M].ranges||++w;return{undo:d,redo:w}},clearHistory:function(){var u=this;this.history=new Rp(this.history),Vo(this,function(d){return d.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:bu(this.history.done),undone:bu(this.history.undone)}},setHistory:function(u){var d=this.history=new Rp(this.history);d.done=bu(u.done.slice(0),null,!0),d.undone=bu(u.undone.slice(0),null,!0)},setGutterMarker:yr(function(u,d,w){return qf(this,u,"gutter",function(x){var M=x.gutterMarkers||(x.gutterMarkers={});return M[d]=w,!w&&s(M)&&(x.gutterMarkers=null),!0})}),clearGutter:yr(function(u){var d=this;this.iter(function(w){w.gutterMarkers&&w.gutterMarkers[u]&&qf(d,w,"gutter",function(){return w.gutterMarkers[u]=null,s(w.gutterMarkers)&&(w.gutterMarkers=null),!0})})}),lineInfo:function(u){var d;if(typeof u=="number"){if(!ei(this,u)||(d=u,u=et(this,u),!u))return null}else if(d=Gt(u),d==null)return null;return{line:d,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:yr(function(u,d,w){return qf(this,u,d=="gutter"?"gutter":"class",function(x){var M=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!x[M])x[M]=w;else{if(le(w).test(x[M]))return!1;x[M]+=" "+w}return!0})}),removeLineClass:yr(function(u,d,w){return qf(this,u,d=="gutter"?"gutter":"class",function(x){var M=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",F=x[M];if(F)if(w==null)x[M]=null;else{var W=F.match(le(w));if(!W)return!1;var Y=W.index+W[0].length;x[M]=F.slice(0,W.index)+(!W.index||Y==F.length?"":" ")+F.slice(Y)||null}else return!1;return!0})}),addLineWidget:yr(function(u,d,w){return HI(this,u,d,w)}),removeLineWidget:function(u){u.clear()},markText:function(u,d,w){return Eu(this,lt(this,u),lt(this,d),w,w&&w.type||"range")},setBookmark:function(u,d){var w={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return u=lt(this,u),Eu(this,u,u,w,"bookmark")},findMarksAt:function(u){u=lt(this,u);var d=[],w=et(this,u.line).markedSpans;if(w)for(var x=0;x<w.length;++x){var M=w[x];(M.from==null||M.from<=u.ch)&&(M.to==null||M.to>=u.ch)&&d.push(M.marker.parent||M.marker)}return d},findMarks:function(u,d,w){u=lt(this,u),d=lt(this,d);var x=[],M=u.line;return this.iter(u.line,d.line+1,function(F){var W=F.markedSpans;if(W)for(var Y=0;Y<W.length;Y++){var J=W[Y];!(J.to!=null&&M==u.line&&u.ch>=J.to||J.from==null&&M!=u.line||J.from!=null&&M==d.line&&J.from>=d.ch)&&(!w||w(J.marker))&&x.push(J.marker.parent||J.marker)}++M}),x},getAllMarks:function(){var u=[];return this.iter(function(d){var w=d.markedSpans;if(w)for(var x=0;x<w.length;++x)w[x].from!=null&&u.push(w[x].marker)}),u},posFromIndex:function(u){var d,w=this.first,x=this.lineSeparator().length;return this.iter(function(M){var F=M.text.length+x;if(F>u)return d=u,!0;u-=F,++w}),lt(this,je(w,d))},indexFromPos:function(u){u=lt(this,u);var d=u.ch;if(u.line<this.first||u.ch<0)return 0;var w=this.lineSeparator().length;return this.iter(this.first,u.line,function(x){d+=x.text.length+w}),d},copy:function(u){var d=new ii(Vi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,u&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(u){u||(u={});var d=this.first,w=this.first+this.size;u.from!=null&&u.from>d&&(d=u.from),u.to!=null&&u.to<w&&(w=u.to);var x=new ii(Vi(this,d,w),u.mode||this.modeOption,d,this.lineSep,this.direction);return u.sharedHist&&(x.history=this.history),(this.linked||(this.linked=[])).push({doc:x,sharedHist:u.sharedHist}),x.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],VI(x,Jb(this)),x},unlinkDoc:function(u){if(u instanceof Ln&&(u=u.doc),this.linked)for(var d=0;d<this.linked.length;++d){var w=this.linked[d];if(w.doc==u){this.linked.splice(d,1),u.unlinkDoc(this),$I(Jb(this));break}}if(u.history==this.history){var x=[u.id];Vo(u,function(M){return x.push(M.id)},!0),u.history=new Rp(null),u.history.done=bu(this.history.done,x),u.history.undone=bu(this.history.undone,x)}},iterLinkedDocs:function(u){Vo(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):de(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:yr(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(d){return d.order=null}),this.cm&&kI(this.cm))})}),ii.prototype.eachLine=ii.prototype.iter;var eS=0;function jI(u){var d=this;if(tS(d),!(ce(d,u)||eo(d.display,u))){Ge(u),m&&(eS=+new Date);var w=Ya(d,u,!0),x=u.dataTransfer.files;if(!(!w||d.isReadOnly()))if(x&&x.length&&window.FileReader&&window.File)for(var M=x.length,F=Array(M),W=0,Y=function(){++W==M&&vr(d,function(){w=lt(d.doc,w);var Se={from:w,to:w,text:d.doc.splitLines(F.filter(function(Be){return Be!=null}).join(d.doc.lineSeparator())),origin:"paste"};Mu(d.doc,Se),Ub(d.doc,Ho(lt(d.doc,w),lt(d.doc,Go(Se))))})()},J=function(Se,Be){if(d.options.allowDropFileTypes&&Te(d.options.allowDropFileTypes,Se.type)==-1){Y();return}var Ve=new FileReader;Ve.onerror=function(){return Y()},Ve.onload=function(){var Ze=Ve.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ze)){Y();return}F[Be]=Ze,Y()},Ve.readAsText(Se)},ie=0;ie<x.length;ie++)J(x[ie],ie);else{if(d.state.draggingText&&d.doc.sel.contains(w)>-1){d.state.draggingText(u),setTimeout(function(){return d.display.input.focus()},20);return}try{var me=u.dataTransfer.getData("Text");if(me){var xe;if(d.state.draggingText&&!d.state.draggingText.copy&&(xe=d.listSelections()),kp(d.doc,Ho(w,w)),xe)for(var Ee=0;Ee<xe.length;++Ee)Tu(d.doc,"",xe[Ee].anchor,xe[Ee].head,"drag");d.replaceSelection(me,"around","paste"),d.display.input.focus()}}catch{}}}}function qI(u,d){if(m&&(!u.state.draggingText||+new Date-eS<100)){Mt(d);return}if(!(ce(u,d)||eo(u.display,d))&&(d.dataTransfer.setData("Text",u.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!O)){var w=_("img",null,null,"position: fixed; left: 0; top: 0;");w.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",P&&(w.width=w.height=1,u.display.wrapper.appendChild(w),w._top=w.offsetTop),d.dataTransfer.setDragImage(w,0,0),P&&w.parentNode.removeChild(w)}}function XI(u,d){var w=Ya(u,d);if(!!w){var x=document.createDocumentFragment();Sv(u,w,x),u.display.dragCursor||(u.display.dragCursor=_("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),ee(u.display.dragCursor,x)}}function tS(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function nS(u){if(!!document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),w=[],x=0;x<d.length;x++){var M=d[x].CodeMirror;M&&w.push(M)}w.length&&w[0].operation(function(){for(var F=0;F<w.length;F++)u(w[F])})}}var rS=!1;function YI(){rS||(KI(),rS=!0)}function KI(){var u;K(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,nS(ZI)},100))}),K(window,"blur",function(){return nS(xu)})}function ZI(u){var d=u.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,u.setSize()}for(var Wo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Qf=0;Qf<10;Qf++)Wo[Qf+48]=Wo[Qf+96]=String(Qf);for(var Np=65;Np<=90;Np++)Wo[Np]=String.fromCharCode(Np);for(var Jf=1;Jf<=12;Jf++)Wo[Jf+111]=Wo[Jf+63235]="F"+Jf;var no={};no.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},no.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},no.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},no.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},no.default=I?no.macDefault:no.pcDefault;function QI(u){var d=u.split(/-(?!$)/);u=d[d.length-1];for(var w,x,M,F,W=0;W<d.length-1;W++){var Y=d[W];if(/^(cmd|meta|m)$/i.test(Y))F=!0;else if(/^a(lt)?$/i.test(Y))w=!0;else if(/^(c|ctrl|control)$/i.test(Y))x=!0;else if(/^s(hift)?$/i.test(Y))M=!0;else throw new Error("Unrecognized modifier name: "+Y)}return w&&(u="Alt-"+u),x&&(u="Ctrl-"+u),F&&(u="Cmd-"+u),M&&(u="Shift-"+u),u}function JI(u){var d={};for(var w in u)if(u.hasOwnProperty(w)){var x=u[w];if(/^(name|fallthrough|(de|at)tach)$/.test(w))continue;if(x=="..."){delete u[w];continue}for(var M=oe(w.split(" "),QI),F=0;F<M.length;F++){var W=void 0,Y=void 0;F==M.length-1?(Y=M.join(" "),W=x):(Y=M.slice(0,F+1).join(" "),W="...");var J=d[Y];if(!J)d[Y]=W;else if(J!=W)throw new Error("Inconsistent bindings for "+Y)}delete u[w]}for(var ie in d)u[ie]=d[ie];return u}function Au(u,d,w,x){d=Fp(d);var M=d.call?d.call(u,x):d[u];if(M===!1)return"nothing";if(M==="...")return"multi";if(M!=null&&w(M))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return Au(u,d.fallthrough,w,x);for(var F=0;F<d.fallthrough.length;F++){var W=Au(u,d.fallthrough[F],w,x);if(W)return W}}}function iS(u){var d=typeof u=="string"?u:Wo[u.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function sS(u,d,w){var x=u;return d.altKey&&x!="Alt"&&(u="Alt-"+u),(Q?d.metaKey:d.ctrlKey)&&x!="Ctrl"&&(u="Ctrl-"+u),(Q?d.ctrlKey:d.metaKey)&&x!="Mod"&&(u="Cmd-"+u),!w&&d.shiftKey&&x!="Shift"&&(u="Shift-"+u),u}function oS(u,d){if(P&&u.keyCode==34&&u.char)return!1;var w=Wo[u.keyCode];return w==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(w=u.code),sS(w,u,d))}function Fp(u){return typeof u=="string"?no[u]:u}function Cu(u,d){for(var w=u.doc.sel.ranges,x=[],M=0;M<w.length;M++){for(var F=d(w[M]);x.length&&se(F.from,De(x).to)<=0;){var W=x.pop();if(se(W.from,F.from)<0){F.from=W.from;break}}x.push(F)}gi(u,function(){for(var Y=x.length-1;Y>=0;Y--)Tu(u.doc,"",x[Y].from,x[Y].to,"+delete");wu(u)})}function zv(u,d,w){var x=g(u.text,d+w,w);return x<0||x>u.text.length?null:x}function Hv(u,d,w){var x=zv(u,d.ch,w);return x==null?null:new je(d.line,x,w<0?"after":"before")}function Gv(u,d,w,x,M){if(u){d.doc.direction=="rtl"&&(M=-M);var F=H(w,d.doc.direction);if(F){var W=M<0?De(F):F[0],Y=M<0==(W.level==1),J=Y?"after":"before",ie;if(W.level>0||d.doc.direction=="rtl"){var me=gu(d,w);ie=M<0?w.text.length-1:0;var xe=Ls(d,me,ie).top;ie=y(function(Ee){return Ls(d,me,Ee).top==xe},M<0==(W.level==1)?W.from:W.to-1,ie),J=="before"&&(ie=zv(w,ie,1))}else ie=M<0?W.to:W.from;return new je(x,ie,J)}}return new je(x,M<0?w.text.length:0,M<0?"before":"after")}function eP(u,d,w,x){var M=H(d,u.doc.direction);if(!M)return Hv(d,w,x);w.ch>=d.text.length?(w.ch=d.text.length,w.sticky="before"):w.ch<=0&&(w.ch=0,w.sticky="after");var F=R(M,w.ch,w.sticky),W=M[F];if(u.doc.direction=="ltr"&&W.level%2==0&&(x>0?W.to>w.ch:W.from<w.ch))return Hv(d,w,x);var Y=function(nt,at){return zv(d,nt instanceof je?nt.ch:nt,at)},J,ie=function(nt){return u.options.lineWrapping?(J=J||gu(u,d),fb(u,d,J,nt)):{begin:0,end:d.text.length}},me=ie(w.sticky=="before"?Y(w,-1):w.ch);if(u.doc.direction=="rtl"||W.level==1){var xe=W.level==1==x<0,Ee=Y(w,xe?1:-1);if(Ee!=null&&(xe?Ee<=W.to&&Ee<=me.end:Ee>=W.from&&Ee>=me.begin)){var Se=xe?"before":"after";return new je(w.line,Ee,Se)}}var Be=function(nt,at,rt){for(var ht=function(Mn,xr){return xr?new je(w.line,Y(Mn,1),"before"):new je(w.line,Mn,"after")};nt>=0&&nt<M.length;nt+=at){var Ct=M[nt],Et=at>0==(Ct.level!=1),qt=Et?rt.begin:Y(rt.end,-1);if(Ct.from<=qt&&qt<Ct.to||(qt=Et?Ct.from:Y(Ct.to,-1),rt.begin<=qt&&qt<rt.end))return ht(qt,Et)}},Ve=Be(F+x,x,me);if(Ve)return Ve;var Ze=x>0?me.end:Y(me.begin,-1);return Ze!=null&&!(x>0&&Ze==d.text.length)&&(Ve=Be(x>0?0:M.length-1,x,ie(Ze)),Ve)?Ve:null}var eh={selectAll:$b,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),He)},killLine:function(u){return Cu(u,function(d){if(d.empty()){var w=et(u.doc,d.head.line).text.length;return d.head.ch==w&&d.head.line<u.lastLine()?{from:d.head,to:je(d.head.line+1,0)}:{from:d.head,to:je(d.head.line,w)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(u){return Cu(u,function(d){return{from:je(d.from().line,0),to:lt(u.doc,je(d.to().line+1,0))}})},delLineLeft:function(u){return Cu(u,function(d){return{from:je(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(u){return Cu(u,function(d){var w=u.charCoords(d.head,"div").top+5,x=u.coordsChar({left:0,top:w},"div");return{from:x,to:d.from()}})},delWrappedLineRight:function(u){return Cu(u,function(d){var w=u.charCoords(d.head,"div").top+5,x=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:w},"div");return{from:d.from(),to:x}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(je(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(je(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(d){return aS(u,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(d){return lS(u,d.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(d){return tP(u,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(d){var w=u.cursorCoords(d.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:w},"div")},$e)},goLineLeft:function(u){return u.extendSelectionsBy(function(d){var w=u.cursorCoords(d.head,"div").top+5;return u.coordsChar({left:0,top:w},"div")},$e)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(d){var w=u.cursorCoords(d.head,"div").top+5,x=u.coordsChar({left:0,top:w},"div");return x.ch<u.getLine(x.line).search(/\S/)?lS(u,d.head):x},$e)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var d=[],w=u.listSelections(),x=u.options.tabSize,M=0;M<w.length;M++){var F=w[M].from(),W=_e(u.getLine(F.line),F.ch,x);d.push(qe(x-W%x))}u.replaceSelections(d)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return gi(u,function(){for(var d=u.listSelections(),w=[],x=0;x<d.length;x++)if(!!d[x].empty()){var M=d[x].head,F=et(u.doc,M.line).text;if(F){if(M.ch==F.length&&(M=new je(M.line,M.ch-1)),M.ch>0)M=new je(M.line,M.ch+1),u.replaceRange(F.charAt(M.ch-1)+F.charAt(M.ch-2),je(M.line,M.ch-2),M,"+transpose");else if(M.line>u.doc.first){var W=et(u.doc,M.line-1).text;W&&(M=new je(M.line,1),u.replaceRange(F.charAt(0)+u.doc.lineSeparator()+W.charAt(W.length-1),je(M.line-1,W.length-1),M,"+transpose"))}}w.push(new cn(M,M))}u.setSelections(w)})},newlineAndIndent:function(u){return gi(u,function(){for(var d=u.listSelections(),w=d.length-1;w>=0;w--)u.replaceRange(u.doc.lineSeparator(),d[w].anchor,d[w].head,"+input");d=u.listSelections();for(var x=0;x<d.length;x++)u.indentLine(d[x].from().line,null,!0);wu(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function aS(u,d){var w=et(u.doc,d),x=Ii(w);return x!=w&&(d=Gt(x)),Gv(!0,u,x,d,1)}function tP(u,d){var w=et(u.doc,d),x=lv(w);return x!=w&&(d=Gt(x)),Gv(!0,u,w,d,-1)}function lS(u,d){var w=aS(u,d.line),x=et(u.doc,w.line),M=H(x,u.doc.direction);if(!M||M[0].level==0){var F=Math.max(w.ch,x.text.search(/\S/)),W=d.line==w.line&&d.ch<=F&&d.ch;return je(w.line,W?0:F,w.sticky)}return w}function Bp(u,d,w){if(typeof d=="string"&&(d=eh[d],!d))return!1;u.display.input.ensurePolled();var x=u.display.shift,M=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),w&&(u.display.shift=!1),M=d(u)!=ze}finally{u.display.shift=x,u.state.suppressEdits=!1}return M}function nP(u,d,w){for(var x=0;x<u.state.keyMaps.length;x++){var M=Au(d,u.state.keyMaps[x],w,u);if(M)return M}return u.options.extraKeys&&Au(d,u.options.extraKeys,w,u)||Au(d,u.options.keyMap,w,u)}var rP=new Pe;function th(u,d,w,x){var M=u.state.keySeq;if(M){if(iS(d))return"handled";if(/\'$/.test(d)?u.state.keySeq=null:rP.set(50,function(){u.state.keySeq==M&&(u.state.keySeq=null,u.display.input.reset())}),uS(u,M+" "+d,w,x))return!0}return uS(u,d,w,x)}function uS(u,d,w,x){var M=nP(u,d,x);return M=="multi"&&(u.state.keySeq=d),M=="handled"&&Qn(u,"keyHandled",u,d,w),(M=="handled"||M=="multi")&&(Ge(w),Mv(u)),!!M}function cS(u,d){var w=oS(d,!0);return w?d.shiftKey&&!u.state.keySeq?th(u,"Shift-"+w,d,function(x){return Bp(u,x,!0)})||th(u,w,d,function(x){if(typeof x=="string"?/^go[A-Z]/.test(x):x.motion)return Bp(u,x)}):th(u,w,d,function(x){return Bp(u,x)}):!1}function iP(u,d,w){return th(u,"'"+w+"'",d,function(x){return Bp(u,x,!0)})}var Vv=null;function fS(u){var d=this;if(!(u.target&&u.target!=d.display.input.getField())&&(d.curOp.focus=ye(),!ce(d,u))){m&&v<11&&u.keyCode==27&&(u.returnValue=!1);var w=u.keyCode;d.display.shift=w==16||u.shiftKey;var x=cS(d,u);P&&(Vv=x?w:null,!x&&w==88&&!ke&&(I?u.metaKey:u.ctrlKey)&&d.replaceSelection("",null,"cut")),o&&!I&&!x&&w==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),w==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&sP(d)}}function sP(u){var d=u.display.lineDiv;Re(d,"CodeMirror-crosshair");function w(x){(x.keyCode==18||!x.altKey)&&(he(d,"CodeMirror-crosshair"),te(document,"keyup",w),te(document,"mouseover",w))}K(document,"keyup",w),K(document,"mouseover",w)}function hS(u){u.keyCode==16&&(this.doc.sel.shift=!1),ce(this,u)}function dS(u){var d=this;if(!(u.target&&u.target!=d.display.input.getField())&&!(eo(d.display,u)||ce(d,u)||u.ctrlKey&&!u.altKey||I&&u.metaKey)){var w=u.keyCode,x=u.charCode;if(P&&w==Vv){Vv=null,Ge(u);return}if(!(P&&(!u.which||u.which<10)&&cS(d,u))){var M=String.fromCharCode(x==null?w:x);M!="\b"&&(iP(d,u,M)||d.display.input.onKeyPress(u))}}}var oP=400,$v=function(u,d,w){this.time=u,this.pos=d,this.button=w};$v.prototype.compare=function(u,d,w){return this.time+oP>u&&se(d,this.pos)==0&&w==this.button};var nh,rh;function aP(u,d){var w=+new Date;return rh&&rh.compare(w,u,d)?(nh=rh=null,"triple"):nh&&nh.compare(w,u,d)?(rh=new $v(w,u,d),nh=null,"double"):(nh=new $v(w,u,d),rh=null,"single")}function pS(u){var d=this,w=d.display;if(!(ce(d,u)||w.activeTouch&&w.input.supportsTouch())){if(w.input.ensurePolled(),w.shift=u.shiftKey,eo(w,u)){b||(w.scroller.draggable=!1,setTimeout(function(){return w.scroller.draggable=!0},100));return}if(!Wv(d,u)){var x=Ya(d,u),M=mt(u),F=x?aP(x,M):"single";window.focus(),M==1&&d.state.selectingText&&d.state.selectingText(u),!(x&&lP(d,M,x,F,u))&&(M==1?x?cP(d,x,F,u):dt(u)==w.scroller&&Ge(u):M==2?(x&&Pp(d.doc,x),setTimeout(function(){return w.input.focus()},20)):M==3&&(ae?d.display.input.onContextMenu(u):Tv(d)))}}}function lP(u,d,w,x,M){var F="Click";return x=="double"?F="Double"+F:x=="triple"&&(F="Triple"+F),F=(d==1?"Left":d==2?"Middle":"Right")+F,th(u,sS(F,M),M,function(W){if(typeof W=="string"&&(W=eh[W]),!W)return!1;var Y=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),Y=W(u,w)!=ze}finally{u.state.suppressEdits=!1}return Y})}function uP(u,d,w){var x=u.getOption("configureMouse"),M=x?x(u,d,w):{};if(M.unit==null){var F=B?w.shiftKey&&w.metaKey:w.altKey;M.unit=F?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(M.extend==null||u.doc.extend)&&(M.extend=u.doc.extend||w.shiftKey),M.addNew==null&&(M.addNew=I?w.metaKey:w.ctrlKey),M.moveOnDrag==null&&(M.moveOnDrag=!(I?w.altKey:w.ctrlKey)),M}function cP(u,d,w,x){m?setTimeout(ve(mb,u),0):u.curOp.focus=ye();var M=uP(u,w,x),F=u.doc.sel,W;u.options.dragDrop&&wn&&!u.isReadOnly()&&w=="single"&&(W=F.contains(d))>-1&&(se((W=F.ranges[W]).from(),d)<0||d.xRel>0)&&(se(W.to(),d)>0||d.xRel<0)?fP(u,x,d,M):hP(u,x,d,M)}function fP(u,d,w,x){var M=u.display,F=!1,W=vr(u,function(ie){b&&(M.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:Tv(u)),te(M.wrapper.ownerDocument,"mouseup",W),te(M.wrapper.ownerDocument,"mousemove",Y),te(M.scroller,"dragstart",J),te(M.scroller,"drop",W),F||(Ge(ie),x.addNew||Pp(u.doc,w,null,null,x.extend),b&&!O||m&&v==9?setTimeout(function(){M.wrapper.ownerDocument.body.focus({preventScroll:!0}),M.input.focus()},20):M.input.focus())}),Y=function(ie){F=F||Math.abs(d.clientX-ie.clientX)+Math.abs(d.clientY-ie.clientY)>=10},J=function(){return F=!0};b&&(M.scroller.draggable=!0),u.state.draggingText=W,W.copy=!x.moveOnDrag,K(M.wrapper.ownerDocument,"mouseup",W),K(M.wrapper.ownerDocument,"mousemove",Y),K(M.scroller,"dragstart",J),K(M.scroller,"drop",W),u.state.delayingBlurEvent=!0,setTimeout(function(){return M.input.focus()},20),M.scroller.dragDrop&&M.scroller.dragDrop()}function mS(u,d,w){if(w=="char")return new cn(d,d);if(w=="word")return u.findWordAt(d);if(w=="line")return new cn(je(d.line,0),lt(u.doc,je(d.line+1,0)));var x=w(u,d);return new cn(x.from,x.to)}function hP(u,d,w,x){m&&Tv(u);var M=u.display,F=u.doc;Ge(d);var W,Y,J=F.sel,ie=J.ranges;if(x.addNew&&!x.extend?(Y=F.sel.contains(w),Y>-1?W=ie[Y]:W=new cn(w,w)):(W=F.sel.primary(),Y=F.sel.primIndex),x.unit=="rectangle")x.addNew||(W=new cn(w,w)),w=Ya(u,d,!0,!0),Y=-1;else{var me=mS(u,w,x.unit);x.extend?W=Bv(W,me.anchor,me.head,x.extend):W=me}x.addNew?Y==-1?(Y=ie.length,Pr(F,hs(u,ie.concat([W]),Y),{scroll:!1,origin:"*mouse"})):ie.length>1&&ie[Y].empty()&&x.unit=="char"&&!x.extend?(Pr(F,hs(u,ie.slice(0,Y).concat(ie.slice(Y+1)),0),{scroll:!1,origin:"*mouse"}),J=F.sel):Uv(F,Y,W,$):(Y=0,Pr(F,new Pi([W],0),$),J=F.sel);var xe=w;function Ee(rt){if(se(xe,rt)!=0)if(xe=rt,x.unit=="rectangle"){for(var ht=[],Ct=u.options.tabSize,Et=_e(et(F,w.line).text,w.ch,Ct),qt=_e(et(F,rt.line).text,rt.ch,Ct),Mn=Math.min(Et,qt),xr=Math.max(Et,qt),On=Math.min(w.line,rt.line),vi=Math.min(u.lastLine(),Math.max(w.line,rt.line));On<=vi;On++){var si=et(F,On).text,Jn=Le(si,Mn,Ct);Mn==xr?ht.push(new cn(je(On,Jn),je(On,Jn))):si.length>Jn&&ht.push(new cn(je(On,Jn),je(On,Le(si,xr,Ct))))}ht.length||ht.push(new cn(w,w)),Pr(F,hs(u,J.ranges.slice(0,Y).concat(ht),Y),{origin:"*mouse",scroll:!1}),u.scrollIntoView(rt)}else{var oi=W,Mr=mS(u,rt,x.unit),fr=oi.anchor,er;se(Mr.anchor,fr)>0?(er=Mr.head,fr=It(oi.from(),Mr.anchor)):(er=Mr.anchor,fr=Ye(oi.to(),Mr.head));var Gn=J.ranges.slice(0);Gn[Y]=dP(u,new cn(lt(F,fr),er)),Pr(F,hs(u,Gn,Y),$)}}var Se=M.wrapper.getBoundingClientRect(),Be=0;function Ve(rt){var ht=++Be,Ct=Ya(u,rt,!0,x.unit=="rectangle");if(!!Ct)if(se(Ct,xe)!=0){u.curOp.focus=ye(),Ee(Ct);var Et=Ep(M,F);(Ct.line>=Et.to||Ct.line<Et.from)&&setTimeout(vr(u,function(){Be==ht&&Ve(rt)}),150)}else{var qt=rt.clientY<Se.top?-20:rt.clientY>Se.bottom?20:0;qt&&setTimeout(vr(u,function(){Be==ht&&(M.scroller.scrollTop+=qt,Ve(rt))}),50)}}function Ze(rt){u.state.selectingText=!1,Be=1/0,rt&&(Ge(rt),M.input.focus()),te(M.wrapper.ownerDocument,"mousemove",nt),te(M.wrapper.ownerDocument,"mouseup",at),F.history.lastSelOrigin=null}var nt=vr(u,function(rt){rt.buttons===0||!mt(rt)?Ze(rt):Ve(rt)}),at=vr(u,Ze);u.state.selectingText=at,K(M.wrapper.ownerDocument,"mousemove",nt),K(M.wrapper.ownerDocument,"mouseup",at)}function dP(u,d){var w=d.anchor,x=d.head,M=et(u.doc,w.line);if(se(w,x)==0&&w.sticky==x.sticky)return d;var F=H(M);if(!F)return d;var W=R(F,w.ch,w.sticky),Y=F[W];if(Y.from!=w.ch&&Y.to!=w.ch)return d;var J=W+(Y.from==w.ch==(Y.level!=1)?0:1);if(J==0||J==F.length)return d;var ie;if(x.line!=w.line)ie=(x.line-w.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var me=R(F,x.ch,x.sticky),xe=me-W||(x.ch-w.ch)*(Y.level==1?-1:1);me==J-1||me==J?ie=xe<0:ie=xe>0}var Ee=F[J+(ie?-1:0)],Se=ie==(Ee.level==1),Be=Se?Ee.from:Ee.to,Ve=Se?"after":"before";return w.ch==Be&&w.sticky==Ve?d:new cn(new je(w.line,Be,Ve),x)}function gS(u,d,w,x){var M,F;if(d.touches)M=d.touches[0].clientX,F=d.touches[0].clientY;else try{M=d.clientX,F=d.clientY}catch{return!1}if(M>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;x&&Ge(d);var W=u.display,Y=W.lineDiv.getBoundingClientRect();if(F>Y.bottom||!Ne(u,w))return ct(d);F-=Y.top-W.viewOffset;for(var J=0;J<u.display.gutterSpecs.length;++J){var ie=W.gutters.childNodes[J];if(ie&&ie.getBoundingClientRect().right>=M){var me=gn(u.doc,F),xe=u.display.gutterSpecs[J];return ue(u,w,u,me,xe.className,d),ct(d)}}}function Wv(u,d){return gS(u,d,"gutterClick",!0)}function vS(u,d){eo(u.display,d)||pP(u,d)||ce(u,d,"contextmenu")||ae||u.display.input.onContextMenu(d)}function pP(u,d){return Ne(u,"gutterContextMenu")?gS(u,d,"gutterContextMenu",!1):!1}function yS(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ff(u)}var Lu={toString:function(){return"CodeMirror.Init"}},xS={},Up={};function mP(u){var d=u.optionHandlers;function w(x,M,F,W){u.defaults[x]=M,F&&(d[x]=W?function(Y,J,ie){ie!=Lu&&F(Y,J,ie)}:F)}u.defineOption=w,u.Init=Lu,w("value","",function(x,M){return x.setValue(M)},!0),w("mode",null,function(x,M){x.doc.modeOption=M,Dv(x)},!0),w("indentUnit",2,Dv,!0),w("indentWithTabs",!1),w("smartIndent",!0),w("tabSize",4,function(x){Wf(x),Ff(x),ri(x)},!0),w("lineSeparator",null,function(x,M){if(x.doc.lineSep=M,!!M){var F=[],W=x.doc.first;x.doc.iter(function(J){for(var ie=0;;){var me=J.text.indexOf(M,ie);if(me==-1)break;ie=me+M.length,F.push(je(W,me))}W++});for(var Y=F.length-1;Y>=0;Y--)Tu(x.doc,M,F[Y],je(F[Y].line,F[Y].ch+M.length))}}),w("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(x,M,F){x.state.specialChars=new RegExp(M.source+(M.test("	")?"":"|	"),"g"),F!=Lu&&x.refresh()}),w("specialCharPlaceholder",_t,function(x){return x.refresh()},!0),w("electricChars",!0),w("inputStyle",N?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),w("spellcheck",!1,function(x,M){return x.getInputField().spellcheck=M},!0),w("autocorrect",!1,function(x,M){return x.getInputField().autocorrect=M},!0),w("autocapitalize",!1,function(x,M){return x.getInputField().autocapitalize=M},!0),w("rtlMoveVisually",!V),w("wholeLineUpdateBefore",!0),w("theme","default",function(x){yS(x),$f(x)},!0),w("keyMap","default",function(x,M,F){var W=Fp(M),Y=F!=Lu&&Fp(F);Y&&Y.detach&&Y.detach(x,W),W.attach&&W.attach(x,Y||null)}),w("extraKeys",null),w("configureMouse",null),w("lineWrapping",!1,vP,!0),w("gutters",[],function(x,M){x.display.gutterSpecs=kv(M,x.options.lineNumbers),$f(x)},!0),w("fixedGutter",!0,function(x,M){x.display.gutters.style.left=M?_v(x.display)+"px":"0",x.refresh()},!0),w("coverGutterNextToScrollbar",!1,function(x){return _u(x)},!0),w("scrollbarStyle","native",function(x){_b(x),_u(x),x.display.scrollbars.setScrollTop(x.doc.scrollTop),x.display.scrollbars.setScrollLeft(x.doc.scrollLeft)},!0),w("lineNumbers",!1,function(x,M){x.display.gutterSpecs=kv(x.options.gutters,M),$f(x)},!0),w("firstLineNumber",1,$f,!0),w("lineNumberFormatter",function(x){return x},$f,!0),w("showCursorWhenSelecting",!1,Bf,!0),w("resetSelectionOnContextMenu",!0),w("lineWiseCopyCut",!0),w("pasteLinesPerSelection",!0),w("selectionsMayTouch",!1),w("readOnly",!1,function(x,M){M=="nocursor"&&(xu(x),x.display.input.blur()),x.display.input.readOnlyChanged(M)}),w("screenReaderLabel",null,function(x,M){M=M===""?null:M,x.display.input.screenReaderLabelChanged(M)}),w("disableInput",!1,function(x,M){M||x.display.input.reset()},!0),w("dragDrop",!0,gP),w("allowDropFileTypes",null),w("cursorBlinkRate",530),w("cursorScrollMargin",0),w("cursorHeight",1,Bf,!0),w("singleCursorHeightPerLine",!0,Bf,!0),w("workTime",100),w("workDelay",100),w("flattenSpans",!0,Wf,!0),w("addModeClass",!1,Wf,!0),w("pollInterval",100),w("undoDepth",200,function(x,M){return x.doc.history.undoDepth=M}),w("historyEventDelay",1250),w("viewportMargin",10,function(x){return x.refresh()},!0),w("maxHighlightLength",1e4,Wf,!0),w("moveInputWithCursor",!0,function(x,M){M||x.display.input.resetPosition()}),w("tabindex",null,function(x,M){return x.display.input.getField().tabIndex=M||""}),w("autofocus",null),w("direction","ltr",function(x,M){return x.doc.setDirection(M)},!0),w("phrases",null)}function gP(u,d,w){var x=w&&w!=Lu;if(!d!=!x){var M=u.display.dragFunctions,F=d?K:te;F(u.display.scroller,"dragstart",M.start),F(u.display.scroller,"dragenter",M.enter),F(u.display.scroller,"dragover",M.over),F(u.display.scroller,"dragleave",M.leave),F(u.display.scroller,"drop",M.drop)}}function vP(u){u.options.lineWrapping?(Re(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(he(u.display.wrapper,"CodeMirror-wrap"),mu(u)),bv(u),ri(u),Ff(u),setTimeout(function(){return _u(u)},100)}function Ln(u,d){var w=this;if(!(this instanceof Ln))return new Ln(u,d);this.options=d=d?Ce(d):{},Ce(xS,d,!1);var x=d.value;typeof x=="string"?x=new ii(x,d.mode,null,d.lineSeparator,d.direction):d.mode&&(x.modeOption=d.mode),this.doc=x;var M=new Ln.inputStyles[d.inputStyle](this),F=this.display=new RI(u,x,M,d);F.wrapper.CodeMirror=this,yS(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),_b(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Pe,keySeq:null,specialChars:null},d.autofocus&&!N&&F.input.focus(),m&&v<11&&setTimeout(function(){return w.display.input.reset(!0)},20),yP(this),YI(),Ja(this),this.curOp.forceUpdate=!0,Ib(this,x),d.autofocus&&!N||this.hasFocus()?setTimeout(function(){w.hasFocus()&&!w.state.focused&&Ev(w)},20):xu(this);for(var W in Up)Up.hasOwnProperty(W)&&Up[W](this,d[W],Lu);Mb(this),d.finishInit&&d.finishInit(this);for(var Y=0;Y<jv.length;++Y)jv[Y](this);el(this),b&&d.lineWrapping&&getComputedStyle(F.lineDiv).textRendering=="optimizelegibility"&&(F.lineDiv.style.textRendering="auto")}Ln.defaults=xS,Ln.optionHandlers=Up;function yP(u){var d=u.display;K(d.scroller,"mousedown",vr(u,pS)),m&&v<11?K(d.scroller,"dblclick",vr(u,function(J){if(!ce(u,J)){var ie=Ya(u,J);if(!(!ie||Wv(u,J)||eo(u.display,J))){Ge(J);var me=u.findWordAt(ie);Pp(u.doc,me.anchor,me.head)}}})):K(d.scroller,"dblclick",function(J){return ce(u,J)||Ge(J)}),K(d.scroller,"contextmenu",function(J){return vS(u,J)}),K(d.input.getField(),"contextmenu",function(J){d.scroller.contains(J.target)||vS(u,J)});var w,x={end:0};function M(){d.activeTouch&&(w=setTimeout(function(){return d.activeTouch=null},1e3),x=d.activeTouch,x.end=+new Date)}function F(J){if(J.touches.length!=1)return!1;var ie=J.touches[0];return ie.radiusX<=1&&ie.radiusY<=1}function W(J,ie){if(ie.left==null)return!0;var me=ie.left-J.left,xe=ie.top-J.top;return me*me+xe*xe>20*20}K(d.scroller,"touchstart",function(J){if(!ce(u,J)&&!F(J)&&!Wv(u,J)){d.input.ensurePolled(),clearTimeout(w);var ie=+new Date;d.activeTouch={start:ie,moved:!1,prev:ie-x.end<=300?x:null},J.touches.length==1&&(d.activeTouch.left=J.touches[0].pageX,d.activeTouch.top=J.touches[0].pageY)}}),K(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),K(d.scroller,"touchend",function(J){var ie=d.activeTouch;if(ie&&!eo(d,J)&&ie.left!=null&&!ie.moved&&new Date-ie.start<300){var me=u.coordsChar(d.activeTouch,"page"),xe;!ie.prev||W(ie,ie.prev)?xe=new cn(me,me):!ie.prev.prev||W(ie,ie.prev.prev)?xe=u.findWordAt(me):xe=new cn(je(me.line,0),lt(u.doc,je(me.line+1,0))),u.setSelection(xe.anchor,xe.head),u.focus(),Ge(J)}M()}),K(d.scroller,"touchcancel",M),K(d.scroller,"scroll",function(){d.scroller.clientHeight&&(zf(u,d.scroller.scrollTop),Za(u,d.scroller.scrollLeft,!0),ue(u,"scroll",u))}),K(d.scroller,"mousewheel",function(J){return Ab(u,J)}),K(d.scroller,"DOMMouseScroll",function(J){return Ab(u,J)}),K(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(J){ce(u,J)||Mt(J)},over:function(J){ce(u,J)||(XI(u,J),Mt(J))},start:function(J){return qI(u,J)},drop:vr(u,jI),leave:function(J){ce(u,J)||tS(u)}};var Y=d.input.getField();K(Y,"keyup",function(J){return hS.call(u,J)}),K(Y,"keydown",vr(u,fS)),K(Y,"keypress",vr(u,dS)),K(Y,"focus",function(J){return Ev(u,J)}),K(Y,"blur",function(J){return xu(u,J)})}var jv=[];Ln.defineInitHook=function(u){return jv.push(u)};function ih(u,d,w,x){var M=u.doc,F;w==null&&(w="add"),w=="smart"&&(M.mode.indent?F=Do(u,d).state:w="prev");var W=u.options.tabSize,Y=et(M,d),J=_e(Y.text,null,W);Y.stateAfter&&(Y.stateAfter=null);var ie=Y.text.match(/^\s*/)[0],me;if(!x&&!/\S/.test(Y.text))me=0,w="not";else if(w=="smart"&&(me=M.mode.indent(F,Y.text.slice(ie.length),Y.text),me==ze||me>150)){if(!x)return;w="prev"}w=="prev"?d>M.first?me=_e(et(M,d-1).text,null,W):me=0:w=="add"?me=J+u.options.indentUnit:w=="subtract"?me=J-u.options.indentUnit:typeof w=="number"&&(me=J+w),me=Math.max(0,me);var xe="",Ee=0;if(u.options.indentWithTabs)for(var Se=Math.floor(me/W);Se;--Se)Ee+=W,xe+="	";if(Ee<me&&(xe+=qe(me-Ee)),xe!=ie)return Tu(M,xe,je(d,0),je(d,ie.length),"+input"),Y.stateAfter=null,!0;for(var Be=0;Be<M.sel.ranges.length;Be++){var Ve=M.sel.ranges[Be];if(Ve.head.line==d&&Ve.head.ch<ie.length){var Ze=je(d,ie.length);Uv(M,Be,new cn(Ze,Ze));break}}}var ds=null;function zp(u){ds=u}function qv(u,d,w,x,M){var F=u.doc;u.display.shift=!1,x||(x=F.sel);var W=+new Date-200,Y=M=="paste"||u.state.pasteIncoming>W,J=de(d),ie=null;if(Y&&x.ranges.length>1)if(ds&&ds.text.join(`
`)==d){if(x.ranges.length%ds.text.length==0){ie=[];for(var me=0;me<ds.text.length;me++)ie.push(F.splitLines(ds.text[me]))}}else J.length==x.ranges.length&&u.options.pasteLinesPerSelection&&(ie=oe(J,function(nt){return[nt]}));for(var xe=u.curOp.updateInput,Ee=x.ranges.length-1;Ee>=0;Ee--){var Se=x.ranges[Ee],Be=Se.from(),Ve=Se.to();Se.empty()&&(w&&w>0?Be=je(Be.line,Be.ch-w):u.state.overwrite&&!Y?Ve=je(Ve.line,Math.min(et(F,Ve.line).text.length,Ve.ch+De(J).length)):Y&&ds&&ds.lineWise&&ds.text.join(`
`)==J.join(`
`)&&(Be=Ve=je(Be.line,0)));var Ze={from:Be,to:Ve,text:ie?ie[Ee%ie.length]:J,origin:M||(Y?"paste":u.state.cutIncoming>W?"cut":"+input")};Mu(u.doc,Ze),Qn(u,"inputRead",u,Ze)}d&&!Y&&_S(u,d),wu(u),u.curOp.updateInput<2&&(u.curOp.updateInput=xe),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function wS(u,d){var w=u.clipboardData&&u.clipboardData.getData("Text");if(w)return u.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&gi(d,function(){return qv(d,w,0,null,"paste")}),!0}function _S(u,d){if(!(!u.options.electricChars||!u.options.smartIndent))for(var w=u.doc.sel,x=w.ranges.length-1;x>=0;x--){var M=w.ranges[x];if(!(M.head.ch>100||x&&w.ranges[x-1].head.line==M.head.line)){var F=u.getModeAt(M.head),W=!1;if(F.electricChars){for(var Y=0;Y<F.electricChars.length;Y++)if(d.indexOf(F.electricChars.charAt(Y))>-1){W=ih(u,M.head.line,"smart");break}}else F.electricInput&&F.electricInput.test(et(u.doc,M.head.line).text.slice(0,M.head.ch))&&(W=ih(u,M.head.line,"smart"));W&&Qn(u,"electricInput",u,M.head.line)}}}function bS(u){for(var d=[],w=[],x=0;x<u.doc.sel.ranges.length;x++){var M=u.doc.sel.ranges[x].head.line,F={anchor:je(M,0),head:je(M+1,0)};w.push(F),d.push(u.getRange(F.anchor,F.head))}return{text:d,ranges:w}}function SS(u,d,w,x){u.setAttribute("autocorrect",w?"":"off"),u.setAttribute("autocapitalize",x?"":"off"),u.setAttribute("spellcheck",!!d)}function MS(){var u=_("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=_("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?u.style.width="1000px":u.setAttribute("wrap","off"),k&&(u.style.border="1px solid black"),SS(u),d}function xP(u){var d=u.optionHandlers,w=u.helpers={};u.prototype={constructor:u,focus:function(){window.focus(),this.display.input.focus()},setOption:function(x,M){var F=this.options,W=F[x];F[x]==M&&x!="mode"||(F[x]=M,d.hasOwnProperty(x)&&vr(this,d[x])(this,M,W),ue(this,"optionChange",this,x))},getOption:function(x){return this.options[x]},getDoc:function(){return this.doc},addKeyMap:function(x,M){this.state.keyMaps[M?"push":"unshift"](Fp(x))},removeKeyMap:function(x){for(var M=this.state.keyMaps,F=0;F<M.length;++F)if(M[F]==x||M[F].name==x)return M.splice(F,1),!0},addOverlay:Wr(function(x,M){var F=x.token?x:u.getMode(this.options,x);if(F.startState)throw new Error("Overlays may not be stateful.");vt(this.state.overlays,{mode:F,modeSpec:x,opaque:M&&M.opaque,priority:M&&M.priority||0},function(W){return W.priority}),this.state.modeGen++,ri(this)}),removeOverlay:Wr(function(x){for(var M=this.state.overlays,F=0;F<M.length;++F){var W=M[F].modeSpec;if(W==x||typeof x=="string"&&W.name==x){M.splice(F,1),this.state.modeGen++,ri(this);return}}}),indentLine:Wr(function(x,M,F){typeof M!="string"&&typeof M!="number"&&(M==null?M=this.options.smartIndent?"smart":"prev":M=M?"add":"subtract"),ei(this.doc,x)&&ih(this,x,M,F)}),indentSelection:Wr(function(x){for(var M=this.doc.sel.ranges,F=-1,W=0;W<M.length;W++){var Y=M[W];if(Y.empty())Y.head.line>F&&(ih(this,Y.head.line,x,!0),F=Y.head.line,W==this.doc.sel.primIndex&&wu(this));else{var J=Y.from(),ie=Y.to(),me=Math.max(F,J.line);F=Math.min(this.lastLine(),ie.line-(ie.ch?0:1))+1;for(var xe=me;xe<F;++xe)ih(this,xe,x);var Ee=this.doc.sel.ranges;J.ch==0&&M.length==Ee.length&&Ee[W].from().ch>0&&Uv(this.doc,W,new cn(J,Ee[W].to()),He)}}}),getTokenAt:function(x,M){return pp(this,x,M)},getLineTokens:function(x,M){return pp(this,je(x),M,!0)},getTokenTypeAt:function(x){x=lt(this.doc,x);var M=fp(this,et(this.doc,x.line)),F=0,W=(M.length-1)/2,Y=x.ch,J;if(Y==0)J=M[2];else for(;;){var ie=F+W>>1;if((ie?M[ie*2-1]:0)>=Y)W=ie;else if(M[ie*2+1]<Y)F=ie+1;else{J=M[ie*2+2];break}}var me=J?J.indexOf("overlay "):-1;return me<0?J:me==0?null:J.slice(0,me-1)},getModeAt:function(x){var M=this.doc.mode;return M.innerMode?u.innerMode(M,this.getTokenAt(x).state).mode:M},getHelper:function(x,M){return this.getHelpers(x,M)[0]},getHelpers:function(x,M){var F=[];if(!w.hasOwnProperty(M))return F;var W=w[M],Y=this.getModeAt(x);if(typeof Y[M]=="string")W[Y[M]]&&F.push(W[Y[M]]);else if(Y[M])for(var J=0;J<Y[M].length;J++){var ie=W[Y[M][J]];ie&&F.push(ie)}else Y.helperType&&W[Y.helperType]?F.push(W[Y.helperType]):W[Y.name]&&F.push(W[Y.name]);for(var me=0;me<W._global.length;me++){var xe=W._global[me];xe.pred(Y,this)&&Te(F,xe.val)==-1&&F.push(xe.val)}return F},getStateAfter:function(x,M){var F=this.doc;return x=Qt(F,x==null?F.first+F.size-1:x),Do(this,x+1,M).state},cursorCoords:function(x,M){var F,W=this.doc.sel.primary();return x==null?F=W.head:typeof x=="object"?F=lt(this.doc,x):F=x?W.from():W.to(),fs(this,F,M||"page")},charCoords:function(x,M){return bp(this,lt(this.doc,x),M||"page")},coordsChar:function(x,M){return x=lb(this,x,M||"page"),yv(this,x.left,x.top)},lineAtHeight:function(x,M){return x=lb(this,{top:x,left:0},M||"page").top,gn(this.doc,x+this.display.viewOffset)},heightAtLine:function(x,M,F){var W=!1,Y;if(typeof x=="number"){var J=this.doc.first+this.doc.size-1;x<this.doc.first?x=this.doc.first:x>J&&(x=J,W=!0),Y=et(this.doc,x)}else Y=x;return _p(this,Y,{top:0,left:0},M||"page",F||W).top+(W?this.doc.height-Sr(Y):0)},defaultTextHeight:function(){return vu(this.display)},defaultCharWidth:function(){return yu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(x,M,F,W,Y){var J=this.display;x=fs(this,lt(this.doc,x));var ie=x.bottom,me=x.left;if(M.style.position="absolute",M.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(M),J.sizer.appendChild(M),W=="over")ie=x.top;else if(W=="above"||W=="near"){var xe=Math.max(J.wrapper.clientHeight,this.doc.height),Ee=Math.max(J.sizer.clientWidth,J.lineSpace.clientWidth);(W=="above"||x.bottom+M.offsetHeight>xe)&&x.top>M.offsetHeight?ie=x.top-M.offsetHeight:x.bottom+M.offsetHeight<=xe&&(ie=x.bottom),me+M.offsetWidth>Ee&&(me=Ee-M.offsetWidth)}M.style.top=ie+"px",M.style.left=M.style.right="",Y=="right"?(me=J.sizer.clientWidth-M.offsetWidth,M.style.right="0px"):(Y=="left"?me=0:Y=="middle"&&(me=(J.sizer.clientWidth-M.offsetWidth)/2),M.style.left=me+"px"),F&&gI(this,{left:me,top:ie,right:me+M.offsetWidth,bottom:ie+M.offsetHeight})},triggerOnKeyDown:Wr(fS),triggerOnKeyPress:Wr(dS),triggerOnKeyUp:hS,triggerOnMouseDown:Wr(pS),execCommand:function(x){if(eh.hasOwnProperty(x))return eh[x].call(null,this)},triggerElectric:Wr(function(x){_S(this,x)}),findPosH:function(x,M,F,W){var Y=1;M<0&&(Y=-1,M=-M);for(var J=lt(this.doc,x),ie=0;ie<M&&(J=Xv(this.doc,J,Y,F,W),!J.hitSide);++ie);return J},moveH:Wr(function(x,M){var F=this;this.extendSelectionsBy(function(W){return F.display.shift||F.doc.extend||W.empty()?Xv(F.doc,W.head,x,M,F.options.rtlMoveVisually):x<0?W.from():W.to()},$e)}),deleteH:Wr(function(x,M){var F=this.doc.sel,W=this.doc;F.somethingSelected()?W.replaceSelection("",null,"+delete"):Cu(this,function(Y){var J=Xv(W,Y.head,x,M,!1);return x<0?{from:J,to:Y.head}:{from:Y.head,to:J}})}),findPosV:function(x,M,F,W){var Y=1,J=W;M<0&&(Y=-1,M=-M);for(var ie=lt(this.doc,x),me=0;me<M;++me){var xe=fs(this,ie,"div");if(J==null?J=xe.left:xe.left=J,ie=TS(this,xe,Y,F),ie.hitSide)break}return ie},moveV:Wr(function(x,M){var F=this,W=this.doc,Y=[],J=!this.display.shift&&!W.extend&&W.sel.somethingSelected();if(W.extendSelectionsBy(function(me){if(J)return x<0?me.from():me.to();var xe=fs(F,me.head,"div");me.goalColumn!=null&&(xe.left=me.goalColumn),Y.push(xe.left);var Ee=TS(F,xe,x,M);return M=="page"&&me==W.sel.primary()&&Cv(F,bp(F,Ee,"div").top-xe.top),Ee},$e),Y.length)for(var ie=0;ie<W.sel.ranges.length;ie++)W.sel.ranges[ie].goalColumn=Y[ie]}),findWordAt:function(x){var M=this.doc,F=et(M,x.line).text,W=x.ch,Y=x.ch;if(F){var J=this.getHelper(x,"wordChars");(x.sticky=="before"||Y==F.length)&&W?--W:++Y;for(var ie=F.charAt(W),me=n(ie,J)?function(xe){return n(xe,J)}:/\s/.test(ie)?function(xe){return/\s/.test(xe)}:function(xe){return!/\s/.test(xe)&&!n(xe)};W>0&&me(F.charAt(W-1));)--W;for(;Y<F.length&&me(F.charAt(Y));)++Y}return new cn(je(x.line,W),je(x.line,Y))},toggleOverwrite:function(x){x!=null&&x==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Re(this.display.cursorDiv,"CodeMirror-overwrite"):he(this.display.cursorDiv,"CodeMirror-overwrite"),ue(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ye()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Wr(function(x,M){Uf(this,x,M)}),getScrollInfo:function(){var x=this.display.scroller;return{left:x.scrollLeft,top:x.scrollTop,height:x.scrollHeight-Cs(this)-this.display.barHeight,width:x.scrollWidth-Cs(this)-this.display.barWidth,clientHeight:pv(this),clientWidth:qa(this)}},scrollIntoView:Wr(function(x,M){x==null?(x={from:this.doc.sel.primary().head,to:null},M==null&&(M=this.options.cursorScrollMargin)):typeof x=="number"?x={from:je(x,0),to:null}:x.from==null&&(x={from:x,to:null}),x.to||(x.to=x.from),x.margin=M||0,x.from.line!=null?vI(this,x):vb(this,x.from,x.to,x.margin)}),setSize:Wr(function(x,M){var F=this,W=function(J){return typeof J=="number"||/^\d+$/.test(String(J))?J+"px":J};x!=null&&(this.display.wrapper.style.width=W(x)),M!=null&&(this.display.wrapper.style.height=W(M)),this.options.lineWrapping&&sb(this);var Y=this.display.viewFrom;this.doc.iter(Y,this.display.viewTo,function(J){if(J.widgets){for(var ie=0;ie<J.widgets.length;ie++)if(J.widgets[ie].noHScroll){Uo(F,Y,"widget");break}}++Y}),this.curOp.forceUpdate=!0,ue(this,"refresh",this)}),operation:function(x){return gi(this,x)},startOperation:function(){return Ja(this)},endOperation:function(){return el(this)},refresh:Wr(function(){var x=this.display.cachedTextHeight;ri(this),this.curOp.forceUpdate=!0,Ff(this),Uf(this,this.doc.scrollLeft,this.doc.scrollTop),Iv(this.display),(x==null||Math.abs(x-vu(this.display))>.5||this.options.lineWrapping)&&bv(this),ue(this,"refresh",this)}),swapDoc:Wr(function(x){var M=this.doc;return M.cm=null,this.state.selectingText&&this.state.selectingText(),Ib(this,x),Ff(this),this.display.input.reset(),Uf(this,x.scrollLeft,x.scrollTop),this.curOp.forceScroll=!0,Qn(this,"swapDoc",this,M),M}),phrase:function(x){var M=this.options.phrases;return M&&Object.prototype.hasOwnProperty.call(M,x)?M[x]:x},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xe(u),u.registerHelper=function(x,M,F){w.hasOwnProperty(x)||(w[x]=u[x]={_global:[]}),w[x][M]=F},u.registerGlobalHelper=function(x,M,F,W){u.registerHelper(x,M,W),w[x]._global.push({pred:F,val:W})}}function Xv(u,d,w,x,M){var F=d,W=w,Y=et(u,d.line),J=M&&u.direction=="rtl"?-w:w;function ie(){var at=d.line+J;return at<u.first||at>=u.first+u.size?!1:(d=new je(at,d.ch,d.sticky),Y=et(u,at))}function me(at){var rt;if(x=="codepoint"){var ht=Y.text.charCodeAt(d.ch+(w>0?0:-1));if(isNaN(ht))rt=null;else{var Ct=w>0?ht>=55296&&ht<56320:ht>=56320&&ht<57343;rt=new je(d.line,Math.max(0,Math.min(Y.text.length,d.ch+w*(Ct?2:1))),-w)}}else M?rt=eP(u.cm,Y,d,w):rt=Hv(Y,d,w);if(rt==null)if(!at&&ie())d=Gv(M,u.cm,Y,d.line,J);else return!1;else d=rt;return!0}if(x=="char"||x=="codepoint")me();else if(x=="column")me(!0);else if(x=="word"||x=="group")for(var xe=null,Ee=x=="group",Se=u.cm&&u.cm.getHelper(d,"wordChars"),Be=!0;!(w<0&&!me(!Be));Be=!1){var Ve=Y.text.charAt(d.ch)||`
`,Ze=n(Ve,Se)?"w":Ee&&Ve==`
`?"n":!Ee||/\s/.test(Ve)?null:"p";if(Ee&&!Be&&!Ze&&(Ze="s"),xe&&xe!=Ze){w<0&&(w=1,me(),d.sticky="after");break}if(Ze&&(xe=Ze),w>0&&!me(!Be))break}var nt=Op(u,d,F,W,!0);return we(F,nt)&&(nt.hitSide=!0),nt}function TS(u,d,w,x){var M=u.doc,F=d.left,W;if(x=="page"){var Y=Math.min(u.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),J=Math.max(Y-.5*vu(u.display),3);W=(w>0?d.bottom:d.top)+w*J}else x=="line"&&(W=w>0?d.bottom+3:d.top-3);for(var ie;ie=yv(u,F,W),!!ie.outside;){if(w<0?W<=0:W>=M.height){ie.hitSide=!0;break}W+=w*5}return ie}var dn=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Pe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};dn.prototype.init=function(u){var d=this,w=this,x=w.cm,M=w.div=u.lineDiv;M.contentEditable=!0,SS(M,x.options.spellcheck,x.options.autocorrect,x.options.autocapitalize);function F(Y){for(var J=Y.target;J;J=J.parentNode){if(J==M)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(J.className))break}return!1}K(M,"paste",function(Y){!F(Y)||ce(x,Y)||wS(Y,x)||v<=11&&setTimeout(vr(x,function(){return d.updateFromDOM()}),20)}),K(M,"compositionstart",function(Y){d.composing={data:Y.data,done:!1}}),K(M,"compositionupdate",function(Y){d.composing||(d.composing={data:Y.data,done:!1})}),K(M,"compositionend",function(Y){d.composing&&(Y.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),K(M,"touchstart",function(){return w.forceCompositionEnd()}),K(M,"input",function(){d.composing||d.readFromDOMSoon()});function W(Y){if(!(!F(Y)||ce(x,Y))){if(x.somethingSelected())zp({lineWise:!1,text:x.getSelections()}),Y.type=="cut"&&x.replaceSelection("",null,"cut");else if(x.options.lineWiseCopyCut){var J=bS(x);zp({lineWise:!0,text:J.text}),Y.type=="cut"&&x.operation(function(){x.setSelections(J.ranges,0,He),x.replaceSelection("",null,"cut")})}else return;if(Y.clipboardData){Y.clipboardData.clearData();var ie=ds.text.join(`
`);if(Y.clipboardData.setData("Text",ie),Y.clipboardData.getData("Text")==ie){Y.preventDefault();return}}var me=MS(),xe=me.firstChild;x.display.lineSpace.insertBefore(me,x.display.lineSpace.firstChild),xe.value=ds.text.join(`
`);var Ee=ye();pe(xe),setTimeout(function(){x.display.lineSpace.removeChild(me),Ee.focus(),Ee==M&&w.showPrimarySelection()},50)}}K(M,"copy",W),K(M,"cut",W)},dn.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},dn.prototype.prepareSelection=function(){var u=pb(this.cm,!1);return u.focus=ye()==this.div,u},dn.prototype.showSelection=function(u,d){!u||!this.cm.display.view.length||((u.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(u))},dn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},dn.prototype.showPrimarySelection=function(){var u=this.getSelection(),d=this.cm,w=d.doc.sel.primary(),x=w.from(),M=w.to();if(d.display.viewTo==d.display.viewFrom||x.line>=d.display.viewTo||M.line<d.display.viewFrom){u.removeAllRanges();return}var F=Hp(d,u.anchorNode,u.anchorOffset),W=Hp(d,u.focusNode,u.focusOffset);if(!(F&&!F.bad&&W&&!W.bad&&se(It(F,W),x)==0&&se(Ye(F,W),M)==0)){var Y=d.display.view,J=x.line>=d.display.viewFrom&&ES(d,x)||{node:Y[0].measure.map[2],offset:0},ie=M.line<d.display.viewTo&&ES(d,M);if(!ie){var me=Y[Y.length-1].measure,xe=me.maps?me.maps[me.maps.length-1]:me.map;ie={node:xe[xe.length-1],offset:xe[xe.length-2]-xe[xe.length-3]}}if(!J||!ie){u.removeAllRanges();return}var Ee=u.rangeCount&&u.getRangeAt(0),Se;try{Se=Z(J.node,J.offset,ie.offset,ie.node)}catch{}Se&&(!o&&d.state.focused?(u.collapse(J.node,J.offset),Se.collapsed||(u.removeAllRanges(),u.addRange(Se))):(u.removeAllRanges(),u.addRange(Se)),Ee&&u.anchorNode==null?u.addRange(Ee):o&&this.startGracePeriod()),this.rememberSelection()}},dn.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},dn.prototype.showMultipleSelections=function(u){ee(this.cm.display.cursorDiv,u.cursors),ee(this.cm.display.selectionDiv,u.selection)},dn.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},dn.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var d=u.getRangeAt(0).commonAncestorContainer;return E(this.div,d)},dn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ye()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},dn.prototype.blur=function(){this.div.blur()},dn.prototype.getField=function(){return this.div},dn.prototype.supportsTouch=function(){return!0},dn.prototype.receivedFocus=function(){var u=this,d=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):gi(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function w(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,w))}this.polling.set(this.cm.options.pollInterval,w)},dn.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},dn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),d=this.cm;if(A&&L&&this.cm.display.gutterSpecs.length&&wP(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var w=Hp(d,u.anchorNode,u.anchorOffset),x=Hp(d,u.focusNode,u.focusOffset);w&&x&&gi(d,function(){Pr(d.doc,Ho(w,x),He),(w.bad||x.bad)&&(d.curOp.selectionChanged=!0)})}}},dn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,d=u.display,w=u.doc.sel.primary(),x=w.from(),M=w.to();if(x.ch==0&&x.line>u.firstLine()&&(x=je(x.line-1,et(u.doc,x.line-1).length)),M.ch==et(u.doc,M.line).text.length&&M.line<u.lastLine()&&(M=je(M.line+1,0)),x.line<d.viewFrom||M.line>d.viewTo-1)return!1;var F,W,Y;x.line==d.viewFrom||(F=Ka(u,x.line))==0?(W=Gt(d.view[0].line),Y=d.view[0].node):(W=Gt(d.view[F].line),Y=d.view[F-1].node.nextSibling);var J=Ka(u,M.line),ie,me;if(J==d.view.length-1?(ie=d.viewTo-1,me=d.lineDiv.lastChild):(ie=Gt(d.view[J+1].line)-1,me=d.view[J+1].node.previousSibling),!Y)return!1;for(var xe=u.doc.splitLines(_P(u,Y,me,W,ie)),Ee=Hn(u.doc,je(W,0),je(ie,et(u.doc,ie).text.length));xe.length>1&&Ee.length>1;)if(De(xe)==De(Ee))xe.pop(),Ee.pop(),ie--;else if(xe[0]==Ee[0])xe.shift(),Ee.shift(),W++;else break;for(var Se=0,Be=0,Ve=xe[0],Ze=Ee[0],nt=Math.min(Ve.length,Ze.length);Se<nt&&Ve.charCodeAt(Se)==Ze.charCodeAt(Se);)++Se;for(var at=De(xe),rt=De(Ee),ht=Math.min(at.length-(xe.length==1?Se:0),rt.length-(Ee.length==1?Se:0));Be<ht&&at.charCodeAt(at.length-Be-1)==rt.charCodeAt(rt.length-Be-1);)++Be;if(xe.length==1&&Ee.length==1&&W==x.line)for(;Se&&Se>x.ch&&at.charCodeAt(at.length-Be-1)==rt.charCodeAt(rt.length-Be-1);)Se--,Be++;xe[xe.length-1]=at.slice(0,at.length-Be).replace(/^\u200b+/,""),xe[0]=xe[0].slice(Se).replace(/\u200b+$/,"");var Ct=je(W,Se),Et=je(ie,Ee.length?De(Ee).length-Be:0);if(xe.length>1||xe[0]||se(Ct,Et))return Tu(u.doc,xe,Ct,Et,"+input"),!0},dn.prototype.ensurePolled=function(){this.forceCompositionEnd()},dn.prototype.reset=function(){this.forceCompositionEnd()},dn.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},dn.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},dn.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&gi(this.cm,function(){return ri(u.cm)})},dn.prototype.setUneditable=function(u){u.contentEditable="false"},dn.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||vr(this.cm,qv)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},dn.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},dn.prototype.onContextMenu=function(){},dn.prototype.resetPosition=function(){},dn.prototype.needsContentAttribute=!0;function ES(u,d){var w=mv(u,d.line);if(!w||w.hidden)return null;var x=et(u.doc,d.line),M=eb(w,x,d.line),F=H(x,u.doc.direction),W="left";if(F){var Y=R(F,d.ch);W=Y%2?"right":"left"}var J=rb(M.map,d.ch,W);return J.offset=J.collapse=="right"?J.end:J.start,J}function wP(u){for(var d=u;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Ru(u,d){return d&&(u.bad=!0),u}function _P(u,d,w,x,M){var F="",W=!1,Y=u.doc.lineSeparator(),J=!1;function ie(Se){return function(Be){return Be.id==Se}}function me(){W&&(F+=Y,J&&(F+=Y),W=J=!1)}function xe(Se){Se&&(me(),F+=Se)}function Ee(Se){if(Se.nodeType==1){var Be=Se.getAttribute("cm-text");if(Be){xe(Be);return}var Ve=Se.getAttribute("cm-marker"),Ze;if(Ve){var nt=u.findMarks(je(x,0),je(M+1,0),ie(+Ve));nt.length&&(Ze=nt[0].find(0))&&xe(Hn(u.doc,Ze.from,Ze.to).join(Y));return}if(Se.getAttribute("contenteditable")=="false")return;var at=/^(pre|div|p|li|table|br)$/i.test(Se.nodeName);if(!/^br$/i.test(Se.nodeName)&&Se.textContent.length==0)return;at&&me();for(var rt=0;rt<Se.childNodes.length;rt++)Ee(Se.childNodes[rt]);/^(pre|p)$/i.test(Se.nodeName)&&(J=!0),at&&(W=!0)}else Se.nodeType==3&&xe(Se.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ee(d),d!=w;)d=d.nextSibling,J=!1;return F}function Hp(u,d,w){var x;if(d==u.display.lineDiv){if(x=u.display.lineDiv.childNodes[w],!x)return Ru(u.clipPos(je(u.display.viewTo-1)),!0);d=null,w=0}else for(x=d;;x=x.parentNode){if(!x||x==u.display.lineDiv)return null;if(x.parentNode&&x.parentNode==u.display.lineDiv)break}for(var M=0;M<u.display.view.length;M++){var F=u.display.view[M];if(F.node==x)return bP(F,d,w)}}function bP(u,d,w){var x=u.text.firstChild,M=!1;if(!d||!E(x,d))return Ru(je(Gt(u.line),0),!0);if(d==x&&(M=!0,d=x.childNodes[w],w=0,!d)){var F=u.rest?De(u.rest):u.line;return Ru(je(Gt(F),F.text.length),M)}var W=d.nodeType==3?d:null,Y=d;for(!W&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(W=d.firstChild,w&&(w=W.nodeValue.length));Y.parentNode!=x;)Y=Y.parentNode;var J=u.measure,ie=J.maps;function me(Ze,nt,at){for(var rt=-1;rt<(ie?ie.length:0);rt++)for(var ht=rt<0?J.map:ie[rt],Ct=0;Ct<ht.length;Ct+=3){var Et=ht[Ct+2];if(Et==Ze||Et==nt){var qt=Gt(rt<0?u.line:u.rest[rt]),Mn=ht[Ct]+at;return(at<0||Et!=Ze)&&(Mn=ht[Ct+(at?1:0)]),je(qt,Mn)}}}var xe=me(W,Y,w);if(xe)return Ru(xe,M);for(var Ee=Y.nextSibling,Se=W?W.nodeValue.length-w:0;Ee;Ee=Ee.nextSibling){if(xe=me(Ee,Ee.firstChild,0),xe)return Ru(je(xe.line,xe.ch-Se),M);Se+=Ee.textContent.length}for(var Be=Y.previousSibling,Ve=w;Be;Be=Be.previousSibling){if(xe=me(Be,Be.firstChild,-1),xe)return Ru(je(xe.line,xe.ch+Ve),M);Ve+=Be.textContent.length}}var jn=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new Pe,this.hasSelection=!1,this.composing=null};jn.prototype.init=function(u){var d=this,w=this,x=this.cm;this.createField(u);var M=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),k&&(M.style.width="0px"),K(M,"input",function(){m&&v>=9&&d.hasSelection&&(d.hasSelection=null),w.poll()}),K(M,"paste",function(W){ce(x,W)||wS(W,x)||(x.state.pasteIncoming=+new Date,w.fastPoll())});function F(W){if(!ce(x,W)){if(x.somethingSelected())zp({lineWise:!1,text:x.getSelections()});else if(x.options.lineWiseCopyCut){var Y=bS(x);zp({lineWise:!0,text:Y.text}),W.type=="cut"?x.setSelections(Y.ranges,null,He):(w.prevInput="",M.value=Y.text.join(`
`),pe(M))}else return;W.type=="cut"&&(x.state.cutIncoming=+new Date)}}K(M,"cut",F),K(M,"copy",F),K(u.scroller,"paste",function(W){if(!(eo(u,W)||ce(x,W))){if(!M.dispatchEvent){x.state.pasteIncoming=+new Date,w.focus();return}var Y=new Event("paste");Y.clipboardData=W.clipboardData,M.dispatchEvent(Y)}}),K(u.lineSpace,"selectstart",function(W){eo(u,W)||Ge(W)}),K(M,"compositionstart",function(){var W=x.getCursor("from");w.composing&&w.composing.range.clear(),w.composing={start:W,range:x.markText(W,x.getCursor("to"),{className:"CodeMirror-composing"})}}),K(M,"compositionend",function(){w.composing&&(w.poll(),w.composing.range.clear(),w.composing=null)})},jn.prototype.createField=function(u){this.wrapper=MS(),this.textarea=this.wrapper.firstChild},jn.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},jn.prototype.prepareSelection=function(){var u=this.cm,d=u.display,w=u.doc,x=pb(u);if(u.options.moveInputWithCursor){var M=fs(u,w.sel.primary().head,"div"),F=d.wrapper.getBoundingClientRect(),W=d.lineDiv.getBoundingClientRect();x.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,M.top+W.top-F.top)),x.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,M.left+W.left-F.left))}return x},jn.prototype.showSelection=function(u){var d=this.cm,w=d.display;ee(w.cursorDiv,u.cursors),ee(w.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},jn.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing)){var d=this.cm;if(d.somethingSelected()){this.prevInput="";var w=d.getSelection();this.textarea.value=w,d.state.focused&&pe(this.textarea),m&&v>=9&&(this.hasSelection=w)}else u||(this.prevInput=this.textarea.value="",m&&v>=9&&(this.hasSelection=null))}},jn.prototype.getField=function(){return this.textarea},jn.prototype.supportsTouch=function(){return!1},jn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!N||ye()!=this.textarea))try{this.textarea.focus()}catch{}},jn.prototype.blur=function(){this.textarea.blur()},jn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},jn.prototype.receivedFocus=function(){this.slowPoll()},jn.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},jn.prototype.fastPoll=function(){var u=!1,d=this;d.pollingFast=!0;function w(){var x=d.poll();!x&&!u?(u=!0,d.polling.set(60,w)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,w)},jn.prototype.poll=function(){var u=this,d=this.cm,w=this.textarea,x=this.prevInput;if(this.contextMenuPending||!d.state.focused||Ae(w)&&!x&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var M=w.value;if(M==x&&!d.somethingSelected())return!1;if(m&&v>=9&&this.hasSelection===M||I&&/[\uf700-\uf7ff]/.test(M))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var F=M.charCodeAt(0);if(F==8203&&!x&&(x="\u200B"),F==8666)return this.reset(),this.cm.execCommand("undo")}for(var W=0,Y=Math.min(x.length,M.length);W<Y&&x.charCodeAt(W)==M.charCodeAt(W);)++W;return gi(d,function(){qv(d,M.slice(W),x.length-W,null,u.composing?"*compose":null),M.length>1e3||M.indexOf(`
`)>-1?w.value=u.prevInput="":u.prevInput=M,u.composing&&(u.composing.range.clear(),u.composing.range=d.markText(u.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},jn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},jn.prototype.onKeyPress=function(){m&&v>=9&&(this.hasSelection=null),this.fastPoll()},jn.prototype.onContextMenu=function(u){var d=this,w=d.cm,x=w.display,M=d.textarea;d.contextMenuPending&&d.contextMenuPending();var F=Ya(w,u),W=x.scroller.scrollTop;if(!F||P)return;var Y=w.options.resetSelectionOnContextMenu;Y&&w.doc.sel.contains(F)==-1&&vr(w,Pr)(w.doc,Ho(F),He);var J=M.style.cssText,ie=d.wrapper.style.cssText,me=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",M.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-me.top-5)+"px; left: "+(u.clientX-me.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var xe;b&&(xe=window.scrollY),x.input.focus(),b&&window.scrollTo(null,xe),x.input.reset(),w.somethingSelected()||(M.value=d.prevInput=" "),d.contextMenuPending=Se,x.selForContextMenu=w.doc.sel,clearTimeout(x.detectingSelectAll);function Ee(){if(M.selectionStart!=null){var Ve=w.somethingSelected(),Ze="\u200B"+(Ve?M.value:"");M.value="\u21DA",M.value=Ze,d.prevInput=Ve?"":"\u200B",M.selectionStart=1,M.selectionEnd=Ze.length,x.selForContextMenu=w.doc.sel}}function Se(){if(d.contextMenuPending==Se&&(d.contextMenuPending=!1,d.wrapper.style.cssText=ie,M.style.cssText=J,m&&v<9&&x.scrollbars.setScrollTop(x.scroller.scrollTop=W),M.selectionStart!=null)){(!m||m&&v<9)&&Ee();var Ve=0,Ze=function(){x.selForContextMenu==w.doc.sel&&M.selectionStart==0&&M.selectionEnd>0&&d.prevInput=="\u200B"?vr(w,$b)(w):Ve++<10?x.detectingSelectAll=setTimeout(Ze,500):(x.selForContextMenu=null,x.input.reset())};x.detectingSelectAll=setTimeout(Ze,200)}}if(m&&v>=9&&Ee(),ae){Mt(u);var Be=function(){te(window,"mouseup",Be),setTimeout(Se,20)};K(window,"mouseup",Be)}else setTimeout(Se,50)},jn.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},jn.prototype.setUneditable=function(){},jn.prototype.needsContentAttribute=!1;function SP(u,d){if(d=d?Ce(d):{},d.value=u.value,!d.tabindex&&u.tabIndex&&(d.tabindex=u.tabIndex),!d.placeholder&&u.placeholder&&(d.placeholder=u.placeholder),d.autofocus==null){var w=ye();d.autofocus=w==u||u.getAttribute("autofocus")!=null&&w==document.body}function x(){u.value=Y.getValue()}var M;if(u.form&&(K(u.form,"submit",x),!d.leaveSubmitMethodAlone)){var F=u.form;M=F.submit;try{var W=F.submit=function(){x(),F.submit=M,F.submit(),F.submit=W}}catch{}}d.finishInit=function(J){J.save=x,J.getTextArea=function(){return u},J.toTextArea=function(){J.toTextArea=isNaN,x(),u.parentNode.removeChild(J.getWrapperElement()),u.style.display="",u.form&&(te(u.form,"submit",x),!d.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=M))}},u.style.display="none";var Y=Ln(function(J){return u.parentNode.insertBefore(J,u.nextSibling)},d);return Y}function MP(u){u.off=te,u.on=K,u.wheelEventPixels=II,u.Doc=ii,u.splitLines=de,u.countColumn=_e,u.findColumn=Le,u.isWordChar=U,u.Pass=ze,u.signal=ue,u.Line=Js,u.changeEnd=Go,u.scrollbarModel=wb,u.Pos=je,u.cmpPos=se,u.modes=yt,u.mimeModes=wt,u.resolveMode=jt,u.getMode=Nt,u.modeExtensions=Dt,u.extendMode=nn,u.copyState=zn,u.startState=Yt,u.innerMode=pi,u.commands=eh,u.keyMap=no,u.keyName=oS,u.isModifierKey=iS,u.lookupKey=Au,u.normalizeKeyMap=JI,u.StringStream=rn,u.SharedTextMarker=Zf,u.TextMarker=$o,u.LineWidget=Kf,u.e_preventDefault=Ge,u.e_stopPropagation=St,u.e_stop=Mt,u.addClass=Re,u.contains=E,u.rmClass=he,u.keyNames=Wo}mP(Ln),xP(Ln);var TP="iter insert remove copy getEditor constructor".split(" ");for(var Gp in ii.prototype)ii.prototype.hasOwnProperty(Gp)&&Te(TP,Gp)<0&&(Ln.prototype[Gp]=function(u){return function(){return u.apply(this.doc,arguments)}}(ii.prototype[Gp]));return Xe(ii),Ln.inputStyles={textarea:jn,contenteditable:dn},Ln.defineMode=function(u){!Ln.defaults.mode&&u!="null"&&(Ln.defaults.mode=u),Lt.apply(this,arguments)},Ln.defineMIME=xt,Ln.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),Ln.defineMIME("text/plain","null"),Ln.defineExtension=function(u,d){Ln.prototype[u]=d},Ln.defineDocExtension=function(u,d){ii.prototype[u]=d},Ln.fromTextArea=SP,MP(Ln),Ln.version="5.65.1",Ln})})(Ql);(function(i,e){(function(t){t(Ql.exports)})(function(t){var r={},o=/[^\s\u00a0]/,l=t.Pos,c=t.cmpPos;function h(b){var T=b.search(o);return T==-1?0:T}t.commands.toggleComment=function(b){b.toggleComment()},t.defineExtension("toggleComment",function(b){b||(b=r);for(var T=this,L=1/0,P=this.listSelections(),O=null,z=P.length-1;z>=0;z--){var G=P[z].from(),k=P[z].to();G.line>=L||(k.line>=L&&(k=l(L,0)),L=G.line,O==null?T.uncomment(G,k,b)?O="un":(T.lineComment(G,k,b),O="line"):O=="un"?T.uncomment(G,k,b):T.lineComment(G,k,b))}});function m(b,T,L){return/\bstring\b/.test(b.getTokenTypeAt(l(T.line,0)))&&!/^[\'\"\`]/.test(L)}function v(b,T){var L=b.getMode();return L.useInnerComments===!1||!L.innerMode?L:b.getModeAt(T)}t.defineExtension("lineComment",function(b,T,L){L||(L=r);var P=this,O=v(P,b),z=P.getLine(b.line);if(!(z==null||m(P,b,z))){var G=L.lineComment||O.lineComment;if(!G){(L.blockCommentStart||O.blockCommentStart)&&(L.fullLines=!0,P.blockComment(b,T,L));return}var k=Math.min(T.ch!=0||T.line==b.line?T.line+1:T.line,P.lastLine()+1),A=L.padding==null?" ":L.padding,N=L.commentBlankLines||b.line==T.line;P.operation(function(){if(L.indent){for(var I=null,B=b.line;B<k;++B){var V=P.getLine(B),X=V.slice(0,h(V));(I==null||I.length>X.length)&&(I=X)}for(var B=b.line;B<k;++B){var V=P.getLine(B),Q=I.length;!N&&!o.test(V)||(V.slice(0,Q)!=I&&(Q=h(V)),P.replaceRange(I+G+A,l(B,0),l(B,Q)))}}else for(var B=b.line;B<k;++B)(N||o.test(P.getLine(B)))&&P.replaceRange(G+A,l(B,0))})}}),t.defineExtension("blockComment",function(b,T,L){L||(L=r);var P=this,O=v(P,b),z=L.blockCommentStart||O.blockCommentStart,G=L.blockCommentEnd||O.blockCommentEnd;if(!z||!G){(L.lineComment||O.lineComment)&&L.fullLines!=!1&&P.lineComment(b,T,L);return}if(!/\bcomment\b/.test(P.getTokenTypeAt(l(b.line,0)))){var k=Math.min(T.line,P.lastLine());k!=b.line&&T.ch==0&&o.test(P.getLine(k))&&--k;var A=L.padding==null?" ":L.padding;b.line>k||P.operation(function(){if(L.fullLines!=!1){var N=o.test(P.getLine(k));P.replaceRange(A+G,l(k)),P.replaceRange(z+A,l(b.line,0));var I=L.blockCommentLead||O.blockCommentLead;if(I!=null)for(var B=b.line+1;B<=k;++B)(B!=k||N)&&P.replaceRange(I+A,l(B,0))}else{var V=c(P.getCursor("to"),T)==0,X=!P.somethingSelected();P.replaceRange(G,T),V&&P.setSelection(X?T:P.getCursor("from"),T),P.replaceRange(z,b)}})}}),t.defineExtension("uncomment",function(b,T,L){L||(L=r);var P=this,O=v(P,b),z=Math.min(T.ch!=0||T.line==b.line?T.line:T.line-1,P.lastLine()),G=Math.min(b.line,z),k=L.lineComment||O.lineComment,A=[],N=L.padding==null?" ":L.padding,I;e:{if(!k)break e;for(var B=G;B<=z;++B){var V=P.getLine(B),X=V.indexOf(k);if(X>-1&&!/comment/.test(P.getTokenTypeAt(l(B,X+1)))&&(X=-1),X==-1&&o.test(V)||X>-1&&o.test(V.slice(0,X)))break e;A.push(V)}if(P.operation(function(){for(var Me=G;Me<=z;++Me){var pe=A[Me-G],ve=pe.indexOf(k),Ce=ve+k.length;ve<0||(pe.slice(Ce,Ce+N.length)==N&&(Ce+=N.length),I=!0,P.replaceRange("",l(Me,ve),l(Me,Ce)))}}),I)return!0}var Q=L.blockCommentStart||O.blockCommentStart,ae=L.blockCommentEnd||O.blockCommentEnd;if(!Q||!ae)return!1;var le=L.blockCommentLead||O.blockCommentLead,he=P.getLine(G),re=he.indexOf(Q);if(re==-1)return!1;var ee=z==G?he:P.getLine(z),_=ee.indexOf(ae,z==G?re+Q.length:0),p=l(G,re+1),Z=l(z,_+1);if(_==-1||!/comment/.test(P.getTokenTypeAt(p))||!/comment/.test(P.getTokenTypeAt(Z))||P.getRange(p,Z,`
`).indexOf(ae)>-1)return!1;var E=he.lastIndexOf(Q,b.ch),ye=E==-1?-1:he.slice(0,b.ch).indexOf(ae,E+Q.length);if(E!=-1&&ye!=-1&&ye+ae.length!=b.ch)return!1;ye=ee.indexOf(ae,T.ch);var Re=ee.slice(T.ch).lastIndexOf(Q,ye-T.ch);return E=ye==-1||Re==-1?-1:T.ch+Re,ye!=-1&&E!=-1&&E!=T.ch?!1:(P.operation(function(){P.replaceRange("",l(z,_-(N&&ee.slice(_-N.length,_)==N?N.length:0)),l(z,_+ae.length));var Me=re+Q.length;if(N&&he.slice(Me,Me+N.length)==N&&(Me+=N.length),P.replaceRange("",l(G,re),l(G,Me)),le)for(var pe=G+1;pe<=z;++pe){var ve=P.getLine(pe),Ce=ve.indexOf(le);if(!(Ce==-1||o.test(ve.slice(0,Ce)))){var _e=Ce+le.length;N&&ve.slice(_e,_e+N.length)==N&&(_e+=N.length),P.replaceRange("",l(pe,Ce),l(pe,_e))}}}),!0)})})})();var XH={exports:{}};(function(i,e){(function(t){t(Ql.exports)})(function(t){var r=t.Pos;function o(A){var N=A.flags;return N!=null?N:(A.ignoreCase?"i":"")+(A.global?"g":"")+(A.multiline?"m":"")}function l(A,N){for(var I=o(A),B=I,V=0;V<N.length;V++)B.indexOf(N.charAt(V))==-1&&(B+=N.charAt(V));return I==B?A:new RegExp(A.source,B)}function c(A){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(A.source)}function h(A,N,I){N=l(N,"g");for(var B=I.line,V=I.ch,X=A.lastLine();B<=X;B++,V=0){N.lastIndex=V;var Q=A.getLine(B),ae=N.exec(Q);if(ae)return{from:r(B,ae.index),to:r(B,ae.index+ae[0].length),match:ae}}}function m(A,N,I){if(!c(N))return h(A,N,I);N=l(N,"gm");for(var B,V=1,X=I.line,Q=A.lastLine();X<=Q;){for(var ae=0;ae<V&&!(X>Q);ae++){var le=A.getLine(X++);B=B==null?le:B+`
`+le}V=V*2,N.lastIndex=I.ch;var he=N.exec(B);if(he){var re=B.slice(0,he.index).split(`
`),ee=he[0].split(`
`),_=I.line+re.length-1,p=re[re.length-1].length;return{from:r(_,p),to:r(_+ee.length-1,ee.length==1?p+ee[0].length:ee[ee.length-1].length),match:he}}}}function v(A,N,I){for(var B,V=0;V<=A.length;){N.lastIndex=V;var X=N.exec(A);if(!X)break;var Q=X.index+X[0].length;if(Q>A.length-I)break;(!B||Q>B.index+B[0].length)&&(B=X),V=X.index+1}return B}function b(A,N,I){N=l(N,"g");for(var B=I.line,V=I.ch,X=A.firstLine();B>=X;B--,V=-1){var Q=A.getLine(B),ae=v(Q,N,V<0?0:Q.length-V);if(ae)return{from:r(B,ae.index),to:r(B,ae.index+ae[0].length),match:ae}}}function T(A,N,I){if(!c(N))return b(A,N,I);N=l(N,"gm");for(var B,V=1,X=A.getLine(I.line).length-I.ch,Q=I.line,ae=A.firstLine();Q>=ae;){for(var le=0;le<V&&Q>=ae;le++){var he=A.getLine(Q--);B=B==null?he:he+`
`+B}V*=2;var re=v(B,N,X);if(re){var ee=B.slice(0,re.index).split(`
`),_=re[0].split(`
`),p=Q+ee.length,Z=ee[ee.length-1].length;return{from:r(p,Z),to:r(p+_.length-1,_.length==1?Z+_[0].length:_[_.length-1].length),match:re}}}}var L,P;String.prototype.normalize?(L=function(A){return A.normalize("NFD").toLowerCase()},P=function(A){return A.normalize("NFD")}):(L=function(A){return A.toLowerCase()},P=function(A){return A});function O(A,N,I,B){if(A.length==N.length)return I;for(var V=0,X=I+Math.max(0,A.length-N.length);;){if(V==X)return V;var Q=V+X>>1,ae=B(A.slice(0,Q)).length;if(ae==I)return Q;ae>I?X=Q:V=Q+1}}function z(A,N,I,B){if(!N.length)return null;var V=B?L:P,X=V(N).split(/\r|\n\r?/);e:for(var Q=I.line,ae=I.ch,le=A.lastLine()+1-X.length;Q<=le;Q++,ae=0){var he=A.getLine(Q).slice(ae),re=V(he);if(X.length==1){var ee=re.indexOf(X[0]);if(ee==-1)continue e;var I=O(he,re,ee,V)+ae;return{from:r(Q,O(he,re,ee,V)+ae),to:r(Q,O(he,re,ee+X[0].length,V)+ae)}}else{var _=re.length-X[0].length;if(re.slice(_)!=X[0])continue e;for(var p=1;p<X.length-1;p++)if(V(A.getLine(Q+p))!=X[p])continue e;var Z=A.getLine(Q+X.length-1),E=V(Z),ye=X[X.length-1];if(E.slice(0,ye.length)!=ye)continue e;return{from:r(Q,O(he,re,_,V)+ae),to:r(Q+X.length-1,O(Z,E,ye.length,V))}}}}function G(A,N,I,B){if(!N.length)return null;var V=B?L:P,X=V(N).split(/\r|\n\r?/);e:for(var Q=I.line,ae=I.ch,le=A.firstLine()-1+X.length;Q>=le;Q--,ae=-1){var he=A.getLine(Q);ae>-1&&(he=he.slice(0,ae));var re=V(he);if(X.length==1){var ee=re.lastIndexOf(X[0]);if(ee==-1)continue e;return{from:r(Q,O(he,re,ee,V)),to:r(Q,O(he,re,ee+X[0].length,V))}}else{var _=X[X.length-1];if(re.slice(0,_.length)!=_)continue e;for(var p=1,I=Q-X.length+1;p<X.length-1;p++)if(V(A.getLine(I+p))!=X[p])continue e;var Z=A.getLine(Q+1-X.length),E=V(Z);if(E.slice(E.length-X[0].length)!=X[0])continue e;return{from:r(Q+1-X.length,O(Z,E,Z.length-X[0].length,V)),to:r(Q,O(he,re,_.length,V))}}}}function k(A,N,I,B){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=A,I=I?A.clipPos(I):r(0,0),this.pos={from:I,to:I};var V;typeof B=="object"?V=B.caseFold:(V=B,B=null),typeof N=="string"?(V==null&&(V=!1),this.matches=function(X,Q){return(X?G:z)(A,N,Q,V)}):(N=l(N,"gm"),!B||B.multiline!==!1?this.matches=function(X,Q){return(X?T:m)(A,N,Q)}:this.matches=function(X,Q){return(X?b:h)(A,N,Q)})}k.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(A){var N=this.doc.clipPos(A?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(N=r(N.line,N.ch),A?(N.ch--,N.ch<0&&(N.line--,N.ch=(this.doc.getLine(N.line)||"").length)):(N.ch++,N.ch>(this.doc.getLine(N.line)||"").length&&(N.ch=0,N.line++)),t.cmpPos(N,this.doc.clipPos(N))!=0))return this.atOccurrence=!1;var I=this.matches(A,N);if(this.afterEmptyMatch=I&&t.cmpPos(I.from,I.to)==0,I)return this.pos=I,this.atOccurrence=!0,this.pos.match||!0;var B=r(A?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:B,to:B},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(A,N){if(!!this.atOccurrence){var I=t.splitLines(A);this.doc.replaceRange(I,this.pos.from,this.pos.to,N),this.pos.to=r(this.pos.from.line+I.length-1,I[I.length-1].length+(I.length==1?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(A,N,I){return new k(this.doc,A,N,I)}),t.defineDocExtension("getSearchCursor",function(A,N,I){return new k(this,A,N,I)}),t.defineExtension("selectMatches",function(A,N){for(var I=[],B=this.getSearchCursor(A,this.getCursor("from"),N);B.findNext()&&!(t.cmpPos(B.to(),this.getCursor("to"))>0);)I.push({anchor:B.from(),head:B.to()});I.length&&this.setSelections(I,0)})})})();var YH={exports:{}};(function(i,e){(function(t){t(Ql.exports)})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),o=t.Pos,l={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function c(L){return L&&L.bracketRegex||/[(){}[\]]/}function h(L,P,O){var z=L.getLineHandle(P.line),G=P.ch-1,k=O&&O.afterCursor;k==null&&(k=/(^| )cm-fat-cursor($| )/.test(L.getWrapperElement().className));var A=c(O),N=!k&&G>=0&&A.test(z.text.charAt(G))&&l[z.text.charAt(G)]||A.test(z.text.charAt(G+1))&&l[z.text.charAt(++G)];if(!N)return null;var I=N.charAt(1)==">"?1:-1;if(O&&O.strict&&I>0!=(G==P.ch))return null;var B=L.getTokenTypeAt(o(P.line,G+1)),V=m(L,o(P.line,G+(I>0?1:0)),I,B,O);return V==null?null:{from:o(P.line,G),to:V&&V.pos,match:V&&V.ch==N.charAt(0),forward:I>0}}function m(L,P,O,z,G){for(var k=G&&G.maxScanLineLength||1e4,A=G&&G.maxScanLines||1e3,N=[],I=c(G),B=O>0?Math.min(P.line+A,L.lastLine()+1):Math.max(L.firstLine()-1,P.line-A),V=P.line;V!=B;V+=O){var X=L.getLine(V);if(!!X){var Q=O>0?0:X.length-1,ae=O>0?X.length:-1;if(!(X.length>k))for(V==P.line&&(Q=P.ch-(O<0?1:0));Q!=ae;Q+=O){var le=X.charAt(Q);if(I.test(le)&&(z===void 0||(L.getTokenTypeAt(o(V,Q+1))||"")==(z||""))){var he=l[le];if(he&&he.charAt(1)==">"==O>0)N.push(le);else if(N.length)N.pop();else return{pos:o(V,Q),ch:le}}}}}return V-O==(O>0?L.lastLine():L.firstLine())?!1:null}function v(L,P,O){for(var z=L.state.matchBrackets.maxHighlightLineLength||1e3,G=O&&O.highlightNonMatching,k=[],A=L.listSelections(),N=0;N<A.length;N++){var I=A[N].empty()&&h(L,A[N].head,O);if(I&&(I.match||G!==!1)&&L.getLine(I.from.line).length<=z){var B=I.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";k.push(L.markText(I.from,o(I.from.line,I.from.ch+1),{className:B})),I.to&&L.getLine(I.to.line).length<=z&&k.push(L.markText(I.to,o(I.to.line,I.to.ch+1),{className:B}))}}if(k.length){r&&L.state.focused&&L.focus();var V=function(){L.operation(function(){for(var X=0;X<k.length;X++)k[X].clear()})};if(P)setTimeout(V,800);else return V}}function b(L){L.operation(function(){L.state.matchBrackets.currentlyHighlighted&&(L.state.matchBrackets.currentlyHighlighted(),L.state.matchBrackets.currentlyHighlighted=null),L.state.matchBrackets.currentlyHighlighted=v(L,!1,L.state.matchBrackets)})}function T(L){L.state.matchBrackets&&L.state.matchBrackets.currentlyHighlighted&&(L.state.matchBrackets.currentlyHighlighted(),L.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(L,P,O){O&&O!=t.Init&&(L.off("cursorActivity",b),L.off("focus",b),L.off("blur",T),T(L)),P&&(L.state.matchBrackets=typeof P=="object"?P:{},L.on("cursorActivity",b),L.on("focus",b),L.on("blur",T))}),t.defineExtension("matchBrackets",function(){v(this,!0)}),t.defineExtension("findMatchingBracket",function(L,P,O){return(O||typeof P=="boolean")&&(O?(O.strict=P,P=O):P=P?{strict:!0}:null),h(this,L,P)}),t.defineExtension("scanForBracket",function(L,P,O,z){return m(this,L,P,O,z)})})})();(function(i,e){(function(t){t(Ql.exports,XH.exports,YH.exports)})(function(t){var r=t.commands,o=t.Pos;function l(I,B,V){if(V<0&&B.ch==0)return I.clipPos(o(B.line-1));var X=I.getLine(B.line);if(V>0&&B.ch>=X.length)return I.clipPos(o(B.line+1,0));for(var Q="start",ae,le=B.ch,he=le,re=V<0?0:X.length,ee=0;he!=re;he+=V,ee++){var _=X.charAt(V<0?he-1:he),p=_!="_"&&t.isWordChar(_)?"w":"o";if(p=="w"&&_.toUpperCase()==_&&(p="W"),Q=="start")p!="o"?(Q="in",ae=p):le=he+V;else if(Q=="in"&&ae!=p){if(ae=="w"&&p=="W"&&V<0&&he--,ae=="W"&&p=="w"&&V>0)if(he==le+1){ae="w";continue}else he--;break}}return o(B.line,he)}function c(I,B){I.extendSelectionsBy(function(V){return I.display.shift||I.doc.extend||V.empty()?l(I.doc,V.head,B):B<0?V.from():V.to()})}r.goSubwordLeft=function(I){c(I,-1)},r.goSubwordRight=function(I){c(I,1)},r.scrollLineUp=function(I){var B=I.getScrollInfo();if(!I.somethingSelected()){var V=I.lineAtHeight(B.top+B.clientHeight,"local");I.getCursor().line>=V&&I.execCommand("goLineUp")}I.scrollTo(null,B.top-I.defaultTextHeight())},r.scrollLineDown=function(I){var B=I.getScrollInfo();if(!I.somethingSelected()){var V=I.lineAtHeight(B.top,"local")+1;I.getCursor().line<=V&&I.execCommand("goLineDown")}I.scrollTo(null,B.top+I.defaultTextHeight())},r.splitSelectionByLine=function(I){for(var B=I.listSelections(),V=[],X=0;X<B.length;X++)for(var Q=B[X].from(),ae=B[X].to(),le=Q.line;le<=ae.line;++le)ae.line>Q.line&&le==ae.line&&ae.ch==0||V.push({anchor:le==Q.line?Q:o(le,0),head:le==ae.line?ae:o(le)});I.setSelections(V,0)},r.singleSelectionTop=function(I){var B=I.listSelections()[0];I.setSelection(B.anchor,B.head,{scroll:!1})},r.selectLine=function(I){for(var B=I.listSelections(),V=[],X=0;X<B.length;X++){var Q=B[X];V.push({anchor:o(Q.from().line,0),head:o(Q.to().line+1,0)})}I.setSelections(V)};function h(I,B){if(I.isReadOnly())return t.Pass;I.operation(function(){for(var V=I.listSelections().length,X=[],Q=-1,ae=0;ae<V;ae++){var le=I.listSelections()[ae].head;if(!(le.line<=Q)){var he=o(le.line+(B?0:1),0);I.replaceRange(`
`,he,null,"+insertLine"),I.indentLine(he.line,null,!0),X.push({head:he,anchor:he}),Q=le.line+1}}I.setSelections(X)}),I.execCommand("indentAuto")}r.insertLineAfter=function(I){return h(I,!1)},r.insertLineBefore=function(I){return h(I,!0)};function m(I,B){for(var V=B.ch,X=V,Q=I.getLine(B.line);V&&t.isWordChar(Q.charAt(V-1));)--V;for(;X<Q.length&&t.isWordChar(Q.charAt(X));)++X;return{from:o(B.line,V),to:o(B.line,X),word:Q.slice(V,X)}}r.selectNextOccurrence=function(I){var B=I.getCursor("from"),V=I.getCursor("to"),X=I.state.sublimeFindFullWord==I.doc.sel;if(t.cmpPos(B,V)==0){var Q=m(I,B);if(!Q.word)return;I.setSelection(Q.from,Q.to),X=!0}else{var ae=I.getRange(B,V),le=X?new RegExp("\\b"+ae+"\\b"):ae,he=I.getSearchCursor(le,V),re=he.findNext();if(re||(he=I.getSearchCursor(le,o(I.firstLine(),0)),re=he.findNext()),!re||b(I.listSelections(),he.from(),he.to()))return;I.addSelection(he.from(),he.to())}X&&(I.state.sublimeFindFullWord=I.doc.sel)},r.skipAndSelectNextOccurrence=function(I){var B=I.getCursor("anchor"),V=I.getCursor("head");r.selectNextOccurrence(I),t.cmpPos(B,V)!=0&&I.doc.setSelections(I.doc.listSelections().filter(function(X){return X.anchor!=B||X.head!=V}))};function v(I,B){for(var V=I.listSelections(),X=[],Q=0;Q<V.length;Q++){var ae=V[Q],le=I.findPosV(ae.anchor,B,"line",ae.anchor.goalColumn),he=I.findPosV(ae.head,B,"line",ae.head.goalColumn);le.goalColumn=ae.anchor.goalColumn!=null?ae.anchor.goalColumn:I.cursorCoords(ae.anchor,"div").left,he.goalColumn=ae.head.goalColumn!=null?ae.head.goalColumn:I.cursorCoords(ae.head,"div").left;var re={anchor:le,head:he};X.push(ae),X.push(re)}I.setSelections(X)}r.addCursorToPrevLine=function(I){v(I,-1)},r.addCursorToNextLine=function(I){v(I,1)};function b(I,B,V){for(var X=0;X<I.length;X++)if(t.cmpPos(I[X].from(),B)==0&&t.cmpPos(I[X].to(),V)==0)return!0;return!1}var T="(){}[]";function L(I){for(var B=I.listSelections(),V=[],X=0;X<B.length;X++){var Q=B[X],ae=Q.head,le=I.scanForBracket(ae,-1);if(!le)return!1;for(;;){var he=I.scanForBracket(ae,1);if(!he)return!1;if(he.ch==T.charAt(T.indexOf(le.ch)+1)){var re=o(le.pos.line,le.pos.ch+1);if(t.cmpPos(re,Q.from())==0&&t.cmpPos(he.pos,Q.to())==0){if(le=I.scanForBracket(le.pos,-1),!le)return!1}else{V.push({anchor:re,head:he.pos});break}}ae=o(he.pos.line,he.pos.ch+1)}}return I.setSelections(V),!0}r.selectScope=function(I){L(I)||I.execCommand("selectAll")},r.selectBetweenBrackets=function(I){if(!L(I))return t.Pass};function P(I){return I?/\bpunctuation\b/.test(I)?I:void 0:null}r.goToBracket=function(I){I.extendSelectionsBy(function(B){var V=I.scanForBracket(B.head,1,P(I.getTokenTypeAt(B.head)));if(V&&t.cmpPos(V.pos,B.head)!=0)return V.pos;var X=I.scanForBracket(B.head,-1,P(I.getTokenTypeAt(o(B.head.line,B.head.ch+1))));return X&&o(X.pos.line,X.pos.ch+1)||B.head})},r.swapLineUp=function(I){if(I.isReadOnly())return t.Pass;for(var B=I.listSelections(),V=[],X=I.firstLine()-1,Q=[],ae=0;ae<B.length;ae++){var le=B[ae],he=le.from().line-1,re=le.to().line;Q.push({anchor:o(le.anchor.line-1,le.anchor.ch),head:o(le.head.line-1,le.head.ch)}),le.to().ch==0&&!le.empty()&&--re,he>X?V.push(he,re):V.length&&(V[V.length-1]=re),X=re}I.operation(function(){for(var ee=0;ee<V.length;ee+=2){var _=V[ee],p=V[ee+1],Z=I.getLine(_);I.replaceRange("",o(_,0),o(_+1,0),"+swapLine"),p>I.lastLine()?I.replaceRange(`
`+Z,o(I.lastLine()),null,"+swapLine"):I.replaceRange(Z+`
`,o(p,0),null,"+swapLine")}I.setSelections(Q),I.scrollIntoView()})},r.swapLineDown=function(I){if(I.isReadOnly())return t.Pass;for(var B=I.listSelections(),V=[],X=I.lastLine()+1,Q=B.length-1;Q>=0;Q--){var ae=B[Q],le=ae.to().line+1,he=ae.from().line;ae.to().ch==0&&!ae.empty()&&le--,le<X?V.push(le,he):V.length&&(V[V.length-1]=he),X=he}I.operation(function(){for(var re=V.length-2;re>=0;re-=2){var ee=V[re],_=V[re+1],p=I.getLine(ee);ee==I.lastLine()?I.replaceRange("",o(ee-1),o(ee),"+swapLine"):I.replaceRange("",o(ee,0),o(ee+1,0),"+swapLine"),I.replaceRange(p+`
`,o(_,0),null,"+swapLine")}I.scrollIntoView()})},r.toggleCommentIndented=function(I){I.toggleComment({indent:!0})},r.joinLines=function(I){for(var B=I.listSelections(),V=[],X=0;X<B.length;X++){for(var Q=B[X],ae=Q.from(),le=ae.line,he=Q.to().line;X<B.length-1&&B[X+1].from().line==he;)he=B[++X].to().line;V.push({start:le,end:he,anchor:!Q.empty()&&ae})}I.operation(function(){for(var re=0,ee=[],_=0;_<V.length;_++){for(var p=V[_],Z=p.anchor&&o(p.anchor.line-re,p.anchor.ch),E,ye=p.start;ye<=p.end;ye++){var Re=ye-re;ye==p.end&&(E=o(Re,I.getLine(Re).length+1)),Re<I.lastLine()&&(I.replaceRange(" ",o(Re),o(Re+1,/^\s*/.exec(I.getLine(Re+1))[0].length)),++re)}ee.push({anchor:Z||E,head:E})}I.setSelections(ee,0)})},r.duplicateLine=function(I){I.operation(function(){for(var B=I.listSelections().length,V=0;V<B;V++){var X=I.listSelections()[V];X.empty()?I.replaceRange(I.getLine(X.head.line)+`
`,o(X.head.line,0)):I.replaceRange(I.getRange(X.from(),X.to()),X.from())}I.scrollIntoView()})};function O(I,B,V){if(I.isReadOnly())return t.Pass;for(var X=I.listSelections(),Q=[],ae,le=0;le<X.length;le++){var he=X[le];if(!he.empty()){for(var re=he.from().line,ee=he.to().line;le<X.length-1&&X[le+1].from().line==ee;)ee=X[++le].to().line;X[le].to().ch||ee--,Q.push(re,ee)}}Q.length?ae=!0:Q.push(I.firstLine(),I.lastLine()),I.operation(function(){for(var _=[],p=0;p<Q.length;p+=2){var Z=Q[p],E=Q[p+1],ye=o(Z,0),Re=o(E),Me=I.getRange(ye,Re,!1);B?Me.sort(function(pe,ve){return pe<ve?-V:pe==ve?0:V}):Me.sort(function(pe,ve){var Ce=pe.toUpperCase(),_e=ve.toUpperCase();return Ce!=_e&&(pe=Ce,ve=_e),pe<ve?-V:pe==ve?0:V}),I.replaceRange(Me,ye,Re),ae&&_.push({anchor:ye,head:o(E+1,0)})}ae&&I.setSelections(_,0)})}r.sortLines=function(I){O(I,!0,1)},r.reverseSortLines=function(I){O(I,!0,-1)},r.sortLinesInsensitive=function(I){O(I,!1,1)},r.reverseSortLinesInsensitive=function(I){O(I,!1,-1)},r.nextBookmark=function(I){var B=I.state.sublimeBookmarks;if(B)for(;B.length;){var V=B.shift(),X=V.find();if(X)return B.push(V),I.setSelection(X.from,X.to)}},r.prevBookmark=function(I){var B=I.state.sublimeBookmarks;if(B)for(;B.length;){B.unshift(B.pop());var V=B[B.length-1].find();if(!V)B.pop();else return I.setSelection(V.from,V.to)}},r.toggleBookmark=function(I){for(var B=I.listSelections(),V=I.state.sublimeBookmarks||(I.state.sublimeBookmarks=[]),X=0;X<B.length;X++){for(var Q=B[X].from(),ae=B[X].to(),le=B[X].empty()?I.findMarksAt(Q):I.findMarks(Q,ae),he=0;he<le.length;he++)if(le[he].sublimeBookmark){le[he].clear();for(var re=0;re<V.length;re++)V[re]==le[he]&&V.splice(re--,1);break}he==le.length&&V.push(I.markText(Q,ae,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},r.clearBookmarks=function(I){var B=I.state.sublimeBookmarks;if(B)for(var V=0;V<B.length;V++)B[V].clear();B.length=0},r.selectBookmarks=function(I){var B=I.state.sublimeBookmarks,V=[];if(B)for(var X=0;X<B.length;X++){var Q=B[X].find();Q?V.push({anchor:Q.from,head:Q.to}):B.splice(X--,0)}V.length&&I.setSelections(V,0)};function z(I,B){I.operation(function(){for(var V=I.listSelections(),X=[],Q=[],ae=0;ae<V.length;ae++){var le=V[ae];le.empty()?(X.push(ae),Q.push("")):Q.push(B(I.getRange(le.from(),le.to())))}I.replaceSelections(Q,"around","case");for(var ae=X.length-1,he;ae>=0;ae--){var le=V[X[ae]];if(!(he&&t.cmpPos(le.head,he)>0)){var re=m(I,le.head);he=re.from,I.replaceRange(B(re.word),re.from,re.to)}}})}r.smartBackspace=function(I){if(I.somethingSelected())return t.Pass;I.operation(function(){for(var B=I.listSelections(),V=I.getOption("indentUnit"),X=B.length-1;X>=0;X--){var Q=B[X].head,ae=I.getRange({line:Q.line,ch:0},Q),le=t.countColumn(ae,null,I.getOption("tabSize")),he=I.findPosH(Q,-1,"char",!1);if(ae&&!/\S/.test(ae)&&le%V==0){var re=new o(Q.line,t.findColumn(ae,le-V,V));re.ch!=Q.ch&&(he=re)}I.replaceRange("",he,Q,"+delete")}})},r.delLineRight=function(I){I.operation(function(){for(var B=I.listSelections(),V=B.length-1;V>=0;V--)I.replaceRange("",B[V].anchor,o(B[V].to().line),"+delete");I.scrollIntoView()})},r.upcaseAtCursor=function(I){z(I,function(B){return B.toUpperCase()})},r.downcaseAtCursor=function(I){z(I,function(B){return B.toLowerCase()})},r.setSublimeMark=function(I){I.state.sublimeMark&&I.state.sublimeMark.clear(),I.state.sublimeMark=I.setBookmark(I.getCursor())},r.selectToSublimeMark=function(I){var B=I.state.sublimeMark&&I.state.sublimeMark.find();B&&I.setSelection(I.getCursor(),B)},r.deleteToSublimeMark=function(I){var B=I.state.sublimeMark&&I.state.sublimeMark.find();if(B){var V=I.getCursor(),X=B;if(t.cmpPos(V,X)>0){var Q=X;X=V,V=Q}I.state.sublimeKilled=I.getRange(V,X),I.replaceRange("",V,X)}},r.swapWithSublimeMark=function(I){var B=I.state.sublimeMark&&I.state.sublimeMark.find();B&&(I.state.sublimeMark.clear(),I.state.sublimeMark=I.setBookmark(I.getCursor()),I.setCursor(B))},r.sublimeYank=function(I){I.state.sublimeKilled!=null&&I.replaceSelection(I.state.sublimeKilled,null,"paste")},r.showInCenter=function(I){var B=I.cursorCoords(null,"local");I.scrollTo(null,(B.top+B.bottom)/2-I.getScrollInfo().clientHeight/2)};function G(I){var B=I.getCursor("from"),V=I.getCursor("to");if(t.cmpPos(B,V)==0){var X=m(I,B);if(!X.word)return;B=X.from,V=X.to}return{from:B,to:V,query:I.getRange(B,V),word:X}}function k(I,B){var V=G(I);if(!!V){var X=V.query,Q=I.getSearchCursor(X,B?V.to:V.from);(B?Q.findNext():Q.findPrevious())?I.setSelection(Q.from(),Q.to()):(Q=I.getSearchCursor(X,B?o(I.firstLine(),0):I.clipPos(o(I.lastLine()))),(B?Q.findNext():Q.findPrevious())?I.setSelection(Q.from(),Q.to()):V.word&&I.setSelection(V.from,V.to))}}r.findUnder=function(I){k(I,!0)},r.findUnderPrevious=function(I){k(I,!1)},r.findAllUnder=function(I){var B=G(I);if(!!B){for(var V=I.getSearchCursor(B.query),X=[],Q=-1;V.findNext();)X.push({anchor:V.from(),head:V.to()}),V.from().line<=B.from.line&&V.from().ch<=B.from.ch&&Q++;I.setSelections(X,Q)}};var A=t.keyMap;A.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},t.normalizeKeyMap(A.macSublime),A.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},t.normalizeKeyMap(A.pcSublime);var N=A.default==A.macDefault;A.sublime=N?A.macSublime:A.pcSublime})})();(function(i,e){(function(t){t(Ql.exports)})(function(t){t.defineMode("javascript",function(r,o){var l=r.indentUnit,c=o.statementIndent,h=o.jsonld,m=o.json||h,v=o.trackScope!==!1,b=o.typescript,T=o.wordCharacters||/[\w$\xa1-\uffff]/,L=function(){function se(gr){return{type:gr,style:"keyword"}}var we=se("keyword a"),Ue=se("keyword b"),Ye=se("keyword c"),It=se("keyword d"),Qt=se("operator"),lt={type:"atom",style:"atom"};return{if:se("if"),while:we,with:we,else:Ue,do:Ue,try:Ue,finally:Ue,return:It,break:It,continue:It,new:se("new"),delete:Ye,void:Ye,throw:Ye,debugger:se("debugger"),var:se("var"),const:se("var"),let:se("var"),function:se("function"),catch:se("catch"),for:se("for"),switch:se("switch"),case:se("case"),default:se("default"),in:Qt,typeof:Qt,instanceof:Qt,true:lt,false:lt,null:lt,undefined:lt,NaN:lt,Infinity:lt,this:se("this"),class:se("class"),super:se("atom"),yield:Ye,export:se("export"),import:se("import"),extends:Ye,await:Ye}}(),P=/[+\-*&%=<>!?|~^@]/,O=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function z(se){for(var we=!1,Ue,Ye=!1;(Ue=se.next())!=null;){if(!we){if(Ue=="/"&&!Ye)return;Ue=="["?Ye=!0:Ye&&Ue=="]"&&(Ye=!1)}we=!we&&Ue=="\\"}}var G,k;function A(se,we,Ue){return G=se,k=Ue,we}function N(se,we){var Ue=se.next();if(Ue=='"'||Ue=="'")return we.tokenize=I(Ue),we.tokenize(se,we);if(Ue=="."&&se.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(Ue=="."&&se.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ue))return A(Ue);if(Ue=="="&&se.eat(">"))return A("=>","operator");if(Ue=="0"&&se.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(Ue))return se.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(Ue=="/")return se.eat("*")?(we.tokenize=B,B(se,we)):se.eat("/")?(se.skipToEnd(),A("comment","comment")):je(se,we,1)?(z(se),se.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(se.eat("="),A("operator","operator",se.current()));if(Ue=="`")return we.tokenize=V,V(se,we);if(Ue=="#"&&se.peek()=="!")return se.skipToEnd(),A("meta","meta");if(Ue=="#"&&se.eatWhile(T))return A("variable","property");if(Ue=="<"&&se.match("!--")||Ue=="-"&&se.match("->")&&!/\S/.test(se.string.slice(0,se.start)))return se.skipToEnd(),A("comment","comment");if(P.test(Ue))return(Ue!=">"||!we.lexical||we.lexical.type!=">")&&(se.eat("=")?(Ue=="!"||Ue=="=")&&se.eat("="):/[<>*+\-|&?]/.test(Ue)&&(se.eat(Ue),Ue==">"&&se.eat(Ue))),Ue=="?"&&se.eat(".")?A("."):A("operator","operator",se.current());if(T.test(Ue)){se.eatWhile(T);var Ye=se.current();if(we.lastType!="."){if(L.propertyIsEnumerable(Ye)){var It=L[Ye];return A(It.type,It.style,Ye)}if(Ye=="async"&&se.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",Ye)}return A("variable","variable",Ye)}}function I(se){return function(we,Ue){var Ye=!1,It;if(h&&we.peek()=="@"&&we.match(O))return Ue.tokenize=N,A("jsonld-keyword","meta");for(;(It=we.next())!=null&&!(It==se&&!Ye);)Ye=!Ye&&It=="\\";return Ye||(Ue.tokenize=N),A("string","string")}}function B(se,we){for(var Ue=!1,Ye;Ye=se.next();){if(Ye=="/"&&Ue){we.tokenize=N;break}Ue=Ye=="*"}return A("comment","comment")}function V(se,we){for(var Ue=!1,Ye;(Ye=se.next())!=null;){if(!Ue&&(Ye=="`"||Ye=="$"&&se.eat("{"))){we.tokenize=N;break}Ue=!Ue&&Ye=="\\"}return A("quasi","string-2",se.current())}var X="([{}])";function Q(se,we){we.fatArrowAt&&(we.fatArrowAt=null);var Ue=se.string.indexOf("=>",se.start);if(!(Ue<0)){if(b){var Ye=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(se.string.slice(se.start,Ue));Ye&&(Ue=Ye.index)}for(var It=0,Qt=!1,lt=Ue-1;lt>=0;--lt){var gr=se.string.charAt(lt),ti=X.indexOf(gr);if(ti>=0&&ti<3){if(!It){++lt;break}if(--It==0){gr=="("&&(Qt=!0);break}}else if(ti>=3&&ti<6)++It;else if(T.test(gr))Qt=!0;else if(/["'\/`]/.test(gr))for(;;--lt){if(lt==0)return;var Oo=se.string.charAt(lt-1);if(Oo==gr&&se.string.charAt(lt-2)!="\\"){lt--;break}}else if(Qt&&!It){++lt;break}}Qt&&!It&&(we.fatArrowAt=lt)}}var ae={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function le(se,we,Ue,Ye,It,Qt){this.indented=se,this.column=we,this.type=Ue,this.prev=It,this.info=Qt,Ye!=null&&(this.align=Ye)}function he(se,we){if(!v)return!1;for(var Ue=se.localVars;Ue;Ue=Ue.next)if(Ue.name==we)return!0;for(var Ye=se.context;Ye;Ye=Ye.prev)for(var Ue=Ye.vars;Ue;Ue=Ue.next)if(Ue.name==we)return!0}function re(se,we,Ue,Ye,It){var Qt=se.cc;for(ee.state=se,ee.stream=It,ee.marked=null,ee.cc=Qt,ee.style=we,se.lexical.hasOwnProperty("align")||(se.lexical.align=!0);;){var lt=Qt.length?Qt.pop():m?$e:He;if(lt(Ue,Ye)){for(;Qt.length&&Qt[Qt.length-1].lex;)Qt.pop()();return ee.marked?ee.marked:Ue=="variable"&&he(se,Ye)?"variable-2":we}}}var ee={state:null,column:null,marked:null,cc:null};function _(){for(var se=arguments.length-1;se>=0;se--)ee.cc.push(arguments[se])}function p(){return _.apply(null,arguments),!0}function Z(se,we){for(var Ue=we;Ue;Ue=Ue.next)if(Ue.name==se)return!0;return!1}function E(se){var we=ee.state;if(ee.marked="def",!!v){if(we.context){if(we.lexical.info=="var"&&we.context&&we.context.block){var Ue=ye(se,we.context);if(Ue!=null){we.context=Ue;return}}else if(!Z(se,we.localVars)){we.localVars=new pe(se,we.localVars);return}}o.globalVars&&!Z(se,we.globalVars)&&(we.globalVars=new pe(se,we.globalVars))}}function ye(se,we){if(we)if(we.block){var Ue=ye(se,we.prev);return Ue?Ue==we.prev?we:new Me(Ue,we.vars,!0):null}else return Z(se,we.vars)?we:new Me(we.prev,new pe(se,we.vars),!1);else return null}function Re(se){return se=="public"||se=="private"||se=="protected"||se=="abstract"||se=="readonly"}function Me(se,we,Ue){this.prev=se,this.vars=we,this.block=Ue}function pe(se,we){this.name=se,this.next=we}var ve=new pe("this",new pe("arguments",null));function Ce(){ee.state.context=new Me(ee.state.context,ee.state.localVars,!1),ee.state.localVars=ve}function _e(){ee.state.context=new Me(ee.state.context,ee.state.localVars,!0),ee.state.localVars=null}Ce.lex=_e.lex=!0;function Pe(){ee.state.localVars=ee.state.context.vars,ee.state.context=ee.state.context.prev}Pe.lex=!0;function Te(se,we){var Ue=function(){var Ye=ee.state,It=Ye.indented;if(Ye.lexical.type=="stat")It=Ye.lexical.indented;else for(var Qt=Ye.lexical;Qt&&Qt.type==")"&&Qt.align;Qt=Qt.prev)It=Qt.indented;Ye.lexical=new le(It,ee.stream.column(),se,null,Ye.lexical,we)};return Ue.lex=!0,Ue}function Oe(){var se=ee.state;se.lexical.prev&&(se.lexical.type==")"&&(se.indented=se.lexical.indented),se.lexical=se.lexical.prev)}Oe.lex=!0;function ze(se){function we(Ue){return Ue==se?p():se==";"||Ue=="}"||Ue==")"||Ue=="]"?_():p(we)}return we}function He(se,we){return se=="var"?p(Te("vardef",we),wn,ze(";"),Oe):se=="keyword a"?p(Te("form"),Fe,He,Oe):se=="keyword b"?p(Te("form"),He,Oe):se=="keyword d"?ee.stream.match(/^\s*$/,!1)?p():p(Te("stat"),De,ze(";"),Oe):se=="debugger"?p(ze(";")):se=="{"?p(Te("}"),_e,H,Oe,Pe):se==";"?p():se=="if"?(ee.state.lexical.info=="else"&&ee.state.cc[ee.state.cc.length-1]==Oe&&ee.state.cc.pop()(),p(Te("form"),Fe,He,Oe,Ae)):se=="function"?p(yt):se=="for"?p(Te("form"),_e,ke,He,Pe,Oe):se=="class"||b&&we=="interface"?(ee.marked="keyword",p(Te("form",se=="class"?se:we),Nt,Oe)):se=="variable"?b&&we=="declare"?(ee.marked="keyword",p(He)):b&&(we=="module"||we=="enum"||we=="type")&&ee.stream.match(/^\s*\w/,!1)?(ee.marked="keyword",we=="enum"?p(gn):we=="type"?p(Lt,ze("operator"),ue,ze(";")):p(Te("form"),Zt,ze("{"),Te("}"),H,Oe,Oe)):b&&we=="namespace"?(ee.marked="keyword",p(Te("form"),$e,He,Oe)):b&&we=="abstract"?(ee.marked="keyword",p(He)):p(Te("stat"),f):se=="switch"?p(Te("form"),Fe,ze("{"),Te("}","switch"),_e,H,Oe,Oe,Pe):se=="case"?p($e,ze(":")):se=="default"?p(ze(":")):se=="catch"?p(Te("form"),Ce,$,He,Oe,Pe):se=="export"?p(Te("stat"),pi,Oe):se=="import"?p(Te("stat"),rn,Oe):se=="async"?p(He):we=="@"?p($e,He):_(Te("stat"),$e,ze(";"),Oe)}function $(se){if(se=="(")return p(xt,ze(")"))}function $e(se,we){return qe(se,we,!1)}function Le(se,we){return qe(se,we,!0)}function Fe(se){return se!="("?_():p(Te(")"),De,ze(")"),Oe)}function qe(se,we,Ue){if(ee.state.fatArrowAt==ee.stream.start){var Ye=Ue?U:Wt;if(se=="(")return p(Ce,Te(")"),R(xt,")"),Oe,ze("=>"),Ye,Pe);if(se=="variable")return _(Ce,Zt,ze("=>"),Ye,Pe)}var It=Ue?vt:oe;return ae.hasOwnProperty(se)?p(It):se=="function"?p(yt,It):se=="class"||b&&we=="interface"?(ee.marked="keyword",p(Te("form"),jt,Oe)):se=="keyword c"||se=="async"?p(Ue?Le:$e):se=="("?p(Te(")"),De,ze(")"),Oe,It):se=="operator"||se=="spread"?p(Ue?Le:$e):se=="["?p(Te("]"),Gt,Oe,It):se=="{"?D(y,"}",null,It):se=="quasi"?_(j,It):se=="new"?p(n(Ue)):p()}function De(se){return se.match(/[;\}\)\],]/)?_():_($e)}function oe(se,we){return se==","?p(De):vt(se,we,!1)}function vt(se,we,Ue){var Ye=Ue==!1?oe:vt,It=Ue==!1?$e:Le;if(se=="=>")return p(Ce,Ue?U:Wt,Pe);if(se=="operator")return/\+\+|--/.test(we)||b&&we=="!"?p(Ye):b&&we=="<"&&ee.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?p(Te(">"),R(ue,">"),Oe,Ye):we=="?"?p($e,ze(":"),It):p(It);if(se=="quasi")return _(j,Ye);if(se!=";"){if(se=="(")return D(Le,")","call",Ye);if(se==".")return p(g,Ye);if(se=="[")return p(Te("]"),De,ze("]"),Oe,Ye);if(b&&we=="as")return ee.marked="keyword",p(ue,Ye);if(se=="regexp")return ee.state.lastType=ee.marked="operator",ee.stream.backUp(ee.stream.pos-ee.stream.start-1),p(It)}}function j(se,we){return se!="quasi"?_():we.slice(we.length-2)!="${"?p(j):p(De,Je)}function Je(se){if(se=="}")return ee.marked="string-2",ee.state.tokenize=V,p(j)}function Wt(se){return Q(ee.stream,ee.state),_(se=="{"?He:$e)}function U(se){return Q(ee.stream,ee.state),_(se=="{"?He:Le)}function n(se){return function(we){return we=="."?p(se?a:s):we=="variable"&&b?p(Mt,se?vt:oe):_(se?Le:$e)}}function s(se,we){if(we=="target")return ee.marked="keyword",p(oe)}function a(se,we){if(we=="target")return ee.marked="keyword",p(vt)}function f(se){return se==":"?p(Oe,He):_(oe,ze(";"),Oe)}function g(se){if(se=="variable")return ee.marked="property",p()}function y(se,we){if(se=="async")return ee.marked="property",p(y);if(se=="variable"||ee.style=="keyword"){if(ee.marked="property",we=="get"||we=="set")return p(S);var Ue;return b&&ee.state.fatArrowAt==ee.stream.start&&(Ue=ee.stream.match(/^\s*:\s*/,!1))&&(ee.state.fatArrowAt=ee.stream.pos+Ue[0].length),p(C)}else{if(se=="number"||se=="string")return ee.marked=h?"property":ee.style+" property",p(C);if(se=="jsonld-keyword")return p(C);if(b&&Re(we))return ee.marked="keyword",p(y);if(se=="[")return p($e,q,ze("]"),C);if(se=="spread")return p(Le,C);if(we=="*")return ee.marked="keyword",p(y);if(se==":")return _(C)}}function S(se){return se!="variable"?_(C):(ee.marked="property",p(yt))}function C(se){if(se==":")return p(Le);if(se=="(")return _(yt)}function R(se,we,Ue){function Ye(It,Qt){if(Ue?Ue.indexOf(It)>-1:It==","){var lt=ee.state.lexical;return lt.info=="call"&&(lt.pos=(lt.pos||0)+1),p(function(gr,ti){return gr==we||ti==we?_():_(se)},Ye)}return It==we||Qt==we?p():Ue&&Ue.indexOf(";")>-1?_(se):p(ze(we))}return function(It,Qt){return It==we||Qt==we?p():_(se,Ye)}}function D(se,we,Ue){for(var Ye=3;Ye<arguments.length;Ye++)ee.cc.push(arguments[Ye]);return p(Te(we,Ue),R(se,we),Oe)}function H(se){return se=="}"?p():_(He,H)}function q(se,we){if(b){if(se==":")return p(ue);if(we=="?")return p(q)}}function K(se,we){if(b&&(se==":"||we=="in"))return p(ue)}function ne(se){if(b&&se==":")return ee.stream.match(/^\s*\w+\s+is\b/,!1)?p($e,te,ue):p(ue)}function te(se,we){if(we=="is")return ee.marked="keyword",p()}function ue(se,we){if(we=="keyof"||we=="typeof"||we=="infer"||we=="readonly")return ee.marked="keyword",p(we=="typeof"?Le:ue);if(se=="variable"||we=="void")return ee.marked="type",p(ct);if(we=="|"||we=="&")return p(ue);if(se=="string"||se=="number"||se=="atom")return p(ct);if(se=="[")return p(Te("]"),R(ue,"]",","),Oe,ct);if(se=="{")return p(Te("}"),ge,Oe,ct);if(se=="(")return p(R(St,")"),ce,ct);if(se=="<")return p(R(ue,">"),ue);if(se=="quasi")return _(Xe,ct)}function ce(se){if(se=="=>")return p(ue)}function ge(se){return se.match(/[\}\)\]]/)?p():se==","||se==";"?p(ge):_(Ne,ge)}function Ne(se,we){if(se=="variable"||ee.style=="keyword")return ee.marked="property",p(Ne);if(we=="?"||se=="number"||se=="string")return p(Ne);if(se==":")return p(ue);if(se=="[")return p(ze("variable"),K,ze("]"),Ne);if(se=="(")return _(wt,Ne);if(!se.match(/[;\}\)\],]/))return p()}function Xe(se,we){return se!="quasi"?_():we.slice(we.length-2)!="${"?p(Xe):p(ue,Ge)}function Ge(se){if(se=="}")return ee.marked="string-2",ee.state.tokenize=V,p(Xe)}function St(se,we){return se=="variable"&&ee.stream.match(/^\s*[?:]/,!1)||we=="?"?p(St):se==":"?p(ue):se=="spread"?p(St):_(ue)}function ct(se,we){if(we=="<")return p(Te(">"),R(ue,">"),Oe,ct);if(we=="|"||se=="."||we=="&")return p(ue);if(se=="[")return p(ue,ze("]"),ct);if(we=="extends"||we=="implements")return ee.marked="keyword",p(ue);if(we=="?")return p(ue,ze(":"),ue)}function Mt(se,we){if(we=="<")return p(Te(">"),R(ue,">"),Oe,ct)}function dt(){return _(ue,mt)}function mt(se,we){if(we=="=")return p(ue)}function wn(se,we){return we=="enum"?(ee.marked="keyword",p(gn)):_(Zt,q,Xt,de)}function Zt(se,we){if(b&&Re(we))return ee.marked="keyword",p(Zt);if(se=="variable")return E(we),p();if(se=="spread")return p(Zt);if(se=="[")return D(mn,"]");if(se=="{")return D(_n,"}")}function _n(se,we){return se=="variable"&&!ee.stream.match(/^\s*:/,!1)?(E(we),p(Xt)):(se=="variable"&&(ee.marked="property"),se=="spread"?p(Zt):se=="}"?_():se=="["?p($e,ze("]"),ze(":"),_n):p(ze(":"),Zt,Xt))}function mn(){return _(Zt,Xt)}function Xt(se,we){if(we=="=")return p(Le)}function de(se){if(se==",")return p(wn)}function Ae(se,we){if(se=="keyword b"&&we=="else")return p(Te("form","else"),He,Oe)}function ke(se,we){if(we=="await")return p(ke);if(se=="(")return p(Te(")"),Ie,Oe)}function Ie(se){return se=="var"?p(wn,be):se=="variable"?p(be):_(be)}function be(se,we){return se==")"?p():se==";"?p(be):we=="in"||we=="of"?(ee.marked="keyword",p($e,be)):_($e,be)}function yt(se,we){if(we=="*")return ee.marked="keyword",p(yt);if(se=="variable")return E(we),p(yt);if(se=="(")return p(Ce,Te(")"),R(xt,")"),Oe,ne,He,Pe);if(b&&we=="<")return p(Te(">"),R(dt,">"),Oe,yt)}function wt(se,we){if(we=="*")return ee.marked="keyword",p(wt);if(se=="variable")return E(we),p(wt);if(se=="(")return p(Ce,Te(")"),R(xt,")"),Oe,ne,Pe);if(b&&we=="<")return p(Te(">"),R(dt,">"),Oe,wt)}function Lt(se,we){if(se=="keyword"||se=="variable")return ee.marked="type",p(Lt);if(we=="<")return p(Te(">"),R(dt,">"),Oe)}function xt(se,we){return we=="@"&&p($e,xt),se=="spread"?p(xt):b&&Re(we)?(ee.marked="keyword",p(xt)):b&&se=="this"?p(q,Xt):_(Zt,q,Xt)}function jt(se,we){return se=="variable"?Nt(se,we):Dt(se,we)}function Nt(se,we){if(se=="variable")return E(we),p(Dt)}function Dt(se,we){if(we=="<")return p(Te(">"),R(dt,">"),Oe,Dt);if(we=="extends"||we=="implements"||b&&se==",")return we=="implements"&&(ee.marked="keyword"),p(b?ue:$e,Dt);if(se=="{")return p(Te("}"),nn,Oe)}function nn(se,we){if(se=="async"||se=="variable"&&(we=="static"||we=="get"||we=="set"||b&&Re(we))&&ee.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return ee.marked="keyword",p(nn);if(se=="variable"||ee.style=="keyword")return ee.marked="property",p(zn,nn);if(se=="number"||se=="string")return p(zn,nn);if(se=="[")return p($e,q,ze("]"),zn,nn);if(we=="*")return ee.marked="keyword",p(nn);if(b&&se=="(")return _(wt,nn);if(se==";"||se==",")return p(nn);if(se=="}")return p();if(we=="@")return p($e,nn)}function zn(se,we){if(we=="!"||we=="?")return p(zn);if(se==":")return p(ue,Xt);if(we=="=")return p(Le);var Ue=ee.state.lexical.prev,Ye=Ue&&Ue.info=="interface";return _(Ye?wt:yt)}function pi(se,we){return we=="*"?(ee.marked="keyword",p(Tn,ze(";"))):we=="default"?(ee.marked="keyword",p($e,ze(";"))):se=="{"?p(R(Yt,"}"),Tn,ze(";")):_(He)}function Yt(se,we){if(we=="as")return ee.marked="keyword",p(ze("variable"));if(se=="variable")return _(Le,Yt)}function rn(se){return se=="string"?p():se=="("?_($e):se=="."?_(oe):_(et,Hn,Tn)}function et(se,we){return se=="{"?D(et,"}"):(se=="variable"&&E(we),we=="*"&&(ee.marked="keyword"),p(Vi))}function Hn(se){if(se==",")return p(et,Hn)}function Vi(se,we){if(we=="as")return ee.marked="keyword",p(et)}function Tn(se,we){if(we=="from")return ee.marked="keyword",p($e)}function Gt(se){return se=="]"?p():_(R(Le,"]"))}function gn(){return _(Te("form"),Zt,ze("{"),Te("}"),R(ei,"}"),Oe,Oe)}function ei(){return _(Zt,Xt)}function mr(se,we){return se.lastType=="operator"||se.lastType==","||P.test(we.charAt(0))||/[,.]/.test(we.charAt(0))}function je(se,we,Ue){return we.tokenize==N&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(we.lastType)||we.lastType=="quasi"&&/\{\s*$/.test(se.string.slice(0,se.pos-(Ue||0)))}return{startState:function(se){var we={tokenize:N,lastType:"sof",cc:[],lexical:new le((se||0)-l,0,"block",!1),localVars:o.localVars,context:o.localVars&&new Me(null,null,!1),indented:se||0};return o.globalVars&&typeof o.globalVars=="object"&&(we.globalVars=o.globalVars),we},token:function(se,we){if(se.sol()&&(we.lexical.hasOwnProperty("align")||(we.lexical.align=!1),we.indented=se.indentation(),Q(se,we)),we.tokenize!=B&&se.eatSpace())return null;var Ue=we.tokenize(se,we);return G=="comment"?Ue:(we.lastType=G=="operator"&&(k=="++"||k=="--")?"incdec":G,re(we,Ue,G,k,se))},indent:function(se,we){if(se.tokenize==B||se.tokenize==V)return t.Pass;if(se.tokenize!=N)return 0;var Ue=we&&we.charAt(0),Ye=se.lexical,It;if(!/^\s*else\b/.test(we))for(var Qt=se.cc.length-1;Qt>=0;--Qt){var lt=se.cc[Qt];if(lt==Oe)Ye=Ye.prev;else if(lt!=Ae&&lt!=Pe)break}for(;(Ye.type=="stat"||Ye.type=="form")&&(Ue=="}"||(It=se.cc[se.cc.length-1])&&(It==oe||It==vt)&&!/^[,\.=+\-*:?[\(]/.test(we));)Ye=Ye.prev;c&&Ye.type==")"&&Ye.prev.type=="stat"&&(Ye=Ye.prev);var gr=Ye.type,ti=Ue==gr;return gr=="vardef"?Ye.indented+(se.lastType=="operator"||se.lastType==","?Ye.info.length+1:0):gr=="form"&&Ue=="{"?Ye.indented:gr=="form"?Ye.indented+l:gr=="stat"?Ye.indented+(mr(se,we)?c||l:0):Ye.info=="switch"&&!ti&&o.doubleIndentSwitch!=!1?Ye.indented+(/^(?:case|default)\b/.test(we)?l:2*l):Ye.align?Ye.column+(ti?0:1):Ye.indented+(ti?0:l)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:h,jsonMode:m,expressionAllowed:je,skipExpression:function(se){re(se,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var pd={},KH=wH(qH),iL=KH.jsx;function n0(){return n0=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},n0.apply(this,arguments)}function md(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?md=function(t){return typeof t}:md=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(i)}var sL=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)l.hasOwnProperty(c)&&(o[c]=l[c])},i(t,r)};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(pd,"__esModule",{value:!0});pd.UnControlled=QH=pd.Controlled=void 0;var oL=fd.exports,zi=typeof navigator=="undefined",Ws;zi||(Ws=Ql.exports);var q1=function(){function i(){}return i.equals=function(e,t){var r=this,o=Object.keys,l=md(e),c=md(t);return e&&t&&l==="object"&&l===c?o(e).length===o(t).length&&o(e).every(function(h){return r.equals(e[h],t[h])}):e===t},i}(),aL=function(){function i(e,t){this.editor=e,this.props=t}return i.prototype.delegateCursor=function(e,t,r){var o=this.editor.getDoc();r&&this.editor.focus(),t?o.setCursor(e):o.setCursor(e,null,{scroll:!1})},i.prototype.delegateScroll=function(e){this.editor.scrollTo(e.x,e.y)},i.prototype.delegateSelection=function(e,t){var r=this.editor.getDoc();r.setSelections(e),t&&this.editor.focus()},i.prototype.apply=function(e){e&&e.selection&&e.selection.ranges&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),e&&e.cursor&&this.delegateCursor(e.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1),e&&e.scroll&&this.delegateScroll(e.scroll)},i.prototype.applyNext=function(e,t,r){e&&e.selection&&e.selection.ranges&&t&&t.selection&&t.selection.ranges&&!q1.equals(e.selection.ranges,t.selection.ranges)&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),e&&e.cursor&&t&&t.cursor&&!q1.equals(e.cursor,t.cursor)&&this.delegateCursor(r.cursor||t.cursor,t.autoScroll||!1,t.autoCursor||!1),e&&e.scroll&&t&&t.scroll&&!q1.equals(e.scroll,t.scroll)&&this.delegateScroll(t.scroll)},i.prototype.applyUserDefined=function(e,t){t&&t.cursor&&this.delegateCursor(t.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1)},i.prototype.wire=function(e){var t=this;Object.keys(e||{}).filter(function(r){return/^on/.test(r)}).forEach(function(r){switch(r){case"onBlur":t.editor.on("blur",function(o,l){t.props.onBlur(t.editor,l)});break;case"onContextMenu":{t.editor.on("contextmenu",function(o,l){t.props.onContextMenu(t.editor,l)});break}case"onCopy":{t.editor.on("copy",function(o,l){t.props.onCopy(t.editor,l)});break}case"onCursor":t.editor.on("cursorActivity",function(o){t.props.onCursor(t.editor,t.editor.getDoc().getCursor())});break;case"onCursorActivity":t.editor.on("cursorActivity",function(o){t.props.onCursorActivity(t.editor)});break;case"onCut":{t.editor.on("cut",function(o,l){t.props.onCut(t.editor,l)});break}case"onDblClick":{t.editor.on("dblclick",function(o,l){t.props.onDblClick(t.editor,l)});break}case"onDragEnter":t.editor.on("dragenter",function(o,l){t.props.onDragEnter(t.editor,l)});break;case"onDragLeave":{t.editor.on("dragleave",function(o,l){t.props.onDragLeave(t.editor,l)});break}case"onDragOver":t.editor.on("dragover",function(o,l){t.props.onDragOver(t.editor,l)});break;case"onDragStart":{t.editor.on("dragstart",function(o,l){t.props.onDragStart(t.editor,l)});break}case"onDrop":t.editor.on("drop",function(o,l){t.props.onDrop(t.editor,l)});break;case"onFocus":t.editor.on("focus",function(o,l){t.props.onFocus(t.editor,l)});break;case"onGutterClick":t.editor.on("gutterClick",function(o,l,c,h){t.props.onGutterClick(t.editor,l,c,h)});break;case"onInputRead":t.editor.on("inputRead",function(o,l){t.props.onInputRead(t.editor,l)});break;case"onKeyDown":t.editor.on("keydown",function(o,l){t.props.onKeyDown(t.editor,l)});break;case"onKeyHandled":t.editor.on("keyHandled",function(o,l,c){t.props.onKeyHandled(t.editor,l,c)});break;case"onKeyPress":t.editor.on("keypress",function(o,l){t.props.onKeyPress(t.editor,l)});break;case"onKeyUp":t.editor.on("keyup",function(o,l){t.props.onKeyUp(t.editor,l)});break;case"onMouseDown":{t.editor.on("mousedown",function(o,l){t.props.onMouseDown(t.editor,l)});break}case"onPaste":{t.editor.on("paste",function(o,l){t.props.onPaste(t.editor,l)});break}case"onRenderLine":{t.editor.on("renderLine",function(o,l,c){t.props.onRenderLine(t.editor,l,c)});break}case"onScroll":t.editor.on("scroll",function(o){t.props.onScroll(t.editor,t.editor.getScrollInfo())});break;case"onSelection":t.editor.on("beforeSelectionChange",function(o,l){t.props.onSelection(t.editor,l)});break;case"onTouchStart":{t.editor.on("touchstart",function(o,l){t.props.onTouchStart(t.editor,l)});break}case"onUpdate":t.editor.on("update",function(o){t.props.onUpdate(t.editor)});break;case"onViewportChange":t.editor.on("viewportChange",function(o,l,c){t.props.onViewportChange(t.editor,l,c)});break}})},i}(),ZH=function(i){sL(e,i);function e(t){var r=i.call(this,t)||this;return zi||(r.applied=!1,r.appliedNext=!1,r.appliedUserDefined=!1,r.deferred=null,r.emulating=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=n0({},Ws.defaults,this.editor.options,o),c=Object.keys(l).some(function(h){return r.editor.getOption(h)!==l[h]});c&&Object.keys(l).forEach(function(h){o.hasOwnProperty(h)&&r.editor.getOption(h)!==l[h]&&(r.editor.setOption(h,l[h]),r.mirror.setOption(h,l[h]))}),this.hydrated||(this.deferred?this.resolveChange(t.value):this.initChange(t.value||"")),this.hydrated=!0},e.prototype.initChange=function(t){this.emulating=!0;var r=this.editor.getDoc(),o=r.lastLine(),l=r.getLine(r.lastLine()).length;r.replaceRange(t||"",{line:0,ch:0},{line:o,ch:l}),this.mirror.setValue(t),r.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},e.prototype.resolveChange=function(t){this.emulating=!0;var r=this.editor.getDoc();if(this.deferred.origin==="undo"?r.undo():this.deferred.origin==="redo"?r.redo():r.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),t&&t!==r.getValue()){var o=r.getCursor();r.setValue(t),r.setCursor(o)}this.emulating=!1,this.deferred=null},e.prototype.mirrorChange=function(t){var r=this.editor.getDoc();return t.origin==="undo"?(r.setHistory(this.mirror.getHistory()),this.mirror.undo()):t.origin==="redo"?(r.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(t.text,t.from,t.to,t.origin),this.mirror.getValue()},e.prototype.componentDidMount=function(){var t=this;zi||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&Ws.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=Ws(this.ref,this.props.options),this.shared=new aL(this.editor,this.props),this.mirror=Ws(function(){},this.props.options),this.editor.on("electricInput",function(){t.mirror.setHistory(t.editor.getDoc().getHistory())}),this.editor.on("cursorActivity",function(){t.mirror.setCursor(t.editor.getDoc().getCursor())}),this.editor.on("beforeChange",function(r,o){if(!t.emulating){o.cancel(),t.deferred=o;var l=t.mirrorChange(t.deferred);t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,t.deferred,l)}}),this.editor.on("change",function(r,o){!t.mounted||t.props.onChange&&t.props.onChange(t.editor,o,t.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(!zi){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1),!this.props.autoCursor&&this.props.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(t,this.props,r),this.appliedNext=!0),this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0}},e.prototype.componentWillUnmount=function(){zi||this.props.editorWillUnmount&&this.props.editorWillUnmount(Ws)},e.prototype.shouldComponentUpdate=function(t,r){return!zi},e.prototype.render=function(){var t=this;if(zi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return iL("div",{className:r,ref:function(l){return t.ref=l}})},e}(oL.Component),QH=pd.Controlled=ZH,JH=function(i){sL(e,i);function e(t){var r=i.call(this,t)||this;return zi||(r.applied=!1,r.appliedUserDefined=!1,r.continueChange=!1,r.detached=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1,r.onBeforeChangeCb=function(){r.continueChange=!0}),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=n0({},Ws.defaults,this.editor.options,o),c=Object.keys(l).some(function(b){return r.editor.getOption(b)!==l[b]});if(c&&Object.keys(l).forEach(function(b){o.hasOwnProperty(b)&&r.editor.getOption(b)!==l[b]&&r.editor.setOption(b,l[b])}),!this.hydrated){var h=this.editor.getDoc(),m=h.lastLine(),v=h.getLine(h.lastLine()).length;h.replaceRange(t.value||"",{line:0,ch:0},{line:m,ch:v})}this.hydrated=!0},e.prototype.componentDidMount=function(){var t=this;zi||(this.detached=this.props.detach===!0,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&Ws.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=Ws(this.ref,this.props.options),this.shared=new aL(this.editor,this.props),this.editor.on("beforeChange",function(r,o){t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,o,t.editor.getValue(),t.onBeforeChangeCb)}),this.editor.on("change",function(r,o){!t.mounted||!t.props.onChange||(t.props.onBeforeChange?t.continueChange&&t.props.onChange(t.editor,o,t.editor.getValue()):t.props.onChange(t.editor,o,t.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(this.detached&&this.props.detach===!1&&(this.detached=!1,t.editorDidAttach&&t.editorDidAttach(this.editor)),!this.detached&&this.props.detach===!0&&(this.detached=!0,t.editorDidDetach&&t.editorDidDetach(this.editor)),!(zi||this.detached)){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),!t.autoCursor&&t.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(t),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0)}},e.prototype.componentWillUnmount=function(){zi||this.props.editorWillUnmount&&this.props.editorWillUnmount(Ws)},e.prototype.shouldComponentUpdate=function(t,r){var o=!0;return zi&&(o=!1),this.detached&&t.detach&&(o=!1),o},e.prototype.render=function(){var t=this;if(zi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return iL("div",{className:r,ref:function(l){return t.ref=l}})},e}(oL.Component);pd.UnControlled=JH;var lL={exports:{}},is={},uL={exports:{}},cL={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){var e,t,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var m=null,v=null,b=function(){if(m!==null)try{var pe=i.unstable_now();m(!0,pe),m=null}catch(ve){throw setTimeout(b,0),ve}};e=function(pe){m!==null?setTimeout(e,0,pe):(m=pe,setTimeout(b,0))},t=function(pe,ve){v=setTimeout(pe,ve)},r=function(){clearTimeout(v)},i.unstable_shouldYield=function(){return!1},o=i.unstable_forceFrameRate=function(){}}else{var T=window.setTimeout,L=window.clearTimeout;if(typeof console!="undefined"){var P=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof P!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var O=!1,z=null,G=-1,k=5,A=0;i.unstable_shouldYield=function(){return i.unstable_now()>=A},o=function(){},i.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<pe?Math.floor(1e3/pe):5};var N=new MessageChannel,I=N.port2;N.port1.onmessage=function(){if(z!==null){var pe=i.unstable_now();A=pe+k;try{z(!0,pe)?I.postMessage(null):(O=!1,z=null)}catch(ve){throw I.postMessage(null),ve}}else O=!1},e=function(pe){z=pe,O||(O=!0,I.postMessage(null))},t=function(pe,ve){G=T(function(){pe(i.unstable_now())},ve)},r=function(){L(G),G=-1}}function B(pe,ve){var Ce=pe.length;pe.push(ve);e:for(;;){var _e=Ce-1>>>1,Pe=pe[_e];if(Pe!==void 0&&0<Q(Pe,ve))pe[_e]=ve,pe[Ce]=Pe,Ce=_e;else break e}}function V(pe){return pe=pe[0],pe===void 0?null:pe}function X(pe){var ve=pe[0];if(ve!==void 0){var Ce=pe.pop();if(Ce!==ve){pe[0]=Ce;e:for(var _e=0,Pe=pe.length;_e<Pe;){var Te=2*(_e+1)-1,Oe=pe[Te],ze=Te+1,He=pe[ze];if(Oe!==void 0&&0>Q(Oe,Ce))He!==void 0&&0>Q(He,Oe)?(pe[_e]=He,pe[ze]=Ce,_e=ze):(pe[_e]=Oe,pe[Te]=Ce,_e=Te);else if(He!==void 0&&0>Q(He,Ce))pe[_e]=He,pe[ze]=Ce,_e=ze;else break e}}return ve}return null}function Q(pe,ve){var Ce=pe.sortIndex-ve.sortIndex;return Ce!==0?Ce:pe.id-ve.id}var ae=[],le=[],he=1,re=null,ee=3,_=!1,p=!1,Z=!1;function E(pe){for(var ve=V(le);ve!==null;){if(ve.callback===null)X(le);else if(ve.startTime<=pe)X(le),ve.sortIndex=ve.expirationTime,B(ae,ve);else break;ve=V(le)}}function ye(pe){if(Z=!1,E(pe),!p)if(V(ae)!==null)p=!0,e(Re);else{var ve=V(le);ve!==null&&t(ye,ve.startTime-pe)}}function Re(pe,ve){p=!1,Z&&(Z=!1,r()),_=!0;var Ce=ee;try{for(E(ve),re=V(ae);re!==null&&(!(re.expirationTime>ve)||pe&&!i.unstable_shouldYield());){var _e=re.callback;if(typeof _e=="function"){re.callback=null,ee=re.priorityLevel;var Pe=_e(re.expirationTime<=ve);ve=i.unstable_now(),typeof Pe=="function"?re.callback=Pe:re===V(ae)&&X(ae),E(ve)}else X(ae);re=V(ae)}if(re!==null)var Te=!0;else{var Oe=V(le);Oe!==null&&t(ye,Oe.startTime-ve),Te=!1}return Te}finally{re=null,ee=Ce,_=!1}}var Me=o;i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(pe){pe.callback=null},i.unstable_continueExecution=function(){p||_||(p=!0,e(Re))},i.unstable_getCurrentPriorityLevel=function(){return ee},i.unstable_getFirstCallbackNode=function(){return V(ae)},i.unstable_next=function(pe){switch(ee){case 1:case 2:case 3:var ve=3;break;default:ve=ee}var Ce=ee;ee=ve;try{return pe()}finally{ee=Ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=Me,i.unstable_runWithPriority=function(pe,ve){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Ce=ee;ee=pe;try{return ve()}finally{ee=Ce}},i.unstable_scheduleCallback=function(pe,ve,Ce){var _e=i.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?_e+Ce:_e):Ce=_e,pe){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=Ce+Pe,pe={id:he++,callback:ve,priorityLevel:pe,startTime:Ce,expirationTime:Pe,sortIndex:-1},Ce>_e?(pe.sortIndex=Ce,B(le,pe),V(ae)===null&&pe===V(le)&&(Z?r():Z=!0,t(ye,Ce-_e))):(pe.sortIndex=Pe,B(ae,pe),p||_||(p=!0,e(Re))),pe},i.unstable_wrapCallback=function(pe){var ve=ee;return function(){var Ce=ee;ee=ve;try{return pe.apply(this,arguments)}finally{ee=Ce}}}})(cL);uL.exports=cL;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0=fd.exports,Un=U2,Lr=uL.exports;function tt(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r0)throw Error(tt(227));var fL=new Set,gd={};function Jl(i,e){Qc(i,e),Qc(i+"Capture",e)}function Qc(i,e){for(gd[i]=e,i=0;i<e.length;i++)fL.add(e[i])}var Co=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),e5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hL=Object.prototype.hasOwnProperty,dL={},pL={};function t5(i){return hL.call(pL,i)?!0:hL.call(dL,i)?!1:e5.test(i)?pL[i]=!0:(dL[i]=!0,!1)}function n5(i,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function r5(i,e,t,r){if(e===null||typeof e=="undefined"||n5(i,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hi(i,e,t,r,o,l,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=l,this.removeEmptyString=c}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){zr[i]=new hi(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];zr[e]=new hi(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){zr[i]=new hi(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){zr[i]=new hi(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){zr[i]=new hi(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){zr[i]=new hi(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){zr[i]=new hi(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){zr[i]=new hi(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){zr[i]=new hi(i,5,!1,i.toLowerCase(),null,!1,!1)});var X1=/[\-:]([a-z])/g;function Y1(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(X1,Y1);zr[e]=new hi(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(X1,Y1);zr[e]=new hi(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(X1,Y1);zr[e]=new hi(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){zr[i]=new hi(i,1,!1,i.toLowerCase(),null,!1,!1)});zr.xlinkHref=new hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){zr[i]=new hi(i,1,!1,i.toLowerCase(),null,!0,!0)});function K1(i,e,t,r){var o=zr.hasOwnProperty(e)?zr[e]:null,l=o!==null?o.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");l||(r5(e,t,o,r)&&(t=null),r||o===null?t5(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):o.mustUseProperty?i[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?i.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?i.setAttributeNS(r,e,t):i.setAttribute(e,t))))}var eu=r0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vd=60103,tu=60106,ba=60107,Z1=60108,yd=60114,Q1=60109,J1=60110,i0=60112,xd=60113,s0=60120,o0=60115,ew=60116,tw=60121,nw=60128,mL=60129,rw=60130,iw=60131;if(typeof Symbol=="function"&&Symbol.for){var Rr=Symbol.for;vd=Rr("react.element"),tu=Rr("react.portal"),ba=Rr("react.fragment"),Z1=Rr("react.strict_mode"),yd=Rr("react.profiler"),Q1=Rr("react.provider"),J1=Rr("react.context"),i0=Rr("react.forward_ref"),xd=Rr("react.suspense"),s0=Rr("react.suspense_list"),o0=Rr("react.memo"),ew=Rr("react.lazy"),tw=Rr("react.block"),Rr("react.scope"),nw=Rr("react.opaque.id"),mL=Rr("react.debug_trace_mode"),rw=Rr("react.offscreen"),iw=Rr("react.legacy_hidden")}var gL=typeof Symbol=="function"&&Symbol.iterator;function wd(i){return i===null||typeof i!="object"?null:(i=gL&&i[gL]||i["@@iterator"],typeof i=="function"?i:null)}var sw;function _d(i){if(sw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);sw=e&&e[1]||""}return`
`+sw+i}var ow=!1;function a0(i,e){if(!i||ow)return"";ow=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(i,[],e)}else{try{e.call()}catch(m){r=m}i.call(e.prototype)}else{try{throw Error()}catch(m){r=m}i()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=r.stack.split(`
`),c=o.length-1,h=l.length-1;1<=c&&0<=h&&o[c]!==l[h];)h--;for(;1<=c&&0<=h;c--,h--)if(o[c]!==l[h]){if(c!==1||h!==1)do if(c--,h--,0>h||o[c]!==l[h])return`
`+o[c].replace(" at new "," at ");while(1<=c&&0<=h);break}}}finally{ow=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?_d(i):""}function i5(i){switch(i.tag){case 5:return _d(i.type);case 16:return _d("Lazy");case 13:return _d("Suspense");case 19:return _d("SuspenseList");case 0:case 2:case 15:return i=a0(i.type,!1),i;case 11:return i=a0(i.type.render,!1),i;case 22:return i=a0(i.type._render,!1),i;case 1:return i=a0(i.type,!0),i;default:return""}}function Jc(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ba:return"Fragment";case tu:return"Portal";case yd:return"Profiler";case Z1:return"StrictMode";case xd:return"Suspense";case s0:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case J1:return(i.displayName||"Context")+".Consumer";case Q1:return(i._context.displayName||"Context")+".Provider";case i0:var e=i.render;return e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case o0:return Jc(i.type);case tw:return Jc(i._render);case ew:e=i._payload,i=i._init;try{return Jc(i(e))}catch{}}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"object":case"string":case"undefined":return i;default:return""}}function vL(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s5(i){var e=vL(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),r=""+i[e];if(!i.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,l=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(c){r=""+c,l.call(this,c)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function l0(i){i._valueTracker||(i._valueTracker=s5(i))}function yL(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return i&&(r=vL(i)?i.checked?"true":"false":i.value),i=r,i!==t?(e.setValue(i),!0):!1}function u0(i){if(i=i||(typeof document!="undefined"?document:void 0),typeof i=="undefined")return null;try{return i.activeElement||i.body}catch{return i.body}}function aw(i,e){var t=e.checked;return Un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:i._wrapperState.initialChecked})}function xL(i,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Sa(e.value!=null?e.value:t),i._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wL(i,e){e=e.checked,e!=null&&K1(i,"checked",e,!1)}function lw(i,e){wL(i,e);var t=Sa(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(r==="submit"||r==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?uw(i,e.type,t):e.hasOwnProperty("defaultValue")&&uw(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function _L(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function uw(i,e,t){(e!=="number"||u0(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}function o5(i){var e="";return r0.Children.forEach(i,function(t){t!=null&&(e+=t)}),e}function cw(i,e){return i=Un({children:void 0},e),(e=o5(e.children))&&(i.children=e),i}function ef(i,e,t,r){if(i=i.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<i.length;t++)o=e.hasOwnProperty("$"+i[t].value),i[t].selected!==o&&(i[t].selected=o),o&&r&&(i[t].defaultSelected=!0)}else{for(t=""+Sa(t),e=null,o=0;o<i.length;o++){if(i[o].value===t){i[o].selected=!0,r&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function fw(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Un({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function bL(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(tt(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(tt(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:Sa(t)}}function SL(i,e){var t=Sa(e.value),r=Sa(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),r!=null&&(i.defaultValue=""+r)}function ML(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}var hw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function TL(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dw(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?TL(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var c0,EL=function(i){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return i(e,t,r,o)})}:i}(function(i,e){if(i.namespaceURI!==hw.svg||"innerHTML"in i)i.innerHTML=e;else{for(c0=c0||document.createElement("div"),c0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=c0.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function bd(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var Sd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a5=["Webkit","ms","Moz","O"];Object.keys(Sd).forEach(function(i){a5.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Sd[e]=Sd[i]})});function AL(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sd.hasOwnProperty(i)&&Sd[i]?(""+e).trim():e+"px"}function CL(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=AL(t,e[t],r);t==="float"&&(t="cssFloat"),r?i.setProperty(t,o):i[t]=o}}var l5=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pw(i,e){if(e){if(l5[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function mw(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function gw(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vw=null,tf=null,nf=null;function LL(i){if(i=Gd(i)){if(typeof vw!="function")throw Error(tt(280));var e=i.stateNode;e&&(e=C0(e),vw(i.stateNode,i.type,e))}}function RL(i){tf?nf?nf.push(i):nf=[i]:tf=i}function IL(){if(tf){var i=tf,e=nf;if(nf=tf=null,LL(i),e)for(i=0;i<e.length;i++)LL(e[i])}}function yw(i,e){return i(e)}function PL(i,e,t,r,o){return i(e,t,r,o)}function xw(){}var kL=yw,nu=!1,ww=!1;function _w(){(tf!==null||nf!==null)&&(xw(),IL())}function u5(i,e,t){if(ww)return i(e,t);ww=!0;try{return kL(i,e,t)}finally{ww=!1,_w()}}function Md(i,e){var t=i.stateNode;if(t===null)return null;var r=C0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(i=i.type,r=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!r;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(tt(231,e,typeof t));return t}var bw=!1;if(Co)try{var Td={};Object.defineProperty(Td,"passive",{get:function(){bw=!0}}),window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{bw=!1}function c5(i,e,t,r,o,l,c,h,m){var v=Array.prototype.slice.call(arguments,3);try{e.apply(t,v)}catch(b){this.onError(b)}}var Ed=!1,f0=null,h0=!1,Sw=null,f5={onError:function(i){Ed=!0,f0=i}};function h5(i,e,t,r,o,l,c,h,m){Ed=!1,f0=null,c5.apply(f5,arguments)}function d5(i,e,t,r,o,l,c,h,m){if(h5.apply(this,arguments),Ed){if(Ed){var v=f0;Ed=!1,f0=null}else throw Error(tt(198));h0||(h0=!0,Sw=v)}}function ru(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,(e.flags&1026)!=0&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function OL(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function DL(i){if(ru(i)!==i)throw Error(tt(188))}function p5(i){var e=i.alternate;if(!e){if(e=ru(i),e===null)throw Error(tt(188));return e!==i?null:i}for(var t=i,r=e;;){var o=t.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===t)return DL(o),i;if(l===r)return DL(o),e;l=l.sibling}throw Error(tt(188))}if(t.return!==r.return)t=o,r=l;else{for(var c=!1,h=o.child;h;){if(h===t){c=!0,t=o,r=l;break}if(h===r){c=!0,r=o,t=l;break}h=h.sibling}if(!c){for(h=l.child;h;){if(h===t){c=!0,t=l,r=o;break}if(h===r){c=!0,r=l,t=o;break}h=h.sibling}if(!c)throw Error(tt(189))}}if(t.alternate!==r)throw Error(tt(190))}if(t.tag!==3)throw Error(tt(188));return t.stateNode.current===t?i:e}function NL(i){if(i=p5(i),!i)return null;for(var e=i;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===i)break;for(;!e.sibling;){if(!e.return||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function FL(i,e){for(var t=i.alternate;e!==null;){if(e===i||e===t)return!0;e=e.return}return!1}var BL,Mw,UL,zL,Tw=!1,js=[],Ma=null,Ta=null,Ea=null,Ad=new Map,Cd=new Map,Ld=[],HL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ew(i,e,t,r,o){return{blockedOn:i,domEventName:e,eventSystemFlags:t|16,nativeEvent:o,targetContainers:[r]}}function GL(i,e){switch(i){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":Ad.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cd.delete(e.pointerId)}}function Rd(i,e,t,r,o,l){return i===null||i.nativeEvent!==l?(i=Ew(e,t,r,o,l),e!==null&&(e=Gd(e),e!==null&&Mw(e)),i):(i.eventSystemFlags|=r,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function m5(i,e,t,r,o){switch(e){case"focusin":return Ma=Rd(Ma,i,e,t,r,o),!0;case"dragenter":return Ta=Rd(Ta,i,e,t,r,o),!0;case"mouseover":return Ea=Rd(Ea,i,e,t,r,o),!0;case"pointerover":var l=o.pointerId;return Ad.set(l,Rd(Ad.get(l)||null,i,e,t,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Cd.set(l,Rd(Cd.get(l)||null,i,e,t,r,o)),!0}return!1}function g5(i){var e=iu(i.target);if(e!==null){var t=ru(e);if(t!==null){if(e=t.tag,e===13){if(e=OL(t),e!==null){i.blockedOn=e,zL(i.lanePriority,function(){Lr.unstable_runWithPriority(i.priority,function(){UL(t)})});return}}else if(e===3&&t.stateNode.hydrate){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function d0(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Pw(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t!==null)return e=Gd(t),e!==null&&Mw(e),i.blockedOn=t,!1;e.shift()}return!0}function VL(i,e,t){d0(i)&&t.delete(e)}function v5(){for(Tw=!1;0<js.length;){var i=js[0];if(i.blockedOn!==null){i=Gd(i.blockedOn),i!==null&&BL(i);break}for(var e=i.targetContainers;0<e.length;){var t=Pw(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t!==null){i.blockedOn=t;break}e.shift()}i.blockedOn===null&&js.shift()}Ma!==null&&d0(Ma)&&(Ma=null),Ta!==null&&d0(Ta)&&(Ta=null),Ea!==null&&d0(Ea)&&(Ea=null),Ad.forEach(VL),Cd.forEach(VL)}function Id(i,e){i.blockedOn===e&&(i.blockedOn=null,Tw||(Tw=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,v5)))}function $L(i){function e(o){return Id(o,i)}if(0<js.length){Id(js[0],i);for(var t=1;t<js.length;t++){var r=js[t];r.blockedOn===i&&(r.blockedOn=null)}}for(Ma!==null&&Id(Ma,i),Ta!==null&&Id(Ta,i),Ea!==null&&Id(Ea,i),Ad.forEach(e),Cd.forEach(e),t=0;t<Ld.length;t++)r=Ld[t],r.blockedOn===i&&(r.blockedOn=null);for(;0<Ld.length&&(t=Ld[0],t.blockedOn===null);)g5(t),t.blockedOn===null&&Ld.shift()}function p0(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var rf={animationend:p0("Animation","AnimationEnd"),animationiteration:p0("Animation","AnimationIteration"),animationstart:p0("Animation","AnimationStart"),transitionend:p0("Transition","TransitionEnd")},Aw={},WL={};Co&&(WL=document.createElement("div").style,"AnimationEvent"in window||(delete rf.animationend.animation,delete rf.animationiteration.animation,delete rf.animationstart.animation),"TransitionEvent"in window||delete rf.transitionend.transition);function m0(i){if(Aw[i])return Aw[i];if(!rf[i])return i;var e=rf[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in WL)return Aw[i]=e[t];return i}var jL=m0("animationend"),qL=m0("animationiteration"),XL=m0("animationstart"),YL=m0("transitionend"),KL=new Map,Cw=new Map,y5=["abort","abort",jL,"animationEnd",qL,"animationIteration",XL,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",YL,"transitionEnd","waiting","waiting"];function Lw(i,e){for(var t=0;t<i.length;t+=2){var r=i[t],o=i[t+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Cw.set(r,e),KL.set(r,o),Jl(o,[r])}}var x5=Lr.unstable_now;x5();var Cn=8;function sf(i){if((1&i)!=0)return Cn=15,1;if((2&i)!=0)return Cn=14,2;if((4&i)!=0)return Cn=13,4;var e=24&i;return e!==0?(Cn=12,e):(i&32)!=0?(Cn=11,32):(e=192&i,e!==0?(Cn=10,e):(i&256)!=0?(Cn=9,256):(e=3584&i,e!==0?(Cn=8,e):(i&4096)!=0?(Cn=7,4096):(e=4186112&i,e!==0?(Cn=6,e):(e=62914560&i,e!==0?(Cn=5,e):i&67108864?(Cn=4,67108864):(i&134217728)!=0?(Cn=3,134217728):(e=805306368&i,e!==0?(Cn=2,e):(1073741824&i)!=0?(Cn=1,1073741824):(Cn=8,i))))))}function w5(i){switch(i){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function _5(i){switch(i){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(tt(358,i))}}function Pd(i,e){var t=i.pendingLanes;if(t===0)return Cn=0;var r=0,o=0,l=i.expiredLanes,c=i.suspendedLanes,h=i.pingedLanes;if(l!==0)r=l,o=Cn=15;else if(l=t&134217727,l!==0){var m=l&~c;m!==0?(r=sf(m),o=Cn):(h&=l,h!==0&&(r=sf(h),o=Cn))}else l=t&~c,l!==0?(r=sf(l),o=Cn):h!==0&&(r=sf(h),o=Cn);if(r===0)return 0;if(r=31-Aa(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&c)==0){if(sf(e),o<=Cn)return e;Cn=o}if(e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=r;0<e;)t=31-Aa(e),o=1<<t,r|=i[t],e&=~o;return r}function ZL(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function g0(i,e){switch(i){case 15:return 1;case 14:return 2;case 12:return i=of(24&~e),i===0?g0(10,e):i;case 10:return i=of(192&~e),i===0?g0(8,e):i;case 8:return i=of(3584&~e),i===0&&(i=of(4186112&~e),i===0&&(i=512)),i;case 2:return e=of(805306368&~e),e===0&&(e=268435456),e}throw Error(tt(358,i))}function of(i){return i&-i}function Rw(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function v0(i,e,t){i.pendingLanes|=e;var r=e-1;i.suspendedLanes&=r,i.pingedLanes&=r,i=i.eventTimes,e=31-Aa(e),i[e]=t}var Aa=Math.clz32?Math.clz32:M5,b5=Math.log,S5=Math.LN2;function M5(i){return i===0?32:31-(b5(i)/S5|0)|0}var T5=Lr.unstable_UserBlockingPriority,E5=Lr.unstable_runWithPriority,y0=!0;function A5(i,e,t,r){nu||xw();var o=Iw,l=nu;nu=!0;try{PL(o,i,e,t,r)}finally{(nu=l)||_w()}}function C5(i,e,t,r){E5(T5,Iw.bind(null,i,e,t,r))}function Iw(i,e,t,r){if(y0){var o;if((o=(e&4)==0)&&0<js.length&&-1<HL.indexOf(i))i=Ew(null,i,e,t,r),js.push(i);else{var l=Pw(i,e,t,r);if(l===null)o&&GL(i,r);else{if(o){if(-1<HL.indexOf(i)){i=Ew(l,i,e,t,r),js.push(i);return}if(m5(l,i,e,t,r))return;GL(i,r)}AR(i,e,r,null,t)}}}}function Pw(i,e,t,r){var o=gw(r);if(o=iu(o),o!==null){var l=ru(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=OL(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.hydrate)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return AR(i,e,r,o,t),null}var Ca=null,kw=null,x0=null;function QL(){if(x0)return x0;var i,e=kw,t=e.length,r,o="value"in Ca?Ca.value:Ca.textContent,l=o.length;for(i=0;i<t&&e[i]===o[i];i++);var c=t-i;for(r=1;r<=c&&e[t-r]===o[l-r];r++);return x0=o.slice(i,1<r?1-r:void 0)}function w0(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function _0(){return!0}function JL(){return!1}function Hi(i){function e(t,r,o,l,c){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(t=i[h],this[h]=t?t(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?_0:JL,this.isPropagationStopped=JL,this}return Un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=_0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=_0)},persist:function(){},isPersistent:_0}),e}var af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ow=Hi(af),kd=Un({},af,{view:0,detail:0}),L5=Hi(kd),Dw,Nw,Od,b0=Un({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bw,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Od&&(Od&&i.type==="mousemove"?(Dw=i.screenX-Od.screenX,Nw=i.screenY-Od.screenY):Nw=Dw=0,Od=i),Dw)},movementY:function(i){return"movementY"in i?i.movementY:Nw}}),eR=Hi(b0),R5=Un({},b0,{dataTransfer:0}),I5=Hi(R5),P5=Un({},kd,{relatedTarget:0}),Fw=Hi(P5),k5=Un({},af,{animationName:0,elapsedTime:0,pseudoElement:0}),O5=Hi(k5),D5=Un({},af,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),N5=Hi(D5),F5=Un({},af,{data:0}),tR=Hi(F5),B5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H5(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=z5[i])?!!e[i]:!1}function Bw(){return H5}var G5=Un({},kd,{key:function(i){if(i.key){var e=B5[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=w0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?U5[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bw,charCode:function(i){return i.type==="keypress"?w0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?w0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),V5=Hi(G5),$5=Un({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nR=Hi($5),W5=Un({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bw}),j5=Hi(W5),q5=Un({},af,{propertyName:0,elapsedTime:0,pseudoElement:0}),X5=Hi(q5),Y5=Un({},b0,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K5=Hi(Y5),Z5=[9,13,27,32],Uw=Co&&"CompositionEvent"in window,Dd=null;Co&&"documentMode"in document&&(Dd=document.documentMode);var Q5=Co&&"TextEvent"in window&&!Dd,rR=Co&&(!Uw||Dd&&8<Dd&&11>=Dd),iR=String.fromCharCode(32),sR=!1;function oR(i,e){switch(i){case"keyup":return Z5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aR(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var lf=!1;function J5(i,e){switch(i){case"compositionend":return aR(e);case"keypress":return e.which!==32?null:(sR=!0,iR);case"textInput":return i=e.data,i===iR&&sR?null:i;default:return null}}function eG(i,e){if(lf)return i==="compositionend"||!Uw&&oR(i,e)?(i=QL(),x0=kw=Ca=null,lf=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rR&&e.locale!=="ko"?null:e.data;default:return null}}var tG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lR(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!tG[i.type]:e==="textarea"}function uR(i,e,t,r){RL(r),e=M0(e,"onChange"),0<e.length&&(t=new Ow("onChange","change",null,t,r),i.push({event:t,listeners:e}))}var Nd=null,Fd=null;function nG(i){bR(i,0)}function S0(i){var e=df(i);if(yL(e))return i}function rG(i,e){if(i==="change")return e}var cR=!1;if(Co){var zw;if(Co){var Hw="oninput"in document;if(!Hw){var fR=document.createElement("div");fR.setAttribute("oninput","return;"),Hw=typeof fR.oninput=="function"}zw=Hw}else zw=!1;cR=zw&&(!document.documentMode||9<document.documentMode)}function hR(){Nd&&(Nd.detachEvent("onpropertychange",dR),Fd=Nd=null)}function dR(i){if(i.propertyName==="value"&&S0(Fd)){var e=[];if(uR(e,Fd,i,gw(i)),i=nG,nu)i(e);else{nu=!0;try{yw(i,e)}finally{nu=!1,_w()}}}}function iG(i,e,t){i==="focusin"?(hR(),Nd=e,Fd=t,Nd.attachEvent("onpropertychange",dR)):i==="focusout"&&hR()}function sG(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return S0(Fd)}function oG(i,e){if(i==="click")return S0(e)}function aG(i,e){if(i==="input"||i==="change")return S0(e)}function lG(i,e){return i===e&&(i!==0||1/i==1/e)||i!==i&&e!==e}var ss=typeof Object.is=="function"?Object.is:lG,uG=Object.prototype.hasOwnProperty;function Bd(i,e){if(ss(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!uG.call(e,t[r])||!ss(i[t[r]],e[t[r]]))return!1;return!0}function pR(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mR(i,e){var t=pR(i);i=0;for(var r;t;){if(t.nodeType===3){if(r=i+t.textContent.length,i<=e&&r>=e)return{node:t,offset:e-i};i=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=pR(t)}}function gR(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?gR(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function vR(){for(var i=window,e=u0();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=u0(i.document)}return e}function Gw(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}var cG=Co&&"documentMode"in document&&11>=document.documentMode,uf=null,Vw=null,Ud=null,$w=!1;function yR(i,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$w||uf==null||uf!==u0(r)||(r=uf,"selectionStart"in r&&Gw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ud&&Bd(Ud,r)||(Ud=r,r=M0(Vw,"onSelect"),0<r.length&&(e=new Ow("onSelect","select",null,e,t),i.push({event:e,listeners:r}),e.target=uf)))}Lw("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Lw("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Lw(y5,2);for(var xR="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ww=0;Ww<xR.length;Ww++)Cw.set(xR[Ww],0);Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wR=new Set("cancel close invalid load scroll toggle".split(" ").concat(zd));function _R(i,e,t){var r=i.type||"unknown-event";i.currentTarget=t,d5(r,e,void 0,i),i.currentTarget=null}function bR(i,e){e=(e&4)!=0;for(var t=0;t<i.length;t++){var r=i[t],o=r.event;r=r.listeners;e:{var l=void 0;if(e)for(var c=r.length-1;0<=c;c--){var h=r[c],m=h.instance,v=h.currentTarget;if(h=h.listener,m!==l&&o.isPropagationStopped())break e;_R(o,h,v),l=m}else for(c=0;c<r.length;c++){if(h=r[c],m=h.instance,v=h.currentTarget,h=h.listener,m!==l&&o.isPropagationStopped())break e;_R(o,h,v),l=m}}}if(h0)throw i=Sw,h0=!1,Sw=null,i}function Pn(i,e){var t=kR(e),r=i+"__bubble";t.has(r)||(ER(e,i,2,!1),t.add(r))}var SR="_reactListening"+Math.random().toString(36).slice(2);function MR(i){i[SR]||(i[SR]=!0,fL.forEach(function(e){wR.has(e)||TR(e,!1,i,null),TR(e,!0,i,null)}))}function TR(i,e,t,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,l=t;if(i==="selectionchange"&&t.nodeType!==9&&(l=t.ownerDocument),r!==null&&!e&&wR.has(i)){if(i!=="scroll")return;o|=2,l=r}var c=kR(l),h=i+"__"+(e?"capture":"bubble");c.has(h)||(e&&(o|=4),ER(l,i,o,e),c.add(h))}function ER(i,e,t,r){var o=Cw.get(e);switch(o===void 0?2:o){case 0:o=A5;break;case 1:o=C5;break;default:o=Iw}t=o.bind(null,e,t,i),o=void 0,!bw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?i.addEventListener(e,t,{capture:!0,passive:o}):i.addEventListener(e,t,!0):o!==void 0?i.addEventListener(e,t,{passive:o}):i.addEventListener(e,t,!1)}function AR(i,e,t,r,o){var l=r;if((e&1)==0&&(e&2)==0&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var h=r.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(c===4)for(c=r.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;c=c.return}for(;h!==null;){if(c=iu(h),c===null)return;if(m=c.tag,m===5||m===6){r=l=c;continue e}h=h.parentNode}}r=r.return}u5(function(){var v=l,b=gw(t),T=[];e:{var L=KL.get(i);if(L!==void 0){var P=Ow,O=i;switch(i){case"keypress":if(w0(t)===0)break e;case"keydown":case"keyup":P=V5;break;case"focusin":O="focus",P=Fw;break;case"focusout":O="blur",P=Fw;break;case"beforeblur":case"afterblur":P=Fw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=eR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=I5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=j5;break;case jL:case qL:case XL:P=O5;break;case YL:P=X5;break;case"scroll":P=L5;break;case"wheel":P=K5;break;case"copy":case"cut":case"paste":P=N5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=nR}var z=(e&4)!=0,G=!z&&i==="scroll",k=z?L!==null?L+"Capture":null:L;z=[];for(var A=v,N;A!==null;){N=A;var I=N.stateNode;if(N.tag===5&&I!==null&&(N=I,k!==null&&(I=Md(A,k),I!=null&&z.push(Hd(A,I,N)))),G)break;A=A.return}0<z.length&&(L=new P(L,O,null,t,b),T.push({event:L,listeners:z}))}}if((e&7)==0){e:{if(L=i==="mouseover"||i==="pointerover",P=i==="mouseout"||i==="pointerout",L&&(e&16)==0&&(O=t.relatedTarget||t.fromElement)&&(iu(O)||O[hf]))break e;if((P||L)&&(L=b.window===b?b:(L=b.ownerDocument)?L.defaultView||L.parentWindow:window,P?(O=t.relatedTarget||t.toElement,P=v,O=O?iu(O):null,O!==null&&(G=ru(O),O!==G||O.tag!==5&&O.tag!==6)&&(O=null)):(P=null,O=v),P!==O)){if(z=eR,I="onMouseLeave",k="onMouseEnter",A="mouse",(i==="pointerout"||i==="pointerover")&&(z=nR,I="onPointerLeave",k="onPointerEnter",A="pointer"),G=P==null?L:df(P),N=O==null?L:df(O),L=new z(I,A+"leave",P,t,b),L.target=G,L.relatedTarget=N,I=null,iu(b)===v&&(z=new z(k,A+"enter",O,t,b),z.target=N,z.relatedTarget=G,I=z),G=I,P&&O)t:{for(z=P,k=O,A=0,N=z;N;N=cf(N))A++;for(N=0,I=k;I;I=cf(I))N++;for(;0<A-N;)z=cf(z),A--;for(;0<N-A;)k=cf(k),N--;for(;A--;){if(z===k||k!==null&&z===k.alternate)break t;z=cf(z),k=cf(k)}z=null}else z=null;P!==null&&CR(T,L,P,z,!1),O!==null&&G!==null&&CR(T,G,O,z,!0)}}e:{if(L=v?df(v):window,P=L.nodeName&&L.nodeName.toLowerCase(),P==="select"||P==="input"&&L.type==="file")var B=rG;else if(lR(L))if(cR)B=aG;else{B=sG;var V=iG}else(P=L.nodeName)&&P.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(B=oG);if(B&&(B=B(i,v))){uR(T,B,t,b);break e}V&&V(i,L,v),i==="focusout"&&(V=L._wrapperState)&&V.controlled&&L.type==="number"&&uw(L,"number",L.value)}switch(V=v?df(v):window,i){case"focusin":(lR(V)||V.contentEditable==="true")&&(uf=V,Vw=v,Ud=null);break;case"focusout":Ud=Vw=uf=null;break;case"mousedown":$w=!0;break;case"contextmenu":case"mouseup":case"dragend":$w=!1,yR(T,t,b);break;case"selectionchange":if(cG)break;case"keydown":case"keyup":yR(T,t,b)}var X;if(Uw)e:{switch(i){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else lf?oR(i,t)&&(Q="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(Q="onCompositionStart");Q&&(rR&&t.locale!=="ko"&&(lf||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&lf&&(X=QL()):(Ca=b,kw="value"in Ca?Ca.value:Ca.textContent,lf=!0)),V=M0(v,Q),0<V.length&&(Q=new tR(Q,i,null,t,b),T.push({event:Q,listeners:V}),X?Q.data=X:(X=aR(t),X!==null&&(Q.data=X)))),(X=Q5?J5(i,t):eG(i,t))&&(v=M0(v,"onBeforeInput"),0<v.length&&(b=new tR("onBeforeInput","beforeinput",null,t,b),T.push({event:b,listeners:v}),b.data=X))}bR(T,e)})}function Hd(i,e,t){return{instance:i,listener:e,currentTarget:t}}function M0(i,e){for(var t=e+"Capture",r=[];i!==null;){var o=i,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Md(i,t),l!=null&&r.unshift(Hd(i,l,o)),l=Md(i,e),l!=null&&r.push(Hd(i,l,o))),i=i.return}return r}function cf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function CR(i,e,t,r,o){for(var l=e._reactName,c=[];t!==null&&t!==r;){var h=t,m=h.alternate,v=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&v!==null&&(h=v,o?(m=Md(t,l),m!=null&&c.unshift(Hd(t,m,h))):o||(m=Md(t,l),m!=null&&c.push(Hd(t,m,h)))),t=t.return}c.length!==0&&i.push({event:e,listeners:c})}function T0(){}var jw=null,qw=null;function LR(i,e){switch(i){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Xw(i,e){return i==="textarea"||i==="option"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RR=typeof setTimeout=="function"?setTimeout:void 0,fG=typeof clearTimeout=="function"?clearTimeout:void 0;function Yw(i){i.nodeType===1?i.textContent="":i.nodeType===9&&(i=i.body,i!=null&&(i.textContent=""))}function ff(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break}return i}function IR(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Kw=0;function hG(i){return{$$typeof:nw,toString:i,valueOf:i}}var E0=Math.random().toString(36).slice(2),La="__reactFiber$"+E0,A0="__reactProps$"+E0,hf="__reactContainer$"+E0,PR="__reactEvents$"+E0;function iu(i){var e=i[La];if(e)return e;for(var t=i.parentNode;t;){if(e=t[hf]||t[La]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=IR(i);i!==null;){if(t=i[La])return t;i=IR(i)}return e}i=t,t=i.parentNode}return null}function Gd(i){return i=i[La]||i[hf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function df(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(tt(33))}function C0(i){return i[A0]||null}function kR(i){var e=i[PR];return e===void 0&&(e=i[PR]=new Set),e}var Zw=[],pf=-1;function Ra(i){return{current:i}}function kn(i){0>pf||(i.current=Zw[pf],Zw[pf]=null,pf--)}function Kn(i,e){pf++,Zw[pf]=i.current,i.current=e}var Ia={},Kr=Ra(Ia),Ei=Ra(!1),su=Ia;function mf(i,e){var t=i.type.contextTypes;if(!t)return Ia;var r=i.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in t)o[l]=e[l];return r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(i){return i=i.childContextTypes,i!=null}function L0(){kn(Ei),kn(Kr)}function OR(i,e,t){if(Kr.current!==Ia)throw Error(tt(168));Kn(Kr,e),Kn(Ei,t)}function DR(i,e,t){var r=i.stateNode;if(i=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in i))throw Error(tt(108,Jc(e)||"Unknown",o));return Un({},t,r)}function R0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ia,su=Kr.current,Kn(Kr,i),Kn(Ei,Ei.current),!0}function NR(i,e,t){var r=i.stateNode;if(!r)throw Error(tt(169));t?(i=DR(i,e,su),r.__reactInternalMemoizedMergedChildContext=i,kn(Ei),kn(Kr),Kn(Kr,i)):kn(Ei),Kn(Ei,t)}var Qw=null,ou=null,dG=Lr.unstable_runWithPriority,Jw=Lr.unstable_scheduleCallback,e_=Lr.unstable_cancelCallback,pG=Lr.unstable_shouldYield,FR=Lr.unstable_requestPaint,t_=Lr.unstable_now,mG=Lr.unstable_getCurrentPriorityLevel,I0=Lr.unstable_ImmediatePriority,BR=Lr.unstable_UserBlockingPriority,UR=Lr.unstable_NormalPriority,zR=Lr.unstable_LowPriority,HR=Lr.unstable_IdlePriority,n_={},gG=FR!==void 0?FR:function(){},Lo=null,P0=null,r_=!1,GR=t_(),Zr=1e4>GR?t_:function(){return t_()-GR};function gf(){switch(mG()){case I0:return 99;case BR:return 98;case UR:return 97;case zR:return 96;case HR:return 95;default:throw Error(tt(332))}}function VR(i){switch(i){case 99:return I0;case 98:return BR;case 97:return UR;case 96:return zR;case 95:return HR;default:throw Error(tt(332))}}function au(i,e){return i=VR(i),dG(i,e)}function Vd(i,e,t){return i=VR(i),Jw(i,e,t)}function qs(){if(P0!==null){var i=P0;P0=null,e_(i)}$R()}function $R(){if(!r_&&Lo!==null){r_=!0;var i=0;try{var e=Lo;au(99,function(){for(;i<e.length;i++){var t=e[i];do t=t(!0);while(t!==null)}}),Lo=null}catch(t){throw Lo!==null&&(Lo=Lo.slice(i+1)),Jw(I0,qs),t}finally{r_=!1}}}var vG=eu.ReactCurrentBatchConfig;function Ms(i,e){if(i&&i.defaultProps){e=Un({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var k0=Ra(null),O0=null,vf=null,D0=null;function i_(){D0=vf=O0=null}function s_(i){var e=k0.current;kn(k0),i.type._context._currentValue=e}function WR(i,e){for(;i!==null;){var t=i.alternate;if((i.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else i.childLanes|=e,t!==null&&(t.childLanes|=e);i=i.return}}function yf(i,e){O0=i,D0=vf=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&e)!=0&&(Ts=!0),i.firstContext=null)}function os(i,e){if(D0!==i&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(D0=i,e=1073741823),e={context:i,observedBits:e,next:null},vf===null){if(O0===null)throw Error(tt(308));vf=e,O0.dependencies={lanes:0,firstContext:e,responders:null}}else vf=vf.next=e;return i._currentValue}var Pa=!1;function o_(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function jR(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ka(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(i,e){if(i=i.updateQueue,i!==null){i=i.shared;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}}function qR(i,e){var t=i.updateQueue,r=i.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,l=null;if(t=t.firstBaseUpdate,t!==null){do{var c={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};l===null?o=l=c:l=l.next=c,t=t.next}while(t!==null);l===null?o=l=e:l=l.next=e}else o=l=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function $d(i,e,t,r){var o=i.updateQueue;Pa=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var m=h,v=m.next;m.next=null,c===null?l=v:c.next=v,c=m;var b=i.alternate;if(b!==null){b=b.updateQueue;var T=b.lastBaseUpdate;T!==c&&(T===null?b.firstBaseUpdate=v:T.next=v,b.lastBaseUpdate=m)}}if(l!==null){T=o.baseState,c=0,b=v=m=null;do{h=l.lane;var L=l.eventTime;if((r&h)===h){b!==null&&(b=b.next={eventTime:L,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=i,O=l;switch(h=e,L=t,O.tag){case 1:if(P=O.payload,typeof P=="function"){T=P.call(L,T,h);break e}T=P;break e;case 3:P.flags=P.flags&-4097|64;case 0:if(P=O.payload,h=typeof P=="function"?P.call(L,T,h):P,h==null)break e;T=Un({},T,h);break e;case 2:Pa=!0}}l.callback!==null&&(i.flags|=32,h=o.effects,h===null?o.effects=[l]:h.push(l))}else L={eventTime:L,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},b===null?(v=b=L,m=T):b=b.next=L,c|=h;if(l=l.next,l===null){if(h=o.shared.pending,h===null)break;l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);b===null&&(m=T),o.baseState=m,o.firstBaseUpdate=v,o.lastBaseUpdate=b,np|=c,i.lanes=c,i.memoizedState=T}}function XR(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var r=i[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(tt(191,o));o.call(r)}}}var YR=new r0.Component().refs;function N0(i,e,t,r){e=i.memoizedState,t=t(r,e),t=t==null?e:Un({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var F0={isMounted:function(i){return(i=i._reactInternals)?ru(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var r=Gi(),o=Fa(i),l=ka(r,o);l.payload=e,t!=null&&(l.callback=t),Oa(i,l),Ba(i,o,r)},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var r=Gi(),o=Fa(i),l=ka(r,o);l.tag=1,l.payload=e,t!=null&&(l.callback=t),Oa(i,l),Ba(i,o,r)},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Gi(),r=Fa(i),o=ka(t,r);o.tag=2,e!=null&&(o.callback=e),Oa(i,o),Ba(i,r,t)}};function KR(i,e,t,r,o,l,c){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(r,l,c):e.prototype&&e.prototype.isPureReactComponent?!Bd(t,r)||!Bd(o,l):!0}function ZR(i,e,t){var r=!1,o=Ia,l=e.contextType;return typeof l=="object"&&l!==null?l=os(l):(o=Ai(e)?su:Kr.current,r=e.contextTypes,l=(r=r!=null)?mf(i,o):Ia),e=new e(t,l),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=F0,i.stateNode=e,e._reactInternals=i,r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=l),e}function QR(i,e,t,r){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==i&&F0.enqueueReplaceState(e,e.state,null)}function a_(i,e,t,r){var o=i.stateNode;o.props=t,o.state=i.memoizedState,o.refs=YR,o_(i);var l=e.contextType;typeof l=="object"&&l!==null?o.context=os(l):(l=Ai(e)?su:Kr.current,o.context=mf(i,l)),$d(i,t,o,r),o.state=i.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(N0(i,e,l,t),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&F0.enqueueReplaceState(o,o.state,null),$d(i,t,o,r),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4)}var B0=Array.isArray;function Wd(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(tt(309));var r=t.stateNode}if(!r)throw Error(tt(147,i));var o=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=r.refs;c===YR&&(c=r.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof i!="string")throw Error(tt(284));if(!t._owner)throw Error(tt(290,i))}return i}function U0(i,e){if(i.type!=="textarea")throw Error(tt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function JR(i){function e(G,k){if(i){var A=G.lastEffect;A!==null?(A.nextEffect=k,G.lastEffect=k):G.firstEffect=G.lastEffect=k,k.nextEffect=null,k.flags=8}}function t(G,k){if(!i)return null;for(;k!==null;)e(G,k),k=k.sibling;return null}function r(G,k){for(G=new Map;k!==null;)k.key!==null?G.set(k.key,k):G.set(k.index,k),k=k.sibling;return G}function o(G,k){return G=Ha(G,k),G.index=0,G.sibling=null,G}function l(G,k,A){return G.index=A,i?(A=G.alternate,A!==null?(A=A.index,A<k?(G.flags=2,k):A):(G.flags=2,k)):k}function c(G){return i&&G.alternate===null&&(G.flags=2),G}function h(G,k,A,N){return k===null||k.tag!==6?(k=V_(A,G.mode,N),k.return=G,k):(k=o(k,A),k.return=G,k)}function m(G,k,A,N){return k!==null&&k.elementType===A.type?(N=o(k,A.props),N.ref=Wd(G,k,A),N.return=G,N):(N=rv(A.type,A.key,A.props,null,G.mode,N),N.ref=Wd(G,k,A),N.return=G,N)}function v(G,k,A,N){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=$_(A,G.mode,N),k.return=G,k):(k=o(k,A.children||[]),k.return=G,k)}function b(G,k,A,N,I){return k===null||k.tag!==7?(k=Ef(A,G.mode,N,I),k.return=G,k):(k=o(k,A),k.return=G,k)}function T(G,k,A){if(typeof k=="string"||typeof k=="number")return k=V_(""+k,G.mode,A),k.return=G,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vd:return A=rv(k.type,k.key,k.props,null,G.mode,A),A.ref=Wd(G,null,k),A.return=G,A;case tu:return k=$_(k,G.mode,A),k.return=G,k}if(B0(k)||wd(k))return k=Ef(k,G.mode,A,null),k.return=G,k;U0(G,k)}return null}function L(G,k,A,N){var I=k!==null?k.key:null;if(typeof A=="string"||typeof A=="number")return I!==null?null:h(G,k,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vd:return A.key===I?A.type===ba?b(G,k,A.props.children,N,I):m(G,k,A,N):null;case tu:return A.key===I?v(G,k,A,N):null}if(B0(A)||wd(A))return I!==null?null:b(G,k,A,N,null);U0(G,A)}return null}function P(G,k,A,N,I){if(typeof N=="string"||typeof N=="number")return G=G.get(A)||null,h(k,G,""+N,I);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vd:return G=G.get(N.key===null?A:N.key)||null,N.type===ba?b(k,G,N.props.children,I,N.key):m(k,G,N,I);case tu:return G=G.get(N.key===null?A:N.key)||null,v(k,G,N,I)}if(B0(N)||wd(N))return G=G.get(A)||null,b(k,G,N,I,null);U0(k,N)}return null}function O(G,k,A,N){for(var I=null,B=null,V=k,X=k=0,Q=null;V!==null&&X<A.length;X++){V.index>X?(Q=V,V=null):Q=V.sibling;var ae=L(G,V,A[X],N);if(ae===null){V===null&&(V=Q);break}i&&V&&ae.alternate===null&&e(G,V),k=l(ae,k,X),B===null?I=ae:B.sibling=ae,B=ae,V=Q}if(X===A.length)return t(G,V),I;if(V===null){for(;X<A.length;X++)V=T(G,A[X],N),V!==null&&(k=l(V,k,X),B===null?I=V:B.sibling=V,B=V);return I}for(V=r(G,V);X<A.length;X++)Q=P(V,G,X,A[X],N),Q!==null&&(i&&Q.alternate!==null&&V.delete(Q.key===null?X:Q.key),k=l(Q,k,X),B===null?I=Q:B.sibling=Q,B=Q);return i&&V.forEach(function(le){return e(G,le)}),I}function z(G,k,A,N){var I=wd(A);if(typeof I!="function")throw Error(tt(150));if(A=I.call(A),A==null)throw Error(tt(151));for(var B=I=null,V=k,X=k=0,Q=null,ae=A.next();V!==null&&!ae.done;X++,ae=A.next()){V.index>X?(Q=V,V=null):Q=V.sibling;var le=L(G,V,ae.value,N);if(le===null){V===null&&(V=Q);break}i&&V&&le.alternate===null&&e(G,V),k=l(le,k,X),B===null?I=le:B.sibling=le,B=le,V=Q}if(ae.done)return t(G,V),I;if(V===null){for(;!ae.done;X++,ae=A.next())ae=T(G,ae.value,N),ae!==null&&(k=l(ae,k,X),B===null?I=ae:B.sibling=ae,B=ae);return I}for(V=r(G,V);!ae.done;X++,ae=A.next())ae=P(V,G,X,ae.value,N),ae!==null&&(i&&ae.alternate!==null&&V.delete(ae.key===null?X:ae.key),k=l(ae,k,X),B===null?I=ae:B.sibling=ae,B=ae);return i&&V.forEach(function(he){return e(G,he)}),I}return function(G,k,A,N){var I=typeof A=="object"&&A!==null&&A.type===ba&&A.key===null;I&&(A=A.props.children);var B=typeof A=="object"&&A!==null;if(B)switch(A.$$typeof){case vd:e:{for(B=A.key,I=k;I!==null;){if(I.key===B){switch(I.tag){case 7:if(A.type===ba){t(G,I.sibling),k=o(I,A.props.children),k.return=G,G=k;break e}break;default:if(I.elementType===A.type){t(G,I.sibling),k=o(I,A.props),k.ref=Wd(G,I,A),k.return=G,G=k;break e}}t(G,I);break}else e(G,I);I=I.sibling}A.type===ba?(k=Ef(A.props.children,G.mode,N,A.key),k.return=G,G=k):(N=rv(A.type,A.key,A.props,null,G.mode,N),N.ref=Wd(G,k,A),N.return=G,G=N)}return c(G);case tu:e:{for(I=A.key;k!==null;){if(k.key===I)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){t(G,k.sibling),k=o(k,A.children||[]),k.return=G,G=k;break e}else{t(G,k);break}else e(G,k);k=k.sibling}k=$_(A,G.mode,N),k.return=G,G=k}return c(G)}if(typeof A=="string"||typeof A=="number")return A=""+A,k!==null&&k.tag===6?(t(G,k.sibling),k=o(k,A),k.return=G,G=k):(t(G,k),k=V_(A,G.mode,N),k.return=G,G=k),c(G);if(B0(A))return O(G,k,A,N);if(wd(A))return z(G,k,A,N);if(B&&U0(G,A),typeof A=="undefined"&&!I)switch(G.tag){case 1:case 22:case 0:case 11:case 15:throw Error(tt(152,Jc(G.type)||"Component"))}return t(G,k)}}var z0=JR(!0),e3=JR(!1),jd={},Xs=Ra(jd),qd=Ra(jd),Xd=Ra(jd);function lu(i){if(i===jd)throw Error(tt(174));return i}function l_(i,e){switch(Kn(Xd,e),Kn(qd,i),Kn(Xs,jd),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dw(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=dw(e,i)}kn(Xs),Kn(Xs,e)}function xf(){kn(Xs),kn(qd),kn(Xd)}function t3(i){lu(Xd.current);var e=lu(Xs.current),t=dw(e,i.type);e!==t&&(Kn(qd,i),Kn(Xs,t))}function u_(i){qd.current===i&&(kn(Xs),kn(qd))}var Zn=Ra(0);function H0(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ro=null,Da=null,Ys=!1;function n3(i,e){var t=us(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=i,t.flags=8,i.lastEffect!==null?(i.lastEffect.nextEffect=t,i.lastEffect=t):i.firstEffect=i.lastEffect=t}function r3(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function c_(i){if(Ys){var e=Da;if(e){var t=e;if(!r3(i,e)){if(e=ff(t.nextSibling),!e||!r3(i,e)){i.flags=i.flags&-1025|2,Ys=!1,Ro=i;return}n3(Ro,t)}Ro=i,Da=ff(e.firstChild)}else i.flags=i.flags&-1025|2,Ys=!1,Ro=i}}function i3(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ro=i}function G0(i){if(i!==Ro)return!1;if(!Ys)return i3(i),Ys=!0,!1;var e=i.type;if(i.tag!==5||e!=="head"&&e!=="body"&&!Xw(e,i.memoizedProps))for(e=Da;e;)n3(i,e),e=ff(e.nextSibling);if(i3(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(tt(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Da=ff(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Da=null}}else Da=Ro?ff(i.stateNode.nextSibling):null;return!0}function f_(){Da=Ro=null,Ys=!1}var wf=[];function h_(){for(var i=0;i<wf.length;i++)wf[i]._workInProgressVersionPrimary=null;wf.length=0}var Yd=eu.ReactCurrentDispatcher,as=eu.ReactCurrentBatchConfig,Kd=0,lr=null,Qr=null,Hr=null,V0=!1,Zd=!1;function Ci(){throw Error(tt(321))}function d_(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!ss(i[t],e[t]))return!1;return!0}function p_(i,e,t,r,o,l){if(Kd=l,lr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yd.current=i===null||i.memoizedState===null?xG:wG,i=t(r,o),Zd){l=0;do{if(Zd=!1,!(25>l))throw Error(tt(301));l+=1,Hr=Qr=null,e.updateQueue=null,Yd.current=_G,i=t(r,o)}while(Zd)}if(Yd.current=q0,e=Qr!==null&&Qr.next!==null,Kd=0,Hr=Qr=lr=null,V0=!1,e)throw Error(tt(300));return i}function uu(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?lr.memoizedState=Hr=i:Hr=Hr.next=i,Hr}function cu(){if(Qr===null){var i=lr.alternate;i=i!==null?i.memoizedState:null}else i=Qr.next;var e=Hr===null?lr.memoizedState:Hr.next;if(e!==null)Hr=e,Qr=i;else{if(i===null)throw Error(tt(310));Qr=i,i={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},Hr===null?lr.memoizedState=Hr=i:Hr=Hr.next=i}return Hr}function Ks(i,e){return typeof e=="function"?e(i):e}function Qd(i){var e=cu(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=i;var r=Qr,o=r.baseQueue,l=t.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}r.baseQueue=o=l,t.pending=null}if(o!==null){o=o.next,r=r.baseState;var h=c=l=null,m=o;do{var v=m.lane;if((Kd&v)===v)h!==null&&(h=h.next={lane:0,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),r=m.eagerReducer===i?m.eagerState:i(r,m.action);else{var b={lane:v,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null};h===null?(c=h=b,l=r):h=h.next=b,lr.lanes|=v,np|=v}m=m.next}while(m!==null&&m!==o);h===null?l=r:h.next=c,ss(r,e.memoizedState)||(Ts=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=h,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function Jd(i){var e=cu(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=i;var r=t.dispatch,o=t.pending,l=e.memoizedState;if(o!==null){t.pending=null;var c=o=o.next;do l=i(l,c.action),c=c.next;while(c!==o);ss(l,e.memoizedState)||(Ts=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),t.lastRenderedState=l}return[l,r]}function s3(i,e,t){var r=e._getVersion;r=r(e._source);var o=e._workInProgressVersionPrimary;if(o!==null?i=o===r:(i=i.mutableReadLanes,(i=(Kd&i)===i)&&(e._workInProgressVersionPrimary=r,wf.push(e))),i)return t(e._source);throw wf.push(e),Error(tt(350))}function o3(i,e,t,r){var o=di;if(o===null)throw Error(tt(349));var l=e._getVersion,c=l(e._source),h=Yd.current,m=h.useState(function(){return s3(o,e,t)}),v=m[1],b=m[0];m=Hr;var T=i.memoizedState,L=T.refs,P=L.getSnapshot,O=T.source;T=T.subscribe;var z=lr;return i.memoizedState={refs:L,source:e,subscribe:r},h.useEffect(function(){L.getSnapshot=t,L.setSnapshot=v;var G=l(e._source);if(!ss(c,G)){G=t(e._source),ss(b,G)||(v(G),G=Fa(z),o.mutableReadLanes|=G&o.pendingLanes),G=o.mutableReadLanes,o.entangledLanes|=G;for(var k=o.entanglements,A=G;0<A;){var N=31-Aa(A),I=1<<N;k[N]|=G,A&=~I}}},[t,e,r]),h.useEffect(function(){return r(e._source,function(){var G=L.getSnapshot,k=L.setSnapshot;try{k(G(e._source));var A=Fa(z);o.mutableReadLanes|=A&o.pendingLanes}catch(N){k(function(){throw N})}})},[e,r]),ss(P,t)&&ss(O,e)&&ss(T,r)||(i={pending:null,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:b},i.dispatch=v=y_.bind(null,lr,i),m.queue=i,m.baseQueue=null,b=s3(o,e,t),m.memoizedState=m.baseState=b),b}function a3(i,e,t){var r=cu();return o3(r,i,e,t)}function ep(i){var e=uu();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i=e.queue={pending:null,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:i},i=i.dispatch=y_.bind(null,lr,i),[e.memoizedState,i]}function $0(i,e,t,r){return i={tag:i,create:e,destroy:t,deps:r,next:null},e=lr.updateQueue,e===null?(e={lastEffect:null},lr.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(r=t.next,t.next=i,i.next=r,e.lastEffect=i)),i}function l3(i){var e=uu();return i={current:i},e.memoizedState=i}function W0(){return cu().memoizedState}function m_(i,e,t,r){var o=uu();lr.flags|=i,o.memoizedState=$0(1|e,t,void 0,r===void 0?null:r)}function g_(i,e,t,r){var o=cu();r=r===void 0?null:r;var l=void 0;if(Qr!==null){var c=Qr.memoizedState;if(l=c.destroy,r!==null&&d_(r,c.deps)){$0(e,t,l,r);return}}lr.flags|=i,o.memoizedState=$0(1|e,t,l,r)}function u3(i,e){return m_(516,4,i,e)}function j0(i,e){return g_(516,4,i,e)}function c3(i,e){return g_(4,2,i,e)}function f3(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function h3(i,e,t){return t=t!=null?t.concat([i]):null,g_(4,2,f3.bind(null,e,i),t)}function v_(){}function d3(i,e){var t=cu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&d_(e,r[1])?r[0]:(t.memoizedState=[i,e],i)}function p3(i,e){var t=cu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&d_(e,r[1])?r[0]:(i=i(),t.memoizedState=[i,e],i)}function yG(i,e){var t=gf();au(98>t?98:t,function(){i(!0)}),au(97<t?97:t,function(){var r=as.transition;as.transition=1;try{i(!1),e()}finally{as.transition=r}})}function y_(i,e,t){var r=Gi(),o=Fa(i),l={lane:o,action:t,eagerReducer:null,eagerState:null,next:null},c=e.pending;if(c===null?l.next=l:(l.next=c.next,c.next=l),e.pending=l,c=i.alternate,i===lr||c!==null&&c===lr)Zd=V0=!0;else{if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var h=e.lastRenderedState,m=c(h,t);if(l.eagerReducer=c,l.eagerState=m,ss(m,h))return}catch{}finally{}Ba(i,o,r)}}var q0={readContext:os,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useMutableSource:Ci,useOpaqueIdentifier:Ci,unstable_isNewReconciler:!1},xG={readContext:os,useCallback:function(i,e){return uu().memoizedState=[i,e===void 0?null:e],i},useContext:os,useEffect:u3,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,m_(4,2,f3.bind(null,e,i),t)},useLayoutEffect:function(i,e){return m_(4,2,i,e)},useMemo:function(i,e){var t=uu();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var r=uu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,i=r.queue={pending:null,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},i=i.dispatch=y_.bind(null,lr,i),[r.memoizedState,i]},useRef:l3,useState:ep,useDebugValue:v_,useDeferredValue:function(i){var e=ep(i),t=e[0],r=e[1];return u3(function(){var o=as.transition;as.transition=1;try{r(i)}finally{as.transition=o}},[i]),t},useTransition:function(){var i=ep(!1),e=i[0];return i=yG.bind(null,i[1]),l3(i),[i,e]},useMutableSource:function(i,e,t){var r=uu();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:i,subscribe:t},o3(r,i,e,t)},useOpaqueIdentifier:function(){if(Ys){var i=!1,e=hG(function(){throw i||(i=!0,t("r:"+(Kw++).toString(36))),Error(tt(355))}),t=ep(e)[1];return(lr.mode&2)==0&&(lr.flags|=516,$0(5,function(){t("r:"+(Kw++).toString(36))},void 0,null)),e}return e="r:"+(Kw++).toString(36),ep(e),e},unstable_isNewReconciler:!1},wG={readContext:os,useCallback:d3,useContext:os,useEffect:j0,useImperativeHandle:h3,useLayoutEffect:c3,useMemo:p3,useReducer:Qd,useRef:W0,useState:function(){return Qd(Ks)},useDebugValue:v_,useDeferredValue:function(i){var e=Qd(Ks),t=e[0],r=e[1];return j0(function(){var o=as.transition;as.transition=1;try{r(i)}finally{as.transition=o}},[i]),t},useTransition:function(){var i=Qd(Ks)[0];return[W0().current,i]},useMutableSource:a3,useOpaqueIdentifier:function(){return Qd(Ks)[0]},unstable_isNewReconciler:!1},_G={readContext:os,useCallback:d3,useContext:os,useEffect:j0,useImperativeHandle:h3,useLayoutEffect:c3,useMemo:p3,useReducer:Jd,useRef:W0,useState:function(){return Jd(Ks)},useDebugValue:v_,useDeferredValue:function(i){var e=Jd(Ks),t=e[0],r=e[1];return j0(function(){var o=as.transition;as.transition=1;try{r(i)}finally{as.transition=o}},[i]),t},useTransition:function(){var i=Jd(Ks)[0];return[W0().current,i]},useMutableSource:a3,useOpaqueIdentifier:function(){return Jd(Ks)[0]},unstable_isNewReconciler:!1},bG=eu.ReactCurrentOwner,Ts=!1;function Li(i,e,t,r){e.child=i===null?e3(e,null,t,r):z0(e,i.child,t,r)}function m3(i,e,t,r,o){t=t.render;var l=e.ref;return yf(e,o),r=p_(i,e,t,r,l,o),i!==null&&!Ts?(e.updateQueue=i.updateQueue,e.flags&=-517,i.lanes&=~o,Io(i,e,o)):(e.flags|=1,Li(i,e,r,o),e.child)}function g3(i,e,t,r,o,l){if(i===null){var c=t.type;return typeof c=="function"&&!H_(c)&&c.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=c,v3(i,e,c,r,o,l)):(i=rv(t.type,null,r,e,e.mode,l),i.ref=e.ref,i.return=e,e.child=i)}return c=i.child,(o&l)==0&&(o=c.memoizedProps,t=t.compare,t=t!==null?t:Bd,t(o,r)&&i.ref===e.ref)?Io(i,e,l):(e.flags|=1,i=Ha(c,r),i.ref=e.ref,i.return=e,e.child=i)}function v3(i,e,t,r,o,l){if(i!==null&&Bd(i.memoizedProps,r)&&i.ref===e.ref)if(Ts=!1,(l&o)!=0)(i.flags&16384)!=0&&(Ts=!0);else return e.lanes=i.lanes,Io(i,e,l);return w_(i,e,t,r,l)}function x_(i,e,t){var r=e.pendingProps,o=r.children,l=i!==null?i.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},nv(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},nv(e,l!==null?l.baseLanes:t);else return i=l!==null?l.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i},nv(e,i),null;else l!==null?(r=l.baseLanes|t,e.memoizedState=null):r=t,nv(e,r);return Li(i,e,o,t),e.child}function y3(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=128)}function w_(i,e,t,r,o){var l=Ai(t)?su:Kr.current;return l=mf(e,l),yf(e,o),t=p_(i,e,t,r,l,o),i!==null&&!Ts?(e.updateQueue=i.updateQueue,e.flags&=-517,i.lanes&=~o,Io(i,e,o)):(e.flags|=1,Li(i,e,t,o),e.child)}function x3(i,e,t,r,o){if(Ai(t)){var l=!0;R0(e)}else l=!1;if(yf(e,o),e.stateNode===null)i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2),ZR(e,t,r),a_(e,t,r,o),r=!0;else if(i===null){var c=e.stateNode,h=e.memoizedProps;c.props=h;var m=c.context,v=t.contextType;typeof v=="object"&&v!==null?v=os(v):(v=Ai(t)?su:Kr.current,v=mf(e,v));var b=t.getDerivedStateFromProps,T=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function";T||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==r||m!==v)&&QR(e,c,r,v),Pa=!1;var L=e.memoizedState;c.state=L,$d(e,r,c,o),m=e.memoizedState,h!==r||L!==m||Ei.current||Pa?(typeof b=="function"&&(N0(e,t,b,r),m=e.memoizedState),(h=Pa||KR(e,t,h,r,L,m,v))?(T||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4)):(typeof c.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=m),c.props=r,c.state=m,c.context=v,r=h):(typeof c.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{c=e.stateNode,jR(i,e),h=e.memoizedProps,v=e.type===e.elementType?h:Ms(e.type,h),c.props=v,T=e.pendingProps,L=c.context,m=t.contextType,typeof m=="object"&&m!==null?m=os(m):(m=Ai(t)?su:Kr.current,m=mf(e,m));var P=t.getDerivedStateFromProps;(b=typeof P=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==T||L!==m)&&QR(e,c,r,m),Pa=!1,L=e.memoizedState,c.state=L,$d(e,r,c,o);var O=e.memoizedState;h!==T||L!==O||Ei.current||Pa?(typeof P=="function"&&(N0(e,t,P,r),O=e.memoizedState),(v=Pa||KR(e,t,v,r,L,O,m))?(b||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,O,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,O,m)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof c.componentDidUpdate!="function"||h===i.memoizedProps&&L===i.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&L===i.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=O),c.props=r,c.state=O,c.context=m,r=v):(typeof c.componentDidUpdate!="function"||h===i.memoizedProps&&L===i.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&L===i.memoizedState||(e.flags|=256),r=!1)}return __(i,e,t,r,l,o)}function __(i,e,t,r,o,l){y3(i,e);var c=(e.flags&64)!=0;if(!r&&!c)return o&&NR(e,t,!1),Io(i,e,l);r=e.stateNode,bG.current=e;var h=c&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,i!==null&&c?(e.child=z0(e,i.child,null,l),e.child=z0(e,null,h,l)):Li(i,e,h,l),e.memoizedState=r.state,o&&NR(e,t,!0),e.child}function w3(i){var e=i.stateNode;e.pendingContext?OR(i,e.pendingContext,e.pendingContext!==e.context):e.context&&OR(i,e.context,!1),l_(i,e.containerInfo)}var X0={dehydrated:null,retryLane:0};function _3(i,e,t){var r=e.pendingProps,o=Zn.current,l=!1,c;return(c=(e.flags&64)!=0)||(c=i!==null&&i.memoizedState===null?!1:(o&2)!=0),c?(l=!0,e.flags&=-65):i!==null&&i.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(o|=1),Kn(Zn,o&1),i===null?(r.fallback!==void 0&&c_(e),i=r.children,o=r.fallback,l?(i=b3(e,i,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=X0,i):typeof r.unstable_expectedLoadTime=="number"?(i=b3(e,i,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=X0,e.lanes=33554432,i):(t=G_({mode:"visible",children:i},e.mode,t,null),t.return=e,e.child=t)):i.memoizedState!==null?l?(r=M3(i,e,r.children,r.fallback,t),l=e.child,o=i.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=i.childLanes&~t,e.memoizedState=X0,r):(t=S3(i,e,r.children,t),e.memoizedState=null,t):l?(r=M3(i,e,r.children,r.fallback,t),l=e.child,o=i.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=i.childLanes&~t,e.memoizedState=X0,r):(t=S3(i,e,r.children,t),e.memoizedState=null,t)}function b3(i,e,t,r){var o=i.mode,l=i.child;return e={mode:"hidden",children:e},(o&2)==0&&l!==null?(l.childLanes=0,l.pendingProps=e):l=G_(e,o,0,null),t=Ef(t,o,r,null),l.return=i,t.return=i,l.sibling=t,i.child=l,t}function S3(i,e,t,r){var o=i.child;return i=o.sibling,t=Ha(o,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=r),t.return=e,t.sibling=null,i!==null&&(i.nextEffect=null,i.flags=8,e.firstEffect=e.lastEffect=i),e.child=t}function M3(i,e,t,r,o){var l=e.mode,c=i.child;i=c.sibling;var h={mode:"hidden",children:t};return(l&2)==0&&e.child!==c?(t=e.child,t.childLanes=0,t.pendingProps=h,c=t.lastEffect,c!==null?(e.firstEffect=t.firstEffect,e.lastEffect=c,c.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Ha(c,h),i!==null?r=Ha(i,r):(r=Ef(r,l,o,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function T3(i,e){i.lanes|=e;var t=i.alternate;t!==null&&(t.lanes|=e),WR(i.return,e)}function b_(i,e,t,r,o,l){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o,lastEffect:l}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=t,c.tailMode=o,c.lastEffect=l)}function E3(i,e,t){var r=e.pendingProps,o=r.revealOrder,l=r.tail;if(Li(i,e,r.children,t),r=Zn.current,(r&2)!=0)r=r&1|2,e.flags|=64;else{if(i!==null&&(i.flags&64)!=0)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&T3(i,t);else if(i.tag===19)T3(i,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}r&=1}if(Kn(Zn,r),(e.mode&2)==0)e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)i=t.alternate,i!==null&&H0(i)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),b_(e,!1,o,t,l,e.lastEffect);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&H0(i)===null){e.child=o;break}i=o.sibling,o.sibling=t,t=o,o=i}b_(e,!0,t,null,l,e.lastEffect);break;case"together":b_(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Io(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),np|=e.lanes,(t&e.childLanes)!=0){if(i!==null&&e.child!==i.child)throw Error(tt(153));if(e.child!==null){for(i=e.child,t=Ha(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Ha(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var A3,S_,C3,L3;A3=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};S_=function(){};C3=function(i,e,t,r){var o=i.memoizedProps;if(o!==r){i=e.stateNode,lu(Xs.current);var l=null;switch(t){case"input":o=aw(i,o),r=aw(i,r),l=[];break;case"option":o=cw(i,o),r=cw(i,r),l=[];break;case"select":o=Un({},o,{value:void 0}),r=Un({},r,{value:void 0}),l=[];break;case"textarea":o=fw(i,o),r=fw(i,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(i.onclick=T0)}pw(t,r);var c;t=null;for(v in o)if(!r.hasOwnProperty(v)&&o.hasOwnProperty(v)&&o[v]!=null)if(v==="style"){var h=o[v];for(c in h)h.hasOwnProperty(c)&&(t||(t={}),t[c]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(gd.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in r){var m=r[v];if(h=o!=null?o[v]:void 0,r.hasOwnProperty(v)&&m!==h&&(m!=null||h!=null))if(v==="style")if(h){for(c in h)!h.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(t||(t={}),t[c]="");for(c in m)m.hasOwnProperty(c)&&h[c]!==m[c]&&(t||(t={}),t[c]=m[c])}else t||(l||(l=[]),l.push(v,t)),t=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(l=l||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(gd.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&Pn("scroll",i),l||h===m||(l=[])):typeof m=="object"&&m!==null&&m.$$typeof===nw?m.toString():(l=l||[]).push(v,m))}t&&(l=l||[]).push("style",t);var v=l;(e.updateQueue=v)&&(e.flags|=4)}};L3=function(i,e,t,r){t!==r&&(e.flags|=4)};function tp(i,e){if(!Ys)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:r.sibling=null}}function SG(i,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ai(e.type)&&L0(),null;case 3:return xf(),kn(Ei),kn(Kr),h_(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(G0(e)?e.flags|=4:r.hydrate||(e.flags|=256)),S_(e),null;case 5:u_(e);var o=lu(Xd.current);if(t=e.type,i!==null&&e.stateNode!=null)C3(i,e,t,r,o),i.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(tt(166));return null}if(i=lu(Xs.current),G0(e)){r=e.stateNode,t=e.type;var l=e.memoizedProps;switch(r[La]=e,r[A0]=l,t){case"dialog":Pn("cancel",r),Pn("close",r);break;case"iframe":case"object":case"embed":Pn("load",r);break;case"video":case"audio":for(i=0;i<zd.length;i++)Pn(zd[i],r);break;case"source":Pn("error",r);break;case"img":case"image":case"link":Pn("error",r),Pn("load",r);break;case"details":Pn("toggle",r);break;case"input":xL(r,l),Pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Pn("invalid",r);break;case"textarea":bL(r,l),Pn("invalid",r)}pw(t,l),i=null;for(var c in l)l.hasOwnProperty(c)&&(o=l[c],c==="children"?typeof o=="string"?r.textContent!==o&&(i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i=["children",""+o]):gd.hasOwnProperty(c)&&o!=null&&c==="onScroll"&&Pn("scroll",r));switch(t){case"input":l0(r),_L(r,l,!0);break;case"textarea":l0(r),ML(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=T0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(c=o.nodeType===9?o:o.ownerDocument,i===hw.html&&(i=TL(t)),i===hw.html?t==="script"?(i=c.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof r.is=="string"?i=c.createElement(t,{is:r.is}):(i=c.createElement(t),t==="select"&&(c=i,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):i=c.createElementNS(i,t),i[La]=e,i[A0]=r,A3(i,e,!1,!1),e.stateNode=i,c=mw(t,r),t){case"dialog":Pn("cancel",i),Pn("close",i),o=r;break;case"iframe":case"object":case"embed":Pn("load",i),o=r;break;case"video":case"audio":for(o=0;o<zd.length;o++)Pn(zd[o],i);o=r;break;case"source":Pn("error",i),o=r;break;case"img":case"image":case"link":Pn("error",i),Pn("load",i),o=r;break;case"details":Pn("toggle",i),o=r;break;case"input":xL(i,r),o=aw(i,r),Pn("invalid",i);break;case"option":o=cw(i,r);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},o=Un({},r,{value:void 0}),Pn("invalid",i);break;case"textarea":bL(i,r),o=fw(i,r),Pn("invalid",i);break;default:o=r}pw(t,o);var h=o;for(l in h)if(h.hasOwnProperty(l)){var m=h[l];l==="style"?CL(i,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&EL(i,m)):l==="children"?typeof m=="string"?(t!=="textarea"||m!=="")&&bd(i,m):typeof m=="number"&&bd(i,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(gd.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Pn("scroll",i):m!=null&&K1(i,l,m,c))}switch(t){case"input":l0(i),_L(i,r,!1);break;case"textarea":l0(i),ML(i);break;case"option":r.value!=null&&i.setAttribute("value",""+Sa(r.value));break;case"select":i.multiple=!!r.multiple,l=r.value,l!=null?ef(i,!!r.multiple,l,!1):r.defaultValue!=null&&ef(i,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=T0)}LR(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(i&&e.stateNode!=null)L3(i,e,i.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(tt(166));t=lu(Xd.current),lu(Xs.current),G0(e)?(r=e.stateNode,t=e.memoizedProps,r[La]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[La]=e,e.stateNode=r)}return null;case 13:return kn(Zn),r=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(r=r!==null,t=!1,i===null?e.memoizedProps.fallback!==void 0&&G0(e):t=i.memoizedState!==null,r&&!t&&(e.mode&2)!=0&&(i===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Zn.current&1)!=0?Gr===0&&(Gr=3):((Gr===0||Gr===3)&&(Gr=4),di===null||(np&134217727)==0&&(bf&134217727)==0||Mf(di,Jr))),(r||t)&&(e.flags|=4),null);case 4:return xf(),S_(e),i===null&&MR(e.stateNode.containerInfo),null;case 10:return s_(e),null;case 17:return Ai(e.type)&&L0(),null;case 19:if(kn(Zn),r=e.memoizedState,r===null)return null;if(l=(e.flags&64)!=0,c=r.rendering,c===null)if(l)tp(r,!1);else{if(Gr!==0||i!==null&&(i.flags&64)!=0)for(i=e.child;i!==null;){if(c=H0(i),c!==null){for(e.flags|=64,tp(r,!1),l=c.updateQueue,l!==null&&(e.updateQueue=l,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)l=t,i=r,l.flags&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,c=l.alternate,c===null?(l.childLanes=0,l.lanes=i,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,i=c.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Kn(Zn,Zn.current&1|2),e.child}i=i.sibling}r.tail!==null&&Zr()>O_&&(e.flags|=64,l=!0,tp(r,!1),e.lanes=33554432)}else{if(!l)if(i=H0(c),i!==null){if(e.flags|=64,l=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),tp(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!Ys)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Zr()-r.renderingStartTime>O_&&t!==1073741824&&(e.flags|=64,l=!0,tp(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(t=r.last,t!==null?t.sibling=c:e.child=c,r.last=c)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Zr(),t.sibling=null,e=Zn.current,Kn(Zn,l?e&1|2:e&1),t):null;case 23:case 24:return z_(),i!==null&&i.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(tt(156,e.tag))}function MG(i){switch(i.tag){case 1:Ai(i.type)&&L0();var e=i.flags;return e&4096?(i.flags=e&-4097|64,i):null;case 3:if(xf(),kn(Ei),kn(Kr),h_(),e=i.flags,(e&64)!=0)throw Error(tt(285));return i.flags=e&-4097|64,i;case 5:return u_(i),null;case 13:return kn(Zn),e=i.flags,e&4096?(i.flags=e&-4097|64,i):null;case 19:return kn(Zn),null;case 4:return xf(),null;case 10:return s_(i),null;case 23:case 24:return z_(),null;default:return null}}function M_(i,e){try{var t="",r=e;do t+=i5(r),r=r.return;while(r);var o=t}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:i,source:e,stack:o}}function T_(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var TG=typeof WeakMap=="function"?WeakMap:Map;function R3(i,e,t){t=ka(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Z0||(Z0=!0,D_=r),T_(i,e)},t}function I3(i,e,t){t=ka(-1,t),t.tag=3;var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return T_(i,e),r(o)}}var l=i.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this),T_(i,e));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),t}var EG=typeof WeakSet=="function"?WeakSet:Set;function P3(i){var e=i.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){za(i,t)}else e.current=null}function AG(i,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&i!==null){var t=i.memoizedProps,r=i.memoizedState;i=e.stateNode,e=i.getSnapshotBeforeUpdate(e.elementType===e.type?t:Ms(e.type,t),r),i.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Yw(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(tt(163))}function CG(i,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){i=e=e.next;do{if((i.tag&3)==3){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){i=e=e.next;do{var o=i;r=o.next,o=o.tag,(o&4)!=0&&(o&1)!=0&&(q3(t,i),NG(t,i)),i=r}while(i!==e)}return;case 1:i=t.stateNode,t.flags&4&&(e===null?i.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:Ms(t.type,e.memoizedProps),i.componentDidUpdate(r,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&XR(t,e,i);return;case 3:if(e=t.updateQueue,e!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}XR(t,e,i)}return;case 5:i=t.stateNode,e===null&&t.flags&4&&LR(t.type,t.memoizedProps)&&i.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&$L(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(tt(163))}function k3(i,e){for(var t=i;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var o=t.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,r.style.display=AL("display",o)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===i)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function O3(i,e){if(ou&&typeof ou.onCommitFiberUnmount=="function")try{ou.onCommitFiberUnmount(Qw,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null)){var t=i=i.next;do{var r=t,o=r.destroy;if(r=r.tag,o!==void 0)if((r&4)!=0)q3(e,t);else{r=e;try{o()}catch(l){za(r,l)}}t=t.next}while(t!==i)}break;case 1:if(P3(e),i=e.stateNode,typeof i.componentWillUnmount=="function")try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){za(e,l)}break;case 5:P3(e);break;case 4:B3(i,e)}}function D3(i){i.alternate=null,i.child=null,i.dependencies=null,i.firstEffect=null,i.lastEffect=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.return=null,i.updateQueue=null}function N3(i){return i.tag===5||i.tag===3||i.tag===4}function F3(i){e:{for(var e=i.return;e!==null;){if(N3(e))break e;e=e.return}throw Error(tt(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(tt(161))}t.flags&16&&(bd(e,""),t.flags&=-17);e:t:for(t=i;;){for(;t.sibling===null;){if(t.return===null||N3(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?E_(i,t,e):A_(i,t,e)}function E_(i,e,t){var r=i.tag,o=r===5||r===6;if(o)i=o?i.stateNode:i.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=T0));else if(r!==4&&(i=i.child,i!==null))for(E_(i,e,t),i=i.sibling;i!==null;)E_(i,e,t),i=i.sibling}function A_(i,e,t){var r=i.tag,o=r===5||r===6;if(o)i=o?i.stateNode:i.stateNode.instance,e?t.insertBefore(i,e):t.appendChild(i);else if(r!==4&&(i=i.child,i!==null))for(A_(i,e,t),i=i.sibling;i!==null;)A_(i,e,t),i=i.sibling}function B3(i,e){for(var t=e,r=!1,o,l;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(tt(160));switch(o=r.stateNode,r.tag){case 5:l=!1;break e;case 3:o=o.containerInfo,l=!0;break e;case 4:o=o.containerInfo,l=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var c=i,h=t,m=h;;)if(O3(c,m),m.child!==null&&m.tag!==4)m.child.return=m,m=m.child;else{if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}l?(c=o,h=t.stateNode,c.nodeType===8?c.parentNode.removeChild(h):c.removeChild(h)):o.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){o=t.stateNode.containerInfo,l=!0,t.child.return=t,t=t.child;continue}}else if(O3(i,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function C_(i,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)==3&&(i=r.destroy,r.destroy=void 0,i!==void 0&&i()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var o=i!==null?i.memoizedProps:r;i=e.type;var l=e.updateQueue;if(e.updateQueue=null,l!==null){for(t[A0]=r,i==="input"&&r.type==="radio"&&r.name!=null&&wL(t,r),mw(i,o),e=mw(i,r),o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?CL(t,h):c==="dangerouslySetInnerHTML"?EL(t,h):c==="children"?bd(t,h):K1(t,c,h,e)}switch(i){case"input":lw(t,r);break;case"textarea":SL(t,r);break;case"select":i=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,l=r.value,l!=null?ef(t,!!r.multiple,l,!1):i!==!!r.multiple&&(r.defaultValue!=null?ef(t,!!r.multiple,r.defaultValue,!0):ef(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(tt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,$L(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(k_=Zr(),k3(e.child,!0)),U3(e);return;case 19:U3(e);return;case 17:return;case 23:case 24:k3(e,e.memoizedState!==null);return}throw Error(tt(163))}function U3(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new EG),e.forEach(function(r){var o=UG.bind(null,i,r);t.has(r)||(t.add(r),r.then(o,o))})}}function LG(i,e){return i!==null&&(i=i.memoizedState,i===null||i.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var RG=Math.ceil,Y0=eu.ReactCurrentDispatcher,L_=eu.ReactCurrentOwner,Ht=0,di=null,br=null,Jr=0,fu=0,R_=Ra(0),Gr=0,K0=null,_f=0,np=0,bf=0,I_=0,P_=null,k_=0,O_=1/0;function Sf(){O_=Zr()+500}var gt=null,Z0=!1,D_=null,Zs=null,Na=!1,rp=null,ip=90,N_=[],F_=[],Po=null,sp=0,B_=null,Q0=-1,ko=0,J0=0,op=null,ev=!1;function Gi(){return(Ht&48)!=0?Zr():Q0!==-1?Q0:Q0=Zr()}function Fa(i){if(i=i.mode,(i&2)==0)return 1;if((i&4)==0)return gf()===99?1:2;if(ko===0&&(ko=_f),vG.transition!==0){J0!==0&&(J0=P_!==null?P_.pendingLanes:0),i=ko;var e=4186112&~J0;return e&=-e,e===0&&(i=4186112&~i,e=i&-i,e===0&&(e=8192)),e}return i=gf(),(Ht&4)!=0&&i===98?i=g0(12,ko):(i=w5(i),i=g0(i,ko)),i}function Ba(i,e,t){if(50<sp)throw sp=0,B_=null,Error(tt(185));if(i=tv(i,e),i===null)return null;v0(i,e,t),i===di&&(bf|=e,Gr===4&&Mf(i,Jr));var r=gf();e===1?(Ht&8)!=0&&(Ht&48)==0?U_(i):(ls(i,t),Ht===0&&(Sf(),qs())):((Ht&4)==0||r!==98&&r!==99||(Po===null?Po=new Set([i]):Po.add(i)),ls(i,t)),P_=i}function tv(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}function ls(i,e){for(var t=i.callbackNode,r=i.suspendedLanes,o=i.pingedLanes,l=i.expirationTimes,c=i.pendingLanes;0<c;){var h=31-Aa(c),m=1<<h,v=l[h];if(v===-1){if((m&r)==0||(m&o)!=0){v=e,sf(m);var b=Cn;l[h]=10<=b?v+250:6<=b?v+5e3:-1}}else v<=e&&(i.expiredLanes|=m);c&=~m}if(r=Pd(i,i===di?Jr:0),e=Cn,r===0)t!==null&&(t!==n_&&e_(t),i.callbackNode=null,i.callbackPriority=0);else{if(t!==null){if(i.callbackPriority===e)return;t!==n_&&e_(t)}e===15?(t=U_.bind(null,i),Lo===null?(Lo=[t],P0=Jw(I0,$R)):Lo.push(t),t=n_):e===14?t=Vd(99,U_.bind(null,i)):(t=_5(e),t=Vd(t,z3.bind(null,i))),i.callbackPriority=e,i.callbackNode=t}}function z3(i){if(Q0=-1,J0=ko=0,(Ht&48)!=0)throw Error(tt(327));var e=i.callbackNode;if(Ua()&&i.callbackNode!==e)return null;var t=Pd(i,i===di?Jr:0);if(t===0)return null;var r=t,o=Ht;Ht|=16;var l=$3();(di!==i||Jr!==r)&&(Sf(),Tf(i,r));do try{kG();break}catch(h){V3(i,h)}while(1);if(i_(),Y0.current=l,Ht=o,br!==null?r=0:(di=null,Jr=0,r=Gr),(_f&bf)!=0)Tf(i,0);else if(r!==0){if(r===2&&(Ht|=64,i.hydrate&&(i.hydrate=!1,Yw(i.containerInfo)),t=ZL(i),t!==0&&(r=ap(i,t))),r===1)throw e=K0,Tf(i,0),Mf(i,t),ls(i,Zr()),e;switch(i.finishedWork=i.current.alternate,i.finishedLanes=t,r){case 0:case 1:throw Error(tt(345));case 2:hu(i);break;case 3:if(Mf(i,t),(t&62914560)===t&&(r=k_+500-Zr(),10<r)){if(Pd(i,0)!==0)break;if(o=i.suspendedLanes,(o&t)!==t){Gi(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=RR(hu.bind(null,i),r);break}hu(i);break;case 4:if(Mf(i,t),(t&4186112)===t)break;for(r=i.eventTimes,o=-1;0<t;){var c=31-Aa(t);l=1<<c,c=r[c],c>o&&(o=c),t&=~l}if(t=o,t=Zr()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*RG(t/1960))-t,10<t){i.timeoutHandle=RR(hu.bind(null,i),t);break}hu(i);break;case 5:hu(i);break;default:throw Error(tt(329))}}return ls(i,Zr()),i.callbackNode===e?z3.bind(null,i):null}function Mf(i,e){for(e&=~I_,e&=~bf,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-Aa(e),r=1<<t;i[t]=-1,e&=~r}}function U_(i){if((Ht&48)!=0)throw Error(tt(327));if(Ua(),i===di&&(i.expiredLanes&Jr)!=0){var e=Jr,t=ap(i,e);(_f&bf)!=0&&(e=Pd(i,e),t=ap(i,e))}else e=Pd(i,0),t=ap(i,e);if(i.tag!==0&&t===2&&(Ht|=64,i.hydrate&&(i.hydrate=!1,Yw(i.containerInfo)),e=ZL(i),e!==0&&(t=ap(i,e))),t===1)throw t=K0,Tf(i,0),Mf(i,e),ls(i,Zr()),t;return i.finishedWork=i.current.alternate,i.finishedLanes=e,hu(i),ls(i,Zr()),null}function IG(){if(Po!==null){var i=Po;Po=null,i.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ls(e,Zr())})}qs()}function H3(i,e){var t=Ht;Ht|=1;try{return i(e)}finally{Ht=t,Ht===0&&(Sf(),qs())}}function G3(i,e){var t=Ht;Ht&=-2,Ht|=8;try{return i(e)}finally{Ht=t,Ht===0&&(Sf(),qs())}}function nv(i,e){Kn(R_,fu),fu|=e,_f|=e}function z_(){fu=R_.current,kn(R_)}function Tf(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,fG(t)),br!==null)for(t=br.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&L0();break;case 3:xf(),kn(Ei),kn(Kr),h_();break;case 5:u_(r);break;case 4:xf();break;case 13:kn(Zn);break;case 19:kn(Zn);break;case 10:s_(r);break;case 23:case 24:z_()}t=t.return}di=i,br=Ha(i.current,null),Jr=fu=_f=e,Gr=0,K0=null,I_=bf=np=0}function V3(i,e){do{var t=br;try{if(i_(),Yd.current=q0,V0){for(var r=lr.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}V0=!1}if(Kd=0,Hr=Qr=lr=null,Zd=!1,L_.current=null,t===null||t.return===null){Gr=1,K0=e,br=null;break}e:{var l=i,c=t.return,h=t,m=e;if(e=Jr,h.flags|=2048,h.firstEffect=h.lastEffect=null,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m;if((h.mode&2)==0){var b=h.alternate;b?(h.updateQueue=b.updateQueue,h.memoizedState=b.memoizedState,h.lanes=b.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=(Zn.current&1)!=0,L=c;do{var P;if(P=L.tag===13){var O=L.memoizedState;if(O!==null)P=O.dehydrated!==null;else{var z=L.memoizedProps;P=z.fallback===void 0?!1:z.unstable_avoidThisFallback!==!0?!0:!T}}if(P){var G=L.updateQueue;if(G===null){var k=new Set;k.add(v),L.updateQueue=k}else G.add(v);if((L.mode&2)==0){if(L.flags|=64,h.flags|=16384,h.flags&=-2981,h.tag===1)if(h.alternate===null)h.tag=17;else{var A=ka(-1,1);A.tag=2,Oa(h,A)}h.lanes|=1;break e}m=void 0,h=e;var N=l.pingCache;if(N===null?(N=l.pingCache=new TG,m=new Set,N.set(v,m)):(m=N.get(v),m===void 0&&(m=new Set,N.set(v,m))),!m.has(h)){m.add(h);var I=BG.bind(null,l,v,h);v.then(I,I)}L.flags|=4096,L.lanes=e;break e}L=L.return}while(L!==null);m=Error((Jc(h.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Gr!==5&&(Gr=2),m=M_(m,h),L=c;do{switch(L.tag){case 3:l=m,L.flags|=4096,e&=-e,L.lanes|=e;var B=R3(L,l,e);qR(L,B);break e;case 1:l=m;var V=L.type,X=L.stateNode;if((L.flags&64)==0&&(typeof V.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Zs===null||!Zs.has(X)))){L.flags|=4096,e&=-e,L.lanes|=e;var Q=I3(L,l,e);qR(L,Q);break e}}L=L.return}while(L!==null)}j3(t)}catch(ae){e=ae,br===t&&t!==null&&(br=t=t.return);continue}break}while(1)}function $3(){var i=Y0.current;return Y0.current=q0,i===null?q0:i}function ap(i,e){var t=Ht;Ht|=16;var r=$3();di===i&&Jr===e||Tf(i,e);do try{PG();break}catch(o){V3(i,o)}while(1);if(i_(),Ht=t,Y0.current=r,br!==null)throw Error(tt(261));return di=null,Jr=0,Gr}function PG(){for(;br!==null;)W3(br)}function kG(){for(;br!==null&&!pG();)W3(br)}function W3(i){var e=Y3(i.alternate,i,fu);i.memoizedProps=i.pendingProps,e===null?j3(i):br=e,L_.current=null}function j3(i){var e=i;do{var t=e.alternate;if(i=e.return,(e.flags&2048)==0){if(t=SG(t,e,fu),t!==null){br=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(fu&1073741824)!=0||(t.mode&4)==0){for(var r=0,o=t.child;o!==null;)r|=o.lanes|o.childLanes,o=o.sibling;t.childLanes=r}i!==null&&(i.flags&2048)==0&&(i.firstEffect===null&&(i.firstEffect=e.firstEffect),e.lastEffect!==null&&(i.lastEffect!==null&&(i.lastEffect.nextEffect=e.firstEffect),i.lastEffect=e.lastEffect),1<e.flags&&(i.lastEffect!==null?i.lastEffect.nextEffect=e:i.firstEffect=e,i.lastEffect=e))}else{if(t=MG(e),t!==null){t.flags&=2047,br=t;return}i!==null&&(i.firstEffect=i.lastEffect=null,i.flags|=2048)}if(e=e.sibling,e!==null){br=e;return}br=e=i}while(e!==null);Gr===0&&(Gr=5)}function hu(i){var e=gf();return au(99,OG.bind(null,i,e)),null}function OG(i,e){do Ua();while(rp!==null);if((Ht&48)!=0)throw Error(tt(327));var t=i.finishedWork;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(tt(177));i.callbackNode=null;var r=t.lanes|t.childLanes,o=r,l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;for(var c=i.eventTimes,h=i.expirationTimes;0<l;){var m=31-Aa(l),v=1<<m;o[m]=0,c[m]=-1,h[m]=-1,l&=~v}if(Po!==null&&(r&24)==0&&Po.has(i)&&Po.delete(i),i===di&&(br=di=null,Jr=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(o=Ht,Ht|=32,L_.current=null,jw=y0,c=vR(),Gw(c)){if("selectionStart"in c)h={start:c.selectionStart,end:c.selectionEnd};else e:if(h=(h=c.ownerDocument)&&h.defaultView||window,(v=h.getSelection&&h.getSelection())&&v.rangeCount!==0){h=v.anchorNode,l=v.anchorOffset,m=v.focusNode,v=v.focusOffset;try{h.nodeType,m.nodeType}catch{h=null;break e}var b=0,T=-1,L=-1,P=0,O=0,z=c,G=null;t:for(;;){for(var k;z!==h||l!==0&&z.nodeType!==3||(T=b+l),z!==m||v!==0&&z.nodeType!==3||(L=b+v),z.nodeType===3&&(b+=z.nodeValue.length),(k=z.firstChild)!==null;)G=z,z=k;for(;;){if(z===c)break t;if(G===h&&++P===l&&(T=b),G===m&&++O===v&&(L=b),(k=z.nextSibling)!==null)break;z=G,G=z.parentNode}z=k}h=T===-1||L===-1?null:{start:T,end:L}}else h=null;h=h||{start:0,end:0}}else h=null;qw={focusedElem:c,selectionRange:h},y0=!1,op=null,ev=!1,gt=r;do try{DG()}catch(ae){if(gt===null)throw Error(tt(330));za(gt,ae),gt=gt.nextEffect}while(gt!==null);op=null,gt=r;do try{for(c=i;gt!==null;){var A=gt.flags;if(A&16&&bd(gt.stateNode,""),A&128){var N=gt.alternate;if(N!==null){var I=N.ref;I!==null&&(typeof I=="function"?I(null):I.current=null)}}switch(A&1038){case 2:F3(gt),gt.flags&=-3;break;case 6:F3(gt),gt.flags&=-3,C_(gt.alternate,gt);break;case 1024:gt.flags&=-1025;break;case 1028:gt.flags&=-1025,C_(gt.alternate,gt);break;case 4:C_(gt.alternate,gt);break;case 8:h=gt,B3(c,h);var B=h.alternate;D3(h),B!==null&&D3(B)}gt=gt.nextEffect}}catch(ae){if(gt===null)throw Error(tt(330));za(gt,ae),gt=gt.nextEffect}while(gt!==null);if(I=qw,N=vR(),A=I.focusedElem,c=I.selectionRange,N!==A&&A&&A.ownerDocument&&gR(A.ownerDocument.documentElement,A)){for(c!==null&&Gw(A)&&(N=c.start,I=c.end,I===void 0&&(I=N),"selectionStart"in A?(A.selectionStart=N,A.selectionEnd=Math.min(I,A.value.length)):(I=(N=A.ownerDocument||document)&&N.defaultView||window,I.getSelection&&(I=I.getSelection(),h=A.textContent.length,B=Math.min(c.start,h),c=c.end===void 0?B:Math.min(c.end,h),!I.extend&&B>c&&(h=c,c=B,B=h),h=mR(A,B),l=mR(A,c),h&&l&&(I.rangeCount!==1||I.anchorNode!==h.node||I.anchorOffset!==h.offset||I.focusNode!==l.node||I.focusOffset!==l.offset)&&(N=N.createRange(),N.setStart(h.node,h.offset),I.removeAllRanges(),B>c?(I.addRange(N),I.extend(l.node,l.offset)):(N.setEnd(l.node,l.offset),I.addRange(N)))))),N=[],I=A;I=I.parentNode;)I.nodeType===1&&N.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<N.length;A++)I=N[A],I.element.scrollLeft=I.left,I.element.scrollTop=I.top}y0=!!jw,qw=jw=null,i.current=t,gt=r;do try{for(A=i;gt!==null;){var V=gt.flags;if(V&36&&CG(A,gt.alternate,gt),V&128){N=void 0;var X=gt.ref;if(X!==null){var Q=gt.stateNode;switch(gt.tag){case 5:N=Q;break;default:N=Q}typeof X=="function"?X(N):X.current=N}}gt=gt.nextEffect}}catch(ae){if(gt===null)throw Error(tt(330));za(gt,ae),gt=gt.nextEffect}while(gt!==null);gt=null,gG(),Ht=o}else i.current=t;if(Na)Na=!1,rp=i,ip=e;else for(gt=r;gt!==null;)e=gt.nextEffect,gt.nextEffect=null,gt.flags&8&&(V=gt,V.sibling=null,V.stateNode=null),gt=e;if(r=i.pendingLanes,r===0&&(Zs=null),r===1?i===B_?sp++:(sp=0,B_=i):sp=0,t=t.stateNode,ou&&typeof ou.onCommitFiberRoot=="function")try{ou.onCommitFiberRoot(Qw,t,void 0,(t.current.flags&64)==64)}catch{}if(ls(i,Zr()),Z0)throw Z0=!1,i=D_,D_=null,i;return(Ht&8)!=0||qs(),null}function DG(){for(;gt!==null;){var i=gt.alternate;ev||op===null||((gt.flags&8)!=0?FL(gt,op)&&(ev=!0):gt.tag===13&&LG(i,gt)&&FL(gt,op)&&(ev=!0));var e=gt.flags;(e&256)!=0&&AG(i,gt),(e&512)==0||Na||(Na=!0,Vd(97,function(){return Ua(),null})),gt=gt.nextEffect}}function Ua(){if(ip!==90){var i=97<ip?97:ip;return ip=90,au(i,FG)}return!1}function NG(i,e){N_.push(e,i),Na||(Na=!0,Vd(97,function(){return Ua(),null}))}function q3(i,e){F_.push(e,i),Na||(Na=!0,Vd(97,function(){return Ua(),null}))}function FG(){if(rp===null)return!1;var i=rp;if(rp=null,(Ht&48)!=0)throw Error(tt(331));var e=Ht;Ht|=32;var t=F_;F_=[];for(var r=0;r<t.length;r+=2){var o=t[r],l=t[r+1],c=o.destroy;if(o.destroy=void 0,typeof c=="function")try{c()}catch(m){if(l===null)throw Error(tt(330));za(l,m)}}for(t=N_,N_=[],r=0;r<t.length;r+=2){o=t[r],l=t[r+1];try{var h=o.create;o.destroy=h()}catch(m){if(l===null)throw Error(tt(330));za(l,m)}}for(h=i.current.firstEffect;h!==null;)i=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=null,h.stateNode=null),h=i;return Ht=e,qs(),!0}function X3(i,e,t){e=M_(t,e),e=R3(i,e,1),Oa(i,e),e=Gi(),i=tv(i,1),i!==null&&(v0(i,1,e),ls(i,e))}function za(i,e){if(i.tag===3)X3(i,i,e);else for(var t=i.return;t!==null;){if(t.tag===3){X3(t,i,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){i=M_(e,i);var o=I3(t,i,1);if(Oa(t,o),o=Gi(),t=tv(t,1),t!==null)v0(t,1,o),ls(t,o);else if(typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r)))try{r.componentDidCatch(e,i)}catch{}break}}t=t.return}}function BG(i,e,t){var r=i.pingCache;r!==null&&r.delete(e),e=Gi(),i.pingedLanes|=i.suspendedLanes&t,di===i&&(Jr&t)===t&&(Gr===4||Gr===3&&(Jr&62914560)===Jr&&500>Zr()-k_?Tf(i,0):I_|=t),ls(i,e)}function UG(i,e){var t=i.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=i.mode,(e&2)==0?e=1:(e&4)==0?e=gf()===99?1:2:(ko===0&&(ko=_f),e=of(62914560&~ko),e===0&&(e=4194304))),t=Gi(),i=tv(i,e),i!==null&&(v0(i,e,t),ls(i,t))}var Y3;Y3=function(i,e,t){var r=e.lanes;if(i!==null)if(i.memoizedProps!==e.pendingProps||Ei.current)Ts=!0;else if((t&r)!=0)Ts=(i.flags&16384)!=0;else{switch(Ts=!1,e.tag){case 3:w3(e),f_();break;case 5:t3(e);break;case 1:Ai(e.type)&&R0(e);break;case 4:l_(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var o=e.type._context;Kn(k0,o._currentValue),o._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?_3(i,e,t):(Kn(Zn,Zn.current&1),e=Io(i,e,t),e!==null?e.sibling:null);Kn(Zn,Zn.current&1);break;case 19:if(r=(t&e.childLanes)!=0,(i.flags&64)!=0){if(r)return E3(i,e,t);e.flags|=64}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Kn(Zn,Zn.current),r)break;return null;case 23:case 24:return e.lanes=0,x_(i,e,t)}return Io(i,e,t)}else Ts=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2),i=e.pendingProps,o=mf(e,Kr.current),yf(e,t),o=p_(null,e,r,i,o,t),e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)){var l=!0;R0(e)}else l=!1;e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o_(e);var c=r.getDerivedStateFromProps;typeof c=="function"&&N0(e,r,c,i),o.updater=F0,e.stateNode=o,o._reactInternals=e,a_(e,r,i,t),e=__(null,e,r,!0,l,t)}else e.tag=0,Li(null,e,o,t),e=e.child;return e;case 16:o=e.elementType;e:{switch(i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2),i=e.pendingProps,l=o._init,o=l(o._payload),e.type=o,l=e.tag=HG(o),i=Ms(o,i),l){case 0:e=w_(null,e,o,i,t);break e;case 1:e=x3(null,e,o,i,t);break e;case 11:e=m3(null,e,o,i,t);break e;case 14:e=g3(null,e,o,Ms(o.type,i),r,t);break e}throw Error(tt(306,o,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ms(r,o),w_(i,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ms(r,o),x3(i,e,r,o,t);case 3:if(w3(e),r=e.updateQueue,i===null||r===null)throw Error(tt(282));if(r=e.pendingProps,o=e.memoizedState,o=o!==null?o.element:null,jR(i,e),$d(e,r,null,t),r=e.memoizedState.element,r===o)f_(),e=Io(i,e,t);else{if(o=e.stateNode,(l=o.hydrate)&&(Da=ff(e.stateNode.containerInfo.firstChild),Ro=e,l=Ys=!0),l){if(i=o.mutableSourceEagerHydrationData,i!=null)for(o=0;o<i.length;o+=2)l=i[o],l._workInProgressVersionPrimary=i[o+1],wf.push(l);for(t=e3(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Li(i,e,r,t),f_();e=e.child}return e;case 5:return t3(e),i===null&&c_(e),r=e.type,o=e.pendingProps,l=i!==null?i.memoizedProps:null,c=o.children,Xw(r,o)?c=null:l!==null&&Xw(r,l)&&(e.flags|=16),y3(i,e),Li(i,e,c,t),e.child;case 6:return i===null&&c_(e),null;case 13:return _3(i,e,t);case 4:return l_(e,e.stateNode.containerInfo),r=e.pendingProps,i===null?e.child=z0(e,null,r,t):Li(i,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ms(r,o),m3(i,e,r,o,t);case 7:return Li(i,e,e.pendingProps,t),e.child;case 8:return Li(i,e,e.pendingProps.children,t),e.child;case 12:return Li(i,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,o=e.pendingProps,c=e.memoizedProps,l=o.value;var h=e.type._context;if(Kn(k0,h._currentValue),h._currentValue=l,c!==null)if(h=c.value,l=ss(h,l)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(h,l):1073741823)|0,l===0){if(c.children===o.children&&!Ei.current){e=Io(i,e,t);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var m=h.dependencies;if(m!==null){c=h.child;for(var v=m.firstContext;v!==null;){if(v.context===r&&(v.observedBits&l)!=0){h.tag===1&&(v=ka(-1,t&-t),v.tag=2,Oa(h,v)),h.lanes|=t,v=h.alternate,v!==null&&(v.lanes|=t),WR(h.return,t),m.lanes|=t;break}v=v.next}}else c=h.tag===10&&h.type===e.type?null:h.child;if(c!==null)c.return=h;else for(c=h;c!==null;){if(c===e){c=null;break}if(h=c.sibling,h!==null){h.return=c.return,c=h;break}c=c.return}h=c}Li(i,e,o.children,t),e=e.child}return e;case 9:return o=e.type,l=e.pendingProps,r=l.children,yf(e,t),o=os(o,l.unstable_observedBits),r=r(o),e.flags|=1,Li(i,e,r,t),e.child;case 14:return o=e.type,l=Ms(o,e.pendingProps),l=Ms(o.type,l),g3(i,e,o,l,r,t);case 15:return v3(i,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ms(r,o),i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ai(r)?(i=!0,R0(e)):i=!1,yf(e,t),ZR(e,r,o),a_(e,r,o,t),__(null,e,r,!0,i,t);case 19:return E3(i,e,t);case 23:return x_(i,e,t);case 24:return x_(i,e,t)}throw Error(tt(156,e.tag))};function zG(i,e,t,r){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function us(i,e,t,r){return new zG(i,e,t,r)}function H_(i){return i=i.prototype,!(!i||!i.isReactComponent)}function HG(i){if(typeof i=="function")return H_(i)?1:0;if(i!=null){if(i=i.$$typeof,i===i0)return 11;if(i===o0)return 14}return 2}function Ha(i,e){var t=i.alternate;return t===null?(t=us(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function rv(i,e,t,r,o,l){var c=2;if(r=i,typeof i=="function")H_(i)&&(c=1);else if(typeof i=="string")c=5;else e:switch(i){case ba:return Ef(t.children,o,l,e);case mL:c=8,o|=16;break;case Z1:c=8,o|=1;break;case yd:return i=us(12,t,e,o|8),i.elementType=yd,i.type=yd,i.lanes=l,i;case xd:return i=us(13,t,e,o),i.type=xd,i.elementType=xd,i.lanes=l,i;case s0:return i=us(19,t,e,o),i.elementType=s0,i.lanes=l,i;case rw:return G_(t,o,l,e);case iw:return i=us(24,t,e,o),i.elementType=iw,i.lanes=l,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q1:c=10;break e;case J1:c=9;break e;case i0:c=11;break e;case o0:c=14;break e;case ew:c=16,r=null;break e;case tw:c=22;break e}throw Error(tt(130,i==null?i:typeof i,""))}return e=us(c,t,e,o),e.elementType=i,e.type=r,e.lanes=l,e}function Ef(i,e,t,r){return i=us(7,i,r,e),i.lanes=t,i}function G_(i,e,t,r){return i=us(23,i,r,e),i.elementType=rw,i.lanes=t,i}function V_(i,e,t){return i=us(6,i,null,e),i.lanes=t,i}function $_(i,e,t){return e=us(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function GG(i,e,t){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Rw(0),this.expirationTimes=Rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rw(0),this.mutableSourceEagerHydrationData=null}function VG(i,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:r==null?null:""+r,children:i,containerInfo:e,implementation:t}}function iv(i,e,t,r){var o=e.current,l=Gi(),c=Fa(o);e:if(t){t=t._reactInternals;t:{if(ru(t)!==t||t.tag!==1)throw Error(tt(170));var h=t;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(Ai(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(h!==null);throw Error(tt(171))}if(t.tag===1){var m=t.type;if(Ai(m)){t=DR(t,m,h);break e}}t=h}else t=Ia;return e.context===null?e.context=t:e.pendingContext=t,e=ka(l,c),e.payload={element:i},r=r===void 0?null:r,r!==null&&(e.callback=r),Oa(o,e),Ba(o,c,l),c}function W_(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function K3(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function j_(i,e){K3(i,e),(i=i.alternate)&&K3(i,e)}function $G(){return null}function q_(i,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new GG(i,e,t!=null&&t.hydrate===!0),e=us(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,o_(e),i[hf]=t.current,MR(i.nodeType===8?i.parentNode:i),r)for(i=0;i<r.length;i++){e=r[i];var o=e._getVersion;o=o(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,o]:t.mutableSourceEagerHydrationData.push(e,o)}this._internalRoot=t}q_.prototype.render=function(i){iv(i,this._internalRoot,null,null)};q_.prototype.unmount=function(){var i=this._internalRoot,e=i.containerInfo;iv(null,i,null,function(){e[hf]=null})};function lp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function WG(i,e){if(e||(e=i?i.nodeType===9?i.documentElement:i.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=i.lastChild;)i.removeChild(t);return new q_(i,0,e?{hydrate:!0}:void 0)}function sv(i,e,t,r,o){var l=t._reactRootContainer;if(l){var c=l._internalRoot;if(typeof o=="function"){var h=o;o=function(){var v=W_(c);h.call(v)}}iv(e,c,i,o)}else{if(l=t._reactRootContainer=WG(t,r),c=l._internalRoot,typeof o=="function"){var m=o;o=function(){var v=W_(c);m.call(v)}}G3(function(){iv(e,c,i,o)})}return W_(c)}BL=function(i){if(i.tag===13){var e=Gi();Ba(i,4,e),j_(i,4)}};Mw=function(i){if(i.tag===13){var e=Gi();Ba(i,67108864,e),j_(i,67108864)}};UL=function(i){if(i.tag===13){var e=Gi(),t=Fa(i);Ba(i,t,e),j_(i,t)}};zL=function(i,e){return e()};vw=function(i,e,t){switch(e){case"input":if(lw(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==i&&r.form===i.form){var o=C0(r);if(!o)throw Error(tt(90));yL(r),lw(r,o)}}}break;case"textarea":SL(i,t);break;case"select":e=t.value,e!=null&&ef(i,!!t.multiple,e,!1)}};yw=H3;PL=function(i,e,t,r,o){var l=Ht;Ht|=4;try{return au(98,i.bind(null,e,t,r,o))}finally{Ht=l,Ht===0&&(Sf(),qs())}};xw=function(){(Ht&49)==0&&(IG(),Ua())};kL=function(i,e){var t=Ht;Ht|=2;try{return i(e)}finally{Ht=t,Ht===0&&(Sf(),qs())}};function Z3(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lp(e))throw Error(tt(200));return VG(i,e,null,t)}var jG={Events:[Gd,df,C0,RL,IL,Ua,{current:!1}]},up={findFiberByHostInstance:iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},qG={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:eu.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=NL(i),i===null?null:i.stateNode},findFiberByHostInstance:up.findFiberByHostInstance||$G,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ov.isDisabled&&ov.supportsFiber)try{Qw=ov.inject(qG),ou=ov}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jG;is.createPortal=Z3;is.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(tt(188)):Error(tt(268,Object.keys(i)));return i=NL(e),i=i===null?null:i.stateNode,i};is.flushSync=function(i,e){var t=Ht;if((t&48)!=0)return i(e);Ht|=1;try{if(i)return au(99,i.bind(null,e))}finally{Ht=t,qs()}};is.hydrate=function(i,e,t){if(!lp(e))throw Error(tt(200));return sv(null,i,e,!0,t)};is.render=function(i,e,t){if(!lp(e))throw Error(tt(200));return sv(null,i,e,!1,t)};is.unmountComponentAtNode=function(i){if(!lp(i))throw Error(tt(40));return i._reactRootContainer?(G3(function(){sv(null,null,i,!1,function(){i._reactRootContainer=null,i[hf]=null})}),!0):!1};is.unstable_batchedUpdates=H3;is.unstable_createPortal=function(i,e){return Z3(i,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};is.unstable_renderSubtreeIntoContainer=function(i,e,t,r){if(!lp(t))throw Error(tt(200));if(i==null||i._reactInternals===void 0)throw Error(tt(38));return sv(i,e,t,!1,r)};is.version="17.0.2";function Q3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q3)}catch(i){console.error(i)}}Q3(),lL.exports=is;var r6=lL.exports;export{DA as A,xi as B,Ke as C,zh as D,QG as E,JG as F,Fr as G,kc as I,qr as M,dr as P,Ut as Q,n6 as R,El as S,YG as T,fe as V,yn as W,B4 as Z,Fn as a,_x as b,Pl as c,xo as d,Il as e,t6 as f,Cm as g,RA as h,KG as i,ZG as j,bg as k,yA as l,qE as m,Qm as n,G4 as o,fA as p,$H as q,fd as r,Or as s,WH as t,Wx as u,e6 as v,jH as w,QH as x,r6 as y};
