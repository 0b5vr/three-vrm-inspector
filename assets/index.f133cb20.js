var _e=Object.defineProperty,He=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ee=(n,A,e)=>A in n?_e(n,A,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[A]=e,R=(n,A)=>{for(var e in A||(A={}))De.call(A,e)&&ee(n,e,A[e]);if(de)for(var e of de(A))Ue.call(A,e)&&ee(n,e,A[e]);return n},v=(n,A)=>He(n,Se(A));var x=(n,A,e)=>(ee(n,typeof A!="symbol"?A+"":A,e),e);import{C as he,M as Ae,S as Te,a as Ne,b as ge,A as pe,V as Z,Q as G,F as Ve,c as ue,d as fe,e as Ee,f as Be,T as Ge,P as Fe,g as Oe,G as te,D as je,h as We,i as Ze,j as Ye,Z as Ke,I as Je,k as Y,v as Xe,E as qe,l as $e,W as eA,s as AA,B as tA,m as nA,n as oA,o as K,R as xe,p as iA,q as ne,r as p,t as C,u as rA}from"./vendor.370af3fd.js";const sA=function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}};sA();const F={black:"#000000",white:"#ffffff",back1:"#191a1f",fore:"#d0edff",titleBarBg:"#30343b",accent:"#ff0066",gray:"#75848f",uiBackground:"rgba( 25, 26, 31, 0.8 )",error:"#ff0066",warning:"#f7f025",severityInfo:"#53c5ff",constant:"#ff0066",number:"#8a8aff",string:"#f7f025"},aA=new he(F.constant),lA=new Ae({color:aA,transparent:!0,wireframe:!0,depthTest:!1,depthWrite:!1}),cA=new Te(.2);function we(n=cA){const A=new Ne(n,lA);return A.frustumCulled=!1,A.renderOrder=1e4,A}function mA(n,A,e){const i=n.parser.json.nodes[A].mesh;if(i==null)return null;const a=n.parser.json.meshes[i].primitives.length,s=[];return e.traverse(l=>{s.length<a&&l.isMesh&&s.push(l)}),s}async function J(n,A){const e=await n.parser.getDependency("node",A);return mA(n,A,e)}const dA=new ge({transparent:!0,depthTest:!1,depthWrite:!1});function O(n,A=dA){const e=new Map;return n.forEach(t=>{Array.isArray(t.material)&&(e.set(t,t.material[0]),t.material[0]=A)}),()=>{for(const[t,i]of e)t.material[0]=i}}function oe(n){const A=new Map;return n.forEach(e=>{const t=we();e.add(t),A.set(e,t)}),()=>{n.forEach(e=>{const t=A.get(e);e.remove(t)})}}class hA extends ge{constructor(A){super(A);x(this,"_skinIndexVisualize");x(this,"_uniforms");this._skinIndexVisualize=0,this.onBeforeCompile=e=>{this._uniforms=e.uniforms,this._uniforms.skinIndexVisualize={value:this._skinIndexVisualize},e.vertexShader=e.vertexShader.replace("#include <common>",`#include <common>

        varying float vWeightVisualize;
        uniform float skinIndexVisualize;`),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`#ifdef USE_SKINNING
          vWeightVisualize = (
            skinIndex.x == skinIndexVisualize ? skinWeight.x : 0.0 +
            skinIndex.y == skinIndexVisualize ? skinWeight.y : 0.0 +
            skinIndex.z == skinIndexVisualize ? skinWeight.z : 0.0 +
            skinIndex.w == skinIndexVisualize ? skinWeight.w : 0.0
          );
        #else
          vWeightVisualize = 0.0;
        #endif

        #include <begin_vertex>`),e.fragmentShader=e.fragmentShader.replace("#include <packing>",`#include <packing>

        varying float vWeightVisualize;`),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( packNormalToRGB( normal ), opacity );",`gl_FragColor = vec4(
          clamp( 2.0 - abs( vec3( 4.0, 2.0, 0.0 ) - 4.0 * vWeightVisualize ), 0.0, 1.0 ),
          opacity
        );`)}}get skinIndexVisualize(){return this._skinIndexVisualize}set skinIndexVisualize(A){this._uniforms&&(this._uniforms.skinIndexVisualize={value:A}),this._skinIndexVisualize=A}}const Ie=new hA({transparent:!0,depthTest:!1,depthWrite:!1}),gA=new he(F.constant);class pA{constructor(A){x(this,"_inspector");this._inspector=A}highlight(A){const e=this._inspector,t=A.split("/"),i=e.model.gltf,r=i.parser,a=r.json;if(t.length===3&&t[1]==="nodes"){const s=parseInt(t.pop());let l;return r.getDependency("node",s).then(c=>{l=oe([c])}),()=>{l&&l()}}else if(t.length===3&&t[1]==="meshes"){const s=parseInt(t.pop());let l;const c=a.nodes,h=[];return c==null||c.forEach((d,g)=>{d.mesh===s&&h.push(g)}),Promise.all(h.map(d=>J(i,d))).then(d=>d.flat()).then(d=>{l=O(d)}),()=>{l&&l()}}else if(t.length===5&&t[1]==="meshes"&&t[3]==="primitives"){const s=parseInt(t[2]),l=parseInt(t[4]);let c;return r.getDependency("mesh",s).then(h=>{h.children.length!==0&&(h=h.children[l]),c=O([h])}),()=>{c&&c()}}else if(t.length===7&&t[1]==="meshes"&&t[3]==="primitives"&&t[5]==="targets"){const s=parseInt(t[2]),l=parseInt(t[4]),c=parseInt(t[6]);let h;return r.getDependency("mesh",s).then(f=>{f.children.length!==0&&(f=f.children[l]);const d=f;d.morphTargetInfluences&&(d.morphTargetInfluences[c]=1),h=()=>{d.morphTargetInfluences&&(d.morphTargetInfluences[c]=0)}}),()=>{h&&h()}}else if(t.length===6&&t[1]==="meshes"&&t[3]==="extras"&&t[4]==="targetNames"){const s=parseInt(t[2]),l=parseInt(t[5]);let c;const h=a.nodes,f=[];return h==null||h.forEach((g,u)=>{g.mesh===s&&f.push(u)}),Promise.all(f.map(g=>J(i,g))).then(g=>g.flat()).then(g=>{g.forEach(u=>{u.morphTargetInfluences&&(u.morphTargetInfluences[l]=1)}),c=()=>{g.forEach(u=>{u.morphTargetInfluences&&(u.morphTargetInfluences[l]=0)})}}),()=>{c&&c()}}else if(t.length===3&&t[1]==="skins"){const s=parseInt(t[2]);let l;const c=a.nodes,h=[];return c==null||c.forEach((d,g)=>{d.skin===s&&h.push(g)}),Promise.all(h.map(d=>J(i,d))).then(d=>d.flat()).then(d=>{l=O(d)}),()=>{l&&l()}}else if(t.length===5&&t[1]==="skins"&&t[3]==="joints"){const s=parseInt(t[2]),l=parseInt(t[4]),c=[],h=a.skins[s].joints[l];r.getDependency("node",h).then(u=>{c.push(oe([u]))});const f=a.nodes,d=[];return f==null||f.forEach((u,B)=>{u.skin===s&&d.push(B)}),Promise.all(d.map(u=>J(i,u))).then(u=>u.flat()).then(u=>{c.push(O(u,Ie)),Ie.skinIndexVisualize=l}),()=>{c.forEach(u=>u())}}else if(t.length===3&&t[1]==="materials"||t.length===5&&t[2]==="VRM"&&t[3]==="materialProperties"){const s=parseInt(t.pop());let l;return r.getDependencies("mesh").then(c=>{const h=[];a.meshes.forEach((f,d)=>{f.primitives.forEach((u,B)=>{if(s===u.material){let E=c[d];E.children.length!==0&&(E=E.children[B]);const w=E;h.push(w)}})}),l=O(h)}),()=>{l&&l()}}else if(t.length===6&&t[2]==="VRM"&&t[3]==="humanoid"&&t[4]==="humanBones"){const s=parseInt(A.split("/").pop()),c=a.extensions.VRM.humanoid.humanBones[s].bone,h=e.model.vrm.humanoid.getBoneNode(c);return oe([h])}else if(t.length===4&&t[2]==="VRM"&&t[3]==="firstPerson"){const s=we();return e.model.vrm.lookAt.getLookAtWorldPosition(s.position),e.scene.add(s),()=>{e.scene.remove(s)}}else{if(t.length===5&&t[2]==="VRM"&&t[3]==="firstPerson"&&t[4]==="meshAnnotations")return e.layerMode="firstPerson",()=>{e.layerMode="thirdPerson"};if(t.length===6&&t[2]==="VRM"&&t[3]==="blendShapeMaster"&&t[4]==="blendShapeGroups"){const s=parseInt(A.split("/").pop()),h=a.extensions.VRM.blendShapeMaster.blendShapeGroups[s].name,f=e.model.vrm.expressionManager.getValue(h);return e.model.vrm.expressionManager.setValue(h,1),()=>{e.model.vrm.expressionManager.setValue(h,f)}}else if(t.length===6&&t[2]==="VRM"&&t[3]==="secondaryAnimation"&&t[4]==="boneGroups"){const s=parseInt(A.split("/").pop()),c=a.extensions.VRM.secondaryAnimation,h=c==null?void 0:c.boneGroups[s].bones,f=e.model.vrm.springBoneManager,d=new Map;for(const w of f.springBones)d.set(w.bone,w);const g=e.springBoneJointHelperRoot,u=new Map;g.children.forEach(w=>{const b=w;u.set(b.springBone,b)});const B=[],E=new Set;return h.forEach(w=>{r.getDependency("node",w).then(b=>{b.traverse(y=>{const I=d.get(y),Q=u.get(I);E.add(Q);const _=Q.children[0].material,H=_.color.clone();_.color.copy(gA),B.push(()=>{_.color.copy(H)})})})}),()=>{B.forEach(w=>w())}}}}}class uA{constructor(){x(this,"_eventListeners")}on(A,e){this._eventListeners=this._eventListeners||new Map;let t=this._eventListeners.get(A);t||(t=[],this._eventListeners.set(A,t)),t.push(e)}off(A,e){this._eventListeners=this._eventListeners||new Map;let t=this._eventListeners.get(A);t||(t=[],this._eventListeners.set(A,t));const i=t.indexOf(e);i!==-1&&t.splice(i,1)}_emit(...[A,e]){var t;this._eventListeners=this._eventListeners||new Map,(t=this._eventListeners.get(A))==null||t.forEach(i=>i(e))}}function fA(n,A){A.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(t=>{Object.defineProperty(n.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}function EA(n){var e;const A=(e=n.humanoid)==null?void 0:e.humanBones;if(A)for(const t of Object.values(A)){const i=new pe(.1);i.renderOrder=1e4,i.material.depthTest=!1,i.material.depthWrite=!1,t==null||t.node.add(i)}}function BA(n,A){const e=new Set,t=n.material;if(Array.isArray(t))t.forEach(r=>{e.add(r)});else{const i=t;e.add(i)}for(const i of e)A(i)}function Re(n,A){const e=[];let t=[],i=0;return Array.from(n).forEach(r=>{i<=0&&(i=A,t=[],e.push(t)),t.push(r),i--}),e}const xA=new Z,wA=new G;function IA(n){const A=n.humanoid;if(A==null)return null;const e=A.getPose(),t={};return Object.entries(A.humanBones).map(([i,r])=>{if(r!=null){const a=r.node;t[i]={position:a.getWorldPosition(xA).toArray(),rotation:a.getWorldQuaternion(wA).toArray()}}}),A.setPose(e),t}const RA={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbProximal",mixamorigLeftHandThumb2:"leftThumbIntermediate",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbProximal",mixamorigRightHandThumb2:"rightThumbIntermediate",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"},vA=new G,MA=new G,yA=new G,bA=new G,CA=new Z,QA=new Z;async function zA(n,A){const e=A.humanoid;if(e==null)return null;const i=await new Ve().loadAsync(n),r=ue.findByName(i.animations,"mixamo.com"),a=[],s=IA(A);return r.tracks.forEach(l=>{var d,g,u,B;const c=l.name.split("."),h=c[0],f=RA[h];if(f!=null){const E=e.restPose[f],w=s==null?void 0:s[f],b=(d=e.getBoneNode(f))==null?void 0:d.name;if(b!=null){const y=c[1],I=(g=E==null?void 0:E.position)!=null?g:[0,0,0],Q=CA.fromArray(I);let U=.01;f==="hips"&&(U*=Q.length(),Q.multiplyScalar(0));const _=(u=E==null?void 0:E.rotation)!=null?u:[0,0,0,1],H=vA.fromArray(_),W=(B=w==null?void 0:w.rotation)!=null?B:[0,0,0,1],N=MA.fromArray(W).multiply(H),V=yA.copy(N).invert();l instanceof fe?a.push(new fe(`${b}.${y}`,l.times,Re(l.values,4).flatMap(T=>bA.fromArray(T).multiply(N).premultiply(V).multiply(H).toArray()))):l instanceof Ee&&a.push(new Ee(`${b}.${y}`,l.times,Re(l.values,3).flatMap(T=>QA.fromArray(T).applyQuaternion(V).multiplyScalar(U).add(Q).toArray())))}}}),new ue("vrmAnimation",r.duration,a)}var LA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQQBBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAH7v5JqzrodJxSqKZUVyCEgj6EZBH0IyCMgjIPPQ8kEZB5IOwqeJbISlsqmFVgVTCEpSE5SuctkJxZCZZCZZCZZGZZCwITDrvqOe5Si6Wznvls57osouLKLiyi4souLKbiym4spuKpvCm4Sq4squLNHQma5ujrlLm6OuUubo65y5mlpnLmaWmcuZpaZy5mlpnLmaWmcubpaZy5ujpnLnaPecudo6Zy5+hpnLwaGmcvB36Zy5bzvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8QAIBABAQEBAAIABwAAAAAAAAAAABIREwECAwQQFDBQcP/aAAgBAQABBQL39vWPm/Hivb833ftnxPenn9DjGMZ9MYxjGMYxjGMYxjGMYxjEpSlKUpSlKUpSlCEIQhCEIQhCEIcnJxcXFxcXFxcXFxcXJycv4D//xAAbEQEBAAIDAQAAAAAAAAAAAAAAEQEwAhJgcP/aAAgBAwEBPwFy39mc775CIiIiIiIiIifAf//EABwRAQEBAAMAAwAAAAAAAAAAAAATEQESMAJQcP/aAAgBAgEBPwF8Pfo4498Z9/rWt8ta1RRRRRRRRRRRRRRR3/Af/8QAGRAAAgMBAAAAAAAAAAAAAAAAATEAITBw/9oACAEBAAY/AjYUO77h/8QAHhABAQEAAQQDAAAAAAAAAAAAABEBIRAgMEFQUWD/2gAIAQEAAT8hpdhXtxr7YbidIndERnCrru4iIiIiIiIrda3ERERERERERuN7QTxgPvn83m/HAAH/AP2fzcuV1dXV1dXf3P8A/9oADAMBAAIAAwAAABD1v+TzxSRCCCBACADDAiKLNsvk00302/8AvbJpdNFF1BBwgxRRMk0QwyyyyCSf/wD407777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDnDndwzOhLnvM6uXRyzMz2M7szOjOzMzMzPhKUpSlKUpzn6nKcvsSIiIiIiIiIi//EABwRAQEBAQADAQEAAAAAAAAAABEAUQEQIDBAcP/aAAgBAgEBPxDnOt10ufbvMdz1Ij1I8hHg+Z8j5kfJ/IDMzM8nkzz0A2Gw2Gx2Ox2Ox2Ow2Gw2Gw2O/wAB/8QAIBABAQACAgMBAAMAAAAAAAAAAQARUWGREHGhIDAxYP/aAAgBAQABPxASIw/o5ye7N8cZWFfExJ8GLFixY8hE58WNyNVzmOV8TGP8IAJmTsc+FrWv6/KUq58kYx/ZAhCMY+AxjH85IQhHjPG4Zep4zxnjPGz1el6XrHCOMcY4ytStS9S9S9S9S9S9S9WerLULULULULUPU8D5PE+TwJeiVol6JeiXqXo+Weiy0WerPVno+WWi9Szs9tnZ7bke25HtuR7bke25HtuR7bLt7bLt7bLt7bLt7bLt7bLt7bLt7bLt7f8AY//Z",PA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDAgT/2gAMAwEAAhADEAAAAc6XpYoSCEpSEpSMoISCPQ50OdDnQ5IOdDklOSlOSDnQssWKpylc4srmWVzLK5lQmFcwhMITCMwhMIzEjMsjMsjML76Tz3lnm9BZ5ryzz3lnnvK898pRdKUXylF8pTdKU3ylN8pTeFVwVXCe7Rma5ujpnLm6WmcuXp6Zy5enpnLl6eucuXp6Zy5enpnLl6emcuZp98S5ul3nLm6Wmcudo6Zy5+hpnL4NDTOXwe/TOXLed6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITMFBw/9oACAEBAAEFAvRTzRERERERERERERERERERERGWWWWWWWWWWWWWWWWHNzc3Nzc3NzYYYYYYYcnFxcXBwcHBwcHFxcXFycvgP//EABcRAQEBAQAAAAAAAAAAAAAAABEAYHD/2gAIAQMBAT8B2BERERERERERwH//xAAbEQEBAQEAAwEAAAAAAAAAAAAAExEBEjBgcP/aAAgBAgEBPwH6DWt9etaoooooopxTinFOKKKKKPP8B//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEABj8CAH//xAAcEAEBAQADAAMAAAAAAAAAAAARAAEQMEBQYHH/2gAIAQEAAT8hIiOkjgiIiIiIiIiIiI4ERERERERHwYAAf/8A++DwAt8wD9YfjoZOzs7Ozs7O/ev/2gAMAwEAAgADAAAAEBAOuj73333736qgkCm3XVdBNNNBNNRXX8QYcQQqmqqmqqoAEemjrrgkssqz7z0w07777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABsRAQEBAAIDAAAAAAAAAAAAABEAIEBREDBg/9oACAEDAQE/EJ4b6HTlmds+WdM4cM7Z2zPKU5SlKc5zn1PqU5S+xIiIiIiIiIiL/8QAHREBAQEAAgMBAQAAAAAAAAAAEQBRMGEBECBAcP/aAAgBAgEBPxD8B8HOcRxERHIfJH5gTM+J8TMzM+g9BsNhsdjsdu67rsuyOw2Gw2Gx3+A//8QAHRABAQADAQEBAQEAAAAAAAAAAQARUWGRIHFgof/aAAgBAQABPxBjGMSxYsWLFixEIERrGsY/ICEIQhGtY1r9flKUpWtaxjH5AQhCEa1rWMfkBCEIR4ni4TxPErU835s9Wer8xzHMcxzHMvUrUmpWpWpWpWpWrLVnqz1D1D1C1C1D1fknklaP8l6JWiVol6JeiVpK0WerLRZ6LLRZavyXR9bo+t0fW6PrdH1uj63R9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9f7H/9k=",kA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAasKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQABBQIAf//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8BAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/AQB//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQAGPwIAf//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEAAT8hAH//2gAMAwEAAgADAAAAEM8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8QAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/EAB//8QAFhABAQEAAAAAAAAAAAAAAAAAABFw/9oACAEBAAE/ENwiIiIiIiIiIj//2Q==",_A="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAQEBAQEAAAAAAAAAAAAAAQACAwQG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB+6+NdXO8q2eY0ywUAEBCCWEWCAgICBrIaA0WHo5qb5y2OJSEIsICAcggICCoQgaAQNAdCiAhCAgICBYBAQEBAYEJdBGgN1BQEABAsBSEWFBQUCA1g1CBqI1AQEBARRIEFBQUFBQME0SDEagICAiwiilBgIKCgoJCVKBiGDSGYBDKGUsIoQGUGUGUEKCRJCQkFUywZQygIZQEsEszosEsEBCQkJCg/8QAHRAAAQQCAwAAAAAAAAAAAAAAAgADERIBMAQUcP/aAAgBAQABBQIzCnLixbu2UOOWWd1lPr//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQMBAT8BJb2G+3//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQIBAT8BIb0Eu3//xAAZEAACAwEAAAAAAAAAAAAAAAABMQAhMHD/2gAIAQEABj8CNhQ7vuH/xAAgEAEAAgEDBQEAAAAAAAAAAAABABEQIDBgITFAQVBR/9oACAEBAAE/Ib+sK9k7F+4Om9Fy8nRWwHHeMrHduXF4c8AfAfof/9oADAMBAAIAAwAAABC0w8HDHUfe8+/9+8colvcc/wDf/LKL/P8A38MRzzz2sAAAEIMm34b7/wBrCRSyyxyQBAP+++sATwwwwxwyCAM888EBixwxxyyhBP8Av/vnhQgIIIgQxnvvrPv/AD9xQYRV9/zz3//EABwRAAEDBQAAAAAAAAAAAAAAAAEQEUAAITBQcP/aAAgBAwEBPxAmyDABVsb0+gEATxxD/8QAGxEAAwADAQEAAAAAAAAAAAAAAAERECAwUGD/2gAIAQIBAT8QSdGcFvdKXEUgLtCfUXK6P0J7H//EAB0QAQEBAQACAwEAAAAAAAAAAAEAERAgMSFBUWH/2gAIAQEAAT8QAAo+E3T+MW/rq9mUsssvGtra9Nhl75Z+zpV23WUsstttttttsMNr9nfu3lLLLbbbbbbbDbMeBZZZZbbbbbYYYZZZZZZZZbbbbbYYYlllllllttttthhhiWWWWWWW223mxERLMyyyz5ERHDMzM93hERE+5mZmeMcIiImZmZ8iIiJmZmZ5llkEEEEcMzMlllllkEEEEEJmSSSyyyyyCCCCCZJJJLLLLLLIIIIIJJJJLLLLLLLIIIIIL//Z",HA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQEEBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAHOl6WKEgjII9CMgjIIyDnQ5IOdDkg5IEglKDSo466n3HyWGuueJPRwrsCuZZXMshMshMshMshNbIzlIylIzCNgRmCUtnUtnUtkbhKLiyi4sovKouCm4Sm4spuLKriyq4squLKriyq9bKrpbKrpSq+Cfvma5+hpnLnaGmcudo6Zy52jpnLnaOucudpaZy5ulpnLnaWmcudpaZy52lpnLnaWmcufo6Zy5+jplLn6OuUvg0NM5cN53oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/EACEQAQEBAQABAgcAAAAAAAAAAAASERMCATADBBAUIEBw/9oACAEBAAEFAvd8Xynp6V4eXjHu+j4fnL7vyz9DGMYxjPpjGMZ+GMYxjGMYxjGMYxKUpSlKUpSlKUpQhCEIQhCEIQhCHJycnFxcXFxcXFxcXFxcnL+A/wD/xAAcEQEBAAICAwAAAAAAAAAAAAARAAFAAhIwYHD/2gAIAQMBAT8B83HQxm7aD6CREREREREREfAf/8QAHREBAQEAAgIDAAAAAAAAAAAAABMRATACEkBQcP/aAAgBAgEBPwHu8/gc8PTvxn2Otb1a1rXuoooooooooooooop+A//EABoQAAICAwAAAAAAAAAAAAAAAAExACEwQHD/2gAIAQEABj8CzCCwtB9h/8QAHxABAQEAAQMFAAAAAAAAAAAAABEBIRAgMEBBUFFg/9oACAEBAAE/IYid0TpGYw519qXIR7oiIiIiIiMzr28KkRERERERGYxmr4AE7QwzETy+z56HwAGfFh//ANn87q6urq6uuXP7H//aAAwDAQACAAMAAAAQAgAQgggQkU88k/b9/vN9NNN5LbziiIwwRRxgwBB1FFNdpJbvTj//AH0gsssssENJDL777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDDM4d+MOO7iDJ0curPYZmZ1Zmd2cszMzM7M+CpynP1OcpSlKUpS+xIiIiIiIiIiL//xAAcEQEBAQEBAQADAAAAAAAAAAARAFEBMCAQQHD/2gAIAQIBAT8Q9e3XS7zrEfJEfPZ7nPmfgjwDyPIj9V+A8meTyZmZ+QOw2Gw2Gw2Ox2Ox2Ox2Gw2Gw3+A/wD/xAAgEAEBAAICAwEAAwAAAAAAAAABABFRYZEQcaEgMDFg/9oACAEBAAE/EHyMWLFix4ECPCypZvjjCUCEP6GMHuf4QAQh4RwkjEcYg48WNzWv6/KUp4pxOWbMY/sEQh5CQcxjH8pKQh4BCEeM8Z4zwvW9L0hajjHGOMcYerhjjHGXqVqVqVqVqy1Z6h6h6h6h6h6h6h6hahavUstFno+WerPVlos9EPR8h6h6IeiFoh6I4EcT5HA+WXb22Xb22Xb22Xb22Xb22Xb22Xb22Xb23I9tyPbcj23I9tyPbcj22dnts7Pb/sf/2Q==",SA="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDBAL/2gAMAwEAAhADEAAAAc7vSxRkEJSkJSkewRkEehzoc6HOhyQckEZKclKckHJBKZFcyyuZZXMsrmVCYVzCEwhMIzCEwjMSMyyMyyM1I2Sk7hKLivPeHnvlPPfKUXSlF8pRfKU3SlN8pTeFN4lN5ZT6Cym8spvLL/fM1z9DTOXO0NM5c7R0zlzdLTOXN0tM5czT08S5mnpnLm6emcubp6Zy5unpnLm6fvOXN09M5c7S0zlztHTOXP0dM5cVzugAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITEFBw/9oACAEBAAEFAvWzzEREREREREREREREREREREZZZZZZZZZZZZZZZZYYYYYYYc3Nzc3Nzc3NhycnFxcXFwcHBwcHBxcXFy+A/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAARAGBw/9oACAEDAQE/AdgREREREREREcB//8QAGxEBAQEBAAMBAAAAAAAAAAAAABMRARIwYHD/2gAIAQIBAT8B+g1rfXrWvNRRRRRTinFOKcUUUUUU/Af/xAAUEAEAAAAAAAAAAAAAAAAAAACA/9oACAEBAAY/AgB//8QAHBABAQEAAwADAAAAAAAAAAAAEQABEDBAUGBx/9oACAEBAAE/ITgjpIiIiIiIiIiIiIiIiIiIiIjgR8cAAH//AIAfPB34GdRTfjxBrs7Ozs7Ozv3H/9oADAMBAAIAAwAAABBAKqp+9999+8/roAR90XXQTTTQTRV11spECCqpqqpqoIHGEHFMNM+8+vLJIK645rq+++++++++++++++888888888888888888888888888888888888888888888888//xAAbEQEBAAIDAQAAAAAAAAAAAAARACAwEEBRYP/aAAgBAwEBPxDc4uh1szi5M5M8s8s5s4OpmeqpTlPyfk5znKUpTl9iREREREREREX/xAAdEQEBAQABBQEAAAAAAAAAAAARAFFhARAgMEBw/9oACAECAQE/EPrPA7nqPSREesjxPoDsZmZmek9JmHcOw2Gw2Gx25Lkua5o7HY7DYbDfwH//xAAdEAEBAAMBAQEBAQAAAAAAAAABABFRYZEgcWCh/9oACAEBAAE/EGJMZixYsWLFiCIQhGMYxj8gIQhSFa1rX6/KUpClYxjH5AQhCFKVjGMfkBCEKUpXmeZ5nmeb82erPV+Y5hajiOLhHEcS9StStS9S9WerPVlqFqFqFqFqFqTULUPV+Sy1ZaLPRZaLPULRC0h6IeiFohaIeiFo/wAjkvyWXb62Xb62Xb62Xb62Xb62Xb62Xb62Xb62Xb63R9bo+t0fW6PrdH1uj63R9f7H/9k=";const DA=new Z;Be.install({THREE:Ge});class X{constructor(){x(this,"_scene");x(this,"_lookAtHelperRoot");x(this,"_springBoneJointHelperRoot");x(this,"_springBoneColliderHelperRoot");x(this,"_camera");x(this,"_renderer");x(this,"_controls");x(this,"_model");x(this,"_currentAnimationAction");x(this,"_currentAnimationURL");x(this,"_stats",null);x(this,"_webglMemory",null);x(this,"_webglMemoryInfo",null);x(this,"_loader");x(this,"_canvas");x(this,"_layerMode","thirdPerson");x(this,"_handleResize");x(this,"_ongoingRequestEnvMap");this._camera=new Fe(30,window.innerWidth/window.innerHeight,.1,20),this._camera.position.set(0,1,5),this._scene=new Oe,this._lookAtHelperRoot=new te,this._lookAtHelperRoot.renderOrder=1e4,this._scene.add(this._lookAtHelperRoot),this._springBoneJointHelperRoot=new te,this._springBoneJointHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneJointHelperRoot),this._springBoneColliderHelperRoot=new te,this._springBoneColliderHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneColliderHelperRoot);const A=new je(16777215);A.position.set(1,1,1).normalize(),this._scene.add(A);const e=new We(10,10);this._scene.add(e);const t=new pe(5);this._scene.add(t),this._loader=new Ze,this._loader.register(i=>new Ye(i,{lookAtPlugin:new Ke(i,{helperRoot:this._lookAtHelperRoot}),springBonePlugin:new Je(i,{jointHelperRoot:this._springBoneJointHelperRoot,colliderHelperRoot:this._springBoneColliderHelperRoot})}))}static get VALIDATOR_MAX_ISSUES(){return 100}get scene(){return this._scene}get lookAtHelperRoot(){return this._lookAtHelperRoot}get springBoneJointHelperRoot(){return this._springBoneJointHelperRoot}get springBoneColliderHelperRoot(){return this._springBoneColliderHelperRoot}get model(){var A;return(A=this._model)!=null?A:null}get stats(){return this._stats}get webglMemoryInfo(){return this._webglMemoryInfo}get canvas(){return this._canvas}get layerMode(){return this._layerMode}set layerMode(A){this._layerMode=A,this._updateLayerMode()}unloadVRM(){const A=this._model;A&&(this._scene.remove(A.scene),Y.deepDispose(A.scene),this._emit("unload")),this._currentAnimationAction=null,this._springBoneJointHelperRoot.children.concat().forEach(e=>{this._springBoneJointHelperRoot.remove(e),e.dispose()}),this._springBoneColliderHelperRoot.children.concat().forEach(e=>{this._springBoneColliderHelperRoot.remove(e),e.dispose()}),this._model=null}async loadVRM(A){var h,f,d;const e=await fetch(A).then(g=>g.arrayBuffer()),t=await Xe(new Uint8Array(e),{maxIssues:X.VALIDATOR_MAX_ISSUES}).catch(g=>console.error("Validation failed: ",g));this._emit("validate",t),this.unloadVRM();const r=new qe({credentials:"include"}).binaryToJSON(e).json,a=await new Promise((g,u)=>{this._loader.crossOrigin="anonymous",this._loader.load(A,B=>{g(B)},B=>{this._emit("progress",B)},B=>{this._emit("error",B),u(B)})});Y.removeUnnecessaryVertices(a.scene),Y.removeUnnecessaryJoints(a.scene);const s=(h=a.userData.vrm)!=null?h:null;s==null&&console.warn("Failed to load the model as a VRM. Fallback to treat the model as a mere GLTF"),this._stats=await this._prepareStats(a,s),s&&EA(s);const l=(f=s==null?void 0:s.scene)!=null?f:a.scene;this._scene.add(l);const c={gltf:a,validationReport:t,originalGLTFJSON:r,vrm:s,scene:l,animationMixer:null};return this._model=c,s&&((d=s.firstPerson)==null||d.setup(),this._updateLayerMode(),s.scene.traverse(g=>{"isMesh"in g&&BA(g,async u=>{"isMeshStandardMaterial"in u&&(u.envMap=await this._requestEnvMap())})}),Y.rotateVRM0(s),c.animationMixer=new $e(s.scene),this._currentAnimationURL!=null&&this.loadMixamoAnimation(this._currentAnimationURL)),this._emit("load",c),c}async exportBufferView(A){var s;const e=(s=this._model)==null?void 0:s.gltf;if(e==null)return;const t=await e.parser.getDependency("bufferView",A),i=new Blob([t]),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`${A}.bin`,a.click(),URL.revokeObjectURL(r)}setup(A){this._canvas=A,this._renderer=new eA({canvas:this._canvas}),this._renderer.outputEncoding=AA,this._renderer.setSize(window.innerWidth,window.innerHeight),this._renderer.setPixelRatio(window.devicePixelRatio),this._controls=new Be(this._camera,this._canvas),this._controls.setTarget(0,1,0),this._handleResize&&window.removeEventListener("resize",this._handleResize),this._handleResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this._handleResize),this._webglMemory=this._renderer.getContext().getExtension("GMAN_webgl_memory")}registerDnD(A){const e=i=>{i.preventDefault()},t=i=>{i.preventDefault();const r=i.dataTransfer.files;if(!r)return;const a=r[0];if(!a)return;const s=new Blob([a],{type:"application/octet-stream"}),l=URL.createObjectURL(s);this.loadVRM(l)};return A.addEventListener("dragover",e),A.addEventListener("drop",t),()=>{A.removeEventListener("dragover",e),A.removeEventListener("drop",t)}}loadMixamoAnimation(A){var i,r;const e=(i=this._model)==null?void 0:i.vrm,t=(r=this._model)==null?void 0:r.animationMixer;!e||!t||(this._currentAnimationAction&&this.clearMixamoAnimation(),zA(A,e).then(a=>{a&&(this._currentAnimationURL=A,this._currentAnimationAction=t.clipAction(a),this._currentAnimationAction.play())}))}clearMixamoAnimation(){var t,i;const A=(t=this._model)==null?void 0:t.vrm,e=this._currentAnimationAction;!A||!e||(this._currentAnimationURL=null,e.stop(),this._currentAnimationAction=null,(i=A.humanoid)==null||i.resetPose())}update(A){var e,t;this._controls&&this._controls.update(A),((e=this._model)==null?void 0:e.animationMixer)&&this._model.animationMixer.update(A),((t=this._model)==null?void 0:t.vrm)&&this._model.vrm.update(A),this._renderer&&this._renderer.render(this._scene,this._camera),this._webglMemory&&(this._webglMemoryInfo=this._webglMemory.getMemoryInfo())}async _prepareStats(A,e){var g,u,B;const t=new tA,i=new Set;let r=0,a=0,s=0;const l=E=>{var y,I;a++;const w=E.geometry;t.expandByObject(E);const b=w.getAttribute("position");i.add(b),s+=((I=(y=w.index)==null?void 0:y.count)!=null?I:b.count)/3};(await A.parser.getDependencies("mesh")).forEach(E=>{r++,E.isMesh?l(E):E.children.forEach(b=>{l(b)})});let h=0;for(const E of i)h+=E.count;const f=await A.parser.getDependencies("material"),d=(B=(u=(g=e==null?void 0:e.springBoneManager)==null?void 0:g.springBones)==null?void 0:u.size)!=null?B:0;return{dimension:t.getSize(DA).toArray(),vertices:h,polygons:s,meshes:r,primitives:a,materials:f.length,springBones:d}}_requestEnvMap(){const A=[PA,LA,_A,kA,SA,HA];if(!this._ongoingRequestEnvMap){const e=new nA;this._ongoingRequestEnvMap=new Promise((t,i)=>{e.load(A,r=>t(r),void 0,r=>i(r))})}return this._ongoingRequestEnvMap}_updateLayerMode(){var e,t;const A=(t=(e=this._model)==null?void 0:e.vrm)==null?void 0:t.firstPerson;!A||(this._layerMode==="firstPerson"?(this._camera.layers.enable(A.firstPersonOnlyLayer),this._camera.layers.disable(A.thirdPersonOnlyLayer)):(this._camera.layers.disable(A.firstPersonOnlyLayer),this._camera.layers.enable(A.thirdPersonOnlyLayer)))}}fA(X,[uA]);var UA="./assets/uv-grid.cfc47a74.png",S;(function(n){n[n.None=0]="None",n[n.GLTFFallback=1]="GLTFFallback",n[n.MToonNormal=2]="MToonNormal",n[n.MToonLitShadeRate=3]="MToonLitShadeRate",n[n.MToonUV=4]="MToonUV",n[n.UVGrid=5]="UVGrid"})(S||(S={}));const ve=new Ae({visible:!1}),TA=new Promise(n=>{new oA().load(UA,e=>{e.flipY=!1,n(e)})});function Me(){const n=new Ae({color:16711935});return TA.then(A=>{n.map=A,n.color.set(16777215)}),n}function ye(n,A){if("isMToonMaterial"in n){const e=n;e.debugMode=A}}function be(n){return"isMToonMaterial"in n?n.isOutline:!1}class NA{constructor(A){x(this,"_currentMode",0);x(this,"_vrmMaterialsByMesh",new Map);x(this,"_inspector");this._inspector=A,this._inspector.on("load",()=>this._handleLoad()),this._inspector.on("unload",()=>this._handleUnload())}applyMode(A){A===0?this._applyModeMToon(K.None):A===2?this._applyModeMToon(K.Normal):A===3?this._applyModeMToon(K.LitShadeRate):A===4?this._applyModeMToon(K.UV):A===5&&this._applyModeUVGrid(),this._currentMode=A}_applyModeMToon(A){for(const[e,t]of this._vrmMaterialsByMesh.entries())Array.isArray(t)?t.forEach((i,r)=>{ye(i,A),e.material[r]=i}):(ye(t,A),e.material=t)}_applyModeUVGrid(){for(const[A,e]of this._vrmMaterialsByMesh.entries())Array.isArray(e)?e.forEach((t,i)=>{be(t)?A.material[i]=ve:A.material[i]=Me()}):be(e)?A.material=ve:A.material=Me()}async _handleLoad(){(await this._inspector.model.gltf.parser.getDependencies("mesh")).forEach(e=>{if("isGroup"in e)e.children.forEach(i=>{const r=i;this._addManagedMesh(r)});else{const t=e;this._addManagedMesh(t)}}),this.applyMode(this._currentMode)}_addManagedMesh(A){Array.isArray(A.material)?this._vrmMaterialsByMesh.set(A,A.material.concat()):this._vrmMaterialsByMesh.set(A,A.material)}_handleUnload(){this._vrmMaterialsByMesh.clear()}}var Ce="./assets/three-vrm-girl-vrm0.0.e6e179de.vrm";function VA(n){console.error(n)}const D=new X;D.loadVRM(Ce).catch(VA);D.registerDnD(document.body);const GA=new pA(D),FA=new NA(D);console.info(D);const OA=new iA;function Qe(){requestAnimationFrame(Qe);const n=OA.getDelta();D.update(n)}Qe();const z=xe.createContext({inspector:D,highlighter:GA,materialDebugger:FA}),o=ne.exports.jsx,M=ne.exports.jsxs,L=ne.exports.Fragment,ze=({href:n,widthClass:A})=>n==null?null:o("a",{href:n,target:"_blank",rel:"noreferrer",className:`font-bold truncate inline-block align-top underline text-sky-500 ${A!=null?A:"w-64"}`,children:n});function jA(n,A){let e=!1,t,i={x:0,y:0};const r=()=>{e||(requestAnimationFrame(r),t&&(n(t,i),t=void 0,i={x:0,y:0}))};r();const a=l=>{t=l,i.x+=l.movementX,i.y+=l.movementY},s=l=>{e||(A&&A(l),e=!0),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",s),window.removeEventListener("mousedown",s)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",s),setTimeout(()=>window.addEventListener("mousedown",s))}function WA(){const n=p.exports.useRef(-1/0);return p.exports.useCallback(e=>{const t=performance.now();t-n.current<250?(e(),n.current=-1/0):n.current=t},[n])}const P=n=>{var c,h,f;const[A,e]=p.exports.useState((c=n.initPosition)!=null?c:{left:0,top:0}),[t,i]=p.exports.useState((h=n.initOpening)!=null?h:!1),r=WA(),a=p.exports.useCallback(d=>{var g;(g=n.onClick)==null||g.call(n,d,n.paneKey)},[n.onClick,n.paneKey]),s=p.exports.useCallback(d=>{d.preventDefault();let g=A.left,u=A.top;jA((B,E)=>{B.preventDefault(),B.stopPropagation(),g+=E.x,u+=E.y,e({left:g,top:u})}),r(()=>{i(!t)})},[t,A]),l=p.exports.useCallback(d=>{var g;d.preventDefault(),d.stopPropagation(),(g=n.onClick)==null||g.call(n,d,n.paneKey),i(!t)},[t,n.onClick,n.paneKey]);return M("div",{style:{left:A.left,top:A.top,minWidth:"15rem",boxShadow:"0 0 10px rgba(0, 0, 0, 1.0)"},className:`absolute shadow ${n.className}`,onMouseDown:a,children:[M("div",{className:"h-5 leading-5 w-full bg-gray-700 cursor-move",onMouseDown:s,children:[o("div",{className:"inline-block w-5 h-5 text-center cursor-pointer hover:text-sky-500",onMouseDown:l,children:t?"-":"+"}),n.title]}),t&&((f=n.children)!=null?f:null)]})},k=({className:n,paddingClass:A,children:e})=>o("div",{className:`bg-gray-900/80 backdrop-blur ${A!=null?A:"p-2"} ${n}`,children:e}),ZA=n=>o(P,v(R({},n),{children:M(k,{children:[o("div",{children:"three-vrm-inspector"}),o("div",{children:"Three.js based VRM inspector"}),M("div",{children:["Source: ",o(ze,{widthClass:"w-min",href:"https://github.com/0b5vr/three-vrm-inspector"})]})]})})),Le=({name:n,isAvailable:A})=>{const{inspector:e}=p.exports.useContext(z),t=p.exports.useCallback(i=>{var r,a,s;(s=(a=(r=e.model)==null?void 0:r.vrm)==null?void 0:a.expressionManager)==null||s.setValue(n,parseFloat(i.target.value))},[]);return M("div",{className:"flex items-center",children:[o("input",{className:"mr-2",type:"range",min:"0",max:"1",step:"0.001",defaultValue:"0",disabled:!A,onChange:t}),A?n:o("span",{className:"text-gray-500",children:n})]})},ie=()=>o("div",{className:"w-full h-0.5 my-2 bg-gray-500"}),Pe=[C.Neutral,C.Happy,C.Angry,C.Sad,C.Relaxed,C.Surprised,C.Blink,C.BlinkLeft,C.BlinkRight,C.Aa,C.Ee,C.Ih,C.Oh,C.Ou,C.LookLeft,C.LookRight,C.LookDown,C.LookUp],YA=new Set(Pe),KA=n=>{var a,s,l;const{inspector:A}=p.exports.useContext(z),e=(s=(a=A.model)==null?void 0:a.vrm)==null?void 0:s.expressionManager,t=e==null?void 0:e.expressionMap,i=[];t&&Array.from(Object.keys(t)).forEach(c=>{YA.has(c)||i.push(c)});const r=((l=i==null?void 0:i.length)!=null?l:0)>=1;return o(P,v(R({},n),{children:o(k,{children:e?M(L,{children:[Pe.map(c=>o(Le,{name:c,isAvailable:(e==null?void 0:e.getExpression(c))!=null},c)),o(ie,{}),i==null?void 0:i.map(c=>o(Le,{name:c,isAvailable:!0},c)),!r&&o("span",{className:"text-gray-500",children:"(No custom expressions)"})]}):"No blendShapeProxy detected."})}))},JA=n=>{const{inspector:A}=p.exports.useContext(z),e=p.exports.useRef(null),t=p.exports.useCallback(i=>{var a;i.preventDefault();const r=(a=e.current)==null?void 0:a.value;if(r!=null&&r!==""){const s=parseInt(r,10);A.exportBufferView(s)}},[A]);return o(P,v(R({},n),{children:o(k,{children:M("form",{onSubmit:t,children:[o("input",{type:"number",ref:e,defaultValue:0,className:"w-24 px-1 bg-gray-800 border border-gray-500",required:!0}),o("input",{type:"submit",className:"ml-1 px-1 bg-gray-800 border border-gray-500",value:"Export"})]})})}))},re=({callback:n,label:A})=>{const[e,t]=p.exports.useState(!0),i=p.exports.useCallback(({target:r})=>{n(r.checked),t(r.checked)},[n]);return M("div",{children:[o("input",{type:"checkbox",checked:e,onChange:i}),A]})},XA=n=>{const{inspector:A}=p.exports.useContext(z),e=p.exports.useCallback(r=>{A.lookAtHelperRoot.visible=r},[A]),t=p.exports.useCallback(r=>{A.springBoneJointHelperRoot.visible=r},[A]),i=p.exports.useCallback(r=>{A.springBoneColliderHelperRoot.visible=r},[A]);return o(P,v(R({},n),{children:M(k,{children:[o(re,{callback:e,label:"LookAt"}),o(re,{callback:t,label:"Spring Bones"}),o(re,{callback:i,label:"Spring Bone Colliders"})]})}))},q=({children:n,onClick:A,onMouseEnter:e,onMouseLeave:t})=>o("span",{className:"select-none cursor-pointer",onClick:A,onMouseEnter:e,onMouseLeave:t,children:n}),ke=({children:n})=>o("div",{style:{marginLeft:"1.13em"},children:n}),se=({name:n,value:A,fullPath:e=""})=>{const{highlighter:t}=p.exports.useContext(z),[i,r]=p.exports.useState(!1),[a,s]=p.exports.useState(!1),[l,c]=p.exports.useState([void 0]),h=p.exports.useCallback(I=>{I.stopPropagation(),r(!i)},[r,i]),f=p.exports.useCallback(()=>{s(!0),c([t.highlight(e)])},[s,c,t,e]),d=p.exports.useCallback(()=>{var I;s(!1),(I=l[0])==null||I.call(l)},[s,l]),g=Array.isArray(A),u=A==null,B=typeof A=="number",E=typeof A=="boolean",w=typeof A=="string",b=!g&&!u&&!B&&!E&&!w,y={onClick:h,onMouseEnter:f,onMouseLeave:d,isHovering:a};return M("div",{className:"select-auto",children:[o("span",v(R({className:`cursor-pointer ${a&&"text-sky-500"}`},y),{children:n?`${n}: `:""})),g&&M(L,{children:[o(q,v(R({},y),{children:"["})),i&&o(ke,{children:A.map((I,Q)=>o("div",{children:o(se,{name:Q.toString()+((I==null?void 0:I.name)?` (${I.name})`:""),value:I,fullPath:`${e}/${Q}`})},Q))}),o(q,v(R({},y),{children:` ${i?"":A.length} ]`}))]}),b&&M(L,{children:[o(q,v(R({},y),{children:"{"})),i&&o(ke,{children:Object.keys(A).map((I,Q)=>o("div",{children:o(se,{name:I,value:A[I],fullPath:`${e}/${I}`})},Q))}),o(q,v(R({},y),{children:` ${i?"":Object.keys(A).join(", ")} }`}))]}),u&&o(L,{children:o("span",v(R({className:"text-pink-500"},y),{children:A}))}),B&&o(L,{children:o("span",v(R({className:"text-indigo-400"},y),{children:A}))}),E&&o(L,{children:o("span",v(R({className:"text-indigo-400"},y),{children:String(A)}))}),w&&o(L,{children:M("span",v(R({className:"text-yellow-300"},y),{children:['"',A,'"']}))})]})},qA=n=>{const{inspector:A}=p.exports.useContext(z),[e,t]=p.exports.useState(void 0);return p.exports.useEffect(()=>{const i=()=>{var r;t((r=A.model)==null?void 0:r.originalGLTFJSON)};return A.on("load",i),()=>{A.off("load",i)}},[A]),o(P,v(R({},n),{children:o(k,{className:"w-120 h-80 overflow-scroll whitespace-nowrap resize font-mono text-xs leading-tight",paddingClass:"p-0",children:o(se,{value:e})})}))},$A=n=>{const{materialDebugger:A}=p.exports.useContext(z),e=p.exports.useCallback(t=>{const i=parseInt(t.target.value);A.applyMode(i)},[A]);return o(P,v(R({},n),{children:o(k,{children:M("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:[o("option",{value:S.None,children:"None"}),o("option",{value:S.MToonNormal,children:"MToon Normal"}),o("option",{value:S.MToonLitShadeRate,children:"MToon LitShadeRate"}),o("option",{value:S.MToonUV,children:"MToon UV"}),o("option",{value:S.UVGrid,children:"UV Grid"})]})})}))},m=({name:n,value:A,href:e})=>M("div",{children:[n,":"," ",A!=null&&o("span",{className:"font-bold",children:A}),e&&o(ze,{href:e})]}),et=({meta:n})=>M(L,{children:[o(m,{name:"Title",value:n.title}),o(m,{name:"Author",value:n.author}),o(m,{name:"Version",value:n.version}),o(m,{name:"Reference",value:n.reference}),o(m,{name:"Contact Information",value:n.contactInformation}),o(m,{name:"Allowed User Name",value:n.allowedUserName}),o(m,{name:"Violent Ussage Name",value:n.violentUssageName}),o(m,{name:"Sexual Ussage Name",value:n.sexualUssageName}),o(m,{name:"Commercial Ussage Name",value:n.commercialUssageName}),o(m,{name:"Other Permission URL",href:n.otherPermissionUrl}),o(m,{name:"License Name",value:n.licenseName}),o(m,{name:"Other License URL",href:n.otherLicenseUrl})]}),At=({meta:n})=>{var A;return M(L,{children:[o(m,{name:"Name",value:n.name}),o(m,{name:"Version",value:n.version}),o(m,{name:"Authors",value:n.authors.join(", ")}),o(m,{name:"Copyright Information",value:n.copyrightInformation}),o(m,{name:"Contact Information",value:n.contactInformation}),o(m,{name:"References",value:(A=n.references)==null?void 0:A.join(", ")}),o(m,{name:"Third Party Licenses",value:n.thirdPartyLicenses}),o(m,{name:"License URL",href:n.licenseUrl}),o(m,{name:"Avatar Permission",value:n.avatarPermission}),o(m,{name:"Allow Excessively Violent Usage",value:String(n.allowExcessivelyViolentUsage)}),o(m,{name:"Allow Excessively Sexual Usage",value:String(n.allowExcessivelySexualUsage)}),o(m,{name:"Commercial Usage Name",value:n.commercialUsage}),o(m,{name:"Allow Political or Religious Usage",value:String(n.allowPoliticalOrReligiousUsage)}),o(m,{name:"Allow Antisocial or Hate Usage",value:String(n.allowAntisocialOrHateUsage)}),o(m,{name:"Credit Notation",value:n.creditNotation}),o(m,{name:"Allow Redistribution",value:String(n.allowRedistribution)}),o(m,{name:"Modification",value:n.modification}),o(m,{name:"Other License URL",href:n.otherLicenseUrl})]})},tt=n=>{var i,r;const{inspector:A}=p.exports.useContext(z),e=(r=(i=A.model)==null?void 0:i.vrm)==null?void 0:r.meta;let t=o(L,{children:"No meta detected."});return(e==null?void 0:e.metaVersion)==="1"?t=o(At,{meta:e}):(e==null?void 0:e.metaVersion)==="0"&&(t=o(et,{meta:e})),o(P,v(R({},n),{children:o(k,{children:t})}))};var nt="./assets/dancing.2665f039.fbx",ot="./assets/gangnam-style.119f68a4.fbx",it="./assets/jump.a8a08f02.fbx",rt="./assets/running.c854d669.fbx",st="./assets/standing-clap.9fc941e1.fbx",at="./assets/walking.ed38b4d6.fbx";const lt=[{name:"(No Animation)",url:"-"},{name:"Walking",url:at},{name:"Running",url:rt},{name:"Jump",url:it},{name:"Dancing",url:nt},{name:"Standing Clap",url:st},{name:"Gangnam Style",url:ot}],ct=n=>{const{inspector:A}=p.exports.useContext(z),e=p.exports.useCallback(t=>{const i=t.target.value;i==="-"?A.clearMixamoAnimation():A.loadMixamoAnimation(i)},[A]);return o(P,v(R({},n),{children:o(k,{children:o("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:lt.map(({name:t,url:i})=>o("option",{value:i,children:t},i))})})}))},mt=({name:n,url:A})=>{const{inspector:e}=p.exports.useContext(z),t=p.exports.useCallback(()=>{e.loadVRM(A)},[e]);return o("button",{value:n,className:"bg-gray-800 border border-gray-500 px-1 py-0 block",onClick:t,children:n})};var dt="./assets/three-vrm-girl.2076a024.vrm";const ht=[{name:"three-vrm-girl (VRM0.X)",url:Ce},{name:"three-vrm-girl (VRM1.0-beta)",url:dt}],gt=n=>o(P,v(R({},n),{children:o(k,{children:ht.map(({name:A,url:e})=>o(mt,{name:A,url:e},A))})})),pt=n=>{var i,r,a,s,l,c,h,f,d,g;const{inspector:A}=p.exports.useContext(z),e=(i=A.stats)==null?void 0:i.dimension.map(u=>u.toFixed(3)),t=`( ${(r=e==null?void 0:e[0])!=null?r:0}, ${(a=e==null?void 0:e[1])!=null?a:0}, ${(s=e==null?void 0:e[2])!=null?s:0} )`;return o(P,v(R({},n),{children:M(k,{children:[o(m,{name:"Dimension",value:t}),o(m,{name:"Vertices",value:(l=A.stats)==null?void 0:l.vertices}),o(m,{name:"Polygons",value:(c=A.stats)==null?void 0:c.polygons}),o(m,{name:"Meshes",value:(h=A.stats)==null?void 0:h.meshes}),o(m,{name:"Primitives",value:(f=A.stats)==null?void 0:f.primitives}),o(m,{name:"Materials",value:(d=A.stats)==null?void 0:d.materials}),o(m,{name:"Spring Bones",value:(g=A.stats)==null?void 0:g.springBones})]})}))},ut=({children:n})=>o("div",{style:{marginLeft:"1.13em"},children:n}),ft=n=>{const[A,e]=p.exports.useState(!1),t=n.severity===0?F.error:n.severity===1?F.warning:F.severityInfo,i=p.exports.useCallback(()=>{e(!A)},[A]);return M("div",{className:"group cursor-pointer",onClick:i,children:[o("span",{className:"group-hover:text-sky-500",children:A?"- ":"+ "}),o("span",{style:{color:t},children:n.code}),o("span",{className:"text-gray-500",children:" - "+n.pointer}),A&&o(ut,{children:n.message})]})},$=({count:n,colorClass:A})=>o("span",{className:n?A:"text-gray-500",children:n}),Et=n=>{var t,i,r,a;const{inspector:A}=p.exports.useContext(z),e=(i=(t=A.model)==null?void 0:t.validationReport)==null?void 0:i.issues;return o(P,v(R({},n),{children:M(k,{className:"w-120 h-80 resize overflow-y-scroll",children:[o(m,{name:"Validator Version",value:(a=(r=A.model)==null?void 0:r.validationReport)==null?void 0:a.validatorVersion}),o(m,{name:"Errors",value:o($,{count:e==null?void 0:e.numErrors,colorClass:"text-red-500"})}),o(m,{name:"Warnings",value:o($,{count:e==null?void 0:e.numWarnings,colorClass:"text-yellow-300"})}),o(m,{name:"Infos",value:o($,{count:e==null?void 0:e.numInfos,colorClass:"text-sky-500"})}),o(m,{name:"Hints",value:o($,{count:e==null?void 0:e.numHints,colorClass:"text-sky-500"})}),o(ie,{}),(e==null?void 0:e.truncated)&&o("div",{className:"m-1 font-bold",children:"There are too many issues! Showing only 100 entries."}),o("div",{className:"w-full font-mono leading-tight text-xs",children:e==null?void 0:e.messages.map((s,l)=>o(ft,{code:s.code,message:s.message,severity:s.severity,pointer:s.pointer},l))})]})}))},j=n=>(n/1048576).toFixed(3)+" MB",Bt=n=>{var t,i,r,a,s,l,c,h,f,d,g,u,B,E,w,b,y,I,Q,U,_,H,W,N,V,T,ae,le,ce,me;const{inspector:A}=p.exports.useContext(z),e=A.webglMemoryInfo;return o(P,v(R({},n),{children:M(k,{children:[o(m,{name:"Buffer",value:j((i=(t=e==null?void 0:e.memory)==null?void 0:t.buffer)!=null?i:0)}),o(m,{name:"Texture",value:j((a=(r=e==null?void 0:e.memory)==null?void 0:r.texture)!=null?a:0)}),o(m,{name:"Render Buffer",value:j((l=(s=e==null?void 0:e.memory)==null?void 0:s.renderbuffer)!=null?l:0)}),o(m,{name:"Drawing Buffer",value:j((h=(c=e==null?void 0:e.memory)==null?void 0:c.drawingbuffer)!=null?h:0)}),o(m,{name:"Total",value:j((d=(f=e==null?void 0:e.memory)==null?void 0:f.total)!=null?d:0)}),o(ie,{}),o(m,{name:"Buffer",value:(u=(g=e==null?void 0:e.resources)==null?void 0:g.buffer)!=null?u:0}),o(m,{name:"Render Buffer",value:(E=(B=e==null?void 0:e.resources)==null?void 0:B.renderbuffer)!=null?E:0}),o(m,{name:"Program",value:(b=(w=e==null?void 0:e.resources)==null?void 0:w.program)!=null?b:0}),o(m,{name:"Query",value:(I=(y=e==null?void 0:e.resources)==null?void 0:y.query)!=null?I:0}),o(m,{name:"Sampler",value:(U=(Q=e==null?void 0:e.resources)==null?void 0:Q.sampler)!=null?U:0}),o(m,{name:"Shader",value:(H=(_=e==null?void 0:e.resources)==null?void 0:_.shader)!=null?H:0}),o(m,{name:"Sync",value:(N=(W=e==null?void 0:e.resources)==null?void 0:W.sync)!=null?N:0}),o(m,{name:"Texture",value:(T=(V=e==null?void 0:e.resources)==null?void 0:V.texture)!=null?T:0}),o(m,{name:"Transform Feedback",value:(le=(ae=e==null?void 0:e.resources)==null?void 0:ae.transformFeedback)!=null?le:0}),o(m,{name:"Vertex Array",value:(me=(ce=e==null?void 0:e.resources)==null?void 0:ce.vertexArray)!=null?me:0})]})}))},xt=()=>{const[n,A]=p.exports.useState(["jsonTree","materialDebugger","meta","stats","webglMemory","blendShape","validationReport","sampleModels","helpers","exportBufferView","mixamoAnimations","about"]),e=p.exports.useCallback((i,r)=>{const a=n.concat();a.splice(n.indexOf(r),1),a.push(r),A(a)},[n]),t={jsonTree:o(qA,{paneKey:"jsonTree",title:"JSON Tree",onClick:e,initPosition:{left:0,top:0}},"jsonTree"),materialDebugger:o($A,{paneKey:"materialDebugger",title:"MToon Material Debugger",onClick:e,initPosition:{left:0,top:20}},"materialDebugger"),meta:o(tt,{paneKey:"meta",title:"Meta",onClick:e,initPosition:{left:0,top:40}},"meta"),stats:o(pt,{paneKey:"stats",title:"Stats",onClick:e,initPosition:{left:0,top:60}},"stats"),webglMemory:o(Bt,{paneKey:"webglMemory",title:"WebGL Memory",onClick:e,initPosition:{left:0,top:80}},"webglMemory"),blendShape:o(KA,{paneKey:"blendShape",title:"Blend Shape Proxy",onClick:e,initPosition:{left:0,top:100}},"blendShape"),validationReport:o(Et,{paneKey:"validationReport",title:"Validation Report",onClick:e,initPosition:{left:0,top:120}},"validationReport"),sampleModels:o(gt,{paneKey:"sampleModels",title:"Sample Models",onClick:e,initPosition:{left:0,top:140}},"sampleModels"),helpers:o(XA,{paneKey:"helpers",title:"Helpers",onClick:e,initPosition:{left:0,top:160}},"helpers"),exportBufferView:o(JA,{paneKey:"exportBufferView",title:"Export Buffer View",onClick:e,initPosition:{left:0,top:180}},"exportBufferView"),mixamoAnimations:o(ct,{paneKey:"mixamoAnimations",title:"Mixamo Animations",onClick:e,initPosition:{left:0,top:200}},"mixamoAnimations"),about:o(ZA,{paneKey:"about",title:"About",onClick:e,initPosition:{left:0,top:220}},"about")};return o(L,{children:n.map(i=>t[i])})},wt=()=>{const{inspector:n}=p.exports.useContext(z),[A,e]=p.exports.useState(null);p.exports.useEffect(()=>{const i=()=>{e(null)},r=a=>{e(a)};return n.on("load",i),n.on("progress",r),()=>{n.off("load",i),n.off("progress",r)}});const t=p.exports.useMemo(()=>A?A.loaded/A.total:null,[A]);return o(L,{children:o("div",{className:"w-full h-full absolute text-center pointer-events-none",children:o("div",{children:t?(100*t).toFixed(2):"yay"})})})},It=()=>{const{inspector:n}=p.exports.useContext(z),A=p.exports.useCallback(e=>{e&&n.setup(e)},[]);return o(L,{children:M("div",{className:"w-full h-full text-sm absolute overflow-hidden text-gray-100",children:[o("canvas",{ref:A,className:"w-full h-full absolute"}),o(xt,{}),o(wt,{})]})})},Rt=()=>o(L,{children:o(It,{})});rA.render(o(xe.StrictMode,{children:o(Rt,{})}),document.getElementById("root"));
