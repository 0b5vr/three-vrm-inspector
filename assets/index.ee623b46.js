var Fe=Object.defineProperty,Oe=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var oe=(o,t,e)=>t in o?Fe(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,b=(o,t)=>{for(var e in t||(t={}))We.call(t,e)&&oe(o,e,t[e]);if(he)for(var e of he(t))Ze.call(t,e)&&oe(o,e,t[e]);return o},C=(o,t)=>Oe(o,je(t));var g=(o,t,e)=>(oe(o,typeof t!="symbol"?t+"":t,e),e);import{C as me,M as se,S as Ye,a as Ke,b as ue,V as G,Q as F,F as Je,A as pe,c as ge,d as fe,e as Xe,f as Ee,g as xe,T as Be,h as qe,R as $e,i as we,j as et,E as tt,O as nt,U as ot,k as st,l as rt,m as be,n as Ce,P as At,o as it,G as re,D as at,p as lt,q as ct,r as dt,s as ht,t as mt,u as ut,v as J,w as pt,x as gt,W as ft,y as Et,z as xt,B as Bt,H as wt,I as bt,J as Ct,K as vt,L as X,N as ve,X as Rt,Y as r,Z as d,_ as R,$ as y,a0 as k,a1 as Mt,a2 as It}from"./vendor.8a7a0e26.js";const yt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerpolicy&&(A.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?A.credentials="include":s.crossorigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=e(s);fetch(s.href,A)}};yt();const O={black:"#000000",white:"#ffffff",back1:"#191a1f",fore:"#d0edff",titleBarBg:"#30343b",accent:"#ff0066",gray:"#75848f",uiBackground:"rgba( 25, 26, 31, 0.8 )",error:"#ff0066",warning:"#f7f025",severityInfo:"#53c5ff",constant:"#ff0066",number:"#8a8aff",string:"#f7f025"},Pt=new me(O.constant),Qt=new se({color:Pt,transparent:!0,wireframe:!0,depthTest:!1,depthWrite:!1}),_t=new Ye(.2);function Re(o=_t){const t=new Ke(o,Qt);return t.frustumCulled=!1,t.renderOrder=1e4,t}function Lt(o,t,e){const s=o.parser.json.nodes[t].mesh;if(s==null)return null;const i=o.parser.json.meshes[s].primitives.length,a=[];return e.traverse(l=>{a.length<i&&l.isMesh&&a.push(l)}),a}async function q(o,t){const e=await o.parser.getDependency("node",t);return Lt(o,t,e)}const kt=new ue({transparent:!0,depthTest:!1,depthWrite:!1});function j(o,t=kt){const e=new Map;return o.forEach(n=>{Array.isArray(n.material)&&(e.set(n,n.material[0]),n.material[0]=t)}),()=>{for(const[n,s]of e)n.material[0]=s}}function Ae(o){const t=new Map;return o.forEach(e=>{const n=Re();e.add(n),t.set(e,n)}),()=>{o.forEach(e=>{const n=t.get(e);e.remove(n)})}}class zt extends ue{constructor(t){super(t);g(this,"_skinIndexVisualize");g(this,"_uniforms");this._skinIndexVisualize=0,this.onBeforeCompile=e=>{this._uniforms=e.uniforms,this._uniforms.skinIndexVisualize={value:this._skinIndexVisualize},e.vertexShader=e.vertexShader.replace("#include <common>",`#include <common>

        varying float vWeightVisualize;
        uniform float skinIndexVisualize;`),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`#ifdef USE_SKINNING
          vWeightVisualize = (
            skinIndex.x == skinIndexVisualize ? skinWeight.x : 0.0 +
            skinIndex.y == skinIndexVisualize ? skinWeight.y : 0.0 +
            skinIndex.z == skinIndexVisualize ? skinWeight.z : 0.0 +
            skinIndex.w == skinIndexVisualize ? skinWeight.w : 0.0
          );
        #else
          vWeightVisualize = 0.0;
        #endif

        #include <begin_vertex>`),e.fragmentShader=e.fragmentShader.replace("#include <packing>",`#include <packing>

        varying float vWeightVisualize;`),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( packNormalToRGB( normal ), opacity );",`gl_FragColor = vec4(
          clamp( 2.0 - abs( vec3( 4.0, 2.0, 0.0 ) - 4.0 * vWeightVisualize ), 0.0, 1.0 ),
          opacity
        );`)}}get skinIndexVisualize(){return this._skinIndexVisualize}set skinIndexVisualize(t){this._uniforms&&(this._uniforms.skinIndexVisualize={value:t}),this._skinIndexVisualize=t}}const Me=new zt({transparent:!0,depthTest:!1,depthWrite:!1}),St=new me(O.constant);class Ht{constructor(t){g(this,"_inspector");this._inspector=t}highlight(t){const e=this._inspector,n=t.split("/"),s=e.model.gltf,A=s.parser,i=A.json;if(n.length===3&&n[1]==="nodes"){const a=parseInt(n.pop());let l;return A.getDependency("node",a).then(h=>{l=Ae([h])}),()=>{l&&l()}}else if(n.length===3&&n[1]==="meshes"){const a=parseInt(n.pop());let l;const h=i.nodes,u=[];return h==null||h.forEach((c,f)=>{c.mesh===a&&u.push(f)}),Promise.all(u.map(c=>q(s,c))).then(c=>c.flat()).then(c=>{l=j(c)}),()=>{l&&l()}}else if(n.length===5&&n[1]==="meshes"&&n[3]==="primitives"){const a=parseInt(n[2]),l=parseInt(n[4]);let h;return A.getDependency("mesh",a).then(u=>{u.children.length!==0&&(u=u.children[l]),h=j([u])}),()=>{h&&h()}}else if(n.length===7&&n[1]==="meshes"&&n[3]==="primitives"&&n[5]==="targets"){const a=parseInt(n[2]),l=parseInt(n[4]),h=parseInt(n[6]);let u;return A.getDependency("mesh",a).then(p=>{p.children.length!==0&&(p=p.children[l]);const c=p;c.morphTargetInfluences&&(c.morphTargetInfluences[h]=1),u=()=>{c.morphTargetInfluences&&(c.morphTargetInfluences[h]=0)}}),()=>{u&&u()}}else if(n.length===6&&n[1]==="meshes"&&n[3]==="extras"&&n[4]==="targetNames"){const a=parseInt(n[2]),l=parseInt(n[5]);let h;const u=i.nodes,p=[];return u==null||u.forEach((f,E)=>{f.mesh===a&&p.push(E)}),Promise.all(p.map(f=>q(s,f))).then(f=>f.flat()).then(f=>{f.forEach(E=>{E.morphTargetInfluences&&(E.morphTargetInfluences[l]=1)}),h=()=>{f.forEach(E=>{E.morphTargetInfluences&&(E.morphTargetInfluences[l]=0)})}}),()=>{h&&h()}}else if(n.length===3&&n[1]==="skins"){const a=parseInt(n[2]);let l;const h=i.nodes,u=[];return h==null||h.forEach((c,f)=>{c.skin===a&&u.push(f)}),Promise.all(u.map(c=>q(s,c))).then(c=>c.flat()).then(c=>{l=j(c)}),()=>{l&&l()}}else if(n.length===5&&n[1]==="skins"&&n[3]==="joints"){const a=parseInt(n[2]),l=parseInt(n[4]),h=[],u=i.skins[a].joints[l];A.getDependency("node",u).then(E=>{h.push(Ae([E]))});const p=i.nodes,c=[];return p==null||p.forEach((E,B)=>{E.skin===a&&c.push(B)}),Promise.all(c.map(E=>q(s,E))).then(E=>E.flat()).then(E=>{h.push(j(E,Me)),Me.skinIndexVisualize=l}),()=>{h.forEach(E=>E())}}else if(n.length===3&&n[1]==="materials"||n.length===5&&n[2]==="VRM"&&n[3]==="materialProperties"){const a=parseInt(n.pop());let l;return A.getDependencies("mesh").then(h=>{const u=[];i.meshes.forEach((p,c)=>{p.primitives.forEach((E,B)=>{if(a===E.material){let x=h[c];x.children.length!==0&&(x=x.children[B]);const w=x;u.push(w)}})}),l=j(u)}),()=>{l&&l()}}else if(n.length===6&&n[2]==="VRM"&&n[3]==="humanoid"&&n[4]==="humanBones"){const a=parseInt(t.split("/").pop()),h=i.extensions.VRM.humanoid.humanBones[a].bone,u=e.model.vrm.humanoid.getBoneNode(h);return Ae([u])}else if(n.length===4&&n[2]==="VRM"&&n[3]==="firstPerson"){const a=Re();return e.model.vrm.lookAt.getLookAtWorldPosition(a.position),e.scene.add(a),()=>{e.scene.remove(a)}}else{if(n.length===5&&n[2]==="VRM"&&n[3]==="firstPerson"&&n[4]==="meshAnnotations")return e.layerMode="firstPerson",()=>{e.layerMode="thirdPerson"};if(n.length===6&&n[2]==="VRM"&&n[3]==="blendShapeMaster"&&n[4]==="blendShapeGroups"){const a=parseInt(t.split("/").pop()),u=i.extensions.VRM.blendShapeMaster.blendShapeGroups[a].name,p=e.model.vrm.expressionManager.getValue(u);return e.model.vrm.expressionManager.setValue(u,1),()=>{e.model.vrm.expressionManager.setValue(u,p)}}else if(n.length===6&&n[2]==="VRM"&&n[3]==="secondaryAnimation"&&n[4]==="boneGroups"){const a=parseInt(t.split("/").pop()),h=i.extensions.VRM.secondaryAnimation,u=h==null?void 0:h.boneGroups[a].bones,p=e.model.vrm.springBoneManager,c=new Map;for(const w of p.springBones)c.set(w.bone,w);const f=e.springBoneJointHelperRoot,E=new Map;f.children.forEach(w=>{const I=w;E.set(I.springBone,I)});const B=[],x=new Set;return u.forEach(w=>{A.getDependency("node",w).then(I=>{I.traverse(M=>{const v=c.get(M),Q=E.get(v);x.add(Q);const z=Q.children[0].material,S=z.color.clone();z.color.copy(St),B.push(()=>{z.color.copy(S)})})})}),()=>{B.forEach(w=>w())}}}}}class Dt{constructor(){g(this,"_eventListeners")}on(t,e){this._eventListeners=this._eventListeners||new Map;let n=this._eventListeners.get(t);n||(n=[],this._eventListeners.set(t,n)),n.push(e)}off(t,e){this._eventListeners=this._eventListeners||new Map;let n=this._eventListeners.get(t);n||(n=[],this._eventListeners.set(t,n));const s=n.indexOf(e);s!==-1&&n.splice(s,1)}_emit(...[t,e]){var n;this._eventListeners=this._eventListeners||new Map,(n=this._eventListeners.get(t))==null||n.forEach(s=>s(e))}}function Ie(o,t){const e=[];let n=[],s=0;return Array.from(o).forEach(A=>{s<=0&&(s=t,n=[],e.push(n)),n.push(A),s--}),e}const Tt=new G,Ut=new F;function Nt(o){const t=o.humanoid;if(t==null)return null;const e=t.getPose(),n={};return Object.entries(t.humanBones).map(([s,A])=>{if(A!=null){const i=A.node;n[s]={position:i.getWorldPosition(Tt).toArray(),rotation:i.getWorldQuaternion(Ut).toArray()}}}),t.setPose(e),n}const Vt={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbProximal",mixamorigLeftHandThumb2:"leftThumbIntermediate",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbProximal",mixamorigRightHandThumb2:"rightThumbIntermediate",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"},Gt=new F,Ft=new F,Ot=new F,jt=new F,Wt=new G,Zt=new G;async function Yt(o,t){const e=t.humanoid;if(e==null)return null;const s=await new Je().loadAsync(o),A=pe.findByName(s.animations,"mixamo.com"),i=[],a=Nt(t);return A.tracks.forEach(l=>{var c,f,E,B;const h=l.name.split("."),u=h[0],p=Vt[u];if(p!=null){const x=e.restPose[p],w=a==null?void 0:a[p],I=(c=e.getBoneNode(p))==null?void 0:c.name;if(I!=null){const M=h[1],v=(f=x==null?void 0:x.position)!=null?f:[0,0,0],Q=Wt.fromArray(v);let T=.01;p==="hips"&&(T*=Q.length(),Q.multiplyScalar(0));const z=(E=x==null?void 0:x.rotation)!=null?E:[0,0,0,1],S=Gt.fromArray(z),K=(B=w==null?void 0:w.rotation)!=null?B:[0,0,0,1],N=Ft.fromArray(K).multiply(S),V=Ot.copy(N).invert();l instanceof ge?i.push(new ge(`${I}.${M}`,l.times,Ie(l.values,4).flatMap(U=>jt.fromArray(U).multiply(N).premultiply(V).multiply(S).toArray()))):l instanceof fe&&i.push(new fe(`${I}.${M}`,l.times,Ie(l.values,3).flatMap(U=>Zt.fromArray(U).applyQuaternion(V).multiplyScalar(T).add(Q).toArray())))}}}),new pe("vrmAnimation",A.duration,i)}class Kt{constructor(t){g(this,"inspector");g(this,"_currentAnimationMixer");g(this,"_currentAnimationAction");g(this,"_currentAnimationURL");this.inspector=t}handleAfterLoad(t){const e=t.vrm;e!=null&&(this._currentAnimationMixer=new Xe(e.scene),this._currentAnimationURL!=null&&this.loadMixamoAnimation(this._currentAnimationURL))}handleAfterUnload(){this._currentAnimationAction=null,this._currentAnimationMixer=null}handleBeforeRender(t){this._currentAnimationMixer!=null&&this._currentAnimationMixer.update(t)}loadMixamoAnimation(t){var s;const e=(s=this.inspector.model)==null?void 0:s.vrm;if(!e)return;const n=this._currentAnimationMixer;!n||(this._currentAnimationAction!=null&&this.clearMixamoAnimation(),Yt(t,e).then(A=>{A&&(this._currentAnimationURL=t,this._currentAnimationAction=n.clipAction(A),this._currentAnimationAction.play())}))}clearMixamoAnimation(){var n,s;const t=(n=this.inspector.model)==null?void 0:n.vrm;if(!t)return;const e=this._currentAnimationAction;!e||(this._currentAnimationURL=null,e.stop(),this._currentAnimationAction=null,(s=t.humanoid)==null||s.resetPose())}}class Jt{constructor(t){g(this,"inspector");g(this,"_controls");this.inspector=t}get controls(){return this._controls}handleAfterSetup(){const{camera:t,canvas:e}=this.inspector;this._controls=new Ee(t,e),this._controls.setTarget(0,1,0)}handleBeforeRender(t){this._controls&&this._controls.update(t)}}function ye(o,t){let e=!1,n,s={x:0,y:0};const A=()=>{e||(requestAnimationFrame(A),n&&(o(n,s),n=void 0,s={x:0,y:0}))};A();const i=l=>{n=l,s.x+=l.movementX,s.y+=l.movementY},a=l=>{e||(t&&t(l),e=!0),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a),window.removeEventListener("mousedown",a)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",a),setTimeout(()=>window.addEventListener("mousedown",a))}var Xt="./assets/grab-purple.7ef5ea20.png";const Pe=new xe;class qt{constructor(t){g(this,"inspector");g(this,"_sprites");g(this,"_transformControls");g(this,"_spriteMaterial");g(this,"_raycaster");g(this,"_active");this.inspector=t;const n=new Be().load(Xt,s=>{s.flipY=!1});this._spriteMaterial=new qe({sizeAttenuation:!1,transparent:!0,depthTest:!1,map:n}),this._raycaster=new $e,this._active=!0}get active(){return this._active}set active(t){var e,n;this._active=t,(e=this._sprites)==null||e.forEach(s=>s.visible=t),t===!1&&((n=this._transformControls)==null||n.detach())}handleAfterSetup(){const{scene:t,camera:e,canvas:n}=this.inspector;this._transformControls=new we(e,n),this._transformControls.space="local",this._transformControls.mode="rotate",t.add(this._transformControls),this._transformControls.addEventListener("dragging-changed",s=>{const A=this.inspector.cameraControlsPlugin.controls;A&&(A.enabled=!s.value)}),n!=null&&(n==null||n.addEventListener("mousedown",s=>this.handleMouseDown(s)))}handleAfterLoad(t){var n;const e=(n=t.vrm)==null?void 0:n.humanoid;if(e!=null&&e){this._sprites=[];for(const s of Object.values(e.humanBones)){const A=s.node,i=new et(this._spriteMaterial);i.scale.setScalar(.01),i.renderOrder=1e4,i.visible=this._active,A.add(i),this._sprites.push(i)}}}handleAfterUnload(){var t;this._sprites=null,(t=this._transformControls)==null||t.detach()}handleMouseDown(t){const{camera:e,canvas:n}=this.inspector;if(n==null)return;const s=this._sprites;if(s==null)return;const A=this._transformControls;if(A==null)return;const i=n.getBoundingClientRect();Pe.set((t.clientX-i.left)/i.width*2-1,-(t.clientY-i.top)/i.height*2+1),this._raycaster.setFromCamera(Pe,e);const l=this._raycaster.intersectObjects(s,!1)[0],h=Date.now();ye(()=>0,()=>{if(!(Date.now()-h>300))if(l!=null){const c=l.object.parent;A.attach(c)}else A.detach()})}}const Qe=new G,$t=new tt;class en{constructor(t){g(this,"inspector");g(this,"_enableLookAt");g(this,"_lookAtTarget");g(this,"_transformControls");this.inspector=t,this._enableLookAt=!1,this._lookAtTarget=new nt,t.scene.add(this._lookAtTarget)}get enableLookAt(){return this._enableLookAt}set enableLookAt(t){this._enableLookAt=t,this._transformControls&&(this._transformControls.enabled=t,this._transformControls.visible=t),t?this._enableLookAtTarget():this._disableLookAtTarget()}handleAfterSetup(){const{scene:t,camera:e,canvas:n}=this.inspector;this._transformControls=new we(e,n),t.add(this._transformControls),this._transformControls.attach(this._lookAtTarget),this._transformControls.enabled=!1,this._transformControls.visible=!1,this._transformControls.addEventListener("dragging-changed",s=>{const A=this.inspector.cameraControlsPlugin.controls;A&&(A.enabled=!s.value)})}handleAfterLoad(t){var s;const{vrm:e}=t;if(e==null)return;const n=(s=e.humanoid)==null?void 0:s.getBoneNode("head");n!=null&&(n.getWorldPosition(Qe),this._lookAtTarget.position.set(0,0,5).add(Qe)),this._enableLookAt&&this._enableLookAtTarget()}_enableLookAtTarget(){var e,n;const t=(n=(e=this.inspector.model)==null?void 0:e.vrm)==null?void 0:n.lookAt;!t||(t.target=this._lookAtTarget)}_disableLookAtTarget(){var e,n;const t=(n=(e=this.inspector.model)==null?void 0:e.vrm)==null?void 0:n.lookAt;!t||(t.target=void 0,t.applier.lookAt($t.set(0,0,0)))}}class tn{constructor(t){g(this,"inspector");g(this,"bloomPass");g(this,"toneMappingPass");this.inspector=t,this.bloomPass=new ot(new xe(4,4),1,.5,1),this.bloomPass.enabled=!1,this.toneMappingPass=new st(rt),this.toneMappingPass.enabled=!1}handleAfterSetup(){const t=this.inspector.composer;t.addPass(this.bloomPass),t.addPass(this.toneMappingPass)}}function nn(o,t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{Object.defineProperty(o.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))})})}function on(o){var e;const t=(e=o.humanoid)==null?void 0:e.humanBones;if(t)for(const n of Object.values(t)){const s=new be(.1);s.renderOrder=1e4,s.material.depthTest=!1,s.material.depthWrite=!1,n==null||n.node.add(s)}}function sn(o,t){const e=new Set,n=o.material;if(Array.isArray(n))n.forEach(A=>{e.add(A)});else{const s=n;e.add(s)}for(const s of e)t(s)}var rn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQQBBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAH7v5JqzrodJxSqKZUVyCEgj6EZBH0IyCMgjIPPQ8kEZB5IOwqeJbISlsqmFVgVTCEpSE5SuctkJxZCZZCZZCZZGZZCwITDrvqOe5Si6Wznvls57osouLKLiyi4souLKbiym4spuKpvCm4Sq4squLNHQma5ujrlLm6OuUubo65y5mlpnLmaWmcuZpaZy5mlpnLmaWmcubpaZy5ujpnLnaPecudo6Zy5+hpnLwaGmcvB36Zy5bzvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8QAIBABAQEBAAIABwAAAAAAAAAAABIREwECAwQQFDBQcP/aAAgBAQABBQL39vWPm/Hivb833ftnxPenn9DjGMZ9MYxjGMYxjGMYxjGMYxjEpSlKUpSlKUpSlCEIQhCEIQhCEIcnJxcXFxcXFxcXFxcXJycv4D//xAAbEQEBAAIDAQAAAAAAAAAAAAAAEQEwAhJgcP/aAAgBAwEBPwFy39mc775CIiIiIiIiIifAf//EABwRAQEBAAMAAwAAAAAAAAAAAAATEQESMAJQcP/aAAgBAgEBPwF8Pfo4498Z9/rWt8ta1RRRRRRRRRRRRRRR3/Af/8QAGRAAAgMBAAAAAAAAAAAAAAAAATEAITBw/9oACAEBAAY/AjYUO77h/8QAHhABAQEAAQQDAAAAAAAAAAAAABEBIRAgMEFQUWD/2gAIAQEAAT8hpdhXtxr7YbidIndERnCrru4iIiIiIiIrda3ERERERERERuN7QTxgPvn83m/HAAH/AP2fzcuV1dXV1dXf3P8A/9oADAMBAAIAAwAAABD1v+TzxSRCCCBACADDAiKLNsvk00302/8AvbJpdNFF1BBwgxRRMk0QwyyyyCSf/wD407777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDnDndwzOhLnvM6uXRyzMz2M7szOjOzMzMzPhKUpSlKUpzn6nKcvsSIiIiIiIiIi//EABwRAQEBAQADAQEAAAAAAAAAABEAUQEQIDBAcP/aAAgBAgEBPxDnOt10ufbvMdz1Ij1I8hHg+Z8j5kfJ/IDMzM8nkzz0A2Gw2Gx2Ox2Ox2Ow2Gw2Gw2O/wAB/8QAIBABAQACAgMBAAMAAAAAAAAAAQARUWGREHGhIDAxYP/aAAgBAQABPxASIw/o5ye7N8cZWFfExJ8GLFixY8hE58WNyNVzmOV8TGP8IAJmTsc+FrWv6/KUq58kYx/ZAhCMY+AxjH85IQhHjPG4Zep4zxnjPGz1el6XrHCOMcY4ytStS9S9S9S9S9S9S9WerLULULULULUPU8D5PE+TwJeiVol6JeiXqXo+Weiy0WerPVno+WWi9Szs9tnZ7bke25HtuR7bke25HtuR7bLt7bLt7bLt7bLt7bLt7bLt7bLt7bLt7f8AY//Z",An="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDAgT/2gAMAwEAAhADEAAAAc6XpYoSCEpSEpSMoISCPQ50OdDnQ5IOdDklOSlOSDnQssWKpylc4srmWVzLK5lQmFcwhMITCMwhMIzEjMsjMsjML76Tz3lnm9BZ5ryzz3lnnvK898pRdKUXylF8pTdKU3ylN8pTeFVwVXCe7Rma5ujpnLm6WmcuXp6Zy5enpnLl6eucuXp6Zy5enpnLl6emcuZp98S5ul3nLm6Wmcudo6Zy5+hpnL4NDTOXwe/TOXLed6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITMFBw/9oACAEBAAEFAvRTzRERERERERERERERERERERGWWWWWWWWWWWWWWWWHNzc3Nzc3NzYYYYYYYcnFxcXBwcHBwcHFxcXFycvgP//EABcRAQEBAQAAAAAAAAAAAAAAABEAYHD/2gAIAQMBAT8B2BERERERERERwH//xAAbEQEBAQEAAwEAAAAAAAAAAAAAExEBEjBgcP/aAAgBAgEBPwH6DWt9etaoooooopxTinFOKKKKKPP8B//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEABj8CAH//xAAcEAEBAQADAAMAAAAAAAAAAAARAAEQMEBQYHH/2gAIAQEAAT8hIiOkjgiIiIiIiIiIiI4ERERERERHwYAAf/8A++DwAt8wD9YfjoZOzs7Ozs7O/ev/2gAMAwEAAgADAAAAEBAOuj73333736qgkCm3XVdBNNNBNNRXX8QYcQQqmqqmqqoAEemjrrgkssqz7z0w07777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABsRAQEBAAIDAAAAAAAAAAAAABEAIEBREDBg/9oACAEDAQE/EJ4b6HTlmds+WdM4cM7Z2zPKU5SlKc5zn1PqU5S+xIiIiIiIiIiL/8QAHREBAQEAAgMBAQAAAAAAAAAAEQBRMGEBECBAcP/aAAgBAgEBPxD8B8HOcRxERHIfJH5gTM+J8TMzM+g9BsNhsdjsdu67rsuyOw2Gw2Gx3+A//8QAHRABAQADAQEBAQEAAAAAAAAAAQARUWGRIHFgof/aAAgBAQABPxBjGMSxYsWLFixEIERrGsY/ICEIQhGtY1r9flKUpWtaxjH5AQhCEa1rWMfkBCEIR4ni4TxPErU835s9Wer8xzHMcxzHMvUrUmpWpWpWpWpWrLVnqz1D1D1C1C1D1fknklaP8l6JWiVol6JeiVpK0WerLRZ6LLRZavyXR9bo+t0fW6PrdH1uj63R9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9f7H/9k=",an="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAasKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQABBQIAf//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8BAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/AQB//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQAGPwIAf//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEAAT8hAH//2gAMAwEAAgADAAAAEM8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8QAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/EAB//8QAFhABAQEAAAAAAAAAAAAAAAAAABFw/9oACAEBAAE/ENwiIiIiIiIiIj//2Q==",ln="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAQEBAQEAAAAAAAAAAAAAAQACAwQG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB+6+NdXO8q2eY0ywUAEBCCWEWCAgICBrIaA0WHo5qb5y2OJSEIsICAcggICCoQgaAQNAdCiAhCAgICBYBAQEBAYEJdBGgN1BQEABAsBSEWFBQUCA1g1CBqI1AQEBARRIEFBQUFBQME0SDEagICAiwiilBgIKCgoJCVKBiGDSGYBDKGUsIoQGUGUGUEKCRJCQkFUywZQygIZQEsEszosEsEBCQkJCg/8QAHRAAAQQCAwAAAAAAAAAAAAAAAgADERIBMAQUcP/aAAgBAQABBQIzCnLixbu2UOOWWd1lPr//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQMBAT8BJb2G+3//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQIBAT8BIb0Eu3//xAAZEAACAwEAAAAAAAAAAAAAAAABMQAhMHD/2gAIAQEABj8CNhQ7vuH/xAAgEAEAAgEDBQEAAAAAAAAAAAABABEQIDBgITFAQVBR/9oACAEBAAE/Ib+sK9k7F+4Om9Fy8nRWwHHeMrHduXF4c8AfAfof/9oADAMBAAIAAwAAABC0w8HDHUfe8+/9+8colvcc/wDf/LKL/P8A38MRzzz2sAAAEIMm34b7/wBrCRSyyxyQBAP+++sATwwwwxwyCAM888EBixwxxyyhBP8Av/vnhQgIIIgQxnvvrPv/AD9xQYRV9/zz3//EABwRAAEDBQAAAAAAAAAAAAAAAAEQEUAAITBQcP/aAAgBAwEBPxAmyDABVsb0+gEATxxD/8QAGxEAAwADAQEAAAAAAAAAAAAAAAERECAwUGD/2gAIAQIBAT8QSdGcFvdKXEUgLtCfUXK6P0J7H//EAB0QAQEBAQACAwEAAAAAAAAAAAEAERAgMSFBUWH/2gAIAQEAAT8QAAo+E3T+MW/rq9mUsssvGtra9Nhl75Z+zpV23WUsstttttttsMNr9nfu3lLLLbbbbbbbDbMeBZZZZbbbbbYYYZZZZZZZZbbbbbYYYlllllllttttthhhiWWWWWWW223mxERLMyyyz5ERHDMzM93hERE+5mZmeMcIiImZmZ8iIiJmZmZ5llkEEEEcMzMlllllkEEEEEJmSSSyyyyyCCCCCZJJJLLLLLLIIIIIJJJJLLLLLLLIIIIIL//Z",cn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQEEBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAHOl6WKEgjII9CMgjIIyDnQ5IOdDkg5IEglKDSo466n3HyWGuueJPRwrsCuZZXMshMshMshMshNbIzlIylIzCNgRmCUtnUtnUtkbhKLiyi4sovKouCm4Sm4spuLKriyq4squLKriyq9bKrpbKrpSq+Cfvma5+hpnLnaGmcudo6Zy52jpnLnaOucudpaZy5ulpnLnaWmcudpaZy52lpnLnaWmcufo6Zy5+jplLn6OuUvg0NM5cN53oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/EACEQAQEBAQABAgcAAAAAAAAAAAASERMCATADBBAUIEBw/9oACAEBAAEFAvd8Xynp6V4eXjHu+j4fnL7vyz9DGMYxjPpjGMZ+GMYxjGMYxjGMYxKUpSlKUpSlKUpQhCEIQhCEIQhCHJycnFxcXFxcXFxcXFxcnL+A/wD/xAAcEQEBAAICAwAAAAAAAAAAAAARAAFAAhIwYHD/2gAIAQMBAT8B83HQxm7aD6CREREREREREfAf/8QAHREBAQEAAgIDAAAAAAAAAAAAABMRATACEkBQcP/aAAgBAgEBPwHu8/gc8PTvxn2Otb1a1rXuoooooooooooooop+A//EABoQAAICAwAAAAAAAAAAAAAAAAExACEwQHD/2gAIAQEABj8CzCCwtB9h/8QAHxABAQEAAQMFAAAAAAAAAAAAABEBIRAgMEBBUFFg/9oACAEBAAE/IYid0TpGYw519qXIR7oiIiIiIiMzr28KkRERERERGYxmr4AE7QwzETy+z56HwAGfFh//ANn87q6urq6uuXP7H//aAAwDAQACAAMAAAAQAgAQgggQkU88k/b9/vN9NNN5LbziiIwwRRxgwBB1FFNdpJbvTj//AH0gsssssENJDL777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDDM4d+MOO7iDJ0curPYZmZ1Zmd2cszMzM7M+CpynP1OcpSlKUpS+xIiIiIiIiIiL//xAAcEQEBAQEBAQADAAAAAAAAAAARAFEBMCAQQHD/2gAIAQIBAT8Q9e3XS7zrEfJEfPZ7nPmfgjwDyPIj9V+A8meTyZmZ+QOw2Gw2Gw2Ox2Ox2Ox2Gw2Gw3+A/wD/xAAgEAEBAAICAwEAAwAAAAAAAAABABFRYZEQcaEgMDFg/9oACAEBAAE/EHyMWLFix4ECPCypZvjjCUCEP6GMHuf4QAQh4RwkjEcYg48WNzWv6/KUp4pxOWbMY/sEQh5CQcxjH8pKQh4BCEeM8Z4zwvW9L0hajjHGOMcYerhjjHGXqVqVqVqVqy1Z6h6h6h6h6h6h6h6hahavUstFno+WerPVlos9EPR8h6h6IeiFoh6I4EcT5HA+WXb22Xb22Xb22Xb22Xb22Xb22Xb22Xb23I9tyPbcj23I9tyPbcj22dnts7Pb/sf/2Q==",dn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDBAL/2gAMAwEAAhADEAAAAc7vSxRkEJSkJSkewRkEehzoc6HOhyQckEZKclKckHJBKZFcyyuZZXMsrmVCYVzCEwhMIzCEwjMSMyyMyyM1I2Sk7hKLivPeHnvlPPfKUXSlF8pRfKU3SlN8pTeFN4lN5ZT6Cym8spvLL/fM1z9DTOXO0NM5c7R0zlzdLTOXN0tM5czT08S5mnpnLm6emcubp6Zy5unpnLm6fvOXN09M5c7S0zlztHTOXP0dM5cVzugAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITEFBw/9oACAEBAAEFAvWzzEREREREREREREREREREREZZZZZZZZZZZZZZZZYYYYYYYc3Nzc3Nzc3NhycnFxcXFwcHBwcHBxcXFy+A/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAARAGBw/9oACAEDAQE/AdgREREREREREcB//8QAGxEBAQEBAAMBAAAAAAAAAAAAABMRARIwYHD/2gAIAQIBAT8B+g1rfXrWvNRRRRRTinFOKcUUUUUU/Af/xAAUEAEAAAAAAAAAAAAAAAAAAACA/9oACAEBAAY/AgB//8QAHBABAQEAAwADAAAAAAAAAAAAEQABEDBAUGBx/9oACAEBAAE/ITgjpIiIiIiIiIiIiIiIiIiIiIjgR8cAAH//AIAfPB34GdRTfjxBrs7Ozs7Ozv3H/9oADAMBAAIAAwAAABBAKqp+9999+8/roAR90XXQTTTQTRV11spECCqpqqpqoIHGEHFMNM+8+vLJIK645rq+++++++++++++++888888888888888888888888888888888888888888888888//xAAbEQEBAAIDAQAAAAAAAAAAAAARACAwEEBRYP/aAAgBAwEBPxDc4uh1szi5M5M8s8s5s4OpmeqpTlPyfk5znKUpTl9iREREREREREX/xAAdEQEBAQABBQEAAAAAAAAAAAARAFFhARAgMEBw/9oACAECAQE/EPrPA7nqPSREesjxPoDsZmZmek9JmHcOw2Gw2Gx25Lkua5o7HY7DYbDfwH//xAAdEAEBAAMBAQEBAQAAAAAAAAABABFRYZEgcWCh/9oACAEBAAE/EGJMZixYsWLFiCIQhGMYxj8gIQhSFa1rX6/KUpClYxjH5AQhCFKVjGMfkBCEKUpXmeZ5nmeb82erPV+Y5hajiOLhHEcS9StStS9S9WerPVlqFqFqFqFqFqTULUPV+Sy1ZaLPRZaLPULRC0h6IeiFohaIeiFo/wAjkvyWXb62Xb62Xb62Xb62Xb62Xb62Xb62Xb62Xb63R9bo+t0fW6PrdH1uj63R9f7H/9k=";const hn=new G;Ee.install({THREE:Ce});class ${constructor(){g(this,"animationPlugin");g(this,"cameraControlsPlugin");g(this,"humanoidTransformPlugin");g(this,"lookAtPlugin");g(this,"postProcessingPlugin");g(this,"_scene");g(this,"_lookAtHelperRoot");g(this,"_springBoneJointHelperRoot");g(this,"_springBoneColliderHelperRoot");g(this,"_camera");g(this,"_renderer");g(this,"_composer");g(this,"_model");g(this,"_stats",null);g(this,"_webglMemory",null);g(this,"_webglMemoryInfo",null);g(this,"_dracoLoader");g(this,"_loader");g(this,"_canvas");g(this,"_layerMode","thirdPerson");g(this,"_handleResize");g(this,"_ongoingRequestEnvMap");g(this,"_plugins");this._camera=new At(30,window.innerWidth/window.innerHeight,.1,20),this._camera.position.set(0,1,5),this._scene=new it,this._lookAtHelperRoot=new re,this._lookAtHelperRoot.renderOrder=1e4,this._scene.add(this._lookAtHelperRoot),this._springBoneJointHelperRoot=new re,this._springBoneJointHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneJointHelperRoot),this._springBoneColliderHelperRoot=new re,this._springBoneColliderHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneColliderHelperRoot);const t=new at(16777215);t.position.set(1,1,1).normalize(),this._scene.add(t);const e=new lt(10,10);this._scene.add(e);const n=new be(5);this._scene.add(n),this._dracoLoader=new ct,this._dracoLoader.setDecoderPath("./draco/"),this._loader=new dt,this._loader.setDRACOLoader(this._dracoLoader),this._loader.register(s=>new ht(s,{lookAtPlugin:new mt(s,{helperRoot:this._lookAtHelperRoot}),springBonePlugin:new ut(s,{jointHelperRoot:this._springBoneJointHelperRoot,colliderHelperRoot:this._springBoneColliderHelperRoot})})),this.animationPlugin=new Kt(this),this.cameraControlsPlugin=new Jt(this),this.humanoidTransformPlugin=new qt(this),this.lookAtPlugin=new en(this),this.postProcessingPlugin=new tn(this),this._plugins=[this.animationPlugin,this.cameraControlsPlugin,this.humanoidTransformPlugin,this.lookAtPlugin,this.postProcessingPlugin]}static get VALIDATOR_MAX_ISSUES(){return 100}get scene(){return this._scene}get camera(){return this._camera}get renderer(){return this._renderer}get composer(){return this._composer}get lookAtHelperRoot(){return this._lookAtHelperRoot}get springBoneJointHelperRoot(){return this._springBoneJointHelperRoot}get springBoneColliderHelperRoot(){return this._springBoneColliderHelperRoot}get model(){var t;return(t=this._model)!=null?t:null}get stats(){return this._stats}get webglMemoryInfo(){return this._webglMemoryInfo}get canvas(){return this._canvas}get layerMode(){return this._layerMode}set layerMode(t){this._layerMode=t,this._updateLayerMode()}unloadVRM(){const t=this._model;t&&(this._scene.remove(t.scene),J.deepDispose(t.scene),this._emit("unload")),this._plugins.forEach(e=>{var n;return(n=e.handleAfterUnload)==null?void 0:n.call(e)}),this._springBoneJointHelperRoot.children.concat().forEach(e=>{this._springBoneJointHelperRoot.remove(e),e.dispose()}),this._springBoneColliderHelperRoot.children.concat().forEach(e=>{this._springBoneColliderHelperRoot.remove(e),e.dispose()}),this._lookAtHelperRoot.children.concat().forEach(e=>{this._lookAtHelperRoot.remove(e),e.dispose()}),this._model=null}async loadVRM(t){var u,p,c,f,E;const e=await fetch(t).then(B=>B.arrayBuffer()),n=await pt(new Uint8Array(e),{maxIssues:$.VALIDATOR_MAX_ISSUES}).catch(B=>console.error("Validation failed: ",B));this._emit("validate",n),this.unloadVRM();const A=new gt({credentials:"include"}).binaryToJSON(e).json,i=await new Promise((B,x)=>{this._loader.crossOrigin="anonymous",this._loader.load(t,w=>{B(w)},w=>{this._emit("progress",w)},w=>{this._emit("error",w),x(w)})});J.removeUnnecessaryVertices(i.scene),J.removeUnnecessaryJoints(i.scene);const a=(u=i.userData.vrm)!=null?u:null;a==null&&console.warn("Failed to load the model as a VRM. Fallback to treat the model as a mere GLTF"),this._stats=await this._prepareStats(i,a),a&&on(a);const l=(p=a==null?void 0:a.scene)!=null?p:i.scene;this._scene.add(l);const h={gltf:i,validationReport:n,originalGLTFJSON:A,vrm:a,scene:l};return this._model=h,this._plugins.forEach(B=>{var x;return(x=B.handleAfterLoad)==null?void 0:x.call(B,h)}),a&&((c=a.firstPerson)==null||c.setup(),this._updateLayerMode(),a.scene.traverse(B=>{"isMesh"in B&&sn(B,async x=>{"isMeshStandardMaterial"in x&&(x.envMap=await this._requestEnvMap())})}),J.rotateVRM0(a),(f=a.springBoneManager)==null||f.setInitState(),(E=a.nodeConstraintManager)==null||E.setInitState()),this._emit("load",h),h}async exportBufferView(t){var a;const e=(a=this._model)==null?void 0:a.gltf;if(e==null)return;const n=await e.parser.getDependency("bufferView",t),s=new Blob([n]),A=URL.createObjectURL(s),i=document.createElement("a");i.href=A,i.download=`${t}.bin`,i.click(),URL.revokeObjectURL(A)}setup(t){this._canvas=t;const e=window.innerWidth,n=window.innerHeight,s=window.devicePixelRatio;this._renderer=new ft({canvas:this._canvas}),this._renderer.outputEncoding=Et,this._renderer.setSize(e,n),this._renderer.setPixelRatio(s),this._composer=new xt(this._renderer,new Bt(e,n,{type:wt})),this._composer.setPixelRatio(window.devicePixelRatio);const A=new bt(this._scene,this._camera);this._composer.addPass(A),this._handleResize&&window.removeEventListener("resize",this._handleResize),this._handleResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight),this._composer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this._handleResize),this._webglMemory=this._renderer.getContext().getExtension("GMAN_webgl_memory"),this._plugins.forEach(i=>{var a;return(a=i.handleAfterSetup)==null?void 0:a.call(i)})}registerDnD(t){const e=s=>{s.preventDefault()},n=s=>{s.preventDefault();const A=s.dataTransfer.files;if(!A)return;const i=A[0];if(!i)return;const a=new Blob([i],{type:"application/octet-stream"}),l=URL.createObjectURL(a);this.loadVRM(l)};return t.addEventListener("dragover",e),t.addEventListener("drop",n),()=>{t.removeEventListener("dragover",e),t.removeEventListener("drop",n)}}update(t){var e;((e=this._model)==null?void 0:e.vrm)&&this._model.vrm.update(t),this._plugins.forEach(n=>{var s;return(s=n.handleBeforeRender)==null?void 0:s.call(n,t)}),this._composer&&this._composer.render(t),this._webglMemory&&(this._webglMemoryInfo=this._webglMemory.getMemoryInfo())}async _prepareStats(t,e){var f,E,B;const n=new Ct,s=new Set;let A=0,i=0,a=0;const l=x=>{var M,v;i++;const w=x.geometry;n.expandByObject(x);const I=w.getAttribute("position");s.add(I),a+=((v=(M=w.index)==null?void 0:M.count)!=null?v:I.count)/3};(await t.parser.getDependencies("mesh")).forEach(x=>{A++,x.isMesh?l(x):x.children.forEach(I=>{l(I)})});let u=0;for(const x of s)u+=x.count;const p=await t.parser.getDependencies("material"),c=(B=(E=(f=e==null?void 0:e.springBoneManager)==null?void 0:f.springBones)==null?void 0:E.size)!=null?B:0;return{dimension:n.getSize(hn).toArray(),vertices:u,polygons:a,meshes:A,primitives:i,materials:p.length,springBones:c}}_requestEnvMap(){const t=[An,rn,ln,an,dn,cn];if(!this._ongoingRequestEnvMap){const e=new vt;this._ongoingRequestEnvMap=new Promise((n,s)=>{e.load(t,A=>n(A),void 0,A=>s(A))})}return this._ongoingRequestEnvMap}_updateLayerMode(){var e,n;const t=(n=(e=this._model)==null?void 0:e.vrm)==null?void 0:n.firstPerson;!t||(this._layerMode==="firstPerson"?(this._camera.layers.enable(t.firstPersonOnlyLayer),this._camera.layers.disable(t.thirdPersonOnlyLayer)):(this._camera.layers.disable(t.firstPersonOnlyLayer),this._camera.layers.enable(t.thirdPersonOnlyLayer)))}}nn($,[Dt]);var mn="./assets/uv-grid.cfc47a74.png",H;(function(o){o[o.None=0]="None",o[o.GLTFFallback=1]="GLTFFallback",o[o.MToonNormal=2]="MToonNormal",o[o.MToonLitShadeRate=3]="MToonLitShadeRate",o[o.MToonUV=4]="MToonUV",o[o.UVGrid=5]="UVGrid"})(H||(H={}));const _e=new se({visible:!1}),un=new Promise(o=>{new Be().load(mn,e=>{e.flipY=!1,o(e)})});function Le(){const o=new se({color:16711935});return un.then(t=>{o.map=t,o.color.set(16777215)}),o}function ke(o,t){if("isMToonMaterial"in o){const e=o;e.debugMode=t}}function ze(o){return"isMToonMaterial"in o?o.isOutline:!1}class pn{constructor(t){g(this,"_currentMode",0);g(this,"_vrmMaterialsByMesh",new Map);g(this,"_inspector");this._inspector=t,this._inspector.on("load",()=>this._handleLoad()),this._inspector.on("unload",()=>this._handleUnload())}applyMode(t){t===0?this._applyModeMToon(X.None):t===2?this._applyModeMToon(X.Normal):t===3?this._applyModeMToon(X.LitShadeRate):t===4?this._applyModeMToon(X.UV):t===5&&this._applyModeUVGrid(),this._currentMode=t}_applyModeMToon(t){for(const[e,n]of this._vrmMaterialsByMesh.entries())Array.isArray(n)?n.forEach((s,A)=>{ke(s,t),e.material[A]=s}):(ke(n,t),e.material=n)}_applyModeUVGrid(){for(const[t,e]of this._vrmMaterialsByMesh.entries())Array.isArray(e)?e.forEach((n,s)=>{ze(n)?t.material[s]=_e:t.material[s]=Le()}):ze(e)?t.material=_e:t.material=Le()}async _handleLoad(){(await this._inspector.model.gltf.parser.getDependencies("mesh")).forEach(e=>{if("isGroup"in e)e.children.forEach(s=>{const A=s;this._addManagedMesh(A)});else{const n=e;this._addManagedMesh(n)}}),this.applyMode(this._currentMode)}_addManagedMesh(t){Array.isArray(t.material)?this._vrmMaterialsByMesh.set(t,t.material.concat()):this._vrmMaterialsByMesh.set(t,t.material)}_handleUnload(){this._vrmMaterialsByMesh.clear()}}var Se="./assets/three-vrm-girl-vrm0.0.e6e179de.vrm";function gn(o){console.error(o)}const D=new $;D.loadVRM(Se).catch(gn);D.registerDnD(document.body);const fn=new Ht(D),En=new pn(D);console.info(D);const xn=new Rt;function He(){requestAnimationFrame(He);const o=xn.getDelta();D.update(o)}He();const P=ve.createContext({inspector:D,highlighter:fn,materialDebugger:En}),De=({href:o,widthClass:t})=>o==null?null:r("a",{href:o,target:"_blank",rel:"noreferrer",className:`font-bold truncate inline-block align-top underline text-sky-500 ${t!=null?t:"w-64"}`,children:o});function Bn(){const o=d.exports.useRef(-1/0);return d.exports.useCallback(e=>{const n=performance.now();n-o.current<250?(e(),o.current=-1/0):o.current=n},[o])}const _=o=>{var h,u,p;const[t,e]=d.exports.useState((h=o.initPosition)!=null?h:{left:0,top:0}),[n,s]=d.exports.useState((u=o.initOpening)!=null?u:!1),A=Bn(),i=d.exports.useCallback(c=>{var f;(f=o.onClick)==null||f.call(o,c,o.paneKey)},[o.onClick,o.paneKey]),a=d.exports.useCallback(c=>{c.preventDefault();let f=t.left,E=t.top;ye((B,x)=>{B.preventDefault(),B.stopPropagation(),f+=x.x,E+=x.y,e({left:f,top:E})}),A(()=>{s(!n)})},[n,t]),l=d.exports.useCallback(c=>{var f;c.preventDefault(),c.stopPropagation(),(f=o.onClick)==null||f.call(o,c,o.paneKey),s(!n)},[n,o.onClick,o.paneKey]);return R("div",{style:{left:t.left,top:t.top,minWidth:"15rem",boxShadow:"0 0 10px rgba(0, 0, 0, 1.0)"},className:`absolute shadow ${o.className}`,onMouseDown:i,children:[R("div",{className:"h-5 leading-5 w-full bg-gray-700 cursor-move",onMouseDown:a,children:[r("div",{className:"inline-block w-5 h-5 text-center cursor-pointer hover:text-sky-500",onMouseDown:l,children:n?"-":"+"}),o.title]}),n&&((p=o.children)!=null?p:null)]})},L=({className:o,paddingClass:t,children:e})=>r("div",{className:`bg-gray-900/80 backdrop-blur ${t!=null?t:"p-2"} ${o}`,children:e}),wn=o=>r(_,C(b({},o),{children:R(L,{children:[r("div",{children:"three-vrm-inspector"}),r("div",{children:"Three.js based VRM inspector"}),R("div",{children:["Source: ",r(De,{widthClass:"w-min",href:"https://github.com/0b5vr/three-vrm-inspector"})]})]})})),W=({label:o,onChange:t,defaultValue:e,disabled:n})=>{const s=d.exports.useCallback(A=>{const i=parseFloat(A.currentTarget.value);t(i)},[]);return R("div",{className:"flex items-center",children:[r("input",{className:"mr-2",type:"range",min:"0",max:"1",step:"0.001",defaultValue:e!=null?e:0,disabled:n,onChange:s}),n?r("span",{className:"text-gray-500",children:o}):o]})},Te=({name:o,isAvailable:t})=>{const{inspector:e}=d.exports.useContext(P),n=d.exports.useCallback(s=>{var A,i,a;(a=(i=(A=e.model)==null?void 0:A.vrm)==null?void 0:i.expressionManager)==null||a.setValue(o,s)},[]);return r(W,{label:o,disabled:!t,onChange:n})},ee=()=>r("div",{className:"w-full h-0.5 my-2 bg-gray-500"}),Ue=[y.Neutral,y.Happy,y.Angry,y.Sad,y.Relaxed,y.Surprised,y.Blink,y.BlinkLeft,y.BlinkRight,y.Aa,y.Ee,y.Ih,y.Oh,y.Ou,y.LookLeft,y.LookRight,y.LookDown,y.LookUp],bn=new Set(Ue),Cn=o=>{var i,a,l;const{inspector:t}=d.exports.useContext(P),e=(a=(i=t.model)==null?void 0:i.vrm)==null?void 0:a.expressionManager,n=e==null?void 0:e.expressionMap,s=[];n&&Array.from(Object.keys(n)).forEach(h=>{bn.has(h)||s.push(h)});const A=((l=s==null?void 0:s.length)!=null?l:0)>=1;return r(_,C(b({},o),{children:r(L,{children:e?R(k,{children:[Ue.map(h=>r(Te,{name:h,isAvailable:(e==null?void 0:e.getExpression(h))!=null},h)),r(ee,{}),s==null?void 0:s.map(h=>r(Te,{name:h,isAvailable:!0},h)),!A&&r("span",{className:"text-gray-500",children:"(No custom expressions)"})]}):"No blendShapeProxy detected."})}))},vn=o=>{const{inspector:t}=d.exports.useContext(P),e=d.exports.useRef(null),n=d.exports.useCallback(s=>{var i;s.preventDefault();const A=(i=e.current)==null?void 0:i.value;if(A!=null&&A!==""){const a=parseInt(A,10);t.exportBufferView(a)}},[t]);return r(_,C(b({},o),{children:r(L,{children:R("form",{onSubmit:n,children:[r("input",{type:"number",ref:e,defaultValue:0,className:"w-24 px-1 bg-gray-800 border border-gray-500",required:!0}),r("input",{type:"submit",className:"ml-1 px-1 bg-gray-800 border border-gray-500",value:"Export"})]})})}))},Z=({callback:o,label:t,checked:e})=>{const[n,s]=d.exports.useState(e!=null?e:!1),A=d.exports.useCallback(({target:i})=>{o(i.checked),s(i.checked)},[o]);return R("div",{children:[r("input",{type:"checkbox",checked:n,onChange:A}),t]})},Rn=o=>{const{inspector:t}=d.exports.useContext(P),e=d.exports.useCallback(i=>{t.lookAtHelperRoot.visible=i},[t]),n=d.exports.useCallback(i=>{t.humanoidTransformPlugin.active=i},[t]),s=d.exports.useCallback(i=>{t.springBoneJointHelperRoot.visible=i},[t]),A=d.exports.useCallback(i=>{t.springBoneColliderHelperRoot.visible=i},[t]);return r(_,C(b({},o),{children:R(L,{children:[r(Z,{callback:n,label:"Humanoid Transform",checked:!0}),r(Z,{callback:e,label:"LookAt",checked:!0}),r(Z,{callback:s,label:"Spring Bones",checked:!0}),r(Z,{callback:A,label:"Spring Bone Colliders",checked:!0})]})}))},Mn="modulepreload",Ne={},In="./",yn=function(t,e){return!e||e.length===0?t():Promise.all(e.map(n=>{if(n=`${In}${n}`,n in Ne)return;Ne[n]=!0;const s=n.endsWith(".css"),A=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${A}`))return;const i=document.createElement("link");if(i.rel=s?"stylesheet":Mn,s||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),s)return new Promise((a,l)=>{i.addEventListener("load",a),i.addEventListener("error",l)})})).then(()=>t())};const Pn=`// Press Ctrl+S or Ctrl+R to apply
// The api will be changed without notice! Use at your own risk

export default ( { inspector, THREE } ) => {
  let isUnmounted = false;

  const vrm = inspector.model.vrm;

  // update
  const beginTime = Date.now();

  function update() {
    if ( isUnmounted ) { return; }

    const time = 0.001 * ( Date.now() - beginTime );

    const leftUpperArm = vrm.humanoid?.getBoneNode( 'leftUpperArm' );
    if ( leftUpperArm != null ) {
      leftUpperArm.rotation.z = Math.sin( time );
    }

    requestAnimationFrame( update );
  }
  requestAnimationFrame( update );

  // uninit
  return () => {
    isUnmounted = true;
  };
}
`,Qn=o=>{const{inspector:t}=d.exports.useContext(P),[e,n]=d.exports.useState(Pn),[s,A]=d.exports.useState(!1),i=d.exports.useRef();d.exports.useEffect(()=>{window.addEventListener("beforeunload",p=>{if(s){const c="You will lose all of your changes on the editor!";return p.returnValue=c,c}})},[s]);const a=d.exports.useCallback(p=>{var E;(E=i.current)==null||E.call(i);const c=new Blob([p],{type:"text/javascript"}),f=URL.createObjectURL(c);yn(()=>import(f),[]).then(B=>{i.current=B.default({inspector:t,THREE:Ce}),URL.revokeObjectURL(f)})},[t]),l=d.exports.useCallback(p=>{p.addKeyMap({"Ctrl-S":()=>{a(p.getValue())},"Ctrl-R":()=>{a(p.getValue())}})},[a]),h=d.exports.useCallback((p,c,f)=>{n(f),A(!0)},[]),u=d.exports.useCallback(()=>{},[]);return r(_,C(b({},o),{children:r(L,{className:"w-120 h-80",paddingClass:"p-0",children:r(Mt,{value:e,options:{mode:"text/javascript",keyMap:"sublime",theme:"monokai-sharp",lineNumbers:!0},editorDidMount:l,onBeforeChange:h,onChange:u,className:"h-full leading-tight"})})}))},te=({children:o,onClick:t,onMouseEnter:e,onMouseLeave:n})=>r("span",{className:"select-none cursor-pointer",onClick:t,onMouseEnter:e,onMouseLeave:n,children:o}),Ve=({children:o})=>r("div",{style:{marginLeft:"1.13em"},children:o}),ie=({name:o,value:t,fullPath:e=""})=>{const{highlighter:n}=d.exports.useContext(P),[s,A]=d.exports.useState(!1),[i,a]=d.exports.useState(!1),[l,h]=d.exports.useState([void 0]),u=d.exports.useCallback(v=>{v.stopPropagation(),A(!s)},[A,s]),p=d.exports.useCallback(()=>{a(!0),h([n.highlight(e)])},[a,h,n,e]),c=d.exports.useCallback(()=>{var v;a(!1),(v=l[0])==null||v.call(l)},[a,l]),f=Array.isArray(t),E=t==null,B=typeof t=="number",x=typeof t=="boolean",w=typeof t=="string",I=!f&&!E&&!B&&!x&&!w,M={onClick:u,onMouseEnter:p,onMouseLeave:c,isHovering:i};return R("div",{className:"select-auto",children:[r("span",C(b({className:`cursor-pointer ${i&&"text-sky-500"}`},M),{children:o?`${o}: `:""})),f&&R(k,{children:[r(te,C(b({},M),{children:"["})),s&&r(Ve,{children:t.map((v,Q)=>r("div",{children:r(ie,{name:Q.toString()+((v==null?void 0:v.name)?` (${v.name})`:""),value:v,fullPath:`${e}/${Q}`})},Q))}),r(te,C(b({},M),{children:` ${s?"":t.length} ]`}))]}),I&&R(k,{children:[r(te,C(b({},M),{children:"{"})),s&&r(Ve,{children:Object.keys(t).map((v,Q)=>r("div",{children:r(ie,{name:v,value:t[v],fullPath:`${e}/${v}`})},Q))}),r(te,C(b({},M),{children:` ${s?"":Object.keys(t).join(", ")} }`}))]}),E&&r(k,{children:r("span",C(b({className:"text-pink-500"},M),{children:t}))}),B&&r(k,{children:r("span",C(b({className:"text-indigo-400"},M),{children:t}))}),x&&r(k,{children:r("span",C(b({className:"text-indigo-400"},M),{children:String(t)}))}),w&&r(k,{children:R("span",C(b({className:"text-yellow-300"},M),{children:['"',t,'"']}))})]})},_n=o=>{const{inspector:t}=d.exports.useContext(P),[e,n]=d.exports.useState(void 0);return d.exports.useEffect(()=>{const s=()=>{var A;n((A=t.model)==null?void 0:A.originalGLTFJSON)};return t.on("load",s),()=>{t.off("load",s)}},[t]),r(_,C(b({},o),{children:r(L,{className:"w-120 h-80 overflow-scroll whitespace-nowrap resize font-mono text-xs leading-tight",paddingClass:"p-0",children:r(ie,{value:e})})}))},Ln=o=>{const{inspector:t}=d.exports.useContext(P),e=d.exports.useCallback(n=>{t.lookAtPlugin.enableLookAt=n},[t]);return r(_,C(b({},o),{children:r(L,{children:r(Z,{callback:e,label:"Enable LookAt"})})}))},kn=o=>{const{materialDebugger:t}=d.exports.useContext(P),e=d.exports.useCallback(n=>{const s=parseInt(n.target.value);t.applyMode(s)},[t]);return r(_,C(b({},o),{children:r(L,{children:R("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:[r("option",{value:H.None,children:"None"}),r("option",{value:H.MToonNormal,children:"MToon Normal"}),r("option",{value:H.MToonLitShadeRate,children:"MToon LitShadeRate"}),r("option",{value:H.MToonUV,children:"MToon UV"}),r("option",{value:H.UVGrid,children:"UV Grid"})]})})}))},m=({name:o,value:t,href:e})=>R("div",{children:[o,":"," ",t!=null&&r("span",{className:"font-bold",children:t}),e&&r(De,{href:e})]}),zn=({meta:o})=>R(k,{children:[r(m,{name:"Title",value:o.title}),r(m,{name:"Author",value:o.author}),r(m,{name:"Version",value:o.version}),r(m,{name:"Reference",value:o.reference}),r(m,{name:"Contact Information",value:o.contactInformation}),r(m,{name:"Allowed User Name",value:o.allowedUserName}),r(m,{name:"Violent Ussage Name",value:o.violentUssageName}),r(m,{name:"Sexual Ussage Name",value:o.sexualUssageName}),r(m,{name:"Commercial Ussage Name",value:o.commercialUssageName}),r(m,{name:"Other Permission URL",href:o.otherPermissionUrl}),r(m,{name:"License Name",value:o.licenseName}),r(m,{name:"Other License URL",href:o.otherLicenseUrl})]}),Sn=({meta:o})=>{var t;return R(k,{children:[r(m,{name:"Name",value:o.name}),r(m,{name:"Version",value:o.version}),r(m,{name:"Authors",value:o.authors.join(", ")}),r(m,{name:"Copyright Information",value:o.copyrightInformation}),r(m,{name:"Contact Information",value:o.contactInformation}),r(m,{name:"References",value:(t=o.references)==null?void 0:t.join(", ")}),r(m,{name:"Third Party Licenses",value:o.thirdPartyLicenses}),r(m,{name:"License URL",href:o.licenseUrl}),r(m,{name:"Avatar Permission",value:o.avatarPermission}),r(m,{name:"Allow Excessively Violent Usage",value:String(o.allowExcessivelyViolentUsage)}),r(m,{name:"Allow Excessively Sexual Usage",value:String(o.allowExcessivelySexualUsage)}),r(m,{name:"Commercial Usage Name",value:o.commercialUsage}),r(m,{name:"Allow Political or Religious Usage",value:String(o.allowPoliticalOrReligiousUsage)}),r(m,{name:"Allow Antisocial or Hate Usage",value:String(o.allowAntisocialOrHateUsage)}),r(m,{name:"Credit Notation",value:o.creditNotation}),r(m,{name:"Allow Redistribution",value:String(o.allowRedistribution)}),r(m,{name:"Modification",value:o.modification}),r(m,{name:"Other License URL",href:o.otherLicenseUrl})]})},Hn=o=>{var s,A;const{inspector:t}=d.exports.useContext(P),e=(A=(s=t.model)==null?void 0:s.vrm)==null?void 0:A.meta;let n=r(k,{children:"No meta detected."});return(e==null?void 0:e.metaVersion)==="1"?n=r(Sn,{meta:e}):(e==null?void 0:e.metaVersion)==="0"&&(n=r(zn,{meta:e})),r(_,C(b({},o),{children:r(L,{children:n})}))};var Dn="./assets/dancing.2665f039.fbx",Tn="./assets/gangnam-style.119f68a4.fbx",Un="./assets/jump.a8a08f02.fbx",Nn="./assets/running.c854d669.fbx",Vn="./assets/standing-clap.9fc941e1.fbx",Gn="./assets/walking.ed38b4d6.fbx";const Fn=[{name:"(No Animation)",url:"-"},{name:"Walking",url:Gn},{name:"Running",url:Nn},{name:"Jump",url:Un},{name:"Dancing",url:Dn},{name:"Standing Clap",url:Vn},{name:"Gangnam Style",url:Tn}],On=o=>{const{inspector:t}=d.exports.useContext(P),e=d.exports.useCallback(n=>{const s=n.target.value;s==="-"?t.animationPlugin.clearMixamoAnimation():t.animationPlugin.loadMixamoAnimation(s)},[t]);return r(_,C(b({},o),{children:r(L,{children:r("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:Fn.map(({name:n,url:s})=>r("option",{value:s,children:n},s))})})}))},Ge=({label:o,onChange:t,defaultChecked:e,disabled:n})=>{const s=d.exports.useCallback(A=>{const i=A.currentTarget.checked;t(i)},[]);return R("div",{className:"flex items-center",children:[r("input",{className:"mr-2",type:"checkbox",disabled:n,defaultChecked:e,onChange:s}),n?r("span",{className:"text-gray-500",children:o}):o]})},jn=o=>{const{inspector:t}=d.exports.useContext(P),[e,n]=d.exports.useState(!1),s=d.exports.useCallback(c=>{t.postProcessingPlugin.bloomPass.enabled=c,n(c)},[t]),A=d.exports.useCallback(c=>{t.postProcessingPlugin.bloomPass.strength=4*c},[t]),i=d.exports.useCallback(c=>{t.postProcessingPlugin.bloomPass.radius=c},[t]),a=d.exports.useCallback(c=>{t.postProcessingPlugin.bloomPass.threshold=4*c},[t]),[l,h]=d.exports.useState(!1),u=d.exports.useCallback(c=>{t.postProcessingPlugin.toneMappingPass.enabled=c,h(c)},[t]),p=d.exports.useCallback(c=>{t.postProcessingPlugin.toneMappingPass.uniforms.exposure.value=2*c},[t]);return r(_,C(b({},o),{children:R(L,{children:[r("h3",{className:"text-lg font-bold",children:"Bloom"}),r(Ge,{label:"Enabled",defaultChecked:!1,onChange:s}),r(W,{label:"Strength",defaultValue:.25,disabled:!e,onChange:A}),r(W,{label:"Radius",defaultValue:.5,disabled:!e,onChange:i}),r(W,{label:"Threshold",defaultValue:.25,disabled:!e,onChange:a}),r(ee,{}),r("h3",{className:"text-lg font-bold",children:"ACES Tone Mapping"}),r(Ge,{label:"Enabled",defaultChecked:!1,onChange:u}),r(W,{label:"Exposure",defaultValue:.5,disabled:!l,onChange:p})]})}))},Wn=({name:o,url:t})=>{const{inspector:e}=d.exports.useContext(P),n=d.exports.useCallback(()=>{e.loadVRM(t)},[e]);return r("button",{value:o,className:"bg-gray-800 border border-gray-500 px-1 py-0 block",onClick:n,children:o})};var Zn="./assets/three-vrm-girl.2076a024.vrm";const Yn=[{name:"three-vrm-girl (VRM0.X)",url:Se},{name:"three-vrm-girl (VRM1.0-beta)",url:Zn}],Kn=o=>r(_,C(b({},o),{children:r(L,{children:Yn.map(({name:t,url:e})=>r(Wn,{name:t,url:e},t))})})),Jn=o=>{var s,A,i,a,l,h,u,p,c,f;const{inspector:t}=d.exports.useContext(P),e=(s=t.stats)==null?void 0:s.dimension.map(E=>E.toFixed(3)),n=`( ${(A=e==null?void 0:e[0])!=null?A:0}, ${(i=e==null?void 0:e[1])!=null?i:0}, ${(a=e==null?void 0:e[2])!=null?a:0} )`;return r(_,C(b({},o),{children:R(L,{children:[r(m,{name:"Dimension",value:n}),r(m,{name:"Vertices",value:(l=t.stats)==null?void 0:l.vertices}),r(m,{name:"Polygons",value:(h=t.stats)==null?void 0:h.polygons}),r(m,{name:"Meshes",value:(u=t.stats)==null?void 0:u.meshes}),r(m,{name:"Primitives",value:(p=t.stats)==null?void 0:p.primitives}),r(m,{name:"Materials",value:(c=t.stats)==null?void 0:c.materials}),r(m,{name:"Spring Bones",value:(f=t.stats)==null?void 0:f.springBones})]})}))},Xn=({children:o})=>r("div",{style:{marginLeft:"1.13em"},children:o}),qn=o=>{const[t,e]=d.exports.useState(!1),n=o.severity===0?O.error:o.severity===1?O.warning:O.severityInfo,s=d.exports.useCallback(()=>{e(!t)},[t]);return R("div",{className:"group cursor-pointer",onClick:s,children:[r("span",{className:"group-hover:text-sky-500",children:t?"- ":"+ "}),r("span",{style:{color:n},children:o.code}),r("span",{className:"text-gray-500",children:" - "+o.pointer}),t&&r(Xn,{children:o.message})]})},ne=({count:o,colorClass:t})=>r("span",{className:o?t:"text-gray-500",children:o}),$n=o=>{var n,s,A,i;const{inspector:t}=d.exports.useContext(P),e=(s=(n=t.model)==null?void 0:n.validationReport)==null?void 0:s.issues;return r(_,C(b({},o),{children:R(L,{className:"w-120 h-80 resize overflow-y-scroll",children:[r(m,{name:"Validator Version",value:(i=(A=t.model)==null?void 0:A.validationReport)==null?void 0:i.validatorVersion}),r(m,{name:"Errors",value:r(ne,{count:e==null?void 0:e.numErrors,colorClass:"text-red-500"})}),r(m,{name:"Warnings",value:r(ne,{count:e==null?void 0:e.numWarnings,colorClass:"text-yellow-300"})}),r(m,{name:"Infos",value:r(ne,{count:e==null?void 0:e.numInfos,colorClass:"text-sky-500"})}),r(m,{name:"Hints",value:r(ne,{count:e==null?void 0:e.numHints,colorClass:"text-sky-500"})}),r(ee,{}),(e==null?void 0:e.truncated)&&r("div",{className:"m-1 font-bold",children:"There are too many issues! Showing only 100 entries."}),r("div",{className:"w-full font-mono leading-tight text-xs",children:e==null?void 0:e.messages.map((a,l)=>r(qn,{code:a.code,message:a.message,severity:a.severity,pointer:a.pointer},l))})]})}))},Y=o=>(o/1048576).toFixed(3)+" MB",eo=o=>{var n,s,A,i,a,l,h,u,p,c,f,E,B,x,w,I,M,v,Q,T,z,S,K,N,V,U,ae,le,ce,de;const{inspector:t}=d.exports.useContext(P),e=t.webglMemoryInfo;return r(_,C(b({},o),{children:R(L,{children:[r(m,{name:"Buffer",value:Y((s=(n=e==null?void 0:e.memory)==null?void 0:n.buffer)!=null?s:0)}),r(m,{name:"Texture",value:Y((i=(A=e==null?void 0:e.memory)==null?void 0:A.texture)!=null?i:0)}),r(m,{name:"Render Buffer",value:Y((l=(a=e==null?void 0:e.memory)==null?void 0:a.renderbuffer)!=null?l:0)}),r(m,{name:"Drawing Buffer",value:Y((u=(h=e==null?void 0:e.memory)==null?void 0:h.drawingbuffer)!=null?u:0)}),r(m,{name:"Total",value:Y((c=(p=e==null?void 0:e.memory)==null?void 0:p.total)!=null?c:0)}),r(ee,{}),r(m,{name:"Buffer",value:(E=(f=e==null?void 0:e.resources)==null?void 0:f.buffer)!=null?E:0}),r(m,{name:"Render Buffer",value:(x=(B=e==null?void 0:e.resources)==null?void 0:B.renderbuffer)!=null?x:0}),r(m,{name:"Program",value:(I=(w=e==null?void 0:e.resources)==null?void 0:w.program)!=null?I:0}),r(m,{name:"Query",value:(v=(M=e==null?void 0:e.resources)==null?void 0:M.query)!=null?v:0}),r(m,{name:"Sampler",value:(T=(Q=e==null?void 0:e.resources)==null?void 0:Q.sampler)!=null?T:0}),r(m,{name:"Shader",value:(S=(z=e==null?void 0:e.resources)==null?void 0:z.shader)!=null?S:0}),r(m,{name:"Sync",value:(N=(K=e==null?void 0:e.resources)==null?void 0:K.sync)!=null?N:0}),r(m,{name:"Texture",value:(U=(V=e==null?void 0:e.resources)==null?void 0:V.texture)!=null?U:0}),r(m,{name:"Transform Feedback",value:(le=(ae=e==null?void 0:e.resources)==null?void 0:ae.transformFeedback)!=null?le:0}),r(m,{name:"Vertex Array",value:(de=(ce=e==null?void 0:e.resources)==null?void 0:ce.vertexArray)!=null?de:0})]})}))},to=()=>{const[o,t]=d.exports.useState(["jsonTree","materialDebugger","meta","stats","webglMemory","blendShape","lookAt","validationReport","sampleModels","helpers","exportBufferView","mixamoAnimations","postProcessing","jsEditor","about"]),e=d.exports.useCallback((i,a)=>{const l=o.concat();l.splice(o.indexOf(a),1),l.push(a),t(l)},[o]);let n=0;const s=()=>{const i=0,a=n;return n+=20,{left:i,top:a}},A={jsonTree:r(_n,{paneKey:"jsonTree",title:"JSON Tree",onClick:e,initPosition:s()},"jsonTree"),materialDebugger:r(kn,{paneKey:"materialDebugger",title:"MToon Material Debugger",onClick:e,initPosition:s()},"materialDebugger"),meta:r(Hn,{paneKey:"meta",title:"Meta",onClick:e,initPosition:s()},"meta"),stats:r(Jn,{paneKey:"stats",title:"Stats",onClick:e,initPosition:s()},"stats"),webglMemory:r(eo,{paneKey:"webglMemory",title:"WebGL Memory",onClick:e,initPosition:s()},"webglMemory"),blendShape:r(Cn,{paneKey:"blendShape",title:"Blend Shape Proxy",onClick:e,initPosition:s()},"blendShape"),lookAt:r(Ln,{paneKey:"lookAt",title:"Look At",onClick:e,initPosition:s()},"lookAt"),validationReport:r($n,{paneKey:"validationReport",title:"Validation Report",onClick:e,initPosition:s()},"validationReport"),sampleModels:r(Kn,{paneKey:"sampleModels",title:"Sample Models",onClick:e,initPosition:s()},"sampleModels"),helpers:r(Rn,{paneKey:"helpers",title:"Helpers",onClick:e,initPosition:s()},"helpers"),exportBufferView:r(vn,{paneKey:"exportBufferView",title:"Export Buffer View",onClick:e,initPosition:s()},"exportBufferView"),mixamoAnimations:r(On,{paneKey:"mixamoAnimations",title:"Mixamo Animations",onClick:e,initPosition:s()},"mixamoAnimations"),postProcessing:r(jn,{paneKey:"postProcessing",title:"Post Processing",onClick:e,initPosition:s()},"postProcessing"),jsEditor:r(Qn,{paneKey:"jsEditor",title:"JavaScript Editor",onClick:e,initPosition:s()},"jsEditor"),about:r(wn,{paneKey:"about",title:"About",onClick:e,initPosition:s()},"about")};return r(k,{children:o.map(i=>A[i])})},no=()=>{const{inspector:o}=d.exports.useContext(P),[t,e]=d.exports.useState(null);d.exports.useEffect(()=>{const s=()=>{e(null)},A=i=>{e(i)};return o.on("load",s),o.on("progress",A),()=>{o.off("load",s),o.off("progress",A)}});const n=d.exports.useMemo(()=>t?t.loaded/t.total:null,[t]);return r(k,{children:r("div",{className:"w-full h-full absolute text-center pointer-events-none",children:r("div",{children:n?(100*n).toFixed(2):"yay"})})})},oo=()=>{const{inspector:o}=d.exports.useContext(P),t=d.exports.useCallback(e=>{e&&o.setup(e)},[]);return r(k,{children:R("div",{className:"w-full h-full text-sm absolute overflow-hidden text-gray-100",children:[r("canvas",{ref:t,className:"w-full h-full absolute"}),r(to,{}),r(no,{})]})})},so=()=>r(k,{children:r(oo,{})});It.render(r(ve.StrictMode,{children:r(so,{})}),document.getElementById("root"));
