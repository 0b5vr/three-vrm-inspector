var NP=Object.defineProperty,FP=Object.defineProperties;var UP=Object.getOwnPropertyDescriptors;var iM=Object.getOwnPropertySymbols;var BP=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable;var sM=(s,e,t)=>e in s?NP(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,nm=(s,e)=>{for(var t in e||(e={}))BP.call(e,t)&&sM(s,t,e[t]);if(iM)for(var t of iM(e))zP.call(e,t)&&sM(s,t,e[t]);return s},gy=(s,e)=>FP(s,UP(e));/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Hi="140",HP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},GP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},oM=0,vy=1,aM=2,VP=3,WP=0,yy=1,lM=2,ju=3,na=0,Mi=1,bs=2,xy=1,$P=2,go=0,vl=1,_y=2,wy=3,by=4,uM=5,yl=100,cM=101,fM=102,Sy=103,My=104,hM=200,dM=201,pM=202,mM=203,Ty=204,Ey=205,gM=206,vM=207,yM=208,xM=209,_M=210,wM=0,bM=1,SM=2,rm=3,MM=4,TM=5,EM=6,AM=7,vh=0,CM=1,RM=2,Vs=0,LM=1,IM=2,PM=3,kM=4,DM=5,im=300,ra=301,ia=302,qu=303,yh=304,Xu=306,Ws=1e3,Lr=1001,Yu=1002,ir=1003,xh=1004,jP=1004,_h=1005,qP=1005,jn=1006,sm=1007,XP=1007,vo=1008,YP=1008,yo=1009,OM=1010,NM=1011,Ku=1012,FM=1013,wh=1014,xo=1015,Qu=1016,UM=1017,BM=1018,xl=1020,zM=1021,HM=1022,Ti=1023,GM=1024,VM=1025,sa=1026,_l=1027,WM=1028,$M=1029,jM=1030,qM=1031,XM=1033,om=33776,am=33777,lm=33778,um=33779,Ay=35840,Cy=35841,Ry=35842,Ly=35843,YM=36196,Iy=37492,Py=37496,ky=37808,Dy=37809,Oy=37810,Ny=37811,Fy=37812,Uy=37813,By=37814,zy=37815,Hy=37816,Gy=37817,Vy=37818,Wy=37819,$y=37820,jy=37821,qy=36492,KM=2200,QM=2201,ZM=2202,Zu=2300,wl=2301,cm=2302,bl=2400,Sl=2401,bh=2402,fm=2500,Xy=2501,JM=0,eT=1,Yy=2,Gi=3e3,Xt=3001,tT=3200,nT=3201,_o=0,rT=1,KP="",$s="srgb",oa="srgb-linear",QP=0,hm=7680,ZP=7681,JP=7682,ek=7683,tk=34055,nk=34056,rk=5386,ik=512,sk=513,ok=514,ak=515,lk=516,uk=517,ck=518,iT=519,Ju=35044,Ml=35048,fk=35040,hk=35045,dk=35049,pk=35041,mk=35046,gk=35050,vk=35042,yk="100",Ky="300 es",dm=1035;class aa{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let l=0,u=o.length;l<u;l++)o[l].call(this,e);e.target=null}}}const Hr=[];for(let s=0;s<256;s++)Hr[s]=(s<16?"0":"")+s.toString(16);let sT=1234567;const Tl=Math.PI/180,Sh=180/Math.PI;function Vi(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hr[s&255]+Hr[s>>8&255]+Hr[s>>16&255]+Hr[s>>24&255]+"-"+Hr[e&255]+Hr[e>>8&255]+"-"+Hr[e>>16&15|64]+Hr[e>>24&255]+"-"+Hr[t&63|128]+Hr[t>>8&255]+"-"+Hr[t>>16&255]+Hr[t>>24&255]+Hr[r&255]+Hr[r>>8&255]+Hr[r>>16&255]+Hr[r>>24&255]).toLowerCase()}function sr(s,e,t){return Math.max(e,Math.min(t,s))}function Qy(s,e){return(s%e+e)%e}function xk(s,e,t,r,o){return r+(s-e)*(o-r)/(t-e)}function _k(s,e,t){return s!==e?(t-s)/(e-s):0}function Mh(s,e,t){return(1-t)*s+t*e}function wk(s,e,t,r){return Mh(s,e,1-Math.exp(-t*r))}function bk(s,e=1){return e-Math.abs(Qy(s,e*2)-e)}function Sk(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*(3-2*s))}function Mk(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*s*(s*(s*6-15)+10))}function Tk(s,e){return s+Math.floor(Math.random()*(e-s+1))}function Ek(s,e){return s+Math.random()*(e-s)}function Ak(s){return s*(.5-Math.random())}function Ck(s){s!==void 0&&(sT=s);let e=sT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Rk(s){return s*Tl}function Lk(s){return s*Sh}function Zy(s){return(s&s-1)==0&&s!==0}function oT(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function pm(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function Ik(s,e,t,r,o){const l=Math.cos,u=Math.sin,h=l(t/2),m=u(t/2),v=l((e+r)/2),w=u((e+r)/2),S=l((e-r)/2),A=u((e-r)/2),R=l((r-e)/2),O=u((r-e)/2);switch(o){case"XYX":s.set(h*w,m*S,m*A,h*v);break;case"YZY":s.set(m*A,h*w,m*S,h*v);break;case"ZXZ":s.set(m*S,m*A,h*w,h*v);break;case"XZX":s.set(h*w,m*O,m*R,h*v);break;case"YXY":s.set(m*R,h*w,m*O,h*v);break;case"ZYZ":s.set(m*O,m*R,h*w,h*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function Pk(s,e){switch(e.constructor){case Float32Array:return s;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function kk(s,e){switch(e.constructor){case Float32Array:return s;case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}var hn=Object.freeze({__proto__:null,DEG2RAD:Tl,RAD2DEG:Sh,generateUUID:Vi,clamp:sr,euclideanModulo:Qy,mapLinear:xk,inverseLerp:_k,lerp:Mh,damp:wk,pingpong:bk,smoothstep:Sk,smootherstep:Mk,randInt:Tk,randFloat:Ek,randFloatSpread:Ak,seededRandom:Ck,degToRad:Rk,radToDeg:Lk,isPowerOfTwo:Zy,ceilPowerOfTwo:oT,floorPowerOfTwo:pm,setQuaternionFromProperEuler:Ik,normalize:kk,denormalize:Pk});class je{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),l=this.x-e.x,u=this.y-e.y;return this.x=l*r-u*o+e.x,this.y=l*o+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}je.prototype.isVector2=!0;class yn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,u,h,m,v){const w=this.elements;return w[0]=e,w[1]=o,w[2]=h,w[3]=t,w[4]=l,w[5]=m,w[6]=r,w[7]=u,w[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,u=r[0],h=r[3],m=r[6],v=r[1],w=r[4],S=r[7],A=r[2],R=r[5],O=r[8],N=o[0],k=o[3],D=o[6],P=o[1],F=o[4],L=o[7],z=o[2],H=o[5],X=o[8];return l[0]=u*N+h*P+m*z,l[3]=u*k+h*F+m*H,l[6]=u*D+h*L+m*X,l[1]=v*N+w*P+S*z,l[4]=v*k+w*F+S*H,l[7]=v*D+w*L+S*X,l[2]=A*N+R*P+O*z,l[5]=A*k+R*F+O*H,l[8]=A*D+R*L+O*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],u=e[4],h=e[5],m=e[6],v=e[7],w=e[8];return t*u*w-t*h*v-r*l*w+r*h*m+o*l*v-o*u*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],u=e[4],h=e[5],m=e[6],v=e[7],w=e[8],S=w*u-h*v,A=h*m-w*l,R=v*l-u*m,O=t*S+r*A+o*R;if(O===0)return this.set(0,0,0,0,0,0,0,0,0);const N=1/O;return e[0]=S*N,e[1]=(o*v-w*r)*N,e[2]=(h*r-o*u)*N,e[3]=A*N,e[4]=(w*t-o*m)*N,e[5]=(o*l-h*t)*N,e[6]=R*N,e[7]=(r*m-v*t)*N,e[8]=(u*t-r*l)*N,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,l,u,h){const m=Math.cos(l),v=Math.sin(l);return this.set(r*m,r*v,-r*(m*u+v*h)+u+e,-o*v,o*m,-o*(-v*u+m*h)+h+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,l=o[0],u=o[3],h=o[6],m=o[1],v=o[4],w=o[7];return o[0]=t*l+r*m,o[3]=t*u+r*v,o[6]=t*h+r*w,o[1]=-r*l+t*m,o[4]=-r*u+t*v,o[7]=-r*h+t*w,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}yn.prototype.isMatrix3=!0;function aT(s){for(let e=s.length-1;e>=0;--e)if(s[e]>65535)return!0;return!1}const Dk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ec(s,e){return new Dk[s](e)}function Th(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function El(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function mm(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}const Jy={[$s]:{[oa]:El},[oa]:{[$s]:mm}},ts={legacyMode:!0,get workingColorSpace(){return oa},set workingColorSpace(s){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(s,e,t){if(this.legacyMode||e===t||!e||!t)return s;if(Jy[e]&&Jy[e][t]!==void 0){const r=Jy[e][t];return s.r=r(s.r),s.g=r(s.g),s.b=r(s.b),s}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(s,e){return this.convert(s,this.workingColorSpace,e)},toWorkingColorSpace:function(s,e){return this.convert(s,e,this.workingColorSpace)}},lT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mr={r:0,g:0,b:0},Ss={h:0,s:0,l:0},gm={h:0,s:0,l:0};function ex(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*6*(2/3-t):s}function vm(s,e){return e.r=s.r,e.g=s.g,e.b=s.b,e}class Qe{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$s){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ts.toWorkingColorSpace(this,t),this}setRGB(e,t,r,o=oa){return this.r=e,this.g=t,this.b=r,ts.toWorkingColorSpace(this,o),this}setHSL(e,t,r,o=oa){if(e=Qy(e,1),t=sr(t,0,1),r=sr(r,0,1),t===0)this.r=this.g=this.b=r;else{const l=r<=.5?r*(1+t):r+t-r*t,u=2*r-l;this.r=ex(u,l,e+1/3),this.g=ex(u,l,e),this.b=ex(u,l,e-1/3)}return ts.toWorkingColorSpace(this,o),this}setStyle(e,t=$s){function r(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let l;const u=o[1],h=o[2];switch(u){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,ts.toWorkingColorSpace(this,t),r(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,ts.toWorkingColorSpace(this,t),r(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h)){const m=parseFloat(l[1])/360,v=parseInt(l[2],10)/100,w=parseInt(l[3],10)/100;return r(l[4]),this.setHSL(m,v,w,t)}break}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=o[1],u=l.length;if(u===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,ts.toWorkingColorSpace(this,t),this;if(u===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,ts.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=$s){const r=lT[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=El(e.r),this.g=El(e.g),this.b=El(e.b),this}copyLinearToSRGB(e){return this.r=mm(e.r),this.g=mm(e.g),this.b=mm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$s){return ts.fromWorkingColorSpace(vm(this,Mr),e),sr(Mr.r*255,0,255)<<16^sr(Mr.g*255,0,255)<<8^sr(Mr.b*255,0,255)<<0}getHexString(e=$s){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=oa){ts.fromWorkingColorSpace(vm(this,Mr),t);const r=Mr.r,o=Mr.g,l=Mr.b,u=Math.max(r,o,l),h=Math.min(r,o,l);let m,v;const w=(h+u)/2;if(h===u)m=0,v=0;else{const S=u-h;switch(v=w<=.5?S/(u+h):S/(2-u-h),u){case r:m=(o-l)/S+(o<l?6:0);break;case o:m=(l-r)/S+2;break;case l:m=(r-o)/S+4;break}m/=6}return e.h=m,e.s=v,e.l=w,e}getRGB(e,t=oa){return ts.fromWorkingColorSpace(vm(this,Mr),t),e.r=Mr.r,e.g=Mr.g,e.b=Mr.b,e}getStyle(e=$s){return ts.fromWorkingColorSpace(vm(this,Mr),e),e!==$s?`color(${e} ${Mr.r} ${Mr.g} ${Mr.b})`:`rgb(${Mr.r*255|0},${Mr.g*255|0},${Mr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Ss),Ss.h+=e,Ss.s+=t,Ss.l+=r,this.setHSL(Ss.h,Ss.s,Ss.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ss),e.getHSL(gm);const r=Mh(Ss.h,gm.h,t),o=Mh(Ss.s,gm.s,t),l=Mh(Ss.l,gm.l,t);return this.setHSL(r,o,l),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Qe.NAMES=lT;Qe.prototype.isColor=!0;Qe.prototype.r=1;Qe.prototype.g=1;Qe.prototype.b=1;let tc;class la{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{tc===void 0&&(tc=Th("canvas")),tc.width=e.width,tc.height=e.height;const r=tc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=tc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=Th("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),l=o.data;for(let u=0;u<l.length;u++)l[u]=El(l[u]/255)*255;return r.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(El(t[r]/255)*255):t[r]=El(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ua{constructor(e=null){this.uuid=Vi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let l;if(Array.isArray(o)){l=[];for(let u=0,h=o.length;u<h;u++)o[u].isDataTexture?l.push(tx(o[u].image)):l.push(tx(o[u]))}else l=tx(o);r.url=l}return t||(e.images[this.uuid]=r),r}}function tx(s){return typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap?la.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ua.prototype.isSource=!0;let Ok=0;class Un extends aa{constructor(e=Un.DEFAULT_IMAGE,t=Un.DEFAULT_MAPPING,r=Lr,o=Lr,l=jn,u=vo,h=Ti,m=yo,v=1,w=Gi){super();Object.defineProperty(this,"id",{value:Ok++}),this.uuid=Vi(),this.name="",this.source=new ua(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=l,this.minFilter=u,this.anisotropy=v,this.format=h,this.internalFormat=null,this.type=m,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=w,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==im)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ws:e.x=e.x-Math.floor(e.x);break;case Lr:e.x=e.x<0?0:1;break;case Yu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ws:e.y=e.y-Math.floor(e.y);break;case Lr:e.y=e.y<0?0:1;break;case Yu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Un.DEFAULT_IMAGE=null;Un.DEFAULT_MAPPING=im;Un.prototype.isTexture=!0;class ln{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=this.w,u=e.elements;return this.x=u[0]*t+u[4]*r+u[8]*o+u[12]*l,this.y=u[1]*t+u[5]*r+u[9]*o+u[13]*l,this.z=u[2]*t+u[6]*r+u[10]*o+u[14]*l,this.w=u[3]*t+u[7]*r+u[11]*o+u[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,l;const u=.01,h=.1,m=e.elements,v=m[0],w=m[4],S=m[8],A=m[1],R=m[5],O=m[9],N=m[2],k=m[6],D=m[10];if(Math.abs(w-A)<u&&Math.abs(S-N)<u&&Math.abs(O-k)<u){if(Math.abs(w+A)<h&&Math.abs(S+N)<h&&Math.abs(O+k)<h&&Math.abs(v+R+D-3)<h)return this.set(1,0,0,0),this;t=Math.PI;const F=(v+1)/2,L=(R+1)/2,z=(D+1)/2,H=(w+A)/4,X=(S+N)/4,$=(O+k)/4;return F>L&&F>z?F<u?(r=0,o=.707106781,l=.707106781):(r=Math.sqrt(F),o=H/r,l=X/r):L>z?L<u?(r=.707106781,o=0,l=.707106781):(o=Math.sqrt(L),r=H/o,l=$/o):z<u?(r=.707106781,o=.707106781,l=0):(l=Math.sqrt(z),r=X/l,o=$/l),this.set(r,o,l,t),this}let P=Math.sqrt((k-O)*(k-O)+(S-N)*(S-N)+(A-w)*(A-w));return Math.abs(P)<.001&&(P=1),this.x=(k-O)/P,this.y=(S-N)/P,this.z=(A-w)/P,this.w=Math.acos((v+R+D-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ln.prototype.isVector4=!0;class ci extends aa{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new ln(0,0,e,t),this.scissorTest=!1,this.viewport=new ln(0,0,e,t);const o={width:e,height:t,depth:1};this.texture=new Un(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:jn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ua(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}ci.prototype.isWebGLRenderTarget=!0;class nc extends Un{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=ir,this.minFilter=ir,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}nc.prototype.isDataArrayTexture=!0;class uT extends ci{constructor(e,t,r){super(e,t);this.depth=r,this.texture=new nc(null,e,t,r),this.texture.isRenderTargetTexture=!0}}uT.prototype.isWebGLArrayRenderTarget=!0;class Eh extends Un{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=ir,this.minFilter=ir,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Eh.prototype.isData3DTexture=!0;class cT extends ci{constructor(e,t,r){super(e,t);this.depth=r,this.texture=new Eh(null,e,t,r),this.texture.isRenderTargetTexture=!0}}cT.prototype.isWebGL3DRenderTarget=!0;class fT extends ci{constructor(e,t,r,o={}){super(e,t,o);const l=this.texture;this.texture=[];for(let u=0;u<r;u++)this.texture[u]=l.clone(),this.texture[u].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,l=this.texture.length;o<l;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}fT.prototype.isWebGLMultipleRenderTargets=!0;class Ct{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,l,u,h){let m=r[o+0],v=r[o+1],w=r[o+2],S=r[o+3];const A=l[u+0],R=l[u+1],O=l[u+2],N=l[u+3];if(h===0){e[t+0]=m,e[t+1]=v,e[t+2]=w,e[t+3]=S;return}if(h===1){e[t+0]=A,e[t+1]=R,e[t+2]=O,e[t+3]=N;return}if(S!==N||m!==A||v!==R||w!==O){let k=1-h;const D=m*A+v*R+w*O+S*N,P=D>=0?1:-1,F=1-D*D;if(F>Number.EPSILON){const z=Math.sqrt(F),H=Math.atan2(z,D*P);k=Math.sin(k*H)/z,h=Math.sin(h*H)/z}const L=h*P;if(m=m*k+A*L,v=v*k+R*L,w=w*k+O*L,S=S*k+N*L,k===1-h){const z=1/Math.sqrt(m*m+v*v+w*w+S*S);m*=z,v*=z,w*=z,S*=z}}e[t]=m,e[t+1]=v,e[t+2]=w,e[t+3]=S}static multiplyQuaternionsFlat(e,t,r,o,l,u){const h=r[o],m=r[o+1],v=r[o+2],w=r[o+3],S=l[u],A=l[u+1],R=l[u+2],O=l[u+3];return e[t]=h*O+w*S+m*R-v*A,e[t+1]=m*O+w*A+v*S-h*R,e[t+2]=v*O+w*R+h*A-m*S,e[t+3]=w*O-h*S-m*A-v*R,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,l=e._z,u=e._order,h=Math.cos,m=Math.sin,v=h(r/2),w=h(o/2),S=h(l/2),A=m(r/2),R=m(o/2),O=m(l/2);switch(u){case"XYZ":this._x=A*w*S+v*R*O,this._y=v*R*S-A*w*O,this._z=v*w*O+A*R*S,this._w=v*w*S-A*R*O;break;case"YXZ":this._x=A*w*S+v*R*O,this._y=v*R*S-A*w*O,this._z=v*w*O-A*R*S,this._w=v*w*S+A*R*O;break;case"ZXY":this._x=A*w*S-v*R*O,this._y=v*R*S+A*w*O,this._z=v*w*O+A*R*S,this._w=v*w*S-A*R*O;break;case"ZYX":this._x=A*w*S-v*R*O,this._y=v*R*S+A*w*O,this._z=v*w*O-A*R*S,this._w=v*w*S+A*R*O;break;case"YZX":this._x=A*w*S+v*R*O,this._y=v*R*S+A*w*O,this._z=v*w*O-A*R*S,this._w=v*w*S-A*R*O;break;case"XZY":this._x=A*w*S-v*R*O,this._y=v*R*S-A*w*O,this._z=v*w*O+A*R*S,this._w=v*w*S+A*R*O;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],l=t[8],u=t[1],h=t[5],m=t[9],v=t[2],w=t[6],S=t[10],A=r+h+S;if(A>0){const R=.5/Math.sqrt(A+1);this._w=.25/R,this._x=(w-m)*R,this._y=(l-v)*R,this._z=(u-o)*R}else if(r>h&&r>S){const R=2*Math.sqrt(1+r-h-S);this._w=(w-m)/R,this._x=.25*R,this._y=(o+u)/R,this._z=(l+v)/R}else if(h>S){const R=2*Math.sqrt(1+h-r-S);this._w=(l-v)/R,this._x=(o+u)/R,this._y=.25*R,this._z=(m+w)/R}else{const R=2*Math.sqrt(1+S-r-h);this._w=(u-o)/R,this._x=(l+v)/R,this._y=(m+w)/R,this._z=.25*R}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(sr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,l=e._z,u=e._w,h=t._x,m=t._y,v=t._z,w=t._w;return this._x=r*w+u*h+o*v-l*m,this._y=o*w+u*m+l*h-r*v,this._z=l*w+u*v+r*m-o*h,this._w=u*w-r*h-o*m-l*v,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,o=this._y,l=this._z,u=this._w;let h=u*e._w+r*e._x+o*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=u,this._x=r,this._y=o,this._z=l,this;const m=1-h*h;if(m<=Number.EPSILON){const R=1-t;return this._w=R*u+t*this._w,this._x=R*r+t*this._x,this._y=R*o+t*this._y,this._z=R*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),w=Math.atan2(v,h),S=Math.sin((1-t)*w)/v,A=Math.sin(t*w)/v;return this._w=u*S+this._w*A,this._x=r*S+this._x*A,this._y=o*S+this._y*A,this._z=l*S+this._z*A,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(l),r*Math.cos(l),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}Ct.prototype.isQuaternion=!0;class le{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(hT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6]*o,this.y=l[1]*t+l[4]*r+l[7]*o,this.z=l[2]*t+l[5]*r+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=e.elements,u=1/(l[3]*t+l[7]*r+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*r+l[8]*o+l[12])*u,this.y=(l[1]*t+l[5]*r+l[9]*o+l[13])*u,this.z=(l[2]*t+l[6]*r+l[10]*o+l[14])*u,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,l=e.x,u=e.y,h=e.z,m=e.w,v=m*t+u*o-h*r,w=m*r+h*t-l*o,S=m*o+l*r-u*t,A=-l*t-u*r-h*o;return this.x=v*m+A*-l+w*-h-S*-u,this.y=w*m+A*-u+S*-l-v*-h,this.z=S*m+A*-h+v*-u-w*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o,this.y=l[1]*t+l[5]*r+l[9]*o,this.z=l[2]*t+l[6]*r+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,l=e.z,u=t.x,h=t.y,m=t.z;return this.x=o*m-l*h,this.y=l*u-r*m,this.z=r*h-o*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return nx.copy(this).projectOnVector(e),this.sub(nx)}reflect(e){return this.sub(nx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}le.prototype.isVector3=!0;const nx=new le,hT=new Ct;class Ei{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,l=-1/0,u=-1/0,h=-1/0;for(let m=0,v=e.length;m<v;m+=3){const w=e[m],S=e[m+1],A=e[m+2];w<t&&(t=w),S<r&&(r=S),A<o&&(o=A),w>l&&(l=w),S>u&&(u=S),A>h&&(h=A)}return this.min.set(t,r,o),this.max.set(l,u,h),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,l=-1/0,u=-1/0,h=-1/0;for(let m=0,v=e.count;m<v;m++){const w=e.getX(m),S=e.getY(m),A=e.getZ(m);w<t&&(t=w),S<r&&(r=S),A<o&&(o=A),w>l&&(l=w),S>u&&(u=S),A>h&&(h=A)}return this.min.set(t,r,o),this.max.set(l,u,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Al.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const l=r.attributes.position;for(let u=0,h=l.count;u<h;u++)Al.fromBufferAttribute(l,u).applyMatrix4(e.matrixWorld),this.expandByPoint(Al)}else r.boundingBox===null&&r.computeBoundingBox(),rx.copy(r.boundingBox),rx.applyMatrix4(e.matrixWorld),this.union(rx);const o=e.children;for(let l=0,u=o.length;l<u;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Al),Al.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ah),ym.subVectors(this.max,Ah),rc.subVectors(e.a,Ah),ic.subVectors(e.b,Ah),sc.subVectors(e.c,Ah),ca.subVectors(ic,rc),fa.subVectors(sc,ic),Cl.subVectors(rc,sc);let t=[0,-ca.z,ca.y,0,-fa.z,fa.y,0,-Cl.z,Cl.y,ca.z,0,-ca.x,fa.z,0,-fa.x,Cl.z,0,-Cl.x,-ca.y,ca.x,0,-fa.y,fa.x,0,-Cl.y,Cl.x,0];return!ix(t,rc,ic,sc,ym)||(t=[1,0,0,0,1,0,0,0,1],!ix(t,rc,ic,sc,ym))?!1:(xm.crossVectors(ca,fa),t=[xm.x,xm.y,xm.z],ix(t,rc,ic,sc,ym))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Al.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Al).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ei.prototype.isBox3=!0;const wo=[new le,new le,new le,new le,new le,new le,new le,new le],Al=new le,rx=new Ei,rc=new le,ic=new le,sc=new le,ca=new le,fa=new le,Cl=new le,Ah=new le,ym=new le,xm=new le,Rl=new le;function ix(s,e,t,r,o){for(let l=0,u=s.length-3;l<=u;l+=3){Rl.fromArray(s,l);const h=o.x*Math.abs(Rl.x)+o.y*Math.abs(Rl.y)+o.z*Math.abs(Rl.z),m=e.dot(Rl),v=t.dot(Rl),w=r.dot(Rl);if(Math.max(-Math.max(m,v,w),Math.min(m,v,w))>h)return!1}return!0}const Nk=new Ei,dT=new le,_m=new le,sx=new le;class bo{constructor(e=new le,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Nk.setFromPoints(e).getCenter(r);let o=0;for(let l=0,u=e.length;l<u;l++)o=Math.max(o,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){sx.subVectors(e,this.center);const t=sx.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=(r-this.radius)*.5;this.center.add(sx.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return this.center.equals(e.center)===!0?_m.set(0,0,1).multiplyScalar(e.radius):_m.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(dT.copy(e.center).add(_m)),this.expandByPoint(dT.copy(e.center).sub(_m)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const So=new le,ox=new le,wm=new le,ha=new le,ax=new le,bm=new le,lx=new le;class da{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,So)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=So.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(So.copy(this.direction).multiplyScalar(t).add(this.origin),So.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){ox.copy(e).add(t).multiplyScalar(.5),wm.copy(t).sub(e).normalize(),ha.copy(this.origin).sub(ox);const l=e.distanceTo(t)*.5,u=-this.direction.dot(wm),h=ha.dot(this.direction),m=-ha.dot(wm),v=ha.lengthSq(),w=Math.abs(1-u*u);let S,A,R,O;if(w>0)if(S=u*m-h,A=u*h-m,O=l*w,S>=0)if(A>=-O)if(A<=O){const N=1/w;S*=N,A*=N,R=S*(S+u*A+2*h)+A*(u*S+A+2*m)+v}else A=l,S=Math.max(0,-(u*A+h)),R=-S*S+A*(A+2*m)+v;else A=-l,S=Math.max(0,-(u*A+h)),R=-S*S+A*(A+2*m)+v;else A<=-O?(S=Math.max(0,-(-u*l+h)),A=S>0?-l:Math.min(Math.max(-l,-m),l),R=-S*S+A*(A+2*m)+v):A<=O?(S=0,A=Math.min(Math.max(-l,-m),l),R=A*(A+2*m)+v):(S=Math.max(0,-(u*l+h)),A=S>0?l:Math.min(Math.max(-l,-m),l),R=-S*S+A*(A+2*m)+v);else A=u>0?-l:l,S=Math.max(0,-(u*A+h)),R=-S*S+A*(A+2*m)+v;return r&&r.copy(this.direction).multiplyScalar(S).add(this.origin),o&&o.copy(wm).multiplyScalar(A).add(ox),R}intersectSphere(e,t){So.subVectors(e.center,this.origin);const r=So.dot(this.direction),o=So.dot(So)-r*r,l=e.radius*e.radius;if(o>l)return null;const u=Math.sqrt(l-o),h=r-u,m=r+u;return h<0&&m<0?null:h<0?this.at(m,t):this.at(h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,l,u,h,m;const v=1/this.direction.x,w=1/this.direction.y,S=1/this.direction.z,A=this.origin;return v>=0?(r=(e.min.x-A.x)*v,o=(e.max.x-A.x)*v):(r=(e.max.x-A.x)*v,o=(e.min.x-A.x)*v),w>=0?(l=(e.min.y-A.y)*w,u=(e.max.y-A.y)*w):(l=(e.max.y-A.y)*w,u=(e.min.y-A.y)*w),r>u||l>o||((l>r||r!==r)&&(r=l),(u<o||o!==o)&&(o=u),S>=0?(h=(e.min.z-A.z)*S,m=(e.max.z-A.z)*S):(h=(e.max.z-A.z)*S,m=(e.min.z-A.z)*S),r>m||h>o)||((h>r||r!==r)&&(r=h),(m<o||o!==o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return this.intersectBox(e,So)!==null}intersectTriangle(e,t,r,o,l){ax.subVectors(t,e),bm.subVectors(r,e),lx.crossVectors(ax,bm);let u=this.direction.dot(lx),h;if(u>0){if(o)return null;h=1}else if(u<0)h=-1,u=-u;else return null;ha.subVectors(this.origin,e);const m=h*this.direction.dot(bm.crossVectors(ha,bm));if(m<0)return null;const v=h*this.direction.dot(ax.cross(ha));if(v<0||m+v>u)return null;const w=-h*ha.dot(lx);return w<0?null:this.at(w/u,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class et{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,u,h,m,v,w,S,A,R,O,N,k){const D=this.elements;return D[0]=e,D[4]=t,D[8]=r,D[12]=o,D[1]=l,D[5]=u,D[9]=h,D[13]=m,D[2]=v,D[6]=w,D[10]=S,D[14]=A,D[3]=R,D[7]=O,D[11]=N,D[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new et().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/oc.setFromMatrixColumn(e,0).length(),l=1/oc.setFromMatrixColumn(e,1).length(),u=1/oc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*l,t[5]=r[5]*l,t[6]=r[6]*l,t[7]=0,t[8]=r[8]*u,t[9]=r[9]*u,t[10]=r[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,l=e.z,u=Math.cos(r),h=Math.sin(r),m=Math.cos(o),v=Math.sin(o),w=Math.cos(l),S=Math.sin(l);if(e.order==="XYZ"){const A=u*w,R=u*S,O=h*w,N=h*S;t[0]=m*w,t[4]=-m*S,t[8]=v,t[1]=R+O*v,t[5]=A-N*v,t[9]=-h*m,t[2]=N-A*v,t[6]=O+R*v,t[10]=u*m}else if(e.order==="YXZ"){const A=m*w,R=m*S,O=v*w,N=v*S;t[0]=A+N*h,t[4]=O*h-R,t[8]=u*v,t[1]=u*S,t[5]=u*w,t[9]=-h,t[2]=R*h-O,t[6]=N+A*h,t[10]=u*m}else if(e.order==="ZXY"){const A=m*w,R=m*S,O=v*w,N=v*S;t[0]=A-N*h,t[4]=-u*S,t[8]=O+R*h,t[1]=R+O*h,t[5]=u*w,t[9]=N-A*h,t[2]=-u*v,t[6]=h,t[10]=u*m}else if(e.order==="ZYX"){const A=u*w,R=u*S,O=h*w,N=h*S;t[0]=m*w,t[4]=O*v-R,t[8]=A*v+N,t[1]=m*S,t[5]=N*v+A,t[9]=R*v-O,t[2]=-v,t[6]=h*m,t[10]=u*m}else if(e.order==="YZX"){const A=u*m,R=u*v,O=h*m,N=h*v;t[0]=m*w,t[4]=N-A*S,t[8]=O*S+R,t[1]=S,t[5]=u*w,t[9]=-h*w,t[2]=-v*w,t[6]=R*S+O,t[10]=A-N*S}else if(e.order==="XZY"){const A=u*m,R=u*v,O=h*m,N=h*v;t[0]=m*w,t[4]=-S,t[8]=v*w,t[1]=A*S+N,t[5]=u*w,t[9]=R*S-O,t[2]=O*S-R,t[6]=h*w,t[10]=N*S+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fk,e,Uk)}lookAt(e,t,r){const o=this.elements;return Wi.subVectors(e,t),Wi.lengthSq()===0&&(Wi.z=1),Wi.normalize(),pa.crossVectors(r,Wi),pa.lengthSq()===0&&(Math.abs(r.z)===1?Wi.x+=1e-4:Wi.z+=1e-4,Wi.normalize(),pa.crossVectors(r,Wi)),pa.normalize(),Sm.crossVectors(Wi,pa),o[0]=pa.x,o[4]=Sm.x,o[8]=Wi.x,o[1]=pa.y,o[5]=Sm.y,o[9]=Wi.y,o[2]=pa.z,o[6]=Sm.z,o[10]=Wi.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,u=r[0],h=r[4],m=r[8],v=r[12],w=r[1],S=r[5],A=r[9],R=r[13],O=r[2],N=r[6],k=r[10],D=r[14],P=r[3],F=r[7],L=r[11],z=r[15],H=o[0],X=o[4],$=o[8],J=o[12],se=o[1],ce=o[5],pe=o[9],fe=o[13],b=o[2],p=o[6],ee=o[10],E=o[14],me=o[3],Se=o[7],Te=o[11],ye=o[15];return l[0]=u*H+h*se+m*b+v*me,l[4]=u*X+h*ce+m*p+v*Se,l[8]=u*$+h*pe+m*ee+v*Te,l[12]=u*J+h*fe+m*E+v*ye,l[1]=w*H+S*se+A*b+R*me,l[5]=w*X+S*ce+A*p+R*Se,l[9]=w*$+S*pe+A*ee+R*Te,l[13]=w*J+S*fe+A*E+R*ye,l[2]=O*H+N*se+k*b+D*me,l[6]=O*X+N*ce+k*p+D*Se,l[10]=O*$+N*pe+k*ee+D*Te,l[14]=O*J+N*fe+k*E+D*ye,l[3]=P*H+F*se+L*b+z*me,l[7]=P*X+F*ce+L*p+z*Se,l[11]=P*$+F*pe+L*ee+z*Te,l[15]=P*J+F*fe+L*E+z*ye,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],l=e[12],u=e[1],h=e[5],m=e[9],v=e[13],w=e[2],S=e[6],A=e[10],R=e[14],O=e[3],N=e[7],k=e[11],D=e[15];return O*(+l*m*S-o*v*S-l*h*A+r*v*A+o*h*R-r*m*R)+N*(+t*m*R-t*v*A+l*u*A-o*u*R+o*v*w-l*m*w)+k*(+t*v*S-t*h*R-l*u*S+r*u*R+l*h*w-r*v*w)+D*(-o*h*w-t*m*S+t*h*A+o*u*S-r*u*A+r*m*w)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],u=e[4],h=e[5],m=e[6],v=e[7],w=e[8],S=e[9],A=e[10],R=e[11],O=e[12],N=e[13],k=e[14],D=e[15],P=S*k*v-N*A*v+N*m*R-h*k*R-S*m*D+h*A*D,F=O*A*v-w*k*v-O*m*R+u*k*R+w*m*D-u*A*D,L=w*N*v-O*S*v+O*h*R-u*N*R-w*h*D+u*S*D,z=O*S*m-w*N*m-O*h*A+u*N*A+w*h*k-u*S*k,H=t*P+r*F+o*L+l*z;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const X=1/H;return e[0]=P*X,e[1]=(N*A*l-S*k*l-N*o*R+r*k*R+S*o*D-r*A*D)*X,e[2]=(h*k*l-N*m*l+N*o*v-r*k*v-h*o*D+r*m*D)*X,e[3]=(S*m*l-h*A*l-S*o*v+r*A*v+h*o*R-r*m*R)*X,e[4]=F*X,e[5]=(w*k*l-O*A*l+O*o*R-t*k*R-w*o*D+t*A*D)*X,e[6]=(O*m*l-u*k*l-O*o*v+t*k*v+u*o*D-t*m*D)*X,e[7]=(u*A*l-w*m*l+w*o*v-t*A*v-u*o*R+t*m*R)*X,e[8]=L*X,e[9]=(O*S*l-w*N*l-O*r*R+t*N*R+w*r*D-t*S*D)*X,e[10]=(u*N*l-O*h*l+O*r*v-t*N*v-u*r*D+t*h*D)*X,e[11]=(w*h*l-u*S*l-w*r*v+t*S*v+u*r*R-t*h*R)*X,e[12]=z*X,e[13]=(w*N*o-O*S*o+O*r*A-t*N*A-w*r*k+t*S*k)*X,e[14]=(O*h*o-u*N*o-O*r*m+t*N*m+u*r*k-t*h*k)*X,e[15]=(u*S*o-w*h*o+w*r*m-t*S*m-u*r*A+t*h*A)*X,this}scale(e){const t=this.elements,r=e.x,o=e.y,l=e.z;return t[0]*=r,t[4]*=o,t[8]*=l,t[1]*=r,t[5]*=o,t[9]*=l,t[2]*=r,t[6]*=o,t[10]*=l,t[3]*=r,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,o))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),l=1-r,u=e.x,h=e.y,m=e.z,v=l*u,w=l*h;return this.set(v*u+r,v*h-o*m,v*m+o*h,0,v*h+o*m,w*h+r,w*m-o*u,0,v*m-o*h,w*m+o*u,l*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,l,u){return this.set(1,r,l,0,e,1,u,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,l=t._x,u=t._y,h=t._z,m=t._w,v=l+l,w=u+u,S=h+h,A=l*v,R=l*w,O=l*S,N=u*w,k=u*S,D=h*S,P=m*v,F=m*w,L=m*S,z=r.x,H=r.y,X=r.z;return o[0]=(1-(N+D))*z,o[1]=(R+L)*z,o[2]=(O-F)*z,o[3]=0,o[4]=(R-L)*H,o[5]=(1-(A+D))*H,o[6]=(k+P)*H,o[7]=0,o[8]=(O+F)*X,o[9]=(k-P)*X,o[10]=(1-(A+N))*X,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let l=oc.set(o[0],o[1],o[2]).length();const u=oc.set(o[4],o[5],o[6]).length(),h=oc.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],Ms.copy(this);const v=1/l,w=1/u,S=1/h;return Ms.elements[0]*=v,Ms.elements[1]*=v,Ms.elements[2]*=v,Ms.elements[4]*=w,Ms.elements[5]*=w,Ms.elements[6]*=w,Ms.elements[8]*=S,Ms.elements[9]*=S,Ms.elements[10]*=S,t.setFromRotationMatrix(Ms),r.x=l,r.y=u,r.z=h,this}makePerspective(e,t,r,o,l,u){u===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,m=2*l/(t-e),v=2*l/(r-o),w=(t+e)/(t-e),S=(r+o)/(r-o),A=-(u+l)/(u-l),R=-2*u*l/(u-l);return h[0]=m,h[4]=0,h[8]=w,h[12]=0,h[1]=0,h[5]=v,h[9]=S,h[13]=0,h[2]=0,h[6]=0,h[10]=A,h[14]=R,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,o,l,u){const h=this.elements,m=1/(t-e),v=1/(r-o),w=1/(u-l),S=(t+e)*m,A=(r+o)*v,R=(u+l)*w;return h[0]=2*m,h[4]=0,h[8]=0,h[12]=-S,h[1]=0,h[5]=2*v,h[9]=0,h[13]=-A,h[2]=0,h[6]=0,h[10]=-2*w,h[14]=-R,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}et.prototype.isMatrix4=!0;const oc=new le,Ms=new et,Fk=new le(0,0,0),Uk=new le(1,1,1),pa=new le,Sm=new le,Wi=new le,pT=new et,mT=new Ct;class Gr{constructor(e=0,t=0,r=0,o=Gr.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,l=o[0],u=o[4],h=o[8],m=o[1],v=o[5],w=o[9],S=o[2],A=o[6],R=o[10];switch(t){case"XYZ":this._y=Math.asin(sr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-w,R),this._z=Math.atan2(-u,l)):(this._x=Math.atan2(A,v),this._z=0);break;case"YXZ":this._x=Math.asin(-sr(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(h,R),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-S,l),this._z=0);break;case"ZXY":this._x=Math.asin(sr(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-S,R),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(m,l));break;case"ZYX":this._y=Math.asin(-sr(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(A,R),this._z=Math.atan2(m,l)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(sr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-w,v),this._y=Math.atan2(-S,l)):(this._x=0,this._y=Math.atan2(h,R));break;case"XZY":this._z=Math.asin(-sr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(A,v),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-w,R),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return pT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return mT.setFromEuler(this),this.setFromQuaternion(mT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Gr.prototype.isEuler=!0;Gr.DefaultOrder="XYZ";Gr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Mm{constructor(){this.mask=1|0}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let Bk=0;const gT=new le,ac=new Ct,Mo=new et,Tm=new le,Ch=new le,zk=new le,Hk=new Ct,vT=new le(1,0,0),yT=new le(0,1,0),xT=new le(0,0,1),Gk={type:"added"},_T={type:"removed"};class Ht extends aa{constructor(){super();Object.defineProperty(this,"id",{value:Bk++}),this.uuid=Vi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ht.DefaultUp.clone();const e=new le,t=new Gr,r=new Ct,o=new le(1,1,1);function l(){r.setFromEuler(t,!1)}function u(){t.setFromQuaternion(r,void 0,!1)}t._onChange(l),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new et},normalMatrix:{value:new yn}}),this.matrix=new et,this.matrixWorld=new et,this.matrixAutoUpdate=Ht.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Mm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.multiply(ac),this}rotateOnWorldAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.premultiply(ac),this}rotateX(e){return this.rotateOnAxis(vT,e)}rotateY(e){return this.rotateOnAxis(yT,e)}rotateZ(e){return this.rotateOnAxis(xT,e)}translateOnAxis(e,t){return gT.copy(e).applyQuaternion(this.quaternion),this.position.add(gT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(vT,e)}translateY(e){return this.translateOnAxis(yT,e)}translateZ(e){return this.translateOnAxis(xT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Mo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Tm.copy(e):Tm.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),Ch.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mo.lookAt(Ch,Tm,this.up):Mo.lookAt(Tm,Ch,this.up),this.quaternion.setFromRotationMatrix(Mo),o&&(Mo.extractRotation(o.matrixWorld),ac.setFromRotationMatrix(Mo),this.quaternion.premultiply(ac.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Gk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_T)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(_T)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Mo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Mo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const u=this.children[r].getObjectByProperty(e,t);if(u!==void 0)return u}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ch,e,zk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ch,Hk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let l=0,u=o.length;l<u;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function l(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let v=0,w=m.length;v<w;v++){const S=m[v];l(e.shapes,S)}else l(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,v=this.material.length;m<v;m++)h.push(l(e.materials,this.material[m]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];o.animations.push(l(e.animations,m))}}if(t){const h=u(e.geometries),m=u(e.materials),v=u(e.textures),w=u(e.images),S=u(e.shapes),A=u(e.skeletons),R=u(e.animations),O=u(e.nodes);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),w.length>0&&(r.images=w),S.length>0&&(r.shapes=S),A.length>0&&(r.skeletons=A),R.length>0&&(r.animations=R),O.length>0&&(r.nodes=O)}return r.object=o,r;function u(h){const m=[];for(const v in h){const w=h[v];delete w.metadata,m.push(w)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Ht.DefaultUp=new le(0,1,0);Ht.DefaultMatrixAutoUpdate=!0;Ht.prototype.isObject3D=!0;const Ts=new le,To=new le,ux=new le,Eo=new le,lc=new le,uc=new le,wT=new le,cx=new le,fx=new le,hx=new le;class or{constructor(e=new le,t=new le,r=new le){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),Ts.subVectors(e,t),o.cross(Ts);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,r,o,l){Ts.subVectors(o,t),To.subVectors(r,t),ux.subVectors(e,t);const u=Ts.dot(Ts),h=Ts.dot(To),m=Ts.dot(ux),v=To.dot(To),w=To.dot(ux),S=u*v-h*h;if(S===0)return l.set(-2,-1,-1);const A=1/S,R=(v*m-h*w)*A,O=(u*w-h*m)*A;return l.set(1-R-O,O,R)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,Eo),Eo.x>=0&&Eo.y>=0&&Eo.x+Eo.y<=1}static getUV(e,t,r,o,l,u,h,m){return this.getBarycoord(e,t,r,o,Eo),m.set(0,0),m.addScaledVector(l,Eo.x),m.addScaledVector(u,Eo.y),m.addScaledVector(h,Eo.z),m}static isFrontFacing(e,t,r,o){return Ts.subVectors(r,t),To.subVectors(e,t),Ts.cross(To).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),To.subVectors(this.a,this.b),Ts.cross(To).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return or.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return or.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,l){return or.getUV(e,this.a,this.b,this.c,t,r,o,l)}containsPoint(e){return or.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return or.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,l=this.c;let u,h;lc.subVectors(o,r),uc.subVectors(l,r),cx.subVectors(e,r);const m=lc.dot(cx),v=uc.dot(cx);if(m<=0&&v<=0)return t.copy(r);fx.subVectors(e,o);const w=lc.dot(fx),S=uc.dot(fx);if(w>=0&&S<=w)return t.copy(o);const A=m*S-w*v;if(A<=0&&m>=0&&w<=0)return u=m/(m-w),t.copy(r).addScaledVector(lc,u);hx.subVectors(e,l);const R=lc.dot(hx),O=uc.dot(hx);if(O>=0&&R<=O)return t.copy(l);const N=R*v-m*O;if(N<=0&&v>=0&&O<=0)return h=v/(v-O),t.copy(r).addScaledVector(uc,h);const k=w*O-R*S;if(k<=0&&S-w>=0&&R-O>=0)return wT.subVectors(l,o),h=(S-w)/(S-w+(R-O)),t.copy(o).addScaledVector(wT,h);const D=1/(k+N+A);return u=N*D,h=A*D,t.copy(r).addScaledVector(lc,u).addScaledVector(uc,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Vk=0;class Bn extends aa{constructor(){super();Object.defineProperty(this,"id",{value:Vk++}),this.uuid=Vi(),this.name="",this.type="Material",this.blending=vl,this.side=na,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ty,this.blendDst=Ey,this.blendEquation=yl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=rm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hm,this.stencilZFail=hm,this.stencilZPass=hm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===xy;continue}const o=this[t];if(o===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==vl&&(r.blending=this.blending),this.side!==na&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function o(l){const u=[];for(const h in l){const m=l[h];delete m.metadata,u.push(m)}return u}if(t){const l=o(e.textures),u=o(e.images);l.length>0&&(r.textures=l),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const o=t.length;r=new Array(o);for(let l=0;l!==o;++l)r[l]=t[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Bn.prototype.isMaterial=!0;Bn.fromType=function(){return null};class Ir extends Bn{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}Ir.prototype.isMeshBasicMaterial=!0;const pr=new le,Em=new je;class Dt{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=Ju,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let u=e[o];u===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),u=new Qe),t[r++]=u.r,t[r++]=u.g,t[r++]=u.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let u=e[o];u===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),u=new je),t[r++]=u.x,t[r++]=u.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let u=e[o];u===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),u=new le),t[r++]=u.x,t[r++]=u.y,t[r++]=u.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let u=e[o];u===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),u=new ln),t[r++]=u.x,t[r++]=u.y,t[r++]=u.z,t[r++]=u.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Em.fromBufferAttribute(this,t),Em.applyMatrix3(e),this.setXY(t,Em.x,Em.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix3(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix4(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)pr.fromBufferAttribute(this,t),pr.applyNormalMatrix(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)pr.fromBufferAttribute(this,t),pr.transformDirection(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ju&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Dt.prototype.isBufferAttribute=!0;class bT extends Dt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class ST extends Dt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class MT extends Dt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class TT extends Dt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Rh extends Dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ET extends Dt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class Am extends Dt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class AT extends Dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}AT.prototype.isFloat16BufferAttribute=!0;class mt extends Dt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class CT extends Dt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Wk=0;const ns=new et,dx=new Ht,cc=new le,$i=new Ei,Lh=new Ei,Pr=new le;class xt extends aa{constructor(){super();Object.defineProperty(this,"id",{value:Wk++}),this.uuid=Vi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(aT(e)?Am:Rh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const l=new yn().getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ns.makeRotationFromQuaternion(e),this.applyMatrix4(ns),this}rotateX(e){return ns.makeRotationX(e),this.applyMatrix4(ns),this}rotateY(e){return ns.makeRotationY(e),this.applyMatrix4(ns),this}rotateZ(e){return ns.makeRotationZ(e),this.applyMatrix4(ns),this}translate(e,t,r){return ns.makeTranslation(e,t,r),this.applyMatrix4(ns),this}scale(e,t,r){return ns.makeScale(e,t,r),this.applyMatrix4(ns),this}lookAt(e){return dx.lookAt(e),dx.updateMatrix(),this.applyMatrix4(dx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cc).negate(),this.translate(cc.x,cc.y,cc.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const l=e[r];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new mt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ei);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const l=t[r];$i.setFromBufferAttribute(l),this.morphTargetsRelative?(Pr.addVectors(this.boundingBox.min,$i.min),this.boundingBox.expandByPoint(Pr),Pr.addVectors(this.boundingBox.max,$i.max),this.boundingBox.expandByPoint(Pr)):(this.boundingBox.expandByPoint($i.min),this.boundingBox.expandByPoint($i.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const r=this.boundingSphere.center;if($i.setFromBufferAttribute(e),t)for(let l=0,u=t.length;l<u;l++){const h=t[l];Lh.setFromBufferAttribute(h),this.morphTargetsRelative?(Pr.addVectors($i.min,Lh.min),$i.expandByPoint(Pr),Pr.addVectors($i.max,Lh.max),$i.expandByPoint(Pr)):($i.expandByPoint(Lh.min),$i.expandByPoint(Lh.max))}$i.getCenter(r);let o=0;for(let l=0,u=e.count;l<u;l++)Pr.fromBufferAttribute(e,l),o=Math.max(o,r.distanceToSquared(Pr));if(t)for(let l=0,u=t.length;l<u;l++){const h=t[l],m=this.morphTargetsRelative;for(let v=0,w=h.count;v<w;v++)Pr.fromBufferAttribute(h,v),m&&(cc.fromBufferAttribute(e,v),Pr.add(cc)),o=Math.max(o,r.distanceToSquared(Pr))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=t.position.array,l=t.normal.array,u=t.uv.array,h=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dt(new Float32Array(4*h),4));const m=this.getAttribute("tangent").array,v=[],w=[];for(let se=0;se<h;se++)v[se]=new le,w[se]=new le;const S=new le,A=new le,R=new le,O=new je,N=new je,k=new je,D=new le,P=new le;function F(se,ce,pe){S.fromArray(o,se*3),A.fromArray(o,ce*3),R.fromArray(o,pe*3),O.fromArray(u,se*2),N.fromArray(u,ce*2),k.fromArray(u,pe*2),A.sub(S),R.sub(S),N.sub(O),k.sub(O);const fe=1/(N.x*k.y-k.x*N.y);!isFinite(fe)||(D.copy(A).multiplyScalar(k.y).addScaledVector(R,-N.y).multiplyScalar(fe),P.copy(R).multiplyScalar(N.x).addScaledVector(A,-k.x).multiplyScalar(fe),v[se].add(D),v[ce].add(D),v[pe].add(D),w[se].add(P),w[ce].add(P),w[pe].add(P))}let L=this.groups;L.length===0&&(L=[{start:0,count:r.length}]);for(let se=0,ce=L.length;se<ce;++se){const pe=L[se],fe=pe.start,b=pe.count;for(let p=fe,ee=fe+b;p<ee;p+=3)F(r[p+0],r[p+1],r[p+2])}const z=new le,H=new le,X=new le,$=new le;function J(se){X.fromArray(l,se*3),$.copy(X);const ce=v[se];z.copy(ce),z.sub(X.multiplyScalar(X.dot(ce))).normalize(),H.crossVectors($,ce);const fe=H.dot(w[se])<0?-1:1;m[se*4]=z.x,m[se*4+1]=z.y,m[se*4+2]=z.z,m[se*4+3]=fe}for(let se=0,ce=L.length;se<ce;++se){const pe=L[se],fe=pe.start,b=pe.count;for(let p=fe,ee=fe+b;p<ee;p+=3)J(r[p+0]),J(r[p+1]),J(r[p+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Dt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let A=0,R=r.count;A<R;A++)r.setXYZ(A,0,0,0);const o=new le,l=new le,u=new le,h=new le,m=new le,v=new le,w=new le,S=new le;if(e)for(let A=0,R=e.count;A<R;A+=3){const O=e.getX(A+0),N=e.getX(A+1),k=e.getX(A+2);o.fromBufferAttribute(t,O),l.fromBufferAttribute(t,N),u.fromBufferAttribute(t,k),w.subVectors(u,l),S.subVectors(o,l),w.cross(S),h.fromBufferAttribute(r,O),m.fromBufferAttribute(r,N),v.fromBufferAttribute(r,k),h.add(w),m.add(w),v.add(w),r.setXYZ(O,h.x,h.y,h.z),r.setXYZ(N,m.x,m.y,m.z),r.setXYZ(k,v.x,v.y,v.z)}else for(let A=0,R=t.count;A<R;A+=3)o.fromBufferAttribute(t,A+0),l.fromBufferAttribute(t,A+1),u.fromBufferAttribute(t,A+2),w.subVectors(u,l),S.subVectors(o,l),w.cross(S),r.setXYZ(A+0,w.x,w.y,w.z),r.setXYZ(A+1,w.x,w.y,w.z),r.setXYZ(A+2,w.x,w.y,w.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(e.attributes[o]===void 0)continue;const u=r[o].array,h=e.attributes[o],m=h.array,v=h.itemSize*t,w=Math.min(m.length,u.length-v);for(let S=0,A=v;S<w;S++,A++)u[A]=m[S]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Pr.fromBufferAttribute(e,t),Pr.normalize(),e.setXYZ(t,Pr.x,Pr.y,Pr.z)}toNonIndexed(){function e(h,m){const v=h.array,w=h.itemSize,S=h.normalized,A=new v.constructor(m.length*w);let R=0,O=0;for(let N=0,k=m.length;N<k;N++){h.isInterleavedBufferAttribute?R=m[N]*h.data.stride+h.offset:R=m[N]*w;for(let D=0;D<w;D++)A[O++]=v[R++]}return new Dt(A,w,S)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xt,r=this.index.array,o=this.attributes;for(const h in o){const m=o[h],v=e(m,r);t.setAttribute(h,v)}const l=this.morphAttributes;for(const h in l){const m=[],v=l[h];for(let w=0,S=v.length;w<S;w++){const A=v[w],R=e(A,r);m.push(R)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,m=u.length;h<m;h++){const v=u[h];t.addGroup(v.start,v.count,v.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const v in m)m[v]!==void 0&&(e[v]=m[v]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r){const v=r[m];e.data.attributes[m]=v.toJSON(e.data)}const o={};let l=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],w=[];for(let S=0,A=v.length;S<A;S++){const R=v[S];w.push(R.toJSON(e.data))}w.length>0&&(o[m]=w,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const o=e.attributes;for(const v in o){const w=o[v];this.setAttribute(v,w.clone(t))}const l=e.morphAttributes;for(const v in l){const w=[],S=l[v];for(let A=0,R=S.length;A<R;A++)w.push(S[A].clone(t));this.morphAttributes[v]=w}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let v=0,w=u.length;v<w;v++){const S=u[v];this.addGroup(S.start,S.count,S.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}xt.prototype.isBufferGeometry=!0;const RT=new et,fc=new da,px=new bo,ma=new le,ga=new le,va=new le,mx=new le,gx=new le,vx=new le,Cm=new le,Rm=new le,Lm=new le,Im=new je,Pm=new je,km=new je,yx=new le,Dm=new le;class ot extends Ht{constructor(e=new xt,t=new Ir){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=o.length;l<u;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,l=this.matrixWorld;if(o===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),px.copy(r.boundingSphere),px.applyMatrix4(l),e.ray.intersectsSphere(px)===!1)||(RT.copy(l).invert(),fc.copy(e.ray).applyMatrix4(RT),r.boundingBox!==null&&fc.intersectsBox(r.boundingBox)===!1))return;let u;if(r.isBufferGeometry){const h=r.index,m=r.attributes.position,v=r.morphAttributes.position,w=r.morphTargetsRelative,S=r.attributes.uv,A=r.attributes.uv2,R=r.groups,O=r.drawRange;if(h!==null)if(Array.isArray(o))for(let N=0,k=R.length;N<k;N++){const D=R[N],P=o[D.materialIndex],F=Math.max(D.start,O.start),L=Math.min(h.count,Math.min(D.start+D.count,O.start+O.count));for(let z=F,H=L;z<H;z+=3){const X=h.getX(z),$=h.getX(z+1),J=h.getX(z+2);u=Om(this,P,e,fc,m,v,w,S,A,X,$,J),u&&(u.faceIndex=Math.floor(z/3),u.face.materialIndex=D.materialIndex,t.push(u))}}else{const N=Math.max(0,O.start),k=Math.min(h.count,O.start+O.count);for(let D=N,P=k;D<P;D+=3){const F=h.getX(D),L=h.getX(D+1),z=h.getX(D+2);u=Om(this,o,e,fc,m,v,w,S,A,F,L,z),u&&(u.faceIndex=Math.floor(D/3),t.push(u))}}else if(m!==void 0)if(Array.isArray(o))for(let N=0,k=R.length;N<k;N++){const D=R[N],P=o[D.materialIndex],F=Math.max(D.start,O.start),L=Math.min(m.count,Math.min(D.start+D.count,O.start+O.count));for(let z=F,H=L;z<H;z+=3){const X=z,$=z+1,J=z+2;u=Om(this,P,e,fc,m,v,w,S,A,X,$,J),u&&(u.faceIndex=Math.floor(z/3),u.face.materialIndex=D.materialIndex,t.push(u))}}else{const N=Math.max(0,O.start),k=Math.min(m.count,O.start+O.count);for(let D=N,P=k;D<P;D+=3){const F=D,L=D+1,z=D+2;u=Om(this,o,e,fc,m,v,w,S,A,F,L,z),u&&(u.faceIndex=Math.floor(D/3),t.push(u))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}ot.prototype.isMesh=!0;function $k(s,e,t,r,o,l,u,h){let m;if(e.side===Mi?m=r.intersectTriangle(u,l,o,!0,h):m=r.intersectTriangle(o,l,u,e.side!==bs,h),m===null)return null;Dm.copy(h),Dm.applyMatrix4(s.matrixWorld);const v=t.ray.origin.distanceTo(Dm);return v<t.near||v>t.far?null:{distance:v,point:Dm.clone(),object:s}}function Om(s,e,t,r,o,l,u,h,m,v,w,S){ma.fromBufferAttribute(o,v),ga.fromBufferAttribute(o,w),va.fromBufferAttribute(o,S);const A=s.morphTargetInfluences;if(l&&A){Cm.set(0,0,0),Rm.set(0,0,0),Lm.set(0,0,0);for(let O=0,N=l.length;O<N;O++){const k=A[O],D=l[O];k!==0&&(mx.fromBufferAttribute(D,v),gx.fromBufferAttribute(D,w),vx.fromBufferAttribute(D,S),u?(Cm.addScaledVector(mx,k),Rm.addScaledVector(gx,k),Lm.addScaledVector(vx,k)):(Cm.addScaledVector(mx.sub(ma),k),Rm.addScaledVector(gx.sub(ga),k),Lm.addScaledVector(vx.sub(va),k)))}ma.add(Cm),ga.add(Rm),va.add(Lm)}s.isSkinnedMesh&&(s.boneTransform(v,ma),s.boneTransform(w,ga),s.boneTransform(S,va));const R=$k(s,e,t,r,ma,ga,va,yx);if(R){h&&(Im.fromBufferAttribute(h,v),Pm.fromBufferAttribute(h,w),km.fromBufferAttribute(h,S),R.uv=or.getUV(yx,ma,ga,va,Im,Pm,km,new je)),m&&(Im.fromBufferAttribute(m,v),Pm.fromBufferAttribute(m,w),km.fromBufferAttribute(m,S),R.uv2=or.getUV(yx,ma,ga,va,Im,Pm,km,new je));const O={a:v,b:w,c:S,normal:new le,materialIndex:0};or.getNormal(ma,ga,va,O.normal),R.face=O}return R}class zn extends xt{constructor(e=1,t=1,r=1,o=1,l=1,u=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:l,depthSegments:u};const h=this;o=Math.floor(o),l=Math.floor(l),u=Math.floor(u);const m=[],v=[],w=[],S=[];let A=0,R=0;O("z","y","x",-1,-1,r,t,e,u,l,0),O("z","y","x",1,-1,r,t,-e,u,l,1),O("x","z","y",1,1,e,r,t,o,u,2),O("x","z","y",1,-1,e,r,-t,o,u,3),O("x","y","z",1,-1,e,t,r,o,l,4),O("x","y","z",-1,-1,e,t,-r,o,l,5),this.setIndex(m),this.setAttribute("position",new mt(v,3)),this.setAttribute("normal",new mt(w,3)),this.setAttribute("uv",new mt(S,2));function O(N,k,D,P,F,L,z,H,X,$,J){const se=L/X,ce=z/$,pe=L/2,fe=z/2,b=H/2,p=X+1,ee=$+1;let E=0,me=0;const Se=new le;for(let Te=0;Te<ee;Te++){const ye=Te*ce-fe;for(let de=0;de<p;de++){const Re=de*se-pe;Se[N]=Re*P,Se[k]=ye*F,Se[D]=b,v.push(Se.x,Se.y,Se.z),Se[N]=0,Se[k]=0,Se[D]=H>0?1:-1,w.push(Se.x,Se.y,Se.z),S.push(de/X),S.push(1-Te/$),E+=1}}for(let Te=0;Te<$;Te++)for(let ye=0;ye<X;ye++){const de=A+ye+p*Te,Re=A+ye+p*(Te+1),we=A+(ye+1)+p*(Te+1),Ie=A+(ye+1)+p*Te;m.push(de,Re,Ie),m.push(Re,we,Ie),me+=6}h.addGroup(R,me,J),R+=me,A+=E}}static fromJSON(e){return new zn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hc(s){const e={};for(const t in s){e[t]={};for(const r in s[t]){const o=s[t][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?e[t][r]=o.clone():Array.isArray(o)?e[t][r]=o.slice():e[t][r]=o}}return e}function Zr(s){const e={};for(let t=0;t<s.length;t++){const r=hc(s[t]);for(const o in r)e[o]=r[o]}return e}const xx={clone:hc,merge:Zr};var jk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,qk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ji extends Bn{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=jk,this.fragmentShader=qk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const u=this.uniforms[o].value;u&&u.isTexture?t.uniforms[o]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[o]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[o]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[o]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[o]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[o]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[o]={type:"m4",value:u.toArray()}:t.uniforms[o]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}ji.prototype.isShaderMaterial=!0;class Ih extends Ht{constructor(){super();this.type="Camera",this.matrixWorldInverse=new et,this.projectionMatrix=new et,this.projectionMatrixInverse=new et}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Ih.prototype.isCamera=!0;class mr extends Ih{constructor(e=50,t=1,r=.1,o=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sh*2*Math.atan(Math.tan(Tl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,l,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tl*.5*this.fov)/this.zoom,r=2*t,o=this.aspect*r,l=-.5*o;const u=this.view;if(this.view!==null&&this.view.enabled){const m=u.fullWidth,v=u.fullHeight;l+=u.offsetX*o/m,t-=u.offsetY*r/v,o*=u.width/m,r*=u.height/v}const h=this.filmOffset;h!==0&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}mr.prototype.isPerspectiveCamera=!0;const dc=90,pc=1;class Nm extends Ht{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const o=new mr(dc,pc,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new le(1,0,0)),this.add(o);const l=new mr(dc,pc,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new le(-1,0,0)),this.add(l);const u=new mr(dc,pc,e,t);u.layers=this.layers,u.up.set(0,0,1),u.lookAt(new le(0,1,0)),this.add(u);const h=new mr(dc,pc,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new le(0,-1,0)),this.add(h);const m=new mr(dc,pc,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new le(0,0,1)),this.add(m);const v=new mr(dc,pc,e,t);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new le(0,0,-1)),this.add(v)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[o,l,u,h,m,v]=this.children,w=e.getRenderTarget(),S=e.toneMapping,A=e.xr.enabled;e.toneMapping=Vs,e.xr.enabled=!1;const R=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,l),e.setRenderTarget(r,2),e.render(t,u),e.setRenderTarget(r,3),e.render(t,h),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=R,e.setRenderTarget(r,5),e.render(t,v),e.setRenderTarget(w),e.toneMapping=S,e.xr.enabled=A,r.texture.needsPMREMUpdate=!0}}class mc extends Un{constructor(e,t,r,o,l,u,h,m,v,w){e=e!==void 0?e:[],t=t!==void 0?t:ra;super(e,t,r,o,l,u,h,m,v,w);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}mc.prototype.isCubeTexture=!0;class Fm extends ci{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];this.texture=new mc(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new zn(5,5,5),l=new ji({name:"CubemapFromEquirect",uniforms:hc(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Mi,blending:go});l.uniforms.tEquirect.value=t;const u=new ot(o,l),h=t.minFilter;return t.minFilter===vo&&(t.minFilter=jn),new Nm(1,10,this).update(e,u),t.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,t,r,o){const l=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,r,o);e.setRenderTarget(l)}}Fm.prototype.isWebGLCubeRenderTarget=!0;const _x=new le,Xk=new le,Yk=new yn;class js{constructor(e=new le(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=_x.subVectors(r,t).cross(Xk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(_x),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(r).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Yk.getNormalMatrix(e),o=this.coplanarPoint(_x).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}js.prototype.isPlane=!0;const gc=new bo,Um=new le;class Ph{constructor(e=new js,t=new js,r=new js,o=new js,l=new js,u=new js){this.planes=[e,t,r,o,l,u]}set(e,t,r,o,l,u){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(r),h[3].copy(o),h[4].copy(l),h[5].copy(u),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],l=r[1],u=r[2],h=r[3],m=r[4],v=r[5],w=r[6],S=r[7],A=r[8],R=r[9],O=r[10],N=r[11],k=r[12],D=r[13],P=r[14],F=r[15];return t[0].setComponents(h-o,S-m,N-A,F-k).normalize(),t[1].setComponents(h+o,S+m,N+A,F+k).normalize(),t[2].setComponents(h+l,S+v,N+R,F+D).normalize(),t[3].setComponents(h-l,S-v,N-R,F-D).normalize(),t[4].setComponents(h-u,S-w,N-O,F-P).normalize(),t[5].setComponents(h+u,S+w,N+O,F+P).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),gc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSprite(e){return gc.center.set(0,0,0),gc.radius=.7071067811865476,gc.applyMatrix4(e.matrixWorld),this.intersectsSphere(gc)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(Um.x=o.normal.x>0?e.max.x:e.min.x,Um.y=o.normal.y>0?e.max.y:e.min.y,Um.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Um)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function LT(){let s=null,e=!1,t=null,r=null;function o(l,u){t(l,u),r=s.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(r=s.requestAnimationFrame(o),e=!0)},stop:function(){s.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){s=l}}}function Kk(s,e){const t=e.isWebGL2,r=new WeakMap;function o(v,w){const S=v.array,A=v.usage,R=s.createBuffer();s.bindBuffer(w,R),s.bufferData(w,S,A),v.onUploadCallback();let O;if(S instanceof Float32Array)O=5126;else if(S instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(t)O=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else O=5123;else if(S instanceof Int16Array)O=5122;else if(S instanceof Uint32Array)O=5125;else if(S instanceof Int32Array)O=5124;else if(S instanceof Int8Array)O=5120;else if(S instanceof Uint8Array)O=5121;else if(S instanceof Uint8ClampedArray)O=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+S);return{buffer:R,type:O,bytesPerElement:S.BYTES_PER_ELEMENT,version:v.version}}function l(v,w,S){const A=w.array,R=w.updateRange;s.bindBuffer(S,v),R.count===-1?s.bufferSubData(S,0,A):(t?s.bufferSubData(S,R.offset*A.BYTES_PER_ELEMENT,A,R.offset,R.count):s.bufferSubData(S,R.offset*A.BYTES_PER_ELEMENT,A.subarray(R.offset,R.offset+R.count)),R.count=-1)}function u(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function h(v){v.isInterleavedBufferAttribute&&(v=v.data);const w=r.get(v);w&&(s.deleteBuffer(w.buffer),r.delete(v))}function m(v,w){if(v.isGLBufferAttribute){const A=r.get(v);(!A||A.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const S=r.get(v);S===void 0?r.set(v,o(v,w)):S.version<v.version&&(l(S.buffer,v,w),S.version=v.version)}return{get:u,remove:h,update:m}}class ya extends xt{constructor(e=1,t=1,r=1,o=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const l=e/2,u=t/2,h=Math.floor(r),m=Math.floor(o),v=h+1,w=m+1,S=e/h,A=t/m,R=[],O=[],N=[],k=[];for(let D=0;D<w;D++){const P=D*A-u;for(let F=0;F<v;F++){const L=F*S-l;O.push(L,-P,0),N.push(0,0,1),k.push(F/h),k.push(1-D/m)}}for(let D=0;D<m;D++)for(let P=0;P<h;P++){const F=P+v*D,L=P+v*(D+1),z=P+1+v*(D+1),H=P+1+v*D;R.push(F,L,H),R.push(L,z,H)}this.setIndex(R),this.setAttribute("position",new mt(O,3)),this.setAttribute("normal",new mt(N,3)),this.setAttribute("uv",new mt(k,2))}static fromJSON(e){return new ya(e.width,e.height,e.widthSegments,e.heightSegments)}}var Qk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Zk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jk=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,eD=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tD=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nD=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,rD="vec3 transformed = vec3( position );",iD=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sD=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,oD=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,aD=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,lD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cD=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fD=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,pD=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,mD=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,gD=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vD=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yD=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xD=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,_D=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wD=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bD="gl_FragColor = linearToOutputTexel( gl_FragColor );",SD=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,MD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,TD=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ED=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,AD=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,CD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RD=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,LD=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ID=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,PD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,DD=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,OD=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ND=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,FD=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,UD=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,BD=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zD=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,HD=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,GD=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,VD=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,WD=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$D=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jD=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qD=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,XD=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YD=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,QD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ZD=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,JD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,eO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,tO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,iO=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,sO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,oO=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,aO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,lO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,uO=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hO=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dO=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,pO=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,mO=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,gO=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,vO=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,yO=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,xO=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_O=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wO=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bO=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SO=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,MO=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,TO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,EO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,AO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,CO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,RO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,IO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,kO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OO=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NO=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,FO=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,UO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,BO=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,zO=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,HO=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,GO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,VO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,WO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$O=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jO=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qO=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YO=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KO=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QO=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ZO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,JO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,eN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tN=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nN=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rN=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iN=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,sN=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oN=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aN=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,uN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,hN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,mN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,xN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_N=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Zt={alphamap_fragment:Qk,alphamap_pars_fragment:Zk,alphatest_fragment:Jk,alphatest_pars_fragment:eD,aomap_fragment:tD,aomap_pars_fragment:nD,begin_vertex:rD,beginnormal_vertex:iD,bsdfs:sD,bumpmap_pars_fragment:oD,clipping_planes_fragment:aD,clipping_planes_pars_fragment:lD,clipping_planes_pars_vertex:uD,clipping_planes_vertex:cD,color_fragment:fD,color_pars_fragment:hD,color_pars_vertex:dD,color_vertex:pD,common:mD,cube_uv_reflection_fragment:gD,defaultnormal_vertex:vD,displacementmap_pars_vertex:yD,displacementmap_vertex:xD,emissivemap_fragment:_D,emissivemap_pars_fragment:wD,encodings_fragment:bD,encodings_pars_fragment:SD,envmap_fragment:MD,envmap_common_pars_fragment:TD,envmap_pars_fragment:ED,envmap_pars_vertex:AD,envmap_physical_pars_fragment:UD,envmap_vertex:CD,fog_vertex:RD,fog_pars_vertex:LD,fog_fragment:ID,fog_pars_fragment:PD,gradientmap_pars_fragment:kD,lightmap_fragment:DD,lightmap_pars_fragment:OD,lights_lambert_vertex:ND,lights_pars_begin:FD,lights_toon_fragment:BD,lights_toon_pars_fragment:zD,lights_phong_fragment:HD,lights_phong_pars_fragment:GD,lights_physical_fragment:VD,lights_physical_pars_fragment:WD,lights_fragment_begin:$D,lights_fragment_maps:jD,lights_fragment_end:qD,logdepthbuf_fragment:XD,logdepthbuf_pars_fragment:YD,logdepthbuf_pars_vertex:KD,logdepthbuf_vertex:QD,map_fragment:ZD,map_pars_fragment:JD,map_particle_fragment:eO,map_particle_pars_fragment:tO,metalnessmap_fragment:nO,metalnessmap_pars_fragment:rO,morphcolor_vertex:iO,morphnormal_vertex:sO,morphtarget_pars_vertex:oO,morphtarget_vertex:aO,normal_fragment_begin:lO,normal_fragment_maps:uO,normal_pars_fragment:cO,normal_pars_vertex:fO,normal_vertex:hO,normalmap_pars_fragment:dO,clearcoat_normal_fragment_begin:pO,clearcoat_normal_fragment_maps:mO,clearcoat_pars_fragment:gO,output_fragment:vO,packing:yO,premultiplied_alpha_fragment:xO,project_vertex:_O,dithering_fragment:wO,dithering_pars_fragment:bO,roughnessmap_fragment:SO,roughnessmap_pars_fragment:MO,shadowmap_pars_fragment:TO,shadowmap_pars_vertex:EO,shadowmap_vertex:AO,shadowmask_pars_fragment:CO,skinbase_vertex:RO,skinning_pars_vertex:LO,skinning_vertex:IO,skinnormal_vertex:PO,specularmap_fragment:kO,specularmap_pars_fragment:DO,tonemapping_fragment:OO,tonemapping_pars_fragment:NO,transmission_fragment:FO,transmission_pars_fragment:UO,uv_pars_fragment:BO,uv_pars_vertex:zO,uv_vertex:HO,uv2_pars_fragment:GO,uv2_pars_vertex:VO,uv2_vertex:WO,worldpos_vertex:$O,background_vert:jO,background_frag:qO,cube_vert:XO,cube_frag:YO,depth_vert:KO,depth_frag:QO,distanceRGBA_vert:ZO,distanceRGBA_frag:JO,equirect_vert:eN,equirect_frag:tN,linedashed_vert:nN,linedashed_frag:rN,meshbasic_vert:iN,meshbasic_frag:sN,meshlambert_vert:oN,meshlambert_frag:aN,meshmatcap_vert:lN,meshmatcap_frag:uN,meshnormal_vert:cN,meshnormal_frag:fN,meshphong_vert:hN,meshphong_frag:dN,meshphysical_vert:pN,meshphysical_frag:mN,meshtoon_vert:gN,meshtoon_frag:vN,points_vert:yN,points_frag:xN,shadow_vert:_N,shadow_frag:wN,sprite_vert:bN,sprite_frag:SN},at={common:{diffuse:{value:new Qe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new yn},uv2Transform:{value:new yn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Qe(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yn}}},Es={basic:{uniforms:Zr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:Zt.meshbasic_vert,fragmentShader:Zt.meshbasic_frag},lambert:{uniforms:Zr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.fog,at.lights,{emissive:{value:new Qe(0)}}]),vertexShader:Zt.meshlambert_vert,fragmentShader:Zt.meshlambert_frag},phong:{uniforms:Zr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new Qe(0)},specular:{value:new Qe(1118481)},shininess:{value:30}}]),vertexShader:Zt.meshphong_vert,fragmentShader:Zt.meshphong_frag},standard:{uniforms:Zr([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new Qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},toon:{uniforms:Zr([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new Qe(0)}}]),vertexShader:Zt.meshtoon_vert,fragmentShader:Zt.meshtoon_frag},matcap:{uniforms:Zr([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:Zt.meshmatcap_vert,fragmentShader:Zt.meshmatcap_frag},points:{uniforms:Zr([at.points,at.fog]),vertexShader:Zt.points_vert,fragmentShader:Zt.points_frag},dashed:{uniforms:Zr([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zt.linedashed_vert,fragmentShader:Zt.linedashed_frag},depth:{uniforms:Zr([at.common,at.displacementmap]),vertexShader:Zt.depth_vert,fragmentShader:Zt.depth_frag},normal:{uniforms:Zr([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:Zt.meshnormal_vert,fragmentShader:Zt.meshnormal_frag},sprite:{uniforms:Zr([at.sprite,at.fog]),vertexShader:Zt.sprite_vert,fragmentShader:Zt.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null}},vertexShader:Zt.background_vert,fragmentShader:Zt.background_frag},cube:{uniforms:Zr([at.envmap,{opacity:{value:1}}]),vertexShader:Zt.cube_vert,fragmentShader:Zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zt.equirect_vert,fragmentShader:Zt.equirect_frag},distanceRGBA:{uniforms:Zr([at.common,at.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zt.distanceRGBA_vert,fragmentShader:Zt.distanceRGBA_frag},shadow:{uniforms:Zr([at.lights,at.fog,{color:{value:new Qe(0)},opacity:{value:1}}]),vertexShader:Zt.shadow_vert,fragmentShader:Zt.shadow_frag}};Es.physical={uniforms:Zr([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new je(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Qe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Qe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Qe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag};function MN(s,e,t,r,o,l){const u=new Qe(0);let h=o===!0?0:1,m,v,w=null,S=0,A=null;function R(N,k){let D=!1,P=k.isScene===!0?k.background:null;P&&P.isTexture&&(P=e.get(P));const F=s.xr,L=F.getSession&&F.getSession();L&&L.environmentBlendMode==="additive"&&(P=null),P===null?O(u,h):P&&P.isColor&&(O(P,1),D=!0),(s.autoClear||D)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),P&&(P.isCubeTexture||P.mapping===Xu)?(v===void 0&&(v=new ot(new zn(1,1,1),new ji({name:"BackgroundCubeMaterial",uniforms:hc(Es.cube.uniforms),vertexShader:Es.cube.vertexShader,fragmentShader:Es.cube.fragmentShader,side:Mi,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(z,H,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,(w!==P||S!==P.version||A!==s.toneMapping)&&(v.material.needsUpdate=!0,w=P,S=P.version,A=s.toneMapping),v.layers.enableAll(),N.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(m===void 0&&(m=new ot(new ya(2,2),new ji({name:"BackgroundMaterial",uniforms:hc(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:na,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=P,P.matrixAutoUpdate===!0&&P.updateMatrix(),m.material.uniforms.uvTransform.value.copy(P.matrix),(w!==P||S!==P.version||A!==s.toneMapping)&&(m.material.needsUpdate=!0,w=P,S=P.version,A=s.toneMapping),m.layers.enableAll(),N.unshift(m,m.geometry,m.material,0,0,null))}function O(N,k){t.buffers.color.setClear(N.r,N.g,N.b,k,l)}return{getClearColor:function(){return u},setClearColor:function(N,k=1){u.set(N),h=k,O(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(N){h=N,O(u,h)},render:R}}function TN(s,e,t,r){const o=s.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||l!==null,h={},m=k(null);let v=m,w=!1;function S(b,p,ee,E,me){let Se=!1;if(u){const Te=N(E,ee,p);v!==Te&&(v=Te,R(v.object)),Se=D(b,E,ee,me),Se&&P(b,E,ee,me)}else{const Te=p.wireframe===!0;(v.geometry!==E.id||v.program!==ee.id||v.wireframe!==Te)&&(v.geometry=E.id,v.program=ee.id,v.wireframe=Te,Se=!0)}me!==null&&t.update(me,34963),(Se||w)&&(w=!1,$(b,p,ee,E),me!==null&&s.bindBuffer(34963,t.get(me).buffer))}function A(){return r.isWebGL2?s.createVertexArray():l.createVertexArrayOES()}function R(b){return r.isWebGL2?s.bindVertexArray(b):l.bindVertexArrayOES(b)}function O(b){return r.isWebGL2?s.deleteVertexArray(b):l.deleteVertexArrayOES(b)}function N(b,p,ee){const E=ee.wireframe===!0;let me=h[b.id];me===void 0&&(me={},h[b.id]=me);let Se=me[p.id];Se===void 0&&(Se={},me[p.id]=Se);let Te=Se[E];return Te===void 0&&(Te=k(A()),Se[E]=Te),Te}function k(b){const p=[],ee=[],E=[];for(let me=0;me<o;me++)p[me]=0,ee[me]=0,E[me]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:p,enabledAttributes:ee,attributeDivisors:E,object:b,attributes:{},index:null}}function D(b,p,ee,E){const me=v.attributes,Se=p.attributes;let Te=0;const ye=ee.getAttributes();for(const de in ye)if(ye[de].location>=0){const we=me[de];let Ie=Se[de];if(Ie===void 0&&(de==="instanceMatrix"&&b.instanceMatrix&&(Ie=b.instanceMatrix),de==="instanceColor"&&b.instanceColor&&(Ie=b.instanceColor)),we===void 0||we.attribute!==Ie||Ie&&we.data!==Ie.data)return!0;Te++}return v.attributesNum!==Te||v.index!==E}function P(b,p,ee,E){const me={},Se=p.attributes;let Te=0;const ye=ee.getAttributes();for(const de in ye)if(ye[de].location>=0){let we=Se[de];we===void 0&&(de==="instanceMatrix"&&b.instanceMatrix&&(we=b.instanceMatrix),de==="instanceColor"&&b.instanceColor&&(we=b.instanceColor));const Ie={};Ie.attribute=we,we&&we.data&&(Ie.data=we.data),me[de]=Ie,Te++}v.attributes=me,v.attributesNum=Te,v.index=E}function F(){const b=v.newAttributes;for(let p=0,ee=b.length;p<ee;p++)b[p]=0}function L(b){z(b,0)}function z(b,p){const ee=v.newAttributes,E=v.enabledAttributes,me=v.attributeDivisors;ee[b]=1,E[b]===0&&(s.enableVertexAttribArray(b),E[b]=1),me[b]!==p&&((r.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](b,p),me[b]=p)}function H(){const b=v.newAttributes,p=v.enabledAttributes;for(let ee=0,E=p.length;ee<E;ee++)p[ee]!==b[ee]&&(s.disableVertexAttribArray(ee),p[ee]=0)}function X(b,p,ee,E,me,Se){r.isWebGL2===!0&&(ee===5124||ee===5125)?s.vertexAttribIPointer(b,p,ee,me,Se):s.vertexAttribPointer(b,p,ee,E,me,Se)}function $(b,p,ee,E){if(r.isWebGL2===!1&&(b.isInstancedMesh||E.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;F();const me=E.attributes,Se=ee.getAttributes(),Te=p.defaultAttributeValues;for(const ye in Se){const de=Se[ye];if(de.location>=0){let Re=me[ye];if(Re===void 0&&(ye==="instanceMatrix"&&b.instanceMatrix&&(Re=b.instanceMatrix),ye==="instanceColor"&&b.instanceColor&&(Re=b.instanceColor)),Re!==void 0){const we=Re.normalized,Ie=Re.itemSize,Me=t.get(Re);if(Me===void 0)continue;const Be=Me.buffer,Ve=Me.type,qe=Me.bytesPerElement;if(Re.isInterleavedBufferAttribute){const W=Re.data,We=W.stride,De=Re.offset;if(W.isInstancedInterleavedBuffer){for(let Pe=0;Pe<de.locationSize;Pe++)z(de.location+Pe,W.meshPerAttribute);b.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let Pe=0;Pe<de.locationSize;Pe++)L(de.location+Pe);s.bindBuffer(34962,Be);for(let Pe=0;Pe<de.locationSize;Pe++)X(de.location+Pe,Ie/de.locationSize,Ve,we,We*qe,(De+Ie/de.locationSize*Pe)*qe)}else{if(Re.isInstancedBufferAttribute){for(let W=0;W<de.locationSize;W++)z(de.location+W,Re.meshPerAttribute);b.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let W=0;W<de.locationSize;W++)L(de.location+W);s.bindBuffer(34962,Be);for(let W=0;W<de.locationSize;W++)X(de.location+W,Ie/de.locationSize,Ve,we,Ie*qe,Ie/de.locationSize*W*qe)}}else if(Te!==void 0){const we=Te[ye];if(we!==void 0)switch(we.length){case 2:s.vertexAttrib2fv(de.location,we);break;case 3:s.vertexAttrib3fv(de.location,we);break;case 4:s.vertexAttrib4fv(de.location,we);break;default:s.vertexAttrib1fv(de.location,we)}}}}H()}function J(){pe();for(const b in h){const p=h[b];for(const ee in p){const E=p[ee];for(const me in E)O(E[me].object),delete E[me];delete p[ee]}delete h[b]}}function se(b){if(h[b.id]===void 0)return;const p=h[b.id];for(const ee in p){const E=p[ee];for(const me in E)O(E[me].object),delete E[me];delete p[ee]}delete h[b.id]}function ce(b){for(const p in h){const ee=h[p];if(ee[b.id]===void 0)continue;const E=ee[b.id];for(const me in E)O(E[me].object),delete E[me];delete ee[b.id]}}function pe(){fe(),w=!0,v!==m&&(v=m,R(v.object))}function fe(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:S,reset:pe,resetDefaultState:fe,dispose:J,releaseStatesOfGeometry:se,releaseStatesOfProgram:ce,initAttributes:F,enableAttribute:L,disableUnusedAttributes:H}}function EN(s,e,t,r){const o=r.isWebGL2;let l;function u(v){l=v}function h(v,w){s.drawArrays(l,v,w),t.update(w,l,1)}function m(v,w,S){if(S===0)return;let A,R;if(o)A=s,R="drawArraysInstanced";else if(A=e.get("ANGLE_instanced_arrays"),R="drawArraysInstancedANGLE",A===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[R](l,v,w,S),t.update(w,l,S)}this.setMode=u,this.render=h,this.renderInstances=m}function AN(s,e,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const X=e.get("EXT_texture_filter_anisotropic");r=s.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(X){if(X==="highp"){if(s.getShaderPrecisionFormat(35633,36338).precision>0&&s.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";X="mediump"}return X==="mediump"&&s.getShaderPrecisionFormat(35633,36337).precision>0&&s.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext!="undefined"&&s instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&s instanceof WebGL2ComputeRenderingContext;let h=t.precision!==void 0?t.precision:"highp";const m=l(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const v=u||e.has("WEBGL_draw_buffers"),w=t.logarithmicDepthBuffer===!0,S=s.getParameter(34930),A=s.getParameter(35660),R=s.getParameter(3379),O=s.getParameter(34076),N=s.getParameter(34921),k=s.getParameter(36347),D=s.getParameter(36348),P=s.getParameter(36349),F=A>0,L=u||e.has("OES_texture_float"),z=F&&L,H=u?s.getParameter(36183):0;return{isWebGL2:u,drawBuffers:v,getMaxAnisotropy:o,getMaxPrecision:l,precision:h,logarithmicDepthBuffer:w,maxTextures:S,maxVertexTextures:A,maxTextureSize:R,maxCubemapSize:O,maxAttributes:N,maxVertexUniforms:k,maxVaryings:D,maxFragmentUniforms:P,vertexTextures:F,floatFragmentTextures:L,floatVertexTextures:z,maxSamples:H}}function CN(s){const e=this;let t=null,r=0,o=!1,l=!1;const u=new js,h=new yn,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(S,A,R){const O=S.length!==0||A||r!==0||o;return o=A,t=w(S,R,0),r=S.length,O},this.beginShadows=function(){l=!0,w(null)},this.endShadows=function(){l=!1,v()},this.setState=function(S,A,R){const O=S.clippingPlanes,N=S.clipIntersection,k=S.clipShadows,D=s.get(S);if(!o||O===null||O.length===0||l&&!k)l?w(null):v();else{const P=l?0:r,F=P*4;let L=D.clippingState||null;m.value=L,L=w(O,A,F,R);for(let z=0;z!==F;++z)L[z]=t[z];D.clippingState=L,this.numIntersection=N?this.numPlanes:0,this.numPlanes+=P}};function v(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function w(S,A,R,O){const N=S!==null?S.length:0;let k=null;if(N!==0){if(k=m.value,O!==!0||k===null){const D=R+N*4,P=A.matrixWorldInverse;h.getNormalMatrix(P),(k===null||k.length<D)&&(k=new Float32Array(D));for(let F=0,L=R;F!==N;++F,L+=4)u.copy(S[F]).applyMatrix4(P,h),u.normal.toArray(k,L),k[L+3]=u.constant}m.value=k,m.needsUpdate=!0}return e.numPlanes=N,e.numIntersection=0,k}}function RN(s){let e=new WeakMap;function t(u,h){return h===qu?u.mapping=ra:h===yh&&(u.mapping=ia),u}function r(u){if(u&&u.isTexture&&u.isRenderTargetTexture===!1){const h=u.mapping;if(h===qu||h===yh)if(e.has(u)){const m=e.get(u).texture;return t(m,u.mapping)}else{const m=u.image;if(m&&m.height>0){const v=new Fm(m.height/2);return v.fromEquirectangularTexture(s,u),e.set(u,v),u.addEventListener("dispose",o),t(v.texture,u.mapping)}else return null}}return u}function o(u){const h=u.target;h.removeEventListener("dispose",o);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function l(){e=new WeakMap}return{get:r,dispose:l}}class Ll extends Ih{constructor(e=-1,t=1,r=1,o=-1,l=.1,u=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=l,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,l,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=r-e,u=r+e,h=o+t,m=o-t;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=v*this.view.offsetX,u=l+v*this.view.width,h-=w*this.view.offsetY,m=h-w*this.view.height}this.projectionMatrix.makeOrthographic(l,u,h,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Ll.prototype.isOrthographicCamera=!0;const vc=4,IT=[.125,.215,.35,.446,.526,.582],Il=20,wx=new Ll,PT=new Qe;let bx=null;const Pl=(1+Math.sqrt(5))/2,yc=1/Pl,kT=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Pl,yc),new le(0,Pl,-yc),new le(yc,0,Pl),new le(-yc,0,Pl),new le(Pl,yc,0),new le(-Pl,yc,0)];class Sx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){bx=this._renderer.getRenderTarget(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,o,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=NT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(bx),e.scissorTest=!1,Bm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ra||e.mapping===ia?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bx=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,16*7),t=4*this._cubeSize,r={magFilter:jn,minFilter:jn,generateMipmaps:!1,type:Qu,format:Ti,encoding:Gi,depthBuffer:!1},o=DT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DT(e,t,r);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LN(l)),this._blurMaterial=IN(l,e,t)}return o}_compileMaterial(e){const t=new ot(this._lodPlanes[0],e);this._renderer.compile(t,wx)}_sceneToCubeUV(e,t,r,o){const l=90,u=1,h=new mr(l,u,t,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],w=this._renderer,S=w.autoClear,A=w.toneMapping;w.getClearColor(PT),w.toneMapping=Vs,w.autoClear=!1;const R=new Ir({name:"PMREM.Background",side:Mi,depthWrite:!1,depthTest:!1}),O=new ot(new zn,R);let N=!1;const k=e.background;k?k.isColor&&(R.color.copy(k),e.background=null,N=!0):(R.color.copy(PT),N=!0);for(let D=0;D<6;D++){const P=D%3;P===0?(h.up.set(0,m[D],0),h.lookAt(v[D],0,0)):P===1?(h.up.set(0,0,m[D]),h.lookAt(0,v[D],0)):(h.up.set(0,m[D],0),h.lookAt(0,0,v[D]));const F=this._cubeSize;Bm(o,P*F,D>2?F:0,F,F),w.setRenderTarget(o),N&&w.render(O,h),w.render(e,h)}O.geometry.dispose(),O.material.dispose(),w.toneMapping=A,w.autoClear=S,e.background=k}_textureToCubeUV(e,t){const r=this._renderer,o=e.mapping===ra||e.mapping===ia;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=NT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OT());const l=o?this._cubemapMaterial:this._equirectMaterial,u=new ot(this._lodPlanes[0],l),h=l.uniforms;h.envMap.value=e;const m=this._cubeSize;Bm(t,0,0,3*m,2*m),r.setRenderTarget(t),r.render(u,wx)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),u=kT[(o-1)%kT.length];this._blur(e,o-1,o,l,u)}t.autoClear=r}_blur(e,t,r,o,l){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,r,o,"latitudinal",l),this._halfBlur(u,e,r,r,o,"longitudinal",l)}_halfBlur(e,t,r,o,l,u,h){const m=this._renderer,v=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const w=3,S=new ot(this._lodPlanes[o],v),A=v.uniforms,R=this._sizeLods[r]-1,O=isFinite(l)?Math.PI/(2*R):2*Math.PI/(2*Il-1),N=l/O,k=isFinite(l)?1+Math.floor(w*N):Il;k>Il&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${k} samples when the maximum is set to ${Il}`);const D=[];let P=0;for(let X=0;X<Il;++X){const $=X/N,J=Math.exp(-$*$/2);D.push(J),X===0?P+=J:X<k&&(P+=2*J)}for(let X=0;X<D.length;X++)D[X]=D[X]/P;A.envMap.value=e.texture,A.samples.value=k,A.weights.value=D,A.latitudinal.value=u==="latitudinal",h&&(A.poleAxis.value=h);const{_lodMax:F}=this;A.dTheta.value=O,A.mipInt.value=F-r;const L=this._sizeLods[o],z=3*L*(o>F-vc?o-F+vc:0),H=4*(this._cubeSize-L);Bm(t,z,H,3*L,2*L),m.setRenderTarget(t),m.render(S,wx)}}function LN(s){const e=[],t=[],r=[];let o=s;const l=s-vc+1+IT.length;for(let u=0;u<l;u++){const h=Math.pow(2,o);t.push(h);let m=1/h;u>s-vc?m=IT[u-s+vc-1]:u===0&&(m=0),r.push(m);const v=1/(h-2),w=-v,S=1+v,A=[w,w,S,w,S,S,w,w,S,S,w,S],R=6,O=6,N=3,k=2,D=1,P=new Float32Array(N*O*R),F=new Float32Array(k*O*R),L=new Float32Array(D*O*R);for(let H=0;H<R;H++){const X=H%3*2/3-1,$=H>2?0:-1,J=[X,$,0,X+2/3,$,0,X+2/3,$+1,0,X,$,0,X+2/3,$+1,0,X,$+1,0];P.set(J,N*O*H),F.set(A,k*O*H);const se=[H,H,H,H,H,H];L.set(se,D*O*H)}const z=new xt;z.setAttribute("position",new Dt(P,N)),z.setAttribute("uv",new Dt(F,k)),z.setAttribute("faceIndex",new Dt(L,D)),e.push(z),o>vc&&o--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function DT(s,e,t){const r=new ci(s,e,t);return r.texture.mapping=Xu,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Bm(s,e,t,r,o){s.viewport.set(e,t,r,o),s.scissor.set(e,t,r,o)}function IN(s,e,t){const r=new Float32Array(Il),o=new le(0,1,0);return new ji({name:"SphericalGaussianBlur",defines:{n:Il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function OT(){return new ji({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function NT(){return new ji({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Mx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function Mx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PN(s){let e=new WeakMap,t=null;function r(h){if(h&&h.isTexture){const m=h.mapping,v=m===qu||m===yh,w=m===ra||m===ia;if(v||w)if(h.isRenderTargetTexture&&h.needsPMREMUpdate===!0){h.needsPMREMUpdate=!1;let S=e.get(h);return t===null&&(t=new Sx(s)),S=v?t.fromEquirectangular(h,S):t.fromCubemap(h,S),e.set(h,S),S.texture}else{if(e.has(h))return e.get(h).texture;{const S=h.image;if(v&&S&&S.height>0||w&&S&&o(S)){t===null&&(t=new Sx(s));const A=v?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,A),h.addEventListener("dispose",l),A.texture}else return null}}}return h}function o(h){let m=0;const v=6;for(let w=0;w<v;w++)h[w]!==void 0&&m++;return m===v}function l(h){const m=h.target;m.removeEventListener("dispose",l);const v=e.get(m);v!==void 0&&(e.delete(m),v.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:u}}function kN(s){const e={};function t(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=s.getExtension(r)}return e[r]=o,o}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function DN(s,e,t,r){const o={},l=new WeakMap;function u(S){const A=S.target;A.index!==null&&e.remove(A.index);for(const O in A.attributes)e.remove(A.attributes[O]);A.removeEventListener("dispose",u),delete o[A.id];const R=l.get(A);R&&(e.remove(R),l.delete(A)),r.releaseStatesOfGeometry(A),A.isInstancedBufferGeometry===!0&&delete A._maxInstanceCount,t.memory.geometries--}function h(S,A){return o[A.id]===!0||(A.addEventListener("dispose",u),o[A.id]=!0,t.memory.geometries++),A}function m(S){const A=S.attributes;for(const O in A)e.update(A[O],34962);const R=S.morphAttributes;for(const O in R){const N=R[O];for(let k=0,D=N.length;k<D;k++)e.update(N[k],34962)}}function v(S){const A=[],R=S.index,O=S.attributes.position;let N=0;if(R!==null){const P=R.array;N=R.version;for(let F=0,L=P.length;F<L;F+=3){const z=P[F+0],H=P[F+1],X=P[F+2];A.push(z,H,H,X,X,z)}}else{const P=O.array;N=O.version;for(let F=0,L=P.length/3-1;F<L;F+=3){const z=F+0,H=F+1,X=F+2;A.push(z,H,H,X,X,z)}}const k=new(aT(A)?Am:Rh)(A,1);k.version=N;const D=l.get(S);D&&e.remove(D),l.set(S,k)}function w(S){const A=l.get(S);if(A){const R=S.index;R!==null&&A.version<R.version&&v(S)}else v(S);return l.get(S)}return{get:h,update:m,getWireframeAttribute:w}}function ON(s,e,t,r){const o=r.isWebGL2;let l;function u(A){l=A}let h,m;function v(A){h=A.type,m=A.bytesPerElement}function w(A,R){s.drawElements(l,R,h,A*m),t.update(R,l,1)}function S(A,R,O){if(O===0)return;let N,k;if(o)N=s,k="drawElementsInstanced";else if(N=e.get("ANGLE_instanced_arrays"),k="drawElementsInstancedANGLE",N===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[k](l,R,h,A*m,O),t.update(R,l,O)}this.setMode=u,this.setIndex=v,this.render=w,this.renderInstances=S}function NN(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(l,u,h){switch(t.calls++,u){case 4:t.triangles+=h*(l/3);break;case 1:t.lines+=h*(l/2);break;case 3:t.lines+=h*(l-1);break;case 2:t.lines+=h*l;break;case 0:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:r}}function FN(s,e){return s[0]-e[0]}function UN(s,e){return Math.abs(e[1])-Math.abs(s[1])}function Tx(s,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),s.divideScalar(t)}function BN(s,e,t){const r={},o=new Float32Array(8),l=new WeakMap,u=new ln,h=[];for(let v=0;v<8;v++)h[v]=[v,0];function m(v,w,S,A){const R=v.morphTargetInfluences;if(e.isWebGL2===!0){const O=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,N=O!==void 0?O.length:0;let k=l.get(w);if(k===void 0||k.count!==N){let p=function(){fe.dispose(),l.delete(w),w.removeEventListener("dispose",p)};k!==void 0&&k.texture.dispose();const F=w.morphAttributes.position!==void 0,L=w.morphAttributes.normal!==void 0,z=w.morphAttributes.color!==void 0,H=w.morphAttributes.position||[],X=w.morphAttributes.normal||[],$=w.morphAttributes.color||[];let J=0;F===!0&&(J=1),L===!0&&(J=2),z===!0&&(J=3);let se=w.attributes.position.count*J,ce=1;se>e.maxTextureSize&&(ce=Math.ceil(se/e.maxTextureSize),se=e.maxTextureSize);const pe=new Float32Array(se*ce*4*N),fe=new nc(pe,se,ce,N);fe.type=xo,fe.needsUpdate=!0;const b=J*4;for(let ee=0;ee<N;ee++){const E=H[ee],me=X[ee],Se=$[ee],Te=se*ce*4*ee;for(let ye=0;ye<E.count;ye++){const de=ye*b;F===!0&&(u.fromBufferAttribute(E,ye),E.normalized===!0&&Tx(u,E),pe[Te+de+0]=u.x,pe[Te+de+1]=u.y,pe[Te+de+2]=u.z,pe[Te+de+3]=0),L===!0&&(u.fromBufferAttribute(me,ye),me.normalized===!0&&Tx(u,me),pe[Te+de+4]=u.x,pe[Te+de+5]=u.y,pe[Te+de+6]=u.z,pe[Te+de+7]=0),z===!0&&(u.fromBufferAttribute(Se,ye),Se.normalized===!0&&Tx(u,Se),pe[Te+de+8]=u.x,pe[Te+de+9]=u.y,pe[Te+de+10]=u.z,pe[Te+de+11]=Se.itemSize===4?u.w:1)}}k={count:N,texture:fe,size:new je(se,ce)},l.set(w,k),w.addEventListener("dispose",p)}let D=0;for(let F=0;F<R.length;F++)D+=R[F];const P=w.morphTargetsRelative?1:1-D;A.getUniforms().setValue(s,"morphTargetBaseInfluence",P),A.getUniforms().setValue(s,"morphTargetInfluences",R),A.getUniforms().setValue(s,"morphTargetsTexture",k.texture,t),A.getUniforms().setValue(s,"morphTargetsTextureSize",k.size)}else{const O=R===void 0?0:R.length;let N=r[w.id];if(N===void 0||N.length!==O){N=[];for(let L=0;L<O;L++)N[L]=[L,0];r[w.id]=N}for(let L=0;L<O;L++){const z=N[L];z[0]=L,z[1]=R[L]}N.sort(UN);for(let L=0;L<8;L++)L<O&&N[L][1]?(h[L][0]=N[L][0],h[L][1]=N[L][1]):(h[L][0]=Number.MAX_SAFE_INTEGER,h[L][1]=0);h.sort(FN);const k=w.morphAttributes.position,D=w.morphAttributes.normal;let P=0;for(let L=0;L<8;L++){const z=h[L],H=z[0],X=z[1];H!==Number.MAX_SAFE_INTEGER&&X?(k&&w.getAttribute("morphTarget"+L)!==k[H]&&w.setAttribute("morphTarget"+L,k[H]),D&&w.getAttribute("morphNormal"+L)!==D[H]&&w.setAttribute("morphNormal"+L,D[H]),o[L]=X,P+=X):(k&&w.hasAttribute("morphTarget"+L)===!0&&w.deleteAttribute("morphTarget"+L),D&&w.hasAttribute("morphNormal"+L)===!0&&w.deleteAttribute("morphNormal"+L),o[L]=0)}const F=w.morphTargetsRelative?1:1-P;A.getUniforms().setValue(s,"morphTargetBaseInfluence",F),A.getUniforms().setValue(s,"morphTargetInfluences",o)}}return{update:m}}function zN(s,e,t,r){let o=new WeakMap;function l(m){const v=r.render.frame,w=m.geometry,S=e.get(m,w);return o.get(S)!==v&&(e.update(S),o.set(S,v)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),t.update(m.instanceMatrix,34962),m.instanceColor!==null&&t.update(m.instanceColor,34962)),S}function u(){o=new WeakMap}function h(m){const v=m.target;v.removeEventListener("dispose",h),t.remove(v.instanceMatrix),v.instanceColor!==null&&t.remove(v.instanceColor)}return{update:l,dispose:u}}const FT=new Un,UT=new nc,BT=new Eh,zT=new mc,HT=[],GT=[],VT=new Float32Array(16),WT=new Float32Array(9),$T=new Float32Array(4);function xc(s,e,t){const r=s[0];if(r<=0||r>0)return s;const o=e*t;let l=HT[o];if(l===void 0&&(l=new Float32Array(o),HT[o]=l),e!==0){r.toArray(l,0);for(let u=1,h=0;u!==e;++u)h+=t,s[u].toArray(l,h)}return l}function fi(s,e){if(s.length!==e.length)return!1;for(let t=0,r=s.length;t<r;t++)if(s[t]!==e[t])return!1;return!0}function hi(s,e){for(let t=0,r=e.length;t<r;t++)s[t]=e[t]}function zm(s,e){let t=GT[e];t===void 0&&(t=new Int32Array(e),GT[e]=t);for(let r=0;r!==e;++r)t[r]=s.allocateTextureUnit();return t}function HN(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function GN(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fi(t,e))return;s.uniform2fv(this.addr,e),hi(t,e)}}function VN(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(fi(t,e))return;s.uniform3fv(this.addr,e),hi(t,e)}}function WN(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fi(t,e))return;s.uniform4fv(this.addr,e),hi(t,e)}}function $N(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(fi(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),hi(t,e)}else{if(fi(t,r))return;$T.set(r),s.uniformMatrix2fv(this.addr,!1,$T),hi(t,r)}}function jN(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(fi(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),hi(t,e)}else{if(fi(t,r))return;WT.set(r),s.uniformMatrix3fv(this.addr,!1,WT),hi(t,r)}}function qN(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(fi(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),hi(t,e)}else{if(fi(t,r))return;VT.set(r),s.uniformMatrix4fv(this.addr,!1,VT),hi(t,r)}}function XN(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function YN(s,e){const t=this.cache;fi(t,e)||(s.uniform2iv(this.addr,e),hi(t,e))}function KN(s,e){const t=this.cache;fi(t,e)||(s.uniform3iv(this.addr,e),hi(t,e))}function QN(s,e){const t=this.cache;fi(t,e)||(s.uniform4iv(this.addr,e),hi(t,e))}function ZN(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function JN(s,e){const t=this.cache;fi(t,e)||(s.uniform2uiv(this.addr,e),hi(t,e))}function eF(s,e){const t=this.cache;fi(t,e)||(s.uniform3uiv(this.addr,e),hi(t,e))}function tF(s,e){const t=this.cache;fi(t,e)||(s.uniform4uiv(this.addr,e),hi(t,e))}function nF(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTexture2D(e||FT,o)}function rF(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||BT,o)}function iF(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTextureCube(e||zT,o)}function sF(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||UT,o)}function oF(s){switch(s){case 5126:return HN;case 35664:return GN;case 35665:return VN;case 35666:return WN;case 35674:return $N;case 35675:return jN;case 35676:return qN;case 5124:case 35670:return XN;case 35667:case 35671:return YN;case 35668:case 35672:return KN;case 35669:case 35673:return QN;case 5125:return ZN;case 36294:return JN;case 36295:return eF;case 36296:return tF;case 35678:case 36198:case 36298:case 36306:case 35682:return nF;case 35679:case 36299:case 36307:return rF;case 35680:case 36300:case 36308:case 36293:return iF;case 36289:case 36303:case 36311:case 36292:return sF}}function aF(s,e){s.uniform1fv(this.addr,e)}function lF(s,e){const t=xc(e,this.size,2);s.uniform2fv(this.addr,t)}function uF(s,e){const t=xc(e,this.size,3);s.uniform3fv(this.addr,t)}function cF(s,e){const t=xc(e,this.size,4);s.uniform4fv(this.addr,t)}function fF(s,e){const t=xc(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function hF(s,e){const t=xc(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function dF(s,e){const t=xc(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function pF(s,e){s.uniform1iv(this.addr,e)}function mF(s,e){s.uniform2iv(this.addr,e)}function gF(s,e){s.uniform3iv(this.addr,e)}function vF(s,e){s.uniform4iv(this.addr,e)}function yF(s,e){s.uniform1uiv(this.addr,e)}function xF(s,e){s.uniform2uiv(this.addr,e)}function _F(s,e){s.uniform3uiv(this.addr,e)}function wF(s,e){s.uniform4uiv(this.addr,e)}function bF(s,e,t){const r=e.length,o=zm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2D(e[l]||FT,o[l])}function SF(s,e,t){const r=e.length,o=zm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture3D(e[l]||BT,o[l])}function MF(s,e,t){const r=e.length,o=zm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTextureCube(e[l]||zT,o[l])}function TF(s,e,t){const r=e.length,o=zm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||UT,o[l])}function EF(s){switch(s){case 5126:return aF;case 35664:return lF;case 35665:return uF;case 35666:return cF;case 35674:return fF;case 35675:return hF;case 35676:return dF;case 5124:case 35670:return pF;case 35667:case 35671:return mF;case 35668:case 35672:return gF;case 35669:case 35673:return vF;case 5125:return yF;case 36294:return xF;case 36295:return _F;case 36296:return wF;case 35678:case 36198:case 36298:case 36306:case 35682:return bF;case 35679:case 36299:case 36307:return SF;case 35680:case 36300:case 36308:case 36293:return MF;case 36289:case 36303:case 36311:case 36292:return TF}}function AF(s,e,t){this.id=s,this.addr=t,this.cache=[],this.setValue=oF(e.type)}function CF(s,e,t){this.id=s,this.addr=t,this.cache=[],this.size=e.size,this.setValue=EF(e.type)}function jT(s){this.id=s,this.seq=[],this.map={}}jT.prototype.setValue=function(s,e,t){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const u=r[o];u.setValue(s,e[u.id],t)}};const Ex=/(\w+)(\])?(\[|\.)?/g;function qT(s,e){s.seq.push(e),s.map[e.id]=e}function RF(s,e,t){const r=s.name,o=r.length;for(Ex.lastIndex=0;;){const l=Ex.exec(r),u=Ex.lastIndex;let h=l[1];const m=l[2]==="]",v=l[3];if(m&&(h=h|0),v===void 0||v==="["&&u+2===o){qT(t,v===void 0?new AF(h,s,e):new CF(h,s,e));break}else{let S=t.map[h];S===void 0&&(S=new jT(h),qT(t,S)),t=S}}}function xa(s,e){this.seq=[],this.map={};const t=s.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=s.getActiveUniform(e,r),l=s.getUniformLocation(e,o.name);RF(o,l,this)}}xa.prototype.setValue=function(s,e,t,r){const o=this.map[e];o!==void 0&&o.setValue(s,t,r)};xa.prototype.setOptional=function(s,e,t){const r=e[t];r!==void 0&&this.setValue(s,t,r)};xa.upload=function(s,e,t,r){for(let o=0,l=e.length;o!==l;++o){const u=e[o],h=t[u.id];h.needsUpdate!==!1&&u.setValue(s,h.value,r)}};xa.seqWithValue=function(s,e){const t=[];for(let r=0,o=s.length;r!==o;++r){const l=s[r];l.id in e&&t.push(l)}return t};function XT(s,e,t){const r=s.createShader(e);return s.shaderSource(r,t),s.compileShader(r),r}let LF=0;function IF(s,e){const t=s.split(`
`),r=[],o=Math.max(e-6,0),l=Math.min(e+6,t.length);for(let u=o;u<l;u++)r.push(u+1+": "+t[u]);return r.join(`
`)}function PF(s){switch(s){case Gi:return["Linear","( value )"];case Xt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function YT(s,e,t){const r=s.getShaderParameter(e,35713),o=s.getShaderInfoLog(e).trim();if(r&&o==="")return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const u=parseInt(l[0]);return t.toUpperCase()+`

`+o+`

`+IF(s.getShaderSource(e),u)}else return o}function kF(s,e){const t=PF(e);return"vec4 "+s+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function DF(s,e){let t;switch(e){case LM:t="Linear";break;case IM:t="Reinhard";break;case PM:t="OptimizedCineon";break;case kM:t="ACESFilmic";break;case DM:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function OF(s){return[s.extensionDerivatives||!!s.envMapCubeUVHeight||s.bumpMap||s.tangentSpaceNormalMap||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kh).join(`
`)}function NF(s){const e=[];for(const t in s){const r=s[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function FF(s,e){const t={},r=s.getProgramParameter(e,35721);for(let o=0;o<r;o++){const l=s.getActiveAttrib(e,o),u=l.name;let h=1;l.type===35674&&(h=2),l.type===35675&&(h=3),l.type===35676&&(h=4),t[u]={type:l.type,location:s.getAttribLocation(e,u),locationSize:h}}return t}function kh(s){return s!==""}function KT(s,e){return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function QT(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const UF=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ax(s){return s.replace(UF,BF)}function BF(s,e){const t=Zt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Ax(t)}const zF=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,HF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ZT(s){return s.replace(HF,JT).replace(zF,GF)}function GF(s,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),JT(s,e,t,r)}function JT(s,e,t,r){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function eE(s){let e="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function VF(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===yy?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===lM?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===ju&&(e="SHADOWMAP_TYPE_VSM"),e}function WF(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case ra:case ia:e="ENVMAP_TYPE_CUBE";break;case Xu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function $F(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case ia:e="ENVMAP_MODE_REFRACTION";break}return e}function jF(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case vh:e="ENVMAP_BLENDING_MULTIPLY";break;case CM:e="ENVMAP_BLENDING_MIX";break;case RM:e="ENVMAP_BLENDING_ADD";break}return e}function qF(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function XF(s,e,t,r){const o=s.getContext(),l=t.defines;let u=t.vertexShader,h=t.fragmentShader;const m=VF(t),v=WF(t),w=$F(t),S=jF(t),A=qF(t),R=t.isWebGL2?"":OF(t),O=NF(l),N=o.createProgram();let k,D,P=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(k=[O].filter(kh).join(`
`),k.length>0&&(k+=`
`),D=[R,O].filter(kh).join(`
`),D.length>0&&(D+=`
`)):(k=[eE(t),"#define SHADER_NAME "+t.shaderName,O,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+w:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kh).join(`
`),D=[R,eE(t),"#define SHADER_NAME "+t.shaderName,O,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.envMap?"#define "+w:"",t.envMap?"#define "+S:"",A?"#define CUBEUV_TEXEL_WIDTH "+A.texelWidth:"",A?"#define CUBEUV_TEXEL_HEIGHT "+A.texelHeight:"",A?"#define CUBEUV_MAX_MIP "+A.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vs?"#define TONE_MAPPING":"",t.toneMapping!==Vs?Zt.tonemapping_pars_fragment:"",t.toneMapping!==Vs?DF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Zt.encodings_pars_fragment,kF("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(kh).join(`
`)),u=Ax(u),u=KT(u,t),u=QT(u,t),h=Ax(h),h=KT(h,t),h=QT(h,t),u=ZT(u),h=ZT(h),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,k=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+k,D=["#define varying in",t.glslVersion===Ky?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ky?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+D);const F=P+k+u,L=P+D+h,z=XT(o,35633,F),H=XT(o,35632,L);if(o.attachShader(N,z),o.attachShader(N,H),t.index0AttributeName!==void 0?o.bindAttribLocation(N,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(N,0,"position"),o.linkProgram(N),s.debug.checkShaderErrors){const J=o.getProgramInfoLog(N).trim(),se=o.getShaderInfoLog(z).trim(),ce=o.getShaderInfoLog(H).trim();let pe=!0,fe=!0;if(o.getProgramParameter(N,35714)===!1){pe=!1;const b=YT(o,z,"vertex"),p=YT(o,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(N,35715)+`

Program Info Log: `+J+`
`+b+`
`+p)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(se===""||ce==="")&&(fe=!1);fe&&(this.diagnostics={runnable:pe,programLog:J,vertexShader:{log:se,prefix:k},fragmentShader:{log:ce,prefix:D}})}o.deleteShader(z),o.deleteShader(H);let X;this.getUniforms=function(){return X===void 0&&(X=new xa(o,N)),X};let $;return this.getAttributes=function(){return $===void 0&&($=FF(o,N)),$},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(N),this.program=void 0},this.name=t.shaderName,this.id=LF++,this.cacheKey=e,this.usedTimes=1,this.program=N,this.vertexShader=z,this.fragmentShader=H,this}let YF=0;class KF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(t),l=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(o)===!1&&(u.add(o),o.usedTimes++),u.has(l)===!1&&(u.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new QF(e);t.set(e,r)}return t.get(e)}}class QF{constructor(e){this.id=YF++,this.code=e,this.usedTimes=0}}function ZF(s,e,t,r,o,l,u){const h=new Mm,m=new KF,v=[],w=o.isWebGL2,S=o.logarithmicDepthBuffer,A=o.vertexTextures;let R=o.precision;const O={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function N($,J,se,ce,pe){const fe=ce.fog,b=pe.geometry,p=$.isMeshStandardMaterial?ce.environment:null,ee=($.isMeshStandardMaterial?t:e).get($.envMap||p),E=!!ee&&ee.mapping===Xu?ee.image.height:null,me=O[$.type];$.precision!==null&&(R=o.getMaxPrecision($.precision),R!==$.precision&&console.warn("THREE.WebGLProgram.getParameters:",$.precision,"not supported, using",R,"instead."));const Se=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,Te=Se!==void 0?Se.length:0;let ye=0;b.morphAttributes.position!==void 0&&(ye=1),b.morphAttributes.normal!==void 0&&(ye=2),b.morphAttributes.color!==void 0&&(ye=3);let de,Re,we,Ie;if(me){const W=Es[me];de=W.vertexShader,Re=W.fragmentShader}else de=$.vertexShader,Re=$.fragmentShader,m.update($),we=m.getVertexShaderID($),Ie=m.getFragmentShaderID($);const Me=s.getRenderTarget(),Be=$.alphaTest>0,Ve=$.clearcoat>0;return{isWebGL2:w,shaderID:me,shaderName:$.type,vertexShader:de,fragmentShader:Re,defines:$.defines,customVertexShaderID:we,customFragmentShaderID:Ie,isRawShaderMaterial:$.isRawShaderMaterial===!0,glslVersion:$.glslVersion,precision:R,instancing:pe.isInstancedMesh===!0,instancingColor:pe.isInstancedMesh===!0&&pe.instanceColor!==null,supportsVertexTextures:A,outputEncoding:Me===null?s.outputEncoding:Me.isXRRenderTarget===!0?Me.texture.encoding:Gi,map:!!$.map,matcap:!!$.matcap,envMap:!!ee,envMapMode:ee&&ee.mapping,envMapCubeUVHeight:E,lightMap:!!$.lightMap,aoMap:!!$.aoMap,emissiveMap:!!$.emissiveMap,bumpMap:!!$.bumpMap,normalMap:!!$.normalMap,objectSpaceNormalMap:$.normalMapType===rT,tangentSpaceNormalMap:$.normalMapType===_o,decodeVideoTexture:!!$.map&&$.map.isVideoTexture===!0&&$.map.encoding===Xt,clearcoat:Ve,clearcoatMap:Ve&&!!$.clearcoatMap,clearcoatRoughnessMap:Ve&&!!$.clearcoatRoughnessMap,clearcoatNormalMap:Ve&&!!$.clearcoatNormalMap,displacementMap:!!$.displacementMap,roughnessMap:!!$.roughnessMap,metalnessMap:!!$.metalnessMap,specularMap:!!$.specularMap,specularIntensityMap:!!$.specularIntensityMap,specularColorMap:!!$.specularColorMap,opaque:$.transparent===!1&&$.blending===vl,alphaMap:!!$.alphaMap,alphaTest:Be,gradientMap:!!$.gradientMap,sheen:$.sheen>0,sheenColorMap:!!$.sheenColorMap,sheenRoughnessMap:!!$.sheenRoughnessMap,transmission:$.transmission>0,transmissionMap:!!$.transmissionMap,thicknessMap:!!$.thicknessMap,combine:$.combine,vertexTangents:!!$.normalMap&&!!b.attributes.tangent,vertexColors:$.vertexColors,vertexAlphas:$.vertexColors===!0&&!!b.attributes.color&&b.attributes.color.itemSize===4,vertexUvs:!!$.map||!!$.bumpMap||!!$.normalMap||!!$.specularMap||!!$.alphaMap||!!$.emissiveMap||!!$.roughnessMap||!!$.metalnessMap||!!$.clearcoatMap||!!$.clearcoatRoughnessMap||!!$.clearcoatNormalMap||!!$.displacementMap||!!$.transmissionMap||!!$.thicknessMap||!!$.specularIntensityMap||!!$.specularColorMap||!!$.sheenColorMap||!!$.sheenRoughnessMap,uvsVertexOnly:!(!!$.map||!!$.bumpMap||!!$.normalMap||!!$.specularMap||!!$.alphaMap||!!$.emissiveMap||!!$.roughnessMap||!!$.metalnessMap||!!$.clearcoatNormalMap||$.transmission>0||!!$.transmissionMap||!!$.thicknessMap||!!$.specularIntensityMap||!!$.specularColorMap||$.sheen>0||!!$.sheenColorMap||!!$.sheenRoughnessMap)&&!!$.displacementMap,fog:!!fe,useFog:$.fog===!0,fogExp2:fe&&fe.isFogExp2,flatShading:!!$.flatShading,sizeAttenuation:$.sizeAttenuation,logarithmicDepthBuffer:S,skinning:pe.isSkinnedMesh===!0,morphTargets:b.morphAttributes.position!==void 0,morphNormals:b.morphAttributes.normal!==void 0,morphColors:b.morphAttributes.color!==void 0,morphTargetsCount:Te,morphTextureStride:ye,numDirLights:J.directional.length,numPointLights:J.point.length,numSpotLights:J.spot.length,numRectAreaLights:J.rectArea.length,numHemiLights:J.hemi.length,numDirLightShadows:J.directionalShadowMap.length,numPointLightShadows:J.pointShadowMap.length,numSpotLightShadows:J.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:$.dithering,shadowMapEnabled:s.shadowMap.enabled&&se.length>0,shadowMapType:s.shadowMap.type,toneMapping:$.toneMapped?s.toneMapping:Vs,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:$.premultipliedAlpha,doubleSided:$.side===bs,flipSided:$.side===Mi,useDepthPacking:!!$.depthPacking,depthPacking:$.depthPacking||0,index0AttributeName:$.index0AttributeName,extensionDerivatives:$.extensions&&$.extensions.derivatives,extensionFragDepth:$.extensions&&$.extensions.fragDepth,extensionDrawBuffers:$.extensions&&$.extensions.drawBuffers,extensionShaderTextureLOD:$.extensions&&$.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||r.has("EXT_shader_texture_lod"),customProgramCacheKey:$.customProgramCacheKey()}}function k($){const J=[];if($.shaderID?J.push($.shaderID):(J.push($.customVertexShaderID),J.push($.customFragmentShaderID)),$.defines!==void 0)for(const se in $.defines)J.push(se),J.push($.defines[se]);return $.isRawShaderMaterial===!1&&(D(J,$),P(J,$),J.push(s.outputEncoding)),J.push($.customProgramCacheKey),J.join()}function D($,J){$.push(J.precision),$.push(J.outputEncoding),$.push(J.envMapMode),$.push(J.envMapCubeUVHeight),$.push(J.combine),$.push(J.vertexUvs),$.push(J.fogExp2),$.push(J.sizeAttenuation),$.push(J.morphTargetsCount),$.push(J.morphAttributeCount),$.push(J.numDirLights),$.push(J.numPointLights),$.push(J.numSpotLights),$.push(J.numHemiLights),$.push(J.numRectAreaLights),$.push(J.numDirLightShadows),$.push(J.numPointLightShadows),$.push(J.numSpotLightShadows),$.push(J.shadowMapType),$.push(J.toneMapping),$.push(J.numClippingPlanes),$.push(J.numClipIntersection),$.push(J.depthPacking)}function P($,J){h.disableAll(),J.isWebGL2&&h.enable(0),J.supportsVertexTextures&&h.enable(1),J.instancing&&h.enable(2),J.instancingColor&&h.enable(3),J.map&&h.enable(4),J.matcap&&h.enable(5),J.envMap&&h.enable(6),J.lightMap&&h.enable(7),J.aoMap&&h.enable(8),J.emissiveMap&&h.enable(9),J.bumpMap&&h.enable(10),J.normalMap&&h.enable(11),J.objectSpaceNormalMap&&h.enable(12),J.tangentSpaceNormalMap&&h.enable(13),J.clearcoat&&h.enable(14),J.clearcoatMap&&h.enable(15),J.clearcoatRoughnessMap&&h.enable(16),J.clearcoatNormalMap&&h.enable(17),J.displacementMap&&h.enable(18),J.specularMap&&h.enable(19),J.roughnessMap&&h.enable(20),J.metalnessMap&&h.enable(21),J.gradientMap&&h.enable(22),J.alphaMap&&h.enable(23),J.alphaTest&&h.enable(24),J.vertexColors&&h.enable(25),J.vertexAlphas&&h.enable(26),J.vertexUvs&&h.enable(27),J.vertexTangents&&h.enable(28),J.uvsVertexOnly&&h.enable(29),J.fog&&h.enable(30),$.push(h.mask),h.disableAll(),J.useFog&&h.enable(0),J.flatShading&&h.enable(1),J.logarithmicDepthBuffer&&h.enable(2),J.skinning&&h.enable(3),J.morphTargets&&h.enable(4),J.morphNormals&&h.enable(5),J.morphColors&&h.enable(6),J.premultipliedAlpha&&h.enable(7),J.shadowMapEnabled&&h.enable(8),J.physicallyCorrectLights&&h.enable(9),J.doubleSided&&h.enable(10),J.flipSided&&h.enable(11),J.useDepthPacking&&h.enable(12),J.dithering&&h.enable(13),J.specularIntensityMap&&h.enable(14),J.specularColorMap&&h.enable(15),J.transmission&&h.enable(16),J.transmissionMap&&h.enable(17),J.thicknessMap&&h.enable(18),J.sheen&&h.enable(19),J.sheenColorMap&&h.enable(20),J.sheenRoughnessMap&&h.enable(21),J.decodeVideoTexture&&h.enable(22),J.opaque&&h.enable(23),$.push(h.mask)}function F($){const J=O[$.type];let se;if(J){const ce=Es[J];se=xx.clone(ce.uniforms)}else se=$.uniforms;return se}function L($,J){let se;for(let ce=0,pe=v.length;ce<pe;ce++){const fe=v[ce];if(fe.cacheKey===J){se=fe,++se.usedTimes;break}}return se===void 0&&(se=new XF(s,J,$,l),v.push(se)),se}function z($){if(--$.usedTimes==0){const J=v.indexOf($);v[J]=v[v.length-1],v.pop(),$.destroy()}}function H($){m.remove($)}function X(){m.dispose()}return{getParameters:N,getProgramCacheKey:k,getUniforms:F,acquireProgram:L,releaseProgram:z,releaseShaderCache:H,programs:v,dispose:X}}function JF(){let s=new WeakMap;function e(l){let u=s.get(l);return u===void 0&&(u={},s.set(l,u)),u}function t(l){s.delete(l)}function r(l,u,h){s.get(l)[u]=h}function o(){s=new WeakMap}return{get:e,remove:t,update:r,dispose:o}}function eU(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function tE(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function nE(){const s=[];let e=0;const t=[],r=[],o=[];function l(){e=0,t.length=0,r.length=0,o.length=0}function u(S,A,R,O,N,k){let D=s[e];return D===void 0?(D={id:S.id,object:S,geometry:A,material:R,groupOrder:O,renderOrder:S.renderOrder,z:N,group:k},s[e]=D):(D.id=S.id,D.object=S,D.geometry=A,D.material=R,D.groupOrder=O,D.renderOrder=S.renderOrder,D.z=N,D.group=k),e++,D}function h(S,A,R,O,N,k){const D=u(S,A,R,O,N,k);R.transmission>0?r.push(D):R.transparent===!0?o.push(D):t.push(D)}function m(S,A,R,O,N,k){const D=u(S,A,R,O,N,k);R.transmission>0?r.unshift(D):R.transparent===!0?o.unshift(D):t.unshift(D)}function v(S,A){t.length>1&&t.sort(S||eU),r.length>1&&r.sort(A||tE),o.length>1&&o.sort(A||tE)}function w(){for(let S=e,A=s.length;S<A;S++){const R=s[S];if(R.id===null)break;R.id=null,R.object=null,R.geometry=null,R.material=null,R.group=null}}return{opaque:t,transmissive:r,transparent:o,init:l,push:h,unshift:m,finish:w,sort:v}}function tU(){let s=new WeakMap;function e(r,o){let l;return s.has(r)===!1?(l=new nE,s.set(r,[l])):o>=s.get(r).length?(l=new nE,s.get(r).push(l)):l=s.get(r)[o],l}function t(){s=new WeakMap}return{get:e,dispose:t}}function nU(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new Qe};break;case"SpotLight":t={position:new le,direction:new le,color:new Qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new Qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new Qe,groundColor:new Qe};break;case"RectAreaLight":t={color:new Qe,position:new le,halfWidth:new le,halfHeight:new le};break}return s[e.id]=t,t}}}function rU(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let iU=0;function sU(s,e){return(e.castShadow?1:0)-(s.castShadow?1:0)}function oU(s,e){const t=new nU,r=rU(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let w=0;w<9;w++)o.probe.push(new le);const l=new le,u=new et,h=new et;function m(w,S){let A=0,R=0,O=0;for(let J=0;J<9;J++)o.probe[J].set(0,0,0);let N=0,k=0,D=0,P=0,F=0,L=0,z=0,H=0;w.sort(sU);const X=S!==!0?Math.PI:1;for(let J=0,se=w.length;J<se;J++){const ce=w[J],pe=ce.color,fe=ce.intensity,b=ce.distance,p=ce.shadow&&ce.shadow.map?ce.shadow.map.texture:null;if(ce.isAmbientLight)A+=pe.r*fe*X,R+=pe.g*fe*X,O+=pe.b*fe*X;else if(ce.isLightProbe)for(let ee=0;ee<9;ee++)o.probe[ee].addScaledVector(ce.sh.coefficients[ee],fe);else if(ce.isDirectionalLight){const ee=t.get(ce);if(ee.color.copy(ce.color).multiplyScalar(ce.intensity*X),ce.castShadow){const E=ce.shadow,me=r.get(ce);me.shadowBias=E.bias,me.shadowNormalBias=E.normalBias,me.shadowRadius=E.radius,me.shadowMapSize=E.mapSize,o.directionalShadow[N]=me,o.directionalShadowMap[N]=p,o.directionalShadowMatrix[N]=ce.shadow.matrix,L++}o.directional[N]=ee,N++}else if(ce.isSpotLight){const ee=t.get(ce);if(ee.position.setFromMatrixPosition(ce.matrixWorld),ee.color.copy(pe).multiplyScalar(fe*X),ee.distance=b,ee.coneCos=Math.cos(ce.angle),ee.penumbraCos=Math.cos(ce.angle*(1-ce.penumbra)),ee.decay=ce.decay,ce.castShadow){const E=ce.shadow,me=r.get(ce);me.shadowBias=E.bias,me.shadowNormalBias=E.normalBias,me.shadowRadius=E.radius,me.shadowMapSize=E.mapSize,o.spotShadow[D]=me,o.spotShadowMap[D]=p,o.spotShadowMatrix[D]=ce.shadow.matrix,H++}o.spot[D]=ee,D++}else if(ce.isRectAreaLight){const ee=t.get(ce);ee.color.copy(pe).multiplyScalar(fe),ee.halfWidth.set(ce.width*.5,0,0),ee.halfHeight.set(0,ce.height*.5,0),o.rectArea[P]=ee,P++}else if(ce.isPointLight){const ee=t.get(ce);if(ee.color.copy(ce.color).multiplyScalar(ce.intensity*X),ee.distance=ce.distance,ee.decay=ce.decay,ce.castShadow){const E=ce.shadow,me=r.get(ce);me.shadowBias=E.bias,me.shadowNormalBias=E.normalBias,me.shadowRadius=E.radius,me.shadowMapSize=E.mapSize,me.shadowCameraNear=E.camera.near,me.shadowCameraFar=E.camera.far,o.pointShadow[k]=me,o.pointShadowMap[k]=p,o.pointShadowMatrix[k]=ce.shadow.matrix,z++}o.point[k]=ee,k++}else if(ce.isHemisphereLight){const ee=t.get(ce);ee.skyColor.copy(ce.color).multiplyScalar(fe*X),ee.groundColor.copy(ce.groundColor).multiplyScalar(fe*X),o.hemi[F]=ee,F++}}P>0&&(e.isWebGL2||s.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=at.LTC_FLOAT_1,o.rectAreaLTC2=at.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=at.LTC_HALF_1,o.rectAreaLTC2=at.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=A,o.ambient[1]=R,o.ambient[2]=O;const $=o.hash;($.directionalLength!==N||$.pointLength!==k||$.spotLength!==D||$.rectAreaLength!==P||$.hemiLength!==F||$.numDirectionalShadows!==L||$.numPointShadows!==z||$.numSpotShadows!==H)&&(o.directional.length=N,o.spot.length=D,o.rectArea.length=P,o.point.length=k,o.hemi.length=F,o.directionalShadow.length=L,o.directionalShadowMap.length=L,o.pointShadow.length=z,o.pointShadowMap.length=z,o.spotShadow.length=H,o.spotShadowMap.length=H,o.directionalShadowMatrix.length=L,o.pointShadowMatrix.length=z,o.spotShadowMatrix.length=H,$.directionalLength=N,$.pointLength=k,$.spotLength=D,$.rectAreaLength=P,$.hemiLength=F,$.numDirectionalShadows=L,$.numPointShadows=z,$.numSpotShadows=H,o.version=iU++)}function v(w,S){let A=0,R=0,O=0,N=0,k=0;const D=S.matrixWorldInverse;for(let P=0,F=w.length;P<F;P++){const L=w[P];if(L.isDirectionalLight){const z=o.directional[A];z.direction.setFromMatrixPosition(L.matrixWorld),l.setFromMatrixPosition(L.target.matrixWorld),z.direction.sub(l),z.direction.transformDirection(D),A++}else if(L.isSpotLight){const z=o.spot[O];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(D),z.direction.setFromMatrixPosition(L.matrixWorld),l.setFromMatrixPosition(L.target.matrixWorld),z.direction.sub(l),z.direction.transformDirection(D),O++}else if(L.isRectAreaLight){const z=o.rectArea[N];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(D),h.identity(),u.copy(L.matrixWorld),u.premultiply(D),h.extractRotation(u),z.halfWidth.set(L.width*.5,0,0),z.halfHeight.set(0,L.height*.5,0),z.halfWidth.applyMatrix4(h),z.halfHeight.applyMatrix4(h),N++}else if(L.isPointLight){const z=o.point[R];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(D),R++}else if(L.isHemisphereLight){const z=o.hemi[k];z.direction.setFromMatrixPosition(L.matrixWorld),z.direction.transformDirection(D),k++}}}return{setup:m,setupView:v,state:o}}function rE(s,e){const t=new oU(s,e),r=[],o=[];function l(){r.length=0,o.length=0}function u(S){r.push(S)}function h(S){o.push(S)}function m(S){t.setup(r,S)}function v(S){t.setupView(r,S)}return{init:l,state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:m,setupLightsView:v,pushLight:u,pushShadow:h}}function aU(s,e){let t=new WeakMap;function r(l,u=0){let h;return t.has(l)===!1?(h=new rE(s,e),t.set(l,[h])):u>=t.get(l).length?(h=new rE(s,e),t.get(l).push(h)):h=t.get(l)[u],h}function o(){t=new WeakMap}return{get:r,dispose:o}}class Hm extends Bn{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=tT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Hm.prototype.isMeshDepthMaterial=!0;class Gm extends Bn{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new le,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Gm.prototype.isMeshDistanceMaterial=!0;const lU=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uU=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function iE(s,e,t){let r=new Ph;const o=new je,l=new je,u=new ln,h=new Hm({depthPacking:nT}),m=new Gm,v={},w=t.maxTextureSize,S={0:Mi,1:na,2:bs},A=new ji({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:lU,fragmentShader:uU}),R=A.clone();R.defines.HORIZONTAL_PASS=1;const O=new xt;O.setAttribute("position",new Dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const N=new ot(O,A),k=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yy,this.render=function(L,z,H){if(k.enabled===!1||k.autoUpdate===!1&&k.needsUpdate===!1||L.length===0)return;const X=s.getRenderTarget(),$=s.getActiveCubeFace(),J=s.getActiveMipmapLevel(),se=s.state;se.setBlending(go),se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);for(let ce=0,pe=L.length;ce<pe;ce++){const fe=L[ce],b=fe.shadow;if(b===void 0){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(b.autoUpdate===!1&&b.needsUpdate===!1)continue;o.copy(b.mapSize);const p=b.getFrameExtents();if(o.multiply(p),l.copy(b.mapSize),(o.x>w||o.y>w)&&(o.x>w&&(l.x=Math.floor(w/p.x),o.x=l.x*p.x,b.mapSize.x=l.x),o.y>w&&(l.y=Math.floor(w/p.y),o.y=l.y*p.y,b.mapSize.y=l.y)),b.map===null&&!b.isPointLightShadow&&this.type===ju&&(b.map=new ci(o.x,o.y),b.map.texture.name=fe.name+".shadowMap",b.mapPass=new ci(o.x,o.y),b.camera.updateProjectionMatrix()),b.map===null){const E={minFilter:ir,magFilter:ir,format:Ti};b.map=new ci(o.x,o.y,E),b.map.texture.name=fe.name+".shadowMap",b.camera.updateProjectionMatrix()}s.setRenderTarget(b.map),s.clear();const ee=b.getViewportCount();for(let E=0;E<ee;E++){const me=b.getViewport(E);u.set(l.x*me.x,l.y*me.y,l.x*me.z,l.y*me.w),se.viewport(u),b.updateMatrices(fe,E),r=b.getFrustum(),F(z,H,b.camera,fe,this.type)}!b.isPointLightShadow&&this.type===ju&&D(b,H),b.needsUpdate=!1}k.needsUpdate=!1,s.setRenderTarget(X,$,J)};function D(L,z){const H=e.update(N);A.defines.VSM_SAMPLES!==L.blurSamples&&(A.defines.VSM_SAMPLES=L.blurSamples,R.defines.VSM_SAMPLES=L.blurSamples,A.needsUpdate=!0,R.needsUpdate=!0),A.uniforms.shadow_pass.value=L.map.texture,A.uniforms.resolution.value=L.mapSize,A.uniforms.radius.value=L.radius,s.setRenderTarget(L.mapPass),s.clear(),s.renderBufferDirect(z,null,H,A,N,null),R.uniforms.shadow_pass.value=L.mapPass.texture,R.uniforms.resolution.value=L.mapSize,R.uniforms.radius.value=L.radius,s.setRenderTarget(L.map),s.clear(),s.renderBufferDirect(z,null,H,R,N,null)}function P(L,z,H,X,$,J){let se=null;const ce=H.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(ce!==void 0?se=ce:se=H.isPointLight===!0?m:h,s.localClippingEnabled&&z.clipShadows===!0&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const pe=se.uuid,fe=z.uuid;let b=v[pe];b===void 0&&(b={},v[pe]=b);let p=b[fe];p===void 0&&(p=se.clone(),b[fe]=p),se=p}return se.visible=z.visible,se.wireframe=z.wireframe,J===ju?se.side=z.shadowSide!==null?z.shadowSide:z.side:se.side=z.shadowSide!==null?z.shadowSide:S[z.side],se.alphaMap=z.alphaMap,se.alphaTest=z.alphaTest,se.clipShadows=z.clipShadows,se.clippingPlanes=z.clippingPlanes,se.clipIntersection=z.clipIntersection,se.displacementMap=z.displacementMap,se.displacementScale=z.displacementScale,se.displacementBias=z.displacementBias,se.wireframeLinewidth=z.wireframeLinewidth,se.linewidth=z.linewidth,H.isPointLight===!0&&se.isMeshDistanceMaterial===!0&&(se.referencePosition.setFromMatrixPosition(H.matrixWorld),se.nearDistance=X,se.farDistance=$),se}function F(L,z,H,X,$){if(L.visible===!1)return;if(L.layers.test(z.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&$===ju)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,L.matrixWorld);const ce=e.update(L),pe=L.material;if(Array.isArray(pe)){const fe=ce.groups;for(let b=0,p=fe.length;b<p;b++){const ee=fe[b],E=pe[ee.materialIndex];if(E&&E.visible){const me=P(L,E,X,H.near,H.far,$);s.renderBufferDirect(H,null,ce,me,L,ee)}}}else if(pe.visible){const fe=P(L,pe,X,H.near,H.far,$);s.renderBufferDirect(H,null,ce,fe,L,null)}}const se=L.children;for(let ce=0,pe=se.length;ce<pe;ce++)F(se[ce],z,H,X,$)}}function cU(s,e,t){const r=t.isWebGL2;function o(){let V=!1;const Q=new ln;let Z=null;const ne=new ln(0,0,0,0);return{setMask:function(ae){Z!==ae&&!V&&(s.colorMask(ae,ae,ae,ae),Z=ae)},setLocked:function(ae){V=ae},setClear:function(ae,ue,he,Ce,He){He===!0&&(ae*=Ce,ue*=Ce,he*=Ce),Q.set(ae,ue,he,Ce),ne.equals(Q)===!1&&(s.clearColor(ae,ue,he,Ce),ne.copy(Q))},reset:function(){V=!1,Z=null,ne.set(-1,0,0,0)}}}function l(){let V=!1,Q=null,Z=null,ne=null;return{setTest:function(ae){ae?Ie(2929):Me(2929)},setMask:function(ae){Q!==ae&&!V&&(s.depthMask(ae),Q=ae)},setFunc:function(ae){if(Z!==ae){if(ae)switch(ae){case wM:s.depthFunc(512);break;case bM:s.depthFunc(519);break;case SM:s.depthFunc(513);break;case rm:s.depthFunc(515);break;case MM:s.depthFunc(514);break;case TM:s.depthFunc(518);break;case EM:s.depthFunc(516);break;case AM:s.depthFunc(517);break;default:s.depthFunc(515)}else s.depthFunc(515);Z=ae}},setLocked:function(ae){V=ae},setClear:function(ae){ne!==ae&&(s.clearDepth(ae),ne=ae)},reset:function(){V=!1,Q=null,Z=null,ne=null}}}function u(){let V=!1,Q=null,Z=null,ne=null,ae=null,ue=null,he=null,Ce=null,He=null;return{setTest:function(Oe){V||(Oe?Ie(2960):Me(2960))},setMask:function(Oe){Q!==Oe&&!V&&(s.stencilMask(Oe),Q=Oe)},setFunc:function(Oe,gt,lt){(Z!==Oe||ne!==gt||ae!==lt)&&(s.stencilFunc(Oe,gt,lt),Z=Oe,ne=gt,ae=lt)},setOp:function(Oe,gt,lt){(ue!==Oe||he!==gt||Ce!==lt)&&(s.stencilOp(Oe,gt,lt),ue=Oe,he=gt,Ce=lt)},setLocked:function(Oe){V=Oe},setClear:function(Oe){He!==Oe&&(s.clearStencil(Oe),He=Oe)},reset:function(){V=!1,Q=null,Z=null,ne=null,ae=null,ue=null,he=null,Ce=null,He=null}}}const h=new o,m=new l,v=new u;let w={},S={},A=new WeakMap,R=[],O=null,N=!1,k=null,D=null,P=null,F=null,L=null,z=null,H=null,X=!1,$=null,J=null,se=null,ce=null,pe=null;const fe=s.getParameter(35661);let b=!1,p=0;const ee=s.getParameter(7938);ee.indexOf("WebGL")!==-1?(p=parseFloat(/^WebGL (\d)/.exec(ee)[1]),b=p>=1):ee.indexOf("OpenGL ES")!==-1&&(p=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),b=p>=2);let E=null,me={};const Se=s.getParameter(3088),Te=s.getParameter(2978),ye=new ln().fromArray(Se),de=new ln().fromArray(Te);function Re(V,Q,Z){const ne=new Uint8Array(4),ae=s.createTexture();s.bindTexture(V,ae),s.texParameteri(V,10241,9728),s.texParameteri(V,10240,9728);for(let ue=0;ue<Z;ue++)s.texImage2D(Q+ue,0,6408,1,1,0,6408,5121,ne);return ae}const we={};we[3553]=Re(3553,3553,1),we[34067]=Re(34067,34069,6),h.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Ie(2929),m.setFunc(rm),Ye(!1),Fe(vy),Ie(2884),De(go);function Ie(V){w[V]!==!0&&(s.enable(V),w[V]=!0)}function Me(V){w[V]!==!1&&(s.disable(V),w[V]=!1)}function Be(V,Q){return S[V]!==Q?(s.bindFramebuffer(V,Q),S[V]=Q,r&&(V===36009&&(S[36160]=Q),V===36160&&(S[36009]=Q)),!0):!1}function Ve(V,Q){let Z=R,ne=!1;if(V)if(Z=A.get(Q),Z===void 0&&(Z=[],A.set(Q,Z)),V.isWebGLMultipleRenderTargets){const ae=V.texture;if(Z.length!==ae.length||Z[0]!==36064){for(let ue=0,he=ae.length;ue<he;ue++)Z[ue]=36064+ue;Z.length=ae.length,ne=!0}}else Z[0]!==36064&&(Z[0]=36064,ne=!0);else Z[0]!==1029&&(Z[0]=1029,ne=!0);ne&&(t.isWebGL2?s.drawBuffers(Z):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Z))}function qe(V){return O!==V?(s.useProgram(V),O=V,!0):!1}const W={[yl]:32774,[cM]:32778,[fM]:32779};if(r)W[Sy]=32775,W[My]=32776;else{const V=e.get("EXT_blend_minmax");V!==null&&(W[Sy]=V.MIN_EXT,W[My]=V.MAX_EXT)}const We={[hM]:0,[dM]:1,[pM]:768,[Ty]:770,[_M]:776,[yM]:774,[gM]:772,[mM]:769,[Ey]:771,[xM]:775,[vM]:773};function De(V,Q,Z,ne,ae,ue,he,Ce){if(V===go){N===!0&&(Me(3042),N=!1);return}if(N===!1&&(Ie(3042),N=!0),V!==uM){if(V!==k||Ce!==X){if((D!==yl||L!==yl)&&(s.blendEquation(32774),D=yl,L=yl),Ce)switch(V){case vl:s.blendFuncSeparate(1,771,1,771);break;case _y:s.blendFunc(1,1);break;case wy:s.blendFuncSeparate(0,769,0,1);break;case by:s.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}else switch(V){case vl:s.blendFuncSeparate(770,771,1,771);break;case _y:s.blendFunc(770,1);break;case wy:s.blendFuncSeparate(0,769,0,1);break;case by:s.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}P=null,F=null,z=null,H=null,k=V,X=Ce}return}ae=ae||Q,ue=ue||Z,he=he||ne,(Q!==D||ae!==L)&&(s.blendEquationSeparate(W[Q],W[ae]),D=Q,L=ae),(Z!==P||ne!==F||ue!==z||he!==H)&&(s.blendFuncSeparate(We[Z],We[ne],We[ue],We[he]),P=Z,F=ne,z=ue,H=he),k=V,X=null}function Pe(V,Q){V.side===bs?Me(2884):Ie(2884);let Z=V.side===Mi;Q&&(Z=!Z),Ye(Z),V.blending===vl&&V.transparent===!1?De(go):De(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),m.setFunc(V.depthFunc),m.setTest(V.depthTest),m.setMask(V.depthWrite),h.setMask(V.colorWrite);const ne=V.stencilWrite;v.setTest(ne),ne&&(v.setMask(V.stencilWriteMask),v.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),v.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),St(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),V.alphaToCoverage===!0?Ie(32926):Me(32926)}function Ye(V){$!==V&&(V?s.frontFace(2304):s.frontFace(2305),$=V)}function Fe(V){V!==oM?(Ie(2884),V!==J&&(V===vy?s.cullFace(1029):V===aM?s.cullFace(1028):s.cullFace(1032))):Me(2884),J=V}function oe(V){V!==se&&(b&&s.lineWidth(V),se=V)}function St(V,Q,Z){V?(Ie(32823),(ce!==Q||pe!==Z)&&(s.polygonOffset(Q,Z),ce=Q,pe=Z)):Me(32823)}function q(V){V?Ie(3089):Me(3089)}function Xe(V){V===void 0&&(V=33984+fe-1),E!==V&&(s.activeTexture(V),E=V)}function Ft(V,Q){E===null&&Xe();let Z=me[E];Z===void 0&&(Z={type:void 0,texture:void 0},me[E]=Z),(Z.type!==V||Z.texture!==Q)&&(s.bindTexture(V,Q||we[V]),Z.type=V,Z.texture=Q)}function Y(){const V=me[E];V!==void 0&&V.type!==void 0&&(s.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)}function n(){try{s.compressedTexImage2D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function i(){try{s.texSubImage2D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function a(){try{s.texSubImage3D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function f(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function g(){try{s.texStorage2D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function y(){try{s.texStorage3D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function M(){try{s.texImage2D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function C(){try{s.texImage3D.apply(s,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function I(V){ye.equals(V)===!1&&(s.scissor(V.x,V.y,V.z,V.w),ye.copy(V))}function B(V){de.equals(V)===!1&&(s.viewport(V.x,V.y,V.z,V.w),de.copy(V))}function G(){s.disable(3042),s.disable(2884),s.disable(2929),s.disable(32823),s.disable(3089),s.disable(2960),s.disable(32926),s.blendEquation(32774),s.blendFunc(1,0),s.blendFuncSeparate(1,0,1,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(513),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(519,0,4294967295),s.stencilOp(7680,7680,7680),s.clearStencil(0),s.cullFace(1029),s.frontFace(2305),s.polygonOffset(0,0),s.activeTexture(33984),s.bindFramebuffer(36160,null),r===!0&&(s.bindFramebuffer(36009,null),s.bindFramebuffer(36008,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),w={},E=null,me={},S={},A=new WeakMap,R=[],O=null,N=!1,k=null,D=null,P=null,F=null,L=null,z=null,H=null,X=!1,$=null,J=null,se=null,ce=null,pe=null,ye.set(0,0,s.canvas.width,s.canvas.height),de.set(0,0,s.canvas.width,s.canvas.height),h.reset(),m.reset(),v.reset()}return{buffers:{color:h,depth:m,stencil:v},enable:Ie,disable:Me,bindFramebuffer:Be,drawBuffers:Ve,useProgram:qe,setBlending:De,setMaterial:Pe,setFlipSided:Ye,setCullFace:Fe,setLineWidth:oe,setPolygonOffset:St,setScissorTest:q,activeTexture:Xe,bindTexture:Ft,unbindTexture:Y,compressedTexImage2D:n,texImage2D:M,texImage3D:C,texStorage2D:g,texStorage3D:y,texSubImage2D:i,texSubImage3D:a,compressedTexSubImage2D:f,scissor:I,viewport:B,reset:G}}function fU(s,e,t,r,o,l,u){const h=o.isWebGL2,m=o.maxTextures,v=o.maxCubemapSize,w=o.maxTextureSize,S=o.maxSamples,A=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,R=/OculusBrowser/g.test(navigator.userAgent),O=new WeakMap;let N;const k=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function P(n,i){return D?new OffscreenCanvas(n,i):Th("canvas")}function F(n,i,a,f){let g=1;if((n.width>f||n.height>f)&&(g=f/Math.max(n.width,n.height)),g<1||i===!0)if(typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap){const y=i?pm:Math.floor,M=y(g*n.width),C=y(g*n.height);N===void 0&&(N=P(M,C));const I=a?P(M,C):N;return I.width=M,I.height=C,I.getContext("2d").drawImage(n,0,0,M,C),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+n.width+"x"+n.height+") to ("+M+"x"+C+")."),I}else return"data"in n&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+n.width+"x"+n.height+")."),n;return n}function L(n){return Zy(n.width)&&Zy(n.height)}function z(n){return h?!1:n.wrapS!==Lr||n.wrapT!==Lr||n.minFilter!==ir&&n.minFilter!==jn}function H(n,i){return n.generateMipmaps&&i&&n.minFilter!==ir&&n.minFilter!==jn}function X(n){s.generateMipmap(n)}function $(n,i,a,f,g=!1){if(h===!1)return i;if(n!==null){if(s[n]!==void 0)return s[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let y=i;return i===6403&&(a===5126&&(y=33326),a===5131&&(y=33325),a===5121&&(y=33321)),i===33319&&(a===5126&&(y=33328),a===5131&&(y=33327),a===5121&&(y=33323)),i===6408&&(a===5126&&(y=34836),a===5131&&(y=34842),a===5121&&(y=f===Xt&&g===!1?35907:32856),a===32819&&(y=32854),a===32820&&(y=32855)),(y===33325||y===33326||y===33327||y===33328||y===34842||y===34836)&&e.get("EXT_color_buffer_float"),y}function J(n,i,a){return H(n,a)===!0||n.isFramebufferTexture&&n.minFilter!==ir&&n.minFilter!==jn?Math.log2(Math.max(i.width,i.height))+1:n.mipmaps!==void 0&&n.mipmaps.length>0?n.mipmaps.length:n.isCompressedTexture&&Array.isArray(n.image)?i.mipmaps.length:1}function se(n){return n===ir||n===xh||n===_h?9728:9729}function ce(n){const i=n.target;i.removeEventListener("dispose",ce),fe(i),i.isVideoTexture&&O.delete(i)}function pe(n){const i=n.target;i.removeEventListener("dispose",pe),p(i)}function fe(n){const i=r.get(n);if(i.__webglInit===void 0)return;const a=n.source,f=k.get(a);if(f){const g=f[i.__cacheKey];g.usedTimes--,g.usedTimes===0&&b(n),Object.keys(f).length===0&&k.delete(a)}r.remove(n)}function b(n){const i=r.get(n);s.deleteTexture(i.__webglTexture);const a=n.source,f=k.get(a);delete f[i.__cacheKey],u.memory.textures--}function p(n){const i=n.texture,a=r.get(n),f=r.get(i);if(f.__webglTexture!==void 0&&(s.deleteTexture(f.__webglTexture),u.memory.textures--),n.depthTexture&&n.depthTexture.dispose(),n.isWebGLCubeRenderTarget)for(let g=0;g<6;g++)s.deleteFramebuffer(a.__webglFramebuffer[g]),a.__webglDepthbuffer&&s.deleteRenderbuffer(a.__webglDepthbuffer[g]);else s.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&s.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&s.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&s.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&s.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(n.isWebGLMultipleRenderTargets)for(let g=0,y=i.length;g<y;g++){const M=r.get(i[g]);M.__webglTexture&&(s.deleteTexture(M.__webglTexture),u.memory.textures--),r.remove(i[g])}r.remove(i),r.remove(n)}let ee=0;function E(){ee=0}function me(){const n=ee;return n>=m&&console.warn("THREE.WebGLTextures: Trying to use "+n+" texture units while this GPU supports only "+m),ee+=1,n}function Se(n){const i=[];return i.push(n.wrapS),i.push(n.wrapT),i.push(n.magFilter),i.push(n.minFilter),i.push(n.anisotropy),i.push(n.internalFormat),i.push(n.format),i.push(n.type),i.push(n.generateMipmaps),i.push(n.premultiplyAlpha),i.push(n.flipY),i.push(n.unpackAlignment),i.push(n.encoding),i.join()}function Te(n,i){const a=r.get(n);if(n.isVideoTexture&&Ft(n),n.isRenderTargetTexture===!1&&n.version>0&&a.__version!==n.version){const f=n.image;if(f===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(f.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ve(a,n,i);return}}t.activeTexture(33984+i),t.bindTexture(3553,a.__webglTexture)}function ye(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){Ve(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(35866,a.__webglTexture)}function de(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){Ve(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(32879,a.__webglTexture)}function Re(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){qe(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(34067,a.__webglTexture)}const we={[Ws]:10497,[Lr]:33071,[Yu]:33648},Ie={[ir]:9728,[xh]:9984,[_h]:9986,[jn]:9729,[sm]:9985,[vo]:9987};function Me(n,i,a){if(a?(s.texParameteri(n,10242,we[i.wrapS]),s.texParameteri(n,10243,we[i.wrapT]),(n===32879||n===35866)&&s.texParameteri(n,32882,we[i.wrapR]),s.texParameteri(n,10240,Ie[i.magFilter]),s.texParameteri(n,10241,Ie[i.minFilter])):(s.texParameteri(n,10242,33071),s.texParameteri(n,10243,33071),(n===32879||n===35866)&&s.texParameteri(n,32882,33071),(i.wrapS!==Lr||i.wrapT!==Lr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(n,10240,se(i.magFilter)),s.texParameteri(n,10241,se(i.minFilter)),i.minFilter!==ir&&i.minFilter!==jn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const f=e.get("EXT_texture_filter_anisotropic");if(i.type===xo&&e.has("OES_texture_float_linear")===!1||h===!1&&i.type===Qu&&e.has("OES_texture_half_float_linear")===!1)return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(s.texParameterf(n,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,o.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function Be(n,i){let a=!1;n.__webglInit===void 0&&(n.__webglInit=!0,i.addEventListener("dispose",ce));const f=i.source;let g=k.get(f);g===void 0&&(g={},k.set(f,g));const y=Se(i);if(y!==n.__cacheKey){g[y]===void 0&&(g[y]={texture:s.createTexture(),usedTimes:0},u.memory.textures++,a=!0),g[y].usedTimes++;const M=g[n.__cacheKey];M!==void 0&&(g[n.__cacheKey].usedTimes--,M.usedTimes===0&&b(i)),n.__cacheKey=y,n.__webglTexture=g[y].texture}return a}function Ve(n,i,a){let f=3553;i.isDataArrayTexture&&(f=35866),i.isData3DTexture&&(f=32879);const g=Be(n,i),y=i.source;if(t.activeTexture(33984+a),t.bindTexture(f,n.__webglTexture),y.version!==y.__currentVersion||g===!0){s.pixelStorei(37440,i.flipY),s.pixelStorei(37441,i.premultiplyAlpha),s.pixelStorei(3317,i.unpackAlignment),s.pixelStorei(37443,0);const M=z(i)&&L(i.image)===!1;let C=F(i.image,M,!1,w);C=Y(i,C);const I=L(C)||h,B=l.convert(i.format,i.encoding);let G=l.convert(i.type),V=$(i.internalFormat,B,G,i.encoding,i.isVideoTexture);Me(f,i,I);let Q;const Z=i.mipmaps,ne=h&&i.isVideoTexture!==!0,ae=n.__version===void 0||g===!0,ue=J(i,C,I);if(i.isDepthTexture)V=6402,h?i.type===xo?V=36012:i.type===wh?V=33190:i.type===xl?V=35056:V=33189:i.type===xo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===sa&&V===6402&&i.type!==Ku&&i.type!==wh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ku,G=l.convert(i.type)),i.format===_l&&V===6402&&(V=34041,i.type!==xl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=xl,G=l.convert(i.type))),ae&&(ne?t.texStorage2D(3553,1,V,C.width,C.height):t.texImage2D(3553,0,V,C.width,C.height,0,B,G,null));else if(i.isDataTexture)if(Z.length>0&&I){ne&&ae&&t.texStorage2D(3553,ue,V,Z[0].width,Z[0].height);for(let he=0,Ce=Z.length;he<Ce;he++)Q=Z[he],ne?t.texSubImage2D(3553,he,0,0,Q.width,Q.height,B,G,Q.data):t.texImage2D(3553,he,V,Q.width,Q.height,0,B,G,Q.data);i.generateMipmaps=!1}else ne?(ae&&t.texStorage2D(3553,ue,V,C.width,C.height),t.texSubImage2D(3553,0,0,0,C.width,C.height,B,G,C.data)):t.texImage2D(3553,0,V,C.width,C.height,0,B,G,C.data);else if(i.isCompressedTexture){ne&&ae&&t.texStorage2D(3553,ue,V,Z[0].width,Z[0].height);for(let he=0,Ce=Z.length;he<Ce;he++)Q=Z[he],i.format!==Ti?B!==null?ne?t.compressedTexSubImage2D(3553,he,0,0,Q.width,Q.height,B,Q.data):t.compressedTexImage2D(3553,he,V,Q.width,Q.height,0,Q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ne?t.texSubImage2D(3553,he,0,0,Q.width,Q.height,B,G,Q.data):t.texImage2D(3553,he,V,Q.width,Q.height,0,B,G,Q.data)}else if(i.isDataArrayTexture)ne?(ae&&t.texStorage3D(35866,ue,V,C.width,C.height,C.depth),t.texSubImage3D(35866,0,0,0,0,C.width,C.height,C.depth,B,G,C.data)):t.texImage3D(35866,0,V,C.width,C.height,C.depth,0,B,G,C.data);else if(i.isData3DTexture)ne?(ae&&t.texStorage3D(32879,ue,V,C.width,C.height,C.depth),t.texSubImage3D(32879,0,0,0,0,C.width,C.height,C.depth,B,G,C.data)):t.texImage3D(32879,0,V,C.width,C.height,C.depth,0,B,G,C.data);else if(i.isFramebufferTexture){if(ae)if(ne)t.texStorage2D(3553,ue,V,C.width,C.height);else{let he=C.width,Ce=C.height;for(let He=0;He<ue;He++)t.texImage2D(3553,He,V,he,Ce,0,B,G,null),he>>=1,Ce>>=1}}else if(Z.length>0&&I){ne&&ae&&t.texStorage2D(3553,ue,V,Z[0].width,Z[0].height);for(let he=0,Ce=Z.length;he<Ce;he++)Q=Z[he],ne?t.texSubImage2D(3553,he,0,0,B,G,Q):t.texImage2D(3553,he,V,B,G,Q);i.generateMipmaps=!1}else ne?(ae&&t.texStorage2D(3553,ue,V,C.width,C.height),t.texSubImage2D(3553,0,0,0,B,G,C)):t.texImage2D(3553,0,V,B,G,C);H(i,I)&&X(f),y.__currentVersion=y.version,i.onUpdate&&i.onUpdate(i)}n.__version=i.version}function qe(n,i,a){if(i.image.length!==6)return;const f=Be(n,i),g=i.source;if(t.activeTexture(33984+a),t.bindTexture(34067,n.__webglTexture),g.version!==g.__currentVersion||f===!0){s.pixelStorei(37440,i.flipY),s.pixelStorei(37441,i.premultiplyAlpha),s.pixelStorei(3317,i.unpackAlignment),s.pixelStorei(37443,0);const y=i.isCompressedTexture||i.image[0].isCompressedTexture,M=i.image[0]&&i.image[0].isDataTexture,C=[];for(let he=0;he<6;he++)!y&&!M?C[he]=F(i.image[he],!1,!0,v):C[he]=M?i.image[he].image:i.image[he],C[he]=Y(i,C[he]);const I=C[0],B=L(I)||h,G=l.convert(i.format,i.encoding),V=l.convert(i.type),Q=$(i.internalFormat,G,V,i.encoding),Z=h&&i.isVideoTexture!==!0,ne=n.__version===void 0;let ae=J(i,I,B);Me(34067,i,B);let ue;if(y){Z&&ne&&t.texStorage2D(34067,ae,Q,I.width,I.height);for(let he=0;he<6;he++){ue=C[he].mipmaps;for(let Ce=0;Ce<ue.length;Ce++){const He=ue[Ce];i.format!==Ti?G!==null?Z?t.compressedTexSubImage2D(34069+he,Ce,0,0,He.width,He.height,G,He.data):t.compressedTexImage2D(34069+he,Ce,Q,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Z?t.texSubImage2D(34069+he,Ce,0,0,He.width,He.height,G,V,He.data):t.texImage2D(34069+he,Ce,Q,He.width,He.height,0,G,V,He.data)}}}else{ue=i.mipmaps,Z&&ne&&(ue.length>0&&ae++,t.texStorage2D(34067,ae,Q,C[0].width,C[0].height));for(let he=0;he<6;he++)if(M){Z?t.texSubImage2D(34069+he,0,0,0,C[he].width,C[he].height,G,V,C[he].data):t.texImage2D(34069+he,0,Q,C[he].width,C[he].height,0,G,V,C[he].data);for(let Ce=0;Ce<ue.length;Ce++){const Oe=ue[Ce].image[he].image;Z?t.texSubImage2D(34069+he,Ce+1,0,0,Oe.width,Oe.height,G,V,Oe.data):t.texImage2D(34069+he,Ce+1,Q,Oe.width,Oe.height,0,G,V,Oe.data)}}else{Z?t.texSubImage2D(34069+he,0,0,0,G,V,C[he]):t.texImage2D(34069+he,0,Q,G,V,C[he]);for(let Ce=0;Ce<ue.length;Ce++){const He=ue[Ce];Z?t.texSubImage2D(34069+he,Ce+1,0,0,G,V,He.image[he]):t.texImage2D(34069+he,Ce+1,Q,G,V,He.image[he])}}}H(i,B)&&X(34067),g.__currentVersion=g.version,i.onUpdate&&i.onUpdate(i)}n.__version=i.version}function W(n,i,a,f,g){const y=l.convert(a.format,a.encoding),M=l.convert(a.type),C=$(a.internalFormat,y,M,a.encoding);r.get(i).__hasExternalTextures||(g===32879||g===35866?t.texImage3D(g,0,C,i.width,i.height,i.depth,0,y,M,null):t.texImage2D(g,0,C,i.width,i.height,0,y,M,null)),t.bindFramebuffer(36160,n),Xe(i)?A.framebufferTexture2DMultisampleEXT(36160,f,g,r.get(a).__webglTexture,0,q(i)):s.framebufferTexture2D(36160,f,g,r.get(a).__webglTexture,0),t.bindFramebuffer(36160,null)}function We(n,i,a){if(s.bindRenderbuffer(36161,n),i.depthBuffer&&!i.stencilBuffer){let f=33189;if(a||Xe(i)){const g=i.depthTexture;g&&g.isDepthTexture&&(g.type===xo?f=36012:g.type===wh&&(f=33190));const y=q(i);Xe(i)?A.renderbufferStorageMultisampleEXT(36161,y,f,i.width,i.height):s.renderbufferStorageMultisample(36161,y,f,i.width,i.height)}else s.renderbufferStorage(36161,f,i.width,i.height);s.framebufferRenderbuffer(36160,36096,36161,n)}else if(i.depthBuffer&&i.stencilBuffer){const f=q(i);a&&Xe(i)===!1?s.renderbufferStorageMultisample(36161,f,35056,i.width,i.height):Xe(i)?A.renderbufferStorageMultisampleEXT(36161,f,35056,i.width,i.height):s.renderbufferStorage(36161,34041,i.width,i.height),s.framebufferRenderbuffer(36160,33306,36161,n)}else{const f=i.isWebGLMultipleRenderTargets===!0?i.texture[0]:i.texture,g=l.convert(f.format,f.encoding),y=l.convert(f.type),M=$(f.internalFormat,g,y,f.encoding),C=q(i);a&&Xe(i)===!1?s.renderbufferStorageMultisample(36161,C,M,i.width,i.height):Xe(i)?A.renderbufferStorageMultisampleEXT(36161,C,M,i.width,i.height):s.renderbufferStorage(36161,M,i.width,i.height)}s.bindRenderbuffer(36161,null)}function De(n,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,n),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),Te(i.depthTexture,0);const f=r.get(i.depthTexture).__webglTexture,g=q(i);if(i.depthTexture.format===sa)Xe(i)?A.framebufferTexture2DMultisampleEXT(36160,36096,3553,f,0,g):s.framebufferTexture2D(36160,36096,3553,f,0);else if(i.depthTexture.format===_l)Xe(i)?A.framebufferTexture2DMultisampleEXT(36160,33306,3553,f,0,g):s.framebufferTexture2D(36160,33306,3553,f,0);else throw new Error("Unknown depthTexture format")}function Pe(n){const i=r.get(n),a=n.isWebGLCubeRenderTarget===!0;if(n.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");De(i.__webglFramebuffer,n)}else if(a){i.__webglDepthbuffer=[];for(let f=0;f<6;f++)t.bindFramebuffer(36160,i.__webglFramebuffer[f]),i.__webglDepthbuffer[f]=s.createRenderbuffer(),We(i.__webglDepthbuffer[f],n,!1)}else t.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=s.createRenderbuffer(),We(i.__webglDepthbuffer,n,!1);t.bindFramebuffer(36160,null)}function Ye(n,i,a){const f=r.get(n);i!==void 0&&W(f.__webglFramebuffer,n,n.texture,36064,3553),a!==void 0&&Pe(n)}function Fe(n){const i=n.texture,a=r.get(n),f=r.get(i);n.addEventListener("dispose",pe),n.isWebGLMultipleRenderTargets!==!0&&(f.__webglTexture===void 0&&(f.__webglTexture=s.createTexture()),f.__version=i.version,u.memory.textures++);const g=n.isWebGLCubeRenderTarget===!0,y=n.isWebGLMultipleRenderTargets===!0,M=L(n)||h;if(g){a.__webglFramebuffer=[];for(let C=0;C<6;C++)a.__webglFramebuffer[C]=s.createFramebuffer()}else if(a.__webglFramebuffer=s.createFramebuffer(),y)if(o.drawBuffers){const C=n.texture;for(let I=0,B=C.length;I<B;I++){const G=r.get(C[I]);G.__webglTexture===void 0&&(G.__webglTexture=s.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(h&&n.samples>0&&Xe(n)===!1){a.__webglMultisampledFramebuffer=s.createFramebuffer(),a.__webglColorRenderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(36161,a.__webglColorRenderbuffer);const C=l.convert(i.format,i.encoding),I=l.convert(i.type),B=$(i.internalFormat,C,I,i.encoding),G=q(n);s.renderbufferStorageMultisample(36161,G,B,n.width,n.height),t.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),s.bindRenderbuffer(36161,null),n.depthBuffer&&(a.__webglDepthRenderbuffer=s.createRenderbuffer(),We(a.__webglDepthRenderbuffer,n,!0)),t.bindFramebuffer(36160,null)}if(g){t.bindTexture(34067,f.__webglTexture),Me(34067,i,M);for(let C=0;C<6;C++)W(a.__webglFramebuffer[C],n,i,36064,34069+C);H(i,M)&&X(34067),t.unbindTexture()}else if(y){const C=n.texture;for(let I=0,B=C.length;I<B;I++){const G=C[I],V=r.get(G);t.bindTexture(3553,V.__webglTexture),Me(3553,G,M),W(a.__webglFramebuffer,n,G,36064+I,3553),H(G,M)&&X(3553)}t.unbindTexture()}else{let C=3553;(n.isWebGL3DRenderTarget||n.isWebGLArrayRenderTarget)&&(h?C=n.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(C,f.__webglTexture),Me(C,i,M),W(a.__webglFramebuffer,n,i,36064,C),H(i,M)&&X(C),t.unbindTexture()}n.depthBuffer&&Pe(n)}function oe(n){const i=L(n)||h,a=n.isWebGLMultipleRenderTargets===!0?n.texture:[n.texture];for(let f=0,g=a.length;f<g;f++){const y=a[f];if(H(y,i)){const M=n.isWebGLCubeRenderTarget?34067:3553,C=r.get(y).__webglTexture;t.bindTexture(M,C),X(M),t.unbindTexture()}}}function St(n){if(h&&n.samples>0&&Xe(n)===!1){const i=n.width,a=n.height;let f=16384;const g=[36064],y=n.stencilBuffer?33306:36096;n.depthBuffer&&g.push(y);const M=r.get(n),C=M.__ignoreDepthValues!==void 0?M.__ignoreDepthValues:!1;C===!1&&(n.depthBuffer&&(f|=256),n.stencilBuffer&&(f|=1024)),t.bindFramebuffer(36008,M.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,M.__webglFramebuffer),C===!0&&(s.invalidateFramebuffer(36008,[y]),s.invalidateFramebuffer(36009,[y])),s.blitFramebuffer(0,0,i,a,0,0,i,a,f,9728),R&&s.invalidateFramebuffer(36008,g),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,M.__webglMultisampledFramebuffer)}}function q(n){return Math.min(S,n.samples)}function Xe(n){const i=r.get(n);return h&&n.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&i.__useRenderToTexture!==!1}function Ft(n){const i=u.render.frame;O.get(n)!==i&&(O.set(n,i),n.update())}function Y(n,i){const a=n.encoding,f=n.format,g=n.type;return n.isCompressedTexture===!0||n.isVideoTexture===!0||n.format===dm||a!==Gi&&(a===Xt?h===!1?e.has("EXT_sRGB")===!0&&f===Ti?(n.format=dm,n.minFilter=jn,n.generateMipmaps=!1):i=la.sRGBToLinear(i):(f!==Ti||g!==yo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",a)),i}this.allocateTextureUnit=me,this.resetTextureUnits=E,this.setTexture2D=Te,this.setTexture2DArray=ye,this.setTexture3D=de,this.setTextureCube=Re,this.rebindTextures=Ye,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=oe,this.updateMultisampleRenderTarget=St,this.setupDepthRenderbuffer=Pe,this.setupFrameBufferTexture=W,this.useMultisampledRTT=Xe}function sE(s,e,t){const r=t.isWebGL2;function o(l,u=null){let h;if(l===yo)return 5121;if(l===UM)return 32819;if(l===BM)return 32820;if(l===OM)return 5120;if(l===NM)return 5122;if(l===Ku)return 5123;if(l===FM)return 5124;if(l===wh)return 5125;if(l===xo)return 5126;if(l===Qu)return r?5131:(h=e.get("OES_texture_half_float"),h!==null?h.HALF_FLOAT_OES:null);if(l===zM)return 6406;if(l===Ti)return 6408;if(l===GM)return 6409;if(l===VM)return 6410;if(l===sa)return 6402;if(l===_l)return 34041;if(l===WM)return 6403;if(l===HM)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(l===dm)return h=e.get("EXT_sRGB"),h!==null?h.SRGB_ALPHA_EXT:null;if(l===$M)return 36244;if(l===jM)return 33319;if(l===qM)return 33320;if(l===XM)return 36249;if(l===om||l===am||l===lm||l===um)if(u===Xt)if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),h!==null){if(l===om)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===am)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===lm)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===um)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(h=e.get("WEBGL_compressed_texture_s3tc"),h!==null){if(l===om)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===am)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===lm)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===um)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===Ay||l===Cy||l===Ry||l===Ly)if(h=e.get("WEBGL_compressed_texture_pvrtc"),h!==null){if(l===Ay)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===Cy)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===Ry)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Ly)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===YM)return h=e.get("WEBGL_compressed_texture_etc1"),h!==null?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===Iy||l===Py)if(h=e.get("WEBGL_compressed_texture_etc"),h!==null){if(l===Iy)return u===Xt?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(l===Py)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===ky||l===Dy||l===Oy||l===Ny||l===Fy||l===Uy||l===By||l===zy||l===Hy||l===Gy||l===Vy||l===Wy||l===$y||l===jy)if(h=e.get("WEBGL_compressed_texture_astc"),h!==null){if(l===ky)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===Dy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===Oy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===Ny)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===Fy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===Uy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===By)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===zy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===Hy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===Gy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===Vy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===Wy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===$y)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===jy)return u===Xt?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===qy)if(h=e.get("EXT_texture_compression_bptc"),h!==null){if(l===qy)return u===Xt?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return l===xl?r?34042:(h=e.get("WEBGL_depth_texture"),h!==null?h.UNSIGNED_INT_24_8_WEBGL:null):s[l]!==void 0?s[l]:null}return{convert:o}}class Cx extends mr{constructor(e=[]){super();this.cameras=e}}Cx.prototype.isArrayCamera=!0;class Vr extends Ht{constructor(){super();this.type="Group"}}Vr.prototype.isGroup=!0;const hU={type:"move"};class Rx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Vr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Vr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Vr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let o=null,l=null,u=null;const h=this._targetRay,m=this._grip,v=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(h!==null&&(o=t.getPose(e.targetRaySpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(hU))),v&&e.hand){u=!0;for(const N of e.hand.values()){const k=t.getJointPose(N,r);if(v.joints[N.jointName]===void 0){const P=new Vr;P.matrixAutoUpdate=!1,P.visible=!1,v.joints[N.jointName]=P,v.add(P)}const D=v.joints[N.jointName];k!==null&&(D.matrix.fromArray(k.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale),D.jointRadius=k.radius),D.visible=k!==null}const w=v.joints["index-finger-tip"],S=v.joints["thumb-tip"],A=w.position.distanceTo(S.position),R=.02,O=.005;v.inputState.pinching&&A>R+O?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&A<=R-O&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,r),l!==null&&(m.matrix.fromArray(l.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),l.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(l.linearVelocity)):m.hasLinearVelocity=!1,l.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(l.angularVelocity)):m.hasAngularVelocity=!1));return h!==null&&(h.visible=o!==null),m!==null&&(m.visible=l!==null),v!==null&&(v.visible=u!==null),this}}class Lx extends Un{constructor(e,t,r,o,l,u,h,m,v,w){if(w=w!==void 0?w:sa,w!==sa&&w!==_l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&w===sa&&(r=Ku),r===void 0&&w===_l&&(r=xl);super(null,o,l,u,h,m,w,r,v);this.image={width:e,height:t},this.magFilter=h!==void 0?h:ir,this.minFilter=m!==void 0?m:ir,this.flipY=!1,this.generateMipmaps=!1}}Lx.prototype.isDepthTexture=!0;class dU extends aa{constructor(e,t){super();const r=this;let o=null,l=1,u=null,h="local-floor",m=null,v=null,w=null,S=null,A=null,R=null;const O=t.getContextAttributes();let N=null,k=null;const D=[],P=new Map,F=new mr;F.layers.enable(1),F.viewport=new ln;const L=new mr;L.layers.enable(2),L.viewport=new ln;const z=[F,L],H=new Cx;H.layers.enable(1),H.layers.enable(2);let X=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Se){let Te=D[Se];return Te===void 0&&(Te=new Rx,D[Se]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(Se){let Te=D[Se];return Te===void 0&&(Te=new Rx,D[Se]=Te),Te.getGripSpace()},this.getHand=function(Se){let Te=D[Se];return Te===void 0&&(Te=new Rx,D[Se]=Te),Te.getHandSpace()};function J(Se){const Te=P.get(Se.inputSource);Te&&Te.dispatchEvent({type:Se.type,data:Se.inputSource})}function se(){P.forEach(function(Se,Te){Se.disconnect(Te)}),P.clear(),X=null,$=null,e.setRenderTarget(N),A=null,S=null,w=null,o=null,k=null,me.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){l=Se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){h=Se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||u},this.setReferenceSpace=function(Se){m=Se},this.getBaseLayer=function(){return S!==null?S:A},this.getBinding=function(){return w},this.getFrame=function(){return R},this.getSession=function(){return o},this.setSession=async function(Se){if(o=Se,o!==null){if(N=e.getRenderTarget(),o.addEventListener("select",J),o.addEventListener("selectstart",J),o.addEventListener("selectend",J),o.addEventListener("squeeze",J),o.addEventListener("squeezestart",J),o.addEventListener("squeezeend",J),o.addEventListener("end",se),o.addEventListener("inputsourceschange",ce),O.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Te={antialias:o.renderState.layers===void 0?O.antialias:!0,alpha:O.alpha,depth:O.depth,stencil:O.stencil,framebufferScaleFactor:l};A=new XRWebGLLayer(o,t,Te),o.updateRenderState({baseLayer:A}),k=new ci(A.framebufferWidth,A.framebufferHeight,{format:Ti,type:yo,encoding:e.outputEncoding})}else{let Te=null,ye=null,de=null;O.depth&&(de=O.stencil?35056:33190,Te=O.stencil?_l:sa,ye=O.stencil?xl:Ku);const Re={colorFormat:e.outputEncoding===Xt?35907:32856,depthFormat:de,scaleFactor:l};w=new XRWebGLBinding(o,t),S=w.createProjectionLayer(Re),o.updateRenderState({layers:[S]}),k=new ci(S.textureWidth,S.textureHeight,{format:Ti,type:yo,depthTexture:new Lx(S.textureWidth,S.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,Te),stencilBuffer:O.stencil,encoding:e.outputEncoding,samples:O.antialias?4:0});const we=e.properties.get(k);we.__ignoreDepthValues=S.ignoreDepthValues}k.isXRRenderTarget=!0,this.setFoveation(1),u=await o.requestReferenceSpace(h),me.setContext(o),me.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function ce(Se){const Te=o.inputSources;for(let ye=0;ye<Te.length;ye++){const de=Te[ye].handedness==="right"?1:0;P.set(Te[ye],D[de])}for(let ye=0;ye<Se.removed.length;ye++){const de=Se.removed[ye],Re=P.get(de);Re&&(Re.dispatchEvent({type:"disconnected",data:de}),P.delete(de))}for(let ye=0;ye<Se.added.length;ye++){const de=Se.added[ye],Re=P.get(de);Re&&Re.dispatchEvent({type:"connected",data:de})}}const pe=new le,fe=new le;function b(Se,Te,ye){pe.setFromMatrixPosition(Te.matrixWorld),fe.setFromMatrixPosition(ye.matrixWorld);const de=pe.distanceTo(fe),Re=Te.projectionMatrix.elements,we=ye.projectionMatrix.elements,Ie=Re[14]/(Re[10]-1),Me=Re[14]/(Re[10]+1),Be=(Re[9]+1)/Re[5],Ve=(Re[9]-1)/Re[5],qe=(Re[8]-1)/Re[0],W=(we[8]+1)/we[0],We=Ie*qe,De=Ie*W,Pe=de/(-qe+W),Ye=Pe*-qe;Te.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(Ye),Se.translateZ(Pe),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert();const Fe=Ie+Pe,oe=Me+Pe,St=We-Ye,q=De+(de-Ye),Xe=Be*Me/oe*Fe,Ft=Ve*Me/oe*Fe;Se.projectionMatrix.makePerspective(St,q,Xe,Ft,Fe,oe)}function p(Se,Te){Te===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(Te.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.updateCamera=function(Se){if(o===null)return;H.near=L.near=F.near=Se.near,H.far=L.far=F.far=Se.far,(X!==H.near||$!==H.far)&&(o.updateRenderState({depthNear:H.near,depthFar:H.far}),X=H.near,$=H.far);const Te=Se.parent,ye=H.cameras;p(H,Te);for(let Re=0;Re<ye.length;Re++)p(ye[Re],Te);H.matrixWorld.decompose(H.position,H.quaternion,H.scale),Se.position.copy(H.position),Se.quaternion.copy(H.quaternion),Se.scale.copy(H.scale),Se.matrix.copy(H.matrix),Se.matrixWorld.copy(H.matrixWorld);const de=Se.children;for(let Re=0,we=de.length;Re<we;Re++)de[Re].updateMatrixWorld(!0);ye.length===2?b(H,F,L):H.projectionMatrix.copy(F.projectionMatrix)},this.getCamera=function(){return H},this.getFoveation=function(){if(S!==null)return S.fixedFoveation;if(A!==null)return A.fixedFoveation},this.setFoveation=function(Se){S!==null&&(S.fixedFoveation=Se),A!==null&&A.fixedFoveation!==void 0&&(A.fixedFoveation=Se)};let ee=null;function E(Se,Te){if(v=Te.getViewerPose(m||u),R=Te,v!==null){const de=v.views;A!==null&&(e.setRenderTargetFramebuffer(k,A.framebuffer),e.setRenderTarget(k));let Re=!1;de.length!==H.cameras.length&&(H.cameras.length=0,Re=!0);for(let we=0;we<de.length;we++){const Ie=de[we];let Me=null;if(A!==null)Me=A.getViewport(Ie);else{const Ve=w.getViewSubImage(S,Ie);Me=Ve.viewport,we===0&&(e.setRenderTargetTextures(k,Ve.colorTexture,S.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(k))}const Be=z[we];Be.matrix.fromArray(Ie.transform.matrix),Be.projectionMatrix.fromArray(Ie.projectionMatrix),Be.viewport.set(Me.x,Me.y,Me.width,Me.height),we===0&&H.matrix.copy(Be.matrix),Re===!0&&H.cameras.push(Be)}}const ye=o.inputSources;for(let de=0;de<D.length;de++){const Re=ye[de],we=P.get(Re);we!==void 0&&we.update(Re,Te,m||u)}ee&&ee(Se,Te),R=null}const me=new LT;me.setAnimationLoop(E),this.setAnimationLoop=function(Se){ee=Se},this.dispose=function(){}}}function pU(s,e){function t(N,k){N.fogColor.value.copy(k.color),k.isFog?(N.fogNear.value=k.near,N.fogFar.value=k.far):k.isFogExp2&&(N.fogDensity.value=k.density)}function r(N,k,D,P,F){k.isMeshBasicMaterial||k.isMeshLambertMaterial?o(N,k):k.isMeshToonMaterial?(o(N,k),w(N,k)):k.isMeshPhongMaterial?(o(N,k),v(N,k)):k.isMeshStandardMaterial?(o(N,k),S(N,k),k.isMeshPhysicalMaterial&&A(N,k,F)):k.isMeshMatcapMaterial?(o(N,k),R(N,k)):k.isMeshDepthMaterial?o(N,k):k.isMeshDistanceMaterial?(o(N,k),O(N,k)):k.isMeshNormalMaterial?o(N,k):k.isLineBasicMaterial?(l(N,k),k.isLineDashedMaterial&&u(N,k)):k.isPointsMaterial?h(N,k,D,P):k.isSpriteMaterial?m(N,k):k.isShadowMaterial?(N.color.value.copy(k.color),N.opacity.value=k.opacity):k.isShaderMaterial&&(k.uniformsNeedUpdate=!1)}function o(N,k){N.opacity.value=k.opacity,k.color&&N.diffuse.value.copy(k.color),k.emissive&&N.emissive.value.copy(k.emissive).multiplyScalar(k.emissiveIntensity),k.map&&(N.map.value=k.map),k.alphaMap&&(N.alphaMap.value=k.alphaMap),k.bumpMap&&(N.bumpMap.value=k.bumpMap,N.bumpScale.value=k.bumpScale,k.side===Mi&&(N.bumpScale.value*=-1)),k.displacementMap&&(N.displacementMap.value=k.displacementMap,N.displacementScale.value=k.displacementScale,N.displacementBias.value=k.displacementBias),k.emissiveMap&&(N.emissiveMap.value=k.emissiveMap),k.normalMap&&(N.normalMap.value=k.normalMap,N.normalScale.value.copy(k.normalScale),k.side===Mi&&N.normalScale.value.negate()),k.specularMap&&(N.specularMap.value=k.specularMap),k.alphaTest>0&&(N.alphaTest.value=k.alphaTest);const D=e.get(k).envMap;if(D&&(N.envMap.value=D,N.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,N.reflectivity.value=k.reflectivity,N.ior.value=k.ior,N.refractionRatio.value=k.refractionRatio),k.lightMap){N.lightMap.value=k.lightMap;const L=s.physicallyCorrectLights!==!0?Math.PI:1;N.lightMapIntensity.value=k.lightMapIntensity*L}k.aoMap&&(N.aoMap.value=k.aoMap,N.aoMapIntensity.value=k.aoMapIntensity);let P;k.map?P=k.map:k.specularMap?P=k.specularMap:k.displacementMap?P=k.displacementMap:k.normalMap?P=k.normalMap:k.bumpMap?P=k.bumpMap:k.roughnessMap?P=k.roughnessMap:k.metalnessMap?P=k.metalnessMap:k.alphaMap?P=k.alphaMap:k.emissiveMap?P=k.emissiveMap:k.clearcoatMap?P=k.clearcoatMap:k.clearcoatNormalMap?P=k.clearcoatNormalMap:k.clearcoatRoughnessMap?P=k.clearcoatRoughnessMap:k.specularIntensityMap?P=k.specularIntensityMap:k.specularColorMap?P=k.specularColorMap:k.transmissionMap?P=k.transmissionMap:k.thicknessMap?P=k.thicknessMap:k.sheenColorMap?P=k.sheenColorMap:k.sheenRoughnessMap&&(P=k.sheenRoughnessMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),N.uvTransform.value.copy(P.matrix));let F;k.aoMap?F=k.aoMap:k.lightMap&&(F=k.lightMap),F!==void 0&&(F.isWebGLRenderTarget&&(F=F.texture),F.matrixAutoUpdate===!0&&F.updateMatrix(),N.uv2Transform.value.copy(F.matrix))}function l(N,k){N.diffuse.value.copy(k.color),N.opacity.value=k.opacity}function u(N,k){N.dashSize.value=k.dashSize,N.totalSize.value=k.dashSize+k.gapSize,N.scale.value=k.scale}function h(N,k,D,P){N.diffuse.value.copy(k.color),N.opacity.value=k.opacity,N.size.value=k.size*D,N.scale.value=P*.5,k.map&&(N.map.value=k.map),k.alphaMap&&(N.alphaMap.value=k.alphaMap),k.alphaTest>0&&(N.alphaTest.value=k.alphaTest);let F;k.map?F=k.map:k.alphaMap&&(F=k.alphaMap),F!==void 0&&(F.matrixAutoUpdate===!0&&F.updateMatrix(),N.uvTransform.value.copy(F.matrix))}function m(N,k){N.diffuse.value.copy(k.color),N.opacity.value=k.opacity,N.rotation.value=k.rotation,k.map&&(N.map.value=k.map),k.alphaMap&&(N.alphaMap.value=k.alphaMap),k.alphaTest>0&&(N.alphaTest.value=k.alphaTest);let D;k.map?D=k.map:k.alphaMap&&(D=k.alphaMap),D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),N.uvTransform.value.copy(D.matrix))}function v(N,k){N.specular.value.copy(k.specular),N.shininess.value=Math.max(k.shininess,1e-4)}function w(N,k){k.gradientMap&&(N.gradientMap.value=k.gradientMap)}function S(N,k){N.roughness.value=k.roughness,N.metalness.value=k.metalness,k.roughnessMap&&(N.roughnessMap.value=k.roughnessMap),k.metalnessMap&&(N.metalnessMap.value=k.metalnessMap),e.get(k).envMap&&(N.envMapIntensity.value=k.envMapIntensity)}function A(N,k,D){N.ior.value=k.ior,k.sheen>0&&(N.sheenColor.value.copy(k.sheenColor).multiplyScalar(k.sheen),N.sheenRoughness.value=k.sheenRoughness,k.sheenColorMap&&(N.sheenColorMap.value=k.sheenColorMap),k.sheenRoughnessMap&&(N.sheenRoughnessMap.value=k.sheenRoughnessMap)),k.clearcoat>0&&(N.clearcoat.value=k.clearcoat,N.clearcoatRoughness.value=k.clearcoatRoughness,k.clearcoatMap&&(N.clearcoatMap.value=k.clearcoatMap),k.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap.value=k.clearcoatRoughnessMap),k.clearcoatNormalMap&&(N.clearcoatNormalScale.value.copy(k.clearcoatNormalScale),N.clearcoatNormalMap.value=k.clearcoatNormalMap,k.side===Mi&&N.clearcoatNormalScale.value.negate())),k.transmission>0&&(N.transmission.value=k.transmission,N.transmissionSamplerMap.value=D.texture,N.transmissionSamplerSize.value.set(D.width,D.height),k.transmissionMap&&(N.transmissionMap.value=k.transmissionMap),N.thickness.value=k.thickness,k.thicknessMap&&(N.thicknessMap.value=k.thicknessMap),N.attenuationDistance.value=k.attenuationDistance,N.attenuationColor.value.copy(k.attenuationColor)),N.specularIntensity.value=k.specularIntensity,N.specularColor.value.copy(k.specularColor),k.specularIntensityMap&&(N.specularIntensityMap.value=k.specularIntensityMap),k.specularColorMap&&(N.specularColorMap.value=k.specularColorMap)}function R(N,k){k.matcap&&(N.matcap.value=k.matcap)}function O(N,k){N.referencePosition.value.copy(k.referencePosition),N.nearDistance.value=k.nearDistance,N.farDistance.value=k.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function mU(){const s=Th("canvas");return s.style.display="block",s}function xn(s={}){const e=s.canvas!==void 0?s.canvas:mU(),t=s.context!==void 0?s.context:null,r=s.depth!==void 0?s.depth:!0,o=s.stencil!==void 0?s.stencil:!0,l=s.antialias!==void 0?s.antialias:!1,u=s.premultipliedAlpha!==void 0?s.premultipliedAlpha:!0,h=s.preserveDrawingBuffer!==void 0?s.preserveDrawingBuffer:!1,m=s.powerPreference!==void 0?s.powerPreference:"default",v=s.failIfMajorPerformanceCaveat!==void 0?s.failIfMajorPerformanceCaveat:!1;let w;t!==null?w=t.getContextAttributes().alpha:w=s.alpha!==void 0?s.alpha:!1;let S=null,A=null;const R=[],O=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Gi,this.physicallyCorrectLights=!1,this.toneMapping=Vs,this.toneMappingExposure=1;const N=this;let k=!1,D=0,P=0,F=null,L=-1,z=null;const H=new ln,X=new ln;let $=null,J=e.width,se=e.height,ce=1,pe=null,fe=null;const b=new ln(0,0,J,se),p=new ln(0,0,J,se);let ee=!1;const E=new Ph;let me=!1,Se=!1,Te=null;const ye=new et,de=new je,Re=new le,we={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ie(){return F===null?ce:1}let Me=t;function Be(ge,Le){for(let Ne=0;Ne<ge.length;Ne++){const ke=ge[Ne],be=e.getContext(ke,Le);if(be!==null)return be}return null}try{const ge={alpha:!0,depth:r,stencil:o,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Hi}`),e.addEventListener("webglcontextlost",V,!1),e.addEventListener("webglcontextrestored",Q,!1),Me===null){const Le=["webgl2","webgl","experimental-webgl"];if(N.isWebGL1Renderer===!0&&Le.shift(),Me=Be(Le,ge),Me===null)throw Be(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Me.getShaderPrecisionFormat===void 0&&(Me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let Ve,qe,W,We,De,Pe,Ye,Fe,oe,St,q,Xe,Ft,Y,n,i,a,f,g,y,M,C,I;function B(){Ve=new kN(Me),qe=new AN(Me,Ve,s),Ve.init(qe),C=new sE(Me,Ve,qe),W=new cU(Me,Ve,qe),We=new NN(Me),De=new JF,Pe=new fU(Me,Ve,W,De,qe,C,We),Ye=new RN(N),Fe=new PN(N),oe=new Kk(Me,qe),I=new TN(Me,Ve,oe,qe),St=new DN(Me,oe,We,I),q=new zN(Me,St,oe,We),g=new BN(Me,qe,Pe),i=new CN(De),Xe=new ZF(N,Ye,Fe,Ve,qe,I,i),Ft=new pU(N,De),Y=new tU,n=new aU(Ve,qe),f=new MN(N,Ye,W,q,w,u),a=new iE(N,q,qe),y=new EN(Me,Ve,We,qe),M=new ON(Me,Ve,We,qe),We.programs=Xe.programs,N.capabilities=qe,N.extensions=Ve,N.properties=De,N.renderLists=Y,N.shadowMap=a,N.state=W,N.info=We}B();const G=new dU(N,Me);this.xr=G,this.getContext=function(){return Me},this.getContextAttributes=function(){return Me.getContextAttributes()},this.forceContextLoss=function(){const ge=Ve.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=Ve.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(ge){ge!==void 0&&(ce=ge,this.setSize(J,se,!1))},this.getSize=function(ge){return ge.set(J,se)},this.setSize=function(ge,Le,Ne){if(G.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=ge,se=Le,e.width=Math.floor(ge*ce),e.height=Math.floor(Le*ce),Ne!==!1&&(e.style.width=ge+"px",e.style.height=Le+"px"),this.setViewport(0,0,ge,Le)},this.getDrawingBufferSize=function(ge){return ge.set(J*ce,se*ce).floor()},this.setDrawingBufferSize=function(ge,Le,Ne){J=ge,se=Le,ce=Ne,e.width=Math.floor(ge*Ne),e.height=Math.floor(Le*Ne),this.setViewport(0,0,ge,Le)},this.getCurrentViewport=function(ge){return ge.copy(H)},this.getViewport=function(ge){return ge.copy(b)},this.setViewport=function(ge,Le,Ne,ke){ge.isVector4?b.set(ge.x,ge.y,ge.z,ge.w):b.set(ge,Le,Ne,ke),W.viewport(H.copy(b).multiplyScalar(ce).floor())},this.getScissor=function(ge){return ge.copy(p)},this.setScissor=function(ge,Le,Ne,ke){ge.isVector4?p.set(ge.x,ge.y,ge.z,ge.w):p.set(ge,Le,Ne,ke),W.scissor(X.copy(p).multiplyScalar(ce).floor())},this.getScissorTest=function(){return ee},this.setScissorTest=function(ge){W.setScissorTest(ee=ge)},this.setOpaqueSort=function(ge){pe=ge},this.setTransparentSort=function(ge){fe=ge},this.getClearColor=function(ge){return ge.copy(f.getClearColor())},this.setClearColor=function(){f.setClearColor.apply(f,arguments)},this.getClearAlpha=function(){return f.getClearAlpha()},this.setClearAlpha=function(){f.setClearAlpha.apply(f,arguments)},this.clear=function(ge=!0,Le=!0,Ne=!0){let ke=0;ge&&(ke|=16384),Le&&(ke|=256),Ne&&(ke|=1024),Me.clear(ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",V,!1),e.removeEventListener("webglcontextrestored",Q,!1),Y.dispose(),n.dispose(),De.dispose(),Ye.dispose(),Fe.dispose(),q.dispose(),I.dispose(),Xe.dispose(),G.dispose(),G.removeEventListener("sessionstart",Ce),G.removeEventListener("sessionend",He),Te&&(Te.dispose(),Te=null),Oe.stop()};function V(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const ge=We.autoReset,Le=a.enabled,Ne=a.autoUpdate,ke=a.needsUpdate,be=a.type;B(),We.autoReset=ge,a.enabled=Le,a.autoUpdate=Ne,a.needsUpdate=ke,a.type=be}function Z(ge){const Le=ge.target;Le.removeEventListener("dispose",Z),ne(Le)}function ne(ge){ae(ge),De.remove(ge)}function ae(ge){const Le=De.get(ge).programs;Le!==void 0&&(Le.forEach(function(Ne){Xe.releaseProgram(Ne)}),ge.isShaderMaterial&&Xe.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,Le,Ne,ke,be,yt){Le===null&&(Le=we);const wt=be.isMesh&&be.matrixWorld.determinant()<0,It=En(ge,Le,Ne,ke,be);W.setMaterial(ke,wt);let At=Ne.index;const Kt=Ne.attributes.position;if(At===null){if(Kt===void 0||Kt.count===0)return}else if(At.count===0)return;let jt=1;ke.wireframe===!0&&(At=St.getWireframeAttribute(Ne),jt=2),I.setup(be,ke,It,Ne,At);let Bt,rn=y;At!==null&&(Bt=oe.get(At),rn=M,rn.setIndex(Bt));const Vn=At!==null?At.count:Kt.count,xi=Ne.drawRange.start*jt,_i=Ne.drawRange.count*jt,sn=yt!==null?yt.start*jt:0,Ze=yt!==null?yt.count*jt:1/0,yr=Math.max(xi,sn),bn=Math.min(Vn,xi+_i,sn+Ze)-1,An=Math.max(0,bn-yr+1);if(An!==0){if(be.isMesh)ke.wireframe===!0?(W.setLineWidth(ke.wireframeLinewidth*Ie()),rn.setMode(1)):rn.setMode(4);else if(be.isLine){let Wt=ke.linewidth;Wt===void 0&&(Wt=1),W.setLineWidth(Wt*Ie()),be.isLineSegments?rn.setMode(1):be.isLineLoop?rn.setMode(2):rn.setMode(3)}else be.isPoints?rn.setMode(0):be.isSprite&&rn.setMode(4);if(be.isInstancedMesh)rn.renderInstances(yr,An,be.count);else if(Ne.isInstancedBufferGeometry){const Wt=Math.min(Ne.instanceCount,Ne._maxInstanceCount);rn.renderInstances(yr,An,Wt)}else rn.render(yr,An)}},this.compile=function(ge,Le){A=n.get(ge),A.init(),O.push(A),ge.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Le.layers)&&(A.pushLight(Ne),Ne.castShadow&&A.pushShadow(Ne))}),A.setupLights(N.physicallyCorrectLights),ge.traverse(function(Ne){const ke=Ne.material;if(ke)if(Array.isArray(ke))for(let be=0;be<ke.length;be++){const yt=ke[be];wn(yt,ge,Ne)}else wn(ke,ge,Ne)}),O.pop(),A=null};let ue=null;function he(ge){ue&&ue(ge)}function Ce(){Oe.stop()}function He(){Oe.start()}const Oe=new LT;Oe.setAnimationLoop(he),typeof self!="undefined"&&Oe.setContext(self),this.setAnimationLoop=function(ge){ue=ge,G.setAnimationLoop(ge),ge===null?Oe.stop():Oe.start()},G.addEventListener("sessionstart",Ce),G.addEventListener("sessionend",He),this.render=function(ge,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;ge.autoUpdate===!0&&ge.updateMatrixWorld(),Le.parent===null&&Le.updateMatrixWorld(),G.enabled===!0&&G.isPresenting===!0&&(G.cameraAutoUpdate===!0&&G.updateCamera(Le),Le=G.getCamera()),ge.isScene===!0&&ge.onBeforeRender(N,ge,Le,F),A=n.get(ge,O.length),A.init(),O.push(A),ye.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),E.setFromProjectionMatrix(ye),Se=this.localClippingEnabled,me=i.init(this.clippingPlanes,Se,Le),S=Y.get(ge,R.length),S.init(),R.push(S),gt(ge,Le,0,N.sortObjects),S.finish(),N.sortObjects===!0&&S.sort(pe,fe),me===!0&&i.beginShadows();const Ne=A.state.shadowsArray;if(a.render(Ne,ge,Le),me===!0&&i.endShadows(),this.info.autoReset===!0&&this.info.reset(),f.render(S,ge),A.setupLights(N.physicallyCorrectLights),Le.isArrayCamera){const ke=Le.cameras;for(let be=0,yt=ke.length;be<yt;be++){const wt=ke[be];lt(S,ge,wt,wt.viewport)}}else lt(S,ge,Le);F!==null&&(Pe.updateMultisampleRenderTarget(F),Pe.updateRenderTargetMipmap(F)),ge.isScene===!0&&ge.onAfterRender(N,ge,Le),I.resetDefaultState(),L=-1,z=null,O.pop(),O.length>0?A=O[O.length-1]:A=null,R.pop(),R.length>0?S=R[R.length-1]:S=null};function gt(ge,Le,Ne,ke){if(ge.visible===!1)return;if(ge.layers.test(Le.layers)){if(ge.isGroup)Ne=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(Le);else if(ge.isLight)A.pushLight(ge),ge.castShadow&&A.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||E.intersectsSprite(ge)){ke&&Re.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(ye);const wt=q.update(ge),It=ge.material;It.visible&&S.push(ge,wt,It,Ne,Re.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(ge.isSkinnedMesh&&ge.skeleton.frame!==We.render.frame&&(ge.skeleton.update(),ge.skeleton.frame=We.render.frame),!ge.frustumCulled||E.intersectsObject(ge))){ke&&Re.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(ye);const wt=q.update(ge),It=ge.material;if(Array.isArray(It)){const At=wt.groups;for(let Kt=0,jt=At.length;Kt<jt;Kt++){const Bt=At[Kt],rn=It[Bt.materialIndex];rn&&rn.visible&&S.push(ge,wt,rn,Ne,Re.z,Bt)}}else It.visible&&S.push(ge,wt,It,Ne,Re.z,null)}}const yt=ge.children;for(let wt=0,It=yt.length;wt<It;wt++)gt(yt[wt],Le,Ne,ke)}function lt(ge,Le,Ne,ke){const be=ge.opaque,yt=ge.transmissive,wt=ge.transparent;A.setupLightsView(Ne),yt.length>0&&Et(be,Le,Ne),ke&&W.viewport(H.copy(ke)),be.length>0&&pt(be,Le,Ne),yt.length>0&&pt(yt,Le,Ne),wt.length>0&&pt(wt,Le,Ne),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Et(ge,Le,Ne){const ke=qe.isWebGL2;Te===null&&(Te=new ci(1,1,{generateMipmaps:!0,type:Ve.has("EXT_color_buffer_half_float")?Qu:yo,minFilter:vo,samples:ke&&l===!0?4:0})),N.getDrawingBufferSize(de),ke?Te.setSize(de.x,de.y):Te.setSize(pm(de.x),pm(de.y));const be=N.getRenderTarget();N.setRenderTarget(Te),N.clear();const yt=N.toneMapping;N.toneMapping=Vs,pt(ge,Le,Ne),N.toneMapping=yt,Pe.updateMultisampleRenderTarget(Te),Pe.updateRenderTargetMipmap(Te),N.setRenderTarget(be)}function pt(ge,Le,Ne){const ke=Le.isScene===!0?Le.overrideMaterial:null;for(let be=0,yt=ge.length;be<yt;be++){const wt=ge[be],It=wt.object,At=wt.geometry,Kt=ke===null?wt.material:ke,jt=wt.group;It.layers.test(Ne.layers)&&vt(It,Le,Ne,At,Kt,jt)}}function vt(ge,Le,Ne,ke,be,yt){ge.onBeforeRender(N,Le,Ne,ke,be,yt),ge.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),be.onBeforeRender(N,Le,Ne,ke,ge,yt),be.transparent===!0&&be.side===bs?(be.side=Mi,be.needsUpdate=!0,N.renderBufferDirect(Ne,Le,ke,be,ge,yt),be.side=na,be.needsUpdate=!0,N.renderBufferDirect(Ne,Le,ke,be,ge,yt),be.side=bs):N.renderBufferDirect(Ne,Le,ke,be,ge,yt),ge.onAfterRender(N,Le,Ne,ke,be,yt)}function wn(ge,Le,Ne){Le.isScene!==!0&&(Le=we);const ke=De.get(ge),be=A.state.lights,yt=A.state.shadowsArray,wt=be.state.version,It=Xe.getParameters(ge,be.state,yt,Le,Ne),At=Xe.getProgramCacheKey(It);let Kt=ke.programs;ke.environment=ge.isMeshStandardMaterial?Le.environment:null,ke.fog=Le.fog,ke.envMap=(ge.isMeshStandardMaterial?Fe:Ye).get(ge.envMap||ke.environment),Kt===void 0&&(ge.addEventListener("dispose",Z),Kt=new Map,ke.programs=Kt);let jt=Kt.get(At);if(jt!==void 0){if(ke.currentProgram===jt&&ke.lightsStateVersion===wt)return en(ge,It),jt}else It.uniforms=Xe.getUniforms(ge),ge.onBuild(Ne,It,N),ge.onBeforeCompile(It,N),jt=Xe.acquireProgram(It,At),Kt.set(At,jt),ke.uniforms=It.uniforms;const Bt=ke.uniforms;(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(Bt.clippingPlanes=i.uniform),en(ge,It),ke.needsLights=tn(ge),ke.lightsStateVersion=wt,ke.needsLights&&(Bt.ambientLightColor.value=be.state.ambient,Bt.lightProbe.value=be.state.probe,Bt.directionalLights.value=be.state.directional,Bt.directionalLightShadows.value=be.state.directionalShadow,Bt.spotLights.value=be.state.spot,Bt.spotLightShadows.value=be.state.spotShadow,Bt.rectAreaLights.value=be.state.rectArea,Bt.ltc_1.value=be.state.rectAreaLTC1,Bt.ltc_2.value=be.state.rectAreaLTC2,Bt.pointLights.value=be.state.point,Bt.pointLightShadows.value=be.state.pointShadow,Bt.hemisphereLights.value=be.state.hemi,Bt.directionalShadowMap.value=be.state.directionalShadowMap,Bt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Bt.spotShadowMap.value=be.state.spotShadowMap,Bt.spotShadowMatrix.value=be.state.spotShadowMatrix,Bt.pointShadowMap.value=be.state.pointShadowMap,Bt.pointShadowMatrix.value=be.state.pointShadowMatrix);const rn=jt.getUniforms(),Vn=xa.seqWithValue(rn.seq,Bt);return ke.currentProgram=jt,ke.uniformsList=Vn,jt}function en(ge,Le){const Ne=De.get(ge);Ne.outputEncoding=Le.outputEncoding,Ne.instancing=Le.instancing,Ne.skinning=Le.skinning,Ne.morphTargets=Le.morphTargets,Ne.morphNormals=Le.morphNormals,Ne.morphColors=Le.morphColors,Ne.morphTargetsCount=Le.morphTargetsCount,Ne.numClippingPlanes=Le.numClippingPlanes,Ne.numIntersection=Le.numClipIntersection,Ne.vertexAlphas=Le.vertexAlphas,Ne.vertexTangents=Le.vertexTangents,Ne.toneMapping=Le.toneMapping}function En(ge,Le,Ne,ke,be){Le.isScene!==!0&&(Le=we),Pe.resetTextureUnits();const yt=Le.fog,wt=ke.isMeshStandardMaterial?Le.environment:null,It=F===null?N.outputEncoding:F.isXRRenderTarget===!0?F.texture.encoding:Gi,At=(ke.isMeshStandardMaterial?Fe:Ye).get(ke.envMap||wt),Kt=ke.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,jt=!!ke.normalMap&&!!Ne.attributes.tangent,Bt=!!Ne.morphAttributes.position,rn=!!Ne.morphAttributes.normal,Vn=!!Ne.morphAttributes.color,xi=ke.toneMapped?N.toneMapping:Vs,_i=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,sn=_i!==void 0?_i.length:0,Ze=De.get(ke),yr=A.state.lights;if(me===!0&&(Se===!0||ge!==z)){const xe=ge===z&&ke.id===L;i.setState(ke,ge,xe)}let bn=!1;ke.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==yr.state.version||Ze.outputEncoding!==It||be.isInstancedMesh&&Ze.instancing===!1||!be.isInstancedMesh&&Ze.instancing===!0||be.isSkinnedMesh&&Ze.skinning===!1||!be.isSkinnedMesh&&Ze.skinning===!0||Ze.envMap!==At||ke.fog===!0&&Ze.fog!==yt||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==i.numPlanes||Ze.numIntersection!==i.numIntersection)||Ze.vertexAlphas!==Kt||Ze.vertexTangents!==jt||Ze.morphTargets!==Bt||Ze.morphNormals!==rn||Ze.morphColors!==Vn||Ze.toneMapping!==xi||qe.isWebGL2===!0&&Ze.morphTargetsCount!==sn)&&(bn=!0):(bn=!0,Ze.__version=ke.version);let An=Ze.currentProgram;bn===!0&&(An=wn(ke,Le,be));let Wt=!1,Ar=!1,Fi=!1;const Wn=An.getUniforms(),$e=Ze.uniforms;if(W.useProgram(An.program)&&(Wt=!0,Ar=!0,Fi=!0),ke.id!==L&&(L=ke.id,Ar=!0),Wt||z!==ge){if(Wn.setValue(Me,"projectionMatrix",ge.projectionMatrix),qe.logarithmicDepthBuffer&&Wn.setValue(Me,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),z!==ge&&(z=ge,Ar=!0,Fi=!0),ke.isShaderMaterial||ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshStandardMaterial||ke.envMap){const xe=Wn.map.cameraPosition;xe!==void 0&&xe.setValue(Me,Re.setFromMatrixPosition(ge.matrixWorld))}(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial)&&Wn.setValue(Me,"isOrthographic",ge.isOrthographicCamera===!0),(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial||ke.isShadowMaterial||be.isSkinnedMesh)&&Wn.setValue(Me,"viewMatrix",ge.matrixWorldInverse)}if(be.isSkinnedMesh){Wn.setOptional(Me,be,"bindMatrix"),Wn.setOptional(Me,be,"bindMatrixInverse");const xe=be.skeleton;xe&&(qe.floatVertexTextures?(xe.boneTexture===null&&xe.computeBoneTexture(),Wn.setValue(Me,"boneTexture",xe.boneTexture,Pe),Wn.setValue(Me,"boneTextureSize",xe.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ie=Ne.morphAttributes;return(ie.position!==void 0||ie.normal!==void 0||ie.color!==void 0&&qe.isWebGL2===!0)&&g.update(be,Ne,ke,An),(Ar||Ze.receiveShadow!==be.receiveShadow)&&(Ze.receiveShadow=be.receiveShadow,Wn.setValue(Me,"receiveShadow",be.receiveShadow)),Ar&&(Wn.setValue(Me,"toneMappingExposure",N.toneMappingExposure),Ze.needsLights&&vn($e,Fi),yt&&ke.fog===!0&&Ft.refreshFogUniforms($e,yt),Ft.refreshMaterialUniforms($e,ke,ce,se,Te),xa.upload(Me,Ze.uniformsList,$e,Pe)),ke.isShaderMaterial&&ke.uniformsNeedUpdate===!0&&(xa.upload(Me,Ze.uniformsList,$e,Pe),ke.uniformsNeedUpdate=!1),ke.isSpriteMaterial&&Wn.setValue(Me,"center",be.center),Wn.setValue(Me,"modelViewMatrix",be.modelViewMatrix),Wn.setValue(Me,"normalMatrix",be.normalMatrix),Wn.setValue(Me,"modelMatrix",be.matrixWorld),An}function vn(ge,Le){ge.ambientLightColor.needsUpdate=Le,ge.lightProbe.needsUpdate=Le,ge.directionalLights.needsUpdate=Le,ge.directionalLightShadows.needsUpdate=Le,ge.pointLights.needsUpdate=Le,ge.pointLightShadows.needsUpdate=Le,ge.spotLights.needsUpdate=Le,ge.spotLightShadows.needsUpdate=Le,ge.rectAreaLights.needsUpdate=Le,ge.hemisphereLights.needsUpdate=Le}function tn(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(ge,Le,Ne){De.get(ge.texture).__webglTexture=Le,De.get(ge.depthTexture).__webglTexture=Ne;const ke=De.get(ge);ke.__hasExternalTextures=!0,ke.__hasExternalTextures&&(ke.__autoAllocateDepthBuffer=Ne===void 0,ke.__autoAllocateDepthBuffer||Ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ke.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,Le){const Ne=De.get(ge);Ne.__webglFramebuffer=Le,Ne.__useDefaultFramebuffer=Le===void 0},this.setRenderTarget=function(ge,Le=0,Ne=0){F=ge,D=Le,P=Ne;let ke=!0;if(ge){const At=De.get(ge);At.__useDefaultFramebuffer!==void 0?(W.bindFramebuffer(36160,null),ke=!1):At.__webglFramebuffer===void 0?Pe.setupRenderTarget(ge):At.__hasExternalTextures&&Pe.rebindTextures(ge,De.get(ge.texture).__webglTexture,De.get(ge.depthTexture).__webglTexture)}let be=null,yt=!1,wt=!1;if(ge){const At=ge.texture;(At.isData3DTexture||At.isDataArrayTexture)&&(wt=!0);const Kt=De.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(be=Kt[Le],yt=!0):qe.isWebGL2&&ge.samples>0&&Pe.useMultisampledRTT(ge)===!1?be=De.get(ge).__webglMultisampledFramebuffer:be=Kt,H.copy(ge.viewport),X.copy(ge.scissor),$=ge.scissorTest}else H.copy(b).multiplyScalar(ce).floor(),X.copy(p).multiplyScalar(ce).floor(),$=ee;if(W.bindFramebuffer(36160,be)&&qe.drawBuffers&&ke&&W.drawBuffers(ge,be),W.viewport(H),W.scissor(X),W.setScissorTest($),yt){const At=De.get(ge.texture);Me.framebufferTexture2D(36160,36064,34069+Le,At.__webglTexture,Ne)}else if(wt){const At=De.get(ge.texture),Kt=Le||0;Me.framebufferTextureLayer(36160,36064,At.__webglTexture,Ne||0,Kt)}L=-1},this.readRenderTargetPixels=function(ge,Le,Ne,ke,be,yt,wt){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=De.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&wt!==void 0&&(It=It[wt]),It){W.bindFramebuffer(36160,It);try{const At=ge.texture,Kt=At.format,jt=At.type;if(Kt!==Ti&&C.convert(Kt)!==Me.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Bt=jt===Qu&&(Ve.has("EXT_color_buffer_half_float")||qe.isWebGL2&&Ve.has("EXT_color_buffer_float"));if(jt!==yo&&C.convert(jt)!==Me.getParameter(35738)&&!(jt===xo&&(qe.isWebGL2||Ve.has("OES_texture_float")||Ve.has("WEBGL_color_buffer_float")))&&!Bt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=ge.width-ke&&Ne>=0&&Ne<=ge.height-be&&Me.readPixels(Le,Ne,ke,be,C.convert(Kt),C.convert(jt),yt)}finally{const At=F!==null?De.get(F).__webglFramebuffer:null;W.bindFramebuffer(36160,At)}}},this.copyFramebufferToTexture=function(ge,Le,Ne=0){if(Le.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const ke=Math.pow(2,-Ne),be=Math.floor(Le.image.width*ke),yt=Math.floor(Le.image.height*ke);Pe.setTexture2D(Le,0),Me.copyTexSubImage2D(3553,Ne,0,0,ge.x,ge.y,be,yt),W.unbindTexture()},this.copyTextureToTexture=function(ge,Le,Ne,ke=0){const be=Le.image.width,yt=Le.image.height,wt=C.convert(Ne.format),It=C.convert(Ne.type);Pe.setTexture2D(Ne,0),Me.pixelStorei(37440,Ne.flipY),Me.pixelStorei(37441,Ne.premultiplyAlpha),Me.pixelStorei(3317,Ne.unpackAlignment),Le.isDataTexture?Me.texSubImage2D(3553,ke,ge.x,ge.y,be,yt,wt,It,Le.image.data):Le.isCompressedTexture?Me.compressedTexSubImage2D(3553,ke,ge.x,ge.y,Le.mipmaps[0].width,Le.mipmaps[0].height,wt,Le.mipmaps[0].data):Me.texSubImage2D(3553,ke,ge.x,ge.y,wt,It,Le.image),ke===0&&Ne.generateMipmaps&&Me.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(ge,Le,Ne,ke,be=0){if(N.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=ge.max.x-ge.min.x+1,wt=ge.max.y-ge.min.y+1,It=ge.max.z-ge.min.z+1,At=C.convert(ke.format),Kt=C.convert(ke.type);let jt;if(ke.isData3DTexture)Pe.setTexture3D(ke,0),jt=32879;else if(ke.isDataArrayTexture)Pe.setTexture2DArray(ke,0),jt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Me.pixelStorei(37440,ke.flipY),Me.pixelStorei(37441,ke.premultiplyAlpha),Me.pixelStorei(3317,ke.unpackAlignment);const Bt=Me.getParameter(3314),rn=Me.getParameter(32878),Vn=Me.getParameter(3316),xi=Me.getParameter(3315),_i=Me.getParameter(32877),sn=Ne.isCompressedTexture?Ne.mipmaps[0]:Ne.image;Me.pixelStorei(3314,sn.width),Me.pixelStorei(32878,sn.height),Me.pixelStorei(3316,ge.min.x),Me.pixelStorei(3315,ge.min.y),Me.pixelStorei(32877,ge.min.z),Ne.isDataTexture||Ne.isData3DTexture?Me.texSubImage3D(jt,be,Le.x,Le.y,Le.z,yt,wt,It,At,Kt,sn.data):Ne.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Me.compressedTexSubImage3D(jt,be,Le.x,Le.y,Le.z,yt,wt,It,At,sn.data)):Me.texSubImage3D(jt,be,Le.x,Le.y,Le.z,yt,wt,It,At,Kt,sn),Me.pixelStorei(3314,Bt),Me.pixelStorei(32878,rn),Me.pixelStorei(3316,Vn),Me.pixelStorei(3315,xi),Me.pixelStorei(32877,_i),be===0&&ke.generateMipmaps&&Me.generateMipmap(jt),W.unbindTexture()},this.initTexture=function(ge){Pe.setTexture2D(ge,0),W.unbindTexture()},this.resetState=function(){D=0,P=0,F=null,W.reset(),I.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}xn.prototype.isWebGLRenderer=!0;class oE extends xn{}oE.prototype.isWebGL1Renderer=!0;class Dh{constructor(e,t=25e-5){this.name="",this.color=new Qe(e),this.density=t}clone(){return new Dh(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Dh.prototype.isFogExp2=!0;class Oh{constructor(e,t=1,r=1e3){this.name="",this.color=new Qe(e),this.near=t,this.far=r}clone(){return new Oh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Oh.prototype.isFog=!0;class Vm extends Ht{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Vm.prototype.isScene=!0;class _a{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ju,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}_a.prototype.isInterleavedBuffer=!0;const di=new le;class Ao{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=o===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)di.fromBufferAttribute(this,t),di.applyMatrix4(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)di.fromBufferAttribute(this,t),di.applyNormalMatrix(e),this.setXYZ(t,di.x,di.y,di.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)di.fromBufferAttribute(this,t),di.transformDirection(e),this.setXYZ(t,di.x,di.y,di.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new Dt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ao(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ao.prototype.isInterleavedBufferAttribute=!0;class Wm extends Bn{constructor(e){super();this.type="SpriteMaterial",this.color=new Qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}Wm.prototype.isSpriteMaterial=!0;let _c;const Nh=new le,wc=new le,bc=new le,Sc=new je,Fh=new je,aE=new et,$m=new le,Uh=new le,jm=new le,lE=new je,Ix=new je,uE=new je;class qm extends Ht{constructor(e){super();if(this.type="Sprite",_c===void 0){_c=new xt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _a(t,5);_c.setIndex([0,1,2,0,2,3]),_c.setAttribute("position",new Ao(r,3,0,!1)),_c.setAttribute("uv",new Ao(r,2,3,!1))}this.geometry=_c,this.material=e!==void 0?e:new Wm,this.center=new je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wc.setFromMatrixScale(this.matrixWorld),aE.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&wc.multiplyScalar(-bc.z);const r=this.material.rotation;let o,l;r!==0&&(l=Math.cos(r),o=Math.sin(r));const u=this.center;Xm($m.set(-.5,-.5,0),bc,u,wc,o,l),Xm(Uh.set(.5,-.5,0),bc,u,wc,o,l),Xm(jm.set(.5,.5,0),bc,u,wc,o,l),lE.set(0,0),Ix.set(1,0),uE.set(1,1);let h=e.ray.intersectTriangle($m,Uh,jm,!1,Nh);if(h===null&&(Xm(Uh.set(-.5,.5,0),bc,u,wc,o,l),Ix.set(0,1),h=e.ray.intersectTriangle($m,jm,Uh,!1,Nh),h===null))return;const m=e.ray.origin.distanceTo(Nh);m<e.near||m>e.far||t.push({distance:m,point:Nh.clone(),uv:or.getUV(Nh,$m,Uh,jm,lE,Ix,uE,new je),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}qm.prototype.isSprite=!0;function Xm(s,e,t,r,o,l){Sc.subVectors(s,t).addScalar(.5).multiply(r),o!==void 0?(Fh.x=l*Sc.x-o*Sc.y,Fh.y=o*Sc.x+l*Sc.y):Fh.copy(Sc),s.copy(e),s.x+=Fh.x,s.y+=Fh.y,s.applyMatrix4(aE)}const Ym=new le,cE=new le;class fE extends Ht{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,o=t.length;r<o;r++){const l=t[r];this.addLevel(l.object.clone(),l.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,o;for(r=1,o=t.length;r<o&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Ym.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(Ym);this.getObjectForDistance(o).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ym.setFromMatrixPosition(e.matrixWorld),cE.setFromMatrixPosition(this.matrixWorld);const r=Ym.distanceTo(cE)/e.zoom;t[0].object.visible=!0;let o,l;for(o=1,l=t.length;o<l&&r>=t[o].distance;o++)t[o-1].object.visible=!1,t[o].object.visible=!0;for(this._currentLevel=o-1;o<l;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let o=0,l=r.length;o<l;o++){const u=r[o];t.object.levels.push({object:u.object.uuid,distance:u.distance})}return t}}const hE=new le,dE=new ln,pE=new ln,gU=new le,mE=new et;class kl extends ot{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new et,this.bindMatrixInverse=new et}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.fromBufferAttribute(t,r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;dE.fromBufferAttribute(o.attributes.skinIndex,e),pE.fromBufferAttribute(o.attributes.skinWeight,e),hE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const u=pE.getComponent(l);if(u!==0){const h=dE.getComponent(l);mE.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),t.addScaledVector(gU.copy(hE).applyMatrix4(mE),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}kl.prototype.isSkinnedMesh=!0;class Dl extends Ht{constructor(){super();this.type="Bone"}}Dl.prototype.isBone=!0;class Ol extends Un{constructor(e=null,t=1,r=1,o,l,u,h,m,v=ir,w=ir,S,A){super(null,u,h,m,v,w,o,l,S,A);this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ol.prototype.isDataTexture=!0;const gE=new et,vU=new et;class wa{constructor(e=[],t=[]){this.uuid=Vi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new et)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new et;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let l=0,u=e.length;l<u;l++){const h=e[l]?e[l].matrixWorld:vU;gE.multiplyMatrices(h,t[l]),gE.toArray(r,l*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new wa(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=oT(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Ol(t,e,e,Ti,xo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const l=e.bones[r];let u=t[l];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),u=new Dl),this.bones.push(u),this.boneInverses.push(new et().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,l=t.length;o<l;o++){const u=t[o];e.bones.push(u.uuid);const h=r[o];e.boneInverses.push(h.toArray())}return e}}class Nl extends Dt{constructor(e,t,r,o=1){typeof r=="number"&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Nl.prototype.isInstancedBufferAttribute=!0;const vE=new et,yE=new et,Km=[],Bh=new ot;class Px extends ot{constructor(e,t,r){super(e,t);this.instanceMatrix=new Nl(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(Bh.geometry=this.geometry,Bh.material=this.material,Bh.material!==void 0)for(let l=0;l<o;l++){this.getMatrixAt(l,vE),yE.multiplyMatrices(r,vE),Bh.matrixWorld=yE,Bh.raycast(e,Km);for(let u=0,h=Km.length;u<h;u++){const m=Km[u];m.instanceId=l,m.object=this,t.push(m)}Km.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Nl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Px.prototype.isInstancedMesh=!0;class Pn extends Bn{constructor(e){super();this.type="LineBasicMaterial",this.color=new Qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}Pn.prototype.isLineBasicMaterial=!0;const xE=new le,_E=new le,wE=new et,kx=new da,Qm=new bo;class gr extends Ht{constructor(e=new xt,t=new Pn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let o=1,l=t.count;o<l;o++)xE.fromBufferAttribute(t,o-1),_E.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=xE.distanceTo(_E);e.setAttribute("lineDistance",new mt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Qm.copy(r.boundingSphere),Qm.applyMatrix4(o),Qm.radius+=l,e.ray.intersectsSphere(Qm)===!1)return;wE.copy(o).invert(),kx.copy(e.ray).applyMatrix4(wE);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,v=new le,w=new le,S=new le,A=new le,R=this.isLineSegments?2:1;if(r.isBufferGeometry){const O=r.index,k=r.attributes.position;if(O!==null){const D=Math.max(0,u.start),P=Math.min(O.count,u.start+u.count);for(let F=D,L=P-1;F<L;F+=R){const z=O.getX(F),H=O.getX(F+1);if(v.fromBufferAttribute(k,z),w.fromBufferAttribute(k,H),kx.distanceSqToSegment(v,w,A,S)>m)continue;A.applyMatrix4(this.matrixWorld);const $=e.ray.origin.distanceTo(A);$<e.near||$>e.far||t.push({distance:$,point:S.clone().applyMatrix4(this.matrixWorld),index:F,face:null,faceIndex:null,object:this})}}else{const D=Math.max(0,u.start),P=Math.min(k.count,u.start+u.count);for(let F=D,L=P-1;F<L;F+=R){if(v.fromBufferAttribute(k,F),w.fromBufferAttribute(k,F+1),kx.distanceSqToSegment(v,w,A,S)>m)continue;A.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(A);H<e.near||H>e.far||t.push({distance:H,point:S.clone().applyMatrix4(this.matrixWorld),index:F,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=o.length;l<u;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}gr.prototype.isLine=!0;const bE=new le,SE=new le;class kr extends gr{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let o=0,l=t.count;o<l;o+=2)bE.fromBufferAttribute(t,o),SE.fromBufferAttribute(t,o+1),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+bE.distanceTo(SE);e.setAttribute("lineDistance",new mt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}kr.prototype.isLineSegments=!0;class Zm extends gr{constructor(e,t){super(e,t);this.type="LineLoop"}}Zm.prototype.isLineLoop=!0;class ba extends Bn{constructor(e){super();this.type="PointsMaterial",this.color=new Qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}ba.prototype.isPointsMaterial=!0;const ME=new et,Dx=new da,Jm=new bo,eg=new le;class Mc extends Ht{constructor(e=new xt,t=new ba){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Jm.copy(r.boundingSphere),Jm.applyMatrix4(o),Jm.radius+=l,e.ray.intersectsSphere(Jm)===!1)return;ME.copy(o).invert(),Dx.copy(e.ray).applyMatrix4(ME);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h;if(r.isBufferGeometry){const v=r.index,S=r.attributes.position;if(v!==null){const A=Math.max(0,u.start),R=Math.min(v.count,u.start+u.count);for(let O=A,N=R;O<N;O++){const k=v.getX(O);eg.fromBufferAttribute(S,k),TE(eg,k,m,o,e,t,this)}}else{const A=Math.max(0,u.start),R=Math.min(S.count,u.start+u.count);for(let O=A,N=R;O<N;O++)eg.fromBufferAttribute(S,O),TE(eg,O,m,o,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,u=o.length;l<u;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Mc.prototype.isPoints=!0;function TE(s,e,t,r,o,l,u){const h=Dx.distanceSqToPoint(s);if(h<t){const m=new le;Dx.closestPointToPoint(s,m),m.applyMatrix4(r);const v=o.ray.origin.distanceTo(m);if(v<o.near||v>o.far)return;l.push({distance:v,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:u})}}class EE extends Un{constructor(e,t,r,o,l,u,h,m,v){super(e,t,r,o,l,u,h,m,v);this.minFilter=u!==void 0?u:jn,this.magFilter=l!==void 0?l:jn,this.generateMipmaps=!1;const w=this;function S(){w.needsUpdate=!0,e.requestVideoFrameCallback(S)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(S)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}EE.prototype.isVideoTexture=!0;class AE extends Un{constructor(e,t,r){super({width:e,height:t});this.format=r,this.magFilter=ir,this.minFilter=ir,this.generateMipmaps=!1,this.needsUpdate=!0}}AE.prototype.isFramebufferTexture=!0;class Ox extends Un{constructor(e,t,r,o,l,u,h,m,v,w,S,A){super(null,u,h,m,v,w,o,l,S,A);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Ox.prototype.isCompressedTexture=!0;class CE extends Un{constructor(e,t,r,o,l,u,h,m,v){super(e,t,r,o,l,u,h,m,v);this.needsUpdate=!0}}CE.prototype.isCanvasTexture=!0;class Ai{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),l=0;t.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),l+=r.distanceTo(o),t.push(l),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const l=r.length;let u;t?u=t:u=e*r[l-1];let h=0,m=l-1,v;for(;h<=m;)if(o=Math.floor(h+(m-h)/2),v=r[o]-u,v<0)h=o+1;else if(v>0)m=o-1;else{m=o;break}if(o=m,r[o]===u)return o/(l-1);const w=r[o],A=r[o+1]-w,R=(u-w)/A;return(o+R)/(l-1)}getTangent(e,t){const r=1e-4;let o=e-r,l=e+r;o<0&&(o=0),l>1&&(l=1);const u=this.getPoint(o),h=this.getPoint(l),m=t||(u.isVector2?new je:new le);return m.copy(h).sub(u).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new le,o=[],l=[],u=[],h=new le,m=new et;for(let R=0;R<=e;R++){const O=R/e;o[R]=this.getTangentAt(O,new le)}l[0]=new le,u[0]=new le;let v=Number.MAX_VALUE;const w=Math.abs(o[0].x),S=Math.abs(o[0].y),A=Math.abs(o[0].z);w<=v&&(v=w,r.set(1,0,0)),S<=v&&(v=S,r.set(0,1,0)),A<=v&&r.set(0,0,1),h.crossVectors(o[0],r).normalize(),l[0].crossVectors(o[0],h),u[0].crossVectors(o[0],l[0]);for(let R=1;R<=e;R++){if(l[R]=l[R-1].clone(),u[R]=u[R-1].clone(),h.crossVectors(o[R-1],o[R]),h.length()>Number.EPSILON){h.normalize();const O=Math.acos(sr(o[R-1].dot(o[R]),-1,1));l[R].applyMatrix4(m.makeRotationAxis(h,O))}u[R].crossVectors(o[R],l[R])}if(t===!0){let R=Math.acos(sr(l[0].dot(l[e]),-1,1));R/=e,o[0].dot(h.crossVectors(l[0],l[e]))>0&&(R=-R);for(let O=1;O<=e;O++)l[O].applyMatrix4(m.makeRotationAxis(o[O],R*O)),u[O].crossVectors(o[O],l[O])}return{tangents:o,normals:l,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zh extends Ai{constructor(e=0,t=0,r=1,o=1,l=0,u=Math.PI*2,h=!1,m=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=u,this.aClockwise=h,this.aRotation=m}getPoint(e,t){const r=t||new je,o=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const u=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(u?l=0:l=o),this.aClockwise===!0&&!u&&(l===o?l=-o:l=l-o);const h=this.aStartAngle+e*l;let m=this.aX+this.xRadius*Math.cos(h),v=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const w=Math.cos(this.aRotation),S=Math.sin(this.aRotation),A=m-this.aX,R=v-this.aY;m=A*w-R*S+this.aX,v=A*S+R*w+this.aY}return r.set(m,v)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}zh.prototype.isEllipseCurve=!0;class Nx extends zh{constructor(e,t,r,o,l,u){super(e,t,r,r,o,l,u);this.type="ArcCurve"}}Nx.prototype.isArcCurve=!0;function Fx(){let s=0,e=0,t=0,r=0;function o(l,u,h,m){s=l,e=h,t=-3*l+3*u-2*h-m,r=2*l-2*u+h+m}return{initCatmullRom:function(l,u,h,m,v){o(u,h,v*(h-l),v*(m-u))},initNonuniformCatmullRom:function(l,u,h,m,v,w,S){let A=(u-l)/v-(h-l)/(v+w)+(h-u)/w,R=(h-u)/w-(m-u)/(w+S)+(m-h)/S;A*=w,R*=w,o(u,h,A,R)},calc:function(l){const u=l*l,h=u*l;return s+e*l+t*u+r*h}}}const tg=new le,Ux=new Fx,Bx=new Fx,zx=new Fx;class Hx extends Ai{constructor(e=[],t=!1,r="centripetal",o=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new le){const r=t,o=this.points,l=o.length,u=(l-(this.closed?0:1))*e;let h=Math.floor(u),m=u-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:m===0&&h===l-1&&(h=l-2,m=1);let v,w;this.closed||h>0?v=o[(h-1)%l]:(tg.subVectors(o[0],o[1]).add(o[0]),v=tg);const S=o[h%l],A=o[(h+1)%l];if(this.closed||h+2<l?w=o[(h+2)%l]:(tg.subVectors(o[l-1],o[l-2]).add(o[l-1]),w=tg),this.curveType==="centripetal"||this.curveType==="chordal"){const R=this.curveType==="chordal"?.5:.25;let O=Math.pow(v.distanceToSquared(S),R),N=Math.pow(S.distanceToSquared(A),R),k=Math.pow(A.distanceToSquared(w),R);N<1e-4&&(N=1),O<1e-4&&(O=N),k<1e-4&&(k=N),Ux.initNonuniformCatmullRom(v.x,S.x,A.x,w.x,O,N,k),Bx.initNonuniformCatmullRom(v.y,S.y,A.y,w.y,O,N,k),zx.initNonuniformCatmullRom(v.z,S.z,A.z,w.z,O,N,k)}else this.curveType==="catmullrom"&&(Ux.initCatmullRom(v.x,S.x,A.x,w.x,this.tension),Bx.initCatmullRom(v.y,S.y,A.y,w.y,this.tension),zx.initCatmullRom(v.z,S.z,A.z,w.z,this.tension));return r.set(Ux.calc(m),Bx.calc(m),zx.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new le().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Hx.prototype.isCatmullRomCurve3=!0;function RE(s,e,t,r,o){const l=(r-e)*.5,u=(o-t)*.5,h=s*s,m=s*h;return(2*t-2*r+l+u)*m+(-3*t+3*r-2*l-u)*h+l*s+t}function yU(s,e){const t=1-s;return t*t*e}function xU(s,e){return 2*(1-s)*s*e}function _U(s,e){return s*s*e}function Hh(s,e,t,r){return yU(s,e)+xU(s,t)+_U(s,r)}function wU(s,e){const t=1-s;return t*t*t*e}function bU(s,e){const t=1-s;return 3*t*t*s*e}function SU(s,e){return 3*(1-s)*s*s*e}function MU(s,e){return s*s*s*e}function Gh(s,e,t,r,o){return wU(s,e)+bU(s,t)+SU(s,r)+MU(s,o)}class ng extends Ai{constructor(e=new je,t=new je,r=new je,o=new je){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new je){const r=t,o=this.v0,l=this.v1,u=this.v2,h=this.v3;return r.set(Gh(e,o.x,l.x,u.x,h.x),Gh(e,o.y,l.y,u.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ng.prototype.isCubicBezierCurve=!0;class Gx extends Ai{constructor(e=new le,t=new le,r=new le,o=new le){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new le){const r=t,o=this.v0,l=this.v1,u=this.v2,h=this.v3;return r.set(Gh(e,o.x,l.x,u.x,h.x),Gh(e,o.y,l.y,u.y,h.y),Gh(e,o.z,l.z,u.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Gx.prototype.isCubicBezierCurve3=!0;class Vh extends Ai{constructor(e=new je,t=new je){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new je){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new je;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vh.prototype.isLineCurve=!0;class LE extends Ai{constructor(e=new le,t=new le){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new le){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rg extends Ai{constructor(e=new je,t=new je,r=new je){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new je){const r=t,o=this.v0,l=this.v1,u=this.v2;return r.set(Hh(e,o.x,l.x,u.x),Hh(e,o.y,l.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}rg.prototype.isQuadraticBezierCurve=!0;class ig extends Ai{constructor(e=new le,t=new le,r=new le){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new le){const r=t,o=this.v0,l=this.v1,u=this.v2;return r.set(Hh(e,o.x,l.x,u.x),Hh(e,o.y,l.y,u.y),Hh(e,o.z,l.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ig.prototype.isQuadraticBezierCurve3=!0;class sg extends Ai{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new je){const r=t,o=this.points,l=(o.length-1)*e,u=Math.floor(l),h=l-u,m=o[u===0?u:u-1],v=o[u],w=o[u>o.length-2?o.length-1:u+1],S=o[u>o.length-3?o.length-1:u+2];return r.set(RE(h,m.x,v.x,w.x,S.x),RE(h,m.y,v.y,w.y,S.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new je().fromArray(o))}return this}}sg.prototype.isSplineCurve=!0;var Vx=Object.freeze({__proto__:null,ArcCurve:Nx,CatmullRomCurve3:Hx,CubicBezierCurve:ng,CubicBezierCurve3:Gx,EllipseCurve:zh,LineCurve:Vh,LineCurve3:LE,QuadraticBezierCurve:rg,QuadraticBezierCurve3:ig,SplineCurve:sg});class IE extends Ai{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Vh(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=r){const u=o[l]-r,h=this.curves[l],m=h.getLength(),v=m===0?0:1-u/m;return h.getPointAt(v,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,l=this.curves;o<l.length;o++){const u=l[o],h=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,m=u.getPoints(h);for(let v=0;v<m.length;v++){const w=m[v];r&&r.equals(w)||(t.push(w),r=w)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(new Vx[o.type]().fromJSON(o))}return this}}class Tc extends IE{constructor(e){super();this.type="Path",this.currentPoint=new je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Vh(this.currentPoint.clone(),new je(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const l=new rg(this.currentPoint.clone(),new je(e,t),new je(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,l,u){const h=new ng(this.currentPoint.clone(),new je(e,t),new je(r,o),new je(l,u));return this.curves.push(h),this.currentPoint.set(l,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new sg(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,l,u){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absarc(e+h,t+m,r,o,l,u),this}absarc(e,t,r,o,l,u){return this.absellipse(e,t,r,r,o,l,u),this}ellipse(e,t,r,o,l,u,h,m){const v=this.currentPoint.x,w=this.currentPoint.y;return this.absellipse(e+v,t+w,r,o,l,u,h,m),this}absellipse(e,t,r,o,l,u,h,m){const v=new zh(e,t,r,o,l,u,h,m);if(this.curves.length>0){const S=v.getPoint(0);S.equals(this.currentPoint)||this.lineTo(S.x,S.y)}this.curves.push(v);const w=v.getPoint(1);return this.currentPoint.copy(w),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Fl extends xt{constructor(e=[new je(0,.5),new je(.5,0),new je(0,-.5)],t=12,r=0,o=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=Math.floor(t),o=sr(o,0,Math.PI*2);const l=[],u=[],h=[],m=[],v=[],w=1/t,S=new le,A=new je,R=new le,O=new le,N=new le;let k=0,D=0;for(let P=0;P<=e.length-1;P++)switch(P){case 0:k=e[P+1].x-e[P].x,D=e[P+1].y-e[P].y,R.x=D*1,R.y=-k,R.z=D*0,N.copy(R),R.normalize(),m.push(R.x,R.y,R.z);break;case e.length-1:m.push(N.x,N.y,N.z);break;default:k=e[P+1].x-e[P].x,D=e[P+1].y-e[P].y,R.x=D*1,R.y=-k,R.z=D*0,O.copy(R),R.x+=N.x,R.y+=N.y,R.z+=N.z,R.normalize(),m.push(R.x,R.y,R.z),N.copy(O)}for(let P=0;P<=t;P++){const F=r+P*w*o,L=Math.sin(F),z=Math.cos(F);for(let H=0;H<=e.length-1;H++){S.x=e[H].x*L,S.y=e[H].y,S.z=e[H].x*z,u.push(S.x,S.y,S.z),A.x=P/t,A.y=H/(e.length-1),h.push(A.x,A.y);const X=m[3*H+0]*L,$=m[3*H+1],J=m[3*H+0]*z;v.push(X,$,J)}}for(let P=0;P<t;P++)for(let F=0;F<e.length-1;F++){const L=F+P*e.length,z=L,H=L+e.length,X=L+e.length+1,$=L+1;l.push(z,H,$),l.push(X,$,H)}this.setIndex(l),this.setAttribute("position",new mt(u,3)),this.setAttribute("uv",new mt(h,2)),this.setAttribute("normal",new mt(v,3))}static fromJSON(e){return new Fl(e.points,e.segments,e.phiStart,e.phiLength)}}class Ec extends Fl{constructor(e=1,t=1,r=4,o=8){const l=new Tc;l.absarc(0,-t/2,e,Math.PI*1.5,0),l.absarc(0,t/2,e,0,Math.PI*.5);super(l.getPoints(r),o);this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:o}}static fromJSON(e){return new Ec(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ac extends xt{constructor(e=1,t=8,r=0,o=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},t=Math.max(3,t);const l=[],u=[],h=[],m=[],v=new le,w=new je;u.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let S=0,A=3;S<=t;S++,A+=3){const R=r+S/t*o;v.x=e*Math.cos(R),v.y=e*Math.sin(R),u.push(v.x,v.y,v.z),h.push(0,0,1),w.x=(u[A]/e+1)/2,w.y=(u[A+1]/e+1)/2,m.push(w.x,w.y)}for(let S=1;S<=t;S++)l.push(S,S+1,0);this.setIndex(l),this.setAttribute("position",new mt(u,3)),this.setAttribute("normal",new mt(h,3)),this.setAttribute("uv",new mt(m,2))}static fromJSON(e){return new Ac(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qn extends xt{constructor(e=1,t=1,r=1,o=8,l=1,u=!1,h=0,m=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:l,openEnded:u,thetaStart:h,thetaLength:m};const v=this;o=Math.floor(o),l=Math.floor(l);const w=[],S=[],A=[],R=[];let O=0;const N=[],k=r/2;let D=0;P(),u===!1&&(e>0&&F(!0),t>0&&F(!1)),this.setIndex(w),this.setAttribute("position",new mt(S,3)),this.setAttribute("normal",new mt(A,3)),this.setAttribute("uv",new mt(R,2));function P(){const L=new le,z=new le;let H=0;const X=(t-e)/r;for(let $=0;$<=l;$++){const J=[],se=$/l,ce=se*(t-e)+e;for(let pe=0;pe<=o;pe++){const fe=pe/o,b=fe*m+h,p=Math.sin(b),ee=Math.cos(b);z.x=ce*p,z.y=-se*r+k,z.z=ce*ee,S.push(z.x,z.y,z.z),L.set(p,X,ee).normalize(),A.push(L.x,L.y,L.z),R.push(fe,1-se),J.push(O++)}N.push(J)}for(let $=0;$<o;$++)for(let J=0;J<l;J++){const se=N[J][$],ce=N[J+1][$],pe=N[J+1][$+1],fe=N[J][$+1];w.push(se,ce,fe),w.push(ce,pe,fe),H+=6}v.addGroup(D,H,0),D+=H}function F(L){const z=O,H=new je,X=new le;let $=0;const J=L===!0?e:t,se=L===!0?1:-1;for(let pe=1;pe<=o;pe++)S.push(0,k*se,0),A.push(0,se,0),R.push(.5,.5),O++;const ce=O;for(let pe=0;pe<=o;pe++){const b=pe/o*m+h,p=Math.cos(b),ee=Math.sin(b);X.x=J*ee,X.y=k*se,X.z=J*p,S.push(X.x,X.y,X.z),A.push(0,se,0),H.x=p*.5+.5,H.y=ee*.5*se+.5,R.push(H.x,H.y),O++}for(let pe=0;pe<o;pe++){const fe=z+pe,b=ce+pe;L===!0?w.push(b,b+1,fe):w.push(b+1,b,fe),$+=3}v.addGroup(D,$,L===!0?1:2),D+=$}}static fromJSON(e){return new Qn(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cc extends Qn{constructor(e=1,t=1,r=8,o=1,l=!1,u=0,h=Math.PI*2){super(0,e,t,r,o,l,u,h);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h}}static fromJSON(e){return new Cc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qs extends xt{constructor(e=[],t=[],r=1,o=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o};const l=[],u=[];h(o),v(r),w(),this.setAttribute("position",new mt(l,3)),this.setAttribute("normal",new mt(l.slice(),3)),this.setAttribute("uv",new mt(u,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function h(P){const F=new le,L=new le,z=new le;for(let H=0;H<t.length;H+=3)R(t[H+0],F),R(t[H+1],L),R(t[H+2],z),m(F,L,z,P)}function m(P,F,L,z){const H=z+1,X=[];for(let $=0;$<=H;$++){X[$]=[];const J=P.clone().lerp(L,$/H),se=F.clone().lerp(L,$/H),ce=H-$;for(let pe=0;pe<=ce;pe++)pe===0&&$===H?X[$][pe]=J:X[$][pe]=J.clone().lerp(se,pe/ce)}for(let $=0;$<H;$++)for(let J=0;J<2*(H-$)-1;J++){const se=Math.floor(J/2);J%2==0?(A(X[$][se+1]),A(X[$+1][se]),A(X[$][se])):(A(X[$][se+1]),A(X[$+1][se+1]),A(X[$+1][se]))}}function v(P){const F=new le;for(let L=0;L<l.length;L+=3)F.x=l[L+0],F.y=l[L+1],F.z=l[L+2],F.normalize().multiplyScalar(P),l[L+0]=F.x,l[L+1]=F.y,l[L+2]=F.z}function w(){const P=new le;for(let F=0;F<l.length;F+=3){P.x=l[F+0],P.y=l[F+1],P.z=l[F+2];const L=k(P)/2/Math.PI+.5,z=D(P)/Math.PI+.5;u.push(L,1-z)}O(),S()}function S(){for(let P=0;P<u.length;P+=6){const F=u[P+0],L=u[P+2],z=u[P+4],H=Math.max(F,L,z),X=Math.min(F,L,z);H>.9&&X<.1&&(F<.2&&(u[P+0]+=1),L<.2&&(u[P+2]+=1),z<.2&&(u[P+4]+=1))}}function A(P){l.push(P.x,P.y,P.z)}function R(P,F){const L=P*3;F.x=e[L+0],F.y=e[L+1],F.z=e[L+2]}function O(){const P=new le,F=new le,L=new le,z=new le,H=new je,X=new je,$=new je;for(let J=0,se=0;J<l.length;J+=9,se+=6){P.set(l[J+0],l[J+1],l[J+2]),F.set(l[J+3],l[J+4],l[J+5]),L.set(l[J+6],l[J+7],l[J+8]),H.set(u[se+0],u[se+1]),X.set(u[se+2],u[se+3]),$.set(u[se+4],u[se+5]),z.copy(P).add(F).add(L).divideScalar(3);const ce=k(z);N(H,se+0,P,ce),N(X,se+2,F,ce),N($,se+4,L,ce)}}function N(P,F,L,z){z<0&&P.x===1&&(u[F]=P.x-1),L.x===0&&L.z===0&&(u[F]=z/2/Math.PI+.5)}function k(P){return Math.atan2(P.z,-P.x)}function D(P){return Math.atan2(-P.y,Math.sqrt(P.x*P.x+P.z*P.z))}}static fromJSON(e){return new qs(e.vertices,e.indices,e.radius,e.details)}}class Rc extends qs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=1/r,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,u,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rc(e.radius,e.detail)}}const og=new le,ag=new le,Wx=new le,lg=new or;class $x extends xt{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const o=Math.pow(10,4),l=Math.cos(Tl*t),u=e.getIndex(),h=e.getAttribute("position"),m=u?u.count:h.count,v=[0,0,0],w=["a","b","c"],S=new Array(3),A={},R=[];for(let O=0;O<m;O+=3){u?(v[0]=u.getX(O),v[1]=u.getX(O+1),v[2]=u.getX(O+2)):(v[0]=O,v[1]=O+1,v[2]=O+2);const{a:N,b:k,c:D}=lg;if(N.fromBufferAttribute(h,v[0]),k.fromBufferAttribute(h,v[1]),D.fromBufferAttribute(h,v[2]),lg.getNormal(Wx),S[0]=`${Math.round(N.x*o)},${Math.round(N.y*o)},${Math.round(N.z*o)}`,S[1]=`${Math.round(k.x*o)},${Math.round(k.y*o)},${Math.round(k.z*o)}`,S[2]=`${Math.round(D.x*o)},${Math.round(D.y*o)},${Math.round(D.z*o)}`,!(S[0]===S[1]||S[1]===S[2]||S[2]===S[0]))for(let P=0;P<3;P++){const F=(P+1)%3,L=S[P],z=S[F],H=lg[w[P]],X=lg[w[F]],$=`${L}_${z}`,J=`${z}_${L}`;J in A&&A[J]?(Wx.dot(A[J].normal)<=l&&(R.push(H.x,H.y,H.z),R.push(X.x,X.y,X.z)),A[J]=null):$ in A||(A[$]={index0:v[P],index1:v[F],normal:Wx.clone()})}}for(const O in A)if(A[O]){const{index0:N,index1:k}=A[O];og.fromBufferAttribute(h,N),ag.fromBufferAttribute(h,k),R.push(og.x,og.y,og.z),R.push(ag.x,ag.y,ag.z)}this.setAttribute("position",new mt(R,3))}}}class Xs extends Tc{constructor(e){super(e);this.uuid=Vi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(new Tc().fromJSON(o))}return this}}const TU={triangulate:function(s,e,t=2){const r=e&&e.length,o=r?e[0]*t:s.length;let l=PE(s,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,m,v,w,S,A,R;if(r&&(l=LU(s,e,l,t)),s.length>80*t){h=v=s[0],m=w=s[1];for(let O=t;O<o;O+=t)S=s[O],A=s[O+1],S<h&&(h=S),A<m&&(m=A),S>v&&(v=S),A>w&&(w=A);R=Math.max(v-h,w-m),R=R!==0?1/R:0}return Wh(l,u,t,h,m,R),u}};function PE(s,e,t,r,o){let l,u;if(o===HU(s,e,t,r)>0)for(l=e;l<t;l+=r)u=OE(l,s[l],s[l+1],u);else for(l=t-r;l>=e;l-=r)u=OE(l,s[l],s[l+1],u);return u&&ug(u,u.next)&&(jh(u),u=u.next),u}function Sa(s,e){if(!s)return s;e||(e=s);let t=s,r;do if(r=!1,!t.steiner&&(ug(t,t.next)||qn(t.prev,t,t.next)===0)){if(jh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Wh(s,e,t,r,o,l,u){if(!s)return;!u&&l&&OU(s,r,o,l);let h=s,m,v;for(;s.prev!==s.next;){if(m=s.prev,v=s.next,l?AU(s,r,o,l):EU(s)){e.push(m.i/t),e.push(s.i/t),e.push(v.i/t),jh(s),s=v.next,h=v.next;continue}if(s=v,s===h){u?u===1?(s=CU(Sa(s),e,t),Wh(s,e,t,r,o,l,2)):u===2&&RU(s,e,t,r,o,l):Wh(Sa(s),e,t,r,o,l,1);break}}}function EU(s){const e=s.prev,t=s,r=s.next;if(qn(e,t,r)>=0)return!1;let o=s.next.next;for(;o!==s.prev;){if(Lc(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&qn(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function AU(s,e,t,r){const o=s.prev,l=s,u=s.next;if(qn(o,l,u)>=0)return!1;const h=o.x<l.x?o.x<u.x?o.x:u.x:l.x<u.x?l.x:u.x,m=o.y<l.y?o.y<u.y?o.y:u.y:l.y<u.y?l.y:u.y,v=o.x>l.x?o.x>u.x?o.x:u.x:l.x>u.x?l.x:u.x,w=o.y>l.y?o.y>u.y?o.y:u.y:l.y>u.y?l.y:u.y,S=jx(h,m,e,t,r),A=jx(v,w,e,t,r);let R=s.prevZ,O=s.nextZ;for(;R&&R.z>=S&&O&&O.z<=A;){if(R!==s.prev&&R!==s.next&&Lc(o.x,o.y,l.x,l.y,u.x,u.y,R.x,R.y)&&qn(R.prev,R,R.next)>=0||(R=R.prevZ,O!==s.prev&&O!==s.next&&Lc(o.x,o.y,l.x,l.y,u.x,u.y,O.x,O.y)&&qn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;R&&R.z>=S;){if(R!==s.prev&&R!==s.next&&Lc(o.x,o.y,l.x,l.y,u.x,u.y,R.x,R.y)&&qn(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;O&&O.z<=A;){if(O!==s.prev&&O!==s.next&&Lc(o.x,o.y,l.x,l.y,u.x,u.y,O.x,O.y)&&qn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function CU(s,e,t){let r=s;do{const o=r.prev,l=r.next.next;!ug(o,l)&&kE(o,r,r.next,l)&&$h(o,l)&&$h(l,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(l.i/t),jh(r),jh(r.next),r=s=l),r=r.next}while(r!==s);return Sa(r)}function RU(s,e,t,r,o,l){let u=s;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&UU(u,h)){let m=DE(u,h);u=Sa(u,u.next),m=Sa(m,m.next),Wh(u,e,t,r,o,l),Wh(m,e,t,r,o,l);return}h=h.next}u=u.next}while(u!==s)}function LU(s,e,t,r){const o=[];let l,u,h,m,v;for(l=0,u=e.length;l<u;l++)h=e[l]*r,m=l<u-1?e[l+1]*r:s.length,v=PE(s,h,m,r,!1),v===v.next&&(v.steiner=!0),o.push(FU(v));for(o.sort(IU),l=0;l<o.length;l++)PU(o[l],t),t=Sa(t,t.next);return t}function IU(s,e){return s.x-e.x}function PU(s,e){if(e=kU(s,e),e){const t=DE(e,s);Sa(e,e.next),Sa(t,t.next)}}function kU(s,e){let t=e;const r=s.x,o=s.y;let l=-1/0,u;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const A=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(A<=r&&A>l){if(l=A,A===r){if(o===t.y)return t;if(o===t.next.y)return t.next}u=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!u)return null;if(r===l)return u;const h=u,m=u.x,v=u.y;let w=1/0,S;t=u;do r>=t.x&&t.x>=m&&r!==t.x&&Lc(o<v?r:l,o,m,v,o<v?l:r,o,t.x,t.y)&&(S=Math.abs(o-t.y)/(r-t.x),$h(t,s)&&(S<w||S===w&&(t.x>u.x||t.x===u.x&&DU(u,t)))&&(u=t,w=S)),t=t.next;while(t!==h);return u}function DU(s,e){return qn(s.prev,s,e.prev)<0&&qn(e.next,s,s.next)<0}function OU(s,e,t,r){let o=s;do o.z===null&&(o.z=jx(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==s);o.prevZ.nextZ=null,o.prevZ=null,NU(o)}function NU(s){let e,t,r,o,l,u,h,m,v=1;do{for(t=s,s=null,l=null,u=0;t;){for(u++,r=t,h=0,e=0;e<v&&(h++,r=r.nextZ,!!r);e++);for(m=v;h>0||m>0&&r;)h!==0&&(m===0||!r||t.z<=r.z)?(o=t,t=t.nextZ,h--):(o=r,r=r.nextZ,m--),l?l.nextZ=o:s=o,o.prevZ=l,l=o;t=r}l.nextZ=null,v*=2}while(u>1);return s}function jx(s,e,t,r,o){return s=32767*(s-t)*o,e=32767*(e-r)*o,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}function FU(s){let e=s,t=s;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==s);return t}function Lc(s,e,t,r,o,l,u,h){return(o-u)*(e-h)-(s-u)*(l-h)>=0&&(s-u)*(r-h)-(t-u)*(e-h)>=0&&(t-u)*(l-h)-(o-u)*(r-h)>=0}function UU(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!BU(s,e)&&($h(s,e)&&$h(e,s)&&zU(s,e)&&(qn(s.prev,s,e.prev)||qn(s,e.prev,e))||ug(s,e)&&qn(s.prev,s,s.next)>0&&qn(e.prev,e,e.next)>0)}function qn(s,e,t){return(e.y-s.y)*(t.x-e.x)-(e.x-s.x)*(t.y-e.y)}function ug(s,e){return s.x===e.x&&s.y===e.y}function kE(s,e,t,r){const o=fg(qn(s,e,t)),l=fg(qn(s,e,r)),u=fg(qn(t,r,s)),h=fg(qn(t,r,e));return!!(o!==l&&u!==h||o===0&&cg(s,t,e)||l===0&&cg(s,r,e)||u===0&&cg(t,s,r)||h===0&&cg(t,e,r))}function cg(s,e,t){return e.x<=Math.max(s.x,t.x)&&e.x>=Math.min(s.x,t.x)&&e.y<=Math.max(s.y,t.y)&&e.y>=Math.min(s.y,t.y)}function fg(s){return s>0?1:s<0?-1:0}function BU(s,e){let t=s;do{if(t.i!==s.i&&t.next.i!==s.i&&t.i!==e.i&&t.next.i!==e.i&&kE(t,t.next,s,e))return!0;t=t.next}while(t!==s);return!1}function $h(s,e){return qn(s.prev,s,s.next)<0?qn(s,e,s.next)>=0&&qn(s,s.prev,e)>=0:qn(s,e,s.prev)<0||qn(s,s.next,e)<0}function zU(s,e){let t=s,r=!1;const o=(s.x+e.x)/2,l=(s.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==s);return r}function DE(s,e){const t=new qx(s.i,s.x,s.y),r=new qx(e.i,e.x,e.y),o=s.next,l=e.prev;return s.next=e,e.prev=s,t.next=o,o.prev=t,r.next=t,t.prev=r,l.next=r,r.prev=l,r}function OE(s,e,t,r){const o=new qx(s,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function jh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function qx(s,e,t){this.i=s,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function HU(s,e,t,r){let o=0;for(let l=e,u=t-r;l<t;l+=r)o+=(s[u]-s[l])*(s[l+1]+s[u+1]),u=l;return o}class Ys{static area(e){const t=e.length;let r=0;for(let o=t-1,l=0;l<t;o=l++)r+=e[o].x*e[l].y-e[l].x*e[o].y;return r*.5}static isClockWise(e){return Ys.area(e)<0}static triangulateShape(e,t){const r=[],o=[],l=[];NE(e),FE(r,e);let u=e.length;t.forEach(NE);for(let m=0;m<t.length;m++)o.push(u),u+=t[m].length,FE(r,t[m]);const h=TU.triangulate(r,o);for(let m=0;m<h.length;m+=3)l.push(h.slice(m,m+3));return l}}function NE(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function FE(s,e){for(let t=0;t<e.length;t++)s.push(e[t].x),s.push(e[t].y)}class Ks extends xt{constructor(e=new Xs([new je(.5,.5),new je(-.5,.5),new je(-.5,-.5),new je(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],l=[];for(let h=0,m=e.length;h<m;h++){const v=e[h];u(v)}this.setAttribute("position",new mt(o,3)),this.setAttribute("uv",new mt(l,2)),this.computeVertexNormals();function u(h){const m=[],v=t.curveSegments!==void 0?t.curveSegments:12,w=t.steps!==void 0?t.steps:1;let S=t.depth!==void 0?t.depth:1,A=t.bevelEnabled!==void 0?t.bevelEnabled:!0,R=t.bevelThickness!==void 0?t.bevelThickness:.2,O=t.bevelSize!==void 0?t.bevelSize:R-.1,N=t.bevelOffset!==void 0?t.bevelOffset:0,k=t.bevelSegments!==void 0?t.bevelSegments:3;const D=t.extrudePath,P=t.UVGenerator!==void 0?t.UVGenerator:GU;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),S=t.amount);let F,L=!1,z,H,X,$;D&&(F=D.getSpacedPoints(w),L=!0,A=!1,z=D.computeFrenetFrames(w,!1),H=new le,X=new le,$=new le),A||(k=0,R=0,O=0,N=0);const J=h.extractPoints(v);let se=J.shape;const ce=J.holes;if(!Ys.isClockWise(se)){se=se.reverse();for(let De=0,Pe=ce.length;De<Pe;De++){const Ye=ce[De];Ys.isClockWise(Ye)&&(ce[De]=Ye.reverse())}}const fe=Ys.triangulateShape(se,ce),b=se;for(let De=0,Pe=ce.length;De<Pe;De++){const Ye=ce[De];se=se.concat(Ye)}function p(De,Pe,Ye){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().multiplyScalar(Ye).add(De)}const ee=se.length,E=fe.length;function me(De,Pe,Ye){let Fe,oe,St;const q=De.x-Pe.x,Xe=De.y-Pe.y,Ft=Ye.x-De.x,Y=Ye.y-De.y,n=q*q+Xe*Xe,i=q*Y-Xe*Ft;if(Math.abs(i)>Number.EPSILON){const a=Math.sqrt(n),f=Math.sqrt(Ft*Ft+Y*Y),g=Pe.x-Xe/a,y=Pe.y+q/a,M=Ye.x-Y/f,C=Ye.y+Ft/f,I=((M-g)*Y-(C-y)*Ft)/(q*Y-Xe*Ft);Fe=g+q*I-De.x,oe=y+Xe*I-De.y;const B=Fe*Fe+oe*oe;if(B<=2)return new je(Fe,oe);St=Math.sqrt(B/2)}else{let a=!1;q>Number.EPSILON?Ft>Number.EPSILON&&(a=!0):q<-Number.EPSILON?Ft<-Number.EPSILON&&(a=!0):Math.sign(Xe)===Math.sign(Y)&&(a=!0),a?(Fe=-Xe,oe=q,St=Math.sqrt(n)):(Fe=q,oe=Xe,St=Math.sqrt(n/2))}return new je(Fe/St,oe/St)}const Se=[];for(let De=0,Pe=b.length,Ye=Pe-1,Fe=De+1;De<Pe;De++,Ye++,Fe++)Ye===Pe&&(Ye=0),Fe===Pe&&(Fe=0),Se[De]=me(b[De],b[Ye],b[Fe]);const Te=[];let ye,de=Se.concat();for(let De=0,Pe=ce.length;De<Pe;De++){const Ye=ce[De];ye=[];for(let Fe=0,oe=Ye.length,St=oe-1,q=Fe+1;Fe<oe;Fe++,St++,q++)St===oe&&(St=0),q===oe&&(q=0),ye[Fe]=me(Ye[Fe],Ye[St],Ye[q]);Te.push(ye),de=de.concat(ye)}for(let De=0;De<k;De++){const Pe=De/k,Ye=R*Math.cos(Pe*Math.PI/2),Fe=O*Math.sin(Pe*Math.PI/2)+N;for(let oe=0,St=b.length;oe<St;oe++){const q=p(b[oe],Se[oe],Fe);Be(q.x,q.y,-Ye)}for(let oe=0,St=ce.length;oe<St;oe++){const q=ce[oe];ye=Te[oe];for(let Xe=0,Ft=q.length;Xe<Ft;Xe++){const Y=p(q[Xe],ye[Xe],Fe);Be(Y.x,Y.y,-Ye)}}}const Re=O+N;for(let De=0;De<ee;De++){const Pe=A?p(se[De],de[De],Re):se[De];L?(X.copy(z.normals[0]).multiplyScalar(Pe.x),H.copy(z.binormals[0]).multiplyScalar(Pe.y),$.copy(F[0]).add(X).add(H),Be($.x,$.y,$.z)):Be(Pe.x,Pe.y,0)}for(let De=1;De<=w;De++)for(let Pe=0;Pe<ee;Pe++){const Ye=A?p(se[Pe],de[Pe],Re):se[Pe];L?(X.copy(z.normals[De]).multiplyScalar(Ye.x),H.copy(z.binormals[De]).multiplyScalar(Ye.y),$.copy(F[De]).add(X).add(H),Be($.x,$.y,$.z)):Be(Ye.x,Ye.y,S/w*De)}for(let De=k-1;De>=0;De--){const Pe=De/k,Ye=R*Math.cos(Pe*Math.PI/2),Fe=O*Math.sin(Pe*Math.PI/2)+N;for(let oe=0,St=b.length;oe<St;oe++){const q=p(b[oe],Se[oe],Fe);Be(q.x,q.y,S+Ye)}for(let oe=0,St=ce.length;oe<St;oe++){const q=ce[oe];ye=Te[oe];for(let Xe=0,Ft=q.length;Xe<Ft;Xe++){const Y=p(q[Xe],ye[Xe],Fe);L?Be(Y.x,Y.y+F[w-1].y,F[w-1].x+Ye):Be(Y.x,Y.y,S+Ye)}}}we(),Ie();function we(){const De=o.length/3;if(A){let Pe=0,Ye=ee*Pe;for(let Fe=0;Fe<E;Fe++){const oe=fe[Fe];Ve(oe[2]+Ye,oe[1]+Ye,oe[0]+Ye)}Pe=w+k*2,Ye=ee*Pe;for(let Fe=0;Fe<E;Fe++){const oe=fe[Fe];Ve(oe[0]+Ye,oe[1]+Ye,oe[2]+Ye)}}else{for(let Pe=0;Pe<E;Pe++){const Ye=fe[Pe];Ve(Ye[2],Ye[1],Ye[0])}for(let Pe=0;Pe<E;Pe++){const Ye=fe[Pe];Ve(Ye[0]+ee*w,Ye[1]+ee*w,Ye[2]+ee*w)}}r.addGroup(De,o.length/3-De,0)}function Ie(){const De=o.length/3;let Pe=0;Me(b,Pe),Pe+=b.length;for(let Ye=0,Fe=ce.length;Ye<Fe;Ye++){const oe=ce[Ye];Me(oe,Pe),Pe+=oe.length}r.addGroup(De,o.length/3-De,1)}function Me(De,Pe){let Ye=De.length;for(;--Ye>=0;){const Fe=Ye;let oe=Ye-1;oe<0&&(oe=De.length-1);for(let St=0,q=w+k*2;St<q;St++){const Xe=ee*St,Ft=ee*(St+1),Y=Pe+Fe+Xe,n=Pe+oe+Xe,i=Pe+oe+Ft,a=Pe+Fe+Ft;qe(Y,n,i,a)}}}function Be(De,Pe,Ye){m.push(De),m.push(Pe),m.push(Ye)}function Ve(De,Pe,Ye){W(De),W(Pe),W(Ye);const Fe=o.length/3,oe=P.generateTopUV(r,o,Fe-3,Fe-2,Fe-1);We(oe[0]),We(oe[1]),We(oe[2])}function qe(De,Pe,Ye,Fe){W(De),W(Pe),W(Fe),W(Pe),W(Ye),W(Fe);const oe=o.length/3,St=P.generateSideWallUV(r,o,oe-6,oe-3,oe-2,oe-1);We(St[0]),We(St[1]),We(St[3]),We(St[1]),We(St[2]),We(St[3])}function W(De){o.push(m[De*3+0]),o.push(m[De*3+1]),o.push(m[De*3+2])}function We(De){l.push(De.x),l.push(De.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return VU(t,r,e)}static fromJSON(e,t){const r=[];for(let l=0,u=e.shapes.length;l<u;l++){const h=t[e.shapes[l]];r.push(h)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new Vx[o.type]().fromJSON(o)),new Ks(r,e.options)}}const GU={generateTopUV:function(s,e,t,r,o){const l=e[t*3],u=e[t*3+1],h=e[r*3],m=e[r*3+1],v=e[o*3],w=e[o*3+1];return[new je(l,u),new je(h,m),new je(v,w)]},generateSideWallUV:function(s,e,t,r,o,l){const u=e[t*3],h=e[t*3+1],m=e[t*3+2],v=e[r*3],w=e[r*3+1],S=e[r*3+2],A=e[o*3],R=e[o*3+1],O=e[o*3+2],N=e[l*3],k=e[l*3+1],D=e[l*3+2];return Math.abs(h-w)<Math.abs(u-v)?[new je(u,1-m),new je(v,1-S),new je(A,1-O),new je(N,1-D)]:[new je(h,1-m),new je(w,1-S),new je(R,1-O),new je(k,1-D)]}};function VU(s,e,t){if(t.shapes=[],Array.isArray(s))for(let r=0,o=s.length;r<o;r++){const l=s[r];t.shapes.push(l.uuid)}else t.shapes.push(s.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ic extends qs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,l,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ic(e.radius,e.detail)}}class As extends qs{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,o,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new As(e.radius,e.detail)}}class Pc extends xt{constructor(e=.5,t=1,r=8,o=1,l=0,u=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:o,thetaStart:l,thetaLength:u},r=Math.max(3,r),o=Math.max(1,o);const h=[],m=[],v=[],w=[];let S=e;const A=(t-e)/o,R=new le,O=new je;for(let N=0;N<=o;N++){for(let k=0;k<=r;k++){const D=l+k/r*u;R.x=S*Math.cos(D),R.y=S*Math.sin(D),m.push(R.x,R.y,R.z),v.push(0,0,1),O.x=(R.x/t+1)/2,O.y=(R.y/t+1)/2,w.push(O.x,O.y)}S+=A}for(let N=0;N<o;N++){const k=N*(r+1);for(let D=0;D<r;D++){const P=D+k,F=P,L=P+r+1,z=P+r+2,H=P+1;h.push(F,L,H),h.push(L,z,H)}}this.setIndex(h),this.setAttribute("position",new mt(m,3)),this.setAttribute("normal",new mt(v,3)),this.setAttribute("uv",new mt(w,2))}static fromJSON(e){return new Pc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ul extends xt{constructor(e=new Xs([new je(0,.5),new je(-.5,-.5),new je(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],l=[],u=[];let h=0,m=0;if(Array.isArray(e)===!1)v(e);else for(let w=0;w<e.length;w++)v(e[w]),this.addGroup(h,m,w),h+=m,m=0;this.setIndex(r),this.setAttribute("position",new mt(o,3)),this.setAttribute("normal",new mt(l,3)),this.setAttribute("uv",new mt(u,2));function v(w){const S=o.length/3,A=w.extractPoints(t);let R=A.shape;const O=A.holes;Ys.isClockWise(R)===!1&&(R=R.reverse());for(let k=0,D=O.length;k<D;k++){const P=O[k];Ys.isClockWise(P)===!0&&(O[k]=P.reverse())}const N=Ys.triangulateShape(R,O);for(let k=0,D=O.length;k<D;k++){const P=O[k];R=R.concat(P)}for(let k=0,D=R.length;k<D;k++){const P=R[k];o.push(P.x,P.y,0),l.push(0,0,1),u.push(P.x,P.y)}for(let k=0,D=N.length;k<D;k++){const P=N[k],F=P[0]+S,L=P[1]+S,z=P[2]+S;r.push(F,L,z),m+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return WU(t,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];r.push(u)}return new Ul(r,e.curveSegments)}}function WU(s,e){if(e.shapes=[],Array.isArray(s))for(let t=0,r=s.length;t<r;t++){const o=s[t];e.shapes.push(o.uuid)}else e.shapes.push(s.uuid);return e}class Ma extends xt{constructor(e=1,t=32,r=16,o=0,l=Math.PI*2,u=0,h=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:o,phiLength:l,thetaStart:u,thetaLength:h},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const m=Math.min(u+h,Math.PI);let v=0;const w=[],S=new le,A=new le,R=[],O=[],N=[],k=[];for(let D=0;D<=r;D++){const P=[],F=D/r;let L=0;D==0&&u==0?L=.5/t:D==r&&m==Math.PI&&(L=-.5/t);for(let z=0;z<=t;z++){const H=z/t;S.x=-e*Math.cos(o+H*l)*Math.sin(u+F*h),S.y=e*Math.cos(u+F*h),S.z=e*Math.sin(o+H*l)*Math.sin(u+F*h),O.push(S.x,S.y,S.z),A.copy(S).normalize(),N.push(A.x,A.y,A.z),k.push(H+L,1-F),P.push(v++)}w.push(P)}for(let D=0;D<r;D++)for(let P=0;P<t;P++){const F=w[D][P+1],L=w[D][P],z=w[D+1][P],H=w[D+1][P+1];(D!==0||u>0)&&R.push(F,L,H),(D!==r-1||m<Math.PI)&&R.push(L,z,H)}this.setIndex(R),this.setAttribute("position",new mt(O,3)),this.setAttribute("normal",new mt(N,3)),this.setAttribute("uv",new mt(k,2))}static fromJSON(e){return new Ma(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kc extends qs{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,o,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kc(e.radius,e.detail)}}class Cs extends xt{constructor(e=1,t=.4,r=8,o=6,l=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:o,arc:l},r=Math.floor(r),o=Math.floor(o);const u=[],h=[],m=[],v=[],w=new le,S=new le,A=new le;for(let R=0;R<=r;R++)for(let O=0;O<=o;O++){const N=O/o*l,k=R/r*Math.PI*2;S.x=(e+t*Math.cos(k))*Math.cos(N),S.y=(e+t*Math.cos(k))*Math.sin(N),S.z=t*Math.sin(k),h.push(S.x,S.y,S.z),w.x=e*Math.cos(N),w.y=e*Math.sin(N),A.subVectors(S,w).normalize(),m.push(A.x,A.y,A.z),v.push(O/o),v.push(R/r)}for(let R=1;R<=r;R++)for(let O=1;O<=o;O++){const N=(o+1)*R+O-1,k=(o+1)*(R-1)+O-1,D=(o+1)*(R-1)+O,P=(o+1)*R+O;u.push(N,k,P),u.push(k,D,P)}this.setIndex(u),this.setAttribute("position",new mt(h,3)),this.setAttribute("normal",new mt(m,3)),this.setAttribute("uv",new mt(v,2))}static fromJSON(e){return new Cs(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dc extends xt{constructor(e=1,t=.4,r=64,o=8,l=2,u=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:o,p:l,q:u},r=Math.floor(r),o=Math.floor(o);const h=[],m=[],v=[],w=[],S=new le,A=new le,R=new le,O=new le,N=new le,k=new le,D=new le;for(let F=0;F<=r;++F){const L=F/r*l*Math.PI*2;P(L,l,u,e,R),P(L+.01,l,u,e,O),k.subVectors(O,R),D.addVectors(O,R),N.crossVectors(k,D),D.crossVectors(N,k),N.normalize(),D.normalize();for(let z=0;z<=o;++z){const H=z/o*Math.PI*2,X=-t*Math.cos(H),$=t*Math.sin(H);S.x=R.x+(X*D.x+$*N.x),S.y=R.y+(X*D.y+$*N.y),S.z=R.z+(X*D.z+$*N.z),m.push(S.x,S.y,S.z),A.subVectors(S,R).normalize(),v.push(A.x,A.y,A.z),w.push(F/r),w.push(z/o)}}for(let F=1;F<=r;F++)for(let L=1;L<=o;L++){const z=(o+1)*(F-1)+(L-1),H=(o+1)*F+(L-1),X=(o+1)*F+L,$=(o+1)*(F-1)+L;h.push(z,H,$),h.push(H,X,$)}this.setIndex(h),this.setAttribute("position",new mt(m,3)),this.setAttribute("normal",new mt(v,3)),this.setAttribute("uv",new mt(w,2));function P(F,L,z,H,X){const $=Math.cos(F),J=Math.sin(F),se=z/L*F,ce=Math.cos(se);X.x=H*(2+ce)*.5*$,X.y=H*(2+ce)*J*.5,X.z=H*Math.sin(se)*.5}}static fromJSON(e){return new Dc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Oc extends xt{constructor(e=new ig(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,r=1,o=8,l=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:o,closed:l};const u=e.computeFrenetFrames(t,l);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const h=new le,m=new le,v=new je;let w=new le;const S=[],A=[],R=[],O=[];N(),this.setIndex(O),this.setAttribute("position",new mt(S,3)),this.setAttribute("normal",new mt(A,3)),this.setAttribute("uv",new mt(R,2));function N(){for(let F=0;F<t;F++)k(F);k(l===!1?t:0),P(),D()}function k(F){w=e.getPointAt(F/t,w);const L=u.normals[F],z=u.binormals[F];for(let H=0;H<=o;H++){const X=H/o*Math.PI*2,$=Math.sin(X),J=-Math.cos(X);m.x=J*L.x+$*z.x,m.y=J*L.y+$*z.y,m.z=J*L.z+$*z.z,m.normalize(),A.push(m.x,m.y,m.z),h.x=w.x+r*m.x,h.y=w.y+r*m.y,h.z=w.z+r*m.z,S.push(h.x,h.y,h.z)}}function D(){for(let F=1;F<=t;F++)for(let L=1;L<=o;L++){const z=(o+1)*(F-1)+(L-1),H=(o+1)*F+(L-1),X=(o+1)*F+L,$=(o+1)*(F-1)+L;O.push(z,H,$),O.push(H,X,$)}}function P(){for(let F=0;F<=t;F++)for(let L=0;L<=o;L++)v.x=F/t,v.y=L/o,R.push(v.x,v.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Oc(new Vx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Xx extends xt{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,o=new le,l=new le;if(e.index!==null){const u=e.attributes.position,h=e.index;let m=e.groups;m.length===0&&(m=[{start:0,count:h.count,materialIndex:0}]);for(let v=0,w=m.length;v<w;++v){const S=m[v],A=S.start,R=S.count;for(let O=A,N=A+R;O<N;O+=3)for(let k=0;k<3;k++){const D=h.getX(O+k),P=h.getX(O+(k+1)%3);o.fromBufferAttribute(u,D),l.fromBufferAttribute(u,P),UE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}}else{const u=e.attributes.position;for(let h=0,m=u.count/3;h<m;h++)for(let v=0;v<3;v++){const w=3*h+v,S=3*h+(v+1)%3;o.fromBufferAttribute(u,w),l.fromBufferAttribute(u,S),UE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}this.setAttribute("position",new mt(t,3))}}}function UE(s,e,t){const r=`${s.x},${s.y},${s.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${s.x},${s.y},${s.z}`;return t.has(r)===!0||t.has(o)===!0?!1:(t.add(r),t.add(o),!0)}var BE=Object.freeze({__proto__:null,BoxGeometry:zn,BoxBufferGeometry:zn,CapsuleGeometry:Ec,CapsuleBufferGeometry:Ec,CircleGeometry:Ac,CircleBufferGeometry:Ac,ConeGeometry:Cc,ConeBufferGeometry:Cc,CylinderGeometry:Qn,CylinderBufferGeometry:Qn,DodecahedronGeometry:Rc,DodecahedronBufferGeometry:Rc,EdgesGeometry:$x,ExtrudeGeometry:Ks,ExtrudeBufferGeometry:Ks,IcosahedronGeometry:Ic,IcosahedronBufferGeometry:Ic,LatheGeometry:Fl,LatheBufferGeometry:Fl,OctahedronGeometry:As,OctahedronBufferGeometry:As,PlaneGeometry:ya,PlaneBufferGeometry:ya,PolyhedronGeometry:qs,PolyhedronBufferGeometry:qs,RingGeometry:Pc,RingBufferGeometry:Pc,ShapeGeometry:Ul,ShapeBufferGeometry:Ul,SphereGeometry:Ma,SphereBufferGeometry:Ma,TetrahedronGeometry:kc,TetrahedronBufferGeometry:kc,TorusGeometry:Cs,TorusBufferGeometry:Cs,TorusKnotGeometry:Dc,TorusKnotBufferGeometry:Dc,TubeGeometry:Oc,TubeBufferGeometry:Oc,WireframeGeometry:Xx});class Yx extends Bn{constructor(e){super();this.type="ShadowMaterial",this.color=new Qe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}Yx.prototype.isShadowMaterial=!0;class Kx extends ji{constructor(e){super(e);this.type="RawShaderMaterial"}}Kx.prototype.isRawShaderMaterial=!0;class Bl extends Bn{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}Bl.prototype.isMeshStandardMaterial=!0;class Co extends Bl{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return sr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Qe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Co.prototype.isMeshPhysicalMaterial=!0;class Nc extends Bn{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Qe(16777215),this.specular=new Qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}Nc.prototype.isMeshPhongMaterial=!0;class Qx extends Bn{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}Qx.prototype.isMeshToonMaterial=!0;class Zx extends Bn{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Zx.prototype.isMeshNormalMaterial=!0;class hg extends Bn{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}hg.prototype.isMeshLambertMaterial=!0;class Jx extends Bn{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}Jx.prototype.isMeshMatcapMaterial=!0;class e1 extends Pn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}e1.prototype.isLineDashedMaterial=!0;const $U={ShadowMaterial:Yx,SpriteMaterial:Wm,RawShaderMaterial:Kx,ShaderMaterial:ji,PointsMaterial:ba,MeshPhysicalMaterial:Co,MeshStandardMaterial:Bl,MeshPhongMaterial:Nc,MeshToonMaterial:Qx,MeshNormalMaterial:Zx,MeshLambertMaterial:hg,MeshDepthMaterial:Hm,MeshDistanceMaterial:Gm,MeshBasicMaterial:Ir,MeshMatcapMaterial:Jx,LineDashedMaterial:e1,LineBasicMaterial:Pn,Material:Bn};Bn.fromType=function(s){return new $U[s]};const kn={arraySlice:function(s,e,t){return kn.isTypedArray(s)?new s.constructor(s.subarray(e,t!==void 0?t:s.length)):s.slice(e,t)},convertArray:function(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){function e(o,l){return s[o]-s[l]}const t=s.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(e),r},sortedArray:function(s,e,t){const r=s.length,o=new s.constructor(r);for(let l=0,u=0;u!==r;++l){const h=t[l]*e;for(let m=0;m!==e;++m)o[u++]=s[h+m]}return o},flattenJSON:function(s,e,t,r){let o=1,l=s[0];for(;l!==void 0&&l[r]===void 0;)l=s[o++];if(l===void 0)return;let u=l[r];if(u!==void 0)if(Array.isArray(u))do u=l[r],u!==void 0&&(e.push(l.time),t.push.apply(t,u)),l=s[o++];while(l!==void 0);else if(u.toArray!==void 0)do u=l[r],u!==void 0&&(e.push(l.time),u.toArray(t,t.length)),l=s[o++];while(l!==void 0);else do u=l[r],u!==void 0&&(e.push(l.time),t.push(u)),l=s[o++];while(l!==void 0)},subclip:function(s,e,t,r,o=30){const l=s.clone();l.name=e;const u=[];for(let m=0;m<l.tracks.length;++m){const v=l.tracks[m],w=v.getValueSize(),S=[],A=[];for(let R=0;R<v.times.length;++R){const O=v.times[R]*o;if(!(O<t||O>=r)){S.push(v.times[R]);for(let N=0;N<w;++N)A.push(v.values[R*w+N])}}S.length!==0&&(v.times=kn.convertArray(S,v.times.constructor),v.values=kn.convertArray(A,v.values.constructor),u.push(v))}l.tracks=u;let h=1/0;for(let m=0;m<l.tracks.length;++m)h>l.tracks[m].times[0]&&(h=l.tracks[m].times[0]);for(let m=0;m<l.tracks.length;++m)l.tracks[m].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(s,e=0,t=s,r=30){r<=0&&(r=30);const o=t.tracks.length,l=e/r;for(let u=0;u<o;++u){const h=t.tracks[u],m=h.ValueTypeName;if(m==="bool"||m==="string")continue;const v=s.tracks.find(function(D){return D.name===h.name&&D.ValueTypeName===m});if(v===void 0)continue;let w=0;const S=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=S/3);let A=0;const R=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=R/3);const O=h.times.length-1;let N;if(l<=h.times[0]){const D=w,P=S-w;N=kn.arraySlice(h.values,D,P)}else if(l>=h.times[O]){const D=O*S+w,P=D+S-w;N=kn.arraySlice(h.values,D,P)}else{const D=h.createInterpolant(),P=w,F=S-w;D.evaluate(l),N=kn.arraySlice(D.resultBuffer,P,F)}m==="quaternion"&&new Ct().fromArray(N).normalize().conjugate().toArray(N);const k=v.times.length;for(let D=0;D<k;++D){const P=D*R+A;if(m==="quaternion")Ct.multiplyQuaternionsFlat(v.values,P,N,0,v.values,P);else{const F=R-A*2;for(let L=0;L<F;++L)v.values[P+L]-=N[L]}}}return s.blendMode=Xy,s}};class Qs{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],l=t[r-1];e:{t:{let u;n:{r:if(!(e<o)){for(let h=r+2;;){if(o===void 0){if(e<l)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,l)}if(r===h)break;if(l=o,o=t[++r],e<o)break t}u=t.length;break n}if(!(e>=l)){const h=t[1];e<h&&(r=2,l=h);for(let m=r-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=l,l=t[--r-1],e>=l)break t}u=r,r=0;break n}break e}for(;r<u;){const h=r+u>>>1;e<t[h]?u=h:r=h+1}if(o=t[r],l=t[r-1],l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(o===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,l,e)}this._cachedIndex=r,this.intervalChanged_(r,l,o)}return this.interpolate_(r,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o;for(let u=0;u!==o;++u)t[u]=r[l+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Qs.prototype.beforeStart_=Qs.prototype.copySampleValue_;Qs.prototype.afterEnd_=Qs.prototype.copySampleValue_;class zE extends Qs{constructor(e,t,r,o){super(e,t,r,o);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bl,endingEnd:bl}}intervalChanged_(e,t,r){const o=this.parameterPositions;let l=e-2,u=e+1,h=o[l],m=o[u];if(h===void 0)switch(this.getSettings_().endingStart){case Sl:l=e,h=2*t-r;break;case bh:l=o.length-2,h=t+o[l]-o[l+1];break;default:l=e,h=r}if(m===void 0)switch(this.getSettings_().endingEnd){case Sl:u=e,m=2*r-t;break;case bh:u=1,m=r+o[1]-o[0];break;default:u=e-1,m=t}const v=(r-t)*.5,w=this.valueSize;this._weightPrev=v/(t-h),this._weightNext=v/(m-r),this._offsetPrev=l*w,this._offsetNext=u*w}interpolate_(e,t,r,o){const l=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,w=this._offsetPrev,S=this._offsetNext,A=this._weightPrev,R=this._weightNext,O=(r-t)/(o-t),N=O*O,k=N*O,D=-A*k+2*A*N-A*O,P=(1+A)*k+(-1.5-2*A)*N+(-.5+A)*O+1,F=(-1-R)*k+(1.5+R)*N+.5*O,L=R*k-R*N;for(let z=0;z!==h;++z)l[z]=D*u[w+z]+P*u[v+z]+F*u[m+z]+L*u[S+z];return l}}class t1 extends Qs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,w=(r-t)/(o-t),S=1-w;for(let A=0;A!==h;++A)l[A]=u[v+A]*S+u[m+A]*w;return l}}class HE extends Qs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class Rs{constructor(e,t,r,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=kn.convertArray(t,this.TimeBufferType),this.values=kn.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:kn.convertArray(e.times,Array),values:kn.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new HE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new t1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zu:t=this.InterpolantFactoryMethodDiscrete;break;case wl:t=this.InterpolantFactoryMethodLinear;break;case cm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zu;case this.InterpolantFactoryMethodLinear:return wl;case this.InterpolantFactoryMethodSmooth:return cm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let l=0,u=o-1;for(;l!==o&&r[l]<e;)++l;for(;u!==-1&&r[u]>t;)--u;if(++u,l!==0||u!==o){l>=u&&(u=Math.max(u,1),l=u-1);const h=this.getValueSize();this.times=kn.arraySlice(r,l,u),this.values=kn.arraySlice(this.values,l*h,u*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,l=r.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let h=0;h!==l;h++){const m=r[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(u!==null&&u>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,u),e=!1;break}u=m}if(o!==void 0&&kn.isTypedArray(o))for(let h=0,m=o.length;h!==m;++h){const v=o[h];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,v),e=!1;break}}return e}optimize(){const e=kn.arraySlice(this.times),t=kn.arraySlice(this.values),r=this.getValueSize(),o=this.getInterpolation()===cm,l=e.length-1;let u=1;for(let h=1;h<l;++h){let m=!1;const v=e[h],w=e[h+1];if(v!==w&&(h!==1||v!==e[0]))if(o)m=!0;else{const S=h*r,A=S-r,R=S+r;for(let O=0;O!==r;++O){const N=t[S+O];if(N!==t[A+O]||N!==t[R+O]){m=!0;break}}}if(m){if(h!==u){e[u]=e[h];const S=h*r,A=u*r;for(let R=0;R!==r;++R)t[A+R]=t[S+R]}++u}}if(l>0){e[u]=e[l];for(let h=l*r,m=u*r,v=0;v!==r;++v)t[m+v]=t[h+v];++u}return u!==e.length?(this.times=kn.arraySlice(e,0,u),this.values=kn.arraySlice(t,0,u*r)):(this.times=e,this.values=t),this}clone(){const e=kn.arraySlice(this.times,0),t=kn.arraySlice(this.values,0),r=this.constructor,o=new r(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}Rs.prototype.TimeBufferType=Float32Array;Rs.prototype.ValueBufferType=Float32Array;Rs.prototype.DefaultInterpolation=wl;class zl extends Rs{}zl.prototype.ValueTypeName="bool";zl.prototype.ValueBufferType=Array;zl.prototype.DefaultInterpolation=Zu;zl.prototype.InterpolantFactoryMethodLinear=void 0;zl.prototype.InterpolantFactoryMethodSmooth=void 0;class n1 extends Rs{}n1.prototype.ValueTypeName="color";class Hl extends Rs{}Hl.prototype.ValueTypeName="number";class GE extends Qs{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=(r-t)/(o-t);let v=e*h;for(let w=v+h;v!==w;v+=4)Ct.slerpFlat(l,0,u,v-h,u,v,m);return l}}class Ro extends Rs{InterpolantFactoryMethodLinear(e){return new GE(this.times,this.values,this.getValueSize(),e)}}Ro.prototype.ValueTypeName="quaternion";Ro.prototype.DefaultInterpolation=wl;Ro.prototype.InterpolantFactoryMethodSmooth=void 0;class Gl extends Rs{}Gl.prototype.ValueTypeName="string";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=Zu;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class Vl extends Rs{}Vl.prototype.ValueTypeName="vector";class Wl{constructor(e,t=-1,r,o=fm){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=Vi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let u=0,h=r.length;u!==h;++u)t.push(qU(r[u]).scale(o));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,u=r.length;l!==u;++l)t.push(Rs.toJSON(r[l]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const l=t.length,u=[];for(let h=0;h<l;h++){let m=[],v=[];m.push((h+l-1)%l,h,(h+1)%l),v.push(0,1,0);const w=kn.getKeyframeOrder(m);m=kn.sortedArray(m,1,w),v=kn.sortedArray(v,1,w),!o&&m[0]===0&&(m.push(l),v.push(v[0])),u.push(new Hl(".morphTargetInfluences["+t[h].name+"]",m,v).scale(1/r))}return new this(e,-1,u)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},l=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const v=e[h],w=v.name.match(l);if(w&&w.length>1){const S=w[1];let A=o[S];A||(o[S]=A=[]),A.push(v)}}const u=[];for(const h in o)u.push(this.CreateFromMorphTargetSequence(h,o[h],t,r));return u}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(S,A,R,O,N){if(R.length!==0){const k=[],D=[];kn.flattenJSON(R,k,D,O),k.length!==0&&N.push(new S(A,k,D))}},o=[],l=e.name||"default",u=e.fps||30,h=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let S=0;S<v.length;S++){const A=v[S].keys;if(!(!A||A.length===0))if(A[0].morphTargets){const R={};let O;for(O=0;O<A.length;O++)if(A[O].morphTargets)for(let N=0;N<A[O].morphTargets.length;N++)R[A[O].morphTargets[N]]=-1;for(const N in R){const k=[],D=[];for(let P=0;P!==A[O].morphTargets.length;++P){const F=A[O];k.push(F.time),D.push(F.morphTarget===N?1:0)}o.push(new Hl(".morphTargetInfluence["+N+"]",k,D))}m=R.length*u}else{const R=".bones["+t[S].name+"]";r(Vl,R+".position",A,"pos",o),r(Ro,R+".quaternion",A,"rot",o),r(Vl,R+".scale",A,"scl",o)}}return o.length===0?null:new this(l,m,o,h)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,o=e.length;r!==o;++r){const l=this.tracks[r];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jU(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hl;case"vector":case"vector2":case"vector3":case"vector4":return Vl;case"color":return n1;case"quaternion":return Ro;case"bool":case"boolean":return zl;case"string":return Gl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function qU(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jU(s.type);if(s.times===void 0){const t=[],r=[];kn.flattenJSON(s.keys,t,r,"value"),s.times=t,s.values=r}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const $l={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class r1{constructor(e,t,r){const o=this;let l=!1,u=0,h=0,m;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(w){h++,l===!1&&o.onStart!==void 0&&o.onStart(w,u,h),l=!0},this.itemEnd=function(w){u++,o.onProgress!==void 0&&o.onProgress(w,u,h),u===h&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(w){o.onError!==void 0&&o.onError(w)},this.resolveURL=function(w){return m?m(w):w},this.setURLModifier=function(w){return m=w,this},this.addHandler=function(w,S){return v.push(w,S),this},this.removeHandler=function(w){const S=v.indexOf(w);return S!==-1&&v.splice(S,2),this},this.getHandler=function(w){for(let S=0,A=v.length;S<A;S+=2){const R=v[S],O=v[S+1];if(R.global&&(R.lastIndex=0),R.test(w))return O}return null}}}const VE=new r1;class Dr{constructor(e){this.manager=e!==void 0?e:VE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,l){r.load(e,o,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Lo={};class pi extends Dr{constructor(e){super(e)}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=$l.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(Lo[e]!==void 0){Lo[e].push({onLoad:t,onProgress:r,onError:o});return}Lo[e]=[],Lo[e].push({onLoad:t,onProgress:r,onError:o});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(u).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||v.body===void 0||v.body.getReader===void 0)return v;const w=Lo[e],S=v.body.getReader(),A=v.headers.get("Content-Length"),R=A?parseInt(A):0,O=R!==0;let N=0;const k=new ReadableStream({start(D){P();function P(){S.read().then(({done:F,value:L})=>{if(F)D.close();else{N+=L.byteLength;const z=new ProgressEvent("progress",{lengthComputable:O,loaded:N,total:R});for(let H=0,X=w.length;H<X;H++){const $=w[H];$.onProgress&&$.onProgress(z)}D.enqueue(L),P()}})}}});return new Response(k)}else throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(w=>new DOMParser().parseFromString(w,h));case"json":return v.json();default:if(h===void 0)return v.text();{const S=/charset="?([^;"\s]*)"?/i.exec(h),A=S&&S[1]?S[1].toLowerCase():void 0,R=new TextDecoder(A);return v.arrayBuffer().then(O=>R.decode(O))}}}).then(v=>{$l.add(e,v);const w=Lo[e];delete Lo[e];for(let S=0,A=w.length;S<A;S++){const R=w[S];R.onLoad&&R.onLoad(v)}}).catch(v=>{const w=Lo[e];if(w===void 0)throw this.manager.itemError(e),v;delete Lo[e];for(let S=0,A=w.length;S<A;S++){const R=w[S];R.onError&&R.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class XU extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=new pi(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=[];for(let r=0;r<e.length;r++){const o=Wl.parse(e[r]);t.push(o)}return t}}class YU extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=[],h=new Ox,m=new pi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(l.withCredentials);let v=0;function w(S){m.load(e[S],function(A){const R=l.parse(A,!0);u[S]={width:R.width,height:R.height,format:R.format,mipmaps:R.mipmaps},v+=1,v===6&&(R.mipmapCount===1&&(h.minFilter=jn),h.image=u,h.format=R.format,h.needsUpdate=!0,t&&t(h))},r,o)}if(Array.isArray(e))for(let S=0,A=e.length;S<A;++S)w(S);else m.load(e,function(S){const A=l.parse(S,!0);if(A.isCubemap){const R=A.mipmaps.length/A.mipmapCount;for(let O=0;O<R;O++){u[O]={mipmaps:[]};for(let N=0;N<A.mipmapCount;N++)u[O].mipmaps.push(A.mipmaps[O*A.mipmapCount+N]),u[O].format=A.format,u[O].width=A.width,u[O].height=A.height}h.image=u}else h.image.width=A.width,h.image.height=A.height,h.mipmaps=A.mipmaps;A.mipmapCount===1&&(h.minFilter=jn),h.format=A.format,h.needsUpdate=!0,t&&t(h)},r,o);return h}}class Fc extends Dr{constructor(e){super(e)}load(e,t,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,u=$l.get(e);if(u!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(u),l.manager.itemEnd(e)},0),u;const h=Th("img");function m(){w(),$l.add(e,this),t&&t(this),l.manager.itemEnd(e)}function v(S){w(),o&&o(S),l.manager.itemError(e),l.manager.itemEnd(e)}function w(){h.removeEventListener("load",m,!1),h.removeEventListener("error",v,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class WE extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=new mc,u=new Fc(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function m(v){u.load(e[v],function(w){l.images[v]=w,h++,h===6&&(l.needsUpdate=!0,t&&t(l))},void 0,o)}for(let v=0;v<e.length;++v)m(v);return l}}class $E extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=new Ol,h=new pi(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(l.withCredentials),h.load(e,function(m){const v=l.parse(m);!v||(v.image!==void 0?u.image=v.image:v.data!==void 0&&(u.image.width=v.width,u.image.height=v.height,u.image.data=v.data),u.wrapS=v.wrapS!==void 0?v.wrapS:Lr,u.wrapT=v.wrapT!==void 0?v.wrapT:Lr,u.magFilter=v.magFilter!==void 0?v.magFilter:jn,u.minFilter=v.minFilter!==void 0?v.minFilter:jn,u.anisotropy=v.anisotropy!==void 0?v.anisotropy:1,v.encoding!==void 0&&(u.encoding=v.encoding),v.flipY!==void 0&&(u.flipY=v.flipY),v.format!==void 0&&(u.format=v.format),v.type!==void 0&&(u.type=v.type),v.mipmaps!==void 0&&(u.mipmaps=v.mipmaps,u.minFilter=vo),v.mipmapCount===1&&(u.minFilter=jn),v.generateMipmaps!==void 0&&(u.generateMipmaps=v.generateMipmaps),u.needsUpdate=!0,t&&t(u,v))},r,o),u}}class dg extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=new Un,u=new Fc(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(h){l.image=h,l.needsUpdate=!0,t!==void 0&&t(l)},r,o),l}}class Ls extends Ht{constructor(e,t=1){super();this.type="Light",this.color=new Qe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Ls.prototype.isLight=!0;class i1 extends Ls{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.groundColor=new Qe(t)}copy(e){return Ls.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}i1.prototype.isHemisphereLight=!0;const jE=new et,qE=new le,XE=new le;class s1{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ph,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;qE.setFromMatrixPosition(e.matrixWorld),t.position.copy(qE),XE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XE),t.updateMatrixWorld(),jE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class YE extends s1{constructor(){super(new mr(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=Sh*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(r!==t.fov||o!==t.aspect||l!==t.far)&&(t.fov=r,t.aspect=o,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}YE.prototype.isSpotLightShadow=!0;class qh extends Ls{constructor(e,t,r=0,o=Math.PI/3,l=0,u=1){super(e,t);this.type="SpotLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.target=new Ht,this.distance=r,this.angle=o,this.penumbra=l,this.decay=u,this.shadow=new YE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}qh.prototype.isSpotLight=!0;const KE=new et,Xh=new le,o1=new le;class QE extends s1{constructor(){super(new mr(90,1,.5,500));this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),Xh.setFromMatrixPosition(e.matrixWorld),r.position.copy(Xh),o1.copy(r.position),o1.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(o1),r.updateMatrixWorld(),o.makeTranslation(-Xh.x,-Xh.y,-Xh.z),KE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KE)}}QE.prototype.isPointLightShadow=!0;class Uc extends Ls{constructor(e,t,r=0,o=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new QE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Uc.prototype.isPointLight=!0;class ZE extends s1{constructor(){super(new Ll(-5,5,5,-5,.5,500))}}ZE.prototype.isDirectionalLightShadow=!0;class Yh extends Ls{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Ht.DefaultUp),this.updateMatrix(),this.target=new Ht,this.shadow=new ZE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Yh.prototype.isDirectionalLight=!0;class pg extends Ls{constructor(e,t){super(e,t);this.type="AmbientLight"}}pg.prototype.isAmbientLight=!0;class a1 extends Ls{constructor(e,t,r=10,o=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}a1.prototype.isRectAreaLight=!0;class l1{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,l=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*o),t.addScaledVector(u[2],.488603*l),t.addScaledVector(u[3],.488603*r),t.addScaledVector(u[4],1.092548*(r*o)),t.addScaledVector(u[5],1.092548*(o*l)),t.addScaledVector(u[6],.315392*(3*l*l-1)),t.addScaledVector(u[7],1.092548*(r*l)),t.addScaledVector(u[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,l=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*o),t.addScaledVector(u[2],2*.511664*l),t.addScaledVector(u[3],2*.511664*r),t.addScaledVector(u[4],2*.429043*r*o),t.addScaledVector(u[5],2*.429043*o*l),t.addScaledVector(u[6],.743125*l*l-.247708),t.addScaledVector(u[7],2*.429043*r*l),t.addScaledVector(u[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){const r=e.x,o=e.y,l=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*l,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*r*l,t[8]=.546274*(r*r-o*o)}}l1.prototype.isSphericalHarmonics3=!0;class Kh extends Ls{constructor(e=new l1,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Kh.prototype.isLightProbe=!0;class JE extends Dr{constructor(e){super(e);this.textures={}}load(e,t,r,o){const l=this,u=new pi(l.manager);u.setPath(l.path),u.setRequestHeader(l.requestHeader),u.setWithCredentials(l.withCredentials),u.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=this.textures;function r(l){return t[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),t[l]}const o=Bn.fromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new Qe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const u=e.uniforms[l];switch(o.uniforms[l]={},u.type){case"t":o.uniforms[l].value=r(u.value);break;case"c":o.uniforms[l].value=new Qe().setHex(u.value);break;case"v2":o.uniforms[l].value=new je().fromArray(u.value);break;case"v3":o.uniforms[l].value=new le().fromArray(u.value);break;case"v4":o.uniforms[l].value=new ln().fromArray(u.value);break;case"m3":o.uniforms[l].value=new yn().fromArray(u.value);break;case"m4":o.uniforms[l].value=new et().fromArray(u.value);break;default:o.uniforms[l].value=u.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const l in e.extensions)o.extensions[l]=e.extensions[l];if(e.shading!==void 0&&(o.flatShading=e.shading===1),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=r(e.map)),e.matcap!==void 0&&(o.matcap=r(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),o.normalScale=new je().fromArray(l)}return e.displacementMap!==void 0&&(o.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new je().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(o.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=r(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}}class Ci{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class u1 extends xt{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}u1.prototype.isInstancedBufferGeometry=!0;class eA extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=new pi(l.manager);u.setPath(l.path),u.setRequestHeader(l.requestHeader),u.setWithCredentials(l.withCredentials),u.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t={},r={};function o(R,O){if(t[O]!==void 0)return t[O];const k=R.interleavedBuffers[O],D=l(R,k.buffer),P=ec(k.type,D),F=new _a(P,k.stride);return F.uuid=k.uuid,t[O]=F,F}function l(R,O){if(r[O]!==void 0)return r[O];const k=R.arrayBuffers[O],D=new Uint32Array(k).buffer;return r[O]=D,D}const u=e.isInstancedBufferGeometry?new u1:new xt,h=e.data.index;if(h!==void 0){const R=ec(h.type,h.array);u.setIndex(new Dt(R,1))}const m=e.data.attributes;for(const R in m){const O=m[R];let N;if(O.isInterleavedBufferAttribute){const k=o(e.data,O.data);N=new Ao(k,O.itemSize,O.offset,O.normalized)}else{const k=ec(O.type,O.array),D=O.isInstancedBufferAttribute?Nl:Dt;N=new D(k,O.itemSize,O.normalized)}O.name!==void 0&&(N.name=O.name),O.usage!==void 0&&N.setUsage(O.usage),O.updateRange!==void 0&&(N.updateRange.offset=O.updateRange.offset,N.updateRange.count=O.updateRange.count),u.setAttribute(R,N)}const v=e.data.morphAttributes;if(v)for(const R in v){const O=v[R],N=[];for(let k=0,D=O.length;k<D;k++){const P=O[k];let F;if(P.isInterleavedBufferAttribute){const L=o(e.data,P.data);F=new Ao(L,P.itemSize,P.offset,P.normalized)}else{const L=ec(P.type,P.array);F=new Dt(L,P.itemSize,P.normalized)}P.name!==void 0&&(F.name=P.name),N.push(F)}u.morphAttributes[R]=N}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const S=e.data.groups||e.data.drawcalls||e.data.offsets;if(S!==void 0)for(let R=0,O=S.length;R!==O;++R){const N=S[R];u.addGroup(N.start,N.count,N.materialIndex)}const A=e.data.boundingSphere;if(A!==void 0){const R=new le;A.center!==void 0&&R.fromArray(A.center),u.boundingSphere=new bo(R,A.radius)}return e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class KU extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=this.path===""?Ci.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const h=new pi(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(m){let v=null;try{v=JSON.parse(m)}catch(S){o!==void 0&&o(S),console.error("THREE:ObjectLoader: Can't parse "+e+".",S.message);return}const w=v.metadata;if(w===void 0||w.type===void 0||w.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(v,t)},r,o)}async loadAsync(e,t){const r=this,o=this.path===""?Ci.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new pi(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const u=await l.loadAsync(e,t),h=JSON.parse(u),m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(h)}parse(e,t){const r=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,o),u=this.parseImages(e.images,function(){t!==void 0&&t(v)}),h=this.parseTextures(e.textures,u),m=this.parseMaterials(e.materials,h),v=this.parseObject(e.object,l,m,h,r),w=this.parseSkeletons(e.skeletons,v);if(this.bindSkeletons(v,w),t!==void 0){let S=!1;for(const A in u)if(u[A]instanceof HTMLImageElement){S=!0;break}S===!1&&t(v)}return v}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),l=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),m=this.parseObject(e.object,o,h,u,t),v=this.parseSkeletons(e.skeletons,m);return this.bindSkeletons(m,v),m}parseShapes(e){const t={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const l=new Xs().fromJSON(e[r]);t[l.uuid]=l}return t}parseSkeletons(e,t){const r={},o={};if(t.traverse(function(l){l.isBone&&(o[l.uuid]=l)}),e!==void 0)for(let l=0,u=e.length;l<u;l++){const h=new wa().fromJSON(e[l],o);r[h.uuid]=h}return r}parseGeometries(e,t){const r={};if(e!==void 0){const o=new eA;for(let l=0,u=e.length;l<u;l++){let h;const m=e[l];switch(m.type){case"BufferGeometry":case"InstancedBufferGeometry":h=o.parse(m);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:m.type in BE?h=BE[m.type].fromJSON(m,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${m.type}"`)}h.uuid=m.uuid,m.name!==void 0&&(h.name=m.name),h.isBufferGeometry===!0&&m.userData!==void 0&&(h.userData=m.userData),r[m.uuid]=h}}return r}parseMaterials(e,t){const r={},o={};if(e!==void 0){const l=new JE;l.setTextures(t);for(let u=0,h=e.length;u<h;u++){const m=e[u];if(m.type==="MultiMaterial"){const v=[];for(let w=0;w<m.materials.length;w++){const S=m.materials[w];r[S.uuid]===void 0&&(r[S.uuid]=l.parse(S)),v.push(r[S.uuid])}o[m.uuid]=v}else r[m.uuid]===void 0&&(r[m.uuid]=l.parse(m)),o[m.uuid]=r[m.uuid]}}return o}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const o=e[r],l=Wl.parse(o);t[l.uuid]=l}return t}parseImages(e,t){const r=this,o={};let l;function u(m){return r.manager.itemStart(m),l.load(m,function(){r.manager.itemEnd(m)},void 0,function(){r.manager.itemError(m),r.manager.itemEnd(m)})}function h(m){if(typeof m=="string"){const v=m,w=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(v)?v:r.resourcePath+v;return u(w)}else return m.data?{data:ec(m.type,m.data),width:m.width,height:m.height}:null}if(e!==void 0&&e.length>0){const m=new r1(t);l=new Fc(m),l.setCrossOrigin(this.crossOrigin);for(let v=0,w=e.length;v<w;v++){const S=e[v],A=S.url;if(Array.isArray(A)){const R=[];for(let O=0,N=A.length;O<N;O++){const k=A[O],D=h(k);D!==null&&(D instanceof HTMLImageElement?R.push(D):R.push(new Ol(D.data,D.width,D.height)))}o[S.uuid]=new ua(R)}else{const R=h(S.url);o[S.uuid]=new ua(R)}}}return o}async parseImagesAsync(e){const t=this,r={};let o;async function l(u){if(typeof u=="string"){const h=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await o.loadAsync(m)}else return u.data?{data:ec(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){o=new Fc(this.manager),o.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const m=e[u],v=m.url;if(Array.isArray(v)){const w=[];for(let S=0,A=v.length;S<A;S++){const R=v[S],O=await l(R);O!==null&&(O instanceof HTMLImageElement?w.push(O):w.push(new Ol(O.data,O.width,O.height)))}r[m.uuid]=new ua(w)}else{const w=await l(m.url);r[m.uuid]=new ua(w)}}}return r}parseTextures(e,t){function r(l,u){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),u[l])}const o={};if(e!==void 0)for(let l=0,u=e.length;l<u;l++){const h=e[l];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const m=t[h.image],v=m.data;let w;Array.isArray(v)?(w=new mc,v.length===6&&(w.needsUpdate=!0)):(v&&v.data?w=new Ol:w=new Un,v&&(w.needsUpdate=!0)),w.source=m,w.uuid=h.uuid,h.name!==void 0&&(w.name=h.name),h.mapping!==void 0&&(w.mapping=r(h.mapping,QU)),h.offset!==void 0&&w.offset.fromArray(h.offset),h.repeat!==void 0&&w.repeat.fromArray(h.repeat),h.center!==void 0&&w.center.fromArray(h.center),h.rotation!==void 0&&(w.rotation=h.rotation),h.wrap!==void 0&&(w.wrapS=r(h.wrap[0],tA),w.wrapT=r(h.wrap[1],tA)),h.format!==void 0&&(w.format=h.format),h.type!==void 0&&(w.type=h.type),h.encoding!==void 0&&(w.encoding=h.encoding),h.minFilter!==void 0&&(w.minFilter=r(h.minFilter,nA)),h.magFilter!==void 0&&(w.magFilter=r(h.magFilter,nA)),h.anisotropy!==void 0&&(w.anisotropy=h.anisotropy),h.flipY!==void 0&&(w.flipY=h.flipY),h.premultiplyAlpha!==void 0&&(w.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(w.unpackAlignment=h.unpackAlignment),h.userData!==void 0&&(w.userData=h.userData),o[h.uuid]=w}return o}parseObject(e,t,r,o,l){let u;function h(A){return t[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",A),t[A]}function m(A){if(A!==void 0){if(Array.isArray(A)){const R=[];for(let O=0,N=A.length;O<N;O++){const k=A[O];r[k]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",k),R.push(r[k])}return R}return r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),r[A]}}function v(A){return o[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",A),o[A]}let w,S;switch(e.type){case"Scene":u=new Vm,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new Qe(e.background):u.background=v(e.background)),e.environment!==void 0&&(u.environment=v(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new Oh(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new Dh(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":u=new mr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new Ll(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new pg(e.color,e.intensity);break;case"DirectionalLight":u=new Yh(e.color,e.intensity);break;case"PointLight":u=new Uc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new a1(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new qh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":u=new i1(e.color,e.groundColor,e.intensity);break;case"LightProbe":u=new Kh().fromJSON(e);break;case"SkinnedMesh":w=h(e.geometry),S=m(e.material),u=new kl(w,S),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":w=h(e.geometry),S=m(e.material),u=new ot(w,S);break;case"InstancedMesh":w=h(e.geometry),S=m(e.material);const A=e.count,R=e.instanceMatrix,O=e.instanceColor;u=new Px(w,S,A),u.instanceMatrix=new Nl(new Float32Array(R.array),16),O!==void 0&&(u.instanceColor=new Nl(new Float32Array(O.array),O.itemSize));break;case"LOD":u=new fE;break;case"Line":u=new gr(h(e.geometry),m(e.material));break;case"LineLoop":u=new Zm(h(e.geometry),m(e.material));break;case"LineSegments":u=new kr(h(e.geometry),m(e.material));break;case"PointCloud":case"Points":u=new Mc(h(e.geometry),m(e.material));break;case"Sprite":u=new qm(m(e.material));break;case"Group":u=new Vr;break;case"Bone":u=new Dl;break;default:u=new Ht}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const A=e.children;for(let R=0;R<A.length;R++)u.add(this.parseObject(A[R],t,r,o,l))}if(e.animations!==void 0){const A=e.animations;for(let R=0;R<A.length;R++){const O=A[R];u.animations.push(l[O])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const A=e.levels;for(let R=0;R<A.length;R++){const O=A[R],N=u.getObjectByProperty("uuid",O.object);N!==void 0&&u.addLevel(N,O.distance)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const o=t[r.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(o,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const QU={UVMapping:im,CubeReflectionMapping:ra,CubeRefractionMapping:ia,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:yh,CubeUVReflectionMapping:Xu},tA={RepeatWrapping:Ws,ClampToEdgeWrapping:Lr,MirroredRepeatWrapping:Yu},nA={NearestFilter:ir,NearestMipmapNearestFilter:xh,NearestMipmapLinearFilter:_h,LinearFilter:jn,LinearMipmapNearestFilter:sm,LinearMipmapLinearFilter:vo};class c1 extends Dr{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,u=$l.get(e);if(u!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(u),l.manager.itemEnd(e)},0),u;const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(m){$l.add(e,m),t&&t(m),l.manager.itemEnd(e)}).catch(function(m){o&&o(m),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}c1.prototype.isImageBitmapLoader=!0;let mg;const f1={getContext:function(){return mg===void 0&&(mg=new(window.AudioContext||window.webkitAudioContext)),mg},setContext:function(s){mg=s}};class rA extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=new pi(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{const m=h.slice(0);f1.getContext().decodeAudioData(m,function(w){t(w)})}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}}class iA extends Kh{constructor(e,t,r=1){super(void 0,r);const o=new Qe().set(e),l=new Qe().set(t),u=new le(o.r,o.g,o.b),h=new le(l.r,l.g,l.b),m=Math.sqrt(Math.PI),v=m*Math.sqrt(.75);this.sh.coefficients[0].copy(u).add(h).multiplyScalar(m),this.sh.coefficients[1].copy(u).sub(h).multiplyScalar(v)}}iA.prototype.isHemisphereLightProbe=!0;class sA extends Kh{constructor(e,t=1){super(void 0,t);const r=new Qe().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}sA.prototype.isAmbientLightProbe=!0;const oA=new et,aA=new et,jl=new et;class ZU{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jl.copy(e.projectionMatrix);const o=t.eyeSep/2,l=o*t.near/t.focus,u=t.near*Math.tan(Tl*t.fov*.5)/t.zoom;let h,m;aA.elements[12]=-o,oA.elements[12]=o,h=-u*t.aspect+l,m=u*t.aspect+l,jl.elements[0]=2*t.near/(m-h),jl.elements[8]=(m+h)/(m-h),this.cameraL.projectionMatrix.copy(jl),h=-u*t.aspect-l,m=u*t.aspect-l,jl.elements[0]=2*t.near/(m-h),jl.elements[8]=(m+h)/(m-h),this.cameraR.projectionMatrix.copy(jl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oA)}}class lA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uA(){return(typeof performance=="undefined"?Date:performance).now()}const ql=new le,cA=new Ct,JU=new le,Xl=new le;class eB extends Ht{constructor(){super();this.type="AudioListener",this.context=f1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new lA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ql,cA,JU),Xl.set(0,0,-1).applyQuaternion(cA),t.positionX){const o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ql.x,o),t.positionY.linearRampToValueAtTime(ql.y,o),t.positionZ.linearRampToValueAtTime(ql.z,o),t.forwardX.linearRampToValueAtTime(Xl.x,o),t.forwardY.linearRampToValueAtTime(Xl.y,o),t.forwardZ.linearRampToValueAtTime(Xl.z,o),t.upX.linearRampToValueAtTime(r.x,o),t.upY.linearRampToValueAtTime(r.y,o),t.upZ.linearRampToValueAtTime(r.z,o)}else t.setPosition(ql.x,ql.y,ql.z),t.setOrientation(Xl.x,Xl.y,Xl.z,r.x,r.y,r.z)}}class h1 extends Ht{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Yl=new le,fA=new Ct,tB=new le,Kl=new le;class nB extends h1{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Yl,fA,tB),Kl.set(0,0,1).applyQuaternion(fA);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Yl.x,r),t.positionY.linearRampToValueAtTime(Yl.y,r),t.positionZ.linearRampToValueAtTime(Yl.z,r),t.orientationX.linearRampToValueAtTime(Kl.x,r),t.orientationY.linearRampToValueAtTime(Kl.y,r),t.orientationZ.linearRampToValueAtTime(Kl.z,r)}else t.setPosition(Yl.x,Yl.y,Yl.z),t.setOrientation(Kl.x,Kl.y,Kl.z)}}class hA{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class dA{constructor(e,t,r){this.binding=e,this.valueSize=r;let o,l,u;switch(t){case"quaternion":o=this._slerp,l=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:o=this._lerp,l=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,l=e*o+o;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==o;++h)r[l+h]=r[h];u=t}else{u+=t;const h=t/u;this._mixBufferRegion(r,l,0,h,o)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,l=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const m=t*this._origIndex;this._mixBufferRegion(r,o,m,1-l,t)}u>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,v=t+t;m!==v;++m)if(r[m]!==r[m+t]){h.setValue(r,o);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,o=r*this._origIndex;e.getValue(t,o);for(let l=r,u=o;l!==u;++l)t[l]=t[o+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,l){if(o>=.5)for(let u=0;u!==l;++u)e[t+u]=e[r+u]}_slerp(e,t,r,o){Ct.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,l){const u=this._workIndex*l;Ct.multiplyQuaternionsFlat(e,u,e,t,e,r),Ct.slerpFlat(e,t,e,t,e,u,o)}_lerp(e,t,r,o,l){const u=1-o;for(let h=0;h!==l;++h){const m=t+h;e[m]=e[m]*u+e[r+h]*o}}_lerpAdditive(e,t,r,o,l){for(let u=0;u!==l;++u){const h=t+u;e[h]=e[h]+e[r+u]*o}}}const d1="\\[\\]\\.:\\/",rB=new RegExp("["+d1+"]","g"),p1="[^"+d1+"]",iB="[^"+d1.replace("\\.","")+"]",sB=/((?:WC+[\/:])*)/.source.replace("WC",p1),oB=/(WCOD+)?/.source.replace("WCOD",iB),aB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",p1),lB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",p1),uB=new RegExp("^"+sB+oB+aB+lB+"$"),cB=["material","materials","bones"];class fB{constructor(e,t,r){const o=r||Jt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,o=this._bindings[r];o!==void 0&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=r.length;o!==l;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Jt{constructor(e,t,r){this.path=t,this.parsedPath=r||Jt.parseTrackName(t),this.node=Jt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Jt.Composite(e,t,r):new Jt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rB,"")}static parseTrackName(e){const t=uB.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=r.nodeName.substring(o+1);cB.indexOf(l)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=l)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(l){for(let u=0;u<l.length;u++){const h=l[u];if(h.name===t||h.uuid===t)return h;const m=r(h.children);if(m)return m}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)e[t++]=r[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,o=t.propertyName;let l=t.propertyIndex;if(e||(e=Jt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let v=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let w=0;w<e.length;w++)if(e[w].name===v){v=w;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const u=e[o];if(u===void 0){const v=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+o+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}m=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=l}else u.fromArray!==void 0&&u.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(m=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=o;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jt.Composite=fB;Jt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jt.prototype.GetterByBindingType=[Jt.prototype._getValue_direct,Jt.prototype._getValue_array,Jt.prototype._getValue_arrayElement,Jt.prototype._getValue_toArray];Jt.prototype.SetterByBindingTypeAndVersioning=[[Jt.prototype._setValue_direct,Jt.prototype._setValue_direct_setNeedsUpdate,Jt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_array,Jt.prototype._setValue_array_setNeedsUpdate,Jt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_arrayElement,Jt.prototype._setValue_arrayElement_setNeedsUpdate,Jt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_fromArray,Jt.prototype._setValue_fromArray_setNeedsUpdate,Jt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class pA{constructor(){this.uuid=Vi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,o=arguments.length;r!==o;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length;let h,m=e.length,v=this.nCachedObjects_;for(let w=0,S=arguments.length;w!==S;++w){const A=arguments[w],R=A.uuid;let O=t[R];if(O===void 0){O=m++,t[R]=O,e.push(A);for(let N=0,k=u;N!==k;++N)l[N].push(new Jt(A,r[N],o[N]))}else if(O<v){h=e[O];const N=--v,k=e[N];t[k.uuid]=O,e[O]=k,t[R]=N,e[N]=A;for(let D=0,P=u;D!==P;++D){const F=l[D],L=F[N];let z=F[O];F[O]=L,z===void 0&&(z=new Jt(A,r[D],o[D])),F[N]=z}}else e[O]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=v}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const m=arguments[u],v=m.uuid,w=t[v];if(w!==void 0&&w>=l){const S=l++,A=e[S];t[A.uuid]=w,e[w]=A,t[v]=S,e[S]=m;for(let R=0,O=o;R!==O;++R){const N=r[R],k=N[S],D=N[w];N[w]=k,N[S]=D}}}this.nCachedObjects_=l}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_,u=e.length;for(let h=0,m=arguments.length;h!==m;++h){const v=arguments[h],w=v.uuid,S=t[w];if(S!==void 0)if(delete t[w],S<l){const A=--l,R=e[A],O=--u,N=e[O];t[R.uuid]=S,e[S]=R,t[N.uuid]=A,e[A]=N,e.pop();for(let k=0,D=o;k!==D;++k){const P=r[k],F=P[A],L=P[O];P[S]=F,P[A]=L,P.pop()}}else{const A=--u,R=e[A];A>0&&(t[R.uuid]=S),e[S]=R,e.pop();for(let O=0,N=o;O!==N;++O){const k=r[O];k[S]=k[A],k.pop()}}}this.nCachedObjects_=l}subscribe_(e,t){const r=this._bindingsIndicesByPath;let o=r[e];const l=this._bindings;if(o!==void 0)return l[o];const u=this._paths,h=this._parsedPaths,m=this._objects,v=m.length,w=this.nCachedObjects_,S=new Array(v);o=l.length,r[e]=o,u.push(e),h.push(t),l.push(S);for(let A=w,R=m.length;A!==R;++A){const O=m[A];S[A]=new Jt(O,e,t)}return S}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const o=this._paths,l=this._parsedPaths,u=this._bindings,h=u.length-1,m=u[h],v=e[h];t[v]=r,u[r]=m,u.pop(),l[r]=l[h],l.pop(),o[r]=o[h],o.pop()}}}pA.prototype.isAnimationObjectGroup=!0;class hB{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const l=t.tracks,u=l.length,h=new Array(u),m={endingStart:bl,endingEnd:bl};for(let v=0;v!==u;++v){const w=l[v].createInterpolant(null);h[v]=w,w.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=QM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,l=e._clip.duration,u=l/o,h=o/l;e.warp(1,u,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,l=o.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,v=h.sampleValues;return m[0]=l,m[1]=l+r,v[0]=e/u,v[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const m=(e-l)*r;if(m<0||r===0)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const u=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case Xy:for(let w=0,S=m.length;w!==S;++w)m[w].evaluate(u),v[w].accumulateAdditive(h);break;case fm:default:for(let w=0,S=m.length;w!==S;++w)m[w].evaluate(u),v[w].accumulate(o,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,l=this._loopCount;const u=r===ZM;if(e===0)return l===-1?o:u&&(l&1)==1?t-o:o;if(r===KM){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,l+=Math.abs(h);const m=this.repetitions-l;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const v=e<0;this._setEndings(v,!v,u)}else this._setEndings(!1,!1,u);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(u&&(l&1)==1)return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=Sl,o.endingEnd=Sl):(e?o.endingStart=this.zeroSlopeAtStart?Sl:bl:o.endingStart=bh,t?o.endingEnd=this.zeroSlopeAtEnd?Sl:bl:o.endingEnd=bh)}_scheduleFading(e,t,r){const o=this._mixer,l=o.time;let u=this._weightInterpolant;u===null&&(u=o._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,m=u.sampleValues;return h[0]=l,m[0]=t,h[1]=l+e,m[1]=r,this}}class mA extends aa{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,l=o.length,u=e._propertyBindings,h=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let w=v[m];w===void 0&&(w={},v[m]=w);for(let S=0;S!==l;++S){const A=o[S],R=A.name;let O=w[R];if(O!==void 0)++O.referenceCount,u[S]=O;else{if(O=u[S],O!==void 0){O._cacheIndex===null&&(++O.referenceCount,this._addInactiveBinding(O,m,R));continue}const N=t&&t._propertyBindings[S].binding.parsedPath;O=new dA(Jt.create(r,R,N),A.ValueTypeName,A.getValueSize()),++O.referenceCount,this._addInactiveBinding(O,m,R),u[S]=O}h[S].resultBuffer=O.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];l.useCount++==0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.useCount==0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,l=this._actionsByClip;let u=l[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=u;else{const h=u.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,u=this._actionsByClip,h=u[l],m=h.knownActions,v=m[m.length-1],w=e._byClipCacheIndex;v._byClipCacheIndex=w,m[w]=v,m.pop(),e._byClipCacheIndex=null;const S=h.actionByRoot,A=(e._localRoot||this._root).uuid;delete S[A],m.length===0&&delete u[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.referenceCount==0&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,l=this._bindings;let u=o[t];u===void 0&&(u={},o[t]=u),u[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,l=r.path,u=this._bindingsByRootAndName,h=u[o],m=t[t.length-1],v=e._cacheIndex;m._cacheIndex=v,t[v]=m,t.pop(),delete h[l],Object.keys(h).length===0&&delete u[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new t1(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=t[o];e.__cacheIndex=o,t[o]=e,l.__cacheIndex=r,t[r]=l}clipAction(e,t,r){const o=t||this._root,l=o.uuid;let u=typeof e=="string"?Wl.findByName(o,e):e;const h=u!==null?u.uuid:e,m=this._actionsByClip[h];let v=null;if(r===void 0&&(u!==null?r=u.blendMode:r=fm),m!==void 0){const S=m.actionByRoot[l];if(S!==void 0&&S.blendMode===r)return S;v=m.knownActions[0],u===null&&(u=v._clip)}if(u===null)return null;const w=new hB(this,u,t,r);return this._bindAction(w,v),this._addInactiveAction(w,h,l),w}existingAction(e,t){const r=t||this._root,o=r.uuid,l=typeof e=="string"?Wl.findByName(r,e):e,u=l?l.uuid:e,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,o=this.time+=e,l=Math.sign(e),u=this._accuIndex^=1;for(let v=0;v!==r;++v)t[v]._update(o,e,l,u);const h=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)h[v].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,l=o[r];if(l!==void 0){const u=l.knownActions;for(let h=0,m=u.length;h!==m;++h){const v=u[h];this._deactivateAction(v);const w=v._cacheIndex,S=t[t.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,S._cacheIndex=w,t[w]=S,t.pop(),this._removeInactiveBindingsForAction(v)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const u in r){const h=r[u].actionByRoot,m=h[t];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const o=this._bindingsByRootAndName,l=o[t];if(l!==void 0)for(const u in l){const h=l[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}mA.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class gg{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new gg(this.value.clone===void 0?this.value:this.value.clone())}}class gA extends _a{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}gA.prototype.isInstancedInterleavedBuffer=!0;class vA{constructor(e,t,r,o,l){this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=o,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}vA.prototype.isGLBufferAttribute=!0;class yA{constructor(e,t,r=0,o=1/0){this.ray=new da(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new Mm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return m1(e,this,r,t),r.sort(xA),r}intersectObjects(e,t=!0,r=[]){for(let o=0,l=e.length;o<l;o++)m1(e[o],this,r,t);return r.sort(xA),r}}function xA(s,e){return s.distance-e.distance}function m1(s,e,t,r){if(s.layers.test(e.layers)&&s.raycast(e,t),r===!0){const o=s.children;for(let l=0,u=o.length;l<u;l++)m1(o[l],e,t,!0)}}class dB{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(sr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class pB{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const _A=new je;class Bc{constructor(e=new je(1/0,1/0),t=new je(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=_A.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _A.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Bc.prototype.isBox2=!0;const wA=new le,vg=new le;class bA{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){wA.subVectors(e,this.start),vg.subVectors(this.end,this.start);const r=vg.dot(vg);let l=vg.dot(wA)/r;return t&&(l=sr(l,0,1)),l}closestPointToPoint(e,t,r){const o=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const SA=new le;class mB extends Ht{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new xt,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,h=1,m=32;u<m;u++,h++){const v=u/m*Math.PI*2,w=h/m*Math.PI*2;o.push(Math.cos(v),Math.sin(v),1,Math.cos(w),Math.sin(w),1)}r.setAttribute("position",new mt(o,3));const l=new Pn({fog:!1,toneMapped:!1});this.cone=new kr(r,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),SA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(SA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ta=new le,yg=new et,g1=new et;class MA extends kr{constructor(e){const t=TA(e),r=new xt,o=[],l=[],u=new Qe(0,0,1),h=new Qe(0,1,0);for(let v=0;v<t.length;v++){const w=t[v];w.parent&&w.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(u.r,u.g,u.b),l.push(h.r,h.g,h.b))}r.setAttribute("position",new mt(o,3)),r.setAttribute("color",new mt(l,3));const m=new Pn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,m);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");g1.copy(this.root.matrixWorld).invert();for(let l=0,u=0;l<t.length;l++){const h=t[l];h.parent&&h.parent.isBone&&(yg.multiplyMatrices(g1,h.matrixWorld),Ta.setFromMatrixPosition(yg),o.setXYZ(u,Ta.x,Ta.y,Ta.z),yg.multiplyMatrices(g1,h.parent.matrixWorld),Ta.setFromMatrixPosition(yg),o.setXYZ(u+1,Ta.x,Ta.y,Ta.z),u+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function TA(s){const e=[];s.isBone===!0&&e.push(s);for(let t=0;t<s.children.length;t++)e.push.apply(e,TA(s.children[t]));return e}class gB extends ot{constructor(e,t,r){const o=new Ma(t,4,2),l=new Ir({wireframe:!0,fog:!1,toneMapped:!1});super(o,l);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vB=new le,EA=new Qe,AA=new Qe;class yB extends Ht{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const o=new As(t);o.rotateY(Math.PI*.5),this.material=new Ir({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=o.getAttribute("position"),u=new Float32Array(l.count*3);o.setAttribute("color",new Dt(u,3)),this.add(new ot(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");EA.copy(this.light.color),AA.copy(this.light.groundColor);for(let r=0,o=t.count;r<o;r++){const l=r<o/2?EA:AA;t.setXYZ(r,l.r,l.g,l.b)}t.needsUpdate=!0}e.lookAt(vB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class CA extends kr{constructor(e=10,t=10,r=4473924,o=8947848){r=new Qe(r),o=new Qe(o);const l=t/2,u=e/t,h=e/2,m=[],v=[];for(let A=0,R=0,O=-h;A<=t;A++,O+=u){m.push(-h,0,O,h,0,O),m.push(O,0,-h,O,0,h);const N=A===l?r:o;N.toArray(v,R),R+=3,N.toArray(v,R),R+=3,N.toArray(v,R),R+=3,N.toArray(v,R),R+=3}const w=new xt;w.setAttribute("position",new mt(m,3)),w.setAttribute("color",new mt(v,3));const S=new Pn({vertexColors:!0,toneMapped:!1});super(w,S);this.type="GridHelper"}}class xB extends kr{constructor(e=10,t=16,r=8,o=64,l=4473924,u=8947848){l=new Qe(l),u=new Qe(u);const h=[],m=[];for(let S=0;S<=t;S++){const A=S/t*(Math.PI*2),R=Math.sin(A)*e,O=Math.cos(A)*e;h.push(0,0,0),h.push(R,0,O);const N=S&1?l:u;m.push(N.r,N.g,N.b),m.push(N.r,N.g,N.b)}for(let S=0;S<=r;S++){const A=S&1?l:u,R=e-e/r*S;for(let O=0;O<o;O++){let N=O/o*(Math.PI*2),k=Math.sin(N)*R,D=Math.cos(N)*R;h.push(k,0,D),m.push(A.r,A.g,A.b),N=(O+1)/o*(Math.PI*2),k=Math.sin(N)*R,D=Math.cos(N)*R,h.push(k,0,D),m.push(A.r,A.g,A.b)}}const v=new xt;v.setAttribute("position",new mt(h,3)),v.setAttribute("color",new mt(m,3));const w=new Pn({vertexColors:!0,toneMapped:!1});super(v,w);this.type="PolarGridHelper"}}const RA=new le,xg=new le,LA=new le;class _B extends Ht{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let o=new xt;o.setAttribute("position",new mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const l=new Pn({fog:!1,toneMapped:!1});this.lightPlane=new gr(o,l),this.add(this.lightPlane),o=new xt,o.setAttribute("position",new mt([0,0,0,0,0,1],3)),this.targetLine=new gr(o,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){RA.setFromMatrixPosition(this.light.matrixWorld),xg.setFromMatrixPosition(this.light.target.matrixWorld),LA.subVectors(xg,RA),this.lightPlane.lookAt(xg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xg),this.targetLine.scale.z=LA.length()}}const _g=new le,Zn=new Ih;class wB extends kr{constructor(e){const t=new xt,r=new Pn({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],u={},h=new Qe(16755200),m=new Qe(16711680),v=new Qe(43775),w=new Qe(16777215),S=new Qe(3355443);A("n1","n2",h),A("n2","n4",h),A("n4","n3",h),A("n3","n1",h),A("f1","f2",h),A("f2","f4",h),A("f4","f3",h),A("f3","f1",h),A("n1","f1",h),A("n2","f2",h),A("n3","f3",h),A("n4","f4",h),A("p","n1",m),A("p","n2",m),A("p","n3",m),A("p","n4",m),A("u1","u2",v),A("u2","u3",v),A("u3","u1",v),A("c","t",w),A("p","c",S),A("cn1","cn2",S),A("cn3","cn4",S),A("cf1","cf2",S),A("cf3","cf4",S);function A(O,N,k){R(O,k),R(N,k)}function R(O,N){o.push(0,0,0),l.push(N.r,N.g,N.b),u[O]===void 0&&(u[O]=[]),u[O].push(o.length/3-1)}t.setAttribute("position",new mt(o,3)),t.setAttribute("color",new mt(l,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,o=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",t,e,Zn,0,0,-1),ar("t",t,e,Zn,0,0,1),ar("n1",t,e,Zn,-r,-o,-1),ar("n2",t,e,Zn,r,-o,-1),ar("n3",t,e,Zn,-r,o,-1),ar("n4",t,e,Zn,r,o,-1),ar("f1",t,e,Zn,-r,-o,1),ar("f2",t,e,Zn,r,-o,1),ar("f3",t,e,Zn,-r,o,1),ar("f4",t,e,Zn,r,o,1),ar("u1",t,e,Zn,r*.7,o*1.1,-1),ar("u2",t,e,Zn,-r*.7,o*1.1,-1),ar("u3",t,e,Zn,0,o*2,-1),ar("cf1",t,e,Zn,-r,0,1),ar("cf2",t,e,Zn,r,0,1),ar("cf3",t,e,Zn,0,-o,1),ar("cf4",t,e,Zn,0,o,1),ar("cn1",t,e,Zn,-r,0,-1),ar("cn2",t,e,Zn,r,0,-1),ar("cn3",t,e,Zn,0,-o,-1),ar("cn4",t,e,Zn,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(s,e,t,r,o,l,u){_g.set(o,l,u).unproject(r);const h=e[s];if(h!==void 0){const m=t.getAttribute("position");for(let v=0,w=h.length;v<w;v++)m.setXYZ(h[v],_g.x,_g.y,_g.z)}}const wg=new Ei;class IA extends kr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),l=new xt;l.setIndex(new Dt(r,1)),l.setAttribute("position",new Dt(o,3));super(l,new Pn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&wg.setFromObject(this.object),wg.isEmpty())return;const t=wg.min,r=wg.max,o=this.geometry.attributes.position,l=o.array;l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=t.x,l[4]=r.y,l[5]=r.z,l[6]=t.x,l[7]=t.y,l[8]=r.z,l[9]=r.x,l[10]=t.y,l[11]=r.z,l[12]=r.x,l[13]=r.y,l[14]=t.z,l[15]=t.x,l[16]=r.y,l[17]=t.z,l[18]=t.x,l[19]=t.y,l[20]=t.z,l[21]=r.x,l[22]=t.y,l[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return kr.prototype.copy.call(this,e),this.object=e.object,this}}class bB extends kr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new xt;l.setIndex(new Dt(r,1)),l.setAttribute("position",new mt(o,3));super(l,new Pn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class SB extends gr{constructor(e,t=1,r=16776960){const o=r,l=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],u=new xt;u.setAttribute("position",new mt(l,3)),u.computeBoundingSphere();super(u,new Pn({color:o,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],m=new xt;m.setAttribute("position",new mt(h,3)),m.computeBoundingSphere(),this.add(new ot(m,new Ir({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Mi:na,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const PA=new le;let bg,v1;class MB extends Ht{constructor(e=new le(0,0,1),t=new le(0,0,0),r=1,o=16776960,l=r*.2,u=l*.2){super();this.type="ArrowHelper",bg===void 0&&(bg=new xt,bg.setAttribute("position",new mt([0,0,0,0,1,0],3)),v1=new Qn(0,.5,1,5,1),v1.translate(0,-.5,0)),this.position.copy(t),this.line=new gr(bg,new Pn({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ot(v1,new Ir({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,l,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{PA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(PA,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class kA extends kr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new xt;o.setAttribute("position",new mt(t,3)),o.setAttribute("color",new mt(r,3));const l=new Pn({vertexColors:!0,toneMapped:!1});super(o,l);this.type="AxesHelper"}setColors(e,t,r){const o=new Qe,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(t),o.toArray(l,6),o.toArray(l,9),o.set(r),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TB{constructor(){this.type="ShapePath",this.color=new Qe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Tc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,l,u){return this.currentPath.bezierCurveTo(e,t,r,o,l,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(P){const F=[];for(let L=0,z=P.length;L<z;L++){const H=P[L],X=new Xs;X.curves=H.curves,F.push(X)}return F}function o(P,F){const L=F.length;let z=!1;for(let H=L-1,X=0;X<L;H=X++){let $=F[H],J=F[X],se=J.x-$.x,ce=J.y-$.y;if(Math.abs(ce)>Number.EPSILON){if(ce<0&&($=F[X],se=-se,J=F[H],ce=-ce),P.y<$.y||P.y>J.y)continue;if(P.y===$.y){if(P.x===$.x)return!0}else{const pe=ce*(P.x-$.x)-se*(P.y-$.y);if(pe===0)return!0;if(pe<0)continue;z=!z}}else{if(P.y!==$.y)continue;if(J.x<=P.x&&P.x<=$.x||$.x<=P.x&&P.x<=J.x)return!0}}return z}const l=Ys.isClockWise,u=this.subPaths;if(u.length===0)return[];if(t===!0)return r(u);let h,m,v;const w=[];if(u.length===1)return m=u[0],v=new Xs,v.curves=m.curves,w.push(v),w;let S=!l(u[0].getPoints());S=e?!S:S;const A=[],R=[];let O=[],N=0,k;R[N]=void 0,O[N]=[];for(let P=0,F=u.length;P<F;P++)m=u[P],k=m.getPoints(),h=l(k),h=e?!h:h,h?(!S&&R[N]&&N++,R[N]={s:new Xs,p:k},R[N].s.curves=m.curves,S&&N++,O[N]=[]):O[N].push({h:m,p:k[0]});if(!R[0])return r(u);if(R.length>1){let P=!1,F=0;for(let L=0,z=R.length;L<z;L++)A[L]=[];for(let L=0,z=R.length;L<z;L++){const H=O[L];for(let X=0;X<H.length;X++){const $=H[X];let J=!0;for(let se=0;se<R.length;se++)o($.p,R[se].p)&&(L!==se&&F++,J?(J=!1,A[se].push($)):P=!0);J&&A[L].push($)}}F>0&&P===!1&&(O=A)}let D;for(let P=0,F=R.length;P<F;P++){v=R[P].s,w.push(v),D=O[P];for(let L=0,z=D.length;L<z;L++)v.holes.push(D[L].h)}return w}}class EB{static toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=sr(e,-65504,65504),OA[0]=e;const t=NA[0],r=t>>23&511;return Is[r]+((t&8388607)>>Ps[r])}static fromHalfFloat(e){const t=e>>10;return NA[0]=y1[FA[t]+(e&1023)]+zc[t],OA[0]}}const DA=new ArrayBuffer(4),OA=new Float32Array(DA),NA=new Uint32Array(DA),Is=new Uint32Array(512),Ps=new Uint32Array(512);for(let s=0;s<256;++s){const e=s-127;e<-27?(Is[s]=0,Is[s|256]=32768,Ps[s]=24,Ps[s|256]=24):e<-14?(Is[s]=1024>>-e-14,Is[s|256]=1024>>-e-14|32768,Ps[s]=-e-1,Ps[s|256]=-e-1):e<=15?(Is[s]=e+15<<10,Is[s|256]=e+15<<10|32768,Ps[s]=13,Ps[s|256]=13):e<128?(Is[s]=31744,Is[s|256]=64512,Ps[s]=24,Ps[s|256]=24):(Is[s]=31744,Is[s|256]=64512,Ps[s]=13,Ps[s|256]=13)}const y1=new Uint32Array(2048),zc=new Uint32Array(64),FA=new Uint32Array(64);for(let s=1;s<1024;++s){let e=s<<13,t=0;for(;(e&8388608)==0;)e<<=1,t-=8388608;e&=~8388608,t+=947912704,y1[s]=e|t}for(let s=1024;s<2048;++s)y1[s]=939524096+(s-1024<<13);for(let s=1;s<31;++s)zc[s]=s<<23;zc[31]=1199570944;zc[32]=2147483648;for(let s=33;s<63;++s)zc[s]=2147483648+(s-32<<23);zc[63]=3347054592;for(let s=1;s<64;++s)s!==32&&(FA[s]=1024);const AB=0,CB=1,RB=0,LB=1,IB=2;function PB(s){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),s}function kB(s=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),s.isMultiMaterial=!0,s.materials=s,s.clone=function(){return s.slice()},s}class DB extends Mc{constructor(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");super(e,t)}}class OB extends qm{constructor(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");super(e)}}class NB extends Mc{constructor(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");super(e,t)}}class FB extends ba{constructor(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class UB extends ba{constructor(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class BB extends ba{constructor(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class zB extends le{constructor(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");super(e,t,r)}}class HB extends Dt{constructor(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");super(e,t);this.setUsage(Ml)}}class GB extends bT{constructor(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");super(e,t)}}class VB extends ST{constructor(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");super(e,t)}}class WB extends MT{constructor(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");super(e,t)}}class $B extends TT{constructor(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");super(e,t)}}class jB extends Rh{constructor(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");super(e,t)}}class qB extends ET{constructor(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");super(e,t)}}class XB extends Am{constructor(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");super(e,t)}}class YB extends mt{constructor(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");super(e,t)}}class KB extends CT{constructor(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");super(e,t)}}Ai.create=function(s,e){return console.log("THREE.Curve.create() has been deprecated"),s.prototype=Object.create(Ai.prototype),s.prototype.constructor=s,s.prototype.getPoint=e,s};Tc.prototype.fromPoints=function(s){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(s)};class QB extends kA{constructor(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");super(e)}}class ZB extends IA{constructor(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");super(e,t)}}class JB extends kr{constructor(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");super(new $x(e.geometry),new Pn({color:t!==void 0?t:16777215}))}}CA.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};MA.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};class e4 extends kr{constructor(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");super(new Xx(e.geometry),new Pn({color:t!==void 0?t:16777215}))}}Dr.prototype.extractUrlBase=function(s){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ci.extractUrlBase(s)};Dr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};class t4 extends pi{constructor(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");super(e)}}class n4 extends $E{constructor(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");super(e)}}Bc.prototype.center=function(s){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(s)};Bc.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Bc.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Bc.prototype.size=function(s){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(s)};Ei.prototype.center=function(s){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(s)};Ei.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ei.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Ei.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};Ei.prototype.size=function(s){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(s)};Gr.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};bo.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ph.prototype.setFromMatrix=function(s){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(s)};bA.prototype.center=function(s){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(s)};yn.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};yn.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};yn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};yn.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};yn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};yn.prototype.getInverse=function(s){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};et.prototype.extractPosition=function(s){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(s)};et.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};et.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new le().setFromMatrixColumn(this,3)};et.prototype.setRotationFromQuaternion=function(s){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(s)};et.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};et.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};et.prototype.multiplyVector4=function(s){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};et.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};et.prototype.rotateAxis=function(s){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),s.transformDirection(this)};et.prototype.crossVector=function(s){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};et.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};et.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};et.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};et.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};et.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};et.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};et.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};et.prototype.makeFrustum=function(s,e,t,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(s,e,r,t,o,l)};et.prototype.getInverse=function(s){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};js.prototype.isIntersectionLine=function(s){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(s)};Ct.prototype.multiplyVector3=function(s){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),s.applyQuaternion(this)};Ct.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};da.prototype.isIntersectionBox=function(s){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};da.prototype.isIntersectionPlane=function(s){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(s)};da.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};or.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};or.prototype.barycoordFromPoint=function(s,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(s,e)};or.prototype.midpoint=function(s){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(s)};or.prototypenormal=function(s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(s)};or.prototype.plane=function(s){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(s)};or.barycoordFromPoint=function(s,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),or.getBarycoord(s,e,t,r,o)};or.normal=function(s,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),or.getNormal(s,e,t,r)};Xs.prototype.extractAllPoints=function(s){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(s)};Xs.prototype.extrude=function(s){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ks(this,s)};Xs.prototype.makeGeometry=function(s){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ul(this,s)};je.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};je.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};le.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};le.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};le.prototype.getPositionFromMatrix=function(s){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(s)};le.prototype.getScaleFromMatrix=function(s){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(s)};le.prototype.getColumnFromMatrix=function(s,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,s)};le.prototype.applyProjection=function(s){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(s)};le.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};le.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};le.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ln.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};ln.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ht.prototype.getChildByName=function(s){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(s)};Ht.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Ht.prototype.translate=function(s,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,s)};Ht.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Ht.prototype.applyMatrix=function(s){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(Ht.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});ot.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(ot.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),JM},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});kl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};mr.prototype.setLens=function(s,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(s)};Object.defineProperties(Ls.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}});Object.defineProperties(Dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ml},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ml)}}});Dt.prototype.setDynamic=function(s){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Ml:Ju),this};Dt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Dt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};xt.prototype.addIndex=function(s){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(s)};xt.prototype.addAttribute=function(s,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(s,new Dt(arguments[1],arguments[2]))):s==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(s,e)};xt.prototype.addDrawCall=function(s,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(s,e)};xt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};xt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};xt.prototype.removeAttribute=function(s){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(s)};xt.prototype.applyMatrix=function(s){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(xt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});_a.prototype.setDynamic=function(s){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Ml:Ju),this};_a.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ks.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Ks.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Ks.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Vm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};gg.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(Bn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Qe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===xy}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(ji.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}});xn.prototype.clearTarget=function(s,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(s),this.clear(e,t,r)};xn.prototype.animate=function(s){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(s)};xn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};xn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};xn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};xn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};xn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};xn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};xn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};xn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};xn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};xn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};xn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};xn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};xn.prototype.enableScissorTest=function(s){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(s)};xn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};xn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};xn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};xn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};xn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};xn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};xn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};xn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};xn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};xn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(xn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=s===!0?Xt:Gi}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(iE.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});class r4 extends Fm{constructor(e,t,r){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");super(e,r)}}Object.defineProperties(ci.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}});h1.prototype.load=function(s){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new rA().load(s,function(r){e.setBuffer(r)}),this};hA.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};Nm.prototype.updateCubeMap=function(s,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(s,e)};Nm.prototype.clear=function(s,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(s,e,t,r)};la.crossOrigin=void 0;la.loadTexture=function(s,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new dg;o.setCrossOrigin(this.crossOrigin);const l=o.load(s,t,void 0,r);return e&&(l.mapping=e),l};la.loadTextureCube=function(s,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new WE;o.setCrossOrigin(this.crossOrigin);const l=o.load(s,t,void 0,r);return e&&(l.mapping=e),l};la.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};la.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function i4(){console.error("THREE.CanvasRenderer has been removed")}function s4(){console.error("THREE.JSONLoader has been removed.")}const o4={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function a4(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}class l4 extends xt{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js");super()}}class u4 extends xt{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js");super()}}function c4(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function f4(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function h4(){console.error("THREE.ImmediateRenderObject has been removed.")}class d4 extends ci{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.');super(e,t,r);this.samples=4}}class p4 extends nc{constructor(e,t,r,o){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture.");super(e,t,r,o)}}class m4 extends Eh{constructor(e,t,r,o){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture.");super(e,t,r,o)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Hi}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Hi);var zV=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:kM,AddEquation:yl,AddOperation:RM,AdditiveAnimationBlendMode:Xy,AdditiveBlending:_y,AlphaFormat:zM,AlwaysDepth:bM,AlwaysStencilFunc:iT,AmbientLight:pg,AmbientLightProbe:sA,AnimationClip:Wl,AnimationLoader:XU,AnimationMixer:mA,AnimationObjectGroup:pA,AnimationUtils:kn,ArcCurve:Nx,ArrayCamera:Cx,ArrowHelper:MB,Audio:h1,AudioAnalyser:hA,AudioContext:f1,AudioListener:eB,AudioLoader:rA,AxesHelper:kA,AxisHelper:QB,BackSide:Mi,BasicDepthPacking:tT,BasicShadowMap:WP,BinaryTextureLoader:n4,Bone:Dl,BooleanKeyframeTrack:zl,BoundingBoxHelper:ZB,Box2:Bc,Box3:Ei,Box3Helper:bB,BoxBufferGeometry:zn,BoxGeometry:zn,BoxHelper:IA,BufferAttribute:Dt,BufferGeometry:xt,BufferGeometryLoader:eA,ByteType:OM,Cache:$l,Camera:Ih,CameraHelper:wB,CanvasRenderer:i4,CanvasTexture:CE,CapsuleBufferGeometry:Ec,CapsuleGeometry:Ec,CatmullRomCurve3:Hx,CineonToneMapping:PM,CircleBufferGeometry:Ac,CircleGeometry:Ac,ClampToEdgeWrapping:Lr,Clock:lA,Color:Qe,ColorKeyframeTrack:n1,ColorManagement:ts,CompressedTexture:Ox,CompressedTextureLoader:YU,ConeBufferGeometry:Cc,ConeGeometry:Cc,CubeCamera:Nm,CubeReflectionMapping:ra,CubeRefractionMapping:ia,CubeTexture:mc,CubeTextureLoader:WE,CubeUVReflectionMapping:Xu,CubicBezierCurve:ng,CubicBezierCurve3:Gx,CubicInterpolant:zE,CullFaceBack:vy,CullFaceFront:aM,CullFaceFrontBack:VP,CullFaceNone:oM,Curve:Ai,CurvePath:IE,CustomBlending:uM,CustomToneMapping:DM,CylinderBufferGeometry:Qn,CylinderGeometry:Qn,Cylindrical:pB,Data3DTexture:Eh,DataArrayTexture:nc,DataTexture:Ol,DataTexture2DArray:p4,DataTexture3D:m4,DataTextureLoader:$E,DataUtils:EB,DecrementStencilOp:ek,DecrementWrapStencilOp:nk,DefaultLoadingManager:VE,DepthFormat:sa,DepthStencilFormat:_l,DepthTexture:Lx,DirectionalLight:Yh,DirectionalLightHelper:_B,DiscreteInterpolant:HE,DodecahedronBufferGeometry:Rc,DodecahedronGeometry:Rc,DoubleSide:bs,DstAlphaFactor:gM,DstColorFactor:yM,DynamicBufferAttribute:HB,DynamicCopyUsage:gk,DynamicDrawUsage:Ml,DynamicReadUsage:dk,EdgesGeometry:$x,EdgesHelper:JB,EllipseCurve:zh,EqualDepth:MM,EqualStencilFunc:ok,EquirectangularReflectionMapping:qu,EquirectangularRefractionMapping:yh,Euler:Gr,EventDispatcher:aa,ExtrudeBufferGeometry:Ks,ExtrudeGeometry:Ks,FaceColors:LB,FileLoader:pi,FlatShading:xy,Float16BufferAttribute:AT,Float32Attribute:YB,Float32BufferAttribute:mt,Float64Attribute:KB,Float64BufferAttribute:CT,FloatType:xo,Fog:Oh,FogExp2:Dh,Font:f4,FontLoader:c4,FramebufferTexture:AE,FrontSide:na,Frustum:Ph,GLBufferAttribute:vA,GLSL1:yk,GLSL3:Ky,GreaterDepth:EM,GreaterEqualDepth:TM,GreaterEqualStencilFunc:ck,GreaterStencilFunc:lk,GridHelper:CA,Group:Vr,HalfFloatType:Qu,HemisphereLight:i1,HemisphereLightHelper:yB,HemisphereLightProbe:iA,IcosahedronBufferGeometry:Ic,IcosahedronGeometry:Ic,ImageBitmapLoader:c1,ImageLoader:Fc,ImageUtils:la,ImmediateRenderObject:h4,IncrementStencilOp:JP,IncrementWrapStencilOp:tk,InstancedBufferAttribute:Nl,InstancedBufferGeometry:u1,InstancedInterleavedBuffer:gA,InstancedMesh:Px,Int16Attribute:$B,Int16BufferAttribute:TT,Int32Attribute:qB,Int32BufferAttribute:ET,Int8Attribute:GB,Int8BufferAttribute:bT,IntType:FM,InterleavedBuffer:_a,InterleavedBufferAttribute:Ao,Interpolant:Qs,InterpolateDiscrete:Zu,InterpolateLinear:wl,InterpolateSmooth:cm,InvertStencilOp:rk,JSONLoader:s4,KeepStencilOp:hm,KeyframeTrack:Rs,LOD:fE,LatheBufferGeometry:Fl,LatheGeometry:Fl,Layers:Mm,LensFlare:a4,LessDepth:SM,LessEqualDepth:rm,LessEqualStencilFunc:ak,LessStencilFunc:sk,Light:Ls,LightProbe:Kh,Line:gr,Line3:bA,LineBasicMaterial:Pn,LineCurve:Vh,LineCurve3:LE,LineDashedMaterial:e1,LineLoop:Zm,LinePieces:CB,LineSegments:kr,LineStrip:AB,LinearEncoding:Gi,LinearFilter:jn,LinearInterpolant:t1,LinearMipMapLinearFilter:YP,LinearMipMapNearestFilter:XP,LinearMipmapLinearFilter:vo,LinearMipmapNearestFilter:sm,LinearSRGBColorSpace:oa,LinearToneMapping:LM,Loader:Dr,LoaderUtils:Ci,LoadingManager:r1,LoopOnce:KM,LoopPingPong:ZM,LoopRepeat:QM,LuminanceAlphaFormat:VM,LuminanceFormat:GM,MOUSE:HP,Material:Bn,MaterialLoader:JE,Math:hn,MathUtils:hn,Matrix3:yn,Matrix4:et,MaxEquation:My,Mesh:ot,MeshBasicMaterial:Ir,MeshDepthMaterial:Hm,MeshDistanceMaterial:Gm,MeshFaceMaterial:PB,MeshLambertMaterial:hg,MeshMatcapMaterial:Jx,MeshNormalMaterial:Zx,MeshPhongMaterial:Nc,MeshPhysicalMaterial:Co,MeshStandardMaterial:Bl,MeshToonMaterial:Qx,MinEquation:Sy,MirroredRepeatWrapping:Yu,MixOperation:CM,MultiMaterial:kB,MultiplyBlending:by,MultiplyOperation:vh,NearestFilter:ir,NearestMipMapLinearFilter:qP,NearestMipMapNearestFilter:jP,NearestMipmapLinearFilter:_h,NearestMipmapNearestFilter:xh,NeverDepth:wM,NeverStencilFunc:ik,NoBlending:go,NoColorSpace:KP,NoColors:RB,NoToneMapping:Vs,NormalAnimationBlendMode:fm,NormalBlending:vl,NotEqualDepth:AM,NotEqualStencilFunc:uk,NumberKeyframeTrack:Hl,Object3D:Ht,ObjectLoader:KU,ObjectSpaceNormalMap:rT,OctahedronBufferGeometry:As,OctahedronGeometry:As,OneFactor:dM,OneMinusDstAlphaFactor:vM,OneMinusDstColorFactor:xM,OneMinusSrcAlphaFactor:Ey,OneMinusSrcColorFactor:mM,OrthographicCamera:Ll,PCFShadowMap:yy,PCFSoftShadowMap:lM,PMREMGenerator:Sx,ParametricGeometry:l4,Particle:OB,ParticleBasicMaterial:UB,ParticleSystem:NB,ParticleSystemMaterial:BB,Path:Tc,PerspectiveCamera:mr,Plane:js,PlaneBufferGeometry:ya,PlaneGeometry:ya,PlaneHelper:SB,PointCloud:DB,PointCloudMaterial:FB,PointLight:Uc,PointLightHelper:gB,Points:Mc,PointsMaterial:ba,PolarGridHelper:xB,PolyhedronBufferGeometry:qs,PolyhedronGeometry:qs,PositionalAudio:nB,PropertyBinding:Jt,PropertyMixer:dA,QuadraticBezierCurve:rg,QuadraticBezierCurve3:ig,Quaternion:Ct,QuaternionKeyframeTrack:Ro,QuaternionLinearInterpolant:GE,REVISION:Hi,RGBADepthPacking:nT,RGBAFormat:Ti,RGBAIntegerFormat:XM,RGBA_ASTC_10x10_Format:Wy,RGBA_ASTC_10x5_Format:Hy,RGBA_ASTC_10x6_Format:Gy,RGBA_ASTC_10x8_Format:Vy,RGBA_ASTC_12x10_Format:$y,RGBA_ASTC_12x12_Format:jy,RGBA_ASTC_4x4_Format:ky,RGBA_ASTC_5x4_Format:Dy,RGBA_ASTC_5x5_Format:Oy,RGBA_ASTC_6x5_Format:Ny,RGBA_ASTC_6x6_Format:Fy,RGBA_ASTC_8x5_Format:Uy,RGBA_ASTC_8x6_Format:By,RGBA_ASTC_8x8_Format:zy,RGBA_BPTC_Format:qy,RGBA_ETC2_EAC_Format:Py,RGBA_PVRTC_2BPPV1_Format:Ly,RGBA_PVRTC_4BPPV1_Format:Ry,RGBA_S3TC_DXT1_Format:am,RGBA_S3TC_DXT3_Format:lm,RGBA_S3TC_DXT5_Format:um,RGBFormat:HM,RGB_ETC1_Format:YM,RGB_ETC2_Format:Iy,RGB_PVRTC_2BPPV1_Format:Cy,RGB_PVRTC_4BPPV1_Format:Ay,RGB_S3TC_DXT1_Format:om,RGFormat:jM,RGIntegerFormat:qM,RawShaderMaterial:Kx,Ray:da,Raycaster:yA,RectAreaLight:a1,RedFormat:WM,RedIntegerFormat:$M,ReinhardToneMapping:IM,RepeatWrapping:Ws,ReplaceStencilOp:ZP,ReverseSubtractEquation:fM,RingBufferGeometry:Pc,RingGeometry:Pc,SRGBColorSpace:$s,Scene:Vm,SceneUtils:o4,ShaderChunk:Zt,ShaderLib:Es,ShaderMaterial:ji,ShadowMaterial:Yx,Shape:Xs,ShapeBufferGeometry:Ul,ShapeGeometry:Ul,ShapePath:TB,ShapeUtils:Ys,ShortType:NM,Skeleton:wa,SkeletonHelper:MA,SkinnedMesh:kl,SmoothShading:$P,Source:ua,Sphere:bo,SphereBufferGeometry:Ma,SphereGeometry:Ma,Spherical:dB,SphericalHarmonics3:l1,SplineCurve:sg,SpotLight:qh,SpotLightHelper:mB,Sprite:qm,SpriteMaterial:Wm,SrcAlphaFactor:Ty,SrcAlphaSaturateFactor:_M,SrcColorFactor:pM,StaticCopyUsage:mk,StaticDrawUsage:Ju,StaticReadUsage:hk,StereoCamera:ZU,StreamCopyUsage:vk,StreamDrawUsage:fk,StreamReadUsage:pk,StringKeyframeTrack:Gl,SubtractEquation:cM,SubtractiveBlending:wy,TOUCH:GP,TangentSpaceNormalMap:_o,TetrahedronBufferGeometry:kc,TetrahedronGeometry:kc,TextGeometry:u4,Texture:Un,TextureLoader:dg,TorusBufferGeometry:Cs,TorusGeometry:Cs,TorusKnotBufferGeometry:Dc,TorusKnotGeometry:Dc,Triangle:or,TriangleFanDrawMode:Yy,TriangleStripDrawMode:eT,TrianglesDrawMode:JM,TubeBufferGeometry:Oc,TubeGeometry:Oc,UVMapping:im,Uint16Attribute:jB,Uint16BufferAttribute:Rh,Uint32Attribute:XB,Uint32BufferAttribute:Am,Uint8Attribute:VB,Uint8BufferAttribute:ST,Uint8ClampedAttribute:WB,Uint8ClampedBufferAttribute:MT,Uniform:gg,UniformsLib:at,UniformsUtils:xx,UnsignedByteType:yo,UnsignedInt248Type:xl,UnsignedIntType:wh,UnsignedShort4444Type:UM,UnsignedShort5551Type:BM,UnsignedShortType:Ku,VSMShadowMap:ju,Vector2:je,Vector3:le,Vector4:ln,VectorKeyframeTrack:Vl,Vertex:zB,VertexColors:IB,VideoTexture:EE,WebGL1Renderer:oE,WebGL3DRenderTarget:cT,WebGLArrayRenderTarget:uT,WebGLCubeRenderTarget:Fm,WebGLMultipleRenderTargets:fT,WebGLMultisampleRenderTarget:d4,WebGLRenderTarget:ci,WebGLRenderTargetCube:r4,WebGLRenderer:xn,WebGLUtils:sE,WireframeGeometry:Xx,WireframeHelper:e4,WrapAroundEnding:bh,XHRLoader:t4,ZeroCurvatureEnding:bl,ZeroFactor:hM,ZeroSlopeEnding:Sl,ZeroStencilOp:QP,_SRGBAFormat:dm,sRGBEncoding:Xt});(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){const s=6406,e=6407,t=6408,r=6409,o=6410,l=6402,u=34041,h=33321,m=36756,v=33325,w=33326,S=33330,A=33329,R=33338,O=33337,N=33340,k=33339,D=33323,P=36757,F=33327,L=33328,z=33336,H=33335,X=33332,$=33331,J=33334,se=33333,ce=32849,pe=35905,fe=36194,b=36758,p=35898,ee=35901,E=34843,me=34837,Se=36221,Te=36239,ye=36215,de=36233,Re=36209,we=36227,Ie=32856,Me=35907,Be=36759,Ve=32855,qe=32854,W=32857,We=34842,De=34836,Pe=36220,Ye=36238,Fe=36975,oe=36214,St=36232,q=36226,Xe=36208,Ft=33189,Y=33190,n=36012,i=36013,a=35056,f=5121,g=5123,y=5125,M=5126,C=32819,I=32820,B=33635,G=5131,V=36193;let Q;function Z(Rt){if(!Q){const it={};it[s]={bytesPerElement:[1,2,2,4],type:[f,G,V,M]},it[r]={bytesPerElement:[1,2,2,4],type:[f,G,V,M]},it[o]={bytesPerElement:[2,4,4,8],type:[f,G,V,M]},it[e]={bytesPerElement:[3,6,6,12,2],type:[f,G,V,M,B]},it[t]={bytesPerElement:[4,8,8,16,2,2],type:[f,G,V,M,C,I]},it[l]={bytesPerElement:[2,4],type:[y,g]},it[u]={bytesPerElement:[4]},it[h]={bytesPerElement:[1]},it[m]={bytesPerElement:[1]},it[v]={bytesPerElement:[2]},it[w]={bytesPerElement:[4]},it[S]={bytesPerElement:[1]},it[A]={bytesPerElement:[1]},it[X]={bytesPerElement:[2]},it[$]={bytesPerElement:[2]},it[J]={bytesPerElement:[4]},it[se]={bytesPerElement:[4]},it[D]={bytesPerElement:[2]},it[P]={bytesPerElement:[2]},it[F]={bytesPerElement:[4]},it[L]={bytesPerElement:[8]},it[z]={bytesPerElement:[2]},it[H]={bytesPerElement:[2]},it[R]={bytesPerElement:[4]},it[O]={bytesPerElement:[4]},it[N]={bytesPerElement:[8]},it[k]={bytesPerElement:[8]},it[ce]={bytesPerElement:[3]},it[pe]={bytesPerElement:[3]},it[fe]={bytesPerElement:[2]},it[b]={bytesPerElement:[3]},it[p]={bytesPerElement:[4]},it[ee]={bytesPerElement:[4]},it[E]={bytesPerElement:[6]},it[me]={bytesPerElement:[12]},it[Se]={bytesPerElement:[3]},it[Te]={bytesPerElement:[3]},it[ye]={bytesPerElement:[6]},it[de]={bytesPerElement:[6]},it[Re]={bytesPerElement:[12]},it[we]={bytesPerElement:[12]},it[Ie]={bytesPerElement:[4]},it[Me]={bytesPerElement:[4]},it[Be]={bytesPerElement:[4]},it[Ve]={bytesPerElement:[2]},it[qe]={bytesPerElement:[2]},it[W]={bytesPerElement:[4]},it[We]={bytesPerElement:[8]},it[De]={bytesPerElement:[16]},it[Pe]={bytesPerElement:[4]},it[Ye]={bytesPerElement:[4]},it[Fe]={bytesPerElement:[4]},it[oe]={bytesPerElement:[8]},it[St]={bytesPerElement:[8]},it[q]={bytesPerElement:[16]},it[Xe]={bytesPerElement:[16]},it[Ft]={bytesPerElement:[2]},it[Y]={bytesPerElement:[4]},it[n]={bytesPerElement:[4]},it[a]={bytesPerElement:[4]},it[i]={bytesPerElement:[4]},Q=it}return Q[Rt]}function ne(Rt,it,Sn){return function(Mn,fr,hr){const ys=(Mn+Rt-1)/Rt|0,Ji=(fr+it-1)/it|0;return ys*Ji*Sn*hr}}function ae(Rt,it,Sn){return function(Mn,fr,hr){return(Math.max(Mn,Rt)*Math.max(fr,it)/Sn|0)*hr}}const ue=33776,he=33777,Ce=33778,He=33779,Oe=36196,gt=35840,lt=35841,Et=35842,pt=35843,vt=37488,wn=37489,en=37490,En=37491,vn=37492,tn=37493,ge=37494,Le=37495,Ne=37496,ke=37497,be=37808,yt=37809,wt=37810,It=37811,At=37812,Kt=37813,jt=37814,Bt=37815,rn=37816,Vn=37817,xi=37818,_i=37819,sn=37820,Ze=37821,yr=37840,bn=37841,An=37842,Wt=37843,Ar=37844,Fi=37845,Wn=37846,$e=37847,ie=37848,xe=37849,ze=37850,Ke=37851,kt=37852,Qt=37853,ct=35916,xr=35917,ri=35918,Vo=35919,Zi=new Map([[ue,ne(4,4,8)],[he,ne(4,4,8)],[Ce,ne(4,4,16)],[He,ne(4,4,16)],[Oe,ne(4,4,8)],[gt,ae(8,8,2)],[Et,ae(8,8,2)],[lt,ae(16,8,4)],[pt,ae(16,8,4)],[vt,ne(4,4,8)],[wn,ne(4,4,8)],[vn,ne(4,4,8)],[tn,ne(4,4,8)],[ge,ne(4,4,8)],[Le,ne(4,4,8)],[en,ne(4,4,16)],[En,ne(4,4,16)],[Ne,ne(4,4,16)],[ke,ne(4,4,16)],[be,ne(4,4,16)],[yr,ne(4,4,16)],[yt,ne(5,4,16)],[bn,ne(5,4,16)],[wt,ne(5,5,16)],[An,ne(5,5,16)],[It,ne(6,5,16)],[Wt,ne(6,5,16)],[At,ne(6,6,16)],[Ar,ne(6,6,16)],[Kt,ne(8,5,16)],[Fi,ne(8,5,16)],[jt,ne(8,6,16)],[Wn,ne(8,6,16)],[Bt,ne(8,8,16)],[$e,ne(8,8,16)],[rn,ne(10,5,16)],[ie,ne(10,5,16)],[Vn,ne(10,6,16)],[xe,ne(10,6,16)],[xi,ne(10,8,16)],[ze,ne(10,8,16)],[_i,ne(10,10,16)],[Ke,ne(10,10,16)],[sn,ne(12,10,16)],[kt,ne(12,10,16)],[Ze,ne(12,12,16)],[Qt,ne(12,12,16)],[ct,ne(4,4,8)],[xr,ne(4,4,8)],[ri,ne(4,4,16)],[Vo,ne(4,4,16)]]);function Sp(Rt,it){const Sn=Z(Rt);if(!Sn)throw"unknown internal format";if(Sn.type){const Mn=Sn.type.indexOf(it);if(Mn<0)throw new Error(`unsupported type ${it} for internalformat ${Rt}`);return Sn.bytesPerElement[Mn]}return Sn.bytesPerElement[0]}function Mp(Rt,it,Sn,Mn,fr){const hr=Sp(Rt,fr);return it*Sn*Mn*hr}function Wo(Rt,it,Sn,Mn,fr){const hr=Zi.get(Rt);return hr?hr(it,Sn,Mn):Mp(Rt,it,Sn,Mn,fr)}function Bf(Rt){return Rt&&Rt.buffer&&Rt.buffer instanceof ArrayBuffer}function Tp(Rt){return Bf(Rt)||Rt instanceof ArrayBuffer}function zf(Rt){return{samples:Rt.getParameter(Rt.SAMPLES),depthBits:Rt.getParameter(Rt.DEPTH_BITS),contextAttributes:Rt.getContextAttributes()}}function Ep(Rt,it){const{samples:Sn,depthBits:Mn,contextAttributes:fr}=it,{width:hr,height:ys}=Rt.canvas,Ji=hr*ys*4,Us=fr.depth?1:0,Cp=fr.stencil?1:0,Ur=Math.min(Cp+Mn>16?4:2,4);return Ji+Ji*Sn+Ji*Us*Ur}function Ap(Rt){return typeof Rt=="number"}function Hf(Rt,it,Sn={}){const Mn=Sn.origGLErrorFn||Rt.getError;function fr(st){const bt=zf(st),ht={baseContext:st,config:Sn,apis:{gman_webgl_memory:{ctx:{getMemoryInfo(){const ft=Ep(st,bt);return{memory:gy(nm({},Ur),{drawingbuffer:ft,total:ft+Ur.buffer+Ur.texture+Ur.renderbuffer}),resources:nm({},$o)}}}}},resources:{},memory:{texture:0,buffer:0,renderbuffer:0},bindings:new Map,defaultVertexArray:{},webglObjectToMemory:new Map};return ht.webglObjectToMemory.set(ht.defaultVertexArray,{}),ht.currentVertexArray=ht.defaultVertexArray,ht}const hr=Sn.sharedState||fr(Rt);Sn.sharedState=hr;const{apis:ys,baseContext:Ji,bindings:Us,config:Cp,memory:Ur,resources:$o,webglObjectToMemory:Ui}=hr,Vf={};function jo(){}function wi(st,bt,ht){const ft=ht||`create${bt[0].toUpperCase()}${bt.substr(1)}`;if(!!st[ft])return $o[bt]=0,function(Mt,Ot,Nt,zt){++$o[bt],Ui.set(zt,{size:0})}}function ii(st,bt=jo,ht){const ft=ht||`delete${st[0].toUpperCase()}${st.substr(1)}`;if(!!Rt[ft])return function(Mt,Ot,Nt){const[zt]=Nt,Yt=Ui.get(zt);Yt&&(--$o[st],bt(zt,Yt),Ui.delete(zt))}}function nl(st,bt,ht,ft,Mt){const Ot=Us.get(st);if(!Ot)throw new Error(`no renderbuffer bound to ${st}`);const Nt=Ui.get(Ot);if(!Nt)throw new Error(`unknown renderbuffer ${Ot}`);const Yt=Wo(ht,ft,Mt,1)*bt;Ur.renderbuffer-=Nt.size,Nt.size=Yt,Ur.renderbuffer+=Yt}const rl=34963,il=5121,qo=34067,Eu=35866,uo=34069,Ev=34070,Rp=34071,Bi=34072,Av=34073,Cv=34074,Wf=33084,Lp=33085,Bs=new Set([uo,Ev,Rp,Bi,Av,Cv]);function Au(st){return Bs.has(st)}function Cr(st){st=Au(st)?qo:st;const bt=Us.get(st);if(!bt)throw new Error(`no texture bound to ${st}`);const ht=Ui.get(bt);if(!ht)throw new Error(`unknown texture ${bt}`);return ht}function es(st,bt,ht,ft,Mt,Ot,Nt,zt){const Yt=st.size,pn=Wo(ft,Mt,Ot,Nt,zt),Xr=Au(bt)?bt-uo:0;st.mips=st.mips||[],st.mips[ht]=st.mips[ht]||[];const Yr=st.mips[ht][Xr]||{};st.size-=Yr.size||0,Yr.size=pn,Yr.internalFormat=ft,Yr.type=zt,Yr.width=Mt,Yr.height=Ot,Yr.depth=Nt,st.mips[ht][Xr]=Yr,st.size+=pn,Ur.texture-=Yt,Ur.texture+=st.size}function Cu(st,bt,ht,ft,Mt,Ot){const Nt=Cr(st),zt=st===qo?6:1,Yt=st===qo?uo:st;for(let pn=0;pn<bt;++pn){for(let Xr=0;Xr<zt;++Xr)es(Nt,Yt+Xr,pn,ht,ft,Mt,Ot);ft=Math.ceil(Math.max(ft/2,1)),Mt=Math.ceil(Math.max(Mt/2,1)),Ot=st===Eu?Ot:Math.ceil(Math.max(Ot/2,1))}}function co(st,bt,ht){const[ft]=ht;hr.currentVertexArray=ft||hr.defaultVertexArray}function $f(st,bt){switch(st){case rl:const ht=Ui.get(hr.currentVertexArray);ht.elementArrayBuffer=bt;break;default:Us.set(st,bt);break}}const Rv={},Ip={bufferData(st,bt,ht){const[ft,Mt,,Ot=0,Nt=void 0]=ht;let zt;switch(ft){case rl:zt=Ui.get(hr.currentVertexArray).elementArrayBuffer;break;default:zt=Us.get(ft);break}if(!zt)throw new Error(`no buffer bound to ${ft}`);let Yt=0;if(Nt!==void 0)Yt=Nt;else if(Tp(Mt))Yt=Mt.byteLength;else if(Ap(Mt))Yt=Mt;else throw new Error(`unsupported bufferData src type ${Mt}`);const pn=Ui.get(zt);if(!pn)throw new Error(`unknown buffer ${zt}`);Ur.buffer-=pn.size,pn.size=Yt,Ur.buffer+=Yt},bindVertexArray:co,bindVertexArrayOES:co,bindBuffer(st,bt,ht){const[ft,Mt]=ht;$f(ft,Mt)},bindBufferBase(st,bt,ht){const[ft,Mt,Ot]=ht;$f(ft,Ot)},bindBufferRange(st,bt,ht){const[ft,Mt,Ot,Nt,zt]=ht;$f(ft,Ot)},bindRenderbuffer(st,bt,ht){const[ft,Mt]=ht;Us.set(ft,Mt)},bindTexture(st,bt,ht){const[ft,Mt]=ht;Us.set(ft,Mt)},copyTexImage2D(st,bt,ht){const[ft,Mt,Ot,Nt,zt,Yt,pn,Xr]=ht,Yr=Cr(ft);es(Yr,ft,Mt,Ot,Yt,pn,1,il)},createBuffer:wi(Rt,"buffer"),createFramebuffer:wi(Rt,"framebuffer"),createRenderbuffer:wi(Rt,"renderbuffer"),createProgram:wi(Rt,"program"),createQuery:wi(Rt,"query"),createShader:wi(Rt,"shader"),createSampler:wi(Rt,"sampler"),createTexture:wi(Rt,"texture"),createTransformFeedback:wi(Rt,"transformFeedback"),createVertexArray:wi(Rt,"vertexArray"),createVertexArrayOES:wi(Rt,"vertexArray","createVertexArrayOES"),compressedTexImage2D(st,bt,ht){const[ft,Mt,Ot,Nt,zt]=ht,Yt=Cr(ft);es(Yt,ft,Mt,Ot,Nt,zt,1,il)},compressedTexImage3D(st,bt,ht){const[ft,Mt,Ot,Nt,zt,Yt]=ht,pn=Cr(ft);es(pn,ft,Mt,Ot,Nt,zt,Yt,il)},deleteBuffer:ii("buffer",function(st,bt){Ur.buffer-=bt.size}),deleteFramebuffer:ii("framebuffer"),deleteProgram:ii("program"),deleteQuery:ii("query"),deleteRenderbuffer:ii("renderbuffer",function(st,bt){Ur.renderbuffer-=bt.size}),deleteSampler:ii("sampler"),deleteShader:ii("shader"),deleteSync:ii("sync"),deleteTexture:ii("texture",function(st,bt){Ur.texture-=bt.size}),deleteTransformFeedback:ii("transformFeedback"),deleteVertexArray:ii("vertexArray"),deleteVertexArrayOES:ii("vertexArray",jo,"deleteVertexArrayOES"),fenceSync:function(st){if(!!st.fenceSync)return $o.sync=0,function(bt,ht,ft,Mt){++$o.sync,Ui.set(Mt,{size:0})}}(Rt),generateMipmap(st,bt,ht){const[ft]=ht,Mt=Cr(ft),Ot=Mt.parameters&&Mt.parameters.get(Wf)||0,Nt=Mt.parameters&&Mt.parameters.get(Lp)||1024;let{width:zt,height:Yt,depth:pn,internalFormat:Xr,type:Yr}=Mt.mips[Ot][0],sl=Ot+1;const ol=ft===qo?6:1,tr=ft===qo?uo:ft;for(;sl<=Nt&&!(zt===1&&Yt===1&&(pn===1||ft===Eu));){zt=Math.ceil(Math.max(zt/2,1)),Yt=Math.ceil(Math.max(Yt/2,1)),pn=ft===Eu?pn:Math.ceil(Math.max(pn/2,1));for(let jf=0;jf<ol;++jf)es(Mt,tr+jf,sl,Xr,zt,Yt,pn,Yr);++sl}},getSupportedExtensions(st,bt,ht,ft){ft.push("GMAN_webgl_memory")},renderbufferStorage(st,bt,ht){const[ft,Mt,Ot,Nt]=ht;nl(ft,1,Mt,Ot,Nt)},renderbufferStorageMultisample(st,bt,ht){const[ft,Mt,Ot,Nt,zt]=ht;nl(ft,Mt,Ot,Nt,zt)},texImage2D(st,bt,ht){let[ft,Mt,Ot]=ht,Nt,zt,Yt;if(ht.length==6){const Xr=ht[5];Nt=Xr.width,zt=Xr.height,Yt=ht[4]}else Nt=ht[3],zt=ht[4],Yt=ht[7];const pn=Cr(ft);es(pn,ft,Mt,Ot,Nt,zt,1,Yt)},texImage3D(st,bt,ht){let[ft,Mt,Ot,Nt,zt,Yt,pn,Xr,Yr]=ht;const sl=Cr(ft);es(sl,ft,Mt,Ot,Nt,zt,Yt,Yr)},texParameteri(st,bt,ht){let[ft,Mt,Ot]=ht;const Nt=Cr(ft);Nt.parameters=Nt.parameters||new Map,Nt.parameters.set(Mt,Ot)},texStorage2D(st,bt,ht){let[ft,Mt,Ot,Nt,zt]=ht;Cu(ft,Mt,Ot,Nt,zt,1)},texStorage3D(st,bt,ht){let[ft,Mt,Ot,Nt,zt,Yt]=ht;Cu(ft,Mt,Ot,Nt,zt,Yt)}},Lv={getExtension(st,bt){const ht=st[bt];st[bt]=function(...ft){const Mt=ft[0].toLowerCase(),Ot=ys[Mt];if(Ot)return Ot.ctx;const Nt=ht.call(st,...ft);return Nt&&Hf(Nt,Mt,gy(nm({},Sn),{origGLErrorFn:Mn})),Nt}}};function Pp(st,bt){const ht=st[bt],ft=Rv[bt]||jo,Mt=Ip[bt]||jo;if(ft===jo&&Ip===jo)return;st[bt]=function(...Nt){ft(st,bt,Nt);const zt=ht.call(st,...Nt);return Mt(st,bt,Nt,zt),zt};const Ot=Lv[bt];Ot&&Ot(st,bt,Mn)}for(const st in Rt)typeof Rt[st]=="function"&&(Vf[st]=Rt[st],Pp(Rt,st));ys[it.toLowerCase()]={ctx:Rt,origFuncs:Vf}}function Gf(Rt){const it=Rt.prototype.getContext;Rt.prototype.getContext=function(Sn,...Mn){const fr=it.call(this,Sn,...Mn);return fr&&fr.bindTexture&&(Hf(fr,Sn,{}),fr.getExtension("GMAN_webgl_memory")),fr}}typeof HTMLCanvasElement!="undefined"&&Gf(HTMLCanvasElement),typeof OffscreenCanvas!="undefined"&&Gf(OffscreenCanvas)});const x1=new WeakMap;class HV extends Dr{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,o){const l=new pi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,u=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(u,h).then(t).catch(o)},r,o)}decodeDracoFile(e,t,r,o){const l={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,l).then(t)}decodeGeometry(e,t){for(const m in t.attributeTypes){const v=t.attributeTypes[m];v.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[m]=v.name)}const r=JSON.stringify(t);if(x1.has(e)){const m=x1.get(e);if(m.key===r)return m.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const l=this.workerNextTaskID++,u=e.byteLength,h=this._getWorker(l,u).then(m=>(o=m,new Promise((v,w)=>{o._callbacks[l]={resolve:v,reject:w},o.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))).then(m=>this._createGeometry(m.geometry));return h.catch(()=>!0).then(()=>{o&&l&&this._releaseTask(o,l)}),x1.set(e,{key:r,promise:h}),h}_createGeometry(e){const t=new xt;e.index&&t.setIndex(new Dt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const o=e.attributes[r],l=o.name,u=o.array,h=o.itemSize;t.setAttribute(l,new Dt(u,h))}return t}_loadLibrary(e,t){const r=new pi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((o,l)=>{r.load(e,o,void 0,l)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const o=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const l=g4.toString(),u=["/* draco decoder */",o,"","/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([u]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(l){const u=l.data;switch(u.type){case"decode":o._callbacks[u.id].resolve(u);break;case"error":o._callbacks[u.id].reject(u);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+u.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,l){return o._taskLoad>l._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function g4(){let s,e;onmessage=function(u){const h=u.data;switch(h.type){case"init":s=h.decoderConfig,e=new Promise(function(w){s.onModuleLoaded=function(S){w({draco:S})},DracoDecoderModule(s)});break;case"decode":const m=h.buffer,v=h.taskConfig;e.then(w=>{const S=w.draco,A=new S.Decoder,R=new S.DecoderBuffer;R.Init(new Int8Array(m),m.byteLength);try{const O=t(S,A,R,v),N=O.attributes.map(k=>k.array.buffer);O.index&&N.push(O.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:O},N)}catch(O){console.error(O),self.postMessage({type:"error",id:h.id,error:O.message})}finally{S.destroy(R),S.destroy(A)}});break}};function t(u,h,m,v){const w=v.attributeIDs,S=v.attributeTypes;let A,R;const O=h.GetEncodedGeometryType(m);if(O===u.TRIANGULAR_MESH)A=new u.Mesh,R=h.DecodeBufferToMesh(m,A);else if(O===u.POINT_CLOUD)A=new u.PointCloud,R=h.DecodeBufferToPointCloud(m,A);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!R.ok()||A.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+R.error_msg());const N={index:null,attributes:[]};for(const k in w){const D=self[S[k]];let P,F;if(v.useUniqueIDs)F=w[k],P=h.GetAttributeByUniqueId(A,F);else{if(F=h.GetAttributeId(A,u[w[k]]),F===-1)continue;P=h.GetAttribute(A,F)}N.attributes.push(o(u,h,A,k,D,P))}return O===u.TRIANGULAR_MESH&&(N.index=r(u,h,A)),u.destroy(A),N}function r(u,h,m){const w=m.num_faces()*3,S=w*4,A=u._malloc(S);h.GetTrianglesUInt32Array(m,S,A);const R=new Uint32Array(u.HEAPF32.buffer,A,w).slice();return u._free(A),{array:R,itemSize:1}}function o(u,h,m,v,w,S){const A=S.num_components(),O=m.num_points()*A,N=O*w.BYTES_PER_ELEMENT,k=l(u,w),D=u._malloc(N);h.GetAttributeDataArrayForAllPoints(m,S,k,N,D);const P=new w(u.HEAPF32.buffer,D,O).slice();return u._free(D),{name:v,array:P,itemSize:A}}function l(u,h){switch(h){case Float32Array:return u.DT_FLOAT32;case Int8Array:return u.DT_INT8;case Int16Array:return u.DT_INT16;case Int32Array:return u.DT_INT32;case Uint8Array:return u.DT_UINT8;case Uint16Array:return u.DT_UINT16;case Uint32Array:return u.DT_UINT32}}}class GV extends Dr{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new w4(t)}),this.register(function(t){return new A4(t)}),this.register(function(t){return new C4(t)}),this.register(function(t){return new b4(t)}),this.register(function(t){return new S4(t)}),this.register(function(t){return new M4(t)}),this.register(function(t){return new T4(t)}),this.register(function(t){return new _4(t)}),this.register(function(t){return new E4(t)}),this.register(function(t){return new y4(t)}),this.register(function(t){return new R4(t)})}load(e,t,r,o){const l=this;let u;this.resourcePath!==""?u=this.resourcePath:this.path!==""?u=this.path:u=Ci.extractUrlBase(e),this.manager.itemStart(e);const h=function(v){o?o(v):console.error(v),l.manager.itemError(e),l.manager.itemEnd(e)},m=new pi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(e,function(v){try{l.parse(v,u,function(w){t(w),l.manager.itemEnd(e)},h)}catch(w){h(w)}},r,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,o){let l;const u={},h={};if(typeof e=="string")l=e;else if(Ci.decodeText(new Uint8Array(e,0,4))===UA){try{u[on.KHR_BINARY_GLTF]=new L4(e)}catch(S){o&&o(S);return}l=u[on.KHR_BINARY_GLTF].content}else l=Ci.decodeText(new Uint8Array(e));const m=JSON.parse(l);if(m.asset===void 0||m.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const v=new V4(m,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let w=0;w<this.pluginCallbacks.length;w++){const S=this.pluginCallbacks[w](v);h[S.name]=S,u[S.name]=!0}if(m.extensionsUsed)for(let w=0;w<m.extensionsUsed.length;++w){const S=m.extensionsUsed[w],A=m.extensionsRequired||[];switch(S){case on.KHR_MATERIALS_UNLIT:u[S]=new x4;break;case on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[S]=new k4;break;case on.KHR_DRACO_MESH_COMPRESSION:u[S]=new I4(m,this.dracoLoader);break;case on.KHR_TEXTURE_TRANSFORM:u[S]=new P4;break;case on.KHR_MESH_QUANTIZATION:u[S]=new D4;break;default:A.indexOf(S)>=0&&h[S]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+S+'".')}}v.setExtensions(u),v.setPlugins(h),v.parse(r,o)}parseAsync(e,t){const r=this;return new Promise(function(o,l){r.parse(e,t,o,l)})}}function v4(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const on={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class y4{constructor(e){this.parser=e,this.name=on.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,o=t.length;r<o;r++){const l=t[r];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let o=t.cache.get(r);if(o)return o;const l=t.json,m=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let v;const w=new Qe(16777215);m.color!==void 0&&w.fromArray(m.color);const S=m.range!==void 0?m.range:0;switch(m.type){case"directional":v=new Yh(w),v.target.position.set(0,0,-1),v.add(v.target);break;case"point":v=new Uc(w),v.distance=S;break;case"spot":v=new qh(w),v.distance=S,m.spot=m.spot||{},m.spot.innerConeAngle=m.spot.innerConeAngle!==void 0?m.spot.innerConeAngle:0,m.spot.outerConeAngle=m.spot.outerConeAngle!==void 0?m.spot.outerConeAngle:Math.PI/4,v.angle=m.spot.outerConeAngle,v.penumbra=1-m.spot.innerConeAngle/m.spot.outerConeAngle,v.target.position.set(0,0,-1),v.add(v.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+m.type)}return v.position.set(0,0,0),v.decay=2,m.intensity!==void 0&&(v.intensity=m.intensity),v.name=t.createUniqueName(m.name||"light_"+e),o=Promise.resolve(v),t.cache.add(r,o),o}createNodeAttachment(e){const t=this,r=this.parser,l=r.json.nodes[e],h=(l.extensions&&l.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(m){return r._getNodeRef(t.cache,h,m)})}}class x4{constructor(){this.name=on.KHR_MATERIALS_UNLIT}getMaterialType(){return Ir}extendParams(e,t,r){const o=[];e.color=new Qe(1,1,1),e.opacity=1;const l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const u=l.baseColorFactor;e.color.fromArray(u),e.opacity=u[3]}l.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",l.baseColorTexture,Xt))}return Promise.all(o)}}class _4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=o.extensions[this.name].emissiveStrength;return l!==void 0&&(t.emissiveIntensity=l),Promise.resolve()}}class w4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],u=o.extensions[this.name];if(u.clearcoatFactor!==void 0&&(t.clearcoat=u.clearcoatFactor),u.clearcoatTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatMap",u.clearcoatTexture)),u.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=u.clearcoatRoughnessFactor),u.clearcoatRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatRoughnessMap",u.clearcoatRoughnessTexture)),u.clearcoatNormalTexture!==void 0&&(l.push(r.assignTexture(t,"clearcoatNormalMap",u.clearcoatNormalTexture)),u.clearcoatNormalTexture.scale!==void 0)){const h=u.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new je(h,h)}return Promise.all(l)}}class b4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[];t.sheenColor=new Qe(0,0,0),t.sheenRoughness=0,t.sheen=1;const u=o.extensions[this.name];return u.sheenColorFactor!==void 0&&t.sheenColor.fromArray(u.sheenColorFactor),u.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=u.sheenRoughnessFactor),u.sheenColorTexture!==void 0&&l.push(r.assignTexture(t,"sheenColorMap",u.sheenColorTexture,Xt)),u.sheenRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"sheenRoughnessMap",u.sheenRoughnessTexture)),Promise.all(l)}}class S4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],u=o.extensions[this.name];return u.transmissionFactor!==void 0&&(t.transmission=u.transmissionFactor),u.transmissionTexture!==void 0&&l.push(r.assignTexture(t,"transmissionMap",u.transmissionTexture)),Promise.all(l)}}class M4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],u=o.extensions[this.name];t.thickness=u.thicknessFactor!==void 0?u.thicknessFactor:0,u.thicknessTexture!==void 0&&l.push(r.assignTexture(t,"thicknessMap",u.thicknessTexture)),t.attenuationDistance=u.attenuationDistance||0;const h=u.attenuationColor||[1,1,1];return t.attenuationColor=new Qe(h[0],h[1],h[2]),Promise.all(l)}}class T4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=o.extensions[this.name];return t.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}}class E4{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],u=o.extensions[this.name];t.specularIntensity=u.specularFactor!==void 0?u.specularFactor:1,u.specularTexture!==void 0&&l.push(r.assignTexture(t,"specularIntensityMap",u.specularTexture));const h=u.specularColorFactor||[1,1,1];return t.specularColor=new Qe(h[0],h[1],h[2]),u.specularColorTexture!==void 0&&l.push(r.assignTexture(t,"specularColorMap",u.specularColorTexture,Xt)),Promise.all(l)}}class A4{constructor(e){this.parser=e,this.name=on.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const l=o.extensions[this.name],u=t.options.ktx2Loader;if(!u){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,l.source,u)}}class C4{constructor(e){this.parser=e,this.name=on.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,o=r.json,l=o.textures[e];if(!l.extensions||!l.extensions[t])return null;const u=l.extensions[t],h=o.images[u.source];let m=r.textureLoader;if(h.uri){const v=r.options.manager.getHandler(h.uri);v!==null&&(m=v)}return this.detectSupport().then(function(v){if(v)return r.loadTextureImage(e,u.source,m);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class R4{constructor(e){this.name=on.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],l=this.parser.getDependency("buffer",o.buffer),u=this.parser.options.meshoptDecoder;if(!u||!u.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,u.ready]).then(function(h){const m=o.byteOffset||0,v=o.byteLength||0,w=o.count,S=o.byteStride,A=new ArrayBuffer(w*S),R=new Uint8Array(h[0],m,v);return u.decodeGltfBuffer(new Uint8Array(A),w,S,R,o.mode,o.filter),A})}else return null}}const UA="glTF",Qh=12,BA={JSON:1313821514,BIN:5130562};class L4{constructor(e){this.name=on.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Qh);if(this.header={magic:Ci.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==UA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Qh,o=new DataView(e,Qh);let l=0;for(;l<r;){const u=o.getUint32(l,!0);l+=4;const h=o.getUint32(l,!0);if(l+=4,h===BA.JSON){const m=new Uint8Array(e,Qh+l,u);this.content=Ci.decodeText(m)}else if(h===BA.BIN){const m=Qh+l;this.body=e.slice(m,m+u)}l+=u}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class I4{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=on.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,o=this.dracoLoader,l=e.extensions[this.name].bufferView,u=e.extensions[this.name].attributes,h={},m={},v={};for(const w in u){const S=w1[w]||w.toLowerCase();h[S]=u[w]}for(const w in e.attributes){const S=w1[w]||w.toLowerCase();if(u[w]!==void 0){const A=r.accessors[e.attributes[w]],R=Zh[A.componentType];v[S]=R,m[S]=A.normalized===!0}}return t.getDependency("bufferView",l).then(function(w){return new Promise(function(S){o.decodeDracoFile(w,function(A){for(const R in A.attributes){const O=A.attributes[R],N=m[R];N!==void 0&&(O.normalized=N)}S(A)},h,v)})})}}class P4{constructor(){this.name=on.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class _1 extends Bl{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),h={specular:{value:new Qe().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=h,this.onBeforeCompile=function(m){for(const v in h)m.uniforms[v]=h[v];m.fragmentShader=m.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",u)},Object.defineProperties(this,{specular:{get:function(){return h.specular.value},set:function(m){h.specular.value=m}},specularMap:{get:function(){return h.specularMap.value},set:function(m){h.specularMap.value=m,m?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return h.glossiness.value},set:function(m){h.glossiness.value=m}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(m){h.glossinessMap.value=m,m?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class k4{constructor(){this.name=on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return _1}extendParams(e,t,r){const o=t.extensions[this.name];e.color=new Qe(1,1,1),e.opacity=1;const l=[];if(Array.isArray(o.diffuseFactor)){const u=o.diffuseFactor;e.color.fromArray(u),e.opacity=u[3]}if(o.diffuseTexture!==void 0&&l.push(r.assignTexture(e,"map",o.diffuseTexture,Xt)),e.emissive=new Qe(0,0,0),e.glossiness=o.glossinessFactor!==void 0?o.glossinessFactor:1,e.specular=new Qe(1,1,1),Array.isArray(o.specularFactor)&&e.specular.fromArray(o.specularFactor),o.specularGlossinessTexture!==void 0){const u=o.specularGlossinessTexture;l.push(r.assignTexture(e,"glossinessMap",u)),l.push(r.assignTexture(e,"specularMap",u,Xt))}return Promise.all(l)}createMaterial(e){const t=new _1(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=_o,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class D4{constructor(){this.name=on.KHR_MESH_QUANTIZATION}}class Ql extends Qs{constructor(e,t,r,o){super(e,t,r,o)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o*3+o;for(let u=0;u!==o;u++)t[u]=r[l+u];return t}}Ql.prototype.beforeStart_=Ql.prototype.copySampleValue_;Ql.prototype.afterEnd_=Ql.prototype.copySampleValue_;Ql.prototype.interpolate_=function(s,e,t,r){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,m=u*3,v=r-e,w=(t-e)/v,S=w*w,A=S*w,R=s*m,O=R-m,N=-2*A+3*S,k=A-S,D=1-N,P=k-S+w;for(let F=0;F!==u;F++){const L=l[O+F+u],z=l[O+F+h]*v,H=l[R+F+u],X=l[R+F]*v;o[F]=D*L+P*z+N*H+k*X}return o};const O4=new Ct;class N4 extends Ql{interpolate_(e,t,r,o){const l=super.interpolate_(e,t,r,o);return O4.fromArray(l).normalize().toArray(l),l}}const Io={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Zh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zA={9728:ir,9729:jn,9984:xh,9985:sm,9986:_h,9987:vo},HA={33071:Lr,33648:Yu,10497:Ws},GA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ea={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F4={CUBICSPLINE:void 0,LINEAR:wl,STEP:Zu},b1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function U4(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Bl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:na})),s.DefaultMaterial}function Jh(s,e,t){for(const r in t.extensions)s[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Zl(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function B4(s,e,t){let r=!1,o=!1,l=!1;for(let v=0,w=e.length;v<w;v++){const S=e[v];if(S.POSITION!==void 0&&(r=!0),S.NORMAL!==void 0&&(o=!0),S.COLOR_0!==void 0&&(l=!0),r&&o&&l)break}if(!r&&!o&&!l)return Promise.resolve(s);const u=[],h=[],m=[];for(let v=0,w=e.length;v<w;v++){const S=e[v];if(r){const A=S.POSITION!==void 0?t.getDependency("accessor",S.POSITION):s.attributes.position;u.push(A)}if(o){const A=S.NORMAL!==void 0?t.getDependency("accessor",S.NORMAL):s.attributes.normal;h.push(A)}if(l){const A=S.COLOR_0!==void 0?t.getDependency("accessor",S.COLOR_0):s.attributes.color;m.push(A)}}return Promise.all([Promise.all(u),Promise.all(h),Promise.all(m)]).then(function(v){const w=v[0],S=v[1],A=v[2];return r&&(s.morphAttributes.position=w),o&&(s.morphAttributes.normal=S),l&&(s.morphAttributes.color=A),s.morphTargetsRelative=!0,s})}function z4(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let r=0,o=t.length;r<o;r++)s.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function H4(s){const e=s.extensions&&s.extensions[on.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+VA(e.attributes):t=s.indices+":"+VA(s.attributes)+":"+s.mode,t}function VA(s){let e="";const t=Object.keys(s).sort();for(let r=0,o=t.length;r<o;r++)e+=t[r]+":"+s[t[r]]+";";return e}function S1(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function G4(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class V4{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new v4,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,l=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap=="undefined"||r||o&&l<98?this.textureLoader=new dg(this.options.manager):this.textureLoader=new c1(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,o=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll(function(u){return u._markDefs&&u._markDefs()}),Promise.all(this._invokeAll(function(u){return u.beforeRoot&&u.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(u){const h={scene:u[0][o.scene||0],scenes:u[0],animations:u[1],cameras:u[2],asset:o.asset,parser:r,userData:{}};Jh(l,h,o),Zl(h,o),Promise.all(r._invokeAll(function(m){return m.afterRoot&&m.afterRoot(h)})).then(function(){e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let o=0,l=t.length;o<l;o++){const u=t[o].joints;for(let h=0,m=u.length;h<m;h++)e[u[h]].isBone=!0}for(let o=0,l=e.length;o<l;o++){const u=e[o];u.mesh!==void 0&&(this._addNodeRef(this.meshCache,u.mesh),u.skin!==void 0&&(r[u.mesh].isSkinnedMesh=!0)),u.camera!==void 0&&this._addNodeRef(this.cameraCache,u.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const o=r.clone(),l=(u,h)=>{const m=this.associations.get(u);m!=null&&this.associations.set(h,m);for(const[v,w]of u.children.entries())l(w,h.children[v])};return l(r,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const o=e(t[r]);if(o)return o}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let o=0;o<t.length;o++){const l=e(t[o]);l&&r.push(l)}return r}getDependency(e,t){const r=e+":"+t;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this.loadNode(t);break;case"mesh":o=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne(function(l){return l.loadAnimation&&l.loadAnimation(t)});break;case"camera":o=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(l,u){return r.getDependency(e,u)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[on.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(l,u){r.load(Ci.resolveURL(t.uri,o.path),l,void 0,function(){u(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const o=t.byteLength||0,l=t.byteOffset||0;return r.slice(l,l+o)})}loadAccessor(e){const t=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0)return Promise.resolve(null);const l=[];return o.bufferView!==void 0?l.push(this.getDependency("bufferView",o.bufferView)):l.push(null),o.sparse!==void 0&&(l.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(l).then(function(u){const h=u[0],m=GA[o.type],v=Zh[o.componentType],w=v.BYTES_PER_ELEMENT,S=w*m,A=o.byteOffset||0,R=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,O=o.normalized===!0;let N,k;if(R&&R!==S){const D=Math.floor(A/R),P="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+D+":"+o.count;let F=t.cache.get(P);F||(N=new v(h,D*R,o.count*R/w),F=new _a(N,R/w),t.cache.add(P,F)),k=new Ao(F,m,A%R/w,O)}else h===null?N=new v(o.count*m):N=new v(h,A,o.count*m),k=new Dt(N,m,O);if(o.sparse!==void 0){const D=GA.SCALAR,P=Zh[o.sparse.indices.componentType],F=o.sparse.indices.byteOffset||0,L=o.sparse.values.byteOffset||0,z=new P(u[1],F,o.sparse.count*D),H=new v(u[2],L,o.sparse.count*m);h!==null&&(k=new Dt(k.array.slice(),k.itemSize,k.normalized));for(let X=0,$=z.length;X<$;X++){const J=z[X];if(k.setX(J,H[X*m]),m>=2&&k.setY(J,H[X*m+1]),m>=3&&k.setZ(J,H[X*m+2]),m>=4&&k.setW(J,H[X*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return k})}loadTexture(e){const t=this.json,r=this.options,l=t.textures[e].source,u=t.images[l];let h=this.textureLoader;if(u.uri){const m=r.manager.getHandler(u.uri);m!==null&&(h=m)}return this.loadTextureImage(e,l,h)}loadTextureImage(e,t,r){const o=this,l=this.json,u=l.textures[e],h=l.images[t],m=(h.uri||h.bufferView)+":"+u.sampler;if(this.textureCache[m])return this.textureCache[m];const v=this.loadImageSource(t,r).then(function(w){w.flipY=!1,u.name&&(w.name=u.name);const A=(l.samplers||{})[u.sampler]||{};return w.magFilter=zA[A.magFilter]||jn,w.minFilter=zA[A.minFilter]||vo,w.wrapS=HA[A.wrapS]||Ws,w.wrapT=HA[A.wrapT]||Ws,o.associations.set(w,{textures:e}),w}).catch(function(){return null});return this.textureCache[m]=v,v}loadImageSource(e,t){const r=this,o=this.json,l=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(S=>S.clone());const u=o.images[e],h=self.URL||self.webkitURL;let m=u.uri||"",v=!1;if(u.bufferView!==void 0)m=r.getDependency("bufferView",u.bufferView).then(function(S){v=!0;const A=new Blob([S],{type:u.mimeType});return m=h.createObjectURL(A),m});else if(u.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const w=Promise.resolve(m).then(function(S){return new Promise(function(A,R){let O=A;t.isImageBitmapLoader===!0&&(O=function(N){const k=new Un(N);k.needsUpdate=!0,A(k)}),t.load(Ci.resolveURL(S,l.path),O,void 0,R)})}).then(function(S){return v===!0&&h.revokeObjectURL(m),S.userData.mimeType=u.mimeType||G4(u.uri),S}).catch(function(S){throw console.error("THREE.GLTFLoader: Couldn't load texture",m),S});return this.sourceCache[e]=w,w}assignTexture(e,t,r,o){const l=this;return this.getDependency("texture",r.index).then(function(u){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),l.extensions[on.KHR_TEXTURE_TRANSFORM]){const h=r.extensions!==void 0?r.extensions[on.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const m=l.associations.get(u);u=l.extensions[on.KHR_TEXTURE_TRANSFORM].extendTexture(u,h),l.associations.set(u,m)}}return o!==void 0&&(u.encoding=o),e[t]=u,u})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const o=t.attributes.tangent===void 0,l=t.attributes.color!==void 0,u=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new ba,Bn.prototype.copy.call(m,r),m.color.copy(r.color),m.map=r.map,m.sizeAttenuation=!1,this.cache.add(h,m)),r=m}else if(e.isLine){const h="LineBasicMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new Pn,Bn.prototype.copy.call(m,r),m.color.copy(r.color),this.cache.add(h,m)),r=m}if(o||l||u){let h="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),o&&(h+="derivative-tangents:"),l&&(h+="vertex-colors:"),u&&(h+="flat-shading:");let m=this.cache.get(h);m||(m=r.clone(),l&&(m.vertexColors=!0),u&&(m.flatShading=!0),o&&(m.normalScale&&(m.normalScale.y*=-1),m.clearcoatNormalScale&&(m.clearcoatNormalScale.y*=-1)),this.cache.add(h,m),this.associations.set(m,this.associations.get(r))),r=m}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Bl}loadMaterial(e){const t=this,r=this.json,o=this.extensions,l=r.materials[e];let u;const h={},m=l.extensions||{},v=[];if(m[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const S=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];u=S.getMaterialType(),v.push(S.extendParams(h,l,t))}else if(m[on.KHR_MATERIALS_UNLIT]){const S=o[on.KHR_MATERIALS_UNLIT];u=S.getMaterialType(),v.push(S.extendParams(h,l,t))}else{const S=l.pbrMetallicRoughness||{};if(h.color=new Qe(1,1,1),h.opacity=1,Array.isArray(S.baseColorFactor)){const A=S.baseColorFactor;h.color.fromArray(A),h.opacity=A[3]}S.baseColorTexture!==void 0&&v.push(t.assignTexture(h,"map",S.baseColorTexture,Xt)),h.metalness=S.metallicFactor!==void 0?S.metallicFactor:1,h.roughness=S.roughnessFactor!==void 0?S.roughnessFactor:1,S.metallicRoughnessTexture!==void 0&&(v.push(t.assignTexture(h,"metalnessMap",S.metallicRoughnessTexture)),v.push(t.assignTexture(h,"roughnessMap",S.metallicRoughnessTexture))),u=this._invokeOne(function(A){return A.getMaterialType&&A.getMaterialType(e)}),v.push(Promise.all(this._invokeAll(function(A){return A.extendMaterialParams&&A.extendMaterialParams(e,h)})))}l.doubleSided===!0&&(h.side=bs);const w=l.alphaMode||b1.OPAQUE;if(w===b1.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,w===b1.MASK&&(h.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&u!==Ir&&(v.push(t.assignTexture(h,"normalMap",l.normalTexture)),h.normalScale=new je(1,1),l.normalTexture.scale!==void 0)){const S=l.normalTexture.scale;h.normalScale.set(S,S)}return l.occlusionTexture!==void 0&&u!==Ir&&(v.push(t.assignTexture(h,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&u!==Ir&&(h.emissive=new Qe().fromArray(l.emissiveFactor)),l.emissiveTexture!==void 0&&u!==Ir&&v.push(t.assignTexture(h,"emissiveMap",l.emissiveTexture,Xt)),Promise.all(v).then(function(){let S;return u===_1?S=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):S=new u(h),l.name&&(S.name=l.name),Zl(S,l),t.associations.set(S,{materials:e}),l.extensions&&Jh(o,S,l),S})}createUniqueName(e){const t=Jt.sanitizeNodeName(e||"");let r=t;for(let o=1;this.nodeNamesUsed[r];++o)r=t+"_"+o;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,o=this.primitiveCache;function l(h){return r[on.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(m){return $A(m,h,t)})}const u=[];for(let h=0,m=e.length;h<m;h++){const v=e[h],w=H4(v),S=o[w];if(S)u.push(S.promise);else{let A;v.extensions&&v.extensions[on.KHR_DRACO_MESH_COMPRESSION]?A=l(v):A=$A(new xt,v,t),o[w]={primitive:v,promise:A},u.push(A)}}return Promise.all(u)}loadMesh(e){const t=this,r=this.json,o=this.extensions,l=r.meshes[e],u=l.primitives,h=[];for(let m=0,v=u.length;m<v;m++){const w=u[m].material===void 0?U4(this.cache):this.getDependency("material",u[m].material);h.push(w)}return h.push(t.loadGeometries(u)),Promise.all(h).then(function(m){const v=m.slice(0,m.length-1),w=m[m.length-1],S=[];for(let R=0,O=w.length;R<O;R++){const N=w[R],k=u[R];let D;const P=v[R];if(k.mode===Io.TRIANGLES||k.mode===Io.TRIANGLE_STRIP||k.mode===Io.TRIANGLE_FAN||k.mode===void 0)D=l.isSkinnedMesh===!0?new kl(N,P):new ot(N,P),D.isSkinnedMesh===!0&&!D.geometry.attributes.skinWeight.normalized&&D.normalizeSkinWeights(),k.mode===Io.TRIANGLE_STRIP?D.geometry=jA(D.geometry,eT):k.mode===Io.TRIANGLE_FAN&&(D.geometry=jA(D.geometry,Yy));else if(k.mode===Io.LINES)D=new kr(N,P);else if(k.mode===Io.LINE_STRIP)D=new gr(N,P);else if(k.mode===Io.LINE_LOOP)D=new Zm(N,P);else if(k.mode===Io.POINTS)D=new Mc(N,P);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+k.mode);Object.keys(D.geometry.morphAttributes).length>0&&z4(D,l),D.name=t.createUniqueName(l.name||"mesh_"+e),Zl(D,l),k.extensions&&Jh(o,D,k),t.assignFinalMaterial(D),S.push(D)}for(let R=0,O=S.length;R<O;R++)t.associations.set(S[R],{meshes:e,primitives:R});if(S.length===1)return S[0];const A=new Vr;t.associations.set(A,{meshes:e});for(let R=0,O=S.length;R<O;R++)A.add(S[R]);return A})}loadCamera(e){let t;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new mr(hn.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(t=new Ll(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Zl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(o){return r.inverseBindMatrices=o,r})}loadAnimation(e){const r=this.json.animations[e],o=[],l=[],u=[],h=[],m=[];for(let v=0,w=r.channels.length;v<w;v++){const S=r.channels[v],A=r.samplers[S.sampler],R=S.target,O=R.node!==void 0?R.node:R.id,N=r.parameters!==void 0?r.parameters[A.input]:A.input,k=r.parameters!==void 0?r.parameters[A.output]:A.output;o.push(this.getDependency("node",O)),l.push(this.getDependency("accessor",N)),u.push(this.getDependency("accessor",k)),h.push(A),m.push(R)}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(m)]).then(function(v){const w=v[0],S=v[1],A=v[2],R=v[3],O=v[4],N=[];for(let D=0,P=w.length;D<P;D++){const F=w[D],L=S[D],z=A[D],H=R[D],X=O[D];if(F===void 0)continue;F.updateMatrix(),F.matrixAutoUpdate=!0;let $;switch(Ea[X.path]){case Ea.weights:$=Hl;break;case Ea.rotation:$=Ro;break;case Ea.position:case Ea.scale:default:$=Vl;break}const J=F.name?F.name:F.uuid,se=H.interpolation!==void 0?F4[H.interpolation]:wl,ce=[];Ea[X.path]===Ea.weights?F.traverse(function(fe){fe.morphTargetInfluences&&ce.push(fe.name?fe.name:fe.uuid)}):ce.push(J);let pe=z.array;if(z.normalized){const fe=S1(pe.constructor),b=new Float32Array(pe.length);for(let p=0,ee=pe.length;p<ee;p++)b[p]=pe[p]*fe;pe=b}for(let fe=0,b=ce.length;fe<b;fe++){const p=new $(ce[fe]+"."+Ea[X.path],L.array,pe,se);H.interpolation==="CUBICSPLINE"&&(p.createInterpolant=function(E){const me=this instanceof Ro?N4:Ql;return new me(this.times,this.values,this.getValueSize()/3,E)},p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),N.push(p)}}const k=r.name?r.name:"animation_"+e;return new Wl(k,void 0,N)})}createNodeMesh(e){const t=this.json,r=this,o=t.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(l){const u=r._getNodeRef(r.meshCache,o.mesh,l);return o.weights!==void 0&&u.traverse(function(h){if(!!h.isMesh)for(let m=0,v=o.weights.length;m<v;m++)h.morphTargetInfluences[m]=o.weights[m]}),u})}loadNode(e){const t=this.json,r=this.extensions,o=this,l=t.nodes[e],u=l.name?o.createUniqueName(l.name):"";return function(){const h=[],m=o._invokeOne(function(v){return v.createNodeMesh&&v.createNodeMesh(e)});return m&&h.push(m),l.camera!==void 0&&h.push(o.getDependency("camera",l.camera).then(function(v){return o._getNodeRef(o.cameraCache,l.camera,v)})),o._invokeAll(function(v){return v.createNodeAttachment&&v.createNodeAttachment(e)}).forEach(function(v){h.push(v)}),Promise.all(h)}().then(function(h){let m;if(l.isBone===!0?m=new Dl:h.length>1?m=new Vr:h.length===1?m=h[0]:m=new Ht,m!==h[0])for(let v=0,w=h.length;v<w;v++)m.add(h[v]);if(l.name&&(m.userData.name=l.name,m.name=u),Zl(m,l),l.extensions&&Jh(r,m,l),l.matrix!==void 0){const v=new et;v.fromArray(l.matrix),m.applyMatrix4(v)}else l.translation!==void 0&&m.position.fromArray(l.translation),l.rotation!==void 0&&m.quaternion.fromArray(l.rotation),l.scale!==void 0&&m.scale.fromArray(l.scale);return o.associations.has(m)||o.associations.set(m,{}),o.associations.get(m).nodes=e,m})}loadScene(e){const t=this.json,r=this.extensions,o=this.json.scenes[e],l=this,u=new Vr;o.name&&(u.name=l.createUniqueName(o.name)),Zl(u,o),o.extensions&&Jh(r,u,o);const h=o.nodes||[],m=[];for(let v=0,w=h.length;v<w;v++)m.push(WA(h[v],u,t,l));return Promise.all(m).then(function(){const v=w=>{const S=new Map;for(const[A,R]of l.associations)(A instanceof Bn||A instanceof Un)&&S.set(A,R);return w.traverse(A=>{const R=l.associations.get(A);R!=null&&S.set(A,R)}),S};return l.associations=v(u),u})}}function WA(s,e,t,r){const o=t.nodes[s];return r.getDependency("node",s).then(function(l){if(o.skin===void 0)return l;let u;return r.getDependency("skin",o.skin).then(function(h){u=h;const m=[];for(let v=0,w=u.joints.length;v<w;v++)m.push(r.getDependency("node",u.joints[v]));return Promise.all(m)}).then(function(h){return l.traverse(function(m){if(!m.isMesh)return;const v=[],w=[];for(let S=0,A=h.length;S<A;S++){const R=h[S];if(R){v.push(R);const O=new et;u.inverseBindMatrices!==void 0&&O.fromArray(u.inverseBindMatrices.array,S*16),w.push(O)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',u.joints[S])}m.bind(new wa(v,w),m.matrixWorld)}),l})}).then(function(l){e.add(l);const u=[];if(o.children){const h=o.children;for(let m=0,v=h.length;m<v;m++){const w=h[m];u.push(WA(w,l,t,r))}}return Promise.all(u)})}function W4(s,e,t){const r=e.attributes,o=new Ei;if(r.POSITION!==void 0){const h=t.json.accessors[r.POSITION],m=h.min,v=h.max;if(m!==void 0&&v!==void 0){if(o.set(new le(m[0],m[1],m[2]),new le(v[0],v[1],v[2])),h.normalized){const w=S1(Zh[h.componentType]);o.min.multiplyScalar(w),o.max.multiplyScalar(w)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const h=new le,m=new le;for(let v=0,w=l.length;v<w;v++){const S=l[v];if(S.POSITION!==void 0){const A=t.json.accessors[S.POSITION],R=A.min,O=A.max;if(R!==void 0&&O!==void 0){if(m.setX(Math.max(Math.abs(R[0]),Math.abs(O[0]))),m.setY(Math.max(Math.abs(R[1]),Math.abs(O[1]))),m.setZ(Math.max(Math.abs(R[2]),Math.abs(O[2]))),A.normalized){const N=S1(Zh[A.componentType]);m.multiplyScalar(N)}h.max(m)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(h)}s.boundingBox=o;const u=new bo;o.getCenter(u.center),u.radius=o.min.distanceTo(o.max)/2,s.boundingSphere=u}function $A(s,e,t){const r=e.attributes,o=[];function l(u,h){return t.getDependency("accessor",u).then(function(m){s.setAttribute(h,m)})}for(const u in r){const h=w1[u]||u.toLowerCase();h in s.attributes||o.push(l(r[u],h))}if(e.indices!==void 0&&!s.index){const u=t.getDependency("accessor",e.indices).then(function(h){s.setIndex(h)});o.push(u)}return Zl(s,e),W4(s,e,t),Promise.all(o).then(function(){return e.targets!==void 0?B4(s,e.targets,t):s})}function jA(s,e){let t=s.getIndex();if(t===null){const u=[],h=s.getAttribute("position");if(h!==void 0){for(let m=0;m<h.count;m++)u.push(m);s.setIndex(u),t=s.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const r=t.count-2,o=[];if(e===Yy)for(let u=1;u<=r;u++)o.push(t.getX(0)),o.push(t.getX(u)),o.push(t.getX(u+1));else for(let u=0;u<r;u++)u%2==0?(o.push(t.getX(u)),o.push(t.getX(u+1)),o.push(t.getX(u+2))):(o.push(t.getX(u+2)),o.push(t.getX(u+1)),o.push(t.getX(u)));o.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=s.clone();return l.setIndex(o),l}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var qA={},M1=function(s){return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))},XA=function(s){return new Worker(s)};try{URL.revokeObjectURL(M1(""))}catch{M1=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},XA=function(e){return new Worker(e,{type:"module"})}}var $4=function(s,e,t,r,o){var l=XA(qA[e]||(qA[e]=M1(s)));return l.onerror=function(u){return o(u.error,null)},l.onmessage=function(u){return o(null,u.data)},l.postMessage(t,r),l},an=Uint8Array,Or=Uint16Array,Po=Uint32Array,Hc=new an([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gc=new an([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ed=new an([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YA=function(s,e){for(var t=new Or(31),r=0;r<31;++r)t[r]=e+=1<<s[r-1];for(var o=new Po(t[30]),r=1;r<30;++r)for(var l=t[r];l<t[r+1];++l)o[l]=l-t[r]<<5|r;return[t,o]},KA=YA(Hc,2),T1=KA[0],Sg=KA[1];T1[28]=258,Sg[258]=28;var QA=YA(Gc,0),ZA=QA[0],E1=QA[1],td=new Or(32768);for(var Dn=0;Dn<32768;++Dn){var Aa=(Dn&43690)>>>1|(Dn&21845)<<1;Aa=(Aa&52428)>>>2|(Aa&13107)<<2,Aa=(Aa&61680)>>>4|(Aa&3855)<<4,td[Dn]=((Aa&65280)>>>8|(Aa&255)<<8)>>>1}var rs=function(s,e,t){for(var r=s.length,o=0,l=new Or(e);o<r;++o)++l[s[o]-1];var u=new Or(e);for(o=0;o<e;++o)u[o]=u[o-1]+l[o-1]<<1;var h;if(t){h=new Or(1<<e);var m=15-e;for(o=0;o<r;++o)if(s[o])for(var v=o<<4|s[o],w=e-s[o],S=u[s[o]-1]++<<w,A=S|(1<<w)-1;S<=A;++S)h[td[S]>>>m]=v}else for(h=new Or(r),o=0;o<r;++o)s[o]&&(h[o]=td[u[s[o]-1]++]>>>15-s[o]);return h},ko=new an(288);for(var Dn=0;Dn<144;++Dn)ko[Dn]=8;for(var Dn=144;Dn<256;++Dn)ko[Dn]=9;for(var Dn=256;Dn<280;++Dn)ko[Dn]=7;for(var Dn=280;Dn<288;++Dn)ko[Dn]=8;var Vc=new an(32);for(var Dn=0;Dn<32;++Dn)Vc[Dn]=5;var JA=rs(ko,9,0),eC=rs(ko,9,1),tC=rs(Vc,5,0),nC=rs(Vc,5,1),Mg=function(s){for(var e=s[0],t=1;t<s.length;++t)s[t]>e&&(e=s[t]);return e},is=function(s,e,t){var r=e/8|0;return(s[r]|s[r+1]<<8)>>(e&7)&t},Tg=function(s,e){var t=e/8|0;return(s[t]|s[t+1]<<8|s[t+2]<<16)>>(e&7)},nd=function(s){return(s/8|0)+(s&7&&1)},ss=function(s,e,t){(e==null||e<0)&&(e=0),(t==null||t>s.length)&&(t=s.length);var r=new(s instanceof Or?Or:s instanceof Po?Po:an)(t-e);return r.set(s.subarray(e,t)),r},rd=function(s,e,t){var r=s.length;if(!r||t&&!t.l&&r<5)return e||new an(0);var o=!e||t,l=!t||t.i;t||(t={}),e||(e=new an(r*3));var u=function(Me){var Be=e.length;if(Me>Be){var Ve=new an(Math.max(Be*2,Me));Ve.set(e),e=Ve}},h=t.f||0,m=t.p||0,v=t.b||0,w=t.l,S=t.d,A=t.m,R=t.n,O=r*8;do{if(!w){t.f=h=is(s,m,1);var N=is(s,m+1,3);if(m+=3,N)if(N==1)w=eC,S=nC,A=9,R=5;else if(N==2){var F=is(s,m,31)+257,L=is(s,m+10,15)+4,z=F+is(s,m+5,31)+1;m+=14;for(var H=new an(z),X=new an(19),$=0;$<L;++$)X[ed[$]]=is(s,m+$*3,7);m+=L*3;for(var J=Mg(X),se=(1<<J)-1,ce=rs(X,J,1),$=0;$<z;){var pe=ce[is(s,m,se)];m+=pe&15;var k=pe>>>4;if(k<16)H[$++]=k;else{var fe=0,b=0;for(k==16?(b=3+is(s,m,3),m+=2,fe=H[$-1]):k==17?(b=3+is(s,m,7),m+=3):k==18&&(b=11+is(s,m,127),m+=7);b--;)H[$++]=fe}}var p=H.subarray(0,F),ee=H.subarray(F);A=Mg(p),R=Mg(ee),w=rs(p,A,1),S=rs(ee,R,1)}else throw"invalid block type";else{var k=nd(m)+4,D=s[k-4]|s[k-3]<<8,P=k+D;if(P>r){if(l)throw"unexpected EOF";break}o&&u(v+D),e.set(s.subarray(k,P),v),t.b=v+=D,t.p=m=P*8;continue}if(m>O){if(l)throw"unexpected EOF";break}}o&&u(v+131072);for(var E=(1<<A)-1,me=(1<<R)-1,Se=m;;Se=m){var fe=w[Tg(s,m)&E],Te=fe>>>4;if(m+=fe&15,m>O){if(l)throw"unexpected EOF";break}if(!fe)throw"invalid length/literal";if(Te<256)e[v++]=Te;else if(Te==256){Se=m,w=null;break}else{var ye=Te-254;if(Te>264){var $=Te-257,de=Hc[$];ye=is(s,m,(1<<de)-1)+T1[$],m+=de}var Re=S[Tg(s,m)&me],we=Re>>>4;if(!Re)throw"invalid distance";m+=Re&15;var ee=ZA[we];if(we>3){var de=Gc[we];ee+=Tg(s,m)&(1<<de)-1,m+=de}if(m>O){if(l)throw"unexpected EOF";break}o&&u(v+131072);for(var Ie=v+ye;v<Ie;v+=4)e[v]=e[v-ee],e[v+1]=e[v+1-ee],e[v+2]=e[v+2-ee],e[v+3]=e[v+3-ee];v=Ie}}t.l=w,t.p=Se,t.b=v,w&&(h=1,t.m=A,t.d=S,t.n=R)}while(!h);return v==e.length?e:ss(e,0,v)},Zs=function(s,e,t){t<<=e&7;var r=e/8|0;s[r]|=t,s[r+1]|=t>>>8},Wc=function(s,e,t){t<<=e&7;var r=e/8|0;s[r]|=t,s[r+1]|=t>>>8,s[r+2]|=t>>>16},Eg=function(s,e){for(var t=[],r=0;r<s.length;++r)s[r]&&t.push({s:r,f:s[r]});var o=t.length,l=t.slice();if(!o)return[Do,0];if(o==1){var u=new an(t[0].s+1);return u[t[0].s]=1,[u,1]}t.sort(function(z,H){return z.f-H.f}),t.push({s:-1,f:25001});var h=t[0],m=t[1],v=0,w=1,S=2;for(t[0]={s:-1,f:h.f+m.f,l:h,r:m};w!=o-1;)h=t[t[v].f<t[S].f?v++:S++],m=t[v!=w&&t[v].f<t[S].f?v++:S++],t[w++]={s:-1,f:h.f+m.f,l:h,r:m};for(var A=l[0].s,r=1;r<o;++r)l[r].s>A&&(A=l[r].s);var R=new Or(A+1),O=Ag(t[w-1],R,0);if(O>e){var r=0,N=0,k=O-e,D=1<<k;for(l.sort(function(H,X){return R[X.s]-R[H.s]||H.f-X.f});r<o;++r){var P=l[r].s;if(R[P]>e)N+=D-(1<<O-R[P]),R[P]=e;else break}for(N>>>=k;N>0;){var F=l[r].s;R[F]<e?N-=1<<e-R[F]++-1:++r}for(;r>=0&&N;--r){var L=l[r].s;R[L]==e&&(--R[L],++N)}O=e}return[new an(R),O]},Ag=function(s,e,t){return s.s==-1?Math.max(Ag(s.l,e,t+1),Ag(s.r,e,t+1)):e[s.s]=t},A1=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new Or(++e),r=0,o=s[0],l=1,u=function(m){t[r++]=m},h=1;h<=e;++h)if(s[h]==o&&h!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)u(32754);l>2&&(u(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(u(o),--l;l>6;l-=6)u(8304);l>2&&(u(l-3<<5|8208),l=0)}for(;l--;)u(o);l=1,o=s[h]}return[t.subarray(0,r),e]},$c=function(s,e){for(var t=0,r=0;r<e.length;++r)t+=s[r]*e[r];return t},id=function(s,e,t){var r=t.length,o=nd(e+2);s[o]=r&255,s[o+1]=r>>>8,s[o+2]=s[o]^255,s[o+3]=s[o+1]^255;for(var l=0;l<r;++l)s[o+l+4]=t[l];return(o+4+r)*8},C1=function(s,e,t,r,o,l,u,h,m,v,w){Zs(e,w++,t),++o[256];for(var S=Eg(o,15),A=S[0],R=S[1],O=Eg(l,15),N=O[0],k=O[1],D=A1(A),P=D[0],F=D[1],L=A1(N),z=L[0],H=L[1],X=new Or(19),$=0;$<P.length;++$)X[P[$]&31]++;for(var $=0;$<z.length;++$)X[z[$]&31]++;for(var J=Eg(X,7),se=J[0],ce=J[1],pe=19;pe>4&&!se[ed[pe-1]];--pe);var fe=v+5<<3,b=$c(o,ko)+$c(l,Vc)+u,p=$c(o,A)+$c(l,N)+u+14+3*pe+$c(X,se)+(2*X[16]+3*X[17]+7*X[18]);if(fe<=b&&fe<=p)return id(e,w,s.subarray(m,m+v));var ee,E,me,Se;if(Zs(e,w,1+(p<b)),w+=2,p<b){ee=rs(A,R,0),E=A,me=rs(N,k,0),Se=N;var Te=rs(se,ce,0);Zs(e,w,F-257),Zs(e,w+5,H-1),Zs(e,w+10,pe-4),w+=14;for(var $=0;$<pe;++$)Zs(e,w+3*$,se[ed[$]]);w+=3*pe;for(var ye=[P,z],de=0;de<2;++de)for(var Re=ye[de],$=0;$<Re.length;++$){var we=Re[$]&31;Zs(e,w,Te[we]),w+=se[we],we>15&&(Zs(e,w,Re[$]>>>5&127),w+=Re[$]>>>12)}}else ee=JA,E=ko,me=tC,Se=Vc;for(var $=0;$<h;++$)if(r[$]>255){var we=r[$]>>>18&31;Wc(e,w,ee[we+257]),w+=E[we+257],we>7&&(Zs(e,w,r[$]>>>23&31),w+=Hc[we]);var Ie=r[$]&31;Wc(e,w,me[Ie]),w+=Se[Ie],Ie>3&&(Wc(e,w,r[$]>>>5&8191),w+=Gc[Ie])}else Wc(e,w,ee[r[$]]),w+=E[r[$]];return Wc(e,w,ee[256]),w+E[256]},rC=new Po([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Do=new an(0),iC=function(s,e,t,r,o,l){var u=s.length,h=new an(r+u+5*(1+Math.ceil(u/7e3))+o),m=h.subarray(r,h.length-o),v=0;if(!e||u<8)for(var w=0;w<=u;w+=65535){var S=w+65535;S<u?v=id(m,v,s.subarray(w,S)):(m[w]=l,v=id(m,v,s.subarray(w,u)))}else{for(var A=rC[e-1],R=A>>>13,O=A&8191,N=(1<<t)-1,k=new Or(32768),D=new Or(N+1),P=Math.ceil(t/3),F=2*P,L=function(Ye){return(s[Ye]^s[Ye+1]<<P^s[Ye+2]<<F)&N},z=new Po(25e3),H=new Or(288),X=new Or(32),$=0,J=0,w=0,se=0,ce=0,pe=0;w<u;++w){var fe=L(w),b=w&32767,p=D[fe];if(k[b]=p,D[fe]=b,ce<=w){var ee=u-w;if(($>7e3||se>24576)&&ee>423){v=C1(s,m,0,z,H,X,J,se,pe,w-pe,v),se=$=J=0,pe=w;for(var E=0;E<286;++E)H[E]=0;for(var E=0;E<30;++E)X[E]=0}var me=2,Se=0,Te=O,ye=b-p&32767;if(ee>2&&fe==L(w-ye))for(var de=Math.min(R,ee)-1,Re=Math.min(32767,w),we=Math.min(258,ee);ye<=Re&&--Te&&b!=p;){if(s[w+me]==s[w+me-ye]){for(var Ie=0;Ie<we&&s[w+Ie]==s[w+Ie-ye];++Ie);if(Ie>me){if(me=Ie,Se=ye,Ie>de)break;for(var Me=Math.min(ye,Ie-2),Be=0,E=0;E<Me;++E){var Ve=w-ye+E+32768&32767,qe=k[Ve],W=Ve-qe+32768&32767;W>Be&&(Be=W,p=Ve)}}}b=p,p=k[b],ye+=b-p+32768&32767}if(Se){z[se++]=268435456|Sg[me]<<18|E1[Se];var We=Sg[me]&31,De=E1[Se]&31;J+=Hc[We]+Gc[De],++H[257+We],++X[De],ce=w+me,++$}else z[se++]=s[w],++H[s[w]]}}v=C1(s,m,l,z,H,X,J,se,pe,w-pe,v),!l&&v&7&&(v=id(m,v+1,Do))}return ss(h,0,r+nd(v)+o)},sC=function(){for(var s=new Po(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;s[e]=t}return s}(),jc=function(){var s=-1;return{p:function(e){for(var t=s,r=0;r<e.length;++r)t=sC[t&255^e[r]]^t>>>8;s=t},d:function(){return~s}}},R1=function(){var s=1,e=0;return{p:function(t){for(var r=s,o=e,l=t.length,u=0;u!=l;){for(var h=Math.min(u+2655,l);u<h;++u)o+=r+=t[u];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}s=r,e=o},d:function(){return s%=65521,e%=65521,(s&255)<<24|s>>>8<<16|(e&255)<<8|e>>>8}}},Jl=function(s,e,t,r,o){return iC(s,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):12+e.mem,t,r,!o)},sd=function(s,e){var t={};for(var r in s)t[r]=s[r];for(var r in e)t[r]=e[r];return t},oC=function(s,e,t){for(var r=s(),o=s.toString(),l=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),u=0;u<r.length;++u){var h=r[u],m=l[u];if(typeof h=="function"){e+=";"+m+"=";var v=h.toString();if(h.prototype)if(v.indexOf("[native code]")!=-1){var w=v.indexOf(" ",8)+1;e+=v.slice(w,v.indexOf("(",w))}else{e+=v;for(var S in h.prototype)e+=";"+m+".prototype."+S+"="+h.prototype[S].toString()}else e+=v}else t[m]=h}return[e,t]},Cg=[],j4=function(s){var e=[];for(var t in s)(s[t]instanceof an||s[t]instanceof Or||s[t]instanceof Po)&&e.push((s[t]=new s[t].constructor(s[t])).buffer);return e},aC=function(s,e,t,r){var o;if(!Cg[t]){for(var l="",u={},h=s.length-1,m=0;m<h;++m)o=oC(s[m],l,u),l=o[0],u=o[1];Cg[t]=oC(s[h],l,u)}var v=sd({},Cg[t][1]);return $4(Cg[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,v,j4(v),r)},qc=function(){return[an,Or,Po,Hc,Gc,ed,T1,ZA,eC,nC,td,rs,Mg,is,Tg,nd,ss,rd,Qc,Ca,L1]},Xc=function(){return[an,Or,Po,Hc,Gc,ed,Sg,E1,JA,ko,tC,Vc,td,rC,Do,rs,Zs,Wc,Eg,Ag,A1,$c,id,C1,nd,ss,iC,Jl,od,Ca]},lC=function(){return[P1,D1,gn,jc,sC]},uC=function(){return[k1,hC]},cC=function(){return[O1,gn,R1]},fC=function(){return[dC]},Ca=function(s){return postMessage(s,[s.buffer])},L1=function(s){return s&&s.size&&new an(s.size)},Yc=function(s,e,t,r,o,l){var u=aC(t,r,o,function(h,m){u.terminate(),l(h,m)});return u.postMessage([s,e],e.consume?[s.buffer]:[]),function(){u.terminate()}},os=function(s){return s.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return s.push(e.data[0],e.data[1])}},Kc=function(s,e,t,r,o){var l,u=aC(s,r,o,function(h,m){h?(u.terminate(),e.ondata.call(e,h)):(m[1]&&u.terminate(),e.ondata.call(e,h,m[0],m[1]))});u.postMessage(t),e.push=function(h,m){if(l)throw"stream finished";if(!e.ondata)throw"no stream handler";u.postMessage([h,l=m],[h.buffer])},e.terminate=function(){u.terminate()}},mi=function(s,e){return s[e]|s[e+1]<<8},lr=function(s,e){return(s[e]|s[e+1]<<8|s[e+2]<<16|s[e+3]<<24)>>>0},I1=function(s,e){return lr(s,e)+lr(s,e+4)*4294967296},gn=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8},P1=function(s,e){var t=e.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=e.level<2?4:e.level==9?2:0,s[9]=3,e.mtime!=0&&gn(s,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){s[3]=8;for(var r=0;r<=t.length;++r)s[r+10]=t.charCodeAt(r)}},k1=function(s){if(s[0]!=31||s[1]!=139||s[2]!=8)throw"invalid gzip data";var e=s[3],t=10;e&4&&(t+=s[10]|(s[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!s[t++]);return t+(e&2)},hC=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},D1=function(s){return 10+(s.filename&&s.filename.length+1||0)},O1=function(s,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;s[0]=120,s[1]=r<<6|(r?32-2*r:1)},dC=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function N1(s,e){return!e&&typeof s=="function"&&(e=s,s={}),this.ondata=e,s}var Js=function(){function s(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return s.prototype.p=function(e,t){this.ondata(Jl(e,this.o,0,0,!t),t)},s.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},s}(),pC=function(){function s(e,t){Kc([Xc,function(){return[os,Js]}],this,N1.call(this,e,t),function(r){var o=new Js(r.data);onmessage=os(o)},6)}return s}();function mC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[Xc],function(r){return Ca(od(r.data[0],r.data[1]))},0,t)}function od(s,e){return Jl(s,e||{},0,0)}var Ri=function(){function s(e){this.s={},this.p=new an(0),this.ondata=e}return s.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new an(t+e.length);r.set(this.p),r.set(e,t),this.p=r},s.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=rd(this.p,this.o,this.s);this.ondata(ss(r,t,this.s.b),this.d),this.o=ss(r,this.s.b-32768),this.s.b=this.o.length,this.p=ss(this.p,this.s.p/8|0),this.s.p&=7},s.prototype.push=function(e,t){this.e(e),this.c(t)},s}(),F1=function(){function s(e){this.ondata=e,Kc([qc,function(){return[os,Ri]}],this,0,function(){var t=new Ri;onmessage=os(t)},7)}return s}();function U1(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[qc],function(r){return Ca(Qc(r.data[0],L1(r.data[1])))},1,t)}function Qc(s,e){return rd(s,e)}var Rg=function(){function s(e,t){this.c=jc(),this.l=0,this.v=1,Js.call(this,e,t)}return s.prototype.push=function(e,t){Js.prototype.push.call(this,e,t)},s.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Jl(e,this.o,this.v&&D1(this.o),t&&8,!t);this.v&&(P1(r,this.o),this.v=0),t&&(gn(r,r.length-8,this.c.d()),gn(r,r.length-4,this.l)),this.ondata(r,t)},s}(),gC=function(){function s(e,t){Kc([Xc,lC,function(){return[os,Js,Rg]}],this,N1.call(this,e,t),function(r){var o=new Rg(r.data);onmessage=os(o)},8)}return s}();function vC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[Xc,lC,function(){return[Lg]}],function(r){return Ca(Lg(r.data[0],r.data[1]))},2,t)}function Lg(s,e){e||(e={});var t=jc(),r=s.length;t.p(s);var o=Jl(s,e,D1(e),8),l=o.length;return P1(o,e),gn(o,l-8,t.d()),gn(o,l-4,r),o}var Ig=function(){function s(e){this.v=1,Ri.call(this,e)}return s.prototype.push=function(e,t){if(Ri.prototype.e.call(this,e),this.v){var r=this.p.length>3?k1(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ri.prototype.c.call(this,t)},s}(),yC=function(){function s(e){this.ondata=e,Kc([qc,uC,function(){return[os,Ri,Ig]}],this,0,function(){var t=new Ig;onmessage=os(t)},9)}return s}();function xC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[qc,uC,function(){return[Pg]}],function(r){return Ca(Pg(r.data[0]))},3,t)}function Pg(s,e){return rd(s.subarray(k1(s),-8),e||new an(hC(s)))}var B1=function(){function s(e,t){this.c=R1(),this.v=1,Js.call(this,e,t)}return s.prototype.push=function(e,t){Js.prototype.push.call(this,e,t)},s.prototype.p=function(e,t){this.c.p(e);var r=Jl(e,this.o,this.v&&2,t&&4,!t);this.v&&(O1(r,this.o),this.v=0),t&&gn(r,r.length-4,this.c.d()),this.ondata(r,t)},s}(),q4=function(){function s(e,t){Kc([Xc,cC,function(){return[os,Js,B1]}],this,N1.call(this,e,t),function(r){var o=new B1(r.data);onmessage=os(o)},10)}return s}();function X4(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[Xc,cC,function(){return[z1]}],function(r){return Ca(z1(r.data[0],r.data[1]))},4,t)}function z1(s,e){e||(e={});var t=R1();t.p(s);var r=Jl(s,e,2,4);return O1(r,e),gn(r,r.length-4,t.d()),r}var kg=function(){function s(e){this.v=1,Ri.call(this,e)}return s.prototype.push=function(e,t){if(Ri.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ri.prototype.c.call(this,t)},s}(),_C=function(){function s(e){this.ondata=e,Kc([qc,fC,function(){return[os,Ri,kg]}],this,0,function(){var t=new kg;onmessage=os(t)},11)}return s}();function wC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Yc(s,e,[qc,fC,function(){return[ad]}],function(r){return Ca(ad(r.data[0],L1(r.data[1])))},5,t)}function ad(s,e){return rd((dC(s),s.subarray(2,-4)),e)}var bC=function(){function s(e){this.G=Ig,this.I=Ri,this.Z=kg,this.ondata=e}return s.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new an(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,l=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(l):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(l):new this.Z(l),this.s.push(this.p,t),this.p=null}}},s}(),Y4=function(){function s(e){this.G=yC,this.I=F1,this.Z=_C,this.ondata=e}return s.prototype.push=function(e,t){bC.prototype.push.call(this,e,t)},s}();function K4(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return s[0]==31&&s[1]==139&&s[2]==8?xC(s,e,t):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?U1(s,e,t):wC(s,e,t)}function Q4(s,e){return s[0]==31&&s[1]==139&&s[2]==8?Pg(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Qc(s,e):ad(s,e)}var H1=function(s,e,t,r){for(var o in s){var l=s[o],u=e+o;l instanceof an?t[u]=[l,r]:Array.isArray(l)?t[u]=[l[0],sd(r,l[1])]:H1(l,u+"/",t,r)}},SC=typeof TextEncoder!="undefined"&&new TextEncoder,G1=typeof TextDecoder!="undefined"&&new TextDecoder,MC=0;try{G1.decode(Do,{stream:!0}),MC=1}catch{}var TC=function(s){for(var e="",t=0;;){var r=s[t++],o=(r>127)+(r>223)+(r>239);if(t+o>s.length)return[e,ss(s,t-1)];o?o==3?(r=((r&15)<<18|(s[t++]&63)<<12|(s[t++]&63)<<6|s[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?e+=String.fromCharCode((r&31)<<6|s[t++]&63):e+=String.fromCharCode((r&15)<<12|(s[t++]&63)<<6|s[t++]&63):e+=String.fromCharCode(r)}},Z4=function(){function s(e){this.ondata=e,MC?this.t=new TextDecoder:this.p=Do}return s.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new an(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=TC(r),l=o[0],u=o[1];if(t){if(u.length)throw"invalid utf-8 data";this.p=null}else this.p=u;this.ondata(l,t)},s}(),J4=function(){function s(e){this.ondata=e}return s.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Ra(e),this.d=t||!1)},s}();function Ra(s,e){if(e){for(var t=new an(s.length),r=0;r<s.length;++r)t[r]=s.charCodeAt(r);return t}if(SC)return SC.encode(s);for(var o=s.length,l=new an(s.length+(s.length>>1)),u=0,h=function(w){l[u++]=w},r=0;r<o;++r){if(u+5>l.length){var m=new an(u+8+(o-r<<1));m.set(l),l=m}var v=s.charCodeAt(r);v<128||e?h(v):v<2048?(h(192|v>>6),h(128|v&63)):v>55295&&v<57344?(v=65536+(v&1023<<10)|s.charCodeAt(++r)&1023,h(240|v>>18),h(128|v>>12&63),h(128|v>>6&63),h(128|v&63)):(h(224|v>>12),h(128|v>>6&63),h(128|v&63))}return ss(l,0,u)}function V1(s,e){if(e){for(var t="",r=0;r<s.length;r+=16384)t+=String.fromCharCode.apply(null,s.subarray(r,r+16384));return t}else{if(G1)return G1.decode(s);var o=TC(s),l=o[0],u=o[1];if(u.length)throw"invalid utf-8 data";return l}}var EC=function(s){return s==1?3:s<6?2:s==9?1:0},AC=function(s,e){return e+30+mi(s,e+26)+mi(s,e+28)},CC=function(s,e,t){var r=mi(s,e+28),o=V1(s.subarray(e+46,e+46+r),!(mi(s,e+8)&2048)),l=e+46+r,u=lr(s,e+20),h=t&&u==4294967295?RC(s,l):[u,lr(s,e+24),lr(s,e+42)],m=h[0],v=h[1],w=h[2];return[mi(s,e+10),m,v,o,l+mi(s,e+30)+mi(s,e+32),w]},RC=function(s,e){for(;mi(s,e)!=1;e+=4+mi(s,e+2));return[I1(s,e+12),I1(s,e+4),I1(s,e+20)]},La=function(s){var e=0;if(s)for(var t in s){var r=s[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},Zc=function(s,e,t,r,o,l,u,h){var m=r.length,v=t.extra,w=h&&h.length,S=La(v);gn(s,e,u!=null?33639248:67324752),e+=4,u!=null&&(s[e++]=20,s[e++]=t.os),s[e]=20,e+=2,s[e++]=t.flag<<1|(l==null&&8),s[e++]=o&&8,s[e++]=t.compression&255,s[e++]=t.compression>>8;var A=new Date(t.mtime==null?Date.now():t.mtime),R=A.getFullYear()-1980;if(R<0||R>119)throw"date not in range 1980-2099";if(gn(s,e,R<<25|A.getMonth()+1<<21|A.getDate()<<16|A.getHours()<<11|A.getMinutes()<<5|A.getSeconds()>>>1),e+=4,l!=null&&(gn(s,e,t.crc),gn(s,e+4,l),gn(s,e+8,t.size)),gn(s,e+12,m),gn(s,e+14,S),e+=16,u!=null&&(gn(s,e,w),gn(s,e+6,t.attrs),gn(s,e+10,u),e+=14),s.set(r,e),e+=m,S)for(var O in v){var N=v[O],k=N.length;gn(s,e,+O),gn(s,e+2,k),s.set(N,e+4),e+=4+k}return w&&(s.set(h,e),e+=w),e},W1=function(s,e,t,r,o){gn(s,e,101010256),gn(s,e+8,t),gn(s,e+10,t),gn(s,e+12,r),gn(s,e+16,o)},ld=function(){function s(e){this.filename=e,this.c=jc(),this.size=0,this.compression=0}return s.prototype.process=function(e,t){this.ondata(null,e,t)},s.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},s}(),ez=function(){function s(e,t){var r=this;t||(t={}),ld.call(this,e),this.d=new Js(t,function(o,l){r.ondata(null,o,l)}),this.compression=8,this.flag=EC(t.level)}return s.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},s.prototype.push=function(e,t){ld.prototype.push.call(this,e,t)},s}(),tz=function(){function s(e,t){var r=this;t||(t={}),ld.call(this,e),this.d=new pC(t,function(o,l,u){r.ondata(o,l,u)}),this.compression=8,this.flag=EC(t.level),this.terminate=this.d.terminate}return s.prototype.process=function(e,t){this.d.push(e,t)},s.prototype.push=function(e,t){ld.prototype.push.call(this,e,t)},s}(),nz=function(){function s(e){this.ondata=e,this.u=[],this.d=1}return s.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=Ra(e.filename),o=r.length,l=e.comment,u=l&&Ra(l),h=o!=e.filename.length||u&&l.length!=u.length,m=o+La(e.extra)+30;if(o>65535)throw"filename too long";var v=new an(m);Zc(v,0,e,r,h);var w=[v],S=function(){for(var k=0,D=w;k<D.length;k++){var P=D[k];t.ondata(null,P,!1)}w=[]},A=this.d;this.d=0;var R=this.u.length,O=sd(e,{f:r,u:h,o:u,t:function(){e.terminate&&e.terminate()},r:function(){if(S(),A){var k=t.u[R+1];k?k.r():t.d=1}A=1}}),N=0;e.ondata=function(k,D,P){if(k)t.ondata(k,D,P),t.terminate();else if(N+=D.length,w.push(D),P){var F=new an(16);gn(F,0,134695760),gn(F,4,e.crc),gn(F,8,N),gn(F,12,e.size),w.push(F),O.c=N,O.b=m+N+16,O.crc=e.crc,O.size=e.size,A&&O.r(),A=1}else A&&S()},this.u.push(O)},s.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(e.d&1)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},s.prototype.e=function(){for(var e=0,t=0,r=0,o=0,l=this.u;o<l.length;o++){var u=l[o];r+=46+u.f.length+La(u.extra)+(u.o?u.o.length:0)}for(var h=new an(r+22),m=0,v=this.u;m<v.length;m++){var u=v[m];Zc(h,e,u,u.f,u.u,u.c,t,u.o),e+=46+u.f.length+La(u.extra)+(u.o?u.o.length:0),t+=u.b}W1(h,e,this.u.length,r,t),this.ondata(null,h,!0),this.d=2},s.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},s}();function rz(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};H1(s,"",r,e);var o=Object.keys(r),l=o.length,u=0,h=0,m=l,v=new Array(l),w=[],S=function(){for(var N=0;N<w.length;++N)w[N]()},A=function(){var N=new an(h+22),k=u,D=h-u;h=0;for(var P=0;P<m;++P){var F=v[P];try{var L=F.c.length;Zc(N,h,F,F.f,F.u,L);var z=30+F.f.length+La(F.extra),H=h+z;N.set(F.c,H),Zc(N,u,F,F.f,F.u,L,h,F.m),u+=16+z+(F.m?F.m.length:0),h=H+L}catch(X){return t(X,null)}}W1(N,u,v.length,D,k),t(null,N)};l||A();for(var R=function(N){var k=o[N],D=r[k],P=D[0],F=D[1],L=jc(),z=P.length;L.p(P);var H=Ra(k),X=H.length,$=F.comment,J=$&&Ra($),se=J&&J.length,ce=La(F.extra),pe=F.level==0?0:8,fe=function(b,p){if(b)S(),t(b,null);else{var ee=p.length;v[N]=sd(F,{size:z,crc:L.d(),c:p,f:H,m:J,u:X!=k.length||J&&$.length!=se,compression:pe}),u+=30+X+ce+ee,h+=76+2*(X+ce)+(se||0)+ee,--l||A()}};if(X>65535&&fe("filename too long",null),!pe)fe(null,P);else if(z<16e4)try{fe(null,od(P,F))}catch(b){fe(b,null)}else w.push(mC(P,F,fe))},O=0;O<m;++O)R(O);return S}function iz(s,e){e||(e={});var t={},r=[];H1(s,"",t,e);var o=0,l=0;for(var u in t){var h=t[u],m=h[0],v=h[1],w=v.level==0?0:8,S=Ra(u),A=S.length,R=v.comment,O=R&&Ra(R),N=O&&O.length,k=La(v.extra);if(A>65535)throw"filename too long";var D=w?od(m,v):m,P=D.length,F=jc();F.p(m),r.push(sd(v,{size:m.length,crc:F.d(),c:D,f:S,m:O,u:A!=u.length||O&&R.length!=N,o,compression:w})),o+=30+A+k+P,l+=76+2*(A+k)+(N||0)+P}for(var L=new an(l+22),z=o,H=l-o,X=0;X<r.length;++X){var S=r[X];Zc(L,S.o,S,S.f,S.u,S.c.length);var $=30+S.f.length+La(S.extra);L.set(S.c,S.o+$),Zc(L,o,S,S.f,S.u,S.c.length,S.o,S.m),o+=16+$+(S.m?S.m.length:0)}return W1(L,o,r.length,H,z),L}var LC=function(){function s(){}return s.prototype.push=function(e,t){this.ondata(null,e,t)},s.compression=0,s}(),sz=function(){function s(){var e=this;this.i=new Ri(function(t,r){e.ondata(null,t,r)})}return s.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},s.compression=8,s}(),oz=function(){function s(e,t){var r=this;t<32e4?this.i=new Ri(function(o,l){r.ondata(null,o,l)}):(this.i=new F1(function(o,l,u){r.ondata(o,l,u)}),this.terminate=this.i.terminate)}return s.prototype.push=function(e,t){this.i.terminate&&(e=ss(e,0)),this.i.push(e,t)},s.compression=8,s}(),az=function(){function s(e){this.onfile=e,this.k=[],this.o={0:LC},this.p=Do}return s.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),l=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(l,!this.c):this.k[0].push(l),e=e.subarray(o),e.length)return this.push(e,t)}else{var u=0,h=0,m=void 0,v=void 0;this.p.length?e.length?(v=new an(this.p.length+e.length),v.set(this.p),v.set(e,this.p.length)):v=this.p:v=e;for(var w=v.length,S=this.c,A=S&&this.d,R=function(){var D,P=lr(v,h);if(P==67324752){u=1,m=h,O.d=null,O.c=0;var F=mi(v,h+6),L=mi(v,h+8),z=F&2048,H=F&8,X=mi(v,h+26),$=mi(v,h+28);if(w>h+30+X+$){var J=[];O.k.unshift(J),u=2;var se=lr(v,h+18),ce=lr(v,h+22),pe=V1(v.subarray(h+30,h+=30+X),!z);se==4294967295?(D=H?[-2]:RC(v,h),se=D[0],ce=D[1]):H&&(se=-1),h+=$,O.c=se;var fe,b={name:pe,compression:L,start:function(){if(!b.ondata)throw"no callback";if(!se)b.ondata(null,Do,!0);else{var p=r.o[L];if(!p)throw"unknown compression type "+L;fe=se<0?new p(pe):new p(pe,se,ce),fe.ondata=function(Se,Te,ye){b.ondata(Se,Te,ye)};for(var ee=0,E=J;ee<E.length;ee++){var me=E[ee];fe.push(me,!1)}r.k[0]==J&&r.c?r.d=fe:fe.push(Do,!0)}},terminate:function(){fe&&fe.terminate&&fe.terminate()}};se>=0&&(b.size=se,b.originalSize=ce),O.onfile(b)}return"break"}else if(S){if(P==134695760)return m=h+=12+(S==-2&&8),u=3,O.c=0,"break";if(P==33639248)return m=h-=4,u=3,O.c=0,"break"}},O=this;h<w-4;++h){var N=R();if(N==="break")break}if(this.p=Do,S<0){var k=u?v.subarray(0,m-12-(S==-2&&8)-(lr(v,m-16)==134695760&&4)):v.subarray(0,h);A?A.push(k,!!u):this.k[+(u==2)].push(k)}if(u&2)return this.push(v.subarray(h),t);this.p=v.subarray(h)}if(t){if(this.c)throw"invalid zip file";this.p=null}},s.prototype.register=function(e){this.o[e.compression]=e},s}();function lz(s,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var A=0;A<t.length;++A)t[A]()},o={},l=s.length-22;lr(s,l)!=101010256;--l)if(!l||s.length-l>65558){e("invalid zip file",null);return}var u=mi(s,l+8);u||e(null,{});var h=u,m=lr(s,l+16),v=m==4294967295;if(v){if(l=lr(s,l-12),lr(s,l)!=101075792){e("invalid zip file",null);return}h=u=lr(s,l+32),m=lr(s,l+48)}for(var w=function(A){var R=CC(s,m,v),O=R[0],N=R[1],k=R[2],D=R[3],P=R[4],F=R[5],L=AC(s,F);m=P;var z=function(X,$){X?(r(),e(X,null)):(o[D]=$,--u||e(null,o))};if(!O)z(null,ss(s,L,L+N));else if(O==8){var H=s.subarray(L,L+N);if(N<32e4)try{z(null,Qc(H,new an(k)))}catch(X){z(X,null)}else t.push(U1(H,{size:k},z))}else z("unknown compression type "+O,null)},S=0;S<h;++S)w();return r}function uz(s){for(var e={},t=s.length-22;lr(s,t)!=101010256;--t)if(!t||s.length-t>65558)throw"invalid zip file";var r=mi(s,t+8);if(!r)return{};var o=lr(s,t+16),l=o==4294967295;if(l){if(t=lr(s,t-12),lr(s,t)!=101075792)throw"invalid zip file";r=lr(s,t+32),o=lr(s,t+48)}for(var u=0;u<r;++u){var h=CC(s,o,l),m=h[0],v=h[1],w=h[2],S=h[3],A=h[4],R=h[5],O=AC(s,R);if(o=A,!m)e[S]=ss(s,O,O+v);else if(m==8)e[S]=Qc(s.subarray(O,O+v),new an(w));else throw"unknown compression type "+m}return e}var cz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Deflate:Js,AsyncDeflate:pC,deflate:mC,deflateSync:od,Inflate:Ri,AsyncInflate:F1,inflate:U1,inflateSync:Qc,Gzip:Rg,AsyncGzip:gC,gzip:vC,gzipSync:Lg,Gunzip:Ig,AsyncGunzip:yC,gunzip:xC,gunzipSync:Pg,Zlib:B1,AsyncZlib:q4,zlib:X4,zlibSync:z1,Unzlib:kg,AsyncUnzlib:_C,unzlib:wC,unzlibSync:ad,compress:vC,AsyncCompress:gC,compressSync:Lg,Compress:Rg,Decompress:bC,AsyncDecompress:Y4,decompress:K4,decompressSync:Q4,DecodeUTF8:Z4,EncodeUTF8:J4,strToU8:Ra,strFromU8:V1,ZipPassThrough:ld,ZipDeflate:ez,AsyncZipDeflate:tz,Zip:nz,zip:rz,zipSync:iz,UnzipPassThrough:LC,UnzipInflate:sz,AsyncUnzipInflate:oz,Unzip:az,unzip:lz,unzipSync:uz});function IC(s,e,t){const r=t.length-s-1;if(e>=t[r])return r-1;if(e<=t[s])return s;let o=s,l=r,u=Math.floor((o+l)/2);for(;e<t[u]||e>=t[u+1];)e<t[u]?l=u:o=u,u=Math.floor((o+l)/2);return u}function fz(s,e,t,r){const o=[],l=[],u=[];o[0]=1;for(let h=1;h<=t;++h){l[h]=e-r[s+1-h],u[h]=r[s+h]-e;let m=0;for(let v=0;v<h;++v){const w=u[v+1],S=l[h-v],A=o[v]/(w+S);o[v]=m+w*A,m=S*A}o[h]=m}return o}function hz(s,e,t,r){const o=IC(s,r,e),l=fz(o,r,s,e),u=new ln(0,0,0,0);for(let h=0;h<=s;++h){const m=t[o-s+h],v=l[h],w=m.w*v;u.x+=m.x*w,u.y+=m.y*w,u.z+=m.z*w,u.w+=m.w*v}return u}function dz(s,e,t,r,o){const l=[];for(let S=0;S<=t;++S)l[S]=0;const u=[];for(let S=0;S<=r;++S)u[S]=l.slice(0);const h=[];for(let S=0;S<=t;++S)h[S]=l.slice(0);h[0][0]=1;const m=l.slice(0),v=l.slice(0);for(let S=1;S<=t;++S){m[S]=e-o[s+1-S],v[S]=o[s+S]-e;let A=0;for(let R=0;R<S;++R){const O=v[R+1],N=m[S-R];h[S][R]=O+N;const k=h[R][S-1]/h[S][R];h[R][S]=A+O*k,A=N*k}h[S][S]=A}for(let S=0;S<=t;++S)u[0][S]=h[S][t];for(let S=0;S<=t;++S){let A=0,R=1;const O=[];for(let N=0;N<=t;++N)O[N]=l.slice(0);O[0][0]=1;for(let N=1;N<=r;++N){let k=0;const D=S-N,P=t-N;S>=N&&(O[R][0]=O[A][0]/h[P+1][D],k=O[R][0]*h[D][P]);const F=D>=-1?1:-D,L=S-1<=P?N-1:t-S;for(let H=F;H<=L;++H)O[R][H]=(O[A][H]-O[A][H-1])/h[P+1][D+H],k+=O[R][H]*h[D+H][P];S<=P&&(O[R][N]=-O[A][N-1]/h[P+1][S],k+=O[R][N]*h[S][P]),u[N][S]=k;const z=A;A=R,R=z}}let w=t;for(let S=1;S<=r;++S){for(let A=0;A<=t;++A)u[S][A]*=w;w*=t-S}return u}function pz(s,e,t,r,o){const l=o<s?o:s,u=[],h=IC(s,r,e),m=dz(h,r,s,l,e),v=[];for(let w=0;w<t.length;++w){const S=t[w].clone(),A=S.w;S.x*=A,S.y*=A,S.z*=A,v[w]=S}for(let w=0;w<=l;++w){const S=v[h-s].clone().multiplyScalar(m[w][0]);for(let A=1;A<=s;++A)S.add(v[h-s+A].clone().multiplyScalar(m[w][A]));u[w]=S}for(let w=l+1;w<=o+1;++w)u[w]=new ln(0,0,0);return u}function mz(s,e){let t=1;for(let o=2;o<=s;++o)t*=o;let r=1;for(let o=2;o<=e;++o)r*=o;for(let o=2;o<=s-e;++o)r*=o;return t/r}function gz(s){const e=s.length,t=[],r=[];for(let l=0;l<e;++l){const u=s[l];t[l]=new le(u.x,u.y,u.z),r[l]=u.w}const o=[];for(let l=0;l<e;++l){const u=t[l].clone();for(let h=1;h<=l;++h)u.sub(o[l-h].clone().multiplyScalar(mz(l,h)*r[h]));o[l]=u.divideScalar(r[0])}return o}function vz(s,e,t,r,o){const l=pz(s,e,t,r,o);return gz(l)}class PC extends Ai{constructor(e,t,r,o,l){super();this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=o||0,this.endKnot=l||this.knots.length-1;for(let u=0;u<r.length;++u){const h=r[u];this.controlPoints[u]=new ln(h.x,h.y,h.z,h.w)}}getPoint(e,t=new le){const r=t,o=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),l=hz(this.degree,this.knots,this.controlPoints,o);return l.w!==1&&l.divideScalar(l.w),r.set(l.x,l.y,l.z)}getTangent(e,t=new le){const r=t,o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=vz(this.degree,this.knots,this.controlPoints,o,1);return r.copy(l[1]).normalize(),r}}let nn,ur,Li;class VV extends Dr{constructor(e){super(e)}load(e,t,r,o){const l=this,u=l.path===""?Ci.extractUrlBase(e):l.path,h=new pi(this.manager);h.setPath(l.path),h.setResponseType("arraybuffer"),h.setRequestHeader(l.requestHeader),h.setWithCredentials(l.withCredentials),h.load(e,function(m){try{t(l.parse(m,u))}catch(v){o?o(v):console.error(v),l.manager.itemError(e)}},r,o)}parse(e,t){if(Sz(e))nn=new bz().parse(e);else{const o=UC(e);if(!Mz(o))throw new Error("THREE.FBXLoader: Unknown format.");if(OC(o)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+OC(o));nn=new wz().parse(o)}const r=new dg(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new yz(r,this.manager).parse(nn)}}class yz{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){ur=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),o=this.parseDeformers(),l=new xz().parse(o);return this.parseScene(o,l,r),Li}parseConnections(){const e=new Map;return"Connections"in nn&&nn.Connections.connections.forEach(function(r){const o=r[0],l=r[1],u=r[2];e.has(o)||e.set(o,{parents:[],children:[]});const h={ID:l,relationship:u};e.get(o).parents.push(h),e.has(l)||e.set(l,{parents:[],children:[]});const m={ID:o,relationship:u};e.get(l).children.push(m)}),e}parseImages(){const e={},t={};if("Video"in nn.Objects){const r=nn.Objects.Video;for(const o in r){const l=r[o],u=parseInt(o);if(e[u]=l.RelativeFilename||l.Filename,"Content"in l){const h=l.Content instanceof ArrayBuffer&&l.Content.byteLength>0,m=typeof l.Content=="string"&&l.Content!=="";if(h||m){const v=this.parseImage(r[o]);t[l.RelativeFilename||l.Filename]=v}}}}for(const r in e){const o=e[r];t[o]!==void 0?e[r]=t[o]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,o=r.slice(r.lastIndexOf(".")+1).toLowerCase();let l;switch(o){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),l="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if(typeof t=="string")return"data:"+l+";base64,"+t;{const u=new Uint8Array(t);return window.URL.createObjectURL(new Blob([u],{type:l}))}}parseTextures(e){const t=new Map;if("Texture"in nn.Objects){const r=nn.Objects.Texture;for(const o in r){const l=this.parseTexture(r[o],e);t.set(parseInt(o),l)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const o=e.WrapModeU,l=e.WrapModeV,u=o!==void 0?o.value:0,h=l!==void 0?l.value:0;if(r.wrapS=u===0?Ws:Lr,r.wrapT=h===0?Ws:Lr,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}if("Translation"in e){const m=e.Translation.value;r.offset.x=m[0],r.offset.y=m[1]}return r}loadTexture(e,t){let r;const o=this.textureLoader.path,l=ur.get(e.id).children;l!==void 0&&l.length>0&&t[l[0].ID]!==void 0&&(r=t[l[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),u=new Un):(m.setPath(this.textureLoader.path),u=m.load(r))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),u=new Un):u=this.textureLoader.load(r);return this.textureLoader.setPath(o),u}parseMaterials(e){const t=new Map;if("Material"in nn.Objects){const r=nn.Objects.Material;for(const o in r){const l=this.parseMaterial(r[o],e);l!==null&&t.set(parseInt(o),l)}}return t}parseMaterial(e,t){const r=e.id,o=e.attrName;let l=e.ShadingModel;if(typeof l=="object"&&(l=l.value),!ur.has(r))return null;const u=this.parseParameters(e,t,r);let h;switch(l.toLowerCase()){case"phong":h=new Nc;break;case"lambert":h=new hg;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),h=new Nc;break}return h.setValues(u),h.name=o,h}parseParameters(e,t,r){const o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=new Qe().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(o.color=new Qe().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=new Qe().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(o.emissive=new Qe().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=new Qe().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(o.specular=new Qe().fromArray(e.SpecularColor.value));const l=this;return ur.get(r).children.forEach(function(u){const h=u.relationship;switch(h){case"Bump":o.bumpMap=l.getTexture(t,u.ID);break;case"Maya|TEX_ao_map":o.aoMap=l.getTexture(t,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=l.getTexture(t,u.ID),o.map!==void 0&&(o.map.encoding=Xt);break;case"DisplacementColor":o.displacementMap=l.getTexture(t,u.ID);break;case"EmissiveColor":o.emissiveMap=l.getTexture(t,u.ID),o.emissiveMap!==void 0&&(o.emissiveMap.encoding=Xt);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=l.getTexture(t,u.ID);break;case"ReflectionColor":o.envMap=l.getTexture(t,u.ID),o.envMap!==void 0&&(o.envMap.mapping=qu,o.envMap.encoding=Xt);break;case"SpecularColor":o.specularMap=l.getTexture(t,u.ID),o.specularMap!==void 0&&(o.specularMap.encoding=Xt);break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=l.getTexture(t,u.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),o}getTexture(e,t){return"LayeredTexture"in nn.Objects&&t in nn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ur.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in nn.Objects){const r=nn.Objects.Deformer;for(const o in r){const l=r[o],u=ur.get(parseInt(o));if(l.attrType==="Skin"){const h=this.parseSkeleton(u,r);h.ID=o,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=u.parents[0].ID,e[o]=h}else if(l.attrType==="BlendShape"){const h={id:o};h.rawTargets=this.parseMorphTargets(u,r),h.id=o,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[o]=h}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(o){const l=t[o.ID];if(l.attrType!=="Cluster")return;const u={ID:o.ID,indices:[],weights:[],transformLink:new et().fromArray(l.TransformLink.a)};"Indexes"in l&&(u.indices=l.Indexes.a,u.weights=l.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let o=0;o<e.children.length;o++){const l=e.children[o],u=t[l.ID],h={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;h.geoID=ur.get(parseInt(l.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(h)}return r}parseScene(e,t,r){Li=new Vr;const o=this.parseModels(e.skeletons,t,r),l=nn.Objects.Model,u=this;o.forEach(function(m){const v=l[m.ID];u.setLookAtProperties(m,v),ur.get(m.ID).parents.forEach(function(S){const A=o.get(S.ID);A!==void 0&&A.add(m)}),m.parent===null&&Li.add(m)}),this.bindSkeleton(e.skeletons,t,o),this.createAmbientLight(),Li.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const v=NC(m.userData.transformData);m.applyMatrix4(v),m.updateWorldMatrix()}});const h=new _z().parse();Li.children.length===1&&Li.children[0].isGroup&&(Li.children[0].animations=h,Li=Li.children[0]),Li.animations=h}parseModels(e,t,r){const o=new Map,l=nn.Objects.Model;for(const u in l){const h=parseInt(u),m=l[u],v=ur.get(h);let w=this.buildSkeleton(v,e,h,m.attrName);if(!w){switch(m.attrType){case"Camera":w=this.createCamera(v);break;case"Light":w=this.createLight(v);break;case"Mesh":w=this.createMesh(v,t,r);break;case"NurbsCurve":w=this.createCurve(v,t);break;case"LimbNode":case"Root":w=new Dl;break;case"Null":default:w=new Vr;break}w.name=m.attrName?Jt.sanitizeNodeName(m.attrName):"",w.ID=h}this.getTransformData(w,m),o.set(h,w)}return o}buildSkeleton(e,t,r,o){let l=null;return e.parents.forEach(function(u){for(const h in t){const m=t[h];m.rawBones.forEach(function(v,w){if(v.ID===u.ID){const S=l;l=new Dl,l.matrixWorld.copy(v.transformLink),l.name=o?Jt.sanitizeNodeName(o):"",l.ID=r,m.bones[w]=l,S!==null&&l.add(S)}})}}),l}createCamera(e){let t,r;if(e.children.forEach(function(o){const l=nn.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Ht;else{let o=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(o=1);let l=1;r.NearPlane!==void 0&&(l=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(h=r.AspectWidth.value,m=r.AspectHeight.value);const v=h/m;let w=45;r.FieldOfView!==void 0&&(w=r.FieldOfView.value);const S=r.FocalLength?r.FocalLength.value:null;switch(o){case 0:t=new mr(w,v,l,u),S!==null&&t.setFocalLength(S);break;case 1:t=new Ll(-h/2,h/2,m/2,-m/2,l,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),t=new Ht;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(o){const l=nn.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Ht;else{let o;r.LightType===void 0?o=0:o=r.LightType.value;let l=16777215;r.Color!==void 0&&(l=new Qe().fromArray(r.Color.value));let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let h=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?h=0:h=r.FarAttenuationEnd.value);const m=1;switch(o){case 0:t=new Uc(l,u,h,m);break;case 1:t=new Yh(l,u);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=hn.degToRad(r.InnerAngle.value));let w=0;r.OuterAngle!==void 0&&(w=hn.degToRad(r.OuterAngle.value),w=Math.max(w,1)),t=new qh(l,u,h,v,w,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new Uc(l,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let o,l=null,u=null;const h=[];return e.children.forEach(function(m){t.has(m.ID)&&(l=t.get(m.ID)),r.has(m.ID)&&h.push(r.get(m.ID))}),h.length>1?u=h:h.length>0?u=h[0]:(u=new Nc({color:13421772}),h.push(u)),"color"in l.attributes&&h.forEach(function(m){m.vertexColors=!0}),l.FBX_Deformer?(o=new kl(l,u),o.normalizeSkinWeights()):o=new ot(l,u),o}createCurve(e,t){const r=e.children.reduce(function(l,u){return t.has(u.ID)&&(l=t.get(u.ID)),l},null),o=new Pn({color:3342591,linewidth:1});return new gr(r,o)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=FC(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&ur.get(e.ID).children.forEach(function(o){if(o.relationship==="LookAtProperty"){const l=nn.Objects.Model[o.ID];if("Lcl_Translation"in l){const u=l.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),Li.add(e.target)):e.lookAt(new le().fromArray(u))}}})}bindSkeleton(e,t,r){const o=this.parsePoseNodes();for(const l in e){const u=e[l];ur.get(parseInt(u.ID)).parents.forEach(function(m){if(t.has(m.ID)){const v=m.ID;ur.get(v).parents.forEach(function(S){r.has(S.ID)&&r.get(S.ID).bind(new wa(u.bones),o[S.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in nn.Objects){const t=nn.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const o=t[r].PoseNode;Array.isArray(o)?o.forEach(function(l){e[l.Node]=new et().fromArray(l.Matrix.a)}):e[o.Node]=new et().fromArray(o.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in nn&&"AmbientColor"in nn.GlobalSettings){const e=nn.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],o=e[2];if(t!==0||r!==0||o!==0){const l=new Qe(t,r,o);Li.add(new pg(l,1))}}}}class xz{parse(e){const t=new Map;if("Geometry"in nn.Objects){const r=nn.Objects.Geometry;for(const o in r){const l=ur.get(parseInt(o)),u=this.parseGeometry(l,r[o],e);t.set(parseInt(o),u)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const o=r.skeletons,l=[],u=e.parents.map(function(S){return nn.Objects.Model[S.ID]});if(u.length===0)return;const h=e.children.reduce(function(S,A){return o[A.ID]!==void 0&&(S=o[A.ID]),S},null);e.children.forEach(function(S){r.morphTargets[S.ID]!==void 0&&l.push(r.morphTargets[S.ID])});const m=u[0],v={};"RotationOrder"in m&&(v.eulerOrder=FC(m.RotationOrder.value)),"InheritType"in m&&(v.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(v.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(v.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(v.scale=m.GeometricScaling.value);const w=NC(v);return this.genGeometry(t,h,l,w)}genGeometry(e,t,r,o){const l=new xt;e.attrName&&(l.name=e.attrName);const u=this.parseGeoNode(e,t),h=this.genBuffers(u),m=new mt(h.vertex,3);if(m.applyMatrix4(o),l.setAttribute("position",m),h.colors.length>0&&l.setAttribute("color",new mt(h.colors,3)),t&&(l.setAttribute("skinIndex",new Rh(h.weightsIndices,4)),l.setAttribute("skinWeight",new mt(h.vertexWeights,4)),l.FBX_Deformer=t),h.normal.length>0){const v=new yn().getNormalMatrix(o),w=new mt(h.normal,3);w.applyNormalMatrix(v),l.setAttribute("normal",w)}if(h.uvs.forEach(function(v,w){let S="uv"+(w+1).toString();w===0&&(S="uv"),l.setAttribute(S,new mt(h.uvs[w],2))}),u.material&&u.material.mappingType!=="AllSame"){let v=h.materialIndex[0],w=0;if(h.materialIndex.forEach(function(S,A){S!==v&&(l.addGroup(w,A-w,v),v=S,w=A)}),l.groups.length>0){const S=l.groups[l.groups.length-1],A=S.start+S.count;A!==h.materialIndex.length&&l.addGroup(A,h.materialIndex.length-A,v)}l.groups.length===0&&l.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(l,e,r,o),l}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let o=0;for(;e.LayerElementUV[o];)e.LayerElementUV[o].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[o])),o++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(o,l){o.indices.forEach(function(u,h){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:l,weight:o.weights[h]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,o=0,l=!1,u=[],h=[],m=[],v=[],w=[],S=[];const A=this;return e.vertexIndices.forEach(function(R,O){let N,k=!1;R<0&&(R=R^-1,k=!0);let D=[],P=[];if(u.push(R*3,R*3+1,R*3+2),e.color){const F=Dg(O,r,R,e.color);m.push(F[0],F[1],F[2])}if(e.skeleton){if(e.weightTable[R]!==void 0&&e.weightTable[R].forEach(function(F){P.push(F.weight),D.push(F.id)}),P.length>4){l||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),l=!0);const F=[0,0,0,0],L=[0,0,0,0];P.forEach(function(z,H){let X=z,$=D[H];L.forEach(function(J,se,ce){if(X>J){ce[se]=X,X=J;const pe=F[se];F[se]=$,$=pe}})}),D=F,P=L}for(;P.length<4;)P.push(0),D.push(0);for(let F=0;F<4;++F)w.push(P[F]),S.push(D[F])}if(e.normal){const F=Dg(O,r,R,e.normal);h.push(F[0],F[1],F[2])}e.material&&e.material.mappingType!=="AllSame"&&(N=Dg(O,r,R,e.material)[0]),e.uv&&e.uv.forEach(function(F,L){const z=Dg(O,r,R,F);v[L]===void 0&&(v[L]=[]),v[L].push(z[0]),v[L].push(z[1])}),o++,k&&(A.genFace(t,e,u,N,h,m,v,w,S,o),r++,o=0,u=[],h=[],m=[],v=[],w=[],S=[])}),t}genFace(e,t,r,o,l,u,h,m,v,w){for(let S=2;S<w;S++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(S-1)*3]]),e.vertex.push(t.vertexPositions[r[(S-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(S-1)*3+2]]),e.vertex.push(t.vertexPositions[r[S*3]]),e.vertex.push(t.vertexPositions[r[S*3+1]]),e.vertex.push(t.vertexPositions[r[S*3+2]]),t.skeleton&&(e.vertexWeights.push(m[0]),e.vertexWeights.push(m[1]),e.vertexWeights.push(m[2]),e.vertexWeights.push(m[3]),e.vertexWeights.push(m[(S-1)*4]),e.vertexWeights.push(m[(S-1)*4+1]),e.vertexWeights.push(m[(S-1)*4+2]),e.vertexWeights.push(m[(S-1)*4+3]),e.vertexWeights.push(m[S*4]),e.vertexWeights.push(m[S*4+1]),e.vertexWeights.push(m[S*4+2]),e.vertexWeights.push(m[S*4+3]),e.weightsIndices.push(v[0]),e.weightsIndices.push(v[1]),e.weightsIndices.push(v[2]),e.weightsIndices.push(v[3]),e.weightsIndices.push(v[(S-1)*4]),e.weightsIndices.push(v[(S-1)*4+1]),e.weightsIndices.push(v[(S-1)*4+2]),e.weightsIndices.push(v[(S-1)*4+3]),e.weightsIndices.push(v[S*4]),e.weightsIndices.push(v[S*4+1]),e.weightsIndices.push(v[S*4+2]),e.weightsIndices.push(v[S*4+3])),t.color&&(e.colors.push(u[0]),e.colors.push(u[1]),e.colors.push(u[2]),e.colors.push(u[(S-1)*3]),e.colors.push(u[(S-1)*3+1]),e.colors.push(u[(S-1)*3+2]),e.colors.push(u[S*3]),e.colors.push(u[S*3+1]),e.colors.push(u[S*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(o),e.materialIndex.push(o),e.materialIndex.push(o)),t.normal&&(e.normal.push(l[0]),e.normal.push(l[1]),e.normal.push(l[2]),e.normal.push(l[(S-1)*3]),e.normal.push(l[(S-1)*3+1]),e.normal.push(l[(S-1)*3+2]),e.normal.push(l[S*3]),e.normal.push(l[S*3+1]),e.normal.push(l[S*3+2])),t.uv&&t.uv.forEach(function(A,R){e.uvs[R]===void 0&&(e.uvs[R]=[]),e.uvs[R].push(h[R][0]),e.uvs[R].push(h[R][1]),e.uvs[R].push(h[R][(S-1)*2]),e.uvs[R].push(h[R][(S-1)*2+1]),e.uvs[R].push(h[R][S*2]),e.uvs[R].push(h[R][S*2+1])})}addMorphTargets(e,t,r,o){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const l=this;r.forEach(function(u){u.rawTargets.forEach(function(h){const m=nn.Objects.Geometry[h.geoID];m!==void 0&&l.genMorphGeometry(e,t,m,o,h.name)})})}genMorphGeometry(e,t,r,o,l){const u=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],h=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,w=new Float32Array(v);for(let O=0;O<m.length;O++){const N=m[O]*3;w[N]=h[O*3],w[N+1]=h[O*3+1],w[N+2]=h[O*3+2]}const S={vertexIndices:u,vertexPositions:w},A=this.genBuffers(S),R=new mt(A.vertex,3);R.name=l||r.attrName,R.applyMatrix4(o),e.morphAttributes.position.push(R)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Normals.a;let l=[];return r==="IndexToDirect"&&("NormalIndex"in e?l=e.NormalIndex.a:"NormalsIndex"in e&&(l=e.NormalsIndex.a)),{dataSize:3,buffer:o,indices:l,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.UV.a;let l=[];return r==="IndexToDirect"&&(l=e.UVIndex.a),{dataSize:2,buffer:o,indices:l,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Colors.a;let l=[];return r==="IndexToDirect"&&(l=e.ColorIndex.a),{dataSize:4,buffer:o,indices:l,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const o=e.Materials.a,l=[];for(let u=0;u<o.length;++u)l.push(u);return{dataSize:1,buffer:o,indices:l,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(PC===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new xt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new xt;const r=t-1,o=e.KnotVector.a,l=[],u=e.Points.a;for(let S=0,A=u.length;S<A;S+=4)l.push(new ln().fromArray(u,S));let h,m;if(e.Form==="Closed")l.push(l[0]);else if(e.Form==="Periodic"){h=r,m=o.length-1-h;for(let S=0;S<r;++S)l.push(l[S])}const w=new PC(r,o,l,h,m).getPoints(l.length*12);return new xt().setFromPoints(w)}}class _z{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const o=t[r],l=this.addClip(o);e.push(l)}return e}parseClips(){if(nn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=nn.Objects.AnimationCurveNode,t=new Map;for(const r in e){const o=e[r];if(o.attrName.match(/S|R|T|DeformPercent/)!==null){const l={id:o.id,attr:o.attrName,curves:{}};t.set(l.id,l)}}return t}parseAnimationCurves(e){const t=nn.Objects.AnimationCurve;for(const r in t){const o={id:t[r].id,times:t[r].KeyTime.a.map(Tz),values:t[r].KeyValueFloat.a},l=ur.get(o.id);if(l!==void 0){const u=l.parents[0].ID,h=l.parents[0].relationship;h.match(/X/)?e.get(u).curves.x=o:h.match(/Y/)?e.get(u).curves.y=o:h.match(/Z/)?e.get(u).curves.z=o:h.match(/d|DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=o)}}}parseAnimationLayers(e){const t=nn.Objects.AnimationLayer,r=new Map;for(const o in t){const l=[],u=ur.get(parseInt(o));u!==void 0&&(u.children.forEach(function(m,v){if(e.has(m.ID)){const w=e.get(m.ID);if(w.curves.x!==void 0||w.curves.y!==void 0||w.curves.z!==void 0){if(l[v]===void 0){const S=ur.get(m.ID).parents.filter(function(A){return A.relationship!==void 0})[0].ID;if(S!==void 0){const A=nn.Objects.Model[S.toString()];if(A===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const R={modelName:A.attrName?Jt.sanitizeNodeName(A.attrName):"",ID:A.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Li.traverse(function(O){O.ID===A.id&&(R.transform=O.matrix,O.userData.transformData&&(R.eulerOrder=O.userData.transformData.eulerOrder))}),R.transform||(R.transform=new et),"PreRotation"in A&&(R.preRotation=A.PreRotation.value),"PostRotation"in A&&(R.postRotation=A.PostRotation.value),l[v]=R}}l[v]&&(l[v][w.attr]=w)}else if(w.curves.morph!==void 0){if(l[v]===void 0){const S=ur.get(m.ID).parents.filter(function(D){return D.relationship!==void 0})[0].ID,A=ur.get(S).parents[0].ID,R=ur.get(A).parents[0].ID,O=ur.get(R).parents[0].ID,N=nn.Objects.Model[O],k={modelName:N.attrName?Jt.sanitizeNodeName(N.attrName):"",morphName:nn.Objects.Deformer[S].attrName};l[v]=k}l[v][w.attr]=w}}}),r.set(parseInt(o),l))}return r}parseAnimStacks(e){const t=nn.Objects.AnimationStack,r={};for(const o in t){const l=ur.get(parseInt(o)).children;l.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(l[0].ID);r[o]={name:t[o].attrName,layer:u}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(o){t=t.concat(r.generateTracks(o))}),new Wl(e.name,-1,t)}generateTracks(e){const t=[];let r=new le,o=new Ct,l=new le;if(e.transform&&e.transform.decompose(r,o,l),r=r.toArray(),o=new Gr().setFromQuaternion(o,e.eulerOrder).toArray(),l=l.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const u=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");u!==void 0&&t.push(u)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const u=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotation,e.postRotation,e.eulerOrder);u!==void 0&&t.push(u)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const u=this.generateVectorTrack(e.modelName,e.S.curves,l,"scale");u!==void 0&&t.push(u)}if(e.DeformPercent!==void 0){const u=this.generateMorphTrack(e);u!==void 0&&t.push(u)}return t}generateVectorTrack(e,t,r,o){const l=this.getTimesForAllAxes(t),u=this.getKeyframeTrackValues(l,t,r);return new Vl(e+"."+o,l,u)}generateRotationTrack(e,t,r,o,l,u){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(hn.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(hn.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(hn.degToRad));const h=this.getTimesForAllAxes(t),m=this.getKeyframeTrackValues(h,t,r);o!==void 0&&(o=o.map(hn.degToRad),o.push(u),o=new Gr().fromArray(o),o=new Ct().setFromEuler(o)),l!==void 0&&(l=l.map(hn.degToRad),l.push(u),l=new Gr().fromArray(l),l=new Ct().setFromEuler(l).invert());const v=new Ct,w=new Gr,S=[];for(let A=0;A<m.length;A+=3)w.set(m[A],m[A+1],m[A+2],u),v.setFromEuler(w),o!==void 0&&v.premultiply(o),l!==void 0&&v.multiply(l),v.toArray(S,A/3*4);return new Ro(e+".quaternion",h,S)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(l){return l/100}),o=Li.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Hl(e.modelName+".morphTargetInfluences["+o+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,o){return r-o}),t.length>1){let r=1,o=t[0];for(let l=1;l<t.length;l++){const u=t[l];u!==o&&(t[r]=u,o=u,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const o=r,l=[];let u=-1,h=-1,m=-1;return e.forEach(function(v){if(t.x&&(u=t.x.times.indexOf(v)),t.y&&(h=t.y.times.indexOf(v)),t.z&&(m=t.z.times.indexOf(v)),u!==-1){const w=t.x.values[u];l.push(w),o[0]=w}else l.push(o[0]);if(h!==-1){const w=t.y.values[h];l.push(w),o[1]=w}else l.push(o[1]);if(m!==-1){const w=t.z.values[m];l.push(w),o[2]=w}else l.push(o[2])}),l}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],o=e.values[t]-r,l=Math.abs(o);if(l>=180){const u=l/180,h=o/u;let m=r+h;const v=e.times[t-1],S=(e.times[t]-v)/u;let A=v+S;const R=[],O=[];for(;A<e.times[t];)R.push(A),A+=S,O.push(m),m+=h;e.times=BC(e.times,t,R),e.values=BC(e.values,t,O)}}}}class wz{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new DC,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(o,l){const u=o.match(/^[\s\t]*;/),h=o.match(/^[\s\t]*$/);if(u||h)return;const m=o.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),v=o.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),w=o.match("^\\t{"+(t.currentIndent-1)+"}}");m?t.parseNodeBegin(o,m):v?t.parseNodeProperty(o,v,r[++l]):w?t.popStack():o.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(o)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),o=t[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),l={name:r},u=this.parseNodeAttr(o),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,l):r in h?(r==="PoseNode"?h.PoseNode.push(l):h[r].id!==void 0&&(h[r]={},h[r][h[r].id]=h[r]),u.id!==""&&(h[r][u.id]=l)):typeof u.id=="number"?(h[r]={},h[r][u.id]=l):r!=="Properties70"&&(r==="PoseNode"?h[r]=[l]:h[r]=l),typeof u.id=="number"&&(l.id=u.id),u.name!==""&&(l.attrName=u.name),u.type!==""&&(l.attrType=u.type),this.pushStack(l)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",o="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),o=e[2]),{id:t,name:r,type:o}}parseNodeProperty(e,t,r){let o=t[1].replace(/^"/,"").replace(/"$/,"").trim(),l=t[2].replace(/^"/,"").replace(/"$/,"").trim();o==="Content"&&l===","&&(l=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,o,l);return}if(o==="C"){const m=l.split(",").slice(1),v=parseInt(m[0]),w=parseInt(m[1]);let S=l.split(",").slice(3);S=S.map(function(A){return A.trim().replace(/^"/,"")}),o="connections",l=[v,w],Az(l,S),u[o]===void 0&&(u[o]=[])}o==="Node"&&(u.id=l),o in u&&Array.isArray(u[o])?u[o].push(l):o!=="a"?u[o]=l:u.a=l,this.setCurrentProp(u,o),o==="a"&&l.slice(-1)!==","&&(u.a=j1(l))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=j1(t.a))}parseNodeSpecialProperty(e,t,r){const o=r.split('",').map(function(w){return w.trim().replace(/^\"/,"").replace(/\s/,"_")}),l=o[0],u=o[1],h=o[2],m=o[3];let v=o[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=j1(v);break}this.getPrevNode()[l]={type:u,type2:h,flag:m,value:v},this.setCurrentProp(this.getPrevNode(),l)}}class bz{parse(e){const t=new kC(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const o=new DC;for(;!this.endOfContent(t);){const l=this.parseNode(t,r);l!==null&&o.add(l.name,l)}return o}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&~15)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},o=t>=7500?e.getUint64():e.getUint32(),l=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),h=e.getString(u);if(o===0)return null;const m=[];for(let A=0;A<l;A++)m.push(this.parseProperty(e));const v=m.length>0?m[0]:"",w=m.length>1?m[1]:"",S=m.length>2?m[2]:"";for(r.singleProperty=l===1&&e.getOffset()===o;o>e.getOffset();){const A=this.parseNode(e,t);A!==null&&this.parseSubNode(h,r,A)}return r.propertyList=m,typeof v=="number"&&(r.id=v),w!==""&&(r.attrName=w),S!==""&&(r.attrType=S),h!==""&&(r.name=h),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const o=r.propertyList[0];Array.isArray(o)?(t[r.name]=r,r.a=o):t[r.name]=o}else if(e==="Connections"&&r.name==="C"){const o=[];r.propertyList.forEach(function(l,u){u!==0&&o.push(l)}),t.connections===void 0&&(t.connections=[]),t.connections.push(o)}else if(r.name==="Properties70")Object.keys(r).forEach(function(l){t[l]=r[l]});else if(e==="Properties70"&&r.name==="P"){let o=r.propertyList[0],l=r.propertyList[1];const u=r.propertyList[2],h=r.propertyList[3];let m;o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),l.indexOf("Lcl ")===0&&(l=l.replace("Lcl ","Lcl_")),l==="Color"||l==="ColorRGB"||l==="Vector"||l==="Vector3D"||l.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],t[o]={type:l,type2:u,flag:h,value:m}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const o=e.getUint32(),l=e.getUint32(),u=e.getUint32();if(l===0)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}typeof cz=="undefined"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const h=ad(new Uint8Array(e.getArrayBuffer(u))),m=new kC(h.buffer);switch(t){case"b":case"c":return m.getBooleanArray(o);case"d":return m.getFloat64Array(o);case"f":return m.getFloat32Array(o);case"i":return m.getInt32Array(o);case"l":return m.getInt64Array(o)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class kC{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)==1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let o=0;o<e;o++)t[o]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),Ci.decodeText(new Uint8Array(t))}}class DC{add(e,t){this[e]=t}}function Sz(s){const e="Kaydara FBX Binary  \0";return s.byteLength>=e.length&&e===UC(s,0,e.length)}function Mz(s){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(o){const l=s[o-1];return s=s.slice(t+o),t++,l}for(let o=0;o<e.length;++o)if(r(1)===e[o])return!1;return!0}function OC(s){const e=/FBXVersion: (\d+)/,t=s.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Tz(s){return s/46186158e3}const Ez=[];function Dg(s,e,t,r){let o;switch(r.mappingType){case"ByPolygonVertex":o=s;break;case"ByPolygon":o=e;break;case"ByVertice":o=t;break;case"AllSame":o=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(o=r.indices[o]);const l=o*r.dataSize,u=l+r.dataSize;return Cz(Ez,r.buffer,l,u)}const $1=new Gr,Jc=new le;function NC(s){const e=new et,t=new et,r=new et,o=new et,l=new et,u=new et,h=new et,m=new et,v=new et,w=new et,S=new et,A=new et,R=s.inheritType?s.inheritType:0;if(s.translation&&e.setPosition(Jc.fromArray(s.translation)),s.preRotation){const se=s.preRotation.map(hn.degToRad);se.push(s.eulerOrder),t.makeRotationFromEuler($1.fromArray(se))}if(s.rotation){const se=s.rotation.map(hn.degToRad);se.push(s.eulerOrder),r.makeRotationFromEuler($1.fromArray(se))}if(s.postRotation){const se=s.postRotation.map(hn.degToRad);se.push(s.eulerOrder),o.makeRotationFromEuler($1.fromArray(se)),o.invert()}s.scale&&l.scale(Jc.fromArray(s.scale)),s.scalingOffset&&h.setPosition(Jc.fromArray(s.scalingOffset)),s.scalingPivot&&u.setPosition(Jc.fromArray(s.scalingPivot)),s.rotationOffset&&m.setPosition(Jc.fromArray(s.rotationOffset)),s.rotationPivot&&v.setPosition(Jc.fromArray(s.rotationPivot)),s.parentMatrixWorld&&(S.copy(s.parentMatrix),w.copy(s.parentMatrixWorld));const O=t.clone().multiply(r).multiply(o),N=new et;N.extractRotation(w);const k=new et;k.copyPosition(w);const D=k.clone().invert().multiply(w),P=N.clone().invert().multiply(D),F=l,L=new et;if(R===0)L.copy(N).multiply(O).multiply(P).multiply(F);else if(R===1)L.copy(N).multiply(P).multiply(O).multiply(F);else{const ce=new et().scale(new le().setFromMatrixScale(S)).clone().invert(),pe=P.clone().multiply(ce);L.copy(N).multiply(O).multiply(pe).multiply(F)}const z=v.clone().invert(),H=u.clone().invert();let X=e.clone().multiply(m).multiply(v).multiply(t).multiply(r).multiply(o).multiply(z).multiply(h).multiply(u).multiply(l).multiply(H);const $=new et().copyPosition(X),J=w.clone().multiply($);return A.copyPosition(J),X=A.clone().multiply(L),X.premultiply(w.invert()),X}function FC(s){s=s||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return s===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[s]}function j1(s){return s.split(",").map(function(t){return parseFloat(t)})}function UC(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=s.byteLength),Ci.decodeText(new Uint8Array(s,e,t))}function Az(s,e){for(let t=0,r=s.length,o=e.length;t<o;t++,r++)s[r]=e[t]}function Cz(s,e,t,r){for(let o=t,l=0;o<r;o++,l++)s[l]=e[o];return s}function BC(s,e,t){return s.slice(0,e).concat(t).concat(s.slice(e))}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q1=function(s,e){return q1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},q1(s,e)};function Rz(s,e){q1(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ut;(function(s){s[s.NONE=0]="NONE",s[s.ROTATE=1]="ROTATE",s[s.TRUCK=2]="TRUCK",s[s.OFFSET=3]="OFFSET",s[s.DOLLY=4]="DOLLY",s[s.ZOOM=5]="ZOOM",s[s.TOUCH_ROTATE=6]="TOUCH_ROTATE",s[s.TOUCH_TRUCK=7]="TOUCH_TRUCK",s[s.TOUCH_OFFSET=8]="TOUCH_OFFSET",s[s.TOUCH_DOLLY=9]="TOUCH_DOLLY",s[s.TOUCH_ZOOM=10]="TOUCH_ZOOM",s[s.TOUCH_DOLLY_TRUCK=11]="TOUCH_DOLLY_TRUCK",s[s.TOUCH_DOLLY_OFFSET=12]="TOUCH_DOLLY_OFFSET",s[s.TOUCH_ZOOM_TRUCK=13]="TOUCH_ZOOM_TRUCK",s[s.TOUCH_ZOOM_OFFSET=14]="TOUCH_ZOOM_OFFSET"})(Ut||(Ut={}));var ef=Math.PI*2,zC=Math.PI/2,Lz=1/.016,Iz=1e-5;function Ii(s){return Math.abs(s)<Iz}function Pz(s,e){return Ii(s-e)}function HC(s,e){return Math.round(s/e)*e}function ud(s){return isFinite(s)?s:s<0?-Number.MAX_VALUE:Number.MAX_VALUE}function cd(s){return Math.abs(s)<Number.MAX_VALUE?s:s*(1/0)}function GC(s){return"TouchEvent"in window&&s instanceof TouchEvent}function VC(s,e){if(e.set(0,0),GC(s)){for(var t=s,r=0;r<t.touches.length;r++)e.x+=t.touches[r].clientX,e.y+=t.touches[r].clientY;return e.x/=t.touches.length,e.y/=t.touches.length,e}else{var o=s;return e.set(o.clientX,o.clientY),e}}function Og(s,e){return s.isPerspectiveCamera?!1:(console.warn(e+" is not supported in OrthographicCamera"),!0)}function WC(s){return s.invert?s.invert():s.inverse(),s}var kz=function(){function s(){this._listeners={}}return s.prototype.addEventListener=function(e,t){var r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)},s.prototype.removeEventListener=function(e,t){var r=this._listeners,o=r[e];if(o!==void 0){var l=o.indexOf(t);l!==-1&&o.splice(l,1)}},s.prototype.removeAllEventListeners=function(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)},s.prototype.dispatchEvent=function(e){var t=this._listeners,r=t[e.type];if(r!==void 0){e.target=this;for(var o=r.slice(0),l=0,u=o.length;l<u;l++)o[l].call(this,e)}},s}(),Dz=typeof window!="undefined",Oz=Dz&&/Mac/.test(navigator.platform),Nz=Object.freeze(Ut),Ng=1/8,Pt,$C,Fg,X1,as,_n,Rn,Ug,eu,tu,Bg,ks,fd,hd,jC,Y1,qC,XC,K1,zg,WV=function(s){Rz(e,s);function e(t,r){var o=s.call(this)||this;if(o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.minDistance=0,o.maxDistance=1/0,o.infinityDolly=!1,o.minZoom=.01,o.maxZoom=1/0,o.dampingFactor=.05,o.draggingDampingFactor=.25,o.azimuthRotateSpeed=1,o.polarRotateSpeed=1,o.dollySpeed=1,o.truckSpeed=2,o.dollyToCursor=!1,o.dragToOffset=!1,o.verticalDragToForward=!1,o.boundaryFriction=0,o.colliderMeshes=[],o.cancel=function(){},o._enabled=!0,o._state=Ut.NONE,o._viewport=null,o._dollyControlAmount=0,o._boundaryEnclosesCamera=!1,o._needsUpdate=!0,o._updatedLastTime=!1,typeof Pt=="undefined"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),o._camera=t,o._yAxisUpSpace=new Pt.Quaternion().setFromUnitVectors(o._camera.up,Fg),o._yAxisUpSpaceInverse=WC(o._yAxisUpSpace.clone()),o._state=Ut.NONE,o._domElement=r,o._target=new Pt.Vector3,o._targetEnd=o._target.clone(),o._focalOffset=new Pt.Vector3,o._focalOffsetEnd=o._focalOffset.clone(),o._spherical=new Pt.Spherical().setFromVector3(_n.copy(o._camera.position).applyQuaternion(o._yAxisUpSpace)),o._sphericalEnd=o._spherical.clone(),o._zoom=o._camera.zoom,o._zoomEnd=o._zoom,o._nearPlaneCorners=[new Pt.Vector3,new Pt.Vector3,new Pt.Vector3,new Pt.Vector3],o._updateNearPlaneCorners(),o._boundary=new Pt.Box3(new Pt.Vector3(-1/0,-1/0,-1/0),new Pt.Vector3(1/0,1/0,1/0)),o._target0=o._target.clone(),o._position0=o._camera.position.clone(),o._zoom0=o._zoom,o._focalOffset0=o._focalOffset.clone(),o._dollyControlAmount=0,o._dollyControlCoord=new Pt.Vector2,o.mouseButtons={left:Ut.ROTATE,middle:Ut.DOLLY,right:Ut.TRUCK,wheel:o._camera.isPerspectiveCamera?Ut.DOLLY:o._camera.isOrthographicCamera?Ut.ZOOM:Ut.NONE},o.touches={one:Ut.TOUCH_ROTATE,two:o._camera.isPerspectiveCamera?Ut.TOUCH_DOLLY_TRUCK:o._camera.isOrthographicCamera?Ut.TOUCH_ZOOM_TRUCK:Ut.NONE,three:Ut.TOUCH_TRUCK},o._domElement){var l=new Pt.Vector2,u=new Pt.Vector2,h=new Pt.Vector2,m=new Pt.Vector4,v=function(H,X,$){if(o._camera.isPerspectiveCamera){var J=o._camera,se=_n.copy(J.position).sub(o._target),ce=J.getEffectiveFOV()*Pt.MathUtils.DEG2RAD,pe=se.length()*Math.tan(ce*.5),fe=o.truckSpeed*H*pe/m.w,b=o.truckSpeed*X*pe/m.w;o.verticalDragToForward?($?o.setFocalOffset(o._focalOffsetEnd.x+fe,o._focalOffsetEnd.y,o._focalOffsetEnd.z,!0):o.truck(fe,0,!0),o.forward(-b,!0)):$?o.setFocalOffset(o._focalOffsetEnd.x+fe,o._focalOffsetEnd.y+b,o._focalOffsetEnd.z,!0):o.truck(fe,b,!0)}else if(o._camera.isOrthographicCamera){var p=o._camera,fe=H*(p.right-p.left)/p.zoom/m.z,b=X*(p.top-p.bottom)/p.zoom/m.w;$?o.setFocalOffset(o._focalOffsetEnd.x+fe,o._focalOffsetEnd.y+b,o._focalOffsetEnd.z,!0):o.truck(fe,b,!0)}},w=function(H,X){var $=ef*o.azimuthRotateSpeed*H/m.w,J=ef*o.polarRotateSpeed*X/m.w;o.rotate($,J,!0)},S=function(H,X,$){var J=Math.pow(.95,-H*o.dollySpeed),se=o._sphericalEnd.radius*J,ce=o._sphericalEnd.radius;o.dollyTo(se),o.infinityDolly&&se<o.minDistance&&(o._camera.getWorldDirection(_n),o._targetEnd.add(_n.normalize().multiplyScalar(ce)),o._target.add(_n.normalize().multiplyScalar(ce))),o.dollyToCursor&&(o._dollyControlAmount+=o._sphericalEnd.radius-ce,o._dollyControlCoord.set(X,$))},A=function(H){var X=Math.pow(.95,H*o.dollySpeed);o.zoomTo(o._zoom*X)},R=function(){o._state=Ut.NONE,document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L,{passive:!1}),document.removeEventListener("mouseup",z),document.removeEventListener("touchend",z)},O=function(H){if(!!o._enabled){switch(R(),H.button){case Pt.MOUSE.LEFT:o._state=o.mouseButtons.left;break;case Pt.MOUSE.MIDDLE:o._state=o.mouseButtons.middle;break;case Pt.MOUSE.RIGHT:o._state=o.mouseButtons.right;break}F(H)}},N=function(H){if(!!o._enabled){switch(R(),H.touches.length){case 1:o._state=o.touches.one;break;case 2:o._state=o.touches.two;break;case 3:o._state=o.touches.three;break}F(H)}},k=-1,D=function(H){if(!(!o._enabled||o.mouseButtons.wheel===Ut.NONE)){if(H.preventDefault(),o.dollyToCursor||o.mouseButtons.wheel===Ut.ROTATE||o.mouseButtons.wheel===Ut.TRUCK){var X=performance.now();k-X<1e3&&o._getClientRect(m),k=X}var $=Oz?-1:-3,J=H.deltaMode===1?H.deltaY/$:H.deltaY/($*10),se=o.dollyToCursor?(H.clientX-m.x)/m.z*2-1:0,ce=o.dollyToCursor?(H.clientY-m.y)/m.w*-2+1:0;switch(o.mouseButtons.wheel){case Ut.ROTATE:{w(H.deltaX,H.deltaY);break}case Ut.TRUCK:{v(H.deltaX,H.deltaY,!1);break}case Ut.OFFSET:{v(H.deltaX,H.deltaY,!0);break}case Ut.DOLLY:{S(-J,se,ce);break}case Ut.ZOOM:{A(-J);break}}o.dispatchEvent({type:"control",originalEvent:H})}},P=function(H){!o._enabled||H.preventDefault()},F=function(H){if(!!o._enabled){VC(H,as),o._getClientRect(m),l.copy(as),u.copy(as);var X=GC(H)&&H.touches.length>=2;if(X){var $=H,J=as.x-$.touches[1].clientX,se=as.y-$.touches[1].clientY,ce=Math.sqrt(J*J+se*se);h.set(0,ce);var pe=($.touches[0].clientX+$.touches[1].clientX)*.5,fe=($.touches[0].clientY+$.touches[1].clientY)*.5;u.set(pe,fe)}document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("mouseup",z),document.addEventListener("touchend",z),o.dispatchEvent({type:"controlstart",originalEvent:H})}},L=function(H){if(!!o._enabled){H.preventDefault(),VC(H,as);var X=u.x-as.x,$=u.y-as.y;switch(u.copy(as),o._state){case Ut.ROTATE:case Ut.TOUCH_ROTATE:{w(X,$);break}case Ut.DOLLY:case Ut.ZOOM:{var J=o.dollyToCursor?(l.x-m.x)/m.z*2-1:0,se=o.dollyToCursor?(l.y-m.y)/m.w*-2+1:0;o._state===Ut.DOLLY?S($*Ng,J,se):A($*Ng);break}case Ut.TOUCH_DOLLY:case Ut.TOUCH_ZOOM:case Ut.TOUCH_DOLLY_TRUCK:case Ut.TOUCH_ZOOM_TRUCK:case Ut.TOUCH_DOLLY_OFFSET:case Ut.TOUCH_ZOOM_OFFSET:{var ce=H,pe=as.x-ce.touches[1].clientX,fe=as.y-ce.touches[1].clientY,b=Math.sqrt(pe*pe+fe*fe),p=h.y-b;h.set(0,b);var J=o.dollyToCursor?(u.x-m.x)/m.z*2-1:0,se=o.dollyToCursor?(u.y-m.y)/m.w*-2+1:0;o._state===Ut.TOUCH_DOLLY||o._state===Ut.TOUCH_DOLLY_TRUCK?S(p*Ng,J,se):A(p*Ng),o._state===Ut.TOUCH_DOLLY_TRUCK||o._state===Ut.TOUCH_ZOOM_TRUCK?v(X,$,!1):(o._state===Ut.TOUCH_DOLLY_OFFSET||o._state===Ut.TOUCH_ZOOM_OFFSET)&&v(X,$,!0);break}case Ut.TRUCK:case Ut.TOUCH_TRUCK:{v(X,$,!1);break}case Ut.OFFSET:case Ut.TOUCH_OFFSET:{v(X,$,!0);break}}o.dispatchEvent({type:"control",originalEvent:H})}},z=function(H){!o._enabled||(R(),o.dispatchEvent({type:"controlend",originalEvent:H}))};o._domElement.addEventListener("mousedown",O),o._domElement.addEventListener("touchstart",N),o._domElement.addEventListener("wheel",D),o._domElement.addEventListener("contextmenu",P),o._removeAllEventListeners=function(){o._domElement.removeEventListener("mousedown",O),o._domElement.removeEventListener("touchstart",N),o._domElement.removeEventListener("wheel",D),o._domElement.removeEventListener("contextmenu",P),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L,{passive:!1}),document.removeEventListener("mouseup",z),document.removeEventListener("touchend",z)},o.cancel=function(){R(),o.dispatchEvent({type:"controlend",originalEvent:null})}}return o.update(0),o}return e.install=function(t){Pt=t.THREE,$C=Object.freeze(new Pt.Vector3(0,0,0)),Fg=Object.freeze(new Pt.Vector3(0,1,0)),X1=Object.freeze(new Pt.Vector3(0,0,1)),as=new Pt.Vector2,_n=new Pt.Vector3,Rn=new Pt.Vector3,Ug=new Pt.Vector3,eu=new Pt.Vector3,tu=new Pt.Vector3,Bg=new Pt.Vector3,ks=new Pt.Spherical,fd=new Pt.Spherical,hd=new Pt.Box3,jC=new Pt.Box3,Y1=new Pt.Sphere,qC=new Pt.Quaternion,XC=new Pt.Quaternion,K1=new Pt.Matrix4,zg=new Pt.Raycaster},Object.defineProperty(e,"ACTION",{get:function(){return Nz},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,t||this.cancel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAction",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._spherical.radius},set:function(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"azimuthAngle",{get:function(){return this._spherical.theta},set:function(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polarAngle",{get:function(){return this._spherical.phi},set:function(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phiSpeed",{set:function(t){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thetaSpeed",{set:function(t){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(t,r){s.prototype.addEventListener.call(this,t,r)},e.prototype.removeEventListener=function(t,r){s.prototype.removeEventListener.call(this,t,r)},e.prototype.rotate=function(t,r,o){o===void 0&&(o=!1),this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,o)},e.prototype.rotateTo=function(t,r,o){o===void 0&&(o=!1);var l=Pt.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),u=Pt.MathUtils.clamp(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=l,this._sphericalEnd.phi=u,this._sphericalEnd.makeSafe(),o||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._needsUpdate=!0},e.prototype.dolly=function(t,r){r===void 0&&(r=!1),this.dollyTo(this._sphericalEnd.radius-t,r)},e.prototype.dollyTo=function(t,r){r===void 0&&(r=!1),!Og(this._camera,"dolly")&&(this._sphericalEnd.radius=Pt.MathUtils.clamp(t,this.minDistance,this.maxDistance),r||(this._spherical.radius=this._sphericalEnd.radius),this._needsUpdate=!0)},e.prototype.zoom=function(t,r){r===void 0&&(r=!1),this.zoomTo(this._zoomEnd+t,r)},e.prototype.zoomTo=function(t,r){r===void 0&&(r=!1),this._zoomEnd=Pt.MathUtils.clamp(t,this.minZoom,this.maxZoom),r||(this._zoom=this._zoomEnd),this._needsUpdate=!0},e.prototype.pan=function(t,r,o){o===void 0&&(o=!1),console.log("`pan` has been renamed to `truck`"),this.truck(t,r,o)},e.prototype.truck=function(t,r,o){o===void 0&&(o=!1),this._camera.updateMatrix(),eu.setFromMatrixColumn(this._camera.matrix,0),tu.setFromMatrixColumn(this._camera.matrix,1),eu.multiplyScalar(t),tu.multiplyScalar(-r);var l=_n.copy(eu).add(tu);this._encloseToBoundary(this._targetEnd,l,this.boundaryFriction),o||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.forward=function(t,r){r===void 0&&(r=!1),_n.setFromMatrixColumn(this._camera.matrix,0),_n.crossVectors(this._camera.up,_n),_n.multiplyScalar(t),this._encloseToBoundary(this._targetEnd,_n,this.boundaryFriction),r||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.moveTo=function(t,r,o,l){l===void 0&&(l=!1),this._targetEnd.set(t,r,o),l||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.fitToBox=function(t,r,o){var l=o===void 0?{}:o,u=l.paddingLeft,h=u===void 0?0:u,m=l.paddingRight,v=m===void 0?0:m,w=l.paddingBottom,S=w===void 0?0:w,A=l.paddingTop,R=A===void 0?0:A,O=t.isBox3?hd.copy(t):hd.setFromObject(t);if(O.isEmpty()){console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting");return}var N=HC(this._sphericalEnd.theta,zC),k=HC(this._sphericalEnd.phi,zC);this.rotateTo(N,k,r);var D=_n.setFromSpherical(this._sphericalEnd).normalize(),P=qC.setFromUnitVectors(D,X1),F=Pz(Math.abs(D.y),1);F&&P.multiply(XC.setFromAxisAngle(Fg,N));var L=jC.makeEmpty();Rn.copy(O.min).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.min).setX(O.max.x).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.min).setY(O.max.y).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.max).setZ(O.min.z).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.min).setZ(O.max.z).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.max).setY(O.min.y).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.max).setX(O.min.x).applyQuaternion(P),L.expandByPoint(Rn),Rn.copy(O.max).applyQuaternion(P),L.expandByPoint(Rn),P.setFromUnitVectors(X1,D),L.min.x-=h,L.min.y-=S,L.max.x+=v,L.max.y+=R;var z=L.getSize(_n),H=L.getCenter(Rn).applyQuaternion(P),X=this._camera.isPerspectiveCamera,$=this._camera.isOrthographicCamera;if(X){var J=this.getDistanceToFitBox(z.x,z.y,z.z);this.moveTo(H.x,H.y,H.z,r),this.dollyTo(J,r),this.setFocalOffset(0,0,0,r);return}else if($){var se=this._camera,ce=se.right-se.left,pe=se.top-se.bottom,fe=Math.min(ce/z.x,pe/z.y);this.moveTo(H.x,H.y,H.z,r),this.zoomTo(fe,r),this.setFocalOffset(0,0,0,r);return}},e.prototype.fitTo=function(t,r,o){o===void 0&&(o={}),console.warn("camera-controls: fitTo() has been renamed to fitToBox()"),this.fitToBox(t,r,o)},e.prototype.fitToSphere=function(t,r){var o=t instanceof Pt.Sphere,l=o?Y1.copy(t):Fz(t,Y1),u=this.getDistanceToFitSphere(l.radius);this.moveTo(l.center.x,l.center.y,l.center.z,r),this.dollyTo(u,r),this.setFocalOffset(0,0,0,r)},e.prototype.setLookAt=function(t,r,o,l,u,h,m){m===void 0&&(m=!1);var v=_n.set(t,r,o),w=Rn.set(l,u,h);this._targetEnd.copy(w),this._sphericalEnd.setFromVector3(v.sub(w).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.lerpLookAt=function(t,r,o,l,u,h,m,v,w,S,A,R,O,N){N===void 0&&(N=!1);var k=_n.set(t,r,o),D=Rn.set(l,u,h);ks.setFromVector3(k.sub(D).applyQuaternion(this._yAxisUpSpace));var P=_n.set(S,A,R);this._targetEnd.copy(D).lerp(P,O);var F=Rn.set(m,v,w);fd.setFromVector3(F.sub(P).applyQuaternion(this._yAxisUpSpace));var L=fd.theta-ks.theta,z=fd.phi-ks.phi,H=fd.radius-ks.radius;this._sphericalEnd.set(ks.radius+H*O,ks.phi+z*O,ks.theta+L*O),this.normalizeRotations(),N||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.setPosition=function(t,r,o,l){l===void 0&&(l=!1),this.setLookAt(t,r,o,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,l)},e.prototype.setTarget=function(t,r,o,l){l===void 0&&(l=!1);var u=this.getPosition(_n);this.setLookAt(u.x,u.y,u.z,t,r,o,l)},e.prototype.setFocalOffset=function(t,r,o,l){l===void 0&&(l=!1),this._focalOffsetEnd.set(t,r,o),l||this._focalOffset.copy(this._focalOffsetEnd),this._needsUpdate=!0},e.prototype.setBoundary=function(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0},e.prototype.setViewport=function(t,r,o,l){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Pt.Vector4,typeof t=="number"?this._viewport.set(t,r,o,l):this._viewport.copy(t)},e.prototype.getDistanceToFitBox=function(t,r,o){if(Og(this._camera,"getDistanceToFit"))return this._spherical.radius;var l=this._camera,u=t/r,h=l.getEffectiveFOV()*Pt.MathUtils.DEG2RAD,m=l.aspect,v=u<m?r:t/m;return v*.5/Math.tan(h*.5)+o*.5},e.prototype.getDistanceToFit=function(t,r,o){return console.warn("camera-controls: getDistanceToFit() has been renamed to getDistanceToFitBox()"),this.getDistanceToFitBox(t,r,o)},e.prototype.getDistanceToFitSphere=function(t){if(Og(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var r=this._camera,o=r.getEffectiveFOV()*Pt.MathUtils.DEG2RAD,l=Math.atan(Math.tan(o*.5)*r.aspect)*2,u=1<r.aspect?o:l;return t/Math.sin(u*.5)},e.prototype.getTarget=function(t){var r=!!t&&t.isVector3?t:new Pt.Vector3;return r.copy(this._targetEnd)},e.prototype.getPosition=function(t){var r=!!t&&t.isVector3?t:new Pt.Vector3;return r.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},e.prototype.getFocalOffset=function(t){var r=!!t&&t.isVector3?t:new Pt.Vector3;return r.copy(this._focalOffsetEnd)},e.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%ef,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ef),this._spherical.theta+=ef*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ef)},e.prototype.reset=function(t){t===void 0&&(t=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)},e.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},e.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Fg),WC(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))},e.prototype.update=function(t){var r=this._state===Ut.NONE?this.dampingFactor:this.draggingDampingFactor,o=1-Math.exp(-r*t*Lz),l=this._sphericalEnd.theta-this._spherical.theta,u=this._sphericalEnd.phi-this._spherical.phi,h=this._sphericalEnd.radius-this._spherical.radius,m=_n.subVectors(this._targetEnd,this._target),v=Rn.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Ii(l)||!Ii(u)||!Ii(h)||!Ii(m.x)||!Ii(m.y)||!Ii(m.z)||!Ii(v.x)||!Ii(v.y)||!Ii(v.z)?(this._spherical.set(this._spherical.radius+h*o,this._spherical.phi+u*o,this._spherical.theta+l*o),this._target.add(m.multiplyScalar(o)),this._focalOffset.add(v.multiplyScalar(o)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(this._camera.isPerspectiveCamera){var w=this._camera,S=_n.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),A=Rn.copy(S).cross(w.up).normalize();A.lengthSq()===0&&(A.x=1);var R=Ug.crossVectors(A,S),O=this._sphericalEnd.radius*Math.tan(w.getEffectiveFOV()*Pt.MathUtils.DEG2RAD*.5),N=this._sphericalEnd.radius-this._dollyControlAmount,k=(N-this._sphericalEnd.radius)/this._sphericalEnd.radius,D=_n.copy(this._targetEnd).add(A.multiplyScalar(this._dollyControlCoord.x*O*w.aspect)).add(R.multiplyScalar(this._dollyControlCoord.y*O));this._targetEnd.lerp(D,k),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var P=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,P),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);var F=!Ii(this._focalOffset.x)||!Ii(this._focalOffset.y)||!Ii(this._focalOffset.z);F&&(this._camera.updateMatrix(),eu.setFromMatrixColumn(this._camera.matrix,0),tu.setFromMatrixColumn(this._camera.matrix,1),Bg.setFromMatrixColumn(this._camera.matrix,2),eu.multiplyScalar(this._focalOffset.x),tu.multiplyScalar(-this._focalOffset.y),Bg.multiplyScalar(this._focalOffset.z),_n.copy(eu).add(tu).add(Bg),this._camera.position.add(_n)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),_n.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var L=this._zoomEnd-this._zoom;this._zoom+=L*o,this._camera.zoom!==this._zoom&&(Ii(L)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var z=this._needsUpdate;return z&&!this._updatedLastTime?(this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):z?this.dispatchEvent({type:"update"}):!z&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=z,this._needsUpdate=!1,z},e.prototype.toJSON=function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ud(this.maxDistance),minZoom:this.minZoom,maxZoom:ud(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ud(this.maxPolarAngle),minAzimuthAngle:ud(this.minAzimuthAngle),maxAzimuthAngle:ud(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:_n.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})},e.prototype.fromJSON=function(t,r){r===void 0&&(r=!1);var o=JSON.parse(t),l=_n.fromArray(o.position);this.enabled=o.enabled,this.minDistance=o.minDistance,this.maxDistance=cd(o.maxDistance),this.minZoom=o.minZoom,this.maxZoom=cd(o.maxZoom),this.minPolarAngle=o.minPolarAngle,this.maxPolarAngle=cd(o.maxPolarAngle),this.minAzimuthAngle=cd(o.minAzimuthAngle),this.maxAzimuthAngle=cd(o.maxAzimuthAngle),this.dampingFactor=o.dampingFactor,this.draggingDampingFactor=o.draggingDampingFactor,this.dollySpeed=o.dollySpeed,this.truckSpeed=o.truckSpeed,this.dollyToCursor=o.dollyToCursor,this.verticalDragToForward=o.verticalDragToForward,this._target0.fromArray(o.target0),this._position0.fromArray(o.position0),this._zoom0=o.zoom0,this._focalOffset0.fromArray(o.focalOffset0),this.moveTo(o.target[0],o.target[1],o.target[2],r),ks.setFromVector3(l.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ks.theta,ks.phi,r),this.zoomTo(o.zoom,r),this.setFocalOffset(o.focalOffset[0],o.focalOffset[1],o.focalOffset[2],r),this._needsUpdate=!0},e.prototype.dispose=function(){this._removeAllEventListeners()},e.prototype._encloseToBoundary=function(t,r,o){var l=r.lengthSq();if(l===0)return t;var u=Rn.copy(r).add(t),h=this._boundary.clampPoint(u,Ug),m=h.sub(u),v=m.lengthSq();if(v===0)return t.add(r);if(v===l)return t;if(o===0)return t.add(r).add(m);var w=1+o*v/r.dot(m);return t.add(Rn.copy(r).multiplyScalar(w)).add(m.multiplyScalar(1-o))},e.prototype._updateNearPlaneCorners=function(){if(this._camera.isPerspectiveCamera){var t=this._camera,r=t.near,o=t.getEffectiveFOV()*Pt.MathUtils.DEG2RAD,l=Math.tan(o*.5)*r,u=l*t.aspect;this._nearPlaneCorners[0].set(-u,-l,0),this._nearPlaneCorners[1].set(u,-l,0),this._nearPlaneCorners[2].set(u,l,0),this._nearPlaneCorners[3].set(-u,l,0)}else if(this._camera.isOrthographicCamera){var t=this._camera,h=1/t.zoom,m=t.left*h,v=t.right*h,w=t.top*h,S=t.bottom*h;this._nearPlaneCorners[0].set(m,w,0),this._nearPlaneCorners[1].set(v,w,0),this._nearPlaneCorners[2].set(v,S,0),this._nearPlaneCorners[3].set(m,S,0)}},e.prototype._collisionTest=function(){var t=1/0,r=this.colliderMeshes.length>=1;if(!r||Og(this._camera,"_collisionTest"))return t;t=this._spherical.radius;var o=_n.setFromSpherical(this._spherical).divideScalar(t);K1.lookAt($C,o,this._camera.up);for(var l=0;l<4;l++){var u=Rn.copy(this._nearPlaneCorners[l]);u.applyMatrix4(K1);var h=Ug.addVectors(this._target,u);zg.set(h,o),zg.far=t;var m=zg.intersectObjects(this.colliderMeshes);m.length!==0&&m[0].distance<t&&(t=m[0].distance)}return t},e.prototype._getClientRect=function(t){var r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.z=this._viewport.z,t.w=this._viewport.w):(t.z=r.width,t.w=r.height),t},e.prototype._removeAllEventListeners=function(){},e}(kz);function Fz(s,e){var t=e,r=t.center;s.traverse(function(l){!l.isMesh||hd.expandByObject(l)}),hd.getCenter(r);var o=0;return s.traverse(function(l){if(!!l.isMesh){var u=l,h=u.geometry.clone();if(h.applyMatrix4(u.matrixWorld),u.geometry.isBufferGeometry)for(var m=h,v=m.attributes.position,w=0,S=v.count;w<S;w++)_n.fromBufferAttribute(v,w),o=Math.max(o,r.distanceToSquared(_n));else for(var A=h.vertices,w=0,S=A.length;w<S;w++)o=Math.max(o,r.distanceToSquared(A[w]))}}),t.radius=Math.sqrt(o),t}const nu=new yA,Pi=new le,Ia=new le,Hn=new Ct,YC={X:new le(1,0,0),Y:new le(0,1,0),Z:new le(0,0,1)},Q1={type:"change"},KC={type:"mouseDown"},QC={type:"mouseUp",mode:null},ZC={type:"objectChange"};class Uz extends Ht{constructor(e,t){super();t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const r=new n2;this._gizmo=r,this.add(r);const o=new r2;this._plane=o,this.add(o);const l=this;function u(P,F){let L=F;Object.defineProperty(l,P,{get:function(){return L!==void 0?L:F},set:function(z){L!==z&&(L=z,o[P]=z,r[P]=z,l.dispatchEvent({type:P+"-changed",value:z}),l.dispatchEvent(Q1))}}),l[P]=F,o[P]=F,r[P]=F}u("camera",e),u("object",void 0),u("enabled",!0),u("axis",null),u("mode","translate"),u("translationSnap",null),u("rotationSnap",null),u("scaleSnap",null),u("space","world"),u("size",1),u("dragging",!1),u("showX",!0),u("showY",!0),u("showZ",!0);const h=new le,m=new le,v=new Ct,w=new Ct,S=new le,A=new Ct,R=new le,O=new le,N=new le,k=0,D=new le;u("worldPosition",h),u("worldPositionStart",m),u("worldQuaternion",v),u("worldQuaternionStart",w),u("cameraPosition",S),u("cameraQuaternion",A),u("pointStart",R),u("pointEnd",O),u("rotationAxis",N),u("rotationAngle",k),u("eye",D),this._offset=new le,this._startNorm=new le,this._endNorm=new le,this._cameraScale=new le,this._parentPosition=new le,this._parentQuaternion=new Ct,this._parentQuaternionInv=new Ct,this._parentScale=new le,this._worldScaleStart=new le,this._worldQuaternionInv=new Ct,this._worldScale=new le,this._positionStart=new le,this._quaternionStart=new Ct,this._scaleStart=new le,this._getPointer=Bz.bind(this),this._onPointerDown=Hz.bind(this),this._onPointerHover=zz.bind(this),this._onPointerMove=Gz.bind(this),this._onPointerUp=Vz.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;nu.setFromCamera(e,this.camera);const t=Z1(this._gizmo.picker[this.mode],nu);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){nu.setFromCamera(e,this.camera);const t=Z1(this._plane,nu,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,KC.mode=this.mode,this.dispatchEvent(KC)}}pointerMove(e){const t=this.axis,r=this.mode,o=this.object;let l=this.space;if(r==="scale"?l="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(l="world"),o===void 0||t===null||this.dragging===!1||e.button!==-1)return;nu.setFromCamera(e,this.camera);const u=Z1(this._plane,nu,!0);if(!!u){if(this.pointEnd.copy(u.point).sub(this.worldPositionStart),r==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),l==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(l==="local"&&(o.position.applyQuaternion(Hn.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),l==="world"&&(o.parent&&o.position.add(Pi.setFromMatrixPosition(o.parent.matrixWorld)),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(Pi.setFromMatrixPosition(o.parent.matrixWorld))));else if(r==="scale"){if(t.search("XYZ")!==-1){let h=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(h*=-1),Ia.set(h,h,h)}else Pi.copy(this.pointStart),Ia.copy(this.pointEnd),Pi.applyQuaternion(this._worldQuaternionInv),Ia.applyQuaternion(this._worldQuaternionInv),Ia.divide(Pi),t.search("X")===-1&&(Ia.x=1),t.search("Y")===-1&&(Ia.y=1),t.search("Z")===-1&&(Ia.z=1);o.scale.copy(this._scaleStart).multiply(Ia),this.scaleSnap&&(t.search("X")!==-1&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(r==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const h=20/this.worldPosition.distanceTo(Pi.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Pi.copy(this.rotationAxis).cross(this.eye))*h):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(YC[t]),Pi.copy(YC[t]),l==="local"&&Pi.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Pi.cross(this.eye).normalize())*h),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&t!=="E"&&t!=="XYZE"?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(Hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(Hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Q1),this.dispatchEvent(ZC)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(QC.mode=this.mode,this.dispatchEvent(QC)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Q1),this.dispatchEvent(ZC),this.pointStart.copy(this.pointEnd))}getRaycaster(){return nu}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}Uz.prototype.isTransformControls=!0;function Bz(s){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:s.button};{const e=this.domElement.getBoundingClientRect();return{x:(s.clientX-e.left)/e.width*2-1,y:-(s.clientY-e.top)/e.height*2+1,button:s.button}}}function zz(s){if(!!this.enabled)switch(s.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(s));break}}function Hz(s){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(s.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(s)),this.pointerDown(this._getPointer(s)))}function Gz(s){!this.enabled||this.pointerMove(this._getPointer(s))}function Vz(s){!this.enabled||(this.domElement.releasePointerCapture(s.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(s)))}function Z1(s,e,t){const r=e.intersectObject(s,!0);for(let o=0;o<r.length;o++)if(r[o].object.visible||t)return r[o];return!1}const Hg=new Gr,Cn=new le(0,1,0),JC=new le(0,0,0),e2=new et,Gg=new Ct,Vg=new Ct,eo=new le,t2=new et,dd=new le(1,0,0),ru=new le(0,1,0),pd=new le(0,0,1),Wg=new le,md=new le,gd=new le;class n2 extends Ht{constructor(){super();this.type="TransformControlsGizmo";const e=new Ir({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Pn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),r=e.clone();r.opacity=.15;const o=t.clone();o.opacity=.5;const l=e.clone();l.color.setHex(16711680);const u=e.clone();u.color.setHex(65280);const h=e.clone();h.color.setHex(255);const m=e.clone();m.color.setHex(16711680),m.opacity=.5;const v=e.clone();v.color.setHex(65280),v.opacity=.5;const w=e.clone();w.color.setHex(255),w.opacity=.5;const S=e.clone();S.opacity=.25;const A=e.clone();A.color.setHex(16776960),A.opacity=.25,e.clone().color.setHex(16776960);const O=e.clone();O.color.setHex(7895160);const N=new Qn(0,.04,.1,12);N.translate(0,.05,0);const k=new zn(.08,.08,.08);k.translate(0,.04,0);const D=new xt;D.setAttribute("position",new mt([0,0,0,1,0,0],3));const P=new Qn(.0075,.0075,.5,3);P.translate(0,.25,0);function F(p,ee){const E=new Cs(p,.0075,3,64,ee*Math.PI*2);return E.rotateY(Math.PI/2),E.rotateX(Math.PI/2),E}function L(){const p=new xt;return p.setAttribute("position",new mt([0,0,0,1,1,1],3)),p}const z={X:[[new ot(N,l),[.5,0,0],[0,0,-Math.PI/2]],[new ot(N,l),[-.5,0,0],[0,0,Math.PI/2]],[new ot(P,l),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ot(N,u),[0,.5,0]],[new ot(N,u),[0,-.5,0],[Math.PI,0,0]],[new ot(P,u)]],Z:[[new ot(N,h),[0,0,.5],[Math.PI/2,0,0]],[new ot(N,h),[0,0,-.5],[-Math.PI/2,0,0]],[new ot(P,h),null,[Math.PI/2,0,0]]],XYZ:[[new ot(new As(.1,0),S.clone()),[0,0,0]]],XY:[[new ot(new zn(.15,.15,.01),w.clone()),[.15,.15,0]]],YZ:[[new ot(new zn(.15,.15,.01),m.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ot(new zn(.15,.15,.01),v.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},H={X:[[new ot(new Qn(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new ot(new Qn(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ot(new Qn(.2,0,.6,4),r),[0,.3,0]],[new ot(new Qn(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ot(new Qn(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new ot(new Qn(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ot(new As(.2,0),r)]],XY:[[new ot(new zn(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new ot(new zn(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ot(new zn(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]]},X={START:[[new ot(new As(.01,2),o),null,null,null,"helper"]],END:[[new ot(new As(.01,2),o),null,null,null,"helper"]],DELTA:[[new gr(L(),o),null,null,null,"helper"]],X:[[new gr(D,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new gr(D,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new gr(D,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},$={XYZE:[[new ot(F(.5,1),O),null,[0,Math.PI/2,0]]],X:[[new ot(F(.5,.5),l)]],Y:[[new ot(F(.5,.5),u),null,[0,0,-Math.PI/2]]],Z:[[new ot(F(.5,.5),h),null,[0,Math.PI/2,0]]],E:[[new ot(F(.75,1),A),null,[0,Math.PI/2,0]]]},J={AXIS:[[new gr(D,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},se={XYZE:[[new ot(new Ma(.25,10,8),r)]],X:[[new ot(new Cs(.5,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ot(new Cs(.5,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ot(new Cs(.5,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ot(new Cs(.75,.1,2,24),r)]]},ce={X:[[new ot(k,l),[.5,0,0],[0,0,-Math.PI/2]],[new ot(P,l),[0,0,0],[0,0,-Math.PI/2]],[new ot(k,l),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ot(k,u),[0,.5,0]],[new ot(P,u)],[new ot(k,u),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ot(k,h),[0,0,.5],[Math.PI/2,0,0]],[new ot(P,h),[0,0,0],[Math.PI/2,0,0]],[new ot(k,h),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ot(new zn(.15,.15,.01),w),[.15,.15,0]]],YZ:[[new ot(new zn(.15,.15,.01),m),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ot(new zn(.15,.15,.01),v),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ot(new zn(.1,.1,.1),S.clone())]]},pe={X:[[new ot(new Qn(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new ot(new Qn(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ot(new Qn(.2,0,.6,4),r),[0,.3,0]],[new ot(new Qn(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ot(new Qn(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new ot(new Qn(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ot(new zn(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new ot(new zn(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ot(new zn(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ot(new zn(.2,.2,.2),r),[0,0,0]]]},fe={X:[[new gr(D,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new gr(D,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new gr(D,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function b(p){const ee=new Ht;for(const E in p)for(let me=p[E].length;me--;){const Se=p[E][me][0].clone(),Te=p[E][me][1],ye=p[E][me][2],de=p[E][me][3],Re=p[E][me][4];Se.name=E,Se.tag=Re,Te&&Se.position.set(Te[0],Te[1],Te[2]),ye&&Se.rotation.set(ye[0],ye[1],ye[2]),de&&Se.scale.set(de[0],de[1],de[2]),Se.updateMatrix();const we=Se.geometry.clone();we.applyMatrix4(Se.matrix),Se.geometry=we,Se.renderOrder=1/0,Se.position.set(0,0,0),Se.rotation.set(0,0,0),Se.scale.set(1,1,1),ee.add(Se)}return ee}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=b(z)),this.add(this.gizmo.rotate=b($)),this.add(this.gizmo.scale=b(ce)),this.add(this.picker.translate=b(H)),this.add(this.picker.rotate=b(se)),this.add(this.picker.scale=b(pe)),this.add(this.helper.translate=b(X)),this.add(this.helper.rotate=b(J)),this.add(this.helper.scale=b(fe)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const r=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Vg;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let l=0;l<o.length;l++){const u=o[l];u.visible=!0,u.rotation.set(0,0,0),u.position.copy(this.worldPosition);let h;if(this.camera.isOrthographicCamera?h=(this.camera.top-this.camera.bottom)/this.camera.zoom:h=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),u.scale.set(1,1,1).multiplyScalar(h*this.size/4),u.tag==="helper"){u.visible=!1,u.name==="AXIS"?(u.position.copy(this.worldPositionStart),u.visible=!!this.axis,this.axis==="X"&&(Hn.setFromEuler(Hg.set(0,0,0)),u.quaternion.copy(r).multiply(Hn),Math.abs(Cn.copy(dd).applyQuaternion(r).dot(this.eye))>.9&&(u.visible=!1)),this.axis==="Y"&&(Hn.setFromEuler(Hg.set(0,0,Math.PI/2)),u.quaternion.copy(r).multiply(Hn),Math.abs(Cn.copy(ru).applyQuaternion(r).dot(this.eye))>.9&&(u.visible=!1)),this.axis==="Z"&&(Hn.setFromEuler(Hg.set(0,Math.PI/2,0)),u.quaternion.copy(r).multiply(Hn),Math.abs(Cn.copy(pd).applyQuaternion(r).dot(this.eye))>.9&&(u.visible=!1)),this.axis==="XYZE"&&(Hn.setFromEuler(Hg.set(0,Math.PI/2,0)),Cn.copy(this.rotationAxis),u.quaternion.setFromRotationMatrix(e2.lookAt(JC,Cn,ru)),u.quaternion.multiply(Hn),u.visible=this.dragging),this.axis==="E"&&(u.visible=!1)):u.name==="START"?(u.position.copy(this.worldPositionStart),u.visible=this.dragging):u.name==="END"?(u.position.copy(this.worldPosition),u.visible=this.dragging):u.name==="DELTA"?(u.position.copy(this.worldPositionStart),u.quaternion.copy(this.worldQuaternionStart),Pi.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Pi.applyQuaternion(this.worldQuaternionStart.clone().invert()),u.scale.copy(Pi),u.visible=this.dragging):(u.quaternion.copy(r),this.dragging?u.position.copy(this.worldPositionStart):u.position.copy(this.worldPosition),this.axis&&(u.visible=this.axis.search(u.name)!==-1));continue}if(u.quaternion.copy(r),this.mode==="translate"||this.mode==="scale"){const m=.99,v=.2;u.name==="X"&&Math.abs(Cn.copy(dd).applyQuaternion(r).dot(this.eye))>m&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1),u.name==="Y"&&Math.abs(Cn.copy(ru).applyQuaternion(r).dot(this.eye))>m&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1),u.name==="Z"&&Math.abs(Cn.copy(pd).applyQuaternion(r).dot(this.eye))>m&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1),u.name==="XY"&&Math.abs(Cn.copy(pd).applyQuaternion(r).dot(this.eye))<v&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1),u.name==="YZ"&&Math.abs(Cn.copy(dd).applyQuaternion(r).dot(this.eye))<v&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1),u.name==="XZ"&&Math.abs(Cn.copy(ru).applyQuaternion(r).dot(this.eye))<v&&(u.scale.set(1e-10,1e-10,1e-10),u.visible=!1)}else this.mode==="rotate"&&(Gg.copy(r),Cn.copy(this.eye).applyQuaternion(Hn.copy(r).invert()),u.name.search("E")!==-1&&u.quaternion.setFromRotationMatrix(e2.lookAt(this.eye,JC,ru)),u.name==="X"&&(Hn.setFromAxisAngle(dd,Math.atan2(-Cn.y,Cn.z)),Hn.multiplyQuaternions(Gg,Hn),u.quaternion.copy(Hn)),u.name==="Y"&&(Hn.setFromAxisAngle(ru,Math.atan2(Cn.x,Cn.z)),Hn.multiplyQuaternions(Gg,Hn),u.quaternion.copy(Hn)),u.name==="Z"&&(Hn.setFromAxisAngle(pd,Math.atan2(Cn.y,Cn.x)),Hn.multiplyQuaternions(Gg,Hn),u.quaternion.copy(Hn)));u.visible=u.visible&&(u.name.indexOf("X")===-1||this.showX),u.visible=u.visible&&(u.name.indexOf("Y")===-1||this.showY),u.visible=u.visible&&(u.name.indexOf("Z")===-1||this.showZ),u.visible=u.visible&&(u.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),u.material._color=u.material._color||u.material.color.clone(),u.material._opacity=u.material._opacity||u.material.opacity,u.material.color.copy(u.material._color),u.material.opacity=u.material._opacity,this.enabled&&this.axis&&(u.name===this.axis||this.axis.split("").some(function(m){return u.name===m}))&&(u.material.color.setHex(16776960),u.material.opacity=1)}super.updateMatrixWorld(e)}}n2.prototype.isTransformControlsGizmo=!0;class r2 extends ot{constructor(){super(new ya(1e5,1e5,2,2),new Ir({visible:!1,wireframe:!0,side:bs,transparent:!0,opacity:.1,toneMapped:!1}));this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),Wg.copy(dd).applyQuaternion(t==="local"?this.worldQuaternion:Vg),md.copy(ru).applyQuaternion(t==="local"?this.worldQuaternion:Vg),gd.copy(pd).applyQuaternion(t==="local"?this.worldQuaternion:Vg),Cn.copy(md),this.mode){case"translate":case"scale":switch(this.axis){case"X":Cn.copy(this.eye).cross(Wg),eo.copy(Wg).cross(Cn);break;case"Y":Cn.copy(this.eye).cross(md),eo.copy(md).cross(Cn);break;case"Z":Cn.copy(this.eye).cross(gd),eo.copy(gd).cross(Cn);break;case"XY":eo.copy(gd);break;case"YZ":eo.copy(Wg);break;case"XZ":Cn.copy(gd),eo.copy(md);break;case"XYZ":case"E":eo.set(0,0,0);break}break;case"rotate":default:eo.set(0,0,0)}eo.length()===0?this.quaternion.copy(this.cameraQuaternion):(t2.lookAt(Pi.set(0,0,0),eo,Cn),this.quaternion.setFromRotationMatrix(t2)),super.updateMatrixWorld(e)}}r2.prototype.isTransformControlsPlane=!0;/*!
 * @pixiv/three-vrm v1.0.0-beta.16
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2021 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.0-beta.16
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class i2 extends Ht{constructor(e){super();this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight===0?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(o=>o.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function dn(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}function s2(s,e,t){var r,o;const l=s.parser.json,u=(r=l.nodes)===null||r===void 0?void 0:r[e];if(u==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const h=u.mesh;if(h==null)return null;const m=(o=l.meshes)===null||o===void 0?void 0:o[h];if(m==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${h}] of glTF but the mesh doesn't exist`),null;const v=m.primitives.length,w=[];return t.traverse(S=>{w.length<v&&S.isMesh&&w.push(S)}),w}function o2(s,e){return dn(this,void 0,void 0,function*(){const t=yield s.parser.getDependency("node",e);return s2(s,e,t)})}function a2(s){return dn(this,void 0,void 0,function*(){const e=yield s.parser.getDependencies("node"),t=new Map;return e.forEach((r,o)=>{const l=s2(s,o,r);l!=null&&t.set(o,l)}),t})}function l2(s,e){var t,r;const o=parseInt(Hi,10);let l=null;if(o>=133)l=(r=(t=s.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const h=s.associations.get(e);(h==null?void 0:h.type)==="materials"&&(l=h.index)}return l}const J1={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function u2(s){return Math.max(Math.min(s,1),0)}class $g{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(J1));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)&&(e[r]=o)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(J1));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)||(e[r]=o)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new $g().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=u2(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const o=t.expressionName;this.blinkExpressionNames.indexOf(o)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(o)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(o)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(o=>{e-=o.overrideBlinkAmount,t-=o.overrideLookAtAmount,r-=o.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const Wz=new Qe;class jg{constructor({material:e,type:t,targetValue:r}){var o,l,u;this.material=e,this.type=t,this.targetValue=r;const h=(o=Object.entries(jg._propertyNameMapMap).find(([v])=>e[v]===!0))===null||o===void 0?void 0:o[1],m=(l=h==null?void 0:h[t])!==null&&l!==void 0?l:null;if(m==null)console.warn(`Tried to add a material color bind to the material ${(u=e.name)!==null&&u!==void 0?u:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const w=e[m].clone(),S=this.targetValue.clone().sub(w);this._state={propertyName:m,initialValue:w,deltaValue:S}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,o=this.material[t];o!==void 0&&(o.add(Wz.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}jg._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineFactor",rimColor:"rimFactor",shadeColor:"shadeFactor"}};class c2{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const f2=new je;class qg{constructor({material:e,scale:t,offset:r}){var o,l;this.material=e,this.scale=t,this.offset=r;const u=(o=Object.entries(qg._propertyNamesMap).find(([h])=>e[h]===!0))===null||o===void 0?void 0:o[1];u==null?(console.warn(`Tried to add a texture transform bind to the material ${(l=e.name)!==null&&l!==void 0?l:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],u.forEach(h=>{var m;const v=(m=e[h])===null||m===void 0?void 0:m.clone();if(!v)return null;e[h]=v;const w=v.offset.clone(),S=v.repeat.clone(),A=r.clone().sub(w),R=t.clone().sub(S);this._properties.push({name:h,initialOffset:w,deltaOffset:A,initialScale:S,deltaScale:R})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(f2.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(f2.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}qg._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};class Xg{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return dn(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return dn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return dn(this,void 0,void 0,function*(){const o=this.parser.json;if(!(((t=o.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const u=(r=o.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!u||u.specVersion!=="1.0-beta")return null;const m=u.expressions;if(!m)return null;const v=new Set(Object.values(J1)),w=new Map;m.preset!=null&&Object.entries(m.preset).forEach(([A,R])=>{if(R!=null){if(!v.has(A)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${A}" detected. Ignoring the expression`);return}w.set(A,R)}}),m.custom!=null&&Object.entries(m.custom).forEach(([A,R])=>{if(v.has(A)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${A}". Ignoring the expression`);return}w.set(A,R)});const S=new $g;return yield Promise.all(Array.from(w.entries()).map(([A,R])=>dn(this,void 0,void 0,function*(){var O,N,k,D,P,F,L;const z=new i2(A);if(e.scene.add(z),z.isBinary=(O=R.isBinary)!==null&&O!==void 0?O:!1,z.overrideBlink=(N=R.overrideBlink)!==null&&N!==void 0?N:"none",z.overrideLookAt=(k=R.overrideLookAt)!==null&&k!==void 0?k:"none",z.overrideMouth=(D=R.overrideMouth)!==null&&D!==void 0?D:"none",(P=R.morphTargetBinds)===null||P===void 0||P.forEach(H=>dn(this,void 0,void 0,function*(){var X;if(H.node===void 0||H.index===void 0)return;const $=yield o2(e,H.node),J=H.index;if(!$.every(se=>Array.isArray(se.morphTargetInfluences)&&J<se.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${R.name} attempts to index morph #${J} but not found.`);return}z.addBind(new c2({primitives:$,index:J,weight:(X=H.weight)!==null&&X!==void 0?X:1}))})),R.materialColorBinds||R.textureTransformBinds){const H=[];e.scene.traverse(X=>{const $=X.material;$&&H.push($)}),(F=R.materialColorBinds)===null||F===void 0||F.forEach(X=>dn(this,void 0,void 0,function*(){H.filter(J=>{const se=l2(this.parser,J);return X.material===se}).forEach(J=>{z.addBind(new jg({material:J,type:X.type,targetValue:new Qe().fromArray(X.targetValue)}))})})),(L=R.textureTransformBinds)===null||L===void 0||L.forEach(X=>dn(this,void 0,void 0,function*(){H.filter(J=>{const se=l2(this.parser,J);return X.material===se}).forEach(J=>{var se,ce;z.addBind(new qg({material:J,offset:new je().fromArray((se=X.offset)!==null&&se!==void 0?se:[0,0]),scale:new je().fromArray((ce=X.scale)!==null&&ce!==void 0?ce:[1,1])}))})}))}S.registerExpression(z)}))),S})}_v0Import(e){var t;return dn(this,void 0,void 0,function*(){const r=this.parser.json,o=(t=r.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.blendShapeMaster;if(!l)return null;const u=new $g,h=l.blendShapeGroups;if(!h)return u;const m=new Set;return yield Promise.all(h.map(v=>dn(this,void 0,void 0,function*(){var w;const S=v.presetName,A=S!=null&&Xg.v0v1PresetNameMap[S]||null,R=A!=null?A:v.name;if(R==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(m.has(R)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${S} has duplicated entries. Ignoring the expression`);return}m.add(R);const O=new i2(R);e.scene.add(O),O.isBinary=(w=v.isBinary)!==null&&w!==void 0?w:!1,v.binds&&v.binds.forEach(k=>dn(this,void 0,void 0,function*(){var D;if(k.mesh===void 0||k.index===void 0)return;const P=[];(D=r.nodes)===null||D===void 0||D.forEach((L,z)=>{L.mesh===k.mesh&&P.push(z)});const F=k.index;yield Promise.all(P.map(L=>dn(this,void 0,void 0,function*(){var z;const H=yield o2(e,L);if(!H.every(X=>Array.isArray(X.morphTargetInfluences)&&F<X.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${v.name} attempts to index ${F}th morph but not found.`);return}O.addBind(new c2({primitives:H,index:F,weight:.01*((z=k.weight)!==null&&z!==void 0?z:100)}))})))}));const N=v.materialValues;N&&N.length!==0&&console.warn("Material binds of VRM 0.0 are not supported. Setup the model in VRM 1.0 and try again"),u.registerExpression(O)}))),u})}}Xg.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class to{constructor(e,t){this._firstPersonOnlyLayer=to.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=to.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new to(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=to.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=to.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(o=>{r.type==="firstPersonOnly"?(o.layers.set(this._firstPersonOnlyLayer),o.traverse(l=>l.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(o.layers.set(this._thirdPersonOnlyLayer),o.traverse(l=>l.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(o)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,o){let l=0;if(t!=null&&t.length>0)for(let u=0;u<e.length;u+=3){const h=e[u],m=e[u+1],v=e[u+2],w=t[h],S=r[h];if(w[0]>0&&o.includes(S[0])||w[1]>0&&o.includes(S[1])||w[2]>0&&o.includes(S[2])||w[3]>0&&o.includes(S[3]))continue;const A=t[m],R=r[m];if(A[0]>0&&o.includes(R[0])||A[1]>0&&o.includes(R[1])||A[2]>0&&o.includes(R[2])||A[3]>0&&o.includes(R[3]))continue;const O=t[v],N=r[v];O[0]>0&&o.includes(N[0])||O[1]>0&&o.includes(N[1])||O[2]>0&&o.includes(N[2])||O[3]>0&&o.includes(N[3])||(e[l++]=h,e[l++]=m,e[l++]=v)}return l}_createErasedMesh(e,t){const r=new kl(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const o=r.geometry,l=o.getAttribute("skinIndex").array,u=[];for(let R=0;R<l.length;R+=4)u.push([l[R],l[R+1],l[R+2],l[R+3]]);const h=o.getAttribute("skinWeight").array,m=[];for(let R=0;R<h.length;R+=4)m.push([h[R],h[R+1],h[R+2],h[R+3]]);const v=o.getIndex();if(!v)throw new Error("The geometry doesn't have an index buffer");const w=Array.from(v.array),S=this._excludeTriangles(w,m,u,t),A=[];for(let R=0;R<S;R++)A[R]=w[R];return o.setIndex(A),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new wa(e.skeleton.bones,e.skeleton.boneInverses),new et),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((l,u)=>{this._isEraseTarget(l)&&r.push(u)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const o=this._createErasedMesh(t,r);e.add(o)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Vr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const o=r;this._createHeadlessModelForSkinnedMesh(t,o)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}to.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;to.DEFAULT_THIRDPERSON_ONLY_LAYER=10;class $z{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return dn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return dn(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);if(r)return r;const o=yield this._v0Import(e,t);return o||null})}_v1Import(e,t){var r,o;return dn(this,void 0,void 0,function*(){const l=this.parser.json;if(!(((r=l.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const h=(o=l.extensions)===null||o===void 0?void 0:o.VRMC_vrm;if(!h||h.specVersion!=="1.0-beta")return null;const v=h.firstPerson;if(!v)return null;const w=[],S=yield a2(e);return Array.from(S.entries()).forEach(([A,R])=>{var O;const N=v.meshAnnotations?v.meshAnnotations.find(k=>k.node===A):void 0;w.push({meshes:R,type:(O=N==null?void 0:N.type)!==null&&O!==void 0?O:"both"})}),new to(t,w)})}_v0Import(e,t){var r;return dn(this,void 0,void 0,function*(){const o=this.parser.json,l=(r=o.extensions)===null||r===void 0?void 0:r.VRM;if(!l)return null;const u=l.firstPerson;if(!u)return null;const h=[],m=yield a2(e);return Array.from(m.entries()).forEach(([v,w])=>{const S=o.nodes[v],A=u.meshAnnotations?u.meshAnnotations.find(R=>R.mesh===S.mesh):void 0;h.push({meshes:w,type:this._convertV0FlagToV1Type(A==null?void 0:A.firstPersonFlag)})}),new to(t,h)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}function h2(s){return s.invert?s.invert():s.inverse(),s}const iu=new le,su=new Ct;class Yg{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}copy(e){return this.humanBones=e.humanBones,this.restPose=e.restPose,this}clone(){return new Yg(this.humanBones).copy(this)}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);!o||(iu.copy(o.position),su.copy(o.quaternion),e[r]={position:iu.toArray(),rotation:su.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);if(!o)return;iu.set(0,0,0),su.identity();const l=this.restPose[r];(l==null?void 0:l.position)&&iu.fromArray(l.position).negate(),(l==null?void 0:l.rotation)&&h2(su.fromArray(l.rotation)),iu.add(o.position),su.premultiply(o.quaternion),e[r]={position:iu.toArray(),rotation:su.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const o=t,l=this.getBoneNode(o);if(!l)return;const u=this.restPose[o];!u||((r==null?void 0:r.position)&&(l.position.fromArray(r.position),u.position&&l.position.add(iu.fromArray(u.position))),(r==null?void 0:r.rotation)&&(l.quaternion.fromArray(r.rotation),u.rotation&&l.quaternion.multiply(su.fromArray(u.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);!r||((t==null?void 0:t.position)&&r.position.fromArray(t.position),(t==null?void 0:t.rotation)&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const jz={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"};class qz{constructor(e){this.parser=e}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return dn(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return dn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return dn(this,void 0,void 0,function*(){const o=this.parser.json;if(!(((t=o.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const u=(r=o.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!u||u.specVersion!=="1.0-beta")return null;const m=u.humanoid;if(!m)return null;const v={};return m.humanBones!=null&&(yield Promise.all(Object.entries(m.humanBones).map(([w,S])=>dn(this,void 0,void 0,function*(){const A=w,R=S.node,O=yield this.parser.getDependency("node",R);if(O==null){console.warn(`A glTF node bound to the humanoid bone ${A} (index = ${R}) does not exist`);return}v[A]={node:O}})))),new Yg(this._ensureRequiredBonesExist(v))})}_v0Import(e){var t;return dn(this,void 0,void 0,function*(){const o=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.humanoid;if(!l)return null;const u={};return l.humanBones!=null&&(yield Promise.all(l.humanBones.map(h=>dn(this,void 0,void 0,function*(){const m=h.bone,v=h.node;if(m==null||v==null)return;const w=yield this.parser.getDependency("node",v);if(w==null){console.warn(`A glTF node bound to the humanoid bone ${m} (index = ${v}) does not exist`);return}if(u[m]!=null){console.warn(`Multiple bone entries for ${m} detected (index = ${v}), ignoring duplicated entries.`);return}u[m]={node:w}})))),new Yg(this._ensureRequiredBonesExist(u))})}_ensureRequiredBonesExist(e){const t=Object.values(jz).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class d2 extends xt{constructor(){super();this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new Dt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class Xz extends xt{constructor(){super();this.radius=0,this._currentRadius=0,this.tail=new le,this._currentTail=new le,this._attrPos=new Dt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const Kg=new Ct,p2=new Ct,vd=new le,m2=new le,g2=Math.sqrt(2)/2,Yz=new Ct(0,0,-g2,g2),Kz=new le(0,1,0);class Qz extends Vr{constructor(e){super();this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new d2;t.radius=.5;const r=new Ir({color:65280,transparent:!0,opacity:.5,side:bs,depthTest:!1,depthWrite:!1});this._meshPitch=new ot(t,r),this.add(this._meshPitch)}{const t=new d2;t.radius=.5;const r=new Ir({color:16711680,transparent:!0,opacity:.5,side:bs,depthTest:!1,depthWrite:!1});this._meshYaw=new ot(t,r),this.add(this._meshYaw)}{const t=new Xz;t.radius=.1;const r=new Pn({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new kr(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){const t=hn.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update();const r=hn.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(vd),this.vrmLookAt.getLookAtWorldQuaternion(Kg),Kg.multiply(this.vrmLookAt.getFaceFrontQuaternion(p2)),this._meshYaw.position.copy(vd),this._meshYaw.quaternion.copy(Kg),this._meshPitch.position.copy(vd),this._meshPitch.quaternion.copy(Kg),this._meshPitch.quaternion.multiply(p2.setFromAxisAngle(Kz,t)),this._meshPitch.quaternion.multiply(Yz);const{target:o,autoUpdate:l}=this.vrmLookAt;o!=null&&l&&(o.getWorldPosition(m2).sub(vd),this._lineTarget.geometry.tail.copy(m2),this._lineTarget.geometry.update(),this._lineTarget.position.copy(vd)),super.updateMatrixWorld(e)}}const Zz=new le,Jz=new le;function eH(s,e){return s.matrixWorld.decompose(Zz,e,Jz),e}function Qg(s){return[Math.atan2(-s.z,s.x),Math.atan2(s.y,Math.sqrt(s.x*s.x+s.z*s.z))]}function v2(s){const e=Math.round(s/2/Math.PI);return s-2*Math.PI*e}const y2=new le(0,0,1),tH=new le,nH=new le,rH=new le,iH=new Ct,x2=new Ct,_2=new Ct,e_=new Gr;class Zg{constructor(e,t){this.offsetFromHeadBone=new le,this.autoUpdate=!0,this.faceFront=new le(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new Gr)}getEuler(e){return e.set(hn.DEG2RAD*this._pitch,hn.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new Zg(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getBoneNode("head");return eH(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(y2)<.01)return e.identity();const[t,r]=Qg(this.faceFront);return e_.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(e_)}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(x2),this.getFaceFrontQuaternion(_2),e.copy(y2).applyQuaternion(x2).applyQuaternion(_2).applyEuler(this.getEuler(e_))}lookAt(e){const t=h2(this.getLookAtWorldQuaternion(iH)),r=this.getLookAtWorldPosition(nH),o=rH.copy(e).sub(r).applyQuaternion(t).normalize(),[l,u]=Qg(this.faceFront),[h,m]=Qg(o),v=v2(h-l),w=v2(u-m);this._yaw=hn.RAD2DEG*v,this._pitch=hn.RAD2DEG*w,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(tH)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}Zg.EULER_ORDER="YXZ";const sH=new le(0,0,1),Jg=new Ct,tf=new Ct,ls=new Gr(0,0,0,"YXZ");class e0{constructor(e,t,r,o,l){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l,this.faceFront=new le(0,0,1),this._restQuatLeftEye=new Ct,this._restQuatRightEye=new Ct;const u=this.humanoid.getBoneNode("leftEye"),h=this.humanoid.getBoneNode("leftEye");u&&this._restQuatLeftEye.copy(u.quaternion),h&&this._restQuatRightEye.copy(h.quaternion)}applyYawPitch(e,t){const r=this.humanoid.getBoneNode("leftEye"),o=this.humanoid.getBoneNode("rightEye");r&&(t<0?ls.x=-hn.DEG2RAD*this.rangeMapVerticalDown.map(-t):ls.x=hn.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?ls.y=-hn.DEG2RAD*this.rangeMapHorizontalInner.map(-e):ls.y=hn.DEG2RAD*this.rangeMapHorizontalOuter.map(e),Jg.setFromEuler(ls),this._getFaceFrontQuaternion(tf),r.quaternion.copy(tf).premultiply(Jg).premultiply(tf.invert()).multiply(this._restQuatLeftEye)),o&&(t<0?ls.x=-hn.DEG2RAD*this.rangeMapVerticalDown.map(-t):ls.x=hn.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?ls.y=-hn.DEG2RAD*this.rangeMapHorizontalOuter.map(-e):ls.y=hn.DEG2RAD*this.rangeMapHorizontalInner.map(e),Jg.setFromEuler(ls),this._getFaceFrontQuaternion(tf),o.quaternion.copy(tf).premultiply(Jg).premultiply(tf.invert()).multiply(this._restQuatRightEye))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=hn.RAD2DEG*e.y,r=hn.RAD2DEG*e.x;this.applyYawPitch(t,r)}_getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(sH)<.01)return e.identity();const[t,r]=Qg(this.faceFront);return ls.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(ls)}}e0.type="bone";class t_{constructor(e,t,r,o,l){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l}applyYawPitch(e,t){t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),e<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-e))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(e)))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=hn.RAD2DEG*e.y,r=hn.RAD2DEG*e.x;this.applyYawPitch(t,r)}}t_.type="expression";class w2{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*u2(e/this.inputMaxValue)}}class oH{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return dn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return dn(this,void 0,void 0,function*(){if(t==null||r==null)return null;const o=yield this._v1Import(e,t,r);if(o)return o;const l=yield this._v0Import(e,t,r);return l||null})}_v1Import(e,t,r){var o,l,u;return dn(this,void 0,void 0,function*(){const h=this.parser.json;if(!(((o=h.extensionsUsed)===null||o===void 0?void 0:o.indexOf("VRMC_vrm"))!==-1))return null;const v=(l=h.extensions)===null||l===void 0?void 0:l.VRMC_vrm;if(!v||v.specVersion!=="1.0-beta")return null;const S=v.lookAt;if(!S)return null;const A=S.type==="expression"?1:10,R=this._v1ImportRangeMap(S.rangeMapHorizontalInner,A),O=this._v1ImportRangeMap(S.rangeMapHorizontalOuter,A),N=this._v1ImportRangeMap(S.rangeMapVerticalDown,A),k=this._v1ImportRangeMap(S.rangeMapVerticalUp,A);let D;S.type==="expression"?D=new t_(r,R,O,N,k):D=new e0(t,R,O,N,k);const P=this._importLookAt(t,D);return P.offsetFromHeadBone.fromArray((u=S.offsetFromHeadBone)!==null&&u!==void 0?u:[0,.06,0]),P})}_v1ImportRangeMap(e,t){var r,o;return new w2((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.outputScale)!==null&&o!==void 0?o:t)}_v0Import(e,t,r){var o,l,u,h;return dn(this,void 0,void 0,function*(){const v=(o=this.parser.json.extensions)===null||o===void 0?void 0:o.VRM;if(!v)return null;const w=v.firstPerson;if(!w)return null;const S=w.lookAtTypeName==="BlendShape"?1:10,A=this._v0ImportDegreeMap(w.lookAtHorizontalInner,S),R=this._v0ImportDegreeMap(w.lookAtHorizontalOuter,S),O=this._v0ImportDegreeMap(w.lookAtVerticalDown,S),N=this._v0ImportDegreeMap(w.lookAtVerticalUp,S);let k;w.lookAtTypeName==="BlendShape"?k=new t_(r,A,R,O,N):k=new e0(t,A,R,O,N);const D=this._importLookAt(t,k);return w.firstPersonBoneOffset?D.offsetFromHeadBone.set((l=w.firstPersonBoneOffset.x)!==null&&l!==void 0?l:0,(u=w.firstPersonBoneOffset.y)!==null&&u!==void 0?u:.06,-((h=w.firstPersonBoneOffset.z)!==null&&h!==void 0?h:0)):D.offsetFromHeadBone.set(0,.06,0),D.faceFront.set(0,0,-1),k instanceof e0&&k.faceFront.set(0,0,-1),D})}_v0ImportDegreeMap(e,t){var r,o;const l=e==null?void 0:e.curve;return JSON.stringify(l)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new w2((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.yRange)!==null&&o!==void 0?o:t)}_importLookAt(e,t){const r=new Zg(e,t);if(this.helperRoot){const o=new Qz(r);this.helperRoot.add(o),o.renderOrder=this.helperRoot.renderOrder}return r}}function aH(s,e){return typeof s!="string"||s===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(s)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(s)||/^data:.*,.*$/i.test(s)||/^blob:.*$/i.test(s)?s:e+s)}class lH{constructor(e,t){var r,o,l;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)!==null&&r!==void 0?r:!0,this.acceptLicenseUrls=(o=t==null?void 0:t.acceptLicenseUrls)!==null&&o!==void 0?o:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(l=t==null?void 0:t.acceptV0Meta)!==null&&l!==void 0?l:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return dn(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return dn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o;return dn(this,void 0,void 0,function*(){const l=this.parser.json;if(!(((t=l.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const h=(r=l.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(h==null||h.specVersion!=="1.0-beta")return null;const v=h.meta;if(!v)return null;const w=v.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(w))throw new Error(`VRMMetaLoaderPlugin: The license url "${w}" is not accepted`);let A;return this.needThumbnailImage&&v.thumbnailImage!=null&&(A=(o=yield this._extractGLTFImage(v.thumbnailImage))!==null&&o!==void 0?o:void 0),{metaVersion:"1",name:v.name,version:v.version,authors:v.authors,copyrightInformation:v.copyrightInformation,contactInformation:v.contactInformation,references:v.references,thirdPartyLicenses:v.thirdPartyLicenses,thumbnailImage:A,licenseUrl:v.licenseUrl,avatarPermission:v.avatarPermission,allowExcessivelyViolentUsage:v.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:v.allowExcessivelySexualUsage,commercialUsage:v.commercialUsage,allowPoliticalOrReligiousUsage:v.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:v.allowAntisocialOrHateUsage,creditNotation:v.creditNotation,allowRedistribution:v.allowRedistribution,modification:v.modification,otherLicenseUrl:v.otherLicenseUrl}})}_v0Import(e){var t;return dn(this,void 0,void 0,function*(){const o=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.meta;if(!l)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.X meta but acceptV0Meta is false");let u;return this.needThumbnailImage&&l.texture!=null&&l.texture!==-1&&(u=yield this.parser.getDependency("texture",l.texture)),{metaVersion:"0",allowedUserName:l.allowedUserName,author:l.author,commercialUssageName:l.commercialUssageName,contactInformation:l.contactInformation,licenseName:l.licenseName,otherLicenseUrl:l.otherLicenseUrl,otherPermissionUrl:l.otherPermissionUrl,reference:l.reference,sexualUssageName:l.sexualUssageName,texture:u!=null?u:void 0,title:l.title,version:l.version,violentUssageName:l.violentUssageName}})}_extractGLTFImage(e){var t;return dn(this,void 0,void 0,function*(){const o=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(o==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let l=o.uri;if(o.bufferView!=null){const h=yield this.parser.getDependency("bufferView",o.bufferView),m=new Blob([h],{type:o.mimeType});l=URL.createObjectURL(m)}return l==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new Fc().loadAsync(aH(l,this.parser.options.path)).catch(h=>(console.error(h),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class uH{constructor(e){this.scene=e.scene,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt,this.meta=e.meta}update(e){this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class cH extends uH{constructor(e){super(e);this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t0(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.0-beta.16
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ou(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}var fH=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,hH=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, uvRotSin, -uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, uv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, uv ) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        #if THREE_VRM_THREE_REVISION >= 133
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #if defined( OUTLINE )
    gl_FragColor = vec4(
      outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor ),
      diffuseColor.a
    );
    postCorrection();
    return;
  #endif

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}`;const dH={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},n_={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},pH=3002,mH=3004,gH=3005,vH=3006,yH=3007,xH=s=>{if(parseInt(Hi,10)>=136)switch(s){case Gi:return["Linear","( value )"];case Xt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}else switch(s){case Gi:return["Linear","( value )"];case Xt:return["sRGB","( value )"];case pH:return["RGBE","( value )"];case mH:return["RGBM","( value, 7.0 )"];case gH:return["RGBM","( value, 16.0 )"];case vH:return["RGBD","( value, 256.0 )"];case yH:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+s)}},r_=(s,e)=>{const t=xH(e);return"vec4 "+s+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function i_(s,e){let t;return s&&s.isTexture?t=s.encoding:t=Gi,parseInt(Hi,10)>=133&&e&&s&&s.isTexture&&s.format===Ti&&s.type===yo&&s.encoding===Xt&&(t=Gi),t}class s_ extends ji{constructor(e={}){super({vertexShader:fH,fragmentShader:hH});this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=_o,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=dH.None,this._outlineWidthMode=n_.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(Hi,10)<129&&(e.skinning=e.skinning||!1),parseInt(Hi,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=xx.merge([at.common,at.normalmap,at.emissivemap,at.fog,at.lights,{litFactor:{value:new Qe(1,1,1)},mapUvTransform:{value:new yn},colorAlpha:{value:1},normalMapUvTransform:{value:new yn},shadeColorFactor:{value:new Qe(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new yn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new yn},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Qe(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new yn},parametricRimColorFactor:{value:new Qe(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new yn},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Qe(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new yn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new yn},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Qe(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new yn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[this._ignoreVertexColor?"ignoreVertexColor":"",this._v0CompatShade?"v0CompatShade":"",this._debugMode!=="none"?`debugMode:${this._debugMode}`:"",this._outlineWidthMode!=="none"?`outlineWidthMode:${this._outlineWidthMode}`:"",this._isOutline?"isOutline":"",...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const o=r.capabilities.isWebGL2,l=parseInt(Hi,10),u=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([m,v])=>!!v).map(([m,v])=>`#define ${m} ${v}`).join(`
`)+`
`;let h="";parseInt(Hi,10)<137&&(h=(this.matcapTexture!==null?r_("matcapTextureTexelToLinear",i_(this.matcapTexture,o))+`
`:"")+(this.shadeMultiplyTexture!==null?r_("shadeMultiplyTextureTexelToLinear",i_(this.shadeMultiplyTexture,o))+`
`:"")+(this.rimMultiplyTexture!==null?r_("rimMultiplyTextureTexelToLinear",i_(this.rimMultiplyTexture,o))+`
`:"")),t.vertexShader=u+t.vertexShader,t.fragmentShader=u+h+t.fragmentShader,l<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(e){this.uniforms.emissiveIntensity.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(Hi,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(Hi,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._outlineWidthMode===n_.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._outlineWidthMode===n_.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class _H{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Qe().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return ou(this,void 0,void 0,function*(){const o=(()=>ou(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=Xt))}))();return this._pendings.push(o),o})}assignTextureByIndex(e,t,r){return ou(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}class yd{constructor(e,t={}){var r,o,l;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(o=t.v0CompatShade)!==null&&o!==void 0?o:!1,this.debugMode=(l=t.debugMode)!==null&&l!==void 0?l:"none",this._mToonMaterialSet=new Set}get name(){return yd.EXTENSION_NAME}beforeRoot(){return ou(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return ou(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?s_:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){var t;return ou(this,void 0,void 0,function*(){const r=this.parser,l=(t=r.json.meshes)===null||t===void 0?void 0:t[e];if(l==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const u=l.primitives,h=yield r.loadMesh(e);if(u.length===1){const m=h,v=u[0].material;v!=null&&this._setupPrimitive(m,v)}else{const m=h;for(let v=0;v<u.length;v++){const w=m.children[v],S=u[v].material;S!=null&&this._setupPrimitive(w,S)}}return h})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((o,l)=>{var u;this._getMToonExtension(l)&&((u=o.extensions)===null||u===void 0?void 0:u.KHR_materials_unlit)&&delete o.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const u=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(u==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const h=(r=u.extensions)===null||r===void 0?void 0:r[yd.EXTENSION_NAME];if(!(h==null||h.specVersion!=="1.0-beta"))return h}_extendMaterialParams(e,t){var r;return ou(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const o=new _H(this.parser,t);o.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),o.assignColor("shadeColorFactor",e.shadeColorFactor),o.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),o.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),o.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),o.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),o.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),o.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),o.assignColor("matcapFactor",e.matcapFactor),o.assignTexture("matcapTexture",e.matcapTexture,!0),o.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),o.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),o.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),o.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),o.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),o.assignPrimitive("outlineWidthMode",e.outlineWidthMode),o.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),o.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),o.assignColor("outlineColorFactor",e.outlineColorFactor),o.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),o.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),o.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),o.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),o.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),o.assignPrimitive("v0CompatShade",this.v0CompatShade),o.assignPrimitive("debugMode",this.debugMode),yield o.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const o=this._parseRenderOrder(r);e.renderOrder=o+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof s_)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=Mi,e.material.push(r);const o=e.geometry,l=o.index?o.index.count:o.attributes.position.count/3;o.addGroup(0,l,0),o.addGroup(0,l,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(o=>r.add(o)):r.add(t);for(const o of r)o instanceof s_&&this._mToonMaterialSet.add(o)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}yd.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.0-beta.16
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wH(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}class xd{constructor(e){this.parser=e}get name(){return xd.EXTENSION_NAME}extendMaterialParams(e,t){return wH(this,void 0,void 0,function*(){const r=this._getHDREmissiveMultiplierExtension(e);if(r==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const o=r.emissiveMultiplier;t.emissiveIntensity=o})}_getHDREmissiveMultiplierExtension(e){var t,r;const u=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(u==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const h=(r=u.extensions)===null||r===void 0?void 0:r[xd.EXTENSION_NAME];if(h!=null)return h}}xd.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.0-beta.16
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bH(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}function nf(s){return Math.pow(s,2.2)}class SH{constructor(e){var t;this.parser=e;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return bH(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,o=r==null?void 0:r.materialProperties;!o||o.forEach((l,u)=>{var h,m;const v=(h=t.materials)===null||h===void 0?void 0:h[u];if(v==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${u}] of glTF but the material doesn't exist`);return}if(l.shader==="VRM/MToon"){const w=this._parseV0MToonProperties(l,v);t.materials[u]=w}else if((m=l.shader)===null||m===void 0?void 0:m.startsWith("VRM/Unlit")){const w=this._parseV0UnlitProperties(l,v);t.materials[u]=w}else l.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${l.shader}`)})})}_parseV0MToonProperties(e,t){var r,o,l,u,h,m,v,w,S,A,R,O,N,k,D,P,F,L,z,H,X,$,J,se,ce,pe,fe,b,p,ee,E,me,Se,Te,ye,de,Re,we,Ie,Me,Be,Ve,qe,W;const We=(o=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,Pe=((l=e.floatProperties)===null||l===void 0?void 0:l._ZWrite)===1&&We,Ye=this._v0ParseRenderQueue(e),Fe=(h=(u=e.keywordMap)===null||u===void 0?void 0:u._ALPHATEST_ON)!==null&&h!==void 0?h:!1,oe=We?"BLEND":Fe?"MASK":"OPAQUE",St=Fe?(m=e.floatProperties)===null||m===void 0?void 0:m._Cutoff:void 0,Xe=((w=(v=e.floatProperties)===null||v===void 0?void 0:v._CullMode)!==null&&w!==void 0?w:2)===0,Ft=this._portTextureTransform(e),Y=(A=(S=e.vectorProperties)===null||S===void 0?void 0:S._Color)===null||A===void 0?void 0:A.map((yt,wt)=>wt===3?yt:nf(yt)),n=(R=e.textureProperties)===null||R===void 0?void 0:R._MainTex,i=n!=null?{index:n,extensions:Object.assign({},Ft)}:void 0,a=(O=e.floatProperties)===null||O===void 0?void 0:O._BumpScale,f=(N=e.textureProperties)===null||N===void 0?void 0:N._BumpMap,g=f!=null?{index:f,scale:a,extensions:Object.assign({},Ft)}:void 0,y=(D=(k=e.vectorProperties)===null||k===void 0?void 0:k._EmissionColor)===null||D===void 0?void 0:D.map(nf),M=(P=e.textureProperties)===null||P===void 0?void 0:P._EmissionMap,C=M!=null?{index:M,extensions:Object.assign({},Ft)}:void 0,I=(L=(F=e.vectorProperties)===null||F===void 0?void 0:F._ShadeColor)===null||L===void 0?void 0:L.map(nf),B=(z=e.textureProperties)===null||z===void 0?void 0:z._ShadeTexture,G=B!=null?{index:B,extensions:Object.assign({},Ft)}:void 0;let V=(X=(H=e.floatProperties)===null||H===void 0?void 0:H._ShadeShift)!==null&&X!==void 0?X:0,Q=(J=($=e.floatProperties)===null||$===void 0?void 0:$._ShadeToony)!==null&&J!==void 0?J:.9;Q=hn.lerp(Q,1,.5+.5*V),V=-V-(1-Q);const Z=(se=e.floatProperties)===null||se===void 0?void 0:se._IndirectLightIntensity,ne=Z?1-Z:void 0,ae=(ce=e.textureProperties)===null||ce===void 0?void 0:ce._SphereAdd,ue=ae!=null?{index:ae}:void 0,he=(pe=e.floatProperties)===null||pe===void 0?void 0:pe._RimLightingMix,Ce=(fe=e.textureProperties)===null||fe===void 0?void 0:fe._RimTexture,He=Ce!=null?{index:Ce,extensions:Object.assign({},Ft)}:void 0,Oe=(p=(b=e.vectorProperties)===null||b===void 0?void 0:b._RimColor)===null||p===void 0?void 0:p.map(nf),gt=(ee=e.floatProperties)===null||ee===void 0?void 0:ee._RimFresnelPower,lt=(E=e.floatProperties)===null||E===void 0?void 0:E._RimLift,Et=["none","worldCoordinates","screenCoordinates"][(Se=(me=e.floatProperties)===null||me===void 0?void 0:me._OutlineWidthMode)!==null&&Se!==void 0?Se:0];let pt=(ye=(Te=e.floatProperties)===null||Te===void 0?void 0:Te._OutlineWidth)!==null&&ye!==void 0?ye:0;pt=.01*pt;const vt=(de=e.textureProperties)===null||de===void 0?void 0:de._OutlineWidthTexture,wn=vt!=null?{index:vt,extensions:Object.assign({},Ft)}:void 0,en=(we=(Re=e.vectorProperties)===null||Re===void 0?void 0:Re._OutlineColor)===null||we===void 0?void 0:we.map(nf),vn=((Ie=e.floatProperties)===null||Ie===void 0?void 0:Ie._OutlineColorMode)===1?(Me=e.floatProperties)===null||Me===void 0?void 0:Me._OutlineLightingMix:0,tn=(Be=e.textureProperties)===null||Be===void 0?void 0:Be._UvAnimMaskTexture,ge=tn!=null?{index:tn,extensions:Object.assign({},Ft)}:void 0,Le=(Ve=e.floatProperties)===null||Ve===void 0?void 0:Ve._UvAnimScrollX;let Ne=(qe=e.floatProperties)===null||qe===void 0?void 0:qe._UvAnimScrollY;Ne!=null&&(Ne=-Ne);const ke=(W=e.floatProperties)===null||W===void 0?void 0:W._UvAnimRotation,be={specVersion:"1.0-beta",transparentWithZWrite:Pe,renderQueueOffsetNumber:Ye,shadeColorFactor:I,shadeMultiplyTexture:G,shadingShiftFactor:V,shadingToonyFactor:Q,giEqualizationFactor:ne,matcapTexture:ue,rimLightingMixFactor:he,rimMultiplyTexture:He,parametricRimColorFactor:Oe,parametricRimFresnelPowerFactor:gt,parametricRimLiftFactor:lt,outlineWidthMode:Et,outlineWidthFactor:pt,outlineWidthMultiplyTexture:wn,outlineColorFactor:en,outlineLightingMixFactor:vn,uvAnimationMaskTexture:ge,uvAnimationScrollXSpeedFactor:Le,uvAnimationScrollYSpeedFactor:Ne,uvAnimationRotationSpeedFactor:ke};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:Y,baseColorTexture:i},normalTexture:g,emissiveTexture:C,emissiveFactor:y,alphaMode:oe,alphaCutoff:St,doubleSided:Xe,extensions:{VRMC_materials_mtoon:be}})}_parseV0UnlitProperties(e,t){var r,o,l,u;const h=e.shader==="VRM/UnlitTransparentZWrite",m=e.shader==="VRM/UnlitTransparent"||h,v=this._v0ParseRenderQueue(e),w=e.shader==="VRM/UnlitCutout",S=m?"BLEND":w?"MASK":"OPAQUE",A=w?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,R=this._portTextureTransform(e),O=(l=(o=e.vectorProperties)===null||o===void 0?void 0:o._Color)===null||l===void 0?void 0:l.map(nf),N=(u=e.textureProperties)===null||u===void 0?void 0:u._MainTex,k=N!=null?{index:N,extensions:Object.assign({},R)}:void 0,D={specVersion:"1.0-beta",transparentWithZWrite:h,renderQueueOffsetNumber:v,shadeColorFactor:O,shadeMultiplyTexture:k};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:O,baseColorTexture:k},alphaMode:S,alphaCutoff:A,extensions:{VRMC_materials_mtoon:D}})}_portTextureTransform(e){var t,r,o,l,u;const h=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(h==null)return{};const m=[(r=h==null?void 0:h[0])!==null&&r!==void 0?r:0,(o=h==null?void 0:h[1])!==null&&o!==void 0?o:0],v=[(l=h==null?void 0:h[2])!==null&&l!==void 0?l:1,(u=h==null?void 0:h[3])!==null&&u!==void 0?u:1];return m[1]=v[1]*(1-m[1])%1,{KHR_texture_transform:{offset:m,scale:v}}}_v0ParseRenderQueue(e){var t,r,o;const l=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0?r:!1,u=((o=e.floatProperties)===null||o===void 0?void 0:o._ZWrite)===1;let h=0;return l&&e.renderQueue&&(u?h=Math.min(Math.max(e.renderQueue-2501,0),9):h=Math.min(Math.max(e.renderQueue-3e3,-9),0)),h}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.0-beta.16
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const Pa=new le;class o_ extends Vr{constructor(e){super();this._attrPosition=new Dt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(Ml);const t=new xt;t.setAttribute("position",this._attrPosition);const r=new Pn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new gr(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){Pa.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,Pa.x,Pa.y,Pa.z),this.constraint.source&&Pa.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,Pa.x,Pa.y,Pa.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function b2(s,e){return e.set(s.elements[12],s.elements[13],s.elements[14])}const MH=new le,TH=new le;function EH(s,e){return s.decompose(MH,e,TH),e}function n0(s){return s.invert?s.invert():s.inverse(),s}class a_{constructor(e,t){this.destination=e,this.source=t,this.weight=1}}const AH=new le,CH=new le,RH=new le,LH=new Ct,IH=new Ct,PH=new Ct;class kH extends a_{constructor(e,t){super(e,t);this._aimAxis="PositiveX",this._v3AimAxis=new le(1,0,0),this._dstRestQuat=new Ct}get aimAxis(){return this._aimAxis}set aimAxis(e){this._aimAxis=e,this._v3AimAxis.set(e==="PositiveX"?1:e==="NegativeX"?-1:0,e==="PositiveY"?1:e==="NegativeY"?-1:0,e==="PositiveZ"?1:e==="NegativeZ"?-1:0)}get dependencies(){const e=new Set([this.source]);return this.destination.parent&&e.add(this.destination.parent),e}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const e=LH.identity(),t=IH.identity();this.destination.parent&&(EH(this.destination.parent.matrixWorld,e),n0(t.copy(e)));const r=AH.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(e),o=b2(this.source.matrixWorld,CH).sub(b2(this.destination.matrixWorld,RH)).normalize(),l=PH.setFromUnitVectors(r,o).premultiply(t).multiply(e).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(l,this.weight)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function S2(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}function DH(s,e){const t=[s];let r=s.parent;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}class OH{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.destination);t==null&&(t=new Set,this._objectConstraintsMap.set(e.destination,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.destination).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.update())}_processConstraint(e,t,r,o){if(r.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const l=e.dependencies;for(const u of l)DH(u,h=>{const m=this._objectConstraintsMap.get(h);if(m)for(const v of m)this._processConstraint(v,t,r,o)});o(e),r.add(e)}}const NH=new Ct,FH=new Ct;class UH extends a_{constructor(e,t){super(e,t);this._dstRestQuat=new Ct,this._invSrcRestQuat=new Ct}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),n0(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const e=NH.copy(this._invSrcRestQuat).multiply(this.source.quaternion),t=FH.copy(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(t,this.weight)}}const BH=new le,zH=new Ct,HH=new Ct;class GH extends a_{constructor(e,t){super(e,t);this._rollAxis="X",this._v3RollAxis=new le(1,0,0),this._dstRestQuat=new Ct,this._invDstRestQuat=new Ct,this._invSrcRestQuatMulDstRestQuat=new Ct}get rollAxis(){return this._rollAxis}set rollAxis(e){this._rollAxis=e,this._v3RollAxis.set(e==="X"?1:0,e==="Y"?1:0,e==="Z"?1:0)}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),n0(this._invDstRestQuat.copy(this._dstRestQuat)),n0(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const e=zH.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),t=BH.copy(this._v3RollAxis).applyQuaternion(e),o=HH.setFromUnitVectors(t,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(o,this.weight)}}class rf{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return rf.EXTENSION_NAME}afterRoot(e){return S2(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return S2(this,void 0,void 0,function*(){const r=this.parser.json;if(!(((t=r.extensionsUsed)===null||t===void 0?void 0:t.indexOf(rf.EXTENSION_NAME))!==-1))return null;const l=new OH,u=yield this.parser.getDependencies("node");return u.forEach((h,m)=>{var v;const w=r.nodes[m],S=(v=w==null?void 0:w.extensions)===null||v===void 0?void 0:v[rf.EXTENSION_NAME];if(S==null||S.specVersion!=="1.0-beta")return;const R=S.constraint;if(R.roll!=null){const O=this._importRollConstraint(h,u,R.roll);l.addConstraint(O)}else if(R.aim!=null){const O=this._importAimConstraint(h,u,R.aim);l.addConstraint(O)}else if(R.rotation!=null){const O=this._importRotationConstraint(h,u,R.rotation);l.addConstraint(O)}}),e.scene.updateMatrixWorld(),l.setInitState(),l})}_importRollConstraint(e,t,r){const{source:o,rollAxis:l,weight:u}=r,h=t[o],m=new GH(e,h);if(l!=null&&(m.rollAxis=l),u!=null&&(m.weight=u),this.helperRoot){const v=new o_(m);this.helperRoot.add(v)}return m}_importAimConstraint(e,t,r){const{source:o,aimAxis:l,weight:u}=r,h=t[o],m=new kH(e,h);if(l!=null&&(m.aimAxis=l),u!=null&&(m.weight=u),this.helperRoot){const v=new o_(m);this.helperRoot.add(v)}return m}_importRotationConstraint(e,t,r){const{source:o,weight:l}=r,u=t[o],h=new UH(e,u);if(l!=null&&(h.weight=l),this.helperRoot){const m=new o_(h);this.helperRoot.add(m)}return h}}rf.EXTENSION_NAME="VRMC_node_constraint";/*!
 * @pixiv/three-vrm-springbone v1.0.0-beta.16
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class M2{}const l_=new le,au=new le;class T2 extends M2{constructor(e){var t,r,o;super();this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new le(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new le(0,0,0),this.radius=(o=e==null?void 0:e.radius)!==null&&o!==void 0?o:0}get type(){return"capsule"}calculateCollision(e,t,r,o){l_.copy(this.offset).applyMatrix4(e),au.copy(this.tail).applyMatrix4(e),au.sub(l_);const l=au.lengthSq();o.copy(t).sub(l_);const u=au.dot(o);u<=0||(l<=u||au.multiplyScalar(u/l),o.sub(au));const h=r+this.radius,m=o.length()-h;return o.normalize(),m}}class E2 extends M2{constructor(e){var t,r;super();this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new le(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:0}get type(){return"sphere"}calculateCollision(e,t,r,o){o.copy(this.offset).applyMatrix4(e),o.negate().add(t);const l=r+this.radius,u=o.length()-l;return o.normalize(),u}}const Oo=new le;class VH extends xt{constructor(e){super();this._currentRadius=0,this._currentOffset=new le,this._currentTail=new le,this._shape=e,this._attrPos=new Dt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),this._currentTail.equals(this._shape.tail)||(this._currentTail.copy(this._shape.tail),e=!0),e&&this._buildPosition()}_buildPosition(){Oo.copy(this._currentTail).sub(this._currentOffset);const e=Oo.length()/this._currentRadius;for(let o=0;o<=16;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(o,-Math.sin(l),-Math.cos(l),0),this._attrPos.setXYZ(17+o,e+Math.sin(l),Math.cos(l),0),this._attrPos.setXYZ(34+o,-Math.sin(l),0,-Math.cos(l)),this._attrPos.setXYZ(51+o,e+Math.sin(l),0,Math.cos(l))}for(let o=0;o<32;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(68+o,0,Math.sin(l),Math.cos(l)),this._attrPos.setXYZ(100+o,e,Math.sin(l),Math.cos(l))}const t=Math.atan2(Oo.y,Math.sqrt(Oo.x*Oo.x+Oo.z*Oo.z)),r=-Math.atan2(Oo.z,Oo.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class WH extends xt{constructor(e){super();this._currentRadius=0,this._currentOffset=new le,this._shape=e,this._attrPos=new Dt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}class A2 extends Vr{constructor(e){super();if(this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof E2)this._geometry=new WH(this.collider.shape);else if(this.collider.shape instanceof T2)this._geometry=new VH(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new Pn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new kr(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class $H extends xt{constructor(e){super();this._currentRadius=0,this._currentTail=new le,this._springBone=e,this._attrPos=new Dt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._springBone.settings.hitRadius&&(this._currentRadius=this._springBone.settings.hitRadius,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}class jH extends Vr{constructor(e){super();this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new $H(this.springBone);const t=new Pn({color:16776960,depthTest:!1,depthWrite:!1});this._line=new kr(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class C2 extends Ht{constructor(e){super();this.shape=e}}const qH=new et;function R2(s){return s.invert?s.invert():s.getInverse(qH.copy(s)),s}class XH{constructor(e){this._inverseCache=new et,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,o,l)=>(this._shouldUpdateInverse=!0,r[o]=l,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),R2(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const YH=new et,ka=new le,L2=new le,sf=new le,I2=new le,_d=new le,KH=new Ct,r0=new et,QH=new et;class ZH{constructor(e,t,r={},o=[]){var l,u,h,m,v,w;this._currentTail=new le,this._prevTail=new le,this._boneAxis=new le,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new et,this._initialLocalRotation=new Ct,this._initialLocalChildPosition=new le,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(l=r.hitRadius)!==null&&l!==void 0?l:0,stiffness:(u=r.stiffness)!==null&&u!==void 0?u:1,gravityPower:(h=r.gravityPower)!==null&&h!==void 0?h:0,gravityDir:(v=(m=r.gravityDir)===null||m===void 0?void 0:m.clone())!==null&&v!==void 0?v:new le(0,-1,0),dragForce:(w=r.dragForce)!==null&&w!==void 0?w:.4},this.colliderGroups=o}get center(){return this._center}set center(e){var t;((t=this._center)===null||t===void 0?void 0:t.userData.inverseCacheProxy)&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new XH(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:YH}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize(),this._worldSpaceBoneLength=ka.copy(this._initialLocalChildPosition).applyMatrix4(this.bone.matrixWorld).sub(L2.setFromMatrixPosition(this.bone.matrixWorld)).length()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail)}update(e){if(e<=0)return;sf.setFromMatrixPosition(this.bone.matrixWorld);let t=this._getMatrixWorldToCenter(r0);I2.copy(sf).applyMatrix4(t);const r=QH.copy(t).multiply(this._parentMatrixWorld),o=L2.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(r).sub(I2).normalize(),l=this._getMatrixCenterToWorld(r0);_d.copy(this._currentTail).add(ka.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(ka.copy(o).multiplyScalar(this.settings.stiffness*e)).add(ka.copy(this.settings.gravityDir).multiplyScalar(this.settings.gravityPower*e)).applyMatrix4(l),_d.sub(sf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(sf),this._collision(_d),t=this._getMatrixWorldToCenter(r0),this._prevTail.copy(this._currentTail),this._currentTail.copy(ka.copy(_d).applyMatrix4(t));const u=R2(r0.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),h=KH.setFromUnitVectors(this._boneAxis,ka.copy(_d).applyMatrix4(u).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(h),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{const o=r.shape.calculateCollision(r.matrixWorld,e,this.settings.hitRadius,ka);o<0&&(e.add(ka.multiplyScalar(-o)),e.sub(sf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(sf))})})}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i0(s,e,t,r){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(w){try{v(r.next(w))}catch(S){u(S)}}function m(w){try{v(r.throw(w))}catch(S){u(S)}}function v(w){w.done?l(w.value):o(w.value).then(h,m)}v((r=r.apply(s,e||[])).next())})}function JH(s,e){const t=[];let r=s;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}function P2(s,e){s.children.forEach(t=>{e(t)||P2(t,e)})}class k2{constructor(){this._springBones=new Set,this._objectSpringBonesMap=new Map}get springBones(){return this._springBones}get colliderGroups(){const e=new Set;return this._springBones.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addSpringBone(e){this._springBones.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}deleteSpringBone(e){this._springBones.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}setInitState(){const e=new Set,t=new Set,r=new Set;for(const o of this._springBones)this._processSpringBone(o,e,t,r,l=>l.setInitState())}reset(){const e=new Set,t=new Set,r=new Set;for(const o of this._springBones)this._processSpringBone(o,e,t,r,l=>l.reset())}update(e){const t=new Set,r=new Set,o=new Set;for(const l of this._springBones)this._processSpringBone(l,t,r,o,u=>u.update(e)),P2(l.bone,u=>{var h,m;return((m=(h=this._objectSpringBonesMap.get(u))===null||h===void 0?void 0:h.size)!==null&&m!==void 0?m:0)>0?!0:(u.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,o,l){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating springbones");t.add(e);const u=this._getDependencies(e);for(const h of u)JH(h,m=>{const v=this._objectSpringBonesMap.get(m);if(v)for(const w of v)this._processSpringBone(w,t,r,o,l);else o.has(m)||(m.updateWorldMatrix(!1,!1),o.add(m))});e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),l(e),o.add(e.bone),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),e.colliderGroups.forEach(o=>{o.colliders.forEach(l=>{t.add(l)})}),t}}class of{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return of.EXTENSION_NAME}afterRoot(e){return i0(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return i0(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o,l,u;return i0(this,void 0,void 0,function*(){const h=e.parser.json;if(!(((t=h.extensionsUsed)===null||t===void 0?void 0:t.indexOf(of.EXTENSION_NAME))!==-1))return null;const v=new k2,w=yield e.parser.getDependencies("node"),S=(r=h.extensions)===null||r===void 0?void 0:r[of.EXTENSION_NAME];if(!S||S.specVersion!=="1.0-beta")return null;const R=(o=S.colliders)===null||o===void 0?void 0:o.map((N,k)=>{var D,P,F,L,z;const H=w[N.node],X=N.shape;if(X.sphere)return this._importSphereCollider(H,{offset:new le().fromArray((D=X.sphere.offset)!==null&&D!==void 0?D:[0,0,0]),radius:(P=X.sphere.radius)!==null&&P!==void 0?P:0});if(X.capsule)return this._importCapsuleCollider(H,{offset:new le().fromArray((F=X.capsule.offset)!==null&&F!==void 0?F:[0,0,0]),radius:(L=X.capsule.radius)!==null&&L!==void 0?L:0,tail:new le().fromArray((z=X.capsule.tail)!==null&&z!==void 0?z:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${k} has no valid shape`)}),O=(l=S.colliderGroups)===null||l===void 0?void 0:l.map((N,k)=>{var D;return{colliders:((D=N.colliders)!==null&&D!==void 0?D:[]).map(F=>{const L=R==null?void 0:R[F];if(L==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${k} attempted to use a collider #${F} but not found`);return L}),name:N.name}});return(u=S.springs)===null||u===void 0||u.forEach((N,k)=>{var D;const P=N.joints,F=(D=N.colliderGroups)===null||D===void 0?void 0:D.map(H=>{const X=O==null?void 0:O[H];if(X==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${k} attempted to use a colliderGroup ${H} but not found`);return X}),L=N.center!=null?w[N.center]:void 0;let z;P.forEach(H=>{var X;if(z){const $=z.node,J=w[$],se=H.node,ce=w[se],pe={hitRadius:z.hitRadius,dragForce:z.dragForce,gravityPower:z.gravityPower,stiffness:z.stiffness,gravityDir:new le().fromArray((X=z.gravityDir)!==null&&X!==void 0?X:[0,1,0])},fe=this._importJoint(J,ce,pe,F);L&&(fe.center=L),v.addSpringBone(fe)}z=H})}),v.setInitState(),v})}_v0Import(e){var t,r,o;return i0(this,void 0,void 0,function*(){const l=e.parser.json;if(!(((t=l.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const h=(r=l.extensions)===null||r===void 0?void 0:r.VRM,m=h==null?void 0:h.secondaryAnimation;if(!m)return null;const v=m==null?void 0:m.boneGroups;if(!v)return null;const w=new k2,S=yield e.parser.getDependencies("node"),A=(o=m.colliderGroups)===null||o===void 0?void 0:o.map(R=>{var O;const N=S[R.node];return{colliders:((O=R.colliders)!==null&&O!==void 0?O:[]).map((D,P)=>{var F,L,z;const H=new le(0,0,0);return D.offset&&H.set((F=D.offset.x)!==null&&F!==void 0?F:0,(L=D.offset.y)!==null&&L!==void 0?L:0,D.offset.z?-D.offset.z:0),this._importSphereCollider(N,{offset:H,radius:(z=D.radius)!==null&&z!==void 0?z:0})})}});return v==null||v.forEach((R,O)=>{const N=R.bones;!N||N.forEach(k=>{var D,P,F,L;const z=S[k],H=new le;R.gravityDir?H.set((D=R.gravityDir.x)!==null&&D!==void 0?D:0,(P=R.gravityDir.y)!==null&&P!==void 0?P:0,(F=R.gravityDir.z)!==null&&F!==void 0?F:0):H.set(0,-1,0);const X=R.center!=null?S[R.center]:void 0,$={hitRadius:R.hitRadius,dragForce:R.dragForce,gravityPower:R.gravityPower,stiffness:R.stiffiness,gravityDir:H},J=(L=R.colliderGroups)===null||L===void 0?void 0:L.map(se=>{const ce=A==null?void 0:A[se];if(ce==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${O} attempted to use a colliderGroup ${se} but not found`);return ce});z.traverse(se=>{var ce;const pe=(ce=se.children[0])!==null&&ce!==void 0?ce:null,fe=this._importJoint(se,pe,$,J);X&&(fe.center=X),w.addSpringBone(fe)})})}),e.scene.updateMatrixWorld(),w.setInitState(),w})}_importJoint(e,t,r,o){const l=new ZH(e,t,r,o);if(this.jointHelperRoot){const u=new jH(l);this.jointHelperRoot.add(u),u.renderOrder=this.jointHelperRoot.renderOrder}return l}_importSphereCollider(e,t){const{offset:r,radius:o}=t,l=new E2({offset:r,radius:o}),u=new C2(l);if(e.add(u),this.colliderHelperRoot){const h=new A2(u);this.colliderHelperRoot.add(h),h.renderOrder=this.colliderHelperRoot.renderOrder}return u}_importCapsuleCollider(e,t){const{offset:r,radius:o,tail:l}=t,u=new T2({offset:r,radius:o,tail:l}),h=new C2(u);if(e.add(h),this.colliderHelperRoot){const m=new A2(h);this.colliderHelperRoot.add(m),m.renderOrder=this.colliderHelperRoot.renderOrder}return h}}of.EXTENSION_NAME="VRMC_springBone";class $V{constructor(e,t){var r,o,l,u,h,m,v,w,S,A;this.parser=e;const R=t==null?void 0:t.helperRoot;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new Xg(e),this.firstPersonPlugin=(o=t==null?void 0:t.firstPersonPlugin)!==null&&o!==void 0?o:new $z(e),this.humanoidPlugin=(l=t==null?void 0:t.humanoidPlugin)!==null&&l!==void 0?l:new qz(e),this.lookAtPlugin=(u=t==null?void 0:t.lookAtPlugin)!==null&&u!==void 0?u:new oH(e,{helperRoot:R}),this.metaPlugin=(h=t==null?void 0:t.metaPlugin)!==null&&h!==void 0?h:new lH(e),this.mtoonMaterialPlugin=(m=t==null?void 0:t.mtoonMaterialPlugin)!==null&&m!==void 0?m:new yd(e),this.materialsHDREmissiveMultiplierPlugin=(v=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&v!==void 0?v:new xd(e),this.materialsV0CompatPlugin=(w=t==null?void 0:t.materialsV0CompatPlugin)!==null&&w!==void 0?w:new SH(e),this.springBonePlugin=(S=t==null?void 0:t.springBonePlugin)!==null&&S!==void 0?S:new of(e,{colliderHelperRoot:R,jointHelperRoot:R}),this.nodeConstraintPlugin=(A=t==null?void 0:t.nodeConstraintPlugin)!==null&&A!==void 0?A:new rf(e,{helperRoot:R})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return t0(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return t0(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t!=null?t:null}extendMaterialParams(e,t){return t0(this,void 0,void 0,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(e,t),yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return t0(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e);const t=new cH({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:e.userData.vrmHumanoid,lookAt:e.userData.vrmLookAt,meta:e.userData.vrmMeta,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=t})}}function D2(s){if(Object.values(s).forEach(e=>{(e==null?void 0:e.isTexture)&&e.dispose()}),s.isShaderMaterial){const e=s.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;(r==null?void 0:r.isTexture)&&r.dispose()})}s.dispose()}function e5(s){const e=s.geometry;e&&e.dispose();const t=s.skeleton;t&&t.dispose();const r=s.material;r&&(Array.isArray(r)?r.forEach(o=>D2(o)):r&&D2(r))}function t5(s){s.traverse(e5)}function n5(s){const e=new Map;s.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,l=r.geometry.getAttribute("skinIndex");let u=e.get(l);if(!u){const h=[],m=[],v={},w=l.array;for(let S=0;S<w.length;S++){const A=w[S];v[A]===void 0&&(v[A]=h.length,h.push(r.skeleton.bones[A]),m.push(r.skeleton.boneInverses[A])),w[S]=v[A]}l.copyArray(w),l.needsUpdate=!0,u=new wa(h,m),e.set(l,u)}r.bind(u,new et)})}function r5(s){const e=new Map;s.traverse(t=>{var r,o,l,u;if(!t.isMesh)return;const h=t,m=h.geometry,v=m.index;if(v==null)return;const w=e.get(m);if(w!=null){h.geometry=w;return}const S=new xt;S.name=m.name,S.morphTargetsRelative=m.morphTargetsRelative,m.groups.forEach(N=>{S.addGroup(N.start,N.count,N.materialIndex)}),S.boundingBox=(o=(r=m.boundingBox)===null||r===void 0?void 0:r.clone())!==null&&o!==void 0?o:null,S.boundingSphere=(u=(l=m.boundingSphere)===null||l===void 0?void 0:l.clone())!==null&&u!==void 0?u:null,S.setDrawRange(m.drawRange.start,m.drawRange.count),S.userData=m.userData,e.set(m,S);const A=[],R=[];{const N=v.array,k=new N.constructor(N.length);let D=0;for(let P=0;P<N.length;P++){const F=N[P];let L=A[F];L==null&&(A[F]=D,R[D]=F,L=D,D++),k[P]=L}S.setIndex(new Dt(k,1,!1))}Object.keys(m.attributes).forEach(N=>{const k=m.attributes[N];if(k.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const D=k.array,{itemSize:P,normalized:F}=k,L=new D.constructor(R.length*P);R.forEach((z,H)=>{for(let X=0;X<P;X++)L[H*P+X]=D[z*P+X]}),S.setAttribute(N,new Dt(L,P,F))});let O=!0;Object.keys(m.morphAttributes).forEach(N=>{S.morphAttributes[N]=[];const k=m.morphAttributes[N];for(let D=0;D<k.length;D++){const P=k[D];if(P.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const F=P.array,{itemSize:L,normalized:z}=P,H=new F.constructor(R.length*L);R.forEach((X,$)=>{for(let J=0;J<L;J++)H[$*L+J]=F[X*L+J]}),O=O&&H.every(X=>X===0),S.morphAttributes[N][D]=new Dt(H,L,z)}}),O&&(S.morphAttributes={}),h.geometry=S}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function i5(s){var e;((e=s.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(s.scene.rotation.y=Math.PI)}class s0{constructor(){}}s0.deepDispose=t5;s0.removeUnnecessaryJoints=n5;s0.removeUnnecessaryVertices=r5;s0.rotateVRM0=i5;var u_=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var s=0,e=arguments.length;e--;)s+=arguments[e]*arguments[e];return Math.sqrt(s)});function s5(){var s=new u_(3);return u_!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function c_(s){var e=s[0],t=s[1],r=s[2];return Math.hypot(e,t,r)}(function(){var s=s5();return function(e,t,r,o,l,u){var h,m;for(t||(t=3),r||(r=0),o?m=Math.min(o*t+r,e.length):m=e.length,h=r;h<m;h+=t)s[0]=e[h],s[1]=e[h+1],s[2]=e[h+2],l(s,s,u),e[h]=s[0],e[h+1]=s[1],e[h+2]=s[2];return e}})();function o5(s){var e=s[0],t=s[1],r=s[2],o=s[3],l=s[4],u=s[5],h=s[6],m=s[7],v=s[8],w=s[9],S=s[10],A=s[11],R=s[12],O=s[13],N=s[14],k=s[15],D=e*u-t*l,P=e*h-r*l,F=e*m-o*l,L=t*h-r*u,z=t*m-o*u,H=r*m-o*h,X=v*O-w*R,$=v*N-S*R,J=v*k-A*R,se=w*N-S*O,ce=w*k-A*O,pe=S*k-A*N;return D*pe-P*ce+F*se+L*J-z*$+H*X}function a5(s,e,t){var r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],m=e[5],v=e[6],w=e[7],S=e[8],A=e[9],R=e[10],O=e[11],N=e[12],k=e[13],D=e[14],P=e[15],F=t[0],L=t[1],z=t[2],H=t[3];return s[0]=F*r+L*h+z*S+H*N,s[1]=F*o+L*m+z*A+H*k,s[2]=F*l+L*v+z*R+H*D,s[3]=F*u+L*w+z*O+H*P,F=t[4],L=t[5],z=t[6],H=t[7],s[4]=F*r+L*h+z*S+H*N,s[5]=F*o+L*m+z*A+H*k,s[6]=F*l+L*v+z*R+H*D,s[7]=F*u+L*w+z*O+H*P,F=t[8],L=t[9],z=t[10],H=t[11],s[8]=F*r+L*h+z*S+H*N,s[9]=F*o+L*m+z*A+H*k,s[10]=F*l+L*v+z*R+H*D,s[11]=F*u+L*w+z*O+H*P,F=t[12],L=t[13],z=t[14],H=t[15],s[12]=F*r+L*h+z*S+H*N,s[13]=F*o+L*m+z*A+H*k,s[14]=F*l+L*v+z*R+H*D,s[15]=F*u+L*w+z*O+H*P,s}function l5(s,e){var t=e[0],r=e[1],o=e[2],l=e[4],u=e[5],h=e[6],m=e[8],v=e[9],w=e[10];return s[0]=Math.hypot(t,r,o),s[1]=Math.hypot(l,u,h),s[2]=Math.hypot(m,v,w),s}function u5(s,e){var t=new u_(3);l5(t,e);var r=1/t[0],o=1/t[1],l=1/t[2],u=e[0]*r,h=e[1]*o,m=e[2]*l,v=e[4]*r,w=e[5]*o,S=e[6]*l,A=e[8]*r,R=e[9]*o,O=e[10]*l,N=u+w+O,k=0;return N>0?(k=Math.sqrt(N+1)*2,s[3]=.25*k,s[0]=(S-R)/k,s[1]=(A-m)/k,s[2]=(h-v)/k):u>w&&u>O?(k=Math.sqrt(1+u-w-O)*2,s[3]=(S-R)/k,s[0]=.25*k,s[1]=(h+v)/k,s[2]=(A+m)/k):w>O?(k=Math.sqrt(1+w-u-O)*2,s[3]=(A-m)/k,s[0]=(h+v)/k,s[1]=.25*k,s[2]=(S+R)/k):(k=Math.sqrt(1+O-u-w)*2,s[3]=(h-v)/k,s[0]=(A+m)/k,s[1]=(S+R)/k,s[2]=.25*k),s}var un,o0,f_,lu;function $t(s,e,t,r){var o,l=arguments.length,u=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(s,e,t,r);else for(var h=s.length-1;h>=0;h--)(o=s[h])&&(u=(l<3?o(u):l>3?o(e,t,u):o(e,t))||u);return l>3&&u&&Object.defineProperty(e,t,u),u}(function(s){s.ACCESSOR="Accessor",s.ANIMATION="Animation",s.ANIMATION_CHANNEL="AnimationChannel",s.ANIMATION_SAMPLER="AnimationSampler",s.BUFFER="Buffer",s.CAMERA="Camera",s.MATERIAL="Material",s.MESH="Mesh",s.PRIMITIVE="Primitive",s.PRIMITIVE_TARGET="PrimitiveTarget",s.NODE="Node",s.ROOT="Root",s.SCENE="Scene",s.SKIN="Skin",s.TEXTURE="Texture",s.TEXTURE_INFO="TextureInfo"})(un||(un={})),function(s){s.INTERLEAVED="interleaved",s.SEPARATE="separate"}(o0||(o0={})),function(s){s[s.R=4096]="R",s[s.G=256]="G",s[s.B=16]="B",s[s.A=1]="A"}(f_||(f_={})),function(s){s.GLTF="GLTF",s.GLB="GLB"}(lu||(lu={}));class a0{constructor(e,t,r){if(this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=e,this.i=t,this.h=r,!t.canLink(r))throw new Error("Cannot link disconnected graphs/documents.")}getName(){return this.t}getParent(){return this.i}getChild(){return this.h}setChild(e){return this.h=e,this}dispose(){this.o||(this.o=!0,this.u.forEach(e=>e()),this.u.length=0)}onDispose(e){return this.u.push(e),this}isDisposed(){return this.o}}class c5{constructor(){this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}on(e,t){return this.u[e]=this.u[e]||[],this.u[e].push(t),this}emit(e,t){for(const r of this.u[e]||[])r(t);return this}getLinks(){return Array.from(this.p)}listParentLinks(e){return Array.from(this.v.get(e)||this.l)}listParents(e){return this.listParentLinks(e).map(t=>t.getParent())}listChildLinks(e){return Array.from(this.g.get(e)||this.l)}listChildren(e){return this.listChildLinks(e).map(t=>t.getChild())}disconnectChildren(e){return(this.g.get(e)||this.l).forEach(t=>t.dispose()),this}disconnectParents(e,t){let r=Array.from(this.v.get(e)||this.l);return t&&(r=r.filter(o=>t(o.getParent()))),r.forEach(o=>o.dispose()),this}swapChild(e,t,r){const o=this.g.get(e)||this.l;return Array.from(o).filter(l=>l.getChild()===t).forEach(l=>{this.v.get(t).delete(l),l.setChild(r),this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(l)}),this}link(e,t,r){if(!r)return null;const o=new a0(e,t,r);return this.registerLink(o),o}registerLink(e){this.p.add(e);const t=e.getParent();this.g.has(t)||this.g.set(t,new Set),this.g.get(t).add(e);const r=e.getChild();return this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(e),e.onDispose(()=>this.unlink(e)),e}unlink(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}function Xn(s,e){Object.defineProperty(s,e,{get:function(){return this["__"+e]},set:function(t){const r=this["__"+e];r&&!Array.isArray(r)&&r.dispose(),t&&!Array.isArray(t)&&t.onDispose(()=>{this["__"+e]=null}),this["__"+e]=t},enumerable:!0})}function vr(s,e){}class gi{static createBufferFromDataURI(e){if(typeof Buffer=="undefined"){const t=atob(e.split(",")[1]),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r.buffer}{const t=e.split(",")[1],r=e.indexOf("base64")>=0;return this.trim(Buffer.from(t,r?"base64":"utf8"))}}static encodeText(e){return typeof TextEncoder!="undefined"?new TextEncoder().encode(e).buffer:this.trim(Buffer.from(e))}static decodeText(e){return typeof TextDecoder!="undefined"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static trim(e){const{byteOffset:t,byteLength:r}=e;return e.buffer.slice(t,t+r)}static concat(e){let t=0;for(const l of e)t+=l.byteLength;const r=new Uint8Array(t);let o=0;for(const l of e)r.set(new Uint8Array(l),o),o+=l.byteLength;return r.buffer}static pad(e,t=0){const r=this.padNumber(e.byteLength);if(r!==e.byteLength){const o=new Uint8Array(r);if(o.set(new Uint8Array(e)),t!==0)for(let l=e.byteLength;l<r;l++)o[l]=t;return o.buffer}return e}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),o=new DataView(t);let l=e.byteLength;for(;l--;)if(r.getUint8(l)!==o.getUint8(l))return!1;return!0}}class l0{static hexToFactor(e,t){e=Math.floor(e);const r=t;return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[r,o,l]=this.convertLinearToSRGB(e,t);return 255*r<<16^255*o<<8^255*l<<0}static convertSRGBToLinear(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.04045?.0773993808*r[l]:Math.pow(.9478672986*r[l]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.0031308?12.92*r[l]:1.055*Math.pow(r[l],.41666)-.055;return t}}class u0{static basename(e){const t=e.split(/[\\/]/).pop();return t.substr(0,t.lastIndexOf("."))}static extension(e){return e.indexOf("data:")!==0?e.split(/[\\/]/).pop().split(/[.]/).pop():e.indexOf("data:image/png")===0?"png":e.indexOf("data:image/jpeg")===0?"jpeg":"bin"}}class c0{match(e){const t=new Uint8Array(e);return t.length>=8&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}getSize(e){const t=new DataView(e);return gi.decodeText(e.slice(12,16))===c0.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}c0.PNG_FRIED_CHUNK_NAME="CgBI";class af{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let r=0;const o=this.getSize(e,t);if(!o)return null;for(;o[0]>1||o[1]>1;)r+=o[0]*o[1]*4,o[0]=Math.max(Math.floor(o[0]/2),1),o[1]=Math.max(Math.floor(o[1]/2),1);return r+=4,r}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}}function f5(s,e){if(e>s.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(s.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return s}af.impls={"image/jpeg":new class{match(s){const e=new Uint8Array(s);return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(s){let e,t,r=new DataView(s,4);for(;r.byteLength;){if(e=r.getUint16(0,!1),f5(r,e),t=r.getUint8(e+1),t===192||t===193||t===194)return[r.getUint16(e+7,!1),r.getUint16(e+5,!1)];r=new DataView(s,r.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(s){return 3}},"image/png":new c0};class Tr{static identity(e){return e}static eq(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>1e-5)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,r,o){let l=c_([e[0],e[1],e[2]]);const u=c_([e[4],e[5],e[6]]),h=c_([e[8],e[9],e[10]]);o5(e)<0&&(l=-l),t[0]=e[12],t[1]=e[13],t[2]=e[14];const m=e.slice(),v=1/l,w=1/u,S=1/h;m[0]*=v,m[1]*=v,m[2]*=v,m[4]*=w,m[5]*=w,m[6]*=w,m[8]*=S,m[9]*=S,m[10]*=S,u5(r,m),o[0]=l,o[1]=u,o[2]=h}static compose(e,t,r,o){const l=o,u=t[0],h=t[1],m=t[2],v=t[3],w=u+u,S=h+h,A=m+m,R=u*w,O=u*S,N=u*A,k=h*S,D=h*A,P=m*A,F=v*w,L=v*S,z=v*A,H=r[0],X=r[1],$=r[2];return l[0]=(1-(k+P))*H,l[1]=(O+z)*H,l[2]=(N-L)*H,l[3]=0,l[4]=(O-z)*X,l[5]=(1-(R+P))*X,l[6]=(D+F)*X,l[7]=0,l[8]=(N+L)*$,l[9]=(D-F)*$,l[10]=(1-(R+k))*$,l[11]=0,l[12]=e[0],l[13]=e[1],l[14]=e[2],l[15]=1,l}}class qi{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=qi.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=qi.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=qi.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=qi.Verbosity.ERROR&&console.error(e)}}qi.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},qi.DEFAULT_INSTANCE=new qi(qi.Verbosity.INFO);const O2="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",N2=new Set,h5=function(){let s="";for(let e=0;e<6;e++)s+=O2.charAt(Math.floor(Math.random()*O2.length));return s},d5=function(){for(let s=0;s<999;s++){const e=h5();if(!N2.has(e))return N2.add(e),e}return""},Yn=s=>s;class lf extends class{constructor(e){this.graph=void 0,this.o=!1,this.graph=e,this.graph=e}canLink(e){return this.graph===e.graph}isDisposed(){return this.o}dispose(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}detach(){return this.graph.disconnectParents(this),this}swap(e,t){return this.graph.swapChild(this,e,t),this}addGraphChild(e,t){return e.push(t),t.onDispose(()=>{const r=e.filter(o=>o!==t);e.length=0;for(const o of r)e.push(o)}),this}removeGraphChild(e,t){return e.filter(r=>r.getChild()===t).forEach(r=>r.dispose()),this}clearGraphChildList(e){for(;e.length>0;)e[0].dispose();return this}listGraphParents(){return this.graph.listParents(this)}}{constructor(e,t=""){super(e),this.graph=void 0,this.m={},this.t="",this.graph=e,this.t=t}getName(){return this.t}setName(e){return this.t=e,this}getExtras(){return this.m}setExtras(e){return this.m=e,this}clone(){const e=new this.constructor(this.graph).copy(this,Yn);return this.graph.emit("clone",e),e}copy(e,t=Yn){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.listGraphParents()}}const F2="Pass extension name (string) as lookup token, not a constructor.";class Xi extends lf{constructor(...e){super(...e),this.extensions=[]}copy(e,t=Yn){return super.copy(e,t),this.clearGraphChildList(this.extensions),e.extensions.forEach(r=>{const o=r.getChild();this.setExtension(o.extensionName,t(o))}),this}getExtension(e){if(typeof e!="string")throw new Error(F2);const t=this.extensions.find(r=>r.getChild().extensionName===e);return t?t.getChild():null}setExtension(e,t){if(typeof e!="string")throw new Error(F2);const r=this.getExtension(e);return r&&this.removeGraphChild(this.extensions,r),t?(t.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,t))):this}listExtensions(){return this.extensions.map(e=>e.getChild())}}$t([vr],Xi.prototype,"extensions",void 0);class Gt extends Xi{constructor(...e){super(...e),this.propertyType=un.ACCESSOR,this.S=null,this.M=Gt.Type.SCALAR,this.I=Gt.ComponentType.FLOAT,this.N=!1,this.C=Tr.identity,this.O=Tr.identity,this.buffer=null}copy(e,t=Yn){return super.copy(e,t),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?t(e.buffer.getChild()):null),this}static getElementSize(e){switch(e){case Gt.Type.SCALAR:return 1;case Gt.Type.VEC2:return 2;case Gt.Type.VEC3:return 3;case Gt.Type.VEC4:case Gt.Type.MAT2:return 4;case Gt.Type.MAT3:return 9;case Gt.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case Gt.ComponentType.BYTE:case Gt.ComponentType.UNSIGNED_BYTE:return 1;case Gt.ComponentType.SHORT:case Gt.ComponentType.UNSIGNED_SHORT:return 2;case Gt.ComponentType.UNSIGNED_INT:case Gt.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMin(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const u=this.S[o+l];Number.isFinite(u)&&(e[l]=Math.min(e[l],u))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMax(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=-1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const u=this.S[o+l];Number.isFinite(u)&&(e[l]=Math.max(e[l],u))}return e}getCount(){return this.S?this.S.length/this.getElementSize():0}getType(){return this.M}setType(e){return this.M=e,this}getElementSize(){return Gt.getElementSize(this.M)}getComponentSize(){return this.S.BYTES_PER_ELEMENT}getComponentType(){return this.I}getNormalized(){return this.N}setNormalized(e){return this.N=e,e?(this.O=t=>Tr.denormalize(t,this.I),this.C=t=>Tr.normalize(t,this.I)):(this.O=Tr.identity,this.C=Tr.identity),this}getScalar(e){const t=this.getElementSize();return this.O(this.S[e*t])}setScalar(e,t){return this.S[e*this.getElementSize()]=this.C(t),this}getElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)t[o]=this.O(this.S[e*r+o]);return t}setElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)this.S[e*r+o]=this.C(t[o]);return this}getBuffer(){return this.buffer?this.buffer.getChild():null}setBuffer(e){return this.buffer=this.graph.link("buffer",this,e),this}getArray(){return this.S}setArray(e){return this.I=e?function(t){switch(t.constructor){case Float32Array:return Gt.ComponentType.FLOAT;case Uint32Array:return Gt.ComponentType.UNSIGNED_INT;case Uint16Array:return Gt.ComponentType.UNSIGNED_SHORT;case Uint8Array:return Gt.ComponentType.UNSIGNED_BYTE;case Int16Array:return Gt.ComponentType.SHORT;case Int8Array:return Gt.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):Gt.ComponentType.FLOAT,this.S=e,this}getByteLength(){return this.S?this.S.byteLength:0}}Gt.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},Gt.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},$t([Xn],Gt.prototype,"buffer",void 0);class f0 extends Xi{constructor(...e){super(...e),this.propertyType=un.ANIMATION,this.channels=[],this.samplers=[]}copy(e,t=Yn){return super.copy(e,t),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach(r=>this.addChannel(t(r.getChild()))),e.samplers.forEach(r=>this.addSampler(t(r.getChild()))),this}addChannel(e){const t=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,t)}removeChannel(e){return this.removeGraphChild(this.channels,e)}listChannels(){return this.channels.map(e=>e.getChild())}addSampler(e){const t=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,t)}removeSampler(e){return this.removeGraphChild(this.samplers,e)}listSamplers(){return this.samplers.map(e=>e.getChild())}}$t([vr],f0.prototype,"channels",void 0),$t([vr],f0.prototype,"samplers",void 0);class h0 extends lf{constructor(...e){super(...e),this.propertyType=un.ANIMATION_CHANNEL,this._=null,this.targetNode=null,this.sampler=null}copy(e,t=Yn){return super.copy(e,t),this._=e._,this.setTargetNode(e.targetNode?t(e.targetNode.getChild()):null),this.setSampler(e.sampler?t(e.sampler.getChild()):null),this}getTargetPath(){return this._}setTargetPath(e){return this._=e,this}getTargetNode(){return this.targetNode?this.targetNode.getChild():null}setTargetNode(e){return this.targetNode=this.graph.link("target.node",this,e),this}getSampler(){return this.sampler?this.sampler.getChild():null}setSampler(e){return this.sampler=this.graph.link("sampler",this,e),this}}h0.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},$t([Xn],h0.prototype,"targetNode",void 0),$t([Xn],h0.prototype,"sampler",void 0);class uu extends lf{constructor(...e){super(...e),this.propertyType=un.ANIMATION_SAMPLER,this.L=uu.Interpolation.LINEAR,this.input=null,this.output=null}copy(e,t=Yn){return super.copy(e,t),this.L=e.L,this.setInput(e.input?t(e.input.getChild()):null),this.setOutput(e.output?t(e.output.getChild()):null),this}getInterpolation(){return this.L}setInterpolation(e){return this.L=e,this}getInput(){return this.input?this.input.getChild():null}setInput(e){return this.input=this.graph.link("input",this,e),this}getOutput(){return this.output?this.output.getChild():null}setOutput(e){return this.output=this.graph.link("output",this,e),this}}uu.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},$t([Xn],uu.prototype,"input",void 0),$t([Xn],uu.prototype,"output",void 0);class U2 extends Xi{constructor(...e){super(...e),this.propertyType=un.BUFFER,this.P=""}copy(e,t=Yn){return super.copy(e,t),this.P=e.P,this}getURI(){return this.P}setURI(e){return this.P=e,this}}class cu extends Xi{constructor(...e){super(...e),this.propertyType=un.CAMERA,this.M=cu.Type.PERSPECTIVE,this.U=.1,this.k=100,this.F=null,this.j=2*Math.PI*50/360,this.D=1,this.J=1}copy(e,t=Yn){return super.copy(e,t),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}getType(){return this.M}setType(e){return this.M=e,this}getZNear(){return this.U}setZNear(e){return this.U=e,this}getZFar(){return this.k}setZFar(e){return this.k=e,this}getAspectRatio(){return this.F}setAspectRatio(e){return this.F=e,this}getYFov(){return this.j}setYFov(e){return this.j=e,this}getXMag(){return this.D}setXMag(e){return this.D=e,this}getYMag(){return this.J}setYMag(e){return this.J=e,this}}cu.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class B2 extends lf{constructor(e,t){super(e),this.$=void 0,this.$=t,this.$.addExtensionProperty(this)}clone(){const e=new this.constructor(this.graph,this.$).copy(this,Yn);return this.graph.emit("clone",e),e}dispose(){this.$.removeExtensionProperty(this),super.dispose()}T(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}B2.EXTENSION_NAME=void 0;class z2 extends a0{constructor(...e){super(...e),this.semantic=""}copy(e){return this.semantic=e.semantic,this}}class H2 extends a0{copy(e){return this}}class p5 extends a0{constructor(...e){super(...e),this.channels=0}copy(e){return this.channels=e.channels,this}}class m5 extends c5{linkAttribute(e,t,r){if(!r)return null;const o=new z2(e,t,r);return o.semantic=e,this.registerLink(o),o}linkIndex(e,t,r){if(!r)return null;const o=new H2(e,t,r);return this.registerLink(o),o}linkTexture(e,t,r,o){if(!o)return null;const l=new p5(e,r,o);return l.channels=t,this.registerLink(l),l}}class Ds extends Xi{constructor(...e){super(...e),this.propertyType=un.TEXTURE_INFO,this.V=0,this.W=null,this.q=null,this.Y=Ds.WrapMode.REPEAT,this.H=Ds.WrapMode.REPEAT}copy(e,t=Yn){return super.copy(e,t),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}equals(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}getTexCoord(){return this.V}setTexCoord(e){return this.V=e,this}getMagFilter(){return this.W}setMagFilter(e){return this.W=e,this}getMinFilter(){return this.q}setMinFilter(e){return this.q=e,this}getWrapS(){return this.Y}setWrapS(e){return this.Y=e,this}getWrapT(){return this.H}setWrapT(e){return this.H=e,this}}Ds.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Ds.MagFilter={NEAREST:9728,LINEAR:9729},Ds.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:d0,G:p0,B:m0,A:g5}=f_;class Wr extends Xi{constructor(...e){super(...e),this.propertyType=un.MATERIAL,this.Z=Wr.AlphaMode.OPAQUE,this.K=.5,this.X=!1,this.tt=[1,1,1,1],this.st=[0,0,0],this.et=1,this.it=1,this.rt=1,this.nt=1,this.baseColorTexture=null,this.baseColorTextureInfo=this.graph.link("baseColorTextureInfo",this,new Ds(this.graph)),this.emissiveTexture=null,this.emissiveTextureInfo=this.graph.link("emissiveTextureInfo",this,new Ds(this.graph)),this.normalTexture=null,this.normalTextureInfo=this.graph.link("normalTextureInfo",this,new Ds(this.graph)),this.occlusionTexture=null,this.occlusionTextureInfo=this.graph.link("occlusionTextureInfo",this,new Ds(this.graph)),this.metallicRoughnessTexture=null,this.metallicRoughnessTextureInfo=this.graph.link("metallicRoughnessTextureInfo",this,new Ds(this.graph))}copy(e,t=Yn){return super.copy(e,t),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=[...e.tt],this.st=[...e.st],this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?t(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(t(e.baseColorTextureInfo.getChild()),t),this.setEmissiveTexture(e.emissiveTexture?t(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(t(e.emissiveTextureInfo.getChild()),t),this.setNormalTexture(e.normalTexture?t(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(t(e.normalTextureInfo.getChild()),t),this.setOcclusionTexture(e.occlusionTexture?t(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(t(e.occlusionTextureInfo.getChild()),t),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?t(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(t(e.metallicRoughnessTextureInfo.getChild()),t),this}equals(e){if(this.getAlphaMode()!==e.getAlphaMode()||this.getAlphaCutoff()!==e.getAlphaCutoff()||this.getDoubleSided()!==e.getDoubleSided()||!Tr.eq(this.getBaseColorFactor(),e.getBaseColorFactor())||!Tr.eq(this.getEmissiveFactor(),e.getEmissiveFactor())||this.getNormalScale()!==e.getNormalScale()||this.getOcclusionStrength()!==e.getOcclusionStrength()||this.getRoughnessFactor()!==e.getRoughnessFactor()||this.getMetallicFactor()!==e.getMetallicFactor()||(this.getBaseColorTexture()||e.getBaseColorTexture())&&(this.getBaseColorTexture()!==e.getBaseColorTexture()||this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))||(this.getEmissiveTexture()||e.getEmissiveTexture())&&(this.getEmissiveTexture()!==e.getEmissiveTexture()||this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))||(this.getNormalTexture()||e.getNormalTexture())&&(this.getNormalTexture()!==e.getNormalTexture()||this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))||(this.getOcclusionTexture()||e.getOcclusionTexture())&&(this.getOcclusionTexture()!==e.getOcclusionTexture()||this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))||(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture())&&(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture()||this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo())))return!1;const t=this.listExtensions(),r=e.listExtensions();if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==r[o])return!1;return!0}dispose(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),super.dispose()}getDoubleSided(){return this.X}setDoubleSided(e){return this.X=e,this}getAlpha(){return this.tt[3]}setAlpha(e){return this.tt[3]=e,this}getAlphaMode(){return this.Z}setAlphaMode(e){return this.Z=e,this}getAlphaCutoff(){return this.K}setAlphaCutoff(e){return this.K=e,this}getBaseColorFactor(){return this.tt}setBaseColorFactor(e){return this.tt=e,this}getBaseColorHex(){return l0.factorToHex(this.tt)}setBaseColorHex(e){return l0.hexToFactor(e,this.tt),this}getBaseColorTexture(){return this.baseColorTexture?this.baseColorTexture.getChild():null}getBaseColorTextureInfo(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}setBaseColorTexture(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",d0|p0|m0|g5,this,e),this}getEmissiveFactor(){return this.st}setEmissiveFactor(e){return this.st=e,this}getEmissiveHex(){return l0.factorToHex(this.st)}setEmissiveHex(e){return l0.hexToFactor(e,this.st),this}getEmissiveTexture(){return this.emissiveTexture?this.emissiveTexture.getChild():null}getEmissiveTextureInfo(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}setEmissiveTexture(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",d0|p0|m0,this,e),this}getNormalScale(){return this.et}setNormalScale(e){return this.et=e,this}getNormalTexture(){return this.normalTexture?this.normalTexture.getChild():null}getNormalTextureInfo(){return this.normalTexture?this.normalTextureInfo.getChild():null}setNormalTexture(e){return this.normalTexture=this.graph.linkTexture("normalTexture",d0|p0|m0,this,e),this}getOcclusionStrength(){return this.it}setOcclusionStrength(e){return this.it=e,this}getOcclusionTexture(){return this.occlusionTexture?this.occlusionTexture.getChild():null}getOcclusionTextureInfo(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}setOcclusionTexture(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",d0,this,e),this}getRoughnessFactor(){return this.rt}setRoughnessFactor(e){return this.rt=e,this}getMetallicFactor(){return this.nt}setMetallicFactor(e){return this.nt=e,this}getMetallicRoughnessTexture(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}getMetallicRoughnessTextureInfo(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}setMetallicRoughnessTexture(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",p0|m0,this,e),this}}Wr.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},$t([Xn],Wr.prototype,"baseColorTexture",void 0),$t([Xn],Wr.prototype,"baseColorTextureInfo",void 0),$t([Xn],Wr.prototype,"emissiveTexture",void 0),$t([Xn],Wr.prototype,"emissiveTextureInfo",void 0),$t([Xn],Wr.prototype,"normalTexture",void 0),$t([Xn],Wr.prototype,"normalTextureInfo",void 0),$t([Xn],Wr.prototype,"occlusionTexture",void 0),$t([Xn],Wr.prototype,"occlusionTextureInfo",void 0),$t([Xn],Wr.prototype,"metallicRoughnessTexture",void 0),$t([Xn],Wr.prototype,"metallicRoughnessTextureInfo",void 0);class h_ extends Xi{constructor(...e){super(...e),this.propertyType=un.MESH,this.ht=[],this.primitives=[]}copy(e,t=Yn){return super.copy(e,t),this.ht=[...e.ht],this.clearGraphChildList(this.primitives),e.primitives.forEach(r=>this.addPrimitive(t(r.getChild()))),this}addPrimitive(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}removePrimitive(e){return this.removeGraphChild(this.primitives,e)}listPrimitives(){return this.primitives.map(e=>e.getChild())}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}}$t([vr],h_.prototype,"primitives",void 0);class Da extends Xi{constructor(...e){super(...e),this.propertyType=un.NODE,this.ot=[0,0,0],this.ut=[0,0,0,1],this.ct=[1,1,1],this.ht=[],this.i=null,this.camera=null,this.mesh=null,this.skin=null,this.children=[]}copy(e,t=Yn){return super.copy(e,t),this.ot=[...e.ot],this.ut=[...e.ut],this.ct=[...e.ct],this.ht=[...e.ht],this.setCamera(e.camera?t(e.camera.getChild()):null),this.setMesh(e.mesh?t(e.mesh.getChild()):null),this.setSkin(e.skin?t(e.skin.getChild()):null),t!==Yn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}getTranslation(){return this.ot}getRotation(){return this.ut}getScale(){return this.ct}setTranslation(e){return this.ot=e,this}setRotation(e){return this.ut=e,this}setScale(e){return this.ct=e,this}getMatrix(){return Tr.compose(this.ot,this.ut,this.ct,[])}setMatrix(e){return Tr.decompose(e,this.ot,this.ut,this.ct),this}getWorldTranslation(){const e=[0,0,0];return Tr.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return Tr.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return Tr.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let o=this;o instanceof Da;o=o.i)e.push(o);let t;const r=e.pop().getMatrix();for(;t=e.pop();)a5(r,r,t.getMatrix());return r}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}getParent(){return this.i}getMesh(){return this.mesh?this.mesh.getChild():null}setMesh(e){return this.mesh=this.graph.link("mesh",this,e),this}getCamera(){return this.camera?this.camera.getChild():null}setCamera(e){return this.camera=this.graph.link("camera",this,e),this}getSkin(){return this.skin?this.skin.getChild():null}setSkin(e){return this.skin=this.graph.link("skin",this,e),this}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}$t([Xn],Da.prototype,"camera",void 0),$t([Xn],Da.prototype,"mesh",void 0),$t([Xn],Da.prototype,"skin",void 0),$t([vr],Da.prototype,"children",void 0);class Oa extends Xi{constructor(...e){super(...e),this.propertyType=un.PRIMITIVE,this.at=Oa.Mode.TRIANGLES,this.material=null,this.indices=null,this.attributes=[],this.targets=[]}copy(e,t=Yn){return super.copy(e,t),this.at=e.at,this.setIndices(e.indices?t(e.indices.getChild()):null),this.setMaterial(e.material?t(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this.clearGraphChildList(this.targets),e.targets.forEach(r=>this.addTarget(t(r.getChild()))),this}getIndices(){return this.indices?this.indices.getChild():null}setIndices(e){return this.indices=this.graph.linkIndex("indices",this,e),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}getMaterial(){return this.material?this.material.getChild():null}setMaterial(e){return this.material=this.graph.link("material",this,e),this}getMode(){return this.at}setMode(e){return this.at=e,this}listTargets(){return this.targets.map(e=>e.getChild())}addTarget(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}removeTarget(e){return this.removeGraphChild(this.targets,e)}}Oa.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},$t([Xn],Oa.prototype,"material",void 0),$t([Xn],Oa.prototype,"indices",void 0),$t([vr],Oa.prototype,"attributes",void 0),$t([vr],Oa.prototype,"targets",void 0);class G2 extends lf{constructor(...e){super(...e),this.propertyType=un.PRIMITIVE_TARGET,this.attributes=[]}copy(e,t=Yn){return super.copy(e,t),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return o.semantic=e,this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}}$t([vr],G2.prototype,"attributes",void 0);class d_ extends Xi{constructor(...e){super(...e),this.propertyType=un.SCENE,this.children=[]}copy(e,t=Yn){return super.copy(e,t),t!==Yn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}$t([vr],d_.prototype,"children",void 0);class wd extends Xi{constructor(...e){super(...e),this.propertyType=un.SKIN,this.skeleton=null,this.inverseBindMatrices=null,this.joints=[]}copy(e,t=Yn){return super.copy(e,t),this.setSkeleton(e.skeleton?t(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?t(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach(r=>this.addJoint(t(r.getChild()))),this}getSkeleton(){return this.skeleton?this.skeleton.getChild():null}setSkeleton(e){return this.skeleton=this.graph.link("skeleton",this,e),this}getInverseBindMatrices(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}setInverseBindMatrices(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}addJoint(e){const t=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,t)}removeJoint(e){return this.removeGraphChild(this.joints,e)}listJoints(){return this.joints.map(e=>e.getChild())}}$t([Xn],wd.prototype,"skeleton",void 0),$t([Xn],wd.prototype,"inverseBindMatrices",void 0),$t([vr],wd.prototype,"joints",void 0);class V2 extends Xi{constructor(...e){super(...e),this.propertyType=un.TEXTURE,this.lt=null,this.ft="",this.P=""}copy(e,t=Yn){return super.copy(e,t),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}getMimeType(){return this.ft||af.extensionToMimeType(u0.extension(this.P))}setMimeType(e){return this.ft=e,this}getURI(){return this.P}setURI(e){return this.P=e,this.ft=af.extensionToMimeType(u0.extension(e)),this}getImage(){return this.lt}setImage(e){return this.lt=e,this}getSize(){return this.lt?af.getSize(this.lt,this.getMimeType()):null}}class us extends lf{constructor(e){super(e),this.propertyType=un.ROOT,this.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},this.gt=new Set,this.defaultScene=null,this.accessors=[],this.animations=[],this.buffers=[],this.cameras=[],this.materials=[],this.meshes=[],this.nodes=[],this.scenes=[],this.skins=[],this.textures=[],e.on("clone",t=>this.wt(t))}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=Yn){if(super.copy(e,t),t===Yn)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach(r=>this.vt(t(r.getChild()))),e.animations.forEach(r=>this.Tt(t(r.getChild()))),e.buffers.forEach(r=>this.yt(t(r.getChild()))),e.cameras.forEach(r=>this.At(t(r.getChild()))),e.materials.forEach(r=>this.Et(t(r.getChild()))),e.meshes.forEach(r=>this.xt(t(r.getChild()))),e.nodes.forEach(r=>this.St(t(r.getChild()))),e.scenes.forEach(r=>this.Mt(t(r.getChild()))),e.skins.forEach(r=>this.It(t(r.getChild()))),e.textures.forEach(r=>this.bt(t(r.getChild()))),this.setDefaultScene(e.defaultScene?t(e.defaultScene.getChild()):null),this}wt(e){return e instanceof d_?this.Mt(e):e instanceof Da?this.St(e):e instanceof cu?this.At(e):e instanceof wd?this.It(e):e instanceof h_?this.xt(e):e instanceof Wr?this.Et(e):e instanceof V2?this.bt(e):e instanceof f0?this.Tt(e):e instanceof Gt?this.vt(e):e instanceof U2&&this.yt(e),this}getAsset(){return this.dt}listExtensionsUsed(){return Array.from(this.gt)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}Rt(e){return this.gt.add(e),this}Nt(e){return this.gt.delete(e),this}Mt(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}listScenes(){return this.scenes.map(e=>e.getChild())}setDefaultScene(e){return this.defaultScene=this.graph.link("scene",this,e),this}getDefaultScene(){return this.defaultScene?this.defaultScene.getChild():null}St(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}listNodes(){return this.nodes.map(e=>e.getChild())}At(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}listCameras(){return this.cameras.map(e=>e.getChild())}It(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}listSkins(){return this.skins.map(e=>e.getChild())}xt(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}listMeshes(){return this.meshes.map(e=>e.getChild())}Et(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}listMaterials(){return this.materials.map(e=>e.getChild())}bt(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}listTextures(){return this.textures.map(e=>e.getChild())}Tt(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}listAnimations(){return this.animations.map(e=>e.getChild())}vt(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}listAccessors(){return this.accessors.map(e=>e.getChild())}yt(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}listBuffers(){return this.buffers.map(e=>e.getChild())}}$t([Xn],us.prototype,"defaultScene",void 0),$t([vr],us.prototype,"accessors",void 0),$t([vr],us.prototype,"animations",void 0),$t([vr],us.prototype,"buffers",void 0),$t([vr],us.prototype,"cameras",void 0),$t([vr],us.prototype,"materials",void 0),$t([vr],us.prototype,"meshes",void 0),$t([vr],us.prototype,"nodes",void 0),$t([vr],us.prototype,"scenes",void 0),$t([vr],us.prototype,"skins",void 0),$t([vr],us.prototype,"textures",void 0);class p_{constructor(){this.Ct=new m5,this.Ot=new us(this.Ct),this._t=qi.DEFAULT_INSTANCE}getRoot(){return this.Ot}getGraph(){return this.Ct}getLogger(){return this._t}setLogger(e){return this._t=e,this}clone(){return new p_().merge(this).setLogger(this._t)}merge(e){const t={};for(const u of e.getRoot().listExtensionsUsed()){const h=this.createExtension(u.constructor);u.isRequired()&&h.setRequired(!0),t[h.extensionName]=h}const r=new Set,o=new Map;r.add(e.Ot),o.set(e.Ot,this.Ot);for(const u of e.Ct.getLinks())for(const h of[u.getParent(),u.getChild()]){if(r.has(h))continue;let m;if(h.propertyType===un.TEXTURE_INFO)m=h;else{const v=h.constructor;m=h instanceof B2?new v(this.Ct,t[h.extensionName]):new v(this.Ct)}o.set(h,m),r.add(h)}const l=u=>{const h=o.get(u);if(!h)throw new Error("Could resolve property.");return h};for(const u of r){const h=o.get(u);if(!h)throw new Error("Could resolve property.");h.copy(u,l)}return this}async transform(...e){const t=e.map(r=>r.name);for(const r of e)await r(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===t)||new e(this)}createScene(e=""){const t=new d_(this.Ct,e);return this.Ot.Mt(t),t}createNode(e=""){const t=new Da(this.Ct,e);return this.Ot.St(t),t}createCamera(e=""){const t=new cu(this.Ct,e);return this.Ot.At(t),t}createSkin(e=""){const t=new wd(this.Ct,e);return this.Ot.It(t),t}createMesh(e=""){const t=new h_(this.Ct,e);return this.Ot.xt(t),t}createPrimitive(){return new Oa(this.Ct)}createPrimitiveTarget(e=""){return new G2(this.Ct,e)}createMaterial(e=""){const t=new Wr(this.Ct,e);return this.Ot.Et(t),t}createTexture(e=""){const t=new V2(this.Ct,e);return this.Ot.bt(t),t}createAnimation(e=""){const t=new f0(this.Ct,e);return this.Ot.Tt(t),t}createAnimationChannel(e=""){return new h0(this.Ct,e)}createAnimationSampler(e=""){return new uu(this.Ct,e)}createAccessor(e="",t=null){t||(t=this.getRoot().listBuffers()[0]);const r=new Gt(this.Ct,e).setBuffer(t);return this.Ot.vt(r),r}createBuffer(e=""){const t=new U2(this.Ct,e);return this.Ot.yt(t),t}}function cs(){return(cs=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s}).apply(this,arguments)}class v5{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),t.texCoord!==void 0&&e.setTexCoord(t.texCoord);const r=this.jsonDoc.json.textures[t.index];if(r.sampler===void 0)return;const o=this.jsonDoc.json.samplers[r.sampler];o.magFilter!==void 0&&e.setMagFilter(o.magFilter),o.minFilter!==void 0&&e.setMinFilter(o.minFilter),o.wrapS!==void 0&&e.setWrapS(o.wrapS),o.wrapT!==void 0&&e.setWrapT(o.wrapT)}}const m_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},W2={logger:qi.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function g0(s,e){const t=e.bufferViews[s.bufferView],r=e.jsonDoc.json.bufferViews[s.bufferView],o=m_[s.componentType],l=Gt.getElementSize(s.type),u=o.BYTES_PER_ELEMENT;if(r.byteStride!==void 0&&r.byteStride!==l*u)return function(m,v){const w=v.bufferViews[m.bufferView],S=v.jsonDoc.json.bufferViews[m.bufferView],A=m_[m.componentType],R=Gt.getElementSize(m.type),O=A.BYTES_PER_ELEMENT,N=m.byteOffset||0,k=new A(m.count*R),D=new DataView(w.buffer,w.byteOffset,w.byteLength),P=S.byteStride;for(let F=0;F<m.count;F++)for(let L=0;L<R;L++){const z=N+F*P+L*O;let H;switch(m.componentType){case Gt.ComponentType.FLOAT:H=D.getFloat32(z,!0);break;case Gt.ComponentType.UNSIGNED_INT:H=D.getUint32(z,!0);break;case Gt.ComponentType.UNSIGNED_SHORT:H=D.getUint16(z,!0);break;case Gt.ComponentType.UNSIGNED_BYTE:H=D.getUint8(z);break;case Gt.ComponentType.SHORT:H=D.getInt16(z,!0);break;case Gt.ComponentType.BYTE:H=D.getInt8(z);break;default:throw new Error(`Unexpected componentType "${m.componentType}".`)}k[F*R+L]=H}return k}(s,e);const h=t.byteOffset+(s.byteOffset||0);return new o(t.buffer.slice(h,h+s.count*l*u))}var bd,Sd;(function(s){s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(bd||(bd={})),function(s){s.ARRAY_BUFFER="ARRAY_BUFFER",s.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",s.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",s.OTHER="OTHER"}(Sd||(Sd={}));class fs{constructor(e,t,r){this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=e,this.jsonDoc=t,this.options=r;const o=e.getRoot(),l=o.listBuffers().length,u=o.listTextures().length;this.bufferURIGenerator=new $2(l>1,r.basename),this.imageURIGenerator=new $2(u>1,r.basename),this.logger=e.getLogger()}createTextureInfoDef(e,t){const r={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},o=JSON.stringify(r);this.samplerDefIndexMap.has(o)||(this.samplerDefIndexMap.set(o,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const l={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(o)},u=JSON.stringify(l);this.textureDefIndexMap.has(u)||(this.textureDefIndexMap.set(u,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(l));const h={index:this.textureDefIndexMap.get(u)};return t.getTexCoord()!==0&&(h.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,h),h}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some(r=>r.getName()==="POSITION"||r.getName()==="input")&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,r){if(this.options.format===lu.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const o=af.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,o),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.Lt.get(e);if(t)return t;for(const r of this.Bt.getGraph().listParentLinks(e)){if(r.getName()==="inverseBindMatrices")return fs.BufferViewUsage.INVERSE_BIND_MATRICES;if(r instanceof z2)return fs.BufferViewUsage.ARRAY_BUFFER;if(r instanceof H2)return fs.BufferViewUsage.ELEMENT_ARRAY_BUFFER}return fs.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const r=this.Lt.get(e);if(r&&r!==t)throw new Error(`Accessor with usage "${r}" cannot be reused as "${t}".`);return this.Lt.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,r]of Array.from(this.Lt.entries()))e[r]=e[r]||[],e[r].push(t);return e}}fs.BufferViewTarget=bd,fs.BufferViewUsage=Sd,fs.USAGE_TO_TARGET={[Sd.ARRAY_BUFFER]:bd.ARRAY_BUFFER,[Sd.ELEMENT_ARRAY_BUFFER]:bd.ELEMENT_ARRAY_BUFFER};class $2{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=t}createURI(e,t){return e.getURI()?e.getURI():this.multiple?`${this.basename}_${this.counter++}.${t}`:`${this.basename}.${t}`}}const{BufferViewUsage:g_}=fs;var v0;(function(s){s[s.JSON=1313821514]="JSON",s[s.BIN=5130562]="BIN"})(v0||(v0={}));class y5{constructor(){this._t=qi.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=o0.INTERLEAVED}setLogger(e){return this._t=e,this}registerExtensions(e){for(const t of e)this.gt.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.Pt,e),this}setVertexLayout(e){return this.Ut=e,this}kt(e){function t(r){if(r.uri&&!(r.uri in e.resources)&&r.uri.match(/data:/)){const o=`__${d5()}.${u0.extension(r.uri)}`;e.resources[o]=gi.createBufferFromDataURI(r.uri),r.uri=o}}(e.json.images||[]).forEach(r=>{if(r.bufferView===void 0&&r.uri===void 0)throw new Error("Missing resource URI or buffer view.");t(r)}),(e.json.buffers||[]).forEach(t)}readJSON(e){return e=this.Ft(e),this.kt(e),class{static read(t,r=W2){const o=cs({},W2,r),{json:l}=t,u=new p_;this.validate(t,o);const h=new v5(t),m=l.asset,v=u.getRoot().getAsset();m.copyright&&(v.copyright=m.copyright),m.extras&&(v.extras=m.extras),l.extras!==void 0&&u.getRoot().setExtras(cs({},l.extras));const w=l.extensionsUsed||[],S=l.extensionsRequired||[];for(const P of o.extensions)if(w.includes(P.EXTENSION_NAME)){const F=u.createExtension(P).setRequired(S.includes(P.EXTENSION_NAME));for(const L of F.readDependencies)F.install(L,o.dependencies[L])}const A=l.buffers||[];u.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(un.BUFFER)).forEach(P=>P.preread(h,un.BUFFER)),h.buffers=A.map(P=>{const F=u.createBuffer(P.name);return P.extras&&F.setExtras(P.extras),P.uri&&P.uri.indexOf("__")!==0&&F.setURI(P.uri),F}),h.bufferViewBuffers=(l.bufferViews||[]).map((P,F)=>{if(!h.bufferViews[F]){const L=t.json.buffers[P.buffer],z=new Uint8Array(L.uri?t.resources[L.uri]:t.resources["@glb.bin"],P.byteOffset||0,P.byteLength);h.bufferViews[F]=z}return h.buffers[P.buffer]}),h.accessors=(l.accessors||[]).map(P=>{const F=u.createAccessor(P.name,h.bufferViewBuffers[P.bufferView]).setType(P.type);if(P.extras&&F.setExtras(P.extras),P.normalized!==void 0&&F.setNormalized(P.normalized),P.bufferView===void 0&&!P.sparse)return F;let L;return L=P.sparse!==void 0?function(z,H){const X=m_[z.componentType],$=Gt.getElementSize(z.type);let J;J=z.bufferView!==void 0?g0(z,H):new X(z.count*$);const se=z.sparse,ce=se.count,pe=cs({},z,se.indices,{count:ce,type:"SCALAR"}),fe=cs({},z,se.values,{count:ce}),b=g0(pe,H),p=g0(fe,H);for(let ee=0;ee<pe.count;ee++)for(let E=0;E<$;E++)J[b[ee]*$+E]=p[ee*$+E];return J}(P,h):g0(P,h),F.setArray(L),F});const R=l.images||[],O=l.textures||[];u.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(un.TEXTURE)).forEach(P=>P.preread(h,un.TEXTURE)),h.textures=R.map(P=>{const F=u.createTexture(P.name);if(P.extras&&F.setExtras(P.extras),P.bufferView!==void 0){const L=l.bufferViews[P.bufferView],z=t.json.buffers[L.buffer],H=L.byteOffset||0,X=(z.uri?t.resources[z.uri]:t.resources["@glb.bin"]).slice(H,H+L.byteLength);F.setImage(X)}else P.uri!==void 0&&(F.setImage(t.resources[P.uri]),P.uri.indexOf("__")!==0&&F.setURI(P.uri));if(P.mimeType!==void 0)F.setMimeType(P.mimeType);else if(P.uri){const L=u0.extension(P.uri);F.setMimeType(af.extensionToMimeType(L))}return F}),h.materials=(l.materials||[]).map(P=>{const F=u.createMaterial(P.name);P.extras&&F.setExtras(P.extras),P.alphaMode!==void 0&&F.setAlphaMode(P.alphaMode),P.alphaCutoff!==void 0&&F.setAlphaCutoff(P.alphaCutoff),P.doubleSided!==void 0&&F.setDoubleSided(P.doubleSided);const L=P.pbrMetallicRoughness||{};if(L.baseColorFactor!==void 0&&F.setBaseColorFactor(L.baseColorFactor),P.emissiveFactor!==void 0&&F.setEmissiveFactor(P.emissiveFactor),L.metallicFactor!==void 0&&F.setMetallicFactor(L.metallicFactor),L.roughnessFactor!==void 0&&F.setRoughnessFactor(L.roughnessFactor),L.baseColorTexture!==void 0){const z=L.baseColorTexture;F.setBaseColorTexture(h.textures[O[z.index].source]),h.setTextureInfo(F.getBaseColorTextureInfo(),z)}if(P.emissiveTexture!==void 0){const z=P.emissiveTexture;F.setEmissiveTexture(h.textures[O[z.index].source]),h.setTextureInfo(F.getEmissiveTextureInfo(),z)}if(P.normalTexture!==void 0){const z=P.normalTexture;F.setNormalTexture(h.textures[O[z.index].source]),h.setTextureInfo(F.getNormalTextureInfo(),z),P.normalTexture.scale!==void 0&&F.setNormalScale(P.normalTexture.scale)}if(P.occlusionTexture!==void 0){const z=P.occlusionTexture;F.setOcclusionTexture(h.textures[O[z.index].source]),h.setTextureInfo(F.getOcclusionTextureInfo(),z),P.occlusionTexture.strength!==void 0&&F.setOcclusionStrength(P.occlusionTexture.strength)}if(L.metallicRoughnessTexture!==void 0){const z=L.metallicRoughnessTexture;F.setMetallicRoughnessTexture(h.textures[O[z.index].source]),h.setTextureInfo(F.getMetallicRoughnessTextureInfo(),z)}return F});const N=l.meshes||[];u.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(un.PRIMITIVE)).forEach(P=>P.preread(h,un.PRIMITIVE)),h.meshes=N.map(P=>{const F=u.createMesh(P.name);return P.extras&&F.setExtras(P.extras),P.weights!==void 0&&F.setWeights(P.weights),(P.primitives||[]).forEach(L=>{const z=u.createPrimitive();L.extras&&z.setExtras(L.extras),L.material!==void 0&&z.setMaterial(h.materials[L.material]),L.mode!==void 0&&z.setMode(L.mode);for(const[X,$]of Object.entries(L.attributes||{}))z.setAttribute(X,h.accessors[$]);L.indices!==void 0&&z.setIndices(h.accessors[L.indices]);const H=P.extras&&P.extras.targetNames||[];(L.targets||[]).forEach((X,$)=>{const J=H[$]||$.toString(),se=u.createPrimitiveTarget(J);for(const[ce,pe]of Object.entries(X))se.setAttribute(ce,h.accessors[pe]);z.addTarget(se)}),F.addPrimitive(z)}),F}),h.cameras=(l.cameras||[]).map(P=>{const F=u.createCamera(P.name).setType(P.type);if(P.extras&&F.setExtras(P.extras),P.type===cu.Type.PERSPECTIVE){const L=P.perspective;F.setYFov(L.yfov),F.setZNear(L.znear),L.zfar!==void 0&&F.setZFar(L.zfar),L.aspectRatio!==void 0&&F.setAspectRatio(L.aspectRatio)}else{const L=P.orthographic;F.setZNear(L.znear).setZFar(L.zfar).setXMag(L.xmag).setYMag(L.ymag)}return F});const k=l.nodes||[];u.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(un.NODE)).forEach(P=>P.preread(h,un.NODE)),h.nodes=k.map(P=>{const F=u.createNode(P.name);if(P.extras&&F.setExtras(P.extras),P.translation!==void 0&&F.setTranslation(P.translation),P.rotation!==void 0&&F.setRotation(P.rotation),P.scale!==void 0&&F.setScale(P.scale),P.matrix!==void 0){const L=[0,0,0],z=[0,0,0,1],H=[1,1,1];Tr.decompose(P.matrix,L,z,H),F.setTranslation(L),F.setRotation(z),F.setScale(H)}return P.weights!==void 0&&F.setWeights(P.weights),F}),h.skins=(l.skins||[]).map(P=>{const F=u.createSkin(P.name);P.extras&&F.setExtras(P.extras),P.inverseBindMatrices!==void 0&&F.setInverseBindMatrices(h.accessors[P.inverseBindMatrices]),P.skeleton!==void 0&&F.setSkeleton(h.nodes[P.skeleton]);for(const L of P.joints)F.addJoint(h.nodes[L]);return F}),k.map((P,F)=>{const L=h.nodes[F];(P.children||[]).forEach(z=>L.addChild(h.nodes[z])),P.mesh!==void 0&&L.setMesh(h.meshes[P.mesh]),P.camera!==void 0&&L.setCamera(h.cameras[P.camera]),P.skin!==void 0&&L.setSkin(h.skins[P.skin])}),h.animations=(l.animations||[]).map(P=>{const F=u.createAnimation(P.name);P.extras&&F.setExtras(P.extras);const L=(P.samplers||[]).map(z=>{const H=u.createAnimationSampler().setInput(h.accessors[z.input]).setOutput(h.accessors[z.output]).setInterpolation(z.interpolation||uu.Interpolation.LINEAR);return z.extras&&H.setExtras(z.extras),F.addSampler(H),H});return(P.channels||[]).forEach(z=>{const H=u.createAnimationChannel().setSampler(L[z.sampler]).setTargetNode(h.nodes[z.target.node]).setTargetPath(z.target.path);z.extras&&H.setExtras(z.extras),F.addChannel(H)}),F});const D=l.scenes||[];return u.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(un.SCENE)).forEach(P=>P.preread(h,un.SCENE)),h.scenes=D.map(P=>{const F=u.createScene(P.name);return P.extras&&F.setExtras(P.extras),(P.nodes||[]).map(L=>h.nodes[L]).forEach(L=>F.addChild(L)),F}),l.scene!==void 0&&u.getRoot().setDefaultScene(h.scenes[l.scene]),u.getRoot().listExtensionsUsed().forEach(P=>P.read(h)),u}static validate(t,r){const o=t.json;if(o.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${o.asset.version}".`);if(o.extensionsRequired){for(const l of o.extensionsRequired)if(!r.extensions.find(u=>u.EXTENSION_NAME===l))throw new Error(`Missing required extension, "${l}".`)}if(o.extensionsUsed)for(const l of o.extensionsUsed)r.extensions.find(u=>u.EXTENSION_NAME===l)||r.logger.warn(`Missing optional extension, "${l}".`)}}.read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}writeJSON(e,t={}){if(t.format===lu.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0\u20131 buffers.");return class{static write(r,o){const l=r.getRoot(),u={asset:cs({generator:"glTF-Transform v1.2.4"},l.getAsset()),extras:cs({},l.getExtras())},h={json:u,resources:{}},m=new fs(r,h,o),v=o.logger||qi.DEFAULT_INSTANCE,w=new Set(o.extensions.map(D=>D.EXTENSION_NAME)),S=r.getRoot().listExtensionsUsed().filter(D=>w.has(D.extensionName)),A=r.getRoot().listExtensionsRequired().filter(D=>w.has(D.extensionName));S.length<r.getRoot().listExtensionsUsed().length&&v.debug("Some extensions were not registered for I/O, and will not be written.");for(const D of S)for(const P of D.writeDependencies)D.install(P,o.dependencies[P]);function R(D,P,F,L){const z=[];let H=0;for(const $ of D){const J=m.createAccessorDef($);J.bufferView=u.bufferViews.length;const se=gi.pad($.getArray().buffer);J.byteOffset=H,H+=se.byteLength,z.push(se),m.accessorIndexMap.set($,u.accessors.length),u.accessors.push(J)}const X={buffer:P,byteOffset:F,byteLength:gi.concat(z).byteLength};return L&&(X.target=L),u.bufferViews.push(X),{buffers:z,byteLength:H}}function O(D,P,F){const L=D[0].getCount();let z=0;for(const J of D){const se=m.createAccessorDef(J);se.bufferView=u.bufferViews.length,se.byteOffset=z;const ce=J.getElementSize(),pe=J.getComponentSize();z+=gi.padNumber(ce*pe),m.accessorIndexMap.set(J,u.accessors.length),u.accessors.push(se)}const H=L*z,X=new ArrayBuffer(H),$=new DataView(X);for(let J=0;J<L;J++){let se=0;for(const ce of D){const pe=ce.getElementSize(),fe=ce.getComponentSize(),b=ce.getComponentType(),p=ce.getArray();for(let ee=0;ee<pe;ee++){const E=J*z+se+ee*fe,me=p[J*pe+ee];switch(b){case Gt.ComponentType.FLOAT:$.setFloat32(E,me,!0);break;case Gt.ComponentType.BYTE:$.setInt8(E,me);break;case Gt.ComponentType.SHORT:$.setInt16(E,me,!0);break;case Gt.ComponentType.UNSIGNED_BYTE:$.setUint8(E,me);break;case Gt.ComponentType.UNSIGNED_SHORT:$.setUint16(E,me,!0);break;case Gt.ComponentType.UNSIGNED_INT:$.setUint32(E,me,!0);break;default:throw new Error("Unexpected component type: "+b)}}se+=gi.padNumber(pe*fe)}}return u.bufferViews.push({buffer:P,byteOffset:F,byteLength:H,byteStride:z,target:fs.BufferViewTarget.ARRAY_BUFFER}),{byteLength:H,buffers:[X]}}const N=new Map;for(const D of r.getGraph().getLinks()){if(D.getParent()===l)continue;const P=D.getChild();if(P instanceof Gt){const F=N.get(P)||[];F.push(D),N.set(P,F)}}if(u.accessors=[],u.bufferViews=[],u.samplers=[],u.textures=[],u.images=l.listTextures().map((D,P)=>{const F=m.createPropertyDef(D);D.getMimeType()&&(F.mimeType=D.getMimeType());const L=D.getImage();return L&&m.createImageData(F,L,D),m.imageIndexMap.set(D,P),F}),S.filter(D=>D.prewriteTypes.includes(un.ACCESSOR)).forEach(D=>D.prewrite(m,un.ACCESSOR)),l.listAccessors().forEach(D=>{const P=m.accessorUsageGroupedByParent,F=m.accessorParents;if(m.accessorIndexMap.has(D))return;const L=N.get(D)||[],z=m.getAccessorUsage(D);if(m.addAccessorToUsageGroup(D,z),P.has(z)){const H=L[0].getParent(),X=F.get(H)||new Set;X.add(D),F.set(H,X)}}),S.filter(D=>D.prewriteTypes.includes(un.BUFFER)).forEach(D=>D.prewrite(m,un.BUFFER)),(l.listAccessors().length>0||l.listTextures().length>0||m.otherBufferViews.size>0)&&l.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");u.buffers=[],l.listBuffers().forEach((D,P)=>{const F=m.createPropertyDef(D),L=m.accessorUsageGroupedByParent,z=m.accessorParents,H=D.listParents().filter(pe=>pe instanceof Gt),X=new Set(H),$=[],J=u.buffers.length;let se=0;const ce=m.listAccessorUsageGroups();for(const pe in ce)if(L.has(pe))for(const fe of Array.from(z.values())){const b=Array.from(fe).filter(p=>X.has(p)).filter(p=>m.getAccessorUsage(p)===pe);if(b.length)if(pe!==g_.ARRAY_BUFFER||o.vertexLayout===o0.INTERLEAVED){const p=pe===g_.ARRAY_BUFFER?O(b,J,se):R(b,J,se);se+=p.byteLength,$.push(...p.buffers)}else for(const p of b){const ee=O([p],J,se);se+=ee.byteLength,$.push(...ee.buffers)}}else{const fe=ce[pe].filter(p=>X.has(p));if(!fe.length)continue;const b=R(fe,J,se,pe===g_.ELEMENT_ARRAY_BUFFER?fs.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);se+=b.byteLength,$.push(...b.buffers)}if(m.imageBufferViews.length&&P===0){for(let pe=0;pe<m.imageBufferViews.length;pe++)if(u.bufferViews[u.images[pe].bufferView].byteOffset=se,se+=m.imageBufferViews[pe].byteLength,$.push(m.imageBufferViews[pe]),se%8){const fe=8-se%8;se+=fe,$.push(new ArrayBuffer(fe))}}if(m.otherBufferViews.has(D))for(const pe of m.otherBufferViews.get(D))u.bufferViews.push({buffer:J,byteOffset:se,byteLength:pe.byteLength}),m.otherBufferViewsIndexMap.set(pe,u.bufferViews.length-1),se+=pe.byteLength,$.push(pe);if(se){let pe;o.format===lu.GLB?pe="@glb.bin":(pe=m.bufferURIGenerator.createURI(D,"bin"),F.uri=pe),F.byteLength=se,h.resources[pe]=gi.concat($)}u.buffers.push(F),m.bufferIndexMap.set(D,P)}),l.listAccessors().find(D=>!D.getBuffer())&&v.warn("Skipped writing one or more Accessors: no Buffer assigned."),u.materials=l.listMaterials().map((D,P)=>{const F=m.createPropertyDef(D);if(D.getAlphaMode()!==Wr.AlphaMode.OPAQUE&&(F.alphaMode=D.getAlphaMode()),D.getAlphaMode()===Wr.AlphaMode.MASK&&(F.alphaCutoff=D.getAlphaCutoff()),D.getDoubleSided()&&(F.doubleSided=!0),F.pbrMetallicRoughness={},Tr.eq(D.getBaseColorFactor(),[1,1,1,1])||(F.pbrMetallicRoughness.baseColorFactor=D.getBaseColorFactor()),Tr.eq(D.getEmissiveFactor(),[0,0,0])||(F.emissiveFactor=D.getEmissiveFactor()),D.getRoughnessFactor()!==1&&(F.pbrMetallicRoughness.roughnessFactor=D.getRoughnessFactor()),D.getMetallicFactor()!==1&&(F.pbrMetallicRoughness.metallicFactor=D.getMetallicFactor()),D.getBaseColorTexture()){const L=D.getBaseColorTexture(),z=D.getBaseColorTextureInfo();F.pbrMetallicRoughness.baseColorTexture=m.createTextureInfoDef(L,z)}if(D.getEmissiveTexture()){const L=D.getEmissiveTexture(),z=D.getEmissiveTextureInfo();F.emissiveTexture=m.createTextureInfoDef(L,z)}if(D.getNormalTexture()){const L=D.getNormalTexture(),z=D.getNormalTextureInfo(),H=m.createTextureInfoDef(L,z);D.getNormalScale()!==1&&(H.scale=D.getNormalScale()),F.normalTexture=H}if(D.getOcclusionTexture()){const L=D.getOcclusionTexture(),z=D.getOcclusionTextureInfo(),H=m.createTextureInfoDef(L,z);D.getOcclusionStrength()!==1&&(H.strength=D.getOcclusionStrength()),F.occlusionTexture=H}if(D.getMetallicRoughnessTexture()){const L=D.getMetallicRoughnessTexture(),z=D.getMetallicRoughnessTextureInfo();F.pbrMetallicRoughness.metallicRoughnessTexture=m.createTextureInfoDef(L,z)}return m.materialIndexMap.set(D,P),F}),u.meshes=l.listMeshes().map((D,P)=>{const F=m.createPropertyDef(D);let L=null;return F.primitives=D.listPrimitives().map(z=>{const H={attributes:{}};H.mode=z.getMode();const X=z.getMaterial();X&&(H.material=m.materialIndexMap.get(X)),Object.keys(z.getExtras()).length&&(H.extras=z.getExtras());const $=z.getIndices();$&&(H.indices=m.accessorIndexMap.get($));for(const J of z.listSemantics())H.attributes[J]=m.accessorIndexMap.get(z.getAttribute(J));for(const J of z.listTargets()){const se={};for(const ce of J.listSemantics())se[ce]=m.accessorIndexMap.get(J.getAttribute(ce));H.targets=H.targets||[],H.targets.push(se)}return z.listTargets().length&&!L&&(L=z.listTargets().map(J=>J.getName())),H}),D.getWeights().length&&(F.weights=D.getWeights()),L&&(F.extras=F.extras||{},F.extras.targetNames=L),m.meshIndexMap.set(D,P),F}),u.cameras=l.listCameras().map((D,P)=>{const F=m.createPropertyDef(D);if(F.type=D.getType(),F.type===cu.Type.PERSPECTIVE){F.perspective={znear:D.getZNear(),zfar:D.getZFar(),yfov:D.getYFov()};const L=D.getAspectRatio();L!==null&&(F.perspective.aspectRatio=L)}else F.orthographic={znear:D.getZNear(),zfar:D.getZFar(),xmag:D.getXMag(),ymag:D.getYMag()};return m.cameraIndexMap.set(D,P),F}),u.nodes=l.listNodes().map((D,P)=>{const F=m.createPropertyDef(D);return Tr.eq(D.getTranslation(),[0,0,0])||(F.translation=D.getTranslation()),Tr.eq(D.getRotation(),[0,0,0,1])||(F.rotation=D.getRotation()),Tr.eq(D.getScale(),[1,1,1])||(F.scale=D.getScale()),D.getWeights().length&&(F.weights=D.getWeights()),m.nodeIndexMap.set(D,P),F}),u.skins=l.listSkins().map((D,P)=>{const F=m.createPropertyDef(D),L=D.getInverseBindMatrices();L&&(F.inverseBindMatrices=m.accessorIndexMap.get(L));const z=D.getSkeleton();return z&&(F.skeleton=m.nodeIndexMap.get(z)),F.joints=D.listJoints().map(H=>m.nodeIndexMap.get(H)),m.skinIndexMap.set(D,P),F}),l.listNodes().forEach((D,P)=>{const F=u.nodes[P],L=D.getMesh();L&&(F.mesh=m.meshIndexMap.get(L));const z=D.getCamera();z&&(F.camera=m.cameraIndexMap.get(z));const H=D.getSkin();H&&(F.skin=m.skinIndexMap.get(H)),D.listChildren().length>0&&(F.children=D.listChildren().map(X=>m.nodeIndexMap.get(X)))}),u.animations=l.listAnimations().map(D=>{const P=m.createPropertyDef(D),F=new Map;return P.samplers=D.listSamplers().map((L,z)=>{const H=m.createPropertyDef(L);return H.input=m.accessorIndexMap.get(L.getInput()),H.output=m.accessorIndexMap.get(L.getOutput()),H.interpolation=L.getInterpolation(),F.set(L,z),H}),P.channels=D.listChannels().map(L=>{const z=m.createPropertyDef(L);return z.sampler=F.get(L.getSampler()),z.target={node:m.nodeIndexMap.get(L.getTargetNode()),path:L.getTargetPath()},z}),P}),u.scenes=l.listScenes().map(D=>{const P=m.createPropertyDef(D);return P.nodes=D.listChildren().map(F=>m.nodeIndexMap.get(F)),P});const k=l.getDefaultScene();return k&&(u.scene=l.listScenes().indexOf(k)),u.extensionsUsed=S.map(D=>D.extensionName),u.extensionsRequired=A.map(D=>D.extensionName),S.forEach(D=>D.write(m)),function(D){const P=[];for(const F in D){const L=D[F];(Array.isArray(L)&&L.length===0||L===null||L===""||L&&typeof L=="object"&&Object.keys(L).length===0)&&P.push(F)}for(const F of P)delete D[F]}(u),h}}.write(e,{format:t.format||lu.GLTF,basename:t.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:cs({},this.Pt),extensions:Array.from(this.gt)})}Ft(e){const{images:t,buffers:r}=e.json;return e={json:cs({},e.json),resources:cs({},e.resources)},t&&(e.json.images=t.map(o=>cs({},o))),r&&(e.json.buffers=r.map(o=>cs({},o))),e}binaryToJSON(e){const t=this.Gt(e);this.kt(t);const r=t.json;if(r.buffers&&r.buffers.some(o=>function(l,u){return u.uri!==void 0&&!(u.uri in l.resources)}(t,o)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some(o=>function(l,u){return u.uri!==void 0&&!(u.uri in l.resources)&&u.bufferView===void 0}(t,o)))throw new Error("Cannot resolve external images with binaryToJSON().");return t}Gt(e){const t=new Uint32Array(e,0,3);if(t[0]!==1179937895)throw new Error("Invalid glTF asset.");if(t[1]!==2)throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const r=new Uint32Array(e,12,2);if(r[1]!==v0.JSON)throw new Error("Missing required GLB JSON chunk.");const o=r[0],l=gi.decodeText(e.slice(20,20+o)),u=JSON.parse(l),h=20+o;if(e.byteLength<=h)return{json:u,resources:{}};const m=new Uint32Array(e,h,2);if(m[1]!==v0.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:u,resources:{"@glb.bin":e.slice(h+8,h+8+m[0])}}}readBinary(e){return this.readJSON(this.binaryToJSON(e))}writeBinary(e){const{json:t,resources:r}=this.writeJSON(e,{format:lu.GLB}),o=new Uint32Array([1179937895,2,12]),l=JSON.stringify(t),u=gi.pad(gi.encodeText(l),32),h=new Uint32Array([u.byteLength,1313821514]).buffer,m=gi.concat([h,u]);o[o.length-1]+=m.byteLength;const v=Object.values(r)[0];if(!v||!v.byteLength)return gi.concat([o.buffer,m]);const w=gi.pad(v,0),S=new Uint32Array([w.byteLength,5130562]).buffer,A=gi.concat([S,w]);return o[o.length-1]+=A.byteLength,gi.concat([o.buffer,m,A])}}const x5={};class jV extends y5{constructor(e=x5){super(),this.qt=void 0,this.qt=e}read(e){return this.readAsJSON(e).then(t=>this.readJSON(t))}readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||new URL(e,window.location.href).pathname.match(/\.glb$/)?this.Jt(e):this.zt(e)}Wt(e,t){const r=[...e.json.images||[],...e.json.buffers||[]].map(o=>{const l=o.uri;return!l||l.match(/data:/)?Promise.resolve():fetch(function(u,h){if(!function(w){return!/^(?:[a-zA-Z]+:)?\//.test(w)}(h))return h;const m=u.split("/"),v=h.split("/");m.pop();for(let w=0;w<v.length;w++)v[w]!=="."&&(v[w]===".."?m.pop():m.push(v[w]));return m.join("/")}(t,l),this.qt).then(u=>u.arrayBuffer()).then(u=>{e.resources[l]=u})});return Promise.all(r).then(()=>{})}zt(e){var t=this;const r={json:{},resources:{}};return fetch(e,this.qt).then(o=>o.json()).then(async function(o){return r.json=o,await t.Wt(r,j2(e)),t.kt(r),r})}Jt(e){var t=this;return fetch(e,this.qt).then(r=>r.arrayBuffer()).then(async function(r){const o=t.Gt(r);return await t.Wt(o,j2(e)),t.kt(o),o})}}function j2(s){const e=s.lastIndexOf("/");return e===-1?"./":s.substr(0,e+1)}var v_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function _5(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(t){var r=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return s[t]}})}),e}function w5(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var q2={};(function(s){var e=typeof v_!="undefined"?v_:window,t=Object.create(e);t.scheduleImmediate=t.setImmediate?function(l){e.setImmediate(l)}:function(l){setTimeout(l,0)},t.exports=s,typeof process!="undefined"&&(t.process=process),typeof __dirname!="undefined"&&(t.__dirname=__dirname),typeof __filename!="undefined"&&(t.__filename=__filename);var r=!e.window;try{typeof WorkerGlobalScope!="undefined"&&e instanceof WorkerGlobalScope&&(r=!1),e.process&&e.process.versions&&e.process.versions.hasOwnProperty("electron")&&e.process.versions.hasOwnProperty("node")&&(r=!0)}catch{}if(r){var o=(typeof __webpack_require__!="undefined"?__non_webpack_require__:w5)("url");t.location={get href(){return o.pathToFileURL?o.pathToFileURL(process.cwd()).href+"/":"file://"+function(){var l=process.cwd();return process.platform!="win32"?l:"/"+l.replace(/\\/g,"/")}()+"/"}},function(){function l(){try{throw new Error}catch(S){var h=S.stack,m=new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","mg"),v=null;do{var w=m.exec(h);w!=null&&(v=w)}while(w!=null);return v[1]}}var u=null;t.document={get currentScript(){return u==null&&(u={src:l()}),u}}}(),t.dartDeferredLibraryLoader=function(l,u,h){try{load(l),u()}catch(m){h(m)}}}(function(){function u(n,i){for(var a=Object.keys(n),f=0;f<a.length;f++){var g=a[f];i[g]=n[g]}}var h=function(){var n=function(){};n.prototype={p:{}};var i=new n;if(!(i.__proto__&&i.__proto__.p===n.prototype.p))return!1;try{if(typeof navigator!="undefined"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if(typeof version=="function"&&version.length==0){var a=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(a))return!0}}catch{}return!1}();function m(n){function i(){}if(typeof i.name!="string")for(var a=0;a<n.length;a++)for(var f=n[a],g=Object.keys(f),y=0;y<g.length;y++){var M=g[y],C=f[M];typeof C=="function"&&(C.name=M)}}function v(n,i){if(n.prototype.constructor=n,n.prototype["$i"+n.name]=n,i!=null){if(h){n.prototype.__proto__=i.prototype;return}var a=Object.create(i.prototype);u(n.prototype,a),n.prototype=a}}function w(n,i){for(var a=0;a<i.length;a++)v(i[a],n)}function S(n,i){u(i.prototype,n.prototype),n.prototype.constructor=n}function A(n,i,a,f){var g=n;n[i]=g,n[a]=function(){n[a]=function(){p.w8(i)};var y,M=f;try{n[i]===g?(y=n[i]=M,y=n[i]=f()):y=n[i]}finally{y===M&&(n[i]=null),n[a]=function(){return this[i]}}return y}}function R(n,i,a,f){var g=n;n[i]=g,n[a]=function(){return n[i]===g&&(n[i]=f()),n[a]=function(){return this[i]},n[i]}}function O(n){return n.immutable$list=Array,n.fixed$length=Array,n}function N(n){return n}function k(n){for(var i=0;i<n.length;++i)N(n[i])}var D=0;function P(n,i,a,f,g){return g?new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+D+++"(receiver) {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, true, name);return new c(this, funcs[0], receiver, name);}")(n,i,a,f,p,null):new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+D+++"() {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, false, name);return new c(this, funcs[0], null, name);}")(n,i,a,f,p,null)}function F(n,i,a,f,g,y){var M=null;return f?function(){return M===null&&(M=p.mX(this,n,i,a,!0,!1,g).prototype),M}:P(n,i,a,g,y)}var L=0;function z(n,i,a,f,g,y,M,C,I,B){for(var G=[],V=0;V<C.length;V++){var Q=C[V];typeof Q=="string"&&(Q=n[Q]),Q.$callName=M[V],G.push(Q)}var Q=G[0];Q.$R=g,Q.$D=y;var Z=I;typeof Z=="number"&&(Z+=L);var ne=C[0];Q.$stubName=ne;var ae=F(G,B||0,Z,a,ne,f);n[i]=ae,a&&(Q.$tearOff=ae)}function H(n,i,a,f,g,y,M,C){return z(n,i,!0,!1,a,f,g,y,M,C)}function X(n,i,a,f,g,y,M,C,I){return z(n,i,!1,a,f,g,y,M,C,I)}function $(n){var i=Xe.interceptorsByTag;if(!i){Xe.interceptorsByTag=n;return}u(n,i)}function J(n){var i=Xe.leafTags;if(!i){Xe.leafTags=n;return}u(n,i)}function se(n){var i=Xe.types,a=i.length;return i.push.apply(i,n),a}function ce(n,i){return u(i,n),n}var pe=function(){var n=function(a,f,g,y,M){return function(C,I,B,G){return X(C,I,a,f,g,y,[B],G,M)}},i=function(a,f,g,y){return function(M,C,I,B){return H(M,C,a,f,g,[I],B,y)}};return{inherit:v,inheritMany:w,mixin:S,installStaticTearOff:H,installInstanceTearOff:X,_instance_0u:n(0,0,null,["$0"],0),_instance_1u:n(0,1,null,["$1"],0),_instance_2u:n(0,2,null,["$2"],0),_instance_0i:n(1,0,null,["$0"],0),_instance_1i:n(1,1,null,["$1"],0),_instance_2i:n(1,2,null,["$2"],0),_static_0:i(0,null,["$0"],0),_static_1:i(1,null,["$1"],0),_static_2:i(2,null,["$2"],0),makeConstList:O,lazy:R,lazyOld:A,updateHolder:ce,convertToFastObject:N,setFunctionNamesIfNecessary:m,updateTypes:se,setOrUpdateInterceptorsByTag:$,setOrUpdateLeafTags:J}}();function fe(n){for(var i=0;i<St.length;i++)if(St[i]!=b&&St[i][n])return St[i][n]}var b={},p={mD:function(){},fP:function(n,i,a){return i.h("n<0>").b(n)?new p.dC(n,i.h("@<0>").D(a).h("dC<1,2>")):new p.bX(n,i.h("@<0>").D(a).h("bX<1,2>"))},nM:function(n){return new p.eD(n)},m8:function(n){var i,a=n^48;return a<=9?a:(i=n|32,97<=i&&i<=102?i-87:-1)},p5:function(n,i){var a=p.m8(b.a.A(n,i)),f=p.m8(b.a.A(n,i+1));return a*16+f-(f&256)},du:function(n,i,a,f){return E.aU(i,"start"),a!=null&&(E.aU(a,"end"),i>a&&p.a2(E.S(i,0,a,"start",null))),new p.dt(n,i,a,f.h("dt<0>"))},ja:function(n,i,a,f){return Y.O.b(n)?new p.c_(n,i,a.h("@<0>").D(f).h("c_<1,2>")):new p.b9(n,i,a.h("@<0>").D(f).h("b9<1,2>"))},o5:function(n,i,a){var f="count";return Y.O.b(n)?(E.aM(i,f),E.aU(i,f),new p.cw(n,i,a.h("cw<0>"))):(E.aM(i,f),E.aU(i,f),new p.bc(n,i,a.h("bc<0>")))},mB:function(){return new E.bz("No element")},tg:function(){return new E.bz("Too few elements")},bE:function(){},d3:function(i,a){this.a=i,this.$ti=a},bX:function(i,a){this.a=i,this.$ti=a},dC:function(i,a){this.a=i,this.$ti=a},dx:function(){},b3:function(i,a){this.a=i,this.$ti=a},bY:function(i,a){this.a=i,this.$ti=a},fQ:function(i,a){this.a=i,this.b=a},eD:function(i){this.a=i},cu:function(i){this.a=i},n:function(){},af:function(){},dt:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.$ti=g},a6:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},b9:function(i,a,f){this.a=i,this.b=a,this.$ti=f},c_:function(i,a,f){this.a=i,this.b=a,this.$ti=f},a7:function(i,a,f){var g=this;g.a=null,g.b=i,g.c=a,g.$ti=f},a8:function(i,a,f){this.a=i,this.b=a,this.$ti=f},l_:function(i,a,f){this.a=i,this.b=a,this.$ti=f},cm:function(i,a,f){this.a=i,this.b=a,this.$ti=f},bc:function(i,a,f){this.a=i,this.b=a,this.$ti=f},cw:function(i,a,f){this.a=i,this.b=a,this.$ti=f},dr:function(i,a,f){this.a=i,this.b=a,this.$ti=f},b6:function(i){this.$ti=i},d6:function(i){this.$ti=i},d8:function(){},f7:function(){},cI:function(){},cG:function(i){this.a=i},e4:function(){},t2:function(){throw p.c(E.ab("Cannot modify unmodifiable Map"))},pd:function(n){var i,a=p.pc(n);return a!=null?a:(i="minified:"+n,i)},p1:function(n,i){var a;return i!=null&&(a=i.x,a!=null)?a:Y.aU.b(n)},b:function(n){var i;if(typeof n=="string")return n;if(typeof n=="number"){if(n!==0)return""+n}else{if(n===!0)return"true";if(n===!1)return"false";if(n==null)return"null"}if(i=ee.ag(n),typeof i!="string")throw p.c(p.bM(n));return i},cj:function(n){var i=n.$identityHash;return i==null&&(i=Math.random()*1073741823|0,n.$identityHash=i),i},o1:function(n,i){var a,f,g,y,M,C,I=null;if(typeof n!="string"&&p.a2(p.bM(n)),a=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(n),a==null)return I;if(f=a[3],i==null)return f!=null?parseInt(n,10):a[2]!=null?parseInt(n,16):I;if(i<2||i>36)throw p.c(E.S(i,2,36,"radix",I));if(i===10&&f!=null)return parseInt(n,10);if(i<10||f==null){for(g=i<=10?47+i:86+i,y=a[1],M=y.length,C=0;C<M;++C)if((b.a.H(y,C)|32)>g)return I}return parseInt(n,i)},ju:function(n){return p.tG(n)},tG:function(n){var i,a,f;if(n instanceof E.e)return p.az(p.ac(n),null);if(ee.cq(n)===b.by||Y.ak.b(n)){if(i=b.a_(n),p.nV(i))return i;if(a=n.constructor,typeof a=="function"&&(f=a.name,typeof f=="string"&&p.nV(f)))return f}return p.az(p.ac(n),null)},nV:function(n){var i=n!=="Object"&&n!=="";return i},nU:function(n){var i,a,f,g,y=n.length;if(y<=500)return String.fromCharCode.apply(null,n);for(i="",a=0;a<y;a=f)f=a+500,g=f<y?f:y,i+=String.fromCharCode.apply(null,n.slice(a,g));return i},tJ:function(n){var i,a,f,g=p.a([],Y.Z);for(i=n.length,a=0;a<n.length;n.length===i||(0,p.cs)(n),++a){if(f=n[a],!p.aJ(f))throw p.c(p.bM(f));if(f<=65535)g.push(f);else if(f<=1114111)g.push(55296+(b.c.ad(f-65536,10)&1023)),g.push(56320+(f&1023));else throw p.c(p.bM(f))}return p.nU(g)},tI:function(n){var i,a,f;for(i=n.length,a=0;a<i;++a){if(f=n[a],!p.aJ(f)||f<0)throw p.c(p.bM(f));if(f>65535)return p.tJ(n)}return p.nU(n)},tK:function(n,i,a){var f,g,y,M;if(a<=500&&i===0&&a===n.length)return String.fromCharCode.apply(null,n);for(f=i,g="";f<a;f=y)y=f+500,M=y<a?y:a,g+=String.fromCharCode.apply(null,n.subarray(f,M));return g},ba:function(n){var i;if(0<=n){if(n<=65535)return String.fromCharCode(n);if(n<=1114111)return i=n-65536,String.fromCharCode((55296|b.c.ad(i,10))>>>0,56320|i&1023)}throw p.c(E.S(n,0,1114111,null,null))},aw:function(n){return n.date===void 0&&(n.date=new Date(n.a)),n.date},eV:function(n){return n.b?p.aw(n).getUTCFullYear()+0:p.aw(n).getFullYear()+0},o_:function(n){return n.b?p.aw(n).getUTCMonth()+1:p.aw(n).getMonth()+1},nW:function(n){return n.b?p.aw(n).getUTCDate()+0:p.aw(n).getDate()+0},nX:function(n){return n.b?p.aw(n).getUTCHours()+0:p.aw(n).getHours()+0},nZ:function(n){return n.b?p.aw(n).getUTCMinutes()+0:p.aw(n).getMinutes()+0},o0:function(n){return n.b?p.aw(n).getUTCSeconds()+0:p.aw(n).getSeconds()+0},nY:function(n){return n.b?p.aw(n).getUTCMilliseconds()+0:p.aw(n).getMilliseconds()+0},bu:function(n,i,a){var f,g,y={};return y.a=0,f=[],g=[],y.a=i.length,b.d.K(f,i),y.b="",a!=null&&a.a!==0&&a.J(0,new p.jt(y,g,f)),""+y.a,ee.ry(n,new p.ig(b.d5,0,f,g,0))},tH:function(n,i,a){var f,g,y,M;if(i instanceof Array?f=a==null||a.a===0:f=!1,f){if(g=i,y=g.length,y===0){if(n.$0)return n.$0()}else if(y===1){if(n.$1)return n.$1(g[0])}else if(y===2){if(n.$2)return n.$2(g[0],g[1])}else if(y===3){if(n.$3)return n.$3(g[0],g[1],g[2])}else if(y===4){if(n.$4)return n.$4(g[0],g[1],g[2],g[3])}else if(y===5&&n.$5)return n.$5(g[0],g[1],g[2],g[3],g[4]);if(M=n["$"+y],M!=null)return M.apply(n,g)}return p.tF(n,i,a)},tF:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z,ne,ae;if(i!=null?f=i instanceof Array?i:E.dh(i,!0,Y.z):f=[],g=f.length,y=n.$R,g<y)return p.bu(n,f,a);if(M=n.$D,C=M==null,I=C?null:M(),B=ee.cq(n),G=B.$C,typeof G=="string"&&(G=B[G]),C)return a!=null&&a.a!==0?p.bu(n,f,a):g===y?G.apply(n,f):p.bu(n,f,a);if(I instanceof Array)return a!=null&&a.a!==0?p.bu(n,f,a):g>y+I.length?p.bu(n,f,null):(b.d.K(f,I.slice(g-y)),G.apply(n,f));if(g>y)return p.bu(n,f,a);if(V=Object.keys(I),a==null)for(C=V.length,Q=0;Q<V.length;V.length===C||(0,p.cs)(V),++Q){if(Z=I[V[Q]],b.a4===Z)return p.bu(n,f,a);b.d.B(f,Z)}else{for(C=V.length,ne=0,Q=0;Q<V.length;V.length===C||(0,p.cs)(V),++Q)if(ae=V[Q],a.w(ae))++ne,b.d.B(f,a.j(0,ae));else{if(Z=I[ae],b.a4===Z)return p.bu(n,f,a);b.d.B(f,Z)}if(ne!==a.a)return p.bu(n,f,a)}return G.apply(n,f)},ef:function(n,i){var a,f="index";return p.aJ(i)?(a=ee.X(n),i<0||i>=a?E.ex(i,n,f,null,a):E.jv(i,f)):new E.ak(!0,i,f,null)},vw:function(n,i,a){return n<0||n>a?E.S(n,0,a,"start",null):i!=null&&(i<n||i>a)?E.S(i,n,a,"end",null):new E.ak(!0,i,"end",null)},bM:function(n){return new E.ak(!0,n,null,null)},c:function(n){var i,a;return n==null&&(n=new E.eR),i=new Error,i.dartException=n,a=p.w9,"defineProperty"in Object?(Object.defineProperty(i,"message",{get:a}),i.name=""):i.toString=a,i},w9:function(){return ee.ag(this.dartException)},a2:function(n){throw p.c(n)},cs:function(n){throw p.c(E.ad(n))},bd:function(n){var i,a,f,g,y,M;return n=p.p8(n.replace(String({}),"$receiver$")),i=n.match(/\\\$[a-zA-Z]+\\\$/g),i==null&&(i=p.a([],Y.s)),a=i.indexOf("\\$arguments\\$"),f=i.indexOf("\\$argumentsExpr\\$"),g=i.indexOf("\\$expr\\$"),y=i.indexOf("\\$method\\$"),M=i.indexOf("\\$receiver\\$"),new p.kJ(n.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),a,f,g,y,M)},kK:function(n){return function(i){var a="$arguments$";try{i.$method$(a)}catch(f){return f.message}}(n)},o8:function(n){return function(i){try{i.$method$}catch(a){return a.message}}(n)},nT:function(n,i){return new p.eQ(n,i==null?null:i.method)},mE:function(n,i){var a=i==null,f=a?null:i.method;return new p.eC(n,f,a?null:i.receiver)},E:function(n){return n==null?new p.eS(n):n instanceof p.d7?p.bN(n,n.a):typeof n!="object"?n:"dartException"in n?p.bN(n,n.dartException):p.vc(n)},bN:function(n,i){return Y.C.b(i)&&i.$thrownJsError==null&&(i.$thrownJsError=n),i},vc:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae=null;if(!("message"in n))return n;if(i=n.message,"number"in n&&typeof n.number=="number"&&(a=n.number,f=a&65535,(b.c.ad(a,16)&8191)==10))switch(f){case 438:return p.bN(n,p.mE(p.b(i)+" (Error "+f+")",ae));case 445:case 5007:return p.bN(n,p.nT(p.b(i)+" (Error "+f+")",ae))}return n instanceof TypeError?(g=q.r9(),y=q.ra(),M=q.rb(),C=q.rc(),I=q.rf(),B=q.rg(),G=q.re(),q.rd(),V=q.ri(),Q=q.rh(),Z=g.a4(i),Z!=null?p.bN(n,p.mE(i,Z)):(Z=y.a4(i),Z!=null?(Z.method="call",p.bN(n,p.mE(i,Z))):(Z=M.a4(i),Z==null?(Z=C.a4(i),Z==null?(Z=I.a4(i),Z==null?(Z=B.a4(i),Z==null?(Z=G.a4(i),Z==null?(Z=C.a4(i),Z==null?(Z=V.a4(i),Z==null?(Z=Q.a4(i),ne=Z!=null):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0,ne?p.bN(n,p.nT(i,Z)):p.bN(n,new p.f6(typeof i=="string"?i:""))))):n instanceof RangeError?typeof i=="string"&&i.indexOf("call stack")!==-1?new E.ds:(i=function(ue){try{return String(ue)}catch{}return null}(n),p.bN(n,new E.ak(!1,ae,ae,typeof i=="string"?i.replace(/^RangeError:\s*/,""):i))):typeof InternalError=="function"&&n instanceof InternalError&&typeof i=="string"&&i==="too much recursion"?new E.ds:n},aK:function(n){var i;return n instanceof p.d7?n.b:n==null?new p.dS(n):(i=n.$cachedTrace,i!=null?i:n.$cachedTrace=new p.dS(n))},p4:function(n){return n==null||typeof n!="object"?ee.aL(n):p.cj(n)},oU:function(n,i){var a,f,g,y=n.length;for(a=0;a<y;a=g)f=a+1,g=f+1,i.m(0,n[a],n[f]);return i},vA:function(n,i){var a,f=n.length;for(a=0;a<f;++a)i.B(0,n[a]);return i},vK:function(n,i,a,f,g,y){switch(i){case 0:return n.$0();case 1:return n.$1(a);case 2:return n.$2(a,f);case 3:return n.$3(a,f,g);case 4:return n.$4(a,f,g,y)}throw p.c(E.t7("Unsupported number of arguments for wrapped closure"))},m0:function(n,i){var a;return n==null?null:(a=n.$identity,a||(a=function(f,g,y){return function(M,C,I,B){return y(f,g,M,C,I,B)}}(n,i,p.vK),n.$identity=a,a))},t1:function(n,i,a,f,g,y,M){var C,I,B,G,V,Q,Z,ne=i[0],ae=ne.$callName,ue=Object.create(g?new p.f_().constructor.prototype:new p.ct(null,null,null,"").constructor.prototype);for(ue.$initialize=ue.constructor,g?C=function(){this.$initialize()}:(I=q.b4,q.b4=I+1,I=new Function("a,b,c,d"+I,"this.$initialize(a,b,c,d"+I+")"),C=I),ue.constructor=C,C.prototype=ue,g?(ue.$static_name=M,B=ne):(B=p.nF(n,ne,y),B.$reflectionInfo=f),ue.$S=p.rY(f,g,y),ue[ae]=B,G=B,V=1;V<i.length;++V)Q=i[V],Z=Q.$callName,Z!=null&&(Q=g?Q:p.nF(n,Q,y),ue[Z]=Q),V===a&&(Q.$reflectionInfo=f,G=Q);return ue.$C=G,ue.$R=ne.$R,ue.$D=ne.$D,C},rY:function(n,i,a){var f;if(typeof n=="number")return function(g,y){return function(){return g(y)}}(p.oZ,n);if(typeof n=="string"){if(i)throw p.c("Cannot compute signature for static tearoff.");return f=a?p.rR:p.rQ,function(g,y){return function(){return y(this,g)}}(n,f)}throw p.c("Error in functionType of tearoff")},rZ:function(n,i,a,f){var g=p.nE;switch(i?-1:n){case 0:return function(y,M){return function(){return M(this)[y]()}}(a,g);case 1:return function(y,M){return function(C){return M(this)[y](C)}}(a,g);case 2:return function(y,M){return function(C,I){return M(this)[y](C,I)}}(a,g);case 3:return function(y,M){return function(C,I,B){return M(this)[y](C,I,B)}}(a,g);case 4:return function(y,M){return function(C,I,B,G){return M(this)[y](C,I,B,G)}}(a,g);case 5:return function(y,M){return function(C,I,B,G,V){return M(this)[y](C,I,B,G,V)}}(a,g);default:return function(y,M){return function(){return y.apply(M(this),arguments)}}(f,g)}},nF:function(n,i,a){var f,g,y,M,C,I,B;return a?p.t0(n,i):(f=i.$stubName,g=i.length,y=n[f],M=i==null?y==null:i===y,C=!M||g>=27,C?p.rZ(g,!M,f,i):g===0?(M=q.b4,q.b4=M+1,I="self"+p.b(M),new Function("return function(){var "+I+" = this."+p.b(p.mA())+";return "+I+"."+p.b(f)+"();}")()):(B="abcdefghijklmnopqrstuvwxyz".split("").splice(0,g).join(","),M=q.b4,q.b4=M+1,B+=p.b(M),new Function("return function("+B+"){return this."+p.b(p.mA())+"."+p.b(f)+"("+B+");}")()))},t_:function(n,i,a,f){var g=p.nE,y=p.rS;switch(i?-1:n){case 0:throw p.c(new p.eZ("Intercepted function with no arguments."));case 1:return function(M,C,I){return function(){return C(this)[M](I(this))}}(a,g,y);case 2:return function(M,C,I){return function(B){return C(this)[M](I(this),B)}}(a,g,y);case 3:return function(M,C,I){return function(B,G){return C(this)[M](I(this),B,G)}}(a,g,y);case 4:return function(M,C,I){return function(B,G,V){return C(this)[M](I(this),B,G,V)}}(a,g,y);case 5:return function(M,C,I){return function(B,G,V,Q){return C(this)[M](I(this),B,G,V,Q)}}(a,g,y);case 6:return function(M,C,I){return function(B,G,V,Q,Z){return C(this)[M](I(this),B,G,V,Q,Z)}}(a,g,y);default:return function(M,C,I,B){return function(){return B=[I(this)],Array.prototype.push.apply(B,arguments),M.apply(C(this),B)}}(f,g,y)}},t0:function(n,i){var a,f,g,y,M,C,I=p.mA(),B=q.nC;return B==null&&(B=q.nC=p.nB("receiver")),a=i.$stubName,f=i.length,g=n[a],y=i==null?g==null:i===g,M=!y||f>=28,M?p.t_(f,!y,a,i):f===1?(y="return function(){return this."+p.b(I)+"."+p.b(a)+"(this."+B+");",M=q.b4,q.b4=M+1,new Function(y+p.b(M)+"}")()):(C="abcdefghijklmnopqrstuvwxyz".split("").splice(0,f-1).join(","),y="return function("+C+"){return this."+p.b(I)+"."+p.b(a)+"(this."+B+", "+C+");",M=q.b4,q.b4=M+1,new Function(y+p.b(M)+"}")())},mX:function(n,i,a,f,g,y,M){return p.t1(n,i,a,f,!!g,!!y,M)},rQ:function(n,i){return p.fv(Xe.typeUniverse,p.ac(n.a),i)},rR:function(n,i){return p.fv(Xe.typeUniverse,p.ac(n.c),i)},nE:function(n){return n.a},rS:function(n){return n.c},mA:function(){var n=q.nD;return n==null?q.nD=p.nB("self"):n},nB:function(n){var i,a,f,g=new p.ct("self","target","receiver","name"),y=ee.mC(Object.getOwnPropertyNames(g));for(i=y.length,a=0;a<i;++a)if(f=y[a],g[f]===n)return f;throw p.c(E.O("Field name "+n+" not found."))},w8:function(n){throw p.c(new E.er(n))},vF:function(n){return Xe.getIsolateTag(n)},zh:function(n,i,a){Object.defineProperty(n,i,{value:a,enumerable:!1,writable:!0,configurable:!0})},vX:function(n){var i,a,f,g,y,M=q.oY.$1(n),C=q.m1[M];if(C!=null)return Object.defineProperty(n,Xe.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(i=q.mc[M],i!=null)return i;if(a=Xe.interceptorsByTag[M],a==null&&(f=q.oR.$2(n,M),f!=null)){if(C=q.m1[f],C!=null)return Object.defineProperty(n,Xe.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(i=q.mc[f],i!=null)return i;a=Xe.interceptorsByTag[f],M=f}if(a==null)return null;if(i=a.prototype,g=M[0],g==="!")return C=p.mp(i),q.m1[M]=C,Object.defineProperty(n,Xe.dispatchPropertyName,{value:C,enumerable:!1,writable:!0,configurable:!0}),C.i;if(g==="~")return q.mc[M]=i,i;if(g==="-")return y=p.mp(i),Object.defineProperty(Object.getPrototypeOf(n),Xe.dispatchPropertyName,{value:y,enumerable:!1,writable:!0,configurable:!0}),y.i;if(g==="+")return p.p6(n,i);if(g==="*")throw p.c(E.o9(M));return Xe.leafTags[M]===!0?(y=p.mp(i),Object.defineProperty(Object.getPrototypeOf(n),Xe.dispatchPropertyName,{value:y,enumerable:!1,writable:!0,configurable:!0}),y.i):p.p6(n,i)},p6:function(n,i){var a=Object.getPrototypeOf(n);return Object.defineProperty(a,Xe.dispatchPropertyName,{value:ee.n3(i,a,null,null),enumerable:!1,writable:!0,configurable:!0}),i},mp:function(n){return ee.n3(n,!1,null,!!n.$iat)},vY:function(n,i,a){var f=i.prototype;return Xe.leafTags[n]===!0?p.mp(f):ee.n3(f,a,null,null)},vI:function(){q.n1!==!0&&(q.n1=!0,p.vJ())},vJ:function(){var n,i,a,f,g,y,M,C;if(q.m1=Object.create(null),q.mc=Object.create(null),p.vH(),n=Xe.interceptorsByTag,i=Object.getOwnPropertyNames(n),typeof window!="undefined")for(a=function(){},f=0;f<i.length;++f)g=i[f],y=q.p7.$1(g),y!=null&&(M=p.vY(g,n[g],y),M!=null&&(Object.defineProperty(y,Xe.dispatchPropertyName,{value:M,enumerable:!1,writable:!0,configurable:!0}),a.prototype=y));for(f=0;f<i.length;++f)g=i[f],/^[A-Za-z_]/.test(g)&&(C=n[g],n["!"+g]=C,n["~"+g]=C,n["-"+g]=C,n["+"+g]=C,n["*"+g]=C)},vH:function(){var n,i,a,f,g,y,M=b.b8();if(M=p.d_(b.b9,p.d_(b.ba,p.d_(b.a0,p.d_(b.a0,p.d_(b.bb,p.d_(b.bc,p.d_(b.bd(b.a_),M))))))),typeof dartNativeDispatchHooksTransformer!="undefined"&&(n=dartNativeDispatchHooksTransformer,typeof n=="function"&&(n=[n]),n.constructor==Array))for(i=0;i<n.length;++i)a=n[i],typeof a=="function"&&(M=a(M)||M);f=M.getTag,g=M.getUnknownTag,y=M.prototypeForTag,q.oY=new p.m9(f),q.oR=new p.ma(g),q.p7=new p.mb(y)},d_:function(n,i){return n(i)||i},tj:function(n,i,a,f,g,y){var M=i?"m":"",C=a?"":"i",I=f?"u":"",B=g?"s":"",G=y?"g":"",V=function(Q,Z){try{return new RegExp(Q,Z)}catch(ne){return ne}}(n,M+C+I+B+G);if(V instanceof RegExp)return V;throw p.c(E.K("Illegal RegExp pattern ("+String(V)+")",n,null))},vx:function(n){return n.indexOf("$",0)>=0?n.replace(/\$/g,"$$$$"):n},p8:function(n){return/[[\]{}()*+?.\\^$|]/.test(n)?n.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&"):n},pa:function(n,i,a){var f=p.w6(n,i,a);return f},w6:function(n,i,a){var f,g,y,M;if(i===""){if(n==="")return a;for(f=n.length,g=a,y=0;y<f;++y)g=g+n[y]+a;return g.charCodeAt(0)==0,g}return M=n.indexOf(i,0),M<0?n:n.length<500||a.indexOf("$",0)>=0?n.split(i).join(a):n.replace(new RegExp(p.p8(i),"g"),p.vx(a))},d4:function(i,a){this.a=i,this.$ti=a},cv:function(){},aq:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.$ti=g},dz:function(i,a){this.a=i,this.$ti=a},al:function(i,a){this.a=i,this.$ti=a},ig:function(i,a,f,g,y){var M=this;M.a=i,M.c=a,M.d=f,M.e=g,M.f=y},jt:function(i,a,f){this.a=i,this.b=a,this.c=f},kJ:function(i,a,f,g,y,M){var C=this;C.a=i,C.b=a,C.c=f,C.d=g,C.e=y,C.f=M},eQ:function(i,a){this.a=i,this.b=a},eC:function(i,a,f){this.a=i,this.b=a,this.c=f},f6:function(i){this.a=i},eS:function(i){this.a=i},d7:function(i,a){this.a=i,this.b=a},dS:function(i){this.a=i,this.b=null},bZ:function(){},f1:function(){},f_:function(){},ct:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},eZ:function(i){this.a=i},lA:function(){},aG:function(i){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=i},im:function(i){this.a=i},j7:function(i,a){this.a=i,this.b=a,this.c=null},au:function(i,a){this.a=i,this.$ti=a},df:function(i,a,f){var g=this;g.a=i,g.b=a,g.d=g.c=null,g.$ti=f},m9:function(i){this.a=i},ma:function(i){this.a=i},mb:function(i){this.a=i},ih:function(i,a){var f=this;f.a=i,f.b=a,f.d=f.c=null},ly:function(i){this.b=i},cW:function(n,i,a){},uH:function(n){return n},jm:function(n,i,a){var f;return p.cW(n,i,a),f=new DataView(n,i),f},ty:function(n){return new Float32Array(n)},tz:function(n){return new Int8Array(n)},nQ:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint16Array(n,i,a),f},nR:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint32Array(n,i,a),f},tA:function(n){return new Uint8Array(n)},mH:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint8Array(n,i,a),f},bf:function(n,i,a){if(n>>>0!==n||n>=a)throw p.c(p.ef(i,n))},bJ:function(n,i,a){var f;if(n>>>0===n?f=i>>>0!==i||n>i||i>a:f=!0,f)throw p.c(p.vw(n,i,a));return i},dm:function(){},cE:function(){},dl:function(){},av:function(){},dk:function(){},eI:function(){},eJ:function(){},eK:function(){},eL:function(){},eM:function(){},eN:function(){},dn:function(){},cf:function(){},dO:function(){},dP:function(){},dQ:function(){},dR:function(){},tN:function(n,i){var a=i.c;return a==null?i.c=p.mP(n,i.z,!0):a},o3:function(n,i){var a=i.c;return a==null?i.c=p.dZ(n,"ae",[i.z]):a},o4:function(n){var i=n.y;return i===6||i===7||i===8?p.o4(n.z):i===11||i===12},tM:function(n){return n.cy},ap:function(n){return p.fu(Xe.typeUniverse,n,!1)},bL:function(n,i,a,f){var g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe=i.y;switch(Oe){case 5:case 1:case 2:case 3:case 4:return i;case 6:return g=i.z,y=p.bL(n,g,a,f),y===g?i:p.ou(n,y,!0);case 7:return g=i.z,y=p.bL(n,g,a,f),y===g?i:p.mP(n,y,!0);case 8:return g=i.z,y=p.bL(n,g,a,f),y===g?i:p.ot(n,y,!0);case 9:return M=i.Q,C=p.ed(n,M,a,f),C===M?i:p.dZ(n,i.z,C);case 10:return I=i.z,B=p.bL(n,I,a,f),G=i.Q,V=p.ed(n,G,a,f),B===I&&V===G?i:p.mN(n,B,V);case 11:return Q=i.z,Z=p.bL(n,Q,a,f),ne=i.Q,ae=p.v9(n,ne,a,f),Z===Q&&ae===ne?i:p.os(n,Z,ae);case 12:return ue=i.Q,f+=ue.length,he=p.ed(n,ue,a,f),I=i.z,B=p.bL(n,I,a,f),he===ue&&B===I?i:p.mO(n,B,he,!0);case 13:return Ce=i.z,Ce<f||(He=a[Ce-f],He==null)?i:He;default:throw p.c(E.fJ("Attempted to substitute unexpected RTI kind "+Oe))}},ed:function(n,i,a,f){var g,y,M,C,I=i.length,B=[];for(g=!1,y=0;y<I;++y)M=i[y],C=p.bL(n,M,a,f),C!==M&&(g=!0),B.push(C);return g?B:i},va:function(n,i,a,f){var g,y,M,C,I,B,G=i.length,V=[];for(g=!1,y=0;y<G;y+=3)M=i[y],C=i[y+1],I=i[y+2],B=p.bL(n,I,a,f),B!==I&&(g=!0),V.push(M),V.push(C),V.push(B);return g?V:i},v9:function(n,i,a,f){var g,y=i.a,M=p.ed(n,y,a,f),C=i.b,I=p.ed(n,C,a,f),B=i.c,G=p.va(n,B,a,f);return M===y&&I===C&&G===B?i:(g=new p.fj,g.a=M,g.b=I,g.c=G,g)},a:function(n,i){return n[Xe.arrayRti]=i,n},vt:function(n){var i=n.$S;return i!=null?typeof i=="number"?p.oZ(i):n.$S():null},p0:function(n,i){var a;return p.o4(i)&&n instanceof p.bZ&&(a=p.vt(n),a!=null)?a:p.ac(n)},ac:function(n){var i;return n instanceof E.e?(i=n.$ti,i!=null?i:p.mS(n)):Array.isArray(n)?p.U(n):p.mS(ee.cq(n))},U:function(n){var i=n[Xe.arrayRti],a=Y.b;return i==null||i.constructor!==a.constructor?a:i},r:function(n){var i=n.$ti;return i!=null?i:p.mS(n)},mS:function(n){var i=n.constructor,a=i.$ccache;return a!=null?a:p.uR(n,i)},uR:function(n,i){var a=n instanceof p.bZ?n.__proto__.__proto__.constructor:i,f=p.uj(Xe.typeUniverse,a.name);return i.$ccache=f,f},oZ:function(n){var i,a=Xe.types,f=a[n];return typeof f=="string"?(i=p.fu(Xe.typeUniverse,f,!1),a[n]=i,i):f},vu:function(n){var i,a,f,g=n.x;return g!=null?g:(i=n.cy,a=i.replace(/\*/g,""),a===i?n.x=new p.dX(n):(f=p.fu(Xe.typeUniverse,a,!0),g=f.x,n.x=g==null?f.x=new p.dX(f):g))},B:function(n){return p.vu(p.fu(Xe.typeUniverse,n,!1))},uQ:function(n){var i,a,f=this,g=Y.K;if(f===g)return p.e8(f,n,p.uU);if(p.bh(f)?g=!0:f!==Y._?g=f===g:g=!0,g)return p.e8(f,n,p.uX);if(g=f.y,i=g===6?f.z:f,i===Y.r?a=p.aJ:i===Y.gR||i===Y.di?a=p.uT:i===Y.S?a=p.uV:a=i===Y.cJ?p.e9:null,a!=null)return p.e8(f,n,a);if(i.y===9){if(g=i.z,i.Q.every(p.vL))return f.r="$i"+g,p.e8(f,n,p.uW)}else if(g===7)return p.e8(f,n,p.uK);return p.e8(f,n,p.uI)},e8:function(n,i,a){return n.b=a,n.b(i)},uP:function(n){var i,a,f=this;return p.bh(f)?i=!0:f!==Y._?i=f===Y.K:i=!0,i?a=p.uB:f===Y.K?a=p.uA:a=p.uJ,f.a=a,f.a(n)},v1:function(n){var i,a=n.y;return p.bh(n)?i=!0:n!==Y._?i=n===Y.K:i=!0,i||n===Y.A||a===7||n===Y.P||n===Y.T},uI:function(n){var i=this;return n==null?p.v1(i):p.a1(Xe.typeUniverse,p.p0(n,i),null,i,null)},uK:function(n){return n==null?!0:this.z.b(n)},uW:function(n){var i=this,a=i.r;return n instanceof E.e?!!n[a]:!!ee.cq(n)[a]},zb:function(n){var i=this;if(n==null)return n;if(i.b(n))return n;p.oF(n,i)},uJ:function(n){var i=this;if(n==null)return n;if(i.b(n))return n;p.oF(n,i)},oF:function(n,i){throw p.c(p.u9(p.ok(n,p.p0(n,i),p.az(i,null))))},ok:function(n,i,a){var f=E.cx(n),g=p.az(i==null?p.ac(n):i,null);return f+": type '"+p.b(g)+"' is not a subtype of type '"+p.b(a)+"'"},u9:function(n){return new p.dY("TypeError: "+n)},ao:function(n,i){return new p.dY("TypeError: "+p.ok(n,null,i))},uU:function(n){return n!=null},uA:function(n){return n},uX:function(n){return!0},uB:function(n){return n},e9:function(n){return n===!0||n===!1},yW:function(n){if(n===!0)return!0;if(n===!1)return!1;throw p.c(p.ao(n,"bool"))},yY:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool"))},yX:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool?"))},yZ:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"double"))},z0:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double"))},z_:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double?"))},aJ:function(n){return typeof n=="number"&&Math.floor(n)===n},z1:function(n){if(typeof n=="number"&&Math.floor(n)===n)return n;throw p.c(p.ao(n,"int"))},z3:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int"))},z2:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int?"))},uT:function(n){return typeof n=="number"},z4:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"num"))},z6:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num"))},z5:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num?"))},uV:function(n){return typeof n=="string"},z7:function(n){if(typeof n=="string")return n;throw p.c(p.ao(n,"String"))},z9:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String"))},z8:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String?"))},v5:function(n,i){var a,f,g;for(a="",f="",g=0;g<n.length;++g,f=", ")a+=b.a.ah(f,p.az(n[g],i));return a},oH:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt=", ";if(a!=null){for(f=a.length,i==null?(i=p.a([],Y.s),g=null):g=i.length,y=i.length,M=f;M>0;--M)i.push("T"+(y+M));for(C=Y.x,I=Y._,B=Y.K,G="<",V="",M=0;M<f;++M,V=vt)G=b.a.ah(G+V,i[i.length-1-M]),Q=a[M],Z=Q.y,Z===2||Z===3||Z===4||Z===5||Q===C?ne=!0:Q!==I?ne=Q===B:ne=!0,ne||(G+=b.a.ah(" extends ",p.az(Q,i)));G+=">"}else G="",g=null;for(C=n.z,ae=n.Q,ue=ae.a,he=ue.length,Ce=ae.b,He=Ce.length,Oe=ae.c,gt=Oe.length,lt=p.az(C,i),Et="",pt="",M=0;M<he;++M,pt=vt)Et+=b.a.ah(pt,p.az(ue[M],i));if(He>0){for(Et+=pt+"[",pt="",M=0;M<He;++M,pt=vt)Et+=b.a.ah(pt,p.az(Ce[M],i));Et+="]"}if(gt>0){for(Et+=pt+"{",pt="",M=0;M<gt;M+=3,pt=vt)Et+=pt,Oe[M+1]&&(Et+="required "),Et+=ee.ns(p.az(Oe[M+2],i)," ")+Oe[M];Et+="}"}return g!=null&&(i.toString,i.length=g),G+"("+Et+") => "+p.b(lt)},az:function(n,i){var a,f,g,y,M,C,I=n.y;return I===5?"erased":I===2?"dynamic":I===3?"void":I===1?"Never":I===4?"any":I===6?(a=p.az(n.z,i),a):I===7?(f=n.z,a=p.az(f,i),g=f.y,ee.ns(g===11||g===12?b.a.ah("(",a)+")":a,"?")):I===8?"FutureOr<"+p.b(p.az(n.z,i))+">":I===9?(y=p.vb(n.z),M=n.Q,M.length!==0?y+("<"+p.v5(M,i)+">"):y):I===11?p.oH(n,i,null):I===12?p.oH(n.z,i,n.Q):I===13?(i.toString,C=n.z,i[i.length-1-C]):"?"},vb:function(n){var i,a=p.pc(n);return a!=null?a:(i="minified:"+n,i)},ov:function(n,i){for(var a=n.tR[i];typeof a=="string";)a=n.tR[a];return a},uj:function(n,i){var a,f,g,y,M,C=n.eT,I=C[i];if(I==null)return p.fu(n,i,!1);if(typeof I=="number"){for(a=I,f=p.e_(n,5,"#"),g=[],y=0;y<a;++y)g.push(f);return M=p.dZ(n,i,g),C[i]=M,M}else return I},uh:function(n,i){return p.oD(n.tR,i)},ug:function(n,i){return p.oD(n.eT,i)},fu:function(n,i,a){var f,g=n.eC,y=g.get(i);return y!=null?y:(f=p.or(p.op(n,null,i,a)),g.set(i,f),f)},fv:function(n,i,a){var f,g,y=i.ch;return y==null&&(y=i.ch=new Map),f=y.get(a),f!=null?f:(g=p.or(p.op(n,i,a,!0)),y.set(a,g),g)},ui:function(n,i,a){var f,g,y,M=i.cx;return M==null&&(M=i.cx=new Map),f=a.cy,g=M.get(f),g!=null?g:(y=p.mN(n,i,a.y===10?a.Q:[a]),M.set(f,y),y)},bI:function(n,i){return i.a=p.uP,i.b=p.uQ,i},e_:function(n,i,a){var f,g,y=n.eC.get(a);return y!=null?y:(f=new p.aI(null,null),f.y=i,f.cy=a,g=p.bI(n,f),n.eC.set(a,g),g)},ou:function(n,i,a){var f,g=i.cy+"*",y=n.eC.get(g);return y!=null?y:(f=p.ue(n,i,g,a),n.eC.set(g,f),f)},ue:function(n,i,a,f){var g,y,M;return f&&(g=i.y,p.bh(i)?y=!0:y=i===Y.P||i===Y.T||g===7||g===6,y)?i:(M=new p.aI(null,null),M.y=6,M.z=i,M.cy=a,p.bI(n,M))},mP:function(n,i,a){var f,g=i.cy+"?",y=n.eC.get(g);return y!=null?y:(f=p.ud(n,i,g,a),n.eC.set(g,f),f)},ud:function(n,i,a,f){var g,y,M,C;if(f){if(g=i.y,p.bh(i)||i===Y.P||i===Y.T?y=!0:g!==7?y=g===8&&p.md(i.z):y=!0,y)return i;if(g===1||i===Y.A)return Y.P;if(g===6)return M=i.z,M.y===8&&p.md(M.z)?M:p.tN(n,i)}return C=new p.aI(null,null),C.y=7,C.z=i,C.cy=a,p.bI(n,C)},ot:function(n,i,a){var f,g=i.cy+"/",y=n.eC.get(g);return y!=null?y:(f=p.ub(n,i,g,a),n.eC.set(g,f),f)},ub:function(n,i,a,f){var g,y,M;if(f){if(g=i.y,p.bh(i)?y=!0:i!==Y._?y=i===Y.K:y=!0,y||i===Y.K)return i;if(g===1)return p.dZ(n,"ae",[i]);if(i===Y.P||i===Y.T)return Y.eH}return M=new p.aI(null,null),M.y=8,M.z=i,M.cy=a,p.bI(n,M)},uf:function(n,i){var a,f,g=""+i+"^",y=n.eC.get(g);return y!=null?y:(a=new p.aI(null,null),a.y=13,a.z=i,a.cy=g,f=p.bI(n,a),n.eC.set(g,f),f)},ft:function(n){var i,a,f,g=n.length;for(i="",a="",f=0;f<g;++f,a=",")i+=a+n[f].cy;return i},ua:function(n){var i,a,f,g,y,M,C=n.length;for(i="",a="",f=0;f<C;f+=3,a=",")g=n[f],y=n[f+1]?"!":":",M=n[f+2].cy,i+=a+g+y+M;return i},dZ:function(n,i,a){var f,g,y,M=i;return a.length!==0&&(M+="<"+p.ft(a)+">"),f=n.eC.get(M),f!=null?f:(g=new p.aI(null,null),g.y=9,g.z=i,g.Q=a,a.length>0&&(g.c=a[0]),g.cy=M,y=p.bI(n,g),n.eC.set(M,y),y)},mN:function(n,i,a){var f,g,y,M,C,I;return i.y===10?(f=i.z,g=i.Q.concat(a)):(g=a,f=i),y=f.cy+(";<"+p.ft(g)+">"),M=n.eC.get(y),M!=null?M:(C=new p.aI(null,null),C.y=10,C.z=f,C.Q=g,C.cy=y,I=p.bI(n,C),n.eC.set(y,I),I)},os:function(n,i,a){var f,g,y,M,C,I=i.cy,B=a.a,G=B.length,V=a.b,Q=V.length,Z=a.c,ne=Z.length,ae="("+p.ft(B);return Q>0&&(f=G>0?",":"",g=p.ft(V),ae+=f+"["+g+"]"),ne>0&&(f=G>0?",":"",g=p.ua(Z),ae+=f+"{"+g+"}"),y=I+(ae+")"),M=n.eC.get(y),M!=null?M:(C=new p.aI(null,null),C.y=11,C.z=i,C.Q=a,C.cy=y,g=p.bI(n,C),n.eC.set(y,g),g)},mO:function(n,i,a,f){var g,y=i.cy+("<"+p.ft(a)+">"),M=n.eC.get(y);return M!=null?M:(g=p.uc(n,i,a,y,f),n.eC.set(y,g),g)},uc:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q;if(g){for(y=a.length,M=new Array(y),C=0,I=0;I<y;++I)B=a[I],B.y===1&&(M[I]=B,++C);if(C>0)return G=p.bL(n,i,M,0),V=p.ed(n,a,M,0),p.mO(n,G,V,a!==V)}return Q=new p.aI(null,null),Q.y=12,Q.z=i,Q.Q=a,Q.cy=f,p.bI(n,Q)},op:function(n,i,a,f){return{u:n,e:i,r:a,s:[],p:0,n:f}},or:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z=n.r,ne=n.s;for(i=Z.length,a=0;a<i;)if(f=Z.charCodeAt(a),f>=48&&f<=57)a=p.u4(a+1,f,Z,ne);else if((((f|32)>>>0)-97&65535)<26||f===95||f===36)a=p.oq(n,a,Z,ne,!1);else if(f===46)a=p.oq(n,a,Z,ne,!0);else switch(++a,f){case 44:break;case 58:ne.push(!1);break;case 33:ne.push(!0);break;case 59:ne.push(p.bH(n.u,n.e,ne.pop()));break;case 94:ne.push(p.uf(n.u,ne.pop()));break;case 35:ne.push(p.e_(n.u,5,"#"));break;case 64:ne.push(p.e_(n.u,2,"@"));break;case 126:ne.push(p.e_(n.u,3,"~"));break;case 60:ne.push(n.p),n.p=ne.length;break;case 62:if(g=n.u,y=ne.splice(n.p),p.mM(n.u,n.e,y),n.p=ne.pop(),M=ne.pop(),typeof M=="string")ne.push(p.dZ(g,M,y));else switch(C=p.bH(g,n.e,M),C.y){case 11:ne.push(p.mO(g,C,y,n.n));break;default:ne.push(p.mN(g,C,y));break}break;case 38:p.u5(n,ne);break;case 42:I=n.u,ne.push(p.ou(I,p.bH(I,n.e,ne.pop()),n.n));break;case 63:I=n.u,ne.push(p.mP(I,p.bH(I,n.e,ne.pop()),n.n));break;case 47:I=n.u,ne.push(p.ot(I,p.bH(I,n.e,ne.pop()),n.n));break;case 40:ne.push(n.p),n.p=ne.length;break;case 41:if(g=n.u,B=new p.fj,G=g.sEA,V=g.sEA,M=ne.pop(),typeof M=="number")switch(M){case-1:G=ne.pop();break;case-2:V=ne.pop();break;default:ne.push(M);break}else ne.push(M);y=ne.splice(n.p),p.mM(n.u,n.e,y),n.p=ne.pop(),B.a=y,B.b=G,B.c=V,ne.push(p.os(g,p.bH(g,n.e,ne.pop()),B));break;case 91:ne.push(n.p),n.p=ne.length;break;case 93:y=ne.splice(n.p),p.mM(n.u,n.e,y),n.p=ne.pop(),ne.push(y),ne.push(-1);break;case 123:ne.push(n.p),n.p=ne.length;break;case 125:y=ne.splice(n.p),p.u7(n.u,n.e,y),n.p=ne.pop(),ne.push(y),ne.push(-2);break;default:throw"Bad character "+f}return Q=ne.pop(),p.bH(n.u,n.e,Q)},u4:function(n,i,a,f){var g,y,M=i-48;for(g=a.length;n<g&&(y=a.charCodeAt(n),y>=48&&y<=57);++n)M=M*10+(y-48);return f.push(M),n},oq:function(n,i,a,f,g){var y,M,C,I,B,G,V=i+1;for(y=a.length;V<y;++V)if(M=a.charCodeAt(V),M===46){if(g)break;g=!0}else if((((M|32)>>>0)-97&65535)<26||M===95||M===36?C=!0:C=M>=48&&M<=57,!C)break;return I=a.substring(i,V),g?(y=n.u,B=n.e,B.y===10&&(B=B.z),G=p.ov(y,B.z)[I],G==null&&p.a2('No "'+I+'" in "'+p.tM(B)+'"'),f.push(p.fv(y,B,G))):f.push(I),V},u5:function(n,i){var a=i.pop();if(a===0){i.push(p.e_(n.u,1,"0&"));return}if(a===1){i.push(p.e_(n.u,4,"1&"));return}throw p.c(E.fJ("Unexpected extended operation "+p.b(a)))},bH:function(n,i,a){return typeof a=="string"?p.dZ(n,a,n.sEA):typeof a=="number"?p.u6(n,i,a):a},mM:function(n,i,a){var f,g=a.length;for(f=0;f<g;++f)a[f]=p.bH(n,i,a[f])},u7:function(n,i,a){var f,g=a.length;for(f=2;f<g;f+=3)a[f]=p.bH(n,i,a[f])},u6:function(n,i,a){var f,g,y=i.y;if(y===10){if(a===0)return i.z;if(f=i.Q,g=f.length,a<=g)return f[a-1];a-=g,i=i.z,y=i.y}else if(a===0)return i;if(y!==9)throw p.c(E.fJ("Indexed base must be an interface type"));if(f=i.Q,a<=f.length)return f[a-1];throw p.c(E.fJ("Bad index "+a+" for "+i.l(0)))},a1:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q,Z,ne;if(i===f||(p.bh(f)?y=!0:f!==Y._?y=f===Y.K:y=!0,y)||(M=i.y,M===4))return!0;if(p.bh(i))return!1;if(i.y!==1?y=i===Y.P||i===Y.T:y=!0,y||(C=M===13,C&&p.a1(n,a[i.z],a,f,g)))return!0;if(I=f.y,M===6)return p.a1(n,i.z,a,f,g);if(I===6)return y=f.z,p.a1(n,i,a,y,g);if(M===8)return p.a1(n,i.z,a,f,g)?p.a1(n,p.o3(n,i),a,f,g):!1;if(M===7)return y=p.a1(n,i.z,a,f,g),y;if(I===8)return p.a1(n,i,a,f.z,g)?!0:p.a1(n,i,a,p.o3(n,f),g);if(I===7)return y=p.a1(n,i,a,f.z,g),y;if(C)return!1;if(y=M!==11,(!y||M===12)&&f===Y.b8)return!0;if(I===12){if(i===Y.g)return!0;if(M!==12||(B=i.Q,G=f.Q,V=B.length,V!==G.length))return!1;for(a=a==null?B:B.concat(a),g=g==null?G:G.concat(g),Q=0;Q<V;++Q)if(Z=B[Q],ne=G[Q],!p.a1(n,Z,a,ne,g)||!p.a1(n,ne,g,Z,a))return!1;return p.oJ(n,i.z,a,f.z,g)}return I===11?i===Y.g?!0:y?!1:p.oJ(n,i,a,f,g):M===9?I!==9?!1:p.uS(n,i,a,f,g):!1},oJ:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt;if(!p.a1(n,i.z,a,f.z,g)||(y=i.Q,M=f.Q,C=y.a,I=M.a,B=C.length,G=I.length,B>G)||(V=G-B,Q=y.b,Z=M.b,ne=Q.length,ae=Z.length,B+ne<G+ae))return!1;for(ue=0;ue<B;++ue)if(he=C[ue],!p.a1(n,I[ue],g,he,a))return!1;for(ue=0;ue<V;++ue)if(he=Q[ue],!p.a1(n,I[B+ue],g,he,a))return!1;for(ue=0;ue<ae;++ue)if(he=Q[V+ue],!p.a1(n,Z[ue],g,he,a))return!1;for(Ce=y.c,He=M.c,Oe=Ce.length,gt=He.length,lt=0,Et=0;Et<gt;Et+=3)for(pt=He[Et];;){if(lt>=Oe||(vt=Ce[lt],lt+=3,pt<vt))return!1;if(!(vt<pt)){if(he=Ce[lt-1],!p.a1(n,He[Et+2],g,he,a))return!1;break}}return!0},uS:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q,Z=i.z,ne=f.z;if(Z===ne){for(y=i.Q,M=f.Q,C=y.length,I=0;I<C;++I)if(B=y[I],G=M[I],!p.a1(n,B,a,G,g))return!1;return!0}if(f===Y.K)return!0;if(V=p.ov(n,Z),V==null||(Q=V[ne],Q==null))return!1;for(C=Q.length,M=f.Q,I=0;I<C;++I)if(!p.a1(n,p.fv(n,i,Q[I]),a,M[I],g))return!1;return!0},md:function(n){var i,a=n.y;return n===Y.P||n===Y.T||p.bh(n)?i=!0:a!==7?a===6&&p.md(n.z)?i=!0:i=a===8&&p.md(n.z):i=!0,i},vL:function(n){var i;return p.bh(n)?i=!0:n!==Y._?i=n===Y.K:i=!0,i},bh:function(n){var i=n.y;return i===2||i===3||i===4||i===5||n===Y.x},oD:function(n,i){var a,f,g=Object.keys(i),y=g.length;for(a=0;a<y;++a)f=g[a],n[f]=i[f]},aI:function(i,a){var f=this;f.a=i,f.b=a,f.x=f.r=f.c=null,f.y=0,f.cy=f.cx=f.ch=f.Q=f.z=null},fj:function(){this.c=this.b=this.a=null},dX:function(i){this.a=i},fi:function(){},dY:function(i){this.a=i},pc:function(n){return Xe.mangledGlobalNames[n]}},ee={n3:function(n,i,a,f){return{i:n,p:i,e:a,x:f}},fA:function(n){var i,a,f,g,y=n[Xe.dispatchPropertyName];if(y==null&&q.n1==null&&(p.vI(),y=n[Xe.dispatchPropertyName]),y!=null){if(i=y.p,i===!1)return y.i;if(i===!0)return n;if(a=Object.getPrototypeOf(n),i===a)return y.i;if(y.e===a)throw p.c(E.o9("Return interceptor for "+p.b(i(n,y))))}return f=n.constructor,g=f==null?null:f[ee.nL()],g!=null||(g=p.vX(n),g!=null)?g:typeof n=="function"?b.bF:(i=Object.getPrototypeOf(n),i==null||i===Object.prototype?b.aq:(typeof f=="function"&&Object.defineProperty(f,ee.nL(),{value:b.O,enumerable:!1,writable:!0,configurable:!0}),b.O))},nL:function(){var n=q.oo;return n==null?q.oo=Xe.getIsolateTag("_$dart_js"):n},ie:function(n,i){if(n<0||n>4294967295)throw p.c(E.S(n,0,4294967295,"length",null));return ee.eA(new Array(n),i)},th:function(n,i){if(n<0)throw p.c(E.O("Length must be a non-negative integer: "+n));return p.a(new Array(n),i.h("p<0>"))},eA:function(n,i){return ee.mC(p.a(n,i.h("p<0>")))},mC:function(n){return n.fixed$length=Array,n},ti:function(n){if(n<256)switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 133:case 160:return!0;default:return!1}switch(n){case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}},nK:function(n,i){for(var a,f;i>0&&(a=i-1,f=b.a.A(n,a),!(f!==32&&f!==13&&!ee.ti(f)));i=a);return i},cq:function(n){return typeof n=="number"?Math.floor(n)==n?ee.de.prototype:ee.eB.prototype:typeof n=="string"?ee.br.prototype:n==null?ee.cB.prototype:typeof n=="boolean"?ee.dd.prototype:n.constructor==Array?ee.p.prototype:typeof n!="object"?typeof n=="function"?ee.aQ.prototype:n:n instanceof E.e?n:ee.fA(n)},vD:function(n){return typeof n=="number"?ee.c5.prototype:typeof n=="string"?ee.br.prototype:n==null?n:n.constructor==Array?ee.p.prototype:typeof n!="object"?typeof n=="function"?ee.aQ.prototype:n:n instanceof E.e?n:ee.fA(n)},M:function(n){return typeof n=="string"?ee.br.prototype:n==null?n:n.constructor==Array?ee.p.prototype:typeof n!="object"?typeof n=="function"?ee.aQ.prototype:n:n instanceof E.e?n:ee.fA(n)},bg:function(n){return n==null?n:n.constructor==Array?ee.p.prototype:typeof n!="object"?typeof n=="function"?ee.aQ.prototype:n:n instanceof E.e?n:ee.fA(n)},vE:function(n){return typeof n=="number"?ee.c5.prototype:n==null||n instanceof E.e?n:ee.cl.prototype},mZ:function(n){return typeof n=="string"?ee.br.prototype:n==null||n instanceof E.e?n:ee.cl.prototype},b0:function(n){return n==null?n:typeof n!="object"?typeof n=="function"?ee.aQ.prototype:n:n instanceof E.e?n:ee.fA(n)},ns:function(n,i){return typeof n=="number"&&typeof i=="number"?n+i:ee.vD(n).ah(n,i)},aA:function(n,i){return n==null?i==null:typeof n!="object"?i!=null&&n===i:ee.cq(n).N(n,i)},nt:function(n,i){return typeof i=="number"&&(n.constructor==Array||typeof n=="string"||p.p1(n,n[Xe.dispatchPropertyName]))&&i>>>0===i&&i<n.length?n[i]:ee.M(n).j(n,i)},rr:function(n,i,a){return typeof i=="number"&&(n.constructor==Array||p.p1(n,n[Xe.dispatchPropertyName]))&&!n.immutable$list&&i>>>0===i&&i<n.length?n[i]=a:ee.bg(n).m(n,i,a)},rs:function(n,i){return ee.mZ(n).H(n,i)},mx:function(n,i){return ee.bg(n).B(n,i)},my:function(n,i){return ee.bg(n).ae(n,i)},nu:function(n,i){return ee.bg(n).F(n,i)},eh:function(n,i){return ee.bg(n).S(n,i)},rt:function(n,i,a,f){return ee.b0(n).dZ(n,i,a,f)},aL:function(n){return ee.cq(n).gG(n)},nv:function(n){return ee.M(n).gu(n)},ru:function(n){return ee.M(n).ga3(n)},a_:function(n){return ee.bg(n).gC(n)},X:function(n){return ee.M(n).gi(n)},rv:function(n){return ee.b0(n).gep(n)},rw:function(n){return ee.b0(n).gc_(n)},rx:function(n,i,a){return ee.bg(n).aM(n,i,a)},bl:function(n,i,a){return ee.bg(n).ag(n,i,a)},ry:function(n,i){return ee.cq(n).bb(n,i)},rz:function(n,i){return ee.M(n).si(n,i)},rA:function(n,i){return ee.b0(n).sd5(n,i)},rB:function(n,i){return ee.b0(n).sey(n,i)},rC:function(n,i){return ee.b0(n).seA(n,i)},rD:function(n,i){return ee.b0(n).seB(n,i)},nw:function(n,i){return ee.bg(n).a1(n,i)},rE:function(n,i){return ee.mZ(n).V(n,i)},rF:function(n,i,a){return ee.b0(n).cV(n,i,a)},rG:function(n,i,a){return ee.b0(n).eq(n,i,a)},rH:function(n){return ee.vE(n).cW(n)},fG:function(n,i){return ee.bg(n).aL(n,i)},ag:function(n){return ee.cq(n).l(n)},rI:function(n){return ee.mZ(n).ev(n)},cz:function(){},dd:function(){},cB:function(){},aF:function(){},eU:function(){},cl:function(){},aQ:function(){},p:function(i){this.$ti=i},ii:function(i){this.$ti=i},aC:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},c5:function(){},de:function(){},eB:function(){},br:function(){}},E={tY:function(){var n,i,a={};return t.scheduleImmediate!=null?E.vk():t.MutationObserver!=null&&t.document!=null?(n=t.document.createElement("div"),i=t.document.createElement("span"),a.a=null,new t.MutationObserver(p.m0(new E.lb(a),1)).observe(n,{childList:!0}),new E.la(a,n,i)):t.setImmediate!=null?E.vl():E.vm()},tZ:function(n){t.scheduleImmediate(p.m0(new E.lc(n),0))},u_:function(n){t.setImmediate(p.m0(new E.ld(n),0))},u0:function(n){E.u8(0,n)},u8:function(n,i){var a=new E.lG;return a.d6(n,i),a},ec:function(n){return new E.fc(new E.C(q.x,n.h("C<0>")),n.h("fc<0>"))},e7:function(n,i){return n.$2(0,null),i.b=!0,i.a},cV:function(n,i){E.uC(n,i)},e6:function(n,i){i.T(n)},e5:function(n,i){i.bD(p.E(n),p.aK(n))},uC:function(n,i){var a,f,g=new E.lK(i),y=new E.lL(i);n instanceof E.C?n.cu(g,y,Y.z):(a=Y.z,Y.c.b(n)?n.ao(0,g,y,a):(f=new E.C(q.x,Y.eI),f.a=4,f.c=n,f.cu(g,y,a)))},ee:function(n){var i=function(a,f){return function(g,y){for(;;)try{a(g,y);break}catch(M){y=M,g=f}}}(n,1);return q.x.bV(new E.m_(i))},lv:function(n){return new E.cO(n,1)},bF:function(){return b.dy},bG:function(n){return new E.cO(n,3)},bK:function(n,i){return new E.dW(n,i.h("dW<0>"))},ol:function(n,i){var a,f;i.a=1;try{n.ao(0,new E.lm(i),new E.ln(i),Y.P)}catch(g){a=p.E(g),f=p.aK(g),E.p9(new E.lo(i,a,f))}},ll:function(n,i){for(var a,f;a=n.a,a===2;)n=n.c;a>=4?(f=i.b1(),i.a=n.a,i.c=n.c,E.cN(i,f)):(f=i.c,i.a=2,i.c=n,n.co(f))},cN:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae=null,ue={},he=ue.a=n;for(a=Y.c;;){if(f={},g=he.a===8,i==null){g&&(a=he.c,E.cY(ae,ae,he.b,a.a,a.b));return}for(f.a=i,y=i.a,he=i;y!=null;he=y,y=M)he.a=null,E.cN(ue.a,he),f.a=y,M=y.a;if(C=ue.a,I=C.c,f.b=g,f.c=I,B=!g,B?(G=he.c,G=(G&1)!=0||(G&15)==8):G=!0,G){if(V=he.b.b,g?(G=C.b===V,G=!(G||G)):G=!1,G){E.cY(ae,ae,C.b,I.a,I.b);return}if(Q=q.x,Q!==V?q.x=V:Q=ae,he=he.c,(he&15)==8?new E.lt(f,ue,g).$0():B?(he&1)!=0&&new E.ls(f,I).$0():(he&2)!=0&&new E.lr(ue,f).$0(),Q!=null&&(q.x=Q),he=f.c,a.b(he)){if(Z=f.a.b,he.a>=4){ne=Z.c,Z.c=null,i=Z.b2(ne),Z.a=he.a,Z.c=he.c,ue.a=he;continue}else E.ll(he,Z);return}}Z=f.a.b,ne=Z.c,Z.c=null,i=Z.b2(ne),he=f.b,C=f.c,he?(Z.a=8,Z.c=C):(Z.a=4,Z.c=C),ue.a=Z,he=Z}},v4:function(n,i){if(Y.Q.b(n))return i.bV(n);if(Y.bI.b(n))return n;throw p.c(E.nz(n,"onError","Error handler must accept one Object or one Object and a StackTrace as arguments, and return a a valid result"))},v_:function(){var n,i;for(n=q.cX;n!=null;n=q.cX)q.eb=null,i=n.b,q.cX=i,i==null&&(q.ea=null),n.a.$0()},v7:function(){q.mT=!0;try{E.v_()}finally{q.eb=null,q.mT=!1,q.cX!=null&&q.np().$1(E.oS())}},oP:function(n){var i=new E.fd(n),a=q.ea;a==null?(q.cX=q.ea=i,q.mT||q.np().$1(E.oS())):q.ea=a.b=i},v6:function(n){var i,a,f,g=q.cX;if(g==null){E.oP(n),q.eb=q.ea;return}i=new E.fd(n),a=q.eb,a==null?(i.b=g,q.cX=q.eb=i):(f=a.b,i.b=f,q.eb=a.b=i,f==null&&(q.ea=i))},p9:function(n){var i=null,a=q.x;if(b.f===a){E.cZ(i,i,b.f,n);return}E.cZ(i,i,a,a.cw(n))},tR:function(n,i){var a=null,f=i.h("cT<0>"),g=new E.cT(a,a,a,a,f);return n.ao(0,new E.kC(g,i),new E.kD(g),Y.P),new E.an(g,f.h("an<1>"))},mI:function(n,i){return new E.dE(new E.kE(n,i),i.h("dE<0>"))},yG:function(n){return E.aM(n,"stream"),new E.fq},o6:function(n,i,a,f){return new E.bD(null,i,a,n,f.h("bD<0>"))},mV:function(n){var i,a,f;if(n!=null)try{n.$0()}catch(g){i=p.E(g),a=p.aK(g),f=q.x,E.cY(null,null,f,i,a)}},oi:function(n,i,a,f){var g=q.x,y=f?1:0,M=E.oj(g,i);return new E.cK(n,M,a,g,y)},oj:function(n,i){if(i==null&&(i=E.vn()),Y.k.b(i))return n.bV(i);if(Y.d5.b(i))return i;throw p.c(E.O("handleError callback must take either an Object (the error), or both an Object (the error) and a StackTrace."))},v0:function(n,i){E.cY(null,null,q.x,n,i)},fK:function(n,i){var a=i==null?E.el(n):i;return E.aM(n,"error"),new E.ek(n,a)},el:function(n){var i;return Y.C.b(n)&&(i=n.gaP(),i!=null)?i:b.bg},cY:function(n,i,a,f,g){E.v6(new E.lY(f,g))},oL:function(n,i,a,f){var g,y=q.x;if(y===a)return f.$0();q.x=a,g=y;try{return y=f.$0(),y}finally{q.x=g}},oN:function(n,i,a,f,g){var y,M=q.x;if(M===a)return f.$1(g);q.x=a,y=M;try{return M=f.$1(g),M}finally{q.x=y}},oM:function(n,i,a,f,g,y){var M,C=q.x;if(C===a)return f.$2(g,y);q.x=a,M=C;try{return C=f.$2(g,y),C}finally{q.x=M}},cZ:function(n,i,a,f){var g=b.f!==a;g&&(f=g?a.cw(f):a.dQ(f,Y.H)),E.oP(f)},lb:function(i){this.a=i},la:function(i,a,f){this.a=i,this.b=a,this.c=f},lc:function(i){this.a=i},ld:function(i){this.a=i},lG:function(){},lH:function(i,a){this.a=i,this.b=a},fc:function(i,a){this.a=i,this.b=!1,this.$ti=a},lK:function(i){this.a=i},lL:function(i){this.a=i},m_:function(i){this.a=i},cO:function(i,a){this.a=i,this.b=a},aB:function(i,a){var f=this;f.a=i,f.d=f.c=f.b=null,f.$ti=a},dW:function(i,a){this.a=i,this.$ti=a},ff:function(){},ax:function(i,a){this.a=i,this.$ti=a},cM:function(i,a,f,g){var y=this;y.a=null,y.b=i,y.c=a,y.d=f,y.e=g},C:function(i,a){var f=this;f.a=0,f.b=i,f.c=null,f.$ti=a},li:function(i,a){this.a=i,this.b=a},lq:function(i,a){this.a=i,this.b=a},lm:function(i){this.a=i},ln:function(i){this.a=i},lo:function(i,a,f){this.a=i,this.b=a,this.c=f},lk:function(i,a){this.a=i,this.b=a},lp:function(i,a){this.a=i,this.b=a},lj:function(i,a,f){this.a=i,this.b=a,this.c=f},lt:function(i,a,f){this.a=i,this.b=a,this.c=f},lu:function(i){this.a=i},ls:function(i,a){this.a=i,this.b=a},lr:function(i,a){this.a=i,this.b=a},fd:function(i){this.a=i,this.b=null},aW:function(){},kC:function(i,a){this.a=i,this.b=a},kD:function(i){this.a=i},kE:function(i,a){this.a=i,this.b=a},kF:function(i,a){this.a=i,this.b=a},kG:function(i,a){this.a=i,this.b=a},f0:function(){},cS:function(){},lF:function(i){this.a=i},lE:function(i){this.a=i},fs:function(){},fe:function(){},bD:function(i,a,f,g,y){var M=this;M.a=null,M.b=0,M.c=null,M.d=i,M.e=a,M.f=f,M.r=g,M.$ti=y},cT:function(i,a,f,g,y){var M=this;M.a=null,M.b=0,M.c=null,M.d=i,M.e=a,M.f=f,M.r=g,M.$ti=y},an:function(i,a){this.a=i,this.$ti=a},dA:function(i,a,f,g,y,M){var C=this;C.x=i,C.a=a,C.b=f,C.c=g,C.d=y,C.e=M,C.r=C.f=null},cK:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y,M.r=M.f=null},lg:function(i,a,f){this.a=i,this.b=a,this.c=f},lf:function(i){this.a=i},dT:function(){},dE:function(i,a){this.a=i,this.b=!1,this.$ti=a},dL:function(i){this.b=i,this.a=0},fh:function(){},cn:function(i){this.b=i,this.a=null},dB:function(i,a){this.b=i,this.c=a,this.a=null},lh:function(){},fn:function(){},lz:function(i,a){this.a=i,this.b=a},dU:function(){this.c=this.b=null,this.a=0},fq:function(){},ek:function(i,a){this.a=i,this.b=a},lJ:function(){},lY:function(i,a){this.a=i,this.b=a},lB:function(){},lD:function(i,a,f){this.a=i,this.b=a,this.c=f},lC:function(i,a){this.a=i,this.b=a},om:function(n,i){var a=n[i];return a===n?null:a},mK:function(n,i,a){a==null?n[i]=n:n[i]=a},on:function(){var n=Object.create(null);return E.mK(n,"<non-identifier-key>",n),delete n["<non-identifier-key>"],n},mF:function(n,i,a){return p.oU(n,new p.aG(i.h("@<0>").D(a).h("aG<1,2>")))},a5:function(n,i){return new p.aG(n.h("@<0>").D(i).h("aG<1,2>"))},nN:function(n){return new E.aZ(n.h("aZ<0>"))},aR:function(n){return new E.aZ(n.h("aZ<0>"))},b8:function(n,i){return p.vA(n,new E.aZ(i.h("aZ<0>")))},mL:function(){var n=Object.create(null);return n["<non-identifier-key>"]=n,delete n["<non-identifier-key>"],n},tf:function(n,i,a){var f,g;if(E.mU(n))return i==="("&&a===")"?"(...)":i+"..."+a;f=p.a([],Y.s),q.co.push(n);try{E.uY(n,f)}finally{q.co.pop()}return g=E.mJ(i,f,", ")+a,g.charCodeAt(0)==0,g},id:function(n,i,a){var f,g;if(E.mU(n))return i+"..."+a;f=new E.a9(i),q.co.push(n);try{g=f,g.a=E.mJ(g.a,n,", ")}finally{q.co.pop()}return f.a+=a,g=f.a,g.charCodeAt(0)==0,g},mU:function(n){var i,a;for(i=q.co.length,a=0;a<i;++a)if(n===q.co[a])return!0;return!1},uY:function(n,i){for(var a,f,g,y,M,C,I,B=n.gC(n),G=0,V=0;G<80||V<3;){if(!B.n())return;a=p.b(B.gq()),i.push(a),G+=a.length+2,++V}if(B.n())if(y=B.gq(),++V,B.n()){for(M=B.gq(),++V;B.n();y=M,M=C)if(C=B.gq(),++V,V>100){for(;G>75&&V>3;)G-=i.pop().length+2,--V;i.push("...");return}g=p.b(y),f=p.b(M),G+=f.length+g.length+4}else{if(V<=4){i.push(p.b(y));return}f=p.b(y),g=i.pop(),G+=f.length+2}else{if(V<=5)return;f=i.pop(),g=i.pop()}for(V>i.length+2?(G+=5,I="..."):I=null;G>80&&i.length>3;)G-=i.pop().length+2,I==null&&(G+=5,I="...");I!=null&&i.push(I),i.push(g),i.push(f)},tt:function(n,i){var a,f,g=E.nN(i);for(a=n.length,f=0;f<n.length;n.length===a||(0,p.cs)(n),++f)g.B(0,i.a(n[f]));return g},mG:function(n){var i,a={};if(E.mU(n))return"{...}";i=new E.a9("");try{q.co.push(n),i.a+="{",a.a=!0,n.J(0,new E.j8(a,i)),i.a+="}"}finally{q.co.pop()}return a=i.a,a.charCodeAt(0)==0,a},dG:function(){},dJ:function(i){var a=this;a.a=0,a.e=a.d=a.c=a.b=null,a.$ti=i},dH:function(i,a){this.a=i,this.$ti=a},dI:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},aZ:function(i){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=i},lx:function(i){this.a=i,this.c=this.b=null},dM:function(i,a,f){var g=this;g.a=i,g.b=a,g.d=g.c=null,g.$ti=f},aX:function(i,a){this.a=i,this.$ti=a},dc:function(){},dg:function(){},m:function(){},di:function(){},j8:function(i,a){this.a=i,this.b=a},I:function(){},j9:function(i){this.a=i},fw:function(){},dj:function(){},be:function(i,a){this.a=i,this.$ti=a},cQ:function(){},e1:function(i,a){this.a=i,this.$ti=a},dN:function(){},e0:function(){},oK:function(n,i){var a,f,g=null;try{g=JSON.parse(n)}catch(y){throw a=p.E(y),f=E.K(String(a),null,null),p.c(f)}return f=E.lN(g),f},lN:function(n){var i;if(n==null)return null;if(typeof n!="object")return n;if(Object.getPrototypeOf(n)!==Array.prototype)return new E.fl(n,Object.create(null));for(i=0;i<n.length;++i)n[i]=E.lN(n[i]);return n},tW:function(n,i,a,f){var g,y;return i instanceof Uint8Array?(g=i,f=g.length,f-a<15||(y=E.tX(n,g,a,f),y!=null&&n&&y.indexOf("\uFFFD")>=0)?null:y):null},tX:function(n,i,a,f){var g=n?q.rk():q.rj();return g==null?null:a===0&&f===i.length?E.od(g,i):E.od(g,i.subarray(a,E.aV(a,f,i.length)))},od:function(n,i){var a;try{return a=n.decode(i),a}catch(f){p.E(f)}return null},nA:function(n,i,a,f,g,y){if(b.c.bg(y,4)!==0)throw p.c(E.K("Invalid base64 padding, padded length must be multiple of four, is "+y,n,a));if(f+g!==y)throw p.c(E.K("Invalid base64 padding, '=' not at the end",n,i));if(g>2)throw p.c(E.K("Invalid base64 padding, more than two '=' characters",n,i))},u3:function(n,i,a,f,g,y){var M,C,I,B,G,V,Q="Invalid encoding before padding",Z="Invalid character",ne=b.c.ad(y,2),ae=y&3,ue=q.nq();for(M=i,C=0;M<a;++M){if(I=b.a.A(n,M),C|=I,B=ue[I&127],B>=0){ne=(ne<<6|B)&16777215,ae=ae+1&3,ae===0&&(G=g+1,f[g]=ne>>>16&255,g=G+1,f[G]=ne>>>8&255,G=g+1,f[g]=ne&255,g=G,ne=0);continue}else if(B===-1&&ae>1){if(C>127)break;if(ae===3){if((ne&3)!=0)throw p.c(E.K(Q,n,M));f[g]=ne>>>10,f[g+1]=ne>>>2}else{if((ne&15)!=0)throw p.c(E.K(Q,n,M));f[g]=ne>>>4}return V=(3-ae)*3,I===37&&(V+=2),E.oh(n,M+1,a,-V-1)}throw p.c(E.K(Z,n,M))}if(C>=0&&C<=127)return(ne<<2|ae)>>>0;for(M=i;M<a&&(I=b.a.A(n,M),!(I>127));++M);throw p.c(E.K(Z,n,M))},u1:function(n,i,a,f){var g=E.u2(n,i,a),y=(f&3)+(g-i),M=b.c.ad(y,2)*3,C=y&3;return C!==0&&g<a&&(M+=C-1),M>0?new Uint8Array(M):q.rl()},u2:function(n,i,a){for(var f,g=a,y=g,M=0;y>i&&M<2;){e:{if(--y,f=b.a.A(n,y),f===61){++M,g=y;break e}if((f|32)==100){if(y===i)break;--y,f=b.a.A(n,y)}if(f===51){if(y===i)break;--y,f=b.a.A(n,y)}if(f===37){++M,g=y;break e}break}}return g},oh:function(n,i,a,f){var g,y;if(i===a)return f;for(g=-f-1;g>0;){if(y=b.a.A(n,i),g===3){if(y===61){g-=3,++i;break}if(y===37){if(--g,++i,i===a)break;y=b.a.A(n,i)}else break}if((g>3?g-3:g)===2){if(y!==51||(++i,--g,i===a))break;y=b.a.A(n,i)}if((y|32)!=100||(++i,--g,i===a))break}if(i!==a)throw p.c(E.K("Invalid padding character",n,i));return-g-1},oC:function(n){switch(n){case 65:return"Missing extension byte";case 67:return"Unexpected extension byte";case 69:return"Invalid UTF-8 byte";case 71:return"Overlong encoding";case 73:return"Out of unicode range";case 75:return"Encoded surrogate";case 77:return"Unfinished UTF-8 octet sequence";default:return""}},uz:function(n,i,a){var f,g,y,M=a-i,C=new Uint8Array(M);for(f=ee.M(n),g=0;g<M;++g)y=f.j(n,i+g),C[g]=(y&4294967040)>>>0!=0?255:y;return C},fl:function(i,a){this.a=i,this.b=a,this.c=null},fm:function(i){this.a=i},lw:function(i,a,f){this.b=i,this.c=a,this.a=f},kT:function(){},kU:function(){},fL:function(){},fN:function(){},fM:function(){},le:function(){this.a=0},fO:function(){},em:function(){},fo:function(i,a,f){this.a=i,this.b=a,this.$ti=f},eo:function(){},eq:function(){},hw:function(){},io:function(){},ip:function(i){this.a=i},kH:function(){},kI:function(){},dV:function(){},lI:function(i,a,f){this.a=i,this.b=a,this.c=f},kR:function(){},kS:function(i){this.a=i},fx:function(i){this.a=i,this.b=16,this.c=0},cr:function(n,i){var a=p.o1(n,i);if(a!=null)return a;throw p.c(E.K(n,null,null))},t6:function(n){return n instanceof p.bZ?n.l(0):"Instance of '"+p.b(p.ju(n))+"'"},bt:function(n,i,a,f){var g,y=ee.ie(n,f);if(n!==0&&i!=null)for(g=0;g<y.length;++g)y[g]=i;return y},dh:function(n,i,a){var f,g=p.a([],a.h("p<0>"));for(f=ee.a_(n);f.n();)g.push(f.gq());return i?g:ee.mC(g)},nO:function(n,i,a,f){var g,y=a?ee.th(n,f):ee.ie(n,f);for(g=0;g<n;++g)y[g]=i.$1(g);return y},o7:function(n,i,a){return Y.bm.b(n)?p.tK(n,i,E.aV(i,a,n.length)):E.tS(n,i,a)},tS:function(n,i,a){var f,g,y,M,C,I=null;if(i<0)throw p.c(E.S(i,0,n.length,I,I));if(f=a==null,!f&&a<i)throw p.c(E.S(a,i,n.length,I,I));for(g=new p.a6(n,n.length,p.ac(n).h("a6<m.E>")),y=0;y<i;++y)if(!g.n())throw p.c(E.S(i,0,y,I,I));if(M=[],f)for(;g.n();)C=g.d,M.push(C);else for(y=i;y<a;++y){if(!g.n())throw p.c(E.S(a,i,y,I,I));C=g.d,M.push(C)}return p.tI(M)},o2:function(n){return new p.ih(n,p.tj(n,!1,!0,!1,!1,!1))},mJ:function(n,i,a){var f=ee.a_(i);if(!f.n())return n;if(a.length===0)do n+=p.b(f.gq());while(f.n());else for(n+=p.b(f.gq());f.n();)n=n+a+p.b(f.gq());return n},nS:function(n,i,a,f){return new E.eO(n,i,a,f)},nG:function(n){var i=Math.abs(n),a=n<0?"-":"";return i>=1e3?""+n:i>=100?a+"0"+i:i>=10?a+"00"+i:a+"000"+i},t5:function(n){var i=Math.abs(n),a=n<0?"-":"+";return i>=1e5?a+i:a+"0"+i},nH:function(n){return n>=100?""+n:n>=10?"0"+n:"00"+n},b5:function(n){return n>=10?""+n:"0"+n},cx:function(n){return typeof n=="number"||p.e9(n)||n==null?ee.ag(n):typeof n=="string"?JSON.stringify(n):E.t6(n)},fJ:function(n){return new E.ej(n)},O:function(n){return new E.ak(!1,null,null,n)},nz:function(n,i,a){return new E.ak(!0,n,i,a)},aM:function(n,i){if(n==null)throw p.c(new E.ak(!1,null,i,"Must not be null"));return n},jv:function(n,i){return new E.dq(null,null,!0,n,i,"Value not in range")},S:function(n,i,a,f,g){return new E.dq(i,a,!0,n,f,"Invalid value")},aV:function(n,i,a){if(0>n||n>a)throw p.c(E.S(n,0,a,"start",null));if(i!=null){if(n>i||i>a)throw p.c(E.S(i,n,a,"end",null));return i}return a},aU:function(n,i){if(n<0)throw p.c(E.S(n,0,null,i,null));return n},ex:function(n,i,a,f,g){var y=g==null?ee.X(i):g;return new E.ew(y,!0,n,a,"Index out of range")},ab:function(n){return new E.f8(n)},o9:function(n){return new E.f3(n)},cF:function(n){return new E.bz(n)},ad:function(n){return new E.ep(n)},t7:function(n){return new E.dD(n)},K:function(n,i,a){return new E.aD(n,i,a)},nJ:function(n,i,a){return n<=0?new p.b6(a.h("b6<0>")):new E.dF(n,i,a.h("dF<0>"))},nP:function(n,i,a,f,g){return new p.bY(n,i.h("@<0>").D(a).D(f).D(g).h("bY<1,2,3,4>"))},ob:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt=null,vt=n.length;if(vt>=5){if(i=E.oQ(n,0),i===0)return a=E.kM(vt<vt?b.a.t(n,0,vt):n,5,pt),a.gbd(a);if(i===32)return a=E.kM(b.a.t(n,5,vt),0,pt),a.gbd(a)}return f=E.bt(8,0,!1,Y.r),f[0]=0,f[1]=-1,f[2]=-1,f[7]=-1,f[3]=0,f[4]=0,f[5]=vt,f[6]=vt,E.oO(n,0,vt,0,f)>=14&&(f[7]=vt),g=f[1],g>=0&&E.oO(n,0,g,20,f)===20&&(f[7]=g),y=f[2]+1,M=f[3],C=f[4],I=f[5],B=f[6],B<I&&(I=B),C<y?C=I:C<=g&&(C=g+1),M<y&&(M=C),G=f[7]<0,G?y>g+3?(V=pt,G=!1):(a=M>0,a&&M+1===C?(V=pt,G=!1):(I<vt&&I===C+2&&b.a.U(n,"..",C)?Q=!0:Q=I>C+2&&b.a.U(n,"/..",I-3),Q?(V=pt,G=!1):(g===4?b.a.U(n,"file",0)?(y<=0?(b.a.U(n,"/",C)?(Z="file://",ne=2):(Z="file:///",ne=3),n=Z+b.a.t(n,C,vt),g-=0,a=ne-0,I+=a,B+=a,vt=n.length,y=7,M=7,C=7):C===I&&(++B,ae=I+1,n=b.a.az(n,C,I,"/"),++vt,I=ae),V="file"):b.a.U(n,"http",0)?(a&&M+3===C&&b.a.U(n,"80",M+1)&&(B-=3,ue=C-3,I-=3,n=b.a.az(n,M,C,""),vt-=3,C=ue),V="http"):V=pt:g===5&&b.a.U(n,"https",0)?(a&&M+4===C&&b.a.U(n,"443",M+1)&&(B-=4,ue=C-4,I-=4,n=b.a.az(n,M,C,""),vt-=3,C=ue),V="https"):V=pt,G=!0))):V=pt,G?(vt<n.length&&(n=b.a.t(n,0,vt),g-=0,y-=0,M-=0,C-=0,I-=0,B-=0),new E.fp(n,g,y,M,C,I,B,V)):(V==null&&(g>0?V=E.us(n,0,g):(g===0&&E.cU(n,0,"Invalid empty scheme"),V="")),y>0?(he=g+3,Ce=he<y?E.ut(n,he,y-1):"",He=E.uo(n,y,M,!1),a=M+1,a<C?(Oe=p.o1(b.a.t(n,a,C),pt),gt=E.uq(Oe==null?p.a2(E.K("Invalid port",n,a)):Oe,V)):gt=pt):(gt=pt,He=gt,Ce=""),lt=E.up(n,C,I,pt,V,He!=null),Et=I<B?E.ur(n,I+1,B,pt):pt,new E.e2(V,Ce,He,gt,lt,Et,B<vt?E.un(n,B+1,vt):pt))},tV:function(n,i,a){var f,g,y,M,C,I,B="IPv4 address should contain exactly 4 parts",G="each part must be in the range 0..255",V=new E.kN(n),Q=new Uint8Array(4);for(f=i,g=f,y=0;f<a;++f)M=b.a.A(n,f),M!==46?(M^48)>9&&V.$2("invalid character",f):(y===3&&V.$2(B,f),C=E.cr(b.a.t(n,g,f),null),C>255&&V.$2(G,g),I=y+1,Q[y]=C,g=f+1,y=I);return y!==3&&V.$2(B,a),C=E.cr(b.a.t(n,g,a),null),C>255&&V.$2(G,g),Q[y]=C,Q},oc:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he=new E.kO(n),Ce=new E.kP(he,n);for(n.length<2&&he.$1("address is too short"),f=p.a([],Y.Z),g=i,y=g,M=!1,C=!1;g<a;++g)I=b.a.A(n,g),I===58?(g===i&&(++g,b.a.A(n,g)!==58&&he.$2("invalid start colon.",g),y=g),g===y?(M&&he.$2("only one wildcard `::` is allowed",g),f.push(-1),M=!0):f.push(Ce.$2(y,g)),y=g+1):I===46&&(C=!0);for(f.length===0&&he.$1("too few parts"),B=y===a,G=b.d.gaH(f),B&&G!==-1&&he.$2("expected a part after last `:`",a),B||(C?(V=E.tV(n,y,a),f.push((V[0]<<8|V[1])>>>0),f.push((V[2]<<8|V[3])>>>0)):f.push(Ce.$2(y,a))),M?f.length>7&&he.$1("an address with a wildcard must have less than 7 parts"):f.length!==8&&he.$1("an address without a wildcard must contain exactly 8 parts"),Q=new Uint8Array(16),G=f.length,Z=9-G,g=0,ne=0;g<G;++g)if(ae=f[g],ae===-1)for(ue=0;ue<Z;++ue)Q[ne]=0,Q[ne+1]=0,ne+=2;else Q[ne]=b.c.ad(ae,8),Q[ne+1]=ae&255,ne+=2;return Q},ow:function(n){return n==="http"?80:n==="https"?443:0},cU:function(n,i,a){throw p.c(E.K(a,n,i))},uq:function(n,i){var a=E.ow(i);return n===a?null:n},uo:function(n,i,a,f){var g,y,M,C,I,B;if(i===a)return"";if(b.a.A(n,i)===91)return g=a-1,b.a.A(n,g)!==93&&E.cU(n,i,"Missing end `]` to match `[` in host"),y=i+1,M=E.ul(n,y,g),M<g?(C=M+1,I=E.oB(n,b.a.U(n,"25",C)?M+3:C,g,"%25")):I="",E.oc(n,y,M),b.a.t(n,i,M).toLowerCase()+I+"]";for(B=i;B<a;++B)if(b.a.A(n,B)===58)return M=b.a.b7(n,"%",i),M=M>=i&&M<a?M:a,M<a?(C=M+1,I=E.oB(n,b.a.U(n,"25",C)?M+3:C,a,"%25")):I="",E.oc(n,i,M),"["+b.a.t(n,i,M)+I+"]";return E.uv(n,i,a)},ul:function(n,i,a){var f=b.a.b7(n,"%",i);return f>=i&&f<a?f:a},oB:function(n,i,a,f){var g,y,M,C,I,B,G,V,Q,Z,ne=f!==""?new E.a9(f):null;for(g=i,y=g,M=!0;g<a;)if(C=b.a.A(n,g),C===37){if(I=E.mR(n,g,!0),B=I==null,B&&M){g+=3;continue}ne==null&&(ne=new E.a9("")),G=ne.a+=b.a.t(n,y,g),B?I=b.a.t(n,g,g+3):I==="%"&&E.cU(n,g,"ZoneID should not contain % anymore"),ne.a=G+I,g+=3,y=g,M=!0}else C<127&&(b.aj[C>>>4]&1<<(C&15))!=0?(M&&65<=C&&90>=C&&(ne==null&&(ne=new E.a9("")),y<g&&(ne.a+=b.a.t(n,y,g),y=g),M=!1),++g):((C&64512)==55296&&g+1<a?(V=b.a.A(n,g+1),(V&64512)==56320?(C=65536|(C&1023)<<10|V&1023,Q=2):Q=1):Q=1,Z=b.a.t(n,y,g),ne==null&&(ne=new E.a9("")),B=ne,B.a+=Z,B.a+=E.mQ(C),g+=Q,y=g);return ne==null?b.a.t(n,i,a):(y<a&&(ne.a+=b.a.t(n,y,a)),B=ne.a,B.charCodeAt(0)==0,B)},uv:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z;for(f=i,g=f,y=null,M=!0;f<a;)if(C=b.a.A(n,f),C===37){if(I=E.mR(n,f,!0),B=I==null,B&&M){f+=3;continue}y==null&&(y=new E.a9("")),G=b.a.t(n,g,f),V=y.a+=M?G:G.toLowerCase(),B?(I=b.a.t(n,f,f+3),Q=3):I==="%"?(I="%25",Q=1):Q=3,y.a=V+I,f+=Q,g=f,M=!0}else C<127&&(b.cG[C>>>4]&1<<(C&15))!=0?(M&&65<=C&&90>=C&&(y==null&&(y=new E.a9("")),g<f&&(y.a+=b.a.t(n,g,f),g=f),M=!1),++f):C<=93&&(b.ac[C>>>4]&1<<(C&15))!=0?E.cU(n,f,"Invalid character"):((C&64512)==55296&&f+1<a?(Z=b.a.A(n,f+1),(Z&64512)==56320?(C=65536|(C&1023)<<10|Z&1023,Q=2):Q=1):Q=1,G=b.a.t(n,g,f),M||(G=G.toLowerCase()),y==null&&(y=new E.a9("")),B=y,B.a+=G,B.a+=E.mQ(C),f+=Q,g=f);return y==null?b.a.t(n,i,a):(g<a&&(G=b.a.t(n,g,a),y.a+=M?G:G.toLowerCase()),B=y.a,B.charCodeAt(0)==0,B)},us:function(n,i,a){var f,g,y;if(i===a)return"";for(E.oy(b.a.H(n,i))||E.cU(n,i,"Scheme not starting with alphabetic character"),f=i,g=!1;f<a;++f)y=b.a.H(n,f),y<128&&(b.ah[y>>>4]&1<<(y&15))!=0||E.cU(n,f,"Illegal scheme character"),65<=y&&y<=90&&(g=!0);return n=b.a.t(n,i,a),E.uk(g?n.toLowerCase():n)},uk:function(n){return n==="http"?"http":n==="file"?"file":n==="https"?"https":n==="package"?"package":n},ut:function(n,i,a){return E.e3(n,i,a,b.cm,!1)},up:function(n,i,a,f,g,y){var M=g==="file",C=M||y,I=E.e3(n,i,a,b.am,!0);if(I.length===0){if(M)return"/"}else C&&!b.a.V(I,"/")&&(I="/"+I);return E.uu(I,g,y)},uu:function(n,i,a){var f=i.length===0;return f&&!a&&!b.a.V(n,"/")?E.uw(n,!f||a):E.ux(n)},ur:function(n,i,a,f){return E.e3(n,i,a,b.x,!0)},un:function(n,i,a){return E.e3(n,i,a,b.x,!0)},mR:function(n,i,a){var f,g,y,M,C,I=i+2;return I>=n.length||(f=b.a.A(n,i+1),g=b.a.A(n,I),y=p.m8(f),M=p.m8(g),y<0||M<0)?"%":(C=y*16+M,C<127&&(b.aj[b.c.ad(C,4)]&1<<(C&15))!=0?p.ba(a&&65<=C&&90>=C?(C|32)>>>0:C):f>=97||g>=97?b.a.t(n,i,i+3).toUpperCase():null)},mQ:function(n){var i,a,f,g,y,M="0123456789ABCDEF";if(n<128)i=new Uint8Array(3),i[0]=37,i[1]=b.a.H(M,n>>>4),i[2]=b.a.H(M,n&15);else for(n>2047?n>65535?(a=240,f=4):(a=224,f=3):(a=192,f=2),i=new Uint8Array(3*f),g=0;--f,f>=0;a=128)y=b.c.dL(n,6*f)&63|a,i[g]=37,i[g+1]=b.a.H(M,y>>>4),i[g+2]=b.a.H(M,y&15),g+=3;return E.o7(i,0,null)},e3:function(n,i,a,f,g){var y=E.oA(n,i,a,f,g);return y==null?b.a.t(n,i,a):y},oA:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q,Z,ne=null;for(y=!g,M=i,C=M,I=ne;M<a;)if(B=b.a.A(n,M),B<127&&(f[B>>>4]&1<<(B&15))!=0)++M;else{if(B===37){if(G=E.mR(n,M,!1),G==null){M+=3;continue}G==="%"?(G="%25",V=1):V=3}else y&&B<=93&&(b.ac[B>>>4]&1<<(B&15))!=0?(E.cU(n,M,"Invalid character"),V=ne,G=V):((B&64512)==55296?(Q=M+1,Q<a?(Z=b.a.A(n,Q),(Z&64512)==56320?(B=65536|(B&1023)<<10|Z&1023,V=2):V=1):V=1):V=1,G=E.mQ(B));I==null&&(I=new E.a9("")),Q=I,Q.a+=b.a.t(n,C,M),Q.a+=p.b(G),M+=V,C=M}return I==null?ne:(C<a&&(I.a+=b.a.t(n,C,a)),y=I.a,y.charCodeAt(0)==0,y)},oz:function(n){return b.a.V(n,".")?!0:b.a.bK(n,"/.")!==-1},ux:function(n){var i,a,f,g,y,M;if(!E.oz(n))return n;for(i=p.a([],Y.s),a=n.split("/"),f=a.length,g=!1,y=0;y<f;++y)M=a[y],ee.aA(M,"..")?(i.length!==0&&(i.pop(),i.length===0&&i.push("")),g=!0):M==="."?g=!0:(i.push(M),g=!1);return g&&i.push(""),b.d.cL(i,"/")},uw:function(n,i){var a,f,g,y,M,C;if(!E.oz(n))return i?n:E.ox(n);for(a=p.a([],Y.s),f=n.split("/"),g=f.length,y=!1,M=0;M<g;++M)C=f[M],C===".."?a.length!==0&&b.d.gaH(a)!==".."?(a.pop(),y=!0):(a.push(".."),y=!1):C==="."?y=!0:(a.push(C),y=!1);return f=a.length,f!==0?f=f===1&&a[0].length===0:f=!0,f?"./":((y||b.d.gaH(a)==="..")&&a.push(""),i||(a[0]=E.ox(a[0])),b.d.cL(a,"/"))},ox:function(n){var i,a,f=n.length;if(f>=2&&E.oy(ee.rs(n,0)))for(i=1;i<f;++i){if(a=b.a.H(n,i),a===58)return b.a.t(n,0,i)+"%3A"+b.a.bj(n,i+1);if(a>127||(b.ah[a>>>4]&1<<(a&15))==0)break}return n},um:function(n,i){var a,f,g;for(a=0,f=0;f<2;++f)if(g=b.a.A(n,i+f),48<=g&&g<=57)a=a*16+g-48;else if(g|=32,97<=g&&g<=102)a=a*16+g-87;else throw p.c(E.O("Invalid URL encoding"));return a},uy:function(n,i,a,f,g){for(var y,M,C,I,B=i;;){if(!(B<a)){y=!0;break}if(M=b.a.A(n,B),M<=127&&M!==37?C=!1:C=!0,C){y=!1;break}++B}if(y){if(b.a3!==f?C=!1:C=!0,C)return b.a.t(n,i,a);I=new p.cu(b.a.t(n,i,a))}else for(I=p.a([],Y.Z),C=n.length,B=i;B<a;++B){if(M=b.a.A(n,B),M>127)throw p.c(E.O("Illegal percent encoding in URI"));if(M===37){if(B+3>C)throw p.c(E.O("Truncated URI"));I.push(E.um(n,B+1)),B+=2}else I.push(M)}return b.dw.dT(I)},oy:function(n){var i=n|32;return 97<=i&&i<=122},oa:function(n){var i;if(n.length>=5){if(i=E.oQ(n,0),i===0)return E.kM(n,5,null);if(i===32)return E.kM(b.a.bj(n,5),0,null)}throw p.c(E.K("Does not start with 'data:'",n,0))},kM:function(n,i,a){var f,g,y,M,C,I,B,G,V="Invalid MIME type",Q=p.a([i-1],Y.Z);for(f=n.length,g=i,y=-1,M=null;g<f&&(M=b.a.H(n,g),!(M===44||M===59));++g)if(M===47){if(y<0){y=g;continue}throw p.c(E.K(V,n,g))}if(y<0&&g>i)throw p.c(E.K(V,n,g));for(;M!==44;){for(Q.push(g),++g,C=-1;g<f;++g)if(M=b.a.H(n,g),M===61)C<0&&(C=g);else if(M===59||M===44)break;if(C>=0)Q.push(C);else{if(I=b.d.gaH(Q),M!==44||g!==I+7||!b.a.U(n,"base64",I+1))throw p.c(E.K("Expecting '='",n,g));break}}return Q.push(g),B=g+1,(Q.length&1)==1?n=b.b5.ec(n,B,f):(G=E.oA(n,B,f,b.x,!0),G!=null&&(n=b.a.az(n,B,f,G))),new E.kL(n,Q,a)},uG:function(){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~!$&'()*+,;=",i=".",a=":",f="/",g="?",y="#",M=E.nO(22,new E.lP,!0,Y.E),C=new E.lO(M),I=new E.lQ,B=new E.lR,G=C.$2(0,225);return I.$3(G,n,1),I.$3(G,i,14),I.$3(G,a,34),I.$3(G,f,3),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(14,225),I.$3(G,n,1),I.$3(G,i,15),I.$3(G,a,34),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(15,225),I.$3(G,n,1),I.$3(G,"%",225),I.$3(G,a,34),I.$3(G,f,9),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(1,225),I.$3(G,n,1),I.$3(G,a,34),I.$3(G,f,10),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(2,235),I.$3(G,n,139),I.$3(G,f,131),I.$3(G,i,146),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(3,235),I.$3(G,n,11),I.$3(G,f,68),I.$3(G,i,18),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(4,229),I.$3(G,n,5),B.$3(G,"AZ",229),I.$3(G,a,102),I.$3(G,"@",68),I.$3(G,"[",232),I.$3(G,f,138),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(5,229),I.$3(G,n,5),B.$3(G,"AZ",229),I.$3(G,a,102),I.$3(G,"@",68),I.$3(G,f,138),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(6,231),B.$3(G,"19",7),I.$3(G,"@",68),I.$3(G,f,138),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(7,231),B.$3(G,"09",7),I.$3(G,"@",68),I.$3(G,f,138),I.$3(G,g,172),I.$3(G,y,205),I.$3(C.$2(8,8),"]",5),G=C.$2(9,235),I.$3(G,n,11),I.$3(G,i,16),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(16,235),I.$3(G,n,11),I.$3(G,i,17),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(17,235),I.$3(G,n,11),I.$3(G,f,9),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(10,235),I.$3(G,n,11),I.$3(G,i,18),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(18,235),I.$3(G,n,11),I.$3(G,i,19),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(19,235),I.$3(G,n,11),I.$3(G,f,234),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(11,235),I.$3(G,n,11),I.$3(G,f,10),I.$3(G,g,172),I.$3(G,y,205),G=C.$2(12,236),I.$3(G,n,12),I.$3(G,g,12),I.$3(G,y,205),G=C.$2(13,237),I.$3(G,n,13),I.$3(G,g,13),B.$3(C.$2(20,245),"az",21),G=C.$2(21,245),B.$3(G,"az",21),B.$3(G,"09",21),I.$3(G,"+-.",21),M},oO:function(n,i,a,f,g){var y,M,C,I,B=q.rp();for(y=i;y<a;++y)M=B[f],C=b.a.H(n,y)^96,I=M[C>95?31:C],f=I&31,g[I>>>5]=y;return f},oQ:function(n,i){return((b.a.H(n,i+4)^58)*3|b.a.H(n,i)^100|b.a.H(n,i+1)^97|b.a.H(n,i+2)^116|b.a.H(n,i+3)^97)>>>0},jn:function(i,a){this.a=i,this.b=a},d5:function(i,a){this.a=i,this.b=a},F:function(){},ej:function(i){this.a=i},f2:function(){},eR:function(){},ak:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},dq:function(i,a,f,g,y,M){var C=this;C.e=i,C.f=a,C.a=f,C.b=g,C.c=y,C.d=M},ew:function(i,a,f,g,y){var M=this;M.f=i,M.a=a,M.b=f,M.c=g,M.d=y},eO:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},f8:function(i){this.a=i},f3:function(i){this.a=i},bz:function(i){this.a=i},ep:function(i){this.a=i},eT:function(){},ds:function(){},er:function(i){this.a=i},dD:function(i){this.a=i},aD:function(i,a,f){this.a=i,this.b=a,this.c=f},i:function(){},dF:function(i,a,f){this.a=i,this.b=a,this.$ti=f},H:function(){},cC:function(i,a,f){this.a=i,this.b=a,this.$ti=f},k:function(){},e:function(){},fr:function(){},a9:function(i){this.a=i},kN:function(i){this.a=i},kO:function(i){this.a=i},kP:function(i,a){this.a=i,this.b=a},e2:function(i,a,f,g,y,M,C){var I=this;I.a=i,I.b=a,I.c=f,I.d=g,I.e=y,I.f=M,I.r=C,I.z=I.x=null},kL:function(i,a,f){this.a=i,this.b=a,this.c=f},lP:function(){},lO:function(i){this.a=i},lQ:function(){},lR:function(){},fp:function(i,a,f,g,y,M,C,I){var B=this;B.a=i,B.b=a,B.c=f,B.d=g,B.e=y,B.f=M,B.r=C,B.x=I,B.y=null},fg:function(i,a,f,g,y,M,C){var I=this;I.a=i,I.b=a,I.c=f,I.d=g,I.e=y,I.f=M,I.r=C,I.z=I.x=null},n2:function(n){if(!Y.I.b(n)&&!Y.U.b(n))throw p.c(E.O("object must be a Map or Iterable"));return E.uF(n)},uF:function(n){var i=new E.lM(new E.dJ(Y.aH)).$1(n);return i.toString,i},lM:function(i){this.a=i},uE:function(n){var i,a=n.$dart_jsFunction;return a!=null?a:(i=function(f,g){return function(){return f(g,Array.prototype.slice.apply(arguments))}}(E.uD,n),i[q.n6()]=n,n.$dart_jsFunction=i,i)},uD:function(n,i){return p.tH(n,i,null)},cp:function(n){return typeof n=="function"?n:E.uE(n)}},me={rM:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue="byteOffset",he=null,Ce="normalized";switch(oe.A(n,b.cu,i),a=oe.P(n,"bufferView",i,!1),a===-1?(f=n.w(ue),f&&i.k(q.d1(),p.a(["bufferView"],Y.M),ue),g=0):g=oe.W(n,ue,i,0,he,-1,0,!1),y=oe.W(n,"componentType",i,-1,b.c3,-1,0,!0),M=oe.W(n,"count",i,-1,he,-1,1,!0),C=oe.J(n,"type",i,he,b.l.gL(),he,!0),I=oe.oV(n,Ce,i),C!=null&&y!==-1?(B=b.l.j(0,C),B!=null?y===5126?(f=Y.V,G=oe.aj(n,"min",i,he,p.a([B],f),1/0,-1/0,!0),V=oe.aj(n,"max",i,he,p.a([B],f),1/0,-1/0,!0)):(G=oe.oW(n,"min",i,y,B),V=oe.oW(n,"max",i,y,B)):(G=he,V=G)):(G=he,V=G),Q=oe.V(n,"sparse",i,me.vf(),!1),I?f=y===5126||y===5125:f=!1,f&&i.p(q.qw(),Ce),(C==="MAT2"||C==="MAT3"||C==="MAT4")&&g!==-1&&(g&3)!=0&&i.p(q.qv(),ue),y){case 5120:case 5121:case 5122:case 5123:case 5125:f=Y.w,f.a(V),f.a(G),oe.J(n,"name",i,he,he,he,!1),f=oe.y(n,b.L,i,he),Z=oe.z(n,i),ne=new me.fb(a,g,y,M,C,I,V,G,Q,Se.b_(y),f,Z,!1),G!=null&&(f=i.O(),Z=E.bt(G.length,0,!1,Y.e),ae=new Array(G.length),ae.fixed$length=Array,i.W(ne,new me.eH(Z,p.a(ae,Y.V),ee.fG(G,!1),f))),V!=null&&(f=i.O(),Z=E.bt(V.length,0,!1,Y.e),ae=new Array(V.length),ae.fixed$length=Array,i.W(ne,new me.eF(Z,p.a(ae,Y.V),ee.fG(V,!1),f)));break;default:f=Y.fy,f.a(V),f.a(G),oe.J(n,"name",i,he,he,he,!1),f=oe.y(n,b.L,i,he),Z=oe.z(n,i),ne=new me.fa(a,g,y,M,C,I,V,G,Q,Se.b_(y),f,Z,!1),i.W(ne,new me.ez(i.O())),G!=null&&(f=i.O(),Z=E.bt(G.length,0,!1,Y.e),ae=new Array(G.length),ae.fixed$length=Array,i.W(ne,new me.eG(Z,p.a(ae,Y.m),ee.fG(G,!1),f))),V!=null&&(f=i.O(),Z=E.bt(V.length,0,!1,Y.e),ae=new Array(V.length),ae.fixed$length=Array,i.W(ne,new me.eE(Z,p.a(ae,Y.m),ee.fG(V,!1),f)));break}return ne},bm:function(n,i,a,f,g,y){var M,C,I="byteOffset";if(n===-1)return!1;if(n%i!=0)if(y!=null)y.k(q.qx(),p.a([n,i],Y.M),I);else return!1;if(M=f.y,M===-1)return!1;if(C=M+n,C%i!=0)if(y!=null)y.E(q.pV(),p.a([C,i],Y.M));else return!1;if(M=f.z,n>M)if(y!=null)y.k(q.nd(),p.a([n,a,g,M],Y.M),I);else return!1;else if(n+a>M)if(y!=null)y.E(q.nd(),p.a([n,a,g,M],Y.M));else return!1;return!0},mz:function(n,i,a,f){var g=i.byteLength,y=Se.b_(n);if(g<a+y*f)return null;switch(n){case 5121:return p.mH(i,a,f);case 5123:return p.nQ(i,a,f);case 5125:return p.nR(i,a,f);default:return null}},nx:function(n,i,a,f){var g=i.byteLength,y=Se.b_(n);if(g<a+y*f)return null;switch(n){case 5126:return p.cW(i,a,f),g=new Float32Array(i,a,f),g;default:return null}},ny:function(n,i,a,f){var g=i.byteLength,y=Se.b_(n);if(g<a+y*f)return null;switch(n){case 5120:return p.cW(i,a,f),g=new Int8Array(i,a,f),g;case 5121:return p.mH(i,a,f);case 5122:return p.cW(i,a,f),g=new Int16Array(i,a,f),g;case 5123:return p.nQ(i,a,f);case 5125:return p.nR(i,a,f);default:return null}},rL:function(n,i){var a,f,g;return oe.A(n,b.cf,i),a=oe.W(n,"count",i,-1,null,-1,1,!0),f=oe.V(n,"indices",i,me.vd(),!0),g=oe.V(n,"values",i,me.ve(),!0),a===-1||f==null||g==null?null:new me.bP(a,f,g,oe.y(n,b.d8,i,null),oe.z(n,i),!1)},rJ:function(n,i){return oe.A(n,b.c8,i),new me.bQ(oe.P(n,"bufferView",i,!0),oe.W(n,"byteOffset",i,0,null,-1,0,!1),oe.W(n,"componentType",i,-1,b.bR,-1,0,!0),oe.y(n,b.d6,i,null),oe.z(n,i),!1)},rK:function(n,i){return oe.A(n,b.cb,i),new me.bR(oe.P(n,"bufferView",i,!0),oe.W(n,"byteOffset",i,0,null,-1,0,!1),oe.y(n,b.d7,i,null),oe.z(n,i),!1)},a0:function(){},fb:function(i,a,f,g,y,M,C,I,B,G,V,Q,Z){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=y,ne.cx=M,ne.cy=C,ne.db=I,ne.dx=B,ne.dy=G,ne.fr=null,ne.fx=0,ne.k2=ne.k1=null,ne.a=V,ne.b=Q,ne.a$=Z},l6:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y},l7:function(i){this.a=i},l8:function(){},l9:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y},l4:function(i){this.a=i},l5:function(i){this.a=i},fa:function(i,a,f,g,y,M,C,I,B,G,V,Q,Z){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=y,ne.cx=M,ne.cy=C,ne.db=I,ne.dx=B,ne.dy=G,ne.fr=null,ne.fx=0,ne.k2=ne.k1=null,ne.a=V,ne.b=Q,ne.a$=Z},l0:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y},l1:function(i){this.a=i},l2:function(){},l3:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y},bP:function(i,a,f,g,y,M){var C=this;C.d=i,C.e=a,C.f=f,C.a=g,C.b=y,C.a$=M},bQ:function(i,a,f,g,y,M){var C=this;C.d=i,C.e=a,C.f=f,C.r=null,C.a=g,C.b=y,C.a$=M},bR:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},ez:function(i){this.a=i},eG:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},eE:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},eH:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},eF:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},oe:function(n,i,a){var f=E.aR(Y.X),g=i==null?0:i;return n!=null&&f.K(0,n),new me.kV(g,f,a)},t4:function(){return new p.a8(b.ak,new me.fS,Y.gw)},t3:function(n){var i,a,f,g,y=Y.i,M=p.a([],y),C=Y._,I=p.a([],Y.d6),B=E.a5(Y.al,Y.f9),G=p.a([],y),V=p.a([],y),Q=p.a([],Y.j),Z=p.a([],Y.a9);return y=p.a(["image/jpeg","image/png"],y),i=Y.aD,a=Y.X,f=Y.cn,g=E.mF(["POSITION",E.b8([b.k],i),"NORMAL",E.b8([b.k],i),"TANGENT",E.b8([b.u],i),"TEXCOORD",E.b8([b.aV,b.aQ,b.aU],i),"COLOR",E.b8([b.k,b.R,b.T,b.u,b.D,b.E],i),"JOINTS",E.b8([b.aY,b.aZ],i),"WEIGHTS",E.b8([b.u,b.D,b.E],i)],a,f),f=E.mF(["POSITION",E.b8([b.k],i),"NORMAL",E.b8([b.k],i),"TANGENT",E.b8([b.k],i)],a,f),i=n==null?me.oe(null,null,null):n,f=new me.j(i,M,E.a5(Y.W,Y.b7),E.a5(C,C),E.a5(Y.f7,Y.an),I,E.a5(Y.u,Y.gz),E.a5(Y.cl,Y.eG),B,G,V,Q,E.aR(Y.af),Z,new E.a9(""),y,g,f),g=Y.em,f.dx=new E.aX(V,g),f.cy=new E.aX(G,g),f.ch=new E.be(B,Y.f8),f.fr=new E.aX(Q,Y.go),f},kV:function(i,a,f){this.a=i,this.b=a,this.c=f},j:function n(i,a,f,g,y,M,C,I,B,n,G,V,Q,Z,ne,ae,ue,he){var Ce=this;Ce.b=i,Ce.c=a,Ce.d=f,Ce.e=g,Ce.f=y,Ce.r=M,Ce.x=C,Ce.y=I,Ce.z=!1,Ce.Q=B,Ce.ch=null,Ce.cx=n,Ce.cy=null,Ce.db=G,Ce.dx=null,Ce.dy=V,Ce.fr=null,Ce.fx=Q,Ce.fy=Z,Ce.go=ne,Ce.id=!1,Ce.k1=ae,Ce.k2=ue,Ce.k3=he},fS:function(){},fR:function(){},fT:function(){},fW:function(i){this.a=i},fX:function(i){this.a=i},fU:function(i){this.a=i},fV:function(){},fY:function(i,a){this.a=i,this.b=a},c4:function(){}},Se={rO:function(n,i){var a,f,g,y,M,C,I,B,G,V=null,Q="channels",Z="samplers";if(oe.A(n,b.cd,i),a=oe.m6(n,Q,i),a!=null){for(f=a.gi(a),g=new Array(f),g.fixed$length=Array,g=p.a(g,Y.fr),y=new oe.L(g,f,Q,Y.eq),f=i.c,f.push(Q),M=0;M<a.gi(a);++M)C=a.j(0,M),f.push(b.c.l(M)),oe.A(C,b.cM,i),g[M]=new Se.b1(oe.P(C,"sampler",i,!0),oe.V(C,"target",i,Se.vh(),!0),oe.y(C,b.da,i,V),oe.z(C,i),!1),f.pop();f.pop()}else y=V;if(I=oe.m6(n,Z,i),I!=null){for(f=I.gi(I),g=new Array(f),g.fixed$length=Array,g=p.a(g,Y.es),B=new oe.L(g,f,Z,Y.az),f=i.c,f.push(Z),M=0;M<I.gi(I);++M)G=I.j(0,M),f.push(b.c.l(M)),oe.A(G,b.cs,i),g[M]=new Se.b2(oe.P(G,"input",i,!0),oe.J(G,"interpolation",i,"LINEAR",b.c0,V,!1),oe.P(G,"output",i,!0),oe.y(G,b.db,i,V),oe.z(G,i),!1),f.pop();f.pop()}else B=V;return oe.J(n,"name",i,V,V,V,!1),new Se.bn(y,B,oe.y(n,b.ar,i,V),oe.z(n,i),!1)},rN:function(n,i){return oe.A(n,b.cy,i),new Se.bT(oe.P(n,"node",i,!1),oe.J(n,"path",i,null,b.an,null,!0),oe.y(n,b.d9,i,null),oe.z(n,i),!1)},bn:function(i,a,f,g,y){var M=this;M.x=i,M.y=a,M.a=f,M.b=g,M.a$=y},fH:function(i,a){this.a=i,this.b=a},fI:function(i,a,f){this.a=i,this.b=a,this.c=f},b1:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},bT:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},b2:function(i,a,f,g,y,M){var C=this;C.d=i,C.e=a,C.f=f,C.x=C.r=null,C.a=g,C.b=y,C.a$=M},ei:function(i){this.a=0,this.b=i},dp:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.e=y.d=0,y.$ti=g},b_:function(n){switch(n){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return-1}},wa:function(n){switch(n){case 5121:case 5123:case 5125:return 0;case 5120:return-128;case 5122:return-32768;case 5124:return-2147483648;default:throw p.c(E.O(null))}},pb:function(n){switch(n){case 5120:return 127;case 5121:return 255;case 5122:return 32767;case 5123:return 65535;case 5124:return 2147483647;case 5125:return 4294967295;default:throw p.c(E.O(null))}}},Te={rP:function(n,i){var a,f,g,y,M=null,C="minVersion";return oe.A(n,b.ca,i),oe.J(n,"copyright",i,M,M,M,!1),a=oe.J(n,"generator",i,M,M,M,!1),f=q.bj(),g=oe.J(n,"version",i,M,M,f,!0),f=oe.J(n,C,i,M,M,f,!1),y=new Te.bo(a,g,f,oe.y(n,b.dc,i,M),oe.z(n,i),!1),a=f!=null&&g!=null,a&&(y.gcM()>y.gb8()?a=!0:a=y.gcM()==y.gb8()&&y.geb()>y.gbO(),a&&i.k(q.qR(),p.a([f,g],Y.M),C)),y},bo:function(i,a,f,g,y,M){var C=this;C.e=i,C.f=a,C.r=f,C.a=g,C.b=y,C.a$=M},te:function(n,i){var a,f,g,y,M,C,I,B,G,V="bufferView",Q=null;if(oe.A(n,b.cc,i),y=oe.P(n,V,i,!1),M=i.k1,C=oe.J(n,"mimeType",i,Q,M,Q,!1),a=oe.J(n,"uri",i,Q,Q,Q,!1),I=y===-1,B=!I,B&&C==null&&i.k(q.d1(),p.a(["mimeType"],Y.M),V),B&&a!=null?I=!0:I=I&&a==null,I&&i.E(q.nl(),p.a(["bufferView","uri"],Y.M)),f=null,a!=null){g=null;try{g=E.oa(a)}catch(Z){if(p.E(Z)instanceof E.aD)f=oe.p_(a,i);else throw Z}g!=null?(i.id&&i.p(q.nc(),"uri"),G=g.cB(),C==null&&(I=b.d.F(M,g.gax()),I||i.k(q.nm(),p.a([g.gax(),M],Y.M),"uri"),C=g.gax())):G=Q}else G=Q;return M=f,oe.J(n,"name",i,Q,Q,Q,!1),new Te.aO(y,C,M,G,oe.y(n,b.au,i,Q),oe.z(n,i),!1)},aO:function(i,a,f,g,y,M,C){var I=this;I.x=i,I.y=a,I.z=f,I.Q=g,I.cx=I.ch=null,I.a=y,I.b=M,I.a$=C},tO:function(n,i){var a=null;return oe.A(n,b.cH,i),oe.W(n,"magFilter",i,-1,b.bU,-1,0,!1),oe.W(n,"minFilter",i,-1,b.bX,-1,0,!1),oe.W(n,"wrapS",i,10497,b.ad,-1,0,!1),oe.W(n,"wrapT",i,10497,b.ad,-1,0,!1),oe.J(n,"name",i,a,a,a,!1),new Te.bv(oe.y(n,b.dv,i,a),oe.z(n,i),!1)},bv:function(i,a,f){this.a=i,this.b=a,this.a$=f},tv:function(){return new Te.cD(new Float32Array(16))},tL:function(){return new Te.eW(new Float32Array(4))},og:function(n){var i=new Float32Array(3);return i[2]=n[2],i[1]=n[1],i[0]=n[0],new Te.cJ(i)},of:function(){return new Te.cJ(new Float32Array(3))},cD:function(i){this.a=i},eW:function(i){this.a=i},cJ:function(i){this.a=i},f9:function(i){this.a=i}},ye={rU:function(n,i){var a,f,g,y,M,C,I,B,G="byteLength",V=null,Q="uri";if(oe.A(n,b.cO,i),y=oe.W(n,G,i,-1,V,-1,1,!0),a=null,M=n.w(Q),M)if(f=oe.J(n,Q,i,V,V,V,!1),f!=null){g=null;try{g=E.oa(f)}catch(Z){if(p.E(Z)instanceof E.aD)a=oe.p_(f,i);else throw Z}g!=null?(i.id&&i.p(q.nc(),Q),g.gax()==="application/octet-stream"||g.gax()==="application/gltf-buffer"?C=g.cB():(i.k(q.qA(),p.a([g.gax()],Y.M),Q),C=V)):C=V,C!=null&&y!==-1&&C.length!==y&&(I=q.pw(),B=C.length,i.k(I,p.a([B,y],Y.M),G),y=B)}else C=V;else C=V;return I=a,oe.J(n,"name",i,V,V,V,!1),new ye.aN(I,y,M,C,oe.y(n,b.dd,i,V),oe.z(n,i),!1)},aN:function(i,a,f,g,y,M,C){var I=this;I.x=i,I.y=a,I.z=f,I.Q=g,I.a=y,I.b=M,I.a$=C},p2:function(){var n=new ye.mo;ee.rB(t.exports,E.cp(new ye.mk(n))),ee.rC(t.exports,E.cp(new ye.ml(n))),ee.rD(t.exports,E.cp(new ye.mm)),ee.rA(t.exports,E.cp(new ye.mn))},fB:function(n,i){return ye.wc(n,i)},wc:function(n,i){var a=0,f=E.ec(Y.t),g,y=2,M,C,I,B,G,V,Q=E.ee(function(Z,ne){for(Z===1&&(M=ne,a=y);;)switch(a){case 0:if(!Y.a.b(n))throw p.c(E.O("data: Argument must be a Uint8Array."));return G=ye.oE(i),C=ye.oI(G),I=null,y=4,a=7,E.cV(Fe.tb(E.mI(p.a([n],Y.d),Y.w),C),Q);case 7:return B=ne,a=8,E.cV(B.bU(),Q);case 8:I=ne,y=2,a=6;break;case 4:throw y=3,V=M,p.E(V)instanceof Fe.db,V;case 3:a=2;break;case 6:g=ye.fz(G,C,I),a=1;break;case 1:return E.e6(g,f);case 2:return E.e5(M,f)}});return E.e7(Q,f)},n5:function(n,i){var a=0,f=E.ec(Y.t),g,y,M,C=E.ee(function(I,B){if(I===1)return E.e5(B,f);for(;;)switch(a){case 0:if(typeof n!="string")throw p.c(E.O("json: Argument must be a string."));y=ye.oE(i),M=ye.oI(y),g=ye.fz(y,M,Fe.ta(n,M)),a=1;break;case 1:return E.e6(g,f)}});return E.e7(C,f)},oE:function(n){var i;if(n!=null?i=typeof n=="number"||p.e9(n)||typeof n=="string"||Y.l.b(n):i=!1,i)throw p.c(E.O("options: Value must be an object."));return Y.bv.a(n)},fz:function(n,i,a){var f=0,g=E.ec(Y.t),y,M,C,I,B,G=E.ee(function(V,Q){if(V===1)return E.e5(Q,g);for(;;)switch(f){case 0:if(B=n==null,B)C=null,I=null;else{if(M=ee.b0(n),C=ye.uM(M.gbd(n)),M.gbE(n)!=null&&!Y.b1.b(M.gbE(n)))throw p.c(E.O("options.externalResourceFunction: Value must be a function."));if(I=M.gbE(n),M.gc_(n)!=null&&!p.e9(M.gc_(n)))throw p.c(E.O("options.writeTimestamp: Value must be a boolean."))}f=(a==null?null:a.b)!=null?3:4;break;case 3:return f=5,E.cV(ye.uL(i,a,I).aJ(),G);case 5:case 4:B=B?null:ee.rw(n),y=new Pe.kW(C,i,a,B==null?!0:B).bc(),f=1;break;case 1:return E.e6(y,g)}});return E.e7(G,g)},uM:function(n){var i,a;if(n!=null)if(typeof n=="string")try{return a=E.ob(n),a}catch(f){throw a=p.E(f),a instanceof E.aD?(i=a,p.c(E.O("options.uri: "+p.b(i)+"."))):f}else throw p.c(E.O("options.uri: Value must be a string."));return null},oI:function(n){var i,a,f,g,y,M,C,I,B;if(n!=null){if(i=ee.b0(n),i.gb9(n)!=null?a=!p.aJ(i.gb9(n))||i.gb9(n)<0:a=!1,a)throw p.c(E.O("options.maxIssues: Value must be a non-negative integer."));if(i.gb6(n)!=null){if(!Y.l.b(i.gb6(n)))throw p.c(E.O("options.ignoredIssues: Value must be an array."));for(f=p.a([],Y.i),g=0;g<ee.X(i.gb6(n));++g)if(y=ee.nt(i.gb6(n),g),typeof y=="string"&&y.length!==0)f.push(y);else throw p.c(E.O("options.ignoredIssues["+g+"]: Value must be a non-empty String."))}else f=null;if(i.gai(n)!=null){if(typeof i.gai(n)=="number"||p.e9(i.gai(n))||typeof i.gai(n)=="string"||Y.l.b(i.gai(n)))throw p.c(E.O("options.severityOverrides: Value must be an object."));for(a=Y.X,M=E.a5(a,Y.dz),a=ee.my(t.Object.keys(i.gai(n)),a),a=new p.a6(a,a.gi(a),p.r(a).h("a6<m.E>"));a.n();)if(C=a.d,I=i.gai(n)[C],p.aJ(I)&&I>=0&&I<=3)M.m(0,C,b.cF[I]);else throw p.c(E.O('options.severityOverrides["'+p.b(C)+'"]: Value must be one of [0, 1, 2, 3].'))}else M=null;B=me.oe(f,i.gb9(n),M)}else B=null;return me.t3(B)},uL:function(n,i,a){var f=new ye.lU(a),g=new E.dD("options.externalResourceFunction is required to load this resource.");return new qe.jw(i.b,n,new ye.lS(n,i,a,f,g),new ye.lT(a,f,g))},bb:function(){},hx:function(){},cP:function(){},mo:function(){},mk:function(i){this.a=i},mj:function(i,a,f){this.a=i,this.b=a,this.c=f},mg:function(i){this.a=i},mh:function(i,a){this.a=i,this.b=a},ml:function(i){this.a=i},mi:function(i,a,f){this.a=i,this.b=a,this.c=f},me:function(i){this.a=i},mf:function(i,a){this.a=i,this.b=a},mm:function(){},mn:function(){},lU:function(i){this.a=i},lV:function(i){this.a=i},lW:function(i){this.a=i},lS:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y},lT:function(i,a,f){this.a=i,this.b=a,this.c=f},eP:function(i){this.a=i}},de={rT:function(n,i){var a,f,g,y,M,C=null,I="byteStride";return oe.A(n,b.c_,i),a=oe.W(n,"byteLength",i,-1,C,-1,1,!0),f=oe.W(n,I,i,-1,C,252,4,!1),g=oe.W(n,"target",i,-1,b.bP,-1,0,!1),f!==-1&&(a!==-1&&f>a&&i.k(q.qB(),p.a([f,a],Y.M),I),f%4!=0&&i.k(q.qu(),p.a([f,4],Y.M),I),g===34963&&i.p(q.mv(),I)),y=oe.P(n,"buffer",i,!0),M=oe.W(n,"byteOffset",i,0,C,-1,0,!1),oe.J(n,"name",i,C,C,C,!1),new de.bp(y,M,a,f,g,oe.y(n,b.as,i,C),oe.z(n,i),!1)},bp:function(i,a,f,g,y,M,C,I){var B=this;B.x=i,B.y=a,B.z=f,B.Q=g,B.ch=y,B.cy=B.cx=null,B.db=-1,B.a=M,B.b=C,B.a$=I},nI:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt,wn,en,En,vn,tn,ge,Le,Ne,ke,be,yt="extensionsRequired",wt="extensionsUsed",It=null,At=new de.i0(i);if(At.$0(),oe.A(n,b.cQ,i),n.w(yt)&&!n.w(wt)&&i.k(q.d1(),p.a(["extensionsUsed"],Y.M),yt),a=oe.oX(n,wt,i),a==null&&(a=p.a([],Y.i)),f=oe.oX(n,yt,i),f==null&&(f=p.a([],Y.i)),i.e4(a,f),g=new de.i1(n,At,i),y=new de.i2(At,n,i).$1$3$req("asset",Te.vj(),!0,Y.gP),(y==null?It:y.f)==null)return It;if(y.gb8()!==2)return M=q.r5(),C=y.gb8(),i.k(M,p.a([C],Y.M),"version"),It;for(y.gbO()>0&&(M=q.r6(),C=y.gbO(),i.k(M,p.a([C],Y.M),"version")),I=g.$1$2("accessors",me.vg(),Y.W),B=g.$1$2("animations",Se.vi(),Y.bj),G=g.$1$2("buffers",ye.vo(),Y.cT),V=g.$1$2("bufferViews",de.vp(),Y.u),Q=g.$1$2("cameras",Re.vs(),Y.h2),Z=g.$1$2("images",Te.vG(),Y.ec),ne=g.$1$2("materials",we.vZ(),Y.fC),ae=g.$1$2("meshes",Ie.w1(),Y.eM),M=Y.L,ue=g.$1$2("nodes",de.w2(),M),he=g.$1$2("samplers",Te.w3(),Y.c2),Ce=g.$1$2("scenes",Me.w4(),Y.J),At.$0(),He=oe.P(n,"scene",i,!1),Oe=Ce.j(0,He),C=He!==-1&&Oe==null,C&&i.k(q.N(),p.a([He],Y.M),"scene"),gt=g.$1$2("skins",Be.w5(),Y.aV),lt=g.$1$2("textures",Ve.w7(),Y.ai),At.$0(),Et=oe.y(n,b.at,i,It),At.$0(),pt=new de.da(a,f,I,B,y,G,V,Q,Z,ne,ae,ue,he,Oe,gt,lt,Et,oe.z(n,i),!1),vt=new de.hZ(i,pt),vt.$2(V,b.as),vt.$2(I,b.L),vt.$2(Z,b.au),vt.$2(lt,b.N),vt.$2(ne,b.h),vt.$2(ae,b.av),vt.$2(ue,b.M),vt.$2(gt,b.az),vt.$2(B,b.ar),vt.$2(Ce,b.ay),Et.a!==0&&(C=i.c,C.push("extensions"),Et.J(0,new de.hX(i,pt)),C.pop()),C=i.c,C.push("nodes"),ue.a9(new de.hY(i,E.aR(M))),C.pop(),wn=[I,G,V,Q,Z,ne,ae,ue,he,gt,lt],en=0;en<11;++en)if(En=wn[en],En.gi(En)!==0){for(C.push(En.c),M=En.b,vn=En.a,tn=vn.length,ge=0;ge<M;++ge)Le=ge>=tn,Le=Le?It:vn[ge],(Le==null?It:Le.a$)===!1&&i.X(q.fD(),ge);C.pop()}if(M=i.y,M.a!==0){for(vn=new p.au(M,p.r(M).h("au<1>")),vn=vn.gC(vn);vn.n();)if(tn=vn.d,tn.gi(tn)!==0)for(Ne=M.j(0,tn),b.d.si(C,0),b.d.K(C,Ne),Le=tn.b,tn=tn.a,ke=tn.length,ge=0;ge<Le;++ge)be=ge>=ke,be=be?It:tn[ge],(be==null?It:be.ge7())===!1&&i.X(q.fD(),ge);b.d.si(C,0)}return pt},da:function(i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He){var Oe=this;Oe.d=i,Oe.e=a,Oe.f=f,Oe.r=g,Oe.x=y,Oe.y=M,Oe.z=C,Oe.Q=I,Oe.ch=B,Oe.cx=G,Oe.cy=V,Oe.db=Q,Oe.dx=Z,Oe.dy=ne,Oe.fx=ae,Oe.fy=ue,Oe.a=he,Oe.b=Ce,Oe.a$=He},i0:function(i){this.a=i},i1:function(i,a,f){this.a=i,this.b=a,this.c=f},i2:function(i,a,f){this.a=i,this.b=a,this.c=f},hZ:function(i,a){this.a=i,this.b=a},i_:function(i,a){this.a=i,this.b=a},hX:function(i,a){this.a=i,this.b=a},hY:function(i,a){this.a=i,this.b=a},hV:function(){},hW:function(){},i3:function(i,a){this.a=i,this.b=a},i4:function(i,a){this.a=i,this.b=a},kQ:function(){},o:function(){},es:function(){},fk:function(){},d2:function(n){return new de.u(n.ch,n.z,n.cx)},bU:function(i){this.a=i},bS:function(i){this.a=i},u:function(i,a,f){this.a=i,this.b=a,this.c=f},tB:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt,wn,en,En,vn,tn,ge=null,Le="matrix",Ne="translation",ke="rotation";return oe.A(n,b.bW,i),n.w(Le)?(a=oe.aj(n,Le,i,ge,b.bI,1/0,-1/0,!1),a!=null?(f=new Float32Array(16),g=new Te.cD(f),y=a[0],M=a[1],C=a[2],I=a[3],B=a[4],G=a[5],V=a[6],Q=a[7],Z=a[8],ne=a[9],ae=a[10],ue=a[11],he=a[12],Ce=a[13],He=a[14],f[15]=a[15],f[14]=He,f[13]=Ce,f[12]=he,f[11]=ue,f[10]=ae,f[9]=ne,f[8]=Z,f[7]=Q,f[6]=V,f[5]=G,f[4]=B,f[3]=I,f[2]=C,f[1]=M,f[0]=y):g=ge):g=ge,n.w(Ne)?(Oe=oe.aj(n,Ne,i,ge,b.m,1/0,-1/0,!1),gt=Oe!=null?Te.og(Oe):ge):gt=ge,n.w(ke)?(lt=oe.aj(n,ke,i,ge,b.J,1,-1,!1),lt!=null?(f=lt[0],y=lt[1],M=lt[2],C=lt[3],I=new Float32Array(4),Et=new Te.eW(I),I[0]=f,I[1]=y,I[2]=M,I[3]=C,f=Math.sqrt(Et.gaI()),Math.abs(1-f)>.00769&&i.p(q.r2(),ke)):Et=ge):Et=ge,n.w("scale")?(pt=oe.aj(n,"scale",i,ge,b.m,1/0,-1/0,!1),vt=pt!=null?Te.og(pt):ge):vt=ge,wn=oe.P(n,"camera",i,!1),en=oe.mY(n,"children",i,!1),En=oe.P(n,"mesh",i,!1),vn=oe.P(n,"skin",i,!1),tn=oe.aj(n,"weights",i,ge,ge,1/0,-1/0,!1),En===-1&&(vn!==-1&&i.k(q.d1(),p.a(["mesh"],Y.M),"skin"),tn!=null&&i.k(q.d1(),p.a(["mesh"],Y.M),"weights")),g!=null&&((gt!=null||Et!=null||vt!=null)&&i.p(q.qV(),Le),g.cK()?i.p(q.qT(),Le):oe.vM(g)||i.p(q.qW(),Le)),oe.J(n,"name",i,ge,ge,ge,!1),new de.ah(wn,en,vn,g,En,gt,Et,vt,tn,E.aR(Y.J),oe.y(n,b.M,i,ge),oe.z(n,i),!1)},ah:function(i,a,f,g,y,M,C,I,B,G,V,Q,Z){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=y,ne.cx=M,ne.cy=C,ne.db=I,ne.dx=B,ne.dy=G,ne.id=ne.go=ne.fy=ne.fx=ne.fr=null,ne.k1=!1,ne.a=V,ne.b=Q,ne.a$=Z},jo:function(){},jp:function(){},jq:function(i,a){this.a=i,this.b=a}},Re={rX:function(n,i){var a,f=null,g="orthographic",y="perspective";switch(oe.A(n,b.cN,i),a=n.w(g)&&n.w(y),a&&i.E(q.nl(),b.al),oe.J(n,"type",i,f,b.al,f,!0)){case"orthographic":oe.V(n,g,i,Re.vq(),!0);break;case"perspective":oe.V(n,y,i,Re.vr(),!0);break}return oe.J(n,"name",i,f,f,f,!1),new Re.bq(oe.y(n,b.dg,i,f),oe.z(n,i),!1)},rV:function(n,i){var a,f,g,y;return oe.A(n,b.cP,i),a=oe.R(n,"xmag",i,0/0,1/0,-1/0,1/0,-1/0,!0),f=oe.R(n,"ymag",i,0/0,1/0,-1/0,1/0,-1/0,!0),g=oe.R(n,"zfar",i,0/0,1/0,0,1/0,-1/0,!0),y=oe.R(n,"znear",i,0/0,1/0,-1/0,1/0,0,!0),!isNaN(g)&&!isNaN(y)&&g<=y&&i.R(q.nn()),(a===0||f===0)&&i.R(q.qC()),new Re.bV(oe.y(n,b.de,i,null),oe.z(n,i),!1)},rW:function(n,i){var a,f,g,y;return oe.A(n,b.c9,i),a=oe.R(n,"yfov",i,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(a)&&a>=3.141592653589793,f&&i.R(q.qD()),g=oe.R(n,"zfar",i,0/0,1/0,0,1/0,-1/0,!1),y=oe.R(n,"znear",i,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(g)&&!isNaN(y)&&g<=y,f&&i.R(q.nn()),oe.R(n,"aspectRatio",i,0/0,1/0,0,1/0,-1/0,!1),new Re.bW(oe.y(n,b.df,i,null),oe.z(n,i),!1)},bq:function(i,a,f){this.a=i,this.b=a,this.a$=f},bV:function(i,a,f){this.a=i,this.b=a,this.a$=f},bW:function(i,a,f){this.a=i,this.b=a,this.a$=f}},we={tu:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z=null,ne="alphaCutoff";for(oe.A(n,b.c2,i),a=oe.V(n,"pbrMetallicRoughness",i,we.w0(),!1),f=oe.V(n,"normalTexture",i,we.p3(),!1),g=oe.V(n,"occlusionTexture",i,we.w_(),!1),y=oe.V(n,"emissiveTexture",i,we.bi(),!1),oe.aj(n,"emissiveFactor",i,b.a8,b.m,1,0,!1),M=oe.J(n,"alphaMode",i,"OPAQUE",b.c1,Z,!1),oe.R(n,ne,i,.5,1/0,-1/0,1/0,0,!1),C=M!=="MASK"&&n.w(ne),C&&i.p(q.qI(),ne),oe.oV(n,"doubleSided",i),I=oe.y(n,b.h,i,Z),oe.J(n,"name",i,Z,Z,Z,!1),B=new we.aS(a,f,g,y,E.a5(Y.X,Y.e),I,oe.z(n,i),!1),C=p.a([],Y.M),C.push(a),C.push(f),C.push(g),C.push(y),G=I.gab(),V=p.r(G),V=new p.a7(ee.a_(G.a),G.b,V.h("@<1>").D(V.Q[1]).h("a7<1,2>"));V.n();)Q=V.a,C.push(Q);return i.aa(B,C),B},tE:function(n,i){var a,f,g,y,M,C,I,B;for(oe.A(n,b.ce,i),oe.aj(n,"baseColorFactor",i,b.aa,b.J,1,0,!1),a=oe.V(n,"baseColorTexture",i,we.bi(),!1),oe.R(n,"metallicFactor",i,1,1/0,-1/0,1,0,!1),oe.R(n,"roughnessFactor",i,1,1/0,-1/0,1,0,!1),f=oe.V(n,"metallicRoughnessTexture",i,we.bi(),!1),g=oe.y(n,b.du,i,null),y=new we.ci(a,f,g,oe.z(n,i),!1),M=p.a([],Y.M),M.push(a),M.push(f),C=g.gab(),I=p.r(C),I=new p.a7(ee.a_(C.a),C.b,I.h("@<1>").D(I.Q[1]).h("a7<1,2>"));I.n();)B=I.a,M.push(B);return i.aa(y,M),y},tD:function(n,i){var a,f,g,y;return oe.A(n,b.cq,i),a=oe.y(n,b.ax,i,b.h),f=oe.P(n,"index",i,!0),g=oe.W(n,"texCoord",i,0,null,-1,0,!1),oe.R(n,"strength",i,1,1/0,-1/0,1,0,!1),y=new we.ch(f,g,a,oe.z(n,i),!1),i.aa(y,a.gab()),y},tC:function(n,i){var a,f,g,y;return oe.A(n,b.cp,i),a=oe.y(n,b.aw,i,b.h),f=oe.P(n,"index",i,!0),g=oe.W(n,"texCoord",i,0,null,-1,0,!1),oe.R(n,"scale",i,1,1/0,-1/0,1/0,-1/0,!1),y=new we.cg(f,g,a,oe.z(n,i),!1),i.aa(y,a.gab()),y},tT:function(n,i){var a,f;return oe.A(n,b.co,i),a=oe.y(n,b.aA,i,b.h),f=new we.bB(oe.P(n,"index",i,!0),oe.W(n,"texCoord",i,0,null,-1,0,!1),a,oe.z(n,i),!1),i.aa(f,a.gab()),f},aS:function(i,a,f,g,y,M,C,I){var B=this;B.x=i,B.y=a,B.z=f,B.Q=g,B.dx=y,B.a=M,B.b=C,B.a$=I},jb:function(i,a){this.a=i,this.b=a},ci:function(i,a,f,g,y){var M=this;M.e=i,M.x=a,M.a=f,M.b=g,M.a$=y},ch:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},cg:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},bB:function(i,a,f,g,y){var M=this;M.d=i,M.e=a,M.f=null,M.a=f,M.b=g,M.a$=y},td:function(n){var i,a,f={};return f.a=f.b=null,i=new E.C(q.x,Y.dD),a=new E.ax(i,Y.eP),f.c=!1,f.a=n.bM(new we.i7(f,a),new we.i8(f),new we.i9(f,a)),i},tc:function(n){var i=new we.i6;return i.$2(n,b.bK)?b.aB:i.$2(n,b.bN)?b.aC:i.$2(n,b.bT)?b.aD:null},dK:function(i){this.b=i},dy:function(i,a){this.a=i,this.b=a},cL:function(i,a){this.a=i,this.b=a},c2:function(i,a){this.a=i,this.b=a},c3:function(i,a,f,g,y,M,C,I,B){var G=this;G.a=i,G.b=a,G.c=f,G.d=g,G.e=y,G.f=M,G.r=C,G.x=I,G.y=B},i7:function(i,a){this.a=i,this.b=a},i9:function(i,a){this.a=i,this.b=a},i8:function(i){this.a=i},i6:function(){},i5:function(){},ij:function(i,a){var f=this;f.f=f.e=f.d=f.c=0,f.r=null,f.a=i,f.b=a},il:function(){},ik:function(){},jr:function(i,a,f,g,y,M){var C=this;C.y=C.x=C.r=C.f=C.e=C.d=C.c=0,C.Q=C.z=!1,C.ch=i,C.cx=a,C.cy=!1,C.db=f,C.dx=g,C.a=y,C.b=M},js:function(i){this.a=i},kZ:function(i,a,f){var g=this;g.c=i,g.d=0,g.a=a,g.b=f},dw:function(){},dv:function(){},aP:function(i){this.a=i}},Ie={tx:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q=null,Z="primitives";if(oe.A(n,b.cE,i),a=oe.aj(n,"weights",i,Q,Q,1/0,-1/0,!1),f=oe.m6(n,Z,i),f!=null){for(g=f.gi(f),y=new Array(g),y.fixed$length=Array,y=p.a(y,Y.bZ),M=new oe.L(y,g,Z,Y.b_),g=i.c,g.push(Z),C=Q,I=-1,B=0;B<f.gi(f);++B)g.push(b.c.l(B)),G=Ie.tw(f.j(0,B),i),C==null?(V=G.x,C=V==null?Q:V.length):(V=G.x,C!==(V==null?Q:V.length)&&i.p(q.qQ(),"targets")),I===-1?I=G.cx:I!==G.cx&&i.p(q.qP(),"attributes"),y[B]=G,g.pop();g.pop(),g=C!=null&&a!=null&&C!==a.length,g&&i.k(q.qJ(),p.a([a.length,C],Y.M),"weights")}else M=Q;return oe.J(n,"name",i,Q,Q,Q,!1),new Ie.aT(M,oe.y(n,b.av,i,Q),oe.z(n,i),!1)},tw:function(n,i){var a,f,g,y,M,C,I="attributes",B={};return oe.A(n,b.ct,i),B.a=B.b=B.c=!1,B.d=0,B.e=-1,B.f=0,B.r=-1,B.x=0,B.y=-1,B.z=0,B.Q=-1,a=oe.W(n,"mode",i,4,null,6,0,!1),f=oe.vB(n,I,i,new Ie.jc(B,i)),f!=null&&(g=i.c,g.push(I),B.c||i.R(q.qM()),!B.b&&B.a&&i.p(q.qO(),"TANGENT"),B.a&&a===0&&i.p(q.qN(),"TANGENT"),y=new Ie.jd(i),B.d=y.$3(B.e,B.d,"COLOR"),B.f=y.$3(B.r,B.f,"JOINTS"),B.x=y.$3(B.y,B.x,"WEIGHTS"),B.z=y.$3(B.Q,B.z,"TEXCOORD"),y=B.f,M=B.x,y!==M&&(i.E(q.qL(),p.a([y,M],Y.M)),B.x=B.f=0),g.pop()),C=oe.vC(n,"targets",i,new Ie.je(i)),new Ie.aH(f,oe.P(n,"indices",i,!1),oe.P(n,"material",i,!1),a,C,B.f,B.x,B.z,E.a5(Y.X,Y.W),oe.y(n,b.dt,i,null),oe.z(n,i),!1)},aT:function(i,a,f,g){var y=this;y.x=i,y.a=a,y.b=f,y.a$=g},jl:function(i,a){this.a=i,this.b=a},aH:function(i,a,f,g,y,M,C,I,B,G,V,Q){var Z=this;Z.d=i,Z.e=a,Z.f=f,Z.r=g,Z.x=y,Z.cx=M,Z.cy=C,Z.db=I,Z.dx=B,Z.fr=Z.dy=-1,Z.go=Z.fy=Z.fx=null,Z.a=G,Z.b=V,Z.a$=Q},jc:function(i,a){this.a=i,this.b=a},jd:function(i){this.a=i},je:function(i){this.a=i},jg:function(i,a,f){this.a=i,this.b=a,this.c=f},jh:function(){},ji:function(i,a,f){this.a=i,this.b=a,this.c=f},jj:function(){},jk:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},jf:function(){},ev:function(i,a,f,g,y,M){var C=this;C.a=i,C.b=a,C.c=f,C.x=g,C.ch=C.Q=0,C.cx=y,C.cy=M},tr:function(n,i){return i.toString,oe.A(n,b.ci,i),new Ie.cc(oe.y(n,b.dr,i,null),oe.z(n,i),!1)},cc:function(i,a,f){this.a=i,this.b=a,this.a$=f}},Me={tP:function(n,i){var a,f=null;return oe.A(n,b.cz,i),a=oe.mY(n,"nodes",i,!1),oe.J(n,"name",i,f,f,f,!1),new Me.bw(a,oe.y(n,b.ay,i,f),oe.z(n,i),!1)},bw:function(i,a,f,g){var y=this;y.x=i,y.y=null,y.a=a,y.b=f,y.a$=g},jz:function(i,a){this.a=i,this.b=a},tn:function(n,i){var a,f,g,y,M,C,I,B,G;for(i.toString,oe.A(n,b.bO,i),oe.R(n,"clearcoatFactor",i,0,1/0,-1/0,1,0,!1),a=oe.V(n,"clearcoatTexture",i,we.bi(),!1),oe.R(n,"clearcoatRoughnessFactor",i,0,1/0,-1/0,1,0,!1),f=oe.V(n,"clearcoatRoughnessTexture",i,we.bi(),!1),g=oe.V(n,"clearcoatNormalTexture",i,we.p3(),!1),y=oe.y(n,b.dn,i,null),M=new Me.c8(a,f,g,y,oe.z(n,i),!1),C=p.a([],Y.M),C.push(a),C.push(f),C.push(g),I=y.gab(),B=p.r(I),B=new p.a7(ee.a_(I.a),I.b,B.h("@<1>").D(B.Q[1]).h("a7<1,2>"));B.n();)G=B.a,C.push(G);return i.aa(M,C),M},c8:function(i,a,f,g,y,M){var C=this;C.e=i,C.r=a,C.x=f,C.a=g,C.b=y,C.a$=M},tq:function(n,i){var a,f,g,y,M,C,I;for(i.toString,oe.A(n,b.bS,i),oe.R(n,"transmissionFactor",i,0,1/0,-1/0,1,0,!1),a=oe.V(n,"transmissionTexture",i,we.bi(),!1),f=oe.y(n,b.dq,i,null),g=new Me.cb(a,f,oe.z(n,i),!1),y=p.a([],Y.M),y.push(a),M=f.gab(),C=p.r(M),C=new p.a7(ee.a_(M.a),M.b,C.h("@<1>").D(C.Q[1]).h("a7<1,2>"));C.n();)I=C.a,y.push(I);return i.aa(g,y),g},cb:function(i,a,f,g){var y=this;y.e=i,y.a=a,y.b=f,y.a$=g}},Be={tQ:function(n,i){var a,f,g,y=null;return oe.A(n,b.c4,i),a=oe.P(n,"inverseBindMatrices",i,!1),f=oe.P(n,"skeleton",i,!1),g=oe.mY(n,"joints",i,!0),oe.J(n,"name",i,y,y,y,!1),new Be.by(a,f,g,E.aR(Y.L),oe.y(n,b.az,i,y),oe.z(n,i),!1)},by:function(i,a,f,g,y,M,C){var I=this;I.x=i,I.y=a,I.z=f,I.cx=I.ch=I.Q=null,I.cy=g,I.a=y,I.b=M,I.a$=C},kB:function(i){this.a=i},eu:function(i){this.a=i},lX:function(n){return n==null||n.ch==null||n.z===-1||n.Q===-1||n.fr==null&&n.dx==null?null:n},wb:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt;for(n.f.a9(new Be.mq(i)),Be.v2(i),a=p.a([],Y.B),f=p.a([],Y.bd),g=i.c,b.d.si(g,0),g.push("meshes"),y=n.cy,M=y.b,C=n.db,I=C.$ti.h("a6<m.E>"),B=n.fx,y=y.a,G=y.length,V=0;V<M;++V)if(Q={},Z=V>=G,ne=Z?null:y[V],(ne==null?null:ne.x)!=null&&(Z=ne.x,!Z.b4(Z,new Be.mr))){for(Q.a=Q.b=-1,ae=new p.a6(C,C.gi(C),I);ae.n();)ue=ae.d,ue.fy==ne?(he=ue.id,he=(he==null?null:he.ch)!=null):he=!1,he&&(he=ue.id,Ce=he.ch.length,He=Q.b,(He===-1||Ce<He)&&(Q.b=Ce,Q.a=B.bK(B,he)));Q.b<1||(g.push(b.c.l(V)),g.push("primitives"),Z.a9(new Be.ms(Q,i,a,f)),g.pop(),g.pop())}if(g.pop(),a.length!==0)for(;Be.v8(a);)for(g=f.length,Oe=0;Oe<f.length;f.length===g||(0,p.cs)(f),++Oe)gt=f[Oe],gt.x||gt.dR(i)},v8:function(n){var i,a;for(i=n.length,a=0;a<n.length;n.length===i||(0,p.cs)(n),++a)n[a].n();return n.fixed$length&&p.a2(E.ab("removeWhere")),b.d.dI(n,new Be.lZ,!0),n.length!==0},v2:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q;for(i=n.d.gdY(),i=i.gC(i),a=n.c;i.n();)if(f=i.gq(),g=Be.lX(f.a),g!=null){for(y=b.l.j(0,g.ch),y==null&&(y=0),M=f.b,b.d.si(a,0),f=g.ac(),f=new E.aB(f.a(),p.r(f).h("aB<1>")),C=ee.M(M),I=0,B=0,G=!1;f.n();G=!0){for(V=f.gq(),Q=0;Q<C.gi(M);++Q)!!C.j(M,Q).Y(n,I,B,V);++B,B===y&&(B=0),++I}if(G)for(Q=0;Q<C.gi(M);++Q)C.j(M,Q).aw(n)}},mq:function(i){this.a=i},mr:function(){},ms:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},lZ:function(){},ey:function(i,a,f,g,y,M){var C=this;C.a=i,C.b=a,C.c=f,C.d=g,C.e=y,C.r=C.f=0,C.x=!1,C.z=C.y=0,C.Q=M}},Ve={tU:function(n,i){var a,f,g=null;return oe.A(n,b.cJ,i),a=oe.P(n,"sampler",i,!1),f=oe.P(n,"source",i,!1),oe.J(n,"name",i,g,g,g,!1),new Ve.bA(a,f,oe.y(n,b.N,i,g),oe.z(n,i),!1)},bA:function(i,a,f,g,y){var M=this;M.x=i,M.y=a,M.Q=M.z=null,M.a=f,M.b=g,M.a$=y},tp:function(n,i){var a,f,g,y,M,C,I,B;for(i.toString,oe.A(n,b.bM,i),oe.aj(n,"sheenColorFactor",i,b.a8,b.m,1,0,!1),a=oe.V(n,"sheenColorTexture",i,we.bi(),!1),oe.R(n,"sheenRoughnessFactor",i,0,1/0,-1/0,1,0,!1),f=oe.V(n,"sheenRoughnessTexture",i,we.bi(),!1),g=oe.y(n,b.dp,i,null),y=new Ve.ca(a,f,g,oe.z(n,i),!1),M=p.a([],Y.M),M.push(a),M.push(f),C=g.gab(),I=p.r(C),I=new p.a7(ee.a_(C.a),C.b,I.h("@<1>").D(I.Q[1]).h("a7<1,2>"));I.n();)B=I.a,M.push(B);return i.aa(y,M),y},ca:function(i,a,f,g,y){var M=this;M.e=i,M.r=a,M.a=f,M.b=g,M.a$=y},uO:function(n){var i="POSITION",a=n.k2;a.j(0,i).K(0,b.cL),a.j(0,"NORMAL").K(0,b.K),a.j(0,"TANGENT").K(0,b.cR),a.j(0,"TEXCOORD").K(0,b.bQ),a=n.k3,a.j(0,i).K(0,b.c5),a.j(0,"NORMAL").K(0,b.K),a.j(0,"TANGENT").K(0,b.K)}},qe={cR:function(i,a){this.a=i,this.b=a},eX:function(i){var a=this;a.a=i,a.f=a.e=a.d=a.c=a.b=null},jw:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},jx:function(i,a,f){this.a=i,this.b=a,this.c=f},jy:function(i,a){this.a=i,this.b=a}},W={D:function(n,i,a){return new W.fZ(a,n,i)},ai:function(n,i,a){return new W.jA(a,n,i)},q:function(n,i,a){return new W.jR(a,n,i)},v:function(n,i,a){return new W.ir(a,n,i)},ar:function(n,i,a){return new W.hy(a,n,i)},v3:function(n){return"'"+p.b(n)+"'"},uZ:function(n){return typeof n=="string"?"'"+n+"'":ee.ag(n)},bx:function(i,a){this.a=i,this.b=a},ic:function(){},fZ:function(i,a,f){this.a=i,this.b=a,this.c=f},h8:function(){},h6:function(){},h5:function(){},hd:function(){},ha:function(){},hb:function(){},h9:function(){},hm:function(){},ho:function(){},hf:function(){},hl:function(){},he:function(){},hk:function(){},hi:function(){},hj:function(){},hh:function(){},hg:function(){},hr:function(){},hq:function(){},hp:function(){},hv:function(){},hu:function(){},h2:function(){},h3:function(){},h4:function(){},ht:function(){},hs:function(){},h7:function(){},hn:function(){},hc:function(){},h1:function(){},h_:function(){},h0:function(){},ia:function(i,a,f){this.a=i,this.b=a,this.c=f},ib:function(){},jA:function(i,a,f){this.a=i,this.b=a,this.c=f},jK:function(){},jL:function(){},jQ:function(){},jO:function(){},jI:function(){},jE:function(){},jM:function(){},jF:function(){},jP:function(){},jB:function(){},jJ:function(){},jD:function(){},jG:function(){},jC:function(){},jN:function(){},jH:function(){},jR:function(i,a,f){this.a=i,this.b=a,this.c=f},kp:function(){},ko:function(){},ke:function(){},kc:function(){},kd:function(){},kb:function(){},k9:function(){},ka:function(){},kk:function(){},kl:function(){},k8:function(){},k7:function(){},k6:function(){},k5:function(){},k3:function(){},k2:function(){},k0:function(){},jV:function(){},kz:function(){},ky:function(){},k_:function(){},jX:function(){},jZ:function(){},jW:function(){},jY:function(){},kx:function(){},kv:function(){},kq:function(){},kf:function(){},kw:function(){},kr:function(){},ks:function(){},kt:function(){},ku:function(){},kj:function(){},ki:function(){},kh:function(){},kg:function(){},kn:function(){},km:function(){},k1:function(){},jT:function(){},jS:function(){},k4:function(){},jU:function(){},ir:function(i,a,f){this.a=i,this.b=a,this.c=f},j0:function(){},j5:function(){},iQ:function(){},iC:function(){},j6:function(){},iy:function(){},ix:function(){},iA:function(){},iB:function(){},iw:function(){},iz:function(){},iv:function(){},iF:function(){},iD:function(){},j4:function(){},iE:function(){},iX:function(){},iI:function(){},iJ:function(){},iG:function(){},iH:function(){},iP:function(){},iO:function(){},iN:function(){},iM:function(){},iR:function(){},iL:function(){},iK:function(){},j3:function(){},iS:function(){},iV:function(){},iU:function(){},iT:function(){},iW:function(){},iY:function(){},iZ:function(){},iu:function(){},it:function(){},is:function(){},j_:function(){},j1:function(){},j2:function(){},hy:function(i,a,f){this.a=i,this.b=a,this.c=f},hE:function(){},hD:function(){},hC:function(){},hM:function(){},hA:function(){},hL:function(){},hH:function(){},hI:function(){},hB:function(){},hz:function(){},hF:function(){},hK:function(){},hJ:function(){},hG:function(){},cA:function(i,a,f,g,y){var M=this;M.a=i,M.b=a,M.c=f,M.d=g,M.e=y}},We={uN:function(n){n.k1.push("image/webp")},t8:function(n,i){return i.toString,oe.A(n,b.cK,i),new We.c0(oe.P(n,"source",i,!1),oe.y(n,b.di,i,null),oe.z(n,i),!1)},c0:function(i,a,f,g){var y=this;y.d=i,y.e=null,y.a=a,y.b=f,y.a$=g},T:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},a4:function(i,a){this.a=i,this.b=a},c1:function(i,a){this.a=i,this.b=a},ce:function(i,a){this.a=i,this.b=a},eY:function(i,a){this.a=i,this.b=a}},De={tk:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q=null,Z="lights",ne="spot";if(i.toString,oe.A(n,b.cx,i),a=oe.m6(n,Z,i),f=Y.dB,g=Y.du,a!=null){for(y=a.gi(a),M=new Array(y),M.fixed$length=Array,f=p.a(M,f),C=new oe.L(f,y,Z,g),g=i.c,g.push(Z),I=0;I<a.gi(a);++I)B=a.j(0,I),g.push(b.c.l(I)),oe.A(B,b.bZ,i),oe.aj(B,"color",i,b.a9,b.m,1,0,!1),oe.R(B,"intensity",i,1,1/0,-1/0,1/0,0,!1),G=oe.J(B,"type",i,Q,b.ch,Q,!0),G==="spot"?oe.V(B,ne,i,De.vO(),!0):(y=B.w(ne),y&&i.p(q.no(),ne)),V=oe.R(B,"range",i,0/0,1/0,0,1/0,-1/0,!1),y=G==="directional"&&!isNaN(V),y&&i.p(q.no(),"range"),oe.J(B,"name",i,Q,Q,Q,!1),f[I]=new De.b7(oe.y(B,b.dl,i,Q),oe.z(B,i),!1),g.pop();g.pop()}else y=new Array(0),y.fixed$length=Array,C=new oe.L(p.a(y,f),0,Z,g);return new De.bs(C,oe.y(n,b.dj,i,Q),oe.z(n,i),!1)},tl:function(n,i){var a,f,g,y="outerConeAngle";return oe.A(n,b.cr,i),a=oe.R(n,"innerConeAngle",i,0,1.5707963267948966,-1/0,1/0,0,!1),f=oe.R(n,y,i,.7853981633974483,1/0,0,1.5707963267948966,-1/0,!1),g=!isNaN(f)&&!isNaN(a)&&f<=a,g&&i.k(q.qH(),p.a([a,f],Y.M),y),new De.c6(oe.y(n,b.dk,i,null),oe.z(n,i),!1)},tm:function(n,i){return i.toString,oe.A(n,b.cw,i),new De.c7(oe.P(n,"light",i,!0),oe.y(n,b.dm,i,null),oe.z(n,i),!1)},bs:function(i,a,f,g){var y=this;y.d=i,y.a=a,y.b=f,y.a$=g},iq:function(i,a){this.a=i,this.b=a},b7:function(i,a,f){this.a=i,this.b=a,this.a$=f},c6:function(i,a,f){this.a=i,this.b=a,this.a$=f},c7:function(i,a,f,g){var y=this;y.d=i,y.e=null,y.a=a,y.b=f,y.a$=g}},Pe={to:function(n,i){var a,f,g,y,M,C,I,B;for(i.toString,oe.A(n,b.cg,i),oe.aj(n,"diffuseFactor",i,b.aa,b.J,1,0,!1),a=oe.V(n,"diffuseTexture",i,we.bi(),!1),oe.aj(n,"specularFactor",i,b.a9,b.m,1,0,!1),oe.R(n,"glossinessFactor",i,1,1/0,-1/0,1,0,!1),f=oe.V(n,"specularGlossinessTexture",i,we.bi(),!1),g=oe.y(n,b.dh,i,null),y=new Pe.c9(a,f,g,oe.z(n,i),!1),M=p.a([],Y.M),M.push(a),M.push(f),C=g.gab(),I=p.r(C),I=new p.a7(ee.a_(C.a),C.b,I.h("@<1>").D(I.Q[1]).h("a7<1,2>"));I.n();)B=I.a,M.push(B);return i.aa(y,M),y},c9:function(i,a,f,g,y){var M=this;M.e=i,M.x=a,M.a=f,M.b=g,M.a$=y},d9:function(i,a,f){var g=this;g.a=i,g.b=null,g.c=a,g.d=null,g.e=f,g.f=null,g.cx=g.ch=g.Q=g.z=g.y=g.x=g.r=0,g.cy=!1,g.dy=g.dx=g.db=null,g.fr=!1,g.fx=null},hP:function(i){this.a=i},hN:function(i){this.a=i},hO:function(i){this.a=i},kW:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},kY:function(){},kX:function(){},n0:function(n){var i=b.d2.e1(n,0,new Pe.m7),a=536870911&i+((67108863&i)<<3);return a^=a>>>11,536870911&a+((16383&a)<<15)},m7:function(){},fy:function(n,i){var a=536870911&n+i;return a=536870911&a+((524287&a)<<10),a^a>>>6},oG:function(n){var i=536870911&n+((67108863&n)<<3);return i^=i>>>11,536870911&i+((16383&i)<<15)}},Ye={ts:function(n,i){return i.toString,oe.A(n,b.cD,i),oe.aj(n,"offset",i,b.bH,b.ab,1/0,-1/0,!1),oe.R(n,"rotation",i,0,1/0,-1/0,1/0,-1/0,!1),oe.aj(n,"scale",i,b.bJ,b.ab,1/0,-1/0,!1),new Ye.cd(oe.W(n,"texCoord",i,-1,null,-1,0,!1),oe.y(n,b.ds,i,null),oe.z(n,i),!1)},cd:function(i,a,f,g){var y=this;y.r=i,y.a=a,y.b=f,y.a$=g}},Fe={tb:function(n,i){var a,f={},g=new E.C(q.x,Y.eD);return f.a=!1,f.b=null,a=E.o6(new Fe.hR(f),new Fe.hS(f),new Fe.hT(f),Y.w),f.b=n.e8(new Fe.hU(f,a,new E.ax(g,Y.a_),i),a.gdS()),g},t9:function(n,i){var a=new Fe.cy(n,new E.ax(new E.C(q.x,Y.f),Y.G));return a.e=i,a},ta:function(n,i){var a,f,g,y=null,M=null;try{M=b.a1.dV(n)}catch(C){if(g=p.E(C),g instanceof E.aD)return a=g,i.av(q.fF(),p.a([a],Y.M),!0),y;throw C}if(Y.t.b(M))try{return f=de.nI(M,i),new Fe.as("model/gltf+json",f,y)}catch(C){if(p.E(C)instanceof me.c4)return y;throw C}else return i.av(q.Z(),p.a([M,"object"],Y.M),!0),y},as:function(i,a,f){this.a=i,this.b=a,this.c=f},hS:function(i){this.a=i},hT:function(i){this.a=i},hR:function(i){this.a=i},hU:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.d=g},cy:function(i,a){var f=this;f.a=i,f.b=null,f.c=a,f.e=f.d=null,f.f=!0},hQ:function(i){this.a=i},db:function(){}},oe={ay:function(n,i,a,f){var g=n.j(0,i);return g==null&&n.w(i)&&f.k(q.Z(),p.a([null,a],Y.M),i),g},P:function(n,i,a,f){var g=oe.ay(n,i,"integer",a);if(p.aJ(g)){if(g>=0)return g;a.p(q.fE(),i)}else g==null?f&&a.E(q.bk(),p.a([i],Y.M)):a.k(q.Z(),p.a([g,"integer"],Y.M),i);return-1},oV:function(n,i,a){var f=oe.ay(n,i,"boolean",a);return f==null?!1:p.e9(f)?f:(a.k(q.Z(),p.a([f,"boolean"],Y.M),i),!1)},W:function(n,i,a,f,g,y,M,C){var I,B=oe.ay(n,i,"integer",a);if(p.aJ(B)){if(g!=null){if(!oe.mW(i,B,g,a,!1))return-1}else if(B<M?I=!0:I=y!==-1&&B>y,I)return a.k(q.mu(),p.a([B],Y.M),i),-1;return B}else if(B==null){if(!C)return f;a.E(q.bk(),p.a([i],Y.M))}else a.k(q.Z(),p.a([B,"integer"],Y.M),i);return-1},R:function(n,i,a,f,g,y,M,C,I){var B=oe.ay(n,i,"number",a);if(typeof B=="number")return B<C||B<=y||B>M||B>=g?(a.k(q.mu(),p.a([B],Y.M),i),0/0):B;if(B==null){if(!I)return f;a.E(q.bk(),p.a([i],Y.M))}else a.k(q.Z(),p.a([B,"number"],Y.M),i);return 0/0},J:function(n,i,a,f,g,y,M){var C,I=oe.ay(n,i,"string",a);if(typeof I=="string"){if(g!=null)oe.mW(i,I,g,a,!1);else if(y==null?C=null:(C=y.b,C=C.test(I)),C===!1)return a.k(q.qs(),p.a([I,y.a],Y.M),i),null;return I}else if(I==null){if(!M)return f;a.E(q.bk(),p.a([i],Y.M))}else a.k(q.Z(),p.a([I,"string"],Y.M),i);return null},p_:function(n,i){var a,f,g;try{return a=E.ob(n),g=a,(g.gcI()||g.gbG()||g.gcH()||g.gbI()||g.gbH())&&i.k(q.r0(),p.a([n],Y.M),"uri"),a}catch(y){if(g=p.E(y),g instanceof E.aD)return f=g,i.k(q.qr(),p.a([n,f],Y.M),"uri"),null;throw y}},n_:function(n,i,a,f){var g=oe.ay(n,i,"object",a);if(Y.t.b(g))return g;if(g==null){if(f)return a.E(q.bk(),p.a([i],Y.M)),null}else if(a.k(q.Z(),p.a([g,"object"],Y.M),i),f)return null;return E.a5(Y.X,Y._)},V:function(n,i,a,f,g){var y,M,C=oe.ay(n,i,"object",a);return Y.t.b(C)?(y=a.c,y.push(i),M=f.$2(C,a),y.pop(),M):(C==null?g&&a.E(q.bk(),p.a([i],Y.M)):a.k(q.Z(),p.a([C,"object"],Y.M),i),null)},mY:function(n,i,a,f){var g,y,M,C,I,B,G=oe.ay(n,i,"array",a);if(Y.o.b(G)){if(g=ee.M(G),g.gu(G))return a.p(q.bO(),i),null;for(y=a.c,y.push(i),M=Y.e,C=E.aR(M),I=0;I<g.gi(G);++I)B=g.j(G,I),p.aJ(B)&&B>=0?C.B(0,B)||a.X(q.nj(),I):(g.m(G,I,-1),a.X(q.fE(),I));return y.pop(),g.ae(G,M)}else G==null?f&&a.E(q.bk(),p.a([i],Y.M)):a.k(q.Z(),p.a([G,"array"],Y.M),i);return null},vB:function(n,i,a,f){var g,y=oe.ay(n,i,"object",a);return Y.t.b(y)?y.gu(y)?(a.p(q.bO(),i),null):(g=a.c,g.push(i),y.J(0,new oe.m3(f,y,a)),g.pop(),y.af(0,Y.X,Y.e)):(g=Y.M,y==null?a.E(q.bk(),p.a([i],g)):a.k(q.Z(),p.a([y,"object"],g),i),null)},vC:function(n,i,a,f){var g,y,M,C,I,B,G,V=oe.ay(n,i,"array",a);if(Y.o.b(V)){if(g=ee.M(V),g.gu(V))return a.p(q.bO(),i),null;for(y=a.c,y.push(i),M=Y.M,C=Y.t,I=!1,B=0;B<g.gi(V);++B)G=g.j(V,B),C.b(G)?G.gu(G)?(a.X(q.bO(),B),I=!0):(y.push(b.c.l(B)),G.J(0,new oe.m4(f,G,a)),y.pop()):(a.E(q.eg(),p.a([G,"object"],M)),I=!0);return y.pop(),I?null:(g=ee.my(V,Y.h),y=p.r(g).h("a8<m.E,h<f*,d*>*>"),E.dh(new p.a8(g,new oe.m5,y),!1,y.h("af.E")))}else V!=null&&a.k(q.Z(),p.a([V,"array"],Y.M),i);return null},aj:function(n,i,a,f,g,y,M,C){var I,B,G,V,Q,Z,ne,ae=null,ue=oe.ay(n,i,"array",a);if(Y.o.b(ue)){if(I=ee.M(ue),I.gu(ue))return a.p(q.bO(),i),ae;if(g!=null&&!oe.mW(i,I.gi(ue),g,a,!0))return ae;for(B=new Array(I.gi(ue)),B.fixed$length=Array,G=p.a(B,Y.m),B=Y.M,V=!1,Q=0;Q<I.gi(ue);++Q)Z=I.j(ue,Q),typeof Z=="number"?(ne=Z<M||Z>y,ne&&(a.k(q.mu(),p.a([Z],B),i),V=!0),C?(ne=q.nr(),ne[0]=Z,G[Q]=ne[0]):G[Q]=Z):(a.k(q.eg(),p.a([Z,"number"],B),i),V=!0);return V?ae:G}else{if(ue==null)return f==null?I=ae:I=ee.eA(f.slice(0),p.U(f).c),I;a.k(q.Z(),p.a([ue,"array"],Y.M),i)}return ae},oW:function(n,i,a,f,g){var y,M,C,I,B,G,V,Q,Z,ne=oe.ay(n,i,"array",a);if(Y.o.b(ne)){if(y=ee.M(ne),y.gi(ne)!==g)return a.k(q.nk(),p.a([y.gi(ne),p.a([g],Y.V)],Y.M),i),null;for(M=Se.wa(f),C=Se.pb(f),I=oe.vv(f,g),B=Y.M,G=!1,V=0;V<y.gi(ne);++V)Q=y.j(ne,V),typeof Q=="number"&&b.bE.cW(Q)===Q?(p.aJ(Q)||a.k(q.qE(),p.a([Q],B),i),Z=Q<M||Q>C,Z&&(a.k(q.qG(),p.a([Q,b.ao.j(0,f)],B),i),G=!0),I[V]=ee.rH(Q)):(a.k(q.eg(),p.a([Q,"integer"],B),i),G=!0);return G?null:I}else ne!=null&&a.k(q.Z(),p.a([ne,"array"],Y.M),i);return null},oX:function(n,i,a){var f,g,y,M,C,I,B,G,V=oe.ay(n,i,"array",a);if(Y.o.b(V)){if(f=ee.M(V),f.gu(V))return a.p(q.bO(),i),null;for(g=a.c,g.push(i),y=Y.X,M=E.aR(y),C=Y.M,I=!1,B=0;B<f.gi(V);++B)G=f.j(V,B),typeof G=="string"?M.B(0,G)||a.X(q.nj(),B):(a.aE(q.eg(),p.a([G,"string"],C),B),I=!0);return g.pop(),I?null:f.ae(V,y)}else V!=null&&a.k(q.Z(),p.a([V,"array"],Y.M),i);return null},m6:function(n,i,a){var f,g,y,M,C,I,B=oe.ay(n,i,"array",a);if(Y.o.b(B)){if(f=ee.M(B),f.gu(B))return a.p(q.bO(),i),null;for(g=f.gC(B),y=Y.t,M=Y.M,C=!1;g.n();)I=g.gq(),y.b(I)||(a.k(q.eg(),p.a([I,"object"],M),i),C=!0);return C?null:f.ae(B,y)}else f=Y.M,B==null?a.E(q.bk(),p.a([i],f)):a.k(q.Z(),p.a([B,"array"],f),i);return null},y:function(n,i,a,f){var g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue="extensions",he=E.a5(Y.X,Y._),Ce=oe.n_(n,ue,a,!1);if(Ce.gu(Ce))return he;for(g=a.c,g.push(ue),y=Ce.gL(),y=y.gC(y),M=Y.ax,C=Y.v,I=f==null,B=a.f,G=a.r;y.n();){if(V=y.gq(),Q=oe.n_(Ce,V,a,!1),Z=a.dx,!Z.F(Z,V)){he.m(0,V,null),Z=a.cy,Z=Z.F(Z,V),Z||a.p(q.qo(),V);continue}if(ne=a.ch.a.j(0,new We.c1(i,V)),ne==null){a.p(q.qp(),V);continue}Ce.gi(Ce)>1&&ne.b&&a.p(q.qS(),V),Q!=null&&(g.push(V),ae=ne.a.$2(Q,a),he.m(0,V,ae),C.b(ae)&&(V=I?i:f,V=B.bS(V,new oe.m2),Z=p.a(g.slice(0),p.U(g).h("p<1>")),Z.fixed$length=Array,ee.mx(V,new We.ce(ae,Z))),M.b(ae)&&(V=p.a(g.slice(0),p.U(g).h("p<1>")),V.fixed$length=Array,G.push(new We.eY(ae,V))),g.pop())}return g.pop(),he},z:function(n,i){var a=n.j(0,"extras"),f=a!=null&&!Y.h.b(a);return f&&i.p(q.r_(),"extras"),a},mW:function(n,i,a,f,g){var y;return ee.nu(a,i)?!0:(y=g?q.nk():q.nm(),f.k(y,p.a([i,a],Y.M),n),!1)},A:function(n,i,a){var f,g,y;for(f=n.gL(),f=f.gC(f);f.n();)g=f.gq(),b.d.F(i,g)?y=!1:(y=b.d.F(b.cl,g),y=!y),y&&a.p(q.qt(),g)},n4:function(n,i,a,f,g,y){var M,C,I,B,G,V,Q=g.c;for(Q.push(f),M=Y.M,C=a.a,I=C.length,B=0;B<n.gi(n);++B)G=n.j(0,B),G!==-1&&(V=G==null||G<0||G>=I?null:C[G],V!=null?(V.a$=!0,i[B]=V,y.$3(V,G,B)):g.aE(q.N(),p.a([G],M),B));Q.pop()},vM:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt,wn,en,En,vn,tn,ge,Le,Ne,ke,be=n.a;return be[3]!==0||be[7]!==0||be[11]!==0||be[15]!==1||n.cE()===0?!1:(i=q.rq(),a=q.rn(),f=q.ro(),g=new Te.cJ(new Float32Array(3)),g.bi(be[0],be[1],be[2]),y=Math.sqrt(g.gaI()),g.bi(be[4],be[5],be[6]),M=Math.sqrt(g.gaI()),g.bi(be[8],be[9],be[10]),C=Math.sqrt(g.gaI()),n.cE()<0&&(y=-y),i=i.a,i[0]=be[12],i[1]=be[13],i[2]=be[14],I=1/y,B=1/M,G=1/C,be=new Float32Array(16),new Te.cD(be).d_(n),be[0]=be[0]*I,be[1]=be[1]*I,be[2]=be[2]*I,be[4]=be[4]*B,be[5]=be[5]*B,be[6]=be[6]*B,be[8]=be[8]*G,be[9]=be[9]*G,be[10]=be[10]*G,V=new Float32Array(9),V[0]=be[0],V[1]=be[1],V[2]=be[2],V[3]=be[4],V[4]=be[5],V[5]=be[6],V[6]=be[8],V[7]=be[9],V[8]=be[10],a.toString,be=V[0],Q=V[4],Z=V[8],ne=0+be+Q+Z,ne>0?(ae=Math.sqrt(ne+1),be=a.a,be[3]=ae*.5,ae=.5/ae,be[0]=(V[5]-V[7])*ae,be[1]=(V[6]-V[2])*ae,be[2]=(V[1]-V[3])*ae):(be<Q?ue=Q<Z?2:1:ue=be<Z?2:0,he=(ue+1)%3,Ce=(ue+2)%3,be=ue*3,Q=he*3,Z=Ce*3,ae=Math.sqrt(V[be+ue]-V[Q+he]-V[Z+Ce]+1),a=a.a,a[ue]=ae*.5,ae=.5/ae,a[3]=(V[Q+Ce]-V[Z+he])*ae,a[he]=(V[be+he]+V[Q+ue])*ae,a[Ce]=(V[be+Ce]+V[Z+ue])*ae,be=a),f=f.a,f[0]=y,f[1]=M,f[2]=C,a=q.rm(),He=be[0],Oe=be[1],gt=be[2],lt=be[3],Et=He+He,pt=Oe+Oe,vt=gt+gt,wn=He*Et,en=He*pt,En=He*vt,vn=Oe*pt,tn=Oe*vt,ge=gt*vt,Le=lt*Et,Ne=lt*pt,ke=lt*vt,be=a.a,be[0]=1-(vn+ge),be[1]=en+ke,be[2]=En-Ne,be[3]=0,be[4]=en-ke,be[5]=1-(wn+ge),be[6]=tn+Le,be[7]=0,be[8]=En+Ne,be[9]=tn-Le,be[10]=1-(wn+vn),be[11]=0,be[12]=i[0],be[13]=i[1],be[14]=i[2],be[15]=1,y=f[0],M=f[1],C=f[2],be[0]=be[0]*y,be[1]=be[1]*y,be[2]=be[2]*y,be[3]=be[3]*y,be[4]=be[4]*M,be[5]=be[5]*M,be[6]=be[6]*M,be[7]=be[7]*M,be[8]=be[8]*C,be[9]=be[9]*C,be[10]=be[10]*C,be[11]=be[11]*C,be[12]=be[12],be[13]=be[13],be[14]=be[14],be[15]=be[15],Math.abs(a.cJ()-n.cJ())<5e-5)},vv:function(n,i){switch(n){case 5120:return new Int8Array(i);case 5121:return new Uint8Array(i);case 5122:return new Int16Array(i);case 5123:return new Uint16Array(i);case 5124:return new Int32Array(i);case 5125:return new Uint32Array(i);default:throw p.c(E.O(null))}},m3:function(i,a,f){this.a=i,this.b=a,this.c=f},m4:function(i,a,f){this.a=i,this.b=a,this.c=f},m5:function(){},m2:function(){},L:function(i,a,f,g){var y=this;y.a=i,y.b=a,y.c=f,y.$ti=g},Y:function(){},f4:function(i,a){this.a=0,this.b=i,this.c=a},f5:function(i,a){this.a=0,this.b=i,this.c=a},en:function(i){this.a=i}},St=[b,p,ee,E,me,Se,Te,ye,de,Re,we,Ie,Me,Be,Ve,qe,W,We,De,Pe,Ye,Fe,oe];pe.setFunctionNamesIfNecessary(St);var q={};p.mD.prototype={},ee.cz.prototype={N:function(n,i){return n===i},gG:function(n){return p.cj(n)},l:function(n){return"Instance of '"+p.b(p.ju(n))+"'"},bb:function(n,i){throw p.c(E.nS(n,i.gcN(),i.gcR(),i.gcO()))}},ee.dd.prototype={l:function(n){return String(n)},gG:function(n){return n?519018:218159},$iQ:1},ee.cB.prototype={N:function(n,i){return i==null},l:function(n){return"null"},gG:function(n){return 0},bb:function(n,i){return this.d1(n,i)},$ik:1},ee.aF.prototype={gG:function(n){return 0},l:function(n){return String(n)},$ibb:1,$icP:1,gep:function(n){return n.then},cV:function(n,i){return n.then(i)},eq:function(n,i,a){return n.then(i,a)},sey:function(n,i){return n.validateBytes=i},seA:function(n,i){return n.validateString=i},seB:function(n,i){return n.version=i},sd5:function(n,i){return n.supportedExtensions=i},gbd:function(n){return n.uri},gbE:function(n){return n.externalResourceFunction},gc_:function(n){return n.writeTimestamp},gb9:function(n){return n.maxIssues},gb6:function(n){return n.ignoredIssues},gai:function(n){return n.severityOverrides}},ee.eU.prototype={},ee.cl.prototype={},ee.aQ.prototype={l:function(n){var i=n[q.n6()];return i==null?this.d2(n):"JavaScript function for "+p.b(ee.ag(i))},$iaE:1},ee.p.prototype={ae:function(n,i){return new p.b3(n,p.U(n).h("@<1>").D(i).h("b3<1,2>"))},B:function(n,i){n.fixed$length&&p.a2(E.ab("add")),n.push(i)},dI:function(n,i,a){var f,g,y,M=[],C=n.length;for(f=0;f<C;++f)if(g=n[f],i.$1(g)||M.push(g),n.length!==C)throw p.c(E.ad(n));if(y=M.length,y!==C)for(this.si(n,y),f=0;f<M.length;++f)n[f]=M[f]},K:function(n,i){var a;for(n.fixed$length&&p.a2(E.ab("addAll")),a=ee.a_(i);a.n();)n.push(a.gq())},ag:function(n,i,a){return new p.a8(n,i,p.U(n).h("@<1>").D(a).h("a8<1,2>"))},cL:function(n,i){var a,f=E.bt(n.length,"",!1,Y.S);for(a=0;a<n.length;++a)f[a]=p.b(n[a]);return f.join(i)},a1:function(n,i){return p.du(n,i,null,p.U(n).c)},b5:function(n,i,a){var f,g,y=n.length;for(f=0;f<y;++f){if(g=n[f],i.$1(g))return g;if(n.length!==y)throw p.c(E.ad(n))}return a.$0()},S:function(n,i){return n[i]},Z:function(n,i,a){if(i<0||i>n.length)throw p.c(E.S(i,0,n.length,"start",null));if(a<i||a>n.length)throw p.c(E.S(a,i,n.length,"end",null));return i===a?p.a([],p.U(n)):p.a(n.slice(i,a),p.U(n))},aM:function(n,i,a){return E.aV(i,a,n.length),p.du(n,i,a,p.U(n).c)},gaH:function(n){var i=n.length;if(i>0)return n[i-1];throw p.c(p.mB())},F:function(n,i){var a;for(a=0;a<n.length;++a)if(ee.aA(n[a],i))return!0;return!1},gu:function(n){return n.length===0},ga3:function(n){return n.length!==0},l:function(n){return E.id(n,"[","]")},aL:function(n,i){var a=ee.eA(n.slice(0),p.U(n).c);return a},bX:function(n){return E.tt(n,p.U(n).c)},gC:function(n){return new ee.aC(n,n.length,p.U(n).h("aC<1>"))},gG:function(n){return p.cj(n)},gi:function(n){return n.length},si:function(n,i){if(n.fixed$length&&p.a2(E.ab("set length")),i<0)throw p.c(E.S(i,0,null,"newLength",null));n.length=i},j:function(n,i){if(i>=n.length||i<0)throw p.c(p.ef(n,i));return n[i]},m:function(n,i,a){if(n.immutable$list&&p.a2(E.ab("indexed set")),i>=n.length||i<0)throw p.c(p.ef(n,i));n[i]=a},$in:1,$ii:1,$il:1},ee.ii.prototype={},ee.aC.prototype={gq:function(){return this.d},n:function(){var n,i=this,a=i.a,f=a.length;if(i.b!==f)throw p.c(p.cs(a));return n=i.c,n>=f?(i.d=null,!1):(i.d=a[n],i.c=n+1,!0)},$iH:1},ee.c5.prototype={cW:function(n){var i;if(n>=-2147483648&&n<=2147483647)return n|0;if(isFinite(n))return i=n<0?Math.ceil(n):Math.floor(n),i+0;throw p.c(E.ab(""+n+".toInt()"))},ap:function(n,i){var a,f,g,y;if(i<2||i>36)throw p.c(E.S(i,2,36,"radix",null));return a=n.toString(i),b.a.A(a,a.length-1)!==41?a:(f=/^([\da-z]+)(?:\.([\da-z]+))?\(e\+(\d+)\)$/.exec(a),f==null&&p.a2(E.ab("Unexpected toString result: "+a)),a=f[1],g=+f[3],y=f[2],y!=null&&(a+=y,g-=y.length),a+b.a.bh("0",g))},l:function(n){return n===0&&1/n<0?"-0.0":""+n},gG:function(n){var i,a,f,g,y=n|0;return n===y?536870911&y:(i=Math.abs(n),a=Math.log(i)/.6931471805599453|0,f=Math.pow(2,a),g=i<1?i/f:f/i,536870911&((g*9007199254740992|0)+(g*3542243181176521|0))*599197+a*1259)},bg:function(n,i){var a=n%i;return a===0?0:a>0?a:i<0?a-i:a+i},aq:function(n,i){return(n|0)===n&&(i>=1||i<-1)?n/i|0:this.cs(n,i)},bA:function(n,i){return(n|0)===n?n/i|0:this.cs(n,i)},cs:function(n,i){var a=n/i;if(a>=-2147483648&&a<=2147483647)return a|0;if(a>0){if(a!==1/0)return Math.floor(a)}else if(a>-1/0)return Math.ceil(a);throw p.c(E.ab("Result of truncating division is "+p.b(a)+": "+p.b(n)+" ~/ "+i))},aA:function(n,i){if(i<0)throw p.c(p.bM(i));return i>31?0:n<<i>>>0},ad:function(n,i){var a;return n>0?a=this.cr(n,i):(a=i>31?31:i,a=n>>a>>>0),a},dL:function(n,i){if(i<0)throw p.c(p.bM(i));return this.cr(n,i)},cr:function(n,i){return i>31?0:n>>>i},$iw:1,$iG:1},ee.de.prototype={$id:1},ee.eB.prototype={},ee.br.prototype={A:function(n,i){if(i<0)throw p.c(p.ef(n,i));return i>=n.length&&p.a2(p.ef(n,i)),n.charCodeAt(i)},H:function(n,i){if(i>=n.length)throw p.c(p.ef(n,i));return n.charCodeAt(i)},ah:function(n,i){if(typeof i!="string")throw p.c(E.nz(i,null,null));return n+i},az:function(n,i,a,f){var g=E.aV(i,a,n.length),y=n.substring(0,i),M=n.substring(g);return y+f+M},U:function(n,i,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=a+i.length,f>n.length?!1:i===n.substring(a,f)},V:function(n,i){return this.U(n,i,0)},t:function(n,i,a){if(a==null&&(a=n.length),i<0||i>a)throw p.c(E.jv(i,null));if(a>n.length)throw p.c(E.jv(a,null));return n.substring(i,a)},bj:function(n,i){return this.t(n,i,null)},ev:function(n){var i,a,f;if(typeof n.trimRight!="undefined"){if(i=n.trimRight(),a=i.length,a===0)return i;f=a-1,this.A(i,f)===133&&(a=ee.nK(i,f))}else a=ee.nK(n,n.length),i=n;return a===i.length?i:a===0?"":i.substring(0,a)},bh:function(n,i){var a,f;if(0>=i)return"";if(i===1||n.length===0)return n;if(i!==i>>>0)throw p.c(b.be);for(a=n,f="";(i&1)==1&&(f=a+f),i=i>>>1,i!==0;)a+=a;return f},am:function(n,i,a){var f=i-n.length;return f<=0?n:this.bh(a,f)+n},b7:function(n,i,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=n.indexOf(i,a),f},bK:function(n,i){return this.b7(n,i,0)},l:function(n){return n},gG:function(n){var i,a,f;for(i=n.length,a=0,f=0;f<i;++f)a=536870911&a+n.charCodeAt(f),a=536870911&a+((524287&a)<<10),a^=a>>6;return a=536870911&a+((67108863&a)<<3),a^=a>>11,536870911&a+((16383&a)<<15)},gi:function(n){return n.length},$if:1},p.bE.prototype={gC:function(n){var i=p.r(this);return new p.d3(ee.a_(this.ga5()),i.h("@<1>").D(i.Q[1]).h("d3<1,2>"))},gi:function(n){return ee.X(this.ga5())},gu:function(n){return ee.nv(this.ga5())},ga3:function(n){return ee.ru(this.ga5())},a1:function(n,i){var a=p.r(this);return p.fP(ee.nw(this.ga5(),i),a.c,a.Q[1])},S:function(n,i){return p.r(this).Q[1].a(ee.eh(this.ga5(),i))},F:function(n,i){return ee.nu(this.ga5(),i)},l:function(n){return ee.ag(this.ga5())}},p.d3.prototype={n:function(){return this.a.n()},gq:function(){return this.$ti.Q[1].a(this.a.gq())},$iH:1},p.bX.prototype={ga5:function(){return this.a}},p.dC.prototype={$in:1},p.dx.prototype={j:function(n,i){return this.$ti.Q[1].a(ee.nt(this.a,i))},m:function(n,i,a){ee.rr(this.a,i,this.$ti.c.a(a))},si:function(n,i){ee.rz(this.a,i)},B:function(n,i){ee.mx(this.a,this.$ti.c.a(i))},aM:function(n,i,a){var f=this.$ti;return p.fP(ee.rx(this.a,i,a),f.c,f.Q[1])},$in:1,$il:1},p.b3.prototype={ae:function(n,i){return new p.b3(this.a,this.$ti.h("@<1>").D(i).h("b3<1,2>"))},ga5:function(){return this.a}},p.bY.prototype={af:function(n,i,a){var f=this.$ti;return new p.bY(this.a,f.h("@<1>").D(f.Q[1]).D(i).D(a).h("bY<1,2,3,4>"))},w:function(n){return this.a.w(n)},j:function(n,i){return this.$ti.h("4?").a(this.a.j(0,i))},m:function(n,i,a){var f=this.$ti;this.a.m(0,f.c.a(i),f.Q[1].a(a))},J:function(n,i){this.a.J(0,new p.fQ(this,i))},gL:function(){var n=this.$ti;return p.fP(this.a.gL(),n.c,n.Q[2])},gi:function(n){var i=this.a;return i.gi(i)},gu:function(n){var i=this.a;return i.gu(i)}},p.fQ.prototype={$2:function(n,i){var a=this.a.$ti;this.b.$2(a.Q[2].a(n),a.Q[3].a(i))},$S:function(){return this.a.$ti.h("k(1,2)")}},p.eD.prototype={l:function(n){var i="LateInitializationError: "+this.a;return i}},p.cu.prototype={gi:function(n){return this.a.length},j:function(n,i){return b.a.A(this.a,i)}},p.n.prototype={},p.af.prototype={gC:function(n){var i=this;return new p.a6(i,i.gi(i),p.r(i).h("a6<af.E>"))},gu:function(n){return this.gi(this)===0},F:function(n,i){var a,f=this,g=f.gi(f);for(a=0;a<g;++a){if(ee.aA(f.S(0,a),i))return!0;if(g!==f.gi(f))throw p.c(E.ad(f))}return!1},ag:function(n,i,a){return new p.a8(this,i,p.r(this).h("@<af.E>").D(a).h("a8<1,2>"))},a1:function(n,i){return p.du(this,i,null,p.r(this).h("af.E"))}},p.dt.prototype={gdj:function(){var n=ee.X(this.a),i=this.c;return i==null||i>n?n:i},gdM:function(){var n=ee.X(this.a),i=this.b;return i>n?n:i},gi:function(n){var i,a=ee.X(this.a),f=this.b;return f>=a?0:(i=this.c,i==null||i>=a?a-f:i-f)},S:function(n,i){var a=this,f=a.gdM()+i;if(i<0||f>=a.gdj())throw p.c(E.ex(i,a,"index",null,null));return ee.eh(a.a,f)},a1:function(n,i){var a,f,g=this;return E.aU(i,"count"),a=g.b+i,f=g.c,f!=null&&a>=f?new p.b6(g.$ti.h("b6<1>")):p.du(g.a,a,f,g.$ti.c)},aL:function(n,i){var a,f,g,y=this,M=y.b,C=y.a,I=ee.M(C),B=I.gi(C),G=y.c;if(G!=null&&G<B&&(B=G),a=B-M,a<=0)return C=ee.ie(0,y.$ti.c),C;for(f=E.bt(a,I.S(C,M),!1,y.$ti.c),g=1;g<a;++g)if(f[g]=I.S(C,M+g),I.gi(C)<B)throw p.c(E.ad(y));return f}},p.a6.prototype={gq:function(){var n=this.d;return n},n:function(){var n,i=this,a=i.a,f=ee.M(a),g=f.gi(a);if(i.b!==g)throw p.c(E.ad(a));return n=i.c,n>=g?(i.d=null,!1):(i.d=f.S(a,n),++i.c,!0)},$iH:1},p.b9.prototype={gC:function(n){var i=p.r(this);return new p.a7(ee.a_(this.a),this.b,i.h("@<1>").D(i.Q[1]).h("a7<1,2>"))},gi:function(n){return ee.X(this.a)},gu:function(n){return ee.nv(this.a)},S:function(n,i){return this.b.$1(ee.eh(this.a,i))}},p.c_.prototype={$in:1},p.a7.prototype={n:function(){var n=this,i=n.b;return i.n()?(n.a=n.c.$1(i.gq()),!0):(n.a=null,!1)},gq:function(){var n=this.a;return n}},p.a8.prototype={gi:function(n){return ee.X(this.a)},S:function(n,i){return this.b.$1(ee.eh(this.a,i))}},p.l_.prototype={gC:function(n){return new p.cm(ee.a_(this.a),this.b,this.$ti.h("cm<1>"))},ag:function(n,i,a){return new p.b9(this,i,this.$ti.h("@<1>").D(a).h("b9<1,2>"))}},p.cm.prototype={n:function(){var n,i;for(n=this.a,i=this.b;n.n();)if(i.$1(n.gq()))return!0;return!1},gq:function(){return this.a.gq()}},p.bc.prototype={a1:function(n,i){return E.aM(i,"count"),E.aU(i,"count"),new p.bc(this.a,this.b+i,p.r(this).h("bc<1>"))},gC:function(n){return new p.dr(ee.a_(this.a),this.b,p.r(this).h("dr<1>"))}},p.cw.prototype={gi:function(n){var i=ee.X(this.a)-this.b;return i>=0?i:0},a1:function(n,i){return E.aM(i,"count"),E.aU(i,"count"),new p.cw(this.a,this.b+i,this.$ti)},$in:1},p.dr.prototype={n:function(){var n,i;for(n=this.a,i=0;i<this.b;++i)n.n();return this.b=0,n.n()},gq:function(){return this.a.gq()}},p.b6.prototype={gC:function(n){return b.Y},gu:function(n){return!0},gi:function(n){return 0},S:function(n,i){throw p.c(E.S(i,0,0,"index",null))},F:function(n,i){return!1},ag:function(n,i,a){return new p.b6(a.h("b6<0>"))},a1:function(n,i){return E.aU(i,"count"),this}},p.d6.prototype={n:function(){return!1},gq:function(){throw p.c(p.mB())},$iH:1},p.d8.prototype={si:function(n,i){throw p.c(E.ab("Cannot change the length of a fixed-length list"))},B:function(n,i){throw p.c(E.ab("Cannot add to a fixed-length list"))}},p.f7.prototype={m:function(n,i,a){throw p.c(E.ab("Cannot modify an unmodifiable list"))},si:function(n,i){throw p.c(E.ab("Cannot change the length of an unmodifiable list"))},B:function(n,i){throw p.c(E.ab("Cannot add to an unmodifiable list"))}},p.cI.prototype={},p.cG.prototype={gG:function(n){var i=this._hashCode;return i!=null||(i=536870911&664597*ee.aL(this.a),this._hashCode=i),i},l:function(n){return'Symbol("'+p.b(this.a)+'")'},N:function(n,i){return i==null?!1:i instanceof p.cG&&this.a==i.a},$icH:1},p.e4.prototype={},p.d4.prototype={},p.cv.prototype={af:function(n,i,a){var f=p.r(this);return E.nP(this,f.c,f.Q[1],i,a)},gu:function(n){return this.gi(this)===0},l:function(n){return E.mG(this)},m:function(n,i,a){p.t2()},$ih:1},p.aq.prototype={gi:function(n){return this.a},w:function(n){return typeof n!="string"||n==="__proto__"?!1:this.b.hasOwnProperty(n)},j:function(n,i){return this.w(i)?this.ce(i):null},ce:function(n){return this.b[n]},J:function(n,i){var a,f,g,y=this.c;for(a=y.length,f=0;f<a;++f)g=y[f],i.$2(g,this.ce(g))},gL:function(){return new p.dz(this,p.r(this).h("dz<1>"))}},p.dz.prototype={gC:function(n){var i=this.a.c;return new ee.aC(i,i.length,p.U(i).h("aC<1>"))},gi:function(n){return this.a.c.length}},p.al.prototype={aD:function(){var n,i=this,a=i.$map;return a==null&&(n=i.$ti,a=new p.aG(n.h("@<1>").D(n.Q[1]).h("aG<1,2>")),p.oU(i.a,a),i.$map=a),a},w:function(n){return this.aD().w(n)},j:function(n,i){return this.aD().j(0,i)},J:function(n,i){this.aD().J(0,i)},gL:function(){var n=this.aD();return new p.au(n,p.r(n).h("au<1>"))},gi:function(n){return this.aD().a}},p.ig.prototype={gcN:function(){var n=this.a;return n},gcR:function(){var n,i,a,f,g=this;if(g.c===1||(n=g.d,i=n.length-g.e.length-g.f,i===0))return b.ai;for(a=[],f=0;f<i;++f)a.push(n[f]);return a.fixed$length=Array,a.immutable$list=Array,a},gcO:function(){var n,i,a,f,g,y,M=this;if(M.c!==0||(n=M.e,i=n.length,a=M.d,f=a.length-i-M.f,i===0))return b.ap;for(g=new p.aG(Y.eo),y=0;y<i;++y)g.m(0,new p.cG(n[y]),a[f+y]);return new p.d4(g,Y.gF)}},p.jt.prototype={$2:function(n,i){var a=this.a;a.b=a.b+"$"+p.b(n),this.b.push(n),this.c.push(i),++a.a},$S:42},p.kJ.prototype={a4:function(n){var i,a,f=this,g=new RegExp(f.a).exec(n);return g==null?null:(i=Object.create(null),a=f.b,a!==-1&&(i.arguments=g[a+1]),a=f.c,a!==-1&&(i.argumentsExpr=g[a+1]),a=f.d,a!==-1&&(i.expr=g[a+1]),a=f.e,a!==-1&&(i.method=g[a+1]),a=f.f,a!==-1&&(i.receiver=g[a+1]),i)}},p.eQ.prototype={l:function(n){var i=this.b;return i==null?"NoSuchMethodError: "+p.b(this.a):"NoSuchMethodError: method not found: '"+i+"' on null"}},p.eC.prototype={l:function(n){var i,a=this,f="NoSuchMethodError: method not found: '",g=a.b;return g==null?"NoSuchMethodError: "+p.b(a.a):(i=a.c,i==null?f+g+"' ("+p.b(a.a)+")":f+g+"' on '"+i+"' ("+p.b(a.a)+")")}},p.f6.prototype={l:function(n){var i=this.a;return i.length===0?"Error":"Error: "+i}},p.eS.prototype={l:function(n){return"Throw of null ('"+(this.a===null?"null":"undefined")+"' from JavaScript)"},$ia3:1},p.d7.prototype={},p.dS.prototype={l:function(n){var i,a=this.b;return a!=null?a:(a=this.a,i=a!==null&&typeof a=="object"?a.stack:null,this.b=i==null?"":i)},$iam:1},p.bZ.prototype={l:function(n){var i=this.constructor,a=i==null?null:i.name;return"Closure '"+p.pd(a==null?"unknown":a)+"'"},$iaE:1,geC:function(){return this},$C:"$1",$R:1,$D:null},p.f1.prototype={},p.f_.prototype={l:function(n){var i=this.$static_name;return i==null?"Closure of unknown static method":"Closure '"+p.pd(i)+"'"}},p.ct.prototype={N:function(n,i){var a=this;return i==null?!1:a===i?!0:i instanceof p.ct?a.a===i.a&&a.b===i.b&&a.c===i.c:!1},gG:function(n){var i,a=this.c;return a==null?i=p.cj(this.a):i=typeof a!="object"?ee.aL(a):p.cj(a),(i^p.cj(this.b))>>>0},l:function(n){var i=this.c;return i==null&&(i=this.a),"Closure '"+p.b(this.d)+"' of "+("Instance of '"+p.b(p.ju(i))+"'")}},p.eZ.prototype={l:function(n){return"RuntimeError: "+this.a}},p.lA.prototype={},p.aG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new p.au(this,p.r(this).h("au<1>"))},gab:function(){var n=p.r(this);return p.ja(new p.au(this,n.h("au<1>")),new p.im(this),n.c,n.Q[1])},w:function(n){var i,a,f=this;return typeof n=="string"?(i=f.b,i==null?!1:f.cc(i,n)):typeof n=="number"&&(n&67108863)===n?(a=f.c,a==null?!1:f.cc(a,n)):f.e5(n)},e5:function(n){var i=this.d;return i==null?!1:this.bL(this.bu(i,ee.aL(n)&67108863),n)>=0},j:function(n,i){var a,f,g,y,M=this,C=null;return typeof i=="string"?(a=M.b,a==null?C:(f=M.aW(a,i),g=f==null?C:f.b,g)):typeof i=="number"&&(i&67108863)===i?(y=M.c,y==null?C:(f=M.aW(y,i),g=f==null?C:f.b,g)):M.e6(i)},e6:function(n){var i,a,f=this.d;return f==null||(i=this.bu(f,ee.aL(n)&67108863),a=this.bL(i,n),a<0)?null:i[a].b},m:function(n,i,a){var f,g,y,M,C,I,B=this;typeof i=="string"?(f=B.b,B.c2(f==null?B.b=B.bx():f,i,a)):typeof i=="number"&&(i&67108863)===i?(g=B.c,B.c2(g==null?B.c=B.bx():g,i,a)):(y=B.d,y==null&&(y=B.d=B.bx()),M=ee.aL(i)&67108863,C=B.bu(y,M),C==null?B.bz(y,M,[B.by(i,a)]):(I=B.bL(C,i),I>=0?C[I].b=a:C.push(B.by(i,a))))},bS:function(n,i){var a;return this.w(n)?this.j(0,n):(a=i.$0(),this.m(0,n,a),a)},J:function(n,i){for(var a=this,f=a.e,g=a.r;f!=null;){if(i.$2(f.a,f.b),g!==a.r)throw p.c(E.ad(a));f=f.c}},c2:function(n,i,a){var f=this.aW(n,i);f==null?this.bz(n,i,this.by(i,a)):f.b=a},by:function(n,i){var a=this,f=new p.j7(n,i);return a.e==null?a.e=a.f=f:a.f=a.f.c=f,++a.a,a.r=a.r+1&67108863,f},bL:function(n,i){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(ee.aA(n[f].a,i))return f;return-1},l:function(n){return E.mG(this)},aW:function(n,i){return n[i]},bu:function(n,i){return n[i]},bz:function(n,i,a){n[i]=a},di:function(n,i){delete n[i]},cc:function(n,i){return this.aW(n,i)!=null},bx:function(){var n="<non-identifier-key>",i=Object.create(null);return this.bz(i,n,i),this.di(i,n),i}},p.im.prototype={$1:function(n){return this.a.j(0,n)},$S:function(){return p.r(this.a).h("2(1)")}},p.j7.prototype={},p.au.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var i=this.a,a=new p.df(i,i.r,this.$ti.h("df<1>"));return a.c=i.e,a},F:function(n,i){return this.a.w(i)}},p.df.prototype={gq:function(){return this.d},n:function(){var n,i=this,a=i.a;if(i.b!==a.r)throw p.c(E.ad(a));return n=i.c,n==null?(i.d=null,!1):(i.d=n.a,i.c=n.c,!0)},$iH:1},p.m9.prototype={$1:function(n){return this.a(n)},$S:33},p.ma.prototype={$2:function(n,i){return this.a(n,i)},$S:62},p.mb.prototype={$1:function(n){return this.a(n)},$S:83},p.ih.prototype={l:function(n){return"RegExp/"+this.a+"/"+this.b.flags},aG:function(n){var i;return typeof n!="string"&&p.a2(p.bM(n)),i=this.b.exec(n),i==null?null:new p.ly(i)}},p.ly.prototype={},p.dm.prototype={dv:function(n,i,a,f){var g=E.S(i,0,a,f,null);throw p.c(g)},c8:function(n,i,a,f){(i>>>0!==i||i>a)&&this.dv(n,i,a,f)}},p.cE.prototype={gi:function(n){return n.length},dJ:function(n,i,a,f,g){var y,M,C=n.length;if(this.c8(n,i,C,"start"),this.c8(n,a,C,"end"),i>a)throw p.c(E.S(i,0,a,null,null));if(y=a-i,g<0)throw p.c(E.O(g));if(M=f.length,M-g<y)throw p.c(E.cF("Not enough elements"));(g!==0||M!==y)&&(f=f.subarray(g,g+y)),n.set(f,i)},$iat:1},p.dl.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},m:function(n,i,a){p.bf(i,n,n.length),n[i]=a},$in:1,$ii:1,$il:1},p.av.prototype={m:function(n,i,a){p.bf(i,n,n.length),n[i]=a},a0:function(n,i,a,f,g){if(Y.eB.b(f)){this.dJ(n,i,a,f,g);return}this.d3(n,i,a,f,g)},d0:function(n,i,a,f){return this.a0(n,i,a,f,0)},$in:1,$ii:1,$il:1},p.dk.prototype={Z:function(n,i,a){return new Float32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eI.prototype={Z:function(n,i,a){return new Float64Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eJ.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int16Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eK.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eL.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int8Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eM.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint16Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eN.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.dn.prototype={gi:function(n){return n.length},j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint8ClampedArray(n.subarray(i,p.bJ(i,a,n.length)))}},p.cf.prototype={gi:function(n){return n.length},j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint8Array(n.subarray(i,p.bJ(i,a,n.length)))},$icf:1,$iaa:1},p.dO.prototype={},p.dP.prototype={},p.dQ.prototype={},p.dR.prototype={},p.aI.prototype={h:function(n){return p.fv(Xe.typeUniverse,this,n)},D:function(n){return p.ui(Xe.typeUniverse,this,n)}},p.fj.prototype={},p.dX.prototype={l:function(n){return p.az(this.a,null)},$ibC:1},p.fi.prototype={l:function(n){return this.a}},p.dY.prototype={},E.lb.prototype={$1:function(n){var i=this.a,a=i.a;i.a=null,a.$0()},$S:13},E.la.prototype={$1:function(n){var i,a;this.a.a=n,i=this.b,a=this.c,i.firstChild?i.removeChild(a):i.appendChild(a)},$S:58},E.lc.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.ld.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.lG.prototype={d6:function(n,i){if(t.setTimeout!=null)t.setTimeout(p.m0(new E.lH(this,i),0),n);else throw p.c(E.ab("`setTimeout()` not found."))}},E.lH.prototype={$0:function(){this.b.$0()},$C:"$0",$R:0,$S:1},E.fc.prototype={T:function(n){var i,a=this;a.b?(i=a.a,a.$ti.h("ae<1>").b(n)?i.c6(n):i.ca(n)):a.a.bk(n)},bD:function(n,i){var a;i==null&&(i=E.el(n)),a=this.a,this.b?a.aB(n,i):a.aT(n,i)}},E.lK.prototype={$1:function(n){return this.a.$2(0,n)},$S:116},E.lL.prototype={$2:function(n,i){this.a.$2(1,new p.d7(n,i))},$C:"$2",$R:2,$S:31},E.m_.prototype={$2:function(n,i){this.a(n,i)},$S:32},E.cO.prototype={l:function(n){return"IterationMarker("+this.b+", "+p.b(this.a)+")"}},E.aB.prototype={gq:function(){var n=this.c;return n==null?this.b:n.gq()},n:function(){for(var n,i,a,f,g,y=this;;){if(n=y.c,n!=null){if(n.n())return!0;y.c=null}if(i=function(M,C,I){for(var B,G=C;;)try{return M(G,B)}catch(V){B=V,G=I}}(y.a,0,1),i instanceof E.cO)if(a=i.b,a===2){if(f=y.d,f==null||f.length===0)return y.b=null,!1;y.a=f.pop();continue}else{if(n=i.a,a===3)throw n;if(g=ee.a_(n),g instanceof E.aB){n=y.d,n==null&&(n=y.d=[]),n.push(y.a),y.a=g.a;continue}else{y.c=g;continue}}else return y.b=i,!0}return!1},$iH:1},E.dW.prototype={gC:function(n){return new E.aB(this.a(),this.$ti.h("aB<1>"))}},E.ff.prototype={bD:function(n,i){var a;if(E.aM(n,"error"),a=this.a,a.a!==0)throw p.c(E.cF("Future already completed"));i==null&&(i=E.el(n)),a.aT(n,i)},M:function(n){return this.bD(n,null)}},E.ax.prototype={T:function(n){var i=this.a;if(i.a!==0)throw p.c(E.cF("Future already completed"));i.bk(n)},b3:function(){return this.T(null)}},E.cM.prototype={ea:function(n){return(this.c&15)!=6?!0:this.b.b.bW(this.d,n.a)},e2:function(n){var i=this.e,a=this.b.b;return Y.Q.b(i)?a.ej(i,n.a,n.b):a.bW(i,n.a)}},E.C.prototype={ao:function(n,i,a,f){var g,y=q.x;return y!==b.f&&(a=a!=null?E.v4(a,y):a),g=new E.C(q.x,f.h("C<0>")),this.aR(new E.cM(g,a==null?1:3,i,a)),g},cV:function(n,i,a){return this.ao(n,i,null,a)},cu:function(n,i,a){var f=new E.C(q.x,a.h("C<0>"));return this.aR(new E.cM(f,19,n,i)),f},be:function(n){var i=new E.C(q.x,this.$ti);return this.aR(new E.cM(i,8,n,null)),i},dK:function(n){this.a=4,this.c=n},aR:function(n){var i,a=this,f=a.a;if(f<=1)n.a=a.c,a.c=n;else{if(f===2){if(f=a.c,i=f.a,i<4){f.aR(n);return}a.a=i,a.c=f.c}E.cZ(null,null,a.b,new E.li(a,n))}},co:function(n){var i,a,f,g,y,M,C=this,I={};if(I.a=n,n!=null)if(i=C.a,i<=1){if(a=C.c,C.c=n,a!=null){for(f=n.a,g=n;f!=null;g=f,f=y)y=f.a;g.a=a}}else{if(i===2){if(i=C.c,M=i.a,M<4){i.co(n);return}C.a=M,C.c=i.c}I.a=C.b2(n),E.cZ(null,null,C.b,new E.lq(I,C))}},b1:function(){var n=this.c;return this.c=null,this.b2(n)},b2:function(n){var i,a,f;for(i=n,a=null;i!=null;a=i,i=f)f=i.a,i.a=a;return a},c9:function(n){var i,a=this,f=a.$ti;f.h("ae<1>").b(n)?f.b(n)?E.ll(n,a):E.ol(n,a):(i=a.b1(),a.a=4,a.c=n,E.cN(a,i))},ca:function(n){var i=this,a=i.b1();i.a=4,i.c=n,E.cN(i,a)},aB:function(n,i){var a=this,f=a.b1(),g=E.fK(n,i);a.a=8,a.c=g,E.cN(a,f)},bk:function(n){if(this.$ti.h("ae<1>").b(n)){this.c6(n);return}this.d9(n)},d9:function(n){this.a=1,E.cZ(null,null,this.b,new E.lk(this,n))},c6:function(n){var i=this;if(i.$ti.b(n)){n.a===8?(i.a=1,E.cZ(null,null,i.b,new E.lp(i,n))):E.ll(n,i);return}E.ol(n,i)},aT:function(n,i){this.a=1,E.cZ(null,null,this.b,new E.lj(this,n,i))},$iae:1},E.li.prototype={$0:function(){E.cN(this.a,this.b)},$S:2},E.lq.prototype={$0:function(){E.cN(this.b,this.a.a)},$S:2},E.lm.prototype={$1:function(n){var i=this.a;i.a=0,i.c9(n)},$S:13},E.ln.prototype={$2:function(n,i){this.a.aB(n,i)},$C:"$2",$R:2,$S:41},E.lo.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lk.prototype={$0:function(){this.a.ca(this.b)},$S:2},E.lp.prototype={$0:function(){E.ll(this.b,this.a)},$S:2},E.lj.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lt.prototype={$0:function(){var n,i,a,f,g,y=this,M=null;try{a=y.a.a,M=a.b.b.cS(a.d)}catch(C){n=p.E(C),i=p.aK(C),y.c?(a=y.b.a.c.a,f=n,f=a==null?f==null:a===f,a=f):a=!1,f=y.a,a?f.c=y.b.a.c:f.c=E.fK(n,i),f.b=!0;return}if(M instanceof E.C&&M.a>=4){M.a===8&&(a=y.a,a.c=M.c,a.b=!0);return}Y.c.b(M)&&(g=y.b.a,a=y.a,a.c=ee.rF(M,new E.lu(g),Y.z),a.b=!1)},$S:1},E.lu.prototype={$1:function(n){return this.a},$S:47},E.ls.prototype={$0:function(){var n,i,a,f;try{a=this.a,f=a.a,a.c=f.b.b.bW(f.d,this.b)}catch(g){n=p.E(g),i=p.aK(g),a=this.a,a.c=E.fK(n,i),a.b=!0}},$S:1},E.lr.prototype={$0:function(){var n,i,a,f,g,y,M,C=this;try{n=C.a.a.c,f=C.b,f.a.ea(n)&&f.a.e!=null&&(f.c=f.a.e2(n),f.b=!1)}catch(I){i=p.E(I),a=p.aK(I),f=C.a.a.c,g=f.a,y=i,M=C.b,(g==null?y==null:g===y)?M.c=f:M.c=E.fK(i,a),M.b=!0}},$S:1},E.fd.prototype={},E.aW.prototype={gi:function(n){var i={},a=new E.C(q.x,Y.fJ);return i.a=0,this.bN(new E.kF(i,this),!0,new E.kG(i,a),a.gde()),a}},E.kC.prototype={$1:function(n){var i=this.a;i.aS(n),i.aU()},$S:function(){return this.b.h("k(0)")}},E.kD.prototype={$2:function(n,i){var a=this.a;a.aQ(n,i),a.aU()},$C:"$2",$R:2,$S:48},E.kE.prototype={$0:function(){var n=this.a;return new E.dL(new ee.aC(n,1,p.U(n).h("aC<1>")))},$S:function(){return this.b.h("dL<0>()")}},E.kF.prototype={$1:function(n){++this.a.a},$S:function(){return p.r(this.b).h("k(1)")}},E.kG.prototype={$0:function(){this.b.c9(this.a.a)},$C:"$0",$R:0,$S:2},E.f0.prototype={},E.cS.prototype={gdE:function(){return(this.b&8)==0?this.a:this.a.gbZ()},aV:function(){var n,i=this;return(i.b&8)==0?(n=i.a,n==null?i.a=new E.dU:n):(n=i.a.gbZ(),n)},gau:function(){var n=this.a;return(this.b&8)!=0?n.gbZ():n},bl:function(){return(this.b&4)!=0?new E.bz("Cannot add event after closing"):new E.bz("Cannot add event while adding a stream")},cd:function(){var n=this.c;return n==null&&(n=this.c=(this.b&2)!=0?q.fC():new E.C(q.x,Y.D)),n},B:function(n,i){if(this.b>=4)throw p.c(this.bl());this.aS(i)},a2:function(){var n=this,i=n.b;if((i&4)!=0)return n.cd();if(i>=4)throw p.c(n.bl());return n.aU(),n.cd()},aU:function(){var n=this.b|=4;(n&1)!=0?this.as():(n&3)==0&&this.aV().B(0,b.G)},aS:function(n){var i=this.b;(i&1)!=0?this.ak(n):(i&3)==0&&this.aV().B(0,new E.cn(n))},aQ:function(n,i){var a=this.b;(a&1)!=0?this.at(n,i):(a&3)==0&&this.aV().B(0,new E.dB(n,i))},dN:function(n,i,a,f){var g,y,M,C,I,B,G=this;if((G.b&3)!=0)throw p.c(E.cF("Stream has already been listened to."));return g=q.x,y=f?1:0,M=E.oj(g,i),C=new E.dA(G,n,M,a,g,y),I=G.gdE(),g=G.b|=1,(g&8)!=0?(B=G.a,B.sbZ(C),B.an()):G.a=C,C.cq(I),C.bv(new E.lF(G)),C},dG:function(n){var i,a,f,g,y,M,C=this,I=null;if((C.b&8)!=0&&(I=C.a.I()),C.a=null,C.b=C.b&4294967286|2,i=C.r,i!=null)if(I==null)try{a=i.$0(),Y.bq.b(a)&&(I=a)}catch(B){f=p.E(B),g=p.aK(B),y=new E.C(q.x,Y.D),y.aT(f,g),I=y}else I=I.be(i);return M=new E.lE(C),I!=null?I=I.be(M):M.$0(),I}},E.lF.prototype={$0:function(){E.mV(this.a.d)},$S:2},E.lE.prototype={$0:function(){var n=this.a.c;n!=null&&n.a===0&&n.bk(null)},$S:1},E.fs.prototype={ak:function(n){this.gau().aS(n)},at:function(n,i){this.gau().aQ(n,i)},as:function(){this.gau().dd()}},E.fe.prototype={ak:function(n){this.gau().ar(new E.cn(n))},at:function(n,i){this.gau().ar(new E.dB(n,i))},as:function(){this.gau().ar(b.G)}},E.bD.prototype={},E.cT.prototype={},E.an.prototype={br:function(n,i,a,f){return this.a.dN(n,i,a,f)},gG:function(n){return(p.cj(this.a)^892482866)>>>0},N:function(n,i){return i==null?!1:this===i?!0:i instanceof E.an&&i.a===this.a}},E.dA.prototype={cl:function(){return this.x.dG(this)},b_:function(){var n=this.x;(n.b&8)!=0&&n.a.aK(),E.mV(n.e)},b0:function(){var n=this.x;(n.b&8)!=0&&n.a.an(),E.mV(n.f)}},E.cK.prototype={cq:function(n){var i=this;n!=null&&(i.r=n,n.gu(n)||(i.e=(i.e|64)>>>0,n.aO(i)))},cQ:function(n){var i,a,f=this,g=f.e;(g&8)==0&&(i=(g+128|4)>>>0,f.e=i,g<128&&(a=f.r,a!=null&&a.a===1&&(a.a=3)),(g&4)==0&&(i&32)==0&&f.bv(f.gcm()))},aK:function(){return this.cQ(null)},an:function(){var n=this,i=n.e;(i&8)==0&&i>=128&&(i=n.e=i-128,i<128&&((i&64)!=0?(i=n.r,i=!i.gu(i)):i=!1,i?n.r.aO(n):(i=(n.e&4294967291)>>>0,n.e=i,(i&32)==0&&n.bv(n.gcn()))))},I:function(){var n=this,i=(n.e&4294967279)>>>0;return n.e=i,(i&8)==0&&n.bm(),i=n.f,i==null?q.fC():i},bm:function(){var n,i=this,a=i.e=(i.e|8)>>>0;(a&64)!=0&&(n=i.r,n.a===1&&(n.a=3)),(a&32)==0&&(i.r=null),i.f=i.cl()},aS:function(n){var i=this.e;(i&8)==0&&(i<32?this.ak(n):this.ar(new E.cn(n)))},aQ:function(n,i){var a=this.e;(a&8)==0&&(a<32?this.at(n,i):this.ar(new E.dB(n,i)))},dd:function(){var n=this,i=n.e;(i&8)==0&&(i=(i|2)>>>0,n.e=i,i<32?n.as():n.ar(b.G))},b_:function(){},b0:function(){},cl:function(){return null},ar:function(n){var i,a=this,f=a.r;f==null&&(f=new E.dU),a.r=f,f.B(0,n),i=a.e,(i&64)==0&&(i=(i|64)>>>0,a.e=i,i<128&&f.aO(a))},ak:function(n){var i=this,a=i.e;i.e=(a|32)>>>0,i.d.cU(i.a,n),i.e=(i.e&4294967263)>>>0,i.bn((a&4)!=0)},at:function(n,i){var a,f=this,g=f.e,y=new E.lg(f,n,i);(g&1)!=0?(f.e=(g|16)>>>0,f.bm(),a=f.f,a!=null&&a!==q.fC()?a.be(y):y.$0()):(y.$0(),f.bn((g&4)!=0))},as:function(){var n,i=this,a=new E.lf(i);i.bm(),i.e=(i.e|16)>>>0,n=i.f,n!=null&&n!==q.fC()?n.be(a):a.$0()},bv:function(n){var i=this,a=i.e;i.e=(a|32)>>>0,n.$0(),i.e=(i.e&4294967263)>>>0,i.bn((a&4)!=0)},bn:function(n){var i,a,f=this;for((f.e&64)!=0?(i=f.r,i=i.gu(i)):i=!1,i&&(i=f.e=(f.e&4294967231)>>>0,(i&4)!=0&&i<128?(i=f.r,i=i==null?null:i.gu(i),i=i!==!1):i=!1,i&&(f.e=(f.e&4294967291)>>>0));;n=a){if(i=f.e,(i&8)!=0){f.r=null;return}if(a=(i&4)!=0,n===a)break;f.e=(i^32)>>>0,a?f.b_():f.b0(),f.e=(f.e&4294967263)>>>0}i=f.e,(i&64)!=0&&i<128&&f.r.aO(f)}},E.lg.prototype={$0:function(){var n,i,a=this.a,f=a.e;(f&8)!=0&&(f&16)==0||(a.e=(f|32)>>>0,n=a.b,f=this.b,i=a.d,Y.k.b(n)?i.em(n,f,this.c):i.cU(n,f),a.e=(a.e&4294967263)>>>0)},$S:1},E.lf.prototype={$0:function(){var n=this.a,i=n.e;(i&16)!=0&&(n.e=(i|42)>>>0,n.d.cT(n.c),n.e=(n.e&4294967263)>>>0)},$S:1},E.dT.prototype={bN:function(n,i,a,f){return this.br(n,f,a,i===!0)},bM:function(n,i,a){return this.bN(n,null,i,a)},e8:function(n,i){return this.bN(n,null,i,null)},br:function(n,i,a,f){return E.oi(n,i,a,f)}},E.dE.prototype={br:function(n,i,a,f){var g;if(this.b)throw p.c(E.cF("Stream has already been listened to."));return this.b=!0,g=E.oi(n,i,a,f),g.cq(this.a.$0()),g}},E.dL.prototype={gu:function(n){return this.b==null},cG:function(n){var i,a,f,g=this.b;if(g==null)throw p.c(E.cF("No events pending."));i=!1;try{g.n()?(i=!0,n.ak(g.gq())):(this.b=null,n.as())}catch(y){a=p.E(y),f=p.aK(y),i||(this.b=b.Y),n.at(a,f)}}},E.fh.prototype={gay:function(){return this.a},say:function(n){return this.a=n}},E.cn.prototype={bQ:function(n){n.ak(this.b)}},E.dB.prototype={bQ:function(n){n.at(this.b,this.c)}},E.lh.prototype={bQ:function(n){n.as()},gay:function(){return null},say:function(n){throw p.c(E.cF("No events after a done."))}},E.fn.prototype={aO:function(n){var i=this,a=i.a;if(a!==1){if(a>=1){i.a=1;return}E.p9(new E.lz(i,n)),i.a=1}}},E.lz.prototype={$0:function(){var n=this.a,i=n.a;n.a=0,i!==3&&n.cG(this.b)},$S:2},E.dU.prototype={gu:function(n){return this.c==null},B:function(n,i){var a=this,f=a.c;f==null?a.b=a.c=i:(f.say(i),a.c=i)},cG:function(n){var i=this.b,a=i.gay();this.b=a,a==null&&(this.c=null),i.bQ(n)}},E.fq.prototype={},E.ek.prototype={l:function(n){return p.b(this.a)},$iF:1,gaP:function(){return this.b}},E.lJ.prototype={},E.lY.prototype={$0:function(){var n=p.c(this.a);throw n.stack=ee.ag(this.b),n},$S:2},E.lB.prototype={cT:function(n){var i,a,f=null;try{if(b.f===q.x){n.$0();return}E.oL(f,f,this,n)}catch(g){i=p.E(g),a=p.aK(g),E.cY(f,f,this,i,a)}},eo:function(n,i){var a,f,g=null;try{if(b.f===q.x){n.$1(i);return}E.oN(g,g,this,n,i)}catch(y){a=p.E(y),f=p.aK(y),E.cY(g,g,this,a,f)}},cU:function(n,i){return this.eo(n,i,Y.z)},el:function(n,i,a){var f,g,y=null;try{if(b.f===q.x){n.$2(i,a);return}E.oM(y,y,this,n,i,a)}catch(M){f=p.E(M),g=p.aK(M),E.cY(y,y,this,f,g)}},em:function(n,i,a){return this.el(n,i,a,Y.z,Y.z)},dQ:function(n,i){return new E.lD(this,n,i)},cw:function(n){return new E.lC(this,n)},ei:function(n){return q.x===b.f?n.$0():E.oL(null,null,this,n)},cS:function(n){return this.ei(n,Y.z)},en:function(n,i){return q.x===b.f?n.$1(i):E.oN(null,null,this,n,i)},bW:function(n,i){return this.en(n,i,Y.z,Y.z)},ek:function(n,i,a){return q.x===b.f?n.$2(i,a):E.oM(null,null,this,n,i,a)},ej:function(n,i,a){return this.ek(n,i,a,Y.z,Y.z,Y.z)},ef:function(n){return n},bV:function(n){return this.ef(n,Y.z,Y.z,Y.z)}},E.lD.prototype={$0:function(){return this.a.cS(this.b)},$S:function(){return this.c.h("0()")}},E.lC.prototype={$0:function(){return this.a.cT(this.b)},$S:1},E.dG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new E.dH(this,this.$ti.h("dH<1>"))},w:function(n){var i,a;return typeof n=="string"&&n!=="__proto__"?(i=this.b,i==null?!1:i[n]!=null):typeof n=="number"&&(n&1073741823)===n?(a=this.c,a==null?!1:a[n]!=null):this.dh(n)},dh:function(n){var i=this.d;return i==null?!1:this.aj(this.cf(i,n),n)>=0},j:function(n,i){var a,f,g;return typeof i=="string"&&i!=="__proto__"?(a=this.b,f=a==null?null:E.om(a,i),f):typeof i=="number"&&(i&1073741823)===i?(g=this.c,f=g==null?null:E.om(g,i),f):this.dl(i)},dl:function(n){var i,a,f=this.d;return f==null?null:(i=this.cf(f,n),a=this.aj(i,n),a<0?null:i[a+1])},m:function(n,i,a){var f,g,y,M,C,I=this;typeof i=="string"&&i!=="__proto__"?(f=I.b,I.d8(f==null?I.b=E.on():f,i,a)):(g=I.d,g==null&&(g=I.d=E.on()),y=p.p4(i)&1073741823,M=g[y],M==null?(E.mK(g,y,[i,a]),++I.a,I.e=null):(C=I.aj(M,i),C>=0?M[C+1]=a:(M.push(i,a),++I.a,I.e=null)))},J:function(n,i){var a,f,g,y=this,M=y.cb();for(a=M.length,f=0;f<a;++f)if(g=M[f],i.$2(g,y.j(0,g)),M!==y.e)throw p.c(E.ad(y))},cb:function(){var n,i,a,f,g,y,M,C,I,B,G=this,V=G.e;if(V!=null)return V;if(V=E.bt(G.a,null,!1,Y.z),n=G.b,n!=null)for(i=Object.getOwnPropertyNames(n),a=i.length,f=0,g=0;g<a;++g)V[f]=i[g],++f;else f=0;if(y=G.c,y!=null)for(i=Object.getOwnPropertyNames(y),a=i.length,g=0;g<a;++g)V[f]=+i[g],++f;if(M=G.d,M!=null)for(i=Object.getOwnPropertyNames(M),a=i.length,g=0;g<a;++g)for(C=M[i[g]],I=C.length,B=0;B<I;B+=2)V[f]=C[B],++f;return G.e=V},d8:function(n,i,a){n[i]==null&&(++this.a,this.e=null),E.mK(n,i,a)},cf:function(n,i){return n[p.p4(i)&1073741823]}},E.dJ.prototype={aj:function(n,i){var a,f,g;if(n==null)return-1;for(a=n.length,f=0;f<a;f+=2)if(g=n[f],g==null?i==null:g===i)return f;return-1}},E.dH.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var i=this.a;return new E.dI(i,i.cb(),this.$ti.h("dI<1>"))},F:function(n,i){return this.a.w(i)}},E.dI.prototype={gq:function(){return this.d},n:function(){var n=this,i=n.b,a=n.c,f=n.a;if(i!==f.e)throw p.c(E.ad(f));return a>=i.length?(n.d=null,!1):(n.d=i[a],n.c=a+1,!0)},$iH:1},E.aZ.prototype={gC:function(n){var i=this,a=new E.dM(i,i.r,p.r(i).h("dM<1>"));return a.c=i.e,a},gi:function(n){return this.a},gu:function(n){return this.a===0},ga3:function(n){return this.a!==0},F:function(n,i){var a,f;return typeof i=="string"&&i!=="__proto__"?(a=this.b,a==null?!1:a[i]!=null):typeof i=="number"&&(i&1073741823)===i?(f=this.c,f==null?!1:f[i]!=null):this.dg(i)},dg:function(n){var i=this.d;return i==null?!1:this.aj(i[this.bp(n)],n)>=0},B:function(n,i){var a,f,g=this;return typeof i=="string"&&i!=="__proto__"?(a=g.b,g.c4(a==null?g.b=E.mL():a,i)):typeof i=="number"&&(i&1073741823)===i?(f=g.c,g.c4(f==null?g.c=E.mL():f,i)):g.d7(i)},d7:function(n){var i,a,f=this,g=f.d;if(g==null&&(g=f.d=E.mL()),i=f.bp(n),a=g[i],a==null)g[i]=[f.bo(n)];else{if(f.aj(a,n)>=0)return!1;a.push(f.bo(n))}return!0},eg:function(n,i){var a=this;return typeof i=="string"&&i!=="__proto__"?a.cp(a.b,i):typeof i=="number"&&(i&1073741823)===i?a.cp(a.c,i):a.dH(i)},dH:function(n){var i,a,f,g,y=this,M=y.d;return M==null||(i=y.bp(n),a=M[i],f=y.aj(a,n),f<0)?!1:(g=a.splice(f,1)[0],a.length===0&&delete M[i],y.cv(g),!0)},dk:function(n,i){for(var a,f,g,y,M=this,C=M.e;C!=null;C=f){if(a=C.a,f=C.b,g=M.r,y=n.$1(a),g!==M.r)throw p.c(E.ad(M));y===!1&&M.eg(0,a)}},cz:function(n){var i=this;i.a>0&&(i.b=i.c=i.d=i.e=i.f=null,i.a=0,i.bw())},c4:function(n,i){return n[i]!=null?!1:(n[i]=this.bo(i),!0)},cp:function(n,i){var a;return n==null||(a=n[i],a==null)?!1:(this.cv(a),delete n[i],!0)},bw:function(){this.r=1073741823&this.r+1},bo:function(n){var i,a=this,f=new E.lx(n);return a.e==null?a.e=a.f=f:(i=a.f,i.toString,f.c=i,a.f=i.b=f),++a.a,a.bw(),f},cv:function(n){var i=this,a=n.c,f=n.b;a==null?i.e=f:a.b=f,f==null?i.f=a:f.c=a,--i.a,i.bw()},bp:function(n){return ee.aL(n)&1073741823},aj:function(n,i){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(ee.aA(n[f].a,i))return f;return-1}},E.lx.prototype={},E.dM.prototype={gq:function(){return this.d},n:function(){var n=this,i=n.c,a=n.a;if(n.b!==a.r)throw p.c(E.ad(a));return i==null?(n.d=null,!1):(n.d=i.a,n.c=i.b,!0)},$iH:1},E.aX.prototype={ae:function(n,i){return new E.aX(ee.my(this.a,i),i.h("aX<0>"))},gi:function(n){return ee.X(this.a)},j:function(n,i){return ee.eh(this.a,i)}},E.dc.prototype={},E.dg.prototype={$in:1,$ii:1,$il:1},E.m.prototype={gC:function(n){return new p.a6(n,this.gi(n),p.ac(n).h("a6<m.E>"))},S:function(n,i){return this.j(n,i)},gu:function(n){return this.gi(n)===0},ga3:function(n){return!this.gu(n)},gcF:function(n){if(this.gi(n)===0)throw p.c(p.mB());return this.j(n,0)},F:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(ee.aA(this.j(n,a),i))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},b4:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(!i.$1(this.j(n,a)))return!1;if(f!==this.gi(n))throw p.c(E.ad(n))}return!0},bC:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(i.$1(this.j(n,a)))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},ag:function(n,i,a){return new p.a8(n,i,p.ac(n).h("@<m.E>").D(a).h("a8<1,2>"))},e0:function(n,i,a){var f,g,y=this.gi(n);for(f=i,g=0;g<y;++g)if(f=a.$2(f,this.j(n,g)),y!==this.gi(n))throw p.c(E.ad(n));return f},e1:function(n,i,a){return this.e0(n,i,a,Y.z)},a1:function(n,i){return p.du(n,i,null,p.ac(n).h("m.E"))},aL:function(n,i){var a,f,g,y,M=this;if(M.gu(n))return a=ee.ie(0,p.ac(n).h("m.E")),a;for(f=M.j(n,0),g=E.bt(M.gi(n),f,!1,p.ac(n).h("m.E")),y=1;y<M.gi(n);++y)g[y]=M.j(n,y);return g},bX:function(n){var i,a=E.nN(p.ac(n).h("m.E"));for(i=0;i<this.gi(n);++i)a.B(0,this.j(n,i));return a},B:function(n,i){var a=this.gi(n);this.si(n,a+1),this.m(n,a,i)},ae:function(n,i){return new p.b3(n,p.ac(n).h("@<m.E>").D(i).h("b3<1,2>"))},Z:function(n,i,a){var f=this.gi(n);return E.aV(i,a,f),E.dh(this.aM(n,i,a),!0,p.ac(n).h("m.E"))},aM:function(n,i,a){return E.aV(i,a,this.gi(n)),p.du(n,i,a,p.ac(n).h("m.E"))},dZ:function(n,i,a,f){var g;for(E.aV(i,a,this.gi(n)),g=i;g<a;++g)this.m(n,g,f)},a0:function(n,i,a,f,g){var y,M,C,I,B;if(E.aV(i,a,this.gi(n)),y=a-i,y!==0){if(E.aU(g,"skipCount"),p.ac(n).h("l<m.E>").b(f)?(M=g,C=f):(C=ee.nw(f,g).aL(0,!1),M=0),I=ee.M(C),M+y>I.gi(C))throw p.c(p.tg());if(M<i)for(B=y-1;B>=0;--B)this.m(n,i+B,I.j(C,M+B));else for(B=0;B<y;++B)this.m(n,i+B,I.j(C,M+B))}},bK:function(n,i){var a;for(a=0;a<this.gi(n);++a)if(ee.aA(this.j(n,a),i))return a;return-1},l:function(n){return E.id(n,"[","]")}},E.di.prototype={},E.j8.prototype={$2:function(n,i){var a,f=this.a;f.a||(this.b.a+=", "),f.a=!1,f=this.b,a=f.a+=p.b(n),f.a=a+": ",f.a+=p.b(i)},$S:54},E.I.prototype={af:function(n,i,a){var f=p.r(this);return E.nP(this,f.h("I.K"),f.h("I.V"),i,a)},J:function(n,i){var a,f;for(a=this.gL(),a=a.gC(a);a.n();)f=a.gq(),i.$2(f,this.j(0,f))},gdY:function(){return this.gL().ag(0,new E.j9(this),p.r(this).h("cC<I.K,I.V>"))},w:function(n){return this.gL().F(0,n)},gi:function(n){var i=this.gL();return i.gi(i)},gu:function(n){var i=this.gL();return i.gu(i)},l:function(n){return E.mG(this)},$ih:1},E.j9.prototype={$1:function(n){var i=this.a,a=p.r(i);return new E.cC(n,i.j(0,n),a.h("@<I.K>").D(a.h("I.V")).h("cC<1,2>"))},$S:function(){return p.r(this.a).h("cC<I.K,I.V>(I.K)")}},E.fw.prototype={m:function(n,i,a){throw p.c(E.ab("Cannot modify unmodifiable map"))}},E.dj.prototype={af:function(n,i,a){return this.a.af(0,i,a)},j:function(n,i){return this.a.j(0,i)},m:function(n,i,a){this.a.m(0,i,a)},w:function(n){return this.a.w(n)},J:function(n,i){this.a.J(0,i)},gu:function(n){var i=this.a;return i.gu(i)},gi:function(n){var i=this.a;return i.gi(i)},gL:function(){return this.a.gL()},l:function(n){return this.a.l(0)},$ih:1},E.be.prototype={af:function(n,i,a){return new E.be(this.a.af(0,i,a),i.h("@<0>").D(a).h("be<1,2>"))}},E.cQ.prototype={gu:function(n){return this.gi(this)===0},ga3:function(n){return this.gi(this)!==0},K:function(n,i){var a;for(a=ee.a_(i);a.n();)this.B(0,a.gq())},ag:function(n,i,a){return new p.c_(this,i,p.r(this).h("@<1>").D(a).h("c_<1,2>"))},l:function(n){return E.id(this,"{","}")},b4:function(n,i){var a;for(a=this.gC(this);a.n();)if(!i.$1(a.gq()))return!1;return!0},a1:function(n,i){return p.o5(this,i,p.r(this).c)},b5:function(n,i,a){var f,g;for(f=this.gC(this);f.n();)if(g=f.gq(),i.$1(g))return g;return a.$0()},S:function(n,i){var a,f,g,y="index";for(E.aM(i,y),E.aU(i,y),a=this.gC(this),f=0;a.n();){if(g=a.gq(),i===f)return g;++f}throw p.c(E.ex(i,this,y,null,f))},$in:1,$ii:1},E.e1.prototype={F:function(n,i){return this.a.w(i)},gC:function(n){var i=this.a.gL();return i.gC(i)},gi:function(n){var i=this.a;return i.gi(i)},B:function(n,i){throw p.c(E.ab("Cannot change unmodifiable set"))}},E.dN.prototype={},E.e0.prototype={},E.fl.prototype={j:function(n,i){var a,f=this.b;return f==null?this.c.j(0,i):typeof i!="string"?null:(a=f[i],typeof a=="undefined"?this.dF(i):a)},gi:function(n){return this.b==null?this.c.a:this.aC().length},gu:function(n){return this.gi(this)===0},gL:function(){if(this.b==null){var n=this.c;return new p.au(n,p.r(n).h("au<1>"))}return new E.fm(this)},m:function(n,i,a){var f,g,y=this;y.b==null?y.c.m(0,i,a):y.w(i)?(f=y.b,f[i]=a,g=y.a,(g==null?f!=null:g!==f)&&(g[i]=null)):y.dO().m(0,i,a)},w:function(n){return this.b==null?this.c.w(n):typeof n!="string"?!1:Object.prototype.hasOwnProperty.call(this.a,n)},J:function(n,i){var a,f,g,y,M=this;if(M.b==null)return M.c.J(0,i);for(a=M.aC(),f=0;f<a.length;++f)if(g=a[f],y=M.b[g],typeof y=="undefined"&&(y=E.lN(M.a[g]),M.b[g]=y),i.$2(g,y),a!==M.c)throw p.c(E.ad(M))},aC:function(){var n=this.c;return n==null&&(n=this.c=p.a(Object.keys(this.a),Y.s)),n},dO:function(){var n,i,a,f,g,y=this;if(y.b==null)return y.c;for(n=E.a5(Y.S,Y.z),i=y.aC(),a=0;f=i.length,a<f;++a)g=i[a],n.m(0,g,y.j(0,g));return f===0?i.push(""):b.d.si(i,0),y.a=y.b=null,y.c=n},dF:function(n){var i;return Object.prototype.hasOwnProperty.call(this.a,n)?(i=E.lN(this.a[n]),this.b[n]=i):null}},E.fm.prototype={gi:function(n){var i=this.a;return i.gi(i)},S:function(n,i){var a=this.a;return a.b==null?a.gL().S(0,i):a.aC()[i]},gC:function(n){var i=this.a;return i.b==null?(i=i.gL(),i=i.gC(i)):(i=i.aC(),i=new ee.aC(i,i.length,p.U(i).h("aC<1>"))),i},F:function(n,i){return this.a.w(i)}},E.lw.prototype={a2:function(){var n,i,a,f=this;f.d4(),n=f.a,i=n.a,n.a="",n=f.c,a=n.b,a.push(E.oK((i.charCodeAt(0)==0,i),f.b)),n.a.$1(a)}},E.kT.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!0}),n}catch(i){p.E(i)}return null},$S:4},E.kU.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!1}),n}catch(i){p.E(i)}return null},$S:4},E.fL.prototype={ec:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He="Invalid base64 encoding length ";for(a=E.aV(i,a,n.length),f=q.nq(),g=i,y=g,M=null,C=-1,I=-1,B=0;g<a;g=G){if(G=g+1,V=b.a.H(n,g),V===37?(Q=G+2,Q<=a?(Z=p.p5(n,G),Z===37&&(Z=-1),G=Q):Z=-1):Z=V,0<=Z&&Z<=127){if(ne=f[Z],ne>=0){if(Z=b.a.A("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne),Z===V)continue;V=Z}else{if(ne===-1&&(C<0&&(ae=M==null?null:M.a.length,ae==null&&(ae=0),C=ae+(g-y),I=g),++B,V===61))continue;V=Z}if(ne!==-2){M==null&&(M=new E.a9("")),ae=M,ae.a+=b.a.t(n,y,g),ae.a+=p.ba(V),y=G;continue}}throw p.c(E.K("Invalid base64 data",n,g))}if(M!=null){if(ae=M.a+=b.a.t(n,y,a),ue=ae.length,C>=0)E.nA(n,I,a,C,B,ue);else{if(he=b.c.bg(ue-1,4)+1,he===1)throw p.c(E.K(He,n,a));for(;he<4;)ae+="=",M.a=ae,++he}return ae=M.a,b.a.az(n,i,a,(ae.charCodeAt(0)==0,ae))}if(Ce=a-i,C>=0)E.nA(n,I,a,C,B,Ce);else{if(he=b.c.bg(Ce,4),he===1)throw p.c(E.K(He,n,a));he>1&&(n=b.a.az(n,a,a,he===2?"==":"="))}return n}},E.fN.prototype={},E.fM.prototype={dU:function(n,i){var a,f,g,y=E.aV(i,null,n.length);return i===y?new Uint8Array(0):(a=new E.le,f=a.dW(n,i,y),f.toString,g=a.a,g<-1&&p.a2(E.K("Missing padding character",n,y)),g>0&&p.a2(E.K("Invalid length, must be multiple of four",n,y)),a.a=-1,f)}},E.le.prototype={dW:function(n,i,a){var f,g=this,y=g.a;return y<0?(g.a=E.oh(n,i,a,y),null):i===a?new Uint8Array(0):(f=E.u1(n,i,a,y),g.a=E.u3(n,i,a,f,0,g.a),f)}},E.fO.prototype={},E.em.prototype={},E.fo.prototype={},E.eo.prototype={},E.eq.prototype={},E.hw.prototype={},E.io.prototype={dV:function(n){var i=E.oK(n,this.gcD().a);return i},gcD:function(){return b.bG}},E.ip.prototype={},E.kH.prototype={},E.kI.prototype={},E.dV.prototype={a2:function(){}},E.lI.prototype={a2:function(){this.a.e_(this.c),this.b.a2()},dP:function(n,i,a,f){this.c.a+=this.a.cC(n,i,a,!1)}},E.kR.prototype={},E.kS.prototype={dT:function(n){var i=this.a,a=E.tW(i,n,0,null);return a!=null?a:new E.fx(i).cC(n,0,null,!0)}},E.fx.prototype={cC:function(n,i,a,f){var g,y,M,C,I,B=this,G=E.aV(i,a,ee.X(n));if(i===G)return"";if(Y.E.b(n)?(g=n,y=0):(g=E.uz(n,i,G),G-=i,y=i,i=0),M=B.bq(g,i,G,f),C=B.b,(C&1)!=0)throw I=E.oC(C),B.b=0,p.c(E.K(I,n,y+B.c));return M},bq:function(n,i,a,f){var g,y,M=this;return a-i>1e3?(g=b.c.bA(i+a,2),y=M.bq(n,i,g,!1),(M.b&1)!=0?y:y+M.bq(n,g,a,f)):M.dX(n,i,a,f)},e_:function(n){var i=this.b;if(this.b=0,!(i<=32))if(this.a)n.a+=p.ba(65533);else throw p.c(E.K(E.oC(77),null,null))},dX:function(n,i,a,f){var g,y,M,C,I,B,G,V=this,Q=65533,Z=V.b,ne=V.c,ae=new E.a9(""),ue=i+1,he=n[i];e:for(g=V.a;;){for(;;ue=C){if(y=b.a.H("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHIHHHJEEBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBKCCCCCCCCCCCCDCLONNNMEEEEEEEEEEE",he)&31,ne=Z<=32?he&61694>>>y:(he&63|ne<<6)>>>0,Z=b.a.H(" \x000:XECCCCCN:lDb \x000:XECCCCCNvlDb \x000:XECCCCCN:lDb AAAAA\0\0\0\0\0AAAAA00000AAAAA:::::AAAAAGG000AAAAA00KKKAAAAAG::::AAAAA:IIIIAAAAA000\x800AAAAA\0\0\0\0 AAAAA",Z+y),Z===0){if(ae.a+=p.ba(ne),ue===a)break e;break}else if((Z&1)!=0){if(g)switch(Z){case 69:case 67:ae.a+=p.ba(Q);break;case 65:ae.a+=p.ba(Q),--ue;break;default:M=ae.a+=p.ba(Q),ae.a=M+p.ba(Q);break}else return V.b=Z,V.c=ue-1,"";Z=0}if(ue===a)break e;C=ue+1,he=n[ue]}if(C=ue+1,he=n[ue],he<128){for(;;){if(!(C<a)){I=a;break}if(B=C+1,he=n[C],he>=128){I=B-1,C=B;break}C=B}if(I-ue<20)for(G=ue;G<I;++G)ae.a+=p.ba(n[G]);else ae.a+=E.o7(n,ue,I);if(I===a)break e;ue=C}else ue=C}if(f&&Z>32)if(g)ae.a+=p.ba(Q);else return V.b=77,V.c=a,"";return V.b=Z,V.c=ne,g=ae.a,g.charCodeAt(0)==0,g}},E.jn.prototype={$2:function(n,i){var a,f=this.b,g=this.a;f.a+=g.a,a=f.a+=p.b(n.a),f.a=a+": ",f.a+=E.cx(i),g.a=", "},$S:61},E.d5.prototype={N:function(n,i){return i==null?!1:i instanceof E.d5&&this.a===i.a&&this.b===i.b},gG:function(n){var i=this.a;return(i^b.c.ad(i,30))&1073741823},es:function(){var n,i;return this.b?this:(n=this.a,Math.abs(n)<=864e13?i=!1:i=!0,i&&p.a2(E.O("DateTime is outside valid range: "+n)),E.aM(!0,"isUtc"),new E.d5(n,!0))},l:function(n){var i=this,a=E.nG(p.eV(i)),f=E.b5(p.o_(i)),g=E.b5(p.nW(i)),y=E.b5(p.nX(i)),M=E.b5(p.nZ(i)),C=E.b5(p.o0(i)),I=E.nH(p.nY(i));return i.b?a+"-"+f+"-"+g+" "+y+":"+M+":"+C+"."+I+"Z":a+"-"+f+"-"+g+" "+y+":"+M+":"+C+"."+I},er:function(){var n=this,i=p.eV(n)>=-9999&&p.eV(n)<=9999?E.nG(p.eV(n)):E.t5(p.eV(n)),a=E.b5(p.o_(n)),f=E.b5(p.nW(n)),g=E.b5(p.nX(n)),y=E.b5(p.nZ(n)),M=E.b5(p.o0(n)),C=E.nH(p.nY(n));return n.b?i+"-"+a+"-"+f+"T"+g+":"+y+":"+M+"."+C+"Z":i+"-"+a+"-"+f+"T"+g+":"+y+":"+M+"."+C}},E.F.prototype={gaP:function(){return p.aK(this.$thrownJsError)}},E.ej.prototype={l:function(n){var i=this.a;return i!=null?"Assertion failed: "+E.cx(i):"Assertion failed"}},E.f2.prototype={},E.eR.prototype={l:function(n){return"Throw of null."}},E.ak.prototype={gbt:function(){return"Invalid argument"+(this.a?"":"(s)")},gbs:function(){return""},l:function(n){var i,a,f=this,g=f.c,y=g==null?"":" ("+g+")",M=f.d,C=M==null?"":": "+p.b(M),I=f.gbt()+y+C;return f.a?(i=f.gbs(),a=E.cx(f.b),I+i+": "+a):I}},E.dq.prototype={gbt:function(){return"RangeError"},gbs:function(){var n,i=this.e,a=this.f;return i==null?n=a!=null?": Not less than or equal to "+p.b(a):"":a==null?n=": Not greater than or equal to "+p.b(i):a>i?n=": Not in inclusive range "+p.b(i)+".."+p.b(a):n=a<i?": Valid value range is empty":": Only valid value is "+p.b(i),n}},E.ew.prototype={gbt:function(){return"RangeError"},gbs:function(){if(this.b<0)return": index must not be negative";var n=this.f;return n===0?": no indices are valid":": index should be less than "+n},gi:function(n){return this.f}},E.eO.prototype={l:function(n){var i,a,f,g,y,M,C,I,B=this,G={},V=new E.a9("");for(G.a="",i=B.c,a=i.length,f=0,g="",y="";f<a;++f,y=", ")M=i[f],V.a=g+y,g=V.a+=E.cx(M),G.a=", ";return B.d.J(0,new E.jn(G,V)),C=E.cx(B.a),I=V.l(0),a="NoSuchMethodError: method not found: '"+p.b(B.b.a)+`'
Receiver: `+C+`
Arguments: [`+I+"]",a}},E.f8.prototype={l:function(n){return"Unsupported operation: "+this.a}},E.f3.prototype={l:function(n){var i=this.a;return i!=null?"UnimplementedError: "+i:"UnimplementedError"}},E.bz.prototype={l:function(n){return"Bad state: "+this.a}},E.ep.prototype={l:function(n){var i=this.a;return i==null?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+E.cx(i)+"."}},E.eT.prototype={l:function(n){return"Out of Memory"},gaP:function(){return null},$iF:1},E.ds.prototype={l:function(n){return"Stack Overflow"},gaP:function(){return null},$iF:1},E.er.prototype={l:function(n){var i=this.a;return i==null?"Reading static variable during its initialization":"Reading static variable '"+i+"' during its initialization"}},E.dD.prototype={l:function(n){return"Exception: "+this.a},$ia3:1},E.aD.prototype={l:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z=this.a,ne=Z!=null&&Z!==""?"FormatException: "+p.b(Z):"FormatException",ae=this.c,ue=this.b;if(typeof ue=="string"){if(ae!=null?i=ae<0||ae>ue.length:i=!1,i&&(ae=null),ae==null)return ue.length>78&&(ue=b.a.t(ue,0,75)+"..."),ne+`
`+ue;for(a=1,f=0,g=!1,y=0;y<ae;++y)M=b.a.H(ue,y),M===10?((f!==y||!g)&&++a,f=y+1,g=!1):M===13&&(++a,f=y+1,g=!0);for(ne=a>1?ne+(" (at line "+a+", character "+(ae-f+1)+`)
`):ne+(" (at character "+(ae+1)+`)
`),C=ue.length,y=ae;y<C;++y)if(M=b.a.A(ue,y),M===10||M===13){C=y;break}return C-f>78?ae-f<75?(I=f+75,B=f,G="",V="..."):(C-ae<75?(B=C-75,I=C,V=""):(B=ae-36,I=ae+36,V="..."),G="..."):(I=C,B=f,G="",V=""),Q=b.a.t(ue,B,I),ne+G+Q+V+`
`+b.a.bh(" ",ae-B+G.length)+`^
`}else return ae!=null?ne+(" (at offset "+p.b(ae)+")"):ne},$ia3:1},E.i.prototype={ae:function(n,i){return p.fP(this,p.r(this).h("i.E"),i)},ag:function(n,i,a){return p.ja(this,i,p.r(this).h("i.E"),a)},F:function(n,i){var a;for(a=this.gC(this);a.n();)if(ee.aA(a.gq(),i))return!0;return!1},aL:function(n,i){return E.dh(this,!1,p.r(this).h("i.E"))},gi:function(n){var i,a=this.gC(this);for(i=0;a.n();)++i;return i},gu:function(n){return!this.gC(this).n()},ga3:function(n){return!this.gu(this)},a1:function(n,i){return p.o5(this,i,p.r(this).h("i.E"))},S:function(n,i){var a,f,g;for(E.aU(i,"index"),a=this.gC(this),f=0;a.n();){if(g=a.gq(),i===f)return g;++f}throw p.c(E.ex(i,this,"index",null,f))},l:function(n){return E.tf(this,"(",")")}},E.dF.prototype={S:function(n,i){var a=this.a;return(0>i||i>=a)&&p.a2(E.ex(i,this,"index",null,a)),this.b.$1(i)},gi:function(n){return this.a}},E.H.prototype={},E.cC.prototype={l:function(n){return"MapEntry("+p.b(ee.ag(this.a))+": "+p.b(ee.ag(this.b))+")"}},E.k.prototype={gG:function(n){return E.e.prototype.gG.call(b.bD,this)},l:function(n){return"null"}},E.e.prototype={constructor:E.e,$ie:1,N:function(n,i){return this===i},gG:function(n){return p.cj(this)},l:function(n){return"Instance of '"+p.b(p.ju(this))+"'"},bb:function(n,i){throw p.c(E.nS(this,i.gcN(),i.gcR(),i.gcO()))},toString:function(){return this.l(this)}},E.fr.prototype={l:function(n){return""},$iam:1},E.a9.prototype={gi:function(n){return this.a.length},l:function(n){var i=this.a;return i.charCodeAt(0)==0,i}},E.kN.prototype={$2:function(n,i){throw p.c(E.K("Illegal IPv4 address, "+n,this.a,i))},$S:126},E.kO.prototype={$2:function(n,i){throw p.c(E.K("Illegal IPv6 address, "+n,this.a,i))},$1:function(n){return this.$2(n,null)},$S:68},E.kP.prototype={$2:function(n,i){var a;return i-n>4&&this.a.$2("an IPv6 part can only contain a maximum of 4 hex digits",n),a=E.cr(b.a.t(this.b,n,i),16),(a<0||a>65535)&&this.a.$2("each part must be in the range of `0x0..0xFFFF`",n),a},$S:70},E.e2.prototype={gct:function(){var n,i,a,f=this,g=f.x;return g==null&&(g=f.a,n=g.length!==0?g+":":"",i=f.c,a=i==null,!a||g==="file"?(g=n+"//",n=f.b,n.length!==0&&(g=g+n+"@"),a||(g+=i),n=f.d,n!=null&&(g=g+":"+p.b(n))):g=n,g+=f.e,n=f.f,n!=null&&(g=g+"?"+n),n=f.r,n!=null&&(g=g+"#"+n),g=(g.charCodeAt(0)==0,g),f.x==null?f.x=g:g=p.a2(p.nM("Field '_text' has been assigned during initialization."))),g},gG:function(n){var i=this,a=i.z;return a==null&&(a=b.a.gG(i.gct()),i.z==null?i.z=a:a=p.a2(p.nM("Field 'hashCode' has been assigned during initialization."))),a},gcX:function(){return this.b},gbJ:function(){var n=this.c;return n==null?"":b.a.V(n,"[")?b.a.t(n,1,n.length-1):n},gbR:function(){var n=this.d;return n==null?E.ow(this.a):n},gbT:function(){var n=this.f;return n==null?"":n},gbF:function(){var n=this.r;return n==null?"":n},gcI:function(){return this.a.length!==0},gbG:function(){return this.c!=null},gbI:function(){return this.f!=null},gbH:function(){return this.r!=null},gcH:function(){return b.a.V(this.e,"/")},l:function(n){return this.gct()},N:function(n,i){var a=this;return i==null?!1:a===i?!0:Y.n.b(i)&&a.a===i.gc1()&&a.c!=null===i.gbG()&&a.b===i.gcX()&&a.gbJ()===i.gbJ()&&a.gbR()===i.gbR()&&a.e===i.gcP()&&a.f!=null===i.gbI()&&a.gbT()===i.gbT()&&a.r!=null===i.gbH()&&a.gbF()===i.gbF()},$iaY:1,gc1:function(){return this.a},gcP:function(){return this.e}},E.kL.prototype={gbd:function(n){var i,a,f,g,y=this,M=null,C=y.c;return C==null&&(C=y.a,i=y.b[0]+1,a=b.a.b7(C,"?",i),f=C.length,a>=0?(g=E.e3(C,a+1,f,b.x,!1),f=a):g=M,C=y.c=new E.fg("data","",M,M,E.e3(C,i,f,b.am,!1),g,M)),C},gax:function(){var n=this.b,i=n[0]+1,a=n[1];return i===a?"text/plain":E.uy(this.a,i,a,b.a3,!1)},cB:function(){var n,i,a,f,g,y,M,C,I=this.a,B=this.b,G=b.d.gaH(B)+1;if((B.length&1)==1)return b.b6.dU(I,G);for(B=I.length,n=B-G,i=G;i<B;++i)b.a.A(I,i)===37&&(i+=2,n-=2);if(a=new Uint8Array(n),n===B)return b.j.a0(a,0,n,new p.cu(I),G),a;for(i=G,f=0;i<B;++i){if(g=b.a.A(I,i),g!==37)y=f+1,a[f]=g;else{if(M=i+2,M<B&&(C=p.p5(I,i+1),C>=0)){y=f+1,a[f]=C,i=M,f=y;continue}throw p.c(E.K("Invalid percent escape",I,i))}f=y}return a},l:function(n){var i=this.a;return this.b[0]===-1?"data:"+i:i}},E.lP.prototype={$1:function(n){return new Uint8Array(96)},$S:71},E.lO.prototype={$2:function(n,i){var a=this.a[n];return ee.rt(a,0,96,i),a},$S:82},E.lQ.prototype={$3:function(n,i,a){var f,g;for(f=i.length,g=0;g<f;++g)n[b.a.H(i,g)^96]=a},$S:16},E.lR.prototype={$3:function(n,i,a){var f,g;for(f=b.a.H(i,0),g=b.a.H(i,1);f<=g;++f)n[(f^96)>>>0]=a},$S:16},E.fp.prototype={gcI:function(){return this.b>0},gbG:function(){return this.c>0},gbI:function(){return this.f<this.r},gbH:function(){return this.r<this.a.length},gci:function(){return this.b===4&&b.a.V(this.a,"http")},gcj:function(){return this.b===5&&b.a.V(this.a,"https")},gcH:function(){return b.a.U(this.a,"/",this.e)},gc1:function(){var n=this.x;return n==null?this.x=this.df():n},df:function(){var n=this,i=n.b;return i<=0?"":n.gci()?"http":n.gcj()?"https":i===4&&b.a.V(n.a,"file")?"file":i===7&&b.a.V(n.a,"package")?"package":b.a.t(n.a,0,i)},gcX:function(){var n=this.c,i=this.b+3;return n>i?b.a.t(this.a,i,n-1):""},gbJ:function(){var n=this.c;return n>0?b.a.t(this.a,n,this.d):""},gbR:function(){var n=this;return n.c>0&&n.d+1<n.e?E.cr(b.a.t(n.a,n.d+1,n.e),null):n.gci()?80:n.gcj()?443:0},gcP:function(){return b.a.t(this.a,this.e,this.f)},gbT:function(){var n=this.f,i=this.r;return n<i?b.a.t(this.a,n+1,i):""},gbF:function(){var n=this.r,i=this.a;return n<i.length?b.a.bj(i,n+1):""},gG:function(n){var i=this.y;return i==null?this.y=b.a.gG(this.a):i},N:function(n,i){return i==null?!1:this===i?!0:Y.n.b(i)&&this.a===i.l(0)},l:function(n){return this.a},$iaY:1},E.fg.prototype={},E.lM.prototype={$1:function(n){var i,a,f,g=this.a;if(g.w(n))return g.j(0,n);if(Y.I.b(n)){for(i={},g.m(0,n,i),g=n.gL(),g=g.gC(g);g.n();)a=g.gq(),i[a]=this.$1(n.j(0,a));return i}else return Y.U.b(n)?(f=[],g.m(0,n,f),b.d.K(f,ee.bl(n,this,Y.z)),f):n},$S:90},me.a0.prototype={gck:function(){var n,i=this.z;return i===5121||i===5120?(n=this.ch,n=n==="MAT2"||n==="MAT3"):n=!1,n?i=!0:i=(i===5123||i===5122)&&this.ch==="MAT3",i},ga7:function(){var n=b.l.j(0,this.ch);return n==null?0:n},ga8:function(){var n=this,i=n.z;return i===5121||i===5120?(i=n.ch,i==="MAT2"?6:i==="MAT3"?11:n.ga7()):i===5123||i===5122?n.ch==="MAT3"?22:2*n.ga7():4*n.ga7()},gal:function(){var n=this,i=n.fx;return i!==0?i:(i=n.z,i===5121||i===5120?(i=n.ch,i==="MAT2"?8:i==="MAT3"?12:n.ga7()):i===5123||i===5122?n.ch==="MAT3"?24:2*n.ga7():4*n.ga7())},gaF:function(){return this.gal()*(this.Q-1)+this.ga8()},v:function(n,i){var a,f,g,y=this,M="bufferView",C=n.z,I=y.x,B=y.fr=C.j(0,I),G=B==null;if(!G&&B.Q!==-1&&(y.fx=B.Q),!(y.z===-1||y.Q===-1||y.ch==null)&&(I!==-1&&(G?i.k(q.N(),p.a([I],Y.M),M):(B.a$=!0,B=B.Q,B!==-1&&B<y.ga8()&&i.E(q.pU(),p.a([y.fr.Q,y.ga8()],Y.M)),me.bm(y.y,y.dy,y.gaF(),y.fr,I,i))),I=y.dx,I!=null)){if(B=I.d,B!==-1?G=!1:G=!0,G)return;G=i.c,G.push("sparse"),a=y.Q,B>a&&i.k(q.qy(),p.a([B,a],Y.M),"count"),a=I.f,f=a.d,a.f=C.j(0,f),G.push("indices"),g=I.e,I=g.d,I!==-1&&(C=g.r=C.j(0,I),C==null?i.k(q.N(),p.a([I],Y.M),M):(C.P(b.v,M,i),g.r.Q!==-1&&i.p(q.mv(),M),C=g.f,C!==-1&&me.bm(g.e,Se.b_(C),Se.b_(C)*B,g.r,I,i))),G.pop(),G.push("values"),f!==-1&&(C=a.f,C==null?i.k(q.N(),p.a([f],Y.M),M):(C.P(b.v,M,i),a.f.Q!==-1&&i.p(q.mv(),M),C=y.dy,I=b.l.j(0,y.ch),I==null&&(I=0),me.bm(a.e,C,C*I*B,a.f,f,i))),G.pop(),G.pop()}},P:function(n,i,a){var f;this.a$=!0,f=this.k2,f==null?this.k2=n:f!==n&&a.k(q.pW(),p.a([f,n],Y.M),i)},ex:function(n){var i=this.k1;if(i==null)this.k1=n;else if(i!==n)return!1;return!0},ed:function(n){var i,a,f=this;return!f.cx||f.z===5126?(n.toString,n):(i=f.dy*8,a=f.z,a===5120||a===5122||a===5124?Math.max(n/(b.c.aA(1,i-1)-1),-1):n/(b.c.aA(1,i)-1))}},me.fb.prototype={ac:function(){var n=this;return E.bK(function(){var i=0,a=2,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He;return function(gt,lt){for(gt===1&&(f=lt,i=a);;)switch(i){case 0:if(He=n.z,He===-1||n.Q===-1||n.ch==null){i=1;break}if(g=n.ga7(),y=n.Q,M=n.fr,M!=null){if(M=M.cx,(M==null?null:M.Q)==null){i=1;break}if(n.gal()<n.ga8()){i=1;break}if(M=n.y,C=n.dy,!me.bm(M,C,n.gaF(),n.fr,null,null)){i=1;break}if(I=n.fr,B=me.ny(He,I.cx.Q.buffer,I.y+M,b.c.aq(n.gaF(),C)),B==null){i=1;break}G=B.length,n.gck()?(M=b.c.aq(n.gal(),C),C=n.ch==="MAT2",I=C?8:12,V=C?2:3,Q=new me.l6(G,B,V,V,M-I).$0()):Q=new me.l7(B).$3(G,g,b.c.aq(n.gal(),C)-g)}else Q=E.nJ(y*g,new me.l8,Y.e);if(M=n.dx,M!=null){if(C=M.f,I=C.e,I!==-1?(Z=C.f,Z!=null&&Z.z!==-1&&Z.y!==-1?(Z=Z.cx,(Z==null?null:Z.Q)!=null?(Z=M.e,Z.f!==-1&&Z.e!==-1?(Z=Z.r,Z!=null&&Z.z!==-1&&Z.y!==-1?(Z=Z.cx,Z=(Z==null?null:Z.Q)==null):Z=!0):Z=!0):Z=!0):Z=!0):Z=!0,Z){i=1;break}if(Z=M.d,Z>y){i=1;break}if(y=M.e,M=y.e,ne=y.f,me.bm(M,Se.b_(ne),Se.b_(ne)*Z,y.r,null,null)?(ae=n.dy,ue=b.l.j(0,n.ch),ue==null&&(ue=0),ue=!me.bm(I,ae,ae*ue*Z,C.f,null,null),ae=ue):ae=!0,ae){i=1;break}if(y=y.r,he=me.mz(ne,y.cx.Q.buffer,y.y+M,Z),C=C.f,Ce=me.ny(He,C.cx.Q.buffer,C.y+I,Z*g),he==null||Ce==null){i=1;break}Q=new me.l9(n,he,Q,g,Ce).$0()}return i=3,E.lv(Q);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},Y.e)},bf:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,y,M,C;return function(B,G){for(B===1&&(f=G,i=a);;)switch(i){case 0:M=n.dy*8,C=n.z,C=C===5120||C===5122||C===5124,g=Y.F,i=C?2:4;break;case 2:return C=b.c.aA(1,M-1),y=n.ac(),y.toString,i=5,E.lv(p.ja(y,new me.l4(1/(C-1)),y.$ti.h("i.E"),g));case 5:i=3;break;case 4:return C=b.c.aA(1,M),y=n.ac(),y.toString,i=6,E.lv(p.ja(y,new me.l5(1/(C-1)),y.$ti.h("i.E"),g));case 6:case 3:return E.bF();case 1:return E.bG(f)}}},Y.F)}},me.l6.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,y,M,C,I,B,G,V;return function(Z,ne){for(Z===1&&(f=ne,i=a);;)switch(i){case 0:g=n.a,y=n.c,M=n.b,C=n.d,I=n.e,B=0,G=0,V=0;case 2:if(!(B<g)){i=3;break}return i=4,M[B];case 4:++B,++G,G===y&&(B+=4-G,++V,V===C&&(B+=I,V=0),G=0),i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},Y.e)},$S:17},me.l7.prototype={$3:function(n,i,a){return this.cZ(n,i,a)},cZ:function(n,i,a){var f=this;return E.bK(function(){var g=n,y=i,M=a,C=0,I=1,B,G,V,Q;return function(ne,ae){for(ne===1&&(B=ae,C=I);;)switch(C){case 0:G=f.a,V=0,Q=0;case 2:if(!(V<g)){C=3;break}return C=4,G[V];case 4:++V,++Q,Q===y&&(V+=M,Q=0),C=2;break;case 3:return E.bF();case 1:return E.bG(B)}}},Y.e)},$S:30},me.l8.prototype={$1:function(n){return 0},$S:18},me.l9.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,y,M,C,I,B,G,V,Q,Z;return function(ae,ue){for(ae===1&&(f=ue,i=a);;)switch(i){case 0:Q=n.b,Z=Q[0],g=ee.a_(n.c),y=n.d,M=n.a.dx,C=n.e,I=0,B=0,G=0;case 2:if(!g.n()){i=3;break}V=g.gq(),B===y&&(I===Z&&G!==M.d-1&&(++G,Z=Q[G]),++I,B=0),i=I===Z?4:6;break;case 4:return i=7,C[G*y+B];case 7:i=5;break;case 6:return i=8,V;case 8:case 5:++B,i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},Y.e)},$S:17},me.l4.prototype={$1:function(n){return Math.max(n*this.a,-1)},$S:5},me.l5.prototype={$1:function(n){return n*this.a},$S:5},me.fa.prototype={ac:function(){var n=this;return E.bK(function(){var i=0,a=2,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He;return function(gt,lt){for(gt===1&&(f=lt,i=a);;)switch(i){case 0:if(He=n.z,He===-1||n.Q===-1||n.ch==null){i=1;break}if(g=n.ga7(),y=n.Q,M=n.fr,M!=null){if(M=M.cx,(M==null?null:M.Q)==null){i=1;break}if(n.gal()<n.ga8()){i=1;break}if(M=n.y,C=n.dy,!me.bm(M,C,n.gaF(),n.fr,null,null)){i=1;break}if(I=n.fr,B=me.nx(He,I.cx.Q.buffer,I.y+M,b.c.aq(n.gaF(),C)),B==null){i=1;break}G=B.length,n.gck()?(M=b.c.aq(n.gal(),C),C=n.ch==="MAT2",I=C?8:12,V=C?2:3,Q=new me.l0(G,B,V,V,M-I).$0()):Q=new me.l1(B).$3(G,g,b.c.aq(n.gal(),C)-g)}else Q=E.nJ(y*g,new me.l2,Y.F);if(M=n.dx,M!=null){if(C=M.f,I=C.e,I!==-1?(Z=C.f,Z!=null&&Z.z!==-1&&Z.y!==-1?(Z=Z.cx,(Z==null?null:Z.Q)!=null?(Z=M.e,Z.f!==-1&&Z.e!==-1?(Z=Z.r,Z!=null&&Z.z!==-1&&Z.y!==-1?(Z=Z.cx,Z=(Z==null?null:Z.Q)==null):Z=!0):Z=!0):Z=!0):Z=!0):Z=!0,Z){i=1;break}if(Z=M.d,Z>y){i=1;break}if(y=M.e,M=y.e,ne=y.f,me.bm(M,Se.b_(ne),Se.b_(ne)*Z,y.r,null,null)?(ae=n.dy,ue=b.l.j(0,n.ch),ue==null&&(ue=0),ue=!me.bm(I,ae,ae*ue*Z,C.f,null,null),ae=ue):ae=!0,ae){i=1;break}if(y=y.r,he=me.mz(ne,y.cx.Q.buffer,y.y+M,Z),C=C.f,Ce=me.nx(He,C.cx.Q.buffer,C.y+I,Z*g),he==null||Ce==null){i=1;break}Q=new me.l3(n,he,Q,g,Ce).$0()}return i=3,E.lv(Q);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},Y.F)},bf:function(){return this.ac()}},me.l0.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,y,M,C,I,B,G,V;return function(Z,ne){for(Z===1&&(f=ne,i=a);;)switch(i){case 0:g=n.a,y=n.c,M=n.b,C=n.d,I=n.e,B=0,G=0,V=0;case 2:if(!(B<g)){i=3;break}return i=4,M[B];case 4:++B,++G,G===y&&(B+=4-G,++V,V===C&&(B+=I,V=0),G=0),i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},Y.F)},$S:19},me.l1.prototype={$3:function(n,i,a){return this.cY(n,i,a)},cY:function(n,i,a){var f=this;return E.bK(function(){var g=n,y=i,M=a,C=0,I=1,B,G,V,Q;return function(ne,ae){for(ne===1&&(B=ae,C=I);;)switch(C){case 0:G=f.a,V=0,Q=0;case 2:if(!(V<g)){C=3;break}return C=4,G[V];case 4:++V,++Q,Q===y&&(V+=M,Q=0),C=2;break;case 3:return E.bF();case 1:return E.bG(B)}}},Y.F)},$S:34},me.l2.prototype={$1:function(n){return 0},$S:5},me.l3.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,y,M,C,I,B,G,V,Q,Z;return function(ae,ue){for(ae===1&&(f=ue,i=a);;)switch(i){case 0:Q=n.b,Z=Q[0],g=ee.a_(n.c),y=n.d,M=n.a.dx,C=n.e,I=0,B=0,G=0;case 2:if(!g.n()){i=3;break}V=g.gq(),B===y&&(I===Z&&G!==M.d-1&&(++G,Z=Q[G]),++I,B=0),i=I===Z?4:6;break;case 4:return i=7,C[G*y+B];case 7:i=5;break;case 6:return i=8,V;case 8:case 5:++B,i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},Y.F)},$S:19},me.bP.prototype={ge3:function(){var n=this.e,i=n.r,a=i==null?null:i.cx;return(a==null?null:a.Q)==null?null:me.mz(n.f,i.cx.Q.buffer,i.y+n.e,this.d)}},me.bQ.prototype={v:function(n,i){this.r=n.z.j(0,this.d)}},me.bR.prototype={v:function(n,i){this.f=n.z.j(0,this.d)}},me.ez.prototype={Y:function(n,i,a,f){return f.toString,f==1/0||f==-1/0||isNaN(f)?(n.k(q.pl(),p.a([i,f],Y.M),this.a),!1):!0}},me.eG.prototype={Y:function(n,i,a,f){var g,y=this;return(i===a||y.b[a]>f)&&(y.b[a]=f),f<y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,y,M,C,I,B,G=this;for(i=G.b,a=i.length,f=G.c,g=G.a,y=G.d,M=Y.M,C=0;C<a;++C)ee.aA(f[C],i[C])||(I=q.na(),B=y+"/min/"+C,n.k(I,p.a([f[C],i[C]],M),B),g[C]>0&&(I=q.n8(),B=y+"/min/"+C,n.k(I,p.a([g[C],f[C]],M),B)));return!0}},me.eE.prototype={Y:function(n,i,a,f){var g,y=this;return(i===a||y.b[a]<f)&&(y.b[a]=f),f>y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,y,M,C,I,B,G=this;for(i=G.b,a=i.length,f=G.c,g=G.a,y=G.d,M=Y.M,C=0;C<a;++C)ee.aA(f[C],i[C])||(I=q.n9(),B=y+"/max/"+C,n.k(I,p.a([f[C],i[C]],M),B),g[C]>0&&(I=q.n7(),B=y+"/max/"+C,n.k(I,p.a([g[C],f[C]],M),B)));return!0}},me.eH.prototype={Y:function(n,i,a,f){var g,y=this;return(i===a||y.b[a]>f)&&(y.b[a]=f),f<y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,y,M,C,I,B,G=this;for(i=G.b,a=i.length,f=G.c,g=G.a,y=G.d,M=Y.M,C=0;C<a;++C)ee.aA(f[C],i[C])||(I=q.na(),B=y+"/min/"+C,n.k(I,p.a([f[C],i[C]],M),B),g[C]>0&&(I=q.n8(),B=y+"/min/"+C,n.k(I,p.a([g[C],f[C]],M),B)));return!0}},me.eF.prototype={Y:function(n,i,a,f){var g,y=this;return(i===a||y.b[a]<f)&&(y.b[a]=f),f>y.c[a]&&(g=y.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,y,M,C,I,B,G=this;for(i=G.b,a=i.length,f=G.c,g=G.a,y=G.d,M=Y.M,C=0;C<a;++C)ee.aA(f[C],i[C])||(I=q.n9(),B=y+"/max/"+C,n.k(I,p.a([f[C],i[C]],M),B),g[C]>0&&(I=q.n7(),B=y+"/max/"+C,n.k(I,p.a([g[C],f[C]],M),B)));return!0}},Se.bn.prototype={v:function(n,i){var a,f,g,y,M,C=this,I="samplers",B=C.y;if(!(B==null||C.x==null)){for(a=i.c,a.push(I),B.a9(new Se.fH(i,n)),a.pop(),a.push("channels"),C.x.a9(new Se.fI(C,i,n)),a.pop(),a.push(I),f=B.b,B=B.a,g=B.length,y=0;y<f;++y)M=y>=g,(M?null:B[y]).a$||i.X(q.fD(),y);a.pop()}}},Se.fH.prototype={$2:function(n,i){var a,f,g,y,M="input",C="output",I=this.a,B=I.c;B.push(b.c.l(n)),a=this.b.f,f=i.d,i.r=a.j(0,f),g=i.f,i.x=a.j(0,g),f!==-1&&(a=i.r,a==null?I.k(q.N(),p.a([f],Y.M),M):(a.P(b.b_,M,I),a=i.r.fr,a!=null&&a.P(b.v,M,I),B.push(M),y=de.d2(i.r),y.N(0,b.A)?I.W(i.r,new Se.ei(I.O())):I.E(q.q_(),p.a([y,p.a([b.A],Y.p)],Y.M)),a=i.r,(a.db==null||a.cy==null)&&I.R(q.q1()),i.e==="CUBICSPLINE"&&i.r.Q<2&&I.E(q.q0(),p.a(["CUBICSPLINE",2,i.r.Q],Y.M)),B.pop())),g!==-1&&(a=i.x,a==null?I.k(q.N(),p.a([g],Y.M),C):(a.P(b.b0,C,I),a=i.x.fr,a!=null&&a.P(b.v,C,I),i.x.ex(i.e==="CUBICSPLINE"))),B.pop()},$S:35},Se.fI.prototype={$2:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue=null,he="sampler",Ce=this.b,He=Ce.c;if(He.push(b.c.l(n)),a=this.a,f=i.d,i.f=a.y.j(0,f),g=i.e,y=g!=null,y&&(M=g.d,g.f=this.c.db.j(0,M),M!==-1)){if(He.push("target"),C=g.f,C==null)Ce.k(q.N(),p.a([M],Y.M),"node");else switch(C.a$=!0,g.e){case"translation":case"rotation":case"scale":C.Q!=null&&Ce.R(q.pX()),g.f.id!=null&&Ce.p(q.qz(),"path");break;case"weights":M=C.fy,M=M==null?ue:M.x,M=M==null?ue:M.gcF(M),(M==null?ue:M.fx)==null&&Ce.R(q.pY());break}He.pop()}if(f!==-1){for(M=i.f,M==null?Ce.k(q.N(),p.a([f],Y.M),he):(M.a$=!0,y&&M.x!=null&&(f=g.e,f==="rotation"&&(I=M.x,I.ga7()===4&&(He.push(he),M=Ce.O(),C=I.z===5126?ue:I.gbP(),Ce.W(I,new Se.dp(i.f.e==="CUBICSPLINE",C,M,Y.ed)),He.pop()),M=i.f,M.x.toString),B=de.d2(M.x),G=b.cS.j(0,f),(G==null?ue:b.d.F(G,B))===!1&&Ce.k(q.q3(),p.a([B,G,f],Y.M),he),M=i.f,C=M.r,C!=null&&C.Q!==-1&&M.x.Q!==-1&&M.e!=null&&(V=C.Q,M.e==="CUBICSPLINE"&&(V*=3),f==="weights"&&(f=g.f,f=f==null?ue:f.fy,f=f==null?ue:f.x,f=f==null?ue:f.gcF(f),f=f==null?ue:f.fx,Q=f==null?ue:f.length,V*=Q==null?0:Q),V!==0&&V!==i.f.x.Q&&Ce.k(q.q2(),p.a([V,i.f.x.Q],Y.M),he)))),Z=n+1,a=a.x,f=a.b,M=Y.M,a=a.a,C=a.length;Z<f;++Z)y?(ne=Z>=C,ae=(ne?ue:a[Z]).e,ne=ae!=null&&g.d===ae.d&&g.e==ae.e):ne=!1,ne&&Ce.k(q.pZ(),p.a([Z],M),"target");He.pop()}},$S:36},Se.b1.prototype={},Se.bT.prototype={},Se.b2.prototype={},Se.ei.prototype={Y:function(n,i,a,f){var g=this;return f<0?n.k(q.pf(),p.a([i,f],Y.M),g.b):(i!==0&&f<=g.a&&n.k(q.pg(),p.a([i,f,g.a],Y.M),g.b),g.a=f),!0}},Se.dp.prototype={Y:function(n,i,a,f){var g,y,M=this;return(!M.a||(4&M.d)==4)&&(g=M.b,y=g!=null?g.$1(f):f,g=M.e+y*y,M.e=g,a===3&&(Math.abs(Math.sqrt(g)-1)>.00769&&n.k(q.ph(),p.a([i-3,i,Math.sqrt(M.e)],Y.M),M.c),M.e=0)),++M.d==12&&(M.d=0),!0}},Te.bo.prototype={gb8:function(){var n,i=this.f;return i!=null?(n=q.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(q.bj().aG(i).b[1],null)},gbO:function(){var n,i=this.f;return i!=null?(n=q.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(q.bj().aG(i).b[2],null)},gcM:function(){var n,i=this.r;return i!=null?(n=q.bj().b,n=!n.test(i)):n=!0,n?2:E.cr(q.bj().aG(i).b[1],null)},geb:function(){var n,i=this.r;return i!=null?(n=q.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(q.bj().aG(i).b[2],null)}},ye.aN.prototype={},de.bp.prototype={P:function(n,i,a){var f;this.a$=!0,f=this.cy,f==null?this.cy=n:f!==n&&a.k(q.q5(),p.a([f,n],Y.M),i)},v:function(n,i){var a,f=this,g=f.x,y=f.cx=n.y.j(0,g);f.db=f.Q,a=f.ch,a===34962?f.cy=b.F:a===34963&&(f.cy=b.X),g!==-1&&(y==null?i.k(q.N(),p.a([g],Y.M),"buffer"):(y.a$=!0,y=y.y,y!==-1&&(a=f.y,a>=y?i.k(q.ne(),p.a([g,y],Y.M),"byteOffset"):a+f.z>y&&i.k(q.ne(),p.a([g,y],Y.M),"byteLength"))))}},Re.bq.prototype={},Re.bV.prototype={},Re.bW.prototype={},de.da.prototype={ez:function(n){var i,a,f,g,y;for(new de.i3(this,n).$1(this.fy),i=n.r,a=i.length,f=n.c,g=0;g<i.length;i.length===a||(0,p.cs)(i),++g)y=i[g],b.d.si(f,0),b.d.K(f,y.b),y.a.bY(this,n);b.d.si(f,0)}},de.i0.prototype={$0:function(){return b.d.si(this.a.c,0),null},$S:1},de.i1.prototype={$1$2:function(n,i,a){var f,g,y,M,C,I,B,G,V,Q,Z=this,ne=Z.a;if(!ne.w(n))return ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,a.h("p<0*>")),0,n,a.h("L<0*>"));if(Z.b.$0(),f=ne.j(0,n),Y.o.b(f))if(ne=ee.M(f),g=Z.c,y=a.h("p<0*>"),M=a.h("L<0*>"),ne.ga3(f)){for(C=ne.gi(f),I=new Array(C),I.fixed$length=Array,y=p.a(I,y),I=g.c,I.push(n),B=Y.M,G=Y.t,V=0;V<ne.gi(f);++V)Q=ne.j(f,V),G.b(Q)?(I.push(b.c.l(V)),y[V]=i.$2(Q,g),I.pop()):g.aE(q.Z(),p.a([Q,"object"],B),V);return new oe.L(y,C,n,M)}else return g.p(q.bO(),n),ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,y),0,n,M);else return Z.c.k(q.Z(),p.a([f,"array"],Y.M),n),ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,a.h("p<0*>")),0,n,a.h("L<0*>"))},$2:function(n,i){return this.$1$2(n,i,Y.z)},$S:37},de.i2.prototype={$1$3$req:function(n,i,a,f){var g,y;return this.a.$0(),g=this.c,y=oe.n_(this.b,n,g,!0),y==null?null:(g.c.push(n),i.$2(y,g))},$2:function(n,i){return this.$1$3$req(n,i,!1,Y.z)},$1$2:function(n,i,a){return this.$1$3$req(n,i,!1,a)},$S:38},de.hZ.prototype={$2:function(n,i){var a,f,g,y,M,C=this.a,I=C.c;if(I.push(n.c),a=this.b,n.a9(new de.i_(C,a)),f=C.f.j(0,i),f!=null){for(g=ee.eA(I.slice(0),p.U(I).c),y=ee.a_(f);y.n();)M=y.gq(),b.d.si(I,0),b.d.K(I,M.b),M.a.v(a,C);b.d.si(I,0),b.d.K(I,g)}I.pop()},$S:39},de.i_.prototype={$2:function(n,i){var a=this.a,f=a.c;f.push(b.c.l(n)),i.v(this.b,a),f.pop()},$S:40},de.hX.prototype={$2:function(n,i){var a,f;Y.v.b(i)&&(a=this.a,f=a.c,f.push(n),i.v(this.b,a),f.pop())},$S:6},de.hY.prototype={$2:function(n,i){var a,f,g,y=this;if(!i.k1&&i.fx==null&&i.fy==null&&i.fr==null&&i.a.a===0&&i.b==null&&y.a.X(q.qU(),n),i.go!=null)for(a=y.b,a.cz(0),f=i;f.go!=null;)if(a.B(0,f))f=f.go;else{f===i&&y.a.X(q.qg(),n);break}i.id!=null&&(i.go!=null&&y.a.X(q.qZ(),n),a=i.Q,a==null||a.cK()?(a=i.cx,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0):a=!0,a?(a=i.cy,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0&&a[3]===1):a=!0,a?(a=i.db,a!=null?(a=a.a,a=a[0]===1&&a[1]===1&&a[2]===1):a=!0):a=!1):a=!1):a=!1,a||y.a.X(q.qY(),n),g=i.id.cy.b5(0,new de.hV,new de.hW),g!=null?(a=g.dy,a=!i.dy.b4(0,a.gcA(a))):a=!1,a&&y.a.X(q.qX(),n))},$S:29},de.hV.prototype={$1:function(n){return n.go==null},$S:43},de.hW.prototype={$0:function(){return null},$S:2},de.i3.prototype={$1:function(n){var i=this.b,a=i.c;b.d.si(a,0),a.push(n.c),n.a9(new de.i4(this.a,i)),a.pop()},$S:44},de.i4.prototype={$2:function(n,i){var a=this.b,f=a.c;f.push(b.c.l(n)),i.bY(this.a,a),f.pop()},$S:45},de.kQ.prototype={ge7:function(){return this.a$}},de.o.prototype={v:function(n,i){},$it:1},de.es.prototype={},de.fk.prototype={},Te.aO.prototype={v:function(n,i){var a,f="bufferView",g=this.x;g!==-1&&(a=this.ch=n.z.j(0,g),a==null?i.k(q.N(),p.a([g],Y.M),f):(a.P(b.b4,f,i),this.ch.Q!==-1&&i.p(q.q6(),f)))},ew:function(){var n=this.ch,i=n==null?null:n.cx;if((i==null?null:i.Q)!=null)try{this.Q=p.mH(n.cx.Q.buffer,n.y,n.z)}catch(a){if(!(p.E(a)instanceof E.ak))throw a}}},we.aS.prototype={v:function(n,i){var a=this,f=new we.jb(i,n);f.$2(a.x,"pbrMetallicRoughness"),f.$2(a.y,"normalTexture"),f.$2(a.z,"occlusionTexture"),f.$2(a.Q,"emissiveTexture")}},we.jb.prototype={$2:function(n,i){var a,f;n!=null&&(a=this.a,f=a.c,f.push(i),n.v(this.b,a),f.pop())},$S:46},we.ci.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("baseColorTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("metallicRoughnessTexture"),f.v(n,i),a.pop())}},we.ch.prototype={},we.cg.prototype={},we.bB.prototype={v:function(n,i){var a,f=this,g=f.d,y=f.f=n.fy.j(0,g);for(g!==-1&&(y==null?i.k(q.N(),p.a([g],Y.M),"index"):y.a$=!0),g=i.e,a=f;a!=null;)if(a=g.j(0,a),a instanceof we.aS){a.dx.m(0,i.O(),f.e);break}}},de.bU.prototype={l:function(n){return this.a}},de.bS.prototype={l:function(n){return this.a}},de.u.prototype={l:function(n){var i="{"+p.b(this.a)+", "+p.b(b.ao.j(0,this.b));return i+(this.c?" normalized":"")+"}"},N:function(n,i){return i==null?!1:i instanceof de.u&&i.a==this.a&&i.b===this.b&&i.c===this.c},gG:function(n){return Pe.oG(Pe.fy(Pe.fy(Pe.fy(0,ee.aL(this.a)),b.c.gG(this.b)),b.bC.gG(this.c)))}},Ie.aT.prototype={v:function(n,i){var a,f=i.c;f.push("primitives"),a=this.x,a!=null&&a.a9(new Ie.jl(i,n)),f.pop()}},Ie.jl.prototype={$2:function(n,i){var a=this.a,f=a.c;f.push(b.c.l(n)),i.v(this.b,a),f.pop()},$S:20},Ie.aH.prototype={geu:function(){switch(this.r){case 4:return b.c.bA(this.dy,3);case 5:case 6:var n=this.dy;return n>2?n-2:0;default:return 0}},v:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z=this,ne="attributes",ae="indices",ue=Z.d;for(ue!=null&&(a=i.c,a.push(ne),ue.J(0,new Ie.jg(Z,n,i)),a.pop()),ue=Z.e,ue!==-1&&(a=Z.fy=n.f.j(0,ue),a==null?i.k(q.N(),p.a([ue],Y.M),ae):(Z.dy=a.Q,a.P(b.b2,ae,i),ue=Z.fy.fr,ue!=null&&ue.P(b.X,ae,i),ue=i.c,ue.push(ae),a=Z.fy.fr,a!=null&&a.Q!==-1&&i.R(q.qb()),f=de.d2(Z.fy),b.d.F(b.af,f)?(a=Z.fr,g=a!==-1?a-1:-1,a=Z.r,y=a!==-1?b.c.aA(1,a):-1,y!==0&&g>=-1&&(a=Z.fy,M=i.O(),C=b.c.bA(Z.dy,3),I=Z.fy.z,B=new Uint32Array(3),i.W(a,new Ie.ev(g,C,Se.pb(I),(16&y)==16,B,M)))):i.E(q.qa(),p.a([f,b.af],Y.M)),ue.pop())),ue=Z.dy,ue!==-1?(a=Z.r,a===1&&ue%2!=0||(a===2||a===3)&&ue<2||a===4&&ue%3!=0?ue=!0:ue=(a===5||a===6)&&ue<3):ue=!1,ue&&i.E(q.q9(),p.a([Z.dy,b.c7[Z.r]],Y.M)),ue=Z.f,Z.go=n.cx.j(0,ue),G=E.nO(Z.db,new Ie.jh,!1,Y.e),ue!==-1&&(a=Z.go,a==null?i.k(q.N(),p.a([ue],Y.M),"material"):(a.a$=!0,a.dx.J(0,new Ie.ji(Z,i,G)))),ue=b.d.gC(G),a=new p.cm(ue,new Ie.jj,p.U(G).h("cm<1>")),M=i.c;a.n();)C=ue.gq(),M.push(ne),i.p(q.fD(),"TEXCOORD_"+p.b(C)),M.pop();if(ue=Z.x,ue!=null){for(a=i.c,a.push("targets"),M=new Array(ue.length),M.fixed$length=Array,Z.fx=p.a(M,Y.ar),M=Y.X,C=Y.W,V=0;V<ue.length;++V)Q=ue[V],Z.fx[V]=E.a5(M,C),a.push(b.c.l(V)),Q.J(0,new Ie.jk(Z,n,i,V)),a.pop();a.pop()}},c7:function(n,i,a){var f,g=n.fr;g.Q===-1&&(f=a.x.bS(g,new Ie.jf),f.B(0,n)&&f.gi(f)>1&&a.p(q.q8(),i))}},Ie.jc.prototype={$1:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae=this;if(!(n.length!==0&&b.a.H(n,0)===95))switch(n){case"POSITION":ae.a.c=!0;break;case"NORMAL":ae.a.b=!0;break;case"TANGENT":ae.a.a=!0;break;default:if(i=n.split("_"),a=i[0],!b.d.F(b.bY,a)||i.length!==2){ae.b.p(q.mw(),n);break}if(f=i[1],f.toString,g=new p.cu(f),g.gi(g)===0)y=0,M=!1;else if(C=f.length,C===1)y=b.a.H(f,0)-48,M=!(y<0||y>9)||!1;else for(y=0,I=0;;){if(!(I<C)){M=!0;break}if(B=b.a.H(f,I)-48,B<=9&&B>=0?G=I===0&&B===0:G=!0,G){M=!1;break}y=10*y+B,++I}if(M)switch(a){case"COLOR":f=ae.a,++f.d,V=f.e,f.e=y>V?y:V;break;case"JOINTS":f=ae.a,++f.f,Q=f.r,f.r=y>Q?y:Q;break;case"TEXCOORD":f=ae.a,++f.z,Z=f.Q,f.Q=y>Z?y:Z;break;case"WEIGHTS":f=ae.a,++f.x,ne=f.y,f.y=y>ne?y:ne;break}else ae.b.p(q.mw(),n)}},$S:21},Ie.jd.prototype={$3:function(n,i,a){var f=n+1;return f!==i?(this.a.E(q.qK(),p.a([a,f,i],Y.M)),0):i},$S:49},Ie.je.prototype={$1:function(n){var i=this.a;!i.k3.w(n)&&!ee.rE(n,"_")&&i.p(q.mw(),n)},$S:21},Ie.jg.prototype={$2:function(n,i){var a,f,g,y,M,C,I,B=this;if(i!==-1){if(a=B.b.f.j(0,i),a==null){B.c.k(q.N(),p.a([i],Y.M),n);return}f=B.a,f.dx.m(0,n,a),g=B.c,a.P(b.W,n,g),y=a.fr,y!=null&&y.P(b.F,n,g),n==="POSITION"?y=a.db==null||a.cy==null:y=!1,y&&g.p(q.nh(),"POSITION"),M=de.d2(a),C=g.k2.j(0,p.a(n.split("_"),Y.s)[0]),C!=null&&(C.F(0,M)?n==="NORMAL"?(y=g.c,y.push("NORMAL"),I=g.O(),g.W(a,new oe.f4(I,a.z===5126?null:a.gbP())),y.pop()):n==="TANGENT"?(y=g.c,y.push("TANGENT"),I=g.O(),g.W(a,new oe.f5(I,a.z===5126?null:a.gbP())),y.pop()):b.a.V(n,"COLOR_")&&a.z===5126&&(y=g.c,y.push(n),g.W(a,new oe.en(g.O())),y.pop()):g.k(q.ng(),p.a([M,C],Y.M),n)),y=a.y,y!==-1&&y%4!=0?y=!0:a.ga8()%4!=0?(y=a.fr,y=y!=null&&y.Q===-1):y=!1,y&&g.p(q.nf(),n),y=f.fr,y===-1?f.dy=f.fr=a.Q:y!==a.Q&&g.p(q.qf(),n),y=a.fr,y!=null&&y.Q===-1&&(y.db===-1&&(y.db=a.ga8()),f.c7(a,n,g))}},$S:7},Ie.jh.prototype={$1:function(n){return n},$S:18},Ie.ji.prototype={$2:function(n,i){i!==-1&&(i+1>this.a.db?this.b.k(q.qe(),p.a([n,i],Y.M),"material"):this.c[i]=-1)},$S:7},Ie.jj.prototype={$1:function(n){return n!==-1},$S:8},Ie.jk.prototype={$2:function(n,i){var a,f,g,y,M,C,I=this;i!==-1&&(a=I.b.f.j(0,i),a==null?I.c.k(q.N(),p.a([i],Y.M),n):(f=I.c,a.P(b.W,n,f),g=a.fr,g!=null&&g.P(b.F,n,f),y=I.a.dx.j(0,n),y==null?f.p(q.qd(),n):y.Q!==a.Q&&f.p(q.qc(),n),n==="POSITION"?g=a.db==null||a.cy==null:g=!1,g&&f.p(q.nh(),"POSITION"),M=de.d2(a),C=f.k3.j(0,n),C!=null&&!C.F(0,M)&&f.k(q.ng(),p.a([M,C],Y.M),n),g=a.y,g!==-1&&g%4!=0?g=!0:a.ga8()%4!=0?(g=a.fr,g=g!=null&&g.Q===-1):g=!1,g&&f.p(q.nf(),n),g=a.fr,g!=null&&g.Q===-1&&(g.db===-1&&(g.db=a.ga8()),I.a.c7(a,n,f))),I.a.fx[I.d].m(0,n,a))},$S:7},Ie.jf.prototype={$0:function(){return E.aR(Y.W)},$S:52},Ie.ev.prototype={Y:function(n,i,a,f){var g,y,M=this,C=M.a;return f>C&&n.k(q.pi(),p.a([i,f,C],Y.M),M.cy),f===M.c&&n.k(q.pj(),p.a([f,i],Y.M),M.cy),M.x&&(C=M.cx,g=M.Q,C[g]=f,++g,M.Q=g,g===3&&(M.Q=0,g=C[0],y=C[1],g!==y?(C=C[2],C=y===C||C===g):C=!0,C&&++M.ch)),!0},aw:function(n){var i=this.ch;return i>0&&n.k(q.pk(),p.a([i,this.b],Y.M),this.cy),!0}},de.ah.prototype={v:function(n,i){var a,f,g,y=this,M=y.x;y.fr=n.Q.j(0,M),a=y.z,y.id=n.fx.j(0,a),f=y.ch,y.fy=n.cy.j(0,f),M!==-1&&(g=y.fr,g==null?i.k(q.N(),p.a([M],Y.M),"camera"):g.a$=!0),a!==-1&&(M=y.id,M==null?i.k(q.N(),p.a([a],Y.M),"skin"):M.a$=!0),f!==-1&&(M=y.fy,M==null?i.k(q.N(),p.a([f],Y.M),"mesh"):(M.a$=!0,M=M.x,M!=null&&(a=y.dx,a!=null?(M=M.j(0,0).fx,M=M==null?null:M.length,M=M!==a.length):M=!1,M&&(M=q.qk(),a=a.length,f=y.fy.x.j(0,0).fx,i.k(M,p.a([a,f==null?null:f.length],Y.M),"weights")),y.id!=null?(M=y.fy.x,M.b4(M,new de.jo)&&i.R(q.qi())):(M=y.fy.x,M.bC(M,new de.jp)&&i.R(q.qj()))))),M=y.y,M!=null&&(a=new Array(M.gi(M)),a.fixed$length=Array,a=p.a(a,Y.R),y.fx=a,oe.n4(M,a,n.db,"children",i,new de.jq(y,i)))},c5:function(n,i){var a,f,g,y,M=this;if(M.dy.B(0,n),!(M.fx==null||!i.B(0,M)))for(a=M.fx,f=a.length,g=0;g<f;++g)y=a[g],y!=null&&y.c5(n,i)}},de.jo.prototype={$1:function(n){return n.cx===0},$S:3},de.jp.prototype={$1:function(n){return n.cx!==0},$S:3},de.jq.prototype={$3:function(n,i,a){n.go!=null&&this.b.aE(q.qh(),p.a([i],Y.M),a),n.go=this.a},$S:9},Te.bv.prototype={},Me.bw.prototype={v:function(n,i){var a,f=this.x;f!=null&&(a=new Array(f.gi(f)),a.fixed$length=Array,a=p.a(a,Y.R),this.y=a,oe.n4(f,a,n.db,"nodes",i,new Me.jz(this,i)))}},Me.jz.prototype={$3:function(n,i,a){n.go!=null&&this.b.aE(q.ql(),p.a([i],Y.M),a),n.c5(this.a,E.aR(Y.L))},$S:9},Be.by.prototype={v:function(n,i){var a,f,g,y,M,C=this,I="inverseBindMatrices",B="skeleton",G=C.x;C.Q=n.f.j(0,G),a=n.db,f=C.y,C.cx=a.j(0,f),g=C.z,g!=null&&(y=new Array(g.gi(g)),y.fixed$length=Array,y=p.a(y,Y.R),C.ch=y,oe.n4(g,y,a,"joints",i,new Be.kB(C)),C.cy.a===0&&i.p(q.r3(),"joints")),G!==-1&&(a=C.Q,a==null?i.k(q.N(),p.a([G],Y.M),I):(a.P(b.b1,I,i),G=C.Q.fr,G!=null&&G.P(b.b3,I,i),G=i.c,G.push(I),a=C.Q.fr,a!=null&&a.Q!==-1&&i.R(q.qm()),M=de.d2(C.Q),M.N(0,b.P)?i.W(C.Q,new Be.eu(i.O())):i.E(q.qn(),p.a([M,p.a([b.P],Y.p)],Y.M)),a=C.ch,a!=null&&C.Q.Q!==a.length&&i.E(q.q7(),p.a([a.length,C.Q.Q],Y.M)),G.pop())),f!==-1&&(G=C.cx,G==null?i.k(q.N(),p.a([f],Y.M),B):C.cy.F(0,G)||i.p(q.r4(),B))}},Be.kB.prototype={$3:function(n,i,a){var f,g,y;for(n.k1=!0,f=E.aR(Y.L),g=n;g!=null&&f.B(0,g);)g=g.go;y=this.a.cy,y.a===0?y.K(0,f):y.dk(f.gcA(f),!1)},$S:9},Be.eu.prototype={Y:function(n,i,a,f){var g;return a===3&&f!==0||a===7&&f!==0||a===11&&f!==0?g=!0:g=a===15&&f!==1,g&&n.k(q.pm(),p.a([i,a,f],Y.M),this.a),!0}},Ve.bA.prototype={v:function(n,i){var a,f,g=this,y=g.y;g.Q=n.ch.j(0,y),a=g.x,g.z=n.dx.j(0,a),y!==-1&&(f=g.Q,f==null?i.k(q.N(),p.a([y],Y.M),"source"):f.a$=!0),a!==-1&&(y=g.z,y==null?i.k(q.N(),p.a([a],Y.M),"sampler"):y.a$=!0)},bY:function(n,i){var a,f=this.Q;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&!b.d.F(b.ae,a)&&i.k(q.ni(),p.a([a,b.ae],Y.M),"source")},$ick:1},me.kV.prototype={},me.j.prototype={W:function(n,i){ee.mx(this.d.bS(n,new me.fR),i)},aa:function(n,i){var a,f,g;for(a=ee.a_(i),f=this.e;a.n();)g=a.gq(),g!=null&&f.m(0,g,n)},c0:function(n){var i,a,f,g=this.c;return g.length===0&&n!=null&&b.a.V(n,"/")?n:(i=n!=null,i&&g.push(n),a=this.go,f=a.a+="/",a.a=E.mJ(f,new p.a8(g,new me.fT,p.U(g).h("a8<1,f*>")),"/"),i&&g.pop(),g=a.a,a.a="",g.charCodeAt(0)==0,g)},O:function(){return this.c0(null)},e4:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae=this,ue="/extensionsUsed/";for(b.d.K(ae.cx,n),a=ee.M(n),f=ae.db,g=ae.fx,y=b.d3.a,M=Y.M,C=ee.M(i),I=0;I<a.gi(n);++I){if(B=a.j(n,I),G=q.pe().aG(B),V=G==null?null:G.b[1],V==null?ae.p(q.qF(),ue+I):y.w(V)||(G=q.r7(),Q=ue+I,ae.k(G,p.a([V],M),Q)),Z=g.b5(0,new me.fW(B),new me.fX(B)),Z==null){G=q.qq(),Q=ue+I,ae.k(G,p.a([B],M),Q);continue}Z.b.J(0,new me.fY(ae,Z)),G=Z.c,G!=null&&G.$1(ae),G=Z.d&&!C.F(i,B),G&&(G=q.r1(),Q=ue+I,ae.k(G,p.a([B],M),Q)),f.push(B)}for(I=0;I<C.gi(i);++I)ne=C.j(i,I),a.F(n,ne)||(f=q.r8(),g="/extensionsRequired/"+I,ae.k(f,p.a([ne],M),g))},a6:function(n,i,a,f,g,y){var M,C,I,B=this,G=B.b,V=n.b;if(!G.b.F(0,V)){if(M=G.a,M>0&&B.fy.length===M)throw B.z=!0,p.c(b.b7);G=G.c,C=G!=null?G.j(0,V):null,y!=null?B.fy.push(new W.cA(n,C,null,y,i)):(I=a!=null?b.c.l(a):f,G=g?"":B.c0(I),B.fy.push(new W.cA(n,C,G,null,i)))}},p:function(n,i){return this.a6(n,null,null,i,!1,null)},E:function(n,i){return this.a6(n,i,null,null,!1,null)},k:function(n,i,a){return this.a6(n,i,null,a,!1,null)},R:function(n){return this.a6(n,null,null,null,!1,null)},av:function(n,i,a){return this.a6(n,i,null,null,a,null)},X:function(n,i){return this.a6(n,null,i,null,!1,null)},aE:function(n,i,a){return this.a6(n,i,a,null,!1,null)},bB:function(n,i){return this.a6(n,null,null,null,!1,i)},a_:function(n,i,a){return this.a6(n,i,null,null,!1,a)}},me.fS.prototype={$1:function(n){return n.a},$S:55},me.fR.prototype={$0:function(){return p.a([],Y.gd)},$S:56},me.fT.prototype={$1:function(n){var i;return n.toString,i=p.pa(n,"~","~0"),p.pa(i,"/","~1")},$S:57},me.fW.prototype={$1:function(n){return n.a===this.a},$S:22},me.fX.prototype={$0:function(){return b.d.b5(b.ak,new me.fU(this.a),new me.fV)},$S:59},me.fU.prototype={$1:function(n){return n.a===this.a},$S:22},me.fV.prototype={$0:function(){return null},$S:2},me.fY.prototype={$2:function(n,i){this.a.Q.m(0,new We.c1(n,this.b.a),i)},$S:60},me.c4.prototype={$ia3:1},we.dK.prototype={l:function(n){return this.b}},we.dy.prototype={l:function(n){return this.b}},we.cL.prototype={l:function(n){return this.b}},we.c2.prototype={l:function(n){return this.b}},we.c3.prototype={},we.i7.prototype={$1:function(n){var i,a,f,g=this.a;if(!g.c)if(ee.X(n)<9){g.a.I(),this.b.M(b.a2);return}else{switch(i=we.tc(n),a=g.a,f=this.b,i){case b.aB:g.b=new we.ij(f,a);break;case b.aC:i=new Uint8Array(13),g.b=new we.jr(b.r,b.p,i,new Uint8Array(32),f,a);break;case b.aD:g.b=new we.kZ(new Uint8Array(30),f,a);break;default:a.I(),f.M(b.bf);return}g.c=!0}g.b.B(0,n)},$S:23},we.i9.prototype={$1:function(n){this.a.a.I(),this.b.M(n)},$S:24},we.i8.prototype={$0:function(){var n=this.a.b;n.b.I(),n=n.a,n.a.a===0&&n.M(b.a2)},$C:"$0",$R:0,$S:2},we.i6.prototype={$2:function(n,i){var a,f,g;for(a=i.length,f=ee.M(n),g=0;g<a;++g)if(!ee.aA(f.j(n,g),i[g]))return!1;return!0},$S:63},we.i5.prototype={},we.ij.prototype={B:function(n,i){var a,f;try{this.du(i)}catch(g){if(f=p.E(g),f instanceof we.aP)a=f,this.b.I(),this.a.M(a);else throw g}},du:function(n){var i,a,f,g,y,M,C,I,B,G,V=this,Q=new we.il,Z=new we.ik;for(i=ee.M(n),a=0,f=0;a!==i.gi(n);){switch(g=i.j(n,a),V.c){case 0:if(g===255)V.c=255;else throw p.c(b.bB);break;case 255:Z.$1(g)&&(V.c=1,V.d=g,V.e=V.f=0);break;case 1:V.e=g<<8>>>0,V.c=2;break;case 2:if(y=V.e+g,V.e=y,y<2)throw p.c(b.bA);Q.$1(V.d)&&(y=V.e,V.r=new Uint8Array(y-2)),V.c=3;break;case 3:if(f=Math.min(i.gi(n)-a,V.e-V.f-2),y=Q.$1(V.d),M=V.f,C=M+f,y){if(y=V.r,V.f=C,(y&&b.j).a0(y,M,C,n,a),V.f===V.e-2){V.b.I(),n=V.r,I=n[0],i=n[1],y=n[2],M=n[3],C=n[4],B=n[5],B===3?G=b.n:G=B===1?b.a5:b.I,V.a.T(new we.c3("image/jpeg",I,G,(M<<8|C)>>>0,(i<<8|y)>>>0,b.p,b.r,!1,!1));return}}else V.f=C,C===V.e-2&&(V.c=255);a+=f;continue}++a}}},we.il.prototype={$1:function(n){return(n&240)==192&&n!==196&&n!==200&&n!==204||n===222},$S:8},we.ik.prototype={$1:function(n){return!(n===1||(n&248)==208||n===216||n===217||n===255)},$S:8},we.jr.prototype={B:function(n,i){var a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue=this,he=new we.js(ue);for(a=ee.M(i),f=ue.dx,g=ue.db,y=0,M=0;y!==a.gi(i);){switch(C=a.j(i,y),ue.y){case 0:y+=8,ue.y=1;continue;case 1:ue.c=(ue.c<<8|C)>>>0,++ue.d==4&&(ue.y=2);break;case 2:if(I=(ue.e<<8|C)>>>0,ue.e=I,++ue.f==4){switch(I){case 1229472850:if(ue.c!==13){ue.b.I(),a=ue.a,a.a.a===0&&a.M(b.o);return}ue.z=!0;break;case 1951551059:ue.Q=!0;break;case 1665684045:if(ue.c!==32){ue.b.I(),a=ue.a,a.a.a===0&&a.M(b.o);return}break;case 1934772034:if(ue.c!==1){ue.b.I(),a=ue.a,a.a.a===0&&a.M(b.o);return}break;case 1883789683:if(ue.c!==9){ue.b.I(),a=ue.a,a.a.a===0&&a.M(b.o);return}break;case 1732332865:if(ue.c!==4){ue.b.I(),a=ue.a,a.a.a===0&&a.M(b.o);return}break;case 1766015824:ue.ch=b.z,ue.cx=b.y;break;case 1229209940:switch(ue.b.I(),ue.z||ue.a.M(b.bz),a=g.buffer,i=new DataView(a,0),B=i.getUint32(0,!1),G=i.getUint32(4,!1),V=i.getUint8(8),i.getUint8(9)){case 0:Q=ue.Q?b.a6:b.a5;break;case 2:case 3:Q=ue.Q?b.w:b.n;break;case 4:Q=b.a6;break;case 6:Q=b.w;break;default:Q=b.I}a=ue.cx,a===b.p&&(a=ue.cx=b.q),f=ue.ch,f===b.r&&(f=ue.ch=b.t),ue.a.T(new we.c3("image/png",V,Q,B,G,a,f,ue.cy,!1));return}ue.c===0?ue.y=4:ue.y=3}break;case 3:switch(I=a.gi(i),Z=ue.c,ne=ue.x,M=Math.min(I-y,Z-ne),ue.e){case 1229472850:I=ne+M,ue.x=I,b.j.a0(g,ne,I,i,y);break;case 1665684045:case 1732332865:case 1883789683:I=ne+M,ue.x=I,b.j.a0(f,ne,I,i,y);break;case 1934772034:ue.ch=b.t,ue.cx=b.q,ue.x=ne+1;break;default:ue.x=ne+M}if(ue.x===ue.c){switch(ue.e){case 1665684045:ue.cx===b.p&&ue.da();break;case 1732332865:ue.ch===b.r&&ue.dc();break;case 1883789683:I=f.buffer,ae=new DataView(I,0),ae.getUint32(0,!1)!==ae.getUint32(4,!1)&&(ue.cy=!0);break}ue.y=4}y+=M;continue;case 4:++ue.r==4&&(he.$0(),ue.y=1);break}++y}},dc:function(){var n=this;if(n.ch!==b.t)switch(p.jm(n.dx.buffer,0,null).getUint32(0,!1)){case 45455:n.ch=b.t;break;case 1e5:n.ch=b.dx;break;default:n.ch=b.z}},da:function(){var n,i=this;i.cx!==b.q&&(n=p.jm(i.dx.buffer,0,null),n.getUint32(0,!1)===31270&&n.getUint32(4,!1)===32900&&n.getUint32(8,!1)===64e3&&n.getUint32(12,!1)===33e3&&n.getUint32(16,!1)===3e4&&n.getUint32(20,!1)===6e4&&n.getUint32(24,!1)===15e3&&n.getUint32(28,!1)===6e3?i.cx=b.q:i.cx=b.y)}},we.js.prototype={$0:function(){var n=this.a;n.r=n.x=n.f=n.e=n.d=n.c=0},$S:1},we.kZ.prototype={B:function(n,i){var a,f,g,y,M,C,I,B=this,G=ee.X(i),V=B.d,Q=B.c;if(G=V+Math.min(G,30-V),B.d=G,b.j.d0(Q,V,G,i),G=B.d,G>=25?G=G<30&&Q[15]!==76:G=!0,!G){if(B.b.I(),a=p.jm(Q.buffer,0,null),a.getUint32(0,!1)!==1380533830||a.getUint32(8,!1)!==1464156752){B.c3(b.a7);return}switch(a.getUint32(12,!1)){case 1448097824:f=a.getUint16(26,!0)&16383,g=a.getUint16(28,!0)&16383,y=b.n,M=!1,C=!1;break;case 1448097868:G=Q[21],V=Q[22],f=1+((G|(V&63)<<8)>>>0),G=Q[23],Q=Q[24],g=1+((V>>>6|G<<2|(Q&15)<<10)>>>0),y=(Q&16)==16?b.w:b.n,M=!1,C=!1;break;case 1448097880:I=Q[20],C=(I&2)==2,M=(I&32)==32,y=(I&16)==16?b.w:b.n,f=((Q[24]|Q[25]<<8|Q[26]<<16)>>>0)+1,g=((Q[27]|Q[28]<<8|Q[29]<<16)>>>0)+1;break;default:B.c3(b.a7);return}G=M?b.z:b.t,V=M?b.y:b.q,B.a.T(new we.c3("image/webp",8,y,f,g,V,G,!1,C))}},c3:function(n){var i;this.b.I(),i=this.a,i.a.a===0&&i.M(n)}},we.dw.prototype={$ia3:1},we.dv.prototype={$ia3:1},we.aP.prototype={l:function(n){return this.a},$ia3:1},qe.cR.prototype={l:function(n){return this.b}},qe.eX.prototype={bc:function(){var n,i=this,a=Y.X,f=Y._,g=E.a5(a,f);return g.m(0,"pointer",i.a),n=i.b,n!=null&&g.m(0,"mimeType",n),n=i.c,n!=null&&g.m(0,"storage",b.c6[n.a]),n=i.e,n!=null&&g.m(0,"uri",n),n=i.d,n!=null&&g.m(0,"byteLength",n),n=i.f,n==null?a=null:(a=E.a5(a,f),a.m(0,"width",n.d),a.m(0,"height",n.e),f=n.c,f!==b.I&&a.m(0,"format",b.cI[f.a]),f=n.f,f!==b.p&&a.m(0,"primaries",b.cB[f.a]),f=n.r,f!==b.r&&a.m(0,"transfer",b.cA[f.a]),f=n.b,f>0&&a.m(0,"bits",f)),a!=null&&g.m(0,"image",a),g}},qe.jw.prototype={aJ:function(){return this.e9()},e9:function(){var n=0,i=E.ec(Y.H),a,f=2,g,y=this,M,C,I=E.ee(function(B,G){for(B===1&&(g=G,n=f);;)switch(n){case 0:return M=!0,f=4,n=7,E.cV(y.aY(),I);case 7:return n=8,E.cV(y.aZ(),I);case 8:M&&Be.wb(y.a,y.b),y.a.ez(y.b),f=2,n=6;break;case 4:if(f=3,C=g,p.E(C)instanceof me.c4){n=1;break}else throw C;case 3:n=2;break;case 6:case 1:return E.e6(a,i);case 2:return E.e5(g,i)}});return E.e7(I,i)},aY:function(){var n=0,i=E.ec(Y.H),a=1,f,g=this,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt=E.ee(function(vt,wn){for(vt===1&&(f=wn,n=a);;)switch(n){case 0:Oe=g.b,gt=Oe.c,b.d.si(gt,0),gt.push("buffers"),B=g.a.y,G=B.b,V=Oe.dy,Q=Y.M,Z=Y.y,ne=Y.a,B=B.a,ae=B.length,ue=0;case 2:if(!(ue<G)){n=4;break}if(he=ue>=ae,y=he?null:B[ue],y==null){n=3;break}return gt.push(b.c.l(ue)),Ce=new qe.eX(Oe.O()),Ce.b="application/gltf-buffer",M=new qe.jx(g,Ce,ue),C=null,a=6,Et=ne,n=9,E.cV(M.$1(y),pt);case 9:C=Et.a(wn),a=1,n=8;break;case 6:if(a=5,lt=f,he=p.E(lt),Z.b(he))I=he,Oe.k(q.mt(),p.a([I],Q),"uri");else throw lt;n=8;break;case 5:n=1;break;case 8:C!=null&&(Ce.d=ee.X(C),ee.X(C)<y.y?Oe.E(q.px(),p.a([ee.X(C),y.y],Q)):(Oe.id&&ue===0&&!y.z&&(he=y.y,He=he+(4-(he&3)&3),ee.X(C)>He&&Oe.E(q.py(),p.a([ee.X(C)-He],Q))),he=y,he.Q==null&&(he.Q=C))),V.push(Ce.bc()),gt.pop();case 3:++ue,n=2;break;case 4:return E.e6(null,i);case 1:return E.e5(f,i)}});return E.e7(pt,i)},aZ:function(){var n=0,i=E.ec(Y.H),a=1,f,g=this,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he,Ce,He,Oe,gt,lt,Et,pt,vt=E.ee(function(wn,en){for(wn===1&&(f=en,n=a);;)switch(n){case 0:lt=g.b,Et=lt.c,b.d.si(Et,0),Et.push("images"),Q=g.a.ch,Z=Q.b,ne=lt.dy,ae=Y.M,ue=Y.y,he=lt.k1,Q=Q.a,Ce=Q.length,He=0;case 2:if(!(He<Z)){n=4;break}if(Oe=He>=Ce,y=Oe?null:Q[He],y==null){n=3;break}Et.push(b.c.l(He)),gt=new qe.eX(lt.O()),M=new qe.jy(g,gt),C=null;try{C=M.$1(y)}catch(En){if(Oe=p.E(En),ue.b(Oe))I=Oe,lt.k(q.mt(),p.a([I],ae),"uri");else throw En}B=null,n=C!=null?5:6;break;case 5:return a=8,n=11,E.cV(we.td(C),vt);case 11:B=en,Oe=B,b.d.F(he,Oe.a)||lt.E(q.pC(),p.a([B.a],ae)),a=1,n=10;break;case 8:if(a=7,pt=f,Oe=p.E(pt),Oe instanceof we.dw)lt.R(q.pF());else if(Oe instanceof we.dv)lt.R(q.pE());else if(Oe instanceof we.aP)G=Oe,lt.E(q.pz(),p.a([G],ae));else if(ue.b(Oe))V=Oe,lt.k(q.mt(),p.a([V],ae),"uri");else throw pt;n=10;break;case 7:n=1;break;case 10:B!=null&&(gt.b=B.a,y.y!=null&&y.y!==B.a&&lt.E(q.pB(),p.a([B.a,y.y],ae)),Oe=B.d,Oe!==0&&(Oe&Oe-1)>>>0==0?(Oe=B.e,Oe=!(Oe!==0&&(Oe&Oe-1)>>>0==0)):Oe=!0,Oe&&lt.E(q.pD(),p.a([B.d,B.e],ae)),Oe=B,(Oe.f===b.y||Oe.r===b.z||B.y||B.x)&&lt.R(q.pA()),y.cx=B,gt.f=B);case 6:ne.push(gt.bc()),Et.pop();case 3:++He,n=2;break;case 4:return E.e6(null,i);case 1:return E.e5(f,i)}});return E.e7(vt,i)}},qe.jx.prototype={$1:function(n){var i,a,f,g=this;if(n.a.a===0){if(i=n.x,i!=null)return a=g.b,a.c=b.aF,a.e=i.l(0),g.a.c.$1(i);if(i=n.Q,i!=null)return g.b.c=b.aE,i;if(i=g.a,a=i.b,a.id&&g.c===0&&!n.z)return g.b.c=b.dA,f=i.c.$0(),f==null&&a.R(q.q4()),f}return null},$S:64},qe.jy.prototype={$1:function(n){var i,a,f=this;if(n.a.a===0){if(i=n.z,i!=null)return a=f.b,a.c=b.aF,a.e=i.l(0),f.a.d.$1(i);if(i=n.Q,i!=null&&n.y!=null)return f.b.c=b.aE,E.mI(p.a([i],Y.d),Y.w);if(n.ch!=null&&(f.b.c=b.dz,n.ew(),i=n.Q,i!=null))return E.mI(p.a([i],Y.d),Y.w)}return null},$S:65},Be.mq.prototype={$2:function(n,i){var a,f,g,y,M,C,I,B,G=Be.lX(i);if((G==null?null:G.dx)!=null&&(G=this.a,a=G.c,b.d.si(a,0),a.push("accessors"),a.push(b.c.l(n)),f=i.dx.ge3(),f!=null))for(a=f.length,g=i.Q,y=Y.M,M=0,C=-1,I=0;I<a;++I,C=B)B=f[I],C!==-1&&B<=C&&G.k(q.pt(),p.a([M,B,C],y),"sparse"),B>=g&&G.k(q.ps(),p.a([M,B,g],y),"sparse"),++M},$S:66},Be.mr.prototype={$1:function(n){return n.cx===0},$S:3},Be.ms.prototype={$2:function(n,i){var a,f,g,y,M,C,I,B,G=this,V=i.fr,Q=i.cx,Z=new Array(Q);for(Z.fixed$length=Array,a=p.a(Z,Y.fK),Z=new Array(Q),Z.fixed$length=Array,f=p.a(Z,Y.e2),Z=Y.hc,y=i.dx,M=0;;){if(!(M<Q)){g=!1;break}if(C=Be.lX(y.j(0,"JOINTS_"+M)),I=Be.lX(y.j(0,"WEIGHTS_"+M)),(C==null?null:C.Q)===V?B=(I==null?null:I.Q)!==V:B=!0,B){g=!0;break}B=Z.a(C).ac(),a[M]=new E.aB(B.a(),p.r(B).h("aB<1>")),B=I.bf(),f[M]=new E.aB(B.a(),p.r(B).h("aB<1>")),++M}g||(Q=G.b,Z=Q.c,Z.push(b.c.l(n)),Z.push("attributes"),y=G.c,b.d.K(y,a),b.d.K(y,f),Q=Q.O(),y=G.a,G.d.push(new Be.ey(a,f,y.b-1,y.a,Q,E.aR(Y.e))),Z.pop(),Z.pop())},$S:20},Be.lZ.prototype={$1:function(n){return n.gq()==null},$S:67},Be.ey.prototype={dR:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae=this;for(i=ae.a,a=i.length,f=ae.b,g=ae.c,y=ae.e,M=Y.M,C=ae.Q,I=ae.d,B=0;B<a;++B){if(G=i[B].gq(),G==null){ae.x=!0;return}if(G>g){V=q.pp(),Q=y+"/JOINTS_"+B,n.k(V,p.a([ae.f,ae.r,G,g,I],M),Q);continue}Z=f[B].gq(),Z!==0?(C.B(0,G)?ne=!0:(V=q.po(),Q=y+"/JOINTS_"+B,n.k(V,p.a([ae.f,ae.r,G],M),Q),ne=!1),Z<0?(V=q.pu(),Q=y+"/WEIGHTS_"+B,n.k(V,p.a([ae.f,ae.r,Z],M),Q)):ne&&(V=ae.y,Q=q.nr(),Q[0]=V+Z,ae.y=Q[0],ae.z+=2e-7)):G!==0&&(V=q.pq(),Q=y+"/JOINTS_"+B,n.k(V,p.a([ae.f,ae.r,G],M),Q))}if(++ae.r==4){if(Math.abs(ae.y-1)>ae.z)for(B=0;B<a;++B)i=q.pv(),f=y+"/WEIGHTS_"+B,g=ae.f,n.k(i,p.a([g-3,g,ae.y],M),f);C.cz(0),ae.y=ae.z=ae.r=0}++ae.f}},W.bx.prototype={l:function(n){return this.b}},W.ic.prototype={},W.fZ.prototype={},W.h8.prototype={$1:function(n){return"Actual Data URI encoded data length "+p.b(n[0])+" is not equal to the declared buffer byteLength "+p.b(n[1])+"."},$S:0},W.h6.prototype={$1:function(n){return"Actual data length "+p.b(n[0])+" is less than the declared buffer byteLength "+p.b(n[1])+"."},$S:0},W.h5.prototype={$1:function(n){return"GLB-stored BIN chunk contains "+p.b(n[0])+" extra padding byte(s)."},$S:0},W.hd.prototype={$1:function(n){return"Declared minimum value for this component ("+p.b(n[0])+") does not match actual minimum ("+p.b(n[1])+")."},$S:0},W.ha.prototype={$1:function(n){return"Declared maximum value for this component ("+p.b(n[0])+") does not match actual maximum ("+p.b(n[1])+")."},$S:0},W.hb.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) less than declared minimum value "+p.b(n[1])+"."},$S:0},W.h9.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) greater than declared maximum value "+p.b(n[1])+"."},$S:0},W.hm.prototype={$1:function(n){return"Vector3 at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},W.ho.prototype={$1:function(n){return"Vector3 with sign at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" has invalid w component: "+p.b(n[2])+". Must be 1.0 or -1.0."},$S:0},W.hf.prototype={$1:function(n){return"Animation sampler output accessor element at indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},W.hl.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is not clamped to 0..1 range: "+p.b(n[1])+"."},$S:0},W.he.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is "+p.b(n[1])+"."},$S:0},W.hk.prototype={$1:function(n){return"Indices accessor element at index "+p.b(n[0])+" has value "+p.b(n[1])+" that is greater than the maximum vertex index available ("+p.b(n[2])+")."},$S:0},W.hi.prototype={$1:function(n){return"Indices accessor contains "+p.b(n[0])+" degenerate triangles (out of "+p.b(n[1])+")."},$S:0},W.hj.prototype={$1:function(n){return"Indices accessor contains primitive restart value ("+p.b(n[0])+") at index "+p.b(n[1])+"."},$S:0},W.hh.prototype={$1:function(n){return Ft.m+p.b(n[0])+" is negative: "+p.b(n[1])+"."},$S:0},W.hg.prototype={$1:function(n){return Ft.m+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},W.hr.prototype={$1:function(n){return Ft.c+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},W.hq.prototype={$1:function(n){return Ft.c+p.b(n[0])+" is greater than or equal to the number of accessor elements: "+p.b(n[1])+" >= "+p.b(n[2])+"."},$S:0},W.hp.prototype={$1:function(n){return"Matrix element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") contains invalid value: "+p.b(n[2])+"."},$S:0},W.hv.prototype={$1:function(n){return"Image data is invalid. "+p.b(n[0])},$S:0},W.hu.prototype={$1:function(n){return"Recognized image format "+("'"+p.b(n[0])+"'")+" does not match declared image format "+("'"+p.b(n[1])+"'")+"."},$S:0},W.h2.prototype={$1:function(n){return"Unexpected end of image stream."},$S:0},W.h3.prototype={$1:function(n){return"Image format not recognized."},$S:0},W.h4.prototype={$1:function(n){return"'"+p.b(n[0])+"' MIME type requires an extension."},$S:0},W.ht.prototype={$1:function(n){return"Image has non-power-of-two dimensions: "+p.b(n[0])+"x"+p.b(n[1])+"."},$S:0},W.hs.prototype={$1:function(n){return"Image contains unsupported features like non-default colorspace information, non-square pixels, or animation."},$S:0},W.h7.prototype={$1:function(n){return"Data URI is used in GLB container."},$S:0},W.hn.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is greater than the maximum joint index ("+p.b(n[3])+") set by skin "+p.b(n[4])+"."},$S:0},W.hc.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is already in use for the vertex."},$S:0},W.h1.prototype={$1:function(n){return"Weights accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has negative value "+p.b(n[2])+"."},$S:0},W.h_.prototype={$1:function(n){return"Weights accessor elements (at indices "+p.b(n[0])+".."+p.b(n[1])+") have non-normalized sum: "+p.b(n[2])+"."},$S:0},W.h0.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") is used with zero weight but has non-zero value ("+p.b(n[2])+")."},$S:0},W.ia.prototype={},W.ib.prototype={$1:function(n){return ee.ag(n[0])},$S:0},W.jA.prototype={},W.jK.prototype={$1:function(n){return"Invalid array length "+p.b(n[0])+". Valid lengths are: "+ee.bl(Y.Y.a(n[1]),W.oT(),Y.X).l(0)+"."},$S:0},W.jL.prototype={$1:function(n){var i=n[0];return"Type mismatch. Array element "+p.b(typeof i=="string"?"'"+i+"'":ee.ag(i))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jQ.prototype={$1:function(n){return"Duplicate element."},$S:0},W.jO.prototype={$1:function(n){return"Index must be a non-negative integer."},$S:0},W.jI.prototype={$1:function(n){return"Invalid JSON data. Parser output: "+p.b(n[0])},$S:0},W.jE.prototype={$1:function(n){return"Invalid URI "+("'"+p.b(n[0])+"'")+`. Parser output:
`+p.b(n[1])},$S:0},W.jM.prototype={$1:function(n){return"Entity cannot be empty."},$S:0},W.jF.prototype={$1:function(n){return n.toString,"Exactly one of "+new p.a8(n,W.d0(),p.U(n).h("a8<1,f*>")).l(0)+" properties must be defined."},$S:0},W.jP.prototype={$1:function(n){return"Value "+("'"+p.b(n[0])+"'")+" does not match regexp pattern "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jB.prototype={$1:function(n){var i=n[0];return"Type mismatch. Property value "+p.b(typeof i=="string"?"'"+i+"'":ee.ag(i))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jJ.prototype={$1:function(n){var i=n[0];return"Invalid value "+p.b(typeof i=="string"?"'"+i+"'":ee.ag(i))+". Valid values are "+ee.bl(Y.Y.a(n[1]),W.oT(),Y.X).l(0)+"."},$S:0},W.jD.prototype={$1:function(n){return"Value "+p.b(n[0])+" is out of range."},$S:0},W.jG.prototype={$1:function(n){return"Value "+p.b(n[0])+" is not a multiple of "+p.b(n[1])+"."},$S:0},W.jC.prototype={$1:function(n){return"Property "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},W.jN.prototype={$1:function(n){return"Unexpected property."},$S:0},W.jH.prototype={$1:function(n){return"Dependency failed. "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},W.jR.prototype={},W.kp.prototype={$1:function(n){return"Unknown glTF major asset version: "+p.b(n[0])+"."},$S:0},W.ko.prototype={$1:function(n){return"Unknown glTF minor asset version: "+p.b(n[0])+"."},$S:0},W.ke.prototype={$1:function(n){return"Asset minVersion "+("'"+p.b(n[0])+"'")+" is greater than version "+("'"+p.b(n[1])+"'")+"."},$S:0},W.kc.prototype={$1:function(n){return"Invalid value "+p.b(n[0])+" for GL type "+("'"+p.b(n[1])+"'")+"."},$S:0},W.kd.prototype={$1:function(n){return"Integer value is written with fractional part: "+p.b(n[0])+"."},$S:0},W.kb.prototype={$1:function(n){return"Only (u)byte and (u)short accessors can be normalized."},$S:0},W.k9.prototype={$1:function(n){return"Offset "+p.b(n[0])+" is not a multiple of componentType length "+p.b(n[1])+"."},$S:0},W.ka.prototype={$1:function(n){return"Matrix accessors must be aligned to 4-byte boundaries."},$S:0},W.kk.prototype={$1:function(n){return"Sparse accessor overrides more elements ("+p.b(n[0])+") than the base accessor contains ("+p.b(n[1])+")."},$S:0},W.kl.prototype={$1:function(n){return"Animated TRS properties will not affect a skinned mesh."},$S:0},W.k8.prototype={$1:function(n){return"Buffer's Data URI MIME-Type must be 'application/octet-stream' or 'application/gltf-buffer'. Found "+("'"+p.b(n[0])+"'")+" instead."},$S:0},W.k7.prototype={$1:function(n){return"Buffer view's byteStride ("+p.b(n[0])+") is greater than byteLength ("+p.b(n[1])+")."},$S:0},W.k6.prototype={$1:function(n){return"Only buffer views with raw vertex data can have byteStride."},$S:0},W.k5.prototype={$1:function(n){return"xmag and ymag must not be zero."},$S:0},W.k3.prototype={$1:function(n){return"yfov should be less than Pi."},$S:0},W.k2.prototype={$1:function(n){return"zfar must be greater than znear."},$S:0},W.k0.prototype={$1:function(n){return"Alpha cutoff is supported only for 'MASK' alpha mode."},$S:0},W.jV.prototype={$1:function(n){return"Invalid attribute name."},$S:0},W.kz.prototype={$1:function(n){return"All primitives must have the same number of morph targets."},$S:0},W.ky.prototype={$1:function(n){return"All primitives should contain the same number of 'JOINTS' and 'WEIGHTS' attribute sets."},$S:0},W.k_.prototype={$1:function(n){return"No POSITION attribute found."},$S:0},W.jX.prototype={$1:function(n){return"Indices for indexed attribute semantic "+("'"+p.b(n[0])+"'")+" must start with 0 and be continuous. Total expected indices: "+p.b(n[1])+", total provided indices: "+p.b(n[2])+"."},$S:0},W.jZ.prototype={$1:function(n){return"TANGENT attribute without NORMAL found."},$S:0},W.jW.prototype={$1:function(n){return"Number of JOINTS attribute semantics ("+p.b(n[0])+") does not match the number of WEIGHTS ("+p.b(n[1])+")."},$S:0},W.jY.prototype={$1:function(n){return"TANGENT attribute defined for POINTS rendering mode."},$S:0},W.kx.prototype={$1:function(n){return"The length of weights array ("+p.b(n[0])+Ft.p+p.b(n[1])+")."},$S:0},W.kv.prototype={$1:function(n){return"A node can have either a matrix or any combination of translation/rotation/scale (TRS) properties."},$S:0},W.kq.prototype={$1:function(n){return"Do not specify default transform matrix."},$S:0},W.kf.prototype={$1:function(n){return"Matrix must be decomposable to TRS."},$S:0},W.kw.prototype={$1:function(n){return"Rotation quaternion must be normalized."},$S:0},W.kr.prototype={$1:function(n){return"Unused extension "+("'"+p.b(n[0])+"'")+" cannot be required."},$S:0},W.ks.prototype={$1:function(n){return"Extension "+("'"+p.b(n[0])+"'")+" cannot be optional."},$S:0},W.kt.prototype={$1:function(n){return"Extension uses unreserved extension prefix "+("'"+p.b(n[0])+"'")+"."},$S:0},W.ku.prototype={$1:function(n){return"Extension name has invalid format."},$S:0},W.kj.prototype={$1:function(n){return"Empty node encountered."},$S:0},W.ki.prototype={$1:function(n){return"Node with a skinned mesh is not root. Parent transforms will not affect a skinned mesh."},$S:0},W.kh.prototype={$1:function(n){return"Local transforms will not affect a skinned mesh."},$S:0},W.kg.prototype={$1:function(n){return"A node with a skinned mesh is used in a scene that does not contain joint nodes."},$S:0},W.kn.prototype={$1:function(n){return"Joints do not have a common root."},$S:0},W.km.prototype={$1:function(n){return"Skeleton node is not a common root."},$S:0},W.k1.prototype={$1:function(n){return"Non-relative URI found: "+("'"+p.b(n[0])+"'")+"."},$S:0},W.jT.prototype={$1:function(n){return"This extension may be incompatible with other extensions for the object."},$S:0},W.jS.prototype={$1:function(n){return"Prefer JSON Objects for extras."},$S:0},W.k4.prototype={$1:function(n){return"This property should not be defined as it will not be used."},$S:0},W.jU.prototype={$1:function(n){return"outerConeAngle ("+p.b(n[1])+") is less than or equal to innerConeAngle ("+p.b(n[0])+")."},$S:0},W.ir.prototype={},W.j0.prototype={$1:function(n){return"Accessor's total byteOffset "+p.b(n[0])+" isn't a multiple of componentType length "+p.b(n[1])+"."},$S:0},W.j5.prototype={$1:function(n){return"Referenced bufferView's byteStride value "+p.b(n[0])+" is less than accessor element's length "+p.b(n[1])+"."},$S:0},W.iQ.prototype={$1:function(n){return"Accessor (offset: "+p.b(n[0])+", length: "+p.b(n[1])+") does not fit referenced bufferView ["+p.b(n[2])+"] length "+p.b(n[3])+"."},$S:0},W.iC.prototype={$1:function(n){return"Override of previously set accessor usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},W.j6.prototype={$1:function(n){return"Animation channel has the same target as channel "+p.b(n[0])+"."},$S:0},W.iy.prototype={$1:function(n){return"Animation channel cannot target TRS properties of a node with defined matrix."},$S:0},W.ix.prototype={$1:function(n){return"Animation channel cannot target WEIGHTS when mesh does not have morph targets."},$S:0},W.iA.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for animation input accessor."},$S:0},W.iB.prototype={$1:function(n){return"Invalid Animation sampler input accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+"."},$S:0},W.iw.prototype={$1:function(n){return"Invalid animation sampler output accessor format "+("'"+p.b(n[0])+"'")+" for path "+("'"+p.b(n[2])+"'")+". Must be one of "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+"."},$S:0},W.iz.prototype={$1:function(n){return"Animation sampler output accessor with "+("'"+p.b(n[0])+"'")+" interpolation must have at least "+p.b(n[1])+" elements. Got "+p.b(n[2])+"."},$S:0},W.iv.prototype={$1:function(n){return"Animation sampler output accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},W.iF.prototype={$1:function(n){return"Buffer refers to an unresolved GLB binary chunk."},$S:0},W.iD.prototype={$1:function(n){return"BufferView does not fit buffer ("+p.b(n[0])+") byteLength ("+p.b(n[1])+")."},$S:0},W.j4.prototype={$1:function(n){return"Override of previously set bufferView target or usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},W.iE.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views containing image data."},$S:0},W.iX.prototype={$1:function(n){return"Accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},W.iI.prototype={$1:function(n){return"Invalid accessor format "+("'"+p.b(n[0])+"'")+" for this attribute semantic. Must be one of "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+"."},$S:0},W.iJ.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for POSITION attribute accessor."},$S:0},W.iG.prototype={$1:function(n){return"bufferView.byteStride must be defined when two or more accessors use the same buffer view."},$S:0},W.iH.prototype={$1:function(n){return"Vertex attribute data must be aligned to 4-byte boundaries."},$S:0},W.iP.prototype={$1:function(n){return"bufferView.byteStride must not be defined for indices accessor."},$S:0},W.iO.prototype={$1:function(n){return"Invalid indices accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+". "},$S:0},W.iN.prototype={$1:function(n){return"Number of vertices or indices ("+p.b(n[0])+") is not compatible with used drawing mode ("+("'"+p.b(n[1])+"'")+")."},$S:0},W.iM.prototype={$1:function(n){return"Material is incompatible with mesh primitive: Texture binding "+("'"+p.b(n[0])+"'")+" needs 'TEXCOORD_"+p.b(n[1])+"' attribute."},$S:0},W.iR.prototype={$1:function(n){return"All accessors of the same primitive must have the same count."},$S:0},W.iL.prototype={$1:function(n){return"No base accessor for this attribute semantic."},$S:0},W.iK.prototype={$1:function(n){return"Base accessor has different count."},$S:0},W.j3.prototype={$1:function(n){return"Node is a part of a node loop."},$S:0},W.iS.prototype={$1:function(n){return"Value overrides parent of node "+p.b(n[0])+"."},$S:0},W.iV.prototype={$1:function(n){var i="The length of weights array ("+p.b(n[0])+Ft.p,a=n[1];return i+p.b(a==null?0:a)+")."},$S:0},W.iU.prototype={$1:function(n){return"Node has skin defined, but mesh has no joints data."},$S:0},W.iT.prototype={$1:function(n){return"Node uses skinned mesh, but has no skin defined."},$S:0},W.iW.prototype={$1:function(n){return"Node "+p.b(n[0])+" is not a root node."},$S:0},W.iY.prototype={$1:function(n){return"Invalid IBM accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+". "},$S:0},W.iZ.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views used by inverse bind matrices accessors."},$S:0},W.iu.prototype={$1:function(n){return"Invalid MIME type "+("'"+p.b(n[0])+"'")+" for the texture source. Valid MIME types are "+ee.bl(Y.Y.a(n[1]),W.d0(),Y.X).l(0)+"."},$S:0},W.it.prototype={$1:function(n){return"Extension is not declared in extensionsUsed."},$S:0},W.is.prototype={$1:function(n){return"Unexpected location for this extension."},$S:0},W.j_.prototype={$1:function(n){return"Unresolved reference: "+p.b(n[0])+"."},$S:0},W.j1.prototype={$1:function(n){return"Cannot validate an extension as it is not supported by the validator: "+("'"+p.b(n[0])+"'")+"."},$S:0},W.j2.prototype={$1:function(n){return"This object may be unused."},$S:0},W.hy.prototype={},W.hE.prototype={$1:function(n){return"Invalid GLB magic value ("+p.b(n[0])+")."},$S:0},W.hD.prototype={$1:function(n){return"Invalid GLB version value "+p.b(n[0])+"."},$S:0},W.hC.prototype={$1:function(n){return"Declared GLB length ("+p.b(n[0])+") is too small."},$S:0},W.hM.prototype={$1:function(n){return"Length of "+p.b(n[0])+" chunk is not aligned to 4-byte boundaries."},$S:0},W.hA.prototype={$1:function(n){return"Declared length ("+p.b(n[0])+") does not match GLB length ("+p.b(n[1])+")."},$S:0},W.hL.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") length ("+p.b(n[1])+") does not fit total GLB length."},$S:0},W.hH.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") cannot have zero length."},$S:0},W.hI.prototype={$1:function(n){return"Chunk of type "+p.b(n[0])+" has already been used."},$S:0},W.hB.prototype={$1:function(n){return"Unexpected end of chunk header."},$S:0},W.hz.prototype={$1:function(n){return"Unexpected end of chunk data."},$S:0},W.hF.prototype={$1:function(n){return"Unexpected end of header."},$S:0},W.hK.prototype={$1:function(n){return"First chunk must be of JSON type. Found "+p.b(n[0])+" instead."},$S:0},W.hJ.prototype={$1:function(n){return"BIN chunk must be the second chunk."},$S:0},W.hG.prototype={$1:function(n){return"Unknown GLB chunk type: "+p.b(n[0])+"."},$S:0},W.cA.prototype={gba:function(){var n=ee.rI(this.a.c.$1(this.e));return n},gG:function(n){return b.a.gG(this.l(0))},N:function(n,i){return i==null?!1:i instanceof W.cA&&i.l(0)===this.l(0)},l:function(n){var i=this,a=i.c;return a!=null&&a.length!==0?p.b(a)+": "+i.gba():(a=i.d,a!=null?"@"+p.b(a)+": "+i.gba():i.gba())}},We.c0.prototype={v:function(n,i){var a=this.d,f=this.e=n.ch.j(0,a);a!==-1&&(f==null?i.k(q.N(),p.a([a],Y.M),"source"):f.a$=!0)},bY:function(n,i){var a,f=this.e;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&a!=="image/webp"&&i.k(q.ni(),p.a([a,b.cC],Y.M),"source")},$ick:1},De.bs.prototype={v:function(n,i){var a,f,g=i.c;g.push("lights"),a=this.d,f=ee.eA(g.slice(0),p.U(g).c),i.y.m(0,a,f),a.a9(new De.iq(i,n)),g.pop()}},De.iq.prototype={$2:function(n,i){var a=this.a.c;a.push(b.c.l(n)),a.pop()},$S:69},De.b7.prototype={},De.c6.prototype={},De.c7.prototype={v:function(n,i){var a,f,g=n.a.j(0,"KHR_lights_punctual");g instanceof De.bs?(a=this.d,f=this.e=g.d.j(0,a),a!==-1&&(f==null?i.k(q.N(),p.a([a],Y.M),"light"):f.a$=!0)):i.E(q.d1(),p.a(["/extensions/KHR_lights_punctual"],Y.M))}},Me.c8.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("clearcoatTexture"),f.v(n,i),a.pop()),f=this.r,f!=null&&(a=i.c,a.push("clearcoatRoughnessTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("clearcoatNormalTexture"),f.v(n,i),a.pop())}},Pe.c9.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("diffuseTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("specularGlossinessTexture"),f.v(n,i),a.pop())}},Ve.ca.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("sheenColorTexture"),f.v(n,i),a.pop()),f=this.r,f!=null&&(a=i.c,a.push("sheenRoughnessTexture"),f.v(n,i),a.pop())}},Me.cb.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("transmissionTexture"),f.v(n,i),a.pop())}},Ie.cc.prototype={},Ye.cd.prototype={v:function(n,i){var a,f;for(a=i.e,f=this;f!=null;)if(f=a.j(0,f),f instanceof we.aS){f.dx.m(0,i.O(),this.r);break}}},We.T.prototype={},We.a4.prototype={},We.c1.prototype={gG:function(n){var i=ee.aL(this.a),a=ee.aL(this.b);return Pe.oG(Pe.fy(Pe.fy(0,b.c.gG(i)),b.c.gG(a)))},N:function(n,i){return i==null?!1:i instanceof We.c1&&this.b==i.b&&this.a==i.a}},We.ce.prototype={},We.eY.prototype={},Pe.d9.prototype={bU:function(){var n=this,i=n.d=n.c.bM(n.gdn(),n.gdr(),n.gcg()),a=n.dy;return a.e=i.gee(),a.f=i.geh(),a.r=new Pe.hP(n),n.e.a},aX:function(){this.d.I();var n=this.e;n.a.a===0&&n.T(new Fe.as("model/gltf-binary",null,this.fx))},dq:function(n){var i,a,f,g,y,M,C,I,B,G,V,Q,Z,ne,ae,ue,he=this,Ce="model/gltf-binary",He="0";for(he.d.aK(),i=ee.M(n),a=Y.f,f=Y.G,g=Y.M,y=he.a,M=0,C=0;M!==i.gi(n);)switch(he.r){case 0:if(I=i.gi(n),B=he.x,C=Math.min(I-M,12-B),I=B+C,he.x=I,b.j.a0(y,B,I,n,M),M+=C,he.y=C,he.x!==12)break;if(G=he.b.getUint32(0,!0),G!==1179937895){he.f.a_(q.pK(),p.a([G],g),0),he.d.I(),i=he.e,i.a.a===0&&i.T(new Fe.as(Ce,null,he.fx));return}if(V=he.b.getUint32(4,!0),V!==2){he.f.a_(q.pL(),p.a([V],g),4),he.d.I(),i=he.e,i.a.a===0&&i.T(new Fe.as(Ce,null,he.fx));return}I=he.z=he.b.getUint32(8,!0),I<=he.y&&he.f.a_(q.pN(),p.a([I],g),8),he.r=1,he.x=0;break;case 1:if(I=i.gi(n),B=he.x,C=Math.min(I-M,8-B),I=B+C,he.x=I,b.j.a0(y,B,I,n,M),M+=C,he.y+=C,he.x!==8)break;switch(he.ch=he.b.getUint32(0,!0),I=he.b.getUint32(4,!0),he.cx=I,(he.ch&3)!=0&&(B=he.f,Q=q.pG(),Z=he.y,B.a_(Q,p.a(["0x"+b.a.am(b.c.ap(I,16),8,He)],g),Z-8)),he.y+he.ch>he.z&&he.f.a_(q.pH(),p.a(["0x"+b.a.am(b.c.ap(he.cx,16),8,He),he.ch],g),he.y-8),he.Q===0&&he.cx!==1313821514&&he.f.a_(q.pS(),p.a(["0x"+b.a.am(b.c.ap(he.cx,16),8,He)],g),he.y-8),I=he.cx,I===5130562&&he.Q>1&&!he.fr&&he.f.a_(q.pO(),p.a(["0x"+b.a.am(b.c.ap(I,16),8,He)],g),he.y-8),ne=new Pe.hN(he),I=he.cx,I){case 1313821514:he.ch===0&&(B=he.f,Q=q.pJ(),Z=he.y,B.a_(Q,p.a(["0x"+b.a.am(b.c.ap(I,16),8,He)],g),Z-8)),ne.$1$seen(he.cy),he.cy=!0;break;case 5130562:ne.$1$seen(he.fr),he.fr=!0;break;default:he.f.a_(q.pT(),p.a(["0x"+b.a.am(b.c.ap(I,16),8,He)],g),he.y-8),he.r=4294967295}++he.Q,he.x=0;break;case 1313821514:C=Math.min(i.gi(n)-M,he.ch-he.x),he.db==null&&(I=he.dy,B=he.f,I=new Fe.cy(new E.an(I,p.r(I).h("an<1>")),new E.ax(new E.C(q.x,a),f)),I.e=B,he.db=I,he.dx=I.bU()),I=he.dy,ae=M+C,B=i.Z(n,M,ae),I.b>=4&&p.a2(I.bl()),Q=I.b,(Q&1)!=0?I.ak(B):(Q&3)==0&&(I=I.aV(),B=new E.cn(B),ue=I.c,ue==null?I.b=I.c=B:(ue.say(B),I.c=B)),I=he.x+=C,he.y+=C,I===he.ch&&(he.dy.a2(),he.r=1,he.x=0),M=ae;break;case 5130562:I=i.gi(n),B=he.ch,C=Math.min(I-M,B-he.x),I=he.fx,I==null&&(I=he.fx=new Uint8Array(B)),B=he.x,Q=B+C,he.x=Q,b.j.a0(I,B,Q,n,M),M+=C,he.y+=C,he.x===he.ch&&(he.r=1,he.x=0);break;case 4294967295:I=i.gi(n),B=he.ch,Q=he.x,C=Math.min(I-M,B-Q),Q+=C,he.x=Q,M+=C,he.y+=C,Q===B&&(he.r=1,he.x=0);break}he.d.an()},ds:function(){var n,i,a=this;switch(a.r){case 0:a.f.bB(q.pR(),a.y),a.aX();break;case 1:a.x!==0?(a.f.bB(q.pQ(),a.y),a.aX()):(n=a.z,i=a.y,n!==i&&a.f.a_(q.pM(),p.a([n,i],Y.M),a.y),n=a.dx,n!=null?n.ao(0,new Pe.hO(a),a.gcg(),Y.P):a.e.T(new Fe.as("model/gltf-binary",null,a.fx)));break;default:a.ch>0&&a.f.bB(q.pP(),a.y),a.aX()}},dt:function(n){var i;this.d.I(),i=this.e,i.a.a===0&&i.M(n)},$iet:1},Pe.hP.prototype={$0:function(){var n=this.a;(n.dy.b&4)!=0?n.d.an():n.aX()},$S:2},Pe.hN.prototype={$1$seen:function(n){var i=this.a;n?(i.f.a_(q.pI(),p.a(["0x"+b.a.am(b.c.ap(i.cx,16),8,"0")],Y.M),i.y-8),i.r=4294967295):i.r=i.cx},$0:function(){return this.$1$seen(null)},$S:72},Pe.hO.prototype={$1:function(n){var i=this.a,a=n==null?null:n.b;i.e.T(new Fe.as("model/gltf-binary",a,i.fx))},$S:73},Fe.as.prototype={},Fe.hS.prototype={$0:function(){return this.a.b.aK()},$S:1},Fe.hT.prototype={$0:function(){return this.a.b.an()},$S:1},Fe.hR.prototype={$0:function(){return this.a.b.I()},$S:74},Fe.hU.prototype={$1:function(n){var i,a,f,g,y=this,M=null,C=y.a;if(!C.a){if(i=ee.M(n),i.gu(n)){C.b.I(),y.b.a2(),y.c.M(b.Z);return}if(a=i.j(n,0),a===103)i=y.b,f=y.d,g=new Uint8Array(12),i=new Pe.d9(g,new E.an(i,p.r(i).h("an<1>")),new E.ax(new E.C(q.x,Y.f),Y.G)),f.id=!0,i.f=f,i.b=p.jm(g.buffer,0,M),i.dy=E.o6(M,M,M,Y.w),y.c.T(i),C.a=!0;else if(i=a===123||a===9||a===32||a===10||a===13||a===239,f=y.c,g=y.b,i)f.T(Fe.t9(new E.an(g,p.r(g).h("an<1>")),y.d)),C.a=!0;else{C.b.I(),g.a2(),f.M(b.Z);return}}y.b.B(0,n)},$S:23},Fe.cy.prototype={bU:function(){var n=this,i=p.a([],Y.M),a=new E.a9("");return n.d=new E.lI(new E.fx(!1),new E.lw(b.a1.gcD().a,new E.fo(new Fe.hQ(n),i,Y.cy),a),a),n.b=n.a.bM(n.gdw(),n.gdA(),n.gdC()),n.c.a},dz:function(n){var i,a,f=this;f.b.aK(),f.f&&(a=ee.M(n),a.ga3(n)&&a.j(n,0)===239&&f.e.av(q.fF(),p.a(["BOM found at the beginning of UTF-8 stream."],Y.M),!0),f.f=!1);try{f.d.dP(n,0,ee.X(n),!1),f.b.an()}catch(g){if(a=p.E(g),a instanceof E.aD)i=a,f.e.av(q.fF(),p.a([i],Y.M),!0),f.b.I(),f.c.b3();else throw g}},dD:function(n){var i;this.b.I(),i=this.c,i.a.a===0&&i.M(n)},dB:function(){var n,i,a=this;try{a.d.a2()}catch(f){if(i=p.E(f),i instanceof E.aD)n=i,a.e.av(q.fF(),p.a([n],Y.M),!0),a.b.I(),a.c.b3();else throw f}},$iet:1},Fe.hQ.prototype={$1:function(n){var i,a,f=n[0];if(Y.t.b(f))try{a=this.a,i=de.nI(f,a.e),a.c.T(new Fe.as("model/gltf+json",i,null))}catch(g){if(p.E(g)instanceof me.c4)a=this.a,a.b.I(),a.c.b3();else throw g}else a=this.a,a.e.av(q.Z(),p.a([f,"object"],Y.M),!0),a.b.I(),a.c.b3()},$S:75},Fe.db.prototype={l:function(n){return"Invalid data: could not detect glTF format."},$ia3:1},oe.m3.prototype={$2:function(n,i){this.a.$1(n),p.aJ(i)&&i>=0||(this.b.m(0,n,-1),this.c.p(q.fE(),n))},$S:6},oe.m4.prototype={$2:function(n,i){this.a.$1(n),p.aJ(i)&&i>=0||(this.b.m(0,n,-1),this.c.p(q.fE(),n))},$S:6},oe.m5.prototype={$1:function(n){return n.af(0,Y.X,Y.e)},$S:76},oe.m2.prototype={$0:function(){return p.a([],Y.bH)},$S:77},oe.L.prototype={j:function(n,i){return i==null||i<0||i>=this.a.length?null:this.a[i]},m:function(n,i,a){this.a[i]=a},gi:function(n){return this.b},si:function(n,i){throw p.c(E.ab("Changing length is not supported"))},l:function(n){return E.id(this.a,"[","]")},a9:function(n){var i,a,f,g;for(i=this.b,a=this.a,f=0;f<i;++f)g=a[f],g!=null&&n.$2(f,g)}},oe.Y.prototype={aw:function(n){return!0}},oe.f4.prototype={Y:function(n,i,a,f){var g=this,y=g.c,M=y!=null?y.$1(f):f;return y=g.a+M*M,g.a=y,a===2&&(Math.abs(Math.sqrt(y)-1)>.00674&&n.k(q.nb(),p.a([i-2,i,Math.sqrt(g.a)],Y.M),g.b),g.a=0),!0}},oe.f5.prototype={Y:function(n,i,a,f){var g=this,y=g.c,M=y!=null?y.$1(f):f;return a===3?M!==1&&M!==-1&&n.k(q.pn(),p.a([i-3,i,M],Y.M),g.b):(y=g.a+M*M,g.a=y,a===2&&(Math.abs(Math.sqrt(y)-1)>.00674&&n.k(q.nb(),p.a([i-2,i,Math.sqrt(g.a)],Y.M),g.b),g.a=0)),!0}},oe.en.prototype={Y:function(n,i,a,f){return(1<f||0>f)&&n.k(q.pr(),p.a([i,f],Y.M),this.a),!0}},Pe.kW.prototype={bc:function(){var n,i,a,f,g,y,M,C,I,B,G,V,Q=this,Z=Y.X,ne=Y._,ae=E.a5(Z,ne),ue=Q.a;for(ue!=null&&ae.m(0,"uri",ue.l(0)),ue=Q.c,n=ue==null,(n?null:ue.a)!=null&&ae.m(0,"mimeType",n?null:ue.a),ae.m(0,"validatorVersion","2.0.0-dev.3.3"),Q.d&&ae.m(0,"validatedAt",new E.d5(Date.now(),!1).es().er()),ue=Q.b,i=ue.fy,a=E.a5(Z,ne),f=p.a([0,0,0,0],Y.V),n=new Array(i.length),n.fixed$length=Array,g=p.a(n,Y.j),n=g.length,y=0;y<n;++y)M=i[y],C=M.b,I=C==null,B=(I?M.a.a:C).a,f[B]=f[B]+1,B=M.a,G=M.gba(),I&&(C=B.a),V=E.mF(["code",B.b,"message",G,"severity",C.a],Z,ne),C=M.c,C!=null?V.m(0,"pointer",C):(C=M.d,C!=null&&V.m(0,"offset",C)),g[y]=V;return a.m(0,"numErrors",f[0]),a.m(0,"numWarnings",f[1]),a.m(0,"numInfos",f[2]),a.m(0,"numHints",f[3]),a.m(0,"messages",g),a.m(0,"truncated",ue.z),ae.m(0,"issues",a),Z=Q.dm(),Z!=null&&ae.m(0,"info",Z),ae},dm:function(){var n,i,a,f,g,y,M,C,I,B,G=null,V=this.c,Q=V==null?G:V.b;if(V=Q==null?G:Q.x,(V==null?G:V.f)==null)return G;for(n=E.a5(Y.X,Y._),V=Q.x,n.m(0,"version",V.f),i=V.r,i!=null&&n.m(0,"minVersion",i),V=V.e,V!=null&&n.m(0,"generator",V),V=Q.d,i=ee.M(V),i.ga3(V)&&(V=i.bX(V),n.m(0,"extensionsUsed",E.dh(V,!1,p.r(V).c))),V=Q.e,i=ee.M(V),i.ga3(V)&&(V=i.bX(V),n.m(0,"extensionsRequired",E.dh(V,!1,p.r(V).c))),V=this.b,i=V.fr,i.gu(i)||n.m(0,"resources",V.fr),n.m(0,"animationCount",Q.r.b),n.m(0,"materialCount",Q.cx.b),V=Q.cy,n.m(0,"hasMorphTargets",V.bC(V,new Pe.kY)),i=Q.fx,n.m(0,"hasSkins",!i.gu(i)),i=Q.fy,n.m(0,"hasTextures",!i.gu(i)),n.m(0,"hasDefaultScene",Q.dy!=null),V=new p.a6(V,V.gi(V),V.$ti.h("a6<m.E>")),a=0,f=0,g=0,y=0,M=0,C=0;V.n();)if(I=V.d,i=I.x,i!=null)for(a+=i.b,i=new p.a6(i,i.gi(i),i.$ti.h("a6<m.E>"));i.n();)I=i.d,B=I.fr,B!==-1&&(M+=B),C+=I.geu(),f=Math.max(f,I.dx.a),g=Math.max(g,I.db),y=Math.max(y,I.cx*4);return n.m(0,"drawCallCount",a),n.m(0,"totalVertexCount",M),n.m(0,"totalTriangleCount",C),n.m(0,"maxUVs",g),n.m(0,"maxInfluences",y),n.m(0,"maxAttributes",f),n}},Pe.kY.prototype={$1:function(n){var i=n.x;return i!=null&&i.bC(i,new Pe.kX)},$S:78},Pe.kX.prototype={$1:function(n){return n.fx!=null},$S:3},Pe.m7.prototype={$2:function(n,i){var a=536870911&n+ee.aL(i);return a=536870911&a+((524287&a)<<10),a^a>>>6},$S:79},Te.cD.prototype={d_:function(n){var i=n.a,a=this.a;a[15]=i[15],a[14]=i[14],a[13]=i[13],a[12]=i[12],a[11]=i[11],a[10]=i[10],a[9]=i[9],a[8]=i[8],a[7]=i[7],a[6]=i[6],a[5]=i[5],a[4]=i[4],a[3]=i[3],a[2]=i[2],a[1]=i[1],a[0]=i[0]},l:function(n){var i=this;return"[0] "+i.aN(0).l(0)+`
[1] `+i.aN(1).l(0)+`
[2] `+i.aN(2).l(0)+`
[3] `+i.aN(3).l(0)+`
`},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Te.cD?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]&&a[4]===g[4]&&a[5]===g[5]&&a[6]===g[6]&&a[7]===g[7]&&a[8]===g[8]&&a[9]===g[9]&&a[10]===g[10]&&a[11]===g[11]&&a[12]===g[12]&&a[13]===g[13]&&a[14]===g[14]&&a[15]===g[15]):a=!1,a)},gG:function(n){return Pe.n0(this.a)},aN:function(n){var i=new Float32Array(4),a=this.a;return i[0]=a[n],i[1]=a[4+n],i[2]=a[8+n],i[3]=a[12+n],new Te.f9(i)},cE:function(){var n=this.a,i=n[0],a=n[5],f=n[1],g=n[4],y=i*a-f*g,M=n[6],C=n[2],I=i*M-C*g,B=n[7],G=n[3],V=i*B-G*g,Q=f*M-C*a,Z=f*B-G*a,ne=C*B-G*M;return M=n[8],G=n[9],B=n[10],C=n[11],-(G*ne-B*Z+C*Q)*n[12]+(M*ne-B*V+C*I)*n[13]-(M*Z-G*V+C*y)*n[14]+(M*Q-G*I+B*y)*n[15]},cJ:function(){var n=this.a,i=0+Math.abs(n[0])+Math.abs(n[1])+Math.abs(n[2])+Math.abs(n[3]),a=i>0?i:0;return i=0+Math.abs(n[4])+Math.abs(n[5])+Math.abs(n[6])+Math.abs(n[7]),i>a&&(a=i),i=0+Math.abs(n[8])+Math.abs(n[9])+Math.abs(n[10])+Math.abs(n[11]),i>a&&(a=i),i=0+Math.abs(n[12])+Math.abs(n[13])+Math.abs(n[14])+Math.abs(n[15]),i>a?i:a},cK:function(){var n=this.a;return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===0&&n[4]===0&&n[5]===1&&n[6]===0&&n[7]===0&&n[8]===0&&n[9]===0&&n[10]===1&&n[11]===0&&n[12]===0&&n[13]===0&&n[14]===0&&n[15]===1}},Te.eW.prototype={gaI:function(){var n=this.a,i=n[0],a=n[1],f=n[2],g=n[3];return i*i+a*a+f*f+g*g},gi:function(n){var i=this.a,a=i[0],f=i[1],g=i[2],y=i[3];return Math.sqrt(a*a+f*f+g*g+y*y)},l:function(n){var i=this.a;return p.b(i[0])+", "+p.b(i[1])+", "+p.b(i[2])+" @ "+p.b(i[3])}},Te.cJ.prototype={bi:function(n,i,a){var f=this.a;f[0]=n,f[1]=i,f[2]=a},l:function(n){var i=this.a;return"["+p.b(i[0])+","+p.b(i[1])+","+p.b(i[2])+"]"},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Te.cJ?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]):a=!1,a)},gG:function(n){return Pe.n0(this.a)},gi:function(n){var i=this.a,a=i[0],f=i[1];return i=i[2],Math.sqrt(a*a+f*f+i*i)},gaI:function(){var n=this.a,i=n[0],a=n[1];return n=n[2],i*i+a*a+n*n}},Te.f9.prototype={l:function(n){var i=this.a;return p.b(i[0])+","+p.b(i[1])+","+p.b(i[2])+","+p.b(i[3])},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Te.f9?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]):a=!1,a)},gG:function(n){return Pe.n0(this.a)},gi:function(n){var i=this.a,a=i[0],f=i[1],g=i[2];return i=i[3],Math.sqrt(a*a+f*f+g*g+i*i)}},ye.bb.prototype={},ye.hx.prototype={},ye.cP.prototype={},ye.mo.prototype={$3:function(n,i,a){var f=a.$1(ee.ag(n));return f},$S:80},ye.mk.prototype={$2:function(n,i){return new t.Promise(E.cp(new ye.mj(n,i,this.a)),Y._)},$C:"$2",$R:2,$S:81},ye.mj.prototype={$2:function(n,i){ye.fB(this.a,this.b).ao(0,new ye.mg(n),new ye.mh(this.c,i),Y.P)},$C:"$2",$R:2,$S:26},ye.mg.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},ye.mh.prototype={$2:function(n,i){return this.a.$3(n,i,this.b)},$C:"$2",$R:2,$S:15},ye.ml.prototype={$2:function(n,i){return new t.Promise(E.cp(new ye.mi(n,i,this.a)),Y._)},$C:"$2",$R:2,$S:85},ye.mi.prototype={$2:function(n,i){ye.n5(this.a,this.b).ao(0,new ye.me(n),new ye.mf(this.c,i),Y.P)},$C:"$2",$R:2,$S:26},ye.me.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},ye.mf.prototype={$2:function(n,i){return this.a.$3(n,i,this.b)},$C:"$2",$R:2,$S:15},ye.mm.prototype={$0:function(){return"2.0.0-dev.3.3"},$C:"$0",$R:0,$S:86},ye.mn.prototype={$0:function(){return E.n2(me.t4())},$C:"$0",$R:0,$S:4},ye.lU.prototype={$1:function(n){var i=new E.C(q.x,Y.q),a=new E.ax(i,Y.as),f=this.a.$1(ee.ag(n));return(f==null?null:ee.rv(f))==null?a.M(new E.ak(!1,null,null,"options.externalResourceFunction: Function must return a Promise.")):ee.rG(f,E.cp(new ye.lV(a)),E.cp(new ye.lW(a))),i},$S:87},ye.lV.prototype={$1:function(n){var i=this.a;Y.a.b(n)?i.T(n):i.M(new E.ak(!1,null,null,"options.externalResourceFunction: Promise must be fulfilled with Uint8Array or rejected."))},$S:24},ye.lW.prototype={$1:function(n){return this.a.M(new ye.eP(ee.ag(n)))},$S:10},ye.lS.prototype={$1:function(n){var i,a,f,g=this;return g.a.id&&n==null?g.b.c:(g.c!=null?i=g.d.$1(n):(a=g.e,E.aM(a,"error"),q.x,b.f,f=E.el(a),i=new E.C(q.x,Y.q),i.aT(a,f)),i)},$0:function(){return this.$1(null)},$C:"$1",$R:0,$D:function(){return[null]},$S:88},ye.lT.prototype={$1:function(n){var i,a,f,g,y=null;return this.a!=null?(i=this.b.$1(n),i=E.tR(i,p.ac(i).c)):(i=this.c,E.aM(i,"error"),a=Y.f1,f=new E.bD(y,y,y,y,a),g=E.el(i),f.aQ(i,g),f.aU(),i=new E.an(f,a.h("an<1>"))),i},$S:89},ye.eP.prototype={l:function(n){return"Node Exception: "+p.b(this.a)},$ia3:1},function(){var i=ee.cz.prototype;i.d1=i.bb,i=ee.aF.prototype,i.d2=i.l,i=E.m.prototype,i.d3=i.a0,i=E.dV.prototype,i.d4=i.a2}(),function(){var i=pe._static_1,a=pe._static_0,f=pe._static_2,g=pe._instance_2u,y=pe._instance_0u,M=pe.installInstanceTearOff,C=pe._instance_1i,I=pe._instance_1u;i(E,"vk","tZ",11),i(E,"vl","u_",11),i(E,"vm","u0",11),a(E,"oS","v7",1),f(E,"vn","v0",14),g(E.C.prototype,"gde","aB",14),y(E.cS.prototype,"gdS","a2",50);var B;y(B=E.dA.prototype,"gcm","b_",1),y(B,"gcn","b0",1),M(B=E.cK.prototype,"gee",0,0,null,["$1","$0"],["cQ","aK"],51,0),y(B,"geh","an",1),y(B,"gcm","b_",1),y(B,"gcn","b0",1),C(E.aZ.prototype,"gcA","F",53),f(me,"vg","rM",91),f(me,"vf","rL",92),f(me,"vd","rJ",93),f(me,"ve","rK",94),I(me.a0.prototype,"gbP","ed",115),f(Se,"vi","rO",95),f(Se,"vh","rN",96),f(Te,"vj","rP",97),f(ye,"vo","rU",98),f(de,"vp","rT",99),f(Re,"vs","rX",100),f(Re,"vq","rV",101),f(Re,"vr","rW",102),f(Te,"vG","te",103),f(we,"vZ","tu",104),f(we,"w0","tE",105),f(we,"w_","tD",106),f(we,"p3","tC",107),f(we,"bi","tT",108),f(Ie,"w1","tx",109),f(de,"w2","tB",110),f(Te,"w3","tO",111),f(Me,"w4","tP",112),f(Be,"w5","tQ",113),f(Ve,"w7","tU",114),i(W,"d0","v3",28),i(W,"oT","uZ",28),i(We,"vz","uN",12),f(We,"vy","t8",117),f(De,"vN","tk",118),f(De,"vO","tl",119),f(De,"vP","tm",120),f(Me,"vQ","tn",121),f(Pe,"vR","to",122),f(Ve,"vS","tp",123),f(Me,"vT","tq",124),f(Ie,"vU","tr",125),f(Ye,"vW","ts",84),I(B=Pe.d9.prototype,"gdn","dq",25),y(B,"gdr","ds",1),I(B,"gcg","dt",10),I(B=Fe.cy.prototype,"gdw","dz",25),I(B,"gdC","dD",10),y(B,"gdA","dB",1),i(Ve,"vV","uO",12)}(),function(){var i=pe.mixin,a=pe.inherit,f=pe.inheritMany;a(E.e,null),f(E.e,[p.mD,ee.cz,ee.aC,E.i,p.d3,E.I,p.bZ,E.F,E.dN,p.a6,E.H,p.d6,p.d8,p.f7,p.cG,E.dj,p.cv,p.ig,p.kJ,p.eS,p.d7,p.dS,p.lA,p.j7,p.df,p.ih,p.ly,p.aI,p.fj,p.dX,E.lG,E.fc,E.cO,E.aB,E.ff,E.cM,E.C,E.fd,E.aW,E.f0,E.cS,E.fs,E.fe,E.cK,E.fn,E.fh,E.lh,E.fq,E.ek,E.lJ,E.dI,E.cQ,E.lx,E.dM,E.m,E.fw,E.kI,E.eo,E.le,E.em,E.fx,E.d5,E.eT,E.ds,E.dD,E.aD,E.cC,E.k,E.fr,E.a9,E.e2,E.kL,E.fp,de.fk,oe.Y,de.kQ,de.bU,de.bS,de.u,me.kV,me.j,me.c4,we.dK,we.dy,we.cL,we.c2,we.c3,we.i5,we.dw,we.dv,we.aP,qe.cR,qe.eX,qe.jw,Be.ey,W.bx,W.ic,W.cA,We.T,We.a4,We.c1,We.ce,We.eY,Pe.d9,Fe.as,Fe.cy,Fe.db,Pe.kW,Te.cD,Te.eW,Te.cJ,Te.f9,ye.eP]),f(ee.cz,[ee.dd,ee.cB,ee.aF,ee.p,ee.c5,ee.br,p.dm]),f(ee.aF,[ee.eU,ee.cl,ee.aQ,ye.bb,ye.hx,ye.cP]),a(ee.ii,ee.p),f(ee.c5,[ee.de,ee.eB]),f(E.i,[p.bE,p.n,p.b9,p.l_,p.bc,p.dz,E.dc]),f(p.bE,[p.bX,p.e4]),a(p.dC,p.bX),a(p.dx,p.e4),a(p.b3,p.dx),a(E.di,E.I),f(E.di,[p.bY,p.aG,E.dG,E.fl]),f(p.bZ,[p.fQ,p.jt,p.f1,p.im,p.m9,p.ma,p.mb,E.lb,E.la,E.lc,E.ld,E.lH,E.lK,E.lL,E.m_,E.li,E.lq,E.lm,E.ln,E.lo,E.lk,E.lp,E.lj,E.lt,E.lu,E.ls,E.lr,E.kC,E.kD,E.kE,E.kF,E.kG,E.lF,E.lE,E.lg,E.lf,E.lz,E.lY,E.lD,E.lC,E.j8,E.j9,E.kT,E.kU,E.jn,E.kN,E.kO,E.kP,E.lP,E.lO,E.lQ,E.lR,E.lM,me.l6,me.l7,me.l8,me.l9,me.l4,me.l5,me.l0,me.l1,me.l2,me.l3,Se.fH,Se.fI,de.i0,de.i1,de.i2,de.hZ,de.i_,de.hX,de.hY,de.hV,de.hW,de.i3,de.i4,we.jb,Ie.jl,Ie.jc,Ie.jd,Ie.je,Ie.jg,Ie.jh,Ie.ji,Ie.jj,Ie.jk,Ie.jf,de.jo,de.jp,de.jq,Me.jz,Be.kB,me.fS,me.fR,me.fT,me.fW,me.fX,me.fU,me.fV,me.fY,we.i7,we.i9,we.i8,we.i6,we.il,we.ik,we.js,qe.jx,qe.jy,Be.mq,Be.mr,Be.ms,Be.lZ,W.h8,W.h6,W.h5,W.hd,W.ha,W.hb,W.h9,W.hm,W.ho,W.hf,W.hl,W.he,W.hk,W.hi,W.hj,W.hh,W.hg,W.hr,W.hq,W.hp,W.hv,W.hu,W.h2,W.h3,W.h4,W.ht,W.hs,W.h7,W.hn,W.hc,W.h1,W.h_,W.h0,W.ib,W.jK,W.jL,W.jQ,W.jO,W.jI,W.jE,W.jM,W.jF,W.jP,W.jB,W.jJ,W.jD,W.jG,W.jC,W.jN,W.jH,W.kp,W.ko,W.ke,W.kc,W.kd,W.kb,W.k9,W.ka,W.kk,W.kl,W.k8,W.k7,W.k6,W.k5,W.k3,W.k2,W.k0,W.jV,W.kz,W.ky,W.k_,W.jX,W.jZ,W.jW,W.jY,W.kx,W.kv,W.kq,W.kf,W.kw,W.kr,W.ks,W.kt,W.ku,W.kj,W.ki,W.kh,W.kg,W.kn,W.km,W.k1,W.jT,W.jS,W.k4,W.jU,W.j0,W.j5,W.iQ,W.iC,W.j6,W.iy,W.ix,W.iA,W.iB,W.iw,W.iz,W.iv,W.iF,W.iD,W.j4,W.iE,W.iX,W.iI,W.iJ,W.iG,W.iH,W.iP,W.iO,W.iN,W.iM,W.iR,W.iL,W.iK,W.j3,W.iS,W.iV,W.iU,W.iT,W.iW,W.iY,W.iZ,W.iu,W.it,W.is,W.j_,W.j1,W.j2,W.hE,W.hD,W.hC,W.hM,W.hA,W.hL,W.hH,W.hI,W.hB,W.hz,W.hF,W.hK,W.hJ,W.hG,De.iq,Pe.hP,Pe.hN,Pe.hO,Fe.hS,Fe.hT,Fe.hR,Fe.hU,Fe.hQ,oe.m3,oe.m4,oe.m5,oe.m2,Pe.kY,Pe.kX,Pe.m7,ye.mo,ye.mk,ye.mj,ye.mg,ye.mh,ye.ml,ye.mi,ye.me,ye.mf,ye.mm,ye.mn,ye.lU,ye.lV,ye.lW,ye.lS,ye.lT]),f(E.F,[p.eD,E.f2,p.eC,p.f6,p.eZ,p.fi,E.ej,E.eR,E.ak,E.eO,E.f8,E.f3,E.bz,E.ep,E.er]),a(E.dg,E.dN),f(E.dg,[p.cI,oe.L]),f(p.cI,[p.cu,E.aX]),f(p.n,[p.af,p.b6,p.au,E.dH]),f(p.af,[p.dt,p.a8,E.fm,E.dF]),a(p.c_,p.b9),f(E.H,[p.a7,p.cm,p.dr]),a(p.cw,p.bc),a(E.e0,E.dj),a(E.be,E.e0),a(p.d4,E.be),f(p.cv,[p.aq,p.al]),a(p.eQ,E.f2),f(p.f1,[p.f_,p.ct]),a(p.cE,p.dm),f(p.cE,[p.dO,p.dQ]),a(p.dP,p.dO),a(p.dl,p.dP),a(p.dR,p.dQ),a(p.av,p.dR),f(p.dl,[p.dk,p.eI]),f(p.av,[p.eJ,p.eK,p.eL,p.eM,p.eN,p.dn,p.cf]),a(p.dY,p.fi),a(E.dW,E.dc),a(E.ax,E.ff),f(E.cS,[E.bD,E.cT]),a(E.dT,E.aW),f(E.dT,[E.an,E.dE]),a(E.dA,E.cK),f(E.fn,[E.dL,E.dU]),f(E.fh,[E.cn,E.dB]),a(E.lB,E.lJ),a(E.dJ,E.dG),f(E.cQ,[E.aZ,E.e1]),a(E.kH,E.kI),a(E.dV,E.kH),a(E.lw,E.dV),f(E.eo,[E.fL,E.hw,E.io]),a(E.eq,E.f0),f(E.eq,[E.fN,E.fM,E.ip,E.kS]),f(E.em,[E.fO,E.fo]),a(E.lI,E.fO),a(E.kR,E.hw),f(E.ak,[E.dq,E.ew]),a(E.fg,E.e2),a(de.o,de.fk),f(de.o,[de.es,me.bP,me.bQ,me.bR,Se.b1,Se.bT,Se.b2,Te.bo,Re.bV,Re.bW,de.da,we.ci,we.bB,Ie.aH,We.c0,De.bs,De.c6,De.c7,Me.c8,Pe.c9,Ve.ca,Me.cb,Ie.cc,Ye.cd]),f(de.es,[me.a0,Se.bn,ye.aN,de.bp,Re.bq,Te.aO,we.aS,Ie.aT,de.ah,Te.bv,Me.bw,Be.by,Ve.bA,De.b7]),f(me.a0,[me.fb,me.fa]),f(oe.Y,[me.ez,me.eG,me.eE,me.eH,me.eF,Se.ei,Se.dp,Ie.ev,Be.eu,oe.f4,oe.f5,oe.en]),f(we.bB,[we.ch,we.cg]),f(we.i5,[we.ij,we.jr,we.kZ]),f(W.ic,[W.fZ,W.ia,W.jA,W.jR,W.ir,W.hy]),i(p.cI,p.f7),i(p.e4,E.m),i(p.dO,E.m),i(p.dP,p.d8),i(p.dQ,E.m),i(p.dR,p.d8),i(E.bD,E.fe),i(E.cT,E.fs),i(E.dN,E.m),i(E.e0,E.fw),i(de.fk,de.kQ)}();var Xe={typeUniverse:{eC:new Map,tR:{},eT:{},tPV:{},sEA:[]},mangledGlobalNames:{d:"int",w:"double",G:"num",f:"String",Q:"bool",k:"Null",l:"List"},mangledNames:{},getTypeFromName:fe,metadata:[],types:["f*(l<@>*)","~()","k()","Q*(aH*)","@()","w*(d*)","k(f*,e*)","k(f*,d*)","Q*(d*)","k(ah*,d*,d*)","~(e*)","~(~())","~(j*)","k(@)","~(e,am)","~(e*,am*)","~(aa,f,d)","i<d*>*()","d*(d*)","i<w*>*()","k(d*,aH*)","~(f*)","Q*(T*)","k(l<d*>*)","k(e*)","~(l<d*>*)","k(~(e*)*,aE*)","k(h<f*,e*>*)","f*(e*)","k(d*,ah*)","i<d*>*(d*,d*,d*)","k(@,am)","k(d,@)","@(@)","i<w*>*(d*,d*,d*)","k(d*,b2*)","k(d*,b1*)","L<0^*>*(f*,0^*(h<f*,e*>*,j*)*)<e*>","0^*(f*,0^*(h<f*,e*>*,j*)*{req:Q*})<e*>","~(L<o*>*,bC*)","k(d*,o*)","k(e,am)","k(f,@)","Q*(ah*)","~(L<ck*>*)","k(d*,ck*)","~(o*,f*)","C<@>(@)","k(@,@)","d*(d*,d*,f*)","ae<@>()","~([ae<~>?])","kA<a0<G*>*>*()","Q(e?)","k(e?,e?)","f*(T*)","l<Y<G*>*>*()","f*(f*)","k(~())","T*()","k(bC*,a4*)","k(cH,@)","@(@,f)","Q*(l<d*>*,l<d*>*)","l<d*>*/*(aN*)","aW<l<d*>*>*(aO*)","k(d*,a0<G*>*)","Q*(H<G*>*)","~(f[@])","k(d*,b7*)","d(d,d)","aa(d)","~({seen:Q*})","k(as*)","ae<~>*()","k(l<e*>*)","h<f*,d*>*(h<@,@>*)","l<ce*>*()","Q*(aT*)","d*(d*,e*)","~(e*,am*,aE*)","bb<1&>*(aa*,e*)","aa(@,@)","@(f)","cd*(h<f*,e*>*,j*)","bb<1&>*(f*,e*)","f*()","ae<aa*>*(aY*)","aa*/*([aY*])","aW<l<d*>*>*(aY*)","e?(e?)","a0<G*>*(h<f*,e*>*,j*)","bP*(h<f*,e*>*,j*)","bQ*(h<f*,e*>*,j*)","bR*(h<f*,e*>*,j*)","bn*(h<f*,e*>*,j*)","bT*(h<f*,e*>*,j*)","bo*(h<f*,e*>*,j*)","aN*(h<f*,e*>*,j*)","bp*(h<f*,e*>*,j*)","bq*(h<f*,e*>*,j*)","bV*(h<f*,e*>*,j*)","bW*(h<f*,e*>*,j*)","aO*(h<f*,e*>*,j*)","aS*(h<f*,e*>*,j*)","ci*(h<f*,e*>*,j*)","ch*(h<f*,e*>*,j*)","cg*(h<f*,e*>*,j*)","bB*(h<f*,e*>*,j*)","aT*(h<f*,e*>*,j*)","ah*(h<f*,e*>*,j*)","bv*(h<f*,e*>*,j*)","bw*(h<f*,e*>*,j*)","by*(h<f*,e*>*,j*)","bA*(h<f*,e*>*,j*)","w*(G*)","~(@)","c0*(h<f*,e*>*,j*)","bs*(h<f*,e*>*,j*)","c6*(h<f*,e*>*,j*)","c7*(h<f*,e*>*,j*)","c8*(h<f*,e*>*,j*)","c9*(h<f*,e*>*,j*)","ca*(h<f*,e*>*,j*)","cb*(h<f*,e*>*,j*)","cc*(h<f*,e*>*,j*)","~(f,d)"],interceptorsByTag:null,leafTags:null,arrayRti:typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol("$ti"):"$ti"};p.uh(Xe.typeUniverse,JSON.parse('{"bb":"aF","hx":"aF","cP":"aF","eU":"aF","cl":"aF","aQ":"aF","dd":{"Q":[]},"cB":{"k":[]},"aF":{"aE":[],"bb":["1&"],"cP":[]},"p":{"l":["1"],"n":["1"],"i":["1"]},"ii":{"p":["1"],"l":["1"],"n":["1"],"i":["1"]},"aC":{"H":["1"]},"c5":{"w":[],"G":[]},"de":{"w":[],"d":[],"G":[]},"eB":{"w":[],"G":[]},"br":{"f":[]},"bE":{"i":["2"]},"d3":{"H":["2"]},"bX":{"bE":["1","2"],"i":["2"],"i.E":"2"},"dC":{"bX":["1","2"],"bE":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"dx":{"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"]},"b3":{"dx":["1","2"],"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"],"m.E":"2","i.E":"2"},"bY":{"I":["3","4"],"h":["3","4"],"I.K":"3","I.V":"4"},"eD":{"F":[]},"cu":{"m":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"n":{"i":["1"]},"af":{"n":["1"],"i":["1"]},"dt":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"a6":{"H":["1"]},"b9":{"i":["2"],"i.E":"2"},"c_":{"b9":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"a7":{"H":["2"]},"a8":{"af":["2"],"n":["2"],"i":["2"],"i.E":"2","af.E":"2"},"l_":{"i":["1"],"i.E":"1"},"cm":{"H":["1"]},"bc":{"i":["1"],"i.E":"1"},"cw":{"bc":["1"],"n":["1"],"i":["1"],"i.E":"1"},"dr":{"H":["1"]},"b6":{"n":["1"],"i":["1"],"i.E":"1"},"d6":{"H":["1"]},"cI":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"cG":{"cH":[]},"d4":{"be":["1","2"],"h":["1","2"]},"cv":{"h":["1","2"]},"aq":{"cv":["1","2"],"h":["1","2"]},"dz":{"i":["1"],"i.E":"1"},"al":{"cv":["1","2"],"h":["1","2"]},"eQ":{"F":[]},"eC":{"F":[]},"f6":{"F":[]},"eS":{"a3":[]},"dS":{"am":[]},"bZ":{"aE":[]},"f1":{"aE":[]},"f_":{"aE":[]},"ct":{"aE":[]},"eZ":{"F":[]},"aG":{"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"au":{"n":["1"],"i":["1"],"i.E":"1"},"df":{"H":["1"]},"cE":{"at":["1"]},"dl":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"]},"av":{"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"]},"dk":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eI":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eJ":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eK":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eL":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eM":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eN":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dn":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"cf":{"av":[],"m":["d"],"aa":[],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dX":{"bC":[]},"fi":{"F":[]},"dY":{"F":[]},"aB":{"H":["1"]},"dW":{"i":["1"],"i.E":"1"},"ax":{"ff":["1"]},"C":{"ae":["1"]},"bD":{"cS":["1"]},"cT":{"cS":["1"]},"an":{"aW":["1"]},"dT":{"aW":["1"]},"dE":{"aW":["1"]},"ek":{"F":[]},"dG":{"I":["1","2"],"h":["1","2"]},"dJ":{"dG":["1","2"],"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"dH":{"n":["1"],"i":["1"],"i.E":"1"},"dI":{"H":["1"]},"aZ":{"cQ":["1"],"n":["1"],"i":["1"]},"dM":{"H":["1"]},"aX":{"m":["1"],"l":["1"],"n":["1"],"i":["1"],"m.E":"1"},"dc":{"i":["1"]},"dg":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"di":{"I":["1","2"],"h":["1","2"]},"I":{"h":["1","2"]},"dj":{"h":["1","2"]},"be":{"h":["1","2"]},"cQ":{"n":["1"],"i":["1"]},"e1":{"cQ":["1"],"n":["1"],"i":["1"]},"fl":{"I":["f","@"],"h":["f","@"],"I.K":"f","I.V":"@"},"fm":{"af":["f"],"n":["f"],"i":["f"],"i.E":"f","af.E":"f"},"w":{"G":[]},"d":{"G":[]},"l":{"n":["1"],"i":["1"]},"kA":{"n":["1"],"i":["1"]},"ej":{"F":[]},"f2":{"F":[]},"eR":{"F":[]},"ak":{"F":[]},"dq":{"F":[]},"ew":{"F":[]},"eO":{"F":[]},"f8":{"F":[]},"f3":{"F":[]},"bz":{"F":[]},"ep":{"F":[]},"eT":{"F":[]},"ds":{"F":[]},"er":{"F":[]},"dD":{"a3":[]},"aD":{"a3":[]},"dF":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"fr":{"am":[]},"e2":{"aY":[]},"fp":{"aY":[]},"fg":{"aY":[]},"a0":{"o":[],"t":[]},"fb":{"a0":["d*"],"o":[],"t":[]},"fa":{"a0":["w*"],"o":[],"t":[]},"bP":{"o":[],"t":[]},"bQ":{"o":[],"t":[]},"bR":{"o":[],"t":[]},"ez":{"Y":["w*"]},"eG":{"Y":["w*"]},"eE":{"Y":["w*"]},"eH":{"Y":["d*"]},"eF":{"Y":["d*"]},"bn":{"o":[],"t":[]},"b1":{"o":[],"t":[]},"bT":{"o":[],"t":[]},"b2":{"o":[],"t":[]},"ei":{"Y":["w*"]},"dp":{"Y":["1*"]},"bo":{"o":[],"t":[]},"aN":{"o":[],"t":[]},"bp":{"o":[],"t":[]},"bq":{"o":[],"t":[]},"bV":{"o":[],"t":[]},"bW":{"o":[],"t":[]},"da":{"o":[],"t":[]},"o":{"t":[]},"es":{"o":[],"t":[]},"aO":{"o":[],"t":[]},"aS":{"o":[],"t":[]},"ci":{"o":[],"t":[]},"ch":{"o":[],"t":[]},"cg":{"o":[],"t":[]},"bB":{"o":[],"t":[]},"aT":{"o":[],"t":[]},"aH":{"o":[],"t":[]},"ev":{"Y":["d*"]},"ah":{"o":[],"t":[]},"bv":{"o":[],"t":[]},"bw":{"o":[],"t":[]},"by":{"o":[],"t":[]},"eu":{"Y":["w*"]},"bA":{"o":[],"t":[],"ck":[]},"c4":{"a3":[]},"dw":{"a3":[]},"dv":{"a3":[]},"aP":{"a3":[]},"c0":{"o":[],"t":[],"ck":[]},"bs":{"o":[],"t":[]},"b7":{"o":[],"t":[]},"c6":{"o":[],"t":[]},"c7":{"o":[],"t":[]},"c8":{"o":[],"t":[]},"c9":{"o":[],"t":[]},"ca":{"o":[],"t":[]},"cb":{"o":[],"t":[]},"cc":{"o":[],"t":[]},"cd":{"o":[],"t":[]},"d9":{"et":[]},"cy":{"et":[]},"db":{"a3":[]},"L":{"m":["1*"],"l":["1*"],"n":["1*"],"i":["1*"],"m.E":"1*"},"f4":{"Y":["G*"]},"f5":{"Y":["G*"]},"en":{"Y":["w*"]},"eP":{"a3":[]},"aa":{"l":["d"],"n":["d"],"i":["d"]}}')),p.ug(Xe.typeUniverse,JSON.parse('{"d8":1,"f7":1,"cI":1,"e4":2,"cE":1,"cM":2,"f0":2,"fs":1,"fe":1,"dA":1,"cK":1,"dT":1,"dL":1,"fh":1,"cn":1,"fn":1,"dU":1,"fq":1,"dc":1,"dg":1,"di":2,"fw":2,"dj":2,"dN":1,"e0":2,"em":1,"eo":2,"eq":2,"dV":1}'));var Ft={p:") does not match the number of morph targets (",c:"Accessor sparse indices element at index ",m:"Animation input accessor element at index "},Y=function(){var i=p.ap;return{gF:i("d4<cH,@>"),O:i("n<@>"),C:i("F"),b8:i("aE"),c:i("ae<@>"),bq:i("ae<~>"),N:i("al<bC*,a4*>"),U:i("i<@>"),s:i("p<f>"),b:i("p<@>"),Z:i("p<d>"),p:i("p<u*>"),fr:i("p<b1*>"),es:i("p<b2*>"),gd:i("p<Y<G*>*>"),bd:i("p<ey*>"),a9:i("p<cA*>"),e2:i("p<H<w*>*>"),fK:i("p<H<d*>*>"),B:i("p<H<G*>*>"),dB:i("p<b7*>"),bH:i("p<ce*>"),d:i("p<l<d*>*>"),ar:i("p<h<f*,a0<G*>*>*>"),j:i("p<h<f*,e*>*>"),bZ:i("p<aH*>"),R:i("p<ah*>"),M:i("p<e*>"),d6:i("p<eY*>"),i:i("p<f*>"),m:i("p<w*>"),V:i("p<d*>"),T:i("cB"),g:i("aQ"),aU:i("at<@>"),eo:i("aG<cH,@>"),I:i("h<@,@>"),gw:i("a8<T*,f*>"),eB:i("av"),bm:i("cf"),P:i("k"),K:i("e"),ed:i("dp<G*>"),eq:i("L<b1*>"),az:i("L<b2*>"),du:i("L<b7*>"),b_:i("L<aH*>"),S:i("f"),E:i("aa"),ak:i("cl"),go:i("aX<h<f*,e*>*>"),em:i("aX<f*>"),f8:i("be<c1*,a4*>"),n:i("aY"),a_:i("ax<et*>"),G:i("ax<as*>"),eP:i("ax<c3*>"),as:i("ax<aa*>"),f1:i("bD<l<d*>*>"),eI:i("C<@>"),fJ:i("C<d>"),eD:i("C<et*>"),f:i("C<as*>"),dD:i("C<c3*>"),q:i("C<aa*>"),D:i("C<~>"),aH:i("dJ<@,@>"),cy:i("fo<e*>"),cJ:i("Q"),gR:i("w"),z:i("@"),bI:i("@(e)"),Q:i("@(e,am)"),r:i("d"),aD:i("u*"),hc:i("a0<d*>*"),W:i("a0<G*>*"),bj:i("bn*"),gP:i("bo*"),cT:i("aN*"),u:i("bp*"),h2:i("bq*"),y:i("a3*"),af:i("T*"),f9:i("a4*"),al:i("c1*"),b1:i("aE*"),ec:i("aO*"),Y:i("i<@>*"),v:i("t*"),l:i("l<@>*"),b7:i("l<Y<G*>*>*"),an:i("l<ce*>*"),o:i("l<e*>*"),eG:i("l<f*>*"),fy:i("l<w*>*"),w:i("l<d*>*"),h:i("h<@,@>*"),t:i("h<f*,e*>*"),fC:i("aS*"),eM:i("aT*"),A:i("0&*"),L:i("ah*"),_:i("e*"),ax:i("ck*"),cl:i("L<@>*"),c2:i("bv*"),J:i("bw*"),cn:i("kA<u*>*"),gz:i("kA<a0<G*>*>*"),dz:i("bx*"),aV:i("by*"),X:i("f*"),ai:i("bA*"),f7:i("bC*"),a:i("aa*"),bv:i("cP*"),F:i("w*"),e:i("d*"),eH:i("ae<k>?"),x:i("e?"),di:i("G"),H:i("~"),d5:i("~(e)"),k:i("~(e,am)")}}();(function(){var i=pe.makeConstList;b.by=ee.cz.prototype,b.d=ee.p.prototype,b.bC=ee.dd.prototype,b.c=ee.de.prototype,b.bD=ee.cB.prototype,b.bE=ee.c5.prototype,b.a=ee.br.prototype,b.bF=ee.aQ.prototype,b.d2=p.dk.prototype,b.j=p.cf.prototype,b.aq=ee.eU.prototype,b.O=ee.cl.prototype,b.P=new de.u("MAT4",5126,!1),b.A=new de.u("SCALAR",5126,!1),b.aQ=new de.u("VEC2",5121,!0),b.aU=new de.u("VEC2",5123,!0),b.aV=new de.u("VEC2",5126,!1),b.R=new de.u("VEC3",5121,!0),b.T=new de.u("VEC3",5123,!0),b.k=new de.u("VEC3",5126,!1),b.aY=new de.u("VEC4",5121,!1),b.D=new de.u("VEC4",5121,!0),b.aZ=new de.u("VEC4",5123,!1),b.E=new de.u("VEC4",5123,!0),b.u=new de.u("VEC4",5126,!1),b.b_=new de.bS("AnimationInput"),b.b0=new de.bS("AnimationOutput"),b.b1=new de.bS("IBM"),b.b2=new de.bS("PrimitiveIndices"),b.W=new de.bS("VertexAttribute"),b.b3=new de.bU("IBM"),b.b4=new de.bU("Image"),b.X=new de.bU("IndexBuffer"),b.v=new de.bU("Other"),b.F=new de.bU("VertexBuffer"),b.dB=new E.fN,b.b5=new E.fL,b.b6=new E.fM,b.Y=new p.d6(p.ap("d6<k>")),b.Z=new Fe.db,b.b7=new me.c4,b.a_=function(f){var g=Object.prototype.toString.call(f);return g.substring(8,g.length-1)},b.b8=function(){var a=Object.prototype.toString;function f(B){var G=a.call(B);return G.substring(8,G.length-1)}function g(B,G){if(/^HTML[A-Z].*Element$/.test(G)){var V=a.call(B);return V=="[object Object]"?null:"HTMLElement"}}function y(B,G){return t.HTMLElement&&B instanceof HTMLElement?"HTMLElement":g(B,G)}function M(B){if(typeof window=="undefined"||typeof window[B]=="undefined")return null;var G=window[B];return typeof G!="function"?null:G.prototype}function C(B){return null}var I=typeof navigator=="object";return{getTag:f,getUnknownTag:I?y:g,prototypeForTag:M,discriminator:C}},b.bd=function(a){return function(f){if(typeof navigator!="object")return f;var g=navigator.userAgent;if(g.indexOf("DumpRenderTree")>=0)return f;if(g.indexOf("Chrome")>=0){let y=function(M){return typeof window=="object"&&window[M]&&window[M].name==M};if(y("Window")&&y("HTMLElement"))return f}f.getTag=a}},b.b9=function(a){if(typeof dartExperimentalFixupGetTag!="function")return a;a.getTag=dartExperimentalFixupGetTag(a.getTag)},b.ba=function(a){var f=a.getTag,g=a.prototypeForTag;function y(C){var I=f(C);return I=="Document"?C.xmlVersion?"!Document":"!HTMLDocument":I}function M(C){return C=="Document"?null:g(C)}a.getTag=y,a.prototypeForTag=M},b.bc=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Firefox")==-1)return a;var g=a.getTag,y={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};function M(C){var I=g(C);return y[I]||I}a.getTag=M},b.bb=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Trident/")==-1)return a;var g=a.getTag,y={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};function M(I){var B=g(I),G=y[B];return G||(B=="Object"&&window.DataView&&I instanceof window.DataView?"DataView":B)}function C(I){var B=window[I];return B==null?null:B.prototype}a.getTag=M,a.prototypeForTag=C},b.a0=function(a){return a},b.a1=new E.io,b.be=new E.eT,b.a2=new we.dv,b.bf=new we.dw,b.a3=new E.kR,b.G=new E.lh,b.a4=new p.lA,b.f=new E.lB,b.bg=new E.fr,b.I=new we.c2(0,"Format.Unknown"),b.n=new we.c2(1,"Format.RGB"),b.w=new we.c2(2,"Format.RGBA"),b.a5=new we.c2(3,"Format.Luminance"),b.a6=new we.c2(4,"Format.LuminanceAlpha"),b.a7=new we.aP("Wrong WebP header."),b.bz=new we.aP("PNG header not found."),b.bA=new we.aP("Invalid JPEG marker segment length."),b.o=new we.aP("Wrong chunk length."),b.bB=new we.aP("Invalid start of file."),b.bG=new E.ip(null),b.bH=p.a(i([0,0]),Y.m),b.a8=p.a(i([0,0,0]),Y.m),b.bI=p.a(i([16]),Y.V),b.bJ=p.a(i([1,1]),Y.m),b.a9=p.a(i([1,1,1]),Y.m),b.aa=p.a(i([1,1,1,1]),Y.m),b.ab=p.a(i([2]),Y.V),b.bK=p.a(i([255,216]),Y.V),b.bM=p.a(i(["sheenColorFactor","sheenColorTexture","sheenRoughnessFactor","sheenRoughnessTexture"]),Y.i),b.ac=p.a(i([0,0,32776,33792,1,10240,0,0]),Y.V),b.bN=p.a(i([137,80,78,71,13,10,26,10]),Y.V),b.bO=p.a(i(["clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture"]),Y.i),b.m=p.a(i([3]),Y.V),b.ad=p.a(i([33071,33648,10497]),Y.V),b.bP=p.a(i([34962,34963]),Y.V),b.J=p.a(i([4]),Y.V),b.aN=new de.u("VEC2",5120,!1),b.aO=new de.u("VEC2",5120,!0),b.aP=new de.u("VEC2",5121,!1),b.aR=new de.u("VEC2",5122,!1),b.aS=new de.u("VEC2",5122,!0),b.aT=new de.u("VEC2",5123,!1),b.bQ=p.a(i([b.aN,b.aO,b.aP,b.aR,b.aS,b.aT]),Y.p),b.bR=p.a(i([5121,5123,5125]),Y.V),b.ae=p.a(i(["image/jpeg","image/png"]),Y.i),b.bS=p.a(i(["transmissionFactor","transmissionTexture"]),Y.i),b.bT=p.a(i([82,73,70,70]),Y.V),b.bU=p.a(i([9728,9729]),Y.V),b.aH=new de.u("SCALAR",5121,!1),b.aK=new de.u("SCALAR",5123,!1),b.aM=new de.u("SCALAR",5125,!1),b.af=p.a(i([b.aH,b.aK,b.aM]),Y.p),b.bW=p.a(i(["camera","children","skin","matrix","mesh","rotation","scale","translation","weights","name"]),Y.i),b.bX=p.a(i([9728,9729,9984,9985,9986,9987]),Y.V),b.bY=p.a(i(["COLOR","JOINTS","TEXCOORD","WEIGHTS"]),Y.i),b.x=p.a(i([0,0,65490,45055,65535,34815,65534,18431]),Y.V),b.bZ=p.a(i(["color","intensity","spot","type","range","name"]),Y.i),b.c_=p.a(i(["buffer","byteOffset","byteLength","byteStride","target","name"]),Y.i),b.ah=p.a(i([0,0,26624,1023,65534,2047,65534,2047]),Y.V),b.c0=p.a(i(["LINEAR","STEP","CUBICSPLINE"]),Y.i),b.c1=p.a(i(["OPAQUE","MASK","BLEND"]),Y.i),b.c2=p.a(i(["pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","name"]),Y.i),b.c3=p.a(i([5120,5121,5122,5123,5125,5126]),Y.V),b.c4=p.a(i(["inverseBindMatrices","skeleton","joints","name"]),Y.i),b.Q=new de.u("VEC3",5120,!1),b.B=new de.u("VEC3",5120,!0),b.S=new de.u("VEC3",5122,!1),b.C=new de.u("VEC3",5122,!0),b.c5=p.a(i([b.Q,b.B,b.S,b.C]),Y.p),b.c6=p.a(i(["data-uri","buffer-view","glb","external"]),Y.i),b.c7=p.a(i(["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]),Y.i),b.c8=p.a(i(["bufferView","byteOffset","componentType"]),Y.i),b.K=p.a(i([b.B,b.C]),Y.p),b.c9=p.a(i(["aspectRatio","yfov","zfar","znear"]),Y.i),b.ca=p.a(i(["copyright","generator","version","minVersion"]),Y.i),b.cb=p.a(i(["bufferView","byteOffset"]),Y.i),b.cc=p.a(i(["bufferView","mimeType","uri","name"]),Y.i),b.cd=p.a(i(["channels","samplers","name"]),Y.i),b.ce=p.a(i(["baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture"]),Y.i),b.cf=p.a(i(["count","indices","values"]),Y.i),b.cg=p.a(i(["diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture"]),Y.i),b.ch=p.a(i(["directional","point","spot"]),Y.i),b.ai=p.a(i([]),Y.b),b.ci=p.a(i([]),Y.i),b.cl=p.a(i(["extensions","extras"]),Y.i),b.cm=p.a(i([0,0,32722,12287,65534,34815,65534,18431]),Y.V),b.co=p.a(i(["index","texCoord"]),Y.i),b.cp=p.a(i(["index","texCoord","scale"]),Y.i),b.cq=p.a(i(["index","texCoord","strength"]),Y.i),b.cr=p.a(i(["innerConeAngle","outerConeAngle"]),Y.i),b.cs=p.a(i(["input","interpolation","output"]),Y.i),b.ct=p.a(i(["attributes","indices","material","mode","targets"]),Y.i),b.cu=p.a(i(["bufferView","byteOffset","componentType","count","type","normalized","max","min","sparse","name"]),Y.i),b.cw=p.a(i(["light"]),Y.i),b.cx=p.a(i(["lights"]),Y.i),b.cy=p.a(i(["node","path"]),Y.i),b.cz=p.a(i(["nodes","name"]),Y.i),b.cA=p.a(i([null,"linear","srgb","custom"]),Y.i),b.cB=p.a(i([null,"srgb","custom"]),Y.i),b.aj=p.a(i([0,0,24576,1023,65534,34815,65534,18431]),Y.V),b.cC=p.a(i(["image/webp"]),Y.i),b.cD=p.a(i(["offset","rotation","scale","texCoord"]),Y.i),b.N=p.B("bA"),b.bh=new We.a4(We.vy(),!1),b.d_=new p.al([b.N,b.bh],Y.N),b.bu=new We.T("EXT_texture_webp",b.d_,We.vz(),!1),b.at=p.B("da"),b.M=p.B("ah"),b.bi=new We.a4(De.vN(),!1),b.bj=new We.a4(De.vP(),!1),b.cY=new p.al([b.at,b.bi,b.M,b.bj],Y.N),b.bq=new We.T("KHR_lights_punctual",b.cY,null,!1),b.h=p.B("aS"),b.bk=new We.a4(Me.vQ(),!1),b.cT=new p.al([b.h,b.bk],Y.N),b.bt=new We.T("KHR_materials_clearcoat",b.cT,null,!1),b.bn=new We.a4(Pe.vR(),!0),b.cU=new p.al([b.h,b.bn],Y.N),b.bw=new We.T("KHR_materials_pbrSpecularGlossiness",b.cU,null,!1),b.bl=new We.a4(Me.vT(),!1),b.cV=new p.al([b.h,b.bl],Y.N),b.bs=new We.T("KHR_materials_transmission",b.cV,null,!1),b.bm=new We.a4(Ve.vS(),!1),b.cW=new p.al([b.h,b.bm],Y.N),b.bp=new We.T("KHR_materials_sheen",b.cW,null,!1),b.bo=new We.a4(Ie.vU(),!0),b.cX=new p.al([b.h,b.bo],Y.N),b.br=new We.T("KHR_materials_unlit",b.cX,null,!1),b.cj=p.a(i([]),p.ap("p<bC*>")),b.d0=new p.aq(0,{},b.cj,p.ap("aq<bC*,a4*>")),b.bx=new We.T("KHR_mesh_quantization",b.d0,Ve.vV(),!0),b.aA=p.B("bB"),b.aw=p.B("cg"),b.ax=p.B("ch"),b.H=new We.a4(Ye.vW(),!1),b.cZ=new p.al([b.aA,b.H,b.aw,b.H,b.ax,b.H],Y.N),b.bv=new We.T("KHR_texture_transform",b.cZ,null,!1),b.ak=p.a(i([b.bu,b.bq,b.bt,b.bw,b.bs,b.bp,b.br,b.bx,b.bv]),p.ap("p<T*>")),b.al=p.a(i(["orthographic","perspective"]),Y.i),b.cE=p.a(i(["primitives","weights","name"]),Y.i),b.b=new W.bx(0,"Severity.Error"),b.e=new W.bx(1,"Severity.Warning"),b.i=new W.bx(2,"Severity.Information"),b.d4=new W.bx(3,"Severity.Hint"),b.cF=p.a(i([b.b,b.e,b.i,b.d4]),p.ap("p<bx*>")),b.cG=p.a(i([0,0,32754,11263,65534,34815,65534,18431]),Y.V),b.cH=p.a(i(["magFilter","minFilter","wrapS","wrapT","name"]),Y.i),b.cI=p.a(i([null,"rgb","rgba","luminance","luminance-alpha"]),Y.i),b.am=p.a(i([0,0,65490,12287,65535,34815,65534,18431]),Y.V),b.cJ=p.a(i(["sampler","source","name"]),Y.i),b.cK=p.a(i(["source"]),Y.i),b.aW=new de.u("VEC3",5121,!1),b.aX=new de.u("VEC3",5123,!1),b.cL=p.a(i([b.Q,b.B,b.aW,b.R,b.S,b.C,b.aX,b.T]),Y.p),b.cM=p.a(i(["target","sampler"]),Y.i),b.an=p.a(i(["translation","rotation","scale","weights"]),Y.i),b.cN=p.a(i(["type","orthographic","perspective","name"]),Y.i),b.cO=p.a(i(["uri","byteLength","name"]),Y.i),b.cP=p.a(i(["xmag","ymag","zfar","znear"]),Y.i),b.cQ=p.a(i(["extensionsUsed","extensionsRequired","accessors","animations","asset","buffers","bufferViews","cameras","images","materials","meshes","nodes","samplers","scene","scenes","skins","textures"]),Y.i),b.U=new de.u("VEC4",5120,!0),b.V=new de.u("VEC4",5122,!0),b.cR=p.a(i([b.U,b.V]),Y.p),b.ag=p.a(i([b.k]),Y.p),b.bL=p.a(i([b.u,b.D,b.U,b.E,b.V]),Y.p),b.aI=new de.u("SCALAR",5121,!0),b.aG=new de.u("SCALAR",5120,!0),b.aL=new de.u("SCALAR",5123,!0),b.aJ=new de.u("SCALAR",5122,!0),b.cn=p.a(i([b.A,b.aI,b.aG,b.aL,b.aJ]),Y.p),b.cS=new p.aq(4,{translation:b.ag,rotation:b.bL,scale:b.ag,weights:b.cn},b.an,p.ap("aq<f*,l<u*>*>")),b.bV=p.a(i(["SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4"]),Y.i),b.l=new p.aq(7,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},b.bV,p.ap("aq<f*,d*>")),b.ao=new p.al([5120,"BYTE",5121,"UNSIGNED_BYTE",5122,"SHORT",5123,"UNSIGNED_SHORT",5124,"INT",5125,"UNSIGNED_INT",5126,"FLOAT",35664,"FLOAT_VEC2",35665,"FLOAT_VEC3",35666,"FLOAT_VEC4",35667,"INT_VEC2",35668,"INT_VEC3",35669,"INT_VEC4",35670,"BOOL",35671,"BOOL_VEC2",35672,"BOOL_VEC3",35673,"BOOL_VEC4",35674,"FLOAT_MAT2",35675,"FLOAT_MAT3",35676,"FLOAT_MAT4",35678,"SAMPLER_2D"],p.ap("al<d*,f*>")),b.ck=p.a(i([]),p.ap("p<cH*>")),b.ap=new p.aq(0,{},b.ck,p.ap("aq<cH*,@>")),b.cv=p.a(i(["KHR","EXT","ADOBE","AGI","AGT","ALCM","ALI","AMZN","ANIMECH","AVR","BLENDER","CAPTURE","CESIUM","CVTOOLS","EPIC","FB","FOXIT","GOOGLE","GRIFFEL","KDAB","LLQ","MAXAR","MESHOPT","MOZ","MPEG","MSFT","NV","OWLII","PANDA3D","POLUTROPON","PTC","S8S","SEIN","SI","SKFB","SKYLINE","SPECTRUM","TRYON","UX3D","VRMC","WEB3D"]),Y.i),b.d1=new p.aq(41,{KHR:null,EXT:null,ADOBE:null,AGI:null,AGT:null,ALCM:null,ALI:null,AMZN:null,ANIMECH:null,AVR:null,BLENDER:null,CAPTURE:null,CESIUM:null,CVTOOLS:null,EPIC:null,FB:null,FOXIT:null,GOOGLE:null,GRIFFEL:null,KDAB:null,LLQ:null,MAXAR:null,MESHOPT:null,MOZ:null,MPEG:null,MSFT:null,NV:null,OWLII:null,PANDA3D:null,POLUTROPON:null,PTC:null,S8S:null,SEIN:null,SI:null,SKFB:null,SKYLINE:null,SPECTRUM:null,TRYON:null,UX3D:null,VRMC:null,WEB3D:null},b.cv,p.ap("aq<f*,k>")),b.d3=new E.e1(b.d1,p.ap("e1<f*>")),b.d5=new p.cG("call"),b.d6=p.B("bQ"),b.d7=p.B("bR"),b.d8=p.B("bP"),b.L=p.B("a0<G>"),b.d9=p.B("bT"),b.da=p.B("b1"),b.db=p.B("b2"),b.ar=p.B("bn"),b.dc=p.B("bo"),b.as=p.B("bp"),b.dd=p.B("aN"),b.de=p.B("bV"),b.df=p.B("bW"),b.dg=p.B("bq"),b.dh=p.B("c9"),b.di=p.B("c0"),b.au=p.B("aO"),b.dj=p.B("bs"),b.dk=p.B("c6"),b.dl=p.B("b7"),b.dm=p.B("c7"),b.dn=p.B("c8"),b.dp=p.B("ca"),b.dq=p.B("cb"),b.dr=p.B("cc"),b.ds=p.B("cd"),b.dt=p.B("aH"),b.av=p.B("aT"),b.du=p.B("ci"),b.dv=p.B("bv"),b.ay=p.B("bw"),b.az=p.B("by"),b.dw=new E.kS(!1),b.p=new we.dy(0,"_ColorPrimaries.Unknown"),b.q=new we.dy(1,"_ColorPrimaries.sRGB"),b.y=new we.dy(2,"_ColorPrimaries.Custom"),b.r=new we.cL(0,"_ColorTransfer.Unknown"),b.dx=new we.cL(1,"_ColorTransfer.Linear"),b.t=new we.cL(2,"_ColorTransfer.sRGB"),b.z=new we.cL(3,"_ColorTransfer.Custom"),b.aB=new we.dK("_ImageCodec.JPEG"),b.aC=new we.dK("_ImageCodec.PNG"),b.aD=new we.dK("_ImageCodec.WebP"),b.dy=new E.cO(null,2),b.aE=new qe.cR(0,"_Storage.DataUri"),b.dz=new qe.cR(1,"_Storage.BufferView"),b.dA=new qe.cR(2,"_Storage.GLB"),b.aF=new qe.cR(3,"_Storage.External")})(),function(){q.oo=null,q.b4=0,q.nD=null,q.nC=null,q.oY=null,q.oR=null,q.p7=null,q.m1=null,q.mc=null,q.n1=null,q.cX=null,q.ea=null,q.eb=null,q.mT=!1,q.x=b.f,q.co=p.a([],p.ap("p<e>"))}(),function(){var i=pe.lazy,a=pe.lazyOld;i(q,"wf","n6",function(){return p.vF("_$dart_dartClosure")}),i(q,"yH","r9",function(){return p.bd(p.kK({toString:function(){return"$receiver$"}}))}),i(q,"yI","ra",function(){return p.bd(p.kK({$method$:null,toString:function(){return"$receiver$"}}))}),i(q,"yJ","rb",function(){return p.bd(p.kK(null))}),i(q,"yK","rc",function(){return p.bd(function(){var f="$arguments$";try{null.$method$(f)}catch(g){return g.message}}())}),i(q,"yN","rf",function(){return p.bd(p.kK(void 0))}),i(q,"yO","rg",function(){return p.bd(function(){var f="$arguments$";try{(void 0).$method$(f)}catch(g){return g.message}}())}),i(q,"yM","re",function(){return p.bd(p.o8(null))}),i(q,"yL","rd",function(){return p.bd(function(){try{null.$method$}catch(f){return f.message}}())}),i(q,"yQ","ri",function(){return p.bd(p.o8(void 0))}),i(q,"yP","rh",function(){return p.bd(function(){try{(void 0).$method$}catch(f){return f.message}}())}),i(q,"yT","np",function(){return E.tY()}),i(q,"wN","fC",function(){var f=new E.C(b.f,p.ap("C<k>"));return f.dK(null),f}),i(q,"yR","rj",function(){return new E.kT().$0()}),i(q,"yS","rk",function(){return new E.kU().$0()}),i(q,"yV","nq",function(){return p.tz(p.uH(p.a([-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-1,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2],Y.Z)))}),i(q,"yU","rl",function(){return p.tA(0)}),i(q,"zf","rp",function(){return E.uG()}),a(q,"wd","bj",function(){return E.o2("^([0-9]+)\\.([0-9]+)$")}),a(q,"we","pe",function(){return E.o2("^([A-Z0-9]+)_[A-Za-z0-9_]+$")}),a(q,"wC","pw",function(){return W.D("BUFFER_EMBEDDED_BYTELENGTH_MISMATCH",new W.h8,b.b)}),a(q,"wD","px",function(){return W.D("BUFFER_EXTERNAL_BYTELENGTH_MISMATCH",new W.h6,b.b)}),a(q,"wE","py",function(){return W.D("BUFFER_GLB_CHUNK_TOO_BIG",new W.h5,b.e)}),a(q,"wv","na",function(){return W.D("ACCESSOR_MIN_MISMATCH",new W.hd,b.b)}),a(q,"wu","n9",function(){return W.D("ACCESSOR_MAX_MISMATCH",new W.ha,b.b)}),a(q,"wk","n8",function(){return W.D("ACCESSOR_ELEMENT_OUT_OF_MIN_BOUND",new W.hb,b.b)}),a(q,"wj","n7",function(){return W.D("ACCESSOR_ELEMENT_OUT_OF_MAX_BOUND",new W.h9,b.b)}),a(q,"wz","nb",function(){return W.D("ACCESSOR_VECTOR3_NON_UNIT",new W.hm,b.b)}),a(q,"wq","pn",function(){return W.D("ACCESSOR_INVALID_SIGN",new W.ho,b.b)}),a(q,"wi","ph",function(){return W.D("ACCESSOR_ANIMATION_SAMPLER_OUTPUT_NON_NORMALIZED_QUATERNION",new W.hf,b.b)}),a(q,"ww","pr",function(){return W.D("ACCESSOR_NON_CLAMPED",new W.hl,b.b)}),a(q,"wo","pl",function(){return W.D("ACCESSOR_INVALID_FLOAT",new W.he,b.b)}),a(q,"wl","pi",function(){return W.D("ACCESSOR_INDEX_OOB",new W.hk,b.b)}),a(q,"wn","pk",function(){return W.D("ACCESSOR_INDEX_TRIANGLE_DEGENERATE",new W.hi,b.i)}),a(q,"wm","pj",function(){return W.D("ACCESSOR_INDEX_PRIMITIVE_RESTART",new W.hj,b.b)}),a(q,"wg","pf",function(){return W.D("ACCESSOR_ANIMATION_INPUT_NEGATIVE",new W.hh,b.b)}),a(q,"wh","pg",function(){return W.D("ACCESSOR_ANIMATION_INPUT_NON_INCREASING",new W.hg,b.b)}),a(q,"wy","pt",function(){return W.D("ACCESSOR_SPARSE_INDICES_NON_INCREASING",new W.hr,b.b)}),a(q,"wx","ps",function(){return W.D("ACCESSOR_SPARSE_INDEX_OOB",new W.hq,b.b)}),a(q,"wp","pm",function(){return W.D("ACCESSOR_INVALID_IBM",new W.hp,b.b)}),a(q,"wG","pz",function(){return W.D("IMAGE_DATA_INVALID",new W.hv,b.b)}),a(q,"wI","pB",function(){return W.D("IMAGE_MIME_TYPE_INVALID",new W.hu,b.b)}),a(q,"wL","pE",function(){return W.D("IMAGE_UNEXPECTED_EOS",new W.h2,b.b)}),a(q,"wM","pF",function(){return W.D("IMAGE_UNRECOGNIZED_FORMAT",new W.h3,b.e)}),a(q,"wJ","pC",function(){return W.D("IMAGE_NON_ENABLED_MIME_TYPE",new W.h4,b.b)}),a(q,"wK","pD",function(){return W.D("IMAGE_NPOT_DIMENSIONS",new W.ht,b.i)}),a(q,"wH","pA",function(){return W.D("IMAGE_FEATURES_UNSUPPORTED",new W.hs,b.e)}),a(q,"wF","nc",function(){return W.D("DATA_URI_GLB",new W.h7,b.i)}),a(q,"ws","pp",function(){return W.D("ACCESSOR_JOINTS_INDEX_OOB",new W.hn,b.b)}),a(q,"wr","po",function(){return W.D("ACCESSOR_JOINTS_INDEX_DUPLICATE",new W.hc,b.b)}),a(q,"wA","pu",function(){return W.D("ACCESSOR_WEIGHTS_NEGATIVE",new W.h1,b.b)}),a(q,"wB","pv",function(){return W.D("ACCESSOR_WEIGHTS_NON_NORMALIZED",new W.h_,b.b)}),a(q,"wt","pq",function(){return W.D("ACCESSOR_JOINTS_USED_ZERO_WEIGHT",new W.h0,b.e)}),a(q,"x1","mt",function(){return new W.ia(b.b,"IO_ERROR",new W.ib)}),a(q,"xJ","nk",function(){return W.ai("ARRAY_LENGTH_NOT_IN_LIST",new W.jK,b.b)}),a(q,"xK","eg",function(){return W.ai("ARRAY_TYPE_MISMATCH",new W.jL,b.b)}),a(q,"xI","nj",function(){return W.ai("DUPLICATE_ELEMENTS",new W.jQ,b.b)}),a(q,"xM","fE",function(){return W.ai("INVALID_INDEX",new W.jO,b.b)}),a(q,"xN","fF",function(){return W.ai("INVALID_JSON",new W.jI,b.b)}),a(q,"xO","qr",function(){return W.ai("INVALID_URI",new W.jE,b.b)}),a(q,"xL","bO",function(){return W.ai("EMPTY_ENTITY",new W.jM,b.b)}),a(q,"xP","nl",function(){return W.ai("ONE_OF_MISMATCH",new W.jF,b.b)}),a(q,"xQ","qs",function(){return W.ai("PATTERN_MISMATCH",new W.jP,b.b)}),a(q,"xR","Z",function(){return W.ai("TYPE_MISMATCH",new W.jB,b.b)}),a(q,"xW","nm",function(){return W.ai("VALUE_NOT_IN_LIST",new W.jJ,b.e)}),a(q,"xX","mu",function(){return W.ai("VALUE_NOT_IN_RANGE",new W.jD,b.b)}),a(q,"xV","qu",function(){return W.ai("VALUE_MULTIPLE_OF",new W.jG,b.b)}),a(q,"xS","bk",function(){return W.ai("UNDEFINED_PROPERTY",new W.jC,b.b)}),a(q,"xT","qt",function(){return W.ai("UNEXPECTED_PROPERTY",new W.jN,b.e)}),a(q,"xU","d1",function(){return W.ai("UNSATISFIED_DEPENDENCY",new W.jH,b.b)}),a(q,"yC","r5",function(){return W.q("UNKNOWN_ASSET_MAJOR_VERSION",new W.kp,b.b)}),a(q,"yD","r6",function(){return W.q("UNKNOWN_ASSET_MINOR_VERSION",new W.ko,b.e)}),a(q,"yn","qR",function(){return W.q("ASSET_MIN_VERSION_GREATER_THAN_VERSION",new W.ke,b.e)}),a(q,"yb","qG",function(){return W.q("INVALID_GL_VALUE",new W.kc,b.b)}),a(q,"y9","qE",function(){return W.q("INTEGER_WRITTEN_AS_FLOAT",new W.kd,b.e)}),a(q,"xZ","qw",function(){return W.q("ACCESSOR_NORMALIZED_INVALID",new W.kb,b.b)}),a(q,"y_","qx",function(){return W.q("ACCESSOR_OFFSET_ALIGNMENT",new W.k9,b.b)}),a(q,"xY","qv",function(){return W.q("ACCESSOR_MATRIX_ALIGNMENT",new W.ka,b.b)}),a(q,"y0","qy",function(){return W.q("ACCESSOR_SPARSE_COUNT_OUT_OF_RANGE",new W.kk,b.b)}),a(q,"y1","qz",function(){return W.q("ANIMATION_CHANNEL_TARGET_NODE_SKIN",new W.kl,b.e)}),a(q,"y2","qA",function(){return W.q("BUFFER_DATA_URI_MIME_TYPE_INVALID",new W.k8,b.b)}),a(q,"y4","qB",function(){return W.q("BUFFER_VIEW_TOO_BIG_BYTE_STRIDE",new W.k7,b.b)}),a(q,"y3","mv",function(){return W.q("BUFFER_VIEW_INVALID_BYTE_STRIDE",new W.k6,b.b)}),a(q,"y5","qC",function(){return W.q("CAMERA_XMAG_YMAG_ZERO",new W.k5,b.e)}),a(q,"y6","qD",function(){return W.q("CAMERA_YFOV_GEQUAL_PI",new W.k3,b.e)}),a(q,"y7","nn",function(){return W.q("CAMERA_ZFAR_LEQUAL_ZNEAR",new W.k2,b.b)}),a(q,"yd","qI",function(){return W.q("MATERIAL_ALPHA_CUTOFF_INVALID_MODE",new W.k0,b.e)}),a(q,"yg","mw",function(){return W.q("MESH_PRIMITIVE_INVALID_ATTRIBUTE",new W.jV,b.b)}),a(q,"ym","qQ",function(){return W.q("MESH_PRIMITIVES_UNEQUAL_TARGETS_COUNT",new W.kz,b.b)}),a(q,"yl","qP",function(){return W.q("MESH_PRIMITIVES_UNEQUAL_JOINTS_COUNT",new W.ky,b.e)}),a(q,"yi","qM",function(){return W.q("MESH_PRIMITIVE_NO_POSITION",new W.k_,b.e)}),a(q,"yf","qK",function(){return W.q("MESH_PRIMITIVE_INDEXED_SEMANTIC_CONTINUITY",new W.jX,b.b)}),a(q,"yk","qO",function(){return W.q("MESH_PRIMITIVE_TANGENT_WITHOUT_NORMAL",new W.jZ,b.e)}),a(q,"yh","qL",function(){return W.q("MESH_PRIMITIVE_JOINTS_WEIGHTS_MISMATCH",new W.jW,b.b)}),a(q,"yj","qN",function(){return W.q("MESH_PRIMITIVE_TANGENT_POINTS",new W.jY,b.e)}),a(q,"ye","qJ",function(){return W.q("MESH_INVALID_WEIGHTS_COUNT",new W.kx,b.b)}),a(q,"yr","qV",function(){return W.q("NODE_MATRIX_TRS",new W.kv,b.b)}),a(q,"yp","qT",function(){return W.q("NODE_MATRIX_DEFAULT",new W.kq,b.i)}),a(q,"ys","qW",function(){return W.q("NODE_MATRIX_NON_TRS",new W.kf,b.b)}),a(q,"yz","r2",function(){return W.q("ROTATION_NON_UNIT",new W.kw,b.b)}),a(q,"yF","r8",function(){return W.q("UNUSED_EXTENSION_REQUIRED",new W.kr,b.b)}),a(q,"yy","r1",function(){return W.q("NON_REQUIRED_EXTENSION",new W.ks,b.b)}),a(q,"yE","r7",function(){return W.q("UNRESERVED_EXTENSION_PREFIX",new W.kt,b.e)}),a(q,"ya","qF",function(){return W.q("INVALID_EXTENSION_NAME_FORMAT",new W.ku,b.e)}),a(q,"yq","qU",function(){return W.q("NODE_EMPTY",new W.kj,b.i)}),a(q,"yv","qZ",function(){return W.q("NODE_SKINNED_MESH_NON_ROOT",new W.ki,b.e)}),a(q,"yu","qY",function(){return W.q("NODE_SKINNED_MESH_LOCAL_TRANSFORMS",new W.kh,b.e)}),a(q,"yt","qX",function(){return W.q("NODE_SKIN_NO_SCENE",new W.kg,b.b)}),a(q,"yA","r3",function(){return W.q("SKIN_NO_COMMON_ROOT",new W.kn,b.b)}),a(q,"yB","r4",function(){return W.q("SKIN_SKELETON_INVALID",new W.km,b.b)}),a(q,"yx","r0",function(){return W.q("NON_RELATIVE_URI",new W.k1,b.e)}),a(q,"yo","qS",function(){return W.q("MULTIPLE_EXTENSIONS",new W.jT,b.e)}),a(q,"yw","r_",function(){return W.q("NON_OBJECT_EXTRAS",new W.jS,b.i)}),a(q,"y8","no",function(){return W.q("EXTRA_PROPERTY",new W.k4,b.i)}),a(q,"yc","qH",function(){return W.q("KHR_LIGHTS_PUNCTUAL_LIGHT_SPOT_ANGLES",new W.jU,b.b)}),a(q,"x4","pV",function(){return W.v("ACCESSOR_TOTAL_OFFSET_ALIGNMENT",new W.j0,b.b)}),a(q,"x2","pU",function(){return W.v("ACCESSOR_SMALL_BYTESTRIDE",new W.j5,b.b)}),a(q,"x3","nd",function(){return W.v("ACCESSOR_TOO_LONG",new W.iQ,b.b)}),a(q,"x5","pW",function(){return W.v("ACCESSOR_USAGE_OVERRIDE",new W.iC,b.b)}),a(q,"x8","pZ",function(){return W.v("ANIMATION_DUPLICATE_TARGETS",new W.j6,b.b)}),a(q,"x6","pX",function(){return W.v("ANIMATION_CHANNEL_TARGET_NODE_MATRIX",new W.iy,b.b)}),a(q,"x7","pY",function(){return W.v("ANIMATION_CHANNEL_TARGET_NODE_WEIGHTS_NO_MORPHS",new W.ix,b.b)}),a(q,"xb","q1",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_WITHOUT_BOUNDS",new W.iA,b.b)}),a(q,"x9","q_",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_INVALID_FORMAT",new W.iB,b.b)}),a(q,"xd","q3",function(){return W.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_FORMAT",new W.iw,b.b)}),a(q,"xa","q0",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_TOO_FEW_ELEMENTS",new W.iz,b.b)}),a(q,"xc","q2",function(){return W.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_COUNT",new W.iv,b.b)}),a(q,"xe","q4",function(){return W.v("BUFFER_MISSING_GLB_DATA",new W.iF,b.b)}),a(q,"xg","ne",function(){return W.v("BUFFER_VIEW_TOO_LONG",new W.iD,b.b)}),a(q,"xf","q5",function(){return W.v("BUFFER_VIEW_TARGET_OVERRIDE",new W.j4,b.b)}),a(q,"xh","q6",function(){return W.v("IMAGE_BUFFER_VIEW_WITH_BYTESTRIDE",new W.iE,b.b)}),a(q,"xi","q7",function(){return W.v("INVALID_IBM_ACCESSOR_COUNT",new W.iX,b.b)}),a(q,"xl","ng",function(){return W.v("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_INVALID_FORMAT",new W.iI,b.b)}),a(q,"xr","nh",function(){return W.v("MESH_PRIMITIVE_POSITION_ACCESSOR_WITHOUT_BOUNDS",new W.iJ,b.b)}),a(q,"xk","q8",function(){return W.v("MESH_PRIMITIVE_ACCESSOR_WITHOUT_BYTESTRIDE",new W.iG,b.b)}),a(q,"xj","nf",function(){return W.v("MESH_PRIMITIVE_ACCESSOR_UNALIGNED",new W.iH,b.b)}),a(q,"xo","qb",function(){return W.v("MESH_PRIMITIVE_INDICES_ACCESSOR_WITH_BYTESTRIDE",new W.iP,b.b)}),a(q,"xn","qa",function(){return W.v("MESH_PRIMITIVE_INDICES_ACCESSOR_INVALID_FORMAT",new W.iO,b.b)}),a(q,"xm","q9",function(){return W.v("MESH_PRIMITIVE_INCOMPATIBLE_MODE",new W.iN,b.e)}),a(q,"xs","qe",function(){return W.v("MESH_PRIMITIVE_TOO_FEW_TEXCOORDS",new W.iM,b.b)}),a(q,"xt","qf",function(){return W.v("MESH_PRIMITIVE_UNEQUAL_ACCESSOR_COUNT",new W.iR,b.b)}),a(q,"xq","qd",function(){return W.v("MESH_PRIMITIVE_MORPH_TARGET_NO_BASE_ACCESSOR",new W.iL,b.b)}),a(q,"xp","qc",function(){return W.v("MESH_PRIMITIVE_MORPH_TARGET_INVALID_ATTRIBUTE_COUNT",new W.iK,b.b)}),a(q,"xu","qg",function(){return W.v("NODE_LOOP",new W.j3,b.b)}),a(q,"xv","qh",function(){return W.v("NODE_PARENT_OVERRIDE",new W.iS,b.b)}),a(q,"xy","qk",function(){return W.v("NODE_WEIGHTS_INVALID",new W.iV,b.b)}),a(q,"xw","qi",function(){return W.v("NODE_SKIN_WITH_NON_SKINNED_MESH",new W.iU,b.b)}),a(q,"xx","qj",function(){return W.v("NODE_SKINNED_MESH_WITHOUT_SKIN",new W.iT,b.e)}),a(q,"xz","ql",function(){return W.v("SCENE_NON_ROOT_NODE",new W.iW,b.b)}),a(q,"xB","qn",function(){return W.v("SKIN_IBM_INVALID_FORMAT",new W.iY,b.b)}),a(q,"xA","qm",function(){return W.v("SKIN_IBM_ACCESSOR_WITH_BYTESTRIDE",new W.iZ,b.b)}),a(q,"xC","ni",function(){return W.v("TEXTURE_INVALID_IMAGE_MIME_TYPE",new W.iu,b.b)}),a(q,"xD","qo",function(){return W.v("UNDECLARED_EXTENSION",new W.it,b.b)}),a(q,"xE","qp",function(){return W.v("UNEXPECTED_EXTENSION_OBJECT",new W.is,b.b)}),a(q,"xF","N",function(){return W.v("UNRESOLVED_REFERENCE",new W.j_,b.b)}),a(q,"xG","qq",function(){return W.v("UNSUPPORTED_EXTENSION",new W.j1,b.e)}),a(q,"xH","fD",function(){return W.v("UNUSED_OBJECT",new W.j2,b.i)}),a(q,"wS","pK",function(){return W.ar("GLB_INVALID_MAGIC",new W.hE,b.b)}),a(q,"wT","pL",function(){return W.ar("GLB_INVALID_VERSION",new W.hD,b.b)}),a(q,"wV","pN",function(){return W.ar("GLB_LENGTH_TOO_SMALL",new W.hC,b.b)}),a(q,"wO","pG",function(){return W.ar("GLB_CHUNK_LENGTH_UNALIGNED",new W.hM,b.b)}),a(q,"wU","pM",function(){return W.ar("GLB_LENGTH_MISMATCH",new W.hA,b.b)}),a(q,"wP","pH",function(){return W.ar("GLB_CHUNK_TOO_BIG",new W.hL,b.b)}),a(q,"wR","pJ",function(){return W.ar("GLB_EMPTY_CHUNK",new W.hH,b.b)}),a(q,"wQ","pI",function(){return W.ar("GLB_DUPLICATE_CHUNK",new W.hI,b.b)}),a(q,"wY","pQ",function(){return W.ar("GLB_UNEXPECTED_END_OF_CHUNK_HEADER",new W.hB,b.b)}),a(q,"wX","pP",function(){return W.ar("GLB_UNEXPECTED_END_OF_CHUNK_DATA",new W.hz,b.b)}),a(q,"wZ","pR",function(){return W.ar("GLB_UNEXPECTED_END_OF_HEADER",new W.hF,b.b)}),a(q,"x_","pS",function(){return W.ar("GLB_UNEXPECTED_FIRST_CHUNK",new W.hK,b.b)}),a(q,"wW","pO",function(){return W.ar("GLB_UNEXPECTED_BIN_CHUNK",new W.hJ,b.b)}),a(q,"x0","pT",function(){return W.ar("GLB_UNKNOWN_CHUNK_TYPE",new W.hG,b.e)}),a(q,"za","nr",function(){return p.ty(1)}),a(q,"zc","rm",function(){return Te.tv()}),a(q,"zg","rq",function(){return Te.of()}),a(q,"zd","rn",function(){var f=Te.tL();return f.a[3]=1,f}),a(q,"ze","ro",function(){return Te.of()})}(),function(){(function(){var i=function(C){var I={};return I[C]=1,Object.keys(pe.convertToFastObject(I))[0]};Xe.getIsolateTag=function(C){return i("___dart_"+C+Xe.isolateTag)};for(var a="___dart_isolate_tags_",f=Object[a]||(Object[a]=Object.create(null)),g="_ZxYxX",y=0;;y++){var M=i(g+"_"+y+"_");if(!(M in f)){f[M]=1,Xe.isolateTag=M;break}}Xe.dispatchPropertyName=Xe.getIsolateTag("dispatch_record")})(),pe.setOrUpdateInterceptorsByTag({ArrayBuffer:ee.cz,DataView:p.dm,ArrayBufferView:p.dm,Float32Array:p.dk,Float64Array:p.eI,Int16Array:p.eJ,Int32Array:p.eK,Int8Array:p.eL,Uint16Array:p.eM,Uint32Array:p.eN,Uint8ClampedArray:p.dn,CanvasPixelArray:p.dn,Uint8Array:p.cf}),pe.setOrUpdateLeafTags({ArrayBuffer:!0,DataView:!0,ArrayBufferView:!1,Float32Array:!0,Float64Array:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Uint16Array:!0,Uint32Array:!0,Uint8ClampedArray:!0,CanvasPixelArray:!0,Uint8Array:!1}),p.cE.$nativeSuperclassTag="ArrayBufferView",p.dO.$nativeSuperclassTag="ArrayBufferView",p.dP.$nativeSuperclassTag="ArrayBufferView",p.dl.$nativeSuperclassTag="ArrayBufferView",p.dQ.$nativeSuperclassTag="ArrayBufferView",p.dR.$nativeSuperclassTag="ArrayBufferView",p.av.$nativeSuperclassTag="ArrayBufferView"}(),Function.prototype.$1=function(n){return this(n)},Function.prototype.$0=function(){return this()},Function.prototype.$2=function(n,i){return this(n,i)},Function.prototype.$1$1=function(n){return this(n)},Function.prototype.$3=function(n,i,a){return this(n,i,a)},Function.prototype.$1$0=function(){return this()},Function.prototype.$4=function(n,i,a,f){return this(n,i,a,f)},Function.prototype.$1$2=function(n,i){return this(n,i)},Function.prototype.$2$0=function(){return this()},k(St),function(n){if(typeof document=="undefined"){n(null);return}if(typeof document.currentScript!="undefined"){n(document.currentScript);return}var i=document.scripts;function a(g){for(var y=0;y<i.length;++y)i[y].removeEventListener("load",a,!1);n(g.target)}for(var f=0;f<i.length;++f)i[f].addEventListener("load",a,!1)}(function(n){Xe.currentScript=n,typeof dartMainRunner=="function"?dartMainRunner(ye.p2,[]):ye.p2([])})})()})(q2);const qV=(s,e)=>q2.validateBytes(s,e);var Md={exports:{}},cn={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var X2=Object.getOwnPropertySymbols,b5=Object.prototype.hasOwnProperty,S5=Object.prototype.propertyIsEnumerable;function M5(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function T5(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(l){return e[l]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Y2=T5()?Object.assign:function(s,e){for(var t,r=M5(s),o,l=1;l<arguments.length;l++){t=Object(arguments[l]);for(var u in t)b5.call(t,u)&&(r[u]=t[u]);if(X2){o=X2(t);for(var h=0;h<o.length;h++)S5.call(t,o[h])&&(r[o[h]]=t[o[h]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=Y2,uf=60103,K2=60106;cn.Fragment=60107;cn.StrictMode=60108;cn.Profiler=60114;var Q2=60109,Z2=60110,J2=60112;cn.Suspense=60113;var eR=60115,tR=60116;if(typeof Symbol=="function"&&Symbol.for){var Os=Symbol.for;uf=Os("react.element"),K2=Os("react.portal"),cn.Fragment=Os("react.fragment"),cn.StrictMode=Os("react.strict_mode"),cn.Profiler=Os("react.profiler"),Q2=Os("react.provider"),Z2=Os("react.context"),J2=Os("react.forward_ref"),cn.Suspense=Os("react.suspense"),eR=Os("react.memo"),tR=Os("react.lazy")}var nR=typeof Symbol=="function"&&Symbol.iterator;function E5(s){return s===null||typeof s!="object"?null:(s=nR&&s[nR]||s["@@iterator"],typeof s=="function"?s:null)}function Td(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iR={};function cf(s,e,t){this.props=s,this.context=e,this.refs=iR,this.updater=t||rR}cf.prototype.isReactComponent={};cf.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error(Td(85));this.updater.enqueueSetState(this,s,e,"setState")};cf.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function sR(){}sR.prototype=cf.prototype;function x_(s,e,t){this.props=s,this.context=e,this.refs=iR,this.updater=t||rR}var __=x_.prototype=new sR;__.constructor=x_;y_(__,cf.prototype);__.isPureReactComponent=!0;var w_={current:null},oR=Object.prototype.hasOwnProperty,aR={key:!0,ref:!0,__self:!0,__source:!0};function lR(s,e,t){var r,o={},l=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(l=""+e.key),e)oR.call(e,r)&&!aR.hasOwnProperty(r)&&(o[r]=e[r]);var h=arguments.length-2;if(h===1)o.children=t;else if(1<h){for(var m=Array(h),v=0;v<h;v++)m[v]=arguments[v+2];o.children=m}if(s&&s.defaultProps)for(r in h=s.defaultProps,h)o[r]===void 0&&(o[r]=h[r]);return{$$typeof:uf,type:s,key:l,ref:u,props:o,_owner:w_.current}}function A5(s,e){return{$$typeof:uf,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function b_(s){return typeof s=="object"&&s!==null&&s.$$typeof===uf}function C5(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var uR=/\/+/g;function S_(s,e){return typeof s=="object"&&s!==null&&s.key!=null?C5(""+s.key):e.toString(36)}function y0(s,e,t,r,o){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var u=!1;if(s===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(s.$$typeof){case uf:case K2:u=!0}}if(u)return u=s,o=o(u),s=r===""?"."+S_(u,0):r,Array.isArray(o)?(t="",s!=null&&(t=s.replace(uR,"$&/")+"/"),y0(o,e,t,"",function(v){return v})):o!=null&&(b_(o)&&(o=A5(o,t+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(uR,"$&/")+"/")+s)),e.push(o)),1;if(u=0,r=r===""?".":r+":",Array.isArray(s))for(var h=0;h<s.length;h++){l=s[h];var m=r+S_(l,h);u+=y0(l,e,t,m,o)}else if(m=E5(s),typeof m=="function")for(s=m.call(s),h=0;!(l=s.next()).done;)l=l.value,m=r+S_(l,h++),u+=y0(l,e,t,m,o);else if(l==="object")throw e=""+s,Error(Td(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e));return u}function x0(s,e,t){if(s==null)return s;var r=[],o=0;return y0(s,r,"","",function(l){return e.call(t,l,o++)}),r}function R5(s){if(s._status===-1){var e=s._result;e=e(),s._status=0,s._result=e,e.then(function(t){s._status===0&&(t=t.default,s._status=1,s._result=t)},function(t){s._status===0&&(s._status=2,s._result=t)})}if(s._status===1)return s._result;throw s._result}var cR={current:null};function No(){var s=cR.current;if(s===null)throw Error(Td(321));return s}var L5={ReactCurrentDispatcher:cR,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w_,IsSomeRendererActing:{current:!1},assign:y_};cn.Children={map:x0,forEach:function(s,e,t){x0(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return x0(s,function(){e++}),e},toArray:function(s){return x0(s,function(e){return e})||[]},only:function(s){if(!b_(s))throw Error(Td(143));return s}};cn.Component=cf;cn.PureComponent=x_;cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L5;cn.cloneElement=function(s,e,t){if(s==null)throw Error(Td(267,s));var r=y_({},s.props),o=s.key,l=s.ref,u=s._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,u=w_.current),e.key!==void 0&&(o=""+e.key),s.type&&s.type.defaultProps)var h=s.type.defaultProps;for(m in e)oR.call(e,m)&&!aR.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=t;else if(1<m){h=Array(m);for(var v=0;v<m;v++)h[v]=arguments[v+2];r.children=h}return{$$typeof:uf,type:s.type,key:o,ref:l,props:r,_owner:u}};cn.createContext=function(s,e){return e===void 0&&(e=null),s={$$typeof:Z2,_calculateChangedBits:e,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider={$$typeof:Q2,_context:s},s.Consumer=s};cn.createElement=lR;cn.createFactory=function(s){var e=lR.bind(null,s);return e.type=s,e};cn.createRef=function(){return{current:null}};cn.forwardRef=function(s){return{$$typeof:J2,render:s}};cn.isValidElement=b_;cn.lazy=function(s){return{$$typeof:tR,_payload:{_status:-1,_result:s},_init:R5}};cn.memo=function(s,e){return{$$typeof:eR,type:s,compare:e===void 0?null:e}};cn.useCallback=function(s,e){return No().useCallback(s,e)};cn.useContext=function(s,e){return No().useContext(s,e)};cn.useDebugValue=function(){};cn.useEffect=function(s,e){return No().useEffect(s,e)};cn.useImperativeHandle=function(s,e,t){return No().useImperativeHandle(s,e,t)};cn.useLayoutEffect=function(s,e){return No().useLayoutEffect(s,e)};cn.useMemo=function(s,e){return No().useMemo(s,e)};cn.useReducer=function(s,e,t){return No().useReducer(s,e,t)};cn.useRef=function(s){return No().useRef(s)};cn.useState=function(s){return No().useState(s)};cn.version="17.0.2";Md.exports=cn;var XV=Md.exports,_0={exports:{}},Ed={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5=Md.exports,fR=60103;Ed.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var hR=Symbol.for;fR=hR("react.element"),Ed.Fragment=hR("react.fragment")}var P5=I5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k5=Object.prototype.hasOwnProperty,D5={key:!0,ref:!0,__self:!0,__source:!0};function dR(s,e,t){var r,o={},l=null,u=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)k5.call(e,r)&&!D5.hasOwnProperty(r)&&(o[r]=e[r]);if(s&&s.defaultProps)for(r in e=s.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:fR,type:s,key:l,ref:u,props:o,_owner:P5.current}}Ed.jsx=dR;Ed.jsxs=dR;_0.exports=Ed;const O5=_0.exports.jsx,N5=_0.exports.jsxs,F5=_0.exports.Fragment;var U5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsx:O5,jsxs:N5,Fragment:F5}),fu={exports:{}};(function(s,e){(function(t,r){s.exports=r()})(v_,function(){var t=navigator.userAgent,r=navigator.platform,o=/gecko\/\d/i.test(t),l=/MSIE \d/.test(t),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),h=/Edge\/(\d+)/.exec(t),m=l||u||h,v=m&&(l?document.documentMode||6:+(h||u)[1]),w=!h&&/WebKit\//.test(t),S=w&&/Qt\/\d+\.\d+/.test(t),A=!h&&/Chrome\//.test(t),R=/Opera\//.test(t),O=/Apple Computer/.test(navigator.vendor),N=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),k=/PhantomJS/.test(t),D=O&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),P=/Android/.test(t),F=D||P||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),L=D||/Mac/.test(r),z=/\bCrOS\b/.test(t),H=/win/i.test(r),X=R&&t.match(/Version\/(\d*\.\d*)/);X&&(X=Number(X[1])),X&&X>=15&&(R=!1,w=!0);var $=L&&(S||R&&(X==null||X<12.11)),J=o||m&&v>=9;function se(c){return new RegExp("(^|\\s)"+c+"(?:$|\\s)\\s*")}var ce=function(c,d){var _=c.className,x=se(d).exec(_);if(x){var T=_.slice(x.index+x[0].length);c.className=_.slice(0,x.index)+(T?x[1]+T:"")}};function pe(c){for(var d=c.childNodes.length;d>0;--d)c.removeChild(c.firstChild);return c}function fe(c,d){return pe(c).appendChild(d)}function b(c,d,_,x){var T=document.createElement(c);if(_&&(T.className=_),x&&(T.style.cssText=x),typeof d=="string")T.appendChild(document.createTextNode(d));else if(d)for(var U=0;U<d.length;++U)T.appendChild(d[U]);return T}function p(c,d,_,x){var T=b(c,d,_,x);return T.setAttribute("role","presentation"),T}var ee;document.createRange?ee=function(c,d,_,x){var T=document.createRange();return T.setEnd(x||c,_),T.setStart(c,d),T}:ee=function(c,d,_){var x=document.body.createTextRange();try{x.moveToElementText(c.parentNode)}catch{return x}return x.collapse(!0),x.moveEnd("character",_),x.moveStart("character",d),x};function E(c,d){if(d.nodeType==3&&(d=d.parentNode),c.contains)return c.contains(d);do if(d.nodeType==11&&(d=d.host),d==c)return!0;while(d=d.parentNode)}function me(){var c;try{c=document.activeElement}catch{c=document.body||null}for(;c&&c.shadowRoot&&c.shadowRoot.activeElement;)c=c.shadowRoot.activeElement;return c}function Se(c,d){var _=c.className;se(d).test(_)||(c.className+=(_?" ":"")+d)}function Te(c,d){for(var _=c.split(" "),x=0;x<_.length;x++)_[x]&&!se(_[x]).test(d)&&(d+=" "+_[x]);return d}var ye=function(c){c.select()};D?ye=function(c){c.selectionStart=0,c.selectionEnd=c.value.length}:m&&(ye=function(c){try{c.select()}catch{}});function de(c){var d=Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,d)}}function Re(c,d,_){d||(d={});for(var x in c)c.hasOwnProperty(x)&&(_!==!1||!d.hasOwnProperty(x))&&(d[x]=c[x]);return d}function we(c,d,_,x,T){d==null&&(d=c.search(/[^\s\u00a0]/),d==-1&&(d=c.length));for(var U=x||0,j=T||0;;){var K=c.indexOf("	",U);if(K<0||K>=d)return j+(d-U);j+=K-U,j+=_-j%_,U=K+1}}var Ie=function(){this.id=null,this.f=null,this.time=0,this.handler=de(this.onTimeout,this)};Ie.prototype.onTimeout=function(c){c.id=0,c.time<=+new Date?c.f():setTimeout(c.handler,c.time-+new Date)},Ie.prototype.set=function(c,d){this.f=d;var _=+new Date+c;(!this.id||_<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,c),this.time=_)};function Me(c,d){for(var _=0;_<c.length;++_)if(c[_]==d)return _;return-1}var Be=50,Ve={toString:function(){return"CodeMirror.Pass"}},qe={scroll:!1},W={origin:"*mouse"},We={origin:"+move"};function De(c,d,_){for(var x=0,T=0;;){var U=c.indexOf("	",x);U==-1&&(U=c.length);var j=U-x;if(U==c.length||T+j>=d)return x+Math.min(j,d-T);if(T+=U-x,T+=_-T%_,x=U+1,T>=d)return x}}var Pe=[""];function Ye(c){for(;Pe.length<=c;)Pe.push(Fe(Pe)+" ");return Pe[c]}function Fe(c){return c[c.length-1]}function oe(c,d){for(var _=[],x=0;x<c.length;x++)_[x]=d(c[x],x);return _}function St(c,d,_){for(var x=0,T=_(d);x<c.length&&_(c[x])<=T;)x++;c.splice(x,0,d)}function q(){}function Xe(c,d){var _;return Object.create?_=Object.create(c):(q.prototype=c,_=new q),d&&Re(d,_),_}var Ft=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Y(c){return/\w/.test(c)||c>"\x80"&&(c.toUpperCase()!=c.toLowerCase()||Ft.test(c))}function n(c,d){return d?d.source.indexOf("\\w")>-1&&Y(c)?!0:d.test(c):Y(c)}function i(c){for(var d in c)if(c.hasOwnProperty(d)&&c[d])return!1;return!0}var a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function f(c){return c.charCodeAt(0)>=768&&a.test(c)}function g(c,d,_){for(;(_<0?d>0:d<c.length)&&f(c.charAt(d));)d+=_;return d}function y(c,d,_){for(var x=d>_?-1:1;;){if(d==_)return d;var T=(d+_)/2,U=x<0?Math.ceil(T):Math.floor(T);if(U==d)return c(U)?d:_;c(U)?_=U:d=U+x}}function M(c,d,_,x){if(!c)return x(d,_,"ltr",0);for(var T=!1,U=0;U<c.length;++U){var j=c[U];(j.from<_&&j.to>d||d==_&&j.to==d)&&(x(Math.max(j.from,d),Math.min(j.to,_),j.level==1?"rtl":"ltr",U),T=!0)}T||x(d,_,"ltr")}var C=null;function I(c,d,_){var x;C=null;for(var T=0;T<c.length;++T){var U=c[T];if(U.from<d&&U.to>d)return T;U.to==d&&(U.from!=U.to&&_=="before"?x=T:C=T),U.from==d&&(U.from!=U.to&&_!="before"?x=T:C=T)}return x!=null?x:C}var B=function(){var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function _(re){return re<=247?c.charAt(re):1424<=re&&re<=1524?"R":1536<=re&&re<=1785?d.charAt(re-1536):1774<=re&&re<=2220?"r":8192<=re&&re<=8203?"w":re==8204?"b":"L"}var x=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,U=/[LRr]/,j=/[Lb1n]/,K=/[1n]/;function te(re,ve,_e){this.level=re,this.from=ve,this.to=_e}return function(re,ve){var _e=ve=="ltr"?"L":"R";if(re.length==0||ve=="ltr"&&!x.test(re))return!1;for(var Ae=re.length,Ee=[],Ue=0;Ue<Ae;++Ue)Ee.push(_(re.charCodeAt(Ue)));for(var Ge=0,Je=_e;Ge<Ae;++Ge){var nt=Ee[Ge];nt=="m"?Ee[Ge]=Je:Je=nt}for(var ut=0,rt=_e;ut<Ae;++ut){var dt=Ee[ut];dt=="1"&&rt=="r"?Ee[ut]="n":U.test(dt)&&(rt=dt,dt=="r"&&(Ee[ut]="R"))}for(var Lt=1,Tt=Ee[0];Lt<Ae-1;++Lt){var qt=Ee[Lt];qt=="+"&&Tt=="1"&&Ee[Lt+1]=="1"?Ee[Lt]="1":qt==","&&Tt==Ee[Lt+1]&&(Tt=="1"||Tt=="n")&&(Ee[Lt]=Tt),Tt=qt}for(var Tn=0;Tn<Ae;++Tn){var br=Ee[Tn];if(br==",")Ee[Tn]="N";else if(br=="%"){var Fn=void 0;for(Fn=Tn+1;Fn<Ae&&Ee[Fn]=="%";++Fn);for(var Si=Tn&&Ee[Tn-1]=="!"||Fn<Ae&&Ee[Fn]=="1"?"1":"N",ai=Tn;ai<Fn;++ai)Ee[ai]=Si;Tn=Fn-1}}for(var nr=0,li=_e;nr<Ae;++nr){var Rr=Ee[nr];li=="L"&&Rr=="1"?Ee[nr]="L":U.test(Rr)&&(li=Rr)}for(var dr=0;dr<Ae;++dr)if(T.test(Ee[dr])){var rr=void 0;for(rr=dr+1;rr<Ae&&T.test(Ee[rr]);++rr);for(var $n=(dr?Ee[dr-1]:_e)=="L",ui=(rr<Ae?Ee[rr]:_e)=="L",Wu=$n==ui?$n?"L":"R":_e,ta=dr;ta<rr;++ta)Ee[ta]=Wu;dr=rr-1}for(var zr=[],Gs,Sr=0;Sr<Ae;)if(j.test(Ee[Sr])){var py=Sr;for(++Sr;Sr<Ae&&j.test(Ee[Sr]);++Sr);zr.push(new te(0,py,Sr))}else{var mo=Sr,ml=zr.length,gl=ve=="rtl"?1:0;for(++Sr;Sr<Ae&&Ee[Sr]!="L";++Sr);for(var Qr=mo;Qr<Sr;)if(K.test(Ee[Qr])){mo<Qr&&(zr.splice(ml,0,new te(1,mo,Qr)),ml+=gl);var $u=Qr;for(++Qr;Qr<Sr&&K.test(Ee[Qr]);++Qr);zr.splice(ml,0,new te(2,$u,Qr)),ml+=gl,mo=Qr}else++Qr;mo<Sr&&zr.splice(ml,0,new te(1,mo,Sr))}return ve=="ltr"&&(zr[0].level==1&&(Gs=re.match(/^\s+/))&&(zr[0].from=Gs[0].length,zr.unshift(new te(0,0,Gs[0].length))),Fe(zr).level==1&&(Gs=re.match(/\s+$/))&&(Fe(zr).to-=Gs[0].length,zr.push(new te(0,Ae-Gs[0].length,Ae)))),ve=="rtl"?zr.reverse():zr}}();function G(c,d){var _=c.order;return _==null&&(_=c.order=B(c.text,d)),_}var V=[],Q=function(c,d,_){if(c.addEventListener)c.addEventListener(d,_,!1);else if(c.attachEvent)c.attachEvent("on"+d,_);else{var x=c._handlers||(c._handlers={});x[d]=(x[d]||V).concat(_)}};function Z(c,d){return c._handlers&&c._handlers[d]||V}function ne(c,d,_){if(c.removeEventListener)c.removeEventListener(d,_,!1);else if(c.detachEvent)c.detachEvent("on"+d,_);else{var x=c._handlers,T=x&&x[d];if(T){var U=Me(T,_);U>-1&&(x[d]=T.slice(0,U).concat(T.slice(U+1)))}}}function ae(c,d){var _=Z(c,d);if(!!_.length)for(var x=Array.prototype.slice.call(arguments,2),T=0;T<_.length;++T)_[T].apply(null,x)}function ue(c,d,_){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),ae(c,_||d.type,c,d),lt(d)||d.codemirrorIgnore}function he(c){var d=c._handlers&&c._handlers.cursorActivity;if(!!d)for(var _=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]),x=0;x<d.length;++x)Me(_,d[x])==-1&&_.push(d[x])}function Ce(c,d){return Z(c,d).length>0}function He(c){c.prototype.on=function(d,_){Q(this,d,_)},c.prototype.off=function(d,_){ne(this,d,_)}}function Oe(c){c.preventDefault?c.preventDefault():c.returnValue=!1}function gt(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0}function lt(c){return c.defaultPrevented!=null?c.defaultPrevented:c.returnValue==!1}function Et(c){Oe(c),gt(c)}function pt(c){return c.target||c.srcElement}function vt(c){var d=c.which;return d==null&&(c.button&1?d=1:c.button&2?d=3:c.button&4&&(d=2)),L&&c.ctrlKey&&d==1&&(d=3),d}var wn=function(){if(m&&v<9)return!1;var c=b("div");return"draggable"in c||"dragDrop"in c}(),en;function En(c){if(en==null){var d=b("span","\u200B");fe(c,b("span",[d,document.createTextNode("x")])),c.firstChild.offsetHeight!=0&&(en=d.offsetWidth<=1&&d.offsetHeight>2&&!(m&&v<8))}var _=en?b("span","\u200B"):b("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return _.setAttribute("cm-text",""),_}var vn;function tn(c){if(vn!=null)return vn;var d=fe(c,document.createTextNode("A\u062EA")),_=ee(d,0,1).getBoundingClientRect(),x=ee(d,1,2).getBoundingClientRect();return pe(c),!_||_.left==_.right?!1:vn=x.right-_.right<3}var ge=`

b`.split(/\n/).length!=3?function(c){for(var d=0,_=[],x=c.length;d<=x;){var T=c.indexOf(`
`,d);T==-1&&(T=c.length);var U=c.slice(d,c.charAt(T-1)=="\r"?T-1:T),j=U.indexOf("\r");j!=-1?(_.push(U.slice(0,j)),d+=j+1):(_.push(U),d=T+1)}return _}:function(c){return c.split(/\r\n?|\n/)},Le=window.getSelection?function(c){try{return c.selectionStart!=c.selectionEnd}catch{return!1}}:function(c){var d;try{d=c.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=c?!1:d.compareEndPoints("StartToEnd",d)!=0},Ne=function(){var c=b("div");return"oncopy"in c?!0:(c.setAttribute("oncopy","return;"),typeof c.oncopy=="function")}(),ke=null;function be(c){if(ke!=null)return ke;var d=fe(c,b("span","x")),_=d.getBoundingClientRect(),x=ee(d,0,1).getBoundingClientRect();return ke=Math.abs(_.left-x.left)>1}var yt={},wt={};function It(c,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),yt[c]=d}function At(c,d){wt[c]=d}function Kt(c){if(typeof c=="string"&&wt.hasOwnProperty(c))c=wt[c];else if(c&&typeof c.name=="string"&&wt.hasOwnProperty(c.name)){var d=wt[c.name];typeof d=="string"&&(d={name:d}),c=Xe(d,c),c.name=d.name}else{if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(c))return Kt("application/xml");if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(c))return Kt("application/json")}return typeof c=="string"?{name:c}:c||{name:"null"}}function jt(c,d){d=Kt(d);var _=yt[d.name];if(!_)return jt(c,"text/plain");var x=_(c,d);if(Bt.hasOwnProperty(d.name)){var T=Bt[d.name];for(var U in T)!T.hasOwnProperty(U)||(x.hasOwnProperty(U)&&(x["_"+U]=x[U]),x[U]=T[U])}if(x.name=d.name,d.helperType&&(x.helperType=d.helperType),d.modeProps)for(var j in d.modeProps)x[j]=d.modeProps[j];return x}var Bt={};function rn(c,d){var _=Bt.hasOwnProperty(c)?Bt[c]:Bt[c]={};Re(d,_)}function Vn(c,d){if(d===!0)return d;if(c.copyState)return c.copyState(d);var _={};for(var x in d){var T=d[x];T instanceof Array&&(T=T.concat([])),_[x]=T}return _}function xi(c,d){for(var _;c.innerMode&&(_=c.innerMode(d),!(!_||_.mode==c));)d=_.state,c=_.mode;return _||{mode:c,state:d}}function _i(c,d,_){return c.startState?c.startState(d,_):!0}var sn=function(c,d,_){this.pos=this.start=0,this.string=c,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=_};sn.prototype.eol=function(){return this.pos>=this.string.length},sn.prototype.sol=function(){return this.pos==this.lineStart},sn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},sn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},sn.prototype.eat=function(c){var d=this.string.charAt(this.pos),_;if(typeof c=="string"?_=d==c:_=d&&(c.test?c.test(d):c(d)),_)return++this.pos,d},sn.prototype.eatWhile=function(c){for(var d=this.pos;this.eat(c););return this.pos>d},sn.prototype.eatSpace=function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},sn.prototype.skipToEnd=function(){this.pos=this.string.length},sn.prototype.skipTo=function(c){var d=this.string.indexOf(c,this.pos);if(d>-1)return this.pos=d,!0},sn.prototype.backUp=function(c){this.pos-=c},sn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=we(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},sn.prototype.indentation=function(){return we(this.string,null,this.tabSize)-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},sn.prototype.match=function(c,d,_){if(typeof c=="string"){var x=function(j){return _?j.toLowerCase():j},T=this.string.substr(this.pos,c.length);if(x(T)==x(c))return d!==!1&&(this.pos+=c.length),!0}else{var U=this.string.slice(this.pos).match(c);return U&&U.index>0?null:(U&&d!==!1&&(this.pos+=U[0].length),U)}},sn.prototype.current=function(){return this.string.slice(this.start,this.pos)},sn.prototype.hideFirstChars=function(c,d){this.lineStart+=c;try{return d()}finally{this.lineStart-=c}},sn.prototype.lookAhead=function(c){var d=this.lineOracle;return d&&d.lookAhead(c)},sn.prototype.baseToken=function(){var c=this.lineOracle;return c&&c.baseToken(this.pos)};function Ze(c,d){if(d-=c.first,d<0||d>=c.size)throw new Error("There is no line "+(d+c.first)+" in the document.");for(var _=c;!_.lines;)for(var x=0;;++x){var T=_.children[x],U=T.chunkSize();if(d<U){_=T;break}d-=U}return _.lines[d]}function yr(c,d,_){var x=[],T=d.line;return c.iter(d.line,_.line+1,function(U){var j=U.text;T==_.line&&(j=j.slice(0,_.ch)),T==d.line&&(j=j.slice(d.ch)),x.push(j),++T}),x}function bn(c,d,_){var x=[];return c.iter(d,_,function(T){x.push(T.text)}),x}function An(c,d){var _=d-c.height;if(_)for(var x=c;x;x=x.parent)x.height+=_}function Wt(c){if(c.parent==null)return null;for(var d=c.parent,_=Me(d.lines,c),x=d.parent;x;d=x,x=x.parent)for(var T=0;x.children[T]!=d;++T)_+=x.children[T].chunkSize();return _+d.first}function Ar(c,d){var _=c.first;e:do{for(var x=0;x<c.children.length;++x){var T=c.children[x],U=T.height;if(d<U){c=T;continue e}d-=U,_+=T.chunkSize()}return _}while(!c.lines);for(var j=0;j<c.lines.length;++j){var K=c.lines[j],te=K.height;if(d<te)break;d-=te}return _+j}function Fi(c,d){return d>=c.first&&d<c.first+c.size}function Wn(c,d){return String(c.lineNumberFormatter(d+c.firstLineNumber))}function $e(c,d,_){if(_===void 0&&(_=null),!(this instanceof $e))return new $e(c,d,_);this.line=c,this.ch=d,this.sticky=_}function ie(c,d){return c.line-d.line||c.ch-d.ch}function xe(c,d){return c.sticky==d.sticky&&ie(c,d)==0}function ze(c){return $e(c.line,c.ch)}function Ke(c,d){return ie(c,d)<0?d:c}function kt(c,d){return ie(c,d)<0?c:d}function Qt(c,d){return Math.max(c.first,Math.min(d,c.first+c.size-1))}function ct(c,d){if(d.line<c.first)return $e(c.first,0);var _=c.first+c.size-1;return d.line>_?$e(_,Ze(c,_).text.length):xr(d,Ze(c,d.line).text.length)}function xr(c,d){var _=c.ch;return _==null||_>d?$e(c.line,d):_<0?$e(c.line,0):c}function ri(c,d){for(var _=[],x=0;x<d.length;x++)_[x]=ct(c,d[x]);return _}var Vo=function(c,d){this.state=c,this.lookAhead=d},Zi=function(c,d,_,x){this.state=d,this.doc=c,this.line=_,this.maxLookAhead=x||0,this.baseTokens=null,this.baseTokenPos=1};Zi.prototype.lookAhead=function(c){var d=this.doc.getLine(this.line+c);return d!=null&&c>this.maxLookAhead&&(this.maxLookAhead=c),d},Zi.prototype.baseToken=function(c){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=c;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-c}},Zi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Zi.fromSaved=function(c,d,_){return d instanceof Vo?new Zi(c,Vn(c.mode,d.state),_,d.lookAhead):new Zi(c,Vn(c.mode,d),_)},Zi.prototype.save=function(c){var d=c!==!1?Vn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Vo(d,this.maxLookAhead):d};function Sp(c,d,_,x){var T=[c.state.modeGen],U={};Gf(c,d.text,c.doc.mode,_,function(re,ve){return T.push(re,ve)},U,x);for(var j=_.state,K=function(re){_.baseTokens=T;var ve=c.state.overlays[re],_e=1,Ae=0;_.state=!0,Gf(c,d.text,ve.mode,_,function(Ee,Ue){for(var Ge=_e;Ae<Ee;){var Je=T[_e];Je>Ee&&T.splice(_e,1,Ee,T[_e+1],Je),_e+=2,Ae=Math.min(Ee,Je)}if(!!Ue)if(ve.opaque)T.splice(Ge,_e-Ge,Ee,"overlay "+Ue),_e=Ge+2;else for(;Ge<_e;Ge+=2){var nt=T[Ge+1];T[Ge+1]=(nt?nt+" ":"")+"overlay "+Ue}},U),_.state=j,_.baseTokens=null,_.baseTokenPos=1},te=0;te<c.state.overlays.length;++te)K(te);return{styles:T,classes:U.bgClass||U.textClass?U:null}}function Mp(c,d,_){if(!d.styles||d.styles[0]!=c.state.modeGen){var x=Wo(c,Wt(d)),T=d.text.length>c.options.maxHighlightLength&&Vn(c.doc.mode,x.state),U=Sp(c,d,x);T&&(x.state=T),d.stateAfter=x.save(!T),d.styles=U.styles,U.classes?d.styleClasses=U.classes:d.styleClasses&&(d.styleClasses=null),_===c.doc.highlightFrontier&&(c.doc.modeFrontier=Math.max(c.doc.modeFrontier,++c.doc.highlightFrontier))}return d.styles}function Wo(c,d,_){var x=c.doc,T=c.display;if(!x.mode.startState)return new Zi(x,!0,d);var U=Rt(c,d,_),j=U>x.first&&Ze(x,U-1).stateAfter,K=j?Zi.fromSaved(x,j,U):new Zi(x,_i(x.mode),U);return x.iter(U,d,function(te){Bf(c,te.text,K);var re=K.line;te.stateAfter=re==d-1||re%5==0||re>=T.viewFrom&&re<T.viewTo?K.save():null,K.nextLine()}),_&&(x.modeFrontier=K.line),K}function Bf(c,d,_,x){var T=c.doc.mode,U=new sn(d,c.options.tabSize,_);for(U.start=U.pos=x||0,d==""&&Tp(T,_.state);!U.eol();)zf(T,U,_.state),U.start=U.pos}function Tp(c,d){if(c.blankLine)return c.blankLine(d);if(!!c.innerMode){var _=xi(c,d);if(_.mode.blankLine)return _.mode.blankLine(_.state)}}function zf(c,d,_,x){for(var T=0;T<10;T++){x&&(x[0]=xi(c,_).mode);var U=c.token(d,_);if(d.pos>d.start)return U}throw new Error("Mode "+c.name+" failed to advance stream.")}var Ep=function(c,d,_){this.start=c.start,this.end=c.pos,this.string=c.current(),this.type=d||null,this.state=_};function Ap(c,d,_,x){var T=c.doc,U=T.mode,j;d=ct(T,d);var K=Ze(T,d.line),te=Wo(c,d.line,_),re=new sn(K.text,c.options.tabSize,te),ve;for(x&&(ve=[]);(x||re.pos<d.ch)&&!re.eol();)re.start=re.pos,j=zf(U,re,te.state),x&&ve.push(new Ep(re,j,Vn(T.mode,te.state)));return x?ve:new Ep(re,j,te.state)}function Hf(c,d){if(c)for(;;){var _=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!_)break;c=c.slice(0,_.index)+c.slice(_.index+_[0].length);var x=_[1]?"bgClass":"textClass";d[x]==null?d[x]=_[2]:new RegExp("(?:^|\\s)"+_[2]+"(?:$|\\s)").test(d[x])||(d[x]+=" "+_[2])}return c}function Gf(c,d,_,x,T,U,j){var K=_.flattenSpans;K==null&&(K=c.options.flattenSpans);var te=0,re=null,ve=new sn(d,c.options.tabSize,x),_e,Ae=c.options.addModeClass&&[null];for(d==""&&Hf(Tp(_,x.state),U);!ve.eol();){if(ve.pos>c.options.maxHighlightLength?(K=!1,j&&Bf(c,d,x,ve.pos),ve.pos=d.length,_e=null):_e=Hf(zf(_,ve,x.state,Ae),U),Ae){var Ee=Ae[0].name;Ee&&(_e="m-"+(_e?Ee+" "+_e:Ee))}if(!K||re!=_e){for(;te<ve.start;)te=Math.min(ve.start,te+5e3),T(te,re);re=_e}ve.start=ve.pos}for(;te<ve.pos;){var Ue=Math.min(ve.pos,te+5e3);T(Ue,re),te=Ue}}function Rt(c,d,_){for(var x,T,U=c.doc,j=_?-1:d-(c.doc.mode.innerMode?1e3:100),K=d;K>j;--K){if(K<=U.first)return U.first;var te=Ze(U,K-1),re=te.stateAfter;if(re&&(!_||K+(re instanceof Vo?re.lookAhead:0)<=U.modeFrontier))return K;var ve=we(te.text,null,c.options.tabSize);(T==null||x>ve)&&(T=K-1,x=ve)}return T}function it(c,d){if(c.modeFrontier=Math.min(c.modeFrontier,d),!(c.highlightFrontier<d-10)){for(var _=c.first,x=d-1;x>_;x--){var T=Ze(c,x).stateAfter;if(T&&(!(T instanceof Vo)||x+T.lookAhead<d)){_=x+1;break}}c.highlightFrontier=Math.min(c.highlightFrontier,_)}}var Sn=!1,Mn=!1;function fr(){Sn=!0}function hr(){Mn=!0}function ys(c,d,_){this.marker=c,this.from=d,this.to=_}function Ji(c,d){if(c)for(var _=0;_<c.length;++_){var x=c[_];if(x.marker==d)return x}}function Us(c,d){for(var _,x=0;x<c.length;++x)c[x]!=d&&(_||(_=[])).push(c[x]);return _}function Cp(c,d,_){var x=_&&window.WeakSet&&(_.markedSpans||(_.markedSpans=new WeakSet));x&&x.has(c.markedSpans)?c.markedSpans.push(d):(c.markedSpans=c.markedSpans?c.markedSpans.concat([d]):[d],x&&x.add(c.markedSpans)),d.marker.attachLine(c)}function Ur(c,d,_){var x;if(c)for(var T=0;T<c.length;++T){var U=c[T],j=U.marker,K=U.from==null||(j.inclusiveLeft?U.from<=d:U.from<d);if(K||U.from==d&&j.type=="bookmark"&&(!_||!U.marker.insertLeft)){var te=U.to==null||(j.inclusiveRight?U.to>=d:U.to>d);(x||(x=[])).push(new ys(j,U.from,te?null:U.to))}}return x}function $o(c,d,_){var x;if(c)for(var T=0;T<c.length;++T){var U=c[T],j=U.marker,K=U.to==null||(j.inclusiveRight?U.to>=d:U.to>d);if(K||U.from==d&&j.type=="bookmark"&&(!_||U.marker.insertLeft)){var te=U.from==null||(j.inclusiveLeft?U.from<=d:U.from<d);(x||(x=[])).push(new ys(j,te?null:U.from-d,U.to==null?null:U.to-d))}}return x}function Ui(c,d){if(d.full)return null;var _=Fi(c,d.from.line)&&Ze(c,d.from.line).markedSpans,x=Fi(c,d.to.line)&&Ze(c,d.to.line).markedSpans;if(!_&&!x)return null;var T=d.from.ch,U=d.to.ch,j=ie(d.from,d.to)==0,K=Ur(_,T,j),te=$o(x,U,j),re=d.text.length==1,ve=Fe(d.text).length+(re?T:0);if(K)for(var _e=0;_e<K.length;++_e){var Ae=K[_e];if(Ae.to==null){var Ee=Ji(te,Ae.marker);Ee?re&&(Ae.to=Ee.to==null?null:Ee.to+ve):Ae.to=T}}if(te)for(var Ue=0;Ue<te.length;++Ue){var Ge=te[Ue];if(Ge.to!=null&&(Ge.to+=ve),Ge.from==null){var Je=Ji(K,Ge.marker);Je||(Ge.from=ve,re&&(K||(K=[])).push(Ge))}else Ge.from+=ve,re&&(K||(K=[])).push(Ge)}K&&(K=Vf(K)),te&&te!=K&&(te=Vf(te));var nt=[K];if(!re){var ut=d.text.length-2,rt;if(ut>0&&K)for(var dt=0;dt<K.length;++dt)K[dt].to==null&&(rt||(rt=[])).push(new ys(K[dt].marker,null,null));for(var Lt=0;Lt<ut;++Lt)nt.push(rt);nt.push(te)}return nt}function Vf(c){for(var d=0;d<c.length;++d){var _=c[d];_.from!=null&&_.from==_.to&&_.marker.clearWhenEmpty!==!1&&c.splice(d--,1)}return c.length?c:null}function jo(c,d,_){var x=null;if(c.iter(d.line,_.line+1,function(Ee){if(Ee.markedSpans)for(var Ue=0;Ue<Ee.markedSpans.length;++Ue){var Ge=Ee.markedSpans[Ue].marker;Ge.readOnly&&(!x||Me(x,Ge)==-1)&&(x||(x=[])).push(Ge)}}),!x)return null;for(var T=[{from:d,to:_}],U=0;U<x.length;++U)for(var j=x[U],K=j.find(0),te=0;te<T.length;++te){var re=T[te];if(!(ie(re.to,K.from)<0||ie(re.from,K.to)>0)){var ve=[te,1],_e=ie(re.from,K.from),Ae=ie(re.to,K.to);(_e<0||!j.inclusiveLeft&&!_e)&&ve.push({from:re.from,to:K.from}),(Ae>0||!j.inclusiveRight&&!Ae)&&ve.push({from:K.to,to:re.to}),T.splice.apply(T,ve),te+=ve.length-3}}return T}function wi(c){var d=c.markedSpans;if(!!d){for(var _=0;_<d.length;++_)d[_].marker.detachLine(c);c.markedSpans=null}}function ii(c,d){if(!!d){for(var _=0;_<d.length;++_)d[_].marker.attachLine(c);c.markedSpans=d}}function nl(c){return c.inclusiveLeft?-1:0}function rl(c){return c.inclusiveRight?1:0}function il(c,d){var _=c.lines.length-d.lines.length;if(_!=0)return _;var x=c.find(),T=d.find(),U=ie(x.from,T.from)||nl(c)-nl(d);if(U)return-U;var j=ie(x.to,T.to)||rl(c)-rl(d);return j||d.id-c.id}function qo(c,d){var _=Mn&&c.markedSpans,x;if(_)for(var T=void 0,U=0;U<_.length;++U)T=_[U],T.marker.collapsed&&(d?T.from:T.to)==null&&(!x||il(x,T.marker)<0)&&(x=T.marker);return x}function Eu(c){return qo(c,!0)}function uo(c){return qo(c,!1)}function Ev(c,d){var _=Mn&&c.markedSpans,x;if(_)for(var T=0;T<_.length;++T){var U=_[T];U.marker.collapsed&&(U.from==null||U.from<d)&&(U.to==null||U.to>d)&&(!x||il(x,U.marker)<0)&&(x=U.marker)}return x}function Rp(c,d,_,x,T){var U=Ze(c,d),j=Mn&&U.markedSpans;if(j)for(var K=0;K<j.length;++K){var te=j[K];if(!!te.marker.collapsed){var re=te.marker.find(0),ve=ie(re.from,_)||nl(te.marker)-nl(T),_e=ie(re.to,x)||rl(te.marker)-rl(T);if(!(ve>=0&&_e<=0||ve<=0&&_e>=0)&&(ve<=0&&(te.marker.inclusiveRight&&T.inclusiveLeft?ie(re.to,_)>=0:ie(re.to,_)>0)||ve>=0&&(te.marker.inclusiveRight&&T.inclusiveLeft?ie(re.from,x)<=0:ie(re.from,x)<0)))return!0}}}function Bi(c){for(var d;d=Eu(c);)c=d.find(-1,!0).line;return c}function Av(c){for(var d;d=uo(c);)c=d.find(1,!0).line;return c}function Cv(c){for(var d,_;d=uo(c);)c=d.find(1,!0).line,(_||(_=[])).push(c);return _}function Wf(c,d){var _=Ze(c,d),x=Bi(_);return _==x?d:Wt(x)}function Lp(c,d){if(d>c.lastLine())return d;var _=Ze(c,d),x;if(!Bs(c,_))return d;for(;x=uo(_);)_=x.find(1,!0).line;return Wt(_)+1}function Bs(c,d){var _=Mn&&d.markedSpans;if(_){for(var x=void 0,T=0;T<_.length;++T)if(x=_[T],!!x.marker.collapsed){if(x.from==null)return!0;if(!x.marker.widgetNode&&x.from==0&&x.marker.inclusiveLeft&&Au(c,d,x))return!0}}}function Au(c,d,_){if(_.to==null){var x=_.marker.find(1,!0);return Au(c,x.line,Ji(x.line.markedSpans,_.marker))}if(_.marker.inclusiveRight&&_.to==d.text.length)return!0;for(var T=void 0,U=0;U<d.markedSpans.length;++U)if(T=d.markedSpans[U],T.marker.collapsed&&!T.marker.widgetNode&&T.from==_.to&&(T.to==null||T.to!=_.from)&&(T.marker.inclusiveLeft||_.marker.inclusiveRight)&&Au(c,d,T))return!0}function Cr(c){c=Bi(c);for(var d=0,_=c.parent,x=0;x<_.lines.length;++x){var T=_.lines[x];if(T==c)break;d+=T.height}for(var U=_.parent;U;_=U,U=_.parent)for(var j=0;j<U.children.length;++j){var K=U.children[j];if(K==_)break;d+=K.height}return d}function es(c){if(c.height==0)return 0;for(var d=c.text.length,_,x=c;_=Eu(x);){var T=_.find(0,!0);x=T.from.line,d+=T.from.ch-T.to.ch}for(x=c;_=uo(x);){var U=_.find(0,!0);d-=x.text.length-U.from.ch,x=U.to.line,d+=x.text.length-U.to.ch}return d}function Cu(c){var d=c.display,_=c.doc;d.maxLine=Ze(_,_.first),d.maxLineLength=es(d.maxLine),d.maxLineChanged=!0,_.iter(function(x){var T=es(x);T>d.maxLineLength&&(d.maxLineLength=T,d.maxLine=x)})}var co=function(c,d,_){this.text=c,ii(this,d),this.height=_?_(this):1};co.prototype.lineNo=function(){return Wt(this)},He(co);function $f(c,d,_,x){c.text=d,c.stateAfter&&(c.stateAfter=null),c.styles&&(c.styles=null),c.order!=null&&(c.order=null),wi(c),ii(c,_);var T=x?x(c):1;T!=c.height&&An(c,T)}function Rv(c){c.parent=null,wi(c)}var Ip={},Lv={};function Pp(c,d){if(!c||/^\s*$/.test(c))return null;var _=d.addModeClass?Lv:Ip;return _[c]||(_[c]=c.replace(/\S+/g,"cm-$&"))}function st(c,d){var _=p("span",null,null,w?"padding-right: .1px":null),x={pre:p("pre",[_],"CodeMirror-line"),content:_,col:0,pos:0,cm:c,trailingSpace:!1,splitSpaces:c.getOption("lineWrapping")};d.measure={};for(var T=0;T<=(d.rest?d.rest.length:0);T++){var U=T?d.rest[T-1]:d.line,j=void 0;x.pos=0,x.addToken=ht,tn(c.display.measure)&&(j=G(U,c.doc.direction))&&(x.addToken=Mt(x.addToken,j)),x.map=[];var K=d!=c.display.externalMeasured&&Wt(U);Nt(U,x,Mp(c,U,K)),U.styleClasses&&(U.styleClasses.bgClass&&(x.bgClass=Te(U.styleClasses.bgClass,x.bgClass||"")),U.styleClasses.textClass&&(x.textClass=Te(U.styleClasses.textClass,x.textClass||""))),x.map.length==0&&x.map.push(0,0,x.content.appendChild(En(c.display.measure))),T==0?(d.measure.map=x.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(x.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(w){var te=x.content.lastChild;(/\bcm-tab\b/.test(te.className)||te.querySelector&&te.querySelector(".cm-tab"))&&(x.content.className="cm-tab-wrap-hack")}return ae(c,"renderLine",c,d.line,x.pre),x.pre.className&&(x.textClass=Te(x.pre.className,x.textClass||"")),x}function bt(c){var d=b("span","\u2022","cm-invalidchar");return d.title="\\u"+c.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function ht(c,d,_,x,T,U,j){if(!!d){var K=c.splitSpaces?ft(d,c.trailingSpace):d,te=c.cm.state.specialChars,re=!1,ve;if(!te.test(d))c.col+=d.length,ve=document.createTextNode(K),c.map.push(c.pos,c.pos+d.length,ve),m&&v<9&&(re=!0),c.pos+=d.length;else{ve=document.createDocumentFragment();for(var _e=0;;){te.lastIndex=_e;var Ae=te.exec(d),Ee=Ae?Ae.index-_e:d.length-_e;if(Ee){var Ue=document.createTextNode(K.slice(_e,_e+Ee));m&&v<9?ve.appendChild(b("span",[Ue])):ve.appendChild(Ue),c.map.push(c.pos,c.pos+Ee,Ue),c.col+=Ee,c.pos+=Ee}if(!Ae)break;_e+=Ee+1;var Ge=void 0;if(Ae[0]=="	"){var Je=c.cm.options.tabSize,nt=Je-c.col%Je;Ge=ve.appendChild(b("span",Ye(nt),"cm-tab")),Ge.setAttribute("role","presentation"),Ge.setAttribute("cm-text","	"),c.col+=nt}else Ae[0]=="\r"||Ae[0]==`
`?(Ge=ve.appendChild(b("span",Ae[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Ge.setAttribute("cm-text",Ae[0]),c.col+=1):(Ge=c.cm.options.specialCharPlaceholder(Ae[0]),Ge.setAttribute("cm-text",Ae[0]),m&&v<9?ve.appendChild(b("span",[Ge])):ve.appendChild(Ge),c.col+=1);c.map.push(c.pos,c.pos+1,Ge),c.pos++}}if(c.trailingSpace=K.charCodeAt(d.length-1)==32,_||x||T||re||U||j){var ut=_||"";x&&(ut+=x),T&&(ut+=T);var rt=b("span",[ve],ut,U);if(j)for(var dt in j)j.hasOwnProperty(dt)&&dt!="style"&&dt!="class"&&rt.setAttribute(dt,j[dt]);return c.content.appendChild(rt)}c.content.appendChild(ve)}}function ft(c,d){if(c.length>1&&!/  /.test(c))return c;for(var _=d,x="",T=0;T<c.length;T++){var U=c.charAt(T);U==" "&&_&&(T==c.length-1||c.charCodeAt(T+1)==32)&&(U="\xA0"),x+=U,_=U==" "}return x}function Mt(c,d){return function(_,x,T,U,j,K,te){T=T?T+" cm-force-border":"cm-force-border";for(var re=_.pos,ve=re+x.length;;){for(var _e=void 0,Ae=0;Ae<d.length&&(_e=d[Ae],!(_e.to>re&&_e.from<=re));Ae++);if(_e.to>=ve)return c(_,x,T,U,j,K,te);c(_,x.slice(0,_e.to-re),T,U,null,K,te),U=null,x=x.slice(_e.to-re),re=_e.to}}}function Ot(c,d,_,x){var T=!x&&_.widgetNode;T&&c.map.push(c.pos,c.pos+d,T),!x&&c.cm.display.input.needsContentAttribute&&(T||(T=c.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",_.id)),T&&(c.cm.display.input.setUneditable(T),c.content.appendChild(T)),c.pos+=d,c.trailingSpace=!1}function Nt(c,d,_){var x=c.markedSpans,T=c.text,U=0;if(!x){for(var j=1;j<_.length;j+=2)d.addToken(d,T.slice(U,U=_[j]),Pp(_[j+1],d.cm.options));return}for(var K=T.length,te=0,re=1,ve="",_e,Ae,Ee=0,Ue,Ge,Je,nt,ut;;){if(Ee==te){Ue=Ge=Je=Ae="",ut=null,nt=null,Ee=1/0;for(var rt=[],dt=void 0,Lt=0;Lt<x.length;++Lt){var Tt=x[Lt],qt=Tt.marker;if(qt.type=="bookmark"&&Tt.from==te&&qt.widgetNode)rt.push(qt);else if(Tt.from<=te&&(Tt.to==null||Tt.to>te||qt.collapsed&&Tt.to==te&&Tt.from==te)){if(Tt.to!=null&&Tt.to!=te&&Ee>Tt.to&&(Ee=Tt.to,Ge=""),qt.className&&(Ue+=" "+qt.className),qt.css&&(Ae=(Ae?Ae+";":"")+qt.css),qt.startStyle&&Tt.from==te&&(Je+=" "+qt.startStyle),qt.endStyle&&Tt.to==Ee&&(dt||(dt=[])).push(qt.endStyle,Tt.to),qt.title&&((ut||(ut={})).title=qt.title),qt.attributes)for(var Tn in qt.attributes)(ut||(ut={}))[Tn]=qt.attributes[Tn];qt.collapsed&&(!nt||il(nt.marker,qt)<0)&&(nt=Tt)}else Tt.from>te&&Ee>Tt.from&&(Ee=Tt.from)}if(dt)for(var br=0;br<dt.length;br+=2)dt[br+1]==Ee&&(Ge+=" "+dt[br]);if(!nt||nt.from==te)for(var Fn=0;Fn<rt.length;++Fn)Ot(d,0,rt[Fn]);if(nt&&(nt.from||0)==te){if(Ot(d,(nt.to==null?K+1:nt.to)-te,nt.marker,nt.from==null),nt.to==null)return;nt.to==te&&(nt=!1)}}if(te>=K)break;for(var Si=Math.min(K,Ee);;){if(ve){var ai=te+ve.length;if(!nt){var nr=ai>Si?ve.slice(0,Si-te):ve;d.addToken(d,nr,_e?_e+Ue:Ue,Je,te+nr.length==Ee?Ge:"",Ae,ut)}if(ai>=Si){ve=ve.slice(Si-te),te=Si;break}te=ai,Je=""}ve=T.slice(U,U=_[re++]),_e=Pp(_[re++],d.cm.options)}}}function zt(c,d,_){this.line=d,this.rest=Cv(d),this.size=this.rest?Wt(Fe(this.rest))-_+1:1,this.node=this.text=null,this.hidden=Bs(c,d)}function Yt(c,d,_){for(var x=[],T,U=d;U<_;U=T){var j=new zt(c.doc,Ze(c.doc,U),U);T=U+j.size,x.push(j)}return x}var pn=null;function Xr(c){pn?pn.ops.push(c):c.ownsGroup=pn={ops:[c],delayedCallbacks:[]}}function Yr(c){var d=c.delayedCallbacks,_=0;do{for(;_<d.length;_++)d[_].call(null);for(var x=0;x<c.ops.length;x++){var T=c.ops[x];if(T.cursorActivityHandlers)for(;T.cursorActivityCalled<T.cursorActivityHandlers.length;)T.cursorActivityHandlers[T.cursorActivityCalled++].call(null,T.cm)}}while(_<d.length)}function sl(c,d){var _=c.ownsGroup;if(!!_)try{Yr(_)}finally{pn=null,d(_)}}var ol=null;function tr(c,d){var _=Z(c,d);if(!!_.length){var x=Array.prototype.slice.call(arguments,2),T;pn?T=pn.delayedCallbacks:ol?T=ol:(T=ol=[],setTimeout(jf,0));for(var U=function(K){T.push(function(){return _[K].apply(null,x)})},j=0;j<_.length;++j)U(j)}}function jf(){var c=ol;ol=null;for(var d=0;d<c.length;++d)c[d]()}function Tb(c,d,_,x){for(var T=0;T<d.changes.length;T++){var U=d.changes[T];U=="text"?cI(c,d):U=="gutter"?Ab(c,d,_,x):U=="class"?Iv(c,d):U=="widget"&&fI(c,d,x)}d.changes=null}function qf(c){return c.node==c.text&&(c.node=b("div",null,null,"position: relative"),c.text.parentNode&&c.text.parentNode.replaceChild(c.node,c.text),c.node.appendChild(c.text),m&&v<8&&(c.node.style.zIndex=2)),c.node}function uI(c,d){var _=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(_&&(_+=" CodeMirror-linebackground"),d.background)_?d.background.className=_:(d.background.parentNode.removeChild(d.background),d.background=null);else if(_){var x=qf(d);d.background=x.insertBefore(b("div",null,_),x.firstChild),c.display.input.setUneditable(d.background)}}function Eb(c,d){var _=c.display.externalMeasured;return _&&_.line==d.line?(c.display.externalMeasured=null,d.measure=_.measure,_.built):st(c,d)}function cI(c,d){var _=d.text.className,x=Eb(c,d);d.text==d.node&&(d.node=x.pre),d.text.parentNode.replaceChild(x.pre,d.text),d.text=x.pre,x.bgClass!=d.bgClass||x.textClass!=d.textClass?(d.bgClass=x.bgClass,d.textClass=x.textClass,Iv(c,d)):_&&(d.text.className=_)}function Iv(c,d){uI(c,d),d.line.wrapClass?qf(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var _=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=_||""}function Ab(c,d,_,x){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var T=qf(d);d.gutterBackground=b("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(c.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px; width: "+x.gutterTotalWidth+"px"),c.display.input.setUneditable(d.gutterBackground),T.insertBefore(d.gutterBackground,d.text)}var U=d.line.gutterMarkers;if(c.options.lineNumbers||U){var j=qf(d),K=d.gutter=b("div",null,"CodeMirror-gutter-wrapper","left: "+(c.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px");if(K.setAttribute("aria-hidden","true"),c.display.input.setUneditable(K),j.insertBefore(K,d.text),d.line.gutterClass&&(K.className+=" "+d.line.gutterClass),c.options.lineNumbers&&(!U||!U["CodeMirror-linenumbers"])&&(d.lineNumber=K.appendChild(b("div",Wn(c.options,_),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+x.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.display.lineNumInnerWidth+"px"))),U)for(var te=0;te<c.display.gutterSpecs.length;++te){var re=c.display.gutterSpecs[te].className,ve=U.hasOwnProperty(re)&&U[re];ve&&K.appendChild(b("div",[ve],"CodeMirror-gutter-elt","left: "+x.gutterLeft[re]+"px; width: "+x.gutterWidth[re]+"px"))}}}function fI(c,d,_){d.alignable&&(d.alignable=null);for(var x=se("CodeMirror-linewidget"),T=d.node.firstChild,U=void 0;T;T=U)U=T.nextSibling,x.test(T.className)&&d.node.removeChild(T);Cb(c,d,_)}function hI(c,d,_,x){var T=Eb(c,d);return d.text=d.node=T.pre,T.bgClass&&(d.bgClass=T.bgClass),T.textClass&&(d.textClass=T.textClass),Iv(c,d),Ab(c,d,_,x),Cb(c,d,x),d.node}function Cb(c,d,_){if(Rb(c,d.line,d,_,!0),d.rest)for(var x=0;x<d.rest.length;x++)Rb(c,d.rest[x],d,_,!1)}function Rb(c,d,_,x,T){if(!!d.widgets)for(var U=qf(_),j=0,K=d.widgets;j<K.length;++j){var te=K[j],re=b("div",[te.node],"CodeMirror-linewidget"+(te.className?" "+te.className:""));te.handleMouseEvents||re.setAttribute("cm-ignore-events","true"),dI(te,re,_,x),c.display.input.setUneditable(re),T&&te.above?U.insertBefore(re,_.gutter||_.text):U.appendChild(re),tr(te,"redraw")}}function dI(c,d,_,x){if(c.noHScroll){(_.alignable||(_.alignable=[])).push(d);var T=x.wrapperWidth;d.style.left=x.fixedPos+"px",c.coverGutter||(T-=x.gutterTotalWidth,d.style.paddingLeft=x.gutterTotalWidth+"px"),d.style.width=T+"px"}c.coverGutter&&(d.style.zIndex=5,d.style.position="relative",c.noHScroll||(d.style.marginLeft=-x.gutterTotalWidth+"px"))}function Xf(c){if(c.height!=null)return c.height;var d=c.doc.cm;if(!d)return 0;if(!E(document.body,c.node)){var _="position: relative;";c.coverGutter&&(_+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),c.noHScroll&&(_+="width: "+d.display.wrapper.clientWidth+"px;"),fe(d.display.measure,b("div",[c.node],null,_))}return c.height=c.node.parentNode.offsetHeight}function fo(c,d){for(var _=pt(d);_!=c.wrapper;_=_.parentNode)if(!_||_.nodeType==1&&_.getAttribute("cm-ignore-events")=="true"||_.parentNode==c.sizer&&_!=c.mover)return!0}function kp(c){return c.lineSpace.offsetTop}function Pv(c){return c.mover.offsetHeight-c.lineSpace.offsetHeight}function Lb(c){if(c.cachedPaddingH)return c.cachedPaddingH;var d=fe(c.measure,b("pre","x","CodeMirror-line-like")),_=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,x={left:parseInt(_.paddingLeft),right:parseInt(_.paddingRight)};return!isNaN(x.left)&&!isNaN(x.right)&&(c.cachedPaddingH=x),x}function zs(c){return Be-c.display.nativeBarWidth}function al(c){return c.display.scroller.clientWidth-zs(c)-c.display.barWidth}function kv(c){return c.display.scroller.clientHeight-zs(c)-c.display.barHeight}function pI(c,d,_){var x=c.options.lineWrapping,T=x&&al(c);if(!d.measure.heights||x&&d.measure.width!=T){var U=d.measure.heights=[];if(x){d.measure.width=T;for(var j=d.text.firstChild.getClientRects(),K=0;K<j.length-1;K++){var te=j[K],re=j[K+1];Math.abs(te.bottom-re.bottom)>2&&U.push((te.bottom+re.top)/2-_.top)}}U.push(_.bottom-_.top)}}function Ib(c,d,_){if(c.line==d)return{map:c.measure.map,cache:c.measure.cache};if(c.rest){for(var x=0;x<c.rest.length;x++)if(c.rest[x]==d)return{map:c.measure.maps[x],cache:c.measure.caches[x]};for(var T=0;T<c.rest.length;T++)if(Wt(c.rest[T])>_)return{map:c.measure.maps[T],cache:c.measure.caches[T],before:!0}}}function mI(c,d){d=Bi(d);var _=Wt(d),x=c.display.externalMeasured=new zt(c.doc,d,_);x.lineN=_;var T=x.built=st(c,x);return x.text=T.pre,fe(c.display.lineMeasure,T.pre),x}function Pb(c,d,_,x){return Hs(c,Ru(c,d),_,x)}function Dv(c,d){if(d>=c.display.viewFrom&&d<c.display.viewTo)return c.display.view[cl(c,d)];var _=c.display.externalMeasured;if(_&&d>=_.lineN&&d<_.lineN+_.size)return _}function Ru(c,d){var _=Wt(d),x=Dv(c,_);x&&!x.text?x=null:x&&x.changes&&(Tb(c,x,_,Bv(c)),c.curOp.forceUpdate=!0),x||(x=mI(c,d));var T=Ib(x,d,_);return{line:d,view:x,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function Hs(c,d,_,x,T){d.before&&(_=-1);var U=_+(x||""),j;return d.cache.hasOwnProperty(U)?j=d.cache[U]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(pI(c,d.view,d.rect),d.hasHeights=!0),j=vI(c,d,_,x),j.bogus||(d.cache[U]=j)),{left:j.left,right:j.right,top:T?j.rtop:j.top,bottom:T?j.rbottom:j.bottom}}var kb={left:0,right:0,top:0,bottom:0};function Db(c,d,_){for(var x,T,U,j,K,te,re=0;re<c.length;re+=3)if(K=c[re],te=c[re+1],d<K?(T=0,U=1,j="left"):d<te?(T=d-K,U=T+1):(re==c.length-3||d==te&&c[re+3]>d)&&(U=te-K,T=U-1,d>=te&&(j="right")),T!=null){if(x=c[re+2],K==te&&_==(x.insertLeft?"left":"right")&&(j=_),_=="left"&&T==0)for(;re&&c[re-2]==c[re-3]&&c[re-1].insertLeft;)x=c[(re-=3)+2],j="left";if(_=="right"&&T==te-K)for(;re<c.length-3&&c[re+3]==c[re+4]&&!c[re+5].insertLeft;)x=c[(re+=3)+2],j="right";break}return{node:x,start:T,end:U,collapse:j,coverStart:K,coverEnd:te}}function gI(c,d){var _=kb;if(d=="left")for(var x=0;x<c.length&&(_=c[x]).left==_.right;x++);else for(var T=c.length-1;T>=0&&(_=c[T]).left==_.right;T--);return _}function vI(c,d,_,x){var T=Db(d.map,_,x),U=T.node,j=T.start,K=T.end,te=T.collapse,re;if(U.nodeType==3){for(var ve=0;ve<4;ve++){for(;j&&f(d.line.text.charAt(T.coverStart+j));)--j;for(;T.coverStart+K<T.coverEnd&&f(d.line.text.charAt(T.coverStart+K));)++K;if(m&&v<9&&j==0&&K==T.coverEnd-T.coverStart?re=U.parentNode.getBoundingClientRect():re=gI(ee(U,j,K).getClientRects(),x),re.left||re.right||j==0)break;K=j,j=j-1,te="right"}m&&v<11&&(re=yI(c.display.measure,re))}else{j>0&&(te=x="right");var _e;c.options.lineWrapping&&(_e=U.getClientRects()).length>1?re=_e[x=="right"?_e.length-1:0]:re=U.getBoundingClientRect()}if(m&&v<9&&!j&&(!re||!re.left&&!re.right)){var Ae=U.parentNode.getClientRects()[0];Ae?re={left:Ae.left,right:Ae.left+Iu(c.display),top:Ae.top,bottom:Ae.bottom}:re=kb}for(var Ee=re.top-d.rect.top,Ue=re.bottom-d.rect.top,Ge=(Ee+Ue)/2,Je=d.view.measure.heights,nt=0;nt<Je.length-1&&!(Ge<Je[nt]);nt++);var ut=nt?Je[nt-1]:0,rt=Je[nt],dt={left:(te=="right"?re.right:re.left)-d.rect.left,right:(te=="left"?re.left:re.right)-d.rect.left,top:ut,bottom:rt};return!re.left&&!re.right&&(dt.bogus=!0),c.options.singleCursorHeightPerLine||(dt.rtop=Ee,dt.rbottom=Ue),dt}function yI(c,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!be(c))return d;var _=screen.logicalXDPI/screen.deviceXDPI,x=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*_,right:d.right*_,top:d.top*x,bottom:d.bottom*x}}function Ob(c){if(c.measure&&(c.measure.cache={},c.measure.heights=null,c.rest))for(var d=0;d<c.rest.length;d++)c.measure.caches[d]={}}function Nb(c){c.display.externalMeasure=null,pe(c.display.lineMeasure);for(var d=0;d<c.display.view.length;d++)Ob(c.display.view[d])}function Yf(c){Nb(c),c.display.cachedCharWidth=c.display.cachedTextHeight=c.display.cachedPaddingH=null,c.options.lineWrapping||(c.display.maxLineChanged=!0),c.display.lineNumChars=null}function Fb(){return A&&P?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ub(){return A&&P?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ov(c){var d=Bi(c),_=d.widgets,x=0;if(_)for(var T=0;T<_.length;++T)_[T].above&&(x+=Xf(_[T]));return x}function Dp(c,d,_,x,T){if(!T){var U=Ov(d);_.top+=U,_.bottom+=U}if(x=="line")return _;x||(x="local");var j=Cr(d);if(x=="local"?j+=kp(c.display):j-=c.display.viewOffset,x=="page"||x=="window"){var K=c.display.lineSpace.getBoundingClientRect();j+=K.top+(x=="window"?0:Ub());var te=K.left+(x=="window"?0:Fb());_.left+=te,_.right+=te}return _.top+=j,_.bottom+=j,_}function Bb(c,d,_){if(_=="div")return d;var x=d.left,T=d.top;if(_=="page")x-=Fb(),T-=Ub();else if(_=="local"||!_){var U=c.display.sizer.getBoundingClientRect();x+=U.left,T+=U.top}var j=c.display.lineSpace.getBoundingClientRect();return{left:x-j.left,top:T-j.top}}function Op(c,d,_,x,T){return x||(x=Ze(c.doc,d.line)),Dp(c,x,Pb(c,x,d.ch,T),_)}function xs(c,d,_,x,T,U){x=x||Ze(c.doc,d.line),T||(T=Ru(c,x));function j(Ue,Ge){var Je=Hs(c,T,Ue,Ge?"right":"left",U);return Ge?Je.left=Je.right:Je.right=Je.left,Dp(c,x,Je,_)}var K=G(x,c.doc.direction),te=d.ch,re=d.sticky;if(te>=x.text.length?(te=x.text.length,re="before"):te<=0&&(te=0,re="after"),!K)return j(re=="before"?te-1:te,re=="before");function ve(Ue,Ge,Je){var nt=K[Ge],ut=nt.level==1;return j(Je?Ue-1:Ue,ut!=Je)}var _e=I(K,te,re),Ae=C,Ee=ve(te,_e,re=="before");return Ae!=null&&(Ee.other=ve(te,Ae,re!="before")),Ee}function zb(c,d){var _=0;d=ct(c.doc,d),c.options.lineWrapping||(_=Iu(c.display)*d.ch);var x=Ze(c.doc,d.line),T=Cr(x)+kp(c.display);return{left:_,right:_,top:T,bottom:T+x.height}}function Nv(c,d,_,x,T){var U=$e(c,d,_);return U.xRel=T,x&&(U.outside=x),U}function Fv(c,d,_){var x=c.doc;if(_+=c.display.viewOffset,_<0)return Nv(x.first,0,null,-1,-1);var T=Ar(x,_),U=x.first+x.size-1;if(T>U)return Nv(x.first+x.size-1,Ze(x,U).text.length,null,1,1);d<0&&(d=0);for(var j=Ze(x,T);;){var K=xI(c,j,T,d,_),te=Ev(j,K.ch+(K.xRel>0||K.outside>0?1:0));if(!te)return K;var re=te.find(1);if(re.line==T)return re;j=Ze(x,T=re.line)}}function Hb(c,d,_,x){x-=Ov(d);var T=d.text.length,U=y(function(j){return Hs(c,_,j-1).bottom<=x},T,0);return T=y(function(j){return Hs(c,_,j).top>x},U,T),{begin:U,end:T}}function Gb(c,d,_,x){_||(_=Ru(c,d));var T=Dp(c,d,Hs(c,_,x),"line").top;return Hb(c,d,_,T)}function Uv(c,d,_,x){return c.bottom<=_?!1:c.top>_?!0:(x?c.left:c.right)>d}function xI(c,d,_,x,T){T-=Cr(d);var U=Ru(c,d),j=Ov(d),K=0,te=d.text.length,re=!0,ve=G(d,c.doc.direction);if(ve){var _e=(c.options.lineWrapping?wI:_I)(c,d,_,U,ve,x,T);re=_e.level!=1,K=re?_e.from:_e.to-1,te=re?_e.to:_e.from-1}var Ae=null,Ee=null,Ue=y(function(Lt){var Tt=Hs(c,U,Lt);return Tt.top+=j,Tt.bottom+=j,Uv(Tt,x,T,!1)?(Tt.top<=T&&Tt.left<=x&&(Ae=Lt,Ee=Tt),!0):!1},K,te),Ge,Je,nt=!1;if(Ee){var ut=x-Ee.left<Ee.right-x,rt=ut==re;Ue=Ae+(rt?0:1),Je=rt?"after":"before",Ge=ut?Ee.left:Ee.right}else{!re&&(Ue==te||Ue==K)&&Ue++,Je=Ue==0?"after":Ue==d.text.length?"before":Hs(c,U,Ue-(re?1:0)).bottom+j<=T==re?"after":"before";var dt=xs(c,$e(_,Ue,Je),"line",d,U);Ge=dt.left,nt=T<dt.top?-1:T>=dt.bottom?1:0}return Ue=g(d.text,Ue,1),Nv(_,Ue,Je,nt,x-Ge)}function _I(c,d,_,x,T,U,j){var K=y(function(_e){var Ae=T[_e],Ee=Ae.level!=1;return Uv(xs(c,$e(_,Ee?Ae.to:Ae.from,Ee?"before":"after"),"line",d,x),U,j,!0)},0,T.length-1),te=T[K];if(K>0){var re=te.level!=1,ve=xs(c,$e(_,re?te.from:te.to,re?"after":"before"),"line",d,x);Uv(ve,U,j,!0)&&ve.top>j&&(te=T[K-1])}return te}function wI(c,d,_,x,T,U,j){var K=Hb(c,d,x,j),te=K.begin,re=K.end;/\s/.test(d.text.charAt(re-1))&&re--;for(var ve=null,_e=null,Ae=0;Ae<T.length;Ae++){var Ee=T[Ae];if(!(Ee.from>=re||Ee.to<=te)){var Ue=Ee.level!=1,Ge=Hs(c,x,Ue?Math.min(re,Ee.to)-1:Math.max(te,Ee.from)).right,Je=Ge<U?U-Ge+1e9:Ge-U;(!ve||_e>Je)&&(ve=Ee,_e=Je)}}return ve||(ve=T[T.length-1]),ve.from<te&&(ve={from:te,to:ve.to,level:ve.level}),ve.to>re&&(ve={from:ve.from,to:re,level:ve.level}),ve}var ll;function Lu(c){if(c.cachedTextHeight!=null)return c.cachedTextHeight;if(ll==null){ll=b("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)ll.appendChild(document.createTextNode("x")),ll.appendChild(b("br"));ll.appendChild(document.createTextNode("x"))}fe(c.measure,ll);var _=ll.offsetHeight/50;return _>3&&(c.cachedTextHeight=_),pe(c.measure),_||1}function Iu(c){if(c.cachedCharWidth!=null)return c.cachedCharWidth;var d=b("span","xxxxxxxxxx"),_=b("pre",[d],"CodeMirror-line-like");fe(c.measure,_);var x=d.getBoundingClientRect(),T=(x.right-x.left)/10;return T>2&&(c.cachedCharWidth=T),T||10}function Bv(c){for(var d=c.display,_={},x={},T=d.gutters.clientLeft,U=d.gutters.firstChild,j=0;U;U=U.nextSibling,++j){var K=c.display.gutterSpecs[j].className;_[K]=U.offsetLeft+U.clientLeft+T,x[K]=U.clientWidth}return{fixedPos:zv(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:_,gutterWidth:x,wrapperWidth:d.wrapper.clientWidth}}function zv(c){return c.scroller.getBoundingClientRect().left-c.sizer.getBoundingClientRect().left}function Vb(c){var d=Lu(c.display),_=c.options.lineWrapping,x=_&&Math.max(5,c.display.scroller.clientWidth/Iu(c.display)-3);return function(T){if(Bs(c.doc,T))return 0;var U=0;if(T.widgets)for(var j=0;j<T.widgets.length;j++)T.widgets[j].height&&(U+=T.widgets[j].height);return _?U+(Math.ceil(T.text.length/x)||1)*d:U+d}}function Hv(c){var d=c.doc,_=Vb(c);d.iter(function(x){var T=_(x);T!=x.height&&An(x,T)})}function ul(c,d,_,x){var T=c.display;if(!_&&pt(d).getAttribute("cm-not-content")=="true")return null;var U,j,K=T.lineSpace.getBoundingClientRect();try{U=d.clientX-K.left,j=d.clientY-K.top}catch{return null}var te=Fv(c,U,j),re;if(x&&te.xRel>0&&(re=Ze(c.doc,te.line).text).length==te.ch){var ve=we(re,re.length,c.options.tabSize)-re.length;te=$e(te.line,Math.max(0,Math.round((U-Lb(c.display).left)/Iu(c.display))-ve))}return te}function cl(c,d){if(d>=c.display.viewTo||(d-=c.display.viewFrom,d<0))return null;for(var _=c.display.view,x=0;x<_.length;x++)if(d-=_[x].size,d<0)return x}function si(c,d,_,x){d==null&&(d=c.doc.first),_==null&&(_=c.doc.first+c.doc.size),x||(x=0);var T=c.display;if(x&&_<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>d)&&(T.updateLineNumbers=d),c.curOp.viewChanged=!0,d>=T.viewTo)Mn&&Wf(c.doc,d)<T.viewTo&&Yo(c);else if(_<=T.viewFrom)Mn&&Lp(c.doc,_+x)>T.viewFrom?Yo(c):(T.viewFrom+=x,T.viewTo+=x);else if(d<=T.viewFrom&&_>=T.viewTo)Yo(c);else if(d<=T.viewFrom){var U=Np(c,_,_+x,1);U?(T.view=T.view.slice(U.index),T.viewFrom=U.lineN,T.viewTo+=x):Yo(c)}else if(_>=T.viewTo){var j=Np(c,d,d,-1);j?(T.view=T.view.slice(0,j.index),T.viewTo=j.lineN):Yo(c)}else{var K=Np(c,d,d,-1),te=Np(c,_,_+x,1);K&&te?(T.view=T.view.slice(0,K.index).concat(Yt(c,K.lineN,te.lineN)).concat(T.view.slice(te.index)),T.viewTo+=x):Yo(c)}var re=T.externalMeasured;re&&(_<re.lineN?re.lineN+=x:d<re.lineN+re.size&&(T.externalMeasured=null))}function Xo(c,d,_){c.curOp.viewChanged=!0;var x=c.display,T=c.display.externalMeasured;if(T&&d>=T.lineN&&d<T.lineN+T.size&&(x.externalMeasured=null),!(d<x.viewFrom||d>=x.viewTo)){var U=x.view[cl(c,d)];if(U.node!=null){var j=U.changes||(U.changes=[]);Me(j,_)==-1&&j.push(_)}}}function Yo(c){c.display.viewFrom=c.display.viewTo=c.doc.first,c.display.view=[],c.display.viewOffset=0}function Np(c,d,_,x){var T=cl(c,d),U,j=c.display.view;if(!Mn||_==c.doc.first+c.doc.size)return{index:T,lineN:_};for(var K=c.display.viewFrom,te=0;te<T;te++)K+=j[te].size;if(K!=d){if(x>0){if(T==j.length-1)return null;U=K+j[T].size-d,T++}else U=K-d;d+=U,_+=U}for(;Wf(c.doc,_)!=_;){if(T==(x<0?0:j.length-1))return null;_+=x*j[T-(x<0?1:0)].size,T+=x}return{index:T,lineN:_}}function bI(c,d,_){var x=c.display,T=x.view;T.length==0||d>=x.viewTo||_<=x.viewFrom?(x.view=Yt(c,d,_),x.viewFrom=d):(x.viewFrom>d?x.view=Yt(c,d,x.viewFrom).concat(x.view):x.viewFrom<d&&(x.view=x.view.slice(cl(c,d))),x.viewFrom=d,x.viewTo<_?x.view=x.view.concat(Yt(c,x.viewTo,_)):x.viewTo>_&&(x.view=x.view.slice(0,cl(c,_)))),x.viewTo=_}function Wb(c){for(var d=c.display.view,_=0,x=0;x<d.length;x++){var T=d[x];!T.hidden&&(!T.node||T.changes)&&++_}return _}function Kf(c){c.display.input.showSelection(c.display.input.prepareSelection())}function $b(c,d){d===void 0&&(d=!0);var _=c.doc,x={},T=x.cursors=document.createDocumentFragment(),U=x.selection=document.createDocumentFragment(),j=c.options.$customCursor;j&&(d=!0);for(var K=0;K<_.sel.ranges.length;K++)if(!(!d&&K==_.sel.primIndex)){var te=_.sel.ranges[K];if(!(te.from().line>=c.display.viewTo||te.to().line<c.display.viewFrom)){var re=te.empty();if(j){var ve=j(c,te);ve&&Gv(c,ve,T)}else(re||c.options.showCursorWhenSelecting)&&Gv(c,te.head,T);re||SI(c,te,U)}}return x}function Gv(c,d,_){var x=xs(c,d,"div",null,null,!c.options.singleCursorHeightPerLine),T=_.appendChild(b("div","\xA0","CodeMirror-cursor"));if(T.style.left=x.left+"px",T.style.top=x.top+"px",T.style.height=Math.max(0,x.bottom-x.top)*c.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(c.getWrapperElement().className)){var U=Op(c,d,"div",null,null),j=U.right-U.left;T.style.width=(j>0?j:c.defaultCharWidth())+"px"}if(x.other){var K=_.appendChild(b("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));K.style.display="",K.style.left=x.other.left+"px",K.style.top=x.other.top+"px",K.style.height=(x.other.bottom-x.other.top)*.85+"px"}}function Fp(c,d){return c.top-d.top||c.left-d.left}function SI(c,d,_){var x=c.display,T=c.doc,U=document.createDocumentFragment(),j=Lb(c.display),K=j.left,te=Math.max(x.sizerWidth,al(c)-x.sizer.offsetLeft)-j.right,re=T.direction=="ltr";function ve(rt,dt,Lt,Tt){dt<0&&(dt=0),dt=Math.round(dt),Tt=Math.round(Tt),U.appendChild(b("div",null,"CodeMirror-selected","position: absolute; left: "+rt+`px;
                             top: `+dt+"px; width: "+(Lt==null?te-rt:Lt)+`px;
                             height: `+(Tt-dt)+"px"))}function _e(rt,dt,Lt){var Tt=Ze(T,rt),qt=Tt.text.length,Tn,br;function Fn(nr,li){return Op(c,$e(rt,nr),"div",Tt,li)}function Si(nr,li,Rr){var dr=Gb(c,Tt,null,nr),rr=li=="ltr"==(Rr=="after")?"left":"right",$n=Rr=="after"?dr.begin:dr.end-(/\s/.test(Tt.text.charAt(dr.end-1))?2:1);return Fn($n,rr)[rr]}var ai=G(Tt,T.direction);return M(ai,dt||0,Lt==null?qt:Lt,function(nr,li,Rr,dr){var rr=Rr=="ltr",$n=Fn(nr,rr?"left":"right"),ui=Fn(li-1,rr?"right":"left"),Wu=dt==null&&nr==0,ta=Lt==null&&li==qt,zr=dr==0,Gs=!ai||dr==ai.length-1;if(ui.top-$n.top<=3){var Sr=(re?Wu:ta)&&zr,py=(re?ta:Wu)&&Gs,mo=Sr?K:(rr?$n:ui).left,ml=py?te:(rr?ui:$n).right;ve(mo,$n.top,ml-mo,$n.bottom)}else{var gl,Qr,$u,my;rr?(gl=re&&Wu&&zr?K:$n.left,Qr=re?te:Si(nr,Rr,"before"),$u=re?K:Si(li,Rr,"after"),my=re&&ta&&Gs?te:ui.right):(gl=re?Si(nr,Rr,"before"):K,Qr=!re&&Wu&&zr?te:$n.right,$u=!re&&ta&&Gs?K:ui.left,my=re?Si(li,Rr,"after"):te),ve(gl,$n.top,Qr-gl,$n.bottom),$n.bottom<ui.top&&ve(K,$n.bottom,null,ui.top),ve($u,ui.top,my-$u,ui.bottom)}(!Tn||Fp($n,Tn)<0)&&(Tn=$n),Fp(ui,Tn)<0&&(Tn=ui),(!br||Fp($n,br)<0)&&(br=$n),Fp(ui,br)<0&&(br=ui)}),{start:Tn,end:br}}var Ae=d.from(),Ee=d.to();if(Ae.line==Ee.line)_e(Ae.line,Ae.ch,Ee.ch);else{var Ue=Ze(T,Ae.line),Ge=Ze(T,Ee.line),Je=Bi(Ue)==Bi(Ge),nt=_e(Ae.line,Ae.ch,Je?Ue.text.length+1:null).end,ut=_e(Ee.line,Je?0:null,Ee.ch).start;Je&&(nt.top<ut.top-2?(ve(nt.right,nt.top,null,nt.bottom),ve(K,ut.top,ut.left,ut.bottom)):ve(nt.right,nt.top,ut.left-nt.right,nt.bottom)),nt.bottom<ut.top&&ve(K,nt.bottom,null,ut.top)}_.appendChild(U)}function Vv(c){if(!!c.state.focused){var d=c.display;clearInterval(d.blinker);var _=!0;d.cursorDiv.style.visibility="",c.options.cursorBlinkRate>0?d.blinker=setInterval(function(){c.hasFocus()||Pu(c),d.cursorDiv.style.visibility=(_=!_)?"":"hidden"},c.options.cursorBlinkRate):c.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function jb(c){c.hasFocus()||(c.display.input.focus(),c.state.focused||$v(c))}function Wv(c){c.state.delayingBlurEvent=!0,setTimeout(function(){c.state.delayingBlurEvent&&(c.state.delayingBlurEvent=!1,c.state.focused&&Pu(c))},100)}function $v(c,d){c.state.delayingBlurEvent&&!c.state.draggingText&&(c.state.delayingBlurEvent=!1),c.options.readOnly!="nocursor"&&(c.state.focused||(ae(c,"focus",c,d),c.state.focused=!0,Se(c.display.wrapper,"CodeMirror-focused"),!c.curOp&&c.display.selForContextMenu!=c.doc.sel&&(c.display.input.reset(),w&&setTimeout(function(){return c.display.input.reset(!0)},20)),c.display.input.receivedFocus()),Vv(c))}function Pu(c,d){c.state.delayingBlurEvent||(c.state.focused&&(ae(c,"blur",c,d),c.state.focused=!1,ce(c.display.wrapper,"CodeMirror-focused")),clearInterval(c.display.blinker),setTimeout(function(){c.state.focused||(c.display.shift=!1)},150))}function Up(c){for(var d=c.display,_=d.lineDiv.offsetTop,x=Math.max(0,d.scroller.getBoundingClientRect().top),T=d.lineDiv.getBoundingClientRect().top,U=0,j=0;j<d.view.length;j++){var K=d.view[j],te=c.options.lineWrapping,re=void 0,ve=0;if(!K.hidden){if(T+=K.line.height,m&&v<8){var _e=K.node.offsetTop+K.node.offsetHeight;re=_e-_,_=_e}else{var Ae=K.node.getBoundingClientRect();re=Ae.bottom-Ae.top,!te&&K.text.firstChild&&(ve=K.text.firstChild.getBoundingClientRect().right-Ae.left-1)}var Ee=K.line.height-re;if((Ee>.005||Ee<-.005)&&(T<x&&(U-=Ee),An(K.line,re),qb(K.line),K.rest))for(var Ue=0;Ue<K.rest.length;Ue++)qb(K.rest[Ue]);if(ve>c.display.sizerWidth){var Ge=Math.ceil(ve/Iu(c.display));Ge>c.display.maxLineLength&&(c.display.maxLineLength=Ge,c.display.maxLine=K.line,c.display.maxLineChanged=!0)}}}Math.abs(U)>2&&(d.scroller.scrollTop+=U)}function qb(c){if(c.widgets)for(var d=0;d<c.widgets.length;++d){var _=c.widgets[d],x=_.node.parentNode;x&&(_.height=x.offsetHeight)}}function Bp(c,d,_){var x=_&&_.top!=null?Math.max(0,_.top):c.scroller.scrollTop;x=Math.floor(x-kp(c));var T=_&&_.bottom!=null?_.bottom:x+c.wrapper.clientHeight,U=Ar(d,x),j=Ar(d,T);if(_&&_.ensure){var K=_.ensure.from.line,te=_.ensure.to.line;K<U?(U=K,j=Ar(d,Cr(Ze(d,K))+c.wrapper.clientHeight)):Math.min(te,d.lastLine())>=j&&(U=Ar(d,Cr(Ze(d,te))-c.wrapper.clientHeight),j=te)}return{from:U,to:Math.max(j,U+1)}}function MI(c,d){if(!ue(c,"scrollCursorIntoView")){var _=c.display,x=_.sizer.getBoundingClientRect(),T=null;if(d.top+x.top<0?T=!0:d.bottom+x.top>(window.innerHeight||document.documentElement.clientHeight)&&(T=!1),T!=null&&!k){var U=b("div","\u200B",null,`position: absolute;
                         top: `+(d.top-_.viewOffset-kp(c.display))+`px;
                         height: `+(d.bottom-d.top+zs(c)+_.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");c.display.lineSpace.appendChild(U),U.scrollIntoView(T),c.display.lineSpace.removeChild(U)}}}function TI(c,d,_,x){x==null&&(x=0);var T;!c.options.lineWrapping&&d==_&&(_=d.sticky=="before"?$e(d.line,d.ch+1,"before"):d,d=d.ch?$e(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var U=0;U<5;U++){var j=!1,K=xs(c,d),te=!_||_==d?K:xs(c,_);T={left:Math.min(K.left,te.left),top:Math.min(K.top,te.top)-x,right:Math.max(K.left,te.left),bottom:Math.max(K.bottom,te.bottom)+x};var re=jv(c,T),ve=c.doc.scrollTop,_e=c.doc.scrollLeft;if(re.scrollTop!=null&&(Zf(c,re.scrollTop),Math.abs(c.doc.scrollTop-ve)>1&&(j=!0)),re.scrollLeft!=null&&(fl(c,re.scrollLeft),Math.abs(c.doc.scrollLeft-_e)>1&&(j=!0)),!j)break}return T}function EI(c,d){var _=jv(c,d);_.scrollTop!=null&&Zf(c,_.scrollTop),_.scrollLeft!=null&&fl(c,_.scrollLeft)}function jv(c,d){var _=c.display,x=Lu(c.display);d.top<0&&(d.top=0);var T=c.curOp&&c.curOp.scrollTop!=null?c.curOp.scrollTop:_.scroller.scrollTop,U=kv(c),j={};d.bottom-d.top>U&&(d.bottom=d.top+U);var K=c.doc.height+Pv(_),te=d.top<x,re=d.bottom>K-x;if(d.top<T)j.scrollTop=te?0:d.top;else if(d.bottom>T+U){var ve=Math.min(d.top,(re?K:d.bottom)-U);ve!=T&&(j.scrollTop=ve)}var _e=c.options.fixedGutter?0:_.gutters.offsetWidth,Ae=c.curOp&&c.curOp.scrollLeft!=null?c.curOp.scrollLeft:_.scroller.scrollLeft-_e,Ee=al(c)-_.gutters.offsetWidth,Ue=d.right-d.left>Ee;return Ue&&(d.right=d.left+Ee),d.left<10?j.scrollLeft=0:d.left<Ae?j.scrollLeft=Math.max(0,d.left+_e-(Ue?0:10)):d.right>Ee+Ae-3&&(j.scrollLeft=d.right+(Ue?0:10)-Ee),j}function qv(c,d){d!=null&&(zp(c),c.curOp.scrollTop=(c.curOp.scrollTop==null?c.doc.scrollTop:c.curOp.scrollTop)+d)}function ku(c){zp(c);var d=c.getCursor();c.curOp.scrollToPos={from:d,to:d,margin:c.options.cursorScrollMargin}}function Qf(c,d,_){(d!=null||_!=null)&&zp(c),d!=null&&(c.curOp.scrollLeft=d),_!=null&&(c.curOp.scrollTop=_)}function AI(c,d){zp(c),c.curOp.scrollToPos=d}function zp(c){var d=c.curOp.scrollToPos;if(d){c.curOp.scrollToPos=null;var _=zb(c,d.from),x=zb(c,d.to);Xb(c,_,x,d.margin)}}function Xb(c,d,_,x){var T=jv(c,{left:Math.min(d.left,_.left),top:Math.min(d.top,_.top)-x,right:Math.max(d.right,_.right),bottom:Math.max(d.bottom,_.bottom)+x});Qf(c,T.scrollLeft,T.scrollTop)}function Zf(c,d){Math.abs(c.doc.scrollTop-d)<2||(o||Yv(c,{top:d}),Yb(c,d,!0),o&&Yv(c),th(c,100))}function Yb(c,d,_){d=Math.max(0,Math.min(c.display.scroller.scrollHeight-c.display.scroller.clientHeight,d)),!(c.display.scroller.scrollTop==d&&!_)&&(c.doc.scrollTop=d,c.display.scrollbars.setScrollTop(d),c.display.scroller.scrollTop!=d&&(c.display.scroller.scrollTop=d))}function fl(c,d,_,x){d=Math.max(0,Math.min(d,c.display.scroller.scrollWidth-c.display.scroller.clientWidth)),!((_?d==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-d)<2)&&!x)&&(c.doc.scrollLeft=d,eS(c),c.display.scroller.scrollLeft!=d&&(c.display.scroller.scrollLeft=d),c.display.scrollbars.setScrollLeft(d))}function Jf(c){var d=c.display,_=d.gutters.offsetWidth,x=Math.round(c.doc.height+Pv(c.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:c.options.fixedGutter?_:0,docHeight:x,scrollHeight:x+zs(c)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:_}}var hl=function(c,d,_){this.cm=_;var x=this.vert=b("div",[b("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=b("div",[b("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");x.tabIndex=T.tabIndex=-1,c(x),c(T),Q(x,"scroll",function(){x.clientHeight&&d(x.scrollTop,"vertical")}),Q(T,"scroll",function(){T.clientWidth&&d(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};hl.prototype.update=function(c){var d=c.scrollWidth>c.clientWidth+1,_=c.scrollHeight>c.clientHeight+1,x=c.nativeBarWidth;if(_){this.vert.style.display="block",this.vert.style.bottom=d?x+"px":"0";var T=c.viewHeight-(d?x:0);this.vert.firstChild.style.height=Math.max(0,c.scrollHeight-c.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=_?x+"px":"0",this.horiz.style.left=c.barLeft+"px";var U=c.viewWidth-c.barLeft-(_?x:0);this.horiz.firstChild.style.width=Math.max(0,c.scrollWidth-c.clientWidth+U)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&c.clientHeight>0&&(x==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:_?x:0,bottom:d?x:0}},hl.prototype.setScrollLeft=function(c){this.horiz.scrollLeft!=c&&(this.horiz.scrollLeft=c),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},hl.prototype.setScrollTop=function(c){this.vert.scrollTop!=c&&(this.vert.scrollTop=c),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},hl.prototype.zeroWidthHack=function(){var c=L&&!N?"12px":"18px";this.horiz.style.height=this.vert.style.width=c,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ie,this.disableVert=new Ie},hl.prototype.enableZeroWidthBar=function(c,d,_){c.style.pointerEvents="auto";function x(){var T=c.getBoundingClientRect(),U=_=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1);U!=c?c.style.pointerEvents="none":d.set(1e3,x)}d.set(1e3,x)},hl.prototype.clear=function(){var c=this.horiz.parentNode;c.removeChild(this.horiz),c.removeChild(this.vert)};var eh=function(){};eh.prototype.update=function(){return{bottom:0,right:0}},eh.prototype.setScrollLeft=function(){},eh.prototype.setScrollTop=function(){},eh.prototype.clear=function(){};function Du(c,d){d||(d=Jf(c));var _=c.display.barWidth,x=c.display.barHeight;Kb(c,d);for(var T=0;T<4&&_!=c.display.barWidth||x!=c.display.barHeight;T++)_!=c.display.barWidth&&c.options.lineWrapping&&Up(c),Kb(c,Jf(c)),_=c.display.barWidth,x=c.display.barHeight}function Kb(c,d){var _=c.display,x=_.scrollbars.update(d);_.sizer.style.paddingRight=(_.barWidth=x.right)+"px",_.sizer.style.paddingBottom=(_.barHeight=x.bottom)+"px",_.heightForcer.style.borderBottom=x.bottom+"px solid transparent",x.right&&x.bottom?(_.scrollbarFiller.style.display="block",_.scrollbarFiller.style.height=x.bottom+"px",_.scrollbarFiller.style.width=x.right+"px"):_.scrollbarFiller.style.display="",x.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(_.gutterFiller.style.display="block",_.gutterFiller.style.height=x.bottom+"px",_.gutterFiller.style.width=d.gutterWidth+"px"):_.gutterFiller.style.display=""}var Qb={native:hl,null:eh};function Zb(c){c.display.scrollbars&&(c.display.scrollbars.clear(),c.display.scrollbars.addClass&&ce(c.display.wrapper,c.display.scrollbars.addClass)),c.display.scrollbars=new Qb[c.options.scrollbarStyle](function(d){c.display.wrapper.insertBefore(d,c.display.scrollbarFiller),Q(d,"mousedown",function(){c.state.focused&&setTimeout(function(){return c.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,_){_=="horizontal"?fl(c,d):Zf(c,d)},c),c.display.scrollbars.addClass&&Se(c.display.wrapper,c.display.scrollbars.addClass)}var CI=0;function dl(c){c.curOp={cm:c,viewChanged:!1,startHeight:c.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++CI,markArrays:null},Xr(c.curOp)}function pl(c){var d=c.curOp;d&&sl(d,function(_){for(var x=0;x<_.ops.length;x++)_.ops[x].cm.curOp=null;RI(_)})}function RI(c){for(var d=c.ops,_=0;_<d.length;_++)LI(d[_]);for(var x=0;x<d.length;x++)II(d[x]);for(var T=0;T<d.length;T++)PI(d[T]);for(var U=0;U<d.length;U++)kI(d[U]);for(var j=0;j<d.length;j++)DI(d[j])}function LI(c){var d=c.cm,_=d.display;NI(d),c.updateMaxLine&&Cu(d),c.mustUpdate=c.viewChanged||c.forceUpdate||c.scrollTop!=null||c.scrollToPos&&(c.scrollToPos.from.line<_.viewFrom||c.scrollToPos.to.line>=_.viewTo)||_.maxLineChanged&&d.options.lineWrapping,c.update=c.mustUpdate&&new Hp(d,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}function II(c){c.updatedDisplay=c.mustUpdate&&Xv(c.cm,c.update)}function PI(c){var d=c.cm,_=d.display;c.updatedDisplay&&Up(d),c.barMeasure=Jf(d),_.maxLineChanged&&!d.options.lineWrapping&&(c.adjustWidthTo=Pb(d,_.maxLine,_.maxLine.text.length).left+3,d.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(_.scroller.clientWidth,_.sizer.offsetLeft+c.adjustWidthTo+zs(d)+d.display.barWidth),c.maxScrollLeft=Math.max(0,_.sizer.offsetLeft+c.adjustWidthTo-al(d))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=_.input.prepareSelection())}function kI(c){var d=c.cm;c.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<d.doc.scrollLeft&&fl(d,Math.min(d.display.scroller.scrollLeft,c.maxScrollLeft),!0),d.display.maxLineChanged=!1);var _=c.focus&&c.focus==me();c.preparedSelection&&d.display.input.showSelection(c.preparedSelection,_),(c.updatedDisplay||c.startHeight!=d.doc.height)&&Du(d,c.barMeasure),c.updatedDisplay&&Qv(d,c.barMeasure),c.selectionChanged&&Vv(d),d.state.focused&&c.updateInput&&d.display.input.reset(c.typing),_&&jb(c.cm)}function DI(c){var d=c.cm,_=d.display,x=d.doc;if(c.updatedDisplay&&Jb(d,c.update),_.wheelStartX!=null&&(c.scrollTop!=null||c.scrollLeft!=null||c.scrollToPos)&&(_.wheelStartX=_.wheelStartY=null),c.scrollTop!=null&&Yb(d,c.scrollTop,c.forceScroll),c.scrollLeft!=null&&fl(d,c.scrollLeft,!0,!0),c.scrollToPos){var T=TI(d,ct(x,c.scrollToPos.from),ct(x,c.scrollToPos.to),c.scrollToPos.margin);MI(d,T)}var U=c.maybeHiddenMarkers,j=c.maybeUnhiddenMarkers;if(U)for(var K=0;K<U.length;++K)U[K].lines.length||ae(U[K],"hide");if(j)for(var te=0;te<j.length;++te)j[te].lines.length&&ae(j[te],"unhide");_.wrapper.offsetHeight&&(x.scrollTop=d.display.scroller.scrollTop),c.changeObjs&&ae(d,"changes",d,c.changeObjs),c.update&&c.update.finish()}function bi(c,d){if(c.curOp)return d();dl(c);try{return d()}finally{pl(c)}}function _r(c,d){return function(){if(c.curOp)return d.apply(c,arguments);dl(c);try{return d.apply(c,arguments)}finally{pl(c)}}}function Kr(c){return function(){if(this.curOp)return c.apply(this,arguments);dl(this);try{return c.apply(this,arguments)}finally{pl(this)}}}function wr(c){return function(){var d=this.cm;if(!d||d.curOp)return c.apply(this,arguments);dl(d);try{return c.apply(this,arguments)}finally{pl(d)}}}function th(c,d){c.doc.highlightFrontier<c.display.viewTo&&c.state.highlight.set(d,de(OI,c))}function OI(c){var d=c.doc;if(!(d.highlightFrontier>=c.display.viewTo)){var _=+new Date+c.options.workTime,x=Wo(c,d.highlightFrontier),T=[];d.iter(x.line,Math.min(d.first+d.size,c.display.viewTo+500),function(U){if(x.line>=c.display.viewFrom){var j=U.styles,K=U.text.length>c.options.maxHighlightLength?Vn(d.mode,x.state):null,te=Sp(c,U,x,!0);K&&(x.state=K),U.styles=te.styles;var re=U.styleClasses,ve=te.classes;ve?U.styleClasses=ve:re&&(U.styleClasses=null);for(var _e=!j||j.length!=U.styles.length||re!=ve&&(!re||!ve||re.bgClass!=ve.bgClass||re.textClass!=ve.textClass),Ae=0;!_e&&Ae<j.length;++Ae)_e=j[Ae]!=U.styles[Ae];_e&&T.push(x.line),U.stateAfter=x.save(),x.nextLine()}else U.text.length<=c.options.maxHighlightLength&&Bf(c,U.text,x),U.stateAfter=x.line%5==0?x.save():null,x.nextLine();if(+new Date>_)return th(c,c.options.workDelay),!0}),d.highlightFrontier=x.line,d.modeFrontier=Math.max(d.modeFrontier,x.line),T.length&&bi(c,function(){for(var U=0;U<T.length;U++)Xo(c,T[U],"text")})}}var Hp=function(c,d,_){var x=c.display;this.viewport=d,this.visible=Bp(x,c.doc,d),this.editorIsHidden=!x.wrapper.offsetWidth,this.wrapperHeight=x.wrapper.clientHeight,this.wrapperWidth=x.wrapper.clientWidth,this.oldDisplayWidth=al(c),this.force=_,this.dims=Bv(c),this.events=[]};Hp.prototype.signal=function(c,d){Ce(c,d)&&this.events.push(arguments)},Hp.prototype.finish=function(){for(var c=0;c<this.events.length;c++)ae.apply(null,this.events[c])};function NI(c){var d=c.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=zs(c)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=zs(c)+"px",d.scrollbarsClipped=!0)}function FI(c){if(c.hasFocus())return null;var d=me();if(!d||!E(c.display.lineDiv,d))return null;var _={activeElt:d};if(window.getSelection){var x=window.getSelection();x.anchorNode&&x.extend&&E(c.display.lineDiv,x.anchorNode)&&(_.anchorNode=x.anchorNode,_.anchorOffset=x.anchorOffset,_.focusNode=x.focusNode,_.focusOffset=x.focusOffset)}return _}function UI(c){if(!(!c||!c.activeElt||c.activeElt==me())&&(c.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(c.activeElt.nodeName)&&c.anchorNode&&E(document.body,c.anchorNode)&&E(document.body,c.focusNode))){var d=window.getSelection(),_=document.createRange();_.setEnd(c.anchorNode,c.anchorOffset),_.collapse(!1),d.removeAllRanges(),d.addRange(_),d.extend(c.focusNode,c.focusOffset)}}function Xv(c,d){var _=c.display,x=c.doc;if(d.editorIsHidden)return Yo(c),!1;if(!d.force&&d.visible.from>=_.viewFrom&&d.visible.to<=_.viewTo&&(_.updateLineNumbers==null||_.updateLineNumbers>=_.viewTo)&&_.renderedView==_.view&&Wb(c)==0)return!1;tS(c)&&(Yo(c),d.dims=Bv(c));var T=x.first+x.size,U=Math.max(d.visible.from-c.options.viewportMargin,x.first),j=Math.min(T,d.visible.to+c.options.viewportMargin);_.viewFrom<U&&U-_.viewFrom<20&&(U=Math.max(x.first,_.viewFrom)),_.viewTo>j&&_.viewTo-j<20&&(j=Math.min(T,_.viewTo)),Mn&&(U=Wf(c.doc,U),j=Lp(c.doc,j));var K=U!=_.viewFrom||j!=_.viewTo||_.lastWrapHeight!=d.wrapperHeight||_.lastWrapWidth!=d.wrapperWidth;bI(c,U,j),_.viewOffset=Cr(Ze(c.doc,_.viewFrom)),c.display.mover.style.top=_.viewOffset+"px";var te=Wb(c);if(!K&&te==0&&!d.force&&_.renderedView==_.view&&(_.updateLineNumbers==null||_.updateLineNumbers>=_.viewTo))return!1;var re=FI(c);return te>4&&(_.lineDiv.style.display="none"),BI(c,_.updateLineNumbers,d.dims),te>4&&(_.lineDiv.style.display=""),_.renderedView=_.view,UI(re),pe(_.cursorDiv),pe(_.selectionDiv),_.gutters.style.height=_.sizer.style.minHeight=0,K&&(_.lastWrapHeight=d.wrapperHeight,_.lastWrapWidth=d.wrapperWidth,th(c,400)),_.updateLineNumbers=null,!0}function Jb(c,d){for(var _=d.viewport,x=!0;;x=!1){if(!x||!c.options.lineWrapping||d.oldDisplayWidth==al(c)){if(_&&_.top!=null&&(_={top:Math.min(c.doc.height+Pv(c.display)-kv(c),_.top)}),d.visible=Bp(c.display,c.doc,_),d.visible.from>=c.display.viewFrom&&d.visible.to<=c.display.viewTo)break}else x&&(d.visible=Bp(c.display,c.doc,_));if(!Xv(c,d))break;Up(c);var T=Jf(c);Kf(c),Du(c,T),Qv(c,T),d.force=!1}d.signal(c,"update",c),(c.display.viewFrom!=c.display.reportedViewFrom||c.display.viewTo!=c.display.reportedViewTo)&&(d.signal(c,"viewportChange",c,c.display.viewFrom,c.display.viewTo),c.display.reportedViewFrom=c.display.viewFrom,c.display.reportedViewTo=c.display.viewTo)}function Yv(c,d){var _=new Hp(c,d);if(Xv(c,_)){Up(c),Jb(c,_);var x=Jf(c);Kf(c),Du(c,x),Qv(c,x),_.finish()}}function BI(c,d,_){var x=c.display,T=c.options.lineNumbers,U=x.lineDiv,j=U.firstChild;function K(Ue){var Ge=Ue.nextSibling;return w&&L&&c.display.currentWheelTarget==Ue?Ue.style.display="none":Ue.parentNode.removeChild(Ue),Ge}for(var te=x.view,re=x.viewFrom,ve=0;ve<te.length;ve++){var _e=te[ve];if(!_e.hidden)if(!_e.node||_e.node.parentNode!=U){var Ae=hI(c,_e,re,_);U.insertBefore(Ae,j)}else{for(;j!=_e.node;)j=K(j);var Ee=T&&d!=null&&d<=re&&_e.lineNumber;_e.changes&&(Me(_e.changes,"gutter")>-1&&(Ee=!1),Tb(c,_e,re,_)),Ee&&(pe(_e.lineNumber),_e.lineNumber.appendChild(document.createTextNode(Wn(c.options,re)))),j=_e.node.nextSibling}re+=_e.size}for(;j;)j=K(j)}function Kv(c){var d=c.gutters.offsetWidth;c.sizer.style.marginLeft=d+"px",tr(c,"gutterChanged",c)}function Qv(c,d){c.display.sizer.style.minHeight=d.docHeight+"px",c.display.heightForcer.style.top=d.docHeight+"px",c.display.gutters.style.height=d.docHeight+c.display.barHeight+zs(c)+"px"}function eS(c){var d=c.display,_=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!c.options.fixedGutter))){for(var x=zv(d)-d.scroller.scrollLeft+c.doc.scrollLeft,T=d.gutters.offsetWidth,U=x+"px",j=0;j<_.length;j++)if(!_[j].hidden){c.options.fixedGutter&&(_[j].gutter&&(_[j].gutter.style.left=U),_[j].gutterBackground&&(_[j].gutterBackground.style.left=U));var K=_[j].alignable;if(K)for(var te=0;te<K.length;te++)K[te].style.left=U}c.options.fixedGutter&&(d.gutters.style.left=x+T+"px")}}function tS(c){if(!c.options.lineNumbers)return!1;var d=c.doc,_=Wn(c.options,d.first+d.size-1),x=c.display;if(_.length!=x.lineNumChars){var T=x.measure.appendChild(b("div",[b("div",_)],"CodeMirror-linenumber CodeMirror-gutter-elt")),U=T.firstChild.offsetWidth,j=T.offsetWidth-U;return x.lineGutter.style.width="",x.lineNumInnerWidth=Math.max(U,x.lineGutter.offsetWidth-j)+1,x.lineNumWidth=x.lineNumInnerWidth+j,x.lineNumChars=x.lineNumInnerWidth?_.length:-1,x.lineGutter.style.width=x.lineNumWidth+"px",Kv(c.display),!0}return!1}function Zv(c,d){for(var _=[],x=!1,T=0;T<c.length;T++){var U=c[T],j=null;if(typeof U!="string"&&(j=U.style,U=U.className),U=="CodeMirror-linenumbers")if(d)x=!0;else continue;_.push({className:U,style:j})}return d&&!x&&_.push({className:"CodeMirror-linenumbers",style:null}),_}function nS(c){var d=c.gutters,_=c.gutterSpecs;pe(d),c.lineGutter=null;for(var x=0;x<_.length;++x){var T=_[x],U=T.className,j=T.style,K=d.appendChild(b("div",null,"CodeMirror-gutter "+U));j&&(K.style.cssText=j),U=="CodeMirror-linenumbers"&&(c.lineGutter=K,K.style.width=(c.lineNumWidth||1)+"px")}d.style.display=_.length?"":"none",Kv(c)}function nh(c){nS(c.display),si(c),eS(c)}function zI(c,d,_,x){var T=this;this.input=_,T.scrollbarFiller=b("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=b("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=p("div",null,"CodeMirror-code"),T.selectionDiv=b("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=b("div",null,"CodeMirror-cursors"),T.measure=b("div",null,"CodeMirror-measure"),T.lineMeasure=b("div",null,"CodeMirror-measure"),T.lineSpace=p("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var U=p("div",[T.lineSpace],"CodeMirror-lines");T.mover=b("div",[U],null,"position: relative"),T.sizer=b("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=b("div",null,null,"position: absolute; height: "+Be+"px; width: 1px;"),T.gutters=b("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=b("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=b("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),T.wrapper.setAttribute("translate","no"),m&&v<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),!w&&!(o&&F)&&(T.scroller.draggable=!0),c&&(c.appendChild?c.appendChild(T.wrapper):c(T.wrapper)),T.viewFrom=T.viewTo=d.first,T.reportedViewFrom=T.reportedViewTo=d.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=Zv(x.gutters,x.lineNumbers),nS(T),_.init(T)}var Gp=0,ho=null;m?ho=-.53:o?ho=15:A?ho=-.7:O&&(ho=-1/3);function rS(c){var d=c.wheelDeltaX,_=c.wheelDeltaY;return d==null&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(d=c.detail),_==null&&c.detail&&c.axis==c.VERTICAL_AXIS?_=c.detail:_==null&&(_=c.wheelDelta),{x:d,y:_}}function HI(c){var d=rS(c);return d.x*=ho,d.y*=ho,d}function iS(c,d){var _=rS(d),x=_.x,T=_.y,U=ho;d.deltaMode===0&&(x=d.deltaX,T=d.deltaY,U=1);var j=c.display,K=j.scroller,te=K.scrollWidth>K.clientWidth,re=K.scrollHeight>K.clientHeight;if(!!(x&&te||T&&re)){if(T&&L&&w){e:for(var ve=d.target,_e=j.view;ve!=K;ve=ve.parentNode)for(var Ae=0;Ae<_e.length;Ae++)if(_e[Ae].node==ve){c.display.currentWheelTarget=ve;break e}}if(x&&!o&&!R&&U!=null){T&&re&&Zf(c,Math.max(0,K.scrollTop+T*U)),fl(c,Math.max(0,K.scrollLeft+x*U)),(!T||T&&re)&&Oe(d),j.wheelStartX=null;return}if(T&&U!=null){var Ee=T*U,Ue=c.doc.scrollTop,Ge=Ue+j.wrapper.clientHeight;Ee<0?Ue=Math.max(0,Ue+Ee-50):Ge=Math.min(c.doc.height,Ge+Ee+50),Yv(c,{top:Ue,bottom:Ge})}Gp<20&&d.deltaMode!==0&&(j.wheelStartX==null?(j.wheelStartX=K.scrollLeft,j.wheelStartY=K.scrollTop,j.wheelDX=x,j.wheelDY=T,setTimeout(function(){if(j.wheelStartX!=null){var Je=K.scrollLeft-j.wheelStartX,nt=K.scrollTop-j.wheelStartY,ut=nt&&j.wheelDY&&nt/j.wheelDY||Je&&j.wheelDX&&Je/j.wheelDX;j.wheelStartX=j.wheelStartY=null,!!ut&&(ho=(ho*Gp+ut)/(Gp+1),++Gp)}},200)):(j.wheelDX+=x,j.wheelDY+=T))}}var zi=function(c,d){this.ranges=c,this.primIndex=d};zi.prototype.primary=function(){return this.ranges[this.primIndex]},zi.prototype.equals=function(c){if(c==this)return!0;if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var _=this.ranges[d],x=c.ranges[d];if(!xe(_.anchor,x.anchor)||!xe(_.head,x.head))return!1}return!0},zi.prototype.deepCopy=function(){for(var c=[],d=0;d<this.ranges.length;d++)c[d]=new fn(ze(this.ranges[d].anchor),ze(this.ranges[d].head));return new zi(c,this.primIndex)},zi.prototype.somethingSelected=function(){for(var c=0;c<this.ranges.length;c++)if(!this.ranges[c].empty())return!0;return!1},zi.prototype.contains=function(c,d){d||(d=c);for(var _=0;_<this.ranges.length;_++){var x=this.ranges[_];if(ie(d,x.from())>=0&&ie(c,x.to())<=0)return _}return-1};var fn=function(c,d){this.anchor=c,this.head=d};fn.prototype.from=function(){return kt(this.anchor,this.head)},fn.prototype.to=function(){return Ke(this.anchor,this.head)},fn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _s(c,d,_){var x=c&&c.options.selectionsMayTouch,T=d[_];d.sort(function(Ae,Ee){return ie(Ae.from(),Ee.from())}),_=Me(d,T);for(var U=1;U<d.length;U++){var j=d[U],K=d[U-1],te=ie(K.to(),j.from());if(x&&!j.empty()?te>0:te>=0){var re=kt(K.from(),j.from()),ve=Ke(K.to(),j.to()),_e=K.empty()?j.from()==j.head:K.from()==K.head;U<=_&&--_,d.splice(--U,2,new fn(_e?ve:re,_e?re:ve))}}return new zi(d,_)}function Ko(c,d){return new zi([new fn(c,d||c)],0)}function Qo(c){return c.text?$e(c.from.line+c.text.length-1,Fe(c.text).length+(c.text.length==1?c.from.ch:0)):c.to}function sS(c,d){if(ie(c,d.from)<0)return c;if(ie(c,d.to)<=0)return Qo(d);var _=c.line+d.text.length-(d.to.line-d.from.line)-1,x=c.ch;return c.line==d.to.line&&(x+=Qo(d).ch-d.to.ch),$e(_,x)}function Jv(c,d){for(var _=[],x=0;x<c.sel.ranges.length;x++){var T=c.sel.ranges[x];_.push(new fn(sS(T.anchor,d),sS(T.head,d)))}return _s(c.cm,_,c.sel.primIndex)}function oS(c,d,_){return c.line==d.line?$e(_.line,c.ch-d.ch+_.ch):$e(_.line+(c.line-d.line),c.ch)}function GI(c,d,_){for(var x=[],T=$e(c.first,0),U=T,j=0;j<d.length;j++){var K=d[j],te=oS(K.from,T,U),re=oS(Qo(K),T,U);if(T=K.to,U=re,_=="around"){var ve=c.sel.ranges[j],_e=ie(ve.head,ve.anchor)<0;x[j]=new fn(_e?re:te,_e?te:re)}else x[j]=new fn(te,te)}return new zi(x,c.sel.primIndex)}function ey(c){c.doc.mode=jt(c.options,c.doc.modeOption),rh(c)}function rh(c){c.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),c.doc.modeFrontier=c.doc.highlightFrontier=c.doc.first,th(c,100),c.state.modeGen++,c.curOp&&si(c)}function aS(c,d){return d.from.ch==0&&d.to.ch==0&&Fe(d.text)==""&&(!c.cm||c.cm.options.wholeLineUpdateBefore)}function ty(c,d,_,x){function T(ut){return _?_[ut]:null}function U(ut,rt,dt){$f(ut,rt,dt,x),tr(ut,"change",ut,d)}function j(ut,rt){for(var dt=[],Lt=ut;Lt<rt;++Lt)dt.push(new co(re[Lt],T(Lt),x));return dt}var K=d.from,te=d.to,re=d.text,ve=Ze(c,K.line),_e=Ze(c,te.line),Ae=Fe(re),Ee=T(re.length-1),Ue=te.line-K.line;if(d.full)c.insert(0,j(0,re.length)),c.remove(re.length,c.size-re.length);else if(aS(c,d)){var Ge=j(0,re.length-1);U(_e,_e.text,Ee),Ue&&c.remove(K.line,Ue),Ge.length&&c.insert(K.line,Ge)}else if(ve==_e)if(re.length==1)U(ve,ve.text.slice(0,K.ch)+Ae+ve.text.slice(te.ch),Ee);else{var Je=j(1,re.length-1);Je.push(new co(Ae+ve.text.slice(te.ch),Ee,x)),U(ve,ve.text.slice(0,K.ch)+re[0],T(0)),c.insert(K.line+1,Je)}else if(re.length==1)U(ve,ve.text.slice(0,K.ch)+re[0]+_e.text.slice(te.ch),T(0)),c.remove(K.line+1,Ue);else{U(ve,ve.text.slice(0,K.ch)+re[0],T(0)),U(_e,Ae+_e.text.slice(te.ch),Ee);var nt=j(1,re.length-1);Ue>1&&c.remove(K.line+1,Ue-1),c.insert(K.line+1,nt)}tr(c,"change",c,d)}function Zo(c,d,_){function x(T,U,j){if(T.linked)for(var K=0;K<T.linked.length;++K){var te=T.linked[K];if(te.doc!=U){var re=j&&te.sharedHist;_&&!re||(d(te.doc,re),x(te.doc,T,re))}}}x(c,null,!0)}function lS(c,d){if(d.cm)throw new Error("This document is already in use.");c.doc=d,d.cm=c,Hv(c),ey(c),uS(c),c.options.direction=d.direction,c.options.lineWrapping||Cu(c),c.options.mode=d.modeOption,si(c)}function uS(c){(c.doc.direction=="rtl"?Se:ce)(c.display.lineDiv,"CodeMirror-rtl")}function VI(c){bi(c,function(){uS(c),si(c)})}function Vp(c){this.done=[],this.undone=[],this.undoDepth=c?c.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=c?c.maxGeneration:1}function ny(c,d){var _={from:ze(d.from),to:Qo(d),text:yr(c,d.from,d.to)};return hS(c,_,d.from.line,d.to.line+1),Zo(c,function(x){return hS(x,_,d.from.line,d.to.line+1)},!0),_}function cS(c){for(;c.length;){var d=Fe(c);if(d.ranges)c.pop();else break}}function WI(c,d){if(d)return cS(c.done),Fe(c.done);if(c.done.length&&!Fe(c.done).ranges)return Fe(c.done);if(c.done.length>1&&!c.done[c.done.length-2].ranges)return c.done.pop(),Fe(c.done)}function fS(c,d,_,x){var T=c.history;T.undone.length=0;var U=+new Date,j,K;if((T.lastOp==x||T.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&T.lastModTime>U-(c.cm?c.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(j=WI(T,T.lastOp==x)))K=Fe(j.changes),ie(d.from,d.to)==0&&ie(d.from,K.to)==0?K.to=Qo(d):j.changes.push(ny(c,d));else{var te=Fe(T.done);for((!te||!te.ranges)&&Wp(c.sel,T.done),j={changes:[ny(c,d)],generation:T.generation},T.done.push(j);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(_),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=U,T.lastOp=T.lastSelOp=x,T.lastOrigin=T.lastSelOrigin=d.origin,K||ae(c,"historyAdded")}function $I(c,d,_,x){var T=d.charAt(0);return T=="*"||T=="+"&&_.ranges.length==x.ranges.length&&_.somethingSelected()==x.somethingSelected()&&new Date-c.history.lastSelTime<=(c.cm?c.cm.options.historyEventDelay:500)}function jI(c,d,_,x){var T=c.history,U=x&&x.origin;_==T.lastSelOp||U&&T.lastSelOrigin==U&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==U||$I(c,U,Fe(T.done),d))?T.done[T.done.length-1]=d:Wp(d,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=U,T.lastSelOp=_,x&&x.clearRedo!==!1&&cS(T.undone)}function Wp(c,d){var _=Fe(d);_&&_.ranges&&_.equals(c)||d.push(c)}function hS(c,d,_,x){var T=d["spans_"+c.id],U=0;c.iter(Math.max(c.first,_),Math.min(c.first+c.size,x),function(j){j.markedSpans&&((T||(T=d["spans_"+c.id]={}))[U]=j.markedSpans),++U})}function qI(c){if(!c)return null;for(var d,_=0;_<c.length;++_)c[_].marker.explicitlyCleared?d||(d=c.slice(0,_)):d&&d.push(c[_]);return d?d.length?d:null:c}function XI(c,d){var _=d["spans_"+c.id];if(!_)return null;for(var x=[],T=0;T<d.text.length;++T)x.push(qI(_[T]));return x}function dS(c,d){var _=XI(c,d),x=Ui(c,d);if(!_)return x;if(!x)return _;for(var T=0;T<_.length;++T){var U=_[T],j=x[T];if(U&&j){e:for(var K=0;K<j.length;++K){for(var te=j[K],re=0;re<U.length;++re)if(U[re].marker==te.marker)continue e;U.push(te)}}else j&&(_[T]=j)}return _}function Ou(c,d,_){for(var x=[],T=0;T<c.length;++T){var U=c[T];if(U.ranges){x.push(_?zi.prototype.deepCopy.call(U):U);continue}var j=U.changes,K=[];x.push({changes:K});for(var te=0;te<j.length;++te){var re=j[te],ve=void 0;if(K.push({from:re.from,to:re.to,text:re.text}),d)for(var _e in re)(ve=_e.match(/^spans_(\d+)$/))&&Me(d,Number(ve[1]))>-1&&(Fe(K)[_e]=re[_e],delete re[_e])}}return x}function ry(c,d,_,x){if(x){var T=c.anchor;if(_){var U=ie(d,T)<0;U!=ie(_,T)<0?(T=d,d=_):U!=ie(d,_)<0&&(d=_)}return new fn(T,d)}else return new fn(_||d,d)}function $p(c,d,_,x,T){T==null&&(T=c.cm&&(c.cm.display.shift||c.extend)),Br(c,new zi([ry(c.sel.primary(),d,_,T)],0),x)}function pS(c,d,_){for(var x=[],T=c.cm&&(c.cm.display.shift||c.extend),U=0;U<c.sel.ranges.length;U++)x[U]=ry(c.sel.ranges[U],d[U],null,T);var j=_s(c.cm,x,c.sel.primIndex);Br(c,j,_)}function iy(c,d,_,x){var T=c.sel.ranges.slice(0);T[d]=_,Br(c,_s(c.cm,T,c.sel.primIndex),x)}function mS(c,d,_,x){Br(c,Ko(d,_),x)}function YI(c,d,_){var x={ranges:d.ranges,update:function(T){this.ranges=[];for(var U=0;U<T.length;U++)this.ranges[U]=new fn(ct(c,T[U].anchor),ct(c,T[U].head))},origin:_&&_.origin};return ae(c,"beforeSelectionChange",c,x),c.cm&&ae(c.cm,"beforeSelectionChange",c.cm,x),x.ranges!=d.ranges?_s(c.cm,x.ranges,x.ranges.length-1):d}function gS(c,d,_){var x=c.history.done,T=Fe(x);T&&T.ranges?(x[x.length-1]=d,jp(c,d,_)):Br(c,d,_)}function Br(c,d,_){jp(c,d,_),jI(c,c.sel,c.cm?c.cm.curOp.id:NaN,_)}function jp(c,d,_){(Ce(c,"beforeSelectionChange")||c.cm&&Ce(c.cm,"beforeSelectionChange"))&&(d=YI(c,d,_));var x=_&&_.bias||(ie(d.primary().head,c.sel.primary().head)<0?-1:1);vS(c,xS(c,d,x,!0)),!(_&&_.scroll===!1)&&c.cm&&c.cm.getOption("readOnly")!="nocursor"&&ku(c.cm)}function vS(c,d){d.equals(c.sel)||(c.sel=d,c.cm&&(c.cm.curOp.updateInput=1,c.cm.curOp.selectionChanged=!0,he(c.cm)),tr(c,"cursorActivity",c))}function yS(c){vS(c,xS(c,c.sel,null,!1))}function xS(c,d,_,x){for(var T,U=0;U<d.ranges.length;U++){var j=d.ranges[U],K=d.ranges.length==c.sel.ranges.length&&c.sel.ranges[U],te=qp(c,j.anchor,K&&K.anchor,_,x),re=qp(c,j.head,K&&K.head,_,x);(T||te!=j.anchor||re!=j.head)&&(T||(T=d.ranges.slice(0,U)),T[U]=new fn(te,re))}return T?_s(c.cm,T,d.primIndex):d}function Nu(c,d,_,x,T){var U=Ze(c,d.line);if(U.markedSpans)for(var j=0;j<U.markedSpans.length;++j){var K=U.markedSpans[j],te=K.marker,re="selectLeft"in te?!te.selectLeft:te.inclusiveLeft,ve="selectRight"in te?!te.selectRight:te.inclusiveRight;if((K.from==null||(re?K.from<=d.ch:K.from<d.ch))&&(K.to==null||(ve?K.to>=d.ch:K.to>d.ch))){if(T&&(ae(te,"beforeCursorEnter"),te.explicitlyCleared))if(U.markedSpans){--j;continue}else break;if(!te.atomic)continue;if(_){var _e=te.find(x<0?1:-1),Ae=void 0;if((x<0?ve:re)&&(_e=_S(c,_e,-x,_e&&_e.line==d.line?U:null)),_e&&_e.line==d.line&&(Ae=ie(_e,_))&&(x<0?Ae<0:Ae>0))return Nu(c,_e,d,x,T)}var Ee=te.find(x<0?-1:1);return(x<0?re:ve)&&(Ee=_S(c,Ee,x,Ee.line==d.line?U:null)),Ee?Nu(c,Ee,d,x,T):null}}return d}function qp(c,d,_,x,T){var U=x||1,j=Nu(c,d,_,U,T)||!T&&Nu(c,d,_,U,!0)||Nu(c,d,_,-U,T)||!T&&Nu(c,d,_,-U,!0);return j||(c.cantEdit=!0,$e(c.first,0))}function _S(c,d,_,x){return _<0&&d.ch==0?d.line>c.first?ct(c,$e(d.line-1)):null:_>0&&d.ch==(x||Ze(c,d.line)).text.length?d.line<c.first+c.size-1?$e(d.line+1,0):null:new $e(d.line,d.ch+_)}function wS(c){c.setSelection($e(c.firstLine(),0),$e(c.lastLine()),qe)}function bS(c,d,_){var x={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return x.canceled=!0}};return _&&(x.update=function(T,U,j,K){T&&(x.from=ct(c,T)),U&&(x.to=ct(c,U)),j&&(x.text=j),K!==void 0&&(x.origin=K)}),ae(c,"beforeChange",c,x),c.cm&&ae(c.cm,"beforeChange",c.cm,x),x.canceled?(c.cm&&(c.cm.curOp.updateInput=2),null):{from:x.from,to:x.to,text:x.text,origin:x.origin}}function Fu(c,d,_){if(c.cm){if(!c.cm.curOp)return _r(c.cm,Fu)(c,d,_);if(c.cm.state.suppressEdits)return}if(!((Ce(c,"beforeChange")||c.cm&&Ce(c.cm,"beforeChange"))&&(d=bS(c,d,!0),!d))){var x=Sn&&!_&&jo(c,d.from,d.to);if(x)for(var T=x.length-1;T>=0;--T)SS(c,{from:x[T].from,to:x[T].to,text:T?[""]:d.text,origin:d.origin});else SS(c,d)}}function SS(c,d){if(!(d.text.length==1&&d.text[0]==""&&ie(d.from,d.to)==0)){var _=Jv(c,d);fS(c,d,_,c.cm?c.cm.curOp.id:NaN),ih(c,d,_,Ui(c,d));var x=[];Zo(c,function(T,U){!U&&Me(x,T.history)==-1&&(AS(T.history,d),x.push(T.history)),ih(T,d,null,Ui(T,d))})}}function Xp(c,d,_){var x=c.cm&&c.cm.state.suppressEdits;if(!(x&&!_)){for(var T=c.history,U,j=c.sel,K=d=="undo"?T.done:T.undone,te=d=="undo"?T.undone:T.done,re=0;re<K.length&&(U=K[re],!(_?U.ranges&&!U.equals(c.sel):!U.ranges));re++);if(re!=K.length){for(T.lastOrigin=T.lastSelOrigin=null;;)if(U=K.pop(),U.ranges){if(Wp(U,te),_&&!U.equals(c.sel)){Br(c,U,{clearRedo:!1});return}j=U}else if(x){K.push(U);return}else break;var ve=[];Wp(j,te),te.push({changes:ve,generation:T.generation}),T.generation=U.generation||++T.maxGeneration;for(var _e=Ce(c,"beforeChange")||c.cm&&Ce(c.cm,"beforeChange"),Ae=function(Ge){var Je=U.changes[Ge];if(Je.origin=d,_e&&!bS(c,Je,!1))return K.length=0,{};ve.push(ny(c,Je));var nt=Ge?Jv(c,Je):Fe(K);ih(c,Je,nt,dS(c,Je)),!Ge&&c.cm&&c.cm.scrollIntoView({from:Je.from,to:Qo(Je)});var ut=[];Zo(c,function(rt,dt){!dt&&Me(ut,rt.history)==-1&&(AS(rt.history,Je),ut.push(rt.history)),ih(rt,Je,null,dS(rt,Je))})},Ee=U.changes.length-1;Ee>=0;--Ee){var Ue=Ae(Ee);if(Ue)return Ue.v}}}}function MS(c,d){if(d!=0&&(c.first+=d,c.sel=new zi(oe(c.sel.ranges,function(T){return new fn($e(T.anchor.line+d,T.anchor.ch),$e(T.head.line+d,T.head.ch))}),c.sel.primIndex),c.cm)){si(c.cm,c.first,c.first-d,d);for(var _=c.cm.display,x=_.viewFrom;x<_.viewTo;x++)Xo(c.cm,x,"gutter")}}function ih(c,d,_,x){if(c.cm&&!c.cm.curOp)return _r(c.cm,ih)(c,d,_,x);if(d.to.line<c.first){MS(c,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>c.lastLine())){if(d.from.line<c.first){var T=d.text.length-1-(c.first-d.from.line);MS(c,T),d={from:$e(c.first,0),to:$e(d.to.line+T,d.to.ch),text:[Fe(d.text)],origin:d.origin}}var U=c.lastLine();d.to.line>U&&(d={from:d.from,to:$e(U,Ze(c,U).text.length),text:[d.text[0]],origin:d.origin}),d.removed=yr(c,d.from,d.to),_||(_=Jv(c,d)),c.cm?KI(c.cm,d,x):ty(c,d,x),jp(c,_,qe),c.cantEdit&&qp(c,$e(c.firstLine(),0))&&(c.cantEdit=!1)}}function KI(c,d,_){var x=c.doc,T=c.display,U=d.from,j=d.to,K=!1,te=U.line;c.options.lineWrapping||(te=Wt(Bi(Ze(x,U.line))),x.iter(te,j.line+1,function(Ee){if(Ee==T.maxLine)return K=!0,!0})),x.sel.contains(d.from,d.to)>-1&&he(c),ty(x,d,_,Vb(c)),c.options.lineWrapping||(x.iter(te,U.line+d.text.length,function(Ee){var Ue=es(Ee);Ue>T.maxLineLength&&(T.maxLine=Ee,T.maxLineLength=Ue,T.maxLineChanged=!0,K=!1)}),K&&(c.curOp.updateMaxLine=!0)),it(x,U.line),th(c,400);var re=d.text.length-(j.line-U.line)-1;d.full?si(c):U.line==j.line&&d.text.length==1&&!aS(c.doc,d)?Xo(c,U.line,"text"):si(c,U.line,j.line+1,re);var ve=Ce(c,"changes"),_e=Ce(c,"change");if(_e||ve){var Ae={from:U,to:j,text:d.text,removed:d.removed,origin:d.origin};_e&&tr(c,"change",c,Ae),ve&&(c.curOp.changeObjs||(c.curOp.changeObjs=[])).push(Ae)}c.display.selForContextMenu=null}function Uu(c,d,_,x,T){var U;x||(x=_),ie(x,_)<0&&(U=[x,_],_=U[0],x=U[1]),typeof d=="string"&&(d=c.splitLines(d)),Fu(c,{from:_,to:x,text:d,origin:T})}function TS(c,d,_,x){_<c.line?c.line+=x:d<c.line&&(c.line=d,c.ch=0)}function ES(c,d,_,x){for(var T=0;T<c.length;++T){var U=c[T],j=!0;if(U.ranges){U.copied||(U=c[T]=U.deepCopy(),U.copied=!0);for(var K=0;K<U.ranges.length;K++)TS(U.ranges[K].anchor,d,_,x),TS(U.ranges[K].head,d,_,x);continue}for(var te=0;te<U.changes.length;++te){var re=U.changes[te];if(_<re.from.line)re.from=$e(re.from.line+x,re.from.ch),re.to=$e(re.to.line+x,re.to.ch);else if(d<=re.to.line){j=!1;break}}j||(c.splice(0,T+1),T=0)}}function AS(c,d){var _=d.from.line,x=d.to.line,T=d.text.length-(x-_)-1;ES(c.done,_,x,T),ES(c.undone,_,x,T)}function sh(c,d,_,x){var T=d,U=d;return typeof d=="number"?U=Ze(c,Qt(c,d)):T=Wt(d),T==null?null:(x(U,T)&&c.cm&&Xo(c.cm,T,_),U)}function oh(c){this.lines=c,this.parent=null;for(var d=0,_=0;_<c.length;++_)c[_].parent=this,d+=c[_].height;this.height=d}oh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(c,d){for(var _=c,x=c+d;_<x;++_){var T=this.lines[_];this.height-=T.height,Rv(T),tr(T,"delete")}this.lines.splice(c,d)},collapse:function(c){c.push.apply(c,this.lines)},insertInner:function(c,d,_){this.height+=_,this.lines=this.lines.slice(0,c).concat(d).concat(this.lines.slice(c));for(var x=0;x<d.length;++x)d[x].parent=this},iterN:function(c,d,_){for(var x=c+d;c<x;++c)if(_(this.lines[c]))return!0}};function ah(c){this.children=c;for(var d=0,_=0,x=0;x<c.length;++x){var T=c[x];d+=T.chunkSize(),_+=T.height,T.parent=this}this.size=d,this.height=_,this.parent=null}ah.prototype={chunkSize:function(){return this.size},removeInner:function(c,d){this.size-=d;for(var _=0;_<this.children.length;++_){var x=this.children[_],T=x.chunkSize();if(c<T){var U=Math.min(d,T-c),j=x.height;if(x.removeInner(c,U),this.height-=j-x.height,T==U&&(this.children.splice(_--,1),x.parent=null),(d-=U)==0)break;c=0}else c-=T}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof oh))){var K=[];this.collapse(K),this.children=[new oh(K)],this.children[0].parent=this}},collapse:function(c){for(var d=0;d<this.children.length;++d)this.children[d].collapse(c)},insertInner:function(c,d,_){this.size+=d.length,this.height+=_;for(var x=0;x<this.children.length;++x){var T=this.children[x],U=T.chunkSize();if(c<=U){if(T.insertInner(c,d,_),T.lines&&T.lines.length>50){for(var j=T.lines.length%25+25,K=j;K<T.lines.length;){var te=new oh(T.lines.slice(K,K+=25));T.height-=te.height,this.children.splice(++x,0,te),te.parent=this}T.lines=T.lines.slice(0,j),this.maybeSpill()}break}c-=U}},maybeSpill:function(){if(!(this.children.length<=10)){var c=this;do{var d=c.children.splice(c.children.length-5,5),_=new ah(d);if(c.parent){c.size-=_.size,c.height-=_.height;var T=Me(c.parent.children,c);c.parent.children.splice(T+1,0,_)}else{var x=new ah(c.children);x.parent=c,c.children=[x,_],c=x}_.parent=c.parent}while(c.children.length>10);c.parent.maybeSpill()}},iterN:function(c,d,_){for(var x=0;x<this.children.length;++x){var T=this.children[x],U=T.chunkSize();if(c<U){var j=Math.min(d,U-c);if(T.iterN(c,j,_))return!0;if((d-=j)==0)break;c=0}else c-=U}}};var lh=function(c,d,_){if(_)for(var x in _)_.hasOwnProperty(x)&&(this[x]=_[x]);this.doc=c,this.node=d};lh.prototype.clear=function(){var c=this.doc.cm,d=this.line.widgets,_=this.line,x=Wt(_);if(!(x==null||!d)){for(var T=0;T<d.length;++T)d[T]==this&&d.splice(T--,1);d.length||(_.widgets=null);var U=Xf(this);An(_,Math.max(0,_.height-U)),c&&(bi(c,function(){CS(c,_,-U),Xo(c,x,"widget")}),tr(c,"lineWidgetCleared",c,this,x))}},lh.prototype.changed=function(){var c=this,d=this.height,_=this.doc.cm,x=this.line;this.height=null;var T=Xf(this)-d;!T||(Bs(this.doc,x)||An(x,x.height+T),_&&bi(_,function(){_.curOp.forceUpdate=!0,CS(_,x,T),tr(_,"lineWidgetChanged",_,c,Wt(x))}))},He(lh);function CS(c,d,_){Cr(d)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&qv(c,_)}function QI(c,d,_,x){var T=new lh(c,_,x),U=c.cm;return U&&T.noHScroll&&(U.display.alignWidgets=!0),sh(c,d,"widget",function(j){var K=j.widgets||(j.widgets=[]);if(T.insertAt==null?K.push(T):K.splice(Math.min(K.length,Math.max(0,T.insertAt)),0,T),T.line=j,U&&!Bs(c,j)){var te=Cr(j)<c.scrollTop;An(j,j.height+Xf(T)),te&&qv(U,T.height),U.curOp.forceUpdate=!0}return!0}),U&&tr(U,"lineWidgetAdded",U,T,typeof d=="number"?d:Wt(d)),T}var RS=0,Jo=function(c,d){this.lines=[],this.type=d,this.doc=c,this.id=++RS};Jo.prototype.clear=function(){if(!this.explicitlyCleared){var c=this.doc.cm,d=c&&!c.curOp;if(d&&dl(c),Ce(this,"clear")){var _=this.find();_&&tr(this,"clear",_.from,_.to)}for(var x=null,T=null,U=0;U<this.lines.length;++U){var j=this.lines[U],K=Ji(j.markedSpans,this);c&&!this.collapsed?Xo(c,Wt(j),"text"):c&&(K.to!=null&&(T=Wt(j)),K.from!=null&&(x=Wt(j))),j.markedSpans=Us(j.markedSpans,K),K.from==null&&this.collapsed&&!Bs(this.doc,j)&&c&&An(j,Lu(c.display))}if(c&&this.collapsed&&!c.options.lineWrapping)for(var te=0;te<this.lines.length;++te){var re=Bi(this.lines[te]),ve=es(re);ve>c.display.maxLineLength&&(c.display.maxLine=re,c.display.maxLineLength=ve,c.display.maxLineChanged=!0)}x!=null&&c&&this.collapsed&&si(c,x,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,c&&yS(c.doc)),c&&tr(c,"markerCleared",c,this,x,T),d&&pl(c),this.parent&&this.parent.clear()}},Jo.prototype.find=function(c,d){c==null&&this.type=="bookmark"&&(c=1);for(var _,x,T=0;T<this.lines.length;++T){var U=this.lines[T],j=Ji(U.markedSpans,this);if(j.from!=null&&(_=$e(d?U:Wt(U),j.from),c==-1))return _;if(j.to!=null&&(x=$e(d?U:Wt(U),j.to),c==1))return x}return _&&{from:_,to:x}},Jo.prototype.changed=function(){var c=this,d=this.find(-1,!0),_=this,x=this.doc.cm;!d||!x||bi(x,function(){var T=d.line,U=Wt(d.line),j=Dv(x,U);if(j&&(Ob(j),x.curOp.selectionChanged=x.curOp.forceUpdate=!0),x.curOp.updateMaxLine=!0,!Bs(_.doc,T)&&_.height!=null){var K=_.height;_.height=null;var te=Xf(_)-K;te&&An(T,T.height+te)}tr(x,"markerChanged",x,c)})},Jo.prototype.attachLine=function(c){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||Me(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(c)},Jo.prototype.detachLine=function(c){if(this.lines.splice(Me(this.lines,c),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},He(Jo);function Bu(c,d,_,x,T){if(x&&x.shared)return ZI(c,d,_,x,T);if(c.cm&&!c.cm.curOp)return _r(c.cm,Bu)(c,d,_,x,T);var U=new Jo(c,T),j=ie(d,_);if(x&&Re(x,U,!1),j>0||j==0&&U.clearWhenEmpty!==!1)return U;if(U.replacedWith&&(U.collapsed=!0,U.widgetNode=p("span",[U.replacedWith],"CodeMirror-widget"),x.handleMouseEvents||U.widgetNode.setAttribute("cm-ignore-events","true"),x.insertLeft&&(U.widgetNode.insertLeft=!0)),U.collapsed){if(Rp(c,d.line,d,_,U)||d.line!=_.line&&Rp(c,_.line,d,_,U))throw new Error("Inserting collapsed marker partially overlapping an existing one");hr()}U.addToHistory&&fS(c,{from:d,to:_,origin:"markText"},c.sel,NaN);var K=d.line,te=c.cm,re;if(c.iter(K,_.line+1,function(_e){te&&U.collapsed&&!te.options.lineWrapping&&Bi(_e)==te.display.maxLine&&(re=!0),U.collapsed&&K!=d.line&&An(_e,0),Cp(_e,new ys(U,K==d.line?d.ch:null,K==_.line?_.ch:null),c.cm&&c.cm.curOp),++K}),U.collapsed&&c.iter(d.line,_.line+1,function(_e){Bs(c,_e)&&An(_e,0)}),U.clearOnEnter&&Q(U,"beforeCursorEnter",function(){return U.clear()}),U.readOnly&&(fr(),(c.history.done.length||c.history.undone.length)&&c.clearHistory()),U.collapsed&&(U.id=++RS,U.atomic=!0),te){if(re&&(te.curOp.updateMaxLine=!0),U.collapsed)si(te,d.line,_.line+1);else if(U.className||U.startStyle||U.endStyle||U.css||U.attributes||U.title)for(var ve=d.line;ve<=_.line;ve++)Xo(te,ve,"text");U.atomic&&yS(te.doc),tr(te,"markerAdded",te,U)}return U}var uh=function(c,d){this.markers=c,this.primary=d;for(var _=0;_<c.length;++_)c[_].parent=this};uh.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var c=0;c<this.markers.length;++c)this.markers[c].clear();tr(this,"clear")}},uh.prototype.find=function(c,d){return this.primary.find(c,d)},He(uh);function ZI(c,d,_,x,T){x=Re(x),x.shared=!1;var U=[Bu(c,d,_,x,T)],j=U[0],K=x.widgetNode;return Zo(c,function(te){K&&(x.widgetNode=K.cloneNode(!0)),U.push(Bu(te,ct(te,d),ct(te,_),x,T));for(var re=0;re<te.linked.length;++re)if(te.linked[re].isParent)return;j=Fe(U)}),new uh(U,j)}function LS(c){return c.findMarks($e(c.first,0),c.clipPos($e(c.lastLine())),function(d){return d.parent})}function JI(c,d){for(var _=0;_<d.length;_++){var x=d[_],T=x.find(),U=c.clipPos(T.from),j=c.clipPos(T.to);if(ie(U,j)){var K=Bu(c,U,j,x.primary,x.primary.type);x.markers.push(K),K.parent=x}}}function eP(c){for(var d=function(x){var T=c[x],U=[T.primary.doc];Zo(T.primary.doc,function(te){return U.push(te)});for(var j=0;j<T.markers.length;j++){var K=T.markers[j];Me(U,K.doc)==-1&&(K.parent=null,T.markers.splice(j--,1))}},_=0;_<c.length;_++)d(_)}var tP=0,oi=function(c,d,_,x,T){if(!(this instanceof oi))return new oi(c,d,_,x,T);_==null&&(_=0),ah.call(this,[new oh([new co("",null)])]),this.first=_,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=_;var U=$e(_,0);this.sel=Ko(U),this.history=new Vp(null),this.id=++tP,this.modeOption=d,this.lineSep=x,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof c=="string"&&(c=this.splitLines(c)),ty(this,{from:U,to:U,text:c}),Br(this,Ko(U),qe)};oi.prototype=Xe(ah.prototype,{constructor:oi,iter:function(c,d,_){_?this.iterN(c-this.first,d-c,_):this.iterN(this.first,this.first+this.size,c)},insert:function(c,d){for(var _=0,x=0;x<d.length;++x)_+=d[x].height;this.insertInner(c-this.first,d,_)},remove:function(c,d){this.removeInner(c-this.first,d)},getValue:function(c){var d=bn(this,this.first,this.first+this.size);return c===!1?d:d.join(c||this.lineSeparator())},setValue:wr(function(c){var d=$e(this.first,0),_=this.first+this.size-1;Fu(this,{from:d,to:$e(_,Ze(this,_).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),this.cm&&Qf(this.cm,0,0),Br(this,Ko(d),qe)}),replaceRange:function(c,d,_,x){d=ct(this,d),_=_?ct(this,_):d,Uu(this,c,d,_,x)},getRange:function(c,d,_){var x=yr(this,ct(this,c),ct(this,d));return _===!1?x:_===""?x.join(""):x.join(_||this.lineSeparator())},getLine:function(c){var d=this.getLineHandle(c);return d&&d.text},getLineHandle:function(c){if(Fi(this,c))return Ze(this,c)},getLineNumber:function(c){return Wt(c)},getLineHandleVisualStart:function(c){return typeof c=="number"&&(c=Ze(this,c)),Bi(c)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(c){return ct(this,c)},getCursor:function(c){var d=this.sel.primary(),_;return c==null||c=="head"?_=d.head:c=="anchor"?_=d.anchor:c=="end"||c=="to"||c===!1?_=d.to():_=d.from(),_},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:wr(function(c,d,_){mS(this,ct(this,typeof c=="number"?$e(c,d||0):c),null,_)}),setSelection:wr(function(c,d,_){mS(this,ct(this,c),ct(this,d||c),_)}),extendSelection:wr(function(c,d,_){$p(this,ct(this,c),d&&ct(this,d),_)}),extendSelections:wr(function(c,d){pS(this,ri(this,c),d)}),extendSelectionsBy:wr(function(c,d){var _=oe(this.sel.ranges,c);pS(this,ri(this,_),d)}),setSelections:wr(function(c,d,_){if(!!c.length){for(var x=[],T=0;T<c.length;T++)x[T]=new fn(ct(this,c[T].anchor),ct(this,c[T].head||c[T].anchor));d==null&&(d=Math.min(c.length-1,this.sel.primIndex)),Br(this,_s(this.cm,x,d),_)}}),addSelection:wr(function(c,d,_){var x=this.sel.ranges.slice(0);x.push(new fn(ct(this,c),ct(this,d||c))),Br(this,_s(this.cm,x,x.length-1),_)}),getSelection:function(c){for(var d=this.sel.ranges,_,x=0;x<d.length;x++){var T=yr(this,d[x].from(),d[x].to());_=_?_.concat(T):T}return c===!1?_:_.join(c||this.lineSeparator())},getSelections:function(c){for(var d=[],_=this.sel.ranges,x=0;x<_.length;x++){var T=yr(this,_[x].from(),_[x].to());c!==!1&&(T=T.join(c||this.lineSeparator())),d[x]=T}return d},replaceSelection:function(c,d,_){for(var x=[],T=0;T<this.sel.ranges.length;T++)x[T]=c;this.replaceSelections(x,d,_||"+input")},replaceSelections:wr(function(c,d,_){for(var x=[],T=this.sel,U=0;U<T.ranges.length;U++){var j=T.ranges[U];x[U]={from:j.from(),to:j.to(),text:this.splitLines(c[U]),origin:_}}for(var K=d&&d!="end"&&GI(this,x,d),te=x.length-1;te>=0;te--)Fu(this,x[te]);K?gS(this,K):this.cm&&ku(this.cm)}),undo:wr(function(){Xp(this,"undo")}),redo:wr(function(){Xp(this,"redo")}),undoSelection:wr(function(){Xp(this,"undo",!0)}),redoSelection:wr(function(){Xp(this,"redo",!0)}),setExtending:function(c){this.extend=c},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,d=0,_=0,x=0;x<c.done.length;x++)c.done[x].ranges||++d;for(var T=0;T<c.undone.length;T++)c.undone[T].ranges||++_;return{undo:d,redo:_}},clearHistory:function(){var c=this;this.history=new Vp(this.history),Zo(this,function(d){return d.history=c.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(c){return c&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(c){return this.history.generation==(c||this.cleanGeneration)},getHistory:function(){return{done:Ou(this.history.done),undone:Ou(this.history.undone)}},setHistory:function(c){var d=this.history=new Vp(this.history);d.done=Ou(c.done.slice(0),null,!0),d.undone=Ou(c.undone.slice(0),null,!0)},setGutterMarker:wr(function(c,d,_){return sh(this,c,"gutter",function(x){var T=x.gutterMarkers||(x.gutterMarkers={});return T[d]=_,!_&&i(T)&&(x.gutterMarkers=null),!0})}),clearGutter:wr(function(c){var d=this;this.iter(function(_){_.gutterMarkers&&_.gutterMarkers[c]&&sh(d,_,"gutter",function(){return _.gutterMarkers[c]=null,i(_.gutterMarkers)&&(_.gutterMarkers=null),!0})})}),lineInfo:function(c){var d;if(typeof c=="number"){if(!Fi(this,c)||(d=c,c=Ze(this,c),!c))return null}else if(d=Wt(c),d==null)return null;return{line:d,handle:c,text:c.text,gutterMarkers:c.gutterMarkers,textClass:c.textClass,bgClass:c.bgClass,wrapClass:c.wrapClass,widgets:c.widgets}},addLineClass:wr(function(c,d,_){return sh(this,c,d=="gutter"?"gutter":"class",function(x){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!x[T])x[T]=_;else{if(se(_).test(x[T]))return!1;x[T]+=" "+_}return!0})}),removeLineClass:wr(function(c,d,_){return sh(this,c,d=="gutter"?"gutter":"class",function(x){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",U=x[T];if(U)if(_==null)x[T]=null;else{var j=U.match(se(_));if(!j)return!1;var K=j.index+j[0].length;x[T]=U.slice(0,j.index)+(!j.index||K==U.length?"":" ")+U.slice(K)||null}else return!1;return!0})}),addLineWidget:wr(function(c,d,_){return QI(this,c,d,_)}),removeLineWidget:function(c){c.clear()},markText:function(c,d,_){return Bu(this,ct(this,c),ct(this,d),_,_&&_.type||"range")},setBookmark:function(c,d){var _={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return c=ct(this,c),Bu(this,c,c,_,"bookmark")},findMarksAt:function(c){c=ct(this,c);var d=[],_=Ze(this,c.line).markedSpans;if(_)for(var x=0;x<_.length;++x){var T=_[x];(T.from==null||T.from<=c.ch)&&(T.to==null||T.to>=c.ch)&&d.push(T.marker.parent||T.marker)}return d},findMarks:function(c,d,_){c=ct(this,c),d=ct(this,d);var x=[],T=c.line;return this.iter(c.line,d.line+1,function(U){var j=U.markedSpans;if(j)for(var K=0;K<j.length;K++){var te=j[K];!(te.to!=null&&T==c.line&&c.ch>=te.to||te.from==null&&T!=c.line||te.from!=null&&T==d.line&&te.from>=d.ch)&&(!_||_(te.marker))&&x.push(te.marker.parent||te.marker)}++T}),x},getAllMarks:function(){var c=[];return this.iter(function(d){var _=d.markedSpans;if(_)for(var x=0;x<_.length;++x)_[x].from!=null&&c.push(_[x].marker)}),c},posFromIndex:function(c){var d,_=this.first,x=this.lineSeparator().length;return this.iter(function(T){var U=T.text.length+x;if(U>c)return d=c,!0;c-=U,++_}),ct(this,$e(_,d))},indexFromPos:function(c){c=ct(this,c);var d=c.ch;if(c.line<this.first||c.ch<0)return 0;var _=this.lineSeparator().length;return this.iter(this.first,c.line,function(x){d+=x.text.length+_}),d},copy:function(c){var d=new oi(bn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,c&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(c){c||(c={});var d=this.first,_=this.first+this.size;c.from!=null&&c.from>d&&(d=c.from),c.to!=null&&c.to<_&&(_=c.to);var x=new oi(bn(this,d,_),c.mode||this.modeOption,d,this.lineSep,this.direction);return c.sharedHist&&(x.history=this.history),(this.linked||(this.linked=[])).push({doc:x,sharedHist:c.sharedHist}),x.linked=[{doc:this,isParent:!0,sharedHist:c.sharedHist}],JI(x,LS(this)),x},unlinkDoc:function(c){if(c instanceof In&&(c=c.doc),this.linked)for(var d=0;d<this.linked.length;++d){var _=this.linked[d];if(_.doc==c){this.linked.splice(d,1),c.unlinkDoc(this),eP(LS(this));break}}if(c.history==this.history){var x=[c.id];Zo(c,function(T){return x.push(T.id)},!0),c.history=new Vp(null),c.history.done=Ou(this.history.done,x),c.history.undone=Ou(this.history.undone,x)}},iterLinkedDocs:function(c){Zo(this,c)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(c){return this.lineSep?c.split(this.lineSep):ge(c)},lineSeparator:function(){return this.lineSep||`
`},setDirection:wr(function(c){c!="rtl"&&(c="ltr"),c!=this.direction&&(this.direction=c,this.iter(function(d){return d.order=null}),this.cm&&VI(this.cm))})}),oi.prototype.eachLine=oi.prototype.iter;var IS=0;function nP(c){var d=this;if(PS(d),!(ue(d,c)||fo(d.display,c))){Oe(c),m&&(IS=+new Date);var _=ul(d,c,!0),x=c.dataTransfer.files;if(!(!_||d.isReadOnly()))if(x&&x.length&&window.FileReader&&window.File)for(var T=x.length,U=Array(T),j=0,K=function(){++j==T&&_r(d,function(){_=ct(d.doc,_);var Ee={from:_,to:_,text:d.doc.splitLines(U.filter(function(Ue){return Ue!=null}).join(d.doc.lineSeparator())),origin:"paste"};Fu(d.doc,Ee),gS(d.doc,Ko(ct(d.doc,_),ct(d.doc,Qo(Ee))))})()},te=function(Ee,Ue){if(d.options.allowDropFileTypes&&Me(d.options.allowDropFileTypes,Ee.type)==-1){K();return}var Ge=new FileReader;Ge.onerror=function(){return K()},Ge.onload=function(){var Je=Ge.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Je)){K();return}U[Ue]=Je,K()},Ge.readAsText(Ee)},re=0;re<x.length;re++)te(x[re],re);else{if(d.state.draggingText&&d.doc.sel.contains(_)>-1){d.state.draggingText(c),setTimeout(function(){return d.display.input.focus()},20);return}try{var ve=c.dataTransfer.getData("Text");if(ve){var _e;if(d.state.draggingText&&!d.state.draggingText.copy&&(_e=d.listSelections()),jp(d.doc,Ko(_,_)),_e)for(var Ae=0;Ae<_e.length;++Ae)Uu(d.doc,"",_e[Ae].anchor,_e[Ae].head,"drag");d.replaceSelection(ve,"around","paste"),d.display.input.focus()}}catch{}}}}function rP(c,d){if(m&&(!c.state.draggingText||+new Date-IS<100)){Et(d);return}if(!(ue(c,d)||fo(c.display,d))&&(d.dataTransfer.setData("Text",c.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!O)){var _=b("img",null,null,"position: fixed; left: 0; top: 0;");_.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",R&&(_.width=_.height=1,c.display.wrapper.appendChild(_),_._top=_.offsetTop),d.dataTransfer.setDragImage(_,0,0),R&&_.parentNode.removeChild(_)}}function iP(c,d){var _=ul(c,d);if(!!_){var x=document.createDocumentFragment();Gv(c,_,x),c.display.dragCursor||(c.display.dragCursor=b("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),fe(c.display.dragCursor,x)}}function PS(c){c.display.dragCursor&&(c.display.lineSpace.removeChild(c.display.dragCursor),c.display.dragCursor=null)}function kS(c){if(!!document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),_=[],x=0;x<d.length;x++){var T=d[x].CodeMirror;T&&_.push(T)}_.length&&_[0].operation(function(){for(var U=0;U<_.length;U++)c(_[U])})}}var DS=!1;function sP(){DS||(oP(),DS=!0)}function oP(){var c;Q(window,"resize",function(){c==null&&(c=setTimeout(function(){c=null,kS(aP)},100))}),Q(window,"blur",function(){return kS(Pu)})}function aP(c){var d=c.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,c.setSize()}for(var ea={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ch=0;ch<10;ch++)ea[ch+48]=ea[ch+96]=String(ch);for(var Yp=65;Yp<=90;Yp++)ea[Yp]=String.fromCharCode(Yp);for(var fh=1;fh<=12;fh++)ea[fh+111]=ea[fh+63235]="F"+fh;var po={};po.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},po.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},po.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},po.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},po.default=L?po.macDefault:po.pcDefault;function lP(c){var d=c.split(/-(?!$)/);c=d[d.length-1];for(var _,x,T,U,j=0;j<d.length-1;j++){var K=d[j];if(/^(cmd|meta|m)$/i.test(K))U=!0;else if(/^a(lt)?$/i.test(K))_=!0;else if(/^(c|ctrl|control)$/i.test(K))x=!0;else if(/^s(hift)?$/i.test(K))T=!0;else throw new Error("Unrecognized modifier name: "+K)}return _&&(c="Alt-"+c),x&&(c="Ctrl-"+c),U&&(c="Cmd-"+c),T&&(c="Shift-"+c),c}function uP(c){var d={};for(var _ in c)if(c.hasOwnProperty(_)){var x=c[_];if(/^(name|fallthrough|(de|at)tach)$/.test(_))continue;if(x=="..."){delete c[_];continue}for(var T=oe(_.split(" "),lP),U=0;U<T.length;U++){var j=void 0,K=void 0;U==T.length-1?(K=T.join(" "),j=x):(K=T.slice(0,U+1).join(" "),j="...");var te=d[K];if(!te)d[K]=j;else if(te!=j)throw new Error("Inconsistent bindings for "+K)}delete c[_]}for(var re in d)c[re]=d[re];return c}function zu(c,d,_,x){d=Kp(d);var T=d.call?d.call(c,x):d[c];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&_(T))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return zu(c,d.fallthrough,_,x);for(var U=0;U<d.fallthrough.length;U++){var j=zu(c,d.fallthrough[U],_,x);if(j)return j}}}function OS(c){var d=typeof c=="string"?c:ea[c.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function NS(c,d,_){var x=c;return d.altKey&&x!="Alt"&&(c="Alt-"+c),($?d.metaKey:d.ctrlKey)&&x!="Ctrl"&&(c="Ctrl-"+c),($?d.ctrlKey:d.metaKey)&&x!="Mod"&&(c="Cmd-"+c),!_&&d.shiftKey&&x!="Shift"&&(c="Shift-"+c),c}function FS(c,d){if(R&&c.keyCode==34&&c.char)return!1;var _=ea[c.keyCode];return _==null||c.altGraphKey?!1:(c.keyCode==3&&c.code&&(_=c.code),NS(_,c,d))}function Kp(c){return typeof c=="string"?po[c]:c}function Hu(c,d){for(var _=c.doc.sel.ranges,x=[],T=0;T<_.length;T++){for(var U=d(_[T]);x.length&&ie(U.from,Fe(x).to)<=0;){var j=x.pop();if(ie(j.from,U.from)<0){U.from=j.from;break}}x.push(U)}bi(c,function(){for(var K=x.length-1;K>=0;K--)Uu(c.doc,"",x[K].from,x[K].to,"+delete");ku(c)})}function sy(c,d,_){var x=g(c.text,d+_,_);return x<0||x>c.text.length?null:x}function oy(c,d,_){var x=sy(c,d.ch,_);return x==null?null:new $e(d.line,x,_<0?"after":"before")}function ay(c,d,_,x,T){if(c){d.doc.direction=="rtl"&&(T=-T);var U=G(_,d.doc.direction);if(U){var j=T<0?Fe(U):U[0],K=T<0==(j.level==1),te=K?"after":"before",re;if(j.level>0||d.doc.direction=="rtl"){var ve=Ru(d,_);re=T<0?_.text.length-1:0;var _e=Hs(d,ve,re).top;re=y(function(Ae){return Hs(d,ve,Ae).top==_e},T<0==(j.level==1)?j.from:j.to-1,re),te=="before"&&(re=sy(_,re,1))}else re=T<0?j.to:j.from;return new $e(x,re,te)}}return new $e(x,T<0?_.text.length:0,T<0?"before":"after")}function cP(c,d,_,x){var T=G(d,c.doc.direction);if(!T)return oy(d,_,x);_.ch>=d.text.length?(_.ch=d.text.length,_.sticky="before"):_.ch<=0&&(_.ch=0,_.sticky="after");var U=I(T,_.ch,_.sticky),j=T[U];if(c.doc.direction=="ltr"&&j.level%2==0&&(x>0?j.to>_.ch:j.from<_.ch))return oy(d,_,x);var K=function(nt,ut){return sy(d,nt instanceof $e?nt.ch:nt,ut)},te,re=function(nt){return c.options.lineWrapping?(te=te||Ru(c,d),Gb(c,d,te,nt)):{begin:0,end:d.text.length}},ve=re(_.sticky=="before"?K(_,-1):_.ch);if(c.doc.direction=="rtl"||j.level==1){var _e=j.level==1==x<0,Ae=K(_,_e?1:-1);if(Ae!=null&&(_e?Ae<=j.to&&Ae<=ve.end:Ae>=j.from&&Ae>=ve.begin)){var Ee=_e?"before":"after";return new $e(_.line,Ae,Ee)}}var Ue=function(nt,ut,rt){for(var dt=function(Tn,br){return br?new $e(_.line,K(Tn,1),"before"):new $e(_.line,Tn,"after")};nt>=0&&nt<T.length;nt+=ut){var Lt=T[nt],Tt=ut>0==(Lt.level!=1),qt=Tt?rt.begin:K(rt.end,-1);if(Lt.from<=qt&&qt<Lt.to||(qt=Tt?Lt.from:K(Lt.to,-1),rt.begin<=qt&&qt<rt.end))return dt(qt,Tt)}},Ge=Ue(U+x,x,ve);if(Ge)return Ge;var Je=x>0?ve.end:K(ve.begin,-1);return Je!=null&&!(x>0&&Je==d.text.length)&&(Ge=Ue(x>0?0:T.length-1,x,re(Je)),Ge)?Ge:null}var hh={selectAll:wS,singleSelection:function(c){return c.setSelection(c.getCursor("anchor"),c.getCursor("head"),qe)},killLine:function(c){return Hu(c,function(d){if(d.empty()){var _=Ze(c.doc,d.head.line).text.length;return d.head.ch==_&&d.head.line<c.lastLine()?{from:d.head,to:$e(d.head.line+1,0)}:{from:d.head,to:$e(d.head.line,_)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(c){return Hu(c,function(d){return{from:$e(d.from().line,0),to:ct(c.doc,$e(d.to().line+1,0))}})},delLineLeft:function(c){return Hu(c,function(d){return{from:$e(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(c){return Hu(c,function(d){var _=c.charCoords(d.head,"div").top+5,x=c.coordsChar({left:0,top:_},"div");return{from:x,to:d.from()}})},delWrappedLineRight:function(c){return Hu(c,function(d){var _=c.charCoords(d.head,"div").top+5,x=c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:_},"div");return{from:d.from(),to:x}})},undo:function(c){return c.undo()},redo:function(c){return c.redo()},undoSelection:function(c){return c.undoSelection()},redoSelection:function(c){return c.redoSelection()},goDocStart:function(c){return c.extendSelection($e(c.firstLine(),0))},goDocEnd:function(c){return c.extendSelection($e(c.lastLine()))},goLineStart:function(c){return c.extendSelectionsBy(function(d){return US(c,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(c){return c.extendSelectionsBy(function(d){return BS(c,d.head)},{origin:"+move",bias:1})},goLineEnd:function(c){return c.extendSelectionsBy(function(d){return fP(c,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(c){return c.extendSelectionsBy(function(d){var _=c.cursorCoords(d.head,"div").top+5;return c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:_},"div")},We)},goLineLeft:function(c){return c.extendSelectionsBy(function(d){var _=c.cursorCoords(d.head,"div").top+5;return c.coordsChar({left:0,top:_},"div")},We)},goLineLeftSmart:function(c){return c.extendSelectionsBy(function(d){var _=c.cursorCoords(d.head,"div").top+5,x=c.coordsChar({left:0,top:_},"div");return x.ch<c.getLine(x.line).search(/\S/)?BS(c,d.head):x},We)},goLineUp:function(c){return c.moveV(-1,"line")},goLineDown:function(c){return c.moveV(1,"line")},goPageUp:function(c){return c.moveV(-1,"page")},goPageDown:function(c){return c.moveV(1,"page")},goCharLeft:function(c){return c.moveH(-1,"char")},goCharRight:function(c){return c.moveH(1,"char")},goColumnLeft:function(c){return c.moveH(-1,"column")},goColumnRight:function(c){return c.moveH(1,"column")},goWordLeft:function(c){return c.moveH(-1,"word")},goGroupRight:function(c){return c.moveH(1,"group")},goGroupLeft:function(c){return c.moveH(-1,"group")},goWordRight:function(c){return c.moveH(1,"word")},delCharBefore:function(c){return c.deleteH(-1,"codepoint")},delCharAfter:function(c){return c.deleteH(1,"char")},delWordBefore:function(c){return c.deleteH(-1,"word")},delWordAfter:function(c){return c.deleteH(1,"word")},delGroupBefore:function(c){return c.deleteH(-1,"group")},delGroupAfter:function(c){return c.deleteH(1,"group")},indentAuto:function(c){return c.indentSelection("smart")},indentMore:function(c){return c.indentSelection("add")},indentLess:function(c){return c.indentSelection("subtract")},insertTab:function(c){return c.replaceSelection("	")},insertSoftTab:function(c){for(var d=[],_=c.listSelections(),x=c.options.tabSize,T=0;T<_.length;T++){var U=_[T].from(),j=we(c.getLine(U.line),U.ch,x);d.push(Ye(x-j%x))}c.replaceSelections(d)},defaultTab:function(c){c.somethingSelected()?c.indentSelection("add"):c.execCommand("insertTab")},transposeChars:function(c){return bi(c,function(){for(var d=c.listSelections(),_=[],x=0;x<d.length;x++)if(!!d[x].empty()){var T=d[x].head,U=Ze(c.doc,T.line).text;if(U){if(T.ch==U.length&&(T=new $e(T.line,T.ch-1)),T.ch>0)T=new $e(T.line,T.ch+1),c.replaceRange(U.charAt(T.ch-1)+U.charAt(T.ch-2),$e(T.line,T.ch-2),T,"+transpose");else if(T.line>c.doc.first){var j=Ze(c.doc,T.line-1).text;j&&(T=new $e(T.line,1),c.replaceRange(U.charAt(0)+c.doc.lineSeparator()+j.charAt(j.length-1),$e(T.line-1,j.length-1),T,"+transpose"))}}_.push(new fn(T,T))}c.setSelections(_)})},newlineAndIndent:function(c){return bi(c,function(){for(var d=c.listSelections(),_=d.length-1;_>=0;_--)c.replaceRange(c.doc.lineSeparator(),d[_].anchor,d[_].head,"+input");d=c.listSelections();for(var x=0;x<d.length;x++)c.indentLine(d[x].from().line,null,!0);ku(c)})},openLine:function(c){return c.replaceSelection(`
`,"start")},toggleOverwrite:function(c){return c.toggleOverwrite()}};function US(c,d){var _=Ze(c.doc,d),x=Bi(_);return x!=_&&(d=Wt(x)),ay(!0,c,x,d,1)}function fP(c,d){var _=Ze(c.doc,d),x=Av(_);return x!=_&&(d=Wt(x)),ay(!0,c,_,d,-1)}function BS(c,d){var _=US(c,d.line),x=Ze(c.doc,_.line),T=G(x,c.doc.direction);if(!T||T[0].level==0){var U=Math.max(_.ch,x.text.search(/\S/)),j=d.line==_.line&&d.ch<=U&&d.ch;return $e(_.line,j?0:U,_.sticky)}return _}function Qp(c,d,_){if(typeof d=="string"&&(d=hh[d],!d))return!1;c.display.input.ensurePolled();var x=c.display.shift,T=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),_&&(c.display.shift=!1),T=d(c)!=Ve}finally{c.display.shift=x,c.state.suppressEdits=!1}return T}function hP(c,d,_){for(var x=0;x<c.state.keyMaps.length;x++){var T=zu(d,c.state.keyMaps[x],_,c);if(T)return T}return c.options.extraKeys&&zu(d,c.options.extraKeys,_,c)||zu(d,c.options.keyMap,_,c)}var dP=new Ie;function dh(c,d,_,x){var T=c.state.keySeq;if(T){if(OS(d))return"handled";if(/\'$/.test(d)?c.state.keySeq=null:dP.set(50,function(){c.state.keySeq==T&&(c.state.keySeq=null,c.display.input.reset())}),zS(c,T+" "+d,_,x))return!0}return zS(c,d,_,x)}function zS(c,d,_,x){var T=hP(c,d,x);return T=="multi"&&(c.state.keySeq=d),T=="handled"&&tr(c,"keyHandled",c,d,_),(T=="handled"||T=="multi")&&(Oe(_),Vv(c)),!!T}function HS(c,d){var _=FS(d,!0);return _?d.shiftKey&&!c.state.keySeq?dh(c,"Shift-"+_,d,function(x){return Qp(c,x,!0)})||dh(c,_,d,function(x){if(typeof x=="string"?/^go[A-Z]/.test(x):x.motion)return Qp(c,x)}):dh(c,_,d,function(x){return Qp(c,x)}):!1}function pP(c,d,_){return dh(c,"'"+_+"'",d,function(x){return Qp(c,x,!0)})}var ly=null;function GS(c){var d=this;if(!(c.target&&c.target!=d.display.input.getField())&&(d.curOp.focus=me(),!ue(d,c))){m&&v<11&&c.keyCode==27&&(c.returnValue=!1);var _=c.keyCode;d.display.shift=_==16||c.shiftKey;var x=HS(d,c);R&&(ly=x?_:null,!x&&_==88&&!Ne&&(L?c.metaKey:c.ctrlKey)&&d.replaceSelection("",null,"cut")),o&&!L&&!x&&_==46&&c.shiftKey&&!c.ctrlKey&&document.execCommand&&document.execCommand("cut"),_==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&mP(d)}}function mP(c){var d=c.display.lineDiv;Se(d,"CodeMirror-crosshair");function _(x){(x.keyCode==18||!x.altKey)&&(ce(d,"CodeMirror-crosshair"),ne(document,"keyup",_),ne(document,"mouseover",_))}Q(document,"keyup",_),Q(document,"mouseover",_)}function VS(c){c.keyCode==16&&(this.doc.sel.shift=!1),ue(this,c)}function WS(c){var d=this;if(!(c.target&&c.target!=d.display.input.getField())&&!(fo(d.display,c)||ue(d,c)||c.ctrlKey&&!c.altKey||L&&c.metaKey)){var _=c.keyCode,x=c.charCode;if(R&&_==ly){ly=null,Oe(c);return}if(!(R&&(!c.which||c.which<10)&&HS(d,c))){var T=String.fromCharCode(x==null?_:x);T!="\b"&&(pP(d,c,T)||d.display.input.onKeyPress(c))}}}var gP=400,uy=function(c,d,_){this.time=c,this.pos=d,this.button=_};uy.prototype.compare=function(c,d,_){return this.time+gP>c&&ie(d,this.pos)==0&&_==this.button};var ph,mh;function vP(c,d){var _=+new Date;return mh&&mh.compare(_,c,d)?(ph=mh=null,"triple"):ph&&ph.compare(_,c,d)?(mh=new uy(_,c,d),ph=null,"double"):(ph=new uy(_,c,d),mh=null,"single")}function $S(c){var d=this,_=d.display;if(!(ue(d,c)||_.activeTouch&&_.input.supportsTouch())){if(_.input.ensurePolled(),_.shift=c.shiftKey,fo(_,c)){w||(_.scroller.draggable=!1,setTimeout(function(){return _.scroller.draggable=!0},100));return}if(!cy(d,c)){var x=ul(d,c),T=vt(c),U=x?vP(x,T):"single";window.focus(),T==1&&d.state.selectingText&&d.state.selectingText(c),!(x&&yP(d,T,x,U,c))&&(T==1?x?_P(d,x,U,c):pt(c)==_.scroller&&Oe(c):T==2?(x&&$p(d.doc,x),setTimeout(function(){return _.input.focus()},20)):T==3&&(J?d.display.input.onContextMenu(c):Wv(d)))}}}function yP(c,d,_,x,T){var U="Click";return x=="double"?U="Double"+U:x=="triple"&&(U="Triple"+U),U=(d==1?"Left":d==2?"Middle":"Right")+U,dh(c,NS(U,T),T,function(j){if(typeof j=="string"&&(j=hh[j]),!j)return!1;var K=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),K=j(c,_)!=Ve}finally{c.state.suppressEdits=!1}return K})}function xP(c,d,_){var x=c.getOption("configureMouse"),T=x?x(c,d,_):{};if(T.unit==null){var U=z?_.shiftKey&&_.metaKey:_.altKey;T.unit=U?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(T.extend==null||c.doc.extend)&&(T.extend=c.doc.extend||_.shiftKey),T.addNew==null&&(T.addNew=L?_.metaKey:_.ctrlKey),T.moveOnDrag==null&&(T.moveOnDrag=!(L?_.altKey:_.ctrlKey)),T}function _P(c,d,_,x){m?setTimeout(de(jb,c),0):c.curOp.focus=me();var T=xP(c,_,x),U=c.doc.sel,j;c.options.dragDrop&&wn&&!c.isReadOnly()&&_=="single"&&(j=U.contains(d))>-1&&(ie((j=U.ranges[j]).from(),d)<0||d.xRel>0)&&(ie(j.to(),d)>0||d.xRel<0)?wP(c,x,d,T):bP(c,x,d,T)}function wP(c,d,_,x){var T=c.display,U=!1,j=_r(c,function(re){w&&(T.scroller.draggable=!1),c.state.draggingText=!1,c.state.delayingBlurEvent&&(c.hasFocus()?c.state.delayingBlurEvent=!1:Wv(c)),ne(T.wrapper.ownerDocument,"mouseup",j),ne(T.wrapper.ownerDocument,"mousemove",K),ne(T.scroller,"dragstart",te),ne(T.scroller,"drop",j),U||(Oe(re),x.addNew||$p(c.doc,_,null,null,x.extend),w&&!O||m&&v==9?setTimeout(function(){T.wrapper.ownerDocument.body.focus({preventScroll:!0}),T.input.focus()},20):T.input.focus())}),K=function(re){U=U||Math.abs(d.clientX-re.clientX)+Math.abs(d.clientY-re.clientY)>=10},te=function(){return U=!0};w&&(T.scroller.draggable=!0),c.state.draggingText=j,j.copy=!x.moveOnDrag,Q(T.wrapper.ownerDocument,"mouseup",j),Q(T.wrapper.ownerDocument,"mousemove",K),Q(T.scroller,"dragstart",te),Q(T.scroller,"drop",j),c.state.delayingBlurEvent=!0,setTimeout(function(){return T.input.focus()},20),T.scroller.dragDrop&&T.scroller.dragDrop()}function jS(c,d,_){if(_=="char")return new fn(d,d);if(_=="word")return c.findWordAt(d);if(_=="line")return new fn($e(d.line,0),ct(c.doc,$e(d.line+1,0)));var x=_(c,d);return new fn(x.from,x.to)}function bP(c,d,_,x){m&&Wv(c);var T=c.display,U=c.doc;Oe(d);var j,K,te=U.sel,re=te.ranges;if(x.addNew&&!x.extend?(K=U.sel.contains(_),K>-1?j=re[K]:j=new fn(_,_)):(j=U.sel.primary(),K=U.sel.primIndex),x.unit=="rectangle")x.addNew||(j=new fn(_,_)),_=ul(c,d,!0,!0),K=-1;else{var ve=jS(c,_,x.unit);x.extend?j=ry(j,ve.anchor,ve.head,x.extend):j=ve}x.addNew?K==-1?(K=re.length,Br(U,_s(c,re.concat([j]),K),{scroll:!1,origin:"*mouse"})):re.length>1&&re[K].empty()&&x.unit=="char"&&!x.extend?(Br(U,_s(c,re.slice(0,K).concat(re.slice(K+1)),0),{scroll:!1,origin:"*mouse"}),te=U.sel):iy(U,K,j,W):(K=0,Br(U,new zi([j],0),W),te=U.sel);var _e=_;function Ae(rt){if(ie(_e,rt)!=0)if(_e=rt,x.unit=="rectangle"){for(var dt=[],Lt=c.options.tabSize,Tt=we(Ze(U,_.line).text,_.ch,Lt),qt=we(Ze(U,rt.line).text,rt.ch,Lt),Tn=Math.min(Tt,qt),br=Math.max(Tt,qt),Fn=Math.min(_.line,rt.line),Si=Math.min(c.lastLine(),Math.max(_.line,rt.line));Fn<=Si;Fn++){var ai=Ze(U,Fn).text,nr=De(ai,Tn,Lt);Tn==br?dt.push(new fn($e(Fn,nr),$e(Fn,nr))):ai.length>nr&&dt.push(new fn($e(Fn,nr),$e(Fn,De(ai,br,Lt))))}dt.length||dt.push(new fn(_,_)),Br(U,_s(c,te.ranges.slice(0,K).concat(dt),K),{origin:"*mouse",scroll:!1}),c.scrollIntoView(rt)}else{var li=j,Rr=jS(c,rt,x.unit),dr=li.anchor,rr;ie(Rr.anchor,dr)>0?(rr=Rr.head,dr=kt(li.from(),Rr.anchor)):(rr=Rr.anchor,dr=Ke(li.to(),Rr.head));var $n=te.ranges.slice(0);$n[K]=SP(c,new fn(ct(U,dr),rr)),Br(U,_s(c,$n,K),W)}}var Ee=T.wrapper.getBoundingClientRect(),Ue=0;function Ge(rt){var dt=++Ue,Lt=ul(c,rt,!0,x.unit=="rectangle");if(!!Lt)if(ie(Lt,_e)!=0){c.curOp.focus=me(),Ae(Lt);var Tt=Bp(T,U);(Lt.line>=Tt.to||Lt.line<Tt.from)&&setTimeout(_r(c,function(){Ue==dt&&Ge(rt)}),150)}else{var qt=rt.clientY<Ee.top?-20:rt.clientY>Ee.bottom?20:0;qt&&setTimeout(_r(c,function(){Ue==dt&&(T.scroller.scrollTop+=qt,Ge(rt))}),50)}}function Je(rt){c.state.selectingText=!1,Ue=1/0,rt&&(Oe(rt),T.input.focus()),ne(T.wrapper.ownerDocument,"mousemove",nt),ne(T.wrapper.ownerDocument,"mouseup",ut),U.history.lastSelOrigin=null}var nt=_r(c,function(rt){rt.buttons===0||!vt(rt)?Je(rt):Ge(rt)}),ut=_r(c,Je);c.state.selectingText=ut,Q(T.wrapper.ownerDocument,"mousemove",nt),Q(T.wrapper.ownerDocument,"mouseup",ut)}function SP(c,d){var _=d.anchor,x=d.head,T=Ze(c.doc,_.line);if(ie(_,x)==0&&_.sticky==x.sticky)return d;var U=G(T);if(!U)return d;var j=I(U,_.ch,_.sticky),K=U[j];if(K.from!=_.ch&&K.to!=_.ch)return d;var te=j+(K.from==_.ch==(K.level!=1)?0:1);if(te==0||te==U.length)return d;var re;if(x.line!=_.line)re=(x.line-_.line)*(c.doc.direction=="ltr"?1:-1)>0;else{var ve=I(U,x.ch,x.sticky),_e=ve-j||(x.ch-_.ch)*(K.level==1?-1:1);ve==te-1||ve==te?re=_e<0:re=_e>0}var Ae=U[te+(re?-1:0)],Ee=re==(Ae.level==1),Ue=Ee?Ae.from:Ae.to,Ge=Ee?"after":"before";return _.ch==Ue&&_.sticky==Ge?d:new fn(new $e(_.line,Ue,Ge),x)}function qS(c,d,_,x){var T,U;if(d.touches)T=d.touches[0].clientX,U=d.touches[0].clientY;else try{T=d.clientX,U=d.clientY}catch{return!1}if(T>=Math.floor(c.display.gutters.getBoundingClientRect().right))return!1;x&&Oe(d);var j=c.display,K=j.lineDiv.getBoundingClientRect();if(U>K.bottom||!Ce(c,_))return lt(d);U-=K.top-j.viewOffset;for(var te=0;te<c.display.gutterSpecs.length;++te){var re=j.gutters.childNodes[te];if(re&&re.getBoundingClientRect().right>=T){var ve=Ar(c.doc,U),_e=c.display.gutterSpecs[te];return ae(c,_,c,ve,_e.className,d),lt(d)}}}function cy(c,d){return qS(c,d,"gutterClick",!0)}function XS(c,d){fo(c.display,d)||MP(c,d)||ue(c,d,"contextmenu")||J||c.display.input.onContextMenu(d)}function MP(c,d){return Ce(c,"gutterContextMenu")?qS(c,d,"gutterContextMenu",!1):!1}function YS(c){c.display.wrapper.className=c.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+c.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Yf(c)}var Gu={toString:function(){return"CodeMirror.Init"}},KS={},Zp={};function TP(c){var d=c.optionHandlers;function _(x,T,U,j){c.defaults[x]=T,U&&(d[x]=j?function(K,te,re){re!=Gu&&U(K,te,re)}:U)}c.defineOption=_,c.Init=Gu,_("value","",function(x,T){return x.setValue(T)},!0),_("mode",null,function(x,T){x.doc.modeOption=T,ey(x)},!0),_("indentUnit",2,ey,!0),_("indentWithTabs",!1),_("smartIndent",!0),_("tabSize",4,function(x){rh(x),Yf(x),si(x)},!0),_("lineSeparator",null,function(x,T){if(x.doc.lineSep=T,!!T){var U=[],j=x.doc.first;x.doc.iter(function(te){for(var re=0;;){var ve=te.text.indexOf(T,re);if(ve==-1)break;re=ve+T.length,U.push($e(j,ve))}j++});for(var K=U.length-1;K>=0;K--)Uu(x.doc,T,U[K],$e(U[K].line,U[K].ch+T.length))}}),_("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(x,T,U){x.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),U!=Gu&&x.refresh()}),_("specialCharPlaceholder",bt,function(x){return x.refresh()},!0),_("electricChars",!0),_("inputStyle",F?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),_("spellcheck",!1,function(x,T){return x.getInputField().spellcheck=T},!0),_("autocorrect",!1,function(x,T){return x.getInputField().autocorrect=T},!0),_("autocapitalize",!1,function(x,T){return x.getInputField().autocapitalize=T},!0),_("rtlMoveVisually",!H),_("wholeLineUpdateBefore",!0),_("theme","default",function(x){YS(x),nh(x)},!0),_("keyMap","default",function(x,T,U){var j=Kp(T),K=U!=Gu&&Kp(U);K&&K.detach&&K.detach(x,j),j.attach&&j.attach(x,K||null)}),_("extraKeys",null),_("configureMouse",null),_("lineWrapping",!1,AP,!0),_("gutters",[],function(x,T){x.display.gutterSpecs=Zv(T,x.options.lineNumbers),nh(x)},!0),_("fixedGutter",!0,function(x,T){x.display.gutters.style.left=T?zv(x.display)+"px":"0",x.refresh()},!0),_("coverGutterNextToScrollbar",!1,function(x){return Du(x)},!0),_("scrollbarStyle","native",function(x){Zb(x),Du(x),x.display.scrollbars.setScrollTop(x.doc.scrollTop),x.display.scrollbars.setScrollLeft(x.doc.scrollLeft)},!0),_("lineNumbers",!1,function(x,T){x.display.gutterSpecs=Zv(x.options.gutters,T),nh(x)},!0),_("firstLineNumber",1,nh,!0),_("lineNumberFormatter",function(x){return x},nh,!0),_("showCursorWhenSelecting",!1,Kf,!0),_("resetSelectionOnContextMenu",!0),_("lineWiseCopyCut",!0),_("pasteLinesPerSelection",!0),_("selectionsMayTouch",!1),_("readOnly",!1,function(x,T){T=="nocursor"&&(Pu(x),x.display.input.blur()),x.display.input.readOnlyChanged(T)}),_("screenReaderLabel",null,function(x,T){T=T===""?null:T,x.display.input.screenReaderLabelChanged(T)}),_("disableInput",!1,function(x,T){T||x.display.input.reset()},!0),_("dragDrop",!0,EP),_("allowDropFileTypes",null),_("cursorBlinkRate",530),_("cursorScrollMargin",0),_("cursorHeight",1,Kf,!0),_("singleCursorHeightPerLine",!0,Kf,!0),_("workTime",100),_("workDelay",100),_("flattenSpans",!0,rh,!0),_("addModeClass",!1,rh,!0),_("pollInterval",100),_("undoDepth",200,function(x,T){return x.doc.history.undoDepth=T}),_("historyEventDelay",1250),_("viewportMargin",10,function(x){return x.refresh()},!0),_("maxHighlightLength",1e4,rh,!0),_("moveInputWithCursor",!0,function(x,T){T||x.display.input.resetPosition()}),_("tabindex",null,function(x,T){return x.display.input.getField().tabIndex=T||""}),_("autofocus",null),_("direction","ltr",function(x,T){return x.doc.setDirection(T)},!0),_("phrases",null)}function EP(c,d,_){var x=_&&_!=Gu;if(!d!=!x){var T=c.display.dragFunctions,U=d?Q:ne;U(c.display.scroller,"dragstart",T.start),U(c.display.scroller,"dragenter",T.enter),U(c.display.scroller,"dragover",T.over),U(c.display.scroller,"dragleave",T.leave),U(c.display.scroller,"drop",T.drop)}}function AP(c){c.options.lineWrapping?(Se(c.display.wrapper,"CodeMirror-wrap"),c.display.sizer.style.minWidth="",c.display.sizerWidth=null):(ce(c.display.wrapper,"CodeMirror-wrap"),Cu(c)),Hv(c),si(c),Yf(c),setTimeout(function(){return Du(c)},100)}function In(c,d){var _=this;if(!(this instanceof In))return new In(c,d);this.options=d=d?Re(d):{},Re(KS,d,!1);var x=d.value;typeof x=="string"?x=new oi(x,d.mode,null,d.lineSeparator,d.direction):d.mode&&(x.modeOption=d.mode),this.doc=x;var T=new In.inputStyles[d.inputStyle](this),U=this.display=new zI(c,x,T,d);U.wrapper.CodeMirror=this,YS(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Zb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ie,keySeq:null,specialChars:null},d.autofocus&&!F&&U.input.focus(),m&&v<11&&setTimeout(function(){return _.display.input.reset(!0)},20),CP(this),sP(),dl(this),this.curOp.forceUpdate=!0,lS(this,x),d.autofocus&&!F||this.hasFocus()?setTimeout(function(){_.hasFocus()&&!_.state.focused&&$v(_)},20):Pu(this);for(var j in Zp)Zp.hasOwnProperty(j)&&Zp[j](this,d[j],Gu);tS(this),d.finishInit&&d.finishInit(this);for(var K=0;K<fy.length;++K)fy[K](this);pl(this),w&&d.lineWrapping&&getComputedStyle(U.lineDiv).textRendering=="optimizelegibility"&&(U.lineDiv.style.textRendering="auto")}In.defaults=KS,In.optionHandlers=Zp;function CP(c){var d=c.display;Q(d.scroller,"mousedown",_r(c,$S)),m&&v<11?Q(d.scroller,"dblclick",_r(c,function(te){if(!ue(c,te)){var re=ul(c,te);if(!(!re||cy(c,te)||fo(c.display,te))){Oe(te);var ve=c.findWordAt(re);$p(c.doc,ve.anchor,ve.head)}}})):Q(d.scroller,"dblclick",function(te){return ue(c,te)||Oe(te)}),Q(d.scroller,"contextmenu",function(te){return XS(c,te)}),Q(d.input.getField(),"contextmenu",function(te){d.scroller.contains(te.target)||XS(c,te)});var _,x={end:0};function T(){d.activeTouch&&(_=setTimeout(function(){return d.activeTouch=null},1e3),x=d.activeTouch,x.end=+new Date)}function U(te){if(te.touches.length!=1)return!1;var re=te.touches[0];return re.radiusX<=1&&re.radiusY<=1}function j(te,re){if(re.left==null)return!0;var ve=re.left-te.left,_e=re.top-te.top;return ve*ve+_e*_e>20*20}Q(d.scroller,"touchstart",function(te){if(!ue(c,te)&&!U(te)&&!cy(c,te)){d.input.ensurePolled(),clearTimeout(_);var re=+new Date;d.activeTouch={start:re,moved:!1,prev:re-x.end<=300?x:null},te.touches.length==1&&(d.activeTouch.left=te.touches[0].pageX,d.activeTouch.top=te.touches[0].pageY)}}),Q(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),Q(d.scroller,"touchend",function(te){var re=d.activeTouch;if(re&&!fo(d,te)&&re.left!=null&&!re.moved&&new Date-re.start<300){var ve=c.coordsChar(d.activeTouch,"page"),_e;!re.prev||j(re,re.prev)?_e=new fn(ve,ve):!re.prev.prev||j(re,re.prev.prev)?_e=c.findWordAt(ve):_e=new fn($e(ve.line,0),ct(c.doc,$e(ve.line+1,0))),c.setSelection(_e.anchor,_e.head),c.focus(),Oe(te)}T()}),Q(d.scroller,"touchcancel",T),Q(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Zf(c,d.scroller.scrollTop),fl(c,d.scroller.scrollLeft,!0),ae(c,"scroll",c))}),Q(d.scroller,"mousewheel",function(te){return iS(c,te)}),Q(d.scroller,"DOMMouseScroll",function(te){return iS(c,te)}),Q(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(te){ue(c,te)||Et(te)},over:function(te){ue(c,te)||(iP(c,te),Et(te))},start:function(te){return rP(c,te)},drop:_r(c,nP),leave:function(te){ue(c,te)||PS(c)}};var K=d.input.getField();Q(K,"keyup",function(te){return VS.call(c,te)}),Q(K,"keydown",_r(c,GS)),Q(K,"keypress",_r(c,WS)),Q(K,"focus",function(te){return $v(c,te)}),Q(K,"blur",function(te){return Pu(c,te)})}var fy=[];In.defineInitHook=function(c){return fy.push(c)};function gh(c,d,_,x){var T=c.doc,U;_==null&&(_="add"),_=="smart"&&(T.mode.indent?U=Wo(c,d).state:_="prev");var j=c.options.tabSize,K=Ze(T,d),te=we(K.text,null,j);K.stateAfter&&(K.stateAfter=null);var re=K.text.match(/^\s*/)[0],ve;if(!x&&!/\S/.test(K.text))ve=0,_="not";else if(_=="smart"&&(ve=T.mode.indent(U,K.text.slice(re.length),K.text),ve==Ve||ve>150)){if(!x)return;_="prev"}_=="prev"?d>T.first?ve=we(Ze(T,d-1).text,null,j):ve=0:_=="add"?ve=te+c.options.indentUnit:_=="subtract"?ve=te-c.options.indentUnit:typeof _=="number"&&(ve=te+_),ve=Math.max(0,ve);var _e="",Ae=0;if(c.options.indentWithTabs)for(var Ee=Math.floor(ve/j);Ee;--Ee)Ae+=j,_e+="	";if(Ae<ve&&(_e+=Ye(ve-Ae)),_e!=re)return Uu(T,_e,$e(d,0),$e(d,re.length),"+input"),K.stateAfter=null,!0;for(var Ue=0;Ue<T.sel.ranges.length;Ue++){var Ge=T.sel.ranges[Ue];if(Ge.head.line==d&&Ge.head.ch<re.length){var Je=$e(d,re.length);iy(T,Ue,new fn(Je,Je));break}}}var ws=null;function Jp(c){ws=c}function hy(c,d,_,x,T){var U=c.doc;c.display.shift=!1,x||(x=U.sel);var j=+new Date-200,K=T=="paste"||c.state.pasteIncoming>j,te=ge(d),re=null;if(K&&x.ranges.length>1)if(ws&&ws.text.join(`
`)==d){if(x.ranges.length%ws.text.length==0){re=[];for(var ve=0;ve<ws.text.length;ve++)re.push(U.splitLines(ws.text[ve]))}}else te.length==x.ranges.length&&c.options.pasteLinesPerSelection&&(re=oe(te,function(nt){return[nt]}));for(var _e=c.curOp.updateInput,Ae=x.ranges.length-1;Ae>=0;Ae--){var Ee=x.ranges[Ae],Ue=Ee.from(),Ge=Ee.to();Ee.empty()&&(_&&_>0?Ue=$e(Ue.line,Ue.ch-_):c.state.overwrite&&!K?Ge=$e(Ge.line,Math.min(Ze(U,Ge.line).text.length,Ge.ch+Fe(te).length)):K&&ws&&ws.lineWise&&ws.text.join(`
`)==te.join(`
`)&&(Ue=Ge=$e(Ue.line,0)));var Je={from:Ue,to:Ge,text:re?re[Ae%re.length]:te,origin:T||(K?"paste":c.state.cutIncoming>j?"cut":"+input")};Fu(c.doc,Je),tr(c,"inputRead",c,Je)}d&&!K&&ZS(c,d),ku(c),c.curOp.updateInput<2&&(c.curOp.updateInput=_e),c.curOp.typing=!0,c.state.pasteIncoming=c.state.cutIncoming=-1}function QS(c,d){var _=c.clipboardData&&c.clipboardData.getData("Text");if(_)return c.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&bi(d,function(){return hy(d,_,0,null,"paste")}),!0}function ZS(c,d){if(!(!c.options.electricChars||!c.options.smartIndent))for(var _=c.doc.sel,x=_.ranges.length-1;x>=0;x--){var T=_.ranges[x];if(!(T.head.ch>100||x&&_.ranges[x-1].head.line==T.head.line)){var U=c.getModeAt(T.head),j=!1;if(U.electricChars){for(var K=0;K<U.electricChars.length;K++)if(d.indexOf(U.electricChars.charAt(K))>-1){j=gh(c,T.head.line,"smart");break}}else U.electricInput&&U.electricInput.test(Ze(c.doc,T.head.line).text.slice(0,T.head.ch))&&(j=gh(c,T.head.line,"smart"));j&&tr(c,"electricInput",c,T.head.line)}}}function JS(c){for(var d=[],_=[],x=0;x<c.doc.sel.ranges.length;x++){var T=c.doc.sel.ranges[x].head.line,U={anchor:$e(T,0),head:$e(T+1,0)};_.push(U),d.push(c.getRange(U.anchor,U.head))}return{text:d,ranges:_}}function eM(c,d,_,x){c.setAttribute("autocorrect",_?"":"off"),c.setAttribute("autocapitalize",x?"":"off"),c.setAttribute("spellcheck",!!d)}function tM(){var c=b("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=b("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return w?c.style.width="1000px":c.setAttribute("wrap","off"),D&&(c.style.border="1px solid black"),eM(c),d}function RP(c){var d=c.optionHandlers,_=c.helpers={};c.prototype={constructor:c,focus:function(){window.focus(),this.display.input.focus()},setOption:function(x,T){var U=this.options,j=U[x];U[x]==T&&x!="mode"||(U[x]=T,d.hasOwnProperty(x)&&_r(this,d[x])(this,T,j),ae(this,"optionChange",this,x))},getOption:function(x){return this.options[x]},getDoc:function(){return this.doc},addKeyMap:function(x,T){this.state.keyMaps[T?"push":"unshift"](Kp(x))},removeKeyMap:function(x){for(var T=this.state.keyMaps,U=0;U<T.length;++U)if(T[U]==x||T[U].name==x)return T.splice(U,1),!0},addOverlay:Kr(function(x,T){var U=x.token?x:c.getMode(this.options,x);if(U.startState)throw new Error("Overlays may not be stateful.");St(this.state.overlays,{mode:U,modeSpec:x,opaque:T&&T.opaque,priority:T&&T.priority||0},function(j){return j.priority}),this.state.modeGen++,si(this)}),removeOverlay:Kr(function(x){for(var T=this.state.overlays,U=0;U<T.length;++U){var j=T[U].modeSpec;if(j==x||typeof x=="string"&&j.name==x){T.splice(U,1),this.state.modeGen++,si(this);return}}}),indentLine:Kr(function(x,T,U){typeof T!="string"&&typeof T!="number"&&(T==null?T=this.options.smartIndent?"smart":"prev":T=T?"add":"subtract"),Fi(this.doc,x)&&gh(this,x,T,U)}),indentSelection:Kr(function(x){for(var T=this.doc.sel.ranges,U=-1,j=0;j<T.length;j++){var K=T[j];if(K.empty())K.head.line>U&&(gh(this,K.head.line,x,!0),U=K.head.line,j==this.doc.sel.primIndex&&ku(this));else{var te=K.from(),re=K.to(),ve=Math.max(U,te.line);U=Math.min(this.lastLine(),re.line-(re.ch?0:1))+1;for(var _e=ve;_e<U;++_e)gh(this,_e,x);var Ae=this.doc.sel.ranges;te.ch==0&&T.length==Ae.length&&Ae[j].from().ch>0&&iy(this.doc,j,new fn(te,Ae[j].to()),qe)}}}),getTokenAt:function(x,T){return Ap(this,x,T)},getLineTokens:function(x,T){return Ap(this,$e(x),T,!0)},getTokenTypeAt:function(x){x=ct(this.doc,x);var T=Mp(this,Ze(this.doc,x.line)),U=0,j=(T.length-1)/2,K=x.ch,te;if(K==0)te=T[2];else for(;;){var re=U+j>>1;if((re?T[re*2-1]:0)>=K)j=re;else if(T[re*2+1]<K)U=re+1;else{te=T[re*2+2];break}}var ve=te?te.indexOf("overlay "):-1;return ve<0?te:ve==0?null:te.slice(0,ve-1)},getModeAt:function(x){var T=this.doc.mode;return T.innerMode?c.innerMode(T,this.getTokenAt(x).state).mode:T},getHelper:function(x,T){return this.getHelpers(x,T)[0]},getHelpers:function(x,T){var U=[];if(!_.hasOwnProperty(T))return U;var j=_[T],K=this.getModeAt(x);if(typeof K[T]=="string")j[K[T]]&&U.push(j[K[T]]);else if(K[T])for(var te=0;te<K[T].length;te++){var re=j[K[T][te]];re&&U.push(re)}else K.helperType&&j[K.helperType]?U.push(j[K.helperType]):j[K.name]&&U.push(j[K.name]);for(var ve=0;ve<j._global.length;ve++){var _e=j._global[ve];_e.pred(K,this)&&Me(U,_e.val)==-1&&U.push(_e.val)}return U},getStateAfter:function(x,T){var U=this.doc;return x=Qt(U,x==null?U.first+U.size-1:x),Wo(this,x+1,T).state},cursorCoords:function(x,T){var U,j=this.doc.sel.primary();return x==null?U=j.head:typeof x=="object"?U=ct(this.doc,x):U=x?j.from():j.to(),xs(this,U,T||"page")},charCoords:function(x,T){return Op(this,ct(this.doc,x),T||"page")},coordsChar:function(x,T){return x=Bb(this,x,T||"page"),Fv(this,x.left,x.top)},lineAtHeight:function(x,T){return x=Bb(this,{top:x,left:0},T||"page").top,Ar(this.doc,x+this.display.viewOffset)},heightAtLine:function(x,T,U){var j=!1,K;if(typeof x=="number"){var te=this.doc.first+this.doc.size-1;x<this.doc.first?x=this.doc.first:x>te&&(x=te,j=!0),K=Ze(this.doc,x)}else K=x;return Dp(this,K,{top:0,left:0},T||"page",U||j).top+(j?this.doc.height-Cr(K):0)},defaultTextHeight:function(){return Lu(this.display)},defaultCharWidth:function(){return Iu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(x,T,U,j,K){var te=this.display;x=xs(this,ct(this.doc,x));var re=x.bottom,ve=x.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),te.sizer.appendChild(T),j=="over")re=x.top;else if(j=="above"||j=="near"){var _e=Math.max(te.wrapper.clientHeight,this.doc.height),Ae=Math.max(te.sizer.clientWidth,te.lineSpace.clientWidth);(j=="above"||x.bottom+T.offsetHeight>_e)&&x.top>T.offsetHeight?re=x.top-T.offsetHeight:x.bottom+T.offsetHeight<=_e&&(re=x.bottom),ve+T.offsetWidth>Ae&&(ve=Ae-T.offsetWidth)}T.style.top=re+"px",T.style.left=T.style.right="",K=="right"?(ve=te.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(K=="left"?ve=0:K=="middle"&&(ve=(te.sizer.clientWidth-T.offsetWidth)/2),T.style.left=ve+"px"),U&&EI(this,{left:ve,top:re,right:ve+T.offsetWidth,bottom:re+T.offsetHeight})},triggerOnKeyDown:Kr(GS),triggerOnKeyPress:Kr(WS),triggerOnKeyUp:VS,triggerOnMouseDown:Kr($S),execCommand:function(x){if(hh.hasOwnProperty(x))return hh[x].call(null,this)},triggerElectric:Kr(function(x){ZS(this,x)}),findPosH:function(x,T,U,j){var K=1;T<0&&(K=-1,T=-T);for(var te=ct(this.doc,x),re=0;re<T&&(te=dy(this.doc,te,K,U,j),!te.hitSide);++re);return te},moveH:Kr(function(x,T){var U=this;this.extendSelectionsBy(function(j){return U.display.shift||U.doc.extend||j.empty()?dy(U.doc,j.head,x,T,U.options.rtlMoveVisually):x<0?j.from():j.to()},We)}),deleteH:Kr(function(x,T){var U=this.doc.sel,j=this.doc;U.somethingSelected()?j.replaceSelection("",null,"+delete"):Hu(this,function(K){var te=dy(j,K.head,x,T,!1);return x<0?{from:te,to:K.head}:{from:K.head,to:te}})}),findPosV:function(x,T,U,j){var K=1,te=j;T<0&&(K=-1,T=-T);for(var re=ct(this.doc,x),ve=0;ve<T;++ve){var _e=xs(this,re,"div");if(te==null?te=_e.left:_e.left=te,re=nM(this,_e,K,U),re.hitSide)break}return re},moveV:Kr(function(x,T){var U=this,j=this.doc,K=[],te=!this.display.shift&&!j.extend&&j.sel.somethingSelected();if(j.extendSelectionsBy(function(ve){if(te)return x<0?ve.from():ve.to();var _e=xs(U,ve.head,"div");ve.goalColumn!=null&&(_e.left=ve.goalColumn),K.push(_e.left);var Ae=nM(U,_e,x,T);return T=="page"&&ve==j.sel.primary()&&qv(U,Op(U,Ae,"div").top-_e.top),Ae},We),K.length)for(var re=0;re<j.sel.ranges.length;re++)j.sel.ranges[re].goalColumn=K[re]}),findWordAt:function(x){var T=this.doc,U=Ze(T,x.line).text,j=x.ch,K=x.ch;if(U){var te=this.getHelper(x,"wordChars");(x.sticky=="before"||K==U.length)&&j?--j:++K;for(var re=U.charAt(j),ve=n(re,te)?function(_e){return n(_e,te)}:/\s/.test(re)?function(_e){return/\s/.test(_e)}:function(_e){return!/\s/.test(_e)&&!n(_e)};j>0&&ve(U.charAt(j-1));)--j;for(;K<U.length&&ve(U.charAt(K));)++K}return new fn($e(x.line,j),$e(x.line,K))},toggleOverwrite:function(x){x!=null&&x==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Se(this.display.cursorDiv,"CodeMirror-overwrite"):ce(this.display.cursorDiv,"CodeMirror-overwrite"),ae(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==me()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Kr(function(x,T){Qf(this,x,T)}),getScrollInfo:function(){var x=this.display.scroller;return{left:x.scrollLeft,top:x.scrollTop,height:x.scrollHeight-zs(this)-this.display.barHeight,width:x.scrollWidth-zs(this)-this.display.barWidth,clientHeight:kv(this),clientWidth:al(this)}},scrollIntoView:Kr(function(x,T){x==null?(x={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof x=="number"?x={from:$e(x,0),to:null}:x.from==null&&(x={from:x,to:null}),x.to||(x.to=x.from),x.margin=T||0,x.from.line!=null?AI(this,x):Xb(this,x.from,x.to,x.margin)}),setSize:Kr(function(x,T){var U=this,j=function(te){return typeof te=="number"||/^\d+$/.test(String(te))?te+"px":te};x!=null&&(this.display.wrapper.style.width=j(x)),T!=null&&(this.display.wrapper.style.height=j(T)),this.options.lineWrapping&&Nb(this);var K=this.display.viewFrom;this.doc.iter(K,this.display.viewTo,function(te){if(te.widgets){for(var re=0;re<te.widgets.length;re++)if(te.widgets[re].noHScroll){Xo(U,K,"widget");break}}++K}),this.curOp.forceUpdate=!0,ae(this,"refresh",this)}),operation:function(x){return bi(this,x)},startOperation:function(){return dl(this)},endOperation:function(){return pl(this)},refresh:Kr(function(){var x=this.display.cachedTextHeight;si(this),this.curOp.forceUpdate=!0,Yf(this),Qf(this,this.doc.scrollLeft,this.doc.scrollTop),Kv(this.display),(x==null||Math.abs(x-Lu(this.display))>.5||this.options.lineWrapping)&&Hv(this),ae(this,"refresh",this)}),swapDoc:Kr(function(x){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),lS(this,x),Yf(this),this.display.input.reset(),Qf(this,x.scrollLeft,x.scrollTop),this.curOp.forceScroll=!0,tr(this,"swapDoc",this,T),T}),phrase:function(x){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,x)?T[x]:x},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},He(c),c.registerHelper=function(x,T,U){_.hasOwnProperty(x)||(_[x]=c[x]={_global:[]}),_[x][T]=U},c.registerGlobalHelper=function(x,T,U,j){c.registerHelper(x,T,j),_[x]._global.push({pred:U,val:j})}}function dy(c,d,_,x,T){var U=d,j=_,K=Ze(c,d.line),te=T&&c.direction=="rtl"?-_:_;function re(){var ut=d.line+te;return ut<c.first||ut>=c.first+c.size?!1:(d=new $e(ut,d.ch,d.sticky),K=Ze(c,ut))}function ve(ut){var rt;if(x=="codepoint"){var dt=K.text.charCodeAt(d.ch+(_>0?0:-1));if(isNaN(dt))rt=null;else{var Lt=_>0?dt>=55296&&dt<56320:dt>=56320&&dt<57343;rt=new $e(d.line,Math.max(0,Math.min(K.text.length,d.ch+_*(Lt?2:1))),-_)}}else T?rt=cP(c.cm,K,d,_):rt=oy(K,d,_);if(rt==null)if(!ut&&re())d=ay(T,c.cm,K,d.line,te);else return!1;else d=rt;return!0}if(x=="char"||x=="codepoint")ve();else if(x=="column")ve(!0);else if(x=="word"||x=="group")for(var _e=null,Ae=x=="group",Ee=c.cm&&c.cm.getHelper(d,"wordChars"),Ue=!0;!(_<0&&!ve(!Ue));Ue=!1){var Ge=K.text.charAt(d.ch)||`
`,Je=n(Ge,Ee)?"w":Ae&&Ge==`
`?"n":!Ae||/\s/.test(Ge)?null:"p";if(Ae&&!Ue&&!Je&&(Je="s"),_e&&_e!=Je){_<0&&(_=1,ve(),d.sticky="after");break}if(Je&&(_e=Je),_>0&&!ve(!Ue))break}var nt=qp(c,d,U,j,!0);return xe(U,nt)&&(nt.hitSide=!0),nt}function nM(c,d,_,x){var T=c.doc,U=d.left,j;if(x=="page"){var K=Math.min(c.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),te=Math.max(K-.5*Lu(c.display),3);j=(_>0?d.bottom:d.top)+_*te}else x=="line"&&(j=_>0?d.bottom+3:d.top-3);for(var re;re=Fv(c,U,j),!!re.outside;){if(_<0?j<=0:j>=T.height){re.hitSide=!0;break}j+=_*5}return re}var mn=function(c){this.cm=c,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ie,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};mn.prototype.init=function(c){var d=this,_=this,x=_.cm,T=_.div=c.lineDiv;T.contentEditable=!0,eM(T,x.options.spellcheck,x.options.autocorrect,x.options.autocapitalize);function U(K){for(var te=K.target;te;te=te.parentNode){if(te==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(te.className))break}return!1}Q(T,"paste",function(K){!U(K)||ue(x,K)||QS(K,x)||v<=11&&setTimeout(_r(x,function(){return d.updateFromDOM()}),20)}),Q(T,"compositionstart",function(K){d.composing={data:K.data,done:!1}}),Q(T,"compositionupdate",function(K){d.composing||(d.composing={data:K.data,done:!1})}),Q(T,"compositionend",function(K){d.composing&&(K.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),Q(T,"touchstart",function(){return _.forceCompositionEnd()}),Q(T,"input",function(){d.composing||d.readFromDOMSoon()});function j(K){if(!(!U(K)||ue(x,K))){if(x.somethingSelected())Jp({lineWise:!1,text:x.getSelections()}),K.type=="cut"&&x.replaceSelection("",null,"cut");else if(x.options.lineWiseCopyCut){var te=JS(x);Jp({lineWise:!0,text:te.text}),K.type=="cut"&&x.operation(function(){x.setSelections(te.ranges,0,qe),x.replaceSelection("",null,"cut")})}else return;if(K.clipboardData){K.clipboardData.clearData();var re=ws.text.join(`
`);if(K.clipboardData.setData("Text",re),K.clipboardData.getData("Text")==re){K.preventDefault();return}}var ve=tM(),_e=ve.firstChild;x.display.lineSpace.insertBefore(ve,x.display.lineSpace.firstChild),_e.value=ws.text.join(`
`);var Ae=me();ye(_e),setTimeout(function(){x.display.lineSpace.removeChild(ve),Ae.focus(),Ae==T&&_.showPrimarySelection()},50)}}Q(T,"copy",j),Q(T,"cut",j)},mn.prototype.screenReaderLabelChanged=function(c){c?this.div.setAttribute("aria-label",c):this.div.removeAttribute("aria-label")},mn.prototype.prepareSelection=function(){var c=$b(this.cm,!1);return c.focus=me()==this.div,c},mn.prototype.showSelection=function(c,d){!c||!this.cm.display.view.length||((c.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(c))},mn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},mn.prototype.showPrimarySelection=function(){var c=this.getSelection(),d=this.cm,_=d.doc.sel.primary(),x=_.from(),T=_.to();if(d.display.viewTo==d.display.viewFrom||x.line>=d.display.viewTo||T.line<d.display.viewFrom){c.removeAllRanges();return}var U=em(d,c.anchorNode,c.anchorOffset),j=em(d,c.focusNode,c.focusOffset);if(!(U&&!U.bad&&j&&!j.bad&&ie(kt(U,j),x)==0&&ie(Ke(U,j),T)==0)){var K=d.display.view,te=x.line>=d.display.viewFrom&&rM(d,x)||{node:K[0].measure.map[2],offset:0},re=T.line<d.display.viewTo&&rM(d,T);if(!re){var ve=K[K.length-1].measure,_e=ve.maps?ve.maps[ve.maps.length-1]:ve.map;re={node:_e[_e.length-1],offset:_e[_e.length-2]-_e[_e.length-3]}}if(!te||!re){c.removeAllRanges();return}var Ae=c.rangeCount&&c.getRangeAt(0),Ee;try{Ee=ee(te.node,te.offset,re.offset,re.node)}catch{}Ee&&(!o&&d.state.focused?(c.collapse(te.node,te.offset),Ee.collapsed||(c.removeAllRanges(),c.addRange(Ee))):(c.removeAllRanges(),c.addRange(Ee)),Ae&&c.anchorNode==null?c.addRange(Ae):o&&this.startGracePeriod()),this.rememberSelection()}},mn.prototype.startGracePeriod=function(){var c=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){c.gracePeriod=!1,c.selectionChanged()&&c.cm.operation(function(){return c.cm.curOp.selectionChanged=!0})},20)},mn.prototype.showMultipleSelections=function(c){fe(this.cm.display.cursorDiv,c.cursors),fe(this.cm.display.selectionDiv,c.selection)},mn.prototype.rememberSelection=function(){var c=this.getSelection();this.lastAnchorNode=c.anchorNode,this.lastAnchorOffset=c.anchorOffset,this.lastFocusNode=c.focusNode,this.lastFocusOffset=c.focusOffset},mn.prototype.selectionInEditor=function(){var c=this.getSelection();if(!c.rangeCount)return!1;var d=c.getRangeAt(0).commonAncestorContainer;return E(this.div,d)},mn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||me()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},mn.prototype.blur=function(){this.div.blur()},mn.prototype.getField=function(){return this.div},mn.prototype.supportsTouch=function(){return!0},mn.prototype.receivedFocus=function(){var c=this,d=this;this.selectionInEditor()?setTimeout(function(){return c.pollSelection()},20):bi(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function _(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,_))}this.polling.set(this.cm.options.pollInterval,_)},mn.prototype.selectionChanged=function(){var c=this.getSelection();return c.anchorNode!=this.lastAnchorNode||c.anchorOffset!=this.lastAnchorOffset||c.focusNode!=this.lastFocusNode||c.focusOffset!=this.lastFocusOffset},mn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var c=this.getSelection(),d=this.cm;if(P&&A&&this.cm.display.gutterSpecs.length&&LP(c.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var _=em(d,c.anchorNode,c.anchorOffset),x=em(d,c.focusNode,c.focusOffset);_&&x&&bi(d,function(){Br(d.doc,Ko(_,x),qe),(_.bad||x.bad)&&(d.curOp.selectionChanged=!0)})}}},mn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var c=this.cm,d=c.display,_=c.doc.sel.primary(),x=_.from(),T=_.to();if(x.ch==0&&x.line>c.firstLine()&&(x=$e(x.line-1,Ze(c.doc,x.line-1).length)),T.ch==Ze(c.doc,T.line).text.length&&T.line<c.lastLine()&&(T=$e(T.line+1,0)),x.line<d.viewFrom||T.line>d.viewTo-1)return!1;var U,j,K;x.line==d.viewFrom||(U=cl(c,x.line))==0?(j=Wt(d.view[0].line),K=d.view[0].node):(j=Wt(d.view[U].line),K=d.view[U-1].node.nextSibling);var te=cl(c,T.line),re,ve;if(te==d.view.length-1?(re=d.viewTo-1,ve=d.lineDiv.lastChild):(re=Wt(d.view[te+1].line)-1,ve=d.view[te+1].node.previousSibling),!K)return!1;for(var _e=c.doc.splitLines(IP(c,K,ve,j,re)),Ae=yr(c.doc,$e(j,0),$e(re,Ze(c.doc,re).text.length));_e.length>1&&Ae.length>1;)if(Fe(_e)==Fe(Ae))_e.pop(),Ae.pop(),re--;else if(_e[0]==Ae[0])_e.shift(),Ae.shift(),j++;else break;for(var Ee=0,Ue=0,Ge=_e[0],Je=Ae[0],nt=Math.min(Ge.length,Je.length);Ee<nt&&Ge.charCodeAt(Ee)==Je.charCodeAt(Ee);)++Ee;for(var ut=Fe(_e),rt=Fe(Ae),dt=Math.min(ut.length-(_e.length==1?Ee:0),rt.length-(Ae.length==1?Ee:0));Ue<dt&&ut.charCodeAt(ut.length-Ue-1)==rt.charCodeAt(rt.length-Ue-1);)++Ue;if(_e.length==1&&Ae.length==1&&j==x.line)for(;Ee&&Ee>x.ch&&ut.charCodeAt(ut.length-Ue-1)==rt.charCodeAt(rt.length-Ue-1);)Ee--,Ue++;_e[_e.length-1]=ut.slice(0,ut.length-Ue).replace(/^\u200b+/,""),_e[0]=_e[0].slice(Ee).replace(/\u200b+$/,"");var Lt=$e(j,Ee),Tt=$e(re,Ae.length?Fe(Ae).length-Ue:0);if(_e.length>1||_e[0]||ie(Lt,Tt))return Uu(c.doc,_e,Lt,Tt,"+input"),!0},mn.prototype.ensurePolled=function(){this.forceCompositionEnd()},mn.prototype.reset=function(){this.forceCompositionEnd()},mn.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},mn.prototype.readFromDOMSoon=function(){var c=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(c.readDOMTimeout=null,c.composing)if(c.composing.done)c.composing=null;else return;c.updateFromDOM()},80))},mn.prototype.updateFromDOM=function(){var c=this;(this.cm.isReadOnly()||!this.pollContent())&&bi(this.cm,function(){return si(c.cm)})},mn.prototype.setUneditable=function(c){c.contentEditable="false"},mn.prototype.onKeyPress=function(c){c.charCode==0||this.composing||(c.preventDefault(),this.cm.isReadOnly()||_r(this.cm,hy)(this.cm,String.fromCharCode(c.charCode==null?c.keyCode:c.charCode),0))},mn.prototype.readOnlyChanged=function(c){this.div.contentEditable=String(c!="nocursor")},mn.prototype.onContextMenu=function(){},mn.prototype.resetPosition=function(){},mn.prototype.needsContentAttribute=!0;function rM(c,d){var _=Dv(c,d.line);if(!_||_.hidden)return null;var x=Ze(c.doc,d.line),T=Ib(_,x,d.line),U=G(x,c.doc.direction),j="left";if(U){var K=I(U,d.ch);j=K%2?"right":"left"}var te=Db(T.map,d.ch,j);return te.offset=te.collapse=="right"?te.end:te.start,te}function LP(c){for(var d=c;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Vu(c,d){return d&&(c.bad=!0),c}function IP(c,d,_,x,T){var U="",j=!1,K=c.doc.lineSeparator(),te=!1;function re(Ee){return function(Ue){return Ue.id==Ee}}function ve(){j&&(U+=K,te&&(U+=K),j=te=!1)}function _e(Ee){Ee&&(ve(),U+=Ee)}function Ae(Ee){if(Ee.nodeType==1){var Ue=Ee.getAttribute("cm-text");if(Ue){_e(Ue);return}var Ge=Ee.getAttribute("cm-marker"),Je;if(Ge){var nt=c.findMarks($e(x,0),$e(T+1,0),re(+Ge));nt.length&&(Je=nt[0].find(0))&&_e(yr(c.doc,Je.from,Je.to).join(K));return}if(Ee.getAttribute("contenteditable")=="false")return;var ut=/^(pre|div|p|li|table|br)$/i.test(Ee.nodeName);if(!/^br$/i.test(Ee.nodeName)&&Ee.textContent.length==0)return;ut&&ve();for(var rt=0;rt<Ee.childNodes.length;rt++)Ae(Ee.childNodes[rt]);/^(pre|p)$/i.test(Ee.nodeName)&&(te=!0),ut&&(j=!0)}else Ee.nodeType==3&&_e(Ee.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ae(d),d!=_;)d=d.nextSibling,te=!1;return U}function em(c,d,_){var x;if(d==c.display.lineDiv){if(x=c.display.lineDiv.childNodes[_],!x)return Vu(c.clipPos($e(c.display.viewTo-1)),!0);d=null,_=0}else for(x=d;;x=x.parentNode){if(!x||x==c.display.lineDiv)return null;if(x.parentNode&&x.parentNode==c.display.lineDiv)break}for(var T=0;T<c.display.view.length;T++){var U=c.display.view[T];if(U.node==x)return PP(U,d,_)}}function PP(c,d,_){var x=c.text.firstChild,T=!1;if(!d||!E(x,d))return Vu($e(Wt(c.line),0),!0);if(d==x&&(T=!0,d=x.childNodes[_],_=0,!d)){var U=c.rest?Fe(c.rest):c.line;return Vu($e(Wt(U),U.text.length),T)}var j=d.nodeType==3?d:null,K=d;for(!j&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(j=d.firstChild,_&&(_=j.nodeValue.length));K.parentNode!=x;)K=K.parentNode;var te=c.measure,re=te.maps;function ve(Je,nt,ut){for(var rt=-1;rt<(re?re.length:0);rt++)for(var dt=rt<0?te.map:re[rt],Lt=0;Lt<dt.length;Lt+=3){var Tt=dt[Lt+2];if(Tt==Je||Tt==nt){var qt=Wt(rt<0?c.line:c.rest[rt]),Tn=dt[Lt]+ut;return(ut<0||Tt!=Je)&&(Tn=dt[Lt+(ut?1:0)]),$e(qt,Tn)}}}var _e=ve(j,K,_);if(_e)return Vu(_e,T);for(var Ae=K.nextSibling,Ee=j?j.nodeValue.length-_:0;Ae;Ae=Ae.nextSibling){if(_e=ve(Ae,Ae.firstChild,0),_e)return Vu($e(_e.line,_e.ch-Ee),T);Ee+=Ae.textContent.length}for(var Ue=K.previousSibling,Ge=_;Ue;Ue=Ue.previousSibling){if(_e=ve(Ue,Ue.firstChild,-1),_e)return Vu($e(_e.line,_e.ch+Ge),T);Ge+=Ue.textContent.length}}var Kn=function(c){this.cm=c,this.prevInput="",this.pollingFast=!1,this.polling=new Ie,this.hasSelection=!1,this.composing=null};Kn.prototype.init=function(c){var d=this,_=this,x=this.cm;this.createField(c);var T=this.textarea;c.wrapper.insertBefore(this.wrapper,c.wrapper.firstChild),D&&(T.style.width="0px"),Q(T,"input",function(){m&&v>=9&&d.hasSelection&&(d.hasSelection=null),_.poll()}),Q(T,"paste",function(j){ue(x,j)||QS(j,x)||(x.state.pasteIncoming=+new Date,_.fastPoll())});function U(j){if(!ue(x,j)){if(x.somethingSelected())Jp({lineWise:!1,text:x.getSelections()});else if(x.options.lineWiseCopyCut){var K=JS(x);Jp({lineWise:!0,text:K.text}),j.type=="cut"?x.setSelections(K.ranges,null,qe):(_.prevInput="",T.value=K.text.join(`
`),ye(T))}else return;j.type=="cut"&&(x.state.cutIncoming=+new Date)}}Q(T,"cut",U),Q(T,"copy",U),Q(c.scroller,"paste",function(j){if(!(fo(c,j)||ue(x,j))){if(!T.dispatchEvent){x.state.pasteIncoming=+new Date,_.focus();return}var K=new Event("paste");K.clipboardData=j.clipboardData,T.dispatchEvent(K)}}),Q(c.lineSpace,"selectstart",function(j){fo(c,j)||Oe(j)}),Q(T,"compositionstart",function(){var j=x.getCursor("from");_.composing&&_.composing.range.clear(),_.composing={start:j,range:x.markText(j,x.getCursor("to"),{className:"CodeMirror-composing"})}}),Q(T,"compositionend",function(){_.composing&&(_.poll(),_.composing.range.clear(),_.composing=null)})},Kn.prototype.createField=function(c){this.wrapper=tM(),this.textarea=this.wrapper.firstChild},Kn.prototype.screenReaderLabelChanged=function(c){c?this.textarea.setAttribute("aria-label",c):this.textarea.removeAttribute("aria-label")},Kn.prototype.prepareSelection=function(){var c=this.cm,d=c.display,_=c.doc,x=$b(c);if(c.options.moveInputWithCursor){var T=xs(c,_.sel.primary().head,"div"),U=d.wrapper.getBoundingClientRect(),j=d.lineDiv.getBoundingClientRect();x.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,T.top+j.top-U.top)),x.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,T.left+j.left-U.left))}return x},Kn.prototype.showSelection=function(c){var d=this.cm,_=d.display;fe(_.cursorDiv,c.cursors),fe(_.selectionDiv,c.selection),c.teTop!=null&&(this.wrapper.style.top=c.teTop+"px",this.wrapper.style.left=c.teLeft+"px")},Kn.prototype.reset=function(c){if(!(this.contextMenuPending||this.composing)){var d=this.cm;if(d.somethingSelected()){this.prevInput="";var _=d.getSelection();this.textarea.value=_,d.state.focused&&ye(this.textarea),m&&v>=9&&(this.hasSelection=_)}else c||(this.prevInput=this.textarea.value="",m&&v>=9&&(this.hasSelection=null))}},Kn.prototype.getField=function(){return this.textarea},Kn.prototype.supportsTouch=function(){return!1},Kn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!F||me()!=this.textarea))try{this.textarea.focus()}catch{}},Kn.prototype.blur=function(){this.textarea.blur()},Kn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Kn.prototype.receivedFocus=function(){this.slowPoll()},Kn.prototype.slowPoll=function(){var c=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){c.poll(),c.cm.state.focused&&c.slowPoll()})},Kn.prototype.fastPoll=function(){var c=!1,d=this;d.pollingFast=!0;function _(){var x=d.poll();!x&&!c?(c=!0,d.polling.set(60,_)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,_)},Kn.prototype.poll=function(){var c=this,d=this.cm,_=this.textarea,x=this.prevInput;if(this.contextMenuPending||!d.state.focused||Le(_)&&!x&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var T=_.value;if(T==x&&!d.somethingSelected())return!1;if(m&&v>=9&&this.hasSelection===T||L&&/[\uf700-\uf7ff]/.test(T))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var U=T.charCodeAt(0);if(U==8203&&!x&&(x="\u200B"),U==8666)return this.reset(),this.cm.execCommand("undo")}for(var j=0,K=Math.min(x.length,T.length);j<K&&x.charCodeAt(j)==T.charCodeAt(j);)++j;return bi(d,function(){hy(d,T.slice(j),x.length-j,null,c.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?_.value=c.prevInput="":c.prevInput=T,c.composing&&(c.composing.range.clear(),c.composing.range=d.markText(c.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Kn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Kn.prototype.onKeyPress=function(){m&&v>=9&&(this.hasSelection=null),this.fastPoll()},Kn.prototype.onContextMenu=function(c){var d=this,_=d.cm,x=_.display,T=d.textarea;d.contextMenuPending&&d.contextMenuPending();var U=ul(_,c),j=x.scroller.scrollTop;if(!U||R)return;var K=_.options.resetSelectionOnContextMenu;K&&_.doc.sel.contains(U)==-1&&_r(_,Br)(_.doc,Ko(U),qe);var te=T.style.cssText,re=d.wrapper.style.cssText,ve=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(c.clientY-ve.top-5)+"px; left: "+(c.clientX-ve.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var _e;w&&(_e=window.scrollY),x.input.focus(),w&&window.scrollTo(null,_e),x.input.reset(),_.somethingSelected()||(T.value=d.prevInput=" "),d.contextMenuPending=Ee,x.selForContextMenu=_.doc.sel,clearTimeout(x.detectingSelectAll);function Ae(){if(T.selectionStart!=null){var Ge=_.somethingSelected(),Je="\u200B"+(Ge?T.value:"");T.value="\u21DA",T.value=Je,d.prevInput=Ge?"":"\u200B",T.selectionStart=1,T.selectionEnd=Je.length,x.selForContextMenu=_.doc.sel}}function Ee(){if(d.contextMenuPending==Ee&&(d.contextMenuPending=!1,d.wrapper.style.cssText=re,T.style.cssText=te,m&&v<9&&x.scrollbars.setScrollTop(x.scroller.scrollTop=j),T.selectionStart!=null)){(!m||m&&v<9)&&Ae();var Ge=0,Je=function(){x.selForContextMenu==_.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&d.prevInput=="\u200B"?_r(_,wS)(_):Ge++<10?x.detectingSelectAll=setTimeout(Je,500):(x.selForContextMenu=null,x.input.reset())};x.detectingSelectAll=setTimeout(Je,200)}}if(m&&v>=9&&Ae(),J){Et(c);var Ue=function(){ne(window,"mouseup",Ue),setTimeout(Ee,20)};Q(window,"mouseup",Ue)}else setTimeout(Ee,50)},Kn.prototype.readOnlyChanged=function(c){c||this.reset(),this.textarea.disabled=c=="nocursor",this.textarea.readOnly=!!c},Kn.prototype.setUneditable=function(){},Kn.prototype.needsContentAttribute=!1;function kP(c,d){if(d=d?Re(d):{},d.value=c.value,!d.tabindex&&c.tabIndex&&(d.tabindex=c.tabIndex),!d.placeholder&&c.placeholder&&(d.placeholder=c.placeholder),d.autofocus==null){var _=me();d.autofocus=_==c||c.getAttribute("autofocus")!=null&&_==document.body}function x(){c.value=K.getValue()}var T;if(c.form&&(Q(c.form,"submit",x),!d.leaveSubmitMethodAlone)){var U=c.form;T=U.submit;try{var j=U.submit=function(){x(),U.submit=T,U.submit(),U.submit=j}}catch{}}d.finishInit=function(te){te.save=x,te.getTextArea=function(){return c},te.toTextArea=function(){te.toTextArea=isNaN,x(),c.parentNode.removeChild(te.getWrapperElement()),c.style.display="",c.form&&(ne(c.form,"submit",x),!d.leaveSubmitMethodAlone&&typeof c.form.submit=="function"&&(c.form.submit=T))}},c.style.display="none";var K=In(function(te){return c.parentNode.insertBefore(te,c.nextSibling)},d);return K}function DP(c){c.off=ne,c.on=Q,c.wheelEventPixels=HI,c.Doc=oi,c.splitLines=ge,c.countColumn=we,c.findColumn=De,c.isWordChar=Y,c.Pass=Ve,c.signal=ae,c.Line=co,c.changeEnd=Qo,c.scrollbarModel=Qb,c.Pos=$e,c.cmpPos=ie,c.modes=yt,c.mimeModes=wt,c.resolveMode=Kt,c.getMode=jt,c.modeExtensions=Bt,c.extendMode=rn,c.copyState=Vn,c.startState=_i,c.innerMode=xi,c.commands=hh,c.keyMap=po,c.keyName=FS,c.isModifierKey=OS,c.lookupKey=zu,c.normalizeKeyMap=uP,c.StringStream=sn,c.SharedTextMarker=uh,c.TextMarker=Jo,c.LineWidget=lh,c.e_preventDefault=Oe,c.e_stopPropagation=gt,c.e_stop=Et,c.addClass=Se,c.contains=E,c.rmClass=ce,c.keyNames=ea}TP(In),RP(In);var OP="iter insert remove copy getEditor constructor".split(" ");for(var tm in oi.prototype)oi.prototype.hasOwnProperty(tm)&&Me(OP,tm)<0&&(In.prototype[tm]=function(c){return function(){return c.apply(this.doc,arguments)}}(oi.prototype[tm]));return He(oi),In.inputStyles={textarea:Kn,contenteditable:mn},In.defineMode=function(c){!In.defaults.mode&&c!="null"&&(In.defaults.mode=c),It.apply(this,arguments)},In.defineMIME=At,In.defineMode("null",function(){return{token:function(c){return c.skipToEnd()}}}),In.defineMIME("text/plain","null"),In.defineExtension=function(c,d){In.prototype[c]=d},In.defineDocExtension=function(c,d){oi.prototype[c]=d},In.fromTextArea=kP,DP(In),In.version="5.65.1",In})})(fu);(function(s,e){(function(t){t(fu.exports)})(function(t){var r={},o=/[^\s\u00a0]/,l=t.Pos,u=t.cmpPos;function h(w){var S=w.search(o);return S==-1?0:S}t.commands.toggleComment=function(w){w.toggleComment()},t.defineExtension("toggleComment",function(w){w||(w=r);for(var S=this,A=1/0,R=this.listSelections(),O=null,N=R.length-1;N>=0;N--){var k=R[N].from(),D=R[N].to();k.line>=A||(D.line>=A&&(D=l(A,0)),A=k.line,O==null?S.uncomment(k,D,w)?O="un":(S.lineComment(k,D,w),O="line"):O=="un"?S.uncomment(k,D,w):S.lineComment(k,D,w))}});function m(w,S,A){return/\bstring\b/.test(w.getTokenTypeAt(l(S.line,0)))&&!/^[\'\"\`]/.test(A)}function v(w,S){var A=w.getMode();return A.useInnerComments===!1||!A.innerMode?A:w.getModeAt(S)}t.defineExtension("lineComment",function(w,S,A){A||(A=r);var R=this,O=v(R,w),N=R.getLine(w.line);if(!(N==null||m(R,w,N))){var k=A.lineComment||O.lineComment;if(!k){(A.blockCommentStart||O.blockCommentStart)&&(A.fullLines=!0,R.blockComment(w,S,A));return}var D=Math.min(S.ch!=0||S.line==w.line?S.line+1:S.line,R.lastLine()+1),P=A.padding==null?" ":A.padding,F=A.commentBlankLines||w.line==S.line;R.operation(function(){if(A.indent){for(var L=null,z=w.line;z<D;++z){var H=R.getLine(z),X=H.slice(0,h(H));(L==null||L.length>X.length)&&(L=X)}for(var z=w.line;z<D;++z){var H=R.getLine(z),$=L.length;!F&&!o.test(H)||(H.slice(0,$)!=L&&($=h(H)),R.replaceRange(L+k+P,l(z,0),l(z,$)))}}else for(var z=w.line;z<D;++z)(F||o.test(R.getLine(z)))&&R.replaceRange(k+P,l(z,0))})}}),t.defineExtension("blockComment",function(w,S,A){A||(A=r);var R=this,O=v(R,w),N=A.blockCommentStart||O.blockCommentStart,k=A.blockCommentEnd||O.blockCommentEnd;if(!N||!k){(A.lineComment||O.lineComment)&&A.fullLines!=!1&&R.lineComment(w,S,A);return}if(!/\bcomment\b/.test(R.getTokenTypeAt(l(w.line,0)))){var D=Math.min(S.line,R.lastLine());D!=w.line&&S.ch==0&&o.test(R.getLine(D))&&--D;var P=A.padding==null?" ":A.padding;w.line>D||R.operation(function(){if(A.fullLines!=!1){var F=o.test(R.getLine(D));R.replaceRange(P+k,l(D)),R.replaceRange(N+P,l(w.line,0));var L=A.blockCommentLead||O.blockCommentLead;if(L!=null)for(var z=w.line+1;z<=D;++z)(z!=D||F)&&R.replaceRange(L+P,l(z,0))}else{var H=u(R.getCursor("to"),S)==0,X=!R.somethingSelected();R.replaceRange(k,S),H&&R.setSelection(X?S:R.getCursor("from"),S),R.replaceRange(N,w)}})}}),t.defineExtension("uncomment",function(w,S,A){A||(A=r);var R=this,O=v(R,w),N=Math.min(S.ch!=0||S.line==w.line?S.line:S.line-1,R.lastLine()),k=Math.min(w.line,N),D=A.lineComment||O.lineComment,P=[],F=A.padding==null?" ":A.padding,L;e:{if(!D)break e;for(var z=k;z<=N;++z){var H=R.getLine(z),X=H.indexOf(D);if(X>-1&&!/comment/.test(R.getTokenTypeAt(l(z,X+1)))&&(X=-1),X==-1&&o.test(H)||X>-1&&o.test(H.slice(0,X)))break e;P.push(H)}if(R.operation(function(){for(var Te=k;Te<=N;++Te){var ye=P[Te-k],de=ye.indexOf(D),Re=de+D.length;de<0||(ye.slice(Re,Re+F.length)==F&&(Re+=F.length),L=!0,R.replaceRange("",l(Te,de),l(Te,Re)))}}),L)return!0}var $=A.blockCommentStart||O.blockCommentStart,J=A.blockCommentEnd||O.blockCommentEnd;if(!$||!J)return!1;var se=A.blockCommentLead||O.blockCommentLead,ce=R.getLine(k),pe=ce.indexOf($);if(pe==-1)return!1;var fe=N==k?ce:R.getLine(N),b=fe.indexOf(J,N==k?pe+$.length:0),p=l(k,pe+1),ee=l(N,b+1);if(b==-1||!/comment/.test(R.getTokenTypeAt(p))||!/comment/.test(R.getTokenTypeAt(ee))||R.getRange(p,ee,`
`).indexOf(J)>-1)return!1;var E=ce.lastIndexOf($,w.ch),me=E==-1?-1:ce.slice(0,w.ch).indexOf(J,E+$.length);if(E!=-1&&me!=-1&&me+J.length!=w.ch)return!1;me=fe.indexOf(J,S.ch);var Se=fe.slice(S.ch).lastIndexOf($,me-S.ch);return E=me==-1||Se==-1?-1:S.ch+Se,me!=-1&&E!=-1&&E!=S.ch?!1:(R.operation(function(){R.replaceRange("",l(N,b-(F&&fe.slice(b-F.length,b)==F?F.length:0)),l(N,b+J.length));var Te=pe+$.length;if(F&&ce.slice(Te,Te+F.length)==F&&(Te+=F.length),R.replaceRange("",l(k,pe),l(k,Te)),se)for(var ye=k+1;ye<=N;++ye){var de=R.getLine(ye),Re=de.indexOf(se);if(!(Re==-1||o.test(de.slice(0,Re)))){var we=Re+se.length;F&&de.slice(we,we+F.length)==F&&(we+=F.length),R.replaceRange("",l(ye,Re),l(ye,we))}}}),!0)})})})();var B5={exports:{}};(function(s,e){(function(t){t(fu.exports)})(function(t){var r=t.Pos;function o(P){var F=P.flags;return F!=null?F:(P.ignoreCase?"i":"")+(P.global?"g":"")+(P.multiline?"m":"")}function l(P,F){for(var L=o(P),z=L,H=0;H<F.length;H++)z.indexOf(F.charAt(H))==-1&&(z+=F.charAt(H));return L==z?P:new RegExp(P.source,z)}function u(P){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(P.source)}function h(P,F,L){F=l(F,"g");for(var z=L.line,H=L.ch,X=P.lastLine();z<=X;z++,H=0){F.lastIndex=H;var $=P.getLine(z),J=F.exec($);if(J)return{from:r(z,J.index),to:r(z,J.index+J[0].length),match:J}}}function m(P,F,L){if(!u(F))return h(P,F,L);F=l(F,"gm");for(var z,H=1,X=L.line,$=P.lastLine();X<=$;){for(var J=0;J<H&&!(X>$);J++){var se=P.getLine(X++);z=z==null?se:z+`
`+se}H=H*2,F.lastIndex=L.ch;var ce=F.exec(z);if(ce){var pe=z.slice(0,ce.index).split(`
`),fe=ce[0].split(`
`),b=L.line+pe.length-1,p=pe[pe.length-1].length;return{from:r(b,p),to:r(b+fe.length-1,fe.length==1?p+fe[0].length:fe[fe.length-1].length),match:ce}}}}function v(P,F,L){for(var z,H=0;H<=P.length;){F.lastIndex=H;var X=F.exec(P);if(!X)break;var $=X.index+X[0].length;if($>P.length-L)break;(!z||$>z.index+z[0].length)&&(z=X),H=X.index+1}return z}function w(P,F,L){F=l(F,"g");for(var z=L.line,H=L.ch,X=P.firstLine();z>=X;z--,H=-1){var $=P.getLine(z),J=v($,F,H<0?0:$.length-H);if(J)return{from:r(z,J.index),to:r(z,J.index+J[0].length),match:J}}}function S(P,F,L){if(!u(F))return w(P,F,L);F=l(F,"gm");for(var z,H=1,X=P.getLine(L.line).length-L.ch,$=L.line,J=P.firstLine();$>=J;){for(var se=0;se<H&&$>=J;se++){var ce=P.getLine($--);z=z==null?ce:ce+`
`+z}H*=2;var pe=v(z,F,X);if(pe){var fe=z.slice(0,pe.index).split(`
`),b=pe[0].split(`
`),p=$+fe.length,ee=fe[fe.length-1].length;return{from:r(p,ee),to:r(p+b.length-1,b.length==1?ee+b[0].length:b[b.length-1].length),match:pe}}}}var A,R;String.prototype.normalize?(A=function(P){return P.normalize("NFD").toLowerCase()},R=function(P){return P.normalize("NFD")}):(A=function(P){return P.toLowerCase()},R=function(P){return P});function O(P,F,L,z){if(P.length==F.length)return L;for(var H=0,X=L+Math.max(0,P.length-F.length);;){if(H==X)return H;var $=H+X>>1,J=z(P.slice(0,$)).length;if(J==L)return $;J>L?X=$:H=$+1}}function N(P,F,L,z){if(!F.length)return null;var H=z?A:R,X=H(F).split(/\r|\n\r?/);e:for(var $=L.line,J=L.ch,se=P.lastLine()+1-X.length;$<=se;$++,J=0){var ce=P.getLine($).slice(J),pe=H(ce);if(X.length==1){var fe=pe.indexOf(X[0]);if(fe==-1)continue e;var L=O(ce,pe,fe,H)+J;return{from:r($,O(ce,pe,fe,H)+J),to:r($,O(ce,pe,fe+X[0].length,H)+J)}}else{var b=pe.length-X[0].length;if(pe.slice(b)!=X[0])continue e;for(var p=1;p<X.length-1;p++)if(H(P.getLine($+p))!=X[p])continue e;var ee=P.getLine($+X.length-1),E=H(ee),me=X[X.length-1];if(E.slice(0,me.length)!=me)continue e;return{from:r($,O(ce,pe,b,H)+J),to:r($+X.length-1,O(ee,E,me.length,H))}}}}function k(P,F,L,z){if(!F.length)return null;var H=z?A:R,X=H(F).split(/\r|\n\r?/);e:for(var $=L.line,J=L.ch,se=P.firstLine()-1+X.length;$>=se;$--,J=-1){var ce=P.getLine($);J>-1&&(ce=ce.slice(0,J));var pe=H(ce);if(X.length==1){var fe=pe.lastIndexOf(X[0]);if(fe==-1)continue e;return{from:r($,O(ce,pe,fe,H)),to:r($,O(ce,pe,fe+X[0].length,H))}}else{var b=X[X.length-1];if(pe.slice(0,b.length)!=b)continue e;for(var p=1,L=$-X.length+1;p<X.length-1;p++)if(H(P.getLine(L+p))!=X[p])continue e;var ee=P.getLine($+1-X.length),E=H(ee);if(E.slice(E.length-X[0].length)!=X[0])continue e;return{from:r($+1-X.length,O(ee,E,ee.length-X[0].length,H)),to:r($,O(ce,pe,b.length,H))}}}}function D(P,F,L,z){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=P,L=L?P.clipPos(L):r(0,0),this.pos={from:L,to:L};var H;typeof z=="object"?H=z.caseFold:(H=z,z=null),typeof F=="string"?(H==null&&(H=!1),this.matches=function(X,$){return(X?k:N)(P,F,$,H)}):(F=l(F,"gm"),!z||z.multiline!==!1?this.matches=function(X,$){return(X?S:m)(P,F,$)}:this.matches=function(X,$){return(X?w:h)(P,F,$)})}D.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(P){var F=this.doc.clipPos(P?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(F=r(F.line,F.ch),P?(F.ch--,F.ch<0&&(F.line--,F.ch=(this.doc.getLine(F.line)||"").length)):(F.ch++,F.ch>(this.doc.getLine(F.line)||"").length&&(F.ch=0,F.line++)),t.cmpPos(F,this.doc.clipPos(F))!=0))return this.atOccurrence=!1;var L=this.matches(P,F);if(this.afterEmptyMatch=L&&t.cmpPos(L.from,L.to)==0,L)return this.pos=L,this.atOccurrence=!0,this.pos.match||!0;var z=r(P?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:z,to:z},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(P,F){if(!!this.atOccurrence){var L=t.splitLines(P);this.doc.replaceRange(L,this.pos.from,this.pos.to,F),this.pos.to=r(this.pos.from.line+L.length-1,L[L.length-1].length+(L.length==1?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(P,F,L){return new D(this.doc,P,F,L)}),t.defineDocExtension("getSearchCursor",function(P,F,L){return new D(this,P,F,L)}),t.defineExtension("selectMatches",function(P,F){for(var L=[],z=this.getSearchCursor(P,this.getCursor("from"),F);z.findNext()&&!(t.cmpPos(z.to(),this.getCursor("to"))>0);)L.push({anchor:z.from(),head:z.to()});L.length&&this.setSelections(L,0)})})})();var z5={exports:{}};(function(s,e){(function(t){t(fu.exports)})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),o=t.Pos,l={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function u(A){return A&&A.bracketRegex||/[(){}[\]]/}function h(A,R,O){var N=A.getLineHandle(R.line),k=R.ch-1,D=O&&O.afterCursor;D==null&&(D=/(^| )cm-fat-cursor($| )/.test(A.getWrapperElement().className));var P=u(O),F=!D&&k>=0&&P.test(N.text.charAt(k))&&l[N.text.charAt(k)]||P.test(N.text.charAt(k+1))&&l[N.text.charAt(++k)];if(!F)return null;var L=F.charAt(1)==">"?1:-1;if(O&&O.strict&&L>0!=(k==R.ch))return null;var z=A.getTokenTypeAt(o(R.line,k+1)),H=m(A,o(R.line,k+(L>0?1:0)),L,z,O);return H==null?null:{from:o(R.line,k),to:H&&H.pos,match:H&&H.ch==F.charAt(0),forward:L>0}}function m(A,R,O,N,k){for(var D=k&&k.maxScanLineLength||1e4,P=k&&k.maxScanLines||1e3,F=[],L=u(k),z=O>0?Math.min(R.line+P,A.lastLine()+1):Math.max(A.firstLine()-1,R.line-P),H=R.line;H!=z;H+=O){var X=A.getLine(H);if(!!X){var $=O>0?0:X.length-1,J=O>0?X.length:-1;if(!(X.length>D))for(H==R.line&&($=R.ch-(O<0?1:0));$!=J;$+=O){var se=X.charAt($);if(L.test(se)&&(N===void 0||(A.getTokenTypeAt(o(H,$+1))||"")==(N||""))){var ce=l[se];if(ce&&ce.charAt(1)==">"==O>0)F.push(se);else if(F.length)F.pop();else return{pos:o(H,$),ch:se}}}}}return H-O==(O>0?A.lastLine():A.firstLine())?!1:null}function v(A,R,O){for(var N=A.state.matchBrackets.maxHighlightLineLength||1e3,k=O&&O.highlightNonMatching,D=[],P=A.listSelections(),F=0;F<P.length;F++){var L=P[F].empty()&&h(A,P[F].head,O);if(L&&(L.match||k!==!1)&&A.getLine(L.from.line).length<=N){var z=L.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";D.push(A.markText(L.from,o(L.from.line,L.from.ch+1),{className:z})),L.to&&A.getLine(L.to.line).length<=N&&D.push(A.markText(L.to,o(L.to.line,L.to.ch+1),{className:z}))}}if(D.length){r&&A.state.focused&&A.focus();var H=function(){A.operation(function(){for(var X=0;X<D.length;X++)D[X].clear()})};if(R)setTimeout(H,800);else return H}}function w(A){A.operation(function(){A.state.matchBrackets.currentlyHighlighted&&(A.state.matchBrackets.currentlyHighlighted(),A.state.matchBrackets.currentlyHighlighted=null),A.state.matchBrackets.currentlyHighlighted=v(A,!1,A.state.matchBrackets)})}function S(A){A.state.matchBrackets&&A.state.matchBrackets.currentlyHighlighted&&(A.state.matchBrackets.currentlyHighlighted(),A.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(A,R,O){O&&O!=t.Init&&(A.off("cursorActivity",w),A.off("focus",w),A.off("blur",S),S(A)),R&&(A.state.matchBrackets=typeof R=="object"?R:{},A.on("cursorActivity",w),A.on("focus",w),A.on("blur",S))}),t.defineExtension("matchBrackets",function(){v(this,!0)}),t.defineExtension("findMatchingBracket",function(A,R,O){return(O||typeof R=="boolean")&&(O?(O.strict=R,R=O):R=R?{strict:!0}:null),h(this,A,R)}),t.defineExtension("scanForBracket",function(A,R,O,N){return m(this,A,R,O,N)})})})();(function(s,e){(function(t){t(fu.exports,B5.exports,z5.exports)})(function(t){var r=t.commands,o=t.Pos;function l(L,z,H){if(H<0&&z.ch==0)return L.clipPos(o(z.line-1));var X=L.getLine(z.line);if(H>0&&z.ch>=X.length)return L.clipPos(o(z.line+1,0));for(var $="start",J,se=z.ch,ce=se,pe=H<0?0:X.length,fe=0;ce!=pe;ce+=H,fe++){var b=X.charAt(H<0?ce-1:ce),p=b!="_"&&t.isWordChar(b)?"w":"o";if(p=="w"&&b.toUpperCase()==b&&(p="W"),$=="start")p!="o"?($="in",J=p):se=ce+H;else if($=="in"&&J!=p){if(J=="w"&&p=="W"&&H<0&&ce--,J=="W"&&p=="w"&&H>0)if(ce==se+1){J="w";continue}else ce--;break}}return o(z.line,ce)}function u(L,z){L.extendSelectionsBy(function(H){return L.display.shift||L.doc.extend||H.empty()?l(L.doc,H.head,z):z<0?H.from():H.to()})}r.goSubwordLeft=function(L){u(L,-1)},r.goSubwordRight=function(L){u(L,1)},r.scrollLineUp=function(L){var z=L.getScrollInfo();if(!L.somethingSelected()){var H=L.lineAtHeight(z.top+z.clientHeight,"local");L.getCursor().line>=H&&L.execCommand("goLineUp")}L.scrollTo(null,z.top-L.defaultTextHeight())},r.scrollLineDown=function(L){var z=L.getScrollInfo();if(!L.somethingSelected()){var H=L.lineAtHeight(z.top,"local")+1;L.getCursor().line<=H&&L.execCommand("goLineDown")}L.scrollTo(null,z.top+L.defaultTextHeight())},r.splitSelectionByLine=function(L){for(var z=L.listSelections(),H=[],X=0;X<z.length;X++)for(var $=z[X].from(),J=z[X].to(),se=$.line;se<=J.line;++se)J.line>$.line&&se==J.line&&J.ch==0||H.push({anchor:se==$.line?$:o(se,0),head:se==J.line?J:o(se)});L.setSelections(H,0)},r.singleSelectionTop=function(L){var z=L.listSelections()[0];L.setSelection(z.anchor,z.head,{scroll:!1})},r.selectLine=function(L){for(var z=L.listSelections(),H=[],X=0;X<z.length;X++){var $=z[X];H.push({anchor:o($.from().line,0),head:o($.to().line+1,0)})}L.setSelections(H)};function h(L,z){if(L.isReadOnly())return t.Pass;L.operation(function(){for(var H=L.listSelections().length,X=[],$=-1,J=0;J<H;J++){var se=L.listSelections()[J].head;if(!(se.line<=$)){var ce=o(se.line+(z?0:1),0);L.replaceRange(`
`,ce,null,"+insertLine"),L.indentLine(ce.line,null,!0),X.push({head:ce,anchor:ce}),$=se.line+1}}L.setSelections(X)}),L.execCommand("indentAuto")}r.insertLineAfter=function(L){return h(L,!1)},r.insertLineBefore=function(L){return h(L,!0)};function m(L,z){for(var H=z.ch,X=H,$=L.getLine(z.line);H&&t.isWordChar($.charAt(H-1));)--H;for(;X<$.length&&t.isWordChar($.charAt(X));)++X;return{from:o(z.line,H),to:o(z.line,X),word:$.slice(H,X)}}r.selectNextOccurrence=function(L){var z=L.getCursor("from"),H=L.getCursor("to"),X=L.state.sublimeFindFullWord==L.doc.sel;if(t.cmpPos(z,H)==0){var $=m(L,z);if(!$.word)return;L.setSelection($.from,$.to),X=!0}else{var J=L.getRange(z,H),se=X?new RegExp("\\b"+J+"\\b"):J,ce=L.getSearchCursor(se,H),pe=ce.findNext();if(pe||(ce=L.getSearchCursor(se,o(L.firstLine(),0)),pe=ce.findNext()),!pe||w(L.listSelections(),ce.from(),ce.to()))return;L.addSelection(ce.from(),ce.to())}X&&(L.state.sublimeFindFullWord=L.doc.sel)},r.skipAndSelectNextOccurrence=function(L){var z=L.getCursor("anchor"),H=L.getCursor("head");r.selectNextOccurrence(L),t.cmpPos(z,H)!=0&&L.doc.setSelections(L.doc.listSelections().filter(function(X){return X.anchor!=z||X.head!=H}))};function v(L,z){for(var H=L.listSelections(),X=[],$=0;$<H.length;$++){var J=H[$],se=L.findPosV(J.anchor,z,"line",J.anchor.goalColumn),ce=L.findPosV(J.head,z,"line",J.head.goalColumn);se.goalColumn=J.anchor.goalColumn!=null?J.anchor.goalColumn:L.cursorCoords(J.anchor,"div").left,ce.goalColumn=J.head.goalColumn!=null?J.head.goalColumn:L.cursorCoords(J.head,"div").left;var pe={anchor:se,head:ce};X.push(J),X.push(pe)}L.setSelections(X)}r.addCursorToPrevLine=function(L){v(L,-1)},r.addCursorToNextLine=function(L){v(L,1)};function w(L,z,H){for(var X=0;X<L.length;X++)if(t.cmpPos(L[X].from(),z)==0&&t.cmpPos(L[X].to(),H)==0)return!0;return!1}var S="(){}[]";function A(L){for(var z=L.listSelections(),H=[],X=0;X<z.length;X++){var $=z[X],J=$.head,se=L.scanForBracket(J,-1);if(!se)return!1;for(;;){var ce=L.scanForBracket(J,1);if(!ce)return!1;if(ce.ch==S.charAt(S.indexOf(se.ch)+1)){var pe=o(se.pos.line,se.pos.ch+1);if(t.cmpPos(pe,$.from())==0&&t.cmpPos(ce.pos,$.to())==0){if(se=L.scanForBracket(se.pos,-1),!se)return!1}else{H.push({anchor:pe,head:ce.pos});break}}J=o(ce.pos.line,ce.pos.ch+1)}}return L.setSelections(H),!0}r.selectScope=function(L){A(L)||L.execCommand("selectAll")},r.selectBetweenBrackets=function(L){if(!A(L))return t.Pass};function R(L){return L?/\bpunctuation\b/.test(L)?L:void 0:null}r.goToBracket=function(L){L.extendSelectionsBy(function(z){var H=L.scanForBracket(z.head,1,R(L.getTokenTypeAt(z.head)));if(H&&t.cmpPos(H.pos,z.head)!=0)return H.pos;var X=L.scanForBracket(z.head,-1,R(L.getTokenTypeAt(o(z.head.line,z.head.ch+1))));return X&&o(X.pos.line,X.pos.ch+1)||z.head})},r.swapLineUp=function(L){if(L.isReadOnly())return t.Pass;for(var z=L.listSelections(),H=[],X=L.firstLine()-1,$=[],J=0;J<z.length;J++){var se=z[J],ce=se.from().line-1,pe=se.to().line;$.push({anchor:o(se.anchor.line-1,se.anchor.ch),head:o(se.head.line-1,se.head.ch)}),se.to().ch==0&&!se.empty()&&--pe,ce>X?H.push(ce,pe):H.length&&(H[H.length-1]=pe),X=pe}L.operation(function(){for(var fe=0;fe<H.length;fe+=2){var b=H[fe],p=H[fe+1],ee=L.getLine(b);L.replaceRange("",o(b,0),o(b+1,0),"+swapLine"),p>L.lastLine()?L.replaceRange(`
`+ee,o(L.lastLine()),null,"+swapLine"):L.replaceRange(ee+`
`,o(p,0),null,"+swapLine")}L.setSelections($),L.scrollIntoView()})},r.swapLineDown=function(L){if(L.isReadOnly())return t.Pass;for(var z=L.listSelections(),H=[],X=L.lastLine()+1,$=z.length-1;$>=0;$--){var J=z[$],se=J.to().line+1,ce=J.from().line;J.to().ch==0&&!J.empty()&&se--,se<X?H.push(se,ce):H.length&&(H[H.length-1]=ce),X=ce}L.operation(function(){for(var pe=H.length-2;pe>=0;pe-=2){var fe=H[pe],b=H[pe+1],p=L.getLine(fe);fe==L.lastLine()?L.replaceRange("",o(fe-1),o(fe),"+swapLine"):L.replaceRange("",o(fe,0),o(fe+1,0),"+swapLine"),L.replaceRange(p+`
`,o(b,0),null,"+swapLine")}L.scrollIntoView()})},r.toggleCommentIndented=function(L){L.toggleComment({indent:!0})},r.joinLines=function(L){for(var z=L.listSelections(),H=[],X=0;X<z.length;X++){for(var $=z[X],J=$.from(),se=J.line,ce=$.to().line;X<z.length-1&&z[X+1].from().line==ce;)ce=z[++X].to().line;H.push({start:se,end:ce,anchor:!$.empty()&&J})}L.operation(function(){for(var pe=0,fe=[],b=0;b<H.length;b++){for(var p=H[b],ee=p.anchor&&o(p.anchor.line-pe,p.anchor.ch),E,me=p.start;me<=p.end;me++){var Se=me-pe;me==p.end&&(E=o(Se,L.getLine(Se).length+1)),Se<L.lastLine()&&(L.replaceRange(" ",o(Se),o(Se+1,/^\s*/.exec(L.getLine(Se+1))[0].length)),++pe)}fe.push({anchor:ee||E,head:E})}L.setSelections(fe,0)})},r.duplicateLine=function(L){L.operation(function(){for(var z=L.listSelections().length,H=0;H<z;H++){var X=L.listSelections()[H];X.empty()?L.replaceRange(L.getLine(X.head.line)+`
`,o(X.head.line,0)):L.replaceRange(L.getRange(X.from(),X.to()),X.from())}L.scrollIntoView()})};function O(L,z,H){if(L.isReadOnly())return t.Pass;for(var X=L.listSelections(),$=[],J,se=0;se<X.length;se++){var ce=X[se];if(!ce.empty()){for(var pe=ce.from().line,fe=ce.to().line;se<X.length-1&&X[se+1].from().line==fe;)fe=X[++se].to().line;X[se].to().ch||fe--,$.push(pe,fe)}}$.length?J=!0:$.push(L.firstLine(),L.lastLine()),L.operation(function(){for(var b=[],p=0;p<$.length;p+=2){var ee=$[p],E=$[p+1],me=o(ee,0),Se=o(E),Te=L.getRange(me,Se,!1);z?Te.sort(function(ye,de){return ye<de?-H:ye==de?0:H}):Te.sort(function(ye,de){var Re=ye.toUpperCase(),we=de.toUpperCase();return Re!=we&&(ye=Re,de=we),ye<de?-H:ye==de?0:H}),L.replaceRange(Te,me,Se),J&&b.push({anchor:me,head:o(E+1,0)})}J&&L.setSelections(b,0)})}r.sortLines=function(L){O(L,!0,1)},r.reverseSortLines=function(L){O(L,!0,-1)},r.sortLinesInsensitive=function(L){O(L,!1,1)},r.reverseSortLinesInsensitive=function(L){O(L,!1,-1)},r.nextBookmark=function(L){var z=L.state.sublimeBookmarks;if(z)for(;z.length;){var H=z.shift(),X=H.find();if(X)return z.push(H),L.setSelection(X.from,X.to)}},r.prevBookmark=function(L){var z=L.state.sublimeBookmarks;if(z)for(;z.length;){z.unshift(z.pop());var H=z[z.length-1].find();if(!H)z.pop();else return L.setSelection(H.from,H.to)}},r.toggleBookmark=function(L){for(var z=L.listSelections(),H=L.state.sublimeBookmarks||(L.state.sublimeBookmarks=[]),X=0;X<z.length;X++){for(var $=z[X].from(),J=z[X].to(),se=z[X].empty()?L.findMarksAt($):L.findMarks($,J),ce=0;ce<se.length;ce++)if(se[ce].sublimeBookmark){se[ce].clear();for(var pe=0;pe<H.length;pe++)H[pe]==se[ce]&&H.splice(pe--,1);break}ce==se.length&&H.push(L.markText($,J,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},r.clearBookmarks=function(L){var z=L.state.sublimeBookmarks;if(z)for(var H=0;H<z.length;H++)z[H].clear();z.length=0},r.selectBookmarks=function(L){var z=L.state.sublimeBookmarks,H=[];if(z)for(var X=0;X<z.length;X++){var $=z[X].find();$?H.push({anchor:$.from,head:$.to}):z.splice(X--,0)}H.length&&L.setSelections(H,0)};function N(L,z){L.operation(function(){for(var H=L.listSelections(),X=[],$=[],J=0;J<H.length;J++){var se=H[J];se.empty()?(X.push(J),$.push("")):$.push(z(L.getRange(se.from(),se.to())))}L.replaceSelections($,"around","case");for(var J=X.length-1,ce;J>=0;J--){var se=H[X[J]];if(!(ce&&t.cmpPos(se.head,ce)>0)){var pe=m(L,se.head);ce=pe.from,L.replaceRange(z(pe.word),pe.from,pe.to)}}})}r.smartBackspace=function(L){if(L.somethingSelected())return t.Pass;L.operation(function(){for(var z=L.listSelections(),H=L.getOption("indentUnit"),X=z.length-1;X>=0;X--){var $=z[X].head,J=L.getRange({line:$.line,ch:0},$),se=t.countColumn(J,null,L.getOption("tabSize")),ce=L.findPosH($,-1,"char",!1);if(J&&!/\S/.test(J)&&se%H==0){var pe=new o($.line,t.findColumn(J,se-H,H));pe.ch!=$.ch&&(ce=pe)}L.replaceRange("",ce,$,"+delete")}})},r.delLineRight=function(L){L.operation(function(){for(var z=L.listSelections(),H=z.length-1;H>=0;H--)L.replaceRange("",z[H].anchor,o(z[H].to().line),"+delete");L.scrollIntoView()})},r.upcaseAtCursor=function(L){N(L,function(z){return z.toUpperCase()})},r.downcaseAtCursor=function(L){N(L,function(z){return z.toLowerCase()})},r.setSublimeMark=function(L){L.state.sublimeMark&&L.state.sublimeMark.clear(),L.state.sublimeMark=L.setBookmark(L.getCursor())},r.selectToSublimeMark=function(L){var z=L.state.sublimeMark&&L.state.sublimeMark.find();z&&L.setSelection(L.getCursor(),z)},r.deleteToSublimeMark=function(L){var z=L.state.sublimeMark&&L.state.sublimeMark.find();if(z){var H=L.getCursor(),X=z;if(t.cmpPos(H,X)>0){var $=X;X=H,H=$}L.state.sublimeKilled=L.getRange(H,X),L.replaceRange("",H,X)}},r.swapWithSublimeMark=function(L){var z=L.state.sublimeMark&&L.state.sublimeMark.find();z&&(L.state.sublimeMark.clear(),L.state.sublimeMark=L.setBookmark(L.getCursor()),L.setCursor(z))},r.sublimeYank=function(L){L.state.sublimeKilled!=null&&L.replaceSelection(L.state.sublimeKilled,null,"paste")},r.showInCenter=function(L){var z=L.cursorCoords(null,"local");L.scrollTo(null,(z.top+z.bottom)/2-L.getScrollInfo().clientHeight/2)};function k(L){var z=L.getCursor("from"),H=L.getCursor("to");if(t.cmpPos(z,H)==0){var X=m(L,z);if(!X.word)return;z=X.from,H=X.to}return{from:z,to:H,query:L.getRange(z,H),word:X}}function D(L,z){var H=k(L);if(!!H){var X=H.query,$=L.getSearchCursor(X,z?H.to:H.from);(z?$.findNext():$.findPrevious())?L.setSelection($.from(),$.to()):($=L.getSearchCursor(X,z?o(L.firstLine(),0):L.clipPos(o(L.lastLine()))),(z?$.findNext():$.findPrevious())?L.setSelection($.from(),$.to()):H.word&&L.setSelection(H.from,H.to))}}r.findUnder=function(L){D(L,!0)},r.findUnderPrevious=function(L){D(L,!1)},r.findAllUnder=function(L){var z=k(L);if(!!z){for(var H=L.getSearchCursor(z.query),X=[],$=-1;H.findNext();)X.push({anchor:H.from(),head:H.to()}),H.from().line<=z.from.line&&H.from().ch<=z.from.ch&&$++;L.setSelections(X,$)}};var P=t.keyMap;P.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},t.normalizeKeyMap(P.macSublime),P.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},t.normalizeKeyMap(P.pcSublime);var F=P.default==P.macDefault;P.sublime=F?P.macSublime:P.pcSublime})})();(function(s,e){(function(t){t(fu.exports)})(function(t){t.defineMode("javascript",function(r,o){var l=r.indentUnit,u=o.statementIndent,h=o.jsonld,m=o.json||h,v=o.trackScope!==!1,w=o.typescript,S=o.wordCharacters||/[\w$\xa1-\uffff]/,A=function(){function ie(xr){return{type:xr,style:"keyword"}}var xe=ie("keyword a"),ze=ie("keyword b"),Ke=ie("keyword c"),kt=ie("keyword d"),Qt=ie("operator"),ct={type:"atom",style:"atom"};return{if:ie("if"),while:xe,with:xe,else:ze,do:ze,try:ze,finally:ze,return:kt,break:kt,continue:kt,new:ie("new"),delete:Ke,void:Ke,throw:Ke,debugger:ie("debugger"),var:ie("var"),const:ie("var"),let:ie("var"),function:ie("function"),catch:ie("catch"),for:ie("for"),switch:ie("switch"),case:ie("case"),default:ie("default"),in:Qt,typeof:Qt,instanceof:Qt,true:ct,false:ct,null:ct,undefined:ct,NaN:ct,Infinity:ct,this:ie("this"),class:ie("class"),super:ie("atom"),yield:Ke,export:ie("export"),import:ie("import"),extends:Ke,await:Ke}}(),R=/[+\-*&%=<>!?|~^@]/,O=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function N(ie){for(var xe=!1,ze,Ke=!1;(ze=ie.next())!=null;){if(!xe){if(ze=="/"&&!Ke)return;ze=="["?Ke=!0:Ke&&ze=="]"&&(Ke=!1)}xe=!xe&&ze=="\\"}}var k,D;function P(ie,xe,ze){return k=ie,D=ze,xe}function F(ie,xe){var ze=ie.next();if(ze=='"'||ze=="'")return xe.tokenize=L(ze),xe.tokenize(ie,xe);if(ze=="."&&ie.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return P("number","number");if(ze=="."&&ie.match(".."))return P("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ze))return P(ze);if(ze=="="&&ie.eat(">"))return P("=>","operator");if(ze=="0"&&ie.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return P("number","number");if(/\d/.test(ze))return ie.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),P("number","number");if(ze=="/")return ie.eat("*")?(xe.tokenize=z,z(ie,xe)):ie.eat("/")?(ie.skipToEnd(),P("comment","comment")):$e(ie,xe,1)?(N(ie),ie.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),P("regexp","string-2")):(ie.eat("="),P("operator","operator",ie.current()));if(ze=="`")return xe.tokenize=H,H(ie,xe);if(ze=="#"&&ie.peek()=="!")return ie.skipToEnd(),P("meta","meta");if(ze=="#"&&ie.eatWhile(S))return P("variable","property");if(ze=="<"&&ie.match("!--")||ze=="-"&&ie.match("->")&&!/\S/.test(ie.string.slice(0,ie.start)))return ie.skipToEnd(),P("comment","comment");if(R.test(ze))return(ze!=">"||!xe.lexical||xe.lexical.type!=">")&&(ie.eat("=")?(ze=="!"||ze=="=")&&ie.eat("="):/[<>*+\-|&?]/.test(ze)&&(ie.eat(ze),ze==">"&&ie.eat(ze))),ze=="?"&&ie.eat(".")?P("."):P("operator","operator",ie.current());if(S.test(ze)){ie.eatWhile(S);var Ke=ie.current();if(xe.lastType!="."){if(A.propertyIsEnumerable(Ke)){var kt=A[Ke];return P(kt.type,kt.style,Ke)}if(Ke=="async"&&ie.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return P("async","keyword",Ke)}return P("variable","variable",Ke)}}function L(ie){return function(xe,ze){var Ke=!1,kt;if(h&&xe.peek()=="@"&&xe.match(O))return ze.tokenize=F,P("jsonld-keyword","meta");for(;(kt=xe.next())!=null&&!(kt==ie&&!Ke);)Ke=!Ke&&kt=="\\";return Ke||(ze.tokenize=F),P("string","string")}}function z(ie,xe){for(var ze=!1,Ke;Ke=ie.next();){if(Ke=="/"&&ze){xe.tokenize=F;break}ze=Ke=="*"}return P("comment","comment")}function H(ie,xe){for(var ze=!1,Ke;(Ke=ie.next())!=null;){if(!ze&&(Ke=="`"||Ke=="$"&&ie.eat("{"))){xe.tokenize=F;break}ze=!ze&&Ke=="\\"}return P("quasi","string-2",ie.current())}var X="([{}])";function $(ie,xe){xe.fatArrowAt&&(xe.fatArrowAt=null);var ze=ie.string.indexOf("=>",ie.start);if(!(ze<0)){if(w){var Ke=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ie.string.slice(ie.start,ze));Ke&&(ze=Ke.index)}for(var kt=0,Qt=!1,ct=ze-1;ct>=0;--ct){var xr=ie.string.charAt(ct),ri=X.indexOf(xr);if(ri>=0&&ri<3){if(!kt){++ct;break}if(--kt==0){xr=="("&&(Qt=!0);break}}else if(ri>=3&&ri<6)++kt;else if(S.test(xr))Qt=!0;else if(/["'\/`]/.test(xr))for(;;--ct){if(ct==0)return;var Vo=ie.string.charAt(ct-1);if(Vo==xr&&ie.string.charAt(ct-2)!="\\"){ct--;break}}else if(Qt&&!kt){++ct;break}}Qt&&!kt&&(xe.fatArrowAt=ct)}}var J={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function se(ie,xe,ze,Ke,kt,Qt){this.indented=ie,this.column=xe,this.type=ze,this.prev=kt,this.info=Qt,Ke!=null&&(this.align=Ke)}function ce(ie,xe){if(!v)return!1;for(var ze=ie.localVars;ze;ze=ze.next)if(ze.name==xe)return!0;for(var Ke=ie.context;Ke;Ke=Ke.prev)for(var ze=Ke.vars;ze;ze=ze.next)if(ze.name==xe)return!0}function pe(ie,xe,ze,Ke,kt){var Qt=ie.cc;for(fe.state=ie,fe.stream=kt,fe.marked=null,fe.cc=Qt,fe.style=xe,ie.lexical.hasOwnProperty("align")||(ie.lexical.align=!0);;){var ct=Qt.length?Qt.pop():m?We:qe;if(ct(ze,Ke)){for(;Qt.length&&Qt[Qt.length-1].lex;)Qt.pop()();return fe.marked?fe.marked:ze=="variable"&&ce(ie,Ke)?"variable-2":xe}}}var fe={state:null,column:null,marked:null,cc:null};function b(){for(var ie=arguments.length-1;ie>=0;ie--)fe.cc.push(arguments[ie])}function p(){return b.apply(null,arguments),!0}function ee(ie,xe){for(var ze=xe;ze;ze=ze.next)if(ze.name==ie)return!0;return!1}function E(ie){var xe=fe.state;if(fe.marked="def",!!v){if(xe.context){if(xe.lexical.info=="var"&&xe.context&&xe.context.block){var ze=me(ie,xe.context);if(ze!=null){xe.context=ze;return}}else if(!ee(ie,xe.localVars)){xe.localVars=new ye(ie,xe.localVars);return}}o.globalVars&&!ee(ie,xe.globalVars)&&(xe.globalVars=new ye(ie,xe.globalVars))}}function me(ie,xe){if(xe)if(xe.block){var ze=me(ie,xe.prev);return ze?ze==xe.prev?xe:new Te(ze,xe.vars,!0):null}else return ee(ie,xe.vars)?xe:new Te(xe.prev,new ye(ie,xe.vars),!1);else return null}function Se(ie){return ie=="public"||ie=="private"||ie=="protected"||ie=="abstract"||ie=="readonly"}function Te(ie,xe,ze){this.prev=ie,this.vars=xe,this.block=ze}function ye(ie,xe){this.name=ie,this.next=xe}var de=new ye("this",new ye("arguments",null));function Re(){fe.state.context=new Te(fe.state.context,fe.state.localVars,!1),fe.state.localVars=de}function we(){fe.state.context=new Te(fe.state.context,fe.state.localVars,!0),fe.state.localVars=null}Re.lex=we.lex=!0;function Ie(){fe.state.localVars=fe.state.context.vars,fe.state.context=fe.state.context.prev}Ie.lex=!0;function Me(ie,xe){var ze=function(){var Ke=fe.state,kt=Ke.indented;if(Ke.lexical.type=="stat")kt=Ke.lexical.indented;else for(var Qt=Ke.lexical;Qt&&Qt.type==")"&&Qt.align;Qt=Qt.prev)kt=Qt.indented;Ke.lexical=new se(kt,fe.stream.column(),ie,null,Ke.lexical,xe)};return ze.lex=!0,ze}function Be(){var ie=fe.state;ie.lexical.prev&&(ie.lexical.type==")"&&(ie.indented=ie.lexical.indented),ie.lexical=ie.lexical.prev)}Be.lex=!0;function Ve(ie){function xe(ze){return ze==ie?p():ie==";"||ze=="}"||ze==")"||ze=="]"?b():p(xe)}return xe}function qe(ie,xe){return ie=="var"?p(Me("vardef",xe),wn,Ve(";"),Be):ie=="keyword a"?p(Me("form"),Pe,qe,Be):ie=="keyword b"?p(Me("form"),qe,Be):ie=="keyword d"?fe.stream.match(/^\s*$/,!1)?p():p(Me("stat"),Fe,Ve(";"),Be):ie=="debugger"?p(Ve(";")):ie=="{"?p(Me("}"),we,G,Be,Ie):ie==";"?p():ie=="if"?(fe.state.lexical.info=="else"&&fe.state.cc[fe.state.cc.length-1]==Be&&fe.state.cc.pop()(),p(Me("form"),Pe,qe,Be,Le)):ie=="function"?p(yt):ie=="for"?p(Me("form"),we,Ne,qe,Ie,Be):ie=="class"||w&&xe=="interface"?(fe.marked="keyword",p(Me("form",ie=="class"?ie:xe),jt,Be)):ie=="variable"?w&&xe=="declare"?(fe.marked="keyword",p(qe)):w&&(xe=="module"||xe=="enum"||xe=="type")&&fe.stream.match(/^\s*\w/,!1)?(fe.marked="keyword",xe=="enum"?p(Ar):xe=="type"?p(It,Ve("operator"),ae,Ve(";")):p(Me("form"),en,Ve("{"),Me("}"),G,Be,Be)):w&&xe=="namespace"?(fe.marked="keyword",p(Me("form"),We,qe,Be)):w&&xe=="abstract"?(fe.marked="keyword",p(qe)):p(Me("stat"),f):ie=="switch"?p(Me("form"),Pe,Ve("{"),Me("}","switch"),we,G,Be,Be,Ie):ie=="case"?p(We,Ve(":")):ie=="default"?p(Ve(":")):ie=="catch"?p(Me("form"),Re,W,qe,Be,Ie):ie=="export"?p(Me("stat"),xi,Be):ie=="import"?p(Me("stat"),sn,Be):ie=="async"?p(qe):xe=="@"?p(We,qe):b(Me("stat"),We,Ve(";"),Be)}function W(ie){if(ie=="(")return p(At,Ve(")"))}function We(ie,xe){return Ye(ie,xe,!1)}function De(ie,xe){return Ye(ie,xe,!0)}function Pe(ie){return ie!="("?b():p(Me(")"),Fe,Ve(")"),Be)}function Ye(ie,xe,ze){if(fe.state.fatArrowAt==fe.stream.start){var Ke=ze?Y:Ft;if(ie=="(")return p(Re,Me(")"),I(At,")"),Be,Ve("=>"),Ke,Ie);if(ie=="variable")return b(Re,en,Ve("=>"),Ke,Ie)}var kt=ze?St:oe;return J.hasOwnProperty(ie)?p(kt):ie=="function"?p(yt,kt):ie=="class"||w&&xe=="interface"?(fe.marked="keyword",p(Me("form"),Kt,Be)):ie=="keyword c"||ie=="async"?p(ze?De:We):ie=="("?p(Me(")"),Fe,Ve(")"),Be,kt):ie=="operator"||ie=="spread"?p(ze?De:We):ie=="["?p(Me("]"),Wt,Be,kt):ie=="{"?B(y,"}",null,kt):ie=="quasi"?b(q,kt):ie=="new"?p(n(ze)):p()}function Fe(ie){return ie.match(/[;\}\)\],]/)?b():b(We)}function oe(ie,xe){return ie==","?p(Fe):St(ie,xe,!1)}function St(ie,xe,ze){var Ke=ze==!1?oe:St,kt=ze==!1?We:De;if(ie=="=>")return p(Re,ze?Y:Ft,Ie);if(ie=="operator")return/\+\+|--/.test(xe)||w&&xe=="!"?p(Ke):w&&xe=="<"&&fe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?p(Me(">"),I(ae,">"),Be,Ke):xe=="?"?p(We,Ve(":"),kt):p(kt);if(ie=="quasi")return b(q,Ke);if(ie!=";"){if(ie=="(")return B(De,")","call",Ke);if(ie==".")return p(g,Ke);if(ie=="[")return p(Me("]"),Fe,Ve("]"),Be,Ke);if(w&&xe=="as")return fe.marked="keyword",p(ae,Ke);if(ie=="regexp")return fe.state.lastType=fe.marked="operator",fe.stream.backUp(fe.stream.pos-fe.stream.start-1),p(kt)}}function q(ie,xe){return ie!="quasi"?b():xe.slice(xe.length-2)!="${"?p(q):p(Fe,Xe)}function Xe(ie){if(ie=="}")return fe.marked="string-2",fe.state.tokenize=H,p(q)}function Ft(ie){return $(fe.stream,fe.state),b(ie=="{"?qe:We)}function Y(ie){return $(fe.stream,fe.state),b(ie=="{"?qe:De)}function n(ie){return function(xe){return xe=="."?p(ie?a:i):xe=="variable"&&w?p(Et,ie?St:oe):b(ie?De:We)}}function i(ie,xe){if(xe=="target")return fe.marked="keyword",p(oe)}function a(ie,xe){if(xe=="target")return fe.marked="keyword",p(St)}function f(ie){return ie==":"?p(Be,qe):b(oe,Ve(";"),Be)}function g(ie){if(ie=="variable")return fe.marked="property",p()}function y(ie,xe){if(ie=="async")return fe.marked="property",p(y);if(ie=="variable"||fe.style=="keyword"){if(fe.marked="property",xe=="get"||xe=="set")return p(M);var ze;return w&&fe.state.fatArrowAt==fe.stream.start&&(ze=fe.stream.match(/^\s*:\s*/,!1))&&(fe.state.fatArrowAt=fe.stream.pos+ze[0].length),p(C)}else{if(ie=="number"||ie=="string")return fe.marked=h?"property":fe.style+" property",p(C);if(ie=="jsonld-keyword")return p(C);if(w&&Se(xe))return fe.marked="keyword",p(y);if(ie=="[")return p(We,V,Ve("]"),C);if(ie=="spread")return p(De,C);if(xe=="*")return fe.marked="keyword",p(y);if(ie==":")return b(C)}}function M(ie){return ie!="variable"?b(C):(fe.marked="property",p(yt))}function C(ie){if(ie==":")return p(De);if(ie=="(")return b(yt)}function I(ie,xe,ze){function Ke(kt,Qt){if(ze?ze.indexOf(kt)>-1:kt==","){var ct=fe.state.lexical;return ct.info=="call"&&(ct.pos=(ct.pos||0)+1),p(function(xr,ri){return xr==xe||ri==xe?b():b(ie)},Ke)}return kt==xe||Qt==xe?p():ze&&ze.indexOf(";")>-1?b(ie):p(Ve(xe))}return function(kt,Qt){return kt==xe||Qt==xe?p():b(ie,Ke)}}function B(ie,xe,ze){for(var Ke=3;Ke<arguments.length;Ke++)fe.cc.push(arguments[Ke]);return p(Me(xe,ze),I(ie,xe),Be)}function G(ie){return ie=="}"?p():b(qe,G)}function V(ie,xe){if(w){if(ie==":")return p(ae);if(xe=="?")return p(V)}}function Q(ie,xe){if(w&&(ie==":"||xe=="in"))return p(ae)}function Z(ie){if(w&&ie==":")return fe.stream.match(/^\s*\w+\s+is\b/,!1)?p(We,ne,ae):p(ae)}function ne(ie,xe){if(xe=="is")return fe.marked="keyword",p()}function ae(ie,xe){if(xe=="keyof"||xe=="typeof"||xe=="infer"||xe=="readonly")return fe.marked="keyword",p(xe=="typeof"?De:ae);if(ie=="variable"||xe=="void")return fe.marked="type",p(lt);if(xe=="|"||xe=="&")return p(ae);if(ie=="string"||ie=="number"||ie=="atom")return p(lt);if(ie=="[")return p(Me("]"),I(ae,"]",","),Be,lt);if(ie=="{")return p(Me("}"),he,Be,lt);if(ie=="(")return p(I(gt,")"),ue,lt);if(ie=="<")return p(I(ae,">"),ae);if(ie=="quasi")return b(He,lt)}function ue(ie){if(ie=="=>")return p(ae)}function he(ie){return ie.match(/[\}\)\]]/)?p():ie==","||ie==";"?p(he):b(Ce,he)}function Ce(ie,xe){if(ie=="variable"||fe.style=="keyword")return fe.marked="property",p(Ce);if(xe=="?"||ie=="number"||ie=="string")return p(Ce);if(ie==":")return p(ae);if(ie=="[")return p(Ve("variable"),Q,Ve("]"),Ce);if(ie=="(")return b(wt,Ce);if(!ie.match(/[;\}\)\],]/))return p()}function He(ie,xe){return ie!="quasi"?b():xe.slice(xe.length-2)!="${"?p(He):p(ae,Oe)}function Oe(ie){if(ie=="}")return fe.marked="string-2",fe.state.tokenize=H,p(He)}function gt(ie,xe){return ie=="variable"&&fe.stream.match(/^\s*[?:]/,!1)||xe=="?"?p(gt):ie==":"?p(ae):ie=="spread"?p(gt):b(ae)}function lt(ie,xe){if(xe=="<")return p(Me(">"),I(ae,">"),Be,lt);if(xe=="|"||ie=="."||xe=="&")return p(ae);if(ie=="[")return p(ae,Ve("]"),lt);if(xe=="extends"||xe=="implements")return fe.marked="keyword",p(ae);if(xe=="?")return p(ae,Ve(":"),ae)}function Et(ie,xe){if(xe=="<")return p(Me(">"),I(ae,">"),Be,lt)}function pt(){return b(ae,vt)}function vt(ie,xe){if(xe=="=")return p(ae)}function wn(ie,xe){return xe=="enum"?(fe.marked="keyword",p(Ar)):b(en,V,tn,ge)}function en(ie,xe){if(w&&Se(xe))return fe.marked="keyword",p(en);if(ie=="variable")return E(xe),p();if(ie=="spread")return p(en);if(ie=="[")return B(vn,"]");if(ie=="{")return B(En,"}")}function En(ie,xe){return ie=="variable"&&!fe.stream.match(/^\s*:/,!1)?(E(xe),p(tn)):(ie=="variable"&&(fe.marked="property"),ie=="spread"?p(en):ie=="}"?b():ie=="["?p(We,Ve("]"),Ve(":"),En):p(Ve(":"),en,tn))}function vn(){return b(en,tn)}function tn(ie,xe){if(xe=="=")return p(De)}function ge(ie){if(ie==",")return p(wn)}function Le(ie,xe){if(ie=="keyword b"&&xe=="else")return p(Me("form","else"),qe,Be)}function Ne(ie,xe){if(xe=="await")return p(Ne);if(ie=="(")return p(Me(")"),ke,Be)}function ke(ie){return ie=="var"?p(wn,be):ie=="variable"?p(be):b(be)}function be(ie,xe){return ie==")"?p():ie==";"?p(be):xe=="in"||xe=="of"?(fe.marked="keyword",p(We,be)):b(We,be)}function yt(ie,xe){if(xe=="*")return fe.marked="keyword",p(yt);if(ie=="variable")return E(xe),p(yt);if(ie=="(")return p(Re,Me(")"),I(At,")"),Be,Z,qe,Ie);if(w&&xe=="<")return p(Me(">"),I(pt,">"),Be,yt)}function wt(ie,xe){if(xe=="*")return fe.marked="keyword",p(wt);if(ie=="variable")return E(xe),p(wt);if(ie=="(")return p(Re,Me(")"),I(At,")"),Be,Z,Ie);if(w&&xe=="<")return p(Me(">"),I(pt,">"),Be,wt)}function It(ie,xe){if(ie=="keyword"||ie=="variable")return fe.marked="type",p(It);if(xe=="<")return p(Me(">"),I(pt,">"),Be)}function At(ie,xe){return xe=="@"&&p(We,At),ie=="spread"?p(At):w&&Se(xe)?(fe.marked="keyword",p(At)):w&&ie=="this"?p(V,tn):b(en,V,tn)}function Kt(ie,xe){return ie=="variable"?jt(ie,xe):Bt(ie,xe)}function jt(ie,xe){if(ie=="variable")return E(xe),p(Bt)}function Bt(ie,xe){if(xe=="<")return p(Me(">"),I(pt,">"),Be,Bt);if(xe=="extends"||xe=="implements"||w&&ie==",")return xe=="implements"&&(fe.marked="keyword"),p(w?ae:We,Bt);if(ie=="{")return p(Me("}"),rn,Be)}function rn(ie,xe){if(ie=="async"||ie=="variable"&&(xe=="static"||xe=="get"||xe=="set"||w&&Se(xe))&&fe.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return fe.marked="keyword",p(rn);if(ie=="variable"||fe.style=="keyword")return fe.marked="property",p(Vn,rn);if(ie=="number"||ie=="string")return p(Vn,rn);if(ie=="[")return p(We,V,Ve("]"),Vn,rn);if(xe=="*")return fe.marked="keyword",p(rn);if(w&&ie=="(")return b(wt,rn);if(ie==";"||ie==",")return p(rn);if(ie=="}")return p();if(xe=="@")return p(We,rn)}function Vn(ie,xe){if(xe=="!"||xe=="?")return p(Vn);if(ie==":")return p(ae,tn);if(xe=="=")return p(De);var ze=fe.state.lexical.prev,Ke=ze&&ze.info=="interface";return b(Ke?wt:yt)}function xi(ie,xe){return xe=="*"?(fe.marked="keyword",p(An,Ve(";"))):xe=="default"?(fe.marked="keyword",p(We,Ve(";"))):ie=="{"?p(I(_i,"}"),An,Ve(";")):b(qe)}function _i(ie,xe){if(xe=="as")return fe.marked="keyword",p(Ve("variable"));if(ie=="variable")return b(De,_i)}function sn(ie){return ie=="string"?p():ie=="("?b(We):ie=="."?b(oe):b(Ze,yr,An)}function Ze(ie,xe){return ie=="{"?B(Ze,"}"):(ie=="variable"&&E(xe),xe=="*"&&(fe.marked="keyword"),p(bn))}function yr(ie){if(ie==",")return p(Ze,yr)}function bn(ie,xe){if(xe=="as")return fe.marked="keyword",p(Ze)}function An(ie,xe){if(xe=="from")return fe.marked="keyword",p(We)}function Wt(ie){return ie=="]"?p():b(I(De,"]"))}function Ar(){return b(Me("form"),en,Ve("{"),Me("}"),I(Fi,"}"),Be,Be)}function Fi(){return b(en,tn)}function Wn(ie,xe){return ie.lastType=="operator"||ie.lastType==","||R.test(xe.charAt(0))||/[,.]/.test(xe.charAt(0))}function $e(ie,xe,ze){return xe.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xe.lastType)||xe.lastType=="quasi"&&/\{\s*$/.test(ie.string.slice(0,ie.pos-(ze||0)))}return{startState:function(ie){var xe={tokenize:F,lastType:"sof",cc:[],lexical:new se((ie||0)-l,0,"block",!1),localVars:o.localVars,context:o.localVars&&new Te(null,null,!1),indented:ie||0};return o.globalVars&&typeof o.globalVars=="object"&&(xe.globalVars=o.globalVars),xe},token:function(ie,xe){if(ie.sol()&&(xe.lexical.hasOwnProperty("align")||(xe.lexical.align=!1),xe.indented=ie.indentation(),$(ie,xe)),xe.tokenize!=z&&ie.eatSpace())return null;var ze=xe.tokenize(ie,xe);return k=="comment"?ze:(xe.lastType=k=="operator"&&(D=="++"||D=="--")?"incdec":k,pe(xe,ze,k,D,ie))},indent:function(ie,xe){if(ie.tokenize==z||ie.tokenize==H)return t.Pass;if(ie.tokenize!=F)return 0;var ze=xe&&xe.charAt(0),Ke=ie.lexical,kt;if(!/^\s*else\b/.test(xe))for(var Qt=ie.cc.length-1;Qt>=0;--Qt){var ct=ie.cc[Qt];if(ct==Be)Ke=Ke.prev;else if(ct!=Le&&ct!=Ie)break}for(;(Ke.type=="stat"||Ke.type=="form")&&(ze=="}"||(kt=ie.cc[ie.cc.length-1])&&(kt==oe||kt==St)&&!/^[,\.=+\-*:?[\(]/.test(xe));)Ke=Ke.prev;u&&Ke.type==")"&&Ke.prev.type=="stat"&&(Ke=Ke.prev);var xr=Ke.type,ri=ze==xr;return xr=="vardef"?Ke.indented+(ie.lastType=="operator"||ie.lastType==","?Ke.info.length+1:0):xr=="form"&&ze=="{"?Ke.indented:xr=="form"?Ke.indented+l:xr=="stat"?Ke.indented+(Wn(ie,xe)?u||l:0):Ke.info=="switch"&&!ri&&o.doubleIndentSwitch!=!1?Ke.indented+(/^(?:case|default)\b/.test(xe)?l:2*l):Ke.align?Ke.column+(ri?0:1):Ke.indented+(ri?0:l)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:h,jsonMode:m,expressionAllowed:$e,skipExpression:function(ie){pe(ie,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var Ad={},H5=_5(U5),pR=H5.jsx;function w0(){return w0=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},w0.apply(this,arguments)}function Cd(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cd=function(t){return typeof t}:Cd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(s)}var mR=function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var u in l)l.hasOwnProperty(u)&&(o[u]=l[u])},s(t,r)};return function(e,t){s(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Ad,"__esModule",{value:!0});Ad.UnControlled=V5=Ad.Controlled=void 0;var gR=Md.exports,Yi=typeof navigator=="undefined",no;Yi||(no=fu.exports);var M_=function(){function s(){}return s.equals=function(e,t){var r=this,o=Object.keys,l=Cd(e),u=Cd(t);return e&&t&&l==="object"&&l===u?o(e).length===o(t).length&&o(e).every(function(h){return r.equals(e[h],t[h])}):e===t},s}(),vR=function(){function s(e,t){this.editor=e,this.props=t}return s.prototype.delegateCursor=function(e,t,r){var o=this.editor.getDoc();r&&this.editor.focus(),t?o.setCursor(e):o.setCursor(e,null,{scroll:!1})},s.prototype.delegateScroll=function(e){this.editor.scrollTo(e.x,e.y)},s.prototype.delegateSelection=function(e,t){var r=this.editor.getDoc();r.setSelections(e),t&&this.editor.focus()},s.prototype.apply=function(e){e&&e.selection&&e.selection.ranges&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),e&&e.cursor&&this.delegateCursor(e.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1),e&&e.scroll&&this.delegateScroll(e.scroll)},s.prototype.applyNext=function(e,t,r){e&&e.selection&&e.selection.ranges&&t&&t.selection&&t.selection.ranges&&!M_.equals(e.selection.ranges,t.selection.ranges)&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),e&&e.cursor&&t&&t.cursor&&!M_.equals(e.cursor,t.cursor)&&this.delegateCursor(r.cursor||t.cursor,t.autoScroll||!1,t.autoCursor||!1),e&&e.scroll&&t&&t.scroll&&!M_.equals(e.scroll,t.scroll)&&this.delegateScroll(t.scroll)},s.prototype.applyUserDefined=function(e,t){t&&t.cursor&&this.delegateCursor(t.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1)},s.prototype.wire=function(e){var t=this;Object.keys(e||{}).filter(function(r){return/^on/.test(r)}).forEach(function(r){switch(r){case"onBlur":t.editor.on("blur",function(o,l){t.props.onBlur(t.editor,l)});break;case"onContextMenu":{t.editor.on("contextmenu",function(o,l){t.props.onContextMenu(t.editor,l)});break}case"onCopy":{t.editor.on("copy",function(o,l){t.props.onCopy(t.editor,l)});break}case"onCursor":t.editor.on("cursorActivity",function(o){t.props.onCursor(t.editor,t.editor.getDoc().getCursor())});break;case"onCursorActivity":t.editor.on("cursorActivity",function(o){t.props.onCursorActivity(t.editor)});break;case"onCut":{t.editor.on("cut",function(o,l){t.props.onCut(t.editor,l)});break}case"onDblClick":{t.editor.on("dblclick",function(o,l){t.props.onDblClick(t.editor,l)});break}case"onDragEnter":t.editor.on("dragenter",function(o,l){t.props.onDragEnter(t.editor,l)});break;case"onDragLeave":{t.editor.on("dragleave",function(o,l){t.props.onDragLeave(t.editor,l)});break}case"onDragOver":t.editor.on("dragover",function(o,l){t.props.onDragOver(t.editor,l)});break;case"onDragStart":{t.editor.on("dragstart",function(o,l){t.props.onDragStart(t.editor,l)});break}case"onDrop":t.editor.on("drop",function(o,l){t.props.onDrop(t.editor,l)});break;case"onFocus":t.editor.on("focus",function(o,l){t.props.onFocus(t.editor,l)});break;case"onGutterClick":t.editor.on("gutterClick",function(o,l,u,h){t.props.onGutterClick(t.editor,l,u,h)});break;case"onInputRead":t.editor.on("inputRead",function(o,l){t.props.onInputRead(t.editor,l)});break;case"onKeyDown":t.editor.on("keydown",function(o,l){t.props.onKeyDown(t.editor,l)});break;case"onKeyHandled":t.editor.on("keyHandled",function(o,l,u){t.props.onKeyHandled(t.editor,l,u)});break;case"onKeyPress":t.editor.on("keypress",function(o,l){t.props.onKeyPress(t.editor,l)});break;case"onKeyUp":t.editor.on("keyup",function(o,l){t.props.onKeyUp(t.editor,l)});break;case"onMouseDown":{t.editor.on("mousedown",function(o,l){t.props.onMouseDown(t.editor,l)});break}case"onPaste":{t.editor.on("paste",function(o,l){t.props.onPaste(t.editor,l)});break}case"onRenderLine":{t.editor.on("renderLine",function(o,l,u){t.props.onRenderLine(t.editor,l,u)});break}case"onScroll":t.editor.on("scroll",function(o){t.props.onScroll(t.editor,t.editor.getScrollInfo())});break;case"onSelection":t.editor.on("beforeSelectionChange",function(o,l){t.props.onSelection(t.editor,l)});break;case"onTouchStart":{t.editor.on("touchstart",function(o,l){t.props.onTouchStart(t.editor,l)});break}case"onUpdate":t.editor.on("update",function(o){t.props.onUpdate(t.editor)});break;case"onViewportChange":t.editor.on("viewportChange",function(o,l,u){t.props.onViewportChange(t.editor,l,u)});break}})},s}(),G5=function(s){mR(e,s);function e(t){var r=s.call(this,t)||this;return Yi||(r.applied=!1,r.appliedNext=!1,r.appliedUserDefined=!1,r.deferred=null,r.emulating=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=w0({},no.defaults,this.editor.options,o),u=Object.keys(l).some(function(h){return r.editor.getOption(h)!==l[h]});u&&Object.keys(l).forEach(function(h){o.hasOwnProperty(h)&&r.editor.getOption(h)!==l[h]&&(r.editor.setOption(h,l[h]),r.mirror.setOption(h,l[h]))}),this.hydrated||(this.deferred?this.resolveChange(t.value):this.initChange(t.value||"")),this.hydrated=!0},e.prototype.initChange=function(t){this.emulating=!0;var r=this.editor.getDoc(),o=r.lastLine(),l=r.getLine(r.lastLine()).length;r.replaceRange(t||"",{line:0,ch:0},{line:o,ch:l}),this.mirror.setValue(t),r.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},e.prototype.resolveChange=function(t){this.emulating=!0;var r=this.editor.getDoc();if(this.deferred.origin==="undo"?r.undo():this.deferred.origin==="redo"?r.redo():r.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),t&&t!==r.getValue()){var o=r.getCursor();r.setValue(t),r.setCursor(o)}this.emulating=!1,this.deferred=null},e.prototype.mirrorChange=function(t){var r=this.editor.getDoc();return t.origin==="undo"?(r.setHistory(this.mirror.getHistory()),this.mirror.undo()):t.origin==="redo"?(r.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(t.text,t.from,t.to,t.origin),this.mirror.getValue()},e.prototype.componentDidMount=function(){var t=this;Yi||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&no.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=no(this.ref,this.props.options),this.shared=new vR(this.editor,this.props),this.mirror=no(function(){},this.props.options),this.editor.on("electricInput",function(){t.mirror.setHistory(t.editor.getDoc().getHistory())}),this.editor.on("cursorActivity",function(){t.mirror.setCursor(t.editor.getDoc().getCursor())}),this.editor.on("beforeChange",function(r,o){if(!t.emulating){o.cancel(),t.deferred=o;var l=t.mirrorChange(t.deferred);t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,t.deferred,l)}}),this.editor.on("change",function(r,o){!t.mounted||t.props.onChange&&t.props.onChange(t.editor,o,t.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(!Yi){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1),!this.props.autoCursor&&this.props.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(t,this.props,r),this.appliedNext=!0),this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0}},e.prototype.componentWillUnmount=function(){Yi||this.props.editorWillUnmount&&this.props.editorWillUnmount(no)},e.prototype.shouldComponentUpdate=function(t,r){return!Yi},e.prototype.render=function(){var t=this;if(Yi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return pR("div",{className:r,ref:function(l){return t.ref=l}})},e}(gR.Component),V5=Ad.Controlled=G5,W5=function(s){mR(e,s);function e(t){var r=s.call(this,t)||this;return Yi||(r.applied=!1,r.appliedUserDefined=!1,r.continueChange=!1,r.detached=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1,r.onBeforeChangeCb=function(){r.continueChange=!0}),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=w0({},no.defaults,this.editor.options,o),u=Object.keys(l).some(function(w){return r.editor.getOption(w)!==l[w]});if(u&&Object.keys(l).forEach(function(w){o.hasOwnProperty(w)&&r.editor.getOption(w)!==l[w]&&r.editor.setOption(w,l[w])}),!this.hydrated){var h=this.editor.getDoc(),m=h.lastLine(),v=h.getLine(h.lastLine()).length;h.replaceRange(t.value||"",{line:0,ch:0},{line:m,ch:v})}this.hydrated=!0},e.prototype.componentDidMount=function(){var t=this;Yi||(this.detached=this.props.detach===!0,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&no.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=no(this.ref,this.props.options),this.shared=new vR(this.editor,this.props),this.editor.on("beforeChange",function(r,o){t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,o,t.editor.getValue(),t.onBeforeChangeCb)}),this.editor.on("change",function(r,o){!t.mounted||!t.props.onChange||(t.props.onBeforeChange?t.continueChange&&t.props.onChange(t.editor,o,t.editor.getValue()):t.props.onChange(t.editor,o,t.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(this.detached&&this.props.detach===!1&&(this.detached=!1,t.editorDidAttach&&t.editorDidAttach(this.editor)),!this.detached&&this.props.detach===!0&&(this.detached=!0,t.editorDidDetach&&t.editorDidDetach(this.editor)),!(Yi||this.detached)){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),!t.autoCursor&&t.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(t),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0)}},e.prototype.componentWillUnmount=function(){Yi||this.props.editorWillUnmount&&this.props.editorWillUnmount(no)},e.prototype.shouldComponentUpdate=function(t,r){var o=!0;return Yi&&(o=!1),this.detached&&t.detach&&(o=!1),o},e.prototype.render=function(){var t=this;if(Yi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return pR("div",{className:r,ref:function(l){return t.ref=l}})},e}(gR.Component);Ad.UnControlled=W5;var yR={exports:{}},hs={},xR={exports:{}},_R={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){var e,t,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();s.unstable_now=function(){return u.now()-h}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var m=null,v=null,w=function(){if(m!==null)try{var ye=s.unstable_now();m(!0,ye),m=null}catch(de){throw setTimeout(w,0),de}};e=function(ye){m!==null?setTimeout(e,0,ye):(m=ye,setTimeout(w,0))},t=function(ye,de){v=setTimeout(ye,de)},r=function(){clearTimeout(v)},s.unstable_shouldYield=function(){return!1},o=s.unstable_forceFrameRate=function(){}}else{var S=window.setTimeout,A=window.clearTimeout;if(typeof console!="undefined"){var R=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof R!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var O=!1,N=null,k=-1,D=5,P=0;s.unstable_shouldYield=function(){return s.unstable_now()>=P},o=function(){},s.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ye?Math.floor(1e3/ye):5};var F=new MessageChannel,L=F.port2;F.port1.onmessage=function(){if(N!==null){var ye=s.unstable_now();P=ye+D;try{N(!0,ye)?L.postMessage(null):(O=!1,N=null)}catch(de){throw L.postMessage(null),de}}else O=!1},e=function(ye){N=ye,O||(O=!0,L.postMessage(null))},t=function(ye,de){k=S(function(){ye(s.unstable_now())},de)},r=function(){A(k),k=-1}}function z(ye,de){var Re=ye.length;ye.push(de);e:for(;;){var we=Re-1>>>1,Ie=ye[we];if(Ie!==void 0&&0<$(Ie,de))ye[we]=de,ye[Re]=Ie,Re=we;else break e}}function H(ye){return ye=ye[0],ye===void 0?null:ye}function X(ye){var de=ye[0];if(de!==void 0){var Re=ye.pop();if(Re!==de){ye[0]=Re;e:for(var we=0,Ie=ye.length;we<Ie;){var Me=2*(we+1)-1,Be=ye[Me],Ve=Me+1,qe=ye[Ve];if(Be!==void 0&&0>$(Be,Re))qe!==void 0&&0>$(qe,Be)?(ye[we]=qe,ye[Ve]=Re,we=Ve):(ye[we]=Be,ye[Me]=Re,we=Me);else if(qe!==void 0&&0>$(qe,Re))ye[we]=qe,ye[Ve]=Re,we=Ve;else break e}}return de}return null}function $(ye,de){var Re=ye.sortIndex-de.sortIndex;return Re!==0?Re:ye.id-de.id}var J=[],se=[],ce=1,pe=null,fe=3,b=!1,p=!1,ee=!1;function E(ye){for(var de=H(se);de!==null;){if(de.callback===null)X(se);else if(de.startTime<=ye)X(se),de.sortIndex=de.expirationTime,z(J,de);else break;de=H(se)}}function me(ye){if(ee=!1,E(ye),!p)if(H(J)!==null)p=!0,e(Se);else{var de=H(se);de!==null&&t(me,de.startTime-ye)}}function Se(ye,de){p=!1,ee&&(ee=!1,r()),b=!0;var Re=fe;try{for(E(de),pe=H(J);pe!==null&&(!(pe.expirationTime>de)||ye&&!s.unstable_shouldYield());){var we=pe.callback;if(typeof we=="function"){pe.callback=null,fe=pe.priorityLevel;var Ie=we(pe.expirationTime<=de);de=s.unstable_now(),typeof Ie=="function"?pe.callback=Ie:pe===H(J)&&X(J),E(de)}else X(J);pe=H(J)}if(pe!==null)var Me=!0;else{var Be=H(se);Be!==null&&t(me,Be.startTime-de),Me=!1}return Me}finally{pe=null,fe=Re,b=!1}}var Te=o;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ye){ye.callback=null},s.unstable_continueExecution=function(){p||b||(p=!0,e(Se))},s.unstable_getCurrentPriorityLevel=function(){return fe},s.unstable_getFirstCallbackNode=function(){return H(J)},s.unstable_next=function(ye){switch(fe){case 1:case 2:case 3:var de=3;break;default:de=fe}var Re=fe;fe=de;try{return ye()}finally{fe=Re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=Te,s.unstable_runWithPriority=function(ye,de){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Re=fe;fe=ye;try{return de()}finally{fe=Re}},s.unstable_scheduleCallback=function(ye,de,Re){var we=s.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?we+Re:we):Re=we,ye){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=Re+Ie,ye={id:ce++,callback:de,priorityLevel:ye,startTime:Re,expirationTime:Ie,sortIndex:-1},Re>we?(ye.sortIndex=Re,z(se,ye),H(J)===null&&ye===H(se)&&(ee?r():ee=!0,t(me,Re-we))):(ye.sortIndex=Ie,z(J,ye),p||b||(p=!0,e(Se))),ye},s.unstable_wrapCallback=function(ye){var de=fe;return function(){var Re=fe;fe=de;try{return ye.apply(this,arguments)}finally{fe=Re}}}})(_R);xR.exports=_R;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0=Md.exports,Gn=Y2,Nr=xR.exports;function tt(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!b0)throw Error(tt(227));var wR=new Set,Rd={};function hu(s,e){ff(s,e),ff(s+"Capture",e)}function ff(s,e){for(Rd[s]=e,s=0;s<e.length;s++)wR.add(e[s])}var Fo=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bR=Object.prototype.hasOwnProperty,SR={},MR={};function j5(s){return bR.call(MR,s)?!0:bR.call(SR,s)?!1:$5.test(s)?MR[s]=!0:(SR[s]=!0,!1)}function q5(s,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function X5(s,e,t,r){if(e===null||typeof e=="undefined"||q5(s,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vi(s,e,t,r,o,l,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=l,this.removeEmptyString=u}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){$r[s]=new vi(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];$r[e]=new vi(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){$r[s]=new vi(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){$r[s]=new vi(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){$r[s]=new vi(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){$r[s]=new vi(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){$r[s]=new vi(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){$r[s]=new vi(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){$r[s]=new vi(s,5,!1,s.toLowerCase(),null,!1,!1)});var T_=/[\-:]([a-z])/g;function E_(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(T_,E_);$r[e]=new vi(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(T_,E_);$r[e]=new vi(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(T_,E_);$r[e]=new vi(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){$r[s]=new vi(s,1,!1,s.toLowerCase(),null,!1,!1)});$r.xlinkHref=new vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){$r[s]=new vi(s,1,!1,s.toLowerCase(),null,!0,!0)});function A_(s,e,t,r){var o=$r.hasOwnProperty(e)?$r[e]:null,l=o!==null?o.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");l||(X5(e,t,o,r)&&(t=null),r||o===null?j5(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):o.mustUseProperty?s[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?s.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?s.setAttributeNS(r,e,t):s.setAttribute(e,t))))}var du=b0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ld=60103,pu=60106,Na=60107,C_=60108,Id=60114,R_=60109,L_=60110,S0=60112,Pd=60113,M0=60120,T0=60115,I_=60116,P_=60121,k_=60128,TR=60129,D_=60130,O_=60131;if(typeof Symbol=="function"&&Symbol.for){var Fr=Symbol.for;Ld=Fr("react.element"),pu=Fr("react.portal"),Na=Fr("react.fragment"),C_=Fr("react.strict_mode"),Id=Fr("react.profiler"),R_=Fr("react.provider"),L_=Fr("react.context"),S0=Fr("react.forward_ref"),Pd=Fr("react.suspense"),M0=Fr("react.suspense_list"),T0=Fr("react.memo"),I_=Fr("react.lazy"),P_=Fr("react.block"),Fr("react.scope"),k_=Fr("react.opaque.id"),TR=Fr("react.debug_trace_mode"),D_=Fr("react.offscreen"),O_=Fr("react.legacy_hidden")}var ER=typeof Symbol=="function"&&Symbol.iterator;function kd(s){return s===null||typeof s!="object"?null:(s=ER&&s[ER]||s["@@iterator"],typeof s=="function"?s:null)}var N_;function Dd(s){if(N_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);N_=e&&e[1]||""}return`
`+N_+s}var F_=!1;function E0(s,e){if(!s||F_)return"";F_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(s,[],e)}else{try{e.call()}catch(m){r=m}s.call(e.prototype)}else{try{throw Error()}catch(m){r=m}s()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=r.stack.split(`
`),u=o.length-1,h=l.length-1;1<=u&&0<=h&&o[u]!==l[h];)h--;for(;1<=u&&0<=h;u--,h--)if(o[u]!==l[h]){if(u!==1||h!==1)do if(u--,h--,0>h||o[u]!==l[h])return`
`+o[u].replace(" at new "," at ");while(1<=u&&0<=h);break}}}finally{F_=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?Dd(s):""}function Y5(s){switch(s.tag){case 5:return Dd(s.type);case 16:return Dd("Lazy");case 13:return Dd("Suspense");case 19:return Dd("SuspenseList");case 0:case 2:case 15:return s=E0(s.type,!1),s;case 11:return s=E0(s.type.render,!1),s;case 22:return s=E0(s.type._render,!1),s;case 1:return s=E0(s.type,!0),s;default:return""}}function hf(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Na:return"Fragment";case pu:return"Portal";case Id:return"Profiler";case C_:return"StrictMode";case Pd:return"Suspense";case M0:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L_:return(s.displayName||"Context")+".Consumer";case R_:return(s._context.displayName||"Context")+".Provider";case S0:var e=s.render;return e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case T0:return hf(s.type);case P_:return hf(s._render);case I_:e=s._payload,s=s._init;try{return hf(s(e))}catch{}}return null}function Fa(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function AR(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K5(s){var e=AR(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),r=""+s[e];if(!s.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,l=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return o.call(this)},set:function(u){r=""+u,l.call(this,u)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function A0(s){s._valueTracker||(s._valueTracker=K5(s))}function CR(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return s&&(r=AR(s)?s.checked?"true":"false":s.value),s=r,s!==t?(e.setValue(s),!0):!1}function C0(s){if(s=s||(typeof document!="undefined"?document:void 0),typeof s=="undefined")return null;try{return s.activeElement||s.body}catch{return s.body}}function U_(s,e){var t=e.checked;return Gn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:s._wrapperState.initialChecked})}function RR(s,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Fa(e.value!=null?e.value:t),s._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LR(s,e){e=e.checked,e!=null&&A_(s,"checked",e,!1)}function B_(s,e){LR(s,e);var t=Fa(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(r==="submit"||r==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?z_(s,e.type,t):e.hasOwnProperty("defaultValue")&&z_(s,e.type,Fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function IR(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function z_(s,e,t){(e!=="number"||C0(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}function Q5(s){var e="";return b0.Children.forEach(s,function(t){t!=null&&(e+=t)}),e}function H_(s,e){return s=Gn({children:void 0},e),(e=Q5(e.children))&&(s.children=e),s}function df(s,e,t,r){if(s=s.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<s.length;t++)o=e.hasOwnProperty("$"+s[t].value),s[t].selected!==o&&(s[t].selected=o),o&&r&&(s[t].defaultSelected=!0)}else{for(t=""+Fa(t),e=null,o=0;o<s.length;o++){if(s[o].value===t){s[o].selected=!0,r&&(s[o].defaultSelected=!0);return}e!==null||s[o].disabled||(e=s[o])}e!==null&&(e.selected=!0)}}function G_(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Gn({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function PR(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(tt(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(tt(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:Fa(t)}}function kR(s,e){var t=Fa(e.value),r=Fa(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),r!=null&&(s.defaultValue=""+r)}function DR(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}var V_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function OR(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function W_(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?OR(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var R0,NR=function(s){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return s(e,t,r,o)})}:s}(function(s,e){if(s.namespaceURI!==V_.svg||"innerHTML"in s)s.innerHTML=e;else{for(R0=R0||document.createElement("div"),R0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=R0.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function Od(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var Nd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z5=["Webkit","ms","Moz","O"];Object.keys(Nd).forEach(function(s){Z5.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),Nd[e]=Nd[s]})});function FR(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nd.hasOwnProperty(s)&&Nd[s]?(""+e).trim():e+"px"}function UR(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=FR(t,e[t],r);t==="float"&&(t="cssFloat"),r?s.setProperty(t,o):s[t]=o}}var J5=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $_(s,e){if(e){if(J5[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function j_(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function q_(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var X_=null,pf=null,mf=null;function BR(s){if(s=tp(s)){if(typeof X_!="function")throw Error(tt(280));var e=s.stateNode;e&&(e=q0(e),X_(s.stateNode,s.type,e))}}function zR(s){pf?mf?mf.push(s):mf=[s]:pf=s}function HR(){if(pf){var s=pf,e=mf;if(mf=pf=null,BR(s),e)for(s=0;s<e.length;s++)BR(e[s])}}function Y_(s,e){return s(e)}function GR(s,e,t,r,o){return s(e,t,r,o)}function K_(){}var VR=Y_,mu=!1,Q_=!1;function Z_(){(pf!==null||mf!==null)&&(K_(),HR())}function eG(s,e,t){if(Q_)return s(e,t);Q_=!0;try{return VR(s,e,t)}finally{Q_=!1,Z_()}}function Fd(s,e){var t=s.stateNode;if(t===null)return null;var r=q0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(s=s.type,r=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!r;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(tt(231,e,typeof t));return t}var J_=!1;if(Fo)try{var Ud={};Object.defineProperty(Ud,"passive",{get:function(){J_=!0}}),window.addEventListener("test",Ud,Ud),window.removeEventListener("test",Ud,Ud)}catch{J_=!1}function tG(s,e,t,r,o,l,u,h,m){var v=Array.prototype.slice.call(arguments,3);try{e.apply(t,v)}catch(w){this.onError(w)}}var Bd=!1,L0=null,I0=!1,ew=null,nG={onError:function(s){Bd=!0,L0=s}};function rG(s,e,t,r,o,l,u,h,m){Bd=!1,L0=null,tG.apply(nG,arguments)}function iG(s,e,t,r,o,l,u,h,m){if(rG.apply(this,arguments),Bd){if(Bd){var v=L0;Bd=!1,L0=null}else throw Error(tt(198));I0||(I0=!0,ew=v)}}function gu(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,(e.flags&1026)!=0&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function WR(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function $R(s){if(gu(s)!==s)throw Error(tt(188))}function sG(s){var e=s.alternate;if(!e){if(e=gu(s),e===null)throw Error(tt(188));return e!==s?null:s}for(var t=s,r=e;;){var o=t.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===t)return $R(o),s;if(l===r)return $R(o),e;l=l.sibling}throw Error(tt(188))}if(t.return!==r.return)t=o,r=l;else{for(var u=!1,h=o.child;h;){if(h===t){u=!0,t=o,r=l;break}if(h===r){u=!0,r=o,t=l;break}h=h.sibling}if(!u){for(h=l.child;h;){if(h===t){u=!0,t=l,r=o;break}if(h===r){u=!0,r=l,t=o;break}h=h.sibling}if(!u)throw Error(tt(189))}}if(t.alternate!==r)throw Error(tt(190))}if(t.tag!==3)throw Error(tt(188));return t.stateNode.current===t?s:e}function jR(s){if(s=sG(s),!s)return null;for(var e=s;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===s)break;for(;!e.sibling;){if(!e.return||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function qR(s,e){for(var t=s.alternate;e!==null;){if(e===s||e===t)return!0;e=e.return}return!1}var XR,tw,YR,KR,nw=!1,ro=[],Ua=null,Ba=null,za=null,zd=new Map,Hd=new Map,Gd=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rw(s,e,t,r,o){return{blockedOn:s,domEventName:e,eventSystemFlags:t|16,nativeEvent:o,targetContainers:[r]}}function ZR(s,e){switch(s){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hd.delete(e.pointerId)}}function Vd(s,e,t,r,o,l){return s===null||s.nativeEvent!==l?(s=rw(e,t,r,o,l),e!==null&&(e=tp(e),e!==null&&tw(e)),s):(s.eventSystemFlags|=r,e=s.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),s)}function oG(s,e,t,r,o){switch(e){case"focusin":return Ua=Vd(Ua,s,e,t,r,o),!0;case"dragenter":return Ba=Vd(Ba,s,e,t,r,o),!0;case"mouseover":return za=Vd(za,s,e,t,r,o),!0;case"pointerover":var l=o.pointerId;return zd.set(l,Vd(zd.get(l)||null,s,e,t,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Hd.set(l,Vd(Hd.get(l)||null,s,e,t,r,o)),!0}return!1}function aG(s){var e=vu(s.target);if(e!==null){var t=gu(e);if(t!==null){if(e=t.tag,e===13){if(e=WR(t),e!==null){s.blockedOn=e,KR(s.lanePriority,function(){Nr.unstable_runWithPriority(s.priority,function(){YR(t)})});return}}else if(e===3&&t.stateNode.hydrate){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function P0(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=uw(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t!==null)return e=tp(t),e!==null&&tw(e),s.blockedOn=t,!1;e.shift()}return!0}function JR(s,e,t){P0(s)&&t.delete(e)}function lG(){for(nw=!1;0<ro.length;){var s=ro[0];if(s.blockedOn!==null){s=tp(s.blockedOn),s!==null&&XR(s);break}for(var e=s.targetContainers;0<e.length;){var t=uw(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t!==null){s.blockedOn=t;break}e.shift()}s.blockedOn===null&&ro.shift()}Ua!==null&&P0(Ua)&&(Ua=null),Ba!==null&&P0(Ba)&&(Ba=null),za!==null&&P0(za)&&(za=null),zd.forEach(JR),Hd.forEach(JR)}function Wd(s,e){s.blockedOn===e&&(s.blockedOn=null,nw||(nw=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,lG)))}function eL(s){function e(o){return Wd(o,s)}if(0<ro.length){Wd(ro[0],s);for(var t=1;t<ro.length;t++){var r=ro[t];r.blockedOn===s&&(r.blockedOn=null)}}for(Ua!==null&&Wd(Ua,s),Ba!==null&&Wd(Ba,s),za!==null&&Wd(za,s),zd.forEach(e),Hd.forEach(e),t=0;t<Gd.length;t++)r=Gd[t],r.blockedOn===s&&(r.blockedOn=null);for(;0<Gd.length&&(t=Gd[0],t.blockedOn===null);)aG(t),t.blockedOn===null&&Gd.shift()}function k0(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var gf={animationend:k0("Animation","AnimationEnd"),animationiteration:k0("Animation","AnimationIteration"),animationstart:k0("Animation","AnimationStart"),transitionend:k0("Transition","TransitionEnd")},iw={},tL={};Fo&&(tL=document.createElement("div").style,"AnimationEvent"in window||(delete gf.animationend.animation,delete gf.animationiteration.animation,delete gf.animationstart.animation),"TransitionEvent"in window||delete gf.transitionend.transition);function D0(s){if(iw[s])return iw[s];if(!gf[s])return s;var e=gf[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in tL)return iw[s]=e[t];return s}var nL=D0("animationend"),rL=D0("animationiteration"),iL=D0("animationstart"),sL=D0("transitionend"),oL=new Map,sw=new Map,uG=["abort","abort",nL,"animationEnd",rL,"animationIteration",iL,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",sL,"transitionEnd","waiting","waiting"];function ow(s,e){for(var t=0;t<s.length;t+=2){var r=s[t],o=s[t+1];o="on"+(o[0].toUpperCase()+o.slice(1)),sw.set(r,e),oL.set(r,o),hu(o,[r])}}var cG=Nr.unstable_now;cG();var Ln=8;function vf(s){if((1&s)!=0)return Ln=15,1;if((2&s)!=0)return Ln=14,2;if((4&s)!=0)return Ln=13,4;var e=24&s;return e!==0?(Ln=12,e):(s&32)!=0?(Ln=11,32):(e=192&s,e!==0?(Ln=10,e):(s&256)!=0?(Ln=9,256):(e=3584&s,e!==0?(Ln=8,e):(s&4096)!=0?(Ln=7,4096):(e=4186112&s,e!==0?(Ln=6,e):(e=62914560&s,e!==0?(Ln=5,e):s&67108864?(Ln=4,67108864):(s&134217728)!=0?(Ln=3,134217728):(e=805306368&s,e!==0?(Ln=2,e):(1073741824&s)!=0?(Ln=1,1073741824):(Ln=8,s))))))}function fG(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function hG(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(tt(358,s))}}function $d(s,e){var t=s.pendingLanes;if(t===0)return Ln=0;var r=0,o=0,l=s.expiredLanes,u=s.suspendedLanes,h=s.pingedLanes;if(l!==0)r=l,o=Ln=15;else if(l=t&134217727,l!==0){var m=l&~u;m!==0?(r=vf(m),o=Ln):(h&=l,h!==0&&(r=vf(h),o=Ln))}else l=t&~u,l!==0?(r=vf(l),o=Ln):h!==0&&(r=vf(h),o=Ln);if(r===0)return 0;if(r=31-Ha(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&u)==0){if(vf(e),o<=Ln)return e;Ln=o}if(e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=r;0<e;)t=31-Ha(e),o=1<<t,r|=s[t],e&=~o;return r}function aL(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function O0(s,e){switch(s){case 15:return 1;case 14:return 2;case 12:return s=yf(24&~e),s===0?O0(10,e):s;case 10:return s=yf(192&~e),s===0?O0(8,e):s;case 8:return s=yf(3584&~e),s===0&&(s=yf(4186112&~e),s===0&&(s=512)),s;case 2:return e=yf(805306368&~e),e===0&&(e=268435456),e}throw Error(tt(358,s))}function yf(s){return s&-s}function aw(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function N0(s,e,t){s.pendingLanes|=e;var r=e-1;s.suspendedLanes&=r,s.pingedLanes&=r,s=s.eventTimes,e=31-Ha(e),s[e]=t}var Ha=Math.clz32?Math.clz32:mG,dG=Math.log,pG=Math.LN2;function mG(s){return s===0?32:31-(dG(s)/pG|0)|0}var gG=Nr.unstable_UserBlockingPriority,vG=Nr.unstable_runWithPriority,F0=!0;function yG(s,e,t,r){mu||K_();var o=lw,l=mu;mu=!0;try{GR(o,s,e,t,r)}finally{(mu=l)||Z_()}}function xG(s,e,t,r){vG(gG,lw.bind(null,s,e,t,r))}function lw(s,e,t,r){if(F0){var o;if((o=(e&4)==0)&&0<ro.length&&-1<QR.indexOf(s))s=rw(null,s,e,t,r),ro.push(s);else{var l=uw(s,e,t,r);if(l===null)o&&ZR(s,r);else{if(o){if(-1<QR.indexOf(s)){s=rw(l,s,e,t,r),ro.push(s);return}if(oG(l,s,e,t,r))return;ZR(s,r)}FL(s,e,r,null,t)}}}}function uw(s,e,t,r){var o=q_(r);if(o=vu(o),o!==null){var l=gu(o);if(l===null)o=null;else{var u=l.tag;if(u===13){if(o=WR(l),o!==null)return o;o=null}else if(u===3){if(l.stateNode.hydrate)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return FL(s,e,r,o,t),null}var Ga=null,cw=null,U0=null;function lL(){if(U0)return U0;var s,e=cw,t=e.length,r,o="value"in Ga?Ga.value:Ga.textContent,l=o.length;for(s=0;s<t&&e[s]===o[s];s++);var u=t-s;for(r=1;r<=u&&e[t-r]===o[l-r];r++);return U0=o.slice(s,1<r?1-r:void 0)}function B0(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function z0(){return!0}function uL(){return!1}function Ki(s){function e(t,r,o,l,u){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var h in s)s.hasOwnProperty(h)&&(t=s[h],this[h]=t?t(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?z0:uL,this.isPropagationStopped=uL,this}return Gn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=z0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=z0)},persist:function(){},isPersistent:z0}),e}var xf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fw=Ki(xf),jd=Gn({},xf,{view:0,detail:0}),_G=Ki(jd),hw,dw,qd,H0=Gn({},jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mw,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qd&&(qd&&s.type==="mousemove"?(hw=s.screenX-qd.screenX,dw=s.screenY-qd.screenY):dw=hw=0,qd=s),hw)},movementY:function(s){return"movementY"in s?s.movementY:dw}}),cL=Ki(H0),wG=Gn({},H0,{dataTransfer:0}),bG=Ki(wG),SG=Gn({},jd,{relatedTarget:0}),pw=Ki(SG),MG=Gn({},xf,{animationName:0,elapsedTime:0,pseudoElement:0}),TG=Ki(MG),EG=Gn({},xf,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),AG=Ki(EG),CG=Gn({},xf,{data:0}),fL=Ki(CG),RG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PG(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=IG[s])?!!e[s]:!1}function mw(){return PG}var kG=Gn({},jd,{key:function(s){if(s.key){var e=RG[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=B0(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?LG[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mw,charCode:function(s){return s.type==="keypress"?B0(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?B0(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),DG=Ki(kG),OG=Gn({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hL=Ki(OG),NG=Gn({},jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mw}),FG=Ki(NG),UG=Gn({},xf,{propertyName:0,elapsedTime:0,pseudoElement:0}),BG=Ki(UG),zG=Gn({},H0,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),HG=Ki(zG),GG=[9,13,27,32],gw=Fo&&"CompositionEvent"in window,Xd=null;Fo&&"documentMode"in document&&(Xd=document.documentMode);var VG=Fo&&"TextEvent"in window&&!Xd,dL=Fo&&(!gw||Xd&&8<Xd&&11>=Xd),pL=String.fromCharCode(32),mL=!1;function gL(s,e){switch(s){case"keyup":return GG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vL(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var _f=!1;function WG(s,e){switch(s){case"compositionend":return vL(e);case"keypress":return e.which!==32?null:(mL=!0,pL);case"textInput":return s=e.data,s===pL&&mL?null:s;default:return null}}function $G(s,e){if(_f)return s==="compositionend"||!gw&&gL(s,e)?(s=lL(),U0=cw=Ga=null,_f=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dL&&e.locale!=="ko"?null:e.data;default:return null}}var jG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yL(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!jG[s.type]:e==="textarea"}function xL(s,e,t,r){zR(r),e=V0(e,"onChange"),0<e.length&&(t=new fw("onChange","change",null,t,r),s.push({event:t,listeners:e}))}var Yd=null,Kd=null;function qG(s){PL(s,0)}function G0(s){var e=Tf(s);if(CR(e))return s}function XG(s,e){if(s==="change")return e}var _L=!1;if(Fo){var vw;if(Fo){var yw="oninput"in document;if(!yw){var wL=document.createElement("div");wL.setAttribute("oninput","return;"),yw=typeof wL.oninput=="function"}vw=yw}else vw=!1;_L=vw&&(!document.documentMode||9<document.documentMode)}function bL(){Yd&&(Yd.detachEvent("onpropertychange",SL),Kd=Yd=null)}function SL(s){if(s.propertyName==="value"&&G0(Kd)){var e=[];if(xL(e,Kd,s,q_(s)),s=qG,mu)s(e);else{mu=!0;try{Y_(s,e)}finally{mu=!1,Z_()}}}}function YG(s,e,t){s==="focusin"?(bL(),Yd=e,Kd=t,Yd.attachEvent("onpropertychange",SL)):s==="focusout"&&bL()}function KG(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return G0(Kd)}function QG(s,e){if(s==="click")return G0(e)}function ZG(s,e){if(s==="input"||s==="change")return G0(e)}function JG(s,e){return s===e&&(s!==0||1/s==1/e)||s!==s&&e!==e}var ds=typeof Object.is=="function"?Object.is:JG,eV=Object.prototype.hasOwnProperty;function Qd(s,e){if(ds(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!eV.call(e,t[r])||!ds(s[t[r]],e[t[r]]))return!1;return!0}function ML(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function TL(s,e){var t=ML(s);s=0;for(var r;t;){if(t.nodeType===3){if(r=s+t.textContent.length,s<=e&&r>=e)return{node:t,offset:e-s};s=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ML(t)}}function EL(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?EL(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function AL(){for(var s=window,e=C0();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=C0(s.document)}return e}function xw(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}var tV=Fo&&"documentMode"in document&&11>=document.documentMode,wf=null,_w=null,Zd=null,ww=!1;function CL(s,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ww||wf==null||wf!==C0(r)||(r=wf,"selectionStart"in r&&xw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zd&&Qd(Zd,r)||(Zd=r,r=V0(_w,"onSelect"),0<r.length&&(e=new fw("onSelect","select",null,e,t),s.push({event:e,listeners:r}),e.target=wf)))}ow("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ow("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ow(uG,2);for(var RL="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),bw=0;bw<RL.length;bw++)sw.set(RL[bw],0);ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jd));function IL(s,e,t){var r=s.type||"unknown-event";s.currentTarget=t,iG(r,e,void 0,s),s.currentTarget=null}function PL(s,e){e=(e&4)!=0;for(var t=0;t<s.length;t++){var r=s[t],o=r.event;r=r.listeners;e:{var l=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],m=h.instance,v=h.currentTarget;if(h=h.listener,m!==l&&o.isPropagationStopped())break e;IL(o,h,v),l=m}else for(u=0;u<r.length;u++){if(h=r[u],m=h.instance,v=h.currentTarget,h=h.listener,m!==l&&o.isPropagationStopped())break e;IL(o,h,v),l=m}}}if(I0)throw s=ew,I0=!1,ew=null,s}function On(s,e){var t=VL(e),r=s+"__bubble";t.has(r)||(NL(e,s,2,!1),t.add(r))}var kL="_reactListening"+Math.random().toString(36).slice(2);function DL(s){s[kL]||(s[kL]=!0,wR.forEach(function(e){LL.has(e)||OL(e,!1,s,null),OL(e,!0,s,null)}))}function OL(s,e,t,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,l=t;if(s==="selectionchange"&&t.nodeType!==9&&(l=t.ownerDocument),r!==null&&!e&&LL.has(s)){if(s!=="scroll")return;o|=2,l=r}var u=VL(l),h=s+"__"+(e?"capture":"bubble");u.has(h)||(e&&(o|=4),NL(l,s,o,e),u.add(h))}function NL(s,e,t,r){var o=sw.get(e);switch(o===void 0?2:o){case 0:o=yG;break;case 1:o=xG;break;default:o=lw}t=o.bind(null,e,t,s),o=void 0,!J_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?s.addEventListener(e,t,{capture:!0,passive:o}):s.addEventListener(e,t,!0):o!==void 0?s.addEventListener(e,t,{passive:o}):s.addEventListener(e,t,!1)}function FL(s,e,t,r,o){var l=r;if((e&1)==0&&(e&2)==0&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;u=u.return}for(;h!==null;){if(u=vu(h),u===null)return;if(m=u.tag,m===5||m===6){r=l=u;continue e}h=h.parentNode}}r=r.return}eG(function(){var v=l,w=q_(t),S=[];e:{var A=oL.get(s);if(A!==void 0){var R=fw,O=s;switch(s){case"keypress":if(B0(t)===0)break e;case"keydown":case"keyup":R=DG;break;case"focusin":O="focus",R=pw;break;case"focusout":O="blur",R=pw;break;case"beforeblur":case"afterblur":R=pw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=cL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=bG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=FG;break;case nL:case rL:case iL:R=TG;break;case sL:R=BG;break;case"scroll":R=_G;break;case"wheel":R=HG;break;case"copy":case"cut":case"paste":R=AG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=hL}var N=(e&4)!=0,k=!N&&s==="scroll",D=N?A!==null?A+"Capture":null:A;N=[];for(var P=v,F;P!==null;){F=P;var L=F.stateNode;if(F.tag===5&&L!==null&&(F=L,D!==null&&(L=Fd(P,D),L!=null&&N.push(ep(P,L,F)))),k)break;P=P.return}0<N.length&&(A=new R(A,O,null,t,w),S.push({event:A,listeners:N}))}}if((e&7)==0){e:{if(A=s==="mouseover"||s==="pointerover",R=s==="mouseout"||s==="pointerout",A&&(e&16)==0&&(O=t.relatedTarget||t.fromElement)&&(vu(O)||O[Mf]))break e;if((R||A)&&(A=w.window===w?w:(A=w.ownerDocument)?A.defaultView||A.parentWindow:window,R?(O=t.relatedTarget||t.toElement,R=v,O=O?vu(O):null,O!==null&&(k=gu(O),O!==k||O.tag!==5&&O.tag!==6)&&(O=null)):(R=null,O=v),R!==O)){if(N=cL,L="onMouseLeave",D="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(N=hL,L="onPointerLeave",D="onPointerEnter",P="pointer"),k=R==null?A:Tf(R),F=O==null?A:Tf(O),A=new N(L,P+"leave",R,t,w),A.target=k,A.relatedTarget=F,L=null,vu(w)===v&&(N=new N(D,P+"enter",O,t,w),N.target=F,N.relatedTarget=k,L=N),k=L,R&&O)t:{for(N=R,D=O,P=0,F=N;F;F=bf(F))P++;for(F=0,L=D;L;L=bf(L))F++;for(;0<P-F;)N=bf(N),P--;for(;0<F-P;)D=bf(D),F--;for(;P--;){if(N===D||D!==null&&N===D.alternate)break t;N=bf(N),D=bf(D)}N=null}else N=null;R!==null&&UL(S,A,R,N,!1),O!==null&&k!==null&&UL(S,k,O,N,!0)}}e:{if(A=v?Tf(v):window,R=A.nodeName&&A.nodeName.toLowerCase(),R==="select"||R==="input"&&A.type==="file")var z=XG;else if(yL(A))if(_L)z=ZG;else{z=KG;var H=YG}else(R=A.nodeName)&&R.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(z=QG);if(z&&(z=z(s,v))){xL(S,z,t,w);break e}H&&H(s,A,v),s==="focusout"&&(H=A._wrapperState)&&H.controlled&&A.type==="number"&&z_(A,"number",A.value)}switch(H=v?Tf(v):window,s){case"focusin":(yL(H)||H.contentEditable==="true")&&(wf=H,_w=v,Zd=null);break;case"focusout":Zd=_w=wf=null;break;case"mousedown":ww=!0;break;case"contextmenu":case"mouseup":case"dragend":ww=!1,CL(S,t,w);break;case"selectionchange":if(tV)break;case"keydown":case"keyup":CL(S,t,w)}var X;if(gw)e:{switch(s){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else _f?gL(s,t)&&($="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&($="onCompositionStart");$&&(dL&&t.locale!=="ko"&&(_f||$!=="onCompositionStart"?$==="onCompositionEnd"&&_f&&(X=lL()):(Ga=w,cw="value"in Ga?Ga.value:Ga.textContent,_f=!0)),H=V0(v,$),0<H.length&&($=new fL($,s,null,t,w),S.push({event:$,listeners:H}),X?$.data=X:(X=vL(t),X!==null&&($.data=X)))),(X=VG?WG(s,t):$G(s,t))&&(v=V0(v,"onBeforeInput"),0<v.length&&(w=new fL("onBeforeInput","beforeinput",null,t,w),S.push({event:w,listeners:v}),w.data=X))}PL(S,e)})}function ep(s,e,t){return{instance:s,listener:e,currentTarget:t}}function V0(s,e){for(var t=e+"Capture",r=[];s!==null;){var o=s,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Fd(s,t),l!=null&&r.unshift(ep(s,l,o)),l=Fd(s,e),l!=null&&r.push(ep(s,l,o))),s=s.return}return r}function bf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function UL(s,e,t,r,o){for(var l=e._reactName,u=[];t!==null&&t!==r;){var h=t,m=h.alternate,v=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&v!==null&&(h=v,o?(m=Fd(t,l),m!=null&&u.unshift(ep(t,m,h))):o||(m=Fd(t,l),m!=null&&u.push(ep(t,m,h)))),t=t.return}u.length!==0&&s.push({event:e,listeners:u})}function W0(){}var Sw=null,Mw=null;function BL(s,e){switch(s){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Tw(s,e){return s==="textarea"||s==="option"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zL=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0;function Ew(s){s.nodeType===1?s.textContent="":s.nodeType===9&&(s=s.body,s!=null&&(s.textContent=""))}function Sf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break}return s}function HL(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var Aw=0;function rV(s){return{$$typeof:k_,toString:s,valueOf:s}}var $0=Math.random().toString(36).slice(2),Va="__reactFiber$"+$0,j0="__reactProps$"+$0,Mf="__reactContainer$"+$0,GL="__reactEvents$"+$0;function vu(s){var e=s[Va];if(e)return e;for(var t=s.parentNode;t;){if(e=t[Mf]||t[Va]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=HL(s);s!==null;){if(t=s[Va])return t;s=HL(s)}return e}s=t,t=s.parentNode}return null}function tp(s){return s=s[Va]||s[Mf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Tf(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(tt(33))}function q0(s){return s[j0]||null}function VL(s){var e=s[GL];return e===void 0&&(e=s[GL]=new Set),e}var Cw=[],Ef=-1;function Wa(s){return{current:s}}function Nn(s){0>Ef||(s.current=Cw[Ef],Cw[Ef]=null,Ef--)}function Jn(s,e){Ef++,Cw[Ef]=s.current,s.current=e}var $a={},Jr=Wa($a),ki=Wa(!1),yu=$a;function Af(s,e){var t=s.type.contextTypes;if(!t)return $a;var r=s.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in t)o[l]=e[l];return r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=o),o}function Di(s){return s=s.childContextTypes,s!=null}function X0(){Nn(ki),Nn(Jr)}function WL(s,e,t){if(Jr.current!==$a)throw Error(tt(168));Jn(Jr,e),Jn(ki,t)}function $L(s,e,t){var r=s.stateNode;if(s=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in s))throw Error(tt(108,hf(e)||"Unknown",o));return Gn({},t,r)}function Y0(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||$a,yu=Jr.current,Jn(Jr,s),Jn(ki,ki.current),!0}function jL(s,e,t){var r=s.stateNode;if(!r)throw Error(tt(169));t?(s=$L(s,e,yu),r.__reactInternalMemoizedMergedChildContext=s,Nn(ki),Nn(Jr),Jn(Jr,s)):Nn(ki),Jn(ki,t)}var Rw=null,xu=null,iV=Nr.unstable_runWithPriority,Lw=Nr.unstable_scheduleCallback,Iw=Nr.unstable_cancelCallback,sV=Nr.unstable_shouldYield,qL=Nr.unstable_requestPaint,Pw=Nr.unstable_now,oV=Nr.unstable_getCurrentPriorityLevel,K0=Nr.unstable_ImmediatePriority,XL=Nr.unstable_UserBlockingPriority,YL=Nr.unstable_NormalPriority,KL=Nr.unstable_LowPriority,QL=Nr.unstable_IdlePriority,kw={},aV=qL!==void 0?qL:function(){},Uo=null,Q0=null,Dw=!1,ZL=Pw(),ei=1e4>ZL?Pw:function(){return Pw()-ZL};function Cf(){switch(oV()){case K0:return 99;case XL:return 98;case YL:return 97;case KL:return 96;case QL:return 95;default:throw Error(tt(332))}}function JL(s){switch(s){case 99:return K0;case 98:return XL;case 97:return YL;case 96:return KL;case 95:return QL;default:throw Error(tt(332))}}function _u(s,e){return s=JL(s),iV(s,e)}function np(s,e,t){return s=JL(s),Lw(s,e,t)}function io(){if(Q0!==null){var s=Q0;Q0=null,Iw(s)}e3()}function e3(){if(!Dw&&Uo!==null){Dw=!0;var s=0;try{var e=Uo;_u(99,function(){for(;s<e.length;s++){var t=e[s];do t=t(!0);while(t!==null)}}),Uo=null}catch(t){throw Uo!==null&&(Uo=Uo.slice(s+1)),Lw(K0,io),t}finally{Dw=!1}}}var lV=du.ReactCurrentBatchConfig;function Ns(s,e){if(s&&s.defaultProps){e=Gn({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}var Z0=Wa(null),J0=null,Rf=null,ev=null;function Ow(){ev=Rf=J0=null}function Nw(s){var e=Z0.current;Nn(Z0),s.type._context._currentValue=e}function t3(s,e){for(;s!==null;){var t=s.alternate;if((s.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else s.childLanes|=e,t!==null&&(t.childLanes|=e);s=s.return}}function Lf(s,e){J0=s,ev=Rf=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&e)!=0&&(Fs=!0),s.firstContext=null)}function ps(s,e){if(ev!==s&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(ev=s,e=1073741823),e={context:s,observedBits:e,next:null},Rf===null){if(J0===null)throw Error(tt(308));Rf=e,J0.dependencies={lanes:0,firstContext:e,responders:null}}else Rf=Rf.next=e;return s._currentValue}var ja=!1;function Fw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function n3(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function qa(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(s,e){if(s=s.updateQueue,s!==null){s=s.shared;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}}function r3(s,e){var t=s.updateQueue,r=s.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,l=null;if(t=t.firstBaseUpdate,t!==null){do{var u={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};l===null?o=l=u:l=l.next=u,t=t.next}while(t!==null);l===null?o=l=e:l=l.next=e}else o=l=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function rp(s,e,t,r){var o=s.updateQueue;ja=!1;var l=o.firstBaseUpdate,u=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var m=h,v=m.next;m.next=null,u===null?l=v:u.next=v,u=m;var w=s.alternate;if(w!==null){w=w.updateQueue;var S=w.lastBaseUpdate;S!==u&&(S===null?w.firstBaseUpdate=v:S.next=v,w.lastBaseUpdate=m)}}if(l!==null){S=o.baseState,u=0,w=v=m=null;do{h=l.lane;var A=l.eventTime;if((r&h)===h){w!==null&&(w=w.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=s,O=l;switch(h=e,A=t,O.tag){case 1:if(R=O.payload,typeof R=="function"){S=R.call(A,S,h);break e}S=R;break e;case 3:R.flags=R.flags&-4097|64;case 0:if(R=O.payload,h=typeof R=="function"?R.call(A,S,h):R,h==null)break e;S=Gn({},S,h);break e;case 2:ja=!0}}l.callback!==null&&(s.flags|=32,h=o.effects,h===null?o.effects=[l]:h.push(l))}else A={eventTime:A,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},w===null?(v=w=A,m=S):w=w.next=A,u|=h;if(l=l.next,l===null){if(h=o.shared.pending,h===null)break;l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);w===null&&(m=S),o.baseState=m,o.firstBaseUpdate=v,o.lastBaseUpdate=w,mp|=u,s.lanes=u,s.memoizedState=S}}function i3(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var r=s[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(tt(191,o));o.call(r)}}}var s3=new b0.Component().refs;function tv(s,e,t,r){e=s.memoizedState,t=t(r,e),t=t==null?e:Gn({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var nv={isMounted:function(s){return(s=s._reactInternals)?gu(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var r=Qi(),o=Qa(s),l=qa(r,o);l.payload=e,t!=null&&(l.callback=t),Xa(s,l),Za(s,o,r)},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var r=Qi(),o=Qa(s),l=qa(r,o);l.tag=1,l.payload=e,t!=null&&(l.callback=t),Xa(s,l),Za(s,o,r)},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=Qi(),r=Qa(s),o=qa(t,r);o.tag=2,e!=null&&(o.callback=e),Xa(s,o),Za(s,r,t)}};function o3(s,e,t,r,o,l,u){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(r,l,u):e.prototype&&e.prototype.isPureReactComponent?!Qd(t,r)||!Qd(o,l):!0}function a3(s,e,t){var r=!1,o=$a,l=e.contextType;return typeof l=="object"&&l!==null?l=ps(l):(o=Di(e)?yu:Jr.current,r=e.contextTypes,l=(r=r!=null)?Af(s,o):$a),e=new e(t,l),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nv,s.stateNode=e,e._reactInternals=s,r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=l),e}function l3(s,e,t,r){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==s&&nv.enqueueReplaceState(e,e.state,null)}function Uw(s,e,t,r){var o=s.stateNode;o.props=t,o.state=s.memoizedState,o.refs=s3,Fw(s);var l=e.contextType;typeof l=="object"&&l!==null?o.context=ps(l):(l=Di(e)?yu:Jr.current,o.context=Af(s,l)),rp(s,t,o,r),o.state=s.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(tv(s,e,l,t),o.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&nv.enqueueReplaceState(o,o.state,null),rp(s,t,o,r),o.state=s.memoizedState),typeof o.componentDidMount=="function"&&(s.flags|=4)}var rv=Array.isArray;function ip(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(tt(309));var r=t.stateNode}if(!r)throw Error(tt(147,s));var o=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=r.refs;u===s3&&(u=r.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof s!="string")throw Error(tt(284));if(!t._owner)throw Error(tt(290,s))}return s}function iv(s,e){if(s.type!=="textarea")throw Error(tt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function u3(s){function e(k,D){if(s){var P=k.lastEffect;P!==null?(P.nextEffect=D,k.lastEffect=D):k.firstEffect=k.lastEffect=D,D.nextEffect=null,D.flags=8}}function t(k,D){if(!s)return null;for(;D!==null;)e(k,D),D=D.sibling;return null}function r(k,D){for(k=new Map;D!==null;)D.key!==null?k.set(D.key,D):k.set(D.index,D),D=D.sibling;return k}function o(k,D){return k=tl(k,D),k.index=0,k.sibling=null,k}function l(k,D,P){return k.index=P,s?(P=k.alternate,P!==null?(P=P.index,P<D?(k.flags=2,D):P):(k.flags=2,D)):D}function u(k){return s&&k.alternate===null&&(k.flags=2),k}function h(k,D,P,F){return D===null||D.tag!==6?(D=_b(P,k.mode,F),D.return=k,D):(D=o(D,P),D.return=k,D)}function m(k,D,P,F){return D!==null&&D.elementType===P.type?(F=o(D,P.props),F.ref=ip(k,D,P),F.return=k,F):(F=bv(P.type,P.key,P.props,null,k.mode,F),F.ref=ip(k,D,P),F.return=k,F)}function v(k,D,P,F){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=wb(P,k.mode,F),D.return=k,D):(D=o(D,P.children||[]),D.return=k,D)}function w(k,D,P,F,L){return D===null||D.tag!==7?(D=Uf(P,k.mode,F,L),D.return=k,D):(D=o(D,P),D.return=k,D)}function S(k,D,P){if(typeof D=="string"||typeof D=="number")return D=_b(""+D,k.mode,P),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ld:return P=bv(D.type,D.key,D.props,null,k.mode,P),P.ref=ip(k,null,D),P.return=k,P;case pu:return D=wb(D,k.mode,P),D.return=k,D}if(rv(D)||kd(D))return D=Uf(D,k.mode,P,null),D.return=k,D;iv(k,D)}return null}function A(k,D,P,F){var L=D!==null?D.key:null;if(typeof P=="string"||typeof P=="number")return L!==null?null:h(k,D,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ld:return P.key===L?P.type===Na?w(k,D,P.props.children,F,L):m(k,D,P,F):null;case pu:return P.key===L?v(k,D,P,F):null}if(rv(P)||kd(P))return L!==null?null:w(k,D,P,F,null);iv(k,P)}return null}function R(k,D,P,F,L){if(typeof F=="string"||typeof F=="number")return k=k.get(P)||null,h(D,k,""+F,L);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ld:return k=k.get(F.key===null?P:F.key)||null,F.type===Na?w(D,k,F.props.children,L,F.key):m(D,k,F,L);case pu:return k=k.get(F.key===null?P:F.key)||null,v(D,k,F,L)}if(rv(F)||kd(F))return k=k.get(P)||null,w(D,k,F,L,null);iv(D,F)}return null}function O(k,D,P,F){for(var L=null,z=null,H=D,X=D=0,$=null;H!==null&&X<P.length;X++){H.index>X?($=H,H=null):$=H.sibling;var J=A(k,H,P[X],F);if(J===null){H===null&&(H=$);break}s&&H&&J.alternate===null&&e(k,H),D=l(J,D,X),z===null?L=J:z.sibling=J,z=J,H=$}if(X===P.length)return t(k,H),L;if(H===null){for(;X<P.length;X++)H=S(k,P[X],F),H!==null&&(D=l(H,D,X),z===null?L=H:z.sibling=H,z=H);return L}for(H=r(k,H);X<P.length;X++)$=R(H,k,X,P[X],F),$!==null&&(s&&$.alternate!==null&&H.delete($.key===null?X:$.key),D=l($,D,X),z===null?L=$:z.sibling=$,z=$);return s&&H.forEach(function(se){return e(k,se)}),L}function N(k,D,P,F){var L=kd(P);if(typeof L!="function")throw Error(tt(150));if(P=L.call(P),P==null)throw Error(tt(151));for(var z=L=null,H=D,X=D=0,$=null,J=P.next();H!==null&&!J.done;X++,J=P.next()){H.index>X?($=H,H=null):$=H.sibling;var se=A(k,H,J.value,F);if(se===null){H===null&&(H=$);break}s&&H&&se.alternate===null&&e(k,H),D=l(se,D,X),z===null?L=se:z.sibling=se,z=se,H=$}if(J.done)return t(k,H),L;if(H===null){for(;!J.done;X++,J=P.next())J=S(k,J.value,F),J!==null&&(D=l(J,D,X),z===null?L=J:z.sibling=J,z=J);return L}for(H=r(k,H);!J.done;X++,J=P.next())J=R(H,k,X,J.value,F),J!==null&&(s&&J.alternate!==null&&H.delete(J.key===null?X:J.key),D=l(J,D,X),z===null?L=J:z.sibling=J,z=J);return s&&H.forEach(function(ce){return e(k,ce)}),L}return function(k,D,P,F){var L=typeof P=="object"&&P!==null&&P.type===Na&&P.key===null;L&&(P=P.props.children);var z=typeof P=="object"&&P!==null;if(z)switch(P.$$typeof){case Ld:e:{for(z=P.key,L=D;L!==null;){if(L.key===z){switch(L.tag){case 7:if(P.type===Na){t(k,L.sibling),D=o(L,P.props.children),D.return=k,k=D;break e}break;default:if(L.elementType===P.type){t(k,L.sibling),D=o(L,P.props),D.ref=ip(k,L,P),D.return=k,k=D;break e}}t(k,L);break}else e(k,L);L=L.sibling}P.type===Na?(D=Uf(P.props.children,k.mode,F,P.key),D.return=k,k=D):(F=bv(P.type,P.key,P.props,null,k.mode,F),F.ref=ip(k,D,P),F.return=k,k=F)}return u(k);case pu:e:{for(L=P.key;D!==null;){if(D.key===L)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){t(k,D.sibling),D=o(D,P.children||[]),D.return=k,k=D;break e}else{t(k,D);break}else e(k,D);D=D.sibling}D=wb(P,k.mode,F),D.return=k,k=D}return u(k)}if(typeof P=="string"||typeof P=="number")return P=""+P,D!==null&&D.tag===6?(t(k,D.sibling),D=o(D,P),D.return=k,k=D):(t(k,D),D=_b(P,k.mode,F),D.return=k,k=D),u(k);if(rv(P))return O(k,D,P,F);if(kd(P))return N(k,D,P,F);if(z&&iv(k,P),typeof P=="undefined"&&!L)switch(k.tag){case 1:case 22:case 0:case 11:case 15:throw Error(tt(152,hf(k.type)||"Component"))}return t(k,D)}}var sv=u3(!0),c3=u3(!1),sp={},so=Wa(sp),op=Wa(sp),ap=Wa(sp);function wu(s){if(s===sp)throw Error(tt(174));return s}function Bw(s,e){switch(Jn(ap,e),Jn(op,s),Jn(so,sp),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:W_(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=W_(e,s)}Nn(so),Jn(so,e)}function If(){Nn(so),Nn(op),Nn(ap)}function f3(s){wu(ap.current);var e=wu(so.current),t=W_(e,s.type);e!==t&&(Jn(op,s),Jn(so,t))}function zw(s){op.current===s&&(Nn(so),Nn(op))}var er=Wa(0);function ov(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bo=null,Ya=null,oo=!1;function h3(s,e){var t=vs(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=s,t.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=t,s.lastEffect=t):s.firstEffect=s.lastEffect=t}function d3(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Hw(s){if(oo){var e=Ya;if(e){var t=e;if(!d3(s,e)){if(e=Sf(t.nextSibling),!e||!d3(s,e)){s.flags=s.flags&-1025|2,oo=!1,Bo=s;return}h3(Bo,t)}Bo=s,Ya=Sf(e.firstChild)}else s.flags=s.flags&-1025|2,oo=!1,Bo=s}}function p3(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bo=s}function av(s){if(s!==Bo)return!1;if(!oo)return p3(s),oo=!0,!1;var e=s.type;if(s.tag!==5||e!=="head"&&e!=="body"&&!Tw(e,s.memoizedProps))for(e=Ya;e;)h3(s,e),e=Sf(e.nextSibling);if(p3(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){Ya=Sf(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}Ya=null}}else Ya=Bo?Sf(s.stateNode.nextSibling):null;return!0}function Gw(){Ya=Bo=null,oo=!1}var Pf=[];function Vw(){for(var s=0;s<Pf.length;s++)Pf[s]._workInProgressVersionPrimary=null;Pf.length=0}var lp=du.ReactCurrentDispatcher,ms=du.ReactCurrentBatchConfig,up=0,cr=null,ti=null,jr=null,lv=!1,cp=!1;function Oi(){throw Error(tt(321))}function Ww(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!ds(s[t],e[t]))return!1;return!0}function $w(s,e,t,r,o,l){if(up=l,cr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lp.current=s===null||s.memoizedState===null?cV:fV,s=t(r,o),cp){l=0;do{if(cp=!1,!(25>l))throw Error(tt(301));l+=1,jr=ti=null,e.updateQueue=null,lp.current=hV,s=t(r,o)}while(cp)}if(lp.current=hv,e=ti!==null&&ti.next!==null,up=0,jr=ti=cr=null,lv=!1,e)throw Error(tt(300));return s}function bu(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?cr.memoizedState=jr=s:jr=jr.next=s,jr}function Su(){if(ti===null){var s=cr.alternate;s=s!==null?s.memoizedState:null}else s=ti.next;var e=jr===null?cr.memoizedState:jr.next;if(e!==null)jr=e,ti=s;else{if(s===null)throw Error(tt(310));ti=s,s={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},jr===null?cr.memoizedState=jr=s:jr=jr.next=s}return jr}function ao(s,e){return typeof e=="function"?e(s):e}function fp(s){var e=Su(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=s;var r=ti,o=r.baseQueue,l=t.pending;if(l!==null){if(o!==null){var u=o.next;o.next=l.next,l.next=u}r.baseQueue=o=l,t.pending=null}if(o!==null){o=o.next,r=r.baseState;var h=u=l=null,m=o;do{var v=m.lane;if((up&v)===v)h!==null&&(h=h.next={lane:0,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),r=m.eagerReducer===s?m.eagerState:s(r,m.action);else{var w={lane:v,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null};h===null?(u=h=w,l=r):h=h.next=w,cr.lanes|=v,mp|=v}m=m.next}while(m!==null&&m!==o);h===null?l=r:h.next=u,ds(r,e.memoizedState)||(Fs=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=h,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function hp(s){var e=Su(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=s;var r=t.dispatch,o=t.pending,l=e.memoizedState;if(o!==null){t.pending=null;var u=o=o.next;do l=s(l,u.action),u=u.next;while(u!==o);ds(l,e.memoizedState)||(Fs=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),t.lastRenderedState=l}return[l,r]}function m3(s,e,t){var r=e._getVersion;r=r(e._source);var o=e._workInProgressVersionPrimary;if(o!==null?s=o===r:(s=s.mutableReadLanes,(s=(up&s)===s)&&(e._workInProgressVersionPrimary=r,Pf.push(e))),s)return t(e._source);throw Pf.push(e),Error(tt(350))}function g3(s,e,t,r){var o=yi;if(o===null)throw Error(tt(349));var l=e._getVersion,u=l(e._source),h=lp.current,m=h.useState(function(){return m3(o,e,t)}),v=m[1],w=m[0];m=jr;var S=s.memoizedState,A=S.refs,R=A.getSnapshot,O=S.source;S=S.subscribe;var N=cr;return s.memoizedState={refs:A,source:e,subscribe:r},h.useEffect(function(){A.getSnapshot=t,A.setSnapshot=v;var k=l(e._source);if(!ds(u,k)){k=t(e._source),ds(w,k)||(v(k),k=Qa(N),o.mutableReadLanes|=k&o.pendingLanes),k=o.mutableReadLanes,o.entangledLanes|=k;for(var D=o.entanglements,P=k;0<P;){var F=31-Ha(P),L=1<<F;D[F]|=k,P&=~L}}},[t,e,r]),h.useEffect(function(){return r(e._source,function(){var k=A.getSnapshot,D=A.setSnapshot;try{D(k(e._source));var P=Qa(N);o.mutableReadLanes|=P&o.pendingLanes}catch(F){D(function(){throw F})}})},[e,r]),ds(R,t)&&ds(O,e)&&ds(S,r)||(s={pending:null,dispatch:null,lastRenderedReducer:ao,lastRenderedState:w},s.dispatch=v=Yw.bind(null,cr,s),m.queue=s,m.baseQueue=null,w=m3(o,e,t),m.memoizedState=m.baseState=w),w}function v3(s,e,t){var r=Su();return g3(r,s,e,t)}function dp(s){var e=bu();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s=e.queue={pending:null,dispatch:null,lastRenderedReducer:ao,lastRenderedState:s},s=s.dispatch=Yw.bind(null,cr,s),[e.memoizedState,s]}function uv(s,e,t,r){return s={tag:s,create:e,destroy:t,deps:r,next:null},e=cr.updateQueue,e===null?(e={lastEffect:null},cr.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(r=t.next,t.next=s,s.next=r,e.lastEffect=s)),s}function y3(s){var e=bu();return s={current:s},e.memoizedState=s}function cv(){return Su().memoizedState}function jw(s,e,t,r){var o=bu();cr.flags|=s,o.memoizedState=uv(1|e,t,void 0,r===void 0?null:r)}function qw(s,e,t,r){var o=Su();r=r===void 0?null:r;var l=void 0;if(ti!==null){var u=ti.memoizedState;if(l=u.destroy,r!==null&&Ww(r,u.deps)){uv(e,t,l,r);return}}cr.flags|=s,o.memoizedState=uv(1|e,t,l,r)}function x3(s,e){return jw(516,4,s,e)}function fv(s,e){return qw(516,4,s,e)}function _3(s,e){return qw(4,2,s,e)}function w3(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function b3(s,e,t){return t=t!=null?t.concat([s]):null,qw(4,2,w3.bind(null,e,s),t)}function Xw(){}function S3(s,e){var t=Su();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ww(e,r[1])?r[0]:(t.memoizedState=[s,e],s)}function M3(s,e){var t=Su();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ww(e,r[1])?r[0]:(s=s(),t.memoizedState=[s,e],s)}function uV(s,e){var t=Cf();_u(98>t?98:t,function(){s(!0)}),_u(97<t?97:t,function(){var r=ms.transition;ms.transition=1;try{s(!1),e()}finally{ms.transition=r}})}function Yw(s,e,t){var r=Qi(),o=Qa(s),l={lane:o,action:t,eagerReducer:null,eagerState:null,next:null},u=e.pending;if(u===null?l.next=l:(l.next=u.next,u.next=l),e.pending=l,u=s.alternate,s===cr||u!==null&&u===cr)cp=lv=!0;else{if(s.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var h=e.lastRenderedState,m=u(h,t);if(l.eagerReducer=u,l.eagerState=m,ds(m,h))return}catch{}finally{}Za(s,o,r)}}var hv={readContext:ps,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useOpaqueIdentifier:Oi,unstable_isNewReconciler:!1},cV={readContext:ps,useCallback:function(s,e){return bu().memoizedState=[s,e===void 0?null:e],s},useContext:ps,useEffect:x3,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,jw(4,2,w3.bind(null,e,s),t)},useLayoutEffect:function(s,e){return jw(4,2,s,e)},useMemo:function(s,e){var t=bu();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var r=bu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,s=r.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},s=s.dispatch=Yw.bind(null,cr,s),[r.memoizedState,s]},useRef:y3,useState:dp,useDebugValue:Xw,useDeferredValue:function(s){var e=dp(s),t=e[0],r=e[1];return x3(function(){var o=ms.transition;ms.transition=1;try{r(s)}finally{ms.transition=o}},[s]),t},useTransition:function(){var s=dp(!1),e=s[0];return s=uV.bind(null,s[1]),y3(s),[s,e]},useMutableSource:function(s,e,t){var r=bu();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:s,subscribe:t},g3(r,s,e,t)},useOpaqueIdentifier:function(){if(oo){var s=!1,e=rV(function(){throw s||(s=!0,t("r:"+(Aw++).toString(36))),Error(tt(355))}),t=dp(e)[1];return(cr.mode&2)==0&&(cr.flags|=516,uv(5,function(){t("r:"+(Aw++).toString(36))},void 0,null)),e}return e="r:"+(Aw++).toString(36),dp(e),e},unstable_isNewReconciler:!1},fV={readContext:ps,useCallback:S3,useContext:ps,useEffect:fv,useImperativeHandle:b3,useLayoutEffect:_3,useMemo:M3,useReducer:fp,useRef:cv,useState:function(){return fp(ao)},useDebugValue:Xw,useDeferredValue:function(s){var e=fp(ao),t=e[0],r=e[1];return fv(function(){var o=ms.transition;ms.transition=1;try{r(s)}finally{ms.transition=o}},[s]),t},useTransition:function(){var s=fp(ao)[0];return[cv().current,s]},useMutableSource:v3,useOpaqueIdentifier:function(){return fp(ao)[0]},unstable_isNewReconciler:!1},hV={readContext:ps,useCallback:S3,useContext:ps,useEffect:fv,useImperativeHandle:b3,useLayoutEffect:_3,useMemo:M3,useReducer:hp,useRef:cv,useState:function(){return hp(ao)},useDebugValue:Xw,useDeferredValue:function(s){var e=hp(ao),t=e[0],r=e[1];return fv(function(){var o=ms.transition;ms.transition=1;try{r(s)}finally{ms.transition=o}},[s]),t},useTransition:function(){var s=hp(ao)[0];return[cv().current,s]},useMutableSource:v3,useOpaqueIdentifier:function(){return hp(ao)[0]},unstable_isNewReconciler:!1},dV=du.ReactCurrentOwner,Fs=!1;function Ni(s,e,t,r){e.child=s===null?c3(e,null,t,r):sv(e,s.child,t,r)}function T3(s,e,t,r,o){t=t.render;var l=e.ref;return Lf(e,o),r=$w(s,e,t,r,l,o),s!==null&&!Fs?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~o,zo(s,e,o)):(e.flags|=1,Ni(s,e,r,o),e.child)}function E3(s,e,t,r,o,l){if(s===null){var u=t.type;return typeof u=="function"&&!yb(u)&&u.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=u,A3(s,e,u,r,o,l)):(s=bv(t.type,null,r,e,e.mode,l),s.ref=e.ref,s.return=e,e.child=s)}return u=s.child,(o&l)==0&&(o=u.memoizedProps,t=t.compare,t=t!==null?t:Qd,t(o,r)&&s.ref===e.ref)?zo(s,e,l):(e.flags|=1,s=tl(u,r),s.ref=e.ref,s.return=e,e.child=s)}function A3(s,e,t,r,o,l){if(s!==null&&Qd(s.memoizedProps,r)&&s.ref===e.ref)if(Fs=!1,(l&o)!=0)(s.flags&16384)!=0&&(Fs=!0);else return e.lanes=s.lanes,zo(s,e,l);return Qw(s,e,t,r,l)}function Kw(s,e,t){var r=e.pendingProps,o=r.children,l=s!==null?s.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},wv(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},wv(e,l!==null?l.baseLanes:t);else return s=l!==null?l.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s},wv(e,s),null;else l!==null?(r=l.baseLanes|t,e.memoizedState=null):r=t,wv(e,r);return Ni(s,e,o,t),e.child}function C3(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=128)}function Qw(s,e,t,r,o){var l=Di(t)?yu:Jr.current;return l=Af(e,l),Lf(e,o),t=$w(s,e,t,r,l,o),s!==null&&!Fs?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~o,zo(s,e,o)):(e.flags|=1,Ni(s,e,t,o),e.child)}function R3(s,e,t,r,o){if(Di(t)){var l=!0;Y0(e)}else l=!1;if(Lf(e,o),e.stateNode===null)s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),a3(e,t,r),Uw(e,t,r,o),r=!0;else if(s===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var m=u.context,v=t.contextType;typeof v=="object"&&v!==null?v=ps(v):(v=Di(t)?yu:Jr.current,v=Af(e,v));var w=t.getDerivedStateFromProps,S=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";S||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||m!==v)&&l3(e,u,r,v),ja=!1;var A=e.memoizedState;u.state=A,rp(e,r,u,o),m=e.memoizedState,h!==r||A!==m||ki.current||ja?(typeof w=="function"&&(tv(e,t,w,r),m=e.memoizedState),(h=ja||o3(e,t,h,r,A,m,v))?(S||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4)):(typeof u.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=m),u.props=r,u.state=m,u.context=v,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{u=e.stateNode,n3(s,e),h=e.memoizedProps,v=e.type===e.elementType?h:Ns(e.type,h),u.props=v,S=e.pendingProps,A=u.context,m=t.contextType,typeof m=="object"&&m!==null?m=ps(m):(m=Di(t)?yu:Jr.current,m=Af(e,m));var R=t.getDerivedStateFromProps;(w=typeof R=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==S||A!==m)&&l3(e,u,r,m),ja=!1,A=e.memoizedState,u.state=A,rp(e,r,u,o);var O=e.memoizedState;h!==S||A!==O||ki.current||ja?(typeof R=="function"&&(tv(e,t,R,r),O=e.memoizedState),(v=ja||o3(e,t,v,r,A,O,m))?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,O,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,O,m)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof u.componentDidUpdate!="function"||h===s.memoizedProps&&A===s.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&A===s.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=O),u.props=r,u.state=O,u.context=m,r=v):(typeof u.componentDidUpdate!="function"||h===s.memoizedProps&&A===s.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&A===s.memoizedState||(e.flags|=256),r=!1)}return Zw(s,e,t,r,l,o)}function Zw(s,e,t,r,o,l){C3(s,e);var u=(e.flags&64)!=0;if(!r&&!u)return o&&jL(e,t,!1),zo(s,e,l);r=e.stateNode,dV.current=e;var h=u&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,s!==null&&u?(e.child=sv(e,s.child,null,l),e.child=sv(e,null,h,l)):Ni(s,e,h,l),e.memoizedState=r.state,o&&jL(e,t,!0),e.child}function L3(s){var e=s.stateNode;e.pendingContext?WL(s,e.pendingContext,e.pendingContext!==e.context):e.context&&WL(s,e.context,!1),Bw(s,e.containerInfo)}var dv={dehydrated:null,retryLane:0};function I3(s,e,t){var r=e.pendingProps,o=er.current,l=!1,u;return(u=(e.flags&64)!=0)||(u=s!==null&&s.memoizedState===null?!1:(o&2)!=0),u?(l=!0,e.flags&=-65):s!==null&&s.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(o|=1),Jn(er,o&1),s===null?(r.fallback!==void 0&&Hw(e),s=r.children,o=r.fallback,l?(s=P3(e,s,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=dv,s):typeof r.unstable_expectedLoadTime=="number"?(s=P3(e,s,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=dv,e.lanes=33554432,s):(t=xb({mode:"visible",children:s},e.mode,t,null),t.return=e,e.child=t)):s.memoizedState!==null?l?(r=D3(s,e,r.children,r.fallback,t),l=e.child,o=s.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=s.childLanes&~t,e.memoizedState=dv,r):(t=k3(s,e,r.children,t),e.memoizedState=null,t):l?(r=D3(s,e,r.children,r.fallback,t),l=e.child,o=s.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=s.childLanes&~t,e.memoizedState=dv,r):(t=k3(s,e,r.children,t),e.memoizedState=null,t)}function P3(s,e,t,r){var o=s.mode,l=s.child;return e={mode:"hidden",children:e},(o&2)==0&&l!==null?(l.childLanes=0,l.pendingProps=e):l=xb(e,o,0,null),t=Uf(t,o,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,t}function k3(s,e,t,r){var o=s.child;return s=o.sibling,t=tl(o,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=r),t.return=e,t.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,e.firstEffect=e.lastEffect=s),e.child=t}function D3(s,e,t,r,o){var l=e.mode,u=s.child;s=u.sibling;var h={mode:"hidden",children:t};return(l&2)==0&&e.child!==u?(t=e.child,t.childLanes=0,t.pendingProps=h,u=t.lastEffect,u!==null?(e.firstEffect=t.firstEffect,e.lastEffect=u,u.nextEffect=null):e.firstEffect=e.lastEffect=null):t=tl(u,h),s!==null?r=tl(s,r):(r=Uf(r,l,o,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function O3(s,e){s.lanes|=e;var t=s.alternate;t!==null&&(t.lanes|=e),t3(s.return,e)}function Jw(s,e,t,r,o,l){var u=s.memoizedState;u===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o,lastEffect:l}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=t,u.tailMode=o,u.lastEffect=l)}function N3(s,e,t){var r=e.pendingProps,o=r.revealOrder,l=r.tail;if(Ni(s,e,r.children,t),r=er.current,(r&2)!=0)r=r&1|2,e.flags|=64;else{if(s!==null&&(s.flags&64)!=0)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&O3(s,t);else if(s.tag===19)O3(s,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r&=1}if(Jn(er,r),(e.mode&2)==0)e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)s=t.alternate,s!==null&&ov(s)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),Jw(e,!1,o,t,l,e.lastEffect);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(s=o.alternate,s!==null&&ov(s)===null){e.child=o;break}s=o.sibling,o.sibling=t,t=o,o=s}Jw(e,!0,t,null,l,e.lastEffect);break;case"together":Jw(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function zo(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),mp|=e.lanes,(t&e.childLanes)!=0){if(s!==null&&e.child!==s.child)throw Error(tt(153));if(e.child!==null){for(s=e.child,t=tl(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=tl(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var F3,eb,U3,B3;F3=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};eb=function(){};U3=function(s,e,t,r){var o=s.memoizedProps;if(o!==r){s=e.stateNode,wu(so.current);var l=null;switch(t){case"input":o=U_(s,o),r=U_(s,r),l=[];break;case"option":o=H_(s,o),r=H_(s,r),l=[];break;case"select":o=Gn({},o,{value:void 0}),r=Gn({},r,{value:void 0}),l=[];break;case"textarea":o=G_(s,o),r=G_(s,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(s.onclick=W0)}$_(t,r);var u;t=null;for(v in o)if(!r.hasOwnProperty(v)&&o.hasOwnProperty(v)&&o[v]!=null)if(v==="style"){var h=o[v];for(u in h)h.hasOwnProperty(u)&&(t||(t={}),t[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Rd.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in r){var m=r[v];if(h=o!=null?o[v]:void 0,r.hasOwnProperty(v)&&m!==h&&(m!=null||h!=null))if(v==="style")if(h){for(u in h)!h.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(t||(t={}),t[u]="");for(u in m)m.hasOwnProperty(u)&&h[u]!==m[u]&&(t||(t={}),t[u]=m[u])}else t||(l||(l=[]),l.push(v,t)),t=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(l=l||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&On("scroll",s),l||h===m||(l=[])):typeof m=="object"&&m!==null&&m.$$typeof===k_?m.toString():(l=l||[]).push(v,m))}t&&(l=l||[]).push("style",t);var v=l;(e.updateQueue=v)&&(e.flags|=4)}};B3=function(s,e,t,r){t!==r&&(e.flags|=4)};function pp(s,e){if(!oo)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:r.sibling=null}}function pV(s,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Di(e.type)&&X0(),null;case 3:return If(),Nn(ki),Nn(Jr),Vw(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(av(e)?e.flags|=4:r.hydrate||(e.flags|=256)),eb(e),null;case 5:zw(e);var o=wu(ap.current);if(t=e.type,s!==null&&e.stateNode!=null)U3(s,e,t,r,o),s.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(tt(166));return null}if(s=wu(so.current),av(e)){r=e.stateNode,t=e.type;var l=e.memoizedProps;switch(r[Va]=e,r[j0]=l,t){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(s=0;s<Jd.length;s++)On(Jd[s],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":RR(r,l),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},On("invalid",r);break;case"textarea":PR(r,l),On("invalid",r)}$_(t,l),s=null;for(var u in l)l.hasOwnProperty(u)&&(o=l[u],u==="children"?typeof o=="string"?r.textContent!==o&&(s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s=["children",""+o]):Rd.hasOwnProperty(u)&&o!=null&&u==="onScroll"&&On("scroll",r));switch(t){case"input":A0(r),IR(r,l,!0);break;case"textarea":A0(r),DR(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=W0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(u=o.nodeType===9?o:o.ownerDocument,s===V_.html&&(s=OR(t)),s===V_.html?t==="script"?(s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof r.is=="string"?s=u.createElement(t,{is:r.is}):(s=u.createElement(t),t==="select"&&(u=s,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):s=u.createElementNS(s,t),s[Va]=e,s[j0]=r,F3(s,e,!1,!1),e.stateNode=s,u=j_(t,r),t){case"dialog":On("cancel",s),On("close",s),o=r;break;case"iframe":case"object":case"embed":On("load",s),o=r;break;case"video":case"audio":for(o=0;o<Jd.length;o++)On(Jd[o],s);o=r;break;case"source":On("error",s),o=r;break;case"img":case"image":case"link":On("error",s),On("load",s),o=r;break;case"details":On("toggle",s),o=r;break;case"input":RR(s,r),o=U_(s,r),On("invalid",s);break;case"option":o=H_(s,r);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},o=Gn({},r,{value:void 0}),On("invalid",s);break;case"textarea":PR(s,r),o=G_(s,r),On("invalid",s);break;default:o=r}$_(t,o);var h=o;for(l in h)if(h.hasOwnProperty(l)){var m=h[l];l==="style"?UR(s,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&NR(s,m)):l==="children"?typeof m=="string"?(t!=="textarea"||m!=="")&&Od(s,m):typeof m=="number"&&Od(s,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Rd.hasOwnProperty(l)?m!=null&&l==="onScroll"&&On("scroll",s):m!=null&&A_(s,l,m,u))}switch(t){case"input":A0(s),IR(s,r,!1);break;case"textarea":A0(s),DR(s);break;case"option":r.value!=null&&s.setAttribute("value",""+Fa(r.value));break;case"select":s.multiple=!!r.multiple,l=r.value,l!=null?df(s,!!r.multiple,l,!1):r.defaultValue!=null&&df(s,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(s.onclick=W0)}BL(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(s&&e.stateNode!=null)B3(s,e,s.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(tt(166));t=wu(ap.current),wu(so.current),av(e)?(r=e.stateNode,t=e.memoizedProps,r[Va]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Va]=e,e.stateNode=r)}return null;case 13:return Nn(er),r=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(r=r!==null,t=!1,s===null?e.memoizedProps.fallback!==void 0&&av(e):t=s.memoizedState!==null,r&&!t&&(e.mode&2)!=0&&(s===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(er.current&1)!=0?qr===0&&(qr=3):((qr===0||qr===3)&&(qr=4),yi===null||(mp&134217727)==0&&(Df&134217727)==0||Nf(yi,ni))),(r||t)&&(e.flags|=4),null);case 4:return If(),eb(e),s===null&&DL(e.stateNode.containerInfo),null;case 10:return Nw(e),null;case 17:return Di(e.type)&&X0(),null;case 19:if(Nn(er),r=e.memoizedState,r===null)return null;if(l=(e.flags&64)!=0,u=r.rendering,u===null)if(l)pp(r,!1);else{if(qr!==0||s!==null&&(s.flags&64)!=0)for(s=e.child;s!==null;){if(u=ov(s),u!==null){for(e.flags|=64,pp(r,!1),l=u.updateQueue,l!==null&&(e.updateQueue=l,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)l=t,s=r,l.flags&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,u=l.alternate,u===null?(l.childLanes=0,l.lanes=s,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,s=u.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return Jn(er,er.current&1|2),e.child}s=s.sibling}r.tail!==null&&ei()>fb&&(e.flags|=64,l=!0,pp(r,!1),e.lanes=33554432)}else{if(!l)if(s=ov(u),s!==null){if(e.flags|=64,l=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),pp(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!oo)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*ei()-r.renderingStartTime>fb&&t!==1073741824&&(e.flags|=64,l=!0,pp(r,!1),e.lanes=33554432);r.isBackwards?(u.sibling=e.child,e.child=u):(t=r.last,t!==null?t.sibling=u:e.child=u,r.last=u)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ei(),t.sibling=null,e=er.current,Jn(er,l?e&1|2:e&1),t):null;case 23:case 24:return vb(),s!==null&&s.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(tt(156,e.tag))}function mV(s){switch(s.tag){case 1:Di(s.type)&&X0();var e=s.flags;return e&4096?(s.flags=e&-4097|64,s):null;case 3:if(If(),Nn(ki),Nn(Jr),Vw(),e=s.flags,(e&64)!=0)throw Error(tt(285));return s.flags=e&-4097|64,s;case 5:return zw(s),null;case 13:return Nn(er),e=s.flags,e&4096?(s.flags=e&-4097|64,s):null;case 19:return Nn(er),null;case 4:return If(),null;case 10:return Nw(s),null;case 23:case 24:return vb(),null;default:return null}}function tb(s,e){try{var t="",r=e;do t+=Y5(r),r=r.return;while(r);var o=t}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:e,stack:o}}function nb(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var gV=typeof WeakMap=="function"?WeakMap:Map;function z3(s,e,t){t=qa(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){gv||(gv=!0,hb=r),nb(s,e)},t}function H3(s,e,t){t=qa(-1,t),t.tag=3;var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return nb(s,e),r(o)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(lo===null?lo=new Set([this]):lo.add(this),nb(s,e));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),t}var vV=typeof WeakSet=="function"?WeakSet:Set;function G3(s){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){el(s,t)}else e.current=null}function yV(s,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&s!==null){var t=s.memoizedProps,r=s.memoizedState;s=e.stateNode,e=s.getSnapshotBeforeUpdate(e.elementType===e.type?t:Ns(e.type,t),r),s.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Ew(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(tt(163))}function xV(s,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{if((s.tag&3)==3){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{var o=s;r=o.next,o=o.tag,(o&4)!=0&&(o&1)!=0&&(rI(t,s),AV(t,s)),s=r}while(s!==e)}return;case 1:s=t.stateNode,t.flags&4&&(e===null?s.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:Ns(t.type,e.memoizedProps),s.componentDidUpdate(r,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&i3(t,e,s);return;case 3:if(e=t.updateQueue,e!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}i3(t,e,s)}return;case 5:s=t.stateNode,e===null&&t.flags&4&&BL(t.type,t.memoizedProps)&&s.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&eL(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(tt(163))}function V3(s,e){for(var t=s;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var o=t.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,r.style.display=FR("display",o)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function W3(s,e){if(xu&&typeof xu.onCommitFiberUnmount=="function")try{xu.onCommitFiberUnmount(Rw,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var t=s=s.next;do{var r=t,o=r.destroy;if(r=r.tag,o!==void 0)if((r&4)!=0)rI(e,t);else{r=e;try{o()}catch(l){el(r,l)}}t=t.next}while(t!==s)}break;case 1:if(G3(e),s=e.stateNode,typeof s.componentWillUnmount=="function")try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(l){el(e,l)}break;case 5:G3(e);break;case 4:X3(s,e)}}function $3(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function j3(s){return s.tag===5||s.tag===3||s.tag===4}function q3(s){e:{for(var e=s.return;e!==null;){if(j3(e))break e;e=e.return}throw Error(tt(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(tt(161))}t.flags&16&&(Od(e,""),t.flags&=-17);e:t:for(t=s;;){for(;t.sibling===null;){if(t.return===null||j3(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?rb(s,t,e):ib(s,t,e)}function rb(s,e,t){var r=s.tag,o=r===5||r===6;if(o)s=o?s.stateNode:s.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=W0));else if(r!==4&&(s=s.child,s!==null))for(rb(s,e,t),s=s.sibling;s!==null;)rb(s,e,t),s=s.sibling}function ib(s,e,t){var r=s.tag,o=r===5||r===6;if(o)s=o?s.stateNode:s.stateNode.instance,e?t.insertBefore(s,e):t.appendChild(s);else if(r!==4&&(s=s.child,s!==null))for(ib(s,e,t),s=s.sibling;s!==null;)ib(s,e,t),s=s.sibling}function X3(s,e){for(var t=e,r=!1,o,l;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(tt(160));switch(o=r.stateNode,r.tag){case 5:l=!1;break e;case 3:o=o.containerInfo,l=!0;break e;case 4:o=o.containerInfo,l=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var u=s,h=t,m=h;;)if(W3(u,m),m.child!==null&&m.tag!==4)m.child.return=m,m=m.child;else{if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}l?(u=o,h=t.stateNode,u.nodeType===8?u.parentNode.removeChild(h):u.removeChild(h)):o.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){o=t.stateNode.containerInfo,l=!0,t.child.return=t,t=t.child;continue}}else if(W3(s,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function sb(s,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)==3&&(s=r.destroy,r.destroy=void 0,s!==void 0&&s()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var o=s!==null?s.memoizedProps:r;s=e.type;var l=e.updateQueue;if(e.updateQueue=null,l!==null){for(t[j0]=r,s==="input"&&r.type==="radio"&&r.name!=null&&LR(t,r),j_(s,o),e=j_(s,r),o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?UR(t,h):u==="dangerouslySetInnerHTML"?NR(t,h):u==="children"?Od(t,h):A_(t,u,h,e)}switch(s){case"input":B_(t,r);break;case"textarea":kR(t,r);break;case"select":s=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,l=r.value,l!=null?df(t,!!r.multiple,l,!1):s!==!!r.multiple&&(r.defaultValue!=null?df(t,!!r.multiple,r.defaultValue,!0):df(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(tt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,eL(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(cb=ei(),V3(e.child,!0)),Y3(e);return;case 19:Y3(e);return;case 17:return;case 23:case 24:V3(e,e.memoizedState!==null);return}throw Error(tt(163))}function Y3(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new vV),e.forEach(function(r){var o=LV.bind(null,s,r);t.has(r)||(t.add(r),r.then(o,o))})}}function _V(s,e){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var wV=Math.ceil,pv=du.ReactCurrentDispatcher,ob=du.ReactCurrentOwner,Vt=0,yi=null,Er=null,ni=0,Mu=0,ab=Wa(0),qr=0,mv=null,kf=0,mp=0,Df=0,lb=0,ub=null,cb=0,fb=1/0;function Of(){fb=ei()+500}var _t=null,gv=!1,hb=null,lo=null,Ka=!1,gp=null,vp=90,db=[],pb=[],Ho=null,yp=0,mb=null,vv=-1,Go=0,yv=0,xp=null,xv=!1;function Qi(){return(Vt&48)!=0?ei():vv!==-1?vv:vv=ei()}function Qa(s){if(s=s.mode,(s&2)==0)return 1;if((s&4)==0)return Cf()===99?1:2;if(Go===0&&(Go=kf),lV.transition!==0){yv!==0&&(yv=ub!==null?ub.pendingLanes:0),s=Go;var e=4186112&~yv;return e&=-e,e===0&&(s=4186112&~s,e=s&-s,e===0&&(e=8192)),e}return s=Cf(),(Vt&4)!=0&&s===98?s=O0(12,Go):(s=fG(s),s=O0(s,Go)),s}function Za(s,e,t){if(50<yp)throw yp=0,mb=null,Error(tt(185));if(s=_v(s,e),s===null)return null;N0(s,e,t),s===yi&&(Df|=e,qr===4&&Nf(s,ni));var r=Cf();e===1?(Vt&8)!=0&&(Vt&48)==0?gb(s):(gs(s,t),Vt===0&&(Of(),io())):((Vt&4)==0||r!==98&&r!==99||(Ho===null?Ho=new Set([s]):Ho.add(s)),gs(s,t)),ub=s}function _v(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}function gs(s,e){for(var t=s.callbackNode,r=s.suspendedLanes,o=s.pingedLanes,l=s.expirationTimes,u=s.pendingLanes;0<u;){var h=31-Ha(u),m=1<<h,v=l[h];if(v===-1){if((m&r)==0||(m&o)!=0){v=e,vf(m);var w=Ln;l[h]=10<=w?v+250:6<=w?v+5e3:-1}}else v<=e&&(s.expiredLanes|=m);u&=~m}if(r=$d(s,s===yi?ni:0),e=Ln,r===0)t!==null&&(t!==kw&&Iw(t),s.callbackNode=null,s.callbackPriority=0);else{if(t!==null){if(s.callbackPriority===e)return;t!==kw&&Iw(t)}e===15?(t=gb.bind(null,s),Uo===null?(Uo=[t],Q0=Lw(K0,e3)):Uo.push(t),t=kw):e===14?t=np(99,gb.bind(null,s)):(t=hG(e),t=np(t,K3.bind(null,s))),s.callbackPriority=e,s.callbackNode=t}}function K3(s){if(vv=-1,yv=Go=0,(Vt&48)!=0)throw Error(tt(327));var e=s.callbackNode;if(Ja()&&s.callbackNode!==e)return null;var t=$d(s,s===yi?ni:0);if(t===0)return null;var r=t,o=Vt;Vt|=16;var l=eI();(yi!==s||ni!==r)&&(Of(),Ff(s,r));do try{MV();break}catch(h){J3(s,h)}while(1);if(Ow(),pv.current=l,Vt=o,Er!==null?r=0:(yi=null,ni=0,r=qr),(kf&Df)!=0)Ff(s,0);else if(r!==0){if(r===2&&(Vt|=64,s.hydrate&&(s.hydrate=!1,Ew(s.containerInfo)),t=aL(s),t!==0&&(r=_p(s,t))),r===1)throw e=mv,Ff(s,0),Nf(s,t),gs(s,ei()),e;switch(s.finishedWork=s.current.alternate,s.finishedLanes=t,r){case 0:case 1:throw Error(tt(345));case 2:Tu(s);break;case 3:if(Nf(s,t),(t&62914560)===t&&(r=cb+500-ei(),10<r)){if($d(s,0)!==0)break;if(o=s.suspendedLanes,(o&t)!==t){Qi(),s.pingedLanes|=s.suspendedLanes&o;break}s.timeoutHandle=zL(Tu.bind(null,s),r);break}Tu(s);break;case 4:if(Nf(s,t),(t&4186112)===t)break;for(r=s.eventTimes,o=-1;0<t;){var u=31-Ha(t);l=1<<u,u=r[u],u>o&&(o=u),t&=~l}if(t=o,t=ei()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*wV(t/1960))-t,10<t){s.timeoutHandle=zL(Tu.bind(null,s),t);break}Tu(s);break;case 5:Tu(s);break;default:throw Error(tt(329))}}return gs(s,ei()),s.callbackNode===e?K3.bind(null,s):null}function Nf(s,e){for(e&=~lb,e&=~Df,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-Ha(e),r=1<<t;s[t]=-1,e&=~r}}function gb(s){if((Vt&48)!=0)throw Error(tt(327));if(Ja(),s===yi&&(s.expiredLanes&ni)!=0){var e=ni,t=_p(s,e);(kf&Df)!=0&&(e=$d(s,e),t=_p(s,e))}else e=$d(s,0),t=_p(s,e);if(s.tag!==0&&t===2&&(Vt|=64,s.hydrate&&(s.hydrate=!1,Ew(s.containerInfo)),e=aL(s),e!==0&&(t=_p(s,e))),t===1)throw t=mv,Ff(s,0),Nf(s,e),gs(s,ei()),t;return s.finishedWork=s.current.alternate,s.finishedLanes=e,Tu(s),gs(s,ei()),null}function bV(){if(Ho!==null){var s=Ho;Ho=null,s.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,gs(e,ei())})}io()}function Q3(s,e){var t=Vt;Vt|=1;try{return s(e)}finally{Vt=t,Vt===0&&(Of(),io())}}function Z3(s,e){var t=Vt;Vt&=-2,Vt|=8;try{return s(e)}finally{Vt=t,Vt===0&&(Of(),io())}}function wv(s,e){Jn(ab,Mu),Mu|=e,kf|=e}function vb(){Mu=ab.current,Nn(ab)}function Ff(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,nV(t)),Er!==null)for(t=Er.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&X0();break;case 3:If(),Nn(ki),Nn(Jr),Vw();break;case 5:zw(r);break;case 4:If();break;case 13:Nn(er);break;case 19:Nn(er);break;case 10:Nw(r);break;case 23:case 24:vb()}t=t.return}yi=s,Er=tl(s.current,null),ni=Mu=kf=e,qr=0,mv=null,lb=Df=mp=0}function J3(s,e){do{var t=Er;try{if(Ow(),lp.current=hv,lv){for(var r=cr.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}lv=!1}if(up=0,jr=ti=cr=null,cp=!1,ob.current=null,t===null||t.return===null){qr=1,mv=e,Er=null;break}e:{var l=s,u=t.return,h=t,m=e;if(e=ni,h.flags|=2048,h.firstEffect=h.lastEffect=null,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m;if((h.mode&2)==0){var w=h.alternate;w?(h.updateQueue=w.updateQueue,h.memoizedState=w.memoizedState,h.lanes=w.lanes):(h.updateQueue=null,h.memoizedState=null)}var S=(er.current&1)!=0,A=u;do{var R;if(R=A.tag===13){var O=A.memoizedState;if(O!==null)R=O.dehydrated!==null;else{var N=A.memoizedProps;R=N.fallback===void 0?!1:N.unstable_avoidThisFallback!==!0?!0:!S}}if(R){var k=A.updateQueue;if(k===null){var D=new Set;D.add(v),A.updateQueue=D}else k.add(v);if((A.mode&2)==0){if(A.flags|=64,h.flags|=16384,h.flags&=-2981,h.tag===1)if(h.alternate===null)h.tag=17;else{var P=qa(-1,1);P.tag=2,Xa(h,P)}h.lanes|=1;break e}m=void 0,h=e;var F=l.pingCache;if(F===null?(F=l.pingCache=new gV,m=new Set,F.set(v,m)):(m=F.get(v),m===void 0&&(m=new Set,F.set(v,m))),!m.has(h)){m.add(h);var L=RV.bind(null,l,v,h);v.then(L,L)}A.flags|=4096,A.lanes=e;break e}A=A.return}while(A!==null);m=Error((hf(h.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}qr!==5&&(qr=2),m=tb(m,h),A=u;do{switch(A.tag){case 3:l=m,A.flags|=4096,e&=-e,A.lanes|=e;var z=z3(A,l,e);r3(A,z);break e;case 1:l=m;var H=A.type,X=A.stateNode;if((A.flags&64)==0&&(typeof H.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(lo===null||!lo.has(X)))){A.flags|=4096,e&=-e,A.lanes|=e;var $=H3(A,l,e);r3(A,$);break e}}A=A.return}while(A!==null)}nI(t)}catch(J){e=J,Er===t&&t!==null&&(Er=t=t.return);continue}break}while(1)}function eI(){var s=pv.current;return pv.current=hv,s===null?hv:s}function _p(s,e){var t=Vt;Vt|=16;var r=eI();yi===s&&ni===e||Ff(s,e);do try{SV();break}catch(o){J3(s,o)}while(1);if(Ow(),Vt=t,pv.current=r,Er!==null)throw Error(tt(261));return yi=null,ni=0,qr}function SV(){for(;Er!==null;)tI(Er)}function MV(){for(;Er!==null&&!sV();)tI(Er)}function tI(s){var e=sI(s.alternate,s,Mu);s.memoizedProps=s.pendingProps,e===null?nI(s):Er=e,ob.current=null}function nI(s){var e=s;do{var t=e.alternate;if(s=e.return,(e.flags&2048)==0){if(t=pV(t,e,Mu),t!==null){Er=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(Mu&1073741824)!=0||(t.mode&4)==0){for(var r=0,o=t.child;o!==null;)r|=o.lanes|o.childLanes,o=o.sibling;t.childLanes=r}s!==null&&(s.flags&2048)==0&&(s.firstEffect===null&&(s.firstEffect=e.firstEffect),e.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=e.firstEffect),s.lastEffect=e.lastEffect),1<e.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=e:s.firstEffect=e,s.lastEffect=e))}else{if(t=mV(e),t!==null){t.flags&=2047,Er=t;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(e=e.sibling,e!==null){Er=e;return}Er=e=s}while(e!==null);qr===0&&(qr=5)}function Tu(s){var e=Cf();return _u(99,TV.bind(null,s,e)),null}function TV(s,e){do Ja();while(gp!==null);if((Vt&48)!=0)throw Error(tt(327));var t=s.finishedWork;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(tt(177));s.callbackNode=null;var r=t.lanes|t.childLanes,o=r,l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;for(var u=s.eventTimes,h=s.expirationTimes;0<l;){var m=31-Ha(l),v=1<<m;o[m]=0,u[m]=-1,h[m]=-1,l&=~v}if(Ho!==null&&(r&24)==0&&Ho.has(s)&&Ho.delete(s),s===yi&&(Er=yi=null,ni=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(o=Vt,Vt|=32,ob.current=null,Sw=F0,u=AL(),xw(u)){if("selectionStart"in u)h={start:u.selectionStart,end:u.selectionEnd};else e:if(h=(h=u.ownerDocument)&&h.defaultView||window,(v=h.getSelection&&h.getSelection())&&v.rangeCount!==0){h=v.anchorNode,l=v.anchorOffset,m=v.focusNode,v=v.focusOffset;try{h.nodeType,m.nodeType}catch{h=null;break e}var w=0,S=-1,A=-1,R=0,O=0,N=u,k=null;t:for(;;){for(var D;N!==h||l!==0&&N.nodeType!==3||(S=w+l),N!==m||v!==0&&N.nodeType!==3||(A=w+v),N.nodeType===3&&(w+=N.nodeValue.length),(D=N.firstChild)!==null;)k=N,N=D;for(;;){if(N===u)break t;if(k===h&&++R===l&&(S=w),k===m&&++O===v&&(A=w),(D=N.nextSibling)!==null)break;N=k,k=N.parentNode}N=D}h=S===-1||A===-1?null:{start:S,end:A}}else h=null;h=h||{start:0,end:0}}else h=null;Mw={focusedElem:u,selectionRange:h},F0=!1,xp=null,xv=!1,_t=r;do try{EV()}catch(J){if(_t===null)throw Error(tt(330));el(_t,J),_t=_t.nextEffect}while(_t!==null);xp=null,_t=r;do try{for(u=s;_t!==null;){var P=_t.flags;if(P&16&&Od(_t.stateNode,""),P&128){var F=_t.alternate;if(F!==null){var L=F.ref;L!==null&&(typeof L=="function"?L(null):L.current=null)}}switch(P&1038){case 2:q3(_t),_t.flags&=-3;break;case 6:q3(_t),_t.flags&=-3,sb(_t.alternate,_t);break;case 1024:_t.flags&=-1025;break;case 1028:_t.flags&=-1025,sb(_t.alternate,_t);break;case 4:sb(_t.alternate,_t);break;case 8:h=_t,X3(u,h);var z=h.alternate;$3(h),z!==null&&$3(z)}_t=_t.nextEffect}}catch(J){if(_t===null)throw Error(tt(330));el(_t,J),_t=_t.nextEffect}while(_t!==null);if(L=Mw,F=AL(),P=L.focusedElem,u=L.selectionRange,F!==P&&P&&P.ownerDocument&&EL(P.ownerDocument.documentElement,P)){for(u!==null&&xw(P)&&(F=u.start,L=u.end,L===void 0&&(L=F),"selectionStart"in P?(P.selectionStart=F,P.selectionEnd=Math.min(L,P.value.length)):(L=(F=P.ownerDocument||document)&&F.defaultView||window,L.getSelection&&(L=L.getSelection(),h=P.textContent.length,z=Math.min(u.start,h),u=u.end===void 0?z:Math.min(u.end,h),!L.extend&&z>u&&(h=u,u=z,z=h),h=TL(P,z),l=TL(P,u),h&&l&&(L.rangeCount!==1||L.anchorNode!==h.node||L.anchorOffset!==h.offset||L.focusNode!==l.node||L.focusOffset!==l.offset)&&(F=F.createRange(),F.setStart(h.node,h.offset),L.removeAllRanges(),z>u?(L.addRange(F),L.extend(l.node,l.offset)):(F.setEnd(l.node,l.offset),L.addRange(F)))))),F=[],L=P;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<F.length;P++)L=F[P],L.element.scrollLeft=L.left,L.element.scrollTop=L.top}F0=!!Sw,Mw=Sw=null,s.current=t,_t=r;do try{for(P=s;_t!==null;){var H=_t.flags;if(H&36&&xV(P,_t.alternate,_t),H&128){F=void 0;var X=_t.ref;if(X!==null){var $=_t.stateNode;switch(_t.tag){case 5:F=$;break;default:F=$}typeof X=="function"?X(F):X.current=F}}_t=_t.nextEffect}}catch(J){if(_t===null)throw Error(tt(330));el(_t,J),_t=_t.nextEffect}while(_t!==null);_t=null,aV(),Vt=o}else s.current=t;if(Ka)Ka=!1,gp=s,vp=e;else for(_t=r;_t!==null;)e=_t.nextEffect,_t.nextEffect=null,_t.flags&8&&(H=_t,H.sibling=null,H.stateNode=null),_t=e;if(r=s.pendingLanes,r===0&&(lo=null),r===1?s===mb?yp++:(yp=0,mb=s):yp=0,t=t.stateNode,xu&&typeof xu.onCommitFiberRoot=="function")try{xu.onCommitFiberRoot(Rw,t,void 0,(t.current.flags&64)==64)}catch{}if(gs(s,ei()),gv)throw gv=!1,s=hb,hb=null,s;return(Vt&8)!=0||io(),null}function EV(){for(;_t!==null;){var s=_t.alternate;xv||xp===null||((_t.flags&8)!=0?qR(_t,xp)&&(xv=!0):_t.tag===13&&_V(s,_t)&&qR(_t,xp)&&(xv=!0));var e=_t.flags;(e&256)!=0&&yV(s,_t),(e&512)==0||Ka||(Ka=!0,np(97,function(){return Ja(),null})),_t=_t.nextEffect}}function Ja(){if(vp!==90){var s=97<vp?97:vp;return vp=90,_u(s,CV)}return!1}function AV(s,e){db.push(e,s),Ka||(Ka=!0,np(97,function(){return Ja(),null}))}function rI(s,e){pb.push(e,s),Ka||(Ka=!0,np(97,function(){return Ja(),null}))}function CV(){if(gp===null)return!1;var s=gp;if(gp=null,(Vt&48)!=0)throw Error(tt(331));var e=Vt;Vt|=32;var t=pb;pb=[];for(var r=0;r<t.length;r+=2){var o=t[r],l=t[r+1],u=o.destroy;if(o.destroy=void 0,typeof u=="function")try{u()}catch(m){if(l===null)throw Error(tt(330));el(l,m)}}for(t=db,db=[],r=0;r<t.length;r+=2){o=t[r],l=t[r+1];try{var h=o.create;o.destroy=h()}catch(m){if(l===null)throw Error(tt(330));el(l,m)}}for(h=s.current.firstEffect;h!==null;)s=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=null,h.stateNode=null),h=s;return Vt=e,io(),!0}function iI(s,e,t){e=tb(t,e),e=z3(s,e,1),Xa(s,e),e=Qi(),s=_v(s,1),s!==null&&(N0(s,1,e),gs(s,e))}function el(s,e){if(s.tag===3)iI(s,s,e);else for(var t=s.return;t!==null;){if(t.tag===3){iI(t,s,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r))){s=tb(e,s);var o=H3(t,s,1);if(Xa(t,o),o=Qi(),t=_v(t,1),t!==null)N0(t,1,o),gs(t,o);else if(typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r)))try{r.componentDidCatch(e,s)}catch{}break}}t=t.return}}function RV(s,e,t){var r=s.pingCache;r!==null&&r.delete(e),e=Qi(),s.pingedLanes|=s.suspendedLanes&t,yi===s&&(ni&t)===t&&(qr===4||qr===3&&(ni&62914560)===ni&&500>ei()-cb?Ff(s,0):lb|=t),gs(s,e)}function LV(s,e){var t=s.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=s.mode,(e&2)==0?e=1:(e&4)==0?e=Cf()===99?1:2:(Go===0&&(Go=kf),e=yf(62914560&~Go),e===0&&(e=4194304))),t=Qi(),s=_v(s,e),s!==null&&(N0(s,e,t),gs(s,t))}var sI;sI=function(s,e,t){var r=e.lanes;if(s!==null)if(s.memoizedProps!==e.pendingProps||ki.current)Fs=!0;else if((t&r)!=0)Fs=(s.flags&16384)!=0;else{switch(Fs=!1,e.tag){case 3:L3(e),Gw();break;case 5:f3(e);break;case 1:Di(e.type)&&Y0(e);break;case 4:Bw(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var o=e.type._context;Jn(Z0,o._currentValue),o._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?I3(s,e,t):(Jn(er,er.current&1),e=zo(s,e,t),e!==null?e.sibling:null);Jn(er,er.current&1);break;case 19:if(r=(t&e.childLanes)!=0,(s.flags&64)!=0){if(r)return N3(s,e,t);e.flags|=64}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Jn(er,er.current),r)break;return null;case 23:case 24:return e.lanes=0,Kw(s,e,t)}return zo(s,e,t)}else Fs=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,o=Af(e,Jr.current),Lf(e,t),o=$w(null,e,r,s,o,t),e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Di(r)){var l=!0;Y0(e)}else l=!1;e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fw(e);var u=r.getDerivedStateFromProps;typeof u=="function"&&tv(e,r,u,s),o.updater=nv,e.stateNode=o,o._reactInternals=e,Uw(e,r,s,t),e=Zw(null,e,r,!0,l,t)}else e.tag=0,Ni(null,e,o,t),e=e.child;return e;case 16:o=e.elementType;e:{switch(s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,l=o._init,o=l(o._payload),e.type=o,l=e.tag=PV(o),s=Ns(o,s),l){case 0:e=Qw(null,e,o,s,t);break e;case 1:e=R3(null,e,o,s,t);break e;case 11:e=T3(null,e,o,s,t);break e;case 14:e=E3(null,e,o,Ns(o.type,s),r,t);break e}throw Error(tt(306,o,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ns(r,o),Qw(s,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ns(r,o),R3(s,e,r,o,t);case 3:if(L3(e),r=e.updateQueue,s===null||r===null)throw Error(tt(282));if(r=e.pendingProps,o=e.memoizedState,o=o!==null?o.element:null,n3(s,e),rp(e,r,null,t),r=e.memoizedState.element,r===o)Gw(),e=zo(s,e,t);else{if(o=e.stateNode,(l=o.hydrate)&&(Ya=Sf(e.stateNode.containerInfo.firstChild),Bo=e,l=oo=!0),l){if(s=o.mutableSourceEagerHydrationData,s!=null)for(o=0;o<s.length;o+=2)l=s[o],l._workInProgressVersionPrimary=s[o+1],Pf.push(l);for(t=c3(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Ni(s,e,r,t),Gw();e=e.child}return e;case 5:return f3(e),s===null&&Hw(e),r=e.type,o=e.pendingProps,l=s!==null?s.memoizedProps:null,u=o.children,Tw(r,o)?u=null:l!==null&&Tw(r,l)&&(e.flags|=16),C3(s,e),Ni(s,e,u,t),e.child;case 6:return s===null&&Hw(e),null;case 13:return I3(s,e,t);case 4:return Bw(e,e.stateNode.containerInfo),r=e.pendingProps,s===null?e.child=sv(e,null,r,t):Ni(s,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ns(r,o),T3(s,e,r,o,t);case 7:return Ni(s,e,e.pendingProps,t),e.child;case 8:return Ni(s,e,e.pendingProps.children,t),e.child;case 12:return Ni(s,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,o=e.pendingProps,u=e.memoizedProps,l=o.value;var h=e.type._context;if(Jn(Z0,h._currentValue),h._currentValue=l,u!==null)if(h=u.value,l=ds(h,l)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(h,l):1073741823)|0,l===0){if(u.children===o.children&&!ki.current){e=zo(s,e,t);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var m=h.dependencies;if(m!==null){u=h.child;for(var v=m.firstContext;v!==null;){if(v.context===r&&(v.observedBits&l)!=0){h.tag===1&&(v=qa(-1,t&-t),v.tag=2,Xa(h,v)),h.lanes|=t,v=h.alternate,v!==null&&(v.lanes|=t),t3(h.return,t),m.lanes|=t;break}v=v.next}}else u=h.tag===10&&h.type===e.type?null:h.child;if(u!==null)u.return=h;else for(u=h;u!==null;){if(u===e){u=null;break}if(h=u.sibling,h!==null){h.return=u.return,u=h;break}u=u.return}h=u}Ni(s,e,o.children,t),e=e.child}return e;case 9:return o=e.type,l=e.pendingProps,r=l.children,Lf(e,t),o=ps(o,l.unstable_observedBits),r=r(o),e.flags|=1,Ni(s,e,r,t),e.child;case 14:return o=e.type,l=Ns(o,e.pendingProps),l=Ns(o.type,l),E3(s,e,o,l,r,t);case 15:return A3(s,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ns(r,o),s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Di(r)?(s=!0,Y0(e)):s=!1,Lf(e,t),a3(e,r,o),Uw(e,r,o,t),Zw(null,e,r,!0,s,t);case 19:return N3(s,e,t);case 23:return Kw(s,e,t);case 24:return Kw(s,e,t)}throw Error(tt(156,e.tag))};function IV(s,e,t,r){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(s,e,t,r){return new IV(s,e,t,r)}function yb(s){return s=s.prototype,!(!s||!s.isReactComponent)}function PV(s){if(typeof s=="function")return yb(s)?1:0;if(s!=null){if(s=s.$$typeof,s===S0)return 11;if(s===T0)return 14}return 2}function tl(s,e){var t=s.alternate;return t===null?(t=vs(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function bv(s,e,t,r,o,l){var u=2;if(r=s,typeof s=="function")yb(s)&&(u=1);else if(typeof s=="string")u=5;else e:switch(s){case Na:return Uf(t.children,o,l,e);case TR:u=8,o|=16;break;case C_:u=8,o|=1;break;case Id:return s=vs(12,t,e,o|8),s.elementType=Id,s.type=Id,s.lanes=l,s;case Pd:return s=vs(13,t,e,o),s.type=Pd,s.elementType=Pd,s.lanes=l,s;case M0:return s=vs(19,t,e,o),s.elementType=M0,s.lanes=l,s;case D_:return xb(t,o,l,e);case O_:return s=vs(24,t,e,o),s.elementType=O_,s.lanes=l,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R_:u=10;break e;case L_:u=9;break e;case S0:u=11;break e;case T0:u=14;break e;case I_:u=16,r=null;break e;case P_:u=22;break e}throw Error(tt(130,s==null?s:typeof s,""))}return e=vs(u,t,e,o),e.elementType=s,e.type=r,e.lanes=l,e}function Uf(s,e,t,r){return s=vs(7,s,r,e),s.lanes=t,s}function xb(s,e,t,r){return s=vs(23,s,r,e),s.elementType=D_,s.lanes=t,s}function _b(s,e,t){return s=vs(6,s,null,e),s.lanes=t,s}function wb(s,e,t){return e=vs(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function kV(s,e,t){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=aw(0),this.expirationTimes=aw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aw(0),this.mutableSourceEagerHydrationData=null}function DV(s,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:r==null?null:""+r,children:s,containerInfo:e,implementation:t}}function Sv(s,e,t,r){var o=e.current,l=Qi(),u=Qa(o);e:if(t){t=t._reactInternals;t:{if(gu(t)!==t||t.tag!==1)throw Error(tt(170));var h=t;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(Di(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(h!==null);throw Error(tt(171))}if(t.tag===1){var m=t.type;if(Di(m)){t=$L(t,m,h);break e}}t=h}else t=$a;return e.context===null?e.context=t:e.pendingContext=t,e=qa(l,u),e.payload={element:s},r=r===void 0?null:r,r!==null&&(e.callback=r),Xa(o,e),Za(o,u,l),u}function bb(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function oI(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function Sb(s,e){oI(s,e),(s=s.alternate)&&oI(s,e)}function OV(){return null}function Mb(s,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new kV(s,e,t!=null&&t.hydrate===!0),e=vs(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,Fw(e),s[Mf]=t.current,DL(s.nodeType===8?s.parentNode:s),r)for(s=0;s<r.length;s++){e=r[s];var o=e._getVersion;o=o(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,o]:t.mutableSourceEagerHydrationData.push(e,o)}this._internalRoot=t}Mb.prototype.render=function(s){Sv(s,this._internalRoot,null,null)};Mb.prototype.unmount=function(){var s=this._internalRoot,e=s.containerInfo;Sv(null,s,null,function(){e[Mf]=null})};function wp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function NV(s,e){if(e||(e=s?s.nodeType===9?s.documentElement:s.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=s.lastChild;)s.removeChild(t);return new Mb(s,0,e?{hydrate:!0}:void 0)}function Mv(s,e,t,r,o){var l=t._reactRootContainer;if(l){var u=l._internalRoot;if(typeof o=="function"){var h=o;o=function(){var v=bb(u);h.call(v)}}Sv(e,u,s,o)}else{if(l=t._reactRootContainer=NV(t,r),u=l._internalRoot,typeof o=="function"){var m=o;o=function(){var v=bb(u);m.call(v)}}Z3(function(){Sv(e,u,s,o)})}return bb(u)}XR=function(s){if(s.tag===13){var e=Qi();Za(s,4,e),Sb(s,4)}};tw=function(s){if(s.tag===13){var e=Qi();Za(s,67108864,e),Sb(s,67108864)}};YR=function(s){if(s.tag===13){var e=Qi(),t=Qa(s);Za(s,t,e),Sb(s,t)}};KR=function(s,e){return e()};X_=function(s,e,t){switch(e){case"input":if(B_(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==s&&r.form===s.form){var o=q0(r);if(!o)throw Error(tt(90));CR(r),B_(r,o)}}}break;case"textarea":kR(s,t);break;case"select":e=t.value,e!=null&&df(s,!!t.multiple,e,!1)}};Y_=Q3;GR=function(s,e,t,r,o){var l=Vt;Vt|=4;try{return _u(98,s.bind(null,e,t,r,o))}finally{Vt=l,Vt===0&&(Of(),io())}};K_=function(){(Vt&49)==0&&(bV(),Ja())};VR=function(s,e){var t=Vt;Vt|=2;try{return s(e)}finally{Vt=t,Vt===0&&(Of(),io())}};function aI(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(tt(200));return DV(s,e,null,t)}var FV={Events:[tp,Tf,q0,zR,HR,Ja,{current:!1}]},bp={findFiberByHostInstance:vu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},UV={bundleType:bp.bundleType,version:bp.version,rendererPackageName:bp.rendererPackageName,rendererConfig:bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:du.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=jR(s),s===null?null:s.stateNode},findFiberByHostInstance:bp.findFiberByHostInstance||OV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{Rw=Tv.inject(UV),xu=Tv}catch{}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FV;hs.createPortal=aI;hs.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(tt(188)):Error(tt(268,Object.keys(s)));return s=jR(e),s=s===null?null:s.stateNode,s};hs.flushSync=function(s,e){var t=Vt;if((t&48)!=0)return s(e);Vt|=1;try{if(s)return _u(99,s.bind(null,e))}finally{Vt=t,io()}};hs.hydrate=function(s,e,t){if(!wp(e))throw Error(tt(200));return Mv(null,s,e,!0,t)};hs.render=function(s,e,t){if(!wp(e))throw Error(tt(200));return Mv(null,s,e,!1,t)};hs.unmountComponentAtNode=function(s){if(!wp(s))throw Error(tt(40));return s._reactRootContainer?(Z3(function(){Mv(null,null,s,!1,function(){s._reactRootContainer=null,s[Mf]=null})}),!0):!1};hs.unstable_batchedUpdates=Q3;hs.unstable_createPortal=function(s,e){return aI(s,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};hs.unstable_renderSubtreeIntoContainer=function(s,e,t,r){if(!wp(t))throw Error(tt(200));if(s==null||s._reactInternals===void 0)throw Error(tt(38));return Mv(s,e,t,!1,r)};hs.version="17.0.2";function lI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lI)}catch(s){console.error(s)}}lI(),yR.exports=hs;var YV=yR.exports;export{Wl as A,Ei as B,Qe as C,Yh as D,Gr as E,VV as F,Vr as G,lA as H,O5 as I,Md as J,N5 as K,J1 as L,Ir as M,F5 as N,Ht as O,mr as P,Ct as Q,yA as R,Ma as S,dg as T,V5 as U,le as V,xn as W,YV as X,ot as a,Zx as b,Ro as c,Vl as d,mA as e,WV as f,je as g,Wm as h,Uz as i,qm as j,kA as k,zV as l,Vm as m,CA as n,HV as o,GV as p,$V as q,oH as r,of as s,s0 as t,jV as u,qV as v,Xt as w,WE as x,dH as y,XV as z};
