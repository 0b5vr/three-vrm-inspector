var Xe=Object.defineProperty,qe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var ne=(n,e,t)=>e in n?Xe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C=(n,e)=>{for(var t in e||(e={}))et.call(e,t)&&ne(n,t,e[t]);if(ge)for(var t of ge(e))tt.call(e,t)&&ne(n,t,e[t]);return n},M=(n,e)=>qe(n,$e(e));var u=(n,e,t)=>(ne(n,typeof e!="symbol"?e+"":e,t),t);import{M as pe,C as se,a as J,S as oe,b as H,F as nt,A as fe,Q as xe,V as be,G as Ee,c as st,d as ot,e as it,f as rt,g as ve,v as at,h as At,i as lt,j as F,k as ie,T as Be,l as ct,R as ht,m as we,n as dt,D as ut,o as mt,p as Ce,E as gt,O as pt,U as ft,q as xt,r as bt,s as Et,t as vt,u as Bt,w as wt,x as Ct,y as Me,P as Mt,z as Rt,B as yt,K as kt,H as Pt,I as It,J as Lt,L as _t,N as re,W as Qt,X as zt,Y as St,Z as Ht,_ as Tt,$ as Dt,a0 as Nt,a1 as Vt,a2 as X,a3 as Re,a4 as Ut,a5 as i,a6 as c,a7 as v,a8 as Q,a9 as Ot,aa as Ft}from"./vendor.ea04ae5a.js";const Gt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};Gt();const jt=new pe({transparent:!0,depthTest:!1,depthWrite:!1});function G(n,e=jt){const t=new Map;return n.forEach(s=>{Array.isArray(s.material)&&(t.set(s,s.material[0]),s.material[0]=e)}),()=>{for(const[s,o]of t)s.material[0]=o}}const ye=({index:n},{json:e,parser:t})=>{const s=parseInt(n,10);let o;return t.getDependencies("mesh").then(r=>{const a=[];e.meshes.forEach((l,A)=>{l.primitives.forEach((f,m)=>{if(s===f.material){let h=r[A];h.children.length!==0&&(h=h.children[m]);const p=h;a.push(p)}})}),o=G(a)}),()=>{o&&o()}};function Wt(n,e,t){const o=n.parser.json.nodes[e].mesh;if(o==null)return null;const a=n.parser.json.meshes[o].primitives.length,l=[];return t.traverse(A=>{l.length<a&&A.isMesh&&l.push(A)}),l}async function q(n,e){const t=await n.parser.getDependency("node",e);return Wt(n,e,t)}const Yt=({index:n},{gltf:e,json:t})=>{const s=parseInt(n,10);let o;const r=t.nodes,a=[];return r==null||r.forEach((A,d)=>{A.mesh===s&&a.push(d)}),Promise.all(a.map(A=>q(e,A))).then(A=>A.flat()).then(A=>{o=G(A)}),()=>{o&&o()}},Zt=({meshIndex:n,targetIndex:e},{gltf:t,json:s})=>{const o=parseInt(n,10),r=parseInt(e,10);let a;const l=s.nodes,A=[];return l==null||l.forEach((f,m)=>{f.mesh===o&&A.push(m)}),Promise.all(A.map(f=>q(t,f))).then(f=>f.flat()).then(f=>{f.forEach(m=>{m.morphTargetInfluences&&(m.morphTargetInfluences[r]=1)}),a=()=>{f.forEach(m=>{m.morphTargetInfluences&&(m.morphTargetInfluences[r]=0)})}}),()=>{a&&a()}},U={black:"#000000",white:"#ffffff",back1:"#191a1f",fore:"#d0edff",titleBarBg:"#30343b",accent:"#ff0066",gray:"#75848f",uiBackground:"rgba( 25, 26, 31, 0.8 )",error:"#ff0066",warning:"#f7f025",severityInfo:"#53c5ff",constant:"#ff0066",number:"#8a8aff",string:"#f7f025"},Kt=new se(U.constant),Jt=new J({color:Kt,transparent:!0,wireframe:!0,depthTest:!1,depthWrite:!1}),Xt=new oe(.2);function ke(n=Xt){const e=new H(n,Jt);return e.frustumCulled=!1,e.renderOrder=1e4,e}function $(n){const e=new Map;return n.forEach(t=>{const s=ke();t.add(s),e.set(t,s)}),()=>{n.forEach(t=>{const s=e.get(t);t.remove(s)})}}const qt=({index:n},{parser:e})=>{const t=parseInt(n,10);let s;return e.getDependency("node",t).then(o=>{s=$([o])}),()=>{s&&s()}},$t=({meshIndex:n,primIndex:e},{parser:t})=>{const s=parseInt(n,10),o=parseInt(e,10);let r;return t.getDependency("mesh",s).then(a=>{a.children.length!==0&&(a=a.children[o]),r=G([a])}),()=>{r&&r()}},Pe=({meshIndex:n,primIndex:e,targetIndex:t},{parser:s})=>{const o=parseInt(n,10),r=parseInt(e,10),a=parseInt(t,10);let l;return s.getDependency("mesh",o).then(A=>{A.children.length!==0&&(A=A.children[r]);const d=A;d.morphTargetInfluences&&(d.morphTargetInfluences[a]=1),l=()=>{d.morphTargetInfluences&&(d.morphTargetInfluences[a]=0)}}),()=>{l&&l()}},en=({index:n},{gltf:e,json:t})=>{const s=parseInt(n,10);let o;const r=t.nodes,a=[];return r==null||r.forEach((A,d)=>{A.skin===s&&a.push(d)}),Promise.all(a.map(A=>q(e,A))).then(A=>A.flat()).then(A=>{o=G(A)}),()=>{o&&o()}},tn=({skinIndex:n,jointIndex:e},{inspector:t,gltf:s,json:o,parser:r})=>{const a=parseInt(n,10),l=parseInt(e,10),A=[],d=o.skins[a].joints[l];r.getDependency("node",d).then(p=>{A.push($([p]))});const f=o.nodes,m=[];return f==null||f.forEach((p,g)=>{p.skin===a&&m.push(g)}),Promise.all(m.map(p=>q(s,p))).then(p=>p.flat()).then(p=>{p.forEach(g=>{A.push(t.visualizeWeightPlugin.visualize(g,l))})}),()=>{A.forEach(p=>p())}},nn={neutral:"neutral",joy:"happy",sorrow:"sad",angry:"angry",fun:"relaxed",a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",blink_l:"blinkLeft",blink_r:"blinkRight",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",lookup:"lookUp"},sn=({index:n},{json:e,inspector:t})=>{var m;const s=parseInt(n,10),a=e.extensions.VRM.blendShapeMaster.blendShapeGroups[s],l=a.presetName,A=a.name,d=l!=null&&(m=nn[l])!=null?m:A,f=t.model.vrm.expressionManager.getValue(d);return t.model.vrm.expressionManager.setValue(d,1),()=>{t.model.vrm.expressionManager.setValue(d,f)}},on={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"},rn=({index:n},{inspector:e,json:t})=>{var d;const s=parseInt(n,10),r=t.extensions.VRM.humanoid.humanBones[s].bone,a=(d=on[r])!=null?d:r,A=e.model.vrm.humanoid.getRawBoneNode(a);return $([A])},an=new se(U.constant),An=({index:n},{json:e,inspector:t,parser:s})=>{const o=parseInt(n,10),a=e.extensions.VRM.secondaryAnimation,l=a==null?void 0:a.boneGroups[o].bones,A=t.model.vrm.springBoneManager,d=new Map;for(const g of A.joints)d.set(g.bone,g);const f=t.helpersPlugin.springBoneJointHelperRoot,m=new Map;f.children.forEach(g=>{const b=g;m.set(b.springBone,b)});const h=[],p=new Set;return l.forEach(g=>{s.getDependency("node",g).then(b=>{b.traverse(B=>{const w=d.get(B),k=m.get(w);p.add(k);const E=k.children[0].material,P=E.color.clone();E.color.copy(an),h.push(()=>{E.color.copy(P)})})})}),()=>{h.forEach(g=>g())}},Ie=({expressionName:n},{inspector:e})=>{const t=e.model.vrm.expressionManager.getValue(n);return e.model.vrm.expressionManager.setValue(n,1),()=>{e.model.vrm.expressionManager.setValue(n,t)}},ln=({boneName:n},{inspector:e})=>{const s=e.model.vrm.humanoid.getRawBoneNode(n);return $([s])},cn=new se(U.constant),hn=({index:n},{json:e,inspector:t,parser:s})=>{const o=parseInt(n,10),r=t.model.vrm.springBoneManager,a=new Map;for(const g of r.joints)a.set(g.bone,g);const l=t.helpersPlugin.springBoneJointHelperRoot,A=new Map;l.children.forEach(g=>{const b=g;A.set(b.springBone,b)});const d=[],h=e.extensions.VRMC_springBone.springs[o].joints.map(g=>g.node),p=new Set;return h.map(g=>{s.getDependency("node",g).then(b=>{const B=a.get(b);if(B==null)return;const w=A.get(B);if(w==null)return;p.add(w);const R=w.children[0].material,E=R.color.clone();R.color.copy(cn),d.push(()=>{R.color.copy(E)})})}),()=>{d.forEach(g=>g())}},Le=(n,{inspector:e})=>(e.layerMode="firstPerson",()=>{e.layerMode="thirdPerson"}),_e=(n,{inspector:e})=>{const t=ke();return e.model.vrm.lookAt.getLookAtWorldPosition(t.position),e.scene.add(t),()=>{e.scene.remove(t)}};class dn{constructor(e){u(this,"_inspector");u(this,"_rules");this._inspector=e,this._rules=[["/nodes/:index",qt],["/meshes/:index",Yt],["/meshes/:meshIndex/primitives/:primIndex",$t],["/meshes/:meshIndex/primitives/:primIndex/targets/:targetIndex",Pe],["/meshes/:meshIndex/primitives/:primIndex/extras/targetNames/:targetIndex",Pe],["/meshes/:meshIndex/extras/targetNames/:targetIndex",Zt],["/skins/:index",en],["/skins/:skinIndex/joints/:jointIndex",tn],["/materials/:index",ye],["/extensions/VRM/materialProperties/:index",ye],["/extensions/VRM/humanoid/humanBones/:index",rn],["/extensions/VRM/firstPerson/firstPersonBoneOffset",_e],["/extensions/VRM/firstPerson/meshAnnotations",Le],["/extensions/VRM/blendShapeMaster/blendShapeGroups/:index",sn],["/extensions/VRM/secondaryAnimation/boneGroups/:index",An],["/extensions/VRMC_vrm/humanoid/humanBones/:boneName",ln],["/extensions/VRMC_vrm/expressions/preset/:expressionName",Ie],["/extensions/VRMC_vrm/expressions/custom/:expressionName",Ie],["/extensions/VRMC_vrm/firstPerson/meshAnnotations",Le],["/extensions/VRMC_vrm/lookAt/offsetFromHeadBone",_e],["/extensions/VRMC_springBone/springs/:index",hn]]}highlight(e){const t=this._inspector,s=e.split("/"),o=t.model.gltf,r=o.parser,a=r.json,l={inspector:t,gltf:o,parser:r,json:a};let A={};const d=this._rules.find(([f])=>{const m=f.split("/");return s.length!==m.length?!1:(A={},s.every((h,p)=>{const g=m[p];if(g.startsWith(":")){const b=g.substring(1);return A[b]=h,!0}else return h===g}))});if(d!=null)return d[1](A,l)}}class un{constructor(){u(this,"_eventListeners")}on(e,t){this._eventListeners=this._eventListeners||new Map;let s=this._eventListeners.get(e);s||(s=[],this._eventListeners.set(e,s)),s.push(t)}off(e,t){this._eventListeners=this._eventListeners||new Map;let s=this._eventListeners.get(e);s||(s=[],this._eventListeners.set(e,s));const o=s.indexOf(t);o!==-1&&s.splice(o,1)}_emit(...[e,t]){var s;this._eventListeners=this._eventListeners||new Map,(s=this._eventListeners.get(e))==null||s.forEach(o=>o(t))}}const mn={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};async function gn(n,e){const t=e.humanoid;if(t==null)return null;const o=await new nt().loadAsync(n),a=o.children[0].position.y,d=t.normalizedRestPose.hips.position[1]/a,f=fe.findByName(o.animations,"mixamo.com"),m=[];return f.tracks.forEach(h=>{var B;const p=h.name.split("."),g=p[0],b=mn[g];if(b!=null){const w=(B=t.getNormalizedBoneNode(b))==null?void 0:B.name;if(w!=null){const k=p[1];if(h instanceof xe){const R=h.values.map((E,P)=>{var z;return((z=e.meta)==null?void 0:z.metaVersion)==="0"&&P%2==0?-E:E});m.push(new xe(`${w}.${k}`,h.times,R))}else if(b==="hips"&&h instanceof be){const R=h.values.map((E,P)=>{var z;return(((z=e.meta)==null?void 0:z.metaVersion)==="0"&&P%3!=1?-E:E)*d});m.push(new be(`${w}.${k}`,h.times,R))}}}}),new fe("vrmAnimation",f.duration,m)}async function pn(n,e){const t=new Ee;t.register(r=>new st(r));const o=(await t.loadAsync(n)).userData.vrmAnimations[0];return ot(o,e)}function ae(n,e){for(const t of n)t(e)}class fn{constructor(e){u(this,"inspector");u(this,"animationChangeObservers");u(this,"animationUpdateObservers");u(this,"_currentLookAtQuatProxy");u(this,"_currentAnimationMixer");u(this,"_currentAnimationAction");u(this,"_currentAnimation");this.inspector=e,this.animationChangeObservers=new Set,this.animationUpdateObservers=new Set}handleAfterLoad(e){const t=e.vrm;if(t==null)return;const s=t.lookAt;s!=null&&(this._currentLookAtQuatProxy=new it(s),this._currentLookAtQuatProxy.name="lookAtQuaternionProxy",t.scene.add(this._currentLookAtQuatProxy)),this._currentAnimationMixer=new rt(t.scene),this._currentAnimation!=null&&this.loadAnimation(this._currentAnimation)}handleAfterUnload(){this._currentAnimationAction=null,this._currentAnimationMixer=null}handleBeforeRender(e){var t,s,o,r;if(this._currentAnimationMixer!=null){this._currentAnimationMixer.update(e);const a=(s=(t=this._currentAnimationAction)==null?void 0:t.time)!=null?s:0,l=(r=(o=this._currentAnimationAction)==null?void 0:o.getClip().duration)!=null?r:0;ae(this.animationUpdateObservers,{time:a,duration:l})}}async loadAnimation(e){e.type==="vrma"?await this._loadVRMAnimation(e.url):e.type==="mixamo"&&await this._loadMixamoAnimation(e.url),this._currentAnimation=e,ae(this.animationChangeObservers,e)}clearAnimation(){var s;if(!((s=this.inspector.model)==null?void 0:s.vrm))return;const t=this._currentAnimationAction;!t||(t.stop(),this._currentAnimationAction=null,this._currentAnimation=null,ae(this.animationChangeObservers,null),this._resetTargets())}play(){const e=this._currentAnimationAction;!e||(e.paused=!1)}pause(){const e=this._currentAnimationAction;!e||(e.paused=!0)}rewind(){const e=this._currentAnimationAction;!e||(e.time=0)}async _loadVRMAnimation(e){var r;const t=(r=this.inspector.model)==null?void 0:r.vrm;if(!t)return;const s=this._currentAnimationMixer;if(!s)return;this._currentAnimationAction!=null&&this.clearAnimation();const o=await pn(e,t);this._currentAnimationAction=s.clipAction(o),this._currentAnimationAction.play()}async _loadMixamoAnimation(e){var r;const t=(r=this.inspector.model)==null?void 0:r.vrm;if(!t)return;const s=this._currentAnimationMixer;if(!s)return;this._currentAnimationAction!=null?this.clearAnimation():this._resetTargets();const o=await gn(e,t);o&&(this._currentAnimationAction=s.clipAction(o),this._currentAnimationAction.play())}_resetTargets(){var s,o,r;const e=(s=this.inspector.model)==null?void 0:s.vrm;if(!e)return;e.humanoid.resetNormalizedPose();const t=(o=e.expressionManager)==null?void 0:o.expressionMap;t&&Object.keys(t).map(a=>{var l;(l=e.expressionManager)==null||l.setValue(a,0)}),(r=this._currentLookAtQuatProxy)==null||r.quaternion.set(0,0,0,1)}}class xn{constructor(e){u(this,"inspector");u(this,"_controls");this.inspector=e}get controls(){return this._controls}handleAfterSetup(){const{camera:e,canvas:t}=this.inspector;this._controls=new ve(e,t),this._controls.setTarget(0,1,0)}handleBeforeRender(e){this._controls&&this._controls.update(e)}}class Ae{constructor(e){u(this,"inspector");u(this,"__validationReport");this.inspector=e,this.__validationReport=null}static get VALIDATOR_MAX_ISSUES(){return 100}get validationReport(){return this.__validationReport}async validate(e=Ae.VALIDATOR_MAX_ISSUES){var o;const t=(o=this.inspector.model)==null?void 0:o.buffer;if(!t)return null;const s=await at(new Uint8Array(t),{maxIssues:e}).catch(r=>console.error("Validation failed: ",r));return this.__validationReport=s,s}handleAfterLoad(){this.validate()}handleAfterUnload(){this.__validationReport=null}}class bn{constructor(e){u(this,"inspector");u(this,"gridHelper");u(this,"axesHelper");u(this,"humanoidHelperRoot");u(this,"lookAtHelperRoot");u(this,"springBoneJointHelperRoot");u(this,"springBoneColliderHelperRoot");this.inspector=e,this.gridHelper=new At(10,10),e.scene.add(this.gridHelper),this.axesHelper=new lt(5),e.scene.add(this.axesHelper),this.humanoidHelperRoot=new F,this.humanoidHelperRoot.visible=!1,this.humanoidHelperRoot.renderOrder=1e4,e.scene.add(this.humanoidHelperRoot),this.lookAtHelperRoot=new F,this.lookAtHelperRoot.visible=!1,this.lookAtHelperRoot.renderOrder=1e4,e.scene.add(this.lookAtHelperRoot),this.springBoneJointHelperRoot=new F,this.springBoneJointHelperRoot.visible=!1,this.springBoneJointHelperRoot.renderOrder=1e4,e.scene.add(this.springBoneJointHelperRoot),this.springBoneColliderHelperRoot=new F,this.springBoneColliderHelperRoot.visible=!1,this.springBoneColliderHelperRoot.renderOrder=1e4,e.scene.add(this.springBoneColliderHelperRoot)}handleAfterUnload(){this.humanoidHelperRoot.children.concat().forEach(e=>{this.humanoidHelperRoot.remove(e),e.dispose()}),this.springBoneJointHelperRoot.children.concat().forEach(e=>{this.springBoneJointHelperRoot.remove(e),e.dispose()}),this.springBoneColliderHelperRoot.children.concat().forEach(e=>{this.springBoneColliderHelperRoot.remove(e),e.dispose()}),this.lookAtHelperRoot.children.concat().forEach(e=>{this.lookAtHelperRoot.remove(e),e.dispose()})}}function Qe(n,e){let t=!1,s,o={x:0,y:0};const r=()=>{t||(requestAnimationFrame(r),s&&(n(s,o),s=void 0,o={x:0,y:0}))};r();const a=A=>{s=A,o.x+=A.movementX,o.y+=A.movementY},l=A=>{t||(e&&e(A),t=!0),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l),window.removeEventListener("mousedown",l)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",l),setTimeout(()=>window.addEventListener("mousedown",l))}var En="./assets/grab-purple.7ef5ea20.png";const ze=new ie;class vn{constructor(e){u(this,"inspector");u(this,"_sprites");u(this,"_transformControls");u(this,"_spriteMaterial");u(this,"_raycaster");u(this,"_active");this.inspector=e;const s=new Be().load(En,o=>{o.flipY=!1});this._spriteMaterial=new ct({sizeAttenuation:!1,transparent:!0,depthTest:!1,map:s}),this._raycaster=new ht,this._active=!1}get active(){return this._active}set active(e){var t,s;this._active=e,(t=this._sprites)==null||t.forEach(o=>o.visible=e),e===!1&&((s=this._transformControls)==null||s.detach())}handleAfterSetup(){const{scene:e,camera:t,canvas:s}=this.inspector;this._transformControls=new we(t,s),this._transformControls.space="local",this._transformControls.mode="rotate",e.add(this._transformControls),this._transformControls.addEventListener("dragging-changed",o=>{const r=this.inspector.cameraControlsPlugin.controls;r&&(r.enabled=!o.value)}),s!=null&&(s==null||s.addEventListener("mousedown",o=>this.handleMouseDown(o)))}handleAfterLoad(e){var s;const t=(s=e.vrm)==null?void 0:s.humanoid;if(t!=null){this._sprites=[];for(const o of Object.values(t.normalizedHumanBones)){const r=o.node,a=new dt(this._spriteMaterial);a.scale.setScalar(.01),a.renderOrder=1e4,a.visible=this._active,r.add(a),this._sprites.push(a)}}}handleAfterUnload(){var e;this._sprites=null,(e=this._transformControls)==null||e.detach()}handleMouseDown(e){if(!this._active)return;const{camera:t,canvas:s}=this.inspector;if(s==null)return;const o=this._sprites;if(o==null)return;const r=this._transformControls;if(r==null)return;const a=s.getBoundingClientRect();ze.set((e.clientX-a.left)/a.width*2-1,-(e.clientY-a.top)/a.height*2+1),this._raycaster.setFromCamera(ze,t);const A=this._raycaster.intersectObjects(o,!1)[0],d=Date.now();Qe(()=>0,()=>{if(!(Date.now()-d>300))if(A!=null){const h=A.object.parent;r.attach(h)}else r.detach()})}}class Bn{constructor(e){u(this,"inspector");u(this,"_directionalLightAzimuth");u(this,"_directionalLightAltitude");u(this,"_directionalLight");this.inspector=e,this._directionalLightAzimuth=0,this._directionalLightAltitude=0,this._directionalLight=new ut(16777215,Math.PI),this._directionalLight.position.set(0,0,1).normalize(),e.scene.add(this._directionalLight)}get directionalLightAzimuth(){return this._directionalLightAzimuth}set directionalLightAzimuth(e){this._directionalLightAzimuth=e,this._updateDirectionalLightPositionByAzimuthAltitude()}get directionalLightAltitude(){return this._directionalLightAltitude}set directionalLightAltitude(e){this._directionalLightAltitude=e,this._updateDirectionalLightPositionByAzimuthAltitude()}_updateDirectionalLightPositionByAzimuthAltitude(){const e=this._directionalLightAzimuth,t=this._directionalLightAltitude,s=Math.sin(e)*Math.cos(t),o=Math.sin(t),r=Math.cos(e)*Math.cos(t);this._directionalLight.position.set(s,o,r)}}class wn{constructor(e){u(this,"inspector");u(this,"root");u(this,"ballOutside");u(this,"ballInside");u(this,"isActive");this.inspector=e,this.root=new F,e.scene.add(this.root),this.ballInside=new H(new oe(.01),new J({color:4456584,depthTest:!1,depthWrite:!1})),this.ballInside.renderOrder=10001,this.root.add(this.ballInside),this.ballOutside=new H(new oe(.01),new mt({color:16777215})),this.ballOutside.renderOrder=10001,this.root.add(this.ballOutside),this.isActive=!1}handleBeforeRender(){if(!this.isActive){this.root.visible=!1;return}const{model:e}=this.inspector,t=e==null?void 0:e.vrm,s=t==null?void 0:t.lookAt;if(s==null){this.root.visible=!1;return}this.root.visible=!0,s==null||s.getLookAtWorldPosition(this.root.position)}}const Se=new Ce,Cn=new gt;class Mn{constructor(e){u(this,"inspector");u(this,"_enableLookAt");u(this,"_lookAtTarget");u(this,"_transformControls");this.inspector=e,this._enableLookAt=!1,this._lookAtTarget=new pt,e.scene.add(this._lookAtTarget)}get enableLookAt(){return this._enableLookAt}set enableLookAt(e){this._enableLookAt=e,this._transformControls&&(this._transformControls.enabled=e,this._transformControls.visible=e),e?this._enableLookAtTarget():this._disableLookAtTarget()}handleAfterSetup(){const{scene:e,camera:t,canvas:s}=this.inspector;this._transformControls=new we(t,s),e.add(this._transformControls),this._transformControls.attach(this._lookAtTarget),this._transformControls.enabled=!1,this._transformControls.visible=!1,this._transformControls.addEventListener("dragging-changed",o=>{const r=this.inspector.cameraControlsPlugin.controls;r&&(r.enabled=!o.value)})}handleAfterLoad(e){var o;const{vrm:t}=e;if(t==null)return;const s=(o=t.humanoid)==null?void 0:o.getNormalizedBoneNode("head");s!=null&&(s.getWorldPosition(Se),this._lookAtTarget.position.set(0,0,5).add(Se)),this._enableLookAt&&this._enableLookAtTarget()}_enableLookAtTarget(){var t,s;const e=(s=(t=this.inspector.model)==null?void 0:t.vrm)==null?void 0:s.lookAt;!e||(e.target=this._lookAtTarget)}_disableLookAtTarget(){var t,s;const e=(s=(t=this.inspector.model)==null?void 0:t.vrm)==null?void 0:s.lookAt;!e||(e.target=void 0,e.applier.lookAt(Cn.set(0,0,0)))}}class Rn{constructor(e){u(this,"inspector");u(this,"bloomPass");u(this,"toneMappingPass");this.inspector=e,this.bloomPass=new ft(new ie(4,4),1,.5,1),this.bloomPass.enabled=!1,this.toneMappingPass=new xt(bt),this.toneMappingPass.enabled=!1}handleAfterSetup(){const e=this.inspector.composer;e.addPass(this.bloomPass),e.addPass(this.toneMappingPass)}}const le=new ie,He=new Et({uniforms:{tDiffuse:{value:null}},vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = vec4( position, 1.0 );
    }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D( tDiffuse, vUv );
    }
  `}),yn=new vt(He);function kn(n,e,t,s){return new Promise((o,r)=>{n.getSize(le),n.setSize(t,s),n.clear(),He.uniforms.tDiffuse.value=e,yn.render(n),n.domElement.toBlob(a=>{a!=null?o(a):r("Failed to convert texture to blob.")},"image/png"),n.setSize(le.x,le.y)})}class Pn{constructor(e){u(this,"inspector");u(this,"__textureInfos");this.inspector=e,this.__textureInfos=null}get textureInfos(){return this.__textureInfos}handleAfterLoad(){var t,s;const e=(s=(t=this.inspector.model)==null?void 0:t.gltf)==null?void 0:s.parser;!e||e.getDependencies("texture").then(o=>{this.__textureInfos=o.map((r,a)=>{var h,p,g,b,B;const l=r.image,A=(g=(p=(h=e.json.textures[a].extensions)==null?void 0:h.KHR_texture_basisu)==null?void 0:p.source)!=null?g:e.json.textures[a].source,d=A!=null?e.json.images[A].bufferView:void 0,f=d!=null?e.json.bufferViews[d].byteLength:void 0,m=kn(this.inspector.renderer,r,l.width,l.height);return{name:r.name,width:l.width,height:l.height,mimeType:(B=(b=r.userData)==null?void 0:b.mimeType)!=null?B:null,iTexture:a,iImage:A,iBufferView:d,byteLength:f,image:l,texture:r,promiseBlob:m}})})}}class In extends pe{constructor(e){super(e);u(this,"_skinIndexVisualize");u(this,"_uniforms");this._skinIndexVisualize=0,this.onBeforeCompile=t=>{this._uniforms=t.uniforms,this._uniforms.skinIndexVisualize={value:this._skinIndexVisualize},t.vertexShader=t.vertexShader.replace("#include <common>",`#include <common>

        varying float vWeightVisualize;
        uniform float skinIndexVisualize;`),t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`#ifdef USE_SKINNING
          vWeightVisualize = (
            skinIndex.x == skinIndexVisualize ? skinWeight.x : 0.0 +
            skinIndex.y == skinIndexVisualize ? skinWeight.y : 0.0 +
            skinIndex.z == skinIndexVisualize ? skinWeight.z : 0.0 +
            skinIndex.w == skinIndexVisualize ? skinWeight.w : 0.0
          );
        #else
          vWeightVisualize = 0.0;
        #endif

        #include <begin_vertex>`),t.fragmentShader=t.fragmentShader.replace("#include <packing>",`#include <packing>

        varying float vWeightVisualize;`),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( packNormalToRGB( normal ), opacity );",`gl_FragColor = vec4(
          clamp( 2.0 - abs( vec3( 4.0, 2.0, 0.0 ) - 4.0 * vWeightVisualize ), 0.0, 1.0 ),
          opacity
        );`)}}get skinIndexVisualize(){return this._skinIndexVisualize}set skinIndexVisualize(e){this._uniforms&&(this._uniforms.skinIndexVisualize={value:e}),this._skinIndexVisualize=e}}class Ln{constructor(e){u(this,"inspector");u(this,"boneIndexMap");this.inspector=e}visualize(e,t){if(!(e instanceof Bt))return()=>0;const o=this.boneIndexMap.get(e.skeleton).get(t),r=new In({transparent:!0,depthTest:!1,depthWrite:!1});r.skinIndexVisualize=o;const a=G([e],r);return()=>{a(),r.dispose()}}}function _n(n,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{Object.defineProperty(n.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))})})}function Qn(n,e){const t=new Set,s=n.material;if(Array.isArray(s))s.forEach(r=>{t.add(r)});else{const o=s;t.add(o)}for(const o of t)e(o)}function zn(n){const e=new Map,t=new Map;return n.traverse(s=>{if(s.type!=="SkinnedMesh")return;const o=s,a=o.geometry.getAttribute("skinIndex");let l=t.get(a);if(!l){const A=[],d=[],f=new Map,m=a.array;for(let h=0;h<m.length;h++){const p=m[h];let g=f.get(p);g==null&&(g=A.length,f.set(p,g),A.push(o.skeleton.bones[p]),d.push(o.skeleton.boneInverses[p])),m[h]=g}a.copyArray(m),a.needsUpdate=!0,l=new wt(A,d),t.set(a,l),e.set(l,f)}o.bind(l,new Ct)}),e}var Sn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQQBBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAH7v5JqzrodJxSqKZUVyCEgj6EZBH0IyCMgjIPPQ8kEZB5IOwqeJbISlsqmFVgVTCEpSE5SuctkJxZCZZCZZCZZGZZCwITDrvqOe5Si6Wznvls57osouLKLiyi4souLKbiym4spuKpvCm4Sq4squLNHQma5ujrlLm6OuUubo65y5mlpnLmaWmcuZpaZy5mlpnLmaWmcubpaZy5ujpnLnaPecudo6Zy5+hpnLwaGmcvB36Zy5bzvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8QAIBABAQEBAAIABwAAAAAAAAAAABIREwECAwQQFDBQcP/aAAgBAQABBQL39vWPm/Hivb833ftnxPenn9DjGMZ9MYxjGMYxjGMYxjGMYxjEpSlKUpSlKUpSlCEIQhCEIQhCEIcnJxcXFxcXFxcXFxcXJycv4D//xAAbEQEBAAIDAQAAAAAAAAAAAAAAEQEwAhJgcP/aAAgBAwEBPwFy39mc775CIiIiIiIiIifAf//EABwRAQEBAAMAAwAAAAAAAAAAAAATEQESMAJQcP/aAAgBAgEBPwF8Pfo4498Z9/rWt8ta1RRRRRRRRRRRRRRR3/Af/8QAGRAAAgMBAAAAAAAAAAAAAAAAATEAITBw/9oACAEBAAY/AjYUO77h/8QAHhABAQEAAQQDAAAAAAAAAAAAABEBIRAgMEFQUWD/2gAIAQEAAT8hpdhXtxr7YbidIndERnCrru4iIiIiIiIrda3ERERERERERuN7QTxgPvn83m/HAAH/AP2fzcuV1dXV1dXf3P8A/9oADAMBAAIAAwAAABD1v+TzxSRCCCBACADDAiKLNsvk00302/8AvbJpdNFF1BBwgxRRMk0QwyyyyCSf/wD407777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDnDndwzOhLnvM6uXRyzMz2M7szOjOzMzMzPhKUpSlKUpzn6nKcvsSIiIiIiIiIi//EABwRAQEBAQADAQEAAAAAAAAAABEAUQEQIDBAcP/aAAgBAgEBPxDnOt10ufbvMdz1Ij1I8hHg+Z8j5kfJ/IDMzM8nkzz0A2Gw2Gx2Ox2Ox2Ow2Gw2Gw2O/wAB/8QAIBABAQACAgMBAAMAAAAAAAAAAQARUWGREHGhIDAxYP/aAAgBAQABPxASIw/o5ye7N8cZWFfExJ8GLFixY8hE58WNyNVzmOV8TGP8IAJmTsc+FrWv6/KUq58kYx/ZAhCMY+AxjH85IQhHjPG4Zep4zxnjPGz1el6XrHCOMcY4ytStS9S9S9S9S9S9S9WerLULULULULUPU8D5PE+TwJeiVol6JeiXqXo+Weiy0WerPVno+WWi9Szs9tnZ7bke25HtuR7bke25HtuR7bLt7bLt7bLt7bLt7bLt7bLt7bLt7bLt7f8AY//Z",Hn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDAgT/2gAMAwEAAhADEAAAAc6XpYoSCEpSEpSMoISCPQ50OdDnQ5IOdDklOSlOSDnQssWKpylc4srmWVzLK5lQmFcwhMITCMwhMIzEjMsjMsjML76Tz3lnm9BZ5ryzz3lnnvK898pRdKUXylF8pTdKU3ylN8pTeFVwVXCe7Rma5ujpnLm6WmcuXp6Zy5enpnLl6eucuXp6Zy5enpnLl6emcuZp98S5ul3nLm6Wmcudo6Zy5+hpnL4NDTOXwe/TOXLed6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITMFBw/9oACAEBAAEFAvRTzRERERERERERERERERERERGWWWWWWWWWWWWWWWWHNzc3Nzc3NzYYYYYYYcnFxcXBwcHBwcHFxcXFycvgP//EABcRAQEBAQAAAAAAAAAAAAAAABEAYHD/2gAIAQMBAT8B2BERERERERERwH//xAAbEQEBAQEAAwEAAAAAAAAAAAAAExEBEjBgcP/aAAgBAgEBPwH6DWt9etaoooooopxTinFOKKKKKPP8B//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEABj8CAH//xAAcEAEBAQADAAMAAAAAAAAAAAARAAEQMEBQYHH/2gAIAQEAAT8hIiOkjgiIiIiIiIiIiI4ERERERERHwYAAf/8A++DwAt8wD9YfjoZOzs7Ozs7O/ev/2gAMAwEAAgADAAAAEBAOuj73333736qgkCm3XVdBNNNBNNRXX8QYcQQqmqqmqqoAEemjrrgkssqz7z0w07777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABsRAQEBAAIDAAAAAAAAAAAAABEAIEBREDBg/9oACAEDAQE/EJ4b6HTlmds+WdM4cM7Z2zPKU5SlKc5zn1PqU5S+xIiIiIiIiIiL/8QAHREBAQEAAgMBAQAAAAAAAAAAEQBRMGEBECBAcP/aAAgBAgEBPxD8B8HOcRxERHIfJH5gTM+J8TMzM+g9BsNhsdjsdu67rsuyOw2Gw2Gx3+A//8QAHRABAQADAQEBAQEAAAAAAAAAAQARUWGRIHFgof/aAAgBAQABPxBjGMSxYsWLFixEIERrGsY/ICEIQhGtY1r9flKUpWtaxjH5AQhCEa1rWMfkBCEIR4ni4TxPErU835s9Wer8xzHMcxzHMvUrUmpWpWpWpWpWrLVnqz1D1D1C1C1D1fknklaP8l6JWiVol6JeiVpK0WerLRZ6LLRZavyXR9bo+t0fW6PrdH1uj63R9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9f7H/9k=",Tn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAasKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQABBQIAf//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8BAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/AQB//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQAGPwIAf//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEAAT8hAH//2gAMAwEAAgADAAAAEM8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8QAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/EAB//8QAFhABAQEAAAAAAAAAAAAAAAAAABFw/9oACAEBAAE/ENwiIiIiIiIiIj//2Q==",Dn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAQEBAQEAAAAAAAAAAAAAAQACAwQG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB+6+NdXO8q2eY0ywUAEBCCWEWCAgICBrIaA0WHo5qb5y2OJSEIsICAcggICCoQgaAQNAdCiAhCAgICBYBAQEBAYEJdBGgN1BQEABAsBSEWFBQUCA1g1CBqI1AQEBARRIEFBQUFBQME0SDEagICAiwiilBgIKCgoJCVKBiGDSGYBDKGUsIoQGUGUGUEKCRJCQkFUywZQygIZQEsEszosEsEBCQkJCg/8QAHRAAAQQCAwAAAAAAAAAAAAAAAgADERIBMAQUcP/aAAgBAQABBQIzCnLixbu2UOOWWd1lPr//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQMBAT8BJb2G+3//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQIBAT8BIb0Eu3//xAAZEAACAwEAAAAAAAAAAAAAAAABMQAhMHD/2gAIAQEABj8CNhQ7vuH/xAAgEAEAAgEDBQEAAAAAAAAAAAABABEQIDBgITFAQVBR/9oACAEBAAE/Ib+sK9k7F+4Om9Fy8nRWwHHeMrHduXF4c8AfAfof/9oADAMBAAIAAwAAABC0w8HDHUfe8+/9+8colvcc/wDf/LKL/P8A38MRzzz2sAAAEIMm34b7/wBrCRSyyxyQBAP+++sATwwwwxwyCAM888EBixwxxyyhBP8Av/vnhQgIIIgQxnvvrPv/AD9xQYRV9/zz3//EABwRAAEDBQAAAAAAAAAAAAAAAAEQEUAAITBQcP/aAAgBAwEBPxAmyDABVsb0+gEATxxD/8QAGxEAAwADAQEAAAAAAAAAAAAAAAERECAwUGD/2gAIAQIBAT8QSdGcFvdKXEUgLtCfUXK6P0J7H//EAB0QAQEBAQACAwEAAAAAAAAAAAEAERAgMSFBUWH/2gAIAQEAAT8QAAo+E3T+MW/rq9mUsssvGtra9Nhl75Z+zpV23WUsstttttttsMNr9nfu3lLLLbbbbbbbDbMeBZZZZbbbbbYYYZZZZZZZZbbbbbYYYlllllllttttthhhiWWWWWWW223mxERLMyyyz5ERHDMzM93hERE+5mZmeMcIiImZmZ8iIiJmZmZ5llkEEEEcMzMlllllkEEEEEJmSSSyyyyyCCCCCZJJJLLLLLLIIIIIJJJJLLLLLLLIIIIIL//Z",Nn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQEEBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAHOl6WKEgjII9CMgjIIyDnQ5IOdDkg5IEglKDSo466n3HyWGuueJPRwrsCuZZXMshMshMshMshNbIzlIylIzCNgRmCUtnUtnUtkbhKLiyi4sovKouCm4Sm4spuLKriyq4squLKriyq9bKrpbKrpSq+Cfvma5+hpnLnaGmcudo6Zy52jpnLnaOucudpaZy5ulpnLnaWmcudpaZy52lpnLnaWmcufo6Zy5+jplLn6OuUvg0NM5cN53oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/EACEQAQEBAQABAgcAAAAAAAAAAAASERMCATADBBAUIEBw/9oACAEBAAEFAvd8Xynp6V4eXjHu+j4fnL7vyz9DGMYxjPpjGMZ+GMYxjGMYxjGMYxKUpSlKUpSlKUpQhCEIQhCEIQhCHJycnFxcXFxcXFxcXFxcnL+A/wD/xAAcEQEBAAICAwAAAAAAAAAAAAARAAFAAhIwYHD/2gAIAQMBAT8B83HQxm7aD6CREREREREREfAf/8QAHREBAQEAAgIDAAAAAAAAAAAAABMRATACEkBQcP/aAAgBAgEBPwHu8/gc8PTvxn2Otb1a1rXuoooooooooooooop+A//EABoQAAICAwAAAAAAAAAAAAAAAAExACEwQHD/2gAIAQEABj8CzCCwtB9h/8QAHxABAQEAAQMFAAAAAAAAAAAAABEBIRAgMEBBUFFg/9oACAEBAAE/IYid0TpGYw519qXIR7oiIiIiIiMzr28KkRERERERGYxmr4AE7QwzETy+z56HwAGfFh//ANn87q6urq6uuXP7H//aAAwDAQACAAMAAAAQAgAQgggQkU88k/b9/vN9NNN5LbziiIwwRRxgwBB1FFNdpJbvTj//AH0gsssssENJDL777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDDM4d+MOO7iDJ0curPYZmZ1Zmd2cszMzM7M+CpynP1OcpSlKUpS+xIiIiIiIiIiL//xAAcEQEBAQEBAQADAAAAAAAAAAARAFEBMCAQQHD/2gAIAQIBAT8Q9e3XS7zrEfJEfPZ7nPmfgjwDyPIj9V+A8meTyZmZ+QOw2Gw2Gw2Ox2Ox2Ox2Gw2Gw3+A/wD/xAAgEAEBAAICAwEAAwAAAAAAAAABABFRYZEQcaEgMDFg/9oACAEBAAE/EHyMWLFix4ECPCypZvjjCUCEP6GMHuf4QAQh4RwkjEcYg48WNzWv6/KUp4pxOWbMY/sEQh5CQcxjH8pKQh4BCEeM8Z4zwvW9L0hajjHGOMcYerhjjHGXqVqVqVqVqy1Z6h6h6h6h6h6h6h6hahavUstFno+WerPVlos9EPR8h6h6IeiFoh6I4EcT5HA+WXb22Xb22Xb22Xb22Xb22Xb22Xb22Xb23I9tyPbcj23I9tyPbcj22dnts7Pb/sf/2Q==",Vn="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDBAL/2gAMAwEAAhADEAAAAc7vSxRkEJSkJSkewRkEehzoc6HOhyQckEZKclKckHJBKZFcyyuZZXMsrmVCYVzCEwhMIzCEwjMSMyyMyyM1I2Sk7hKLivPeHnvlPPfKUXSlF8pRfKU3SlN8pTeFN4lN5ZT6Cym8spvLL/fM1z9DTOXO0NM5c7R0zlzdLTOXN0tM5czT08S5mnpnLm6emcubp6Zy5unpnLm6fvOXN09M5c7S0zlztHTOXP0dM5cVzugAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITEFBw/9oACAEBAAEFAvWzzEREREREREREREREREREREZZZZZZZZZZZZZZZZYYYYYYYc3Nzc3Nzc3NhycnFxcXFwcHBwcHBxcXFy+A/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAARAGBw/9oACAEDAQE/AdgREREREREREcB//8QAGxEBAQEBAAMBAAAAAAAAAAAAABMRARIwYHD/2gAIAQIBAT8B+g1rfXrWvNRRRRRTinFOKcUUUUUU/Af/xAAUEAEAAAAAAAAAAAAAAAAAAACA/9oACAEBAAY/AgB//8QAHBABAQEAAwADAAAAAAAAAAAAEQABEDBAUGBx/9oACAEBAAE/ITgjpIiIiIiIiIiIiIiIiIiIiIjgR8cAAH//AIAfPB34GdRTfjxBrs7Ozs7Ozv3H/9oADAMBAAIAAwAAABBAKqp+9999+8/roAR90XXQTTTQTRV11spECCqpqqpqoIHGEHFMNM+8+vLJIK645rq+++++++++++++++888888888888888888888888888888888888888888888888//xAAbEQEBAAIDAQAAAAAAAAAAAAARACAwEEBRYP/aAAgBAwEBPxDc4uh1szi5M5M8s8s5s4OpmeqpTlPyfk5znKUpTl9iREREREREREX/xAAdEQEBAQABBQEAAAAAAAAAAAARAFFhARAgMEBw/9oACAECAQE/EPrPA7nqPSREesjxPoDsZmZmek9JmHcOw2Gw2Gx25Lkua5o7HY7DYbDfwH//xAAdEAEBAAMBAQEBAQAAAAAAAAABABFRYZEgcWCh/9oACAEBAAE/EGJMZixYsWLFiCIQhGMYxj8gIQhSFa1rX6/KUpClYxjH5AQhCFKVjGMfkBCEKUpXmeZ5nmeb82erPV+Y5hajiOLhHEcS9StStS9S9WerPVlqFqFqFqFqFqTULUPV+Sy1ZaLPRZaLPULRC0h6IeiFohaIeiFo/wAjkvyWXb62Xb62Xb62Xb62Xb62Xb62Xb62Xb62Xb63R9bo+t0fW6PrdH1uj63R9f7H/9k=";const Un=new Ce;ve.install({THREE:Me});class Te{constructor(){u(this,"animationPlugin");u(this,"cameraControlsPlugin");u(this,"gltfValidatorPlugin");u(this,"helpersPlugin");u(this,"humanoidTransformPlugin");u(this,"lightsPlugin");u(this,"lookAtPlugin");u(this,"lookAtBallPlugin");u(this,"postProcessingPlugin");u(this,"texturesPlugin");u(this,"visualizeWeightPlugin");u(this,"_scene");u(this,"_camera");u(this,"_renderer");u(this,"_composer");u(this,"_model");u(this,"_stats",null);u(this,"_webglMemory",null);u(this,"_webglMemoryInfo",null);u(this,"_dracoLoader");u(this,"_ktx2Loader");u(this,"_loader");u(this,"_canvas");u(this,"_layerMode","thirdPerson");u(this,"_handleResize");u(this,"_ongoingRequestEnvMap");u(this,"_plugins");this._camera=new Mt(30,window.innerWidth/window.innerHeight,.1,20),this._camera.position.set(0,1,5),this._scene=new Rt,this.helpersPlugin=new bn(this),this._dracoLoader=new yt,this._dracoLoader.setDecoderPath("./draco/"),this._ktx2Loader=new kt,this._ktx2Loader.setTranscoderPath("./basis/"),this._loader=new Ee,this._loader.setDRACOLoader(this._dracoLoader),this._loader.setKTX2Loader(this._ktx2Loader),this._loader.register(e=>new Pt(e,{humanoidPlugin:new It(e,{helperRoot:this.helpersPlugin.humanoidHelperRoot}),lookAtPlugin:new Lt(e,{helperRoot:this.helpersPlugin.lookAtHelperRoot}),springBonePlugin:new _t(e,{jointHelperRoot:this.helpersPlugin.springBoneJointHelperRoot,colliderHelperRoot:this.helpersPlugin.springBoneColliderHelperRoot})})),this.animationPlugin=new fn(this),this.cameraControlsPlugin=new xn(this),this.gltfValidatorPlugin=new Ae(this),this.humanoidTransformPlugin=new vn(this),this.lightsPlugin=new Bn(this),this.lookAtPlugin=new Mn(this),this.lookAtBallPlugin=new wn(this),this.postProcessingPlugin=new Rn(this),this.texturesPlugin=new Pn(this),this.visualizeWeightPlugin=new Ln(this),this._plugins=[this.animationPlugin,this.cameraControlsPlugin,this.gltfValidatorPlugin,this.helpersPlugin,this.humanoidTransformPlugin,this.lookAtPlugin,this.lookAtBallPlugin,this.postProcessingPlugin,this.texturesPlugin,this.visualizeWeightPlugin]}get scene(){return this._scene}get camera(){return this._camera}get renderer(){return this._renderer}get composer(){return this._composer}get model(){var e;return(e=this._model)!=null?e:null}get stats(){return this._stats}get webglMemoryInfo(){return this._webglMemoryInfo}get canvas(){return this._canvas}get layerMode(){return this._layerMode}set layerMode(e){this._layerMode=e,this._updateLayerMode()}unloadVRM(){const e=this._model;e&&(this._scene.remove(e.scene),re.deepDispose(e.scene),this._emit("unload")),this._plugins.forEach(t=>{var s;return(s=t.handleAfterUnload)==null?void 0:s.call(t)}),this._model=null}async loadVRM(e){var d,f,m,h,p;const t=await fetch(e).then(g=>g.arrayBuffer());this.unloadVRM();const o=new Qt({credentials:"include"}).binaryToJSON(t).json,r=await new Promise((g,b)=>{this._loader.crossOrigin="anonymous",this._loader.load(e,B=>{g(B)},B=>{this._emit("progress",B)},B=>{this._emit("error",B),b(B)})});re.removeUnnecessaryVertices(r.scene),this.visualizeWeightPlugin.boneIndexMap=zn(r.scene);let a=(d=r.userData.vrm)!=null?d:null;(a==null?void 0:a.humanoid)==null&&(a=null),a==null&&console.warn("Failed to load the model as a VRM. Fallback to treat the model as a mere GLTF"),this._stats=await this._prepareStats(r,a);const l=(f=a==null?void 0:a.scene)!=null?f:r.scene;this._scene.add(l);const A={buffer:t,gltf:r,originalGLTFJSON:o,vrm:a,scene:l};return this._model=A,this._plugins.forEach(g=>{var b;return(b=g.handleAfterLoad)==null?void 0:b.call(g,A)}),a&&((m=a.firstPerson)==null||m.setup(),this._updateLayerMode(),a.scene.traverse(g=>{"isMesh"in g&&Qn(g,async b=>{"isMeshStandardMaterial"in b&&(b.envMap=await this._requestEnvMap())})}),re.rotateVRM0(a),(h=a.springBoneManager)==null||h.setInitState(),(p=a.nodeConstraintManager)==null||p.setInitState()),this._emit("load",A),A}async exportBufferView(e){var l;const t=(l=this._model)==null?void 0:l.gltf;if(t==null)return;const s=await t.parser.getDependency("bufferView",e),o=new Blob([s]),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`${e}.bin`,a.click(),URL.revokeObjectURL(r)}setup(e){this._canvas=e;const t=window.innerWidth,s=window.innerHeight,o=window.devicePixelRatio;this._renderer=new zt({canvas:this._canvas,antialias:!0}),this._renderer.setSize(t,s),this._renderer.setPixelRatio(o),this._ktx2Loader.detectSupport(this._renderer),this._composer=new St(this._renderer,new Ht(t,s,{type:Tt})),this._composer.setPixelRatio(window.devicePixelRatio);const r=new Dt(this._scene,this._camera);this._composer.addPass(r),this._handleResize&&window.removeEventListener("resize",this._handleResize),this._handleResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight),this._composer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this._handleResize),this._webglMemory=this._renderer.getContext().getExtension("GMAN_webgl_memory"),this._plugins.forEach(a=>{var l;return(l=a.handleAfterSetup)==null?void 0:l.call(a)})}registerDnD(e){const t=o=>{o.preventDefault()},s=async o=>{var A;o.preventDefault();const r=(A=o.dataTransfer.files)==null?void 0:A[0];if(!r)return;const a=new Blob([r],{type:"application/octet-stream"}),l=URL.createObjectURL(a);r.name.endsWith(".vrma")?await this.animationPlugin.loadAnimation({type:"vrma",url:l,name:"Custom Animation (VRMA)"}):await this.loadVRM(l),URL.revokeObjectURL(l)};return e.addEventListener("dragover",t),e.addEventListener("drop",s),()=>{e.removeEventListener("dragover",t),e.removeEventListener("drop",s)}}update(e){var t;((t=this._model)==null?void 0:t.vrm)&&this._model.vrm.update(e),this._plugins.forEach(s=>{var o;return(o=s.handleBeforeRender)==null?void 0:o.call(s,e)}),this._composer&&this._composer.render(e),this._webglMemory&&(this._webglMemoryInfo=this._webglMemory.getMemoryInfo())}async _prepareStats(e,t){var g,b,B;const s=new Nt,o=new Set;let r=0,a=0,l=0;const A=w=>{var E,P;a++;const k=w.geometry;s.expandByObject(w);const R=k.getAttribute("position");o.add(R),l+=((P=(E=k.index)==null?void 0:E.count)!=null?P:R.count)/3};(await e.parser.getDependencies("mesh")).forEach(w=>{r++,w instanceof H?A(w):w.children.forEach(k=>{k instanceof H&&A(k)})});let f=0;for(const w of o)f+=w.count;const m=await e.parser.getDependencies("texture"),h=await e.parser.getDependencies("material"),p=(B=(b=(g=t==null?void 0:t.springBoneManager)==null?void 0:g.joints)==null?void 0:b.size)!=null?B:0;return{dimension:s.getSize(Un).toArray(),vertices:f,polygons:l,meshes:r,primitives:a,textures:m.length,materials:h.length,joints:p}}_requestEnvMap(){const e=[Hn,Sn,Dn,Tn,Vn,Nn];if(!this._ongoingRequestEnvMap){const t=new Vt;this._ongoingRequestEnvMap=new Promise((s,o)=>{t.load(e,r=>s(r),void 0,r=>o(r))})}return this._ongoingRequestEnvMap}_updateLayerMode(){var t,s;const e=(s=(t=this._model)==null?void 0:t.vrm)==null?void 0:s.firstPerson;!e||(this._layerMode==="firstPerson"?(this._camera.layers.enable(e.firstPersonOnlyLayer),this._camera.layers.disable(e.thirdPersonOnlyLayer)):(this._camera.layers.disable(e.firstPersonOnlyLayer),this._camera.layers.enable(e.thirdPersonOnlyLayer)))}}_n(Te,[un]);var On="./assets/uv-grid.cfc47a74.png",T;(function(n){n[n.None=0]="None",n[n.GLTFFallback=1]="GLTFFallback",n[n.MToonNormal=2]="MToonNormal",n[n.MToonLitShadeRate=3]="MToonLitShadeRate",n[n.MToonUV=4]="MToonUV",n[n.UVGrid=5]="UVGrid"})(T||(T={}));const De=new J({visible:!1}),Fn=new Promise(n=>{new Be().load(On,t=>{t.flipY=!1,n(t)})});function Ne(){const n=new J({color:16711935});return Fn.then(e=>{n.map=e,n.color.set(16777215)}),n}function Ve(n,e){if("isMToonMaterial"in n){const t=n;t.debugMode=e}}function Ue(n){return"isMToonMaterial"in n?n.isOutline:!1}class Gn{constructor(e){u(this,"_currentMode",0);u(this,"_vrmMaterialsByMesh",new Map);u(this,"_inspector");this._inspector=e,this._inspector.on("load",()=>this._handleLoad()),this._inspector.on("unload",()=>this._handleUnload())}applyMode(e){e===0?this._applyModeMToon(X.None):e===2?this._applyModeMToon(X.Normal):e===3?this._applyModeMToon(X.LitShadeRate):e===4?this._applyModeMToon(X.UV):e===5&&this._applyModeUVGrid(),this._currentMode=e}_applyModeMToon(e){for(const[t,s]of this._vrmMaterialsByMesh.entries())Array.isArray(s)?s.forEach((o,r)=>{Ve(o,e),t.material[r]=o}):(Ve(s,e),t.material=s)}_applyModeUVGrid(){for(const[e,t]of this._vrmMaterialsByMesh.entries())Array.isArray(t)?t.forEach((s,o)=>{Ue(s)?e.material[o]=De:e.material[o]=Ne()}):Ue(t)?e.material=De:e.material=Ne()}async _handleLoad(){(await this._inspector.model.gltf.parser.getDependencies("mesh")).forEach(t=>{t instanceof H?this._addManagedMesh(t):t.children.forEach(s=>{s instanceof H&&this._addManagedMesh(s)})}),this.applyMode(this._currentMode)}_addManagedMesh(e){Array.isArray(e.material)?this._vrmMaterialsByMesh.set(e,e.material.concat()):this._vrmMaterialsByMesh.set(e,e.material)}_handleUnload(){this._vrmMaterialsByMesh.clear()}}var Oe="./assets/VRM1_Constraint_Twist_Sample.12c2b97e.vrm";function jn(n){console.error(n)}const D=new Te;D.loadVRM(Oe).catch(jn);D.registerDnD(document.body);const Wn=new dn(D),Yn=new Gn(D);console.info(D);const Zn=new Ut;function Fe(){requestAnimationFrame(Fe);const n=Zn.getDelta();D.update(n)}Fe();const y=Re.createContext({inspector:D,highlighter:Wn,materialDebugger:Yn}),Ge=({href:n,widthClass:e})=>n==null?null:i("a",{href:n,target:"_blank",rel:"noreferrer",className:`font-bold truncate inline-block align-top underline text-sky-500 ${e!=null?e:"w-64"}`,children:n});function Kn(){const n=c.exports.useRef(-1/0);return c.exports.useCallback(t=>{const s=performance.now();s-n.current<250?(t(),n.current=-1/0):n.current=s},[n])}const L=n=>{var d,f,m;const[e,t]=c.exports.useState((d=n.initPosition)!=null?d:{left:0,top:0}),[s,o]=c.exports.useState((f=n.initOpening)!=null?f:!1),r=Kn(),a=c.exports.useCallback(h=>{var p;(p=n.onClick)==null||p.call(n,h,n.paneKey)},[n.onClick,n.paneKey]),l=c.exports.useCallback(h=>{h.preventDefault();let p=e.left,g=e.top;Qe((b,B)=>{b.preventDefault(),b.stopPropagation(),p+=B.x,g+=B.y,t({left:p,top:g})}),r(()=>{o(!s)})},[s,e]),A=c.exports.useCallback(h=>{var p;h.preventDefault(),h.stopPropagation(),(p=n.onClick)==null||p.call(n,h,n.paneKey),o(!s)},[s,n.onClick,n.paneKey]);return v("div",{style:{left:e.left,top:e.top,minWidth:"15rem",boxShadow:"0 0 10px rgba(0, 0, 0, 1.0)"},className:`absolute shadow ${n.className}`,onMouseDown:a,children:[v("div",{className:"h-5 leading-5 w-full bg-gray-700 cursor-move",onMouseDown:l,children:[i("div",{className:"inline-block w-5 h-5 text-center cursor-pointer hover:text-sky-500",onMouseDown:A,children:s?"-":"+"}),n.title]}),s&&((m=n.children)!=null?m:null)]})},_=({className:n,paddingClass:e,children:t})=>i("div",{className:`bg-gray-900/80 backdrop-blur ${e!=null?e:"p-2"} ${n}`,children:t}),Jn=n=>i(L,M(C({},n),{children:v(_,{children:[i("div",{children:"three-vrm-inspector"}),i("div",{children:"Three.js based VRM inspector"}),v("div",{children:["Source: ",i(Ge,{widthClass:"w-min",href:"https://github.com/0b5vr/three-vrm-inspector"})]})]})})),x=({name:n,value:e,href:t})=>v("div",{children:[n,":"," ",e!=null&&i("span",{className:"font-bold",children:e}),t&&i(Ge,{href:t})]});var Xn="./assets/dancing.2665f039.fbx",qn="./assets/gangnam-style.119f68a4.fbx",$n="./assets/jump.a8a08f02.fbx",es="./assets/running.c854d669.fbx",ts="./assets/standing-clap.9fc941e1.fbx",ns="./assets/test.38d0fd12.vrma",ss="./assets/walking.ed38b4d6.fbx";const je=[{name:"Test (VRMA)",url:ns,type:"vrma"},{name:"Walking (Mixamo)",url:ss,type:"mixamo"},{name:"Running (Mixamo)",url:es,type:"mixamo"},{name:"Jump (Mixamo)",url:$n,type:"mixamo"},{name:"Dancing (Mixamo)",url:Xn,type:"mixamo"},{name:"Standing Clap (Mixamo)",url:ts,type:"mixamo"},{name:"Gangnam Style (Mixamo)",url:qn,type:"mixamo"}],os=n=>{var f;const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(null);c.exports.useEffect(()=>{const m=h=>{s(h)};return e.animationPlugin.animationChangeObservers.add(m),()=>{e.animationPlugin.animationChangeObservers.delete(m)}},[e]);const[o,r]=c.exports.useState("0.000 / 0.000");c.exports.useEffect(()=>{const m=({time:h,duration:p})=>{r(`${h.toFixed(3)} / ${p.toFixed(3)}`)};return e.animationPlugin.animationUpdateObservers.add(m),()=>{e.animationPlugin.animationUpdateObservers.delete(m)}},[e]);const a=c.exports.useCallback(m=>{const h=parseInt(m.target.value,10);if(h===-1){e.animationPlugin.clearAnimation();return}const p=je[h];e.animationPlugin.loadAnimation(p)},[e]),l=c.exports.useCallback(()=>{e.animationPlugin.play()},[e]),A=c.exports.useCallback(()=>{e.animationPlugin.pause()},[e]),d=c.exports.useCallback(()=>{e.animationPlugin.rewind()},[e]);return i(L,M(C({},n),{children:v(_,{children:[v("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:a,children:[i("option",{value:-1,children:"(No animation)"},-1),je.map(({name:m},h)=>i("option",{value:h,children:m},h))]}),i("br",{}),i("button",{className:"px-1 bg-gray-800 border border-gray-500",onClick:l,children:"Play"}),i("button",{className:"ml-1 px-1 bg-gray-800 border border-gray-500",onClick:A,children:"Pause"}),i("button",{className:"ml-1 px-1 bg-gray-800 border border-gray-500",onClick:d,children:"Rewind"}),i("br",{}),i(x,{name:"Animation",value:(f=t==null?void 0:t.name)!=null?f:"(not playing)"}),i(x,{name:"Time",value:o})]})}))},is=n=>{const{inspector:e}=c.exports.useContext(y),t=c.exports.useRef(null),s=c.exports.useCallback(o=>{var a;o.preventDefault();const r=(a=t.current)==null?void 0:a.value;if(r!=null&&r!==""){const l=parseInt(r,10);e.exportBufferView(l)}},[e]);return i(L,M(C({},n),{children:i(_,{children:v("form",{onSubmit:s,children:[i("input",{type:"number",ref:t,defaultValue:0,className:"w-24 px-1 bg-gray-800 border border-gray-500",required:!0}),i("input",{type:"submit",className:"ml-1 px-1 bg-gray-800 border border-gray-500",value:"Export"})]})})}))},N=({label:n,onChange:e,defaultValue:t,disabled:s})=>{const o=c.exports.useCallback(r=>{const a=parseFloat(r.currentTarget.value);e(a)},[]);return v("div",{className:"flex items-center",children:[i("input",{className:"mr-2",type:"range",min:"0",max:"1",step:"0.001",defaultValue:t!=null?t:0,disabled:s,onChange:o}),s?i("span",{className:"text-gray-500",children:n}):n]})},We=({name:n,isAvailable:e})=>{const{inspector:t}=c.exports.useContext(y),s=c.exports.useCallback(o=>{var r,a,l;(l=(a=(r=t.model)==null?void 0:r.vrm)==null?void 0:a.expressionManager)==null||l.setValue(n,o)},[]);return i(N,{label:n,disabled:!e,onChange:s})},O=()=>i("div",{className:"w-full h-0.5 my-2 bg-gray-500"}),Ye=["neutral","happy","angry","sad","relaxed","surprised","blink","blinkLeft","blinkRight","aa","ee","ih","oh","ou","lookLeft","lookRight","lookDown","lookUp"],rs=new Set(Ye),as=n=>{var a,l,A;const{inspector:e}=c.exports.useContext(y),t=(l=(a=e.model)==null?void 0:a.vrm)==null?void 0:l.expressionManager,s=t==null?void 0:t.expressionMap,o=[];s&&Array.from(Object.keys(s)).forEach(d=>{rs.has(d)||o.push(d)});const r=((A=o==null?void 0:o.length)!=null?A:0)>=1;return i(L,M(C({},n),{children:i(_,{children:t?v(Q,{children:[Ye.map(d=>i(We,{name:d,isAvailable:(t==null?void 0:t.getExpression(d))!=null},d)),i(O,{}),o==null?void 0:o.map(d=>i(We,{name:d,isAvailable:!0},d)),!r&&i("span",{className:"text-gray-500",children:"(No custom expressions)"})]}):"No Expressions / BlendShapeProxy detected."})}))},S=({callback:n,label:e,checked:t})=>{const s=c.exports.useCallback(({target:o})=>{n(o.checked)},[n]);return v("div",{children:[i("input",{type:"checkbox",checked:t,onChange:s}),i("label",{className:"ml-1",children:e})]})},As=n=>{const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(e.helpersPlugin.gridHelper.visible),[o,r]=c.exports.useState(e.helpersPlugin.axesHelper.visible),[a,l]=c.exports.useState(e.helpersPlugin.humanoidHelperRoot.visible),[A,d]=c.exports.useState(e.humanoidTransformPlugin.active),[f,m]=c.exports.useState(e.helpersPlugin.lookAtHelperRoot.visible),[h,p]=c.exports.useState(e.lookAtBallPlugin.isActive),[g,b]=c.exports.useState(e.helpersPlugin.springBoneJointHelperRoot.visible),[B,w]=c.exports.useState(e.helpersPlugin.springBoneColliderHelperRoot.visible),k=c.exports.useCallback(()=>{s(!0),r(!0),l(!0),d(!0),m(!0),p(!0),b(!0),w(!0)},[]),R=c.exports.useCallback(()=>{s(!1),r(!1),l(!1),d(!1),m(!1),p(!1),b(!1),w(!1)},[]),E=c.exports.useCallback(I=>{s(I)},[e]),P=c.exports.useCallback(I=>{r(I)},[e]),z=c.exports.useCallback(I=>{l(I)},[e]),j=c.exports.useCallback(I=>{d(I)},[e]),W=c.exports.useCallback(I=>{m(I)},[e]),Y=c.exports.useCallback(I=>{p(I)},[e]),Z=c.exports.useCallback(I=>{b(I)},[e]),K=c.exports.useCallback(I=>{w(I)},[e]);return c.exports.useEffect(()=>{e.helpersPlugin.gridHelper.visible=t},[e,t]),c.exports.useEffect(()=>{e.helpersPlugin.axesHelper.visible=o},[e,o]),c.exports.useEffect(()=>{e.helpersPlugin.humanoidHelperRoot.visible=a},[e,a]),c.exports.useEffect(()=>{e.humanoidTransformPlugin.active=A},[e,A]),c.exports.useEffect(()=>{e.helpersPlugin.lookAtHelperRoot.visible=f},[e,f]),c.exports.useEffect(()=>{e.lookAtBallPlugin.isActive=h},[e,h]),c.exports.useEffect(()=>{e.helpersPlugin.springBoneJointHelperRoot.visible=g},[e,g]),c.exports.useEffect(()=>{e.helpersPlugin.springBoneColliderHelperRoot.visible=B},[e,B]),i(L,M(C({},n),{children:v(_,{children:[i("button",{className:"ml-1 px-1 bg-gray-800 border border-gray-500",onClick:k,children:"Enable All"}),i("button",{className:"ml-1 px-1 bg-gray-800 border border-gray-500",onClick:R,children:"Disable All"}),i(O,{}),i(S,{callback:E,label:"Grid",checked:t}),i(S,{callback:P,label:"Axes",checked:o}),i(S,{callback:z,label:"Humanoid",checked:a}),i(S,{callback:j,label:"Humanoid Transform",checked:A}),i(S,{callback:W,label:"LookAt",checked:f}),i(S,{callback:Y,label:"LookAt Ball",checked:h}),i(S,{callback:Z,label:"Spring Bones",checked:g}),i(S,{callback:K,label:"Spring Bone Colliders",checked:B})]})}))},ls="modulepreload",Ze={},cs="./",hs=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${cs}${s}`,s in Ze)return;Ze[s]=!0;const o=s.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":ls,o||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),o)return new Promise((l,A)=>{a.addEventListener("load",l),a.addEventListener("error",A)})})).then(()=>e())};const ds=`// Press Ctrl+S or Ctrl+R to apply
// The api will be changed without notice! Use at your own risk

export default ( { inspector, THREE } ) => {
  let isUnmounted = false;

  const vrm = inspector.model.vrm;

  // update
  const beginTime = Date.now();

  function update() {
    if ( isUnmounted ) { return; }

    const time = 0.001 * ( Date.now() - beginTime );

    const leftUpperArm = vrm.humanoid?.getNormalizedBoneNode( 'leftUpperArm' );
    if ( leftUpperArm != null ) {
      leftUpperArm.rotation.z = Math.sin( time );
    }

    requestAnimationFrame( update );
  }
  requestAnimationFrame( update );

  // uninit
  return () => {
    isUnmounted = true;
  };
}
`,us=n=>{const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(ds),[o,r]=c.exports.useState(!1),a=c.exports.useRef();c.exports.useEffect(()=>{window.addEventListener("beforeunload",m=>{if(o){const h="You will lose all of your changes on the editor!";return m.returnValue=h,h}})},[o]);const l=c.exports.useCallback(m=>{var g;(g=a.current)==null||g.call(a);const h=new Blob([m],{type:"text/javascript"}),p=URL.createObjectURL(h);hs(()=>import(p),[]).then(b=>{a.current=b.default({inspector:e,THREE:Me}),URL.revokeObjectURL(p)})},[e]),A=c.exports.useCallback(m=>{m.addKeyMap({"Ctrl-S":()=>{l(m.getValue())},"Ctrl-R":()=>{l(m.getValue())}})},[l]),d=c.exports.useCallback((m,h,p)=>{s(p),r(!0)},[]),f=c.exports.useCallback(()=>{},[]);return i(L,M(C({},n),{children:i(_,{className:"w-120 h-80",paddingClass:"p-0",children:i(Ot,{value:t,options:{mode:"text/javascript",keyMap:"sublime",theme:"monokai-sharp",lineNumbers:!0},editorDidMount:A,onBeforeChange:d,onChange:f,className:"h-full leading-tight"})})}))},ee=({children:n,onClick:e,onMouseEnter:t,onMouseLeave:s})=>i("span",{className:"select-none cursor-pointer",onClick:e,onMouseEnter:t,onMouseLeave:s,children:n}),Ke=({children:n})=>i("div",{style:{marginLeft:"1.13em"},children:n}),ce=({name:n,value:e,fullPath:t=""})=>{const{highlighter:s}=c.exports.useContext(y),[o,r]=c.exports.useState(!1),[a,l]=c.exports.useState(!1),[A,d]=c.exports.useState([void 0]),f=c.exports.useCallback(E=>{E.stopPropagation(),r(!o)},[r,o]),m=c.exports.useCallback(()=>{l(!0),d([s.highlight(t)])},[l,d,s,t]),h=c.exports.useCallback(()=>{var E;l(!1),(E=A[0])==null||E.call(A)},[l,A]),p=Array.isArray(e),g=e==null,b=typeof e=="number",B=typeof e=="boolean",w=typeof e=="string",k=!p&&!g&&!b&&!B&&!w,R={onClick:f,onMouseEnter:m,onMouseLeave:h,isHovering:a};return v("div",{className:"select-auto",children:[i("span",M(C({className:`cursor-pointer ${a&&"text-sky-500"}`},R),{children:n?`${n}: `:""})),p&&v(Q,{children:[i(ee,M(C({},R),{children:"["})),o&&i(Ke,{children:e.map((E,P)=>i("div",{children:i(ce,{name:P.toString()+((E==null?void 0:E.name)?` (${E.name})`:""),value:E,fullPath:`${t}/${P}`})},P))}),i(ee,M(C({},R),{children:` ${o?"":e.length} ]`}))]}),k&&v(Q,{children:[i(ee,M(C({},R),{children:"{"})),o&&i(Ke,{children:Object.keys(e).map((E,P)=>i("div",{children:i(ce,{name:E,value:e[E],fullPath:`${t}/${E}`})},P))}),i(ee,M(C({},R),{children:` ${o?"":Object.keys(e).join(", ")} }`}))]}),g&&i(Q,{children:i("span",M(C({className:"text-pink-500"},R),{children:e}))}),b&&i(Q,{children:i("span",M(C({className:"text-indigo-400"},R),{children:e}))}),B&&i(Q,{children:i("span",M(C({className:"text-indigo-400"},R),{children:String(e)}))}),w&&i(Q,{children:v("span",M(C({className:"text-yellow-300"},R),{children:['"',e,'"']}))})]})},ms=n=>{const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(void 0);return c.exports.useEffect(()=>{const o=()=>{var r;s((r=e.model)==null?void 0:r.originalGLTFJSON)};return e.on("load",o),()=>{e.off("load",o)}},[e]),i(L,M(C({},n),{children:i(_,{className:"w-120 h-80 overflow-scroll whitespace-nowrap resize font-mono text-xs leading-tight",paddingClass:"p-0",children:i(ce,{value:t})})}))},gs=n=>{const{inspector:e}=c.exports.useContext(y),t=c.exports.useCallback(o=>{e.lightsPlugin.directionalLightAzimuth=2*Math.PI*o},[e]),s=c.exports.useCallback(o=>{e.lightsPlugin.directionalLightAltitude=Math.PI*(o-.5)},[e]);return i(L,M(C({},n),{children:v(_,{children:[i("div",{children:"Directional Light"}),i(N,{label:"Azimuth",onChange:t}),i(N,{label:"Altitude",defaultValue:.5,onChange:s})]})}))},ps=n=>{const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(!1),o=c.exports.useCallback(r=>{s(r),e.lookAtPlugin.enableLookAt=r},[e]);return i(L,M(C({},n),{children:i(_,{children:i(S,{callback:o,label:"Enable LookAt",checked:t})})}))},fs=n=>{const{materialDebugger:e}=c.exports.useContext(y),t=c.exports.useCallback(s=>{const o=parseInt(s.target.value);e.applyMode(o)},[e]);return i(L,M(C({},n),{children:i(_,{children:v("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:t,children:[i("option",{value:T.None,children:"None"}),i("option",{value:T.MToonNormal,children:"MToon Normal"}),i("option",{value:T.MToonLitShadeRate,children:"MToon LitShadeRate"}),i("option",{value:T.MToonUV,children:"MToon UV"}),i("option",{value:T.UVGrid,children:"UV Grid"})]})})}))},xs=({meta:n})=>v(Q,{children:[i(x,{name:"Title",value:n.title}),i(x,{name:"Author",value:n.author}),i(x,{name:"Version",value:n.version}),i(x,{name:"Reference",value:n.reference}),i(x,{name:"Contact Information",value:n.contactInformation}),i(x,{name:"Allowed User Name",value:n.allowedUserName}),i(x,{name:"Violent Ussage Name",value:n.violentUssageName}),i(x,{name:"Sexual Ussage Name",value:n.sexualUssageName}),i(x,{name:"Commercial Ussage Name",value:n.commercialUssageName}),i(x,{name:"Other Permission URL",href:n.otherPermissionUrl}),i(x,{name:"License Name",value:n.licenseName}),i(x,{name:"Other License URL",href:n.otherLicenseUrl})]}),bs=({meta:n})=>{var e;return v(Q,{children:[i(x,{name:"Name",value:n.name}),i(x,{name:"Version",value:n.version}),i(x,{name:"Authors",value:n.authors.join(", ")}),i(x,{name:"Copyright Information",value:n.copyrightInformation}),i(x,{name:"Contact Information",value:n.contactInformation}),i(x,{name:"References",value:(e=n.references)==null?void 0:e.join(", ")}),i(x,{name:"Third Party Licenses",value:n.thirdPartyLicenses}),i(x,{name:"License URL",href:n.licenseUrl}),i(x,{name:"Avatar Permission",value:n.avatarPermission}),i(x,{name:"Allow Excessively Violent Usage",value:String(n.allowExcessivelyViolentUsage)}),i(x,{name:"Allow Excessively Sexual Usage",value:String(n.allowExcessivelySexualUsage)}),i(x,{name:"Commercial Usage Name",value:n.commercialUsage}),i(x,{name:"Allow Political or Religious Usage",value:String(n.allowPoliticalOrReligiousUsage)}),i(x,{name:"Allow Antisocial or Hate Usage",value:String(n.allowAntisocialOrHateUsage)}),i(x,{name:"Credit Notation",value:n.creditNotation}),i(x,{name:"Allow Redistribution",value:String(n.allowRedistribution)}),i(x,{name:"Modification",value:n.modification}),i(x,{name:"Other License URL",href:n.otherLicenseUrl})]})},Es=n=>{var o,r;const{inspector:e}=c.exports.useContext(y),t=(r=(o=e.model)==null?void 0:o.vrm)==null?void 0:r.meta;let s=i(Q,{children:"No meta detected."});return(t==null?void 0:t.metaVersion)==="1"?s=i(bs,{meta:t}):(t==null?void 0:t.metaVersion)==="0"&&(s=i(xs,{meta:t})),i(L,M(C({},n),{children:i(_,{children:s})}))},Je=({label:n,onChange:e,defaultChecked:t,disabled:s})=>{const o=c.exports.useCallback(r=>{const a=r.currentTarget.checked;e(a)},[]);return v("div",{className:"flex items-center",children:[i("input",{className:"mr-2",type:"checkbox",disabled:s,defaultChecked:t,onChange:o}),s?i("span",{className:"text-gray-500",children:n}):n]})},vs=n=>{const{inspector:e}=c.exports.useContext(y),[t,s]=c.exports.useState(!1),o=c.exports.useCallback(h=>{e.postProcessingPlugin.bloomPass.enabled=h,s(h)},[e]),r=c.exports.useCallback(h=>{e.postProcessingPlugin.bloomPass.strength=4*h},[e]),a=c.exports.useCallback(h=>{e.postProcessingPlugin.bloomPass.radius=h},[e]),l=c.exports.useCallback(h=>{e.postProcessingPlugin.bloomPass.threshold=4*h},[e]),[A,d]=c.exports.useState(!1),f=c.exports.useCallback(h=>{e.postProcessingPlugin.toneMappingPass.enabled=h,d(h)},[e]),m=c.exports.useCallback(h=>{e.postProcessingPlugin.toneMappingPass.uniforms.exposure.value=2*h},[e]);return i(L,M(C({},n),{children:v(_,{children:[i("h3",{className:"text-lg font-bold",children:"Bloom"}),i(Je,{label:"Enabled",defaultChecked:!1,onChange:o}),i(N,{label:"Strength",defaultValue:.25,disabled:!t,onChange:r}),i(N,{label:"Radius",defaultValue:.5,disabled:!t,onChange:a}),i(N,{label:"Threshold",defaultValue:.25,disabled:!t,onChange:l}),i(O,{}),i("h3",{className:"text-lg font-bold",children:"ACES Tone Mapping"}),i(Je,{label:"Enabled",defaultChecked:!1,onChange:f}),i(N,{label:"Exposure",defaultValue:.5,disabled:!A,onChange:m})]})}))},Bs=({name:n,url:e})=>{const{inspector:t}=c.exports.useContext(y),s=c.exports.useCallback(()=>{t.loadVRM(e)},[t]);return i("button",{value:n,className:"bg-gray-800 border border-gray-500 px-1 py-0 block",onClick:s,children:n})};var ws="./assets/Seed-san.624d0d55.vrm",Cs="./assets/three-vrm-girl.e6e179de.vrm";const Ms=[{name:"three-vrm-girl (VRM0.0)",url:Cs},{name:"Seed-san (VRM1.0)",url:ws},{name:"VRM1_Constaint_Twist_Sample (VRM1.0)",url:Oe}],Rs=n=>i(L,M(C({},n),{children:i(_,{children:Ms.map(({name:e,url:t})=>i(Bs,{name:e,url:t},e))})})),ys=n=>{var o,r,a,l,A,d,f,m,h,p,g;const{inspector:e}=c.exports.useContext(y),t=(o=e.stats)==null?void 0:o.dimension.map(b=>b.toFixed(3)),s=`( ${(r=t==null?void 0:t[0])!=null?r:0}, ${(a=t==null?void 0:t[1])!=null?a:0}, ${(l=t==null?void 0:t[2])!=null?l:0} )`;return i(L,M(C({},n),{children:v(_,{children:[i(x,{name:"Dimension",value:s}),i(x,{name:"Vertices",value:(A=e.stats)==null?void 0:A.vertices}),i(x,{name:"Polygons",value:(d=e.stats)==null?void 0:d.polygons}),i(x,{name:"Meshes",value:(f=e.stats)==null?void 0:f.meshes}),i(x,{name:"Primitives",value:(m=e.stats)==null?void 0:m.primitives}),i(x,{name:"Textures",value:(h=e.stats)==null?void 0:h.textures}),i(x,{name:"Materials",value:(p=e.stats)==null?void 0:p.materials}),i(x,{name:"Spring Bone Joints",value:(g=e.stats)==null?void 0:g.joints})]})}))},V=n=>n<1024?n+" B":n<1048576?(n/1024).toFixed(3)+" KB":(n/1048576).toFixed(3)+" MB",ks=({textureInfo:n})=>{const e=c.exports.useMemo(()=>{const o=n.byteLength!=null?V(n.byteLength):"size unknown";return`${n.width}x${n.height}, ${o}`},[n]),[t,s]=c.exports.useState("");return c.exports.useEffect(()=>{let o=null;return n.promiseBlob.then(r=>{o=URL.createObjectURL(r),s(o)}),()=>{o!=null&&URL.revokeObjectURL(o)}},[n]),v("div",{className:"flex gap-2",children:[i("img",{src:t,className:"w-16 h-16"}),v("div",{className:"flex-grow flex flex-col justify-center",children:[i("div",{className:"text-sm",children:n.name}),i("div",{className:"text-xs text-gray-400",children:n.mimeType}),i("div",{className:"text-xs text-gray-400",children:e})]})]})},Ps=n=>{const{inspector:e}=c.exports.useContext(y),s=e.texturesPlugin.textureInfos,o=c.exports.useMemo(()=>{var A;return(A=s==null?void 0:s.length)!=null?A:0},[s]),r=c.exports.useMemo(()=>{var A;return(A=s==null?void 0:s.reduce((d,f)=>{var m;return d+((m=f.byteLength)!=null?m:0)},0))!=null?A:0},[s]),a=c.exports.useMemo(()=>{var A;return(A=s==null?void 0:s.reduce((d,f)=>d+f.width*f.height,0))!=null?A:0},[s]),l=c.exports.useMemo(()=>`${a.toLocaleString()} pixels (\u2248 ${Math.sqrt(a).toFixed(0).toLocaleString()}^2)`,[a]);return i(L,M(C({},n),{children:v(_,{className:"w-80 h-96 overflow-y-scroll resize",children:[v("div",{children:["Textures count: ",o]}),v("div",{children:["Total size: ",V(r)]}),v("div",{children:["Total pixels: ",l]}),i(O,{}),s!=null&&i("div",{className:"flex flex-col gap-1",children:s.map((A,d)=>i(ks,{textureInfo:A},d))})]})}))},Is=({children:n})=>i("div",{style:{marginLeft:"1.13em"},children:n}),Ls=n=>{const[e,t]=c.exports.useState(!1),s=n.severity===0?U.error:n.severity===1?U.warning:U.severityInfo,o=c.exports.useCallback(()=>{t(!e)},[e]);return v("div",{className:"group cursor-pointer",onClick:o,children:[i("span",{className:"group-hover:text-sky-500",children:e?"- ":"+ "}),i("span",{style:{color:s},children:n.code}),i("span",{className:"text-gray-500",children:" - "+n.pointer}),e&&i(Is,{children:n.message})]})},te=({count:n,colorClass:e})=>i("span",{className:n?e:"text-gray-500",children:n}),_s=n=>{var a,l;const{inspector:e}=c.exports.useContext(y),t=(a=e.gltfValidatorPlugin.validationReport)==null?void 0:a.issues,[s,o]=c.exports.useReducer(A=>A+1,0),r=c.exports.useCallback(()=>{const A=2*t.messages.length;e.gltfValidatorPlugin.validate(A).then(()=>o())},[t]);return i(L,M(C({},n),{children:v(_,{className:"w-120 h-80 resize overflow-y-scroll",children:[i(x,{name:"Validator Version",value:(l=e.gltfValidatorPlugin.validationReport)==null?void 0:l.validatorVersion}),i(x,{name:"Errors",value:i(te,{count:t==null?void 0:t.numErrors,colorClass:"text-red-500"})}),i(x,{name:"Warnings",value:i(te,{count:t==null?void 0:t.numWarnings,colorClass:"text-yellow-300"})}),i(x,{name:"Infos",value:i(te,{count:t==null?void 0:t.numInfos,colorClass:"text-sky-500"})}),i(x,{name:"Hints",value:i(te,{count:t==null?void 0:t.numHints,colorClass:"text-sky-500"})}),i(O,{}),(t==null?void 0:t.truncated)&&v("div",{className:"m-1 font-bold",children:["There are too many issues! Showing only ",t==null?void 0:t.messages.length," entries.",i("span",{onClick:r,className:"pl-2 text-sky-500 font-bold cursor-pointer",children:"See all"})]}),i("div",{className:"w-full font-mono leading-tight text-xs",children:t==null?void 0:t.messages.map((A,d)=>i(Ls,{code:A.code,message:A.message,severity:A.severity,pointer:A.pointer},d))})]})}))},Qs=n=>{var s,o,r,a,l,A,d,f,m,h,p,g,b,B,w,k,R,E,P,z,j,W,Y,Z,K,I,he,de,ue,me;const{inspector:e}=c.exports.useContext(y),t=e.webglMemoryInfo;return i(L,M(C({},n),{children:v(_,{children:[i(x,{name:"Buffer",value:V((o=(s=t==null?void 0:t.memory)==null?void 0:s.buffer)!=null?o:0)}),i(x,{name:"Texture",value:V((a=(r=t==null?void 0:t.memory)==null?void 0:r.texture)!=null?a:0)}),i(x,{name:"Render Buffer",value:V((A=(l=t==null?void 0:t.memory)==null?void 0:l.renderbuffer)!=null?A:0)}),i(x,{name:"Drawing Buffer",value:V((f=(d=t==null?void 0:t.memory)==null?void 0:d.drawingbuffer)!=null?f:0)}),i(x,{name:"Total",value:V((h=(m=t==null?void 0:t.memory)==null?void 0:m.total)!=null?h:0)}),i(O,{}),i(x,{name:"Buffer",value:(g=(p=t==null?void 0:t.resources)==null?void 0:p.buffer)!=null?g:0}),i(x,{name:"Render Buffer",value:(B=(b=t==null?void 0:t.resources)==null?void 0:b.renderbuffer)!=null?B:0}),i(x,{name:"Program",value:(k=(w=t==null?void 0:t.resources)==null?void 0:w.program)!=null?k:0}),i(x,{name:"Query",value:(E=(R=t==null?void 0:t.resources)==null?void 0:R.query)!=null?E:0}),i(x,{name:"Sampler",value:(z=(P=t==null?void 0:t.resources)==null?void 0:P.sampler)!=null?z:0}),i(x,{name:"Shader",value:(W=(j=t==null?void 0:t.resources)==null?void 0:j.shader)!=null?W:0}),i(x,{name:"Sync",value:(Z=(Y=t==null?void 0:t.resources)==null?void 0:Y.sync)!=null?Z:0}),i(x,{name:"Texture",value:(I=(K=t==null?void 0:t.resources)==null?void 0:K.texture)!=null?I:0}),i(x,{name:"Transform Feedback",value:(de=(he=t==null?void 0:t.resources)==null?void 0:he.transformFeedback)!=null?de:0}),i(x,{name:"Vertex Array",value:(me=(ue=t==null?void 0:t.resources)==null?void 0:ue.vertexArray)!=null?me:0})]})}))},zs=()=>{const[n,e]=c.exports.useState(["jsonTree","materialDebugger","meta","stats","textures","webglMemory","expressions","lookAt","validationReport","sampleModels","helpers","exportBufferView","lights","animations","postProcessing","jsEditor","about"]),t=c.exports.useCallback((a,l)=>{const A=n.concat();A.splice(n.indexOf(l),1),A.push(l),e(A)},[n]);let s=0;const o=()=>{const a=0,l=s;return s+=20,{left:a,top:l}},r={jsonTree:i(ms,{paneKey:"jsonTree",title:"JSON Tree",onClick:t,initPosition:o()},"jsonTree"),materialDebugger:i(fs,{paneKey:"materialDebugger",title:"MToon Material Debugger",onClick:t,initPosition:o()},"materialDebugger"),meta:i(Es,{paneKey:"meta",title:"Meta",onClick:t,initPosition:o()},"meta"),stats:i(ys,{paneKey:"stats",title:"Stats",onClick:t,initPosition:o()},"stats"),textures:i(Ps,{paneKey:"textures",title:"Textures",onClick:t,initPosition:o()},"textures"),webglMemory:i(Qs,{paneKey:"webglMemory",title:"WebGL Memory",onClick:t,initPosition:o()},"webglMemory"),expressions:i(as,{paneKey:"expressions",title:"Expressions",onClick:t,initPosition:o()},"expressions"),lookAt:i(ps,{paneKey:"lookAt",title:"Look At",onClick:t,initPosition:o()},"lookAt"),validationReport:i(_s,{paneKey:"validationReport",title:"Validation Report",onClick:t,initPosition:o()},"validationReport"),sampleModels:i(Rs,{paneKey:"sampleModels",title:"Sample Models",onClick:t,initPosition:o()},"sampleModels"),helpers:i(As,{paneKey:"helpers",title:"Helpers",onClick:t,initPosition:o()},"helpers"),exportBufferView:i(is,{paneKey:"exportBufferView",title:"Export Buffer View",onClick:t,initPosition:o()},"exportBufferView"),lights:i(gs,{paneKey:"lights",title:"Lights",onClick:t,initPosition:o()},"lights"),animations:i(os,{paneKey:"animations",title:"Animations",onClick:t,initPosition:o()},"animations"),postProcessing:i(vs,{paneKey:"postProcessing",title:"Post Processing",onClick:t,initPosition:o()},"postProcessing"),jsEditor:i(us,{paneKey:"jsEditor",title:"JavaScript Editor",onClick:t,initPosition:o()},"jsEditor"),about:i(Jn,{paneKey:"about",title:"About",onClick:t,initPosition:o()},"about")};return i(Q,{children:n.map(a=>r[a])})},Ss=()=>{const{inspector:n}=c.exports.useContext(y),[e,t]=c.exports.useState(null);c.exports.useEffect(()=>{const o=()=>{t(null)},r=a=>{t(a)};return n.on("load",o),n.on("progress",r),()=>{n.off("load",o),n.off("progress",r)}});const s=c.exports.useMemo(()=>e?e.loaded/e.total:null,[e]);return i(Q,{children:i("div",{className:"w-full h-full absolute text-center pointer-events-none",children:i("div",{children:s?(100*s).toFixed(2):"yay"})})})},Hs=()=>{const{inspector:n}=c.exports.useContext(y),e=c.exports.useCallback(t=>{t&&n.setup(t)},[]);return i(Q,{children:v("div",{className:"w-full h-full text-sm absolute overflow-hidden text-gray-100",children:[i("canvas",{ref:e,className:"w-full h-full absolute"}),i(zs,{}),i(Ss,{})]})})},Ts=()=>i(Q,{children:i(Hs,{})});Ft.render(i(Re.StrictMode,{children:i(Ts,{})}),document.getElementById("root"));
