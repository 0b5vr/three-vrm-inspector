var XI=Object.defineProperty,YI=Object.defineProperties;var KI=Object.getOwnPropertyDescriptors;var IS=Object.getOwnPropertySymbols;var ZI=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable;var PS=(s,e,t)=>e in s?XI(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,zp=(s,e)=>{for(var t in e||(e={}))ZI.call(e,t)&&PS(s,t,e[t]);if(IS)for(var t of IS(e))QI.call(e,t)&&PS(s,t,e[t]);return s},Xv=(s,e)=>YI(s,KI(e));/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vi="137",JI={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},eP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},kS=0,Yv=1,OS=2,tP=3,nP=0,Kv=1,DS=2,Pu=3,jo=0,$n=1,Rs=2,Zv=1,rP=2,ro=0,ku=1,Qv=2,Jv=3,ey=4,NS=5,nl=100,FS=101,BS=102,ty=103,ny=104,US=200,zS=201,HS=202,GS=203,ry=204,iy=205,VS=206,WS=207,$S=208,jS=209,qS=210,XS=0,YS=1,KS=2,Hp=3,ZS=4,QS=5,JS=6,eM=7,rh=0,tM=1,nM=2,io=0,rM=1,iM=2,sM=3,oM=4,aM=5,Gp=300,rl=301,il=302,Ou=303,ih=304,Du=306,sh=307,Ls=1e3,fr=1001,Nu=1002,jn=1003,oh=1004,iP=1004,ah=1005,sP=1005,Rn=1006,Vp=1007,oP=1007,so=1008,aP=1008,Is=1009,lM=1010,uM=1011,Fu=1012,cM=1013,lh=1014,oo=1015,sl=1016,fM=1017,hM=1018,ol=1020,dM=1021,pM=1022,Er=1023,mM=1024,gM=1025,qo=1026,al=1027,vM=1028,yM=1029,xM=1030,_M=1031,wM=1033,Wp=33776,$p=33777,jp=33778,qp=33779,sy=35840,oy=35841,ay=35842,ly=35843,bM=36196,uy=37492,cy=37496,fy=37808,hy=37809,dy=37810,py=37811,my=37812,gy=37813,vy=37814,yy=37815,xy=37816,_y=37817,wy=37818,by=37819,Sy=37820,My=37821,Ty=36492,SM=2200,MM=2201,TM=2202,Bu=2300,ll=2301,Xp=2302,ul=2400,cl=2401,uh=2402,Yp=2500,Ey=2501,EM=0,AM=1,Ay=2,ki=3e3,rn=3001,CM=3200,RM=3201,ao=0,LM=1,lP=0,Kp=7680,uP=7681,cP=7682,fP=7683,hP=34055,dP=34056,pP=5386,mP=512,gP=513,vP=514,yP=515,xP=516,_P=517,wP=518,IM=519,Uu=35044,fl=35048,bP=35040,SP=35045,MP=35049,TP=35041,EP=35046,AP=35050,CP=35042,RP="100",Cy="300 es",Zp=1035;class Xo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let l=0,c=o.length;l<c;l++)o[l].call(this,e);e.target=null}}}const Fr=[];for(let s=0;s<256;s++)Fr[s]=(s<16?"0":"")+s.toString(16);let Qp=1234567;const hl=Math.PI/180,ch=180/Math.PI;function Oi(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Fr[s&255]+Fr[s>>8&255]+Fr[s>>16&255]+Fr[s>>24&255]+"-"+Fr[e&255]+Fr[e>>8&255]+"-"+Fr[e>>16&15|64]+Fr[e>>24&255]+"-"+Fr[t&63|128]+Fr[t>>8&255]+"-"+Fr[t>>16&255]+Fr[t>>24&255]+Fr[r&255]+Fr[r>>8&255]+Fr[r>>16&255]+Fr[r>>24&255]).toUpperCase()}function Br(s,e,t){return Math.max(e,Math.min(t,s))}function Ry(s,e){return(s%e+e)%e}function LP(s,e,t,r,o){return r+(s-e)*(o-r)/(t-e)}function IP(s,e,t){return s!==e?(t-s)/(e-s):0}function fh(s,e,t){return(1-t)*s+t*e}function PP(s,e,t,r){return fh(s,e,1-Math.exp(-t*r))}function kP(s,e=1){return e-Math.abs(Ry(s,e*2)-e)}function OP(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*(3-2*s))}function DP(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*s*(s*(s*6-15)+10))}function NP(s,e){return s+Math.floor(Math.random()*(e-s+1))}function FP(s,e){return s+Math.random()*(e-s)}function BP(s){return s*(.5-Math.random())}function UP(s){return s!==void 0&&(Qp=s%2147483647),Qp=Qp*16807%2147483647,(Qp-1)/2147483646}function zP(s){return s*hl}function HP(s){return s*ch}function Ly(s){return(s&s-1)==0&&s!==0}function PM(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function kM(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function GP(s,e,t,r,o){const l=Math.cos,c=Math.sin,h=l(t/2),m=c(t/2),y=l((e+r)/2),b=c((e+r)/2),M=l((e-r)/2),C=c((e-r)/2),I=l((r-e)/2),O=c((r-e)/2);switch(o){case"XYX":s.set(h*b,m*M,m*C,h*y);break;case"YZY":s.set(m*C,h*b,m*M,h*y);break;case"ZXZ":s.set(m*M,m*C,h*b,h*y);break;case"XZX":s.set(h*b,m*O,m*I,h*y);break;case"YXY":s.set(m*I,h*b,m*O,h*y);break;case"ZYZ":s.set(m*O,m*I,h*b,h*y);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}var yi=Object.freeze({__proto__:null,DEG2RAD:hl,RAD2DEG:ch,generateUUID:Oi,clamp:Br,euclideanModulo:Ry,mapLinear:LP,inverseLerp:IP,lerp:fh,damp:PP,pingpong:kP,smoothstep:OP,smootherstep:DP,randInt:NP,randFloat:FP,randFloatSpread:BP,seededRandom:UP,degToRad:zP,radToDeg:HP,isPowerOfTwo:Ly,ceilPowerOfTwo:PM,floorPowerOfTwo:kM,setQuaternionFromProperEuler:GP});class je{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),l=this.x-e.x,c=this.y-e.y;return this.x=l*r-c*o+e.x,this.y=l*o+c*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}je.prototype.isVector2=!0;class gn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,c,h,m,y){const b=this.elements;return b[0]=e,b[1]=o,b[2]=h,b[3]=t,b[4]=l,b[5]=m,b[6]=r,b[7]=c,b[8]=y,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,c=r[0],h=r[3],m=r[6],y=r[1],b=r[4],M=r[7],C=r[2],I=r[5],O=r[8],U=o[0],H=o[3],P=o[6],A=o[1],F=o[4],L=o[7],B=o[2],z=o[5],q=o[8];return l[0]=c*U+h*A+m*B,l[3]=c*H+h*F+m*z,l[6]=c*P+h*L+m*q,l[1]=y*U+b*A+M*B,l[4]=y*H+b*F+M*z,l[7]=y*P+b*L+M*q,l[2]=C*U+I*A+O*B,l[5]=C*H+I*F+O*z,l[8]=C*P+I*L+O*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],y=e[7],b=e[8];return t*c*b-t*h*y-r*l*b+r*h*m+o*l*y-o*c*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],y=e[7],b=e[8],M=b*c-h*y,C=h*m-b*l,I=y*l-c*m,O=t*M+r*C+o*I;if(O===0)return this.set(0,0,0,0,0,0,0,0,0);const U=1/O;return e[0]=M*U,e[1]=(o*y-b*r)*U,e[2]=(h*r-o*c)*U,e[3]=C*U,e[4]=(b*t-o*m)*U,e[5]=(o*l-h*t)*U,e[6]=I*U,e[7]=(r*m-y*t)*U,e[8]=(c*t-r*l)*U,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,l,c,h){const m=Math.cos(l),y=Math.sin(l);return this.set(r*m,r*y,-r*(m*c+y*h)+c+e,-o*y,o*m,-o*(-y*c+m*h)+h+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,l=o[0],c=o[3],h=o[6],m=o[1],y=o[4],b=o[7];return o[0]=t*l+r*m,o[3]=t*c+r*y,o[6]=t*h+r*b,o[1]=-r*l+t*m,o[4]=-r*c+t*y,o[7]=-r*h+t*b,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}gn.prototype.isMatrix3=!0;function OM(s){for(let e=s.length-1;e>=0;--e)if(s[e]>65535)return!0;return!1}const VP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zu(s,e){return new VP[s](e)}function hh(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}const DM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ds={h:0,s:0,l:0},Jp={h:0,s:0,l:0};function Iy(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*6*(2/3-t):s}function Hu(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function Py(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}class Ze{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=Ry(e,1),t=Br(t,0,1),r=Br(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=Iy(l,o,e+1/3),this.g=Iy(l,o,e),this.b=Iy(l,o,e-1/3)}return this}setStyle(e){function t(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=r[1],c=r[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,t(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,t(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const h=parseFloat(o[1])/360,m=parseInt(o[2],10)/100,y=parseInt(o[3],10)/100;return t(o[4]),this.setHSL(h,m,y)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=DM[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hu(e.r),this.g=Hu(e.g),this.b=Hu(e.b),this}copyLinearToSRGB(e){return this.r=Py(e.r),this.g=Py(e.g),this.b=Py(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,r=this.g,o=this.b,l=Math.max(t,r,o),c=Math.min(t,r,o);let h,m;const y=(c+l)/2;if(c===l)h=0,m=0;else{const b=l-c;switch(m=y<=.5?b/(l+c):b/(2-l-c),l){case t:h=(r-o)/b+(r<o?6:0);break;case r:h=(o-t)/b+2;break;case o:h=(t-r)/b+4;break}h/=6}return e.h=h,e.s=m,e.l=y,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(ds),ds.h+=e,ds.s+=t,ds.l+=r,this.setHSL(ds.h,ds.s,ds.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ds),e.getHSL(Jp);const r=fh(ds.h,Jp.h,t),o=fh(ds.s,Jp.s,t),l=fh(ds.l,Jp.l,t);return this.setHSL(r,o,l),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ze.NAMES=DM;Ze.prototype.isColor=!0;Ze.prototype.r=1;Ze.prototype.g=1;Ze.prototype.b=1;let Gu;class Yo{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Gu===void 0&&(Gu=hh("canvas")),Gu.width=e.width,Gu.height=e.height;const r=Gu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Gu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=hh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),l=o.data;for(let c=0;c<l.length;c++)l[c]=Hu(l[c]/255)*255;return r.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Hu(t[r]/255)*255):t[r]=Hu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let WP=0;class Dn extends Xo{constructor(e=Dn.DEFAULT_IMAGE,t=Dn.DEFAULT_MAPPING,r=fr,o=fr,l=Rn,c=so,h=Er,m=Is,y=1,b=ki){super();Object.defineProperty(this,"id",{value:WP++}),this.uuid=Oi(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=l,this.minFilter=c,this.anisotropy=y,this.format=h,this.internalFormat=null,this.type=m,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const o=this.image;if(o.uuid===void 0&&(o.uuid=Oi()),!t&&e.images[o.uuid]===void 0){let l;if(Array.isArray(o)){l=[];for(let c=0,h=o.length;c<h;c++)o[c].isDataTexture?l.push(ky(o[c].image)):l.push(ky(o[c]))}else l=ky(o);e.images[o.uuid]={uuid:o.uuid,url:l}}r.image=o.uuid}return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Gp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ls:e.x=e.x-Math.floor(e.x);break;case fr:e.x=e.x<0?0:1;break;case Nu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ls:e.y=e.y-Math.floor(e.y);break;case fr:e.y=e.y<0?0:1;break;case Nu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Dn.DEFAULT_IMAGE=void 0;Dn.DEFAULT_MAPPING=Gp;Dn.prototype.isTexture=!0;function ky(s){return typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap?Yo.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class an{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=this.w,c=e.elements;return this.x=c[0]*t+c[4]*r+c[8]*o+c[12]*l,this.y=c[1]*t+c[5]*r+c[9]*o+c[13]*l,this.z=c[2]*t+c[6]*r+c[10]*o+c[14]*l,this.w=c[3]*t+c[7]*r+c[11]*o+c[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,l;const c=.01,h=.1,m=e.elements,y=m[0],b=m[4],M=m[8],C=m[1],I=m[5],O=m[9],U=m[2],H=m[6],P=m[10];if(Math.abs(b-C)<c&&Math.abs(M-U)<c&&Math.abs(O-H)<c){if(Math.abs(b+C)<h&&Math.abs(M+U)<h&&Math.abs(O+H)<h&&Math.abs(y+I+P-3)<h)return this.set(1,0,0,0),this;t=Math.PI;const F=(y+1)/2,L=(I+1)/2,B=(P+1)/2,z=(b+C)/4,q=(M+U)/4,Z=(O+H)/4;return F>L&&F>B?F<c?(r=0,o=.707106781,l=.707106781):(r=Math.sqrt(F),o=z/r,l=q/r):L>B?L<c?(r=.707106781,o=0,l=.707106781):(o=Math.sqrt(L),r=z/o,l=Z/o):B<c?(r=.707106781,o=.707106781,l=0):(l=Math.sqrt(B),r=q/l,o=Z/l),this.set(r,o,l,t),this}let A=Math.sqrt((H-O)*(H-O)+(M-U)*(M-U)+(C-b)*(C-b));return Math.abs(A)<.001&&(A=1),this.x=(H-O)/A,this.y=(M-U)/A,this.z=(C-b)/A,this.w=Math.acos((y+I+P-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}an.prototype.isVector4=!0;class Di extends Xo{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t),this.texture=new Dn(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Rn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Di.prototype.isWebGLRenderTarget=!0;class NM extends Di{constructor(e,t,r){super(e,t);const o=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=o.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,l=this.texture.length;o<l;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}NM.prototype.isWebGLMultipleRenderTargets=!0;class em extends Di{constructor(e,t,r={}){super(e,t,r);this.samples=4,this.ignoreDepthForMultisampleCopy=r.ignoreDepth!==void 0?r.ignoreDepth:!0,this.useRenderToTexture=r.useRenderToTexture!==void 0?r.useRenderToTexture:!1,this.useRenderbuffer=this.useRenderToTexture===!1}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}em.prototype.isWebGLMultisampleRenderTarget=!0;class Vt{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,l,c,h){let m=r[o+0],y=r[o+1],b=r[o+2],M=r[o+3];const C=l[c+0],I=l[c+1],O=l[c+2],U=l[c+3];if(h===0){e[t+0]=m,e[t+1]=y,e[t+2]=b,e[t+3]=M;return}if(h===1){e[t+0]=C,e[t+1]=I,e[t+2]=O,e[t+3]=U;return}if(M!==U||m!==C||y!==I||b!==O){let H=1-h;const P=m*C+y*I+b*O+M*U,A=P>=0?1:-1,F=1-P*P;if(F>Number.EPSILON){const B=Math.sqrt(F),z=Math.atan2(B,P*A);H=Math.sin(H*z)/B,h=Math.sin(h*z)/B}const L=h*A;if(m=m*H+C*L,y=y*H+I*L,b=b*H+O*L,M=M*H+U*L,H===1-h){const B=1/Math.sqrt(m*m+y*y+b*b+M*M);m*=B,y*=B,b*=B,M*=B}}e[t]=m,e[t+1]=y,e[t+2]=b,e[t+3]=M}static multiplyQuaternionsFlat(e,t,r,o,l,c){const h=r[o],m=r[o+1],y=r[o+2],b=r[o+3],M=l[c],C=l[c+1],I=l[c+2],O=l[c+3];return e[t]=h*O+b*M+m*I-y*C,e[t+1]=m*O+b*C+y*M-h*I,e[t+2]=y*O+b*I+h*C-m*M,e[t+3]=b*O-h*M-m*C-y*I,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,l=e._z,c=e._order,h=Math.cos,m=Math.sin,y=h(r/2),b=h(o/2),M=h(l/2),C=m(r/2),I=m(o/2),O=m(l/2);switch(c){case"XYZ":this._x=C*b*M+y*I*O,this._y=y*I*M-C*b*O,this._z=y*b*O+C*I*M,this._w=y*b*M-C*I*O;break;case"YXZ":this._x=C*b*M+y*I*O,this._y=y*I*M-C*b*O,this._z=y*b*O-C*I*M,this._w=y*b*M+C*I*O;break;case"ZXY":this._x=C*b*M-y*I*O,this._y=y*I*M+C*b*O,this._z=y*b*O+C*I*M,this._w=y*b*M-C*I*O;break;case"ZYX":this._x=C*b*M-y*I*O,this._y=y*I*M+C*b*O,this._z=y*b*O-C*I*M,this._w=y*b*M+C*I*O;break;case"YZX":this._x=C*b*M+y*I*O,this._y=y*I*M+C*b*O,this._z=y*b*O-C*I*M,this._w=y*b*M-C*I*O;break;case"XZY":this._x=C*b*M-y*I*O,this._y=y*I*M-C*b*O,this._z=y*b*O+C*I*M,this._w=y*b*M+C*I*O;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],l=t[8],c=t[1],h=t[5],m=t[9],y=t[2],b=t[6],M=t[10],C=r+h+M;if(C>0){const I=.5/Math.sqrt(C+1);this._w=.25/I,this._x=(b-m)*I,this._y=(l-y)*I,this._z=(c-o)*I}else if(r>h&&r>M){const I=2*Math.sqrt(1+r-h-M);this._w=(b-m)/I,this._x=.25*I,this._y=(o+c)/I,this._z=(l+y)/I}else if(h>M){const I=2*Math.sqrt(1+h-r-M);this._w=(l-y)/I,this._x=(o+c)/I,this._y=.25*I,this._z=(m+b)/I}else{const I=2*Math.sqrt(1+M-r-h);this._w=(c-o)/I,this._x=(l+y)/I,this._y=(m+b)/I,this._z=.25*I}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Br(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,l=e._z,c=e._w,h=t._x,m=t._y,y=t._z,b=t._w;return this._x=r*b+c*h+o*y-l*m,this._y=o*b+c*m+l*h-r*y,this._z=l*b+c*y+r*m-o*h,this._w=c*b-r*h-o*m-l*y,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,o=this._y,l=this._z,c=this._w;let h=c*e._w+r*e._x+o*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=c,this._x=r,this._y=o,this._z=l,this;const m=1-h*h;if(m<=Number.EPSILON){const I=1-t;return this._w=I*c+t*this._w,this._x=I*r+t*this._x,this._y=I*o+t*this._y,this._z=I*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const y=Math.sqrt(m),b=Math.atan2(y,h),M=Math.sin((1-t)*b)/y,C=Math.sin(t*b)/y;return this._w=c*M+this._w*C,this._x=r*M+this._x*C,this._y=o*M+this._y*C,this._z=l*M+this._z*C,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(l),r*Math.cos(l),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Vt.prototype.isQuaternion=!0;class he{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(FM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6]*o,this.y=l[1]*t+l[4]*r+l[7]*o,this.z=l[2]*t+l[5]*r+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=e.elements,c=1/(l[3]*t+l[7]*r+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*r+l[8]*o+l[12])*c,this.y=(l[1]*t+l[5]*r+l[9]*o+l[13])*c,this.z=(l[2]*t+l[6]*r+l[10]*o+l[14])*c,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,l=e.x,c=e.y,h=e.z,m=e.w,y=m*t+c*o-h*r,b=m*r+h*t-l*o,M=m*o+l*r-c*t,C=-l*t-c*r-h*o;return this.x=y*m+C*-l+b*-h-M*-c,this.y=b*m+C*-c+M*-l-y*-h,this.z=M*m+C*-h+y*-c-b*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o,this.y=l[1]*t+l[5]*r+l[9]*o,this.z=l[2]*t+l[6]*r+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,l=e.z,c=t.x,h=t.y,m=t.z;return this.x=o*m-l*h,this.y=l*c-r*m,this.z=r*h-o*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Oy.copy(this).projectOnVector(e),this.sub(Oy)}reflect(e){return this.sub(Oy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Br(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}he.prototype.isVector3=!0;const Oy=new he,FM=new Vt;class xi{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let m=0,y=e.length;m<y;m+=3){const b=e[m],M=e[m+1],C=e[m+2];b<t&&(t=b),M<r&&(r=M),C<o&&(o=C),b>l&&(l=b),M>c&&(c=M),C>h&&(h=C)}return this.min.set(t,r,o),this.max.set(l,c,h),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let m=0,y=e.count;m<y;m++){const b=e.getX(m),M=e.getY(m),C=e.getZ(m);b<t&&(t=b),M<r&&(r=M),C<o&&(o=C),b>l&&(l=b),M>c&&(c=M),C>h&&(h=C)}return this.min.set(t,r,o),this.max.set(l,c,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=dl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const l=r.attributes.position;for(let c=0,h=l.count;c<h;c++)dl.fromBufferAttribute(l,c).applyMatrix4(e.matrixWorld),this.expandByPoint(dl)}else r.boundingBox===null&&r.computeBoundingBox(),Dy.copy(r.boundingBox),Dy.applyMatrix4(e.matrixWorld),this.union(Dy);const o=e.children;for(let l=0,c=o.length;l<c;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,dl),dl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dh),tm.subVectors(this.max,dh),Vu.subVectors(e.a,dh),Wu.subVectors(e.b,dh),$u.subVectors(e.c,dh),Ko.subVectors(Wu,Vu),Zo.subVectors($u,Wu),pl.subVectors(Vu,$u);let t=[0,-Ko.z,Ko.y,0,-Zo.z,Zo.y,0,-pl.z,pl.y,Ko.z,0,-Ko.x,Zo.z,0,-Zo.x,pl.z,0,-pl.x,-Ko.y,Ko.x,0,-Zo.y,Zo.x,0,-pl.y,pl.x,0];return!Ny(t,Vu,Wu,$u,tm)||(t=[1,0,0,0,1,0,0,0,1],!Ny(t,Vu,Wu,$u,tm))?!1:(nm.crossVectors(Ko,Zo),t=[nm.x,nm.y,nm.z],Ny(t,Vu,Wu,$u,tm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(dl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(lo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}xi.prototype.isBox3=!0;const lo=[new he,new he,new he,new he,new he,new he,new he,new he],dl=new he,Dy=new xi,Vu=new he,Wu=new he,$u=new he,Ko=new he,Zo=new he,pl=new he,dh=new he,tm=new he,nm=new he,ml=new he;function Ny(s,e,t,r,o){for(let l=0,c=s.length-3;l<=c;l+=3){ml.fromArray(s,l);const h=o.x*Math.abs(ml.x)+o.y*Math.abs(ml.y)+o.z*Math.abs(ml.z),m=e.dot(ml),y=t.dot(ml),b=r.dot(ml);if(Math.max(-Math.max(m,y,b),Math.min(m,y,b))>h)return!1}return!0}const $P=new xi,BM=new he,rm=new he,Fy=new he;class uo{constructor(e=new he,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):$P.setFromPoints(e).getCenter(r);let o=0;for(let l=0,c=e.length;l<c;l++)o=Math.max(o,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Fy.subVectors(e,this.center);const t=Fy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=(r-this.radius)*.5;this.center.add(Fy.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return this.center.equals(e.center)===!0?rm.set(0,0,1).multiplyScalar(e.radius):rm.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(BM.copy(e.center).add(rm)),this.expandByPoint(BM.copy(e.center).sub(rm)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const co=new he,By=new he,im=new he,Qo=new he,Uy=new he,sm=new he,zy=new he;class Jo{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,co)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=co.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(co.copy(this.direction).multiplyScalar(t).add(this.origin),co.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){By.copy(e).add(t).multiplyScalar(.5),im.copy(t).sub(e).normalize(),Qo.copy(this.origin).sub(By);const l=e.distanceTo(t)*.5,c=-this.direction.dot(im),h=Qo.dot(this.direction),m=-Qo.dot(im),y=Qo.lengthSq(),b=Math.abs(1-c*c);let M,C,I,O;if(b>0)if(M=c*m-h,C=c*h-m,O=l*b,M>=0)if(C>=-O)if(C<=O){const U=1/b;M*=U,C*=U,I=M*(M+c*C+2*h)+C*(c*M+C+2*m)+y}else C=l,M=Math.max(0,-(c*C+h)),I=-M*M+C*(C+2*m)+y;else C=-l,M=Math.max(0,-(c*C+h)),I=-M*M+C*(C+2*m)+y;else C<=-O?(M=Math.max(0,-(-c*l+h)),C=M>0?-l:Math.min(Math.max(-l,-m),l),I=-M*M+C*(C+2*m)+y):C<=O?(M=0,C=Math.min(Math.max(-l,-m),l),I=C*(C+2*m)+y):(M=Math.max(0,-(c*l+h)),C=M>0?l:Math.min(Math.max(-l,-m),l),I=-M*M+C*(C+2*m)+y);else C=c>0?-l:l,M=Math.max(0,-(c*C+h)),I=-M*M+C*(C+2*m)+y;return r&&r.copy(this.direction).multiplyScalar(M).add(this.origin),o&&o.copy(im).multiplyScalar(C).add(By),I}intersectSphere(e,t){co.subVectors(e.center,this.origin);const r=co.dot(this.direction),o=co.dot(co)-r*r,l=e.radius*e.radius;if(o>l)return null;const c=Math.sqrt(l-o),h=r-c,m=r+c;return h<0&&m<0?null:h<0?this.at(m,t):this.at(h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,l,c,h,m;const y=1/this.direction.x,b=1/this.direction.y,M=1/this.direction.z,C=this.origin;return y>=0?(r=(e.min.x-C.x)*y,o=(e.max.x-C.x)*y):(r=(e.max.x-C.x)*y,o=(e.min.x-C.x)*y),b>=0?(l=(e.min.y-C.y)*b,c=(e.max.y-C.y)*b):(l=(e.max.y-C.y)*b,c=(e.min.y-C.y)*b),r>c||l>o||((l>r||r!==r)&&(r=l),(c<o||o!==o)&&(o=c),M>=0?(h=(e.min.z-C.z)*M,m=(e.max.z-C.z)*M):(h=(e.max.z-C.z)*M,m=(e.min.z-C.z)*M),r>m||h>o)||((h>r||r!==r)&&(r=h),(m<o||o!==o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return this.intersectBox(e,co)!==null}intersectTriangle(e,t,r,o,l){Uy.subVectors(t,e),sm.subVectors(r,e),zy.crossVectors(Uy,sm);let c=this.direction.dot(zy),h;if(c>0){if(o)return null;h=1}else if(c<0)h=-1,c=-c;else return null;Qo.subVectors(this.origin,e);const m=h*this.direction.dot(sm.crossVectors(Qo,sm));if(m<0)return null;const y=h*this.direction.dot(Uy.cross(Qo));if(y<0||m+y>c)return null;const b=-h*Qo.dot(zy);return b<0?null:this.at(b/c,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Je{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,c,h,m,y,b,M,C,I,O,U,H){const P=this.elements;return P[0]=e,P[4]=t,P[8]=r,P[12]=o,P[1]=l,P[5]=c,P[9]=h,P[13]=m,P[2]=y,P[6]=b,P[10]=M,P[14]=C,P[3]=I,P[7]=O,P[11]=U,P[15]=H,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Je().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/ju.setFromMatrixColumn(e,0).length(),l=1/ju.setFromMatrixColumn(e,1).length(),c=1/ju.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*l,t[5]=r[5]*l,t[6]=r[6]*l,t[7]=0,t[8]=r[8]*c,t[9]=r[9]*c,t[10]=r[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,l=e.z,c=Math.cos(r),h=Math.sin(r),m=Math.cos(o),y=Math.sin(o),b=Math.cos(l),M=Math.sin(l);if(e.order==="XYZ"){const C=c*b,I=c*M,O=h*b,U=h*M;t[0]=m*b,t[4]=-m*M,t[8]=y,t[1]=I+O*y,t[5]=C-U*y,t[9]=-h*m,t[2]=U-C*y,t[6]=O+I*y,t[10]=c*m}else if(e.order==="YXZ"){const C=m*b,I=m*M,O=y*b,U=y*M;t[0]=C+U*h,t[4]=O*h-I,t[8]=c*y,t[1]=c*M,t[5]=c*b,t[9]=-h,t[2]=I*h-O,t[6]=U+C*h,t[10]=c*m}else if(e.order==="ZXY"){const C=m*b,I=m*M,O=y*b,U=y*M;t[0]=C-U*h,t[4]=-c*M,t[8]=O+I*h,t[1]=I+O*h,t[5]=c*b,t[9]=U-C*h,t[2]=-c*y,t[6]=h,t[10]=c*m}else if(e.order==="ZYX"){const C=c*b,I=c*M,O=h*b,U=h*M;t[0]=m*b,t[4]=O*y-I,t[8]=C*y+U,t[1]=m*M,t[5]=U*y+C,t[9]=I*y-O,t[2]=-y,t[6]=h*m,t[10]=c*m}else if(e.order==="YZX"){const C=c*m,I=c*y,O=h*m,U=h*y;t[0]=m*b,t[4]=U-C*M,t[8]=O*M+I,t[1]=M,t[5]=c*b,t[9]=-h*b,t[2]=-y*b,t[6]=I*M+O,t[10]=C-U*M}else if(e.order==="XZY"){const C=c*m,I=c*y,O=h*m,U=h*y;t[0]=m*b,t[4]=-M,t[8]=y*b,t[1]=C*M+U,t[5]=c*b,t[9]=I*M-O,t[2]=O*M-I,t[6]=h*b,t[10]=U*M+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jP,e,qP)}lookAt(e,t,r){const o=this.elements;return Ni.subVectors(e,t),Ni.lengthSq()===0&&(Ni.z=1),Ni.normalize(),ea.crossVectors(r,Ni),ea.lengthSq()===0&&(Math.abs(r.z)===1?Ni.x+=1e-4:Ni.z+=1e-4,Ni.normalize(),ea.crossVectors(r,Ni)),ea.normalize(),om.crossVectors(Ni,ea),o[0]=ea.x,o[4]=om.x,o[8]=Ni.x,o[1]=ea.y,o[5]=om.y,o[9]=Ni.y,o[2]=ea.z,o[6]=om.z,o[10]=Ni.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,c=r[0],h=r[4],m=r[8],y=r[12],b=r[1],M=r[5],C=r[9],I=r[13],O=r[2],U=r[6],H=r[10],P=r[14],A=r[3],F=r[7],L=r[11],B=r[15],z=o[0],q=o[4],Z=o[8],ae=o[12],ce=o[1],ee=o[5],ue=o[9],le=o[13],w=o[2],p=o[6],J=o[10],E=o[14],ge=o[3],ke=o[7],Se=o[11],de=o[15];return l[0]=c*z+h*ce+m*w+y*ge,l[4]=c*q+h*ee+m*p+y*ke,l[8]=c*Z+h*ue+m*J+y*Se,l[12]=c*ae+h*le+m*E+y*de,l[1]=b*z+M*ce+C*w+I*ge,l[5]=b*q+M*ee+C*p+I*ke,l[9]=b*Z+M*ue+C*J+I*Se,l[13]=b*ae+M*le+C*E+I*de,l[2]=O*z+U*ce+H*w+P*ge,l[6]=O*q+U*ee+H*p+P*ke,l[10]=O*Z+U*ue+H*J+P*Se,l[14]=O*ae+U*le+H*E+P*de,l[3]=A*z+F*ce+L*w+B*ge,l[7]=A*q+F*ee+L*p+B*ke,l[11]=A*Z+F*ue+L*J+B*Se,l[15]=A*ae+F*le+L*E+B*de,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],l=e[12],c=e[1],h=e[5],m=e[9],y=e[13],b=e[2],M=e[6],C=e[10],I=e[14],O=e[3],U=e[7],H=e[11],P=e[15];return O*(+l*m*M-o*y*M-l*h*C+r*y*C+o*h*I-r*m*I)+U*(+t*m*I-t*y*C+l*c*C-o*c*I+o*y*b-l*m*b)+H*(+t*y*M-t*h*I-l*c*M+r*c*I+l*h*b-r*y*b)+P*(-o*h*b-t*m*M+t*h*C+o*c*M-r*c*C+r*m*b)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],m=e[6],y=e[7],b=e[8],M=e[9],C=e[10],I=e[11],O=e[12],U=e[13],H=e[14],P=e[15],A=M*H*y-U*C*y+U*m*I-h*H*I-M*m*P+h*C*P,F=O*C*y-b*H*y-O*m*I+c*H*I+b*m*P-c*C*P,L=b*U*y-O*M*y+O*h*I-c*U*I-b*h*P+c*M*P,B=O*M*m-b*U*m-O*h*C+c*U*C+b*h*H-c*M*H,z=t*A+r*F+o*L+l*B;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const q=1/z;return e[0]=A*q,e[1]=(U*C*l-M*H*l-U*o*I+r*H*I+M*o*P-r*C*P)*q,e[2]=(h*H*l-U*m*l+U*o*y-r*H*y-h*o*P+r*m*P)*q,e[3]=(M*m*l-h*C*l-M*o*y+r*C*y+h*o*I-r*m*I)*q,e[4]=F*q,e[5]=(b*H*l-O*C*l+O*o*I-t*H*I-b*o*P+t*C*P)*q,e[6]=(O*m*l-c*H*l-O*o*y+t*H*y+c*o*P-t*m*P)*q,e[7]=(c*C*l-b*m*l+b*o*y-t*C*y-c*o*I+t*m*I)*q,e[8]=L*q,e[9]=(O*M*l-b*U*l-O*r*I+t*U*I+b*r*P-t*M*P)*q,e[10]=(c*U*l-O*h*l+O*r*y-t*U*y-c*r*P+t*h*P)*q,e[11]=(b*h*l-c*M*l-b*r*y+t*M*y+c*r*I-t*h*I)*q,e[12]=B*q,e[13]=(b*U*o-O*M*o+O*r*C-t*U*C-b*r*H+t*M*H)*q,e[14]=(O*h*o-c*U*o-O*r*m+t*U*m+c*r*H-t*h*H)*q,e[15]=(c*M*o-b*h*o+b*r*m-t*M*m-c*r*C+t*h*C)*q,this}scale(e){const t=this.elements,r=e.x,o=e.y,l=e.z;return t[0]*=r,t[4]*=o,t[8]*=l,t[1]*=r,t[5]*=o,t[9]*=l,t[2]*=r,t[6]*=o,t[10]*=l,t[3]*=r,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,o))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),l=1-r,c=e.x,h=e.y,m=e.z,y=l*c,b=l*h;return this.set(y*c+r,y*h-o*m,y*m+o*h,0,y*h+o*m,b*h+r,b*m-o*c,0,y*m-o*h,b*m+o*c,l*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,l,c){return this.set(1,r,l,0,e,1,c,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,l=t._x,c=t._y,h=t._z,m=t._w,y=l+l,b=c+c,M=h+h,C=l*y,I=l*b,O=l*M,U=c*b,H=c*M,P=h*M,A=m*y,F=m*b,L=m*M,B=r.x,z=r.y,q=r.z;return o[0]=(1-(U+P))*B,o[1]=(I+L)*B,o[2]=(O-F)*B,o[3]=0,o[4]=(I-L)*z,o[5]=(1-(C+P))*z,o[6]=(H+A)*z,o[7]=0,o[8]=(O+F)*q,o[9]=(H-A)*q,o[10]=(1-(C+U))*q,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let l=ju.set(o[0],o[1],o[2]).length();const c=ju.set(o[4],o[5],o[6]).length(),h=ju.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],ps.copy(this);const y=1/l,b=1/c,M=1/h;return ps.elements[0]*=y,ps.elements[1]*=y,ps.elements[2]*=y,ps.elements[4]*=b,ps.elements[5]*=b,ps.elements[6]*=b,ps.elements[8]*=M,ps.elements[9]*=M,ps.elements[10]*=M,t.setFromRotationMatrix(ps),r.x=l,r.y=c,r.z=h,this}makePerspective(e,t,r,o,l,c){c===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,m=2*l/(t-e),y=2*l/(r-o),b=(t+e)/(t-e),M=(r+o)/(r-o),C=-(c+l)/(c-l),I=-2*c*l/(c-l);return h[0]=m,h[4]=0,h[8]=b,h[12]=0,h[1]=0,h[5]=y,h[9]=M,h[13]=0,h[2]=0,h[6]=0,h[10]=C,h[14]=I,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,o,l,c){const h=this.elements,m=1/(t-e),y=1/(r-o),b=1/(c-l),M=(t+e)*m,C=(r+o)*y,I=(c+l)*b;return h[0]=2*m,h[4]=0,h[8]=0,h[12]=-M,h[1]=0,h[5]=2*y,h[9]=0,h[13]=-C,h[2]=0,h[6]=0,h[10]=-2*b,h[14]=-I,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Je.prototype.isMatrix4=!0;const ju=new he,ps=new Je,jP=new he(0,0,0),qP=new he(1,1,1),ea=new he,om=new he,Ni=new he,UM=new Je,zM=new Vt;class _i{constructor(e=0,t=0,r=0,o=_i.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,l=o[0],c=o[4],h=o[8],m=o[1],y=o[5],b=o[9],M=o[2],C=o[6],I=o[10];switch(t){case"XYZ":this._y=Math.asin(Br(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-b,I),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(C,y),this._z=0);break;case"YXZ":this._x=Math.asin(-Br(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(h,I),this._z=Math.atan2(m,y)):(this._y=Math.atan2(-M,l),this._z=0);break;case"ZXY":this._x=Math.asin(Br(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-M,I),this._z=Math.atan2(-c,y)):(this._y=0,this._z=Math.atan2(m,l));break;case"ZYX":this._y=Math.asin(-Br(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(C,I),this._z=Math.atan2(m,l)):(this._x=0,this._z=Math.atan2(-c,y));break;case"YZX":this._z=Math.asin(Br(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,y),this._y=Math.atan2(-M,l)):(this._x=0,this._y=Math.atan2(h,I));break;case"XZY":this._z=Math.asin(-Br(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(C,y),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-b,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return UM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UM,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zM.setFromEuler(this),this.setFromQuaternion(zM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new he(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}_i.prototype.isEuler=!0;_i.DefaultOrder="XYZ";_i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class am{constructor(){this.mask=1|0}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let XP=0;const HM=new he,qu=new Vt,fo=new Je,lm=new he,ph=new he,YP=new he,KP=new Vt,GM=new he(1,0,0),VM=new he(0,1,0),WM=new he(0,0,1),ZP={type:"added"},$M={type:"removed"};class Wt extends Xo{constructor(){super();Object.defineProperty(this,"id",{value:XP++}),this.uuid=Oi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wt.DefaultUp.clone();const e=new he,t=new _i,r=new Vt,o=new he(1,1,1);function l(){r.setFromEuler(t,!1)}function c(){t.setFromQuaternion(r,void 0,!1)}t._onChange(l),r._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Je},normalMatrix:{value:new gn}}),this.matrix=new Je,this.matrixWorld=new Je,this.matrixAutoUpdate=Wt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new am,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.multiply(qu),this}rotateOnWorldAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.premultiply(qu),this}rotateX(e){return this.rotateOnAxis(GM,e)}rotateY(e){return this.rotateOnAxis(VM,e)}rotateZ(e){return this.rotateOnAxis(WM,e)}translateOnAxis(e,t){return HM.copy(e).applyQuaternion(this.quaternion),this.position.add(HM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(GM,e)}translateY(e){return this.translateOnAxis(VM,e)}translateZ(e){return this.translateOnAxis(WM,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(fo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?lm.copy(e):lm.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),ph.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fo.lookAt(ph,lm,this.up):fo.lookAt(lm,ph,this.up),this.quaternion.setFromRotationMatrix(fo),o&&(fo.extractRotation(o.matrixWorld),qu.setFromRotationMatrix(fo),this.quaternion.premultiply(qu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ZP)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($M)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent($M)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),fo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fo.multiply(e.parent.matrixWorld)),e.applyMatrix4(fo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const c=this.children[r].getObjectByProperty(e,t);if(c!==void 0)return c}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ph,e,YP),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ph,KP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let l=0,c=o.length;l<c;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function l(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let y=0,b=m.length;y<b;y++){const M=m[y];l(e.shapes,M)}else l(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,y=this.material.length;m<y;m++)h.push(l(e.materials,this.material[m]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];o.animations.push(l(e.animations,m))}}if(t){const h=c(e.geometries),m=c(e.materials),y=c(e.textures),b=c(e.images),M=c(e.shapes),C=c(e.skeletons),I=c(e.animations);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),y.length>0&&(r.textures=y),b.length>0&&(r.images=b),M.length>0&&(r.shapes=M),C.length>0&&(r.skeletons=C),I.length>0&&(r.animations=I)}return r.object=o,r;function c(h){const m=[];for(const y in h){const b=h[y];delete b.metadata,m.push(b)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Wt.DefaultUp=new he(0,1,0);Wt.DefaultMatrixAutoUpdate=!0;Wt.prototype.isObject3D=!0;const ms=new he,ho=new he,Hy=new he,po=new he,Xu=new he,Yu=new he,jM=new he,Gy=new he,Vy=new he,Wy=new he;class tr{constructor(e=new he,t=new he,r=new he){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),ms.subVectors(e,t),o.cross(ms);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,r,o,l){ms.subVectors(o,t),ho.subVectors(r,t),Hy.subVectors(e,t);const c=ms.dot(ms),h=ms.dot(ho),m=ms.dot(Hy),y=ho.dot(ho),b=ho.dot(Hy),M=c*y-h*h;if(M===0)return l.set(-2,-1,-1);const C=1/M,I=(y*m-h*b)*C,O=(c*b-h*m)*C;return l.set(1-I-O,O,I)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,po),po.x>=0&&po.y>=0&&po.x+po.y<=1}static getUV(e,t,r,o,l,c,h,m){return this.getBarycoord(e,t,r,o,po),m.set(0,0),m.addScaledVector(l,po.x),m.addScaledVector(c,po.y),m.addScaledVector(h,po.z),m}static isFrontFacing(e,t,r,o){return ms.subVectors(r,t),ho.subVectors(e,t),ms.cross(ho).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ms.subVectors(this.c,this.b),ho.subVectors(this.a,this.b),ms.cross(ho).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return tr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return tr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,l){return tr.getUV(e,this.a,this.b,this.c,t,r,o,l)}containsPoint(e){return tr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return tr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,l=this.c;let c,h;Xu.subVectors(o,r),Yu.subVectors(l,r),Gy.subVectors(e,r);const m=Xu.dot(Gy),y=Yu.dot(Gy);if(m<=0&&y<=0)return t.copy(r);Vy.subVectors(e,o);const b=Xu.dot(Vy),M=Yu.dot(Vy);if(b>=0&&M<=b)return t.copy(o);const C=m*M-b*y;if(C<=0&&m>=0&&b<=0)return c=m/(m-b),t.copy(r).addScaledVector(Xu,c);Wy.subVectors(e,l);const I=Xu.dot(Wy),O=Yu.dot(Wy);if(O>=0&&I<=O)return t.copy(l);const U=I*y-m*O;if(U<=0&&y>=0&&O<=0)return h=y/(y-O),t.copy(r).addScaledVector(Yu,h);const H=b*O-I*M;if(H<=0&&M-b>=0&&I-O>=0)return jM.subVectors(l,o),h=(M-b)/(M-b+(I-O)),t.copy(o).addScaledVector(jM,h);const P=1/(H+U+C);return c=U*P,h=C*P,t.copy(r).addScaledVector(Xu,c).addScaledVector(Yu,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let QP=0;class nr extends Xo{constructor(){super();Object.defineProperty(this,"id",{value:QP++}),this.uuid=Oi(),this.name="",this.type="Material",this.fog=!0,this.blending=ku,this.side=jo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ry,this.blendDst=iy,this.blendEquation=nl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Hp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=IM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Kp,this.stencilZFail=Kp,this.stencilZPass=Kp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Zv;continue}const o=this[t];if(o===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ku&&(r.blending=this.blending),this.side!==jo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function o(l){const c=[];for(const h in l){const m=l[h];delete m.metadata,c.push(m)}return c}if(t){const l=o(e.textures),c=o(e.images);l.length>0&&(r.textures=l),c.length>0&&(r.images=c)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const o=t.length;r=new Array(o);for(let l=0;l!==o;++l)r[l]=t[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}nr.prototype.isMaterial=!0;class Yr extends nr{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Yr.prototype.isMeshBasicMaterial=!0;const Tn=new he,um=new je;class Dt{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=Uu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),c=new Ze),t[r++]=c.r,t[r++]=c.g,t[r++]=c.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),c=new je),t[r++]=c.x,t[r++]=c.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),c=new he),t[r++]=c.x,t[r++]=c.y,t[r++]=c.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let c=e[o];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),c=new an),t[r++]=c.x,t[r++]=c.y,t[r++]=c.z,t[r++]=c.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)um.fromBufferAttribute(this,t),um.applyMatrix3(e),this.setXY(t,um.x,um.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix3(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Tn.x=this.getX(t),Tn.y=this.getY(t),Tn.z=this.getZ(t),Tn.applyMatrix4(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Tn.x=this.getX(t),Tn.y=this.getY(t),Tn.z=this.getZ(t),Tn.applyNormalMatrix(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Tn.x=this.getX(t),Tn.y=this.getY(t),Tn.z=this.getZ(t),Tn.transformDirection(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Uu&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Dt.prototype.isBufferAttribute=!0;class qM extends Dt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class XM extends Dt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class YM extends Dt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class KM extends Dt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class mh extends Dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ZM extends Dt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class cm extends Dt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class QM extends Dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}QM.prototype.isFloat16BufferAttribute=!0;class vt extends Dt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class JM extends Dt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let JP=0;const qi=new Je,$y=new Wt,Ku=new he,Fi=new xi,gh=new xi,Ar=new he;class St extends Xo{constructor(){super();Object.defineProperty(this,"id",{value:JP++}),this.uuid=Oi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(OM(e)?cm:mh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const l=new gn().getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qi.makeRotationFromQuaternion(e),this.applyMatrix4(qi),this}rotateX(e){return qi.makeRotationX(e),this.applyMatrix4(qi),this}rotateY(e){return qi.makeRotationY(e),this.applyMatrix4(qi),this}rotateZ(e){return qi.makeRotationZ(e),this.applyMatrix4(qi),this}translate(e,t,r){return qi.makeTranslation(e,t,r),this.applyMatrix4(qi),this}scale(e,t,r){return qi.makeScale(e,t,r),this.applyMatrix4(qi),this}lookAt(e){return $y.lookAt(e),$y.updateMatrix(),this.applyMatrix4($y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ku).negate(),this.translate(Ku.x,Ku.y,Ku.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const l=e[r];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new vt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const l=t[r];Fi.setFromBufferAttribute(l),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new uo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new he,1/0);return}if(e){const r=this.boundingSphere.center;if(Fi.setFromBufferAttribute(e),t)for(let l=0,c=t.length;l<c;l++){const h=t[l];gh.setFromBufferAttribute(h),this.morphTargetsRelative?(Ar.addVectors(Fi.min,gh.min),Fi.expandByPoint(Ar),Ar.addVectors(Fi.max,gh.max),Fi.expandByPoint(Ar)):(Fi.expandByPoint(gh.min),Fi.expandByPoint(gh.max))}Fi.getCenter(r);let o=0;for(let l=0,c=e.count;l<c;l++)Ar.fromBufferAttribute(e,l),o=Math.max(o,r.distanceToSquared(Ar));if(t)for(let l=0,c=t.length;l<c;l++){const h=t[l],m=this.morphTargetsRelative;for(let y=0,b=h.count;y<b;y++)Ar.fromBufferAttribute(h,y),m&&(Ku.fromBufferAttribute(e,y),Ar.add(Ku)),o=Math.max(o,r.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=t.position.array,l=t.normal.array,c=t.uv.array,h=o.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Dt(new Float32Array(4*h),4));const m=t.tangent.array,y=[],b=[];for(let ce=0;ce<h;ce++)y[ce]=new he,b[ce]=new he;const M=new he,C=new he,I=new he,O=new je,U=new je,H=new je,P=new he,A=new he;function F(ce,ee,ue){M.fromArray(o,ce*3),C.fromArray(o,ee*3),I.fromArray(o,ue*3),O.fromArray(c,ce*2),U.fromArray(c,ee*2),H.fromArray(c,ue*2),C.sub(M),I.sub(M),U.sub(O),H.sub(O);const le=1/(U.x*H.y-H.x*U.y);!isFinite(le)||(P.copy(C).multiplyScalar(H.y).addScaledVector(I,-U.y).multiplyScalar(le),A.copy(I).multiplyScalar(U.x).addScaledVector(C,-H.x).multiplyScalar(le),y[ce].add(P),y[ee].add(P),y[ue].add(P),b[ce].add(A),b[ee].add(A),b[ue].add(A))}let L=this.groups;L.length===0&&(L=[{start:0,count:r.length}]);for(let ce=0,ee=L.length;ce<ee;++ce){const ue=L[ce],le=ue.start,w=ue.count;for(let p=le,J=le+w;p<J;p+=3)F(r[p+0],r[p+1],r[p+2])}const B=new he,z=new he,q=new he,Z=new he;function ae(ce){q.fromArray(l,ce*3),Z.copy(q);const ee=y[ce];B.copy(ee),B.sub(q.multiplyScalar(q.dot(ee))).normalize(),z.crossVectors(Z,ee);const le=z.dot(b[ce])<0?-1:1;m[ce*4]=B.x,m[ce*4+1]=B.y,m[ce*4+2]=B.z,m[ce*4+3]=le}for(let ce=0,ee=L.length;ce<ee;++ce){const ue=L[ce],le=ue.start,w=ue.count;for(let p=le,J=le+w;p<J;p+=3)ae(r[p+0]),ae(r[p+1]),ae(r[p+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Dt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let C=0,I=r.count;C<I;C++)r.setXYZ(C,0,0,0);const o=new he,l=new he,c=new he,h=new he,m=new he,y=new he,b=new he,M=new he;if(e)for(let C=0,I=e.count;C<I;C+=3){const O=e.getX(C+0),U=e.getX(C+1),H=e.getX(C+2);o.fromBufferAttribute(t,O),l.fromBufferAttribute(t,U),c.fromBufferAttribute(t,H),b.subVectors(c,l),M.subVectors(o,l),b.cross(M),h.fromBufferAttribute(r,O),m.fromBufferAttribute(r,U),y.fromBufferAttribute(r,H),h.add(b),m.add(b),y.add(b),r.setXYZ(O,h.x,h.y,h.z),r.setXYZ(U,m.x,m.y,m.z),r.setXYZ(H,y.x,y.y,y.z)}else for(let C=0,I=t.count;C<I;C+=3)o.fromBufferAttribute(t,C+0),l.fromBufferAttribute(t,C+1),c.fromBufferAttribute(t,C+2),b.subVectors(c,l),M.subVectors(o,l),b.cross(M),r.setXYZ(C+0,b.x,b.y,b.z),r.setXYZ(C+1,b.x,b.y,b.z),r.setXYZ(C+2,b.x,b.y,b.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(e.attributes[o]===void 0)continue;const c=r[o].array,h=e.attributes[o],m=h.array,y=h.itemSize*t,b=Math.min(m.length,c.length-y);for(let M=0,C=y;M<b;M++,C++)c[C]=m[M]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ar.fromBufferAttribute(e,t),Ar.normalize(),e.setXYZ(t,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function e(h,m){const y=h.array,b=h.itemSize,M=h.normalized,C=new y.constructor(m.length*b);let I=0,O=0;for(let U=0,H=m.length;U<H;U++){h.isInterleavedBufferAttribute?I=m[U]*h.data.stride+h.offset:I=m[U]*b;for(let P=0;P<b;P++)C[O++]=y[I++]}return new Dt(C,b,M)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new St,r=this.index.array,o=this.attributes;for(const h in o){const m=o[h],y=e(m,r);t.setAttribute(h,y)}const l=this.morphAttributes;for(const h in l){const m=[],y=l[h];for(let b=0,M=y.length;b<M;b++){const C=y[b],I=e(C,r);m.push(I)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,m=c.length;h<m;h++){const y=c[h];t.addGroup(y.start,y.count,y.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const y in m)m[y]!==void 0&&(e[y]=m[y]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r){const y=r[m];e.data.attributes[m]=y.toJSON(e.data)}const o={};let l=!1;for(const m in this.morphAttributes){const y=this.morphAttributes[m],b=[];for(let M=0,C=y.length;M<C;M++){const I=y[M];b.push(I.toJSON(e.data))}b.length>0&&(o[m]=b,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const o=e.attributes;for(const y in o){const b=o[y];this.setAttribute(y,b.clone(t))}const l=e.morphAttributes;for(const y in l){const b=[],M=l[y];for(let C=0,I=M.length;C<I;C++)b.push(M[C].clone(t));this.morphAttributes[y]=b}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let y=0,b=c.length;y<b;y++){const M=c[y];this.addGroup(M.start,M.count,M.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}St.prototype.isBufferGeometry=!0;const eT=new Je,Zu=new Jo,jy=new uo,ta=new he,na=new he,ra=new he,qy=new he,Xy=new he,Yy=new he,fm=new he,hm=new he,dm=new he,pm=new je,mm=new je,gm=new je,Ky=new he,vm=new he;class Nn extends Wt{constructor(e=new St,t=new Yr){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,l=this.matrixWorld;if(o===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),jy.copy(r.boundingSphere),jy.applyMatrix4(l),e.ray.intersectsSphere(jy)===!1)||(eT.copy(l).invert(),Zu.copy(e.ray).applyMatrix4(eT),r.boundingBox!==null&&Zu.intersectsBox(r.boundingBox)===!1))return;let c;if(r.isBufferGeometry){const h=r.index,m=r.attributes.position,y=r.morphAttributes.position,b=r.morphTargetsRelative,M=r.attributes.uv,C=r.attributes.uv2,I=r.groups,O=r.drawRange;if(h!==null)if(Array.isArray(o))for(let U=0,H=I.length;U<H;U++){const P=I[U],A=o[P.materialIndex],F=Math.max(P.start,O.start),L=Math.min(h.count,Math.min(P.start+P.count,O.start+O.count));for(let B=F,z=L;B<z;B+=3){const q=h.getX(B),Z=h.getX(B+1),ae=h.getX(B+2);c=ym(this,A,e,Zu,m,y,b,M,C,q,Z,ae),c&&(c.faceIndex=Math.floor(B/3),c.face.materialIndex=P.materialIndex,t.push(c))}}else{const U=Math.max(0,O.start),H=Math.min(h.count,O.start+O.count);for(let P=U,A=H;P<A;P+=3){const F=h.getX(P),L=h.getX(P+1),B=h.getX(P+2);c=ym(this,o,e,Zu,m,y,b,M,C,F,L,B),c&&(c.faceIndex=Math.floor(P/3),t.push(c))}}else if(m!==void 0)if(Array.isArray(o))for(let U=0,H=I.length;U<H;U++){const P=I[U],A=o[P.materialIndex],F=Math.max(P.start,O.start),L=Math.min(m.count,Math.min(P.start+P.count,O.start+O.count));for(let B=F,z=L;B<z;B+=3){const q=B,Z=B+1,ae=B+2;c=ym(this,A,e,Zu,m,y,b,M,C,q,Z,ae),c&&(c.faceIndex=Math.floor(B/3),c.face.materialIndex=P.materialIndex,t.push(c))}}else{const U=Math.max(0,O.start),H=Math.min(m.count,O.start+O.count);for(let P=U,A=H;P<A;P+=3){const F=P,L=P+1,B=P+2;c=ym(this,o,e,Zu,m,y,b,M,C,F,L,B),c&&(c.faceIndex=Math.floor(P/3),t.push(c))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Nn.prototype.isMesh=!0;function ek(s,e,t,r,o,l,c,h){let m;if(e.side===$n?m=r.intersectTriangle(c,l,o,!0,h):m=r.intersectTriangle(o,l,c,e.side!==Rs,h),m===null)return null;vm.copy(h),vm.applyMatrix4(s.matrixWorld);const y=t.ray.origin.distanceTo(vm);return y<t.near||y>t.far?null:{distance:y,point:vm.clone(),object:s}}function ym(s,e,t,r,o,l,c,h,m,y,b,M){ta.fromBufferAttribute(o,y),na.fromBufferAttribute(o,b),ra.fromBufferAttribute(o,M);const C=s.morphTargetInfluences;if(l&&C){fm.set(0,0,0),hm.set(0,0,0),dm.set(0,0,0);for(let O=0,U=l.length;O<U;O++){const H=C[O],P=l[O];H!==0&&(qy.fromBufferAttribute(P,y),Xy.fromBufferAttribute(P,b),Yy.fromBufferAttribute(P,M),c?(fm.addScaledVector(qy,H),hm.addScaledVector(Xy,H),dm.addScaledVector(Yy,H)):(fm.addScaledVector(qy.sub(ta),H),hm.addScaledVector(Xy.sub(na),H),dm.addScaledVector(Yy.sub(ra),H)))}ta.add(fm),na.add(hm),ra.add(dm)}s.isSkinnedMesh&&(s.boneTransform(y,ta),s.boneTransform(b,na),s.boneTransform(M,ra));const I=ek(s,e,t,r,ta,na,ra,Ky);if(I){h&&(pm.fromBufferAttribute(h,y),mm.fromBufferAttribute(h,b),gm.fromBufferAttribute(h,M),I.uv=tr.getUV(Ky,ta,na,ra,pm,mm,gm,new je)),m&&(pm.fromBufferAttribute(m,y),mm.fromBufferAttribute(m,b),gm.fromBufferAttribute(m,M),I.uv2=tr.getUV(Ky,ta,na,ra,pm,mm,gm,new je));const O={a:y,b,c:M,normal:new he,materialIndex:0};tr.getNormal(ta,na,ra,O.normal),I.face=O}return I}class mo extends St{constructor(e=1,t=1,r=1,o=1,l=1,c=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:l,depthSegments:c};const h=this;o=Math.floor(o),l=Math.floor(l),c=Math.floor(c);const m=[],y=[],b=[],M=[];let C=0,I=0;O("z","y","x",-1,-1,r,t,e,c,l,0),O("z","y","x",1,-1,r,t,-e,c,l,1),O("x","z","y",1,1,e,r,t,o,c,2),O("x","z","y",1,-1,e,r,-t,o,c,3),O("x","y","z",1,-1,e,t,r,o,l,4),O("x","y","z",-1,-1,e,t,-r,o,l,5),this.setIndex(m),this.setAttribute("position",new vt(y,3)),this.setAttribute("normal",new vt(b,3)),this.setAttribute("uv",new vt(M,2));function O(U,H,P,A,F,L,B,z,q,Z,ae){const ce=L/q,ee=B/Z,ue=L/2,le=B/2,w=z/2,p=q+1,J=Z+1;let E=0,ge=0;const ke=new he;for(let Se=0;Se<J;Se++){const de=Se*ee-le;for(let ye=0;ye<p;ye++){const Re=ye*ce-ue;ke[U]=Re*A,ke[H]=de*F,ke[P]=w,y.push(ke.x,ke.y,ke.z),ke[U]=0,ke[H]=0,ke[P]=z>0?1:-1,b.push(ke.x,ke.y,ke.z),M.push(ye/q),M.push(1-Se/Z),E+=1}}for(let Se=0;Se<Z;Se++)for(let de=0;de<q;de++){const ye=C+de+p*Se,Re=C+de+p*(Se+1),we=C+(de+1)+p*(Se+1),be=C+(de+1)+p*Se;m.push(ye,Re,be),m.push(Re,we,be),ge+=6}h.addGroup(I,ge,ae),I+=ge,C+=E}}static fromJSON(e){return new mo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qu(s){const e={};for(const t in s){e[t]={};for(const r in s[t]){const o=s[t][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?e[t][r]=o.clone():Array.isArray(o)?e[t][r]=o.slice():e[t][r]=o}}return e}function Kr(s){const e={};for(let t=0;t<s.length;t++){const r=Qu(s[t]);for(const o in r)e[o]=r[o]}return e}const Zy={clone:Qu,merge:Kr};var tk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ps extends nr{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=tk,this.fragmentShader=nk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const c=this.uniforms[o].value;c&&c.isTexture?t.uniforms[o]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[o]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[o]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[o]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[o]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[o]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[o]={type:"m4",value:c.toArray()}:t.uniforms[o]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Ps.prototype.isShaderMaterial=!0;class vh extends Wt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Je,this.projectionMatrix=new Je,this.projectionMatrixInverse=new Je}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}vh.prototype.isCamera=!0;class hr extends vh{constructor(e=50,t=1,r=.1,o=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ch*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ch*2*Math.atan(Math.tan(hl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,l,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hl*.5*this.fov)/this.zoom,r=2*t,o=this.aspect*r,l=-.5*o;const c=this.view;if(this.view!==null&&this.view.enabled){const m=c.fullWidth,y=c.fullHeight;l+=c.offsetX*o/m,t-=c.offsetY*r/y,o*=c.width/m,r*=c.height/y}const h=this.filmOffset;h!==0&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}hr.prototype.isPerspectiveCamera=!0;const Ju=90,ec=1;class xm extends Wt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const o=new hr(Ju,ec,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new he(1,0,0)),this.add(o);const l=new hr(Ju,ec,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new he(-1,0,0)),this.add(l);const c=new hr(Ju,ec,e,t);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(new he(0,1,0)),this.add(c);const h=new hr(Ju,ec,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new he(0,-1,0)),this.add(h);const m=new hr(Ju,ec,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new he(0,0,1)),this.add(m);const y=new hr(Ju,ec,e,t);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new he(0,0,-1)),this.add(y)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[o,l,c,h,m,y]=this.children,b=e.xr.enabled,M=e.getRenderTarget();e.xr.enabled=!1;const C=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,l),e.setRenderTarget(r,2),e.render(t,c),e.setRenderTarget(r,3),e.render(t,h),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=C,e.setRenderTarget(r,5),e.render(t,y),e.setRenderTarget(M),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class tc extends Dn{constructor(e,t,r,o,l,c,h,m,y,b){e=e!==void 0?e:[],t=t!==void 0?t:rl;super(e,t,r,o,l,c,h,m,y,b);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}tc.prototype.isCubeTexture=!0;class _m extends Di{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new tc(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Er,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new mo(5,5,5),l=new Ps({name:"CubemapFromEquirect",uniforms:Qu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:$n,blending:ro});l.uniforms.tEquirect.value=t;const c=new Nn(o,l),h=t.minFilter;return t.minFilter===so&&(t.minFilter=Rn),new xm(1,10,this).update(e,c),t.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,r,o){const l=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,r,o);e.setRenderTarget(l)}}_m.prototype.isWebGLCubeRenderTarget=!0;const Qy=new he,rk=new he,ik=new gn;class ks{constructor(e=new he(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=Qy.subVectors(r,t).cross(rk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Qy),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(r).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||ik.getNormalMatrix(e),o=this.coplanarPoint(Qy).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}ks.prototype.isPlane=!0;const nc=new uo,wm=new he;class yh{constructor(e=new ks,t=new ks,r=new ks,o=new ks,l=new ks,c=new ks){this.planes=[e,t,r,o,l,c]}set(e,t,r,o,l,c){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(r),h[3].copy(o),h[4].copy(l),h[5].copy(c),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],l=r[1],c=r[2],h=r[3],m=r[4],y=r[5],b=r[6],M=r[7],C=r[8],I=r[9],O=r[10],U=r[11],H=r[12],P=r[13],A=r[14],F=r[15];return t[0].setComponents(h-o,M-m,U-C,F-H).normalize(),t[1].setComponents(h+o,M+m,U+C,F+H).normalize(),t[2].setComponents(h+l,M+y,U+I,F+P).normalize(),t[3].setComponents(h-l,M-y,U-I,F-P).normalize(),t[4].setComponents(h-c,M-b,U-O,F-A).normalize(),t[5].setComponents(h+c,M+b,U+O,F+A).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSprite(e){return nc.center.set(0,0,0),nc.radius=.7071067811865476,nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(wm.x=o.normal.x>0?e.max.x:e.min.x,wm.y=o.normal.y>0?e.max.y:e.min.y,wm.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(wm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function tT(){let s=null,e=!1,t=null,r=null;function o(l,c){t(l,c),r=s.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(r=s.requestAnimationFrame(o),e=!0)},stop:function(){s.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){s=l}}}function sk(s,e){const t=e.isWebGL2,r=new WeakMap;function o(y,b){const M=y.array,C=y.usage,I=s.createBuffer();s.bindBuffer(b,I),s.bufferData(b,M,C),y.onUploadCallback();let O=5126;return M instanceof Float32Array?O=5126:M instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):M instanceof Uint16Array?y.isFloat16BufferAttribute?t?O=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):O=5123:M instanceof Int16Array?O=5122:M instanceof Uint32Array?O=5125:M instanceof Int32Array?O=5124:M instanceof Int8Array?O=5120:(M instanceof Uint8Array||M instanceof Uint8ClampedArray)&&(O=5121),{buffer:I,type:O,bytesPerElement:M.BYTES_PER_ELEMENT,version:y.version}}function l(y,b,M){const C=b.array,I=b.updateRange;s.bindBuffer(M,y),I.count===-1?s.bufferSubData(M,0,C):(t?s.bufferSubData(M,I.offset*C.BYTES_PER_ELEMENT,C,I.offset,I.count):s.bufferSubData(M,I.offset*C.BYTES_PER_ELEMENT,C.subarray(I.offset,I.offset+I.count)),I.count=-1)}function c(y){return y.isInterleavedBufferAttribute&&(y=y.data),r.get(y)}function h(y){y.isInterleavedBufferAttribute&&(y=y.data);const b=r.get(y);b&&(s.deleteBuffer(b.buffer),r.delete(y))}function m(y,b){if(y.isGLBufferAttribute){const C=r.get(y);(!C||C.version<y.version)&&r.set(y,{buffer:y.buffer,type:y.type,bytesPerElement:y.elementSize,version:y.version});return}y.isInterleavedBufferAttribute&&(y=y.data);const M=r.get(y);M===void 0?r.set(y,o(y,b)):M.version<y.version&&(l(M.buffer,y,b),M.version=y.version)}return{get:c,remove:h,update:m}}class gl extends St{constructor(e=1,t=1,r=1,o=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const l=e/2,c=t/2,h=Math.floor(r),m=Math.floor(o),y=h+1,b=m+1,M=e/h,C=t/m,I=[],O=[],U=[],H=[];for(let P=0;P<b;P++){const A=P*C-c;for(let F=0;F<y;F++){const L=F*M-l;O.push(L,-A,0),U.push(0,0,1),H.push(F/h),H.push(1-P/m)}}for(let P=0;P<m;P++)for(let A=0;A<h;A++){const F=A+y*P,L=A+y*(P+1),B=A+1+y*(P+1),z=A+1+y*P;I.push(F,L,z),I.push(L,B,z)}this.setIndex(I),this.setAttribute("position",new vt(O,3)),this.setAttribute("normal",new vt(U,3)),this.setAttribute("uv",new vt(H,2))}static fromJSON(e){return new gl(e.width,e.height,e.widthSegments,e.heightSegments)}}var ok=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ak=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lk=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,uk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ck=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,hk="vec3 transformed = vec3( position );",dk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,pk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,mk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,vk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,yk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,xk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,_k=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,wk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Sk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Mk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Tk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		return texture2D( envMap, uv ).rgb;
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ek=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ak=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ck=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Rk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Lk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ik="gl_FragColor = linearToOutputTexel( gl_FragColor );",Pk=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,kk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ok=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Fk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Bk=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Uk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zk=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Hk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Gk=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Vk=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Wk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$k=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,jk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,qk=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Xk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Yk=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Kk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Zk=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Qk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Jk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eO=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,rO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,oO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,aO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,uO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,pO=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,mO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,gO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,vO=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_O=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wO=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,bO=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,SO=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,MO=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,TO=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,EO=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,AO=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,CO=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,RO=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,LO=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,IO=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PO=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,OO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,NO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,BO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,UO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VO=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WO=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$O=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,jO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,qO=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,XO=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,YO=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,KO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,ZO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,QO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,JO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const eD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tD=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rD=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,iD=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,oD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,aD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hD=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pD=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mD=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vD=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xD=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,_D=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wD=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bD=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,SD=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MD=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TD=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ED=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,AD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CD=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RD=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,LD=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ID=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Qt={alphamap_fragment:ok,alphamap_pars_fragment:ak,alphatest_fragment:lk,alphatest_pars_fragment:uk,aomap_fragment:ck,aomap_pars_fragment:fk,begin_vertex:hk,beginnormal_vertex:dk,bsdfs:pk,bumpmap_pars_fragment:mk,clipping_planes_fragment:gk,clipping_planes_pars_fragment:vk,clipping_planes_pars_vertex:yk,clipping_planes_vertex:xk,color_fragment:_k,color_pars_fragment:wk,color_pars_vertex:bk,color_vertex:Sk,common:Mk,cube_uv_reflection_fragment:Tk,defaultnormal_vertex:Ek,displacementmap_pars_vertex:Ak,displacementmap_vertex:Ck,emissivemap_fragment:Rk,emissivemap_pars_fragment:Lk,encodings_fragment:Ik,encodings_pars_fragment:Pk,envmap_fragment:kk,envmap_common_pars_fragment:Ok,envmap_pars_fragment:Dk,envmap_pars_vertex:Nk,envmap_physical_pars_fragment:qk,envmap_vertex:Fk,fog_vertex:Bk,fog_pars_vertex:Uk,fog_fragment:zk,fog_pars_fragment:Hk,gradientmap_pars_fragment:Gk,lightmap_fragment:Vk,lightmap_pars_fragment:Wk,lights_lambert_vertex:$k,lights_pars_begin:jk,lights_toon_fragment:Xk,lights_toon_pars_fragment:Yk,lights_phong_fragment:Kk,lights_phong_pars_fragment:Zk,lights_physical_fragment:Qk,lights_physical_pars_fragment:Jk,lights_fragment_begin:eO,lights_fragment_maps:tO,lights_fragment_end:nO,logdepthbuf_fragment:rO,logdepthbuf_pars_fragment:iO,logdepthbuf_pars_vertex:sO,logdepthbuf_vertex:oO,map_fragment:aO,map_pars_fragment:lO,map_particle_fragment:uO,map_particle_pars_fragment:cO,metalnessmap_fragment:fO,metalnessmap_pars_fragment:hO,morphnormal_vertex:dO,morphtarget_pars_vertex:pO,morphtarget_vertex:mO,normal_fragment_begin:gO,normal_fragment_maps:vO,normal_pars_fragment:yO,normal_pars_vertex:xO,normal_vertex:_O,normalmap_pars_fragment:wO,clearcoat_normal_fragment_begin:bO,clearcoat_normal_fragment_maps:SO,clearcoat_pars_fragment:MO,output_fragment:TO,packing:EO,premultiplied_alpha_fragment:AO,project_vertex:CO,dithering_fragment:RO,dithering_pars_fragment:LO,roughnessmap_fragment:IO,roughnessmap_pars_fragment:PO,shadowmap_pars_fragment:kO,shadowmap_pars_vertex:OO,shadowmap_vertex:DO,shadowmask_pars_fragment:NO,skinbase_vertex:FO,skinning_pars_vertex:BO,skinning_vertex:UO,skinnormal_vertex:zO,specularmap_fragment:HO,specularmap_pars_fragment:GO,tonemapping_fragment:VO,tonemapping_pars_fragment:WO,transmission_fragment:$O,transmission_pars_fragment:jO,uv_pars_fragment:qO,uv_pars_vertex:XO,uv_vertex:YO,uv2_pars_fragment:KO,uv2_pars_vertex:ZO,uv2_vertex:QO,worldpos_vertex:JO,background_vert:eD,background_frag:tD,cube_vert:nD,cube_frag:rD,depth_vert:iD,depth_frag:sD,distanceRGBA_vert:oD,distanceRGBA_frag:aD,equirect_vert:lD,equirect_frag:uD,linedashed_vert:cD,linedashed_frag:fD,meshbasic_vert:hD,meshbasic_frag:dD,meshlambert_vert:pD,meshlambert_frag:mD,meshmatcap_vert:gD,meshmatcap_frag:vD,meshnormal_vert:yD,meshnormal_frag:xD,meshphong_vert:_D,meshphong_frag:wD,meshphysical_vert:bD,meshphysical_frag:SD,meshtoon_vert:MD,meshtoon_frag:TD,points_vert:ED,points_frag:AD,shadow_vert:CD,shadow_frag:RD,sprite_vert:LD,sprite_frag:ID},ot={common:{diffuse:{value:new Ze(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gn},uv2Transform:{value:new gn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new Ze(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gn}}},gs={basic:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Qt.meshbasic_vert,fragmentShader:Qt.meshbasic_frag},lambert:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.fog,ot.lights,{emissive:{value:new Ze(0)}}]),vertexShader:Qt.meshlambert_vert,fragmentShader:Qt.meshlambert_frag},phong:{uniforms:Kr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Ze(0)},specular:{value:new Ze(1118481)},shininess:{value:30}}]),vertexShader:Qt.meshphong_vert,fragmentShader:Qt.meshphong_frag},standard:{uniforms:Kr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},toon:{uniforms:Kr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Ze(0)}}]),vertexShader:Qt.meshtoon_vert,fragmentShader:Qt.meshtoon_frag},matcap:{uniforms:Kr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Qt.meshmatcap_vert,fragmentShader:Qt.meshmatcap_frag},points:{uniforms:Kr([ot.points,ot.fog]),vertexShader:Qt.points_vert,fragmentShader:Qt.points_frag},dashed:{uniforms:Kr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qt.linedashed_vert,fragmentShader:Qt.linedashed_frag},depth:{uniforms:Kr([ot.common,ot.displacementmap]),vertexShader:Qt.depth_vert,fragmentShader:Qt.depth_frag},normal:{uniforms:Kr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Qt.meshnormal_vert,fragmentShader:Qt.meshnormal_frag},sprite:{uniforms:Kr([ot.sprite,ot.fog]),vertexShader:Qt.sprite_vert,fragmentShader:Qt.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null}},vertexShader:Qt.background_vert,fragmentShader:Qt.background_frag},cube:{uniforms:Kr([ot.envmap,{opacity:{value:1}}]),vertexShader:Qt.cube_vert,fragmentShader:Qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qt.equirect_vert,fragmentShader:Qt.equirect_frag},distanceRGBA:{uniforms:Kr([ot.common,ot.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qt.distanceRGBA_vert,fragmentShader:Qt.distanceRGBA_frag},shadow:{uniforms:Kr([ot.lights,ot.fog,{color:{value:new Ze(0)},opacity:{value:1}}]),vertexShader:Qt.shadow_vert,fragmentShader:Qt.shadow_frag}};gs.physical={uniforms:Kr([gs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new je(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ze(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ze(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ze(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag};function PD(s,e,t,r,o,l){const c=new Ze(0);let h=o===!0?0:1,m,y,b=null,M=0,C=null;function I(U,H){let P=!1,A=H.isScene===!0?H.background:null;A&&A.isTexture&&(A=e.get(A));const F=s.xr,L=F.getSession&&F.getSession();L&&L.environmentBlendMode==="additive"&&(A=null),A===null?O(c,h):A&&A.isColor&&(O(A,1),P=!0),(s.autoClear||P)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),A&&(A.isCubeTexture||A.mapping===Du)?(y===void 0&&(y=new Nn(new mo(1,1,1),new Ps({name:"BackgroundCubeMaterial",uniforms:Qu(gs.cube.uniforms),vertexShader:gs.cube.vertexShader,fragmentShader:gs.cube.fragmentShader,side:$n,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(B,z,q){this.matrixWorld.copyPosition(q.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(y)),y.material.uniforms.envMap.value=A,y.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,(b!==A||M!==A.version||C!==s.toneMapping)&&(y.material.needsUpdate=!0,b=A,M=A.version,C=s.toneMapping),U.unshift(y,y.geometry,y.material,0,0,null)):A&&A.isTexture&&(m===void 0&&(m=new Nn(new gl(2,2),new Ps({name:"BackgroundMaterial",uniforms:Qu(gs.background.uniforms),vertexShader:gs.background.vertexShader,fragmentShader:gs.background.fragmentShader,side:jo,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=A,A.matrixAutoUpdate===!0&&A.updateMatrix(),m.material.uniforms.uvTransform.value.copy(A.matrix),(b!==A||M!==A.version||C!==s.toneMapping)&&(m.material.needsUpdate=!0,b=A,M=A.version,C=s.toneMapping),U.unshift(m,m.geometry,m.material,0,0,null))}function O(U,H){t.buffers.color.setClear(U.r,U.g,U.b,H,l)}return{getClearColor:function(){return c},setClearColor:function(U,H=1){c.set(U),h=H,O(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(U){h=U,O(c,h)},render:I}}function kD(s,e,t,r){const o=s.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),c=r.isWebGL2||l!==null,h={},m=U(null);let y=m;function b(le,w,p,J,E){let ge=!1;if(c){const ke=O(J,p,w);y!==ke&&(y=ke,C(y.object)),ge=H(J,E),ge&&P(J,E)}else{const ke=w.wireframe===!0;(y.geometry!==J.id||y.program!==p.id||y.wireframe!==ke)&&(y.geometry=J.id,y.program=p.id,y.wireframe=ke,ge=!0)}le.isInstancedMesh===!0&&(ge=!0),E!==null&&t.update(E,34963),ge&&(q(le,w,p,J),E!==null&&s.bindBuffer(34963,t.get(E).buffer))}function M(){return r.isWebGL2?s.createVertexArray():l.createVertexArrayOES()}function C(le){return r.isWebGL2?s.bindVertexArray(le):l.bindVertexArrayOES(le)}function I(le){return r.isWebGL2?s.deleteVertexArray(le):l.deleteVertexArrayOES(le)}function O(le,w,p){const J=p.wireframe===!0;let E=h[le.id];E===void 0&&(E={},h[le.id]=E);let ge=E[w.id];ge===void 0&&(ge={},E[w.id]=ge);let ke=ge[J];return ke===void 0&&(ke=U(M()),ge[J]=ke),ke}function U(le){const w=[],p=[],J=[];for(let E=0;E<o;E++)w[E]=0,p[E]=0,J[E]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:w,enabledAttributes:p,attributeDivisors:J,object:le,attributes:{},index:null}}function H(le,w){const p=y.attributes,J=le.attributes;let E=0;for(const ge in J){const ke=p[ge],Se=J[ge];if(ke===void 0||ke.attribute!==Se||ke.data!==Se.data)return!0;E++}return y.attributesNum!==E||y.index!==w}function P(le,w){const p={},J=le.attributes;let E=0;for(const ge in J){const ke=J[ge],Se={};Se.attribute=ke,ke.data&&(Se.data=ke.data),p[ge]=Se,E++}y.attributes=p,y.attributesNum=E,y.index=w}function A(){const le=y.newAttributes;for(let w=0,p=le.length;w<p;w++)le[w]=0}function F(le){L(le,0)}function L(le,w){const p=y.newAttributes,J=y.enabledAttributes,E=y.attributeDivisors;p[le]=1,J[le]===0&&(s.enableVertexAttribArray(le),J[le]=1),E[le]!==w&&((r.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](le,w),E[le]=w)}function B(){const le=y.newAttributes,w=y.enabledAttributes;for(let p=0,J=w.length;p<J;p++)w[p]!==le[p]&&(s.disableVertexAttribArray(p),w[p]=0)}function z(le,w,p,J,E,ge){r.isWebGL2===!0&&(p===5124||p===5125)?s.vertexAttribIPointer(le,w,p,E,ge):s.vertexAttribPointer(le,w,p,J,E,ge)}function q(le,w,p,J){if(r.isWebGL2===!1&&(le.isInstancedMesh||J.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const E=J.attributes,ge=p.getAttributes(),ke=w.defaultAttributeValues;for(const Se in ge){const de=ge[Se];if(de.location>=0){let ye=E[Se];if(ye===void 0&&(Se==="instanceMatrix"&&le.instanceMatrix&&(ye=le.instanceMatrix),Se==="instanceColor"&&le.instanceColor&&(ye=le.instanceColor)),ye!==void 0){const Re=ye.normalized,we=ye.itemSize,be=t.get(ye);if(be===void 0)continue;const Ue=be.buffer,Ce=be.type,$e=be.bytesPerElement;if(ye.isInterleavedBufferAttribute){const ze=ye.data,W=ze.stride,Ve=ye.offset;if(ze&&ze.isInstancedInterleavedBuffer){for(let Le=0;Le<de.locationSize;Le++)L(de.location+Le,ze.meshPerAttribute);le.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let Le=0;Le<de.locationSize;Le++)F(de.location+Le);s.bindBuffer(34962,Ue);for(let Le=0;Le<de.locationSize;Le++)z(de.location+Le,we/de.locationSize,Ce,Re,W*$e,(Ve+we/de.locationSize*Le)*$e)}else{if(ye.isInstancedBufferAttribute){for(let ze=0;ze<de.locationSize;ze++)L(de.location+ze,ye.meshPerAttribute);le.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let ze=0;ze<de.locationSize;ze++)F(de.location+ze);s.bindBuffer(34962,Ue);for(let ze=0;ze<de.locationSize;ze++)z(de.location+ze,we/de.locationSize,Ce,Re,we*$e,we/de.locationSize*ze*$e)}}else if(ke!==void 0){const Re=ke[Se];if(Re!==void 0)switch(Re.length){case 2:s.vertexAttrib2fv(de.location,Re);break;case 3:s.vertexAttrib3fv(de.location,Re);break;case 4:s.vertexAttrib4fv(de.location,Re);break;default:s.vertexAttrib1fv(de.location,Re)}}}}B()}function Z(){ee();for(const le in h){const w=h[le];for(const p in w){const J=w[p];for(const E in J)I(J[E].object),delete J[E];delete w[p]}delete h[le]}}function ae(le){if(h[le.id]===void 0)return;const w=h[le.id];for(const p in w){const J=w[p];for(const E in J)I(J[E].object),delete J[E];delete w[p]}delete h[le.id]}function ce(le){for(const w in h){const p=h[w];if(p[le.id]===void 0)continue;const J=p[le.id];for(const E in J)I(J[E].object),delete J[E];delete p[le.id]}}function ee(){ue(),y!==m&&(y=m,C(y.object))}function ue(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:b,reset:ee,resetDefaultState:ue,dispose:Z,releaseStatesOfGeometry:ae,releaseStatesOfProgram:ce,initAttributes:A,enableAttribute:F,disableUnusedAttributes:B}}function OD(s,e,t,r){const o=r.isWebGL2;let l;function c(y){l=y}function h(y,b){s.drawArrays(l,y,b),t.update(b,l,1)}function m(y,b,M){if(M===0)return;let C,I;if(o)C=s,I="drawArraysInstanced";else if(C=e.get("ANGLE_instanced_arrays"),I="drawArraysInstancedANGLE",C===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}C[I](l,y,b,M),t.update(b,l,M)}this.setMode=c,this.render=h,this.renderInstances=m}function DD(s,e,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const q=e.get("EXT_texture_filter_anisotropic");r=s.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(q){if(q==="highp"){if(s.getShaderPrecisionFormat(35633,36338).precision>0&&s.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";q="mediump"}return q==="mediump"&&s.getShaderPrecisionFormat(35633,36337).precision>0&&s.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext!="undefined"&&s instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&s instanceof WebGL2ComputeRenderingContext;let h=t.precision!==void 0?t.precision:"highp";const m=l(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const y=c||e.has("WEBGL_draw_buffers"),b=t.logarithmicDepthBuffer===!0,M=s.getParameter(34930),C=s.getParameter(35660),I=s.getParameter(3379),O=s.getParameter(34076),U=s.getParameter(34921),H=s.getParameter(36347),P=s.getParameter(36348),A=s.getParameter(36349),F=C>0,L=c||e.has("OES_texture_float"),B=F&&L,z=c?s.getParameter(36183):0;return{isWebGL2:c,drawBuffers:y,getMaxAnisotropy:o,getMaxPrecision:l,precision:h,logarithmicDepthBuffer:b,maxTextures:M,maxVertexTextures:C,maxTextureSize:I,maxCubemapSize:O,maxAttributes:U,maxVertexUniforms:H,maxVaryings:P,maxFragmentUniforms:A,vertexTextures:F,floatFragmentTextures:L,floatVertexTextures:B,maxSamples:z}}function ND(s){const e=this;let t=null,r=0,o=!1,l=!1;const c=new ks,h=new gn,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(M,C,I){const O=M.length!==0||C||r!==0||o;return o=C,t=b(M,I,0),r=M.length,O},this.beginShadows=function(){l=!0,b(null)},this.endShadows=function(){l=!1,y()},this.setState=function(M,C,I){const O=M.clippingPlanes,U=M.clipIntersection,H=M.clipShadows,P=s.get(M);if(!o||O===null||O.length===0||l&&!H)l?b(null):y();else{const A=l?0:r,F=A*4;let L=P.clippingState||null;m.value=L,L=b(O,C,F,I);for(let B=0;B!==F;++B)L[B]=t[B];P.clippingState=L,this.numIntersection=U?this.numPlanes:0,this.numPlanes+=A}};function y(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function b(M,C,I,O){const U=M!==null?M.length:0;let H=null;if(U!==0){if(H=m.value,O!==!0||H===null){const P=I+U*4,A=C.matrixWorldInverse;h.getNormalMatrix(A),(H===null||H.length<P)&&(H=new Float32Array(P));for(let F=0,L=I;F!==U;++F,L+=4)c.copy(M[F]).applyMatrix4(A,h),c.normal.toArray(H,L),H[L+3]=c.constant}m.value=H,m.needsUpdate=!0}return e.numPlanes=U,e.numIntersection=0,H}}function FD(s){let e=new WeakMap;function t(c,h){return h===Ou?c.mapping=rl:h===ih&&(c.mapping=il),c}function r(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){const h=c.mapping;if(h===Ou||h===ih)if(e.has(c)){const m=e.get(c).texture;return t(m,c.mapping)}else{const m=c.image;if(m&&m.height>0){const y=new _m(m.height/2);return y.fromEquirectangularTexture(s,c),e.set(c,y),c.addEventListener("dispose",o),t(y.texture,c.mapping)}else return null}}return c}function o(c){const h=c.target;h.removeEventListener("dispose",o);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function l(){e=new WeakMap}return{get:r,dispose:l}}class vl extends vh{constructor(e=-1,t=1,r=1,o=-1,l=.1,c=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=r-e,c=r+e,h=o+t,m=o-t;if(this.view!==null&&this.view.enabled){const y=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=y*this.view.offsetX,c=l+y*this.view.width,h-=b*this.view.offsetY,m=h-b*this.view.height}this.projectionMatrix.makeOrthographic(l,c,h,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}vl.prototype.isOrthographicCamera=!0;class rc extends Ps{constructor(e){super(e);this.type="RawShaderMaterial"}}rc.prototype.isRawShaderMaterial=!0;const ic=4,ia=8,Os=Math.pow(2,ia),nT=[.125,.215,.35,.446,.526,.582],rT=ia-ic+1+nT.length,sc=20,Jy=new vl,{_lodPlanes:xh,_sizeLods:iT,_sigmas:bm}=BD(),sT=new Ze;let ex=null;const yl=(1+Math.sqrt(5))/2,oc=1/yl,oT=[new he(1,1,1),new he(-1,1,1),new he(1,1,-1),new he(-1,1,-1),new he(0,yl,oc),new he(0,yl,-oc),new he(oc,0,yl),new he(-oc,0,yl),new he(yl,oc,0),new he(-yl,oc,0)];class tx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=UD(sc),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){ex=this._renderer.getRenderTarget();const l=this._allocateTargets();return this._sceneToCubeUV(e,r,o,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=uT(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=lT(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<xh.length;e++)xh[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ex),e.scissorTest=!1,Sm(e,0,0,e.width,e.height)}_fromTexture(e,t){ex=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:Rn,minFilter:Rn,generateMipmaps:!1,type:sl,format:Er,encoding:ki,depthBuffer:!1},r=aT(t);return r.depthBuffer=!e,this._pingPongRenderTarget===null&&(this._pingPongRenderTarget=aT(t)),r}_compileMaterial(e){const t=new Nn(xh[0],e);this._renderer.compile(t,Jy)}_sceneToCubeUV(e,t,r,o){const l=90,c=1,h=new hr(l,c,t,r),m=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],b=this._renderer,M=b.autoClear,C=b.toneMapping;b.getClearColor(sT),b.toneMapping=io,b.autoClear=!1;const I=new Yr({name:"PMREM.Background",side:$n,depthWrite:!1,depthTest:!1}),O=new Nn(new mo,I);let U=!1;const H=e.background;H?H.isColor&&(I.color.copy(H),e.background=null,U=!0):(I.color.copy(sT),U=!0);for(let P=0;P<6;P++){const A=P%3;A===0?(h.up.set(0,m[P],0),h.lookAt(y[P],0,0)):A===1?(h.up.set(0,0,m[P]),h.lookAt(0,y[P],0)):(h.up.set(0,m[P],0),h.lookAt(0,0,y[P])),Sm(o,A*Os,P>2?Os:0,Os,Os),b.setRenderTarget(o),U&&b.render(O,h),b.render(e,h)}O.geometry.dispose(),O.material.dispose(),b.toneMapping=C,b.autoClear=M,e.background=H}_textureToCubeUV(e,t){const r=this._renderer,o=e.mapping===rl||e.mapping===il;o?(this._cubemapShader===null&&(this._cubemapShader=uT()),this._cubemapShader.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectShader===null&&(this._equirectShader=lT());const l=o?this._cubemapShader:this._equirectShader,c=new Nn(xh[0],l),h=l.uniforms;h.envMap.value=e,o||h.texelSize.value.set(1/e.image.width,1/e.image.height),Sm(t,0,0,3*Os,2*Os),r.setRenderTarget(t),r.render(c,Jy)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<rT;o++){const l=Math.sqrt(bm[o]*bm[o]-bm[o-1]*bm[o-1]),c=oT[(o-1)%oT.length];this._blur(e,o-1,o,l,c)}t.autoClear=r}_blur(e,t,r,o,l){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,r,o,"latitudinal",l),this._halfBlur(c,e,r,r,o,"longitudinal",l)}_halfBlur(e,t,r,o,l,c,h){const m=this._renderer,y=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const b=3,M=new Nn(xh[o],y),C=y.uniforms,I=iT[r]-1,O=isFinite(l)?Math.PI/(2*I):2*Math.PI/(2*sc-1),U=l/O,H=isFinite(l)?1+Math.floor(b*U):sc;H>sc&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${H} samples when the maximum is set to ${sc}`);const P=[];let A=0;for(let z=0;z<sc;++z){const q=z/U,Z=Math.exp(-q*q/2);P.push(Z),z===0?A+=Z:z<H&&(A+=2*Z)}for(let z=0;z<P.length;z++)P[z]=P[z]/A;C.envMap.value=e.texture,C.samples.value=H,C.weights.value=P,C.latitudinal.value=c==="latitudinal",h&&(C.poleAxis.value=h),C.dTheta.value=O,C.mipInt.value=ia-r;const F=iT[o],L=3*Math.max(0,Os-2*F),B=(o===0?0:2*Os)+2*F*(o>ia-ic?o-ia+ic:0);Sm(t,L,B,3*F,2*F),m.setRenderTarget(t),m.render(M,Jy)}}function BD(){const s=[],e=[],t=[];let r=ia;for(let o=0;o<rT;o++){const l=Math.pow(2,r);e.push(l);let c=1/l;o>ia-ic?c=nT[o-ia+ic-1]:o===0&&(c=0),t.push(c);const h=1/(l-1),m=-h/2,y=1+h/2,b=[m,m,y,m,y,y,m,m,y,y,m,y],M=6,C=6,I=3,O=2,U=1,H=new Float32Array(I*C*M),P=new Float32Array(O*C*M),A=new Float32Array(U*C*M);for(let L=0;L<M;L++){const B=L%3*2/3-1,z=L>2?0:-1,q=[B,z,0,B+2/3,z,0,B+2/3,z+1,0,B,z,0,B+2/3,z+1,0,B,z+1,0];H.set(q,I*C*L),P.set(b,O*C*L);const Z=[L,L,L,L,L,L];A.set(Z,U*C*L)}const F=new St;F.setAttribute("position",new Dt(H,I)),F.setAttribute("uv",new Dt(P,O)),F.setAttribute("faceIndex",new Dt(A,U)),s.push(F),r>ic&&r--}return{_lodPlanes:s,_sizeLods:e,_sigmas:t}}function aT(s){const e=new Di(3*Os,3*Os,s);return e.texture.mapping=Du,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Sm(s,e,t,r,o){s.viewport.set(e,t,r,o),s.scissor.set(e,t,r,o)}function UD(s){const e=new Float32Array(s),t=new he(0,1,0);return new rc({name:"SphericalGaussianBlur",defines:{n:s},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:nx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function lT(){const s=new je(1,1);return new rc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:s}},vertexShader:nx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = texture2D ( envMap, uv ).rgb;
				uv.x += texelSize.x;
				vec3 tr = texture2D ( envMap, uv ).rgb;
				uv.y += texelSize.y;
				vec3 br = texture2D ( envMap, uv ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = texture2D ( envMap, uv ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function uT(){return new rc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ro,depthTest:!1,depthWrite:!1})}function nx(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zD(s){let e=new WeakMap,t=null;function r(h){if(h&&h.isTexture){const m=h.mapping,y=m===Ou||m===ih,b=m===rl||m===il;if(y||b)if(h.isRenderTargetTexture&&h.needsPMREMUpdate===!0){h.needsPMREMUpdate=!1;let M=e.get(h);return t===null&&(t=new tx(s)),M=y?t.fromEquirectangular(h,M):t.fromCubemap(h,M),e.set(h,M),M.texture}else{if(e.has(h))return e.get(h).texture;{const M=h.image;if(y&&M&&M.height>0||b&&M&&o(M)){t===null&&(t=new tx(s));const C=y?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,C),h.addEventListener("dispose",l),C.texture}else return null}}}return h}function o(h){let m=0;const y=6;for(let b=0;b<y;b++)h[b]!==void 0&&m++;return m===y}function l(h){const m=h.target;m.removeEventListener("dispose",l);const y=e.get(m);y!==void 0&&(e.delete(m),y.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:c}}function HD(s){const e={};function t(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=s.getExtension(r)}return e[r]=o,o}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function GD(s,e,t,r){const o={},l=new WeakMap;function c(M){const C=M.target;C.index!==null&&e.remove(C.index);for(const O in C.attributes)e.remove(C.attributes[O]);C.removeEventListener("dispose",c),delete o[C.id];const I=l.get(C);I&&(e.remove(I),l.delete(C)),r.releaseStatesOfGeometry(C),C.isInstancedBufferGeometry===!0&&delete C._maxInstanceCount,t.memory.geometries--}function h(M,C){return o[C.id]===!0||(C.addEventListener("dispose",c),o[C.id]=!0,t.memory.geometries++),C}function m(M){const C=M.attributes;for(const O in C)e.update(C[O],34962);const I=M.morphAttributes;for(const O in I){const U=I[O];for(let H=0,P=U.length;H<P;H++)e.update(U[H],34962)}}function y(M){const C=[],I=M.index,O=M.attributes.position;let U=0;if(I!==null){const A=I.array;U=I.version;for(let F=0,L=A.length;F<L;F+=3){const B=A[F+0],z=A[F+1],q=A[F+2];C.push(B,z,z,q,q,B)}}else{const A=O.array;U=O.version;for(let F=0,L=A.length/3-1;F<L;F+=3){const B=F+0,z=F+1,q=F+2;C.push(B,z,z,q,q,B)}}const H=new(OM(C)?cm:mh)(C,1);H.version=U;const P=l.get(M);P&&e.remove(P),l.set(M,H)}function b(M){const C=l.get(M);if(C){const I=M.index;I!==null&&C.version<I.version&&y(M)}else y(M);return l.get(M)}return{get:h,update:m,getWireframeAttribute:b}}function VD(s,e,t,r){const o=r.isWebGL2;let l;function c(C){l=C}let h,m;function y(C){h=C.type,m=C.bytesPerElement}function b(C,I){s.drawElements(l,I,h,C*m),t.update(I,l,1)}function M(C,I,O){if(O===0)return;let U,H;if(o)U=s,H="drawElementsInstanced";else if(U=e.get("ANGLE_instanced_arrays"),H="drawElementsInstancedANGLE",U===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}U[H](l,I,h,C*m,O),t.update(I,l,O)}this.setMode=c,this.setIndex=y,this.render=b,this.renderInstances=M}function WD(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(l,c,h){switch(t.calls++,c){case 4:t.triangles+=h*(l/3);break;case 1:t.lines+=h*(l/2);break;case 3:t.lines+=h*(l-1);break;case 2:t.lines+=h*l;break;case 0:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:r}}class Mm extends Dn{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=jn,this.minFilter=jn,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Mm.prototype.isDataTexture2DArray=!0;function $D(s,e){return s[0]-e[0]}function jD(s,e){return Math.abs(e[1])-Math.abs(s[1])}function cT(s,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),s.divideScalar(t)}function qD(s,e,t){const r={},o=new Float32Array(8),l=new WeakMap,c=new he,h=[];for(let y=0;y<8;y++)h[y]=[y,0];function m(y,b,M,C){const I=y.morphTargetInfluences;if(e.isWebGL2===!0){const O=b.morphAttributes.position.length;let U=l.get(b);if(U===void 0||U.count!==O){let ue=function(){ce.dispose(),l.delete(b),b.removeEventListener("dispose",ue)};U!==void 0&&U.texture.dispose();const A=b.morphAttributes.normal!==void 0,F=b.morphAttributes.position,L=b.morphAttributes.normal||[],B=b.attributes.position.count,z=A===!0?2:1;let q=B*z,Z=1;q>e.maxTextureSize&&(Z=Math.ceil(q/e.maxTextureSize),q=e.maxTextureSize);const ae=new Float32Array(q*Z*4*O),ce=new Mm(ae,q,Z,O);ce.format=Er,ce.type=oo,ce.needsUpdate=!0;const ee=z*4;for(let le=0;le<O;le++){const w=F[le],p=L[le],J=q*Z*4*le;for(let E=0;E<w.count;E++){c.fromBufferAttribute(w,E),w.normalized===!0&&cT(c,w);const ge=E*ee;ae[J+ge+0]=c.x,ae[J+ge+1]=c.y,ae[J+ge+2]=c.z,ae[J+ge+3]=0,A===!0&&(c.fromBufferAttribute(p,E),p.normalized===!0&&cT(c,p),ae[J+ge+4]=c.x,ae[J+ge+5]=c.y,ae[J+ge+6]=c.z,ae[J+ge+7]=0)}}U={count:O,texture:ce,size:new je(q,Z)},l.set(b,U),b.addEventListener("dispose",ue)}let H=0;for(let A=0;A<I.length;A++)H+=I[A];const P=b.morphTargetsRelative?1:1-H;C.getUniforms().setValue(s,"morphTargetBaseInfluence",P),C.getUniforms().setValue(s,"morphTargetInfluences",I),C.getUniforms().setValue(s,"morphTargetsTexture",U.texture,t),C.getUniforms().setValue(s,"morphTargetsTextureSize",U.size)}else{const O=I===void 0?0:I.length;let U=r[b.id];if(U===void 0||U.length!==O){U=[];for(let L=0;L<O;L++)U[L]=[L,0];r[b.id]=U}for(let L=0;L<O;L++){const B=U[L];B[0]=L,B[1]=I[L]}U.sort(jD);for(let L=0;L<8;L++)L<O&&U[L][1]?(h[L][0]=U[L][0],h[L][1]=U[L][1]):(h[L][0]=Number.MAX_SAFE_INTEGER,h[L][1]=0);h.sort($D);const H=b.morphAttributes.position,P=b.morphAttributes.normal;let A=0;for(let L=0;L<8;L++){const B=h[L],z=B[0],q=B[1];z!==Number.MAX_SAFE_INTEGER&&q?(H&&b.getAttribute("morphTarget"+L)!==H[z]&&b.setAttribute("morphTarget"+L,H[z]),P&&b.getAttribute("morphNormal"+L)!==P[z]&&b.setAttribute("morphNormal"+L,P[z]),o[L]=q,A+=q):(H&&b.hasAttribute("morphTarget"+L)===!0&&b.deleteAttribute("morphTarget"+L),P&&b.hasAttribute("morphNormal"+L)===!0&&b.deleteAttribute("morphNormal"+L),o[L]=0)}const F=b.morphTargetsRelative?1:1-A;C.getUniforms().setValue(s,"morphTargetBaseInfluence",F),C.getUniforms().setValue(s,"morphTargetInfluences",o)}}return{update:m}}function XD(s,e,t,r){let o=new WeakMap;function l(m){const y=r.render.frame,b=m.geometry,M=e.get(m,b);return o.get(M)!==y&&(e.update(M),o.set(M,y)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),t.update(m.instanceMatrix,34962),m.instanceColor!==null&&t.update(m.instanceColor,34962)),M}function c(){o=new WeakMap}function h(m){const y=m.target;y.removeEventListener("dispose",h),t.remove(y.instanceMatrix),y.instanceColor!==null&&t.remove(y.instanceColor)}return{update:l,dispose:c}}class rx extends Dn{constructor(e=null,t=1,r=1,o=1){super(null);this.image={data:e,width:t,height:r,depth:o},this.magFilter=jn,this.minFilter=jn,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}rx.prototype.isDataTexture3D=!0;const fT=new Dn,hT=new Mm,dT=new rx,pT=new tc,mT=[],gT=[],vT=new Float32Array(16),yT=new Float32Array(9),xT=new Float32Array(4);function ac(s,e,t){const r=s[0];if(r<=0||r>0)return s;const o=e*t;let l=mT[o];if(l===void 0&&(l=new Float32Array(o),mT[o]=l),e!==0){r.toArray(l,0);for(let c=1,h=0;c!==e;++c)h+=t,s[c].toArray(l,h)}return l}function ui(s,e){if(s.length!==e.length)return!1;for(let t=0,r=s.length;t<r;t++)if(s[t]!==e[t])return!1;return!0}function Zr(s,e){for(let t=0,r=e.length;t<r;t++)s[t]=e[t]}function Tm(s,e){let t=gT[e];t===void 0&&(t=new Int32Array(e),gT[e]=t);for(let r=0;r!==e;++r)t[r]=s.allocateTextureUnit();return t}function YD(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function KD(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;s.uniform2fv(this.addr,e),Zr(t,e)}}function ZD(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ui(t,e))return;s.uniform3fv(this.addr,e),Zr(t,e)}}function QD(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;s.uniform4fv(this.addr,e),Zr(t,e)}}function JD(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),Zr(t,e)}else{if(ui(t,r))return;xT.set(r),s.uniformMatrix2fv(this.addr,!1,xT),Zr(t,r)}}function eN(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),Zr(t,e)}else{if(ui(t,r))return;yT.set(r),s.uniformMatrix3fv(this.addr,!1,yT),Zr(t,r)}}function tN(s,e){const t=this.cache,r=e.elements;if(r===void 0){if(ui(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),Zr(t,e)}else{if(ui(t,r))return;vT.set(r),s.uniformMatrix4fv(this.addr,!1,vT),Zr(t,r)}}function nN(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function rN(s,e){const t=this.cache;ui(t,e)||(s.uniform2iv(this.addr,e),Zr(t,e))}function iN(s,e){const t=this.cache;ui(t,e)||(s.uniform3iv(this.addr,e),Zr(t,e))}function sN(s,e){const t=this.cache;ui(t,e)||(s.uniform4iv(this.addr,e),Zr(t,e))}function oN(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function aN(s,e){const t=this.cache;ui(t,e)||(s.uniform2uiv(this.addr,e),Zr(t,e))}function lN(s,e){const t=this.cache;ui(t,e)||(s.uniform3uiv(this.addr,e),Zr(t,e))}function uN(s,e){const t=this.cache;ui(t,e)||(s.uniform4uiv(this.addr,e),Zr(t,e))}function cN(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.safeSetTexture2D(e||fT,o)}function fN(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||dT,o)}function hN(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.safeSetTextureCube(e||pT,o)}function dN(s,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(s.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||hT,o)}function pN(s){switch(s){case 5126:return YD;case 35664:return KD;case 35665:return ZD;case 35666:return QD;case 35674:return JD;case 35675:return eN;case 35676:return tN;case 5124:case 35670:return nN;case 35667:case 35671:return rN;case 35668:case 35672:return iN;case 35669:case 35673:return sN;case 5125:return oN;case 36294:return aN;case 36295:return lN;case 36296:return uN;case 35678:case 36198:case 36298:case 36306:case 35682:return cN;case 35679:case 36299:case 36307:return fN;case 35680:case 36300:case 36308:case 36293:return hN;case 36289:case 36303:case 36311:case 36292:return dN}}function mN(s,e){s.uniform1fv(this.addr,e)}function gN(s,e){const t=ac(e,this.size,2);s.uniform2fv(this.addr,t)}function vN(s,e){const t=ac(e,this.size,3);s.uniform3fv(this.addr,t)}function yN(s,e){const t=ac(e,this.size,4);s.uniform4fv(this.addr,t)}function xN(s,e){const t=ac(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function _N(s,e){const t=ac(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function wN(s,e){const t=ac(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function bN(s,e){s.uniform1iv(this.addr,e)}function SN(s,e){s.uniform2iv(this.addr,e)}function MN(s,e){s.uniform3iv(this.addr,e)}function TN(s,e){s.uniform4iv(this.addr,e)}function EN(s,e){s.uniform1uiv(this.addr,e)}function AN(s,e){s.uniform2uiv(this.addr,e)}function CN(s,e){s.uniform3uiv(this.addr,e)}function RN(s,e){s.uniform4uiv(this.addr,e)}function LN(s,e,t){const r=e.length,o=Tm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTexture2D(e[l]||fT,o[l])}function IN(s,e,t){const r=e.length,o=Tm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture3D(e[l]||dT,o[l])}function PN(s,e,t){const r=e.length,o=Tm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTextureCube(e[l]||pT,o[l])}function kN(s,e,t){const r=e.length,o=Tm(t,r);s.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||hT,o[l])}function ON(s){switch(s){case 5126:return mN;case 35664:return gN;case 35665:return vN;case 35666:return yN;case 35674:return xN;case 35675:return _N;case 35676:return wN;case 5124:case 35670:return bN;case 35667:case 35671:return SN;case 35668:case 35672:return MN;case 35669:case 35673:return TN;case 5125:return EN;case 36294:return AN;case 36295:return CN;case 36296:return RN;case 35678:case 36198:case 36298:case 36306:case 35682:return LN;case 35679:case 36299:case 36307:return IN;case 35680:case 36300:case 36308:case 36293:return PN;case 36289:case 36303:case 36311:case 36292:return kN}}function DN(s,e,t){this.id=s,this.addr=t,this.cache=[],this.setValue=pN(e.type)}function _T(s,e,t){this.id=s,this.addr=t,this.cache=[],this.size=e.size,this.setValue=ON(e.type)}_T.prototype.updateCache=function(s){const e=this.cache;s instanceof Float32Array&&e.length!==s.length&&(this.cache=new Float32Array(s.length)),Zr(e,s)};function wT(s){this.id=s,this.seq=[],this.map={}}wT.prototype.setValue=function(s,e,t){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const c=r[o];c.setValue(s,e[c.id],t)}};const ix=/(\w+)(\])?(\[|\.)?/g;function bT(s,e){s.seq.push(e),s.map[e.id]=e}function NN(s,e,t){const r=s.name,o=r.length;for(ix.lastIndex=0;;){const l=ix.exec(r),c=ix.lastIndex;let h=l[1];const m=l[2]==="]",y=l[3];if(m&&(h=h|0),y===void 0||y==="["&&c+2===o){bT(t,y===void 0?new DN(h,s,e):new _T(h,s,e));break}else{let M=t.map[h];M===void 0&&(M=new wT(h),bT(t,M)),t=M}}}function sa(s,e){this.seq=[],this.map={};const t=s.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=s.getActiveUniform(e,r),l=s.getUniformLocation(e,o.name);NN(o,l,this)}}sa.prototype.setValue=function(s,e,t,r){const o=this.map[e];o!==void 0&&o.setValue(s,t,r)};sa.prototype.setOptional=function(s,e,t){const r=e[t];r!==void 0&&this.setValue(s,t,r)};sa.upload=function(s,e,t,r){for(let o=0,l=e.length;o!==l;++o){const c=e[o],h=t[c.id];h.needsUpdate!==!1&&c.setValue(s,h.value,r)}};sa.seqWithValue=function(s,e){const t=[];for(let r=0,o=s.length;r!==o;++r){const l=s[r];l.id in e&&t.push(l)}return t};function ST(s,e,t){const r=s.createShader(e);return s.shaderSource(r,t),s.compileShader(r),r}let FN=0;function BN(s){const e=s.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function UN(s){switch(s){case ki:return["Linear","( value )"];case rn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function MT(s,e,t){const r=s.getShaderParameter(e,35713),o=s.getShaderInfoLog(e).trim();return r&&o===""?"":t.toUpperCase()+`

`+o+`

`+BN(s.getShaderSource(e))}function zN(s,e){const t=UN(e);return"vec4 "+s+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function HN(s,e){let t;switch(e){case rM:t="Linear";break;case iM:t="Reinhard";break;case sM:t="OptimizedCineon";break;case oM:t="ACESFilmic";break;case aM:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function GN(s){return[s.extensionDerivatives||s.envMapCubeUV||s.bumpMap||s.tangentSpaceNormalMap||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_h).join(`
`)}function VN(s){const e=[];for(const t in s){const r=s[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function WN(s,e){const t={},r=s.getProgramParameter(e,35721);for(let o=0;o<r;o++){const l=s.getActiveAttrib(e,o),c=l.name;let h=1;l.type===35674&&(h=2),l.type===35675&&(h=3),l.type===35676&&(h=4),t[c]={type:l.type,location:s.getAttribLocation(e,c),locationSize:h}}return t}function _h(s){return s!==""}function TT(s,e){return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ET(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $N=/^[ \t]*#include +<([\w\d./]+)>/gm;function sx(s){return s.replace($N,jN)}function jN(s,e){const t=Qt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return sx(t)}const qN=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,XN=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AT(s){return s.replace(XN,CT).replace(qN,YN)}function YN(s,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),CT(s,e,t,r)}function CT(s,e,t,r){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function RT(s){let e="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function KN(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===Kv?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===DS?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===Pu&&(e="SHADOWMAP_TYPE_VSM"),e}function ZN(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case rl:case il:e="ENVMAP_TYPE_CUBE";break;case Du:case sh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function QN(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case il:case sh:e="ENVMAP_MODE_REFRACTION";break}return e}function JN(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case rh:e="ENVMAP_BLENDING_MULTIPLY";break;case tM:e="ENVMAP_BLENDING_MIX";break;case nM:e="ENVMAP_BLENDING_ADD";break}return e}function eF(s,e,t,r){const o=s.getContext(),l=t.defines;let c=t.vertexShader,h=t.fragmentShader;const m=KN(t),y=ZN(t),b=QN(t),M=JN(t),C=t.isWebGL2?"":GN(t),I=VN(l),O=o.createProgram();let U,H,P=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(U=[I].filter(_h).join(`
`),U.length>0&&(U+=`
`),H=[C,I].filter(_h).join(`
`),H.length>0&&(H+=`
`)):(U=[RT(t),"#define SHADER_NAME "+t.shaderName,I,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_h).join(`
`),H=[C,RT(t),"#define SHADER_NAME "+t.shaderName,I,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.envMap?"#define "+b:"",t.envMap?"#define "+M:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==io?"#define TONE_MAPPING":"",t.toneMapping!==io?Qt.tonemapping_pars_fragment:"",t.toneMapping!==io?HN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",Qt.encodings_pars_fragment,zN("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_h).join(`
`)),c=sx(c),c=TT(c,t),c=ET(c,t),h=sx(h),h=TT(h,t),h=ET(h,t),c=AT(c),h=AT(h),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,U=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+U,H=["#define varying in",t.glslVersion===Cy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Cy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+H);const A=P+U+c,F=P+H+h,L=ST(o,35633,A),B=ST(o,35632,F);if(o.attachShader(O,L),o.attachShader(O,B),t.index0AttributeName!==void 0?o.bindAttribLocation(O,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(O,0,"position"),o.linkProgram(O),s.debug.checkShaderErrors){const Z=o.getProgramInfoLog(O).trim(),ae=o.getShaderInfoLog(L).trim(),ce=o.getShaderInfoLog(B).trim();let ee=!0,ue=!0;if(o.getProgramParameter(O,35714)===!1){ee=!1;const le=MT(o,L,"vertex"),w=MT(o,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(O,35715)+`

Program Info Log: `+Z+`
`+le+`
`+w)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(ae===""||ce==="")&&(ue=!1);ue&&(this.diagnostics={runnable:ee,programLog:Z,vertexShader:{log:ae,prefix:U},fragmentShader:{log:ce,prefix:H}})}o.deleteShader(L),o.deleteShader(B);let z;this.getUniforms=function(){return z===void 0&&(z=new sa(o,O)),z};let q;return this.getAttributes=function(){return q===void 0&&(q=WN(o,O)),q},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(O),this.program=void 0},this.name=t.shaderName,this.id=FN++,this.cacheKey=e,this.usedTimes=1,this.program=O,this.vertexShader=L,this.fragmentShader=B,this}let tF=0;class nF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(t),l=this._getShaderStage(r),c=this._getShaderCacheForMaterial(e);return c.has(o)===!1&&(c.add(o),o.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new rF;t.set(e,r)}return t.get(e)}}class rF{constructor(){this.id=tF++,this.usedTimes=0}}function iF(s,e,t,r,o,l,c){const h=new am,m=new nF,y=[],b=o.isWebGL2,M=o.logarithmicDepthBuffer,C=o.floatVertexTextures,I=o.maxVertexUniforms,O=o.vertexTextures;let U=o.precision;const H={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function P(ee){const le=ee.skeleton.bones;if(C)return 1024;{const p=Math.floor((I-20)/4),J=Math.min(p,le.length);return J<le.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+le.length+" bones. This GPU supports "+J+"."),0):J}}function A(ee,ue,le,w,p){const J=w.fog,E=ee.isMeshStandardMaterial?w.environment:null,ge=(ee.isMeshStandardMaterial?t:e).get(ee.envMap||E),ke=H[ee.type],Se=p.isSkinnedMesh?P(p):0;ee.precision!==null&&(U=o.getMaxPrecision(ee.precision),U!==ee.precision&&console.warn("THREE.WebGLProgram.getParameters:",ee.precision,"not supported, using",U,"instead."));let de,ye,Re,we;if(ke){const ze=gs[ke];de=ze.vertexShader,ye=ze.fragmentShader}else de=ee.vertexShader,ye=ee.fragmentShader,m.update(ee),Re=m.getVertexShaderID(ee),we=m.getFragmentShaderID(ee);const be=s.getRenderTarget(),Ue=ee.alphaTest>0,Ce=ee.clearcoat>0;return{isWebGL2:b,shaderID:ke,shaderName:ee.type,vertexShader:de,fragmentShader:ye,defines:ee.defines,customVertexShaderID:Re,customFragmentShaderID:we,isRawShaderMaterial:ee.isRawShaderMaterial===!0,glslVersion:ee.glslVersion,precision:U,instancing:p.isInstancedMesh===!0,instancingColor:p.isInstancedMesh===!0&&p.instanceColor!==null,supportsVertexTextures:O,outputEncoding:be===null?s.outputEncoding:be.isXRRenderTarget===!0?be.texture.encoding:ki,map:!!ee.map,matcap:!!ee.matcap,envMap:!!ge,envMapMode:ge&&ge.mapping,envMapCubeUV:!!ge&&(ge.mapping===Du||ge.mapping===sh),lightMap:!!ee.lightMap,aoMap:!!ee.aoMap,emissiveMap:!!ee.emissiveMap,bumpMap:!!ee.bumpMap,normalMap:!!ee.normalMap,objectSpaceNormalMap:ee.normalMapType===LM,tangentSpaceNormalMap:ee.normalMapType===ao,decodeVideoTexture:!!ee.map&&ee.map.isVideoTexture===!0&&ee.map.encoding===rn,clearcoat:Ce,clearcoatMap:Ce&&!!ee.clearcoatMap,clearcoatRoughnessMap:Ce&&!!ee.clearcoatRoughnessMap,clearcoatNormalMap:Ce&&!!ee.clearcoatNormalMap,displacementMap:!!ee.displacementMap,roughnessMap:!!ee.roughnessMap,metalnessMap:!!ee.metalnessMap,specularMap:!!ee.specularMap,specularIntensityMap:!!ee.specularIntensityMap,specularColorMap:!!ee.specularColorMap,transparent:ee.transparent,alphaMap:!!ee.alphaMap,alphaTest:Ue,gradientMap:!!ee.gradientMap,sheen:ee.sheen>0,sheenColorMap:!!ee.sheenColorMap,sheenRoughnessMap:!!ee.sheenRoughnessMap,transmission:ee.transmission>0,transmissionMap:!!ee.transmissionMap,thicknessMap:!!ee.thicknessMap,combine:ee.combine,vertexTangents:!!ee.normalMap&&!!p.geometry&&!!p.geometry.attributes.tangent,vertexColors:ee.vertexColors,vertexAlphas:ee.vertexColors===!0&&!!p.geometry&&!!p.geometry.attributes.color&&p.geometry.attributes.color.itemSize===4,vertexUvs:!!ee.map||!!ee.bumpMap||!!ee.normalMap||!!ee.specularMap||!!ee.alphaMap||!!ee.emissiveMap||!!ee.roughnessMap||!!ee.metalnessMap||!!ee.clearcoatMap||!!ee.clearcoatRoughnessMap||!!ee.clearcoatNormalMap||!!ee.displacementMap||!!ee.transmissionMap||!!ee.thicknessMap||!!ee.specularIntensityMap||!!ee.specularColorMap||!!ee.sheenColorMap||!!ee.sheenRoughnessMap,uvsVertexOnly:!(!!ee.map||!!ee.bumpMap||!!ee.normalMap||!!ee.specularMap||!!ee.alphaMap||!!ee.emissiveMap||!!ee.roughnessMap||!!ee.metalnessMap||!!ee.clearcoatNormalMap||ee.transmission>0||!!ee.transmissionMap||!!ee.thicknessMap||!!ee.specularIntensityMap||!!ee.specularColorMap||ee.sheen>0||!!ee.sheenColorMap||!!ee.sheenRoughnessMap)&&!!ee.displacementMap,fog:!!J,useFog:ee.fog,fogExp2:J&&J.isFogExp2,flatShading:!!ee.flatShading,sizeAttenuation:ee.sizeAttenuation,logarithmicDepthBuffer:M,skinning:p.isSkinnedMesh===!0&&Se>0,maxBones:Se,useVertexTexture:C,morphTargets:!!p.geometry&&!!p.geometry.morphAttributes.position,morphNormals:!!p.geometry&&!!p.geometry.morphAttributes.normal,morphTargetsCount:!!p.geometry&&!!p.geometry.morphAttributes.position?p.geometry.morphAttributes.position.length:0,numDirLights:ue.directional.length,numPointLights:ue.point.length,numSpotLights:ue.spot.length,numRectAreaLights:ue.rectArea.length,numHemiLights:ue.hemi.length,numDirLightShadows:ue.directionalShadowMap.length,numPointLightShadows:ue.pointShadowMap.length,numSpotLightShadows:ue.spotShadowMap.length,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:ee.dithering,shadowMapEnabled:s.shadowMap.enabled&&le.length>0,shadowMapType:s.shadowMap.type,toneMapping:ee.toneMapped?s.toneMapping:io,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:ee.premultipliedAlpha,doubleSided:ee.side===Rs,flipSided:ee.side===$n,depthPacking:ee.depthPacking!==void 0?ee.depthPacking:!1,index0AttributeName:ee.index0AttributeName,extensionDerivatives:ee.extensions&&ee.extensions.derivatives,extensionFragDepth:ee.extensions&&ee.extensions.fragDepth,extensionDrawBuffers:ee.extensions&&ee.extensions.drawBuffers,extensionShaderTextureLOD:ee.extensions&&ee.extensions.shaderTextureLOD,rendererExtensionFragDepth:b||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||r.has("EXT_shader_texture_lod"),customProgramCacheKey:ee.customProgramCacheKey()}}function F(ee){const ue=[];if(ee.shaderID?ue.push(ee.shaderID):(ue.push(ee.customVertexShaderID),ue.push(ee.customFragmentShaderID)),ee.defines!==void 0)for(const le in ee.defines)ue.push(le),ue.push(ee.defines[le]);return ee.isRawShaderMaterial===!1&&(L(ue,ee),B(ue,ee),ue.push(s.outputEncoding)),ue.push(ee.customProgramCacheKey),ue.join()}function L(ee,ue){ee.push(ue.precision),ee.push(ue.outputEncoding),ee.push(ue.envMapMode),ee.push(ue.combine),ee.push(ue.vertexUvs),ee.push(ue.fogExp2),ee.push(ue.sizeAttenuation),ee.push(ue.maxBones),ee.push(ue.morphTargetsCount),ee.push(ue.numDirLights),ee.push(ue.numPointLights),ee.push(ue.numSpotLights),ee.push(ue.numHemiLights),ee.push(ue.numRectAreaLights),ee.push(ue.numDirLightShadows),ee.push(ue.numPointLightShadows),ee.push(ue.numSpotLightShadows),ee.push(ue.shadowMapType),ee.push(ue.toneMapping),ee.push(ue.numClippingPlanes),ee.push(ue.numClipIntersection)}function B(ee,ue){h.disableAll(),ue.isWebGL2&&h.enable(0),ue.supportsVertexTextures&&h.enable(1),ue.instancing&&h.enable(2),ue.instancingColor&&h.enable(3),ue.map&&h.enable(4),ue.matcap&&h.enable(5),ue.envMap&&h.enable(6),ue.envMapCubeUV&&h.enable(7),ue.lightMap&&h.enable(8),ue.aoMap&&h.enable(9),ue.emissiveMap&&h.enable(10),ue.bumpMap&&h.enable(11),ue.normalMap&&h.enable(12),ue.objectSpaceNormalMap&&h.enable(13),ue.tangentSpaceNormalMap&&h.enable(14),ue.clearcoat&&h.enable(15),ue.clearcoatMap&&h.enable(16),ue.clearcoatRoughnessMap&&h.enable(17),ue.clearcoatNormalMap&&h.enable(18),ue.displacementMap&&h.enable(19),ue.specularMap&&h.enable(20),ue.roughnessMap&&h.enable(21),ue.metalnessMap&&h.enable(22),ue.gradientMap&&h.enable(23),ue.alphaMap&&h.enable(24),ue.alphaTest&&h.enable(25),ue.vertexColors&&h.enable(26),ue.vertexAlphas&&h.enable(27),ue.vertexUvs&&h.enable(28),ue.vertexTangents&&h.enable(29),ue.uvsVertexOnly&&h.enable(30),ue.fog&&h.enable(31),ee.push(h.mask),h.disableAll(),ue.useFog&&h.enable(0),ue.flatShading&&h.enable(1),ue.logarithmicDepthBuffer&&h.enable(2),ue.skinning&&h.enable(3),ue.useVertexTexture&&h.enable(4),ue.morphTargets&&h.enable(5),ue.morphNormals&&h.enable(6),ue.premultipliedAlpha&&h.enable(7),ue.shadowMapEnabled&&h.enable(8),ue.physicallyCorrectLights&&h.enable(9),ue.doubleSided&&h.enable(10),ue.flipSided&&h.enable(11),ue.depthPacking&&h.enable(12),ue.dithering&&h.enable(13),ue.specularIntensityMap&&h.enable(14),ue.specularColorMap&&h.enable(15),ue.transmission&&h.enable(16),ue.transmissionMap&&h.enable(17),ue.thicknessMap&&h.enable(18),ue.sheen&&h.enable(19),ue.sheenColorMap&&h.enable(20),ue.sheenRoughnessMap&&h.enable(21),ue.decodeVideoTexture&&h.enable(22),ue.transparent&&h.enable(23),ee.push(h.mask)}function z(ee){const ue=H[ee.type];let le;if(ue){const w=gs[ue];le=Zy.clone(w.uniforms)}else le=ee.uniforms;return le}function q(ee,ue){let le;for(let w=0,p=y.length;w<p;w++){const J=y[w];if(J.cacheKey===ue){le=J,++le.usedTimes;break}}return le===void 0&&(le=new eF(s,ue,ee,l),y.push(le)),le}function Z(ee){if(--ee.usedTimes==0){const ue=y.indexOf(ee);y[ue]=y[y.length-1],y.pop(),ee.destroy()}}function ae(ee){m.remove(ee)}function ce(){m.dispose()}return{getParameters:A,getProgramCacheKey:F,getUniforms:z,acquireProgram:q,releaseProgram:Z,releaseShaderCache:ae,programs:y,dispose:ce}}function sF(){let s=new WeakMap;function e(l){let c=s.get(l);return c===void 0&&(c={},s.set(l,c)),c}function t(l){s.delete(l)}function r(l,c,h){s.get(l)[c]=h}function o(){s=new WeakMap}return{get:e,remove:t,update:r,dispose:o}}function oF(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function LT(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function IT(){const s=[];let e=0;const t=[],r=[],o=[];function l(){e=0,t.length=0,r.length=0,o.length=0}function c(M,C,I,O,U,H){let P=s[e];return P===void 0?(P={id:M.id,object:M,geometry:C,material:I,groupOrder:O,renderOrder:M.renderOrder,z:U,group:H},s[e]=P):(P.id=M.id,P.object=M,P.geometry=C,P.material=I,P.groupOrder=O,P.renderOrder=M.renderOrder,P.z=U,P.group=H),e++,P}function h(M,C,I,O,U,H){const P=c(M,C,I,O,U,H);I.transmission>0?r.push(P):I.transparent===!0?o.push(P):t.push(P)}function m(M,C,I,O,U,H){const P=c(M,C,I,O,U,H);I.transmission>0?r.unshift(P):I.transparent===!0?o.unshift(P):t.unshift(P)}function y(M,C){t.length>1&&t.sort(M||oF),r.length>1&&r.sort(C||LT),o.length>1&&o.sort(C||LT)}function b(){for(let M=e,C=s.length;M<C;M++){const I=s[M];if(I.id===null)break;I.id=null,I.object=null,I.geometry=null,I.material=null,I.group=null}}return{opaque:t,transmissive:r,transparent:o,init:l,push:h,unshift:m,finish:b,sort:y}}function aF(){let s=new WeakMap;function e(r,o){let l;return s.has(r)===!1?(l=new IT,s.set(r,[l])):o>=s.get(r).length?(l=new IT,s.get(r).push(l)):l=s.get(r)[o],l}function t(){s=new WeakMap}return{get:e,dispose:t}}function lF(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new Ze};break;case"SpotLight":t={position:new he,direction:new he,color:new Ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new Ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new Ze,groundColor:new Ze};break;case"RectAreaLight":t={color:new Ze,position:new he,halfWidth:new he,halfHeight:new he};break}return s[e.id]=t,t}}}function uF(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let cF=0;function fF(s,e){return(e.castShadow?1:0)-(s.castShadow?1:0)}function hF(s,e){const t=new lF,r=uF(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let b=0;b<9;b++)o.probe.push(new he);const l=new he,c=new Je,h=new Je;function m(b,M){let C=0,I=0,O=0;for(let ae=0;ae<9;ae++)o.probe[ae].set(0,0,0);let U=0,H=0,P=0,A=0,F=0,L=0,B=0,z=0;b.sort(fF);const q=M!==!0?Math.PI:1;for(let ae=0,ce=b.length;ae<ce;ae++){const ee=b[ae],ue=ee.color,le=ee.intensity,w=ee.distance,p=ee.shadow&&ee.shadow.map?ee.shadow.map.texture:null;if(ee.isAmbientLight)C+=ue.r*le*q,I+=ue.g*le*q,O+=ue.b*le*q;else if(ee.isLightProbe)for(let J=0;J<9;J++)o.probe[J].addScaledVector(ee.sh.coefficients[J],le);else if(ee.isDirectionalLight){const J=t.get(ee);if(J.color.copy(ee.color).multiplyScalar(ee.intensity*q),ee.castShadow){const E=ee.shadow,ge=r.get(ee);ge.shadowBias=E.bias,ge.shadowNormalBias=E.normalBias,ge.shadowRadius=E.radius,ge.shadowMapSize=E.mapSize,o.directionalShadow[U]=ge,o.directionalShadowMap[U]=p,o.directionalShadowMatrix[U]=ee.shadow.matrix,L++}o.directional[U]=J,U++}else if(ee.isSpotLight){const J=t.get(ee);if(J.position.setFromMatrixPosition(ee.matrixWorld),J.color.copy(ue).multiplyScalar(le*q),J.distance=w,J.coneCos=Math.cos(ee.angle),J.penumbraCos=Math.cos(ee.angle*(1-ee.penumbra)),J.decay=ee.decay,ee.castShadow){const E=ee.shadow,ge=r.get(ee);ge.shadowBias=E.bias,ge.shadowNormalBias=E.normalBias,ge.shadowRadius=E.radius,ge.shadowMapSize=E.mapSize,o.spotShadow[P]=ge,o.spotShadowMap[P]=p,o.spotShadowMatrix[P]=ee.shadow.matrix,z++}o.spot[P]=J,P++}else if(ee.isRectAreaLight){const J=t.get(ee);J.color.copy(ue).multiplyScalar(le),J.halfWidth.set(ee.width*.5,0,0),J.halfHeight.set(0,ee.height*.5,0),o.rectArea[A]=J,A++}else if(ee.isPointLight){const J=t.get(ee);if(J.color.copy(ee.color).multiplyScalar(ee.intensity*q),J.distance=ee.distance,J.decay=ee.decay,ee.castShadow){const E=ee.shadow,ge=r.get(ee);ge.shadowBias=E.bias,ge.shadowNormalBias=E.normalBias,ge.shadowRadius=E.radius,ge.shadowMapSize=E.mapSize,ge.shadowCameraNear=E.camera.near,ge.shadowCameraFar=E.camera.far,o.pointShadow[H]=ge,o.pointShadowMap[H]=p,o.pointShadowMatrix[H]=ee.shadow.matrix,B++}o.point[H]=J,H++}else if(ee.isHemisphereLight){const J=t.get(ee);J.skyColor.copy(ee.color).multiplyScalar(le*q),J.groundColor.copy(ee.groundColor).multiplyScalar(le*q),o.hemi[F]=J,F++}}A>0&&(e.isWebGL2||s.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=ot.LTC_FLOAT_1,o.rectAreaLTC2=ot.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=ot.LTC_HALF_1,o.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=C,o.ambient[1]=I,o.ambient[2]=O;const Z=o.hash;(Z.directionalLength!==U||Z.pointLength!==H||Z.spotLength!==P||Z.rectAreaLength!==A||Z.hemiLength!==F||Z.numDirectionalShadows!==L||Z.numPointShadows!==B||Z.numSpotShadows!==z)&&(o.directional.length=U,o.spot.length=P,o.rectArea.length=A,o.point.length=H,o.hemi.length=F,o.directionalShadow.length=L,o.directionalShadowMap.length=L,o.pointShadow.length=B,o.pointShadowMap.length=B,o.spotShadow.length=z,o.spotShadowMap.length=z,o.directionalShadowMatrix.length=L,o.pointShadowMatrix.length=B,o.spotShadowMatrix.length=z,Z.directionalLength=U,Z.pointLength=H,Z.spotLength=P,Z.rectAreaLength=A,Z.hemiLength=F,Z.numDirectionalShadows=L,Z.numPointShadows=B,Z.numSpotShadows=z,o.version=cF++)}function y(b,M){let C=0,I=0,O=0,U=0,H=0;const P=M.matrixWorldInverse;for(let A=0,F=b.length;A<F;A++){const L=b[A];if(L.isDirectionalLight){const B=o.directional[C];B.direction.setFromMatrixPosition(L.matrixWorld),l.setFromMatrixPosition(L.target.matrixWorld),B.direction.sub(l),B.direction.transformDirection(P),C++}else if(L.isSpotLight){const B=o.spot[O];B.position.setFromMatrixPosition(L.matrixWorld),B.position.applyMatrix4(P),B.direction.setFromMatrixPosition(L.matrixWorld),l.setFromMatrixPosition(L.target.matrixWorld),B.direction.sub(l),B.direction.transformDirection(P),O++}else if(L.isRectAreaLight){const B=o.rectArea[U];B.position.setFromMatrixPosition(L.matrixWorld),B.position.applyMatrix4(P),h.identity(),c.copy(L.matrixWorld),c.premultiply(P),h.extractRotation(c),B.halfWidth.set(L.width*.5,0,0),B.halfHeight.set(0,L.height*.5,0),B.halfWidth.applyMatrix4(h),B.halfHeight.applyMatrix4(h),U++}else if(L.isPointLight){const B=o.point[I];B.position.setFromMatrixPosition(L.matrixWorld),B.position.applyMatrix4(P),I++}else if(L.isHemisphereLight){const B=o.hemi[H];B.direction.setFromMatrixPosition(L.matrixWorld),B.direction.transformDirection(P),B.direction.normalize(),H++}}}return{setup:m,setupView:y,state:o}}function PT(s,e){const t=new hF(s,e),r=[],o=[];function l(){r.length=0,o.length=0}function c(M){r.push(M)}function h(M){o.push(M)}function m(M){t.setup(r,M)}function y(M){t.setupView(r,M)}return{init:l,state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:m,setupLightsView:y,pushLight:c,pushShadow:h}}function dF(s,e){let t=new WeakMap;function r(l,c=0){let h;return t.has(l)===!1?(h=new PT(s,e),t.set(l,[h])):c>=t.get(l).length?(h=new PT(s,e),t.get(l).push(h)):h=t.get(l)[c],h}function o(){t=new WeakMap}return{get:r,dispose:o}}class Em extends nr{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=CM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Em.prototype.isMeshDepthMaterial=!0;class Am extends nr{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new he,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Am.prototype.isMeshDistanceMaterial=!0;const pF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,mF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function kT(s,e,t){let r=new yh;const o=new je,l=new je,c=new an,h=new Em({depthPacking:RM}),m=new Am,y={},b=t.maxTextureSize,M={0:$n,1:jo,2:Rs},C=new Ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:pF,fragmentShader:mF}),I=C.clone();I.defines.HORIZONTAL_PASS=1;const O=new St;O.setAttribute("position",new Dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const U=new Nn(O,C),H=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Kv,this.render=function(L,B,z){if(H.enabled===!1||H.autoUpdate===!1&&H.needsUpdate===!1||L.length===0)return;const q=s.getRenderTarget(),Z=s.getActiveCubeFace(),ae=s.getActiveMipmapLevel(),ce=s.state;ce.setBlending(ro),ce.buffers.color.setClear(1,1,1,1),ce.buffers.depth.setTest(!0),ce.setScissorTest(!1);for(let ee=0,ue=L.length;ee<ue;ee++){const le=L[ee],w=le.shadow;if(w===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(w.autoUpdate===!1&&w.needsUpdate===!1)continue;o.copy(w.mapSize);const p=w.getFrameExtents();if(o.multiply(p),l.copy(w.mapSize),(o.x>b||o.y>b)&&(o.x>b&&(l.x=Math.floor(b/p.x),o.x=l.x*p.x,w.mapSize.x=l.x),o.y>b&&(l.y=Math.floor(b/p.y),o.y=l.y*p.y,w.mapSize.y=l.y)),w.map===null&&!w.isPointLightShadow&&this.type===Pu){const E={minFilter:Rn,magFilter:Rn,format:Er};w.map=new Di(o.x,o.y,E),w.map.texture.name=le.name+".shadowMap",w.mapPass=new Di(o.x,o.y,E),w.camera.updateProjectionMatrix()}if(w.map===null){const E={minFilter:jn,magFilter:jn,format:Er};w.map=new Di(o.x,o.y,E),w.map.texture.name=le.name+".shadowMap",w.camera.updateProjectionMatrix()}s.setRenderTarget(w.map),s.clear();const J=w.getViewportCount();for(let E=0;E<J;E++){const ge=w.getViewport(E);c.set(l.x*ge.x,l.y*ge.y,l.x*ge.z,l.y*ge.w),ce.viewport(c),w.updateMatrices(le,E),r=w.getFrustum(),F(B,z,w.camera,le,this.type)}!w.isPointLightShadow&&this.type===Pu&&P(w,z),w.needsUpdate=!1}H.needsUpdate=!1,s.setRenderTarget(q,Z,ae)};function P(L,B){const z=e.update(U);C.defines.VSM_SAMPLES!==L.blurSamples&&(C.defines.VSM_SAMPLES=L.blurSamples,I.defines.VSM_SAMPLES=L.blurSamples,C.needsUpdate=!0,I.needsUpdate=!0),C.uniforms.shadow_pass.value=L.map.texture,C.uniforms.resolution.value=L.mapSize,C.uniforms.radius.value=L.radius,s.setRenderTarget(L.mapPass),s.clear(),s.renderBufferDirect(B,null,z,C,U,null),I.uniforms.shadow_pass.value=L.mapPass.texture,I.uniforms.resolution.value=L.mapSize,I.uniforms.radius.value=L.radius,s.setRenderTarget(L.map),s.clear(),s.renderBufferDirect(B,null,z,I,U,null)}function A(L,B,z,q,Z,ae,ce){let ee=null;const ue=q.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(ue!==void 0?ee=ue:ee=q.isPointLight===!0?m:h,s.localClippingEnabled&&z.clipShadows===!0&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const le=ee.uuid,w=z.uuid;let p=y[le];p===void 0&&(p={},y[le]=p);let J=p[w];J===void 0&&(J=ee.clone(),p[w]=J),ee=J}return ee.visible=z.visible,ee.wireframe=z.wireframe,ce===Pu?ee.side=z.shadowSide!==null?z.shadowSide:z.side:ee.side=z.shadowSide!==null?z.shadowSide:M[z.side],ee.alphaMap=z.alphaMap,ee.alphaTest=z.alphaTest,ee.clipShadows=z.clipShadows,ee.clippingPlanes=z.clippingPlanes,ee.clipIntersection=z.clipIntersection,ee.displacementMap=z.displacementMap,ee.displacementScale=z.displacementScale,ee.displacementBias=z.displacementBias,ee.wireframeLinewidth=z.wireframeLinewidth,ee.linewidth=z.linewidth,q.isPointLight===!0&&ee.isMeshDistanceMaterial===!0&&(ee.referencePosition.setFromMatrixPosition(q.matrixWorld),ee.nearDistance=Z,ee.farDistance=ae),ee}function F(L,B,z,q,Z){if(L.visible===!1)return;if(L.layers.test(B.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&Z===Pu)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,L.matrixWorld);const ee=e.update(L),ue=L.material;if(Array.isArray(ue)){const le=ee.groups;for(let w=0,p=le.length;w<p;w++){const J=le[w],E=ue[J.materialIndex];if(E&&E.visible){const ge=A(L,ee,E,q,z.near,z.far,Z);s.renderBufferDirect(z,null,ee,ge,L,J)}}}else if(ue.visible){const le=A(L,ee,ue,q,z.near,z.far,Z);s.renderBufferDirect(z,null,ee,le,L,null)}}const ce=L.children;for(let ee=0,ue=ce.length;ee<ue;ee++)F(ce[ee],B,z,q,Z)}}function gF(s,e,t){const r=t.isWebGL2;function o(){let G=!1;const K=new an;let Q=null;const ne=new an(0,0,0,0);return{setMask:function(ie){Q!==ie&&!G&&(s.colorMask(ie,ie,ie,ie),Q=ie)},setLocked:function(ie){G=ie},setClear:function(ie,fe,me,Ie,Xe){Xe===!0&&(ie*=Ie,fe*=Ie,me*=Ie),K.set(ie,fe,me,Ie),ne.equals(K)===!1&&(s.clearColor(ie,fe,me,Ie),ne.copy(K))},reset:function(){G=!1,Q=null,ne.set(-1,0,0,0)}}}function l(){let G=!1,K=null,Q=null,ne=null;return{setTest:function(ie){ie?be(2929):Ue(2929)},setMask:function(ie){K!==ie&&!G&&(s.depthMask(ie),K=ie)},setFunc:function(ie){if(Q!==ie){if(ie)switch(ie){case XS:s.depthFunc(512);break;case YS:s.depthFunc(519);break;case KS:s.depthFunc(513);break;case Hp:s.depthFunc(515);break;case ZS:s.depthFunc(514);break;case QS:s.depthFunc(518);break;case JS:s.depthFunc(516);break;case eM:s.depthFunc(517);break;default:s.depthFunc(515)}else s.depthFunc(515);Q=ie}},setLocked:function(ie){G=ie},setClear:function(ie){ne!==ie&&(s.clearDepth(ie),ne=ie)},reset:function(){G=!1,K=null,Q=null,ne=null}}}function c(){let G=!1,K=null,Q=null,ne=null,ie=null,fe=null,me=null,Ie=null,Xe=null;return{setTest:function(Fe){G||(Fe?be(2960):Ue(2960))},setMask:function(Fe){K!==Fe&&!G&&(s.stencilMask(Fe),K=Fe)},setFunc:function(Fe,mt,at){(Q!==Fe||ne!==mt||ie!==at)&&(s.stencilFunc(Fe,mt,at),Q=Fe,ne=mt,ie=at)},setOp:function(Fe,mt,at){(fe!==Fe||me!==mt||Ie!==at)&&(s.stencilOp(Fe,mt,at),fe=Fe,me=mt,Ie=at)},setLocked:function(Fe){G=Fe},setClear:function(Fe){Xe!==Fe&&(s.clearStencil(Fe),Xe=Fe)},reset:function(){G=!1,K=null,Q=null,ne=null,ie=null,fe=null,me=null,Ie=null,Xe=null}}}const h=new o,m=new l,y=new c;let b={},M={},C=new WeakMap,I=[],O=null,U=!1,H=null,P=null,A=null,F=null,L=null,B=null,z=null,q=!1,Z=null,ae=null,ce=null,ee=null,ue=null;const le=s.getParameter(35661);let w=!1,p=0;const J=s.getParameter(7938);J.indexOf("WebGL")!==-1?(p=parseFloat(/^WebGL (\d)/.exec(J)[1]),w=p>=1):J.indexOf("OpenGL ES")!==-1&&(p=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),w=p>=2);let E=null,ge={};const ke=s.getParameter(3088),Se=s.getParameter(2978),de=new an().fromArray(ke),ye=new an().fromArray(Se);function Re(G,K,Q){const ne=new Uint8Array(4),ie=s.createTexture();s.bindTexture(G,ie),s.texParameteri(G,10241,9728),s.texParameteri(G,10240,9728);for(let fe=0;fe<Q;fe++)s.texImage2D(K+fe,0,6408,1,1,0,6408,5121,ne);return ie}const we={};we[3553]=Re(3553,3553,1),we[34067]=Re(34067,34069,6),h.setClear(0,0,0,1),m.setClear(1),y.setClear(0),be(2929),m.setFunc(Hp),Ye(!1),De(Yv),be(2884),Le(ro);function be(G){b[G]!==!0&&(s.enable(G),b[G]=!0)}function Ue(G){b[G]!==!1&&(s.disable(G),b[G]=!1)}function Ce(G,K){return M[G]!==K?(s.bindFramebuffer(G,K),M[G]=K,r&&(G===36009&&(M[36160]=K),G===36160&&(M[36009]=K)),!0):!1}function $e(G,K){let Q=I,ne=!1;if(G)if(Q=C.get(K),Q===void 0&&(Q=[],C.set(K,Q)),G.isWebGLMultipleRenderTargets){const ie=G.texture;if(Q.length!==ie.length||Q[0]!==36064){for(let fe=0,me=ie.length;fe<me;fe++)Q[fe]=36064+fe;Q.length=ie.length,ne=!0}}else Q[0]!==36064&&(Q[0]=36064,ne=!0);else Q[0]!==1029&&(Q[0]=1029,ne=!0);ne&&(t.isWebGL2?s.drawBuffers(Q):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Q))}function ze(G){return O!==G?(s.useProgram(G),O=G,!0):!1}const W={[nl]:32774,[FS]:32778,[BS]:32779};if(r)W[ty]=32775,W[ny]=32776;else{const G=e.get("EXT_blend_minmax");G!==null&&(W[ty]=G.MIN_EXT,W[ny]=G.MAX_EXT)}const Ve={[US]:0,[zS]:1,[HS]:768,[ry]:770,[qS]:776,[$S]:774,[VS]:772,[GS]:769,[iy]:771,[jS]:775,[WS]:773};function Le(G,K,Q,ne,ie,fe,me,Ie){if(G===ro){U===!0&&(Ue(3042),U=!1);return}if(U===!1&&(be(3042),U=!0),G!==NS){if(G!==H||Ie!==q){if((P!==nl||L!==nl)&&(s.blendEquation(32774),P=nl,L=nl),Ie)switch(G){case ku:s.blendFuncSeparate(1,771,1,771);break;case Qv:s.blendFunc(1,1);break;case Jv:s.blendFuncSeparate(0,769,0,1);break;case ey:s.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case ku:s.blendFuncSeparate(770,771,1,771);break;case Qv:s.blendFunc(770,1);break;case Jv:s.blendFuncSeparate(0,769,0,1);break;case ey:s.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}A=null,F=null,B=null,z=null,H=G,q=Ie}return}ie=ie||K,fe=fe||Q,me=me||ne,(K!==P||ie!==L)&&(s.blendEquationSeparate(W[K],W[ie]),P=K,L=ie),(Q!==A||ne!==F||fe!==B||me!==z)&&(s.blendFuncSeparate(Ve[Q],Ve[ne],Ve[fe],Ve[me]),A=Q,F=ne,B=fe,z=me),H=G,q=null}function Be(G,K){G.side===Rs?Ue(2884):be(2884);let Q=G.side===$n;K&&(Q=!Q),Ye(Q),G.blending===ku&&G.transparent===!1?Le(ro):Le(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),m.setFunc(G.depthFunc),m.setTest(G.depthTest),m.setMask(G.depthWrite),h.setMask(G.colorWrite);const ne=G.stencilWrite;y.setTest(ne),ne&&(y.setMask(G.stencilWriteMask),y.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),y.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),yt(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?be(32926):Ue(32926)}function Ye(G){Z!==G&&(G?s.frontFace(2304):s.frontFace(2305),Z=G)}function De(G){G!==kS?(be(2884),G!==ae&&(G===Yv?s.cullFace(1029):G===OS?s.cullFace(1028):s.cullFace(1032))):Ue(2884),ae=G}function oe(G){G!==ce&&(w&&s.lineWidth(G),ce=G)}function yt(G,K,Q){G?(be(32823),(ee!==K||ue!==Q)&&(s.polygonOffset(K,Q),ee=K,ue=Q)):Ue(32823)}function j(G){G?be(3089):Ue(3089)}function et(G){G===void 0&&(G=33984+le-1),E!==G&&(s.activeTexture(G),E=G)}function Nt(G,K){E===null&&et();let Q=ge[E];Q===void 0&&(Q={type:void 0,texture:void 0},ge[E]=Q),(Q.type!==G||Q.texture!==K)&&(s.bindTexture(G,K||we[G]),Q.type=G,Q.texture=K)}function X(){const G=ge[E];G!==void 0&&G.type!==void 0&&(s.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function n(){try{s.compressedTexImage2D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function i(){try{s.texSubImage2D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function a(){try{s.texSubImage3D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function f(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function g(){try{s.texStorage2D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function v(){try{s.texStorage3D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function S(){try{s.texImage2D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function R(){try{s.texImage3D.apply(s,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function k(G){de.equals(G)===!1&&(s.scissor(G.x,G.y,G.z,G.w),de.copy(G))}function D(G){ye.equals(G)===!1&&(s.viewport(G.x,G.y,G.z,G.w),ye.copy(G))}function V(){s.disable(3042),s.disable(2884),s.disable(2929),s.disable(32823),s.disable(3089),s.disable(2960),s.disable(32926),s.blendEquation(32774),s.blendFunc(1,0),s.blendFuncSeparate(1,0,1,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(513),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(519,0,4294967295),s.stencilOp(7680,7680,7680),s.clearStencil(0),s.cullFace(1029),s.frontFace(2305),s.polygonOffset(0,0),s.activeTexture(33984),s.bindFramebuffer(36160,null),r===!0&&(s.bindFramebuffer(36009,null),s.bindFramebuffer(36008,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),b={},E=null,ge={},M={},C=new WeakMap,I=[],O=null,U=!1,H=null,P=null,A=null,F=null,L=null,B=null,z=null,q=!1,Z=null,ae=null,ce=null,ee=null,ue=null,de.set(0,0,s.canvas.width,s.canvas.height),ye.set(0,0,s.canvas.width,s.canvas.height),h.reset(),m.reset(),y.reset()}return{buffers:{color:h,depth:m,stencil:y},enable:be,disable:Ue,bindFramebuffer:Ce,drawBuffers:$e,useProgram:ze,setBlending:Le,setMaterial:Be,setFlipSided:Ye,setCullFace:De,setLineWidth:oe,setPolygonOffset:yt,setScissorTest:j,activeTexture:et,bindTexture:Nt,unbindTexture:X,compressedTexImage2D:n,texImage2D:S,texImage3D:R,texStorage2D:g,texStorage3D:v,texSubImage2D:i,texSubImage3D:a,compressedTexSubImage2D:f,scissor:k,viewport:D,reset:V}}function vF(s,e,t,r,o,l,c){const h=o.isWebGL2,m=o.maxTextures,y=o.maxCubemapSize,b=o.maxTextureSize,M=o.maxSamples,I=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,O=new WeakMap;let U,H=!1;try{H=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function P(n,i){return H?new OffscreenCanvas(n,i):hh("canvas")}function A(n,i,a,f){let g=1;if((n.width>f||n.height>f)&&(g=f/Math.max(n.width,n.height)),g<1||i===!0)if(typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap){const v=i?kM:Math.floor,S=v(g*n.width),R=v(g*n.height);U===void 0&&(U=P(S,R));const k=a?P(S,R):U;return k.width=S,k.height=R,k.getContext("2d").drawImage(n,0,0,S,R),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+n.width+"x"+n.height+") to ("+S+"x"+R+")."),k}else return"data"in n&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+n.width+"x"+n.height+")."),n;return n}function F(n){return Ly(n.width)&&Ly(n.height)}function L(n){return h?!1:n.wrapS!==fr||n.wrapT!==fr||n.minFilter!==jn&&n.minFilter!==Rn}function B(n,i){return n.generateMipmaps&&i&&n.minFilter!==jn&&n.minFilter!==Rn}function z(n){s.generateMipmap(n)}function q(n,i,a,f,g=!1){if(h===!1)return i;if(n!==null){if(s[n]!==void 0)return s[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let v=i;return i===6403&&(a===5126&&(v=33326),a===5131&&(v=33325),a===5121&&(v=33321)),i===33319&&(a===5126&&(v=33328),a===5131&&(v=33327),a===5121&&(v=33323)),i===6408&&(a===5126&&(v=34836),a===5131&&(v=34842),a===5121&&(v=f===rn&&g===!1?35907:32856),a===32819&&(v=32854),a===32820&&(v=32855)),(v===33325||v===33326||v===33327||v===33328||v===34842||v===34836)&&e.get("EXT_color_buffer_float"),v}function Z(n,i,a){return B(n,a)===!0||n.isFramebufferTexture&&n.minFilter!==jn&&n.minFilter!==Rn?Math.log2(Math.max(i.width,i.height))+1:n.mipmaps!==void 0&&n.mipmaps.length>0?n.mipmaps.length:n.isCompressedTexture&&Array.isArray(n.image)?i.mipmaps.length:1}function ae(n){return n===jn||n===oh||n===ah?9728:9729}function ce(n){const i=n.target;i.removeEventListener("dispose",ce),ue(i),i.isVideoTexture&&O.delete(i),c.memory.textures--}function ee(n){const i=n.target;i.removeEventListener("dispose",ee),le(i)}function ue(n){const i=r.get(n);i.__webglInit!==void 0&&(s.deleteTexture(i.__webglTexture),r.remove(n))}function le(n){const i=n.texture,a=r.get(n),f=r.get(i);if(!!n){if(f.__webglTexture!==void 0&&(s.deleteTexture(f.__webglTexture),c.memory.textures--),n.depthTexture&&n.depthTexture.dispose(),n.isWebGLCubeRenderTarget)for(let g=0;g<6;g++)s.deleteFramebuffer(a.__webglFramebuffer[g]),a.__webglDepthbuffer&&s.deleteRenderbuffer(a.__webglDepthbuffer[g]);else s.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&s.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&s.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&s.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&s.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(n.isWebGLMultipleRenderTargets)for(let g=0,v=i.length;g<v;g++){const S=r.get(i[g]);S.__webglTexture&&(s.deleteTexture(S.__webglTexture),c.memory.textures--),r.remove(i[g])}r.remove(i),r.remove(n)}}let w=0;function p(){w=0}function J(){const n=w;return n>=m&&console.warn("THREE.WebGLTextures: Trying to use "+n+" texture units while this GPU supports only "+m),w+=1,n}function E(n,i){const a=r.get(n);if(n.isVideoTexture&&oe(n),n.version>0&&a.__version!==n.version){const f=n.image;if(f===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(f.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(a,n,i);return}}t.activeTexture(33984+i),t.bindTexture(3553,a.__webglTexture)}function ge(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){be(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(35866,a.__webglTexture)}function ke(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){be(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(32879,a.__webglTexture)}function Se(n,i){const a=r.get(n);if(n.version>0&&a.__version!==n.version){Ue(a,n,i);return}t.activeTexture(33984+i),t.bindTexture(34067,a.__webglTexture)}const de={[Ls]:10497,[fr]:33071,[Nu]:33648},ye={[jn]:9728,[oh]:9984,[ah]:9986,[Rn]:9729,[Vp]:9985,[so]:9987};function Re(n,i,a){if(a?(s.texParameteri(n,10242,de[i.wrapS]),s.texParameteri(n,10243,de[i.wrapT]),(n===32879||n===35866)&&s.texParameteri(n,32882,de[i.wrapR]),s.texParameteri(n,10240,ye[i.magFilter]),s.texParameteri(n,10241,ye[i.minFilter])):(s.texParameteri(n,10242,33071),s.texParameteri(n,10243,33071),(n===32879||n===35866)&&s.texParameteri(n,32882,33071),(i.wrapS!==fr||i.wrapT!==fr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(n,10240,ae(i.magFilter)),s.texParameteri(n,10241,ae(i.minFilter)),i.minFilter!==jn&&i.minFilter!==Rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const f=e.get("EXT_texture_filter_anisotropic");if(i.type===oo&&e.has("OES_texture_float_linear")===!1||h===!1&&i.type===sl&&e.has("OES_texture_half_float_linear")===!1)return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(s.texParameterf(n,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,o.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function we(n,i){n.__webglInit===void 0&&(n.__webglInit=!0,i.addEventListener("dispose",ce),n.__webglTexture=s.createTexture(),c.memory.textures++)}function be(n,i,a){let f=3553;i.isDataTexture2DArray&&(f=35866),i.isDataTexture3D&&(f=32879),we(n,i),t.activeTexture(33984+a),t.bindTexture(f,n.__webglTexture),s.pixelStorei(37440,i.flipY),s.pixelStorei(37441,i.premultiplyAlpha),s.pixelStorei(3317,i.unpackAlignment),s.pixelStorei(37443,0);const g=L(i)&&F(i.image)===!1;let v=A(i.image,g,!1,b);v=yt(i,v);const S=F(v)||h,R=l.convert(i.format,i.encoding);let k=l.convert(i.type),D=q(i.internalFormat,R,k,i.encoding,i.isVideoTexture);Re(f,i,S);let V;const G=i.mipmaps,K=h&&i.isVideoTexture!==!0,Q=n.__version===void 0,ne=Z(i,v,S);if(i.isDepthTexture)D=6402,h?i.type===oo?D=36012:i.type===lh?D=33190:i.type===ol?D=35056:D=33189:i.type===oo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===qo&&D===6402&&i.type!==Fu&&i.type!==lh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Fu,k=l.convert(i.type)),i.format===al&&D===6402&&(D=34041,i.type!==ol&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ol,k=l.convert(i.type))),K&&Q?t.texStorage2D(3553,1,D,v.width,v.height):t.texImage2D(3553,0,D,v.width,v.height,0,R,k,null);else if(i.isDataTexture)if(G.length>0&&S){K&&Q&&t.texStorage2D(3553,ne,D,G[0].width,G[0].height);for(let ie=0,fe=G.length;ie<fe;ie++)V=G[ie],K?t.texSubImage2D(3553,0,0,0,V.width,V.height,R,k,V.data):t.texImage2D(3553,ie,D,V.width,V.height,0,R,k,V.data);i.generateMipmaps=!1}else K?(Q&&t.texStorage2D(3553,ne,D,v.width,v.height),t.texSubImage2D(3553,0,0,0,v.width,v.height,R,k,v.data)):t.texImage2D(3553,0,D,v.width,v.height,0,R,k,v.data);else if(i.isCompressedTexture){K&&Q&&t.texStorage2D(3553,ne,D,G[0].width,G[0].height);for(let ie=0,fe=G.length;ie<fe;ie++)V=G[ie],i.format!==Er?R!==null?K?t.compressedTexSubImage2D(3553,ie,0,0,V.width,V.height,R,V.data):t.compressedTexImage2D(3553,ie,D,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):K?t.texSubImage2D(3553,ie,0,0,V.width,V.height,R,k,V.data):t.texImage2D(3553,ie,D,V.width,V.height,0,R,k,V.data)}else if(i.isDataTexture2DArray)K?(Q&&t.texStorage3D(35866,ne,D,v.width,v.height,v.depth),t.texSubImage3D(35866,0,0,0,0,v.width,v.height,v.depth,R,k,v.data)):t.texImage3D(35866,0,D,v.width,v.height,v.depth,0,R,k,v.data);else if(i.isDataTexture3D)K?(Q&&t.texStorage3D(32879,ne,D,v.width,v.height,v.depth),t.texSubImage3D(32879,0,0,0,0,v.width,v.height,v.depth,R,k,v.data)):t.texImage3D(32879,0,D,v.width,v.height,v.depth,0,R,k,v.data);else if(i.isFramebufferTexture)K&&Q?t.texStorage2D(3553,ne,D,v.width,v.height):t.texImage2D(3553,0,D,v.width,v.height,0,R,k,null);else if(G.length>0&&S){K&&Q&&t.texStorage2D(3553,ne,D,G[0].width,G[0].height);for(let ie=0,fe=G.length;ie<fe;ie++)V=G[ie],K?t.texSubImage2D(3553,ie,0,0,R,k,V):t.texImage2D(3553,ie,D,R,k,V);i.generateMipmaps=!1}else K?(Q&&t.texStorage2D(3553,ne,D,v.width,v.height),t.texSubImage2D(3553,0,0,0,R,k,v)):t.texImage2D(3553,0,D,R,k,v);B(i,S)&&z(f),n.__version=i.version,i.onUpdate&&i.onUpdate(i)}function Ue(n,i,a){if(i.image.length!==6)return;we(n,i),t.activeTexture(33984+a),t.bindTexture(34067,n.__webglTexture),s.pixelStorei(37440,i.flipY),s.pixelStorei(37441,i.premultiplyAlpha),s.pixelStorei(3317,i.unpackAlignment),s.pixelStorei(37443,0);const f=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),g=i.image[0]&&i.image[0].isDataTexture,v=[];for(let ie=0;ie<6;ie++)!f&&!g?v[ie]=A(i.image[ie],!1,!0,y):v[ie]=g?i.image[ie].image:i.image[ie],v[ie]=yt(i,v[ie]);const S=v[0],R=F(S)||h,k=l.convert(i.format,i.encoding),D=l.convert(i.type),V=q(i.internalFormat,k,D,i.encoding),G=h&&i.isVideoTexture!==!0,K=n.__version===void 0;let Q=Z(i,S,R);Re(34067,i,R);let ne;if(f){G&&K&&t.texStorage2D(34067,Q,V,S.width,S.height);for(let ie=0;ie<6;ie++){ne=v[ie].mipmaps;for(let fe=0;fe<ne.length;fe++){const me=ne[fe];i.format!==Er?k!==null?G?t.compressedTexSubImage2D(34069+ie,fe,0,0,me.width,me.height,k,me.data):t.compressedTexImage2D(34069+ie,fe,V,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):G?t.texSubImage2D(34069+ie,fe,0,0,me.width,me.height,k,D,me.data):t.texImage2D(34069+ie,fe,V,me.width,me.height,0,k,D,me.data)}}}else{ne=i.mipmaps,G&&K&&(ne.length>0&&Q++,t.texStorage2D(34067,Q,V,v[0].width,v[0].height));for(let ie=0;ie<6;ie++)if(g){G?t.texSubImage2D(34069+ie,0,0,0,v[ie].width,v[ie].height,k,D,v[ie].data):t.texImage2D(34069+ie,0,V,v[ie].width,v[ie].height,0,k,D,v[ie].data);for(let fe=0;fe<ne.length;fe++){const Ie=ne[fe].image[ie].image;G?t.texSubImage2D(34069+ie,fe+1,0,0,Ie.width,Ie.height,k,D,Ie.data):t.texImage2D(34069+ie,fe+1,V,Ie.width,Ie.height,0,k,D,Ie.data)}}else{G?t.texSubImage2D(34069+ie,0,0,0,k,D,v[ie]):t.texImage2D(34069+ie,0,V,k,D,v[ie]);for(let fe=0;fe<ne.length;fe++){const me=ne[fe];G?t.texSubImage2D(34069+ie,fe+1,0,0,k,D,me.image[ie]):t.texImage2D(34069+ie,fe+1,V,k,D,me.image[ie])}}}B(i,R)&&z(34067),n.__version=i.version,i.onUpdate&&i.onUpdate(i)}function Ce(n,i,a,f,g){const v=l.convert(a.format,a.encoding),S=l.convert(a.type),R=q(a.internalFormat,v,S,a.encoding);r.get(i).__hasExternalTextures||(g===32879||g===35866?t.texImage3D(g,0,R,i.width,i.height,i.depth,0,v,S,null):t.texImage2D(g,0,R,i.width,i.height,0,v,S,null)),t.bindFramebuffer(36160,n),i.useRenderToTexture?I.framebufferTexture2DMultisampleEXT(36160,f,g,r.get(a).__webglTexture,0,De(i)):s.framebufferTexture2D(36160,f,g,r.get(a).__webglTexture,0),t.bindFramebuffer(36160,null)}function $e(n,i,a){if(s.bindRenderbuffer(36161,n),i.depthBuffer&&!i.stencilBuffer){let f=33189;if(a||i.useRenderToTexture){const g=i.depthTexture;g&&g.isDepthTexture&&(g.type===oo?f=36012:g.type===lh&&(f=33190));const v=De(i);i.useRenderToTexture?I.renderbufferStorageMultisampleEXT(36161,v,f,i.width,i.height):s.renderbufferStorageMultisample(36161,v,f,i.width,i.height)}else s.renderbufferStorage(36161,f,i.width,i.height);s.framebufferRenderbuffer(36160,36096,36161,n)}else if(i.depthBuffer&&i.stencilBuffer){const f=De(i);a&&i.useRenderbuffer?s.renderbufferStorageMultisample(36161,f,35056,i.width,i.height):i.useRenderToTexture?I.renderbufferStorageMultisampleEXT(36161,f,35056,i.width,i.height):s.renderbufferStorage(36161,34041,i.width,i.height),s.framebufferRenderbuffer(36160,33306,36161,n)}else{const f=i.isWebGLMultipleRenderTargets===!0?i.texture[0]:i.texture,g=l.convert(f.format,f.encoding),v=l.convert(f.type),S=q(f.internalFormat,g,v,f.encoding),R=De(i);a&&i.useRenderbuffer?s.renderbufferStorageMultisample(36161,R,S,i.width,i.height):i.useRenderToTexture?I.renderbufferStorageMultisampleEXT(36161,R,S,i.width,i.height):s.renderbufferStorage(36161,S,i.width,i.height)}s.bindRenderbuffer(36161,null)}function ze(n,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,n),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const f=r.get(i.depthTexture).__webglTexture,g=De(i);if(i.depthTexture.format===qo)i.useRenderToTexture?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,f,0,g):s.framebufferTexture2D(36160,36096,3553,f,0);else if(i.depthTexture.format===al)i.useRenderToTexture?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,f,0,g):s.framebufferTexture2D(36160,33306,3553,f,0);else throw new Error("Unknown depthTexture format")}function W(n){const i=r.get(n),a=n.isWebGLCubeRenderTarget===!0;if(n.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");ze(i.__webglFramebuffer,n)}else if(a){i.__webglDepthbuffer=[];for(let f=0;f<6;f++)t.bindFramebuffer(36160,i.__webglFramebuffer[f]),i.__webglDepthbuffer[f]=s.createRenderbuffer(),$e(i.__webglDepthbuffer[f],n,!1)}else t.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=s.createRenderbuffer(),$e(i.__webglDepthbuffer,n,!1);t.bindFramebuffer(36160,null)}function Ve(n,i,a){const f=r.get(n);i!==void 0&&Ce(f.__webglFramebuffer,n,n.texture,36064,3553),a!==void 0&&W(n)}function Le(n){const i=n.texture,a=r.get(n),f=r.get(i);n.addEventListener("dispose",ee),n.isWebGLMultipleRenderTargets!==!0&&(f.__webglTexture===void 0&&(f.__webglTexture=s.createTexture()),f.__version=i.version,c.memory.textures++);const g=n.isWebGLCubeRenderTarget===!0,v=n.isWebGLMultipleRenderTargets===!0,S=i.isDataTexture3D||i.isDataTexture2DArray,R=F(n)||h;if(g){a.__webglFramebuffer=[];for(let k=0;k<6;k++)a.__webglFramebuffer[k]=s.createFramebuffer()}else if(a.__webglFramebuffer=s.createFramebuffer(),v)if(o.drawBuffers){const k=n.texture;for(let D=0,V=k.length;D<V;D++){const G=r.get(k[D]);G.__webglTexture===void 0&&(G.__webglTexture=s.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(n.useRenderbuffer)if(h){a.__webglMultisampledFramebuffer=s.createFramebuffer(),a.__webglColorRenderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(36161,a.__webglColorRenderbuffer);const k=l.convert(i.format,i.encoding),D=l.convert(i.type),V=q(i.internalFormat,k,D,i.encoding),G=De(n);s.renderbufferStorageMultisample(36161,G,V,n.width,n.height),t.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),s.bindRenderbuffer(36161,null),n.depthBuffer&&(a.__webglDepthRenderbuffer=s.createRenderbuffer(),$e(a.__webglDepthRenderbuffer,n,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(g){t.bindTexture(34067,f.__webglTexture),Re(34067,i,R);for(let k=0;k<6;k++)Ce(a.__webglFramebuffer[k],n,i,36064,34069+k);B(i,R)&&z(34067),t.unbindTexture()}else if(v){const k=n.texture;for(let D=0,V=k.length;D<V;D++){const G=k[D],K=r.get(G);t.bindTexture(3553,K.__webglTexture),Re(3553,G,R),Ce(a.__webglFramebuffer,n,G,36064+D,3553),B(G,R)&&z(3553)}t.unbindTexture()}else{let k=3553;S&&(h?k=i.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(k,f.__webglTexture),Re(k,i,R),Ce(a.__webglFramebuffer,n,i,36064,k),B(i,R)&&z(k),t.unbindTexture()}n.depthBuffer&&W(n)}function Be(n){const i=F(n)||h,a=n.isWebGLMultipleRenderTargets===!0?n.texture:[n.texture];for(let f=0,g=a.length;f<g;f++){const v=a[f];if(B(v,i)){const S=n.isWebGLCubeRenderTarget?34067:3553,R=r.get(v).__webglTexture;t.bindTexture(S,R),z(S),t.unbindTexture()}}}function Ye(n){if(n.useRenderbuffer)if(h){const i=n.width,a=n.height;let f=16384;const g=[36064],v=n.stencilBuffer?33306:36096;n.depthBuffer&&g.push(v),n.ignoreDepthForMultisampleCopy||(n.depthBuffer&&(f|=256),n.stencilBuffer&&(f|=1024));const S=r.get(n);t.bindFramebuffer(36008,S.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,S.__webglFramebuffer),n.ignoreDepthForMultisampleCopy&&(s.invalidateFramebuffer(36008,[v]),s.invalidateFramebuffer(36009,[v])),s.blitFramebuffer(0,0,i,a,0,0,i,a,f,9728),s.invalidateFramebuffer(36008,g),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,S.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function De(n){return h&&(n.useRenderbuffer||n.useRenderToTexture)?Math.min(M,n.samples):0}function oe(n){const i=c.render.frame;O.get(n)!==i&&(O.set(n,i),n.update())}function yt(n,i){const a=n.encoding,f=n.format,g=n.type;return n.isCompressedTexture===!0||n.isVideoTexture===!0||n.format===Zp||a!==ki&&(a===rn?h===!1?e.has("EXT_sRGB")===!0&&f===Er?(n.format=Zp,n.minFilter=Rn,n.generateMipmaps=!1):i=Yo.sRGBToLinear(i):(f!==Er||g!==Is)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",a)),i}let j=!1,et=!1;function Nt(n,i){n&&n.isWebGLRenderTarget&&(j===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),j=!0),n=n.texture),E(n,i)}function X(n,i){n&&n.isWebGLCubeRenderTarget&&(et===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),et=!0),n=n.texture),Se(n,i)}this.allocateTextureUnit=J,this.resetTextureUnits=p,this.setTexture2D=E,this.setTexture2DArray=ge,this.setTexture3D=ke,this.setTextureCube=Se,this.rebindTextures=Ve,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=W,this.setupFrameBufferTexture=Ce,this.safeSetTexture2D=Nt,this.safeSetTextureCube=X}function OT(s,e,t){const r=t.isWebGL2;function o(l,c=null){let h;if(l===Is)return 5121;if(l===fM)return 32819;if(l===hM)return 32820;if(l===lM)return 5120;if(l===uM)return 5122;if(l===Fu)return 5123;if(l===cM)return 5124;if(l===lh)return 5125;if(l===oo)return 5126;if(l===sl)return r?5131:(h=e.get("OES_texture_half_float"),h!==null?h.HALF_FLOAT_OES:null);if(l===dM)return 6406;if(l===Er)return 6408;if(l===mM)return 6409;if(l===gM)return 6410;if(l===qo)return 6402;if(l===al)return 34041;if(l===vM)return 6403;if(l===pM)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(l===Zp)return h=e.get("EXT_sRGB"),h!==null?h.SRGB_ALPHA_EXT:null;if(l===yM)return 36244;if(l===xM)return 33319;if(l===_M)return 33320;if(l===wM)return 36249;if(l===Wp||l===$p||l===jp||l===qp)if(c===rn)if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),h!==null){if(l===Wp)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===$p)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===jp)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===qp)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(h=e.get("WEBGL_compressed_texture_s3tc"),h!==null){if(l===Wp)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===$p)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===jp)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===qp)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===sy||l===oy||l===ay||l===ly)if(h=e.get("WEBGL_compressed_texture_pvrtc"),h!==null){if(l===sy)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===oy)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===ay)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===ly)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===bM)return h=e.get("WEBGL_compressed_texture_etc1"),h!==null?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===uy||l===cy)if(h=e.get("WEBGL_compressed_texture_etc"),h!==null){if(l===uy)return c===rn?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(l===cy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===fy||l===hy||l===dy||l===py||l===my||l===gy||l===vy||l===yy||l===xy||l===_y||l===wy||l===by||l===Sy||l===My)if(h=e.get("WEBGL_compressed_texture_astc"),h!==null){if(l===fy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===hy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===dy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===py)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===my)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===gy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===vy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===yy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===xy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===_y)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===wy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===by)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===Sy)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===My)return c===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===Ty)if(h=e.get("EXT_texture_compression_bptc"),h!==null){if(l===Ty)return c===rn?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(l===ol)return r?34042:(h=e.get("WEBGL_depth_texture"),h!==null?h.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:o}}class ox extends hr{constructor(e=[]){super();this.cameras=e}}ox.prototype.isArrayCamera=!0;class Ur extends Wt{constructor(){super();this.type="Group"}}Ur.prototype.isGroup=!0;const yF={type:"move"};class ax{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ur,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ur,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ur,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let o=null,l=null,c=null;const h=this._targetRay,m=this._grip,y=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(h!==null&&(o=t.getPose(e.targetRaySpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(yF))),y&&e.hand){c=!0;for(const U of e.hand.values()){const H=t.getJointPose(U,r);if(y.joints[U.jointName]===void 0){const A=new Ur;A.matrixAutoUpdate=!1,A.visible=!1,y.joints[U.jointName]=A,y.add(A)}const P=y.joints[U.jointName];H!==null&&(P.matrix.fromArray(H.transform.matrix),P.matrix.decompose(P.position,P.rotation,P.scale),P.jointRadius=H.radius),P.visible=H!==null}const b=y.joints["index-finger-tip"],M=y.joints["thumb-tip"],C=b.position.distanceTo(M.position),I=.02,O=.005;y.inputState.pinching&&C>I+O?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!y.inputState.pinching&&C<=I-O&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,r),l!==null&&(m.matrix.fromArray(l.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),l.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(l.linearVelocity)):m.hasLinearVelocity=!1,l.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(l.angularVelocity)):m.hasAngularVelocity=!1));return h!==null&&(h.visible=o!==null),m!==null&&(m.visible=l!==null),y!==null&&(y.visible=c!==null),this}}class Cm extends Dn{constructor(e,t,r,o,l,c,h,m,y,b){if(b=b!==void 0?b:qo,b!==qo&&b!==al)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&b===qo&&(r=Fu),r===void 0&&b===al&&(r=ol);super(null,o,l,c,h,m,b,r,y);this.image={width:e,height:t},this.magFilter=h!==void 0?h:jn,this.minFilter=m!==void 0?m:jn,this.flipY=!1,this.generateMipmaps=!1}}Cm.prototype.isDepthTexture=!0;class xF extends Xo{constructor(e,t){super();const r=this;let o=null,l=1,c=null,h="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let y=null,b=null,M=null,C=null,I=!1,O=null;const U=t.getContextAttributes();let H=null,P=null;const A=[],F=new Map,L=new hr;L.layers.enable(1),L.viewport=new an;const B=new hr;B.layers.enable(2),B.viewport=new an;const z=[L,B],q=new ox;q.layers.enable(1),q.layers.enable(2);let Z=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Se){let de=A[Se];return de===void 0&&(de=new ax,A[Se]=de),de.getTargetRaySpace()},this.getControllerGrip=function(Se){let de=A[Se];return de===void 0&&(de=new ax,A[Se]=de),de.getGripSpace()},this.getHand=function(Se){let de=A[Se];return de===void 0&&(de=new ax,A[Se]=de),de.getHandSpace()};function ce(Se){const de=F.get(Se.inputSource);de&&de.dispatchEvent({type:Se.type,data:Se.inputSource})}function ee(){F.forEach(function(Se,de){Se.disconnect(de)}),F.clear(),Z=null,ae=null,e.setRenderTarget(H),C=null,M=null,b=null,o=null,P=null,ke.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){l=Se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){h=Se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c},this.getBaseLayer=function(){return M!==null?M:C},this.getBinding=function(){return b},this.getFrame=function(){return O},this.getSession=function(){return o},this.setSession=async function(Se){if(o=Se,o!==null){if(H=e.getRenderTarget(),o.addEventListener("select",ce),o.addEventListener("selectstart",ce),o.addEventListener("selectend",ce),o.addEventListener("squeeze",ce),o.addEventListener("squeezestart",ce),o.addEventListener("squeezeend",ce),o.addEventListener("end",ee),o.addEventListener("inputsourceschange",ue),U.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const de={antialias:o.renderState.layers===void 0?U.antialias:!0,alpha:U.alpha,depth:U.depth,stencil:U.stencil,framebufferScaleFactor:l};C=new XRWebGLLayer(o,t,de),o.updateRenderState({baseLayer:C}),P=new Di(C.framebufferWidth,C.framebufferHeight,{format:Er,type:Is,encoding:e.outputEncoding})}else{I=U.antialias;let de=null,ye=null,Re=null;U.depth&&(Re=U.stencil?35056:33190,de=U.stencil?al:qo,ye=U.stencil?ol:Fu);const we={colorFormat:e.outputEncoding===rn?35907:32856,depthFormat:Re,scaleFactor:l};b=new XRWebGLBinding(o,t),M=b.createProjectionLayer(we),o.updateRenderState({layers:[M]}),I?P=new em(M.textureWidth,M.textureHeight,{format:Er,type:Is,depthTexture:new Cm(M.textureWidth,M.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:U.stencil,ignoreDepth:M.ignoreDepthValues,useRenderToTexture:m,encoding:e.outputEncoding}):P=new Di(M.textureWidth,M.textureHeight,{format:Er,type:Is,depthTexture:new Cm(M.textureWidth,M.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:U.stencil,ignoreDepth:M.ignoreDepthValues,encoding:e.outputEncoding})}P.isXRRenderTarget=!0,this.setFoveation(1),c=await o.requestReferenceSpace(h),ke.setContext(o),ke.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function ue(Se){const de=o.inputSources;for(let ye=0;ye<A.length;ye++)F.set(de[ye],A[ye]);for(let ye=0;ye<Se.removed.length;ye++){const Re=Se.removed[ye],we=F.get(Re);we&&(we.dispatchEvent({type:"disconnected",data:Re}),F.delete(Re))}for(let ye=0;ye<Se.added.length;ye++){const Re=Se.added[ye],we=F.get(Re);we&&we.dispatchEvent({type:"connected",data:Re})}}const le=new he,w=new he;function p(Se,de,ye){le.setFromMatrixPosition(de.matrixWorld),w.setFromMatrixPosition(ye.matrixWorld);const Re=le.distanceTo(w),we=de.projectionMatrix.elements,be=ye.projectionMatrix.elements,Ue=we[14]/(we[10]-1),Ce=we[14]/(we[10]+1),$e=(we[9]+1)/we[5],ze=(we[9]-1)/we[5],W=(we[8]-1)/we[0],Ve=(be[8]+1)/be[0],Le=Ue*W,Be=Ue*Ve,Ye=Re/(-W+Ve),De=Ye*-W;de.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(De),Se.translateZ(Ye),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert();const oe=Ue+Ye,yt=Ce+Ye,j=Le-De,et=Be+(Re-De),Nt=$e*Ce/yt*oe,X=ze*Ce/yt*oe;Se.projectionMatrix.makePerspective(j,et,Nt,X,oe,yt)}function J(Se,de){de===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(de.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.updateCamera=function(Se){if(o===null)return;q.near=B.near=L.near=Se.near,q.far=B.far=L.far=Se.far,(Z!==q.near||ae!==q.far)&&(o.updateRenderState({depthNear:q.near,depthFar:q.far}),Z=q.near,ae=q.far);const de=Se.parent,ye=q.cameras;J(q,de);for(let we=0;we<ye.length;we++)J(ye[we],de);q.matrixWorld.decompose(q.position,q.quaternion,q.scale),Se.position.copy(q.position),Se.quaternion.copy(q.quaternion),Se.scale.copy(q.scale),Se.matrix.copy(q.matrix),Se.matrixWorld.copy(q.matrixWorld);const Re=Se.children;for(let we=0,be=Re.length;we<be;we++)Re[we].updateMatrixWorld(!0);ye.length===2?p(q,L,B):q.projectionMatrix.copy(L.projectionMatrix)},this.getCamera=function(){return q},this.getFoveation=function(){if(M!==null)return M.fixedFoveation;if(C!==null)return C.fixedFoveation},this.setFoveation=function(Se){M!==null&&(M.fixedFoveation=Se),C!==null&&C.fixedFoveation!==void 0&&(C.fixedFoveation=Se)};let E=null;function ge(Se,de){if(y=de.getViewerPose(c),O=de,y!==null){const Re=y.views;C!==null&&(e.setRenderTargetFramebuffer(P,C.framebuffer),e.setRenderTarget(P));let we=!1;Re.length!==q.cameras.length&&(q.cameras.length=0,we=!0);for(let be=0;be<Re.length;be++){const Ue=Re[be];let Ce=null;if(C!==null)Ce=C.getViewport(Ue);else{const ze=b.getViewSubImage(M,Ue);Ce=ze.viewport,be===0&&(e.setRenderTargetTextures(P,ze.colorTexture,M.ignoreDepthValues?void 0:ze.depthStencilTexture),e.setRenderTarget(P))}const $e=z[be];$e.matrix.fromArray(Ue.transform.matrix),$e.projectionMatrix.fromArray(Ue.projectionMatrix),$e.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),be===0&&q.matrix.copy($e.matrix),we===!0&&q.cameras.push($e)}}const ye=o.inputSources;for(let Re=0;Re<A.length;Re++){const we=A[Re],be=ye[Re];we.update(be,de,c)}E&&E(Se,de),O=null}const ke=new tT;ke.setAnimationLoop(ge),this.setAnimationLoop=function(Se){E=Se},this.dispose=function(){}}}function _F(s){function e(P,A){P.fogColor.value.copy(A.color),A.isFog?(P.fogNear.value=A.near,P.fogFar.value=A.far):A.isFogExp2&&(P.fogDensity.value=A.density)}function t(P,A,F,L,B){A.isMeshBasicMaterial?r(P,A):A.isMeshLambertMaterial?(r(P,A),m(P,A)):A.isMeshToonMaterial?(r(P,A),b(P,A)):A.isMeshPhongMaterial?(r(P,A),y(P,A)):A.isMeshStandardMaterial?(r(P,A),A.isMeshPhysicalMaterial?C(P,A,B):M(P,A)):A.isMeshMatcapMaterial?(r(P,A),I(P,A)):A.isMeshDepthMaterial?(r(P,A),O(P,A)):A.isMeshDistanceMaterial?(r(P,A),U(P,A)):A.isMeshNormalMaterial?(r(P,A),H(P,A)):A.isLineBasicMaterial?(o(P,A),A.isLineDashedMaterial&&l(P,A)):A.isPointsMaterial?c(P,A,F,L):A.isSpriteMaterial?h(P,A):A.isShadowMaterial?(P.color.value.copy(A.color),P.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function r(P,A){P.opacity.value=A.opacity,A.color&&P.diffuse.value.copy(A.color),A.emissive&&P.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(P.map.value=A.map),A.alphaMap&&(P.alphaMap.value=A.alphaMap),A.specularMap&&(P.specularMap.value=A.specularMap),A.alphaTest>0&&(P.alphaTest.value=A.alphaTest);const F=s.get(A).envMap;F&&(P.envMap.value=F,P.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,P.reflectivity.value=A.reflectivity,P.ior.value=A.ior,P.refractionRatio.value=A.refractionRatio),A.lightMap&&(P.lightMap.value=A.lightMap,P.lightMapIntensity.value=A.lightMapIntensity),A.aoMap&&(P.aoMap.value=A.aoMap,P.aoMapIntensity.value=A.aoMapIntensity);let L;A.map?L=A.map:A.specularMap?L=A.specularMap:A.displacementMap?L=A.displacementMap:A.normalMap?L=A.normalMap:A.bumpMap?L=A.bumpMap:A.roughnessMap?L=A.roughnessMap:A.metalnessMap?L=A.metalnessMap:A.alphaMap?L=A.alphaMap:A.emissiveMap?L=A.emissiveMap:A.clearcoatMap?L=A.clearcoatMap:A.clearcoatNormalMap?L=A.clearcoatNormalMap:A.clearcoatRoughnessMap?L=A.clearcoatRoughnessMap:A.specularIntensityMap?L=A.specularIntensityMap:A.specularColorMap?L=A.specularColorMap:A.transmissionMap?L=A.transmissionMap:A.thicknessMap?L=A.thicknessMap:A.sheenColorMap?L=A.sheenColorMap:A.sheenRoughnessMap&&(L=A.sheenRoughnessMap),L!==void 0&&(L.isWebGLRenderTarget&&(L=L.texture),L.matrixAutoUpdate===!0&&L.updateMatrix(),P.uvTransform.value.copy(L.matrix));let B;A.aoMap?B=A.aoMap:A.lightMap&&(B=A.lightMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),P.uv2Transform.value.copy(B.matrix))}function o(P,A){P.diffuse.value.copy(A.color),P.opacity.value=A.opacity}function l(P,A){P.dashSize.value=A.dashSize,P.totalSize.value=A.dashSize+A.gapSize,P.scale.value=A.scale}function c(P,A,F,L){P.diffuse.value.copy(A.color),P.opacity.value=A.opacity,P.size.value=A.size*F,P.scale.value=L*.5,A.map&&(P.map.value=A.map),A.alphaMap&&(P.alphaMap.value=A.alphaMap),A.alphaTest>0&&(P.alphaTest.value=A.alphaTest);let B;A.map?B=A.map:A.alphaMap&&(B=A.alphaMap),B!==void 0&&(B.matrixAutoUpdate===!0&&B.updateMatrix(),P.uvTransform.value.copy(B.matrix))}function h(P,A){P.diffuse.value.copy(A.color),P.opacity.value=A.opacity,P.rotation.value=A.rotation,A.map&&(P.map.value=A.map),A.alphaMap&&(P.alphaMap.value=A.alphaMap),A.alphaTest>0&&(P.alphaTest.value=A.alphaTest);let F;A.map?F=A.map:A.alphaMap&&(F=A.alphaMap),F!==void 0&&(F.matrixAutoUpdate===!0&&F.updateMatrix(),P.uvTransform.value.copy(F.matrix))}function m(P,A){A.emissiveMap&&(P.emissiveMap.value=A.emissiveMap)}function y(P,A){P.specular.value.copy(A.specular),P.shininess.value=Math.max(A.shininess,1e-4),A.emissiveMap&&(P.emissiveMap.value=A.emissiveMap),A.bumpMap&&(P.bumpMap.value=A.bumpMap,P.bumpScale.value=A.bumpScale,A.side===$n&&(P.bumpScale.value*=-1)),A.normalMap&&(P.normalMap.value=A.normalMap,P.normalScale.value.copy(A.normalScale),A.side===$n&&P.normalScale.value.negate()),A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias)}function b(P,A){A.gradientMap&&(P.gradientMap.value=A.gradientMap),A.emissiveMap&&(P.emissiveMap.value=A.emissiveMap),A.bumpMap&&(P.bumpMap.value=A.bumpMap,P.bumpScale.value=A.bumpScale,A.side===$n&&(P.bumpScale.value*=-1)),A.normalMap&&(P.normalMap.value=A.normalMap,P.normalScale.value.copy(A.normalScale),A.side===$n&&P.normalScale.value.negate()),A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias)}function M(P,A){P.roughness.value=A.roughness,P.metalness.value=A.metalness,A.roughnessMap&&(P.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(P.metalnessMap.value=A.metalnessMap),A.emissiveMap&&(P.emissiveMap.value=A.emissiveMap),A.bumpMap&&(P.bumpMap.value=A.bumpMap,P.bumpScale.value=A.bumpScale,A.side===$n&&(P.bumpScale.value*=-1)),A.normalMap&&(P.normalMap.value=A.normalMap,P.normalScale.value.copy(A.normalScale),A.side===$n&&P.normalScale.value.negate()),A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias),s.get(A).envMap&&(P.envMapIntensity.value=A.envMapIntensity)}function C(P,A,F){M(P,A),P.ior.value=A.ior,A.sheen>0&&(P.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),P.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(P.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(P.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(P.clearcoat.value=A.clearcoat,P.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(P.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(P.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(P.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),P.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===$n&&P.clearcoatNormalScale.value.negate())),A.transmission>0&&(P.transmission.value=A.transmission,P.transmissionSamplerMap.value=F.texture,P.transmissionSamplerSize.value.set(F.width,F.height),A.transmissionMap&&(P.transmissionMap.value=A.transmissionMap),P.thickness.value=A.thickness,A.thicknessMap&&(P.thicknessMap.value=A.thicknessMap),P.attenuationDistance.value=A.attenuationDistance,P.attenuationColor.value.copy(A.attenuationColor)),P.specularIntensity.value=A.specularIntensity,P.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(P.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(P.specularColorMap.value=A.specularColorMap)}function I(P,A){A.matcap&&(P.matcap.value=A.matcap),A.bumpMap&&(P.bumpMap.value=A.bumpMap,P.bumpScale.value=A.bumpScale,A.side===$n&&(P.bumpScale.value*=-1)),A.normalMap&&(P.normalMap.value=A.normalMap,P.normalScale.value.copy(A.normalScale),A.side===$n&&P.normalScale.value.negate()),A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias)}function O(P,A){A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias)}function U(P,A){A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias),P.referencePosition.value.copy(A.referencePosition),P.nearDistance.value=A.nearDistance,P.farDistance.value=A.farDistance}function H(P,A){A.bumpMap&&(P.bumpMap.value=A.bumpMap,P.bumpScale.value=A.bumpScale,A.side===$n&&(P.bumpScale.value*=-1)),A.normalMap&&(P.normalMap.value=A.normalMap,P.normalScale.value.copy(A.normalScale),A.side===$n&&P.normalScale.value.negate()),A.displacementMap&&(P.displacementMap.value=A.displacementMap,P.displacementScale.value=A.displacementScale,P.displacementBias.value=A.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function wF(){const s=hh("canvas");return s.style.display="block",s}function vn(s={}){const e=s.canvas!==void 0?s.canvas:wF(),t=s.context!==void 0?s.context:null,r=s.alpha!==void 0?s.alpha:!1,o=s.depth!==void 0?s.depth:!0,l=s.stencil!==void 0?s.stencil:!0,c=s.antialias!==void 0?s.antialias:!1,h=s.premultipliedAlpha!==void 0?s.premultipliedAlpha:!0,m=s.preserveDrawingBuffer!==void 0?s.preserveDrawingBuffer:!1,y=s.powerPreference!==void 0?s.powerPreference:"default",b=s.failIfMajorPerformanceCaveat!==void 0?s.failIfMajorPerformanceCaveat:!1;let M=null,C=null;const I=[],O=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ki,this.physicallyCorrectLights=!1,this.toneMapping=io,this.toneMappingExposure=1;const U=this;let H=!1,P=0,A=0,F=null,L=-1,B=null;const z=new an,q=new an;let Z=null,ae=e.width,ce=e.height,ee=1,ue=null,le=null;const w=new an(0,0,ae,ce),p=new an(0,0,ae,ce);let J=!1;const E=new yh;let ge=!1,ke=!1,Se=null;const de=new Je,ye=new he,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function we(){return F===null?ee:1}let be=t;function Ue(pe,Te){for(let Oe=0;Oe<pe.length;Oe++){const Pe=pe[Oe],He=e.getContext(Pe,Te);if(He!==null)return He}return null}try{const pe={alpha:!0,depth:o,stencil:l,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:m,powerPreference:y,failIfMajorPerformanceCaveat:b};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${vi}`),e.addEventListener("webglcontextlost",V,!1),e.addEventListener("webglcontextrestored",G,!1),be===null){const Te=["webgl2","webgl","experimental-webgl"];if(U.isWebGL1Renderer===!0&&Te.shift(),be=Ue(Te,pe),be===null)throw Ue(Te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}be.getShaderPrecisionFormat===void 0&&(be.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let Ce,$e,ze,W,Ve,Le,Be,Ye,De,oe,yt,j,et,Nt,X,n,i,a,f,g,v,S,R;function k(){Ce=new HD(be),$e=new DD(be,Ce,s),Ce.init($e),S=new OT(be,Ce,$e),ze=new gF(be,Ce,$e),W=new WD(be),Ve=new sF,Le=new vF(be,Ce,ze,Ve,$e,S,W),Be=new FD(U),Ye=new zD(U),De=new sk(be,$e),R=new kD(be,Ce,De,$e),oe=new GD(be,De,W,R),yt=new XD(be,oe,De,W),f=new qD(be,$e,Le),n=new ND(Ve),j=new iF(U,Be,Ye,Ce,$e,R,n),et=new _F(Ve),Nt=new aF,X=new dF(Ce,$e),a=new PD(U,Be,ze,yt,r,h),i=new kT(U,yt,$e),g=new OD(be,Ce,W,$e),v=new VD(be,Ce,W,$e),W.programs=j.programs,U.capabilities=$e,U.extensions=Ce,U.properties=Ve,U.renderLists=Nt,U.shadowMap=i,U.state=ze,U.info=W}k();const D=new xF(U,be);this.xr=D,this.getContext=function(){return be},this.getContextAttributes=function(){return be.getContextAttributes()},this.forceContextLoss=function(){const pe=Ce.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=Ce.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(pe){pe!==void 0&&(ee=pe,this.setSize(ae,ce,!1))},this.getSize=function(pe){return pe.set(ae,ce)},this.setSize=function(pe,Te,Oe){if(D.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=pe,ce=Te,e.width=Math.floor(pe*ee),e.height=Math.floor(Te*ee),Oe!==!1&&(e.style.width=pe+"px",e.style.height=Te+"px"),this.setViewport(0,0,pe,Te)},this.getDrawingBufferSize=function(pe){return pe.set(ae*ee,ce*ee).floor()},this.setDrawingBufferSize=function(pe,Te,Oe){ae=pe,ce=Te,ee=Oe,e.width=Math.floor(pe*Oe),e.height=Math.floor(Te*Oe),this.setViewport(0,0,pe,Te)},this.getCurrentViewport=function(pe){return pe.copy(z)},this.getViewport=function(pe){return pe.copy(w)},this.setViewport=function(pe,Te,Oe,Pe){pe.isVector4?w.set(pe.x,pe.y,pe.z,pe.w):w.set(pe,Te,Oe,Pe),ze.viewport(z.copy(w).multiplyScalar(ee).floor())},this.getScissor=function(pe){return pe.copy(p)},this.setScissor=function(pe,Te,Oe,Pe){pe.isVector4?p.set(pe.x,pe.y,pe.z,pe.w):p.set(pe,Te,Oe,Pe),ze.scissor(q.copy(p).multiplyScalar(ee).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(pe){ze.setScissorTest(J=pe)},this.setOpaqueSort=function(pe){ue=pe},this.setTransparentSort=function(pe){le=pe},this.getClearColor=function(pe){return pe.copy(a.getClearColor())},this.setClearColor=function(){a.setClearColor.apply(a,arguments)},this.getClearAlpha=function(){return a.getClearAlpha()},this.setClearAlpha=function(){a.setClearAlpha.apply(a,arguments)},this.clear=function(pe,Te,Oe){let Pe=0;(pe===void 0||pe)&&(Pe|=16384),(Te===void 0||Te)&&(Pe|=256),(Oe===void 0||Oe)&&(Pe|=1024),be.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",V,!1),e.removeEventListener("webglcontextrestored",G,!1),Nt.dispose(),X.dispose(),Ve.dispose(),Be.dispose(),Ye.dispose(),yt.dispose(),R.dispose(),j.dispose(),D.dispose(),D.removeEventListener("sessionstart",me),D.removeEventListener("sessionend",Ie),Se&&(Se.dispose(),Se=null),Xe.stop()};function V(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),H=!0}function G(){console.log("THREE.WebGLRenderer: Context Restored."),H=!1;const pe=W.autoReset,Te=i.enabled,Oe=i.autoUpdate,Pe=i.needsUpdate,He=i.type;k(),W.autoReset=pe,i.enabled=Te,i.autoUpdate=Oe,i.needsUpdate=Pe,i.type=He}function K(pe){const Te=pe.target;Te.removeEventListener("dispose",K),Q(Te)}function Q(pe){ne(pe),Ve.remove(pe)}function ne(pe){const Te=Ve.get(pe).programs;Te!==void 0&&(Te.forEach(function(Oe){j.releaseProgram(Oe)}),pe.isShaderMaterial&&j.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,Te,Oe,Pe,He,Ae){Te===null&&(Te=Re);const xt=He.isMesh&&He.matrixWorld.determinant()<0,Et=tn(pe,Te,Oe,Pe,He);ze.setMaterial(Pe,xt);let Rt=Oe.index;const Ft=Oe.attributes.position;if(Rt===null){if(Ft===void 0||Ft.count===0)return}else if(Rt.count===0)return;let jt=1;Pe.wireframe===!0&&(Rt=oe.getWireframeAttribute(Oe),jt=2),R.setup(He,Pe,Et,Oe,Rt);let Xt,nn=g;Rt!==null&&(Xt=De.get(Rt),nn=v,nn.setIndex(Xt));const Kn=Rt!==null?Rt.count:Ft.count,Vn=Oe.drawRange.start*jt,Yt=Oe.drawRange.count*jt,wr=Ae!==null?Ae.start*jt:0,Gt=Ae!==null?Ae.count*jt:1/0,lt=Math.max(Vn,wr),kr=Math.min(Kn,Vn+Yt,wr+Gt)-1,br=Math.max(0,kr-lt+1);if(br!==0){if(He.isMesh)Pe.wireframe===!0?(ze.setLineWidth(Pe.wireframeLinewidth*we()),nn.setMode(1)):nn.setMode(4);else if(He.isLine){let Mn=Pe.linewidth;Mn===void 0&&(Mn=1),ze.setLineWidth(Mn*we()),He.isLineSegments?nn.setMode(1):He.isLineLoop?nn.setMode(2):nn.setMode(3)}else He.isPoints?nn.setMode(0):He.isSprite&&nn.setMode(4);if(He.isInstancedMesh)nn.renderInstances(lt,br,He.count);else if(Oe.isInstancedBufferGeometry){const Mn=Math.min(Oe.instanceCount,Oe._maxInstanceCount);nn.renderInstances(lt,br,Mn)}else nn.render(lt,br)}},this.compile=function(pe,Te){C=X.get(pe),C.init(),O.push(C),pe.traverseVisible(function(Oe){Oe.isLight&&Oe.layers.test(Te.layers)&&(C.pushLight(Oe),Oe.castShadow&&C.pushShadow(Oe))}),C.setupLights(U.physicallyCorrectLights),pe.traverse(function(Oe){const Pe=Oe.material;if(Pe)if(Array.isArray(Pe))for(let He=0;He<Pe.length;He++){const Ae=Pe[He];pt(Ae,pe,Oe)}else pt(Pe,pe,Oe)}),O.pop(),C=null};let ie=null;function fe(pe){ie&&ie(pe)}function me(){Xe.stop()}function Ie(){Xe.start()}const Xe=new tT;Xe.setAnimationLoop(fe),typeof window!="undefined"&&Xe.setContext(window),this.setAnimationLoop=function(pe){ie=pe,D.setAnimationLoop(pe),pe===null?Xe.stop():Xe.start()},D.addEventListener("sessionstart",me),D.addEventListener("sessionend",Ie),this.render=function(pe,Te){if(Te!==void 0&&Te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;pe.autoUpdate===!0&&pe.updateMatrixWorld(),Te.parent===null&&Te.updateMatrixWorld(),D.enabled===!0&&D.isPresenting===!0&&(D.cameraAutoUpdate===!0&&D.updateCamera(Te),Te=D.getCamera()),pe.isScene===!0&&pe.onBeforeRender(U,pe,Te,F),C=X.get(pe,O.length),C.init(),O.push(C),de.multiplyMatrices(Te.projectionMatrix,Te.matrixWorldInverse),E.setFromProjectionMatrix(de),ke=this.localClippingEnabled,ge=n.init(this.clippingPlanes,ke,Te),M=Nt.get(pe,I.length),M.init(),I.push(M),Fe(pe,Te,0,U.sortObjects),M.finish(),U.sortObjects===!0&&M.sort(ue,le),ge===!0&&n.beginShadows();const Oe=C.state.shadowsArray;if(i.render(Oe,pe,Te),ge===!0&&n.endShadows(),this.info.autoReset===!0&&this.info.reset(),a.render(M,pe),C.setupLights(U.physicallyCorrectLights),Te.isArrayCamera){const Pe=Te.cameras;for(let He=0,Ae=Pe.length;He<Ae;He++){const xt=Pe[He];mt(M,pe,xt,xt.viewport)}}else mt(M,pe,Te);F!==null&&(Le.updateMultisampleRenderTarget(F),Le.updateRenderTargetMipmap(F)),pe.isScene===!0&&pe.onAfterRender(U,pe,Te),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1),R.resetDefaultState(),L=-1,B=null,O.pop(),O.length>0?C=O[O.length-1]:C=null,I.pop(),I.length>0?M=I[I.length-1]:M=null};function Fe(pe,Te,Oe,Pe){if(pe.visible===!1)return;if(pe.layers.test(Te.layers)){if(pe.isGroup)Oe=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(Te);else if(pe.isLight)C.pushLight(pe),pe.castShadow&&C.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||E.intersectsSprite(pe)){Pe&&ye.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(de);const xt=yt.update(pe),Et=pe.material;Et.visible&&M.push(pe,xt,Et,Oe,ye.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(pe.isSkinnedMesh&&pe.skeleton.frame!==W.render.frame&&(pe.skeleton.update(),pe.skeleton.frame=W.render.frame),!pe.frustumCulled||E.intersectsObject(pe))){Pe&&ye.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(de);const xt=yt.update(pe),Et=pe.material;if(Array.isArray(Et)){const Rt=xt.groups;for(let Ft=0,jt=Rt.length;Ft<jt;Ft++){const Xt=Rt[Ft],nn=Et[Xt.materialIndex];nn&&nn.visible&&M.push(pe,xt,nn,Oe,ye.z,Xt)}}else Et.visible&&M.push(pe,xt,Et,Oe,ye.z,null)}}const Ae=pe.children;for(let xt=0,Et=Ae.length;xt<Et;xt++)Fe(Ae[xt],Te,Oe,Pe)}function mt(pe,Te,Oe,Pe){const He=pe.opaque,Ae=pe.transmissive,xt=pe.transparent;C.setupLightsView(Oe),Ae.length>0&&at(He,Te,Oe),Pe&&ze.viewport(z.copy(Pe)),He.length>0&&wt(He,Te,Oe),Ae.length>0&&wt(Ae,Te,Oe),xt.length>0&&wt(xt,Te,Oe)}function at(pe,Te,Oe){if(Se===null){const xt=c===!0&&$e.isWebGL2===!0?em:Di;Se=new xt(1024,1024,{generateMipmaps:!0,type:S.convert(sl)!==null?sl:Is,minFilter:so,magFilter:jn,wrapS:fr,wrapT:fr,useRenderToTexture:Ce.has("WEBGL_multisampled_render_to_texture")})}const Pe=U.getRenderTarget();U.setRenderTarget(Se),U.clear();const He=U.toneMapping;U.toneMapping=io,wt(pe,Te,Oe),U.toneMapping=He,Le.updateMultisampleRenderTarget(Se),Le.updateRenderTargetMipmap(Se),U.setRenderTarget(Pe)}function wt(pe,Te,Oe){const Pe=Te.isScene===!0?Te.overrideMaterial:null;for(let He=0,Ae=pe.length;He<Ae;He++){const xt=pe[He],Et=xt.object,Rt=xt.geometry,Ft=Pe===null?xt.material:Pe,jt=xt.group;Et.layers.test(Oe.layers)&&gt(Et,Te,Oe,Rt,Ft,jt)}}function gt(pe,Te,Oe,Pe,He,Ae){pe.onBeforeRender(U,Te,Oe,Pe,He,Ae),pe.modelViewMatrix.multiplyMatrices(Oe.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),He.onBeforeRender(U,Te,Oe,Pe,pe,Ae),He.transparent===!0&&He.side===Rs?(He.side=$n,He.needsUpdate=!0,U.renderBufferDirect(Oe,Te,Pe,He,pe,Ae),He.side=jo,He.needsUpdate=!0,U.renderBufferDirect(Oe,Te,Pe,He,pe,Ae),He.side=Rs):U.renderBufferDirect(Oe,Te,Pe,He,pe,Ae),pe.onAfterRender(U,Te,Oe,Pe,He,Ae)}function pt(pe,Te,Oe){Te.isScene!==!0&&(Te=Re);const Pe=Ve.get(pe),He=C.state.lights,Ae=C.state.shadowsArray,xt=He.state.version,Et=j.getParameters(pe,He.state,Ae,Te,Oe),Rt=j.getProgramCacheKey(Et);let Ft=Pe.programs;Pe.environment=pe.isMeshStandardMaterial?Te.environment:null,Pe.fog=Te.fog,Pe.envMap=(pe.isMeshStandardMaterial?Ye:Be).get(pe.envMap||Pe.environment),Ft===void 0&&(pe.addEventListener("dispose",K),Ft=new Map,Pe.programs=Ft);let jt=Ft.get(Rt);if(jt!==void 0){if(Pe.currentProgram===jt&&Pe.lightsStateVersion===xt)return bn(pe,Et),jt}else Et.uniforms=j.getUniforms(pe),pe.onBuild(Oe,Et,U),pe.onBeforeCompile(Et,U),jt=j.acquireProgram(Et,Rt),Ft.set(Rt,jt),Pe.uniforms=Et.uniforms;const Xt=Pe.uniforms;(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(Xt.clippingPlanes=n.uniform),bn(pe,Et),Pe.needsLights=mn(pe),Pe.lightsStateVersion=xt,Pe.needsLights&&(Xt.ambientLightColor.value=He.state.ambient,Xt.lightProbe.value=He.state.probe,Xt.directionalLights.value=He.state.directional,Xt.directionalLightShadows.value=He.state.directionalShadow,Xt.spotLights.value=He.state.spot,Xt.spotLightShadows.value=He.state.spotShadow,Xt.rectAreaLights.value=He.state.rectArea,Xt.ltc_1.value=He.state.rectAreaLTC1,Xt.ltc_2.value=He.state.rectAreaLTC2,Xt.pointLights.value=He.state.point,Xt.pointLightShadows.value=He.state.pointShadow,Xt.hemisphereLights.value=He.state.hemi,Xt.directionalShadowMap.value=He.state.directionalShadowMap,Xt.directionalShadowMatrix.value=He.state.directionalShadowMatrix,Xt.spotShadowMap.value=He.state.spotShadowMap,Xt.spotShadowMatrix.value=He.state.spotShadowMatrix,Xt.pointShadowMap.value=He.state.pointShadowMap,Xt.pointShadowMatrix.value=He.state.pointShadowMatrix);const nn=jt.getUniforms(),Kn=sa.seqWithValue(nn.seq,Xt);return Pe.currentProgram=jt,Pe.uniformsList=Kn,jt}function bn(pe,Te){const Oe=Ve.get(pe);Oe.outputEncoding=Te.outputEncoding,Oe.instancing=Te.instancing,Oe.skinning=Te.skinning,Oe.morphTargets=Te.morphTargets,Oe.morphNormals=Te.morphNormals,Oe.morphTargetsCount=Te.morphTargetsCount,Oe.numClippingPlanes=Te.numClippingPlanes,Oe.numIntersection=Te.numClipIntersection,Oe.vertexAlphas=Te.vertexAlphas,Oe.vertexTangents=Te.vertexTangents,Oe.toneMapping=Te.toneMapping}function tn(pe,Te,Oe,Pe,He){Te.isScene!==!0&&(Te=Re),Le.resetTextureUnits();const Ae=Te.fog,xt=Pe.isMeshStandardMaterial?Te.environment:null,Et=F===null?U.outputEncoding:F.isXRRenderTarget===!0?F.texture.encoding:ki,Rt=(Pe.isMeshStandardMaterial?Ye:Be).get(Pe.envMap||xt),Ft=Pe.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,jt=!!Pe.normalMap&&!!Oe.attributes.tangent,Xt=!!Oe.morphAttributes.position,nn=!!Oe.morphAttributes.normal,Kn=Oe.morphAttributes.position?Oe.morphAttributes.position.length:0,Vn=Pe.toneMapped?U.toneMapping:io,Yt=Ve.get(Pe),wr=C.state.lights;if(ge===!0&&(ke===!0||pe!==B)){const Zn=pe===B&&Pe.id===L;n.setState(Pe,pe,Zn)}let Gt=!1;Pe.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==wr.state.version||Yt.outputEncoding!==Et||He.isInstancedMesh&&Yt.instancing===!1||!He.isInstancedMesh&&Yt.instancing===!0||He.isSkinnedMesh&&Yt.skinning===!1||!He.isSkinnedMesh&&Yt.skinning===!0||Yt.envMap!==Rt||Pe.fog&&Yt.fog!==Ae||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==n.numPlanes||Yt.numIntersection!==n.numIntersection)||Yt.vertexAlphas!==Ft||Yt.vertexTangents!==jt||Yt.morphTargets!==Xt||Yt.morphNormals!==nn||Yt.toneMapping!==Vn||$e.isWebGL2===!0&&Yt.morphTargetsCount!==Kn)&&(Gt=!0):(Gt=!0,Yt.__version=Pe.version);let lt=Yt.currentProgram;Gt===!0&&(lt=pt(Pe,Te,He));let kr=!1,br=!1,Mn=!1;const Pt=lt.getUniforms(),Sr=Yt.uniforms;if(ze.useProgram(lt.program)&&(kr=!0,br=!0,Mn=!0),Pe.id!==L&&(L=Pe.id,br=!0),kr||B!==pe){if(Pt.setValue(be,"projectionMatrix",pe.projectionMatrix),$e.logarithmicDepthBuffer&&Pt.setValue(be,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),B!==pe&&(B=pe,br=!0,Mn=!0),Pe.isShaderMaterial||Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshStandardMaterial||Pe.envMap){const Zn=Pt.map.cameraPosition;Zn!==void 0&&Zn.setValue(be,ye.setFromMatrixPosition(pe.matrixWorld))}(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&Pt.setValue(be,"isOrthographic",pe.isOrthographicCamera===!0),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial||Pe.isShadowMaterial||He.isSkinnedMesh)&&Pt.setValue(be,"viewMatrix",pe.matrixWorldInverse)}if(He.isSkinnedMesh){Pt.setOptional(be,He,"bindMatrix"),Pt.setOptional(be,He,"bindMatrixInverse");const Zn=He.skeleton;Zn&&($e.floatVertexTextures?(Zn.boneTexture===null&&Zn.computeBoneTexture(),Pt.setValue(be,"boneTexture",Zn.boneTexture,Le),Pt.setValue(be,"boneTextureSize",Zn.boneTextureSize)):Pt.setOptional(be,Zn,"boneMatrices"))}return!!Oe&&(Oe.morphAttributes.position!==void 0||Oe.morphAttributes.normal!==void 0)&&f.update(He,Oe,Pe,lt),(br||Yt.receiveShadow!==He.receiveShadow)&&(Yt.receiveShadow=He.receiveShadow,Pt.setValue(be,"receiveShadow",He.receiveShadow)),br&&(Pt.setValue(be,"toneMappingExposure",U.toneMappingExposure),Yt.needsLights&&Sn(Sr,Mn),Ae&&Pe.fog&&et.refreshFogUniforms(Sr,Ae),et.refreshMaterialUniforms(Sr,Pe,ee,ce,Se),sa.upload(be,Yt.uniformsList,Sr,Le)),Pe.isShaderMaterial&&Pe.uniformsNeedUpdate===!0&&(sa.upload(be,Yt.uniformsList,Sr,Le),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&Pt.setValue(be,"center",He.center),Pt.setValue(be,"modelViewMatrix",He.modelViewMatrix),Pt.setValue(be,"normalMatrix",He.normalMatrix),Pt.setValue(be,"modelMatrix",He.matrixWorld),lt}function Sn(pe,Te){pe.ambientLightColor.needsUpdate=Te,pe.lightProbe.needsUpdate=Te,pe.directionalLights.needsUpdate=Te,pe.directionalLightShadows.needsUpdate=Te,pe.pointLights.needsUpdate=Te,pe.pointLightShadows.needsUpdate=Te,pe.spotLights.needsUpdate=Te,pe.spotLightShadows.needsUpdate=Te,pe.rectAreaLights.needsUpdate=Te,pe.hemisphereLights.needsUpdate=Te}function mn(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(pe,Te,Oe){Ve.get(pe.texture).__webglTexture=Te,Ve.get(pe.depthTexture).__webglTexture=Oe;const Pe=Ve.get(pe);Pe.__hasExternalTextures=!0,Pe.__hasExternalTextures&&(Pe.__autoAllocateDepthBuffer=Oe===void 0,Pe.__autoAllocateDepthBuffer||pe.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),pe.useRenderToTexture=!1,pe.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(pe,Te){const Oe=Ve.get(pe);Oe.__webglFramebuffer=Te,Oe.__useDefaultFramebuffer=Te===void 0},this.setRenderTarget=function(pe,Te=0,Oe=0){F=pe,P=Te,A=Oe;let Pe=!0;if(pe){const Rt=Ve.get(pe);Rt.__useDefaultFramebuffer!==void 0?(ze.bindFramebuffer(36160,null),Pe=!1):Rt.__webglFramebuffer===void 0?Le.setupRenderTarget(pe):Rt.__hasExternalTextures&&Le.rebindTextures(pe,Ve.get(pe.texture).__webglTexture,Ve.get(pe.depthTexture).__webglTexture)}let He=null,Ae=!1,xt=!1;if(pe){const Rt=pe.texture;(Rt.isDataTexture3D||Rt.isDataTexture2DArray)&&(xt=!0);const Ft=Ve.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(He=Ft[Te],Ae=!0):pe.useRenderbuffer?He=Ve.get(pe).__webglMultisampledFramebuffer:He=Ft,z.copy(pe.viewport),q.copy(pe.scissor),Z=pe.scissorTest}else z.copy(w).multiplyScalar(ee).floor(),q.copy(p).multiplyScalar(ee).floor(),Z=J;if(ze.bindFramebuffer(36160,He)&&$e.drawBuffers&&Pe&&ze.drawBuffers(pe,He),ze.viewport(z),ze.scissor(q),ze.setScissorTest(Z),Ae){const Rt=Ve.get(pe.texture);be.framebufferTexture2D(36160,36064,34069+Te,Rt.__webglTexture,Oe)}else if(xt){const Rt=Ve.get(pe.texture),Ft=Te||0;be.framebufferTextureLayer(36160,36064,Rt.__webglTexture,Oe||0,Ft)}L=-1},this.readRenderTargetPixels=function(pe,Te,Oe,Pe,He,Ae,xt){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=Ve.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&xt!==void 0&&(Et=Et[xt]),Et){ze.bindFramebuffer(36160,Et);try{const Rt=pe.texture,Ft=Rt.format,jt=Rt.type;if(Ft!==Er&&S.convert(Ft)!==be.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Xt=jt===sl&&(Ce.has("EXT_color_buffer_half_float")||$e.isWebGL2&&Ce.has("EXT_color_buffer_float"));if(jt!==Is&&S.convert(jt)!==be.getParameter(35738)&&!(jt===oo&&($e.isWebGL2||Ce.has("OES_texture_float")||Ce.has("WEBGL_color_buffer_float")))&&!Xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be.checkFramebufferStatus(36160)===36053?Te>=0&&Te<=pe.width-Pe&&Oe>=0&&Oe<=pe.height-He&&be.readPixels(Te,Oe,Pe,He,S.convert(Ft),S.convert(jt),Ae):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Rt=F!==null?Ve.get(F).__webglFramebuffer:null;ze.bindFramebuffer(36160,Rt)}}},this.copyFramebufferToTexture=function(pe,Te,Oe=0){if(Te.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Pe=Math.pow(2,-Oe),He=Math.floor(Te.image.width*Pe),Ae=Math.floor(Te.image.height*Pe);Le.setTexture2D(Te,0),be.copyTexSubImage2D(3553,Oe,0,0,pe.x,pe.y,He,Ae),ze.unbindTexture()},this.copyTextureToTexture=function(pe,Te,Oe,Pe=0){const He=Te.image.width,Ae=Te.image.height,xt=S.convert(Oe.format),Et=S.convert(Oe.type);Le.setTexture2D(Oe,0),be.pixelStorei(37440,Oe.flipY),be.pixelStorei(37441,Oe.premultiplyAlpha),be.pixelStorei(3317,Oe.unpackAlignment),Te.isDataTexture?be.texSubImage2D(3553,Pe,pe.x,pe.y,He,Ae,xt,Et,Te.image.data):Te.isCompressedTexture?be.compressedTexSubImage2D(3553,Pe,pe.x,pe.y,Te.mipmaps[0].width,Te.mipmaps[0].height,xt,Te.mipmaps[0].data):be.texSubImage2D(3553,Pe,pe.x,pe.y,xt,Et,Te.image),Pe===0&&Oe.generateMipmaps&&be.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(pe,Te,Oe,Pe,He=0){if(U.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ae=pe.max.x-pe.min.x+1,xt=pe.max.y-pe.min.y+1,Et=pe.max.z-pe.min.z+1,Rt=S.convert(Pe.format),Ft=S.convert(Pe.type);let jt;if(Pe.isDataTexture3D)Le.setTexture3D(Pe,0),jt=32879;else if(Pe.isDataTexture2DArray)Le.setTexture2DArray(Pe,0),jt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}be.pixelStorei(37440,Pe.flipY),be.pixelStorei(37441,Pe.premultiplyAlpha),be.pixelStorei(3317,Pe.unpackAlignment);const Xt=be.getParameter(3314),nn=be.getParameter(32878),Kn=be.getParameter(3316),Vn=be.getParameter(3315),Yt=be.getParameter(32877),wr=Oe.isCompressedTexture?Oe.mipmaps[0]:Oe.image;be.pixelStorei(3314,wr.width),be.pixelStorei(32878,wr.height),be.pixelStorei(3316,pe.min.x),be.pixelStorei(3315,pe.min.y),be.pixelStorei(32877,pe.min.z),Oe.isDataTexture||Oe.isDataTexture3D?be.texSubImage3D(jt,He,Te.x,Te.y,Te.z,Ae,xt,Et,Rt,Ft,wr.data):Oe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),be.compressedTexSubImage3D(jt,He,Te.x,Te.y,Te.z,Ae,xt,Et,Rt,wr.data)):be.texSubImage3D(jt,He,Te.x,Te.y,Te.z,Ae,xt,Et,Rt,Ft,wr),be.pixelStorei(3314,Xt),be.pixelStorei(32878,nn),be.pixelStorei(3316,Kn),be.pixelStorei(3315,Vn),be.pixelStorei(32877,Yt),He===0&&Pe.generateMipmaps&&be.generateMipmap(jt),ze.unbindTexture()},this.initTexture=function(pe){Le.setTexture2D(pe,0),ze.unbindTexture()},this.resetState=function(){P=0,A=0,F=null,ze.reset(),R.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}vn.prototype.isWebGLRenderer=!0;class DT extends vn{}DT.prototype.isWebGL1Renderer=!0;class wh{constructor(e,t=25e-5){this.name="",this.color=new Ze(e),this.density=t}clone(){return new wh(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}wh.prototype.isFogExp2=!0;class bh{constructor(e,t=1,r=1e3){this.name="",this.color=new Ze(e),this.near=t,this.far=r}clone(){return new bh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}bh.prototype.isFog=!0;class Rm extends Wt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Rm.prototype.isScene=!0;class oa{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Uu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Oi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}oa.prototype.isInterleavedBuffer=!0;const rr=new he;class go{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=o===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)rr.x=this.getX(t),rr.y=this.getY(t),rr.z=this.getZ(t),rr.applyMatrix4(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)rr.x=this.getX(t),rr.y=this.getY(t),rr.z=this.getZ(t),rr.applyNormalMatrix(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)rr.x=this.getX(t),rr.y=this.getY(t),rr.z=this.getZ(t),rr.transformDirection(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new Dt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new go(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}go.prototype.isInterleavedBufferAttribute=!0;class Lm extends nr{constructor(e){super();this.type="SpriteMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}Lm.prototype.isSpriteMaterial=!0;let lc;const Sh=new he,uc=new he,cc=new he,fc=new je,Mh=new je,NT=new Je,Im=new he,Th=new he,Pm=new he,FT=new je,lx=new je,BT=new je;class km extends Wt{constructor(e){super();if(this.type="Sprite",lc===void 0){lc=new St;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new oa(t,5);lc.setIndex([0,1,2,0,2,3]),lc.setAttribute("position",new go(r,3,0,!1)),lc.setAttribute("uv",new go(r,2,3,!1))}this.geometry=lc,this.material=e!==void 0?e:new Lm,this.center=new je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),uc.setFromMatrixScale(this.matrixWorld),NT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&uc.multiplyScalar(-cc.z);const r=this.material.rotation;let o,l;r!==0&&(l=Math.cos(r),o=Math.sin(r));const c=this.center;Om(Im.set(-.5,-.5,0),cc,c,uc,o,l),Om(Th.set(.5,-.5,0),cc,c,uc,o,l),Om(Pm.set(.5,.5,0),cc,c,uc,o,l),FT.set(0,0),lx.set(1,0),BT.set(1,1);let h=e.ray.intersectTriangle(Im,Th,Pm,!1,Sh);if(h===null&&(Om(Th.set(-.5,.5,0),cc,c,uc,o,l),lx.set(0,1),h=e.ray.intersectTriangle(Im,Pm,Th,!1,Sh),h===null))return;const m=e.ray.origin.distanceTo(Sh);m<e.near||m>e.far||t.push({distance:m,point:Sh.clone(),uv:tr.getUV(Sh,Im,Th,Pm,FT,lx,BT,new je),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}km.prototype.isSprite=!0;function Om(s,e,t,r,o,l){fc.subVectors(s,t).addScalar(.5).multiply(r),o!==void 0?(Mh.x=l*fc.x-o*fc.y,Mh.y=o*fc.x+l*fc.y):Mh.copy(fc),s.copy(e),s.x+=Mh.x,s.y+=Mh.y,s.applyMatrix4(NT)}const Dm=new he,UT=new he;class zT extends Wt{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,o=t.length;r<o;r++){const l=t[r];this.addLevel(l.object.clone(),l.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,o;for(r=1,o=t.length;r<o&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Dm.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(Dm);this.getObjectForDistance(o).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Dm.setFromMatrixPosition(e.matrixWorld),UT.setFromMatrixPosition(this.matrixWorld);const r=Dm.distanceTo(UT)/e.zoom;t[0].object.visible=!0;let o,l;for(o=1,l=t.length;o<l&&r>=t[o].distance;o++)t[o-1].object.visible=!1,t[o].object.visible=!0;for(this._currentLevel=o-1;o<l;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let o=0,l=r.length;o<l;o++){const c=r[o];t.object.levels.push({object:c.object.uuid,distance:c.distance})}return t}}const HT=new he,GT=new an,VT=new an,bF=new he,WT=new Je;class xl extends Nn{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Je,this.bindMatrixInverse=new Je}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;GT.fromBufferAttribute(o.attributes.skinIndex,e),VT.fromBufferAttribute(o.attributes.skinWeight,e),HT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const c=VT.getComponent(l);if(c!==0){const h=GT.getComponent(l);WT.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),t.addScaledVector(bF.copy(HT).applyMatrix4(WT),c)}}return t.applyMatrix4(this.bindMatrixInverse)}}xl.prototype.isSkinnedMesh=!0;class _l extends Wt{constructor(){super();this.type="Bone"}}_l.prototype.isBone=!0;class wl extends Dn{constructor(e=null,t=1,r=1,o,l,c,h,m,y=jn,b=jn,M,C){super(null,c,h,m,y,b,o,l,M,C);this.image={data:e,width:t,height:r},this.magFilter=y,this.minFilter=b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}wl.prototype.isDataTexture=!0;const $T=new Je,SF=new Je;class aa{constructor(e=[],t=[]){this.uuid=Oi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new Je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Je;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let l=0,c=e.length;l<c;l++){const h=e[l]?e[l].matrixWorld:SF;$T.multiplyMatrices(h,t[l]),$T.toArray(r,l*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new aa(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=PM(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new wl(t,e,e,Er,oo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const l=e.bones[r];let c=t[l];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),c=new _l),this.bones.push(c),this.boneInverses.push(new Je().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,l=t.length;o<l;o++){const c=t[o];e.bones.push(c.uuid);const h=r[o];e.boneInverses.push(h.toArray())}return e}}class bl extends Dt{constructor(e,t,r,o=1){typeof r=="number"&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}bl.prototype.isInstancedBufferAttribute=!0;const jT=new Je,qT=new Je,Nm=[],Eh=new Nn;class ux extends Nn{constructor(e,t,r){super(e,t);this.instanceMatrix=new bl(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(Eh.geometry=this.geometry,Eh.material=this.material,Eh.material!==void 0)for(let l=0;l<o;l++){this.getMatrixAt(l,jT),qT.multiplyMatrices(r,jT),Eh.matrixWorld=qT,Eh.raycast(e,Nm);for(let c=0,h=Nm.length;c<h;c++){const m=Nm[c];m.instanceId=l,m.object=this,t.push(m)}Nm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new bl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}ux.prototype.isInstancedMesh=!0;class Fn extends nr{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ze(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Fn.prototype.isLineBasicMaterial=!0;const XT=new he,YT=new he,KT=new Je,cx=new Jo,Fm=new uo;class Xi extends Wt{constructor(e=new St,t=new Fn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let o=1,l=t.count;o<l;o++)XT.fromBufferAttribute(t,o-1),YT.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=XT.distanceTo(YT);e.setAttribute("lineDistance",new vt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,c=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Fm.copy(r.boundingSphere),Fm.applyMatrix4(o),Fm.radius+=l,e.ray.intersectsSphere(Fm)===!1)return;KT.copy(o).invert(),cx.copy(e.ray).applyMatrix4(KT);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,y=new he,b=new he,M=new he,C=new he,I=this.isLineSegments?2:1;if(r.isBufferGeometry){const O=r.index,H=r.attributes.position;if(O!==null){const P=Math.max(0,c.start),A=Math.min(O.count,c.start+c.count);for(let F=P,L=A-1;F<L;F+=I){const B=O.getX(F),z=O.getX(F+1);if(y.fromBufferAttribute(H,B),b.fromBufferAttribute(H,z),cx.distanceSqToSegment(y,b,C,M)>m)continue;C.applyMatrix4(this.matrixWorld);const Z=e.ray.origin.distanceTo(C);Z<e.near||Z>e.far||t.push({distance:Z,point:M.clone().applyMatrix4(this.matrixWorld),index:F,face:null,faceIndex:null,object:this})}}else{const P=Math.max(0,c.start),A=Math.min(H.count,c.start+c.count);for(let F=P,L=A-1;F<L;F+=I){if(y.fromBufferAttribute(H,F),b.fromBufferAttribute(H,F+1),cx.distanceSqToSegment(y,b,C,M)>m)continue;C.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(C);z<e.near||z>e.far||t.push({distance:z,point:M.clone().applyMatrix4(this.matrixWorld),index:F,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Xi.prototype.isLine=!0;const ZT=new he,QT=new he;class Cr extends Xi{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let o=0,l=t.count;o<l;o+=2)ZT.fromBufferAttribute(t,o),QT.fromBufferAttribute(t,o+1),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+ZT.distanceTo(QT);e.setAttribute("lineDistance",new vt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Cr.prototype.isLineSegments=!0;class Bm extends Xi{constructor(e,t){super(e,t);this.type="LineLoop"}}Bm.prototype.isLineLoop=!0;class la extends nr{constructor(e){super();this.type="PointsMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}la.prototype.isPointsMaterial=!0;const JT=new Je,fx=new Jo,Um=new uo,zm=new he;class hc extends Wt{constructor(e=new St,t=new la){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,c=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Um.copy(r.boundingSphere),Um.applyMatrix4(o),Um.radius+=l,e.ray.intersectsSphere(Um)===!1)return;JT.copy(o).invert(),fx.copy(e.ray).applyMatrix4(JT);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h;if(r.isBufferGeometry){const y=r.index,M=r.attributes.position;if(y!==null){const C=Math.max(0,c.start),I=Math.min(y.count,c.start+c.count);for(let O=C,U=I;O<U;O++){const H=y.getX(O);zm.fromBufferAttribute(M,H),eE(zm,H,m,o,e,t,this)}}else{const C=Math.max(0,c.start),I=Math.min(M.count,c.start+c.count);for(let O=C,U=I;O<U;O++)zm.fromBufferAttribute(M,O),eE(zm,O,m,o,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=o.length;l<c;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}hc.prototype.isPoints=!0;function eE(s,e,t,r,o,l,c){const h=fx.distanceSqToPoint(s);if(h<t){const m=new he;fx.closestPointToPoint(s,m),m.applyMatrix4(r);const y=o.ray.origin.distanceTo(m);if(y<o.near||y>o.far)return;l.push({distance:y,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:c})}}class tE extends Dn{constructor(e,t,r,o,l,c,h,m,y){super(e,t,r,o,l,c,h,m,y);this.minFilter=c!==void 0?c:Rn,this.magFilter=l!==void 0?l:Rn,this.generateMipmaps=!1;const b=this;function M(){b.needsUpdate=!0,e.requestVideoFrameCallback(M)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(M)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}tE.prototype.isVideoTexture=!0;class nE extends Dn{constructor(e,t,r){super({width:e,height:t});this.format=r,this.magFilter=jn,this.minFilter=jn,this.generateMipmaps=!1,this.needsUpdate=!0}}nE.prototype.isFramebufferTexture=!0;class hx extends Dn{constructor(e,t,r,o,l,c,h,m,y,b,M,C){super(null,c,h,m,y,b,o,l,M,C);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}hx.prototype.isCompressedTexture=!0;class rE extends Dn{constructor(e,t,r,o,l,c,h,m,y){super(e,t,r,o,l,c,h,m,y);this.needsUpdate=!0}}rE.prototype.isCanvasTexture=!0;class dc extends St{constructor(e=1,t=8,r=0,o=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},t=Math.max(3,t);const l=[],c=[],h=[],m=[],y=new he,b=new je;c.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let M=0,C=3;M<=t;M++,C+=3){const I=r+M/t*o;y.x=e*Math.cos(I),y.y=e*Math.sin(I),c.push(y.x,y.y,y.z),h.push(0,0,1),b.x=(c[C]/e+1)/2,b.y=(c[C+1]/e+1)/2,m.push(b.x,b.y)}for(let M=1;M<=t;M++)l.push(M,M+1,0);this.setIndex(l),this.setAttribute("position",new vt(c,3)),this.setAttribute("normal",new vt(h,3)),this.setAttribute("uv",new vt(m,2))}static fromJSON(e){return new dc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ua extends St{constructor(e=1,t=1,r=1,o=8,l=1,c=!1,h=0,m=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:l,openEnded:c,thetaStart:h,thetaLength:m};const y=this;o=Math.floor(o),l=Math.floor(l);const b=[],M=[],C=[],I=[];let O=0;const U=[],H=r/2;let P=0;A(),c===!1&&(e>0&&F(!0),t>0&&F(!1)),this.setIndex(b),this.setAttribute("position",new vt(M,3)),this.setAttribute("normal",new vt(C,3)),this.setAttribute("uv",new vt(I,2));function A(){const L=new he,B=new he;let z=0;const q=(t-e)/r;for(let Z=0;Z<=l;Z++){const ae=[],ce=Z/l,ee=ce*(t-e)+e;for(let ue=0;ue<=o;ue++){const le=ue/o,w=le*m+h,p=Math.sin(w),J=Math.cos(w);B.x=ee*p,B.y=-ce*r+H,B.z=ee*J,M.push(B.x,B.y,B.z),L.set(p,q,J).normalize(),C.push(L.x,L.y,L.z),I.push(le,1-ce),ae.push(O++)}U.push(ae)}for(let Z=0;Z<o;Z++)for(let ae=0;ae<l;ae++){const ce=U[ae][Z],ee=U[ae+1][Z],ue=U[ae+1][Z+1],le=U[ae][Z+1];b.push(ce,ee,le),b.push(ee,ue,le),z+=6}y.addGroup(P,z,0),P+=z}function F(L){const B=O,z=new je,q=new he;let Z=0;const ae=L===!0?e:t,ce=L===!0?1:-1;for(let ue=1;ue<=o;ue++)M.push(0,H*ce,0),C.push(0,ce,0),I.push(.5,.5),O++;const ee=O;for(let ue=0;ue<=o;ue++){const w=ue/o*m+h,p=Math.cos(w),J=Math.sin(w);q.x=ae*J,q.y=H*ce,q.z=ae*p,M.push(q.x,q.y,q.z),C.push(0,ce,0),z.x=p*.5+.5,z.y=J*.5*ce+.5,I.push(z.x,z.y),O++}for(let ue=0;ue<o;ue++){const le=B+ue,w=ee+ue;L===!0?b.push(w,w+1,le):b.push(w+1,w,le),Z+=3}y.addGroup(P,Z,L===!0?1:2),P+=Z}}static fromJSON(e){return new ua(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pc extends ua{constructor(e=1,t=1,r=8,o=1,l=!1,c=0,h=Math.PI*2){super(0,e,t,r,o,l,c,h);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:c,thetaLength:h}}static fromJSON(e){return new pc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ds extends St{constructor(e=[],t=[],r=1,o=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o};const l=[],c=[];h(o),y(r),b(),this.setAttribute("position",new vt(l,3)),this.setAttribute("normal",new vt(l.slice(),3)),this.setAttribute("uv",new vt(c,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function h(A){const F=new he,L=new he,B=new he;for(let z=0;z<t.length;z+=3)I(t[z+0],F),I(t[z+1],L),I(t[z+2],B),m(F,L,B,A)}function m(A,F,L,B){const z=B+1,q=[];for(let Z=0;Z<=z;Z++){q[Z]=[];const ae=A.clone().lerp(L,Z/z),ce=F.clone().lerp(L,Z/z),ee=z-Z;for(let ue=0;ue<=ee;ue++)ue===0&&Z===z?q[Z][ue]=ae:q[Z][ue]=ae.clone().lerp(ce,ue/ee)}for(let Z=0;Z<z;Z++)for(let ae=0;ae<2*(z-Z)-1;ae++){const ce=Math.floor(ae/2);ae%2==0?(C(q[Z][ce+1]),C(q[Z+1][ce]),C(q[Z][ce])):(C(q[Z][ce+1]),C(q[Z+1][ce+1]),C(q[Z+1][ce]))}}function y(A){const F=new he;for(let L=0;L<l.length;L+=3)F.x=l[L+0],F.y=l[L+1],F.z=l[L+2],F.normalize().multiplyScalar(A),l[L+0]=F.x,l[L+1]=F.y,l[L+2]=F.z}function b(){const A=new he;for(let F=0;F<l.length;F+=3){A.x=l[F+0],A.y=l[F+1],A.z=l[F+2];const L=H(A)/2/Math.PI+.5,B=P(A)/Math.PI+.5;c.push(L,1-B)}O(),M()}function M(){for(let A=0;A<c.length;A+=6){const F=c[A+0],L=c[A+2],B=c[A+4],z=Math.max(F,L,B),q=Math.min(F,L,B);z>.9&&q<.1&&(F<.2&&(c[A+0]+=1),L<.2&&(c[A+2]+=1),B<.2&&(c[A+4]+=1))}}function C(A){l.push(A.x,A.y,A.z)}function I(A,F){const L=A*3;F.x=e[L+0],F.y=e[L+1],F.z=e[L+2]}function O(){const A=new he,F=new he,L=new he,B=new he,z=new je,q=new je,Z=new je;for(let ae=0,ce=0;ae<l.length;ae+=9,ce+=6){A.set(l[ae+0],l[ae+1],l[ae+2]),F.set(l[ae+3],l[ae+4],l[ae+5]),L.set(l[ae+6],l[ae+7],l[ae+8]),z.set(c[ce+0],c[ce+1]),q.set(c[ce+2],c[ce+3]),Z.set(c[ce+4],c[ce+5]),B.copy(A).add(F).add(L).divideScalar(3);const ee=H(B);U(z,ce+0,A,ee),U(q,ce+2,F,ee),U(Z,ce+4,L,ee)}}function U(A,F,L,B){B<0&&A.x===1&&(c[F]=A.x-1),L.x===0&&L.z===0&&(c[F]=B/2/Math.PI+.5)}function H(A){return Math.atan2(A.z,-A.x)}function P(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}static fromJSON(e){return new Ds(e.vertices,e.indices,e.radius,e.details)}}class mc extends Ds{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=1/r,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,c,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mc(e.radius,e.detail)}}const Hm=new he,Gm=new he,dx=new he,Vm=new tr;class px extends St{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const o=Math.pow(10,4),l=Math.cos(hl*t),c=e.getIndex(),h=e.getAttribute("position"),m=c?c.count:h.count,y=[0,0,0],b=["a","b","c"],M=new Array(3),C={},I=[];for(let O=0;O<m;O+=3){c?(y[0]=c.getX(O),y[1]=c.getX(O+1),y[2]=c.getX(O+2)):(y[0]=O,y[1]=O+1,y[2]=O+2);const{a:U,b:H,c:P}=Vm;if(U.fromBufferAttribute(h,y[0]),H.fromBufferAttribute(h,y[1]),P.fromBufferAttribute(h,y[2]),Vm.getNormal(dx),M[0]=`${Math.round(U.x*o)},${Math.round(U.y*o)},${Math.round(U.z*o)}`,M[1]=`${Math.round(H.x*o)},${Math.round(H.y*o)},${Math.round(H.z*o)}`,M[2]=`${Math.round(P.x*o)},${Math.round(P.y*o)},${Math.round(P.z*o)}`,!(M[0]===M[1]||M[1]===M[2]||M[2]===M[0]))for(let A=0;A<3;A++){const F=(A+1)%3,L=M[A],B=M[F],z=Vm[b[A]],q=Vm[b[F]],Z=`${L}_${B}`,ae=`${B}_${L}`;ae in C&&C[ae]?(dx.dot(C[ae].normal)<=l&&(I.push(z.x,z.y,z.z),I.push(q.x,q.y,q.z)),C[ae]=null):Z in C||(C[Z]={index0:y[A],index1:y[F],normal:dx.clone()})}}for(const O in C)if(C[O]){const{index0:U,index1:H}=C[O];Hm.fromBufferAttribute(h,U),Gm.fromBufferAttribute(h,H),I.push(Hm.x,Hm.y,Hm.z),I.push(Gm.x,Gm.y,Gm.z)}this.setAttribute("position",new vt(I,3))}}}class wi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),l=0;t.push(0);for(let c=1;c<=e;c++)r=this.getPoint(c/e),l+=r.distanceTo(o),t.push(l),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const l=r.length;let c;t?c=t:c=e*r[l-1];let h=0,m=l-1,y;for(;h<=m;)if(o=Math.floor(h+(m-h)/2),y=r[o]-c,y<0)h=o+1;else if(y>0)m=o-1;else{m=o;break}if(o=m,r[o]===c)return o/(l-1);const b=r[o],C=r[o+1]-b,I=(c-b)/C;return(o+I)/(l-1)}getTangent(e,t){const r=1e-4;let o=e-r,l=e+r;o<0&&(o=0),l>1&&(l=1);const c=this.getPoint(o),h=this.getPoint(l),m=t||(c.isVector2?new je:new he);return m.copy(h).sub(c).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new he,o=[],l=[],c=[],h=new he,m=new Je;for(let I=0;I<=e;I++){const O=I/e;o[I]=this.getTangentAt(O,new he)}l[0]=new he,c[0]=new he;let y=Number.MAX_VALUE;const b=Math.abs(o[0].x),M=Math.abs(o[0].y),C=Math.abs(o[0].z);b<=y&&(y=b,r.set(1,0,0)),M<=y&&(y=M,r.set(0,1,0)),C<=y&&r.set(0,0,1),h.crossVectors(o[0],r).normalize(),l[0].crossVectors(o[0],h),c[0].crossVectors(o[0],l[0]);for(let I=1;I<=e;I++){if(l[I]=l[I-1].clone(),c[I]=c[I-1].clone(),h.crossVectors(o[I-1],o[I]),h.length()>Number.EPSILON){h.normalize();const O=Math.acos(Br(o[I-1].dot(o[I]),-1,1));l[I].applyMatrix4(m.makeRotationAxis(h,O))}c[I].crossVectors(o[I],l[I])}if(t===!0){let I=Math.acos(Br(l[0].dot(l[e]),-1,1));I/=e,o[0].dot(h.crossVectors(l[0],l[e]))>0&&(I=-I);for(let O=1;O<=e;O++)l[O].applyMatrix4(m.makeRotationAxis(o[O],I*O)),c[O].crossVectors(o[O],l[O])}return{tangents:o,normals:l,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ah extends wi{constructor(e=0,t=0,r=1,o=1,l=0,c=Math.PI*2,h=!1,m=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=c,this.aClockwise=h,this.aRotation=m}getPoint(e,t){const r=t||new je,o=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const c=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(c?l=0:l=o),this.aClockwise===!0&&!c&&(l===o?l=-o:l=l-o);const h=this.aStartAngle+e*l;let m=this.aX+this.xRadius*Math.cos(h),y=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const b=Math.cos(this.aRotation),M=Math.sin(this.aRotation),C=m-this.aX,I=y-this.aY;m=C*b-I*M+this.aX,y=C*M+I*b+this.aY}return r.set(m,y)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Ah.prototype.isEllipseCurve=!0;class mx extends Ah{constructor(e,t,r,o,l,c){super(e,t,r,r,o,l,c);this.type="ArcCurve"}}mx.prototype.isArcCurve=!0;function gx(){let s=0,e=0,t=0,r=0;function o(l,c,h,m){s=l,e=h,t=-3*l+3*c-2*h-m,r=2*l-2*c+h+m}return{initCatmullRom:function(l,c,h,m,y){o(c,h,y*(h-l),y*(m-c))},initNonuniformCatmullRom:function(l,c,h,m,y,b,M){let C=(c-l)/y-(h-l)/(y+b)+(h-c)/b,I=(h-c)/b-(m-c)/(b+M)+(m-h)/M;C*=b,I*=b,o(c,h,C,I)},calc:function(l){const c=l*l,h=c*l;return s+e*l+t*c+r*h}}}const Wm=new he,vx=new gx,yx=new gx,xx=new gx;class _x extends wi{constructor(e=[],t=!1,r="centripetal",o=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new he){const r=t,o=this.points,l=o.length,c=(l-(this.closed?0:1))*e;let h=Math.floor(c),m=c-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:m===0&&h===l-1&&(h=l-2,m=1);let y,b;this.closed||h>0?y=o[(h-1)%l]:(Wm.subVectors(o[0],o[1]).add(o[0]),y=Wm);const M=o[h%l],C=o[(h+1)%l];if(this.closed||h+2<l?b=o[(h+2)%l]:(Wm.subVectors(o[l-1],o[l-2]).add(o[l-1]),b=Wm),this.curveType==="centripetal"||this.curveType==="chordal"){const I=this.curveType==="chordal"?.5:.25;let O=Math.pow(y.distanceToSquared(M),I),U=Math.pow(M.distanceToSquared(C),I),H=Math.pow(C.distanceToSquared(b),I);U<1e-4&&(U=1),O<1e-4&&(O=U),H<1e-4&&(H=U),vx.initNonuniformCatmullRom(y.x,M.x,C.x,b.x,O,U,H),yx.initNonuniformCatmullRom(y.y,M.y,C.y,b.y,O,U,H),xx.initNonuniformCatmullRom(y.z,M.z,C.z,b.z,O,U,H)}else this.curveType==="catmullrom"&&(vx.initCatmullRom(y.x,M.x,C.x,b.x,this.tension),yx.initCatmullRom(y.y,M.y,C.y,b.y,this.tension),xx.initCatmullRom(y.z,M.z,C.z,b.z,this.tension));return r.set(vx.calc(m),yx.calc(m),xx.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new he().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}_x.prototype.isCatmullRomCurve3=!0;function iE(s,e,t,r,o){const l=(r-e)*.5,c=(o-t)*.5,h=s*s,m=s*h;return(2*t-2*r+l+c)*m+(-3*t+3*r-2*l-c)*h+l*s+t}function MF(s,e){const t=1-s;return t*t*e}function TF(s,e){return 2*(1-s)*s*e}function EF(s,e){return s*s*e}function Ch(s,e,t,r){return MF(s,e)+TF(s,t)+EF(s,r)}function AF(s,e){const t=1-s;return t*t*t*e}function CF(s,e){const t=1-s;return 3*t*t*s*e}function RF(s,e){return 3*(1-s)*s*s*e}function LF(s,e){return s*s*s*e}function Rh(s,e,t,r,o){return AF(s,e)+CF(s,t)+RF(s,r)+LF(s,o)}class $m extends wi{constructor(e=new je,t=new je,r=new je,o=new je){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new je){const r=t,o=this.v0,l=this.v1,c=this.v2,h=this.v3;return r.set(Rh(e,o.x,l.x,c.x,h.x),Rh(e,o.y,l.y,c.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}$m.prototype.isCubicBezierCurve=!0;class wx extends wi{constructor(e=new he,t=new he,r=new he,o=new he){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new he){const r=t,o=this.v0,l=this.v1,c=this.v2,h=this.v3;return r.set(Rh(e,o.x,l.x,c.x,h.x),Rh(e,o.y,l.y,c.y,h.y),Rh(e,o.z,l.z,c.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}wx.prototype.isCubicBezierCurve3=!0;class Lh extends wi{constructor(e=new je,t=new je){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new je){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new je;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Lh.prototype.isLineCurve=!0;class sE extends wi{constructor(e=new he,t=new he){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new he){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jm extends wi{constructor(e=new je,t=new je,r=new je){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new je){const r=t,o=this.v0,l=this.v1,c=this.v2;return r.set(Ch(e,o.x,l.x,c.x),Ch(e,o.y,l.y,c.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}jm.prototype.isQuadraticBezierCurve=!0;class qm extends wi{constructor(e=new he,t=new he,r=new he){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new he){const r=t,o=this.v0,l=this.v1,c=this.v2;return r.set(Ch(e,o.x,l.x,c.x),Ch(e,o.y,l.y,c.y),Ch(e,o.z,l.z,c.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}qm.prototype.isQuadraticBezierCurve3=!0;class Xm extends wi{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new je){const r=t,o=this.points,l=(o.length-1)*e,c=Math.floor(l),h=l-c,m=o[c===0?c:c-1],y=o[c],b=o[c>o.length-2?o.length-1:c+1],M=o[c>o.length-3?o.length-1:c+2];return r.set(iE(h,m.x,y.x,b.x,M.x),iE(h,m.y,y.y,b.y,M.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push(new je().fromArray(o))}return this}}Xm.prototype.isSplineCurve=!0;var bx=Object.freeze({__proto__:null,ArcCurve:mx,CatmullRomCurve3:_x,CubicBezierCurve:$m,CubicBezierCurve3:wx,EllipseCurve:Ah,LineCurve:Lh,LineCurve3:sE,QuadraticBezierCurve:jm,QuadraticBezierCurve3:qm,SplineCurve:Xm});class oE extends wi{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lh(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=r){const c=o[l]-r,h=this.curves[l],m=h.getLength(),y=m===0?0:1-c/m;return h.getPointAt(y,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,l=this.curves;o<l.length;o++){const c=l[o],h=c&&c.isEllipseCurve?e*2:c&&(c.isLineCurve||c.isLineCurve3)?1:c&&c.isSplineCurve?e*c.points.length:e,m=c.getPoints(h);for(let y=0;y<m.length;y++){const b=m[y];r&&r.equals(b)||(t.push(b),r=b)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push(new bx[o.type]().fromJSON(o))}return this}}class Ih extends oE{constructor(e){super();this.type="Path",this.currentPoint=new je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Lh(this.currentPoint.clone(),new je(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const l=new jm(this.currentPoint.clone(),new je(e,t),new je(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,l,c){const h=new $m(this.currentPoint.clone(),new je(e,t),new je(r,o),new je(l,c));return this.curves.push(h),this.currentPoint.set(l,c),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Xm(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,l,c){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absarc(e+h,t+m,r,o,l,c),this}absarc(e,t,r,o,l,c){return this.absellipse(e,t,r,r,o,l,c),this}ellipse(e,t,r,o,l,c,h,m){const y=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(e+y,t+b,r,o,l,c,h,m),this}absellipse(e,t,r,o,l,c,h,m){const y=new Ah(e,t,r,o,l,c,h,m);if(this.curves.length>0){const M=y.getPoint(0);M.equals(this.currentPoint)||this.lineTo(M.x,M.y)}this.curves.push(y);const b=y.getPoint(1);return this.currentPoint.copy(b),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ns extends Ih{constructor(e){super(e);this.uuid=Oi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push(new Ih().fromJSON(o))}return this}}const IF={triangulate:function(s,e,t=2){const r=e&&e.length,o=r?e[0]*t:s.length;let l=aE(s,0,o,t,!0);const c=[];if(!l||l.next===l.prev)return c;let h,m,y,b,M,C,I;if(r&&(l=NF(s,e,l,t)),s.length>80*t){h=y=s[0],m=b=s[1];for(let O=t;O<o;O+=t)M=s[O],C=s[O+1],M<h&&(h=M),C<m&&(m=C),M>y&&(y=M),C>b&&(b=C);I=Math.max(y-h,b-m),I=I!==0?1/I:0}return Ph(l,c,t,h,m,I),c}};function aE(s,e,t,r,o){let l,c;if(o===qF(s,e,t,r)>0)for(l=e;l<t;l+=r)c=cE(l,s[l],s[l+1],c);else for(l=t-r;l>=e;l-=r)c=cE(l,s[l],s[l+1],c);return c&&Ym(c,c.next)&&(Oh(c),c=c.next),c}function ca(s,e){if(!s)return s;e||(e=s);let t=s,r;do if(r=!1,!t.steiner&&(Ym(t,t.next)||zn(t.prev,t,t.next)===0)){if(Oh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Ph(s,e,t,r,o,l,c){if(!s)return;!c&&l&&HF(s,r,o,l);let h=s,m,y;for(;s.prev!==s.next;){if(m=s.prev,y=s.next,l?kF(s,r,o,l):PF(s)){e.push(m.i/t),e.push(s.i/t),e.push(y.i/t),Oh(s),s=y.next,h=y.next;continue}if(s=y,s===h){c?c===1?(s=OF(ca(s),e,t),Ph(s,e,t,r,o,l,2)):c===2&&DF(s,e,t,r,o,l):Ph(ca(s),e,t,r,o,l,1);break}}}function PF(s){const e=s.prev,t=s,r=s.next;if(zn(e,t,r)>=0)return!1;let o=s.next.next;for(;o!==s.prev;){if(gc(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&zn(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function kF(s,e,t,r){const o=s.prev,l=s,c=s.next;if(zn(o,l,c)>=0)return!1;const h=o.x<l.x?o.x<c.x?o.x:c.x:l.x<c.x?l.x:c.x,m=o.y<l.y?o.y<c.y?o.y:c.y:l.y<c.y?l.y:c.y,y=o.x>l.x?o.x>c.x?o.x:c.x:l.x>c.x?l.x:c.x,b=o.y>l.y?o.y>c.y?o.y:c.y:l.y>c.y?l.y:c.y,M=Sx(h,m,e,t,r),C=Sx(y,b,e,t,r);let I=s.prevZ,O=s.nextZ;for(;I&&I.z>=M&&O&&O.z<=C;){if(I!==s.prev&&I!==s.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,I.x,I.y)&&zn(I.prev,I,I.next)>=0||(I=I.prevZ,O!==s.prev&&O!==s.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,O.x,O.y)&&zn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;I&&I.z>=M;){if(I!==s.prev&&I!==s.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,I.x,I.y)&&zn(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;O&&O.z<=C;){if(O!==s.prev&&O!==s.next&&gc(o.x,o.y,l.x,l.y,c.x,c.y,O.x,O.y)&&zn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function OF(s,e,t){let r=s;do{const o=r.prev,l=r.next.next;!Ym(o,l)&&lE(o,r,r.next,l)&&kh(o,l)&&kh(l,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(l.i/t),Oh(r),Oh(r.next),r=s=l),r=r.next}while(r!==s);return ca(r)}function DF(s,e,t,r,o,l){let c=s;do{let h=c.next.next;for(;h!==c.prev;){if(c.i!==h.i&&WF(c,h)){let m=uE(c,h);c=ca(c,c.next),m=ca(m,m.next),Ph(c,e,t,r,o,l),Ph(m,e,t,r,o,l);return}h=h.next}c=c.next}while(c!==s)}function NF(s,e,t,r){const o=[];let l,c,h,m,y;for(l=0,c=e.length;l<c;l++)h=e[l]*r,m=l<c-1?e[l+1]*r:s.length,y=aE(s,h,m,r,!1),y===y.next&&(y.steiner=!0),o.push(VF(y));for(o.sort(FF),l=0;l<o.length;l++)BF(o[l],t),t=ca(t,t.next);return t}function FF(s,e){return s.x-e.x}function BF(s,e){if(e=UF(s,e),e){const t=uE(e,s);ca(e,e.next),ca(t,t.next)}}function UF(s,e){let t=e;const r=s.x,o=s.y;let l=-1/0,c;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const C=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(C<=r&&C>l){if(l=C,C===r){if(o===t.y)return t;if(o===t.next.y)return t.next}c=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!c)return null;if(r===l)return c;const h=c,m=c.x,y=c.y;let b=1/0,M;t=c;do r>=t.x&&t.x>=m&&r!==t.x&&gc(o<y?r:l,o,m,y,o<y?l:r,o,t.x,t.y)&&(M=Math.abs(o-t.y)/(r-t.x),kh(t,s)&&(M<b||M===b&&(t.x>c.x||t.x===c.x&&zF(c,t)))&&(c=t,b=M)),t=t.next;while(t!==h);return c}function zF(s,e){return zn(s.prev,s,e.prev)<0&&zn(e.next,s,s.next)<0}function HF(s,e,t,r){let o=s;do o.z===null&&(o.z=Sx(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==s);o.prevZ.nextZ=null,o.prevZ=null,GF(o)}function GF(s){let e,t,r,o,l,c,h,m,y=1;do{for(t=s,s=null,l=null,c=0;t;){for(c++,r=t,h=0,e=0;e<y&&(h++,r=r.nextZ,!!r);e++);for(m=y;h>0||m>0&&r;)h!==0&&(m===0||!r||t.z<=r.z)?(o=t,t=t.nextZ,h--):(o=r,r=r.nextZ,m--),l?l.nextZ=o:s=o,o.prevZ=l,l=o;t=r}l.nextZ=null,y*=2}while(c>1);return s}function Sx(s,e,t,r,o){return s=32767*(s-t)*o,e=32767*(e-r)*o,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}function VF(s){let e=s,t=s;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==s);return t}function gc(s,e,t,r,o,l,c,h){return(o-c)*(e-h)-(s-c)*(l-h)>=0&&(s-c)*(r-h)-(t-c)*(e-h)>=0&&(t-c)*(l-h)-(o-c)*(r-h)>=0}function WF(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!$F(s,e)&&(kh(s,e)&&kh(e,s)&&jF(s,e)&&(zn(s.prev,s,e.prev)||zn(s,e.prev,e))||Ym(s,e)&&zn(s.prev,s,s.next)>0&&zn(e.prev,e,e.next)>0)}function zn(s,e,t){return(e.y-s.y)*(t.x-e.x)-(e.x-s.x)*(t.y-e.y)}function Ym(s,e){return s.x===e.x&&s.y===e.y}function lE(s,e,t,r){const o=Zm(zn(s,e,t)),l=Zm(zn(s,e,r)),c=Zm(zn(t,r,s)),h=Zm(zn(t,r,e));return!!(o!==l&&c!==h||o===0&&Km(s,t,e)||l===0&&Km(s,r,e)||c===0&&Km(t,s,r)||h===0&&Km(t,e,r))}function Km(s,e,t){return e.x<=Math.max(s.x,t.x)&&e.x>=Math.min(s.x,t.x)&&e.y<=Math.max(s.y,t.y)&&e.y>=Math.min(s.y,t.y)}function Zm(s){return s>0?1:s<0?-1:0}function $F(s,e){let t=s;do{if(t.i!==s.i&&t.next.i!==s.i&&t.i!==e.i&&t.next.i!==e.i&&lE(t,t.next,s,e))return!0;t=t.next}while(t!==s);return!1}function kh(s,e){return zn(s.prev,s,s.next)<0?zn(s,e,s.next)>=0&&zn(s,s.prev,e)>=0:zn(s,e,s.prev)<0||zn(s,s.next,e)<0}function jF(s,e){let t=s,r=!1;const o=(s.x+e.x)/2,l=(s.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==s);return r}function uE(s,e){const t=new Mx(s.i,s.x,s.y),r=new Mx(e.i,e.x,e.y),o=s.next,l=e.prev;return s.next=e,e.prev=s,t.next=o,o.prev=t,r.next=t,t.prev=r,l.next=r,r.prev=l,r}function cE(s,e,t,r){const o=new Mx(s,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function Oh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Mx(s,e,t){this.i=s,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qF(s,e,t,r){let o=0;for(let l=e,c=t-r;l<t;l+=r)o+=(s[c]-s[l])*(s[l+1]+s[c+1]),c=l;return o}class Fs{static area(e){const t=e.length;let r=0;for(let o=t-1,l=0;l<t;o=l++)r+=e[o].x*e[l].y-e[l].x*e[o].y;return r*.5}static isClockWise(e){return Fs.area(e)<0}static triangulateShape(e,t){const r=[],o=[],l=[];fE(e),hE(r,e);let c=e.length;t.forEach(fE);for(let m=0;m<t.length;m++)o.push(c),c+=t[m].length,hE(r,t[m]);const h=IF.triangulate(r,o);for(let m=0;m<h.length;m+=3)l.push(h.slice(m,m+3));return l}}function fE(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function hE(s,e){for(let t=0;t<e.length;t++)s.push(e[t].x),s.push(e[t].y)}class Bs extends St{constructor(e=new Ns([new je(.5,.5),new je(-.5,.5),new je(-.5,-.5),new je(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],l=[];for(let h=0,m=e.length;h<m;h++){const y=e[h];c(y)}this.setAttribute("position",new vt(o,3)),this.setAttribute("uv",new vt(l,2)),this.computeVertexNormals();function c(h){const m=[],y=t.curveSegments!==void 0?t.curveSegments:12,b=t.steps!==void 0?t.steps:1;let M=t.depth!==void 0?t.depth:1,C=t.bevelEnabled!==void 0?t.bevelEnabled:!0,I=t.bevelThickness!==void 0?t.bevelThickness:.2,O=t.bevelSize!==void 0?t.bevelSize:I-.1,U=t.bevelOffset!==void 0?t.bevelOffset:0,H=t.bevelSegments!==void 0?t.bevelSegments:3;const P=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:XF;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),M=t.amount);let F,L=!1,B,z,q,Z;P&&(F=P.getSpacedPoints(b),L=!0,C=!1,B=P.computeFrenetFrames(b,!1),z=new he,q=new he,Z=new he),C||(H=0,I=0,O=0,U=0);const ae=h.extractPoints(y);let ce=ae.shape;const ee=ae.holes;if(!Fs.isClockWise(ce)){ce=ce.reverse();for(let Le=0,Be=ee.length;Le<Be;Le++){const Ye=ee[Le];Fs.isClockWise(Ye)&&(ee[Le]=Ye.reverse())}}const le=Fs.triangulateShape(ce,ee),w=ce;for(let Le=0,Be=ee.length;Le<Be;Le++){const Ye=ee[Le];ce=ce.concat(Ye)}function p(Le,Be,Ye){return Be||console.error("THREE.ExtrudeGeometry: vec does not exist"),Be.clone().multiplyScalar(Ye).add(Le)}const J=ce.length,E=le.length;function ge(Le,Be,Ye){let De,oe,yt;const j=Le.x-Be.x,et=Le.y-Be.y,Nt=Ye.x-Le.x,X=Ye.y-Le.y,n=j*j+et*et,i=j*X-et*Nt;if(Math.abs(i)>Number.EPSILON){const a=Math.sqrt(n),f=Math.sqrt(Nt*Nt+X*X),g=Be.x-et/a,v=Be.y+j/a,S=Ye.x-X/f,R=Ye.y+Nt/f,k=((S-g)*X-(R-v)*Nt)/(j*X-et*Nt);De=g+j*k-Le.x,oe=v+et*k-Le.y;const D=De*De+oe*oe;if(D<=2)return new je(De,oe);yt=Math.sqrt(D/2)}else{let a=!1;j>Number.EPSILON?Nt>Number.EPSILON&&(a=!0):j<-Number.EPSILON?Nt<-Number.EPSILON&&(a=!0):Math.sign(et)===Math.sign(X)&&(a=!0),a?(De=-et,oe=j,yt=Math.sqrt(n)):(De=j,oe=et,yt=Math.sqrt(n/2))}return new je(De/yt,oe/yt)}const ke=[];for(let Le=0,Be=w.length,Ye=Be-1,De=Le+1;Le<Be;Le++,Ye++,De++)Ye===Be&&(Ye=0),De===Be&&(De=0),ke[Le]=ge(w[Le],w[Ye],w[De]);const Se=[];let de,ye=ke.concat();for(let Le=0,Be=ee.length;Le<Be;Le++){const Ye=ee[Le];de=[];for(let De=0,oe=Ye.length,yt=oe-1,j=De+1;De<oe;De++,yt++,j++)yt===oe&&(yt=0),j===oe&&(j=0),de[De]=ge(Ye[De],Ye[yt],Ye[j]);Se.push(de),ye=ye.concat(de)}for(let Le=0;Le<H;Le++){const Be=Le/H,Ye=I*Math.cos(Be*Math.PI/2),De=O*Math.sin(Be*Math.PI/2)+U;for(let oe=0,yt=w.length;oe<yt;oe++){const j=p(w[oe],ke[oe],De);Ce(j.x,j.y,-Ye)}for(let oe=0,yt=ee.length;oe<yt;oe++){const j=ee[oe];de=Se[oe];for(let et=0,Nt=j.length;et<Nt;et++){const X=p(j[et],de[et],De);Ce(X.x,X.y,-Ye)}}}const Re=O+U;for(let Le=0;Le<J;Le++){const Be=C?p(ce[Le],ye[Le],Re):ce[Le];L?(q.copy(B.normals[0]).multiplyScalar(Be.x),z.copy(B.binormals[0]).multiplyScalar(Be.y),Z.copy(F[0]).add(q).add(z),Ce(Z.x,Z.y,Z.z)):Ce(Be.x,Be.y,0)}for(let Le=1;Le<=b;Le++)for(let Be=0;Be<J;Be++){const Ye=C?p(ce[Be],ye[Be],Re):ce[Be];L?(q.copy(B.normals[Le]).multiplyScalar(Ye.x),z.copy(B.binormals[Le]).multiplyScalar(Ye.y),Z.copy(F[Le]).add(q).add(z),Ce(Z.x,Z.y,Z.z)):Ce(Ye.x,Ye.y,M/b*Le)}for(let Le=H-1;Le>=0;Le--){const Be=Le/H,Ye=I*Math.cos(Be*Math.PI/2),De=O*Math.sin(Be*Math.PI/2)+U;for(let oe=0,yt=w.length;oe<yt;oe++){const j=p(w[oe],ke[oe],De);Ce(j.x,j.y,M+Ye)}for(let oe=0,yt=ee.length;oe<yt;oe++){const j=ee[oe];de=Se[oe];for(let et=0,Nt=j.length;et<Nt;et++){const X=p(j[et],de[et],De);L?Ce(X.x,X.y+F[b-1].y,F[b-1].x+Ye):Ce(X.x,X.y,M+Ye)}}}we(),be();function we(){const Le=o.length/3;if(C){let Be=0,Ye=J*Be;for(let De=0;De<E;De++){const oe=le[De];$e(oe[2]+Ye,oe[1]+Ye,oe[0]+Ye)}Be=b+H*2,Ye=J*Be;for(let De=0;De<E;De++){const oe=le[De];$e(oe[0]+Ye,oe[1]+Ye,oe[2]+Ye)}}else{for(let Be=0;Be<E;Be++){const Ye=le[Be];$e(Ye[2],Ye[1],Ye[0])}for(let Be=0;Be<E;Be++){const Ye=le[Be];$e(Ye[0]+J*b,Ye[1]+J*b,Ye[2]+J*b)}}r.addGroup(Le,o.length/3-Le,0)}function be(){const Le=o.length/3;let Be=0;Ue(w,Be),Be+=w.length;for(let Ye=0,De=ee.length;Ye<De;Ye++){const oe=ee[Ye];Ue(oe,Be),Be+=oe.length}r.addGroup(Le,o.length/3-Le,1)}function Ue(Le,Be){let Ye=Le.length;for(;--Ye>=0;){const De=Ye;let oe=Ye-1;oe<0&&(oe=Le.length-1);for(let yt=0,j=b+H*2;yt<j;yt++){const et=J*yt,Nt=J*(yt+1),X=Be+De+et,n=Be+oe+et,i=Be+oe+Nt,a=Be+De+Nt;ze(X,n,i,a)}}}function Ce(Le,Be,Ye){m.push(Le),m.push(Be),m.push(Ye)}function $e(Le,Be,Ye){W(Le),W(Be),W(Ye);const De=o.length/3,oe=A.generateTopUV(r,o,De-3,De-2,De-1);Ve(oe[0]),Ve(oe[1]),Ve(oe[2])}function ze(Le,Be,Ye,De){W(Le),W(Be),W(De),W(Be),W(Ye),W(De);const oe=o.length/3,yt=A.generateSideWallUV(r,o,oe-6,oe-3,oe-2,oe-1);Ve(yt[0]),Ve(yt[1]),Ve(yt[3]),Ve(yt[1]),Ve(yt[2]),Ve(yt[3])}function W(Le){o.push(m[Le*3+0]),o.push(m[Le*3+1]),o.push(m[Le*3+2])}function Ve(Le){l.push(Le.x),l.push(Le.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return YF(t,r,e)}static fromJSON(e,t){const r=[];for(let l=0,c=e.shapes.length;l<c;l++){const h=t[e.shapes[l]];r.push(h)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new bx[o.type]().fromJSON(o)),new Bs(r,e.options)}}const XF={generateTopUV:function(s,e,t,r,o){const l=e[t*3],c=e[t*3+1],h=e[r*3],m=e[r*3+1],y=e[o*3],b=e[o*3+1];return[new je(l,c),new je(h,m),new je(y,b)]},generateSideWallUV:function(s,e,t,r,o,l){const c=e[t*3],h=e[t*3+1],m=e[t*3+2],y=e[r*3],b=e[r*3+1],M=e[r*3+2],C=e[o*3],I=e[o*3+1],O=e[o*3+2],U=e[l*3],H=e[l*3+1],P=e[l*3+2];return Math.abs(h-b)<Math.abs(c-y)?[new je(c,1-m),new je(y,1-M),new je(C,1-O),new je(U,1-P)]:[new je(h,1-m),new je(b,1-M),new je(I,1-O),new je(H,1-P)]}};function YF(s,e,t){if(t.shapes=[],Array.isArray(s))for(let r=0,o=s.length;r<o;r++){const l=s[r];t.shapes.push(l.uuid)}else t.shapes.push(s.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class vc extends Ds{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,o=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,l,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vc(e.radius,e.detail)}}class yc extends St{constructor(e=[new je(0,.5),new je(.5,0),new je(0,-.5)],t=12,r=0,o=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=Math.floor(t),o=Br(o,0,Math.PI*2);const l=[],c=[],h=[],m=[],y=[],b=1/t,M=new he,C=new je,I=new he,O=new he,U=new he;let H=0,P=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:H=e[A+1].x-e[A].x,P=e[A+1].y-e[A].y,I.x=P*1,I.y=-H,I.z=P*0,U.copy(I),I.normalize(),m.push(I.x,I.y,I.z);break;case e.length-1:m.push(U.x,U.y,U.z);break;default:H=e[A+1].x-e[A].x,P=e[A+1].y-e[A].y,I.x=P*1,I.y=-H,I.z=P*0,O.copy(I),I.x+=U.x,I.y+=U.y,I.z+=U.z,I.normalize(),m.push(I.x,I.y,I.z),U.copy(O)}for(let A=0;A<=t;A++){const F=r+A*b*o,L=Math.sin(F),B=Math.cos(F);for(let z=0;z<=e.length-1;z++){M.x=e[z].x*L,M.y=e[z].y,M.z=e[z].x*B,c.push(M.x,M.y,M.z),C.x=A/t,C.y=z/(e.length-1),h.push(C.x,C.y);const q=m[3*z+0]*L,Z=m[3*z+1],ae=m[3*z+0]*B;y.push(q,Z,ae)}}for(let A=0;A<t;A++)for(let F=0;F<e.length-1;F++){const L=F+A*e.length,B=L,z=L+e.length,q=L+e.length+1,Z=L+1;l.push(B,z,Z),l.push(q,Z,z)}this.setIndex(l),this.setAttribute("position",new vt(c,3)),this.setAttribute("uv",new vt(h,2)),this.setAttribute("normal",new vt(y,3))}static fromJSON(e){return new yc(e.points,e.segments,e.phiStart,e.phiLength)}}class Sl extends Ds{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,o,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sl(e.radius,e.detail)}}class xc extends St{constructor(e=.5,t=1,r=8,o=1,l=0,c=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:o,thetaStart:l,thetaLength:c},r=Math.max(3,r),o=Math.max(1,o);const h=[],m=[],y=[],b=[];let M=e;const C=(t-e)/o,I=new he,O=new je;for(let U=0;U<=o;U++){for(let H=0;H<=r;H++){const P=l+H/r*c;I.x=M*Math.cos(P),I.y=M*Math.sin(P),m.push(I.x,I.y,I.z),y.push(0,0,1),O.x=(I.x/t+1)/2,O.y=(I.y/t+1)/2,b.push(O.x,O.y)}M+=C}for(let U=0;U<o;U++){const H=U*(r+1);for(let P=0;P<r;P++){const A=P+H,F=A,L=A+r+1,B=A+r+2,z=A+1;h.push(F,L,z),h.push(L,B,z)}}this.setIndex(h),this.setAttribute("position",new vt(m,3)),this.setAttribute("normal",new vt(y,3)),this.setAttribute("uv",new vt(b,2))}static fromJSON(e){return new xc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ml extends St{constructor(e=new Ns([new je(0,.5),new je(-.5,-.5),new je(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],l=[],c=[];let h=0,m=0;if(Array.isArray(e)===!1)y(e);else for(let b=0;b<e.length;b++)y(e[b]),this.addGroup(h,m,b),h+=m,m=0;this.setIndex(r),this.setAttribute("position",new vt(o,3)),this.setAttribute("normal",new vt(l,3)),this.setAttribute("uv",new vt(c,2));function y(b){const M=o.length/3,C=b.extractPoints(t);let I=C.shape;const O=C.holes;Fs.isClockWise(I)===!1&&(I=I.reverse());for(let H=0,P=O.length;H<P;H++){const A=O[H];Fs.isClockWise(A)===!0&&(O[H]=A.reverse())}const U=Fs.triangulateShape(I,O);for(let H=0,P=O.length;H<P;H++){const A=O[H];I=I.concat(A)}for(let H=0,P=I.length;H<P;H++){const A=I[H];o.push(A.x,A.y,0),l.push(0,0,1),c.push(A.x,A.y)}for(let H=0,P=U.length;H<P;H++){const A=U[H],F=A[0]+M,L=A[1]+M,B=A[2]+M;r.push(F,L,B),m+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KF(t,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++){const c=t[e.shapes[o]];r.push(c)}return new Ml(r,e.curveSegments)}}function KF(s,e){if(e.shapes=[],Array.isArray(s))for(let t=0,r=s.length;t<r;t++){const o=s[t];e.shapes.push(o.uuid)}else e.shapes.push(s.uuid);return e}class Tl extends St{constructor(e=1,t=32,r=16,o=0,l=Math.PI*2,c=0,h=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:o,phiLength:l,thetaStart:c,thetaLength:h},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const m=Math.min(c+h,Math.PI);let y=0;const b=[],M=new he,C=new he,I=[],O=[],U=[],H=[];for(let P=0;P<=r;P++){const A=[],F=P/r;let L=0;P==0&&c==0?L=.5/t:P==r&&m==Math.PI&&(L=-.5/t);for(let B=0;B<=t;B++){const z=B/t;M.x=-e*Math.cos(o+z*l)*Math.sin(c+F*h),M.y=e*Math.cos(c+F*h),M.z=e*Math.sin(o+z*l)*Math.sin(c+F*h),O.push(M.x,M.y,M.z),C.copy(M).normalize(),U.push(C.x,C.y,C.z),H.push(z+L,1-F),A.push(y++)}b.push(A)}for(let P=0;P<r;P++)for(let A=0;A<t;A++){const F=b[P][A+1],L=b[P][A],B=b[P+1][A],z=b[P+1][A+1];(P!==0||c>0)&&I.push(F,L,z),(P!==r-1||m<Math.PI)&&I.push(L,B,z)}this.setIndex(I),this.setAttribute("position",new vt(O,3)),this.setAttribute("normal",new vt(U,3)),this.setAttribute("uv",new vt(H,2))}static fromJSON(e){return new Tl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _c extends Ds{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,o,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _c(e.radius,e.detail)}}class wc extends St{constructor(e=1,t=.4,r=8,o=6,l=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:o,arc:l},r=Math.floor(r),o=Math.floor(o);const c=[],h=[],m=[],y=[],b=new he,M=new he,C=new he;for(let I=0;I<=r;I++)for(let O=0;O<=o;O++){const U=O/o*l,H=I/r*Math.PI*2;M.x=(e+t*Math.cos(H))*Math.cos(U),M.y=(e+t*Math.cos(H))*Math.sin(U),M.z=t*Math.sin(H),h.push(M.x,M.y,M.z),b.x=e*Math.cos(U),b.y=e*Math.sin(U),C.subVectors(M,b).normalize(),m.push(C.x,C.y,C.z),y.push(O/o),y.push(I/r)}for(let I=1;I<=r;I++)for(let O=1;O<=o;O++){const U=(o+1)*I+O-1,H=(o+1)*(I-1)+O-1,P=(o+1)*(I-1)+O,A=(o+1)*I+O;c.push(U,H,A),c.push(H,P,A)}this.setIndex(c),this.setAttribute("position",new vt(h,3)),this.setAttribute("normal",new vt(m,3)),this.setAttribute("uv",new vt(y,2))}static fromJSON(e){return new wc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class bc extends St{constructor(e=1,t=.4,r=64,o=8,l=2,c=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:o,p:l,q:c},r=Math.floor(r),o=Math.floor(o);const h=[],m=[],y=[],b=[],M=new he,C=new he,I=new he,O=new he,U=new he,H=new he,P=new he;for(let F=0;F<=r;++F){const L=F/r*l*Math.PI*2;A(L,l,c,e,I),A(L+.01,l,c,e,O),H.subVectors(O,I),P.addVectors(O,I),U.crossVectors(H,P),P.crossVectors(U,H),U.normalize(),P.normalize();for(let B=0;B<=o;++B){const z=B/o*Math.PI*2,q=-t*Math.cos(z),Z=t*Math.sin(z);M.x=I.x+(q*P.x+Z*U.x),M.y=I.y+(q*P.y+Z*U.y),M.z=I.z+(q*P.z+Z*U.z),m.push(M.x,M.y,M.z),C.subVectors(M,I).normalize(),y.push(C.x,C.y,C.z),b.push(F/r),b.push(B/o)}}for(let F=1;F<=r;F++)for(let L=1;L<=o;L++){const B=(o+1)*(F-1)+(L-1),z=(o+1)*F+(L-1),q=(o+1)*F+L,Z=(o+1)*(F-1)+L;h.push(B,z,Z),h.push(z,q,Z)}this.setIndex(h),this.setAttribute("position",new vt(m,3)),this.setAttribute("normal",new vt(y,3)),this.setAttribute("uv",new vt(b,2));function A(F,L,B,z,q){const Z=Math.cos(F),ae=Math.sin(F),ce=B/L*F,ee=Math.cos(ce);q.x=z*(2+ee)*.5*Z,q.y=z*(2+ee)*ae*.5,q.z=z*Math.sin(ce)*.5}}static fromJSON(e){return new bc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Sc extends St{constructor(e=new qm(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,r=1,o=8,l=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:o,closed:l};const c=e.computeFrenetFrames(t,l);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const h=new he,m=new he,y=new je;let b=new he;const M=[],C=[],I=[],O=[];U(),this.setIndex(O),this.setAttribute("position",new vt(M,3)),this.setAttribute("normal",new vt(C,3)),this.setAttribute("uv",new vt(I,2));function U(){for(let F=0;F<t;F++)H(F);H(l===!1?t:0),A(),P()}function H(F){b=e.getPointAt(F/t,b);const L=c.normals[F],B=c.binormals[F];for(let z=0;z<=o;z++){const q=z/o*Math.PI*2,Z=Math.sin(q),ae=-Math.cos(q);m.x=ae*L.x+Z*B.x,m.y=ae*L.y+Z*B.y,m.z=ae*L.z+Z*B.z,m.normalize(),C.push(m.x,m.y,m.z),h.x=b.x+r*m.x,h.y=b.y+r*m.y,h.z=b.z+r*m.z,M.push(h.x,h.y,h.z)}}function P(){for(let F=1;F<=t;F++)for(let L=1;L<=o;L++){const B=(o+1)*(F-1)+(L-1),z=(o+1)*F+(L-1),q=(o+1)*F+L,Z=(o+1)*(F-1)+L;O.push(B,z,Z),O.push(z,q,Z)}}function A(){for(let F=0;F<=t;F++)for(let L=0;L<=o;L++)y.x=F/t,y.y=L/o,I.push(y.x,y.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Sc(new bx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Tx extends St{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,o=new he,l=new he;if(e.index!==null){const c=e.attributes.position,h=e.index;let m=e.groups;m.length===0&&(m=[{start:0,count:h.count,materialIndex:0}]);for(let y=0,b=m.length;y<b;++y){const M=m[y],C=M.start,I=M.count;for(let O=C,U=C+I;O<U;O+=3)for(let H=0;H<3;H++){const P=h.getX(O+H),A=h.getX(O+(H+1)%3);o.fromBufferAttribute(c,P),l.fromBufferAttribute(c,A),dE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}}else{const c=e.attributes.position;for(let h=0,m=c.count/3;h<m;h++)for(let y=0;y<3;y++){const b=3*h+y,M=3*h+(y+1)%3;o.fromBufferAttribute(c,b),l.fromBufferAttribute(c,M),dE(o,l,r)===!0&&(t.push(o.x,o.y,o.z),t.push(l.x,l.y,l.z))}}this.setAttribute("position",new vt(t,3))}}}function dE(s,e,t){const r=`${s.x},${s.y},${s.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${s.x},${s.y},${s.z}`;return t.has(r)===!0||t.has(o)===!0?!1:(t.add(r,o),!0)}var pE=Object.freeze({__proto__:null,BoxGeometry:mo,BoxBufferGeometry:mo,CircleGeometry:dc,CircleBufferGeometry:dc,ConeGeometry:pc,ConeBufferGeometry:pc,CylinderGeometry:ua,CylinderBufferGeometry:ua,DodecahedronGeometry:mc,DodecahedronBufferGeometry:mc,EdgesGeometry:px,ExtrudeGeometry:Bs,ExtrudeBufferGeometry:Bs,IcosahedronGeometry:vc,IcosahedronBufferGeometry:vc,LatheGeometry:yc,LatheBufferGeometry:yc,OctahedronGeometry:Sl,OctahedronBufferGeometry:Sl,PlaneGeometry:gl,PlaneBufferGeometry:gl,PolyhedronGeometry:Ds,PolyhedronBufferGeometry:Ds,RingGeometry:xc,RingBufferGeometry:xc,ShapeGeometry:Ml,ShapeBufferGeometry:Ml,SphereGeometry:Tl,SphereBufferGeometry:Tl,TetrahedronGeometry:_c,TetrahedronBufferGeometry:_c,TorusGeometry:wc,TorusBufferGeometry:wc,TorusKnotGeometry:bc,TorusKnotBufferGeometry:bc,TubeGeometry:Sc,TubeBufferGeometry:Sc,WireframeGeometry:Tx});class Ex extends nr{constructor(e){super();this.type="ShadowMaterial",this.color=new Ze(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Ex.prototype.isShadowMaterial=!0;class El extends nr{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ao,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}El.prototype.isMeshStandardMaterial=!0;class vo extends El{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Br(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ze(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}vo.prototype.isMeshPhysicalMaterial=!0;class Mc extends nr{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ze(16777215),this.specular=new Ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ao,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Mc.prototype.isMeshPhongMaterial=!0;class Ax extends nr{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ao,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Ax.prototype.isMeshToonMaterial=!0;class Cx extends nr{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ao,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Cx.prototype.isMeshNormalMaterial=!0;class Qm extends nr{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Qm.prototype.isMeshLambertMaterial=!0;class Rx extends nr{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ao,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}Rx.prototype.isMeshMatcapMaterial=!0;class Lx extends Fn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Lx.prototype.isLineDashedMaterial=!0;var ZF=Object.freeze({__proto__:null,ShadowMaterial:Ex,SpriteMaterial:Lm,RawShaderMaterial:rc,ShaderMaterial:Ps,PointsMaterial:la,MeshPhysicalMaterial:vo,MeshStandardMaterial:El,MeshPhongMaterial:Mc,MeshToonMaterial:Ax,MeshNormalMaterial:Cx,MeshLambertMaterial:Qm,MeshDepthMaterial:Em,MeshDistanceMaterial:Am,MeshBasicMaterial:Yr,MeshMatcapMaterial:Rx,LineDashedMaterial:Lx,LineBasicMaterial:Fn,Material:nr});const Ln={arraySlice:function(s,e,t){return Ln.isTypedArray(s)?new s.constructor(s.subarray(e,t!==void 0?t:s.length)):s.slice(e,t)},convertArray:function(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){function e(o,l){return s[o]-s[l]}const t=s.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(e),r},sortedArray:function(s,e,t){const r=s.length,o=new s.constructor(r);for(let l=0,c=0;c!==r;++l){const h=t[l]*e;for(let m=0;m!==e;++m)o[c++]=s[h+m]}return o},flattenJSON:function(s,e,t,r){let o=1,l=s[0];for(;l!==void 0&&l[r]===void 0;)l=s[o++];if(l===void 0)return;let c=l[r];if(c!==void 0)if(Array.isArray(c))do c=l[r],c!==void 0&&(e.push(l.time),t.push.apply(t,c)),l=s[o++];while(l!==void 0);else if(c.toArray!==void 0)do c=l[r],c!==void 0&&(e.push(l.time),c.toArray(t,t.length)),l=s[o++];while(l!==void 0);else do c=l[r],c!==void 0&&(e.push(l.time),t.push(c)),l=s[o++];while(l!==void 0)},subclip:function(s,e,t,r,o=30){const l=s.clone();l.name=e;const c=[];for(let m=0;m<l.tracks.length;++m){const y=l.tracks[m],b=y.getValueSize(),M=[],C=[];for(let I=0;I<y.times.length;++I){const O=y.times[I]*o;if(!(O<t||O>=r)){M.push(y.times[I]);for(let U=0;U<b;++U)C.push(y.values[I*b+U])}}M.length!==0&&(y.times=Ln.convertArray(M,y.times.constructor),y.values=Ln.convertArray(C,y.values.constructor),c.push(y))}l.tracks=c;let h=1/0;for(let m=0;m<l.tracks.length;++m)h>l.tracks[m].times[0]&&(h=l.tracks[m].times[0]);for(let m=0;m<l.tracks.length;++m)l.tracks[m].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(s,e=0,t=s,r=30){r<=0&&(r=30);const o=t.tracks.length,l=e/r;for(let c=0;c<o;++c){const h=t.tracks[c],m=h.ValueTypeName;if(m==="bool"||m==="string")continue;const y=s.tracks.find(function(P){return P.name===h.name&&P.ValueTypeName===m});if(y===void 0)continue;let b=0;const M=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=M/3);let C=0;const I=y.getValueSize();y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(C=I/3);const O=h.times.length-1;let U;if(l<=h.times[0]){const P=b,A=M-b;U=Ln.arraySlice(h.values,P,A)}else if(l>=h.times[O]){const P=O*M+b,A=P+M-b;U=Ln.arraySlice(h.values,P,A)}else{const P=h.createInterpolant(),A=b,F=M-b;P.evaluate(l),U=Ln.arraySlice(P.resultBuffer,A,F)}m==="quaternion"&&new Vt().fromArray(U).normalize().conjugate().toArray(U);const H=y.times.length;for(let P=0;P<H;++P){const A=P*I+C;if(m==="quaternion")Vt.multiplyQuaternionsFlat(y.values,A,U,0,y.values,A);else{const F=I-C*2;for(let L=0;L<F;++L)y.values[A+L]-=U[L]}}}return s.blendMode=Ey,s}};class Us{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],l=t[r-1];e:{t:{let c;n:{r:if(!(e<o)){for(let h=r+2;;){if(o===void 0){if(e<l)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,l)}if(r===h)break;if(l=o,o=t[++r],e<o)break t}c=t.length;break n}if(!(e>=l)){const h=t[1];e<h&&(r=2,l=h);for(let m=r-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=l,l=t[--r-1],e>=l)break t}c=r,r=0;break n}break e}for(;r<c;){const h=r+c>>>1;e<t[h]?c=h:r=h+1}if(o=t[r],l=t[r-1],l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(o===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,l,e)}this._cachedIndex=r,this.intervalChanged_(r,l,o)}return this.interpolate_(r,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o;for(let c=0;c!==o;++c)t[c]=r[l+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Us.prototype.beforeStart_=Us.prototype.copySampleValue_;Us.prototype.afterEnd_=Us.prototype.copySampleValue_;class mE extends Us{constructor(e,t,r,o){super(e,t,r,o);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ul,endingEnd:ul}}intervalChanged_(e,t,r){const o=this.parameterPositions;let l=e-2,c=e+1,h=o[l],m=o[c];if(h===void 0)switch(this.getSettings_().endingStart){case cl:l=e,h=2*t-r;break;case uh:l=o.length-2,h=t+o[l]-o[l+1];break;default:l=e,h=r}if(m===void 0)switch(this.getSettings_().endingEnd){case cl:c=e,m=2*r-t;break;case uh:c=1,m=r+o[1]-o[0];break;default:c=e-1,m=t}const y=(r-t)*.5,b=this.valueSize;this._weightPrev=y/(t-h),this._weightNext=y/(m-r),this._offsetPrev=l*b,this._offsetNext=c*b}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,y=m-h,b=this._offsetPrev,M=this._offsetNext,C=this._weightPrev,I=this._weightNext,O=(r-t)/(o-t),U=O*O,H=U*O,P=-C*H+2*C*U-C*O,A=(1+C)*H+(-1.5-2*C)*U+(-.5+C)*O+1,F=(-1-I)*H+(1.5+I)*U+.5*O,L=I*H-I*U;for(let B=0;B!==h;++B)l[B]=P*c[b+B]+A*c[y+B]+F*c[m+B]+L*c[M+B];return l}}class Ix extends Us{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,y=m-h,b=(r-t)/(o-t),M=1-b;for(let C=0;C!==h;++C)l[C]=c[y+C]*M+c[m+C]*b;return l}}class gE extends Us{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class vs{constructor(e,t,r,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ln.convertArray(t,this.TimeBufferType),this.values=Ln.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ln.convertArray(e.times,Array),values:Ln.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new gE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ix(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bu:t=this.InterpolantFactoryMethodDiscrete;break;case ll:t=this.InterpolantFactoryMethodLinear;break;case Xp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bu;case this.InterpolantFactoryMethodLinear:return ll;case this.InterpolantFactoryMethodSmooth:return Xp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let l=0,c=o-1;for(;l!==o&&r[l]<e;)++l;for(;c!==-1&&r[c]>t;)--c;if(++c,l!==0||c!==o){l>=c&&(c=Math.max(c,1),l=c-1);const h=this.getValueSize();this.times=Ln.arraySlice(r,l,c),this.values=Ln.arraySlice(this.values,l*h,c*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,l=r.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let h=0;h!==l;h++){const m=r[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(c!==null&&c>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,c),e=!1;break}c=m}if(o!==void 0&&Ln.isTypedArray(o))for(let h=0,m=o.length;h!==m;++h){const y=o[h];if(isNaN(y)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,y),e=!1;break}}return e}optimize(){const e=Ln.arraySlice(this.times),t=Ln.arraySlice(this.values),r=this.getValueSize(),o=this.getInterpolation()===Xp,l=e.length-1;let c=1;for(let h=1;h<l;++h){let m=!1;const y=e[h],b=e[h+1];if(y!==b&&(h!==1||y!==e[0]))if(o)m=!0;else{const M=h*r,C=M-r,I=M+r;for(let O=0;O!==r;++O){const U=t[M+O];if(U!==t[C+O]||U!==t[I+O]){m=!0;break}}}if(m){if(h!==c){e[c]=e[h];const M=h*r,C=c*r;for(let I=0;I!==r;++I)t[C+I]=t[M+I]}++c}}if(l>0){e[c]=e[l];for(let h=l*r,m=c*r,y=0;y!==r;++y)t[m+y]=t[h+y];++c}return c!==e.length?(this.times=Ln.arraySlice(e,0,c),this.values=Ln.arraySlice(t,0,c*r)):(this.times=e,this.values=t),this}clone(){const e=Ln.arraySlice(this.times,0),t=Ln.arraySlice(this.values,0),r=this.constructor,o=new r(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}vs.prototype.TimeBufferType=Float32Array;vs.prototype.ValueBufferType=Float32Array;vs.prototype.DefaultInterpolation=ll;class Al extends vs{}Al.prototype.ValueTypeName="bool";Al.prototype.ValueBufferType=Array;Al.prototype.DefaultInterpolation=Bu;Al.prototype.InterpolantFactoryMethodLinear=void 0;Al.prototype.InterpolantFactoryMethodSmooth=void 0;class Px extends vs{}Px.prototype.ValueTypeName="color";class Cl extends vs{}Cl.prototype.ValueTypeName="number";class vE extends Us{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=(r-t)/(o-t);let y=e*h;for(let b=y+h;y!==b;y+=4)Vt.slerpFlat(l,0,c,y-h,c,y,m);return l}}class yo extends vs{InterpolantFactoryMethodLinear(e){return new vE(this.times,this.values,this.getValueSize(),e)}}yo.prototype.ValueTypeName="quaternion";yo.prototype.DefaultInterpolation=ll;yo.prototype.InterpolantFactoryMethodSmooth=void 0;class Rl extends vs{}Rl.prototype.ValueTypeName="string";Rl.prototype.ValueBufferType=Array;Rl.prototype.DefaultInterpolation=Bu;Rl.prototype.InterpolantFactoryMethodLinear=void 0;Rl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ll extends vs{}Ll.prototype.ValueTypeName="vector";class Il{constructor(e,t=-1,r,o=Yp){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=Oi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let c=0,h=r.length;c!==h;++c)t.push(JF(r[c]).scale(o));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,c=r.length;l!==c;++l)t.push(vs.toJSON(r[l]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const l=t.length,c=[];for(let h=0;h<l;h++){let m=[],y=[];m.push((h+l-1)%l,h,(h+1)%l),y.push(0,1,0);const b=Ln.getKeyframeOrder(m);m=Ln.sortedArray(m,1,b),y=Ln.sortedArray(y,1,b),!o&&m[0]===0&&(m.push(l),y.push(y[0])),c.push(new Cl(".morphTargetInfluences["+t[h].name+"]",m,y).scale(1/r))}return new this(e,-1,c)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},l=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const y=e[h],b=y.name.match(l);if(b&&b.length>1){const M=b[1];let C=o[M];C||(o[M]=C=[]),C.push(y)}}const c=[];for(const h in o)c.push(this.CreateFromMorphTargetSequence(h,o[h],t,r));return c}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(M,C,I,O,U){if(I.length!==0){const H=[],P=[];Ln.flattenJSON(I,H,P,O),H.length!==0&&U.push(new M(C,H,P))}},o=[],l=e.name||"default",c=e.fps||30,h=e.blendMode;let m=e.length||-1;const y=e.hierarchy||[];for(let M=0;M<y.length;M++){const C=y[M].keys;if(!(!C||C.length===0))if(C[0].morphTargets){const I={};let O;for(O=0;O<C.length;O++)if(C[O].morphTargets)for(let U=0;U<C[O].morphTargets.length;U++)I[C[O].morphTargets[U]]=-1;for(const U in I){const H=[],P=[];for(let A=0;A!==C[O].morphTargets.length;++A){const F=C[O];H.push(F.time),P.push(F.morphTarget===U?1:0)}o.push(new Cl(".morphTargetInfluence["+U+"]",H,P))}m=I.length*(c||1)}else{const I=".bones["+t[M].name+"]";r(Ll,I+".position",C,"pos",o),r(yo,I+".quaternion",C,"rot",o),r(Ll,I+".scale",C,"scl",o)}}return o.length===0?null:new this(l,m,o,h)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,o=e.length;r!==o;++r){const l=this.tracks[r];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QF(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cl;case"vector":case"vector2":case"vector3":case"vector4":return Ll;case"color":return Px;case"quaternion":return yo;case"bool":case"boolean":return Al;case"string":return Rl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function JF(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QF(s.type);if(s.times===void 0){const t=[],r=[];Ln.flattenJSON(s.keys,t,r,"value"),s.times=t,s.values=r}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const Pl={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class kx{constructor(e,t,r){const o=this;let l=!1,c=0,h=0,m;const y=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(b){h++,l===!1&&o.onStart!==void 0&&o.onStart(b,c,h),l=!0},this.itemEnd=function(b){c++,o.onProgress!==void 0&&o.onProgress(b,c,h),c===h&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(b){o.onError!==void 0&&o.onError(b)},this.resolveURL=function(b){return m?m(b):b},this.setURLModifier=function(b){return m=b,this},this.addHandler=function(b,M){return y.push(b,M),this},this.removeHandler=function(b){const M=y.indexOf(b);return M!==-1&&y.splice(M,2),this},this.getHandler=function(b){for(let M=0,C=y.length;M<C;M+=2){const I=y[M],O=y[M+1];if(I.global&&(I.lastIndex=0),I.test(b))return O}return null}}}const yE=new kx;class zr{constructor(e){this.manager=e!==void 0?e:yE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,l){r.load(e,o,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const xo={};class Bi extends zr{constructor(e){super(e)}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=Pl.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(xo[e]!==void 0){xo[e].push({onLoad:t,onProgress:r,onError:o});return}xo[e]=[],xo[e].push({onLoad:t,onProgress:r,onError:o});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(c).then(y=>{if(y.status===200||y.status===0){if(y.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||y.body.getReader===void 0)return y;const b=xo[e],M=y.body.getReader(),C=y.headers.get("Content-Length"),I=C?parseInt(C):0,O=I!==0;let U=0;const H=new ReadableStream({start(P){A();function A(){M.read().then(({done:F,value:L})=>{if(F)P.close();else{U+=L.byteLength;const B=new ProgressEvent("progress",{lengthComputable:O,loaded:U,total:I});for(let z=0,q=b.length;z<q;z++){const Z=b[z];Z.onProgress&&Z.onProgress(B)}P.enqueue(L),A()}})}}});return new Response(H)}else throw Error(`fetch for "${y.url}" responded with ${y.status}: ${y.statusText}`)}).then(y=>{switch(m){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"document":return y.text().then(b=>new DOMParser().parseFromString(b,h));case"json":return y.json();default:if(h===void 0)return y.text();{const M=/charset="?([^;"\s]*)"?/i.exec(h),C=M&&M[1]?M[1].toLowerCase():void 0,I=new TextDecoder(C);return y.arrayBuffer().then(O=>I.decode(O))}}}).then(y=>{Pl.add(e,y);const b=xo[e];delete xo[e];for(let M=0,C=b.length;M<C;M++){const I=b[M];I.onLoad&&I.onLoad(y)}}).catch(y=>{const b=xo[e];if(b===void 0)throw this.manager.itemError(e),y;delete xo[e];for(let M=0,C=b.length;M<C;M++){const I=b[M];I.onError&&I.onError(y)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class eB extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Bi(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=[];for(let r=0;r<e.length;r++){const o=Il.parse(e[r]);t.push(o)}return t}}class tB extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=[],h=new hx,m=new Bi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(l.withCredentials);let y=0;function b(M){m.load(e[M],function(C){const I=l.parse(C,!0);c[M]={width:I.width,height:I.height,format:I.format,mipmaps:I.mipmaps},y+=1,y===6&&(I.mipmapCount===1&&(h.minFilter=Rn),h.image=c,h.format=I.format,h.needsUpdate=!0,t&&t(h))},r,o)}if(Array.isArray(e))for(let M=0,C=e.length;M<C;++M)b(M);else m.load(e,function(M){const C=l.parse(M,!0);if(C.isCubemap){const I=C.mipmaps.length/C.mipmapCount;for(let O=0;O<I;O++){c[O]={mipmaps:[]};for(let U=0;U<C.mipmapCount;U++)c[O].mipmaps.push(C.mipmaps[O*C.mipmapCount+U]),c[O].format=C.format,c[O].width=C.width,c[O].height=C.height}h.image=c}else h.image.width=C.width,h.image.height=C.height,h.mipmaps=C.mipmaps;C.mipmapCount===1&&(h.minFilter=Rn),h.format=C.format,h.needsUpdate=!0,t&&t(h)},r,o);return h}}class Tc extends zr{constructor(e){super(e)}load(e,t,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=Pl.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(c),l.manager.itemEnd(e)},0),c;const h=hh("img");function m(){b(),Pl.add(e,this),t&&t(this),l.manager.itemEnd(e)}function y(M){b(),o&&o(M),l.manager.itemError(e),l.manager.itemEnd(e)}function b(){h.removeEventListener("load",m,!1),h.removeEventListener("error",y,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",y,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class xE extends zr{constructor(e){super(e)}load(e,t,r,o){const l=new tc,c=new Tc(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;function m(y){c.load(e[y],function(b){l.images[y]=b,h++,h===6&&(l.needsUpdate=!0,t&&t(l))},void 0,o)}for(let y=0;y<e.length;++y)m(y);return l}}class _E extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new wl,h=new Bi(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(l.withCredentials),h.load(e,function(m){const y=l.parse(m);!y||(y.image!==void 0?c.image=y.image:y.data!==void 0&&(c.image.width=y.width,c.image.height=y.height,c.image.data=y.data),c.wrapS=y.wrapS!==void 0?y.wrapS:fr,c.wrapT=y.wrapT!==void 0?y.wrapT:fr,c.magFilter=y.magFilter!==void 0?y.magFilter:Rn,c.minFilter=y.minFilter!==void 0?y.minFilter:Rn,c.anisotropy=y.anisotropy!==void 0?y.anisotropy:1,y.encoding!==void 0&&(c.encoding=y.encoding),y.flipY!==void 0&&(c.flipY=y.flipY),y.format!==void 0&&(c.format=y.format),y.type!==void 0&&(c.type=y.type),y.mipmaps!==void 0&&(c.mipmaps=y.mipmaps,c.minFilter=so),y.mipmapCount===1&&(c.minFilter=Rn),y.generateMipmaps!==void 0&&(c.generateMipmaps=y.generateMipmaps),c.needsUpdate=!0,t&&t(c,y))},r,o),c}}class Jm extends zr{constructor(e){super(e)}load(e,t,r,o){const l=new Dn,c=new Tc(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(h){l.image=h,l.needsUpdate=!0,t!==void 0&&t(l)},r,o),l}}class ys extends Wt{constructor(e,t=1){super();this.type="Light",this.color=new Ze(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ys.prototype.isLight=!0;class Ox extends ys{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(Wt.DefaultUp),this.updateMatrix(),this.groundColor=new Ze(t)}copy(e){return ys.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Ox.prototype.isHemisphereLight=!0;const wE=new Je,bE=new he,SE=new he;class Dx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new Je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yh,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;bE.setFromMatrixPosition(e.matrixWorld),t.position.copy(bE),SE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SE),t.updateMatrixWorld(),wE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ME extends Dx{constructor(){super(new hr(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=ch*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(r!==t.fov||o!==t.aspect||l!==t.far)&&(t.fov=r,t.aspect=o,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ME.prototype.isSpotLightShadow=!0;class Dh extends ys{constructor(e,t,r=0,o=Math.PI/3,l=0,c=1){super(e,t);this.type="SpotLight",this.position.copy(Wt.DefaultUp),this.updateMatrix(),this.target=new Wt,this.distance=r,this.angle=o,this.penumbra=l,this.decay=c,this.shadow=new ME}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Dh.prototype.isSpotLight=!0;const TE=new Je,Nh=new he,Nx=new he;class EE extends Dx{constructor(){super(new hr(90,1,.5,500));this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),Nh.setFromMatrixPosition(e.matrixWorld),r.position.copy(Nh),Nx.copy(r.position),Nx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Nx),r.updateMatrixWorld(),o.makeTranslation(-Nh.x,-Nh.y,-Nh.z),TE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TE)}}EE.prototype.isPointLightShadow=!0;class Ec extends ys{constructor(e,t,r=0,o=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new EE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Ec.prototype.isPointLight=!0;class AE extends Dx{constructor(){super(new vl(-5,5,5,-5,.5,500))}}AE.prototype.isDirectionalLightShadow=!0;class Fh extends ys{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Wt.DefaultUp),this.updateMatrix(),this.target=new Wt,this.shadow=new AE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Fh.prototype.isDirectionalLight=!0;class eg extends ys{constructor(e,t){super(e,t);this.type="AmbientLight"}}eg.prototype.isAmbientLight=!0;class Fx extends ys{constructor(e,t,r=10,o=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Fx.prototype.isRectAreaLight=!0;class Bx{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,l=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.282095),t.addScaledVector(c[1],.488603*o),t.addScaledVector(c[2],.488603*l),t.addScaledVector(c[3],.488603*r),t.addScaledVector(c[4],1.092548*(r*o)),t.addScaledVector(c[5],1.092548*(o*l)),t.addScaledVector(c[6],.315392*(3*l*l-1)),t.addScaledVector(c[7],1.092548*(r*l)),t.addScaledVector(c[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,l=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.886227),t.addScaledVector(c[1],2*.511664*o),t.addScaledVector(c[2],2*.511664*l),t.addScaledVector(c[3],2*.511664*r),t.addScaledVector(c[4],2*.429043*r*o),t.addScaledVector(c[5],2*.429043*o*l),t.addScaledVector(c[6],.743125*l*l-.247708),t.addScaledVector(c[7],2*.429043*r*l),t.addScaledVector(c[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){const r=e.x,o=e.y,l=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*l,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*r*l,t[8]=.546274*(r*r-o*o)}}Bx.prototype.isSphericalHarmonics3=!0;class Bh extends ys{constructor(e=new Bx,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Bh.prototype.isLightProbe=!0;class CE extends zr{constructor(e){super(e);this.textures={}}load(e,t,r,o){const l=this,c=new Bi(l.manager);c.setPath(l.path),c.setRequestHeader(l.requestHeader),c.setWithCredentials(l.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t=this.textures;function r(l){return t[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),t[l]}const o=new ZF[e.type];if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new Ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==1&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const c=e.uniforms[l];switch(o.uniforms[l]={},c.type){case"t":o.uniforms[l].value=r(c.value);break;case"c":o.uniforms[l].value=new Ze().setHex(c.value);break;case"v2":o.uniforms[l].value=new je().fromArray(c.value);break;case"v3":o.uniforms[l].value=new he().fromArray(c.value);break;case"v4":o.uniforms[l].value=new an().fromArray(c.value);break;case"m3":o.uniforms[l].value=new gn().fromArray(c.value);break;case"m4":o.uniforms[l].value=new Je().fromArray(c.value);break;default:o.uniforms[l].value=c.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const l in e.extensions)o.extensions[l]=e.extensions[l];if(e.shading!==void 0&&(o.flatShading=e.shading===1),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=r(e.map)),e.matcap!==void 0&&(o.matcap=r(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),o.normalScale=new je().fromArray(l)}return e.displacementMap!==void 0&&(o.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new je().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(o.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=r(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}}class bi{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Ux extends St{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Ux.prototype.isInstancedBufferGeometry=!0;class RE extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Bi(l.manager);c.setPath(l.path),c.setRequestHeader(l.requestHeader),c.setWithCredentials(l.withCredentials),c.load(e,function(h){try{t(l.parse(JSON.parse(h)))}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}parse(e){const t={},r={};function o(I,O){if(t[O]!==void 0)return t[O];const H=I.interleavedBuffers[O],P=l(I,H.buffer),A=zu(H.type,P),F=new oa(A,H.stride);return F.uuid=H.uuid,t[O]=F,F}function l(I,O){if(r[O]!==void 0)return r[O];const H=I.arrayBuffers[O],P=new Uint32Array(H).buffer;return r[O]=P,P}const c=e.isInstancedBufferGeometry?new Ux:new St,h=e.data.index;if(h!==void 0){const I=zu(h.type,h.array);c.setIndex(new Dt(I,1))}const m=e.data.attributes;for(const I in m){const O=m[I];let U;if(O.isInterleavedBufferAttribute){const H=o(e.data,O.data);U=new go(H,O.itemSize,O.offset,O.normalized)}else{const H=zu(O.type,O.array),P=O.isInstancedBufferAttribute?bl:Dt;U=new P(H,O.itemSize,O.normalized)}O.name!==void 0&&(U.name=O.name),O.usage!==void 0&&U.setUsage(O.usage),O.updateRange!==void 0&&(U.updateRange.offset=O.updateRange.offset,U.updateRange.count=O.updateRange.count),c.setAttribute(I,U)}const y=e.data.morphAttributes;if(y)for(const I in y){const O=y[I],U=[];for(let H=0,P=O.length;H<P;H++){const A=O[H];let F;if(A.isInterleavedBufferAttribute){const L=o(e.data,A.data);F=new go(L,A.itemSize,A.offset,A.normalized)}else{const L=zu(A.type,A.array);F=new Dt(L,A.itemSize,A.normalized)}A.name!==void 0&&(F.name=A.name),U.push(F)}c.morphAttributes[I]=U}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const M=e.data.groups||e.data.drawcalls||e.data.offsets;if(M!==void 0)for(let I=0,O=M.length;I!==O;++I){const U=M[I];c.addGroup(U.start,U.count,U.materialIndex)}const C=e.data.boundingSphere;if(C!==void 0){const I=new he;C.center!==void 0&&I.fromArray(C.center),c.boundingSphere=new uo(I,C.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}}class nB extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=this.path===""?bi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const h=new Bi(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(m){let y=null;try{y=JSON.parse(m)}catch(M){o!==void 0&&o(M),console.error("THREE:ObjectLoader: Can't parse "+e+".",M.message);return}const b=y.metadata;if(b===void 0||b.type===void 0||b.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(y,t)},r,o)}async loadAsync(e,t){const r=this,o=this.path===""?bi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Bi(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const c=await l.loadAsync(e,t),h=JSON.parse(c),m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(h)}parse(e,t){const r=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,o),c=this.parseImages(e.images,function(){t!==void 0&&t(y)}),h=this.parseTextures(e.textures,c),m=this.parseMaterials(e.materials,h),y=this.parseObject(e.object,l,m,h,r),b=this.parseSkeletons(e.skeletons,y);if(this.bindSkeletons(y,b),t!==void 0){let M=!1;for(const C in c)if(c[C]instanceof HTMLImageElement){M=!0;break}M===!1&&t(y)}return y}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),l=await this.parseImagesAsync(e.images),c=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,c),m=this.parseObject(e.object,o,h,c,t),y=this.parseSkeletons(e.skeletons,m);return this.bindSkeletons(m,y),m}parseShapes(e){const t={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const l=new Ns().fromJSON(e[r]);t[l.uuid]=l}return t}parseSkeletons(e,t){const r={},o={};if(t.traverse(function(l){l.isBone&&(o[l.uuid]=l)}),e!==void 0)for(let l=0,c=e.length;l<c;l++){const h=new aa().fromJSON(e[l],o);r[h.uuid]=h}return r}parseGeometries(e,t){const r={};if(e!==void 0){const o=new RE;for(let l=0,c=e.length;l<c;l++){let h;const m=e[l];switch(m.type){case"BufferGeometry":case"InstancedBufferGeometry":h=o.parse(m);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:m.type in pE?h=pE[m.type].fromJSON(m,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${m.type}"`)}h.uuid=m.uuid,m.name!==void 0&&(h.name=m.name),h.isBufferGeometry===!0&&m.userData!==void 0&&(h.userData=m.userData),r[m.uuid]=h}}return r}parseMaterials(e,t){const r={},o={};if(e!==void 0){const l=new CE;l.setTextures(t);for(let c=0,h=e.length;c<h;c++){const m=e[c];if(m.type==="MultiMaterial"){const y=[];for(let b=0;b<m.materials.length;b++){const M=m.materials[b];r[M.uuid]===void 0&&(r[M.uuid]=l.parse(M)),y.push(r[M.uuid])}o[m.uuid]=y}else r[m.uuid]===void 0&&(r[m.uuid]=l.parse(m)),o[m.uuid]=r[m.uuid]}}return o}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const o=e[r],l=Il.parse(o);t[l.uuid]=l}return t}parseImages(e,t){const r=this,o={};let l;function c(m){return r.manager.itemStart(m),l.load(m,function(){r.manager.itemEnd(m)},void 0,function(){r.manager.itemError(m),r.manager.itemEnd(m)})}function h(m){if(typeof m=="string"){const y=m,b=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(y)?y:r.resourcePath+y;return c(b)}else return m.data?{data:zu(m.type,m.data),width:m.width,height:m.height}:null}if(e!==void 0&&e.length>0){const m=new kx(t);l=new Tc(m),l.setCrossOrigin(this.crossOrigin);for(let y=0,b=e.length;y<b;y++){const M=e[y],C=M.url;if(Array.isArray(C)){o[M.uuid]=[];for(let I=0,O=C.length;I<O;I++){const U=C[I],H=h(U);H!==null&&(H instanceof HTMLImageElement?o[M.uuid].push(H):o[M.uuid].push(new wl(H.data,H.width,H.height)))}}else{const I=h(M.url);I!==null&&(o[M.uuid]=I)}}}return o}async parseImagesAsync(e){const t=this,r={};let o;async function l(c){if(typeof c=="string"){const h=c,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await o.loadAsync(m)}else return c.data?{data:zu(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){o=new Tc(this.manager),o.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const m=e[c],y=m.url;if(Array.isArray(y)){r[m.uuid]=[];for(let b=0,M=y.length;b<M;b++){const C=y[b],I=await l(C);I!==null&&(I instanceof HTMLImageElement?r[m.uuid].push(I):r[m.uuid].push(new wl(I.data,I.width,I.height)))}}else{const b=await l(m.url);b!==null&&(r[m.uuid]=b)}}}return r}parseTextures(e,t){function r(l,c){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),c[l])}const o={};if(e!==void 0)for(let l=0,c=e.length;l<c;l++){const h=e[l];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);let m;const y=t[h.image];Array.isArray(y)?(m=new tc(y),y.length===6&&(m.needsUpdate=!0)):(y&&y.data?m=new wl(y.data,y.width,y.height):m=new Dn(y),y&&(m.needsUpdate=!0)),m.uuid=h.uuid,h.name!==void 0&&(m.name=h.name),h.mapping!==void 0&&(m.mapping=r(h.mapping,rB)),h.offset!==void 0&&m.offset.fromArray(h.offset),h.repeat!==void 0&&m.repeat.fromArray(h.repeat),h.center!==void 0&&m.center.fromArray(h.center),h.rotation!==void 0&&(m.rotation=h.rotation),h.wrap!==void 0&&(m.wrapS=r(h.wrap[0],LE),m.wrapT=r(h.wrap[1],LE)),h.format!==void 0&&(m.format=h.format),h.type!==void 0&&(m.type=h.type),h.encoding!==void 0&&(m.encoding=h.encoding),h.minFilter!==void 0&&(m.minFilter=r(h.minFilter,IE)),h.magFilter!==void 0&&(m.magFilter=r(h.magFilter,IE)),h.anisotropy!==void 0&&(m.anisotropy=h.anisotropy),h.flipY!==void 0&&(m.flipY=h.flipY),h.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(m.unpackAlignment=h.unpackAlignment),h.userData!==void 0&&(m.userData=h.userData),o[h.uuid]=m}return o}parseObject(e,t,r,o,l){let c;function h(C){return t[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",C),t[C]}function m(C){if(C!==void 0){if(Array.isArray(C)){const I=[];for(let O=0,U=C.length;O<U;O++){const H=C[O];r[H]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",H),I.push(r[H])}return I}return r[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),r[C]}}function y(C){return o[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",C),o[C]}let b,M;switch(e.type){case"Scene":c=new Rm,e.background!==void 0&&(Number.isInteger(e.background)?c.background=new Ze(e.background):c.background=y(e.background)),e.environment!==void 0&&(c.environment=y(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?c.fog=new bh(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(c.fog=new wh(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":c=new hr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(c.focus=e.focus),e.zoom!==void 0&&(c.zoom=e.zoom),e.filmGauge!==void 0&&(c.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(c.filmOffset=e.filmOffset),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"OrthographicCamera":c=new vl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(c.zoom=e.zoom),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"AmbientLight":c=new eg(e.color,e.intensity);break;case"DirectionalLight":c=new Fh(e.color,e.intensity);break;case"PointLight":c=new Ec(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":c=new Fx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":c=new Dh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":c=new Ox(e.color,e.groundColor,e.intensity);break;case"LightProbe":c=new Bh().fromJSON(e);break;case"SkinnedMesh":b=h(e.geometry),M=m(e.material),c=new xl(b,M),e.bindMode!==void 0&&(c.bindMode=e.bindMode),e.bindMatrix!==void 0&&c.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(c.skeleton=e.skeleton);break;case"Mesh":b=h(e.geometry),M=m(e.material),c=new Nn(b,M);break;case"InstancedMesh":b=h(e.geometry),M=m(e.material);const C=e.count,I=e.instanceMatrix,O=e.instanceColor;c=new ux(b,M,C),c.instanceMatrix=new bl(new Float32Array(I.array),16),O!==void 0&&(c.instanceColor=new bl(new Float32Array(O.array),O.itemSize));break;case"LOD":c=new zT;break;case"Line":c=new Xi(h(e.geometry),m(e.material));break;case"LineLoop":c=new Bm(h(e.geometry),m(e.material));break;case"LineSegments":c=new Cr(h(e.geometry),m(e.material));break;case"PointCloud":case"Points":c=new hc(h(e.geometry),m(e.material));break;case"Sprite":c=new km(m(e.material));break;case"Group":c=new Ur;break;case"Bone":c=new _l;break;default:c=new Wt}if(c.uuid=e.uuid,e.name!==void 0&&(c.name=e.name),e.matrix!==void 0?(c.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=e.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(e.position!==void 0&&c.position.fromArray(e.position),e.rotation!==void 0&&c.rotation.fromArray(e.rotation),e.quaternion!==void 0&&c.quaternion.fromArray(e.quaternion),e.scale!==void 0&&c.scale.fromArray(e.scale)),e.castShadow!==void 0&&(c.castShadow=e.castShadow),e.receiveShadow!==void 0&&(c.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(c.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(c.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(c.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(c.visible=e.visible),e.frustumCulled!==void 0&&(c.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(c.renderOrder=e.renderOrder),e.userData!==void 0&&(c.userData=e.userData),e.layers!==void 0&&(c.layers.mask=e.layers),e.children!==void 0){const C=e.children;for(let I=0;I<C.length;I++)c.add(this.parseObject(C[I],t,r,o,l))}if(e.animations!==void 0){const C=e.animations;for(let I=0;I<C.length;I++){const O=C[I];c.animations.push(l[O])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(c.autoUpdate=e.autoUpdate);const C=e.levels;for(let I=0;I<C.length;I++){const O=C[I],U=c.getObjectByProperty("uuid",O.object);U!==void 0&&c.addLevel(U,O.distance)}}return c}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const o=t[r.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(o,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const rB={UVMapping:Gp,CubeReflectionMapping:rl,CubeRefractionMapping:il,EquirectangularReflectionMapping:Ou,EquirectangularRefractionMapping:ih,CubeUVReflectionMapping:Du,CubeUVRefractionMapping:sh},LE={RepeatWrapping:Ls,ClampToEdgeWrapping:fr,MirroredRepeatWrapping:Nu},IE={NearestFilter:jn,NearestMipmapNearestFilter:oh,NearestMipmapLinearFilter:ah,LinearFilter:Rn,LinearMipmapNearestFilter:Vp,LinearMipmapLinearFilter:so};class zx extends zr{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=Pl.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(c),l.manager.itemEnd(e)},0),c;const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(m){Pl.add(e,m),t&&t(m),l.manager.itemEnd(e)}).catch(function(m){o&&o(m),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}zx.prototype.isImageBitmapLoader=!0;let tg;const Hx={getContext:function(){return tg===void 0&&(tg=new(window.AudioContext||window.webkitAudioContext)),tg},setContext:function(s){tg=s}};class PE extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=new Bi(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{const m=h.slice(0);Hx.getContext().decodeAudioData(m,function(b){t(b)})}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}}class kE extends Bh{constructor(e,t,r=1){super(void 0,r);const o=new Ze().set(e),l=new Ze().set(t),c=new he(o.r,o.g,o.b),h=new he(l.r,l.g,l.b),m=Math.sqrt(Math.PI),y=m*Math.sqrt(.75);this.sh.coefficients[0].copy(c).add(h).multiplyScalar(m),this.sh.coefficients[1].copy(c).sub(h).multiplyScalar(y)}}kE.prototype.isHemisphereLightProbe=!0;class OE extends Bh{constructor(e,t=1){super(void 0,t);const r=new Ze().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}OE.prototype.isAmbientLightProbe=!0;const DE=new Je,NE=new Je,kl=new Je;class iB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,kl.copy(e.projectionMatrix);const o=t.eyeSep/2,l=o*t.near/t.focus,c=t.near*Math.tan(hl*t.fov*.5)/t.zoom;let h,m;NE.elements[12]=-o,DE.elements[12]=o,h=-c*t.aspect+l,m=c*t.aspect+l,kl.elements[0]=2*t.near/(m-h),kl.elements[8]=(m+h)/(m-h),this.cameraL.projectionMatrix.copy(kl),h=-c*t.aspect-l,m=c*t.aspect-l,kl.elements[0]=2*t.near/(m-h),kl.elements[8]=(m+h)/(m-h),this.cameraR.projectionMatrix.copy(kl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(DE)}}class FE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=BE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=BE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function BE(){return(typeof performance=="undefined"?Date:performance).now()}const Ol=new he,UE=new Vt,sB=new he,Dl=new he;class oB extends Wt{constructor(){super();this.type="AudioListener",this.context=Hx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new FE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ol,UE,sB),Dl.set(0,0,-1).applyQuaternion(UE),t.positionX){const o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ol.x,o),t.positionY.linearRampToValueAtTime(Ol.y,o),t.positionZ.linearRampToValueAtTime(Ol.z,o),t.forwardX.linearRampToValueAtTime(Dl.x,o),t.forwardY.linearRampToValueAtTime(Dl.y,o),t.forwardZ.linearRampToValueAtTime(Dl.z,o),t.upX.linearRampToValueAtTime(r.x,o),t.upY.linearRampToValueAtTime(r.y,o),t.upZ.linearRampToValueAtTime(r.z,o)}else t.setPosition(Ol.x,Ol.y,Ol.z),t.setOrientation(Dl.x,Dl.y,Dl.z,r.x,r.y,r.z)}}class Gx extends Wt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Nl=new he,zE=new Vt,aB=new he,Fl=new he;class lB extends Gx{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nl,zE,aB),Fl.set(0,0,1).applyQuaternion(zE);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nl.x,r),t.positionY.linearRampToValueAtTime(Nl.y,r),t.positionZ.linearRampToValueAtTime(Nl.z,r),t.orientationX.linearRampToValueAtTime(Fl.x,r),t.orientationY.linearRampToValueAtTime(Fl.y,r),t.orientationZ.linearRampToValueAtTime(Fl.z,r)}else t.setPosition(Nl.x,Nl.y,Nl.z),t.setOrientation(Fl.x,Fl.y,Fl.z)}}class HE{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class GE{constructor(e,t,r){this.binding=e,this.valueSize=r;let o,l,c;switch(t){case"quaternion":o=this._slerp,l=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:o=this._lerp,l=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,l=e*o+o;let c=this.cumulativeWeight;if(c===0){for(let h=0;h!==o;++h)r[l+h]=r[h];c=t}else{c+=t;const h=t/c;this._mixBufferRegion(r,l,0,h,o)}this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,l=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const m=t*this._origIndex;this._mixBufferRegion(r,o,m,1-l,t)}c>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,y=t+t;m!==y;++m)if(r[m]!==r[m+t]){h.setValue(r,o);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,o=r*this._origIndex;e.getValue(t,o);for(let l=r,c=o;l!==c;++l)t[l]=t[o+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,l){if(o>=.5)for(let c=0;c!==l;++c)e[t+c]=e[r+c]}_slerp(e,t,r,o){Vt.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,l){const c=this._workIndex*l;Vt.multiplyQuaternionsFlat(e,c,e,t,e,r),Vt.slerpFlat(e,t,e,t,e,c,o)}_lerp(e,t,r,o,l){const c=1-o;for(let h=0;h!==l;++h){const m=t+h;e[m]=e[m]*c+e[r+h]*o}}_lerpAdditive(e,t,r,o,l){for(let c=0;c!==l;++c){const h=t+c;e[h]=e[h]+e[r+c]*o}}}const Vx="\\[\\]\\.:\\/",uB=new RegExp("["+Vx+"]","g"),Wx="[^"+Vx+"]",cB="[^"+Vx.replace("\\.","")+"]",fB=/((?:WC+[\/:])*)/.source.replace("WC",Wx),hB=/(WCOD+)?/.source.replace("WCOD",cB),dB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wx),pB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wx),mB=new RegExp("^"+fB+hB+dB+pB+"$"),gB=["material","materials","bones"];class vB{constructor(e,t,r){const o=r||Jt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,o=this._bindings[r];o!==void 0&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=r.length;o!==l;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Jt{constructor(e,t,r){this.path=t,this.parsedPath=r||Jt.parseTrackName(t),this.node=Jt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Jt.Composite(e,t,r):new Jt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uB,"")}static parseTrackName(e){const t=mB.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=r.nodeName.substring(o+1);gB.indexOf(l)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=l)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(l){for(let c=0;c<l.length;c++){const h=l[c];if(h.name===t||h.uuid===t)return h;const m=r(h.children);if(m)return m}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)e[t++]=r[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let o=0,l=r.length;o!==l;++o)r[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,o=t.propertyName;let l=t.propertyIndex;if(e||(e=Jt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let y=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let b=0;b<e.length;b++)if(e[b].name===y){y=b;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(y!==void 0){if(e[y]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[y]}}const c=e[o];if(c===void 0){const y=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+y+"."+o+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}m=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=l}else c.fromArray!==void 0&&c.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(m=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=o;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jt.Composite=vB;Jt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jt.prototype.GetterByBindingType=[Jt.prototype._getValue_direct,Jt.prototype._getValue_array,Jt.prototype._getValue_arrayElement,Jt.prototype._getValue_toArray];Jt.prototype.SetterByBindingTypeAndVersioning=[[Jt.prototype._setValue_direct,Jt.prototype._setValue_direct_setNeedsUpdate,Jt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_array,Jt.prototype._setValue_array_setNeedsUpdate,Jt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_arrayElement,Jt.prototype._setValue_arrayElement_setNeedsUpdate,Jt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_fromArray,Jt.prototype._setValue_fromArray_setNeedsUpdate,Jt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VE{constructor(){this.uuid=Oi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,o=arguments.length;r!==o;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,o=this._parsedPaths,l=this._bindings,c=l.length;let h,m=e.length,y=this.nCachedObjects_;for(let b=0,M=arguments.length;b!==M;++b){const C=arguments[b],I=C.uuid;let O=t[I];if(O===void 0){O=m++,t[I]=O,e.push(C);for(let U=0,H=c;U!==H;++U)l[U].push(new Jt(C,r[U],o[U]))}else if(O<y){h=e[O];const U=--y,H=e[U];t[H.uuid]=O,e[O]=H,t[I]=U,e[U]=C;for(let P=0,A=c;P!==A;++P){const F=l[P],L=F[U];let B=F[O];F[O]=L,B===void 0&&(B=new Jt(C,r[P],o[P])),F[U]=B}}else e[O]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=y}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const m=arguments[c],y=m.uuid,b=t[y];if(b!==void 0&&b>=l){const M=l++,C=e[M];t[C.uuid]=b,e[b]=C,t[y]=M,e[M]=m;for(let I=0,O=o;I!==O;++I){const U=r[I],H=U[M],P=U[b];U[b]=H,U[M]=P}}}this.nCachedObjects_=l}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,o=r.length;let l=this.nCachedObjects_,c=e.length;for(let h=0,m=arguments.length;h!==m;++h){const y=arguments[h],b=y.uuid,M=t[b];if(M!==void 0)if(delete t[b],M<l){const C=--l,I=e[C],O=--c,U=e[O];t[I.uuid]=M,e[M]=I,t[U.uuid]=C,e[C]=U,e.pop();for(let H=0,P=o;H!==P;++H){const A=r[H],F=A[C],L=A[O];A[M]=F,A[C]=L,A.pop()}}else{const C=--c,I=e[C];C>0&&(t[I.uuid]=M),e[M]=I,e.pop();for(let O=0,U=o;O!==U;++O){const H=r[O];H[M]=H[C],H.pop()}}}this.nCachedObjects_=l}subscribe_(e,t){const r=this._bindingsIndicesByPath;let o=r[e];const l=this._bindings;if(o!==void 0)return l[o];const c=this._paths,h=this._parsedPaths,m=this._objects,y=m.length,b=this.nCachedObjects_,M=new Array(y);o=l.length,r[e]=o,c.push(e),h.push(t),l.push(M);for(let C=b,I=m.length;C!==I;++C){const O=m[C];M[C]=new Jt(O,e,t)}return M}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const o=this._paths,l=this._parsedPaths,c=this._bindings,h=c.length-1,m=c[h],y=e[h];t[y]=r,c[r]=m,c.pop(),l[r]=l[h],l.pop(),o[r]=o[h],o.pop()}}}VE.prototype.isAnimationObjectGroup=!0;class yB{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const l=t.tracks,c=l.length,h=new Array(c),m={endingStart:ul,endingEnd:ul};for(let y=0;y!==c;++y){const b=l[y].createInterpolant(null);h[y]=b,b.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=MM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,l=e._clip.duration,c=l/o,h=o/l;e.warp(1,c,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,l=o.time,c=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,y=h.sampleValues;return m[0]=l,m[1]=l+r,y[0]=e/c,y[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const m=(e-l)*r;if(m<0||r===0)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const c=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,y=this._propertyBindings;switch(this.blendMode){case Ey:for(let b=0,M=m.length;b!==M;++b)m[b].evaluate(c),y[b].accumulateAdditive(h);break;case Yp:default:for(let b=0,M=m.length;b!==M;++b)m[b].evaluate(c),y[b].accumulate(o,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,l=this._loopCount;const c=r===TM;if(e===0)return l===-1?o:c&&(l&1)==1?t-o:o;if(r===SM){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,l+=Math.abs(h);const m=this.repetitions-l;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const y=e<0;this._setEndings(y,!y,c)}else this._setEndings(!1,!1,c);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(c&&(l&1)==1)return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=cl,o.endingEnd=cl):(e?o.endingStart=this.zeroSlopeAtStart?cl:ul:o.endingStart=uh,t?o.endingEnd=this.zeroSlopeAtEnd?cl:ul:o.endingEnd=uh)}_scheduleFading(e,t,r){const o=this._mixer,l=o.time;let c=this._weightInterpolant;c===null&&(c=o._lendControlInterpolant(),this._weightInterpolant=c);const h=c.parameterPositions,m=c.sampleValues;return h[0]=l,m[0]=t,h[1]=l+e,m[1]=r,this}}class WE extends Xo{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,l=o.length,c=e._propertyBindings,h=e._interpolants,m=r.uuid,y=this._bindingsByRootAndName;let b=y[m];b===void 0&&(b={},y[m]=b);for(let M=0;M!==l;++M){const C=o[M],I=C.name;let O=b[I];if(O!==void 0)++O.referenceCount,c[M]=O;else{if(O=c[M],O!==void 0){O._cacheIndex===null&&(++O.referenceCount,this._addInactiveBinding(O,m,I));continue}const U=t&&t._propertyBindings[M].binding.parsedPath;O=new GE(Jt.create(r,I,U),C.ValueTypeName,C.getValueSize()),++O.referenceCount,this._addInactiveBinding(O,m,I),c[M]=O}h[M].resultBuffer=O.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];l.useCount++==0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.useCount==0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,l=this._actionsByClip;let c=l[t];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=c;else{const h=c.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),c.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,c=this._actionsByClip,h=c[l],m=h.knownActions,y=m[m.length-1],b=e._byClipCacheIndex;y._byClipCacheIndex=b,m[b]=y,m.pop(),e._byClipCacheIndex=null;const M=h.actionByRoot,C=(e._localRoot||this._root).uuid;delete M[C],m.length===0&&delete c[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];--l.referenceCount==0&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,l=this._bindings;let c=o[t];c===void 0&&(c={},o[t]=c),c[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,l=r.path,c=this._bindingsByRootAndName,h=c[o],m=t[t.length-1],y=e._cacheIndex;m._cacheIndex=y,t[y]=m,t.pop(),delete h[l],Object.keys(h).length===0&&delete c[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Ix(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=t[o];e.__cacheIndex=o,t[o]=e,l.__cacheIndex=r,t[r]=l}clipAction(e,t,r){const o=t||this._root,l=o.uuid;let c=typeof e=="string"?Il.findByName(o,e):e;const h=c!==null?c.uuid:e,m=this._actionsByClip[h];let y=null;if(r===void 0&&(c!==null?r=c.blendMode:r=Yp),m!==void 0){const M=m.actionByRoot[l];if(M!==void 0&&M.blendMode===r)return M;y=m.knownActions[0],c===null&&(c=y._clip)}if(c===null)return null;const b=new yB(this,c,t,r);return this._bindAction(b,y),this._addInactiveAction(b,h,l),b}existingAction(e,t){const r=t||this._root,o=r.uuid,l=typeof e=="string"?Il.findByName(r,e):e,c=l?l.uuid:e,h=this._actionsByClip[c];return h!==void 0&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,o=this.time+=e,l=Math.sign(e),c=this._accuIndex^=1;for(let y=0;y!==r;++y)t[y]._update(o,e,l,c);const h=this._bindings,m=this._nActiveBindings;for(let y=0;y!==m;++y)h[y].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,l=o[r];if(l!==void 0){const c=l.knownActions;for(let h=0,m=c.length;h!==m;++h){const y=c[h];this._deactivateAction(y);const b=y._cacheIndex,M=t[t.length-1];y._cacheIndex=null,y._byClipCacheIndex=null,M._cacheIndex=b,t[b]=M,t.pop(),this._removeInactiveBindingsForAction(y)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const c in r){const h=r[c].actionByRoot,m=h[t];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const o=this._bindingsByRootAndName,l=o[t];if(l!==void 0)for(const c in l){const h=l[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}WE.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class ng{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new ng(this.value.clone===void 0?this.value:this.value.clone())}}class $E extends oa{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}$E.prototype.isInstancedInterleavedBuffer=!0;class jE{constructor(e,t,r,o,l){this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=o,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}jE.prototype.isGLBufferAttribute=!0;class xB{constructor(e,t,r=0,o=1/0){this.ray=new Jo(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new am,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return $x(e,this,r,t),r.sort(qE),r}intersectObjects(e,t=!0,r=[]){for(let o=0,l=e.length;o<l;o++)$x(e[o],this,r,t);return r.sort(qE),r}}function qE(s,e){return s.distance-e.distance}function $x(s,e,t,r){if(s.layers.test(e.layers)&&s.raycast(e,t),r===!0){const o=s.children;for(let l=0,c=o.length;l<c;l++)$x(o[l],e,t,!0)}}class _B{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Br(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wB{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const XE=new je;class Ac{constructor(e=new je(1/0,1/0),t=new je(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=XE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return XE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ac.prototype.isBox2=!0;const YE=new he,rg=new he;class KE{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){YE.subVectors(e,this.start),rg.subVectors(this.end,this.start);const r=rg.dot(rg);let l=rg.dot(YE)/r;return t&&(l=Br(l,0,1)),l}closestPointToPoint(e,t,r){const o=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ZE=new he;class bB extends Wt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new St,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,h=1,m=32;c<m;c++,h++){const y=c/m*Math.PI*2,b=h/m*Math.PI*2;o.push(Math.cos(y),Math.sin(y),1,Math.cos(b),Math.sin(b),1)}r.setAttribute("position",new vt(o,3));const l=new Fn({fog:!1,toneMapped:!1});this.cone=new Cr(r,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ZE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ZE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fa=new he,ig=new Je,jx=new Je;class QE extends Cr{constructor(e){const t=JE(e),r=new St,o=[],l=[],c=new Ze(0,0,1),h=new Ze(0,1,0);for(let y=0;y<t.length;y++){const b=t[y];b.parent&&b.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(c.r,c.g,c.b),l.push(h.r,h.g,h.b))}r.setAttribute("position",new vt(o,3)),r.setAttribute("color",new vt(l,3));const m=new Fn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,m);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");jx.copy(this.root.matrixWorld).invert();for(let l=0,c=0;l<t.length;l++){const h=t[l];h.parent&&h.parent.isBone&&(ig.multiplyMatrices(jx,h.matrixWorld),fa.setFromMatrixPosition(ig),o.setXYZ(c,fa.x,fa.y,fa.z),ig.multiplyMatrices(jx,h.parent.matrixWorld),fa.setFromMatrixPosition(ig),o.setXYZ(c+1,fa.x,fa.y,fa.z),c+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function JE(s){const e=[];s&&s.isBone&&e.push(s);for(let t=0;t<s.children.length;t++)e.push.apply(e,JE(s.children[t]));return e}class SB extends Nn{constructor(e,t,r){const o=new Tl(t,4,2),l=new Yr({wireframe:!0,fog:!1,toneMapped:!1});super(o,l);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const MB=new he,eA=new Ze,tA=new Ze;class TB extends Wt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const o=new Sl(t);o.rotateY(Math.PI*.5),this.material=new Yr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=o.getAttribute("position"),c=new Float32Array(l.count*3);o.setAttribute("color",new Dt(c,3)),this.add(new Nn(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");eA.copy(this.light.color),tA.copy(this.light.groundColor);for(let r=0,o=t.count;r<o;r++){const l=r<o/2?eA:tA;t.setXYZ(r,l.r,l.g,l.b)}t.needsUpdate=!0}e.lookAt(MB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nA extends Cr{constructor(e=10,t=10,r=4473924,o=8947848){r=new Ze(r),o=new Ze(o);const l=t/2,c=e/t,h=e/2,m=[],y=[];for(let C=0,I=0,O=-h;C<=t;C++,O+=c){m.push(-h,0,O,h,0,O),m.push(O,0,-h,O,0,h);const U=C===l?r:o;U.toArray(y,I),I+=3,U.toArray(y,I),I+=3,U.toArray(y,I),I+=3,U.toArray(y,I),I+=3}const b=new St;b.setAttribute("position",new vt(m,3)),b.setAttribute("color",new vt(y,3));const M=new Fn({vertexColors:!0,toneMapped:!1});super(b,M);this.type="GridHelper"}}class EB extends Cr{constructor(e=10,t=16,r=8,o=64,l=4473924,c=8947848){l=new Ze(l),c=new Ze(c);const h=[],m=[];for(let M=0;M<=t;M++){const C=M/t*(Math.PI*2),I=Math.sin(C)*e,O=Math.cos(C)*e;h.push(0,0,0),h.push(I,0,O);const U=M&1?l:c;m.push(U.r,U.g,U.b),m.push(U.r,U.g,U.b)}for(let M=0;M<=r;M++){const C=M&1?l:c,I=e-e/r*M;for(let O=0;O<o;O++){let U=O/o*(Math.PI*2),H=Math.sin(U)*I,P=Math.cos(U)*I;h.push(H,0,P),m.push(C.r,C.g,C.b),U=(O+1)/o*(Math.PI*2),H=Math.sin(U)*I,P=Math.cos(U)*I,h.push(H,0,P),m.push(C.r,C.g,C.b)}}const y=new St;y.setAttribute("position",new vt(h,3)),y.setAttribute("color",new vt(m,3));const b=new Fn({vertexColors:!0,toneMapped:!1});super(y,b);this.type="PolarGridHelper"}}const rA=new he,sg=new he,iA=new he;class AB extends Wt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let o=new St;o.setAttribute("position",new vt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const l=new Fn({fog:!1,toneMapped:!1});this.lightPlane=new Xi(o,l),this.add(this.lightPlane),o=new St,o.setAttribute("position",new vt([0,0,0,0,0,1],3)),this.targetLine=new Xi(o,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){rA.setFromMatrixPosition(this.light.matrixWorld),sg.setFromMatrixPosition(this.light.target.matrixWorld),iA.subVectors(sg,rA),this.lightPlane.lookAt(sg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sg),this.targetLine.scale.z=iA.length()}}const og=new he,qn=new vh;class CB extends Cr{constructor(e){const t=new St,r=new Fn({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],c={},h=new Ze(16755200),m=new Ze(16711680),y=new Ze(43775),b=new Ze(16777215),M=new Ze(3355443);C("n1","n2",h),C("n2","n4",h),C("n4","n3",h),C("n3","n1",h),C("f1","f2",h),C("f2","f4",h),C("f4","f3",h),C("f3","f1",h),C("n1","f1",h),C("n2","f2",h),C("n3","f3",h),C("n4","f4",h),C("p","n1",m),C("p","n2",m),C("p","n3",m),C("p","n4",m),C("u1","u2",y),C("u2","u3",y),C("u3","u1",y),C("c","t",b),C("p","c",M),C("cn1","cn2",M),C("cn3","cn4",M),C("cf1","cf2",M),C("cf3","cf4",M);function C(O,U,H){I(O,H),I(U,H)}function I(O,U){o.push(0,0,0),l.push(U.r,U.g,U.b),c[O]===void 0&&(c[O]=[]),c[O].push(o.length/3-1)}t.setAttribute("position",new vt(o,3)),t.setAttribute("color",new vt(l,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,o=1;qn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ir("c",t,e,qn,0,0,-1),ir("t",t,e,qn,0,0,1),ir("n1",t,e,qn,-r,-o,-1),ir("n2",t,e,qn,r,-o,-1),ir("n3",t,e,qn,-r,o,-1),ir("n4",t,e,qn,r,o,-1),ir("f1",t,e,qn,-r,-o,1),ir("f2",t,e,qn,r,-o,1),ir("f3",t,e,qn,-r,o,1),ir("f4",t,e,qn,r,o,1),ir("u1",t,e,qn,r*.7,o*1.1,-1),ir("u2",t,e,qn,-r*.7,o*1.1,-1),ir("u3",t,e,qn,0,o*2,-1),ir("cf1",t,e,qn,-r,0,1),ir("cf2",t,e,qn,r,0,1),ir("cf3",t,e,qn,0,-o,1),ir("cf4",t,e,qn,0,o,1),ir("cn1",t,e,qn,-r,0,-1),ir("cn2",t,e,qn,r,0,-1),ir("cn3",t,e,qn,0,-o,-1),ir("cn4",t,e,qn,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ir(s,e,t,r,o,l,c){og.set(o,l,c).unproject(r);const h=e[s];if(h!==void 0){const m=t.getAttribute("position");for(let y=0,b=h.length;y<b;y++)m.setXYZ(h[y],og.x,og.y,og.z)}}const ag=new xi;class sA extends Cr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),l=new St;l.setIndex(new Dt(r,1)),l.setAttribute("position",new Dt(o,3));super(l,new Fn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ag.setFromObject(this.object),ag.isEmpty())return;const t=ag.min,r=ag.max,o=this.geometry.attributes.position,l=o.array;l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=t.x,l[4]=r.y,l[5]=r.z,l[6]=t.x,l[7]=t.y,l[8]=r.z,l[9]=r.x,l[10]=t.y,l[11]=r.z,l[12]=r.x,l[13]=r.y,l[14]=t.z,l[15]=t.x,l[16]=r.y,l[17]=t.z,l[18]=t.x,l[19]=t.y,l[20]=t.z,l[21]=r.x,l[22]=t.y,l[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Cr.prototype.copy.call(this,e),this.object=e.object,this}}class RB extends Cr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new St;l.setIndex(new Dt(r,1)),l.setAttribute("position",new vt(o,3));super(l,new Fn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class LB extends Xi{constructor(e,t=1,r=16776960){const o=r,l=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],c=new St;c.setAttribute("position",new vt(l,3)),c.computeBoundingSphere();super(c,new Fn({color:o,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],m=new St;m.setAttribute("position",new vt(h,3)),m.computeBoundingSphere(),this.add(new Nn(m,new Yr({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?$n:jo,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const oA=new he;let lg,qx;class IB extends Wt{constructor(e=new he(0,0,1),t=new he(0,0,0),r=1,o=16776960,l=r*.2,c=l*.2){super();this.type="ArrowHelper",lg===void 0&&(lg=new St,lg.setAttribute("position",new vt([0,0,0,0,1,0],3)),qx=new ua(0,.5,1,5,1),qx.translate(0,-.5,0)),this.position.copy(t),this.line=new Xi(lg,new Fn({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Nn(qx,new Yr({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,l,c)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{oA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(oA,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class aA extends Cr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new St;o.setAttribute("position",new vt(t,3)),o.setAttribute("color",new vt(r,3));const l=new Fn({vertexColors:!0,toneMapped:!1});super(o,l);this.type="AxesHelper"}setColors(e,t,r){const o=new Ze,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(t),o.toArray(l,6),o.toArray(l,9),o.set(r),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PB{constructor(){this.type="ShapePath",this.color=new Ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ih,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,l,c){return this.currentPath.bezierCurveTo(e,t,r,o,l,c),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(A){const F=[];for(let L=0,B=A.length;L<B;L++){const z=A[L],q=new Ns;q.curves=z.curves,F.push(q)}return F}function o(A,F){const L=F.length;let B=!1;for(let z=L-1,q=0;q<L;z=q++){let Z=F[z],ae=F[q],ce=ae.x-Z.x,ee=ae.y-Z.y;if(Math.abs(ee)>Number.EPSILON){if(ee<0&&(Z=F[q],ce=-ce,ae=F[z],ee=-ee),A.y<Z.y||A.y>ae.y)continue;if(A.y===Z.y){if(A.x===Z.x)return!0}else{const ue=ee*(A.x-Z.x)-ce*(A.y-Z.y);if(ue===0)return!0;if(ue<0)continue;B=!B}}else{if(A.y!==Z.y)continue;if(ae.x<=A.x&&A.x<=Z.x||Z.x<=A.x&&A.x<=ae.x)return!0}}return B}const l=Fs.isClockWise,c=this.subPaths;if(c.length===0)return[];if(t===!0)return r(c);let h,m,y;const b=[];if(c.length===1)return m=c[0],y=new Ns,y.curves=m.curves,b.push(y),b;let M=!l(c[0].getPoints());M=e?!M:M;const C=[],I=[];let O=[],U=0,H;I[U]=void 0,O[U]=[];for(let A=0,F=c.length;A<F;A++)m=c[A],H=m.getPoints(),h=l(H),h=e?!h:h,h?(!M&&I[U]&&U++,I[U]={s:new Ns,p:H},I[U].s.curves=m.curves,M&&U++,O[U]=[]):O[U].push({h:m,p:H[0]});if(!I[0])return r(c);if(I.length>1){let A=!1;const F=[];for(let L=0,B=I.length;L<B;L++)C[L]=[];for(let L=0,B=I.length;L<B;L++){const z=O[L];for(let q=0;q<z.length;q++){const Z=z[q];let ae=!0;for(let ce=0;ce<I.length;ce++)o(Z.p,I[ce].p)&&(L!==ce&&F.push({froms:L,tos:ce,hole:q}),ae?(ae=!1,C[ce].push(Z)):A=!0);ae&&C[L].push(Z)}}F.length>0&&(A||(O=C))}let P;for(let A=0,F=I.length;A<F;A++){y=I[A].s,b.push(y),P=O[A];for(let L=0,B=P.length;L<B;L++)y.holes.push(P[L].h)}return b}}const lA=new Float32Array(1),kB=new Int32Array(lA.buffer);class OB{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),lA[0]=e;const t=kB[0];let r=t>>16&32768,o=t>>12&2047;const l=t>>23&255;return l<103?r:l>142?(r|=31744,r|=(l==255?0:1)&&t&8388607,r):l<113?(o|=2048,r|=(o>>114-l)+(o>>113-l&1),r):(r|=l-112<<10|o>>1,r+=o&1,r)}}const DB=0,NB=1,FB=0,BB=1,UB=2;function zB(s){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),s}function HB(s=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),s.isMultiMaterial=!0,s.materials=s,s.clone=function(){return s.slice()},s}function GB(s,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new hc(s,e)}function VB(s){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new km(s)}function WB(s,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new hc(s,e)}function $B(s){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new la(s)}function jB(s){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new la(s)}function qB(s){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new la(s)}function XB(s,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new he(s,e,t)}function YB(s,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Dt(s,e).setUsage(fl)}function KB(s,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new qM(s,e)}function ZB(s,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new XM(s,e)}function QB(s,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new YM(s,e)}function JB(s,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new KM(s,e)}function eU(s,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new mh(s,e)}function tU(s,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ZM(s,e)}function nU(s,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new cm(s,e)}function rU(s,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new vt(s,e)}function iU(s,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new JM(s,e)}wi.create=function(s,e){return console.log("THREE.Curve.create() has been deprecated"),s.prototype=Object.create(wi.prototype),s.prototype.constructor=s,s.prototype.getPoint=e,s};Ih.prototype.fromPoints=function(s){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(s)};function sU(s){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new aA(s)}function oU(s,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new sA(s,e)}function aU(s,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Cr(new px(s.geometry),new Fn({color:e!==void 0?e:16777215}))}nA.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};QE.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function lU(s,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Cr(new Tx(s.geometry),new Fn({color:e!==void 0?e:16777215}))}zr.prototype.extractUrlBase=function(s){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),bi.extractUrlBase(s)};zr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function uU(s){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Bi(s)}function cU(s){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new _E(s)}Ac.prototype.center=function(s){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(s)};Ac.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ac.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Ac.prototype.size=function(s){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(s)};xi.prototype.center=function(s){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(s)};xi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};xi.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};xi.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};xi.prototype.size=function(s){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(s)};uo.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};yh.prototype.setFromMatrix=function(s){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(s)};KE.prototype.center=function(s){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(s)};gn.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};gn.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};gn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};gn.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};gn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};gn.prototype.getInverse=function(s){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};Je.prototype.extractPosition=function(s){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(s)};Je.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};Je.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new he().setFromMatrixColumn(this,3)};Je.prototype.setRotationFromQuaternion=function(s){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(s)};Je.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Je.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Je.prototype.multiplyVector4=function(s){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Je.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Je.prototype.rotateAxis=function(s){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),s.transformDirection(this)};Je.prototype.crossVector=function(s){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Je.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Je.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Je.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Je.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Je.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Je.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Je.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Je.prototype.makeFrustum=function(s,e,t,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(s,e,r,t,o,l)};Je.prototype.getInverse=function(s){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};ks.prototype.isIntersectionLine=function(s){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(s)};Vt.prototype.multiplyVector3=function(s){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),s.applyQuaternion(this)};Vt.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Jo.prototype.isIntersectionBox=function(s){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Jo.prototype.isIntersectionPlane=function(s){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(s)};Jo.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};tr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};tr.prototype.barycoordFromPoint=function(s,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(s,e)};tr.prototype.midpoint=function(s){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(s)};tr.prototypenormal=function(s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(s)};tr.prototype.plane=function(s){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(s)};tr.barycoordFromPoint=function(s,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),tr.getBarycoord(s,e,t,r,o)};tr.normal=function(s,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),tr.getNormal(s,e,t,r)};Ns.prototype.extractAllPoints=function(s){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(s)};Ns.prototype.extrude=function(s){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bs(this,s)};Ns.prototype.makeGeometry=function(s){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ml(this,s)};je.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};je.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};he.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};he.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};he.prototype.getPositionFromMatrix=function(s){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(s)};he.prototype.getScaleFromMatrix=function(s){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(s)};he.prototype.getColumnFromMatrix=function(s,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,s)};he.prototype.applyProjection=function(s){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(s)};he.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};he.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};he.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};an.prototype.fromAttribute=function(s,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,t)};an.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Wt.prototype.getChildByName=function(s){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(s)};Wt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Wt.prototype.translate=function(s,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,s)};Wt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Wt.prototype.applyMatrix=function(s){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(Wt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Nn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Nn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),EM},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});xl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};hr.prototype.setLens=function(s,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(s)};Object.defineProperties(ys.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}});Object.defineProperties(Dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===fl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(fl)}}});Dt.prototype.setDynamic=function(s){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?fl:Uu),this};Dt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Dt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};St.prototype.addIndex=function(s){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(s)};St.prototype.addAttribute=function(s,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(s,new Dt(arguments[1],arguments[2]))):s==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(s,e)};St.prototype.addDrawCall=function(s,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(s,e)};St.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};St.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};St.prototype.removeAttribute=function(s){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(s)};St.prototype.applyMatrix=function(s){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(St.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});oa.prototype.setDynamic=function(s){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?fl:Uu),this};oa.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Bs.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Bs.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Bs.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Rm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};ng.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(nr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ze}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===Zv}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Ps.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}});vn.prototype.clearTarget=function(s,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(s),this.clear(e,t,r)};vn.prototype.animate=function(s){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(s)};vn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};vn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};vn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};vn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};vn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};vn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};vn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};vn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};vn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};vn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};vn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};vn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};vn.prototype.enableScissorTest=function(s){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(s)};vn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};vn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};vn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};vn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};vn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};vn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};vn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};vn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};vn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};vn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(vn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=s===!0?rn:ki}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(kT.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function fU(s,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new _m(s,t)}Object.defineProperties(Di.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}});Gx.prototype.load=function(s){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new PE().load(s,function(r){e.setBuffer(r)}),this};HE.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};xm.prototype.updateCubeMap=function(s,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(s,e)};xm.prototype.clear=function(s,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(s,e,t,r)};Yo.crossOrigin=void 0;Yo.loadTexture=function(s,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new Jm;o.setCrossOrigin(this.crossOrigin);const l=o.load(s,t,void 0,r);return e&&(l.mapping=e),l};Yo.loadTextureCube=function(s,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new xE;o.setCrossOrigin(this.crossOrigin);const l=o.load(s,t,void 0,r);return e&&(l.mapping=e),l};Yo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Yo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function hU(){console.error("THREE.CanvasRenderer has been removed")}function dU(){console.error("THREE.JSONLoader has been removed.")}const pU={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function mU(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function gU(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new St}function vU(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new St}function yU(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function xU(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function _U(){console.error("THREE.ImmediateRenderObject has been removed.")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vi}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vi);var kG=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:oM,AddEquation:nl,AddOperation:nM,AdditiveAnimationBlendMode:Ey,AdditiveBlending:Qv,AlphaFormat:dM,AlwaysDepth:YS,AlwaysStencilFunc:IM,AmbientLight:eg,AmbientLightProbe:OE,AnimationClip:Il,AnimationLoader:eB,AnimationMixer:WE,AnimationObjectGroup:VE,AnimationUtils:Ln,ArcCurve:mx,ArrayCamera:ox,ArrowHelper:IB,Audio:Gx,AudioAnalyser:HE,AudioContext:Hx,AudioListener:oB,AudioLoader:PE,AxesHelper:aA,AxisHelper:sU,BackSide:$n,BasicDepthPacking:CM,BasicShadowMap:nP,BinaryTextureLoader:cU,Bone:_l,BooleanKeyframeTrack:Al,BoundingBoxHelper:oU,Box2:Ac,Box3:xi,Box3Helper:RB,BoxBufferGeometry:mo,BoxGeometry:mo,BoxHelper:sA,BufferAttribute:Dt,BufferGeometry:St,BufferGeometryLoader:RE,ByteType:lM,Cache:Pl,Camera:vh,CameraHelper:CB,CanvasRenderer:hU,CanvasTexture:rE,CatmullRomCurve3:_x,CineonToneMapping:sM,CircleBufferGeometry:dc,CircleGeometry:dc,ClampToEdgeWrapping:fr,Clock:FE,Color:Ze,ColorKeyframeTrack:Px,CompressedTexture:hx,CompressedTextureLoader:tB,ConeBufferGeometry:pc,ConeGeometry:pc,CubeCamera:xm,CubeReflectionMapping:rl,CubeRefractionMapping:il,CubeTexture:tc,CubeTextureLoader:xE,CubeUVReflectionMapping:Du,CubeUVRefractionMapping:sh,CubicBezierCurve:$m,CubicBezierCurve3:wx,CubicInterpolant:mE,CullFaceBack:Yv,CullFaceFront:OS,CullFaceFrontBack:tP,CullFaceNone:kS,Curve:wi,CurvePath:oE,CustomBlending:NS,CustomToneMapping:aM,CylinderBufferGeometry:ua,CylinderGeometry:ua,Cylindrical:wB,DataTexture:wl,DataTexture2DArray:Mm,DataTexture3D:rx,DataTextureLoader:_E,DataUtils:OB,DecrementStencilOp:fP,DecrementWrapStencilOp:dP,DefaultLoadingManager:yE,DepthFormat:qo,DepthStencilFormat:al,DepthTexture:Cm,DirectionalLight:Fh,DirectionalLightHelper:AB,DiscreteInterpolant:gE,DodecahedronBufferGeometry:mc,DodecahedronGeometry:mc,DoubleSide:Rs,DstAlphaFactor:VS,DstColorFactor:$S,DynamicBufferAttribute:YB,DynamicCopyUsage:AP,DynamicDrawUsage:fl,DynamicReadUsage:MP,EdgesGeometry:px,EdgesHelper:aU,EllipseCurve:Ah,EqualDepth:ZS,EqualStencilFunc:vP,EquirectangularReflectionMapping:Ou,EquirectangularRefractionMapping:ih,Euler:_i,EventDispatcher:Xo,ExtrudeBufferGeometry:Bs,ExtrudeGeometry:Bs,FaceColors:BB,FileLoader:Bi,FlatShading:Zv,Float16BufferAttribute:QM,Float32Attribute:rU,Float32BufferAttribute:vt,Float64Attribute:iU,Float64BufferAttribute:JM,FloatType:oo,Fog:bh,FogExp2:wh,Font:xU,FontLoader:yU,FramebufferTexture:nE,FrontSide:jo,Frustum:yh,GLBufferAttribute:jE,GLSL1:RP,GLSL3:Cy,GreaterDepth:JS,GreaterEqualDepth:QS,GreaterEqualStencilFunc:wP,GreaterStencilFunc:xP,GridHelper:nA,Group:Ur,HalfFloatType:sl,HemisphereLight:Ox,HemisphereLightHelper:TB,HemisphereLightProbe:kE,IcosahedronBufferGeometry:vc,IcosahedronGeometry:vc,ImageBitmapLoader:zx,ImageLoader:Tc,ImageUtils:Yo,ImmediateRenderObject:_U,IncrementStencilOp:cP,IncrementWrapStencilOp:hP,InstancedBufferAttribute:bl,InstancedBufferGeometry:Ux,InstancedInterleavedBuffer:$E,InstancedMesh:ux,Int16Attribute:JB,Int16BufferAttribute:KM,Int32Attribute:tU,Int32BufferAttribute:ZM,Int8Attribute:KB,Int8BufferAttribute:qM,IntType:cM,InterleavedBuffer:oa,InterleavedBufferAttribute:go,Interpolant:Us,InterpolateDiscrete:Bu,InterpolateLinear:ll,InterpolateSmooth:Xp,InvertStencilOp:pP,JSONLoader:dU,KeepStencilOp:Kp,KeyframeTrack:vs,LOD:zT,LatheBufferGeometry:yc,LatheGeometry:yc,Layers:am,LensFlare:mU,LessDepth:KS,LessEqualDepth:Hp,LessEqualStencilFunc:yP,LessStencilFunc:gP,Light:ys,LightProbe:Bh,Line:Xi,Line3:KE,LineBasicMaterial:Fn,LineCurve:Lh,LineCurve3:sE,LineDashedMaterial:Lx,LineLoop:Bm,LinePieces:NB,LineSegments:Cr,LineStrip:DB,LinearEncoding:ki,LinearFilter:Rn,LinearInterpolant:Ix,LinearMipMapLinearFilter:aP,LinearMipMapNearestFilter:oP,LinearMipmapLinearFilter:so,LinearMipmapNearestFilter:Vp,LinearToneMapping:rM,Loader:zr,LoaderUtils:bi,LoadingManager:kx,LoopOnce:SM,LoopPingPong:TM,LoopRepeat:MM,LuminanceAlphaFormat:gM,LuminanceFormat:mM,MOUSE:JI,Material:nr,MaterialLoader:CE,Math:yi,MathUtils:yi,Matrix3:gn,Matrix4:Je,MaxEquation:ny,Mesh:Nn,MeshBasicMaterial:Yr,MeshDepthMaterial:Em,MeshDistanceMaterial:Am,MeshFaceMaterial:zB,MeshLambertMaterial:Qm,MeshMatcapMaterial:Rx,MeshNormalMaterial:Cx,MeshPhongMaterial:Mc,MeshPhysicalMaterial:vo,MeshStandardMaterial:El,MeshToonMaterial:Ax,MinEquation:ty,MirroredRepeatWrapping:Nu,MixOperation:tM,MultiMaterial:HB,MultiplyBlending:ey,MultiplyOperation:rh,NearestFilter:jn,NearestMipMapLinearFilter:sP,NearestMipMapNearestFilter:iP,NearestMipmapLinearFilter:ah,NearestMipmapNearestFilter:oh,NeverDepth:XS,NeverStencilFunc:mP,NoBlending:ro,NoColors:FB,NoToneMapping:io,NormalAnimationBlendMode:Yp,NormalBlending:ku,NotEqualDepth:eM,NotEqualStencilFunc:_P,NumberKeyframeTrack:Cl,Object3D:Wt,ObjectLoader:nB,ObjectSpaceNormalMap:LM,OctahedronBufferGeometry:Sl,OctahedronGeometry:Sl,OneFactor:zS,OneMinusDstAlphaFactor:WS,OneMinusDstColorFactor:jS,OneMinusSrcAlphaFactor:iy,OneMinusSrcColorFactor:GS,OrthographicCamera:vl,PCFShadowMap:Kv,PCFSoftShadowMap:DS,PMREMGenerator:tx,ParametricGeometry:gU,Particle:VB,ParticleBasicMaterial:jB,ParticleSystem:WB,ParticleSystemMaterial:qB,Path:Ih,PerspectiveCamera:hr,Plane:ks,PlaneBufferGeometry:gl,PlaneGeometry:gl,PlaneHelper:LB,PointCloud:GB,PointCloudMaterial:$B,PointLight:Ec,PointLightHelper:SB,Points:hc,PointsMaterial:la,PolarGridHelper:EB,PolyhedronBufferGeometry:Ds,PolyhedronGeometry:Ds,PositionalAudio:lB,PropertyBinding:Jt,PropertyMixer:GE,QuadraticBezierCurve:jm,QuadraticBezierCurve3:qm,Quaternion:Vt,QuaternionKeyframeTrack:yo,QuaternionLinearInterpolant:vE,REVISION:vi,RGBADepthPacking:RM,RGBAFormat:Er,RGBAIntegerFormat:wM,RGBA_ASTC_10x10_Format:by,RGBA_ASTC_10x5_Format:xy,RGBA_ASTC_10x6_Format:_y,RGBA_ASTC_10x8_Format:wy,RGBA_ASTC_12x10_Format:Sy,RGBA_ASTC_12x12_Format:My,RGBA_ASTC_4x4_Format:fy,RGBA_ASTC_5x4_Format:hy,RGBA_ASTC_5x5_Format:dy,RGBA_ASTC_6x5_Format:py,RGBA_ASTC_6x6_Format:my,RGBA_ASTC_8x5_Format:gy,RGBA_ASTC_8x6_Format:vy,RGBA_ASTC_8x8_Format:yy,RGBA_BPTC_Format:Ty,RGBA_ETC2_EAC_Format:cy,RGBA_PVRTC_2BPPV1_Format:ly,RGBA_PVRTC_4BPPV1_Format:ay,RGBA_S3TC_DXT1_Format:$p,RGBA_S3TC_DXT3_Format:jp,RGBA_S3TC_DXT5_Format:qp,RGBFormat:pM,RGB_ETC1_Format:bM,RGB_ETC2_Format:uy,RGB_PVRTC_2BPPV1_Format:oy,RGB_PVRTC_4BPPV1_Format:sy,RGB_S3TC_DXT1_Format:Wp,RGFormat:xM,RGIntegerFormat:_M,RawShaderMaterial:rc,Ray:Jo,Raycaster:xB,RectAreaLight:Fx,RedFormat:vM,RedIntegerFormat:yM,ReinhardToneMapping:iM,RepeatWrapping:Ls,ReplaceStencilOp:uP,ReverseSubtractEquation:BS,RingBufferGeometry:xc,RingGeometry:xc,Scene:Rm,SceneUtils:pU,ShaderChunk:Qt,ShaderLib:gs,ShaderMaterial:Ps,ShadowMaterial:Ex,Shape:Ns,ShapeBufferGeometry:Ml,ShapeGeometry:Ml,ShapePath:PB,ShapeUtils:Fs,ShortType:uM,Skeleton:aa,SkeletonHelper:QE,SkinnedMesh:xl,SmoothShading:rP,Sphere:uo,SphereBufferGeometry:Tl,SphereGeometry:Tl,Spherical:_B,SphericalHarmonics3:Bx,SplineCurve:Xm,SpotLight:Dh,SpotLightHelper:bB,Sprite:km,SpriteMaterial:Lm,SrcAlphaFactor:ry,SrcAlphaSaturateFactor:qS,SrcColorFactor:HS,StaticCopyUsage:EP,StaticDrawUsage:Uu,StaticReadUsage:SP,StereoCamera:iB,StreamCopyUsage:CP,StreamDrawUsage:bP,StreamReadUsage:TP,StringKeyframeTrack:Rl,SubtractEquation:FS,SubtractiveBlending:Jv,TOUCH:eP,TangentSpaceNormalMap:ao,TetrahedronBufferGeometry:_c,TetrahedronGeometry:_c,TextGeometry:vU,Texture:Dn,TextureLoader:Jm,TorusBufferGeometry:wc,TorusGeometry:wc,TorusKnotBufferGeometry:bc,TorusKnotGeometry:bc,Triangle:tr,TriangleFanDrawMode:Ay,TriangleStripDrawMode:AM,TrianglesDrawMode:EM,TubeBufferGeometry:Sc,TubeGeometry:Sc,UVMapping:Gp,Uint16Attribute:eU,Uint16BufferAttribute:mh,Uint32Attribute:nU,Uint32BufferAttribute:cm,Uint8Attribute:ZB,Uint8BufferAttribute:XM,Uint8ClampedAttribute:QB,Uint8ClampedBufferAttribute:YM,Uniform:ng,UniformsLib:ot,UniformsUtils:Zy,UnsignedByteType:Is,UnsignedInt248Type:ol,UnsignedIntType:lh,UnsignedShort4444Type:fM,UnsignedShort5551Type:hM,UnsignedShortType:Fu,VSMShadowMap:Pu,Vector2:je,Vector3:he,Vector4:an,VectorKeyframeTrack:Ll,Vertex:XB,VertexColors:UB,VideoTexture:tE,WebGL1Renderer:DT,WebGLCubeRenderTarget:_m,WebGLMultipleRenderTargets:NM,WebGLMultisampleRenderTarget:em,WebGLRenderTarget:Di,WebGLRenderTargetCube:fU,WebGLRenderer:vn,WebGLUtils:OT,WireframeGeometry:Tx,WireframeHelper:lU,WrapAroundEnding:uh,XHRLoader:uU,ZeroCurvatureEnding:ul,ZeroFactor:US,ZeroSlopeEnding:cl,ZeroStencilOp:lP,_SRGBAFormat:Zp,sRGBEncoding:rn});(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){const s=6406,e=6407,t=6408,r=6409,o=6410,l=6402,c=34041,h=33321,m=36756,y=33325,b=33326,M=33330,C=33329,I=33338,O=33337,U=33340,H=33339,P=33323,A=36757,F=33327,L=33328,B=33336,z=33335,q=33332,Z=33331,ae=33334,ce=33333,ee=32849,ue=35905,le=36194,w=36758,p=35898,J=35901,E=34843,ge=34837,ke=36221,Se=36239,de=36215,ye=36233,Re=36209,we=36227,be=32856,Ue=35907,Ce=36759,$e=32855,ze=32854,W=32857,Ve=34842,Le=34836,Be=36220,Ye=36238,De=36975,oe=36214,yt=36232,j=36226,et=36208,Nt=33189,X=33190,n=36012,i=36013,a=35056,f=5121,g=5123,v=5125,S=5126,R=32819,k=32820,D=33635,V=5131,G=36193;let K;function Q(At){if(!K){const it={};it[s]={bytesPerElement:[1,2,2,4],type:[f,V,G,S]},it[r]={bytesPerElement:[1,2,2,4],type:[f,V,G,S]},it[o]={bytesPerElement:[2,4,4,8],type:[f,V,G,S]},it[e]={bytesPerElement:[3,6,6,12,2],type:[f,V,G,S,D]},it[t]={bytesPerElement:[4,8,8,16,2,2],type:[f,V,G,S,R,k]},it[l]={bytesPerElement:[2,4],type:[v,g]},it[c]={bytesPerElement:[4]},it[h]={bytesPerElement:[1]},it[m]={bytesPerElement:[1]},it[y]={bytesPerElement:[2]},it[b]={bytesPerElement:[4]},it[M]={bytesPerElement:[1]},it[C]={bytesPerElement:[1]},it[q]={bytesPerElement:[2]},it[Z]={bytesPerElement:[2]},it[ae]={bytesPerElement:[4]},it[ce]={bytesPerElement:[4]},it[P]={bytesPerElement:[2]},it[A]={bytesPerElement:[2]},it[F]={bytesPerElement:[4]},it[L]={bytesPerElement:[8]},it[B]={bytesPerElement:[2]},it[z]={bytesPerElement:[2]},it[I]={bytesPerElement:[4]},it[O]={bytesPerElement:[4]},it[U]={bytesPerElement:[8]},it[H]={bytesPerElement:[8]},it[ee]={bytesPerElement:[3]},it[ue]={bytesPerElement:[3]},it[le]={bytesPerElement:[2]},it[w]={bytesPerElement:[3]},it[p]={bytesPerElement:[4]},it[J]={bytesPerElement:[4]},it[E]={bytesPerElement:[6]},it[ge]={bytesPerElement:[12]},it[ke]={bytesPerElement:[3]},it[Se]={bytesPerElement:[3]},it[de]={bytesPerElement:[6]},it[ye]={bytesPerElement:[6]},it[Re]={bytesPerElement:[12]},it[we]={bytesPerElement:[12]},it[be]={bytesPerElement:[4]},it[Ue]={bytesPerElement:[4]},it[Ce]={bytesPerElement:[4]},it[$e]={bytesPerElement:[2]},it[ze]={bytesPerElement:[2]},it[W]={bytesPerElement:[4]},it[Ve]={bytesPerElement:[8]},it[Le]={bytesPerElement:[16]},it[Be]={bytesPerElement:[4]},it[Ye]={bytesPerElement:[4]},it[De]={bytesPerElement:[4]},it[oe]={bytesPerElement:[8]},it[yt]={bytesPerElement:[8]},it[j]={bytesPerElement:[16]},it[et]={bytesPerElement:[16]},it[Nt]={bytesPerElement:[2]},it[X]={bytesPerElement:[4]},it[n]={bytesPerElement:[4]},it[a]={bytesPerElement:[4]},it[i]={bytesPerElement:[4]},K=it}return K[At]}function ne(At,it,xn){return function(_n,lr,ur){const us=(_n+At-1)/At|0,$i=(lr+it-1)/it|0;return us*$i*xn*ur}}function ie(At,it,xn){return function(_n,lr,ur){return(Math.max(_n,At)*Math.max(lr,it)/xn|0)*ur}}const fe=33776,me=33777,Ie=33778,Xe=33779,Fe=36196,mt=35840,at=35841,wt=35842,gt=35843,pt=37488,bn=37489,tn=37490,Sn=37491,mn=37492,pe=37493,Te=37494,Oe=37495,Pe=37496,He=37497,Ae=37808,xt=37809,Et=37810,Rt=37811,Ft=37812,jt=37813,Xt=37814,nn=37815,Kn=37816,Vn=37817,Yt=37818,wr=37819,Gt=37820,lt=37821,kr=37840,br=37841,Mn=37842,Pt=37843,Sr=37844,Zn=37845,za=37846,qe=37847,se=37848,_e=37849,Ge=37850,Ke=37851,It=37852,Zt=37853,ct=35916,pr=35917,ni=35918,ko=35919,Wi=new Map([[fe,ne(4,4,8)],[me,ne(4,4,8)],[Ie,ne(4,4,16)],[Xe,ne(4,4,16)],[Fe,ne(4,4,8)],[mt,ie(8,8,2)],[wt,ie(8,8,2)],[at,ie(16,8,4)],[gt,ie(16,8,4)],[pt,ne(4,4,8)],[bn,ne(4,4,8)],[mn,ne(4,4,8)],[pe,ne(4,4,8)],[Te,ne(4,4,8)],[Oe,ne(4,4,8)],[tn,ne(4,4,16)],[Sn,ne(4,4,16)],[Pe,ne(4,4,16)],[He,ne(4,4,16)],[Ae,ne(4,4,16)],[kr,ne(4,4,16)],[xt,ne(5,4,16)],[br,ne(5,4,16)],[Et,ne(5,5,16)],[Mn,ne(5,5,16)],[Rt,ne(6,5,16)],[Pt,ne(6,5,16)],[Ft,ne(6,6,16)],[Sr,ne(6,6,16)],[jt,ne(8,5,16)],[Zn,ne(8,5,16)],[Xt,ne(8,6,16)],[za,ne(8,6,16)],[nn,ne(8,8,16)],[qe,ne(8,8,16)],[Kn,ne(10,5,16)],[se,ne(10,5,16)],[Vn,ne(10,6,16)],[_e,ne(10,6,16)],[Yt,ne(10,8,16)],[Ge,ne(10,8,16)],[wr,ne(10,10,16)],[Ke,ne(10,10,16)],[Gt,ne(12,10,16)],[It,ne(12,10,16)],[lt,ne(12,12,16)],[Zt,ne(12,12,16)],[ct,ne(4,4,8)],[pr,ne(4,4,8)],[ni,ne(4,4,16)],[ko,ne(4,4,16)]]);function ap(At,it){const xn=Q(At);if(!xn)throw"unknown internal format";if(xn.type){const _n=xn.type.indexOf(it);if(_n<0)throw new Error(`unsupported type ${it} for internalformat ${At}`);return xn.bytesPerElement[_n]}return xn.bytesPerElement[0]}function lp(At,it,xn,_n,lr){const ur=ap(At,lr);return it*xn*_n*ur}function Oo(At,it,xn,_n,lr){const ur=Wi.get(At);return ur?ur(it,xn,_n):lp(At,it,xn,_n,lr)}function Tf(At){return At&&At.buffer&&At.buffer instanceof ArrayBuffer}function up(At){return Tf(At)||At instanceof ArrayBuffer}function Ef(At){return{samples:At.getParameter(At.SAMPLES),depthBits:At.getParameter(At.DEPTH_BITS),contextAttributes:At.getContextAttributes()}}function cp(At,it){const{samples:xn,depthBits:_n,contextAttributes:lr}=it,{width:ur,height:us}=At.canvas,$i=ur*us*4,Ms=lr.depth?1:0,hp=lr.stencil?1:0,Or=Math.min(hp+_n>16?4:2,4);return $i+$i*xn+$i*Ms*Or}function fp(At){return typeof At=="number"}function Af(At,it,xn={}){const _n=xn.origGLErrorFn||At.getError;function lr(st){const bt=Ef(st),ht={baseContext:st,config:xn,apis:{gman_webgl_memory:{ctx:{getMemoryInfo(){const ft=cp(st,bt);return{memory:Xv(zp({},Or),{drawingbuffer:ft,total:ft+Or.buffer+Or.texture+Or.renderbuffer}),resources:zp({},Do)}}}}},resources:{},memory:{texture:0,buffer:0,renderbuffer:0},bindings:new Map,defaultVertexArray:{},webglObjectToMemory:new Map};return ht.webglObjectToMemory.set(ht.defaultVertexArray,{}),ht.currentVertexArray=ht.defaultVertexArray,ht}const ur=xn.sharedState||lr(At);xn.sharedState=ur;const{apis:us,baseContext:$i,bindings:Ms,config:hp,memory:Or,resources:Do,webglObjectToMemory:Li}=ur,Rf={};function No(){}function pi(st,bt,ht){const ft=ht||`create${bt[0].toUpperCase()}${bt.substr(1)}`;if(!!st[ft])return Do[bt]=0,function(Mt,kt,Ot,Ut){++Do[bt],Li.set(Ut,{size:0})}}function ri(st,bt=No,ht){const ft=ht||`delete${st[0].toUpperCase()}${st.substr(1)}`;if(!!At[ft])return function(Mt,kt,Ot){const[Ut]=Ot,Kt=Li.get(Ut);Kt&&(--Do[st],bt(Ut,Kt),Li.delete(Ut))}}function Ha(st,bt,ht,ft,Mt){const kt=Ms.get(st);if(!kt)throw new Error(`no renderbuffer bound to ${st}`);const Ot=Li.get(kt);if(!Ot)throw new Error(`unknown renderbuffer ${kt}`);const Kt=Oo(ht,ft,Mt,1)*bt;Or.renderbuffer-=Ot.size,Ot.size=Kt,Or.renderbuffer+=Kt}const Ga=34963,Va=5121,Fo=34067,hu=35866,Zs=34069,iv=34070,dp=34071,Ii=34072,sv=34073,ov=34074,Lf=33084,pp=33085,Ts=new Set([Zs,iv,dp,Ii,sv,ov]);function du(st){return Ts.has(st)}function Mr(st){st=du(st)?Fo:st;const bt=Ms.get(st);if(!bt)throw new Error(`no texture bound to ${st}`);const ht=Li.get(bt);if(!ht)throw new Error(`unknown texture ${bt}`);return ht}function ji(st,bt,ht,ft,Mt,kt,Ot,Ut){const Kt=st.size,hn=Oo(ft,Mt,kt,Ot,Ut),$r=du(bt)?bt-Zs:0;st.mips=st.mips||[],st.mips[ht]=st.mips[ht]||[];const jr=st.mips[ht][$r]||{};st.size-=jr.size||0,jr.size=hn,jr.internalFormat=ft,jr.type=Ut,jr.width=Mt,jr.height=kt,jr.depth=Ot,st.mips[ht][$r]=jr,st.size+=hn,Or.texture-=Kt,Or.texture+=st.size}function pu(st,bt,ht,ft,Mt,kt){const Ot=Mr(st),Ut=st===Fo?6:1,Kt=st===Fo?Zs:st;for(let hn=0;hn<bt;++hn){for(let $r=0;$r<Ut;++$r)ji(Ot,Kt+$r,hn,ht,ft,Mt,kt);ft=Math.ceil(Math.max(ft/2,1)),Mt=Math.ceil(Math.max(Mt/2,1)),kt=st===hu?kt:Math.ceil(Math.max(kt/2,1))}}function Qs(st,bt,ht){const[ft]=ht;ur.currentVertexArray=ft||ur.defaultVertexArray}function If(st,bt){switch(st){case Ga:const ht=Li.get(ur.currentVertexArray);ht.elementArrayBuffer=bt;break;default:Ms.set(st,bt);break}}const av={},mp={bufferData(st,bt,ht){const[ft,Mt,,kt=0,Ot=void 0]=ht;let Ut;switch(ft){case Ga:Ut=Li.get(ur.currentVertexArray).elementArrayBuffer;break;default:Ut=Ms.get(ft);break}if(!Ut)throw new Error(`no buffer bound to ${ft}`);let Kt=0;if(Ot!==void 0)Kt=Ot;else if(up(Mt))Kt=Mt.byteLength;else if(fp(Mt))Kt=Mt;else throw new Error(`unsupported bufferData src type ${Mt}`);const hn=Li.get(Ut);if(!hn)throw new Error(`unknown buffer ${Ut}`);Or.buffer-=hn.size,hn.size=Kt,Or.buffer+=Kt},bindVertexArray:Qs,bindVertexArrayOES:Qs,bindBuffer(st,bt,ht){const[ft,Mt]=ht;If(ft,Mt)},bindBufferBase(st,bt,ht){const[ft,Mt,kt]=ht;If(ft,kt)},bindBufferRange(st,bt,ht){const[ft,Mt,kt,Ot,Ut]=ht;If(ft,kt)},bindRenderbuffer(st,bt,ht){const[ft,Mt]=ht;Ms.set(ft,Mt)},bindTexture(st,bt,ht){const[ft,Mt]=ht;Ms.set(ft,Mt)},copyTexImage2D(st,bt,ht){const[ft,Mt,kt,Ot,Ut,Kt,hn,$r]=ht,jr=Mr(ft);ji(jr,ft,Mt,kt,Kt,hn,1,Va)},createBuffer:pi(At,"buffer"),createFramebuffer:pi(At,"framebuffer"),createRenderbuffer:pi(At,"renderbuffer"),createProgram:pi(At,"program"),createQuery:pi(At,"query"),createShader:pi(At,"shader"),createSampler:pi(At,"sampler"),createTexture:pi(At,"texture"),createTransformFeedback:pi(At,"transformFeedback"),createVertexArray:pi(At,"vertexArray"),createVertexArrayOES:pi(At,"vertexArray","createVertexArrayOES"),compressedTexImage2D(st,bt,ht){const[ft,Mt,kt,Ot,Ut]=ht,Kt=Mr(ft);ji(Kt,ft,Mt,kt,Ot,Ut,1,Va)},compressedTexImage3D(st,bt,ht){const[ft,Mt,kt,Ot,Ut,Kt]=ht,hn=Mr(ft);ji(hn,ft,Mt,kt,Ot,Ut,Kt,Va)},deleteBuffer:ri("buffer",function(st,bt){Or.buffer-=bt.size}),deleteFramebuffer:ri("framebuffer"),deleteProgram:ri("program"),deleteQuery:ri("query"),deleteRenderbuffer:ri("renderbuffer",function(st,bt){Or.renderbuffer-=bt.size}),deleteSampler:ri("sampler"),deleteShader:ri("shader"),deleteSync:ri("sync"),deleteTexture:ri("texture",function(st,bt){Or.texture-=bt.size}),deleteTransformFeedback:ri("transformFeedback"),deleteVertexArray:ri("vertexArray"),deleteVertexArrayOES:ri("vertexArray",No,"deleteVertexArrayOES"),fenceSync:function(st){if(!!st.fenceSync)return Do.sync=0,function(bt,ht,ft,Mt){++Do.sync,Li.set(Mt,{size:0})}}(At),generateMipmap(st,bt,ht){const[ft]=ht,Mt=Mr(ft),kt=Mt.parameters&&Mt.parameters.get(Lf)||0,Ot=Mt.parameters&&Mt.parameters.get(pp)||1024;let{width:Ut,height:Kt,depth:hn,internalFormat:$r,type:jr}=Mt.mips[kt][0],Wa=kt+1;const $a=ft===Fo?6:1,Qn=ft===Fo?Zs:ft;for(;Wa<=Ot&&!(Ut===1&&Kt===1&&(hn===1||ft===hu));){Ut=Math.ceil(Math.max(Ut/2,1)),Kt=Math.ceil(Math.max(Kt/2,1)),hn=ft===hu?hn:Math.ceil(Math.max(hn/2,1));for(let Pf=0;Pf<$a;++Pf)ji(Mt,Qn+Pf,Wa,$r,Ut,Kt,hn,jr);++Wa}},getSupportedExtensions(st,bt,ht,ft){ft.push("GMAN_webgl_memory")},renderbufferStorage(st,bt,ht){const[ft,Mt,kt,Ot]=ht;Ha(ft,1,Mt,kt,Ot)},renderbufferStorageMultisample(st,bt,ht){const[ft,Mt,kt,Ot,Ut]=ht;Ha(ft,Mt,kt,Ot,Ut)},texImage2D(st,bt,ht){let[ft,Mt,kt]=ht,Ot,Ut,Kt;if(ht.length==6){const $r=ht[5];Ot=$r.width,Ut=$r.height,Kt=ht[4]}else Ot=ht[3],Ut=ht[4],Kt=ht[7];const hn=Mr(ft);ji(hn,ft,Mt,kt,Ot,Ut,1,Kt)},texImage3D(st,bt,ht){let[ft,Mt,kt,Ot,Ut,Kt,hn,$r,jr]=ht;const Wa=Mr(ft);ji(Wa,ft,Mt,kt,Ot,Ut,Kt,jr)},texParameteri(st,bt,ht){let[ft,Mt,kt]=ht;const Ot=Mr(ft);Ot.parameters=Ot.parameters||new Map,Ot.parameters.set(Mt,kt)},texStorage2D(st,bt,ht){let[ft,Mt,kt,Ot,Ut]=ht;pu(ft,Mt,kt,Ot,Ut,1)},texStorage3D(st,bt,ht){let[ft,Mt,kt,Ot,Ut,Kt]=ht;pu(ft,Mt,kt,Ot,Ut,Kt)}},lv={getExtension(st,bt){const ht=st[bt];st[bt]=function(...ft){const Mt=ft[0].toLowerCase(),kt=us[Mt];if(kt)return kt.ctx;const Ot=ht.call(st,...ft);return Ot&&Af(Ot,Mt,Xv(zp({},xn),{origGLErrorFn:_n})),Ot}}};function gp(st,bt){const ht=st[bt],ft=av[bt]||No,Mt=mp[bt]||No;if(ft===No&&mp===No)return;st[bt]=function(...Ot){ft(st,bt,Ot);const Ut=ht.call(st,...Ot);return Mt(st,bt,Ot,Ut),Ut};const kt=lv[bt];kt&&kt(st,bt,_n)}for(const st in At)typeof At[st]=="function"&&(Rf[st]=At[st],gp(At,st));us[it.toLowerCase()]={ctx:At,origFuncs:Rf}}function Cf(At){const it=At.prototype.getContext;At.prototype.getContext=function(xn,..._n){const lr=it.call(this,xn,..._n);return lr&&lr.bindTexture&&(Af(lr,xn,{}),lr.getExtension("GMAN_webgl_memory")),lr}}typeof HTMLCanvasElement!="undefined"&&Cf(HTMLCanvasElement),typeof OffscreenCanvas!="undefined"&&Cf(OffscreenCanvas)});class OG extends zr{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new MU(t)}),this.register(function(t){return new LU(t)}),this.register(function(t){return new IU(t)}),this.register(function(t){return new TU(t)}),this.register(function(t){return new EU(t)}),this.register(function(t){return new AU(t)}),this.register(function(t){return new CU(t)}),this.register(function(t){return new RU(t)}),this.register(function(t){return new bU(t)}),this.register(function(t){return new PU(t)})}load(e,t,r,o){const l=this;let c;this.resourcePath!==""?c=this.resourcePath:this.path!==""?c=this.path:c=bi.extractUrlBase(e),this.manager.itemStart(e);const h=function(y){o?o(y):console.error(y),l.manager.itemError(e),l.manager.itemEnd(e)},m=new Bi(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(e,function(y){try{l.parse(y,c,function(b){t(b),l.manager.itemEnd(e)},h)}catch(b){h(b)}},r,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,o){let l;const c={},h={};if(typeof e=="string")l=e;else if(bi.decodeText(new Uint8Array(e,0,4))===uA){try{c[on.KHR_BINARY_GLTF]=new kU(e)}catch(M){o&&o(M);return}l=c[on.KHR_BINARY_GLTF].content}else l=bi.decodeText(new Uint8Array(e));const m=JSON.parse(l);if(m.asset===void 0||m.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const y=new $U(m,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});y.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const M=this.pluginCallbacks[b](y);h[M.name]=M,c[M.name]=!0}if(m.extensionsUsed)for(let b=0;b<m.extensionsUsed.length;++b){const M=m.extensionsUsed[b],C=m.extensionsRequired||[];switch(M){case on.KHR_MATERIALS_UNLIT:c[M]=new SU;break;case on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:c[M]=new NU;break;case on.KHR_DRACO_MESH_COMPRESSION:c[M]=new OU(m,this.dracoLoader);break;case on.KHR_TEXTURE_TRANSFORM:c[M]=new DU;break;case on.KHR_MESH_QUANTIZATION:c[M]=new FU;break;default:C.indexOf(M)>=0&&h[M]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+M+'".')}}y.setExtensions(c),y.setPlugins(h),y.parse(r,o)}parseAsync(e,t){const r=this;return new Promise(function(o,l){r.parse(e,t,o,l)})}}function wU(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const on={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class bU{constructor(e){this.parser=e,this.name=on.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,o=t.length;r<o;r++){const l=t[r];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let o=t.cache.get(r);if(o)return o;const l=t.json,m=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let y;const b=new Ze(16777215);m.color!==void 0&&b.fromArray(m.color);const M=m.range!==void 0?m.range:0;switch(m.type){case"directional":y=new Fh(b),y.target.position.set(0,0,-1),y.add(y.target);break;case"point":y=new Ec(b),y.distance=M;break;case"spot":y=new Dh(b),y.distance=M,m.spot=m.spot||{},m.spot.innerConeAngle=m.spot.innerConeAngle!==void 0?m.spot.innerConeAngle:0,m.spot.outerConeAngle=m.spot.outerConeAngle!==void 0?m.spot.outerConeAngle:Math.PI/4,y.angle=m.spot.outerConeAngle,y.penumbra=1-m.spot.innerConeAngle/m.spot.outerConeAngle,y.target.position.set(0,0,-1),y.add(y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+m.type)}return y.position.set(0,0,0),y.decay=2,m.intensity!==void 0&&(y.intensity=m.intensity),y.name=t.createUniqueName(m.name||"light_"+e),o=Promise.resolve(y),t.cache.add(r,o),o}createNodeAttachment(e){const t=this,r=this.parser,l=r.json.nodes[e],h=(l.extensions&&l.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(m){return r._getNodeRef(t.cache,h,m)})}}class SU{constructor(){this.name=on.KHR_MATERIALS_UNLIT}getMaterialType(){return Yr}extendParams(e,t,r){const o=[];e.color=new Ze(1,1,1),e.opacity=1;const l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const c=l.baseColorFactor;e.color.fromArray(c),e.opacity=c[3]}l.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",l.baseColorTexture))}return Promise.all(o)}}class MU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];if(c.clearcoatFactor!==void 0&&(t.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(l.push(r.assignTexture(t,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const h=c.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new je(h,h)}return Promise.all(l)}}class TU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[];t.sheenColor=new Ze(0,0,0),t.sheenRoughness=0,t.sheen=1;const c=o.extensions[this.name];return c.sheenColorFactor!==void 0&&t.sheenColor.fromArray(c.sheenColorFactor),c.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&l.push(r.assignTexture(t,"sheenColorMap",c.sheenColorTexture)),c.sheenRoughnessTexture!==void 0&&l.push(r.assignTexture(t,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(l)}}class EU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];return c.transmissionFactor!==void 0&&(t.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&l.push(r.assignTexture(t,"transmissionMap",c.transmissionTexture)),Promise.all(l)}}class AU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];t.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&l.push(r.assignTexture(t,"thicknessMap",c.thicknessTexture)),t.attenuationDistance=c.attenuationDistance||0;const h=c.attenuationColor||[1,1,1];return t.attenuationColor=new Ze(h[0],h[1],h[2]),Promise.all(l)}}class CU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=o.extensions[this.name];return t.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}}class RU{constructor(e){this.parser=e,this.name=on.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:vo}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],c=o.extensions[this.name];t.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&l.push(r.assignTexture(t,"specularIntensityMap",c.specularTexture));const h=c.specularColorFactor||[1,1,1];return t.specularColor=new Ze(h[0],h[1],h[2]),c.specularColorTexture!==void 0&&l.push(r.assignTexture(t,"specularColorMap",c.specularColorTexture).then(function(m){m.encoding=rn})),Promise.all(l)}}class LU{constructor(e){this.parser=e,this.name=on.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const l=o.extensions[this.name],c=r.images[l.source],h=t.options.ktx2Loader;if(!h){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,c,h)}}class IU{constructor(e){this.parser=e,this.name=on.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,o=r.json,l=o.textures[e];if(!l.extensions||!l.extensions[t])return null;const c=l.extensions[t],h=o.images[c.source];let m=r.textureLoader;if(h.uri){const y=r.options.manager.getHandler(h.uri);y!==null&&(m=y)}return this.detectSupport().then(function(y){if(y)return r.loadTextureImage(e,h,m);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class PU{constructor(e){this.name=on.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],l=this.parser.getDependency("buffer",o.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,c.ready]).then(function(h){const m=o.byteOffset||0,y=o.byteLength||0,b=o.count,M=o.byteStride,C=new ArrayBuffer(b*M),I=new Uint8Array(h[0],m,y);return c.decodeGltfBuffer(new Uint8Array(C),b,M,I,o.mode,o.filter),C})}else return null}}const uA="glTF",Uh=12,cA={JSON:1313821514,BIN:5130562};class kU{constructor(e){this.name=on.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Uh);if(this.header={magic:bi.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==uA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Uh,o=new DataView(e,Uh);let l=0;for(;l<r;){const c=o.getUint32(l,!0);l+=4;const h=o.getUint32(l,!0);if(l+=4,h===cA.JSON){const m=new Uint8Array(e,Uh+l,c);this.content=bi.decodeText(m)}else if(h===cA.BIN){const m=Uh+l;this.body=e.slice(m,m+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class OU{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=on.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,o=this.dracoLoader,l=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,h={},m={},y={};for(const b in c){const M=Yx[b]||b.toLowerCase();h[M]=c[b]}for(const b in e.attributes){const M=Yx[b]||b.toLowerCase();if(c[b]!==void 0){const C=r.accessors[e.attributes[b]],I=zh[C.componentType];y[M]=I,m[M]=C.normalized===!0}}return t.getDependency("bufferView",l).then(function(b){return new Promise(function(M){o.decodeDracoFile(b,function(C){for(const I in C.attributes){const O=C.attributes[I],U=m[I];U!==void 0&&(O.normalized=U)}M(C)},h,y)})})}}class DU{constructor(){this.name=on.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Xx extends El{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),h={specular:{value:new Ze().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=h,this.onBeforeCompile=function(m){for(const y in h)m.uniforms[y]=h[y];m.fragmentShader=m.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",c)},Object.defineProperties(this,{specular:{get:function(){return h.specular.value},set:function(m){h.specular.value=m}},specularMap:{get:function(){return h.specularMap.value},set:function(m){h.specularMap.value=m,m?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return h.glossiness.value},set:function(m){h.glossiness.value=m}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(m){h.glossinessMap.value=m,m?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class NU{constructor(){this.name=on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Xx}extendParams(e,t,r){const o=t.extensions[this.name];e.color=new Ze(1,1,1),e.opacity=1;const l=[];if(Array.isArray(o.diffuseFactor)){const c=o.diffuseFactor;e.color.fromArray(c),e.opacity=c[3]}if(o.diffuseTexture!==void 0&&l.push(r.assignTexture(e,"map",o.diffuseTexture)),e.emissive=new Ze(0,0,0),e.glossiness=o.glossinessFactor!==void 0?o.glossinessFactor:1,e.specular=new Ze(1,1,1),Array.isArray(o.specularFactor)&&e.specular.fromArray(o.specularFactor),o.specularGlossinessTexture!==void 0){const c=o.specularGlossinessTexture;l.push(r.assignTexture(e,"glossinessMap",c)),l.push(r.assignTexture(e,"specularMap",c))}return Promise.all(l)}createMaterial(e){const t=new Xx(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=ao,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class FU{constructor(){this.name=on.KHR_MESH_QUANTIZATION}}class Bl extends Us{constructor(e,t,r,o){super(e,t,r,o)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o*3+o;for(let c=0;c!==o;c++)t[c]=r[l+c];return t}}Bl.prototype.beforeStart_=Bl.prototype.copySampleValue_;Bl.prototype.afterEnd_=Bl.prototype.copySampleValue_;Bl.prototype.interpolate_=function(s,e,t,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=c*2,m=c*3,y=r-e,b=(t-e)/y,M=b*b,C=M*b,I=s*m,O=I-m,U=-2*C+3*M,H=C-M,P=1-U,A=H-M+b;for(let F=0;F!==c;F++){const L=l[O+F+c],B=l[O+F+h]*y,z=l[I+F+c],q=l[I+F]*y;o[F]=P*L+A*B+U*z+H*q}return o};const BU=new Vt;class UU extends Bl{interpolate_(e,t,r,o){const l=super.interpolate_(e,t,r,o);return BU.fromArray(l).normalize().toArray(l),l}}const _o={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fA={9728:jn,9729:Rn,9984:oh,9985:Vp,9986:ah,9987:so},hA={33071:fr,33648:Nu,10497:Ls},dA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Yx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ha={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zU={CUBICSPLINE:void 0,LINEAR:ll,STEP:Bu},Kx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function HU(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new El({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:jo})),s.DefaultMaterial}function Hh(s,e,t){for(const r in t.extensions)s[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ul(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function GU(s,e,t){let r=!1,o=!1;for(let h=0,m=e.length;h<m;h++){const y=e[h];if(y.POSITION!==void 0&&(r=!0),y.NORMAL!==void 0&&(o=!0),r&&o)break}if(!r&&!o)return Promise.resolve(s);const l=[],c=[];for(let h=0,m=e.length;h<m;h++){const y=e[h];if(r){const b=y.POSITION!==void 0?t.getDependency("accessor",y.POSITION):s.attributes.position;l.push(b)}if(o){const b=y.NORMAL!==void 0?t.getDependency("accessor",y.NORMAL):s.attributes.normal;c.push(b)}}return Promise.all([Promise.all(l),Promise.all(c)]).then(function(h){const m=h[0],y=h[1];return r&&(s.morphAttributes.position=m),o&&(s.morphAttributes.normal=y),s.morphTargetsRelative=!0,s})}function VU(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let r=0,o=t.length;r<o;r++)s.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function WU(s){const e=s.extensions&&s.extensions[on.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+pA(e.attributes):t=s.indices+":"+pA(s.attributes)+":"+s.mode,t}function pA(s){let e="";const t=Object.keys(s).sort();for(let r=0,o=t.length;r<o;r++)e+=t[r]+":"+s[t[r]]+";";return e}function Zx(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class $U{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new wU,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new zx(this.options.manager):this.textureLoader=new Jm(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Bi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,o=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(c){const h={scene:c[0][o.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:o.asset,parser:r,userData:{}};Hh(l,h,o),Ul(h,o),Promise.all(r._invokeAll(function(m){return m.afterRoot&&m.afterRoot(h)})).then(function(){e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let o=0,l=t.length;o<l;o++){const c=t[o].joints;for(let h=0,m=c.length;h<m;h++)e[c[h]].isBone=!0}for(let o=0,l=e.length;o<l;o++){const c=e[o];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(r[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const o=r.clone(),l=(c,h)=>{const m=this.associations.get(c);m!=null&&this.associations.set(h,m);for(const[y,b]of c.children.entries())l(b,h.children[y])};return l(r,o),o.name+="_instance_"+e.uses[t]++,o}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const o=e(t[r]);if(o)return o}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let o=0;o<t.length;o++){const l=e(t[o]);l&&r.push(l)}return r}getDependency(e,t){const r=e+":"+t;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this.loadNode(t);break;case"mesh":o=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this.loadAnimation(t);break;case"camera":o=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,o)}return o}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(l,c){return r.getDependency(e,c)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[on.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(l,c){r.load(bi.resolveURL(t.uri,o.path),l,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const o=t.byteLength||0,l=t.byteOffset||0;return r.slice(l,l+o)})}loadAccessor(e){const t=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0)return Promise.resolve(null);const l=[];return o.bufferView!==void 0?l.push(this.getDependency("bufferView",o.bufferView)):l.push(null),o.sparse!==void 0&&(l.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(l).then(function(c){const h=c[0],m=dA[o.type],y=zh[o.componentType],b=y.BYTES_PER_ELEMENT,M=b*m,C=o.byteOffset||0,I=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,O=o.normalized===!0;let U,H;if(I&&I!==M){const P=Math.floor(C/I),A="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+P+":"+o.count;let F=t.cache.get(A);F||(U=new y(h,P*I,o.count*I/b),F=new oa(U,I/b),t.cache.add(A,F)),H=new go(F,m,C%I/b,O)}else h===null?U=new y(o.count*m):U=new y(h,C,o.count*m),H=new Dt(U,m,O);if(o.sparse!==void 0){const P=dA.SCALAR,A=zh[o.sparse.indices.componentType],F=o.sparse.indices.byteOffset||0,L=o.sparse.values.byteOffset||0,B=new A(c[1],F,o.sparse.count*P),z=new y(c[2],L,o.sparse.count*m);h!==null&&(H=new Dt(H.array.slice(),H.itemSize,H.normalized));for(let q=0,Z=B.length;q<Z;q++){const ae=B[q];if(H.setX(ae,z[q*m]),m>=2&&H.setY(ae,z[q*m+1]),m>=3&&H.setZ(ae,z[q*m+2]),m>=4&&H.setW(ae,z[q*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return H})}loadTexture(e){const t=this.json,r=this.options,o=t.textures[e],l=t.images[o.source];let c=this.textureLoader;if(l.uri){const h=r.manager.getHandler(l.uri);h!==null&&(c=h)}return this.loadTextureImage(e,l,c)}loadTextureImage(e,t,r){const o=this,l=this.json,c=this.options,h=l.textures[e],m=(t.uri||t.bufferView)+":"+h.sampler;if(this.textureCache[m])return this.textureCache[m];const y=self.URL||self.webkitURL;let b=t.uri||"",M=!1;if(t.bufferView!==void 0)b=o.getDependency("bufferView",t.bufferView).then(function(I){M=!0;const O=new Blob([I],{type:t.mimeType});return b=y.createObjectURL(O),b});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const C=Promise.resolve(b).then(function(I){return new Promise(function(O,U){let H=O;r.isImageBitmapLoader===!0&&(H=function(P){const A=new Dn(P);A.needsUpdate=!0,O(A)}),r.load(bi.resolveURL(I,c.path),H,void 0,U)})}).then(function(I){M===!0&&y.revokeObjectURL(b),I.flipY=!1,h.name&&(I.name=h.name);const U=(l.samplers||{})[h.sampler]||{};return I.magFilter=fA[U.magFilter]||Rn,I.minFilter=fA[U.minFilter]||so,I.wrapS=hA[U.wrapS]||Ls,I.wrapT=hA[U.wrapT]||Ls,o.associations.set(I,{textures:e}),I}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",b),null});return this.textureCache[m]=C,C}assignTexture(e,t,r){const o=this;return this.getDependency("texture",r.index).then(function(l){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),o.extensions[on.KHR_TEXTURE_TRANSFORM]){const c=r.extensions!==void 0?r.extensions[on.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const h=o.associations.get(l);l=o.extensions[on.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),o.associations.set(l,h)}}return e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const o=t.attributes.tangent===void 0,l=t.attributes.color!==void 0,c=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new la,nr.prototype.copy.call(m,r),m.color.copy(r.color),m.map=r.map,m.sizeAttenuation=!1,this.cache.add(h,m)),r=m}else if(e.isLine){const h="LineBasicMaterial:"+r.uuid;let m=this.cache.get(h);m||(m=new Fn,nr.prototype.copy.call(m,r),m.color.copy(r.color),this.cache.add(h,m)),r=m}if(o||l||c){let h="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),o&&(h+="derivative-tangents:"),l&&(h+="vertex-colors:"),c&&(h+="flat-shading:");let m=this.cache.get(h);m||(m=r.clone(),l&&(m.vertexColors=!0),c&&(m.flatShading=!0),o&&(m.normalScale&&(m.normalScale.y*=-1),m.clearcoatNormalScale&&(m.clearcoatNormalScale.y*=-1)),this.cache.add(h,m),this.associations.set(m,this.associations.get(r))),r=m}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return El}loadMaterial(e){const t=this,r=this.json,o=this.extensions,l=r.materials[e];let c;const h={},m=l.extensions||{},y=[];if(m[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const M=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];c=M.getMaterialType(),y.push(M.extendParams(h,l,t))}else if(m[on.KHR_MATERIALS_UNLIT]){const M=o[on.KHR_MATERIALS_UNLIT];c=M.getMaterialType(),y.push(M.extendParams(h,l,t))}else{const M=l.pbrMetallicRoughness||{};if(h.color=new Ze(1,1,1),h.opacity=1,Array.isArray(M.baseColorFactor)){const C=M.baseColorFactor;h.color.fromArray(C),h.opacity=C[3]}M.baseColorTexture!==void 0&&y.push(t.assignTexture(h,"map",M.baseColorTexture)),h.metalness=M.metallicFactor!==void 0?M.metallicFactor:1,h.roughness=M.roughnessFactor!==void 0?M.roughnessFactor:1,M.metallicRoughnessTexture!==void 0&&(y.push(t.assignTexture(h,"metalnessMap",M.metallicRoughnessTexture)),y.push(t.assignTexture(h,"roughnessMap",M.metallicRoughnessTexture))),c=this._invokeOne(function(C){return C.getMaterialType&&C.getMaterialType(e)}),y.push(Promise.all(this._invokeAll(function(C){return C.extendMaterialParams&&C.extendMaterialParams(e,h)})))}l.doubleSided===!0&&(h.side=Rs);const b=l.alphaMode||Kx.OPAQUE;if(b===Kx.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,b===Kx.MASK&&(h.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&c!==Yr&&(y.push(t.assignTexture(h,"normalMap",l.normalTexture)),h.normalScale=new je(1,1),l.normalTexture.scale!==void 0)){const M=l.normalTexture.scale;h.normalScale.set(M,M)}return l.occlusionTexture!==void 0&&c!==Yr&&(y.push(t.assignTexture(h,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&c!==Yr&&(h.emissive=new Ze().fromArray(l.emissiveFactor)),l.emissiveTexture!==void 0&&c!==Yr&&y.push(t.assignTexture(h,"emissiveMap",l.emissiveTexture)),Promise.all(y).then(function(){let M;return c===Xx?M=o[on.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):M=new c(h),l.name&&(M.name=l.name),M.map&&(M.map.encoding=rn),M.emissiveMap&&(M.emissiveMap.encoding=rn),Ul(M,l),t.associations.set(M,{materials:e}),l.extensions&&Hh(o,M,l),M})}createUniqueName(e){const t=Jt.sanitizeNodeName(e||"");let r=t;for(let o=1;this.nodeNamesUsed[r];++o)r=t+"_"+o;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,o=this.primitiveCache;function l(h){return r[on.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(m){return gA(m,h,t)})}const c=[];for(let h=0,m=e.length;h<m;h++){const y=e[h],b=WU(y),M=o[b];if(M)c.push(M.promise);else{let C;y.extensions&&y.extensions[on.KHR_DRACO_MESH_COMPRESSION]?C=l(y):C=gA(new St,y,t),o[b]={primitive:y,promise:C},c.push(C)}}return Promise.all(c)}loadMesh(e){const t=this,r=this.json,o=this.extensions,l=r.meshes[e],c=l.primitives,h=[];for(let m=0,y=c.length;m<y;m++){const b=c[m].material===void 0?HU(this.cache):this.getDependency("material",c[m].material);h.push(b)}return h.push(t.loadGeometries(c)),Promise.all(h).then(function(m){const y=m.slice(0,m.length-1),b=m[m.length-1],M=[];for(let I=0,O=b.length;I<O;I++){const U=b[I],H=c[I];let P;const A=y[I];if(H.mode===_o.TRIANGLES||H.mode===_o.TRIANGLE_STRIP||H.mode===_o.TRIANGLE_FAN||H.mode===void 0)P=l.isSkinnedMesh===!0?new xl(U,A):new Nn(U,A),P.isSkinnedMesh===!0&&!P.geometry.attributes.skinWeight.normalized&&P.normalizeSkinWeights(),H.mode===_o.TRIANGLE_STRIP?P.geometry=vA(P.geometry,AM):H.mode===_o.TRIANGLE_FAN&&(P.geometry=vA(P.geometry,Ay));else if(H.mode===_o.LINES)P=new Cr(U,A);else if(H.mode===_o.LINE_STRIP)P=new Xi(U,A);else if(H.mode===_o.LINE_LOOP)P=new Bm(U,A);else if(H.mode===_o.POINTS)P=new hc(U,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+H.mode);Object.keys(P.geometry.morphAttributes).length>0&&VU(P,l),P.name=t.createUniqueName(l.name||"mesh_"+e),Ul(P,l),H.extensions&&Hh(o,P,H),t.assignFinalMaterial(P),M.push(P)}for(let I=0,O=M.length;I<O;I++)t.associations.set(M[I],{meshes:e,primitives:I});if(M.length===1)return M[0];const C=new Ur;t.associations.set(C,{meshes:e});for(let I=0,O=M.length;I<O;I++)C.add(M[I]);return C})}loadCamera(e){let t;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new hr(yi.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(t=new vl(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ul(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(o){return r.inverseBindMatrices=o,r})}loadAnimation(e){const r=this.json.animations[e],o=[],l=[],c=[],h=[],m=[];for(let y=0,b=r.channels.length;y<b;y++){const M=r.channels[y],C=r.samplers[M.sampler],I=M.target,O=I.node!==void 0?I.node:I.id,U=r.parameters!==void 0?r.parameters[C.input]:C.input,H=r.parameters!==void 0?r.parameters[C.output]:C.output;o.push(this.getDependency("node",O)),l.push(this.getDependency("accessor",U)),c.push(this.getDependency("accessor",H)),h.push(C),m.push(I)}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(m)]).then(function(y){const b=y[0],M=y[1],C=y[2],I=y[3],O=y[4],U=[];for(let P=0,A=b.length;P<A;P++){const F=b[P],L=M[P],B=C[P],z=I[P],q=O[P];if(F===void 0)continue;F.updateMatrix(),F.matrixAutoUpdate=!0;let Z;switch(ha[q.path]){case ha.weights:Z=Cl;break;case ha.rotation:Z=yo;break;case ha.position:case ha.scale:default:Z=Ll;break}const ae=F.name?F.name:F.uuid,ce=z.interpolation!==void 0?zU[z.interpolation]:ll,ee=[];ha[q.path]===ha.weights?F.traverse(function(le){le.morphTargetInfluences&&ee.push(le.name?le.name:le.uuid)}):ee.push(ae);let ue=B.array;if(B.normalized){const le=Zx(ue.constructor),w=new Float32Array(ue.length);for(let p=0,J=ue.length;p<J;p++)w[p]=ue[p]*le;ue=w}for(let le=0,w=ee.length;le<w;le++){const p=new Z(ee[le]+"."+ha[q.path],L.array,ue,ce);z.interpolation==="CUBICSPLINE"&&(p.createInterpolant=function(E){const ge=this instanceof yo?UU:Bl;return new ge(this.times,this.values,this.getValueSize()/3,E)},p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),U.push(p)}}const H=r.name?r.name:"animation_"+e;return new Il(H,void 0,U)})}createNodeMesh(e){const t=this.json,r=this,o=t.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(l){const c=r._getNodeRef(r.meshCache,o.mesh,l);return o.weights!==void 0&&c.traverse(function(h){if(!!h.isMesh)for(let m=0,y=o.weights.length;m<y;m++)h.morphTargetInfluences[m]=o.weights[m]}),c})}loadNode(e){const t=this.json,r=this.extensions,o=this,l=t.nodes[e],c=l.name?o.createUniqueName(l.name):"";return function(){const h=[],m=o._invokeOne(function(y){return y.createNodeMesh&&y.createNodeMesh(e)});return m&&h.push(m),l.camera!==void 0&&h.push(o.getDependency("camera",l.camera).then(function(y){return o._getNodeRef(o.cameraCache,l.camera,y)})),o._invokeAll(function(y){return y.createNodeAttachment&&y.createNodeAttachment(e)}).forEach(function(y){h.push(y)}),Promise.all(h)}().then(function(h){let m;if(l.isBone===!0?m=new _l:h.length>1?m=new Ur:h.length===1?m=h[0]:m=new Wt,m!==h[0])for(let y=0,b=h.length;y<b;y++)m.add(h[y]);if(l.name&&(m.userData.name=l.name,m.name=c),Ul(m,l),l.extensions&&Hh(r,m,l),l.matrix!==void 0){const y=new Je;y.fromArray(l.matrix),m.applyMatrix4(y)}else l.translation!==void 0&&m.position.fromArray(l.translation),l.rotation!==void 0&&m.quaternion.fromArray(l.rotation),l.scale!==void 0&&m.scale.fromArray(l.scale);return o.associations.has(m)||o.associations.set(m,{}),o.associations.get(m).nodes=e,m})}loadScene(e){const t=this.json,r=this.extensions,o=this.json.scenes[e],l=this,c=new Ur;o.name&&(c.name=l.createUniqueName(o.name)),Ul(c,o),o.extensions&&Hh(r,c,o);const h=o.nodes||[],m=[];for(let y=0,b=h.length;y<b;y++)m.push(mA(h[y],c,t,l));return Promise.all(m).then(function(){const y=b=>{const M=new Map;for(const[C,I]of l.associations)(C instanceof nr||C instanceof Dn)&&M.set(C,I);return b.traverse(C=>{const I=l.associations.get(C);I!=null&&M.set(C,I)}),M};return l.associations=y(c),c})}}function mA(s,e,t,r){const o=t.nodes[s];return r.getDependency("node",s).then(function(l){if(o.skin===void 0)return l;let c;return r.getDependency("skin",o.skin).then(function(h){c=h;const m=[];for(let y=0,b=c.joints.length;y<b;y++)m.push(r.getDependency("node",c.joints[y]));return Promise.all(m)}).then(function(h){return l.traverse(function(m){if(!m.isMesh)return;const y=[],b=[];for(let M=0,C=h.length;M<C;M++){const I=h[M];if(I){y.push(I);const O=new Je;c.inverseBindMatrices!==void 0&&O.fromArray(c.inverseBindMatrices.array,M*16),b.push(O)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',c.joints[M])}m.bind(new aa(y,b),m.matrixWorld)}),l})}).then(function(l){e.add(l);const c=[];if(o.children){const h=o.children;for(let m=0,y=h.length;m<y;m++){const b=h[m];c.push(mA(b,l,t,r))}}return Promise.all(c)})}function jU(s,e,t){const r=e.attributes,o=new xi;if(r.POSITION!==void 0){const h=t.json.accessors[r.POSITION],m=h.min,y=h.max;if(m!==void 0&&y!==void 0){if(o.set(new he(m[0],m[1],m[2]),new he(y[0],y[1],y[2])),h.normalized){const b=Zx(zh[h.componentType]);o.min.multiplyScalar(b),o.max.multiplyScalar(b)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const h=new he,m=new he;for(let y=0,b=l.length;y<b;y++){const M=l[y];if(M.POSITION!==void 0){const C=t.json.accessors[M.POSITION],I=C.min,O=C.max;if(I!==void 0&&O!==void 0){if(m.setX(Math.max(Math.abs(I[0]),Math.abs(O[0]))),m.setY(Math.max(Math.abs(I[1]),Math.abs(O[1]))),m.setZ(Math.max(Math.abs(I[2]),Math.abs(O[2]))),C.normalized){const U=Zx(zh[C.componentType]);m.multiplyScalar(U)}h.max(m)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(h)}s.boundingBox=o;const c=new uo;o.getCenter(c.center),c.radius=o.min.distanceTo(o.max)/2,s.boundingSphere=c}function gA(s,e,t){const r=e.attributes,o=[];function l(c,h){return t.getDependency("accessor",c).then(function(m){s.setAttribute(h,m)})}for(const c in r){const h=Yx[c]||c.toLowerCase();h in s.attributes||o.push(l(r[c],h))}if(e.indices!==void 0&&!s.index){const c=t.getDependency("accessor",e.indices).then(function(h){s.setIndex(h)});o.push(c)}return Ul(s,e),jU(s,e,t),Promise.all(o).then(function(){return e.targets!==void 0?GU(s,e.targets,t):s})}function vA(s,e){let t=s.getIndex();if(t===null){const c=[],h=s.getAttribute("position");if(h!==void 0){for(let m=0;m<h.count;m++)c.push(m);s.setIndex(c),t=s.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const r=t.count-2,o=[];if(e===Ay)for(let c=1;c<=r;c++)o.push(t.getX(0)),o.push(t.getX(c)),o.push(t.getX(c+1));else for(let c=0;c<r;c++)c%2==0?(o.push(t.getX(c)),o.push(t.getX(c+1)),o.push(t.getX(c+2))):(o.push(t.getX(c+2)),o.push(t.getX(c+1)),o.push(t.getX(c)));o.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=s.clone();return l.setIndex(o),l}/*!
 * @pixiv/three-vrm v1.0.0-beta.9
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2021 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.0-beta.9
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class yA extends Wt{constructor(e){super();this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight===0?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(o=>o.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fn(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}function xA(s,e,t){var r,o;const l=s.parser.json,c=(r=l.nodes)===null||r===void 0?void 0:r[e];if(c==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const h=c.mesh;if(h==null)return null;const m=(o=l.meshes)===null||o===void 0?void 0:o[h];if(m==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${h}] of glTF but the mesh doesn't exist`),null;const y=m.primitives.length,b=[];return t.traverse(M=>{b.length<y&&M.isMesh&&b.push(M)}),b}function _A(s,e){return fn(this,void 0,void 0,function*(){const t=yield s.parser.getDependency("node",e);return xA(s,e,t)})}function wA(s){return fn(this,void 0,void 0,function*(){const e=yield s.parser.getDependencies("node"),t=new Map;return e.forEach((r,o)=>{const l=xA(s,o,r);l!=null&&t.set(o,l)}),t})}function bA(s,e){var t,r;const o=parseInt(vi,10);let l=null;if(o>=133)l=(r=(t=s.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const h=s.associations.get(e);(h==null?void 0:h.type)==="materials"&&(l=h.index)}return l}const Qx={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function SA(s){return Math.max(Math.min(s,1),0)}class ug{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(Qx));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)&&(e[r]=o)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(Qx));return Object.entries(this._expressionMap).forEach(([r,o])=>{t.has(r)||(e[r]=o)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new ug().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=SA(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const o=t.expressionName;this.blinkExpressionNames.indexOf(o)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(o)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(o)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(o=>{e-=o.overrideBlinkAmount,t-=o.overrideLookAtAmount,r-=o.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const qU=new Ze;class cg{constructor({material:e,type:t,targetValue:r}){var o,l,c;this.material=e,this.type=t,this.targetValue=r;const h=(o=Object.entries(cg._propertyNameMapMap).find(([y])=>e[y]===!0))===null||o===void 0?void 0:o[1],m=(l=h==null?void 0:h[t])!==null&&l!==void 0?l:null;if(m==null)console.warn(`Tried to add a material color bind to the material ${(c=e.name)!==null&&c!==void 0?c:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const b=e[m].clone(),M=this.targetValue.clone().sub(b);this._state={propertyName:m,initialValue:b,deltaValue:M}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,o=this.material[t];o!==void 0&&(o.add(qU.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}cg._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineFactor",rimColor:"rimFactor",shadeColor:"shadeFactor"}};class MA{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const TA=new je;class fg{constructor({material:e,scale:t,offset:r}){var o,l;this.material=e,this.scale=t,this.offset=r;const c=(o=Object.entries(fg._propertyNamesMap).find(([h])=>e[h]===!0))===null||o===void 0?void 0:o[1];c==null?(console.warn(`Tried to add a texture transform bind to the material ${(l=e.name)!==null&&l!==void 0?l:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],c.forEach(h=>{var m;const y=(m=e[h])===null||m===void 0?void 0:m.clone();if(!y)return null;e[h]=y;const b=y.offset.clone(),M=y.repeat.clone(),C=r.clone().sub(b),I=t.clone().sub(M);this._properties.push({name:h,initialOffset:b,deltaOffset:C,initialScale:M,deltaScale:I})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(TA.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(TA.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}fg._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};class hg{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return fn(this,void 0,void 0,function*(){const o=this.parser.json;if(!(((t=o.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const c=(r=o.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!c||c.specVersion!=="1.0-beta")return null;const m=c.expressions;if(!m)return null;const y=new Set(Object.values(Qx)),b=new Map;m.preset!=null&&Object.entries(m.preset).forEach(([C,I])=>{if(I!=null){if(!y.has(C)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${C}" detected. Ignoring the expression`);return}b.set(C,I)}}),m.custom!=null&&Object.entries(m.custom).forEach(([C,I])=>{if(y.has(C)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${C}". Ignoring the expression`);return}b.set(C,I)});const M=new ug;return yield Promise.all(Array.from(b.entries()).map(([C,I])=>fn(this,void 0,void 0,function*(){var O,U,H,P,A,F,L;const B=new yA(C);if(e.scene.add(B),B.isBinary=(O=I.isBinary)!==null&&O!==void 0?O:!1,B.overrideBlink=(U=I.overrideBlink)!==null&&U!==void 0?U:"none",B.overrideLookAt=(H=I.overrideLookAt)!==null&&H!==void 0?H:"none",B.overrideMouth=(P=I.overrideMouth)!==null&&P!==void 0?P:"none",(A=I.morphTargetBinds)===null||A===void 0||A.forEach(z=>fn(this,void 0,void 0,function*(){var q;if(z.node===void 0||z.index===void 0)return;const Z=yield _A(e,z.node),ae=z.index;if(!Z.every(ce=>Array.isArray(ce.morphTargetInfluences)&&ae<ce.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${I.name} attempts to index morph #${ae} but not found.`);return}B.addBind(new MA({primitives:Z,index:ae,weight:(q=z.weight)!==null&&q!==void 0?q:1}))})),I.materialColorBinds||I.textureTransformBinds){const z=[];e.scene.traverse(q=>{const Z=q.material;Z&&z.push(Z)}),(F=I.materialColorBinds)===null||F===void 0||F.forEach(q=>fn(this,void 0,void 0,function*(){z.filter(ae=>{const ce=bA(this.parser,ae);return q.material===ce}).forEach(ae=>{B.addBind(new cg({material:ae,type:q.type,targetValue:new Ze().fromArray(q.targetValue)}))})})),(L=I.textureTransformBinds)===null||L===void 0||L.forEach(q=>fn(this,void 0,void 0,function*(){z.filter(ae=>{const ce=bA(this.parser,ae);return q.material===ce}).forEach(ae=>{var ce,ee;B.addBind(new fg({material:ae,offset:new je().fromArray((ce=q.offset)!==null&&ce!==void 0?ce:[0,0]),scale:new je().fromArray((ee=q.scale)!==null&&ee!==void 0?ee:[1,1])}))})}))}M.registerExpression(B)}))),M})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const r=this.parser.json,o=(t=r.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.blendShapeMaster;if(!l)return null;const c=new ug,h=l.blendShapeGroups;if(!h)return c;const m=new Set;return yield Promise.all(h.map(y=>fn(this,void 0,void 0,function*(){var b;const M=y.presetName,C=M!=null&&hg.v0v1PresetNameMap[M]||null,I=C!=null?C:y.name;if(I==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(m.has(I)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${M} has duplicated entries. Ignoring the expression`);return}m.add(I);const O=new yA(I);e.scene.add(O),O.isBinary=(b=y.isBinary)!==null&&b!==void 0?b:!1,y.binds&&y.binds.forEach(H=>fn(this,void 0,void 0,function*(){var P;if(H.mesh===void 0||H.index===void 0)return;const A=[];(P=r.nodes)===null||P===void 0||P.forEach((L,B)=>{L.mesh===H.mesh&&A.push(B)});const F=H.index;yield Promise.all(A.map(L=>fn(this,void 0,void 0,function*(){var B;const z=yield _A(e,L);if(!z.every(q=>Array.isArray(q.morphTargetInfluences)&&F<q.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${y.name} attempts to index ${F}th morph but not found.`);return}O.addBind(new MA({primitives:z,index:F,weight:.01*((B=H.weight)!==null&&B!==void 0?B:100)}))})))}));const U=y.materialValues;U&&U.length!==0&&console.warn("Material binds of VRM 0.0 are not supported. Setup the model in VRM 1.0 and try again"),c.registerExpression(O)}))),c})}}hg.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class zs{constructor(e,t){this._firstPersonOnlyLayer=zs.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=zs.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new zs(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=zs.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=zs.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(o=>{r.type==="firstPersonOnly"?(o.layers.set(this._firstPersonOnlyLayer),o.traverse(l=>l.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(o.layers.set(this._thirdPersonOnlyLayer),o.traverse(l=>l.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(o)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,o){let l=0;if(t!=null&&t.length>0)for(let c=0;c<e.length;c+=3){const h=e[c],m=e[c+1],y=e[c+2],b=t[h],M=r[h];if(b[0]>0&&o.includes(M[0])||b[1]>0&&o.includes(M[1])||b[2]>0&&o.includes(M[2])||b[3]>0&&o.includes(M[3]))continue;const C=t[m],I=r[m];if(C[0]>0&&o.includes(I[0])||C[1]>0&&o.includes(I[1])||C[2]>0&&o.includes(I[2])||C[3]>0&&o.includes(I[3]))continue;const O=t[y],U=r[y];O[0]>0&&o.includes(U[0])||O[1]>0&&o.includes(U[1])||O[2]>0&&o.includes(U[2])||O[3]>0&&o.includes(U[3])||(e[l++]=h,e[l++]=m,e[l++]=y)}return l}_createErasedMesh(e,t){const r=new xl(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const o=r.geometry,l=o.getAttribute("skinIndex").array,c=[];for(let I=0;I<l.length;I+=4)c.push([l[I],l[I+1],l[I+2],l[I+3]]);const h=o.getAttribute("skinWeight").array,m=[];for(let I=0;I<h.length;I+=4)m.push([h[I],h[I+1],h[I+2],h[I+3]]);const y=o.getIndex();if(!y)throw new Error("The geometry doesn't have an index buffer");const b=Array.from(y.array),M=this._excludeTriangles(b,m,c,t),C=[];for(let I=0;I<M;I++)C[I]=b[I];return o.setIndex(C),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new aa(e.skeleton.bones,e.skeleton.boneInverses),new Je),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((l,c)=>{this._isEraseTarget(l)&&r.push(c)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const o=this._createErasedMesh(t,r);e.add(o)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Ur;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const o=r;this._createHeadlessModelForSkinnedMesh(t,o)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}zs.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;zs.DEFAULT_THIRDPERSON_ONLY_LAYER=10;class XU{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return fn(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);if(r)return r;const o=yield this._v0Import(e,t);return o||null})}_v1Import(e,t){var r,o;return fn(this,void 0,void 0,function*(){const l=this.parser.json;if(!(((r=l.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const h=(o=l.extensions)===null||o===void 0?void 0:o.VRMC_vrm;if(!h||h.specVersion!=="1.0-beta")return null;const y=h.firstPerson;if(!y)return null;const b=[],M=yield wA(e);return Array.from(M.entries()).forEach(([C,I])=>{var O;const U=y.meshAnnotations?y.meshAnnotations.find(H=>H.node===C):void 0;b.push({meshes:I,type:(O=U==null?void 0:U.type)!==null&&O!==void 0?O:"both"})}),new zs(t,b)})}_v0Import(e,t){var r;return fn(this,void 0,void 0,function*(){const o=this.parser.json,l=(r=o.extensions)===null||r===void 0?void 0:r.VRM;if(!l)return null;const c=l.firstPerson;if(!c)return null;const h=[],m=yield wA(e);return Array.from(m.entries()).forEach(([y,b])=>{const M=o.nodes[y],C=c.meshAnnotations?c.meshAnnotations.find(I=>I.mesh===M.mesh):void 0;h.push({meshes:b,type:this._convertV0FlagToV1Type(C==null?void 0:C.firstPersonFlag)})}),new zs(t,h)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}function EA(s){return s.invert?s.invert():s.inverse(),s}const zl=new he,Hl=new Vt;class dg{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}copy(e){return this.humanBones=e.humanBones,this.restPose=e.restPose,this}clone(){return new dg(this.humanBones).copy(this)}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);!o||(zl.copy(o.position),Hl.copy(o.quaternion),e[r]={position:zl.toArray(),rotation:Hl.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,o=this.getBoneNode(r);if(!o)return;zl.set(0,0,0),Hl.identity();const l=this.restPose[r];(l==null?void 0:l.position)&&zl.fromArray(l.position).negate(),(l==null?void 0:l.rotation)&&EA(Hl.fromArray(l.rotation)),zl.add(o.position),Hl.premultiply(o.quaternion),e[r]={position:zl.toArray(),rotation:Hl.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const o=t,l=this.getBoneNode(o);if(!l)return;const c=this.restPose[o];!c||((r==null?void 0:r.position)&&(l.position.fromArray(r.position),c.position&&l.position.add(zl.fromArray(c.position))),(r==null?void 0:r.rotation)&&(l.quaternion.fromArray(r.rotation),c.rotation&&l.quaternion.multiply(Hl.fromArray(c.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);!r||((t==null?void 0:t.position)&&r.position.fromArray(t.position),(t==null?void 0:t.rotation)&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const YU={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"};class KU{constructor(e){this.parser=e}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return fn(this,void 0,void 0,function*(){const o=this.parser.json;if(!(((t=o.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const c=(r=o.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!c||c.specVersion!=="1.0-beta")return null;const m=c.humanoid;if(!m)return null;const y={};return m.humanBones!=null&&(yield Promise.all(Object.entries(m.humanBones).map(([b,M])=>fn(this,void 0,void 0,function*(){const C=b,I=M.node,O=yield this.parser.getDependency("node",I);if(O==null){console.warn(`A glTF node bound to the humanoid bone ${C} (index = ${I}) does not exist`);return}y[C]={node:O}})))),new dg(this._ensureRequiredBonesExist(y))})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const o=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.humanoid;if(!l)return null;const c={};return l.humanBones!=null&&(yield Promise.all(l.humanBones.map(h=>fn(this,void 0,void 0,function*(){const m=h.bone,y=h.node;if(m==null||y==null)return;const b=yield this.parser.getDependency("node",y);if(b==null){console.warn(`A glTF node bound to the humanoid bone ${m} (index = ${y}) does not exist`);return}if(c[m]!=null){console.warn(`Multiple bone entries for ${m} detected (index = ${y}), ignoring duplicated entries.`);return}c[m]={node:b}})))),new dg(this._ensureRequiredBonesExist(c))})}_ensureRequiredBonesExist(e){const t=Object.values(YU).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class AA extends St{constructor(){super();this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new Dt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class ZU extends St{constructor(){super();this.radius=0,this._currentRadius=0,this.tail=new he,this._currentTail=new he,this._attrPos=new Dt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const Jx=new Vt,QU=new Vt,Gh=new he,CA=new he,RA=Math.sqrt(2)/2,JU=new Vt(0,0,-RA,RA),e4=new he(0,1,0);class t4 extends Ur{constructor(e){super();this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new AA;t.radius=.5;const r=new Yr({color:65280,transparent:!0,opacity:.5,side:Rs,depthTest:!1,depthWrite:!1});this._meshPitch=new Nn(t,r),this.add(this._meshPitch)}{const t=new AA;t.radius=.5;const r=new Yr({color:16711680,transparent:!0,opacity:.5,side:Rs,depthTest:!1,depthWrite:!1});this._meshYaw=new Nn(t,r),this.add(this._meshYaw)}{const t=new ZU;t.radius=.1;const r=new Fn({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new Cr(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){this.vrmLookAt.getLookAtWorldPosition(Gh),this.vrmLookAt.getLookAtWorldQuaternion(Jx);const t=this.vrmLookAt.euler.y,r=this.vrmLookAt.euler.x;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update(),this._meshYaw.position.copy(Gh),this._meshYaw.quaternion.copy(Jx),this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this._meshPitch.position.copy(Gh),this._meshPitch.quaternion.copy(Jx),this._meshPitch.quaternion.multiply(QU.setFromAxisAngle(e4,t)),this._meshPitch.quaternion.multiply(JU);const o=this.vrmLookAt.target;o!=null&&(o.getWorldPosition(CA).sub(Gh),this._lineTarget.geometry.tail.copy(CA),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Gh)),super.updateMatrixWorld(e)}}const n4=new he,r4=new he;function i4(s,e){return s.matrixWorld.decompose(n4,e,r4),e}const s4=new he,o4=new he,wo=new he,e1=new Vt,a4=new Vt;class Vh{constructor(e,t){this.offsetFromHeadBone=new he,this.autoUpdate=!0,this.faceFront=new he(0,0,1),this._euler=new _i(0,0,0,Vh.EULER_ORDER),this.humanoid=e,this.applier=t}get euler(){return this._euler.clone()}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new Vh(this.humanoid,this.applier).copy(this)}reset(){this._euler.set(0,0,0),this.applier.lookAt(this._euler)}getLookAtWorldPosition(e){const t=this.humanoid.getBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getBoneNode("head");return i4(t,e)}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(e1),e.copy(this.faceFront).applyEuler(this._euler).applyQuaternion(e1)}lookAt(e){this._calcEuler(this._euler,e),this.applier.lookAt(this._euler)}update(e){this.target&&this.autoUpdate&&(this.lookAt(this.target.getWorldPosition(s4)),this.applier.lookAt(this._euler))}_calcEuler(e,t){const r=EA(this.getLookAtWorldQuaternion(e1)),o=this.getLookAtWorldPosition(o4),l=wo.copy(t).sub(o).applyQuaternion(r).normalize(),c=a4.setFromUnitVectors(this.faceFront,l);return wo.set(0,0,1).applyQuaternion(c),e.x=Math.atan2(-wo.y,Math.sqrt(wo.x*wo.x+wo.z*wo.z)),e.y=Math.atan2(wo.x,wo.z),e}}Vh.EULER_ORDER="YXZ";const Hs=new _i(0,0,0,"YXZ");class t1{constructor(e,t,r,o,l){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l}lookAt(e){const t=e.x*180/Math.PI,r=e.y*180/Math.PI,o=this.humanoid.getBoneNode("leftEye"),l=this.humanoid.getBoneNode("rightEye");o&&(t<0?Hs.x=-this.rangeMapVerticalDown.map(-t)/180*Math.PI:Hs.x=this.rangeMapVerticalUp.map(t)/180*Math.PI,r<0?Hs.y=-this.rangeMapHorizontalInner.map(-r)/180*Math.PI:Hs.y=this.rangeMapHorizontalOuter.map(r)/180*Math.PI,o.quaternion.setFromEuler(Hs)),l&&(t<0?Hs.x=-this.rangeMapVerticalDown.map(-t)/180*Math.PI:Hs.x=this.rangeMapVerticalUp.map(t)/180*Math.PI,r<0?Hs.y=-this.rangeMapHorizontalOuter.map(-r)/180*Math.PI:Hs.y=this.rangeMapHorizontalInner.map(r)/180*Math.PI,l.quaternion.setFromEuler(Hs))}}t1.type="bone";class n1{constructor(e,t,r,o,l){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=o,this.rangeMapVerticalUp=l}lookAt(e){const t=e.x*180/Math.PI,r=e.y*180/Math.PI;t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),r<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-r))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(r)))}}n1.type="expression";class LA{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*SA(e/this.inputMaxValue)}}class l4{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return fn(this,void 0,void 0,function*(){if(t==null||r==null)return null;const o=yield this._v1Import(e,t,r);if(o)return o;const l=yield this._v0Import(e,t,r);return l||null})}_v1Import(e,t,r){var o,l,c;return fn(this,void 0,void 0,function*(){const h=this.parser.json;if(!(((o=h.extensionsUsed)===null||o===void 0?void 0:o.indexOf("VRMC_vrm"))!==-1))return null;const y=(l=h.extensions)===null||l===void 0?void 0:l.VRMC_vrm;if(!y||y.specVersion!=="1.0-beta")return null;const M=y.lookAt;if(!M)return null;const C=M.type==="expression"?1:10,I=this._v1ImportRangeMap(M.rangeMapHorizontalInner,C),O=this._v1ImportRangeMap(M.rangeMapHorizontalOuter,C),U=this._v1ImportRangeMap(M.rangeMapVerticalDown,C),H=this._v1ImportRangeMap(M.rangeMapVerticalUp,C);let P;M.type==="expression"?P=new n1(r,I,O,U,H):P=new t1(t,I,O,U,H);const A=this._importLookAt(t,P);return A.offsetFromHeadBone.fromArray((c=M.offsetFromHeadBone)!==null&&c!==void 0?c:[0,.06,0]),A})}_v1ImportRangeMap(e,t){var r,o;return new LA((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.outputScale)!==null&&o!==void 0?o:t)}_v0Import(e,t,r){var o,l,c,h;return fn(this,void 0,void 0,function*(){const y=(o=this.parser.json.extensions)===null||o===void 0?void 0:o.VRM;if(!y)return null;const b=y.firstPerson;if(!b)return null;const M=b.lookAtTypeName==="BlendShape"?1:10,C=this._v0ImportDegreeMap(b.lookAtHorizontalInner,M),I=this._v0ImportDegreeMap(b.lookAtHorizontalOuter,M),O=this._v0ImportDegreeMap(b.lookAtVerticalDown,M),U=this._v0ImportDegreeMap(b.lookAtVerticalUp,M);let H;b.lookAtTypeName==="BlendShape"?H=new n1(r,C,I,O,U):H=new t1(t,C,I,O,U);const P=this._importLookAt(t,H);return b.firstPersonBoneOffset?P.offsetFromHeadBone.set((l=b.firstPersonBoneOffset.x)!==null&&l!==void 0?l:0,(c=b.firstPersonBoneOffset.y)!==null&&c!==void 0?c:.06,-((h=b.firstPersonBoneOffset.z)!==null&&h!==void 0?h:0)):P.offsetFromHeadBone.set(0,.06,0),P.faceFront.set(0,0,-1),P})}_v0ImportDegreeMap(e,t){var r,o;const l=e==null?void 0:e.curve;return JSON.stringify(l)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new LA((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(o=e==null?void 0:e.yRange)!==null&&o!==void 0?o:t)}_importLookAt(e,t){const r=new Vh(e,t);if(this.helperRoot){const o=new t4(r);this.helperRoot.add(o),o.renderOrder=this.helperRoot.renderOrder}return r}}function u4(s,e){return typeof s!="string"||s===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(s)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(s)||/^data:.*,.*$/i.test(s)||/^blob:.*$/i.test(s)?s:e+s)}class c4{constructor(e,t){var r,o,l;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)!==null&&r!==void 0?r:!0,this.acceptLicenseUrls=(o=t==null?void 0:t.acceptLicenseUrls)!==null&&o!==void 0?o:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(l=t==null?void 0:t.acceptV0Meta)!==null&&l!==void 0?l:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return fn(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return fn(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o;return fn(this,void 0,void 0,function*(){const l=this.parser.json;if(!(((t=l.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const h=(r=l.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(h==null||h.specVersion!=="1.0-beta")return null;const y=h.meta;if(!y)return null;const b=y.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(b))throw new Error(`VRMMetaLoaderPlugin: The license url "${b}" is not accepted`);let C;return this.needThumbnailImage&&y.thumbnailImage!=null&&(C=(o=yield this._extractGLTFImage(y.thumbnailImage))!==null&&o!==void 0?o:void 0),{metaVersion:"1",name:y.name,version:y.version,authors:y.authors,copyrightInformation:y.copyrightInformation,contactInformation:y.contactInformation,references:y.references,thirdPartyLicenses:y.thirdPartyLicenses,thumbnailImage:C,licenseUrl:y.licenseUrl,avatarPermission:y.avatarPermission,allowExcessivelyViolentUsage:y.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:y.allowExcessivelySexualUsage,commercialUsage:y.commercialUsage,allowPoliticalOrReligiousUsage:y.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:y.allowAntisocialOrHateUsage,creditNotation:y.creditNotation,allowRedistribution:y.allowRedistribution,modification:y.modification,otherLicenseUrl:y.otherLicenseUrl}})}_v0Import(e){var t;return fn(this,void 0,void 0,function*(){const o=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!o)return null;const l=o.meta;if(!l)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.X meta but acceptV0Meta is false");let c;return this.needThumbnailImage&&l.texture!=null&&l.texture!==-1&&(c=yield this.parser.getDependency("texture",l.texture)),{metaVersion:"0",allowedUserName:l.allowedUserName,author:l.author,commercialUssageName:l.commercialUssageName,contactInformation:l.contactInformation,licenseName:l.licenseName,otherLicenseUrl:l.otherLicenseUrl,otherPermissionUrl:l.otherPermissionUrl,reference:l.reference,sexualUssageName:l.sexualUssageName,texture:c!=null?c:void 0,title:l.title,version:l.version,violentUssageName:l.violentUssageName}})}_extractGLTFImage(e){var t;return fn(this,void 0,void 0,function*(){const o=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(o==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let l=o.uri;if(o.bufferView!=null){const h=yield this.parser.getDependency("bufferView",o.bufferView),m=new Blob([h],{type:o.mimeType});l=URL.createObjectURL(m)}return l==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new Tc().loadAsync(u4(l,this.parser.options.path)).catch(h=>(console.error(h),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class f4{constructor(e){this.scene=e.scene,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt,this.meta=e.meta}update(e){this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class h4 extends f4{constructor(e){super(e);this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function pg(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.0-beta.9
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Gl(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}var d4=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,p4=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, uvRotSin, -uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, uv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, uv ) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #if defined( OUTLINE )
    gl_FragColor = vec4(
      outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor ),
      diffuseColor.a
    );
    postCorrection();
    return;
  #endif

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}`;const m4={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},r1={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},g4=3002,v4=3006,y4=3007,x4=s=>{if(parseInt(vi,10)>=136)switch(s){case ki:return["Linear","( value )"];case rn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}else switch(s){case ki:return["Linear","( value )"];case rn:return["sRGB","( value )"];case g4:return["RGBE","( value )"];case void 0:return["RGBM","( value, 7.0 )"];case void 0:return["RGBM","( value, 16.0 )"];case v4:return["RGBD","( value, 256.0 )"];case y4:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+s)}},i1=(s,e)=>{const t=x4(e);return"vec4 "+s+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function s1(s,e){let t;return s&&s.isTexture?t=s.encoding:t=ki,parseInt(vi,10)>=133&&e&&s&&s.isTexture&&s.format===Er&&s.type===Is&&s.encoding===rn&&(t=ki),t}class o1 extends Ps{constructor(e={}){super({vertexShader:d4,fragmentShader:p4});this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.normalMapType=ao,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=m4.None,this._outlineWidthMode=r1.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(vi,10)<129&&(e.skinning=e.skinning||!1),parseInt(vi,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=Zy.merge([ot.common,ot.normalmap,ot.emissivemap,ot.fog,ot.lights,{litFactor:{value:new Ze(1,1,1)},mapUvTransform:{value:new gn},colorAlpha:{value:1},normalMapUvTransform:{value:new gn},shadeColorFactor:{value:new Ze(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new gn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new gn},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Ze(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new gn},parametricRimColorFactor:{value:new Ze(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new gn},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Ze(0,0,0)},emissiveMapUvTransform:{value:new gn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new gn},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Ze(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new gn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[this._ignoreVertexColor?"ignoreVertexColor":"",this._v0CompatShade?"v0CompatShade":"",this._debugMode!=="none"?`debugMode:${this._debugMode}`:"",this._outlineWidthMode!=="none"?`outlineWidthMode:${this._outlineWidthMode}`:"",this._isOutline?"isOutline":"",...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const o=r.capabilities.isWebGL2,l=parseInt(vi,10),c=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([m,y])=>!!y).map(([m,y])=>`#define ${m} ${y}`).join(`
`)+`
`;let h="";parseInt(vi,10)<137&&(h=(this.matcapTexture!==null?i1("matcapTextureTexelToLinear",s1(this.matcapTexture,o))+`
`:"")+(this.shadeMultiplyTexture!==null?i1("shadeMultiplyTextureTexelToLinear",s1(this.shadeMultiplyTexture,o))+`
`:"")+(this.rimMultiplyTexture!==null?i1("rimMultiplyTextureTexelToLinear",s1(this.rimMultiplyTexture,o))+`
`:"")),t.vertexShader=c+t.vertexShader,t.fragmentShader=c+h+t.fragmentShader,l<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(vi,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(vi,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._outlineWidthMode===r1.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._outlineWidthMode===r1.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class _4{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Ze().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return Gl(this,void 0,void 0,function*(){const o=(()=>Gl(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=rn))}))();return this._pendings.push(o),o})}assignTextureByIndex(e,t,r){return Gl(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}class Wh{constructor(e,t={}){var r,o,l;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(o=t.v0CompatShade)!==null&&o!==void 0?o:!1,this.debugMode=(l=t.debugMode)!==null&&l!==void 0?l:"none",this._mToonMaterialSet=new Set}get name(){return Wh.EXTENSION_NAME}beforeRoot(){return Gl(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Gl(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?o1:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){var t;return Gl(this,void 0,void 0,function*(){const r=this.parser,l=(t=r.json.meshes)===null||t===void 0?void 0:t[e];if(l==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const c=l.primitives,h=yield r.loadMesh(e);if(c.length===1){const m=h,y=c[0].material;y!=null&&this._setupPrimitive(m,y)}else{const m=h;for(let y=0;y<c.length;y++){const b=m.children[y],M=c[y].material;M!=null&&this._setupPrimitive(b,M)}}return h})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((o,l)=>{var c;this._getMToonExtension(l)&&((c=o.extensions)===null||c===void 0?void 0:c.KHR_materials_unlit)&&delete o.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const c=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(c==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const h=(r=c.extensions)===null||r===void 0?void 0:r[Wh.EXTENSION_NAME];if(!(h==null||h.specVersion!=="1.0-beta"))return h}_extendMaterialParams(e,t){var r;return Gl(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const o=new _4(this.parser,t);o.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),o.assignColor("shadeColorFactor",e.shadeColorFactor),o.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),o.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),o.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),o.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),o.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),o.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),o.assignColor("matcapFactor",e.matcapFactor),o.assignTexture("matcapTexture",e.matcapTexture,!0),o.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),o.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),o.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),o.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),o.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),o.assignPrimitive("outlineWidthMode",e.outlineWidthMode),o.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),o.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),o.assignColor("outlineColorFactor",e.outlineColorFactor),o.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),o.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),o.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),o.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),o.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),o.assignPrimitive("v0CompatShade",this.v0CompatShade),o.assignPrimitive("debugMode",this.debugMode),yield o.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const o=this._parseRenderOrder(r);e.renderOrder=o+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof o1)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=$n,e.material.push(r);const o=e.geometry,l=o.index?o.index.count:o.attributes.position.count/3;o.addGroup(0,l,0),o.addGroup(0,l,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(o=>r.add(o)):r.add(t);for(const o of r)o instanceof o1&&this._mToonMaterialSet.add(o)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}Wh.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.0-beta.9
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function w4(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}function b4(s,e){var t,r;const o=parseInt(vi,10);let l=null;if(o>=133)l=(r=(t=s.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const h=s.associations.get(e);(h==null?void 0:h.type)==="materials"&&(l=h.index)}return l}class $h{constructor(e){this.parser=e}get name(){return $h.EXTENSION_NAME}afterRoot(e){return w4(this,void 0,void 0,function*(){const t=this.parser,r=[];e.scene.traverse(o=>{const l=o.material;l&&r.push(l)}),r.forEach(o=>{var l;const c=b4(t,o);if(c!=null){const h=this._getHDREmissiveMultiplierExtension(c);h&&((l=o.emissive)===null||l===void 0||l.multiplyScalar(h.emissiveMultiplier))}})})}_getHDREmissiveMultiplierExtension(e){var t,r;const c=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(c==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const h=(r=c.extensions)===null||r===void 0?void 0:r[$h.EXTENSION_NAME];if(h!=null)return h}}$h.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.0-beta.9
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function S4(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}function Cc(s){return Math.pow(s,2.2)}class M4{constructor(e){var t;this.parser=e;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return S4(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,o=r==null?void 0:r.materialProperties;!o||o.forEach((l,c)=>{var h,m;const y=(h=t.materials)===null||h===void 0?void 0:h[c];if(y==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${c}] of glTF but the material doesn't exist`);return}if(l.shader==="VRM/MToon"){const b=this._parseV0MToonProperties(l,y);t.materials[c]=b}else if((m=l.shader)===null||m===void 0?void 0:m.startsWith("VRM/Unlit")){const b=this._parseV0UnlitProperties(l,y);t.materials[c]=b}else l.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${l.shader}`)})})}_parseV0MToonProperties(e,t){var r,o,l,c,h,m,y,b,M,C,I,O,U,H,P,A,F,L,B,z,q,Z,ae,ce,ee,ue,le,w,p,J,E,ge,ke,Se,de,ye,Re,we,be,Ue,Ce,$e,ze,W;const Ve=(o=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,Be=((l=e.floatProperties)===null||l===void 0?void 0:l._ZWrite)===1&&Ve,Ye=this._v0ParseRenderQueue(e),De=(h=(c=e.keywordMap)===null||c===void 0?void 0:c._ALPHATEST_ON)!==null&&h!==void 0?h:!1,oe=Ve?"BLEND":De?"MASK":"OPAQUE",yt=De?(m=e.floatProperties)===null||m===void 0?void 0:m._Cutoff:void 0,et=((b=(y=e.floatProperties)===null||y===void 0?void 0:y._CullMode)!==null&&b!==void 0?b:2)===0,Nt=this._portTextureTransform(e),X=(C=(M=e.vectorProperties)===null||M===void 0?void 0:M._Color)===null||C===void 0?void 0:C.map((xt,Et)=>Et===3?xt:Cc(xt)),n=(I=e.textureProperties)===null||I===void 0?void 0:I._MainTex,i=n!=null?{index:n,extensions:Object.assign({},Nt)}:void 0,a=(O=e.floatProperties)===null||O===void 0?void 0:O._BumpScale,f=(U=e.textureProperties)===null||U===void 0?void 0:U._BumpMap,g=f!=null?{index:f,scale:a,extensions:Object.assign({},Nt)}:void 0,v=(P=(H=e.vectorProperties)===null||H===void 0?void 0:H._EmissionColor)===null||P===void 0?void 0:P.map(Cc),S=(A=e.textureProperties)===null||A===void 0?void 0:A._EmissionMap,R=S!=null?{index:S,extensions:Object.assign({},Nt)}:void 0,k=(L=(F=e.vectorProperties)===null||F===void 0?void 0:F._ShadeColor)===null||L===void 0?void 0:L.map(Cc),D=(B=e.textureProperties)===null||B===void 0?void 0:B._ShadeTexture,V=D!=null?{index:D,extensions:Object.assign({},Nt)}:void 0;let G=(q=(z=e.floatProperties)===null||z===void 0?void 0:z._ShadeShift)!==null&&q!==void 0?q:0,K=(ae=(Z=e.floatProperties)===null||Z===void 0?void 0:Z._ShadeToony)!==null&&ae!==void 0?ae:.9;K=yi.lerp(K,1,.5+.5*G),G=-G-(1-K);const Q=(ce=e.floatProperties)===null||ce===void 0?void 0:ce._IndirectLightIntensity,ne=Q?1-Q:void 0,ie=(ee=e.textureProperties)===null||ee===void 0?void 0:ee._SphereAdd,fe=ie!=null?{index:ie}:void 0,me=(ue=e.floatProperties)===null||ue===void 0?void 0:ue._RimLightingMix,Ie=(le=e.textureProperties)===null||le===void 0?void 0:le._RimTexture,Xe=Ie!=null?{index:Ie,extensions:Object.assign({},Nt)}:void 0,Fe=(p=(w=e.vectorProperties)===null||w===void 0?void 0:w._RimColor)===null||p===void 0?void 0:p.map(Cc),mt=(J=e.floatProperties)===null||J===void 0?void 0:J._RimFresnelPower,at=(E=e.floatProperties)===null||E===void 0?void 0:E._RimLift,wt=["none","worldCoordinates","screenCoordinates"][(ke=(ge=e.floatProperties)===null||ge===void 0?void 0:ge._OutlineWidthMode)!==null&&ke!==void 0?ke:0];let gt=(de=(Se=e.floatProperties)===null||Se===void 0?void 0:Se._OutlineWidth)!==null&&de!==void 0?de:0;gt=.01*gt;const pt=(ye=e.textureProperties)===null||ye===void 0?void 0:ye._OutlineWidthTexture,bn=pt!=null?{index:pt,extensions:Object.assign({},Nt)}:void 0,tn=(we=(Re=e.vectorProperties)===null||Re===void 0?void 0:Re._OutlineColor)===null||we===void 0?void 0:we.map(Cc),mn=((be=e.floatProperties)===null||be===void 0?void 0:be._OutlineColorMode)===1?(Ue=e.floatProperties)===null||Ue===void 0?void 0:Ue._OutlineLightingMix:0,pe=(Ce=e.textureProperties)===null||Ce===void 0?void 0:Ce._UvAnimMaskTexture,Te=pe!=null?{index:pe,extensions:Object.assign({},Nt)}:void 0,Oe=($e=e.floatProperties)===null||$e===void 0?void 0:$e._UvAnimScrollX;let Pe=(ze=e.floatProperties)===null||ze===void 0?void 0:ze._UvAnimScrollY;Pe!=null&&(Pe=-Pe);const He=(W=e.floatProperties)===null||W===void 0?void 0:W._UvAnimRotation,Ae={specVersion:"1.0-beta",transparentWithZWrite:Be,renderQueueOffsetNumber:Ye,shadeColorFactor:k,shadeMultiplyTexture:V,shadingShiftFactor:G,shadingToonyFactor:K,giEqualizationFactor:ne,matcapTexture:fe,rimLightingMixFactor:me,rimMultiplyTexture:Xe,parametricRimColorFactor:Fe,parametricRimFresnelPowerFactor:mt,parametricRimLiftFactor:at,outlineWidthMode:wt,outlineWidthFactor:gt,outlineWidthMultiplyTexture:bn,outlineColorFactor:tn,outlineLightingMixFactor:mn,uvAnimationMaskTexture:Te,uvAnimationScrollXSpeedFactor:Oe,uvAnimationScrollYSpeedFactor:Pe,uvAnimationRotationSpeedFactor:He};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:X,baseColorTexture:i},normalTexture:g,emissiveTexture:R,emissiveFactor:v,alphaMode:oe,alphaCutoff:yt,doubleSided:et,extensions:{VRMC_materials_mtoon:Ae}})}_parseV0UnlitProperties(e,t){var r,o,l,c;const h=e.shader==="VRM/UnlitTransparentZWrite",m=e.shader==="VRM/UnlitTransparent"||h,y=this._v0ParseRenderQueue(e),b=e.shader==="VRM/UnlitCutout",M=m?"BLEND":b?"MASK":"OPAQUE",C=b?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,I=this._portTextureTransform(e),O=(l=(o=e.vectorProperties)===null||o===void 0?void 0:o._Color)===null||l===void 0?void 0:l.map(Cc),U=(c=e.textureProperties)===null||c===void 0?void 0:c._MainTex,H=U!=null?{index:U,extensions:Object.assign({},I)}:void 0,P={specVersion:"1.0-beta",transparentWithZWrite:h,renderQueueOffsetNumber:y,shadeColorFactor:O,shadeMultiplyTexture:H};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:O,baseColorTexture:H},alphaMode:M,alphaCutoff:C,extensions:{VRMC_materials_mtoon:P}})}_portTextureTransform(e){var t,r,o,l,c;const h=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(h==null)return{};const m=[(r=h==null?void 0:h[0])!==null&&r!==void 0?r:0,(o=h==null?void 0:h[1])!==null&&o!==void 0?o:0],y=[(l=h==null?void 0:h[2])!==null&&l!==void 0?l:1,(c=h==null?void 0:h[3])!==null&&c!==void 0?c:1];return m[1]=y[1]*(1-m[1])%1,{KHR_texture_transform:{offset:m,scale:y}}}_v0ParseRenderQueue(e){var t,r,o;const l=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0?r:!1,c=((o=e.floatProperties)===null||o===void 0?void 0:o._ZWrite)===1;let h=0;return l&&e.renderQueue&&(c?h=Math.min(Math.max(e.renderQueue-2501,0),9):h=Math.min(Math.max(e.renderQueue-3e3,-9),0)),h}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.0-beta.9
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const da=new he;class T4 extends Ur{constructor(e){super();this._attrPosition=new Dt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(fl);const t=new St;t.setAttribute("position",this._attrPosition);const r=new Fn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Xi(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){da.setFromMatrixPosition(this.constraint.object.matrixWorld),this._attrPosition.setXYZ(0,da.x,da.y,da.z),this.constraint.source&&da.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,da.x,da.y,da.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}const E4=new he,A4=new he;function IA(s,e){return s.decompose(E4,e,A4),e}function PA(s){return s.invert?s.invert():s.inverse(),s}new he;new he;new he;new Vt;const C4=new Je;function R4(s){return s.invert?s.invert():s.getInverse(C4.copy(s)),s}class L4{constructor(e){this._inverseCache=new Je,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,o,l)=>(this._shouldUpdateInverse=!0,r[o]=l,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),R4(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const Rc=new Je;class I4{constructor(e,t){this.weight=1,this.sourceSpace="model",this.destinationSpace="model",this.object=e,this.modelRoot=t}get source(){return this._source}get dependencies(){const e=new Set;return this._source&&e.add(this._source),this.destinationSpace==="model"&&this.object.parent&&e.add(this.object.parent),e}setSource(e){this._source=e}_getParentMatrixInModelSpace(e){return this.object.parent?(this.object.parent.updateWorldMatrix(!1,!1),e.copy(this.object.parent.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc)):e.identity(),e}_getDestinationMatrix(e){if(this.destinationSpace==="local")this.object.updateMatrix(),e.copy(this.object.matrix);else if(this.destinationSpace==="model")this.object.updateWorldMatrix(!1,!1),e.copy(this.object.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc);else throw new Error(`VRMNodeConstraint: Unknown destinationSpace ${this.destinationSpace} detected`);return e}_getSourceMatrix(e){if(!this._source)throw new Error("There is no source specified");if(this.sourceSpace==="local")this._source.updateMatrix(),e.copy(this._source.matrix);else if(this.sourceSpace==="model")this._source.updateWorldMatrix(!1,!1),e.copy(this._source.matrixWorld),this._getMatrixWorldToModel(Rc),e.premultiply(Rc);else throw new Error(`VRMNodeConstraint: Unknown sourceSpace ${this.sourceSpace} detected`);return e}_getMatrixWorldToModel(e){let t=this.modelRoot.userData.inverseCacheProxy;return t||(t=this.modelRoot.userData.inverseCacheProxy=new L4(this.modelRoot.matrix)),e.copy(t.inverse),e}}new Vt(0,0,0,1);new Vt;new Vt;new Je;new he;new he;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function kA(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}function P4(s,e){const t=[];let r=s;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}class k4{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.object);t==null&&(t=new Set,this._objectConstraintsMap.set(e.object,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.object).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,o=>o.update())}_processConstraint(e,t,r,o){if(r.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const l=e.dependencies;for(const c of l)P4(c,h=>{const m=this._objectConstraintsMap.get(h);if(m)for(const y of m)this._processConstraint(y,t,r,o)});o(e),r.add(e)}}const O4=new Vt(0,0,0,1),mg=new he;function D4(s){mg.set(s.x,s.y,s.z);const e=mg.length(),t=Math.exp(s.w),r=e<Number.EPSILON?0:t*Math.sin(e)/e;return s.set(r*s.x,r*s.y,r*s.z,t*Math.cos(e)),s}function N4(s){mg.set(s.x,s.y,s.z);const e=mg.length(),t=e<Number.EPSILON?0:Math.atan2(e,s.w)/e;return s.set(t*s.x,t*s.y,t*s.z,.5*Math.log(s.lengthSq())),s}function F4(s,e){return e[0]&&e[1]&&e[2]?s:!e[0]&&!e[1]&&!e[2]?s.copy(O4):(N4(s),e[0]||(s.x*=0),e[1]||(s.y*=0),e[2]||(s.z*=0),D4(s))}const OA=new Vt(0,0,0,1),gg=new Je,a1=new Vt,DA=new Vt;class B4 extends I4{constructor(){super(...arguments);this.freezeAxes=[!0,!0,!0],this._quatInitSrc=new Vt,this._quatInvInitSrc=new Vt,this._quatInitDst=new Vt}setInitState(){this._quatInitDst.copy(this.object.quaternion),this._getSourceQuat(this._quatInitSrc),PA(this._quatInvInitSrc.copy(this._quatInitSrc))}update(){this.destinationSpace==="local"?this.object.quaternion.copy(this._quatInitDst):(this._getParentMatrixInModelSpace(gg),IA(gg,a1),PA(this.object.quaternion.copy(a1))),this._getSourceDiffQuat(DA),this.object.quaternion.multiply(DA),this.destinationSpace==="model"&&(this.object.quaternion.multiply(a1),this.object.quaternion.multiply(this._quatInitDst)),this.object.updateMatrix()}_getSourceDiffQuat(e){return this._getSourceQuat(e),this.sourceSpace==="local"?e.premultiply(this._quatInvInitSrc):e.multiply(this._quatInvInitSrc),F4(e,this.freezeAxes),e.slerp(OA,1-this.weight),e}_getSourceQuat(e){return e.copy(OA),this._source&&(this._getSourceMatrix(gg),IA(gg,e)),e}}class Lc{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return Lc.EXTENSION_NAME}afterRoot(e){return kA(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return kA(this,void 0,void 0,function*(){const r=this.parser.json;if(!(((t=r.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Lc.EXTENSION_NAME))!==-1))return null;const l=new k4,c=yield this.parser.getDependencies("node");return c.forEach((h,m)=>{var y;const b=r.nodes[m],M=(y=b==null?void 0:b.extensions)===null||y===void 0?void 0:y[Lc.EXTENSION_NAME];if(M==null||M.specVersion!=="1.0-draft")return;const I=M.constraint,O=this._importRotationConstraint(h,c,e.scene,I.rotation);l.addConstraint(O)}),e.scene.updateMatrixWorld(),l.setInitState(),l})}_importRotationConstraint(e,t,r,o){const{source:l,weight:c,freezeAxes:h}=o,m=new B4(e,r);if(m.setSource(t[l]),m.sourceSpace="local",m.destinationSpace="local",c&&(m.weight=c),h&&(m.freezeAxes=h),this.helperRoot){const y=new T4(m);this.helperRoot.add(y)}return m}}Lc.EXTENSION_NAME="VRMC_node_constraint";new Je;/*!
 * @pixiv/three-vrm-springbone v1.0.0-beta.9
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2021 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class NA{}const l1=new he,Vl=new he;class FA extends NA{constructor(e){var t,r,o;super();this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new he(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new he(0,0,0),this.radius=(o=e==null?void 0:e.radius)!==null&&o!==void 0?o:1}get type(){return"capsule"}calculateCollision(e,t,r,o){l1.copy(this.offset).applyMatrix4(e),Vl.copy(this.tail).applyMatrix4(e),Vl.sub(l1);const l=Vl.lengthSq();o.copy(t).sub(l1);const c=Vl.dot(o);c<=0||(l<=c||Vl.multiplyScalar(c/l),o.sub(Vl));const h=r+this.radius,m=o.length()-h;return o.normalize(),m}}class BA extends NA{constructor(e){var t,r;super();this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new he(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:1}get type(){return"sphere"}calculateCollision(e,t,r,o){o.copy(this.offset).applyMatrix4(e),o.negate().add(t);const l=r+this.radius,c=o.length()-l;return o.normalize(),c}}const bo=new he;class U4 extends St{constructor(e){super();this._currentRadius=0,this._currentOffset=new he,this._currentTail=new he,this._shape=e,this._attrPos=new Dt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),this._currentTail.equals(this._shape.tail)||(this._currentTail.copy(this._shape.tail),e=!0),e&&this._buildPosition()}_buildPosition(){bo.copy(this._currentTail).sub(this._currentOffset);const e=bo.length()/this._currentRadius;for(let o=0;o<=16;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(o,-Math.sin(l),-Math.cos(l),0),this._attrPos.setXYZ(17+o,e+Math.sin(l),Math.cos(l),0),this._attrPos.setXYZ(34+o,-Math.sin(l),0,-Math.cos(l)),this._attrPos.setXYZ(51+o,e+Math.sin(l),0,Math.cos(l))}for(let o=0;o<32;o++){const l=o/16*Math.PI;this._attrPos.setXYZ(68+o,0,Math.sin(l),Math.cos(l)),this._attrPos.setXYZ(100+o,e,Math.sin(l),Math.cos(l))}const t=Math.atan2(bo.y,Math.sqrt(bo.x*bo.x+bo.z*bo.z)),r=-Math.atan2(bo.z,bo.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class z4 extends St{constructor(e){super();this._currentRadius=0,this._currentOffset=new he,this._shape=e,this._attrPos=new Dt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._shape.radius&&(this._currentRadius=this._shape.radius,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}class UA extends Ur{constructor(e){super();if(this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof BA)this._geometry=new z4(this.collider.shape);else if(this.collider.shape instanceof FA)this._geometry=new U4(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new Fn({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Cr(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class H4 extends St{constructor(e){super();this._currentRadius=0,this._currentTail=new he,this._springBone=e,this._attrPos=new Dt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Dt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this._springBone.settings.hitRadius&&(this._currentRadius=this._springBone.settings.hitRadius,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}class G4 extends Ur{constructor(e){super();this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new H4(this.springBone);const t=new Fn({color:16776960,depthTest:!1,depthWrite:!1});this._line=new Cr(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld),this._geometry.update(),super.updateMatrixWorld(e)}}class zA extends Wt{constructor(e){super();this.shape=e}}const V4=new he,W4=new he;function $4(s,e){return s.matrixWorld.decompose(V4,e,W4),e}const j4=new Je;function HA(s){return s.invert?s.invert():s.getInverse(j4.copy(s)),s}class q4{constructor(e){this._inverseCache=new Je,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,o,l)=>(this._shouldUpdateInverse=!0,r[o]=l,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),HA(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const X4=Object.freeze(new Je),Y4=Object.freeze(new Vt),Wl=new he,K4=new he,Z4=new Vt,Rr=new Je,vg=new Je;class Q4{constructor(e,t,r={},o=[]){var l,c,h,m,y,b;this._currentTail=new he,this._prevTail=new he,this._nextTail=new he,this._boneAxis=new he,this._centerSpaceBoneLength=0,this._centerSpacePosition=new he,this._center=null,this._parentWorldRotation=new Vt,this._initialLocalMatrix=new Je,this._initialLocalRotation=new Vt,this._initialLocalChildPosition=new he,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(l=r.hitRadius)!==null&&l!==void 0?l:0,stiffness:(c=r.stiffness)!==null&&c!==void 0?c:1,gravityPower:(h=r.gravityPower)!==null&&h!==void 0?h:0,gravityDir:(y=(m=r.gravityDir)===null||m===void 0?void 0:m.clone())!==null&&y!==void 0?y:new he(0,-1,0),dragForce:(b=r.dragForce)!==null&&b!==void 0?b:.4},this.colliderGroups=o}get center(){return this._center}set center(e){var t;this._getMatrixCenterToWorld(Rr),this._currentTail.applyMatrix4(Rr),this._prevTail.applyMatrix4(Rr),this._nextTail.applyMatrix4(Rr),((t=this._center)===null||t===void 0?void 0:t.userData.inverseCacheProxy)&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new q4(this._center.matrixWorld))),this._getMatrixWorldToCenter(Rr),this._currentTail.applyMatrix4(Rr),this._prevTail.applyMatrix4(Rr),this._nextTail.applyMatrix4(Rr),Rr.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(Rr),this._centerSpaceBoneLength=Wl.copy(this._initialLocalChildPosition).applyMatrix4(Rr).sub(this._centerSpacePosition).length()}get initialLocalChildPosition(){return this._initialLocalChildPosition}setInitState(){this.bone.updateMatrix(),this.bone.updateWorldMatrix(!1,!1),this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize(),this._centerSpaceBoneLength=Wl.copy(this._initialLocalChildPosition).applyMatrix4(this.bone.matrixWorld).sub(this._centerSpacePosition).length()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this._centerSpacePosition.setFromMatrixPosition(this.bone.matrixWorld),this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)),this._prevTail.copy(this._currentTail),this._nextTail.copy(this._currentTail)}update(e){if(e<=0)return;this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix),this.bone.parent?$4(this.bone.parent,this._parentWorldRotation):this._parentWorldRotation.copy(Y4),this._getMatrixWorldToCenter(Rr),Rr.multiply(this.bone.matrixWorld),this._centerSpacePosition.setFromMatrixPosition(Rr),this._getMatrixWorldToCenter(vg),vg.multiply(this._getParentMatrixWorld());const t=this.settings.stiffness*e,r=K4.copy(this.settings.gravityDir).multiplyScalar(this.settings.gravityPower*e);this._nextTail.copy(this._currentTail).add(Wl.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(Wl.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(vg).sub(this._centerSpacePosition).normalize().multiplyScalar(t)).add(r),this._nextTail.sub(this._centerSpacePosition).normalize().multiplyScalar(this._centerSpaceBoneLength).add(this._centerSpacePosition),this._collision(this._nextTail),this._prevTail.copy(this._currentTail),this._currentTail.copy(this._nextTail);const o=HA(Rr.copy(vg.multiply(this._initialLocalMatrix))),l=Z4.setFromUnitVectors(this._boneAxis,Wl.copy(this._nextTail).applyMatrix4(o).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(l),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._getParentMatrixWorld(),this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{this._getMatrixWorldToCenter(Rr),Rr.multiply(r.matrixWorld);const o=r.shape.calculateCollision(Rr,e,this.settings.hitRadius,Wl);o<0&&(e.add(Wl.multiplyScalar(-o)),e.sub(this._centerSpacePosition).normalize().multiplyScalar(this._centerSpaceBoneLength).add(this._centerSpacePosition))})})}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}_getParentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:X4}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yg(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(b){try{y(r.next(b))}catch(M){c(M)}}function m(b){try{y(r.throw(b))}catch(M){c(M)}}function y(b){b.done?l(b.value):o(b.value).then(h,m)}y((r=r.apply(s,e||[])).next())})}function J4(s,e){const t=[];let r=s;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(o=>{e(o)})}function GA(s,e){s.children.forEach(t=>{e(t)||GA(t,e)})}class VA{constructor(){this._springBones=new Set,this._objectSpringBonesMap=new Map}get springBones(){return this._springBones}get colliderGroups(){const e=new Set;return this._springBones.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addSpringBone(e){this._springBones.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}deleteSpringBone(e){this._springBones.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._springBones)this._processSpringBone(r,e,t,o=>o.setInitState())}reset(){const e=new Set,t=new Set;for(const r of this._springBones)this._processSpringBone(r,e,t,o=>o.reset())}update(e){const t=new Set,r=new Set;for(const o of this._springBones)this._processSpringBone(o,t,r,l=>l.update(e)),GA(o.bone,l=>{var c,h;return((h=(c=this._objectSpringBonesMap.get(l))===null||c===void 0?void 0:c.size)!==null&&h!==void 0?h:0)>0?!0:(l.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,o){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating constraints");t.add(e);const l=this._getDependencies(e);for(const c of l)J4(c,h=>{const m=this._objectSpringBonesMap.get(h);if(m)for(const y of m)this._processSpringBone(y,t,r,o)});o(e),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),t}}class Ic{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return Ic.EXTENSION_NAME}afterRoot(e){return yg(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return yg(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r!=null?r:null})}_v1Import(e){var t,r,o,l,c;return yg(this,void 0,void 0,function*(){const h=e.parser.json;if(!(((t=h.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Ic.EXTENSION_NAME))!==-1))return null;const y=new VA,b=yield e.parser.getDependencies("node"),M=(r=h.extensions)===null||r===void 0?void 0:r[Ic.EXTENSION_NAME];if(!M||M.specVersion!=="1.0-beta")return null;const I=(o=M.colliders)===null||o===void 0?void 0:o.map((U,H)=>{var P,A,F,L,B;const z=b[U.node],q=U.shape;if(q.sphere)return this._importSphereCollider(z,{offset:new he().fromArray((P=q.sphere.offset)!==null&&P!==void 0?P:[0,0,0]),radius:(A=q.sphere.radius)!==null&&A!==void 0?A:0});if(q.capsule)return this._importCapsuleCollider(z,{offset:new he().fromArray((F=q.capsule.offset)!==null&&F!==void 0?F:[0,0,0]),radius:(L=q.capsule.radius)!==null&&L!==void 0?L:0,tail:new he().fromArray((B=q.capsule.tail)!==null&&B!==void 0?B:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${H} has no valid shape`)}),O=(l=M.colliderGroups)===null||l===void 0?void 0:l.map((U,H)=>{var P;return{colliders:((P=U.colliders)!==null&&P!==void 0?P:[]).map(F=>{const L=I==null?void 0:I[F];if(L==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${H} attempted to use a collider #${F} but not found`);return L}),name:U.name}});return(c=M.springs)===null||c===void 0||c.forEach((U,H)=>{var P;const A=U.joints,F=(P=U.colliderGroups)===null||P===void 0?void 0:P.map(B=>{const z=O==null?void 0:O[B];if(z==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${H} attempted to use a colliderGroup ${B} but not found`);return z});let L;A.forEach(B=>{var z;if(L){const q=L.node,Z=b[q],ae=B.node,ce=b[ae],ee={hitRadius:L.hitRadius,dragForce:L.dragForce,gravityPower:L.gravityPower,stiffness:L.stiffness,gravityDir:new he().fromArray((z=L.gravityDir)!==null&&z!==void 0?z:[0,1,0])},ue=this._importJoint(Z,ce,ee,F);y.addSpringBone(ue)}L=B})}),e.scene.updateMatrixWorld(),y.setInitState(),y})}_v0Import(e){var t,r,o;return yg(this,void 0,void 0,function*(){const l=e.parser.json;if(!(((t=l.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const h=(r=l.extensions)===null||r===void 0?void 0:r.VRM,m=h==null?void 0:h.secondaryAnimation;if(!m)return null;const y=m==null?void 0:m.boneGroups;if(!y)return null;const b=new VA,M=yield e.parser.getDependencies("node"),C=(o=m.colliderGroups)===null||o===void 0?void 0:o.map(I=>{var O;const U=M[I.node];return{colliders:((O=I.colliders)!==null&&O!==void 0?O:[]).map((P,A)=>{var F,L,B;const z=new he(0,0,0);return P.offset&&z.set((F=P.offset.x)!==null&&F!==void 0?F:0,(L=P.offset.y)!==null&&L!==void 0?L:0,P.offset.z?-P.offset.z:0),this._importSphereCollider(U,{offset:z,radius:(B=P.radius)!==null&&B!==void 0?B:0})})}});return y==null||y.forEach((I,O)=>{const U=I.bones;!U||U.forEach(H=>{var P,A,F,L;const B=M[H],z=new he;I.gravityDir?z.set((P=I.gravityDir.x)!==null&&P!==void 0?P:0,(A=I.gravityDir.y)!==null&&A!==void 0?A:0,(F=I.gravityDir.z)!==null&&F!==void 0?F:0):z.set(0,-1,0);const q={hitRadius:I.hitRadius,dragForce:I.dragForce,gravityPower:I.gravityPower,stiffness:I.stiffiness,gravityDir:z},Z=(L=I.colliderGroups)===null||L===void 0?void 0:L.map(ae=>{const ce=C==null?void 0:C[ae];if(ce==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${O} attempted to use a colliderGroup ${ae} but not found`);return ce});B.traverse(ae=>{var ce;const ee=(ce=ae.children[0])!==null&&ce!==void 0?ce:null,ue=this._importJoint(ae,ee,q,Z);b.addSpringBone(ue)})})}),e.scene.updateMatrixWorld(),b.setInitState(),b})}_importJoint(e,t,r,o){const l=new Q4(e,t,r,o);if(this.jointHelperRoot){const c=new G4(l);this.jointHelperRoot.add(c),c.renderOrder=this.jointHelperRoot.renderOrder}return l}_importSphereCollider(e,t){const{offset:r,radius:o}=t,l=new BA({offset:r,radius:o}),c=new zA(l);if(e.add(c),this.colliderHelperRoot){const h=new UA(c);this.colliderHelperRoot.add(h),h.renderOrder=this.colliderHelperRoot.renderOrder}return c}_importCapsuleCollider(e,t){const{offset:r,radius:o,tail:l}=t,c=new FA({offset:r,radius:o,tail:l}),h=new zA(c);if(e.add(h),this.colliderHelperRoot){const m=new UA(h);this.colliderHelperRoot.add(m),m.renderOrder=this.colliderHelperRoot.renderOrder}return h}}Ic.EXTENSION_NAME="VRMC_springBone";class DG{constructor(e,t){var r,o,l,c,h,m,y,b,M,C;this.parser=e;const I=t==null?void 0:t.helperRoot;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new hg(e),this.firstPersonPlugin=(o=t==null?void 0:t.firstPersonPlugin)!==null&&o!==void 0?o:new XU(e),this.humanoidPlugin=(l=t==null?void 0:t.humanoidPlugin)!==null&&l!==void 0?l:new KU(e),this.lookAtPlugin=(c=t==null?void 0:t.lookAtPlugin)!==null&&c!==void 0?c:new l4(e,{helperRoot:I}),this.metaPlugin=(h=t==null?void 0:t.metaPlugin)!==null&&h!==void 0?h:new c4(e),this.mtoonMaterialPlugin=(m=t==null?void 0:t.mtoonMaterialPlugin)!==null&&m!==void 0?m:new Wh(e),this.materialsHDREmissiveMultiplierPlugin=(y=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&y!==void 0?y:new $h(e),this.materialsV0CompatPlugin=(b=t==null?void 0:t.materialsV0CompatPlugin)!==null&&b!==void 0?b:new M4(e),this.springBonePlugin=(M=t==null?void 0:t.springBonePlugin)!==null&&M!==void 0?M:new Ic(e,{colliderHelperRoot:I,jointHelperRoot:I}),this.nodeConstraintPlugin=(C=t==null?void 0:t.nodeConstraintPlugin)!==null&&C!==void 0?C:new Lc(e,{helperRoot:I})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return pg(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return pg(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t!=null?t:null}extendMaterialParams(e,t){return pg(this,void 0,void 0,function*(){yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return pg(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e),yield this.materialsHDREmissiveMultiplierPlugin.afterRoot(e);const t=new h4({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:e.userData.vrmHumanoid,lookAt:e.userData.vrmLookAt,meta:e.userData.vrmMeta,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=t})}}function WA(s){if(Object.values(s).forEach(e=>{(e==null?void 0:e.isTexture)&&e.dispose()}),s.isShaderMaterial){const e=s.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;(r==null?void 0:r.isTexture)&&r.dispose()})}s.dispose()}function ez(s){const e=s.geometry;e&&e.dispose();const t=s.skeleton;t&&t.dispose();const r=s.material;r&&(Array.isArray(r)?r.forEach(o=>WA(o)):r&&WA(r))}function tz(s){s.traverse(ez)}function nz(s){const e=new Map;s.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,l=r.geometry.getAttribute("skinIndex");let c=e.get(l);if(!c){const h=[],m=[],y={},b=l.array;for(let M=0;M<b.length;M++){const C=b[M];y[C]===void 0&&(y[C]=h.length,h.push(r.skeleton.bones[C]),m.push(r.skeleton.boneInverses[C])),b[M]=y[C]}l.copyArray(b),l.needsUpdate=!0,c=new aa(h,m),e.set(l,c)}r.bind(c,new Je)})}function rz(s){const e=new Map;s.traverse(t=>{var r,o,l,c;if(!t.isMesh)return;const h=t,m=h.geometry,y=m.index;if(y==null)return;const b=e.get(m);if(b!=null){h.geometry=b;return}const M=new St;M.name=m.name,M.morphTargetsRelative=m.morphTargetsRelative,m.groups.forEach(U=>{M.addGroup(U.start,U.count,U.materialIndex)}),M.boundingBox=(o=(r=m.boundingBox)===null||r===void 0?void 0:r.clone())!==null&&o!==void 0?o:null,M.boundingSphere=(c=(l=m.boundingSphere)===null||l===void 0?void 0:l.clone())!==null&&c!==void 0?c:null,M.setDrawRange(m.drawRange.start,m.drawRange.count),M.userData=m.userData,e.set(m,M);const C=[],I=[];{const U=y.array,H=new U.constructor(U.length);let P=0;for(let A=0;A<U.length;A++){const F=U[A];let L=C[F];L==null&&(C[F]=P,I[P]=F,L=P,P++),H[A]=L}M.setIndex(new Dt(H,1,!1))}Object.keys(m.attributes).forEach(U=>{const H=m.attributes[U];if(H.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const P=H.array,{itemSize:A,normalized:F}=H,L=new P.constructor(I.length*A);I.forEach((B,z)=>{for(let q=0;q<A;q++)L[z*A+q]=P[B*A+q]}),M.setAttribute(U,new Dt(L,A,F))});let O=!0;Object.keys(m.morphAttributes).forEach(U=>{M.morphAttributes[U]=[];const H=m.morphAttributes[U];for(let P=0;P<H.length;P++){const A=H[P];if(A.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const F=A.array,{itemSize:L,normalized:B}=A,z=new F.constructor(I.length*L);I.forEach((q,Z)=>{for(let ae=0;ae<L;ae++)z[Z*L+ae]=F[q*L+ae]}),O=O&&z.every(q=>q===0),M.morphAttributes[U][P]=new Dt(z,L,B)}}),O&&(M.morphAttributes={}),h.geometry=M}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function iz(s){var e;((e=s.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(s.scene.rotation.y=Math.PI)}class xg{constructor(){}}xg.deepDispose=tz;xg.removeUnnecessaryJoints=nz;xg.removeUnnecessaryVertices=rz;xg.rotateVRM0=iz;var u1=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var s=0,e=arguments.length;e--;)s+=arguments[e]*arguments[e];return Math.sqrt(s)});function sz(){var s=new u1(3);return u1!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function c1(s){var e=s[0],t=s[1],r=s[2];return Math.hypot(e,t,r)}(function(){var s=sz();return function(e,t,r,o,l,c){var h,m;for(t||(t=3),r||(r=0),o?m=Math.min(o*t+r,e.length):m=e.length,h=r;h<m;h+=t)s[0]=e[h],s[1]=e[h+1],s[2]=e[h+2],l(s,s,c),e[h]=s[0],e[h+1]=s[1],e[h+2]=s[2];return e}})();function oz(s){var e=s[0],t=s[1],r=s[2],o=s[3],l=s[4],c=s[5],h=s[6],m=s[7],y=s[8],b=s[9],M=s[10],C=s[11],I=s[12],O=s[13],U=s[14],H=s[15],P=e*c-t*l,A=e*h-r*l,F=e*m-o*l,L=t*h-r*c,B=t*m-o*c,z=r*m-o*h,q=y*O-b*I,Z=y*U-M*I,ae=y*H-C*I,ce=b*U-M*O,ee=b*H-C*O,ue=M*H-C*U;return P*ue-A*ee+F*ce+L*ae-B*Z+z*q}function az(s,e,t){var r=e[0],o=e[1],l=e[2],c=e[3],h=e[4],m=e[5],y=e[6],b=e[7],M=e[8],C=e[9],I=e[10],O=e[11],U=e[12],H=e[13],P=e[14],A=e[15],F=t[0],L=t[1],B=t[2],z=t[3];return s[0]=F*r+L*h+B*M+z*U,s[1]=F*o+L*m+B*C+z*H,s[2]=F*l+L*y+B*I+z*P,s[3]=F*c+L*b+B*O+z*A,F=t[4],L=t[5],B=t[6],z=t[7],s[4]=F*r+L*h+B*M+z*U,s[5]=F*o+L*m+B*C+z*H,s[6]=F*l+L*y+B*I+z*P,s[7]=F*c+L*b+B*O+z*A,F=t[8],L=t[9],B=t[10],z=t[11],s[8]=F*r+L*h+B*M+z*U,s[9]=F*o+L*m+B*C+z*H,s[10]=F*l+L*y+B*I+z*P,s[11]=F*c+L*b+B*O+z*A,F=t[12],L=t[13],B=t[14],z=t[15],s[12]=F*r+L*h+B*M+z*U,s[13]=F*o+L*m+B*C+z*H,s[14]=F*l+L*y+B*I+z*P,s[15]=F*c+L*b+B*O+z*A,s}function lz(s,e){var t=e[0],r=e[1],o=e[2],l=e[4],c=e[5],h=e[6],m=e[8],y=e[9],b=e[10];return s[0]=Math.hypot(t,r,o),s[1]=Math.hypot(l,c,h),s[2]=Math.hypot(m,y,b),s}function uz(s,e){var t=new u1(3);lz(t,e);var r=1/t[0],o=1/t[1],l=1/t[2],c=e[0]*r,h=e[1]*o,m=e[2]*l,y=e[4]*r,b=e[5]*o,M=e[6]*l,C=e[8]*r,I=e[9]*o,O=e[10]*l,U=c+b+O,H=0;return U>0?(H=Math.sqrt(U+1)*2,s[3]=.25*H,s[0]=(M-I)/H,s[1]=(C-m)/H,s[2]=(h-y)/H):c>b&&c>O?(H=Math.sqrt(1+c-b-O)*2,s[3]=(M-I)/H,s[0]=.25*H,s[1]=(h+y)/H,s[2]=(C+m)/H):b>O?(H=Math.sqrt(1+b-c-O)*2,s[3]=(C-m)/H,s[0]=(h+y)/H,s[1]=.25*H,s[2]=(M+I)/H):(H=Math.sqrt(1+O-c-b)*2,s[3]=(h-y)/H,s[0]=(C+m)/H,s[1]=(M+I)/H,s[2]=.25*H),s}var ln,_g,f1,$l;function $t(s,e,t,r){var o,l=arguments.length,c=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,t,r);else for(var h=s.length-1;h>=0;h--)(o=s[h])&&(c=(l<3?o(c):l>3?o(e,t,c):o(e,t))||c);return l>3&&c&&Object.defineProperty(e,t,c),c}(function(s){s.ACCESSOR="Accessor",s.ANIMATION="Animation",s.ANIMATION_CHANNEL="AnimationChannel",s.ANIMATION_SAMPLER="AnimationSampler",s.BUFFER="Buffer",s.CAMERA="Camera",s.MATERIAL="Material",s.MESH="Mesh",s.PRIMITIVE="Primitive",s.PRIMITIVE_TARGET="PrimitiveTarget",s.NODE="Node",s.ROOT="Root",s.SCENE="Scene",s.SKIN="Skin",s.TEXTURE="Texture",s.TEXTURE_INFO="TextureInfo"})(ln||(ln={})),function(s){s.INTERLEAVED="interleaved",s.SEPARATE="separate"}(_g||(_g={})),function(s){s[s.R=4096]="R",s[s.G=256]="G",s[s.B=16]="B",s[s.A=1]="A"}(f1||(f1={})),function(s){s.GLTF="GLTF",s.GLB="GLB"}($l||($l={}));class wg{constructor(e,t,r){if(this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=e,this.i=t,this.h=r,!t.canLink(r))throw new Error("Cannot link disconnected graphs/documents.")}getName(){return this.t}getParent(){return this.i}getChild(){return this.h}setChild(e){return this.h=e,this}dispose(){this.o||(this.o=!0,this.u.forEach(e=>e()),this.u.length=0)}onDispose(e){return this.u.push(e),this}isDisposed(){return this.o}}class cz{constructor(){this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}on(e,t){return this.u[e]=this.u[e]||[],this.u[e].push(t),this}emit(e,t){for(const r of this.u[e]||[])r(t);return this}getLinks(){return Array.from(this.p)}listParentLinks(e){return Array.from(this.v.get(e)||this.l)}listParents(e){return this.listParentLinks(e).map(t=>t.getParent())}listChildLinks(e){return Array.from(this.g.get(e)||this.l)}listChildren(e){return this.listChildLinks(e).map(t=>t.getChild())}disconnectChildren(e){return(this.g.get(e)||this.l).forEach(t=>t.dispose()),this}disconnectParents(e,t){let r=Array.from(this.v.get(e)||this.l);return t&&(r=r.filter(o=>t(o.getParent()))),r.forEach(o=>o.dispose()),this}swapChild(e,t,r){const o=this.g.get(e)||this.l;return Array.from(o).filter(l=>l.getChild()===t).forEach(l=>{this.v.get(t).delete(l),l.setChild(r),this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(l)}),this}link(e,t,r){if(!r)return null;const o=new wg(e,t,r);return this.registerLink(o),o}registerLink(e){this.p.add(e);const t=e.getParent();this.g.has(t)||this.g.set(t,new Set),this.g.get(t).add(e);const r=e.getChild();return this.v.has(r)||this.v.set(r,new Set),this.v.get(r).add(e),e.onDispose(()=>this.unlink(e)),e}unlink(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}function Hn(s,e){Object.defineProperty(s,e,{get:function(){return this["__"+e]},set:function(t){const r=this["__"+e];r&&!Array.isArray(r)&&r.dispose(),t&&!Array.isArray(t)&&t.onDispose(()=>{this["__"+e]=null}),this["__"+e]=t},enumerable:!0})}function dr(s,e){}class ci{static createBufferFromDataURI(e){if(typeof Buffer=="undefined"){const t=atob(e.split(",")[1]),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r.buffer}{const t=e.split(",")[1],r=e.indexOf("base64")>=0;return this.trim(Buffer.from(t,r?"base64":"utf8"))}}static encodeText(e){return typeof TextEncoder!="undefined"?new TextEncoder().encode(e).buffer:this.trim(Buffer.from(e))}static decodeText(e){return typeof TextDecoder!="undefined"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static trim(e){const{byteOffset:t,byteLength:r}=e;return e.buffer.slice(t,t+r)}static concat(e){let t=0;for(const l of e)t+=l.byteLength;const r=new Uint8Array(t);let o=0;for(const l of e)r.set(new Uint8Array(l),o),o+=l.byteLength;return r.buffer}static pad(e,t=0){const r=this.padNumber(e.byteLength);if(r!==e.byteLength){const o=new Uint8Array(r);if(o.set(new Uint8Array(e)),t!==0)for(let l=e.byteLength;l<r;l++)o[l]=t;return o.buffer}return e}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),o=new DataView(t);let l=e.byteLength;for(;l--;)if(r.getUint8(l)!==o.getUint8(l))return!1;return!0}}class bg{static hexToFactor(e,t){e=Math.floor(e);const r=t;return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[r,o,l]=this.convertLinearToSRGB(e,t);return 255*r<<16^255*o<<8^255*l<<0}static convertSRGBToLinear(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.04045?.0773993808*r[l]:Math.pow(.9478672986*r[l]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const r=e,o=t;for(let l=0;l<3;l++)o[l]=r[l]<.0031308?12.92*r[l]:1.055*Math.pow(r[l],.41666)-.055;return t}}class Sg{static basename(e){const t=e.split(/[\\/]/).pop();return t.substr(0,t.lastIndexOf("."))}static extension(e){return e.indexOf("data:")!==0?e.split(/[\\/]/).pop().split(/[.]/).pop():e.indexOf("data:image/png")===0?"png":e.indexOf("data:image/jpeg")===0?"jpeg":"bin"}}class Mg{match(e){const t=new Uint8Array(e);return t.length>=8&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}getSize(e){const t=new DataView(e);return ci.decodeText(e.slice(12,16))===Mg.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}Mg.PNG_FRIED_CHUNK_NAME="CgBI";class Pc{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let r=0;const o=this.getSize(e,t);if(!o)return null;for(;o[0]>1||o[1]>1;)r+=o[0]*o[1]*4,o[0]=Math.max(Math.floor(o[0]/2),1),o[1]=Math.max(Math.floor(o[1]/2),1);return r+=4,r}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}}function fz(s,e){if(e>s.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(s.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return s}Pc.impls={"image/jpeg":new class{match(s){const e=new Uint8Array(s);return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(s){let e,t,r=new DataView(s,4);for(;r.byteLength;){if(e=r.getUint16(0,!1),fz(r,e),t=r.getUint8(e+1),t===192||t===193||t===194)return[r.getUint16(e+7,!1),r.getUint16(e+5,!1)];r=new DataView(s,r.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(s){return 3}},"image/png":new Mg};class xr{static identity(e){return e}static eq(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>1e-5)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,r,o){let l=c1([e[0],e[1],e[2]]);const c=c1([e[4],e[5],e[6]]),h=c1([e[8],e[9],e[10]]);oz(e)<0&&(l=-l),t[0]=e[12],t[1]=e[13],t[2]=e[14];const m=e.slice(),y=1/l,b=1/c,M=1/h;m[0]*=y,m[1]*=y,m[2]*=y,m[4]*=b,m[5]*=b,m[6]*=b,m[8]*=M,m[9]*=M,m[10]*=M,uz(r,m),o[0]=l,o[1]=c,o[2]=h}static compose(e,t,r,o){const l=o,c=t[0],h=t[1],m=t[2],y=t[3],b=c+c,M=h+h,C=m+m,I=c*b,O=c*M,U=c*C,H=h*M,P=h*C,A=m*C,F=y*b,L=y*M,B=y*C,z=r[0],q=r[1],Z=r[2];return l[0]=(1-(H+A))*z,l[1]=(O+B)*z,l[2]=(U-L)*z,l[3]=0,l[4]=(O-B)*q,l[5]=(1-(I+A))*q,l[6]=(P+F)*q,l[7]=0,l[8]=(U+L)*Z,l[9]=(P-F)*Z,l[10]=(1-(I+H))*Z,l[11]=0,l[12]=e[0],l[13]=e[1],l[14]=e[2],l[15]=1,l}}class Ui{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=Ui.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=Ui.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=Ui.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=Ui.Verbosity.ERROR&&console.error(e)}}Ui.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},Ui.DEFAULT_INSTANCE=new Ui(Ui.Verbosity.INFO);const $A="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",jA=new Set,hz=function(){let s="";for(let e=0;e<6;e++)s+=$A.charAt(Math.floor(Math.random()*$A.length));return s},dz=function(){for(let s=0;s<999;s++){const e=hz();if(!jA.has(e))return jA.add(e),e}return""},Gn=s=>s;class kc extends class{constructor(e){this.graph=void 0,this.o=!1,this.graph=e,this.graph=e}canLink(e){return this.graph===e.graph}isDisposed(){return this.o}dispose(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}detach(){return this.graph.disconnectParents(this),this}swap(e,t){return this.graph.swapChild(this,e,t),this}addGraphChild(e,t){return e.push(t),t.onDispose(()=>{const r=e.filter(o=>o!==t);e.length=0;for(const o of r)e.push(o)}),this}removeGraphChild(e,t){return e.filter(r=>r.getChild()===t).forEach(r=>r.dispose()),this}clearGraphChildList(e){for(;e.length>0;)e[0].dispose();return this}listGraphParents(){return this.graph.listParents(this)}}{constructor(e,t=""){super(e),this.graph=void 0,this.m={},this.t="",this.graph=e,this.t=t}getName(){return this.t}setName(e){return this.t=e,this}getExtras(){return this.m}setExtras(e){return this.m=e,this}clone(){const e=new this.constructor(this.graph).copy(this,Gn);return this.graph.emit("clone",e),e}copy(e,t=Gn){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.listGraphParents()}}const qA="Pass extension name (string) as lookup token, not a constructor.";class zi extends kc{constructor(...e){super(...e),this.extensions=[]}copy(e,t=Gn){return super.copy(e,t),this.clearGraphChildList(this.extensions),e.extensions.forEach(r=>{const o=r.getChild();this.setExtension(o.extensionName,t(o))}),this}getExtension(e){if(typeof e!="string")throw new Error(qA);const t=this.extensions.find(r=>r.getChild().extensionName===e);return t?t.getChild():null}setExtension(e,t){if(typeof e!="string")throw new Error(qA);const r=this.getExtension(e);return r&&this.removeGraphChild(this.extensions,r),t?(t.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,t))):this}listExtensions(){return this.extensions.map(e=>e.getChild())}}$t([dr],zi.prototype,"extensions",void 0);class zt extends zi{constructor(...e){super(...e),this.propertyType=ln.ACCESSOR,this.S=null,this.M=zt.Type.SCALAR,this.I=zt.ComponentType.FLOAT,this.N=!1,this.C=xr.identity,this.O=xr.identity,this.buffer=null}copy(e,t=Gn){return super.copy(e,t),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?t(e.buffer.getChild()):null),this}static getElementSize(e){switch(e){case zt.Type.SCALAR:return 1;case zt.Type.VEC2:return 2;case zt.Type.VEC3:return 3;case zt.Type.VEC4:case zt.Type.MAT2:return 4;case zt.Type.MAT3:return 9;case zt.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case zt.ComponentType.BYTE:case zt.ComponentType.UNSIGNED_BYTE:return 1;case zt.ComponentType.SHORT:case zt.ComponentType.UNSIGNED_SHORT:return 2;case zt.ComponentType.UNSIGNED_INT:case zt.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMin(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const c=this.S[o+l];Number.isFinite(c)&&(e[l]=Math.min(e[l],c))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let r=0;r<t;r++)e[r]=this.O(e[r]);return e}getMax(e){const t=this.getCount(),r=this.getElementSize();for(let o=0;o<r;o++)e[o]=-1/0;for(let o=0;o<t*r;o+=r)for(let l=0;l<r;l++){const c=this.S[o+l];Number.isFinite(c)&&(e[l]=Math.max(e[l],c))}return e}getCount(){return this.S?this.S.length/this.getElementSize():0}getType(){return this.M}setType(e){return this.M=e,this}getElementSize(){return zt.getElementSize(this.M)}getComponentSize(){return this.S.BYTES_PER_ELEMENT}getComponentType(){return this.I}getNormalized(){return this.N}setNormalized(e){return this.N=e,e?(this.O=t=>xr.denormalize(t,this.I),this.C=t=>xr.normalize(t,this.I)):(this.O=xr.identity,this.C=xr.identity),this}getScalar(e){const t=this.getElementSize();return this.O(this.S[e*t])}setScalar(e,t){return this.S[e*this.getElementSize()]=this.C(t),this}getElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)t[o]=this.O(this.S[e*r+o]);return t}setElement(e,t){const r=this.getElementSize();for(let o=0;o<r;o++)this.S[e*r+o]=this.C(t[o]);return this}getBuffer(){return this.buffer?this.buffer.getChild():null}setBuffer(e){return this.buffer=this.graph.link("buffer",this,e),this}getArray(){return this.S}setArray(e){return this.I=e?function(t){switch(t.constructor){case Float32Array:return zt.ComponentType.FLOAT;case Uint32Array:return zt.ComponentType.UNSIGNED_INT;case Uint16Array:return zt.ComponentType.UNSIGNED_SHORT;case Uint8Array:return zt.ComponentType.UNSIGNED_BYTE;case Int16Array:return zt.ComponentType.SHORT;case Int8Array:return zt.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):zt.ComponentType.FLOAT,this.S=e,this}getByteLength(){return this.S?this.S.byteLength:0}}zt.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},zt.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},$t([Hn],zt.prototype,"buffer",void 0);class Tg extends zi{constructor(...e){super(...e),this.propertyType=ln.ANIMATION,this.channels=[],this.samplers=[]}copy(e,t=Gn){return super.copy(e,t),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach(r=>this.addChannel(t(r.getChild()))),e.samplers.forEach(r=>this.addSampler(t(r.getChild()))),this}addChannel(e){const t=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,t)}removeChannel(e){return this.removeGraphChild(this.channels,e)}listChannels(){return this.channels.map(e=>e.getChild())}addSampler(e){const t=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,t)}removeSampler(e){return this.removeGraphChild(this.samplers,e)}listSamplers(){return this.samplers.map(e=>e.getChild())}}$t([dr],Tg.prototype,"channels",void 0),$t([dr],Tg.prototype,"samplers",void 0);class Eg extends kc{constructor(...e){super(...e),this.propertyType=ln.ANIMATION_CHANNEL,this._=null,this.targetNode=null,this.sampler=null}copy(e,t=Gn){return super.copy(e,t),this._=e._,this.setTargetNode(e.targetNode?t(e.targetNode.getChild()):null),this.setSampler(e.sampler?t(e.sampler.getChild()):null),this}getTargetPath(){return this._}setTargetPath(e){return this._=e,this}getTargetNode(){return this.targetNode?this.targetNode.getChild():null}setTargetNode(e){return this.targetNode=this.graph.link("target.node",this,e),this}getSampler(){return this.sampler?this.sampler.getChild():null}setSampler(e){return this.sampler=this.graph.link("sampler",this,e),this}}Eg.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},$t([Hn],Eg.prototype,"targetNode",void 0),$t([Hn],Eg.prototype,"sampler",void 0);class jl extends kc{constructor(...e){super(...e),this.propertyType=ln.ANIMATION_SAMPLER,this.L=jl.Interpolation.LINEAR,this.input=null,this.output=null}copy(e,t=Gn){return super.copy(e,t),this.L=e.L,this.setInput(e.input?t(e.input.getChild()):null),this.setOutput(e.output?t(e.output.getChild()):null),this}getInterpolation(){return this.L}setInterpolation(e){return this.L=e,this}getInput(){return this.input?this.input.getChild():null}setInput(e){return this.input=this.graph.link("input",this,e),this}getOutput(){return this.output?this.output.getChild():null}setOutput(e){return this.output=this.graph.link("output",this,e),this}}jl.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},$t([Hn],jl.prototype,"input",void 0),$t([Hn],jl.prototype,"output",void 0);class XA extends zi{constructor(...e){super(...e),this.propertyType=ln.BUFFER,this.P=""}copy(e,t=Gn){return super.copy(e,t),this.P=e.P,this}getURI(){return this.P}setURI(e){return this.P=e,this}}class ql extends zi{constructor(...e){super(...e),this.propertyType=ln.CAMERA,this.M=ql.Type.PERSPECTIVE,this.U=.1,this.k=100,this.F=null,this.j=2*Math.PI*50/360,this.D=1,this.J=1}copy(e,t=Gn){return super.copy(e,t),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}getType(){return this.M}setType(e){return this.M=e,this}getZNear(){return this.U}setZNear(e){return this.U=e,this}getZFar(){return this.k}setZFar(e){return this.k=e,this}getAspectRatio(){return this.F}setAspectRatio(e){return this.F=e,this}getYFov(){return this.j}setYFov(e){return this.j=e,this}getXMag(){return this.D}setXMag(e){return this.D=e,this}getYMag(){return this.J}setYMag(e){return this.J=e,this}}ql.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class YA extends kc{constructor(e,t){super(e),this.$=void 0,this.$=t,this.$.addExtensionProperty(this)}clone(){const e=new this.constructor(this.graph,this.$).copy(this,Gn);return this.graph.emit("clone",e),e}dispose(){this.$.removeExtensionProperty(this),super.dispose()}T(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}YA.EXTENSION_NAME=void 0;class KA extends wg{constructor(...e){super(...e),this.semantic=""}copy(e){return this.semantic=e.semantic,this}}class ZA extends wg{copy(e){return this}}class pz extends wg{constructor(...e){super(...e),this.channels=0}copy(e){return this.channels=e.channels,this}}class mz extends cz{linkAttribute(e,t,r){if(!r)return null;const o=new KA(e,t,r);return o.semantic=e,this.registerLink(o),o}linkIndex(e,t,r){if(!r)return null;const o=new ZA(e,t,r);return this.registerLink(o),o}linkTexture(e,t,r,o){if(!o)return null;const l=new pz(e,r,o);return l.channels=t,this.registerLink(l),l}}class xs extends zi{constructor(...e){super(...e),this.propertyType=ln.TEXTURE_INFO,this.V=0,this.W=null,this.q=null,this.Y=xs.WrapMode.REPEAT,this.H=xs.WrapMode.REPEAT}copy(e,t=Gn){return super.copy(e,t),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}equals(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}getTexCoord(){return this.V}setTexCoord(e){return this.V=e,this}getMagFilter(){return this.W}setMagFilter(e){return this.W=e,this}getMinFilter(){return this.q}setMinFilter(e){return this.q=e,this}getWrapS(){return this.Y}setWrapS(e){return this.Y=e,this}getWrapT(){return this.H}setWrapT(e){return this.H=e,this}}xs.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},xs.MagFilter={NEAREST:9728,LINEAR:9729},xs.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Ag,G:Cg,B:Rg,A:gz}=f1;class Hr extends zi{constructor(...e){super(...e),this.propertyType=ln.MATERIAL,this.Z=Hr.AlphaMode.OPAQUE,this.K=.5,this.X=!1,this.tt=[1,1,1,1],this.st=[0,0,0],this.et=1,this.it=1,this.rt=1,this.nt=1,this.baseColorTexture=null,this.baseColorTextureInfo=this.graph.link("baseColorTextureInfo",this,new xs(this.graph)),this.emissiveTexture=null,this.emissiveTextureInfo=this.graph.link("emissiveTextureInfo",this,new xs(this.graph)),this.normalTexture=null,this.normalTextureInfo=this.graph.link("normalTextureInfo",this,new xs(this.graph)),this.occlusionTexture=null,this.occlusionTextureInfo=this.graph.link("occlusionTextureInfo",this,new xs(this.graph)),this.metallicRoughnessTexture=null,this.metallicRoughnessTextureInfo=this.graph.link("metallicRoughnessTextureInfo",this,new xs(this.graph))}copy(e,t=Gn){return super.copy(e,t),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=[...e.tt],this.st=[...e.st],this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?t(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(t(e.baseColorTextureInfo.getChild()),t),this.setEmissiveTexture(e.emissiveTexture?t(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(t(e.emissiveTextureInfo.getChild()),t),this.setNormalTexture(e.normalTexture?t(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(t(e.normalTextureInfo.getChild()),t),this.setOcclusionTexture(e.occlusionTexture?t(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(t(e.occlusionTextureInfo.getChild()),t),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?t(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(t(e.metallicRoughnessTextureInfo.getChild()),t),this}equals(e){if(this.getAlphaMode()!==e.getAlphaMode()||this.getAlphaCutoff()!==e.getAlphaCutoff()||this.getDoubleSided()!==e.getDoubleSided()||!xr.eq(this.getBaseColorFactor(),e.getBaseColorFactor())||!xr.eq(this.getEmissiveFactor(),e.getEmissiveFactor())||this.getNormalScale()!==e.getNormalScale()||this.getOcclusionStrength()!==e.getOcclusionStrength()||this.getRoughnessFactor()!==e.getRoughnessFactor()||this.getMetallicFactor()!==e.getMetallicFactor()||(this.getBaseColorTexture()||e.getBaseColorTexture())&&(this.getBaseColorTexture()!==e.getBaseColorTexture()||this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))||(this.getEmissiveTexture()||e.getEmissiveTexture())&&(this.getEmissiveTexture()!==e.getEmissiveTexture()||this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))||(this.getNormalTexture()||e.getNormalTexture())&&(this.getNormalTexture()!==e.getNormalTexture()||this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))||(this.getOcclusionTexture()||e.getOcclusionTexture())&&(this.getOcclusionTexture()!==e.getOcclusionTexture()||this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))||(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture())&&(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture()||this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo())))return!1;const t=this.listExtensions(),r=e.listExtensions();if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==r[o])return!1;return!0}dispose(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),super.dispose()}getDoubleSided(){return this.X}setDoubleSided(e){return this.X=e,this}getAlpha(){return this.tt[3]}setAlpha(e){return this.tt[3]=e,this}getAlphaMode(){return this.Z}setAlphaMode(e){return this.Z=e,this}getAlphaCutoff(){return this.K}setAlphaCutoff(e){return this.K=e,this}getBaseColorFactor(){return this.tt}setBaseColorFactor(e){return this.tt=e,this}getBaseColorHex(){return bg.factorToHex(this.tt)}setBaseColorHex(e){return bg.hexToFactor(e,this.tt),this}getBaseColorTexture(){return this.baseColorTexture?this.baseColorTexture.getChild():null}getBaseColorTextureInfo(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}setBaseColorTexture(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",Ag|Cg|Rg|gz,this,e),this}getEmissiveFactor(){return this.st}setEmissiveFactor(e){return this.st=e,this}getEmissiveHex(){return bg.factorToHex(this.st)}setEmissiveHex(e){return bg.hexToFactor(e,this.st),this}getEmissiveTexture(){return this.emissiveTexture?this.emissiveTexture.getChild():null}getEmissiveTextureInfo(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}setEmissiveTexture(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",Ag|Cg|Rg,this,e),this}getNormalScale(){return this.et}setNormalScale(e){return this.et=e,this}getNormalTexture(){return this.normalTexture?this.normalTexture.getChild():null}getNormalTextureInfo(){return this.normalTexture?this.normalTextureInfo.getChild():null}setNormalTexture(e){return this.normalTexture=this.graph.linkTexture("normalTexture",Ag|Cg|Rg,this,e),this}getOcclusionStrength(){return this.it}setOcclusionStrength(e){return this.it=e,this}getOcclusionTexture(){return this.occlusionTexture?this.occlusionTexture.getChild():null}getOcclusionTextureInfo(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}setOcclusionTexture(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",Ag,this,e),this}getRoughnessFactor(){return this.rt}setRoughnessFactor(e){return this.rt=e,this}getMetallicFactor(){return this.nt}setMetallicFactor(e){return this.nt=e,this}getMetallicRoughnessTexture(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}getMetallicRoughnessTextureInfo(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}setMetallicRoughnessTexture(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",Cg|Rg,this,e),this}}Hr.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},$t([Hn],Hr.prototype,"baseColorTexture",void 0),$t([Hn],Hr.prototype,"baseColorTextureInfo",void 0),$t([Hn],Hr.prototype,"emissiveTexture",void 0),$t([Hn],Hr.prototype,"emissiveTextureInfo",void 0),$t([Hn],Hr.prototype,"normalTexture",void 0),$t([Hn],Hr.prototype,"normalTextureInfo",void 0),$t([Hn],Hr.prototype,"occlusionTexture",void 0),$t([Hn],Hr.prototype,"occlusionTextureInfo",void 0),$t([Hn],Hr.prototype,"metallicRoughnessTexture",void 0),$t([Hn],Hr.prototype,"metallicRoughnessTextureInfo",void 0);class h1 extends zi{constructor(...e){super(...e),this.propertyType=ln.MESH,this.ht=[],this.primitives=[]}copy(e,t=Gn){return super.copy(e,t),this.ht=[...e.ht],this.clearGraphChildList(this.primitives),e.primitives.forEach(r=>this.addPrimitive(t(r.getChild()))),this}addPrimitive(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}removePrimitive(e){return this.removeGraphChild(this.primitives,e)}listPrimitives(){return this.primitives.map(e=>e.getChild())}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}}$t([dr],h1.prototype,"primitives",void 0);class pa extends zi{constructor(...e){super(...e),this.propertyType=ln.NODE,this.ot=[0,0,0],this.ut=[0,0,0,1],this.ct=[1,1,1],this.ht=[],this.i=null,this.camera=null,this.mesh=null,this.skin=null,this.children=[]}copy(e,t=Gn){return super.copy(e,t),this.ot=[...e.ot],this.ut=[...e.ut],this.ct=[...e.ct],this.ht=[...e.ht],this.setCamera(e.camera?t(e.camera.getChild()):null),this.setMesh(e.mesh?t(e.mesh.getChild()):null),this.setSkin(e.skin?t(e.skin.getChild()):null),t!==Gn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}getTranslation(){return this.ot}getRotation(){return this.ut}getScale(){return this.ct}setTranslation(e){return this.ot=e,this}setRotation(e){return this.ut=e,this}setScale(e){return this.ct=e,this}getMatrix(){return xr.compose(this.ot,this.ut,this.ct,[])}setMatrix(e){return xr.decompose(e,this.ot,this.ut,this.ct),this}getWorldTranslation(){const e=[0,0,0];return xr.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return xr.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return xr.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let o=this;o instanceof pa;o=o.i)e.push(o);let t;const r=e.pop().getMatrix();for(;t=e.pop();)az(r,r,t.getMatrix());return r}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}getParent(){return this.i}getMesh(){return this.mesh?this.mesh.getChild():null}setMesh(e){return this.mesh=this.graph.link("mesh",this,e),this}getCamera(){return this.camera?this.camera.getChild():null}setCamera(e){return this.camera=this.graph.link("camera",this,e),this}getSkin(){return this.skin?this.skin.getChild():null}setSkin(e){return this.skin=this.graph.link("skin",this,e),this}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}$t([Hn],pa.prototype,"camera",void 0),$t([Hn],pa.prototype,"mesh",void 0),$t([Hn],pa.prototype,"skin",void 0),$t([dr],pa.prototype,"children",void 0);class ma extends zi{constructor(...e){super(...e),this.propertyType=ln.PRIMITIVE,this.at=ma.Mode.TRIANGLES,this.material=null,this.indices=null,this.attributes=[],this.targets=[]}copy(e,t=Gn){return super.copy(e,t),this.at=e.at,this.setIndices(e.indices?t(e.indices.getChild()):null),this.setMaterial(e.material?t(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this.clearGraphChildList(this.targets),e.targets.forEach(r=>this.addTarget(t(r.getChild()))),this}getIndices(){return this.indices?this.indices.getChild():null}setIndices(e){return this.indices=this.graph.linkIndex("indices",this,e),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}getMaterial(){return this.material?this.material.getChild():null}setMaterial(e){return this.material=this.graph.link("material",this,e),this}getMode(){return this.at}setMode(e){return this.at=e,this}listTargets(){return this.targets.map(e=>e.getChild())}addTarget(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}removeTarget(e){return this.removeGraphChild(this.targets,e)}}ma.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},$t([Hn],ma.prototype,"material",void 0),$t([Hn],ma.prototype,"indices",void 0),$t([dr],ma.prototype,"attributes",void 0),$t([dr],ma.prototype,"targets",void 0);class QA extends kc{constructor(...e){super(...e),this.propertyType=ln.PRIMITIVE_TARGET,this.attributes=[]}copy(e,t=Gn){return super.copy(e,t),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(r=>{this.setAttribute(r,t(e.getAttribute(r)))}),this}getAttribute(e){const t=this.attributes.find(r=>r.semantic===e);return t?t.getChild():null}setAttribute(e,t){const r=this.getAttribute(e);if(r&&this.removeGraphChild(this.attributes,r),!t)return this;const o=this.graph.linkAttribute(e,this,t);return o.semantic=e,this.addGraphChild(this.attributes,o)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}}$t([dr],QA.prototype,"attributes",void 0);class d1 extends zi{constructor(...e){super(...e),this.propertyType=ln.SCENE,this.children=[]}copy(e,t=Gn){return super.copy(e,t),t!==Gn&&(this.clearGraphChildList(this.children),e.children.forEach(r=>this.addChild(t(r.getChild())))),this}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}$t([dr],d1.prototype,"children",void 0);class jh extends zi{constructor(...e){super(...e),this.propertyType=ln.SKIN,this.skeleton=null,this.inverseBindMatrices=null,this.joints=[]}copy(e,t=Gn){return super.copy(e,t),this.setSkeleton(e.skeleton?t(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?t(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach(r=>this.addJoint(t(r.getChild()))),this}getSkeleton(){return this.skeleton?this.skeleton.getChild():null}setSkeleton(e){return this.skeleton=this.graph.link("skeleton",this,e),this}getInverseBindMatrices(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}setInverseBindMatrices(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}addJoint(e){const t=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,t)}removeJoint(e){return this.removeGraphChild(this.joints,e)}listJoints(){return this.joints.map(e=>e.getChild())}}$t([Hn],jh.prototype,"skeleton",void 0),$t([Hn],jh.prototype,"inverseBindMatrices",void 0),$t([dr],jh.prototype,"joints",void 0);class JA extends zi{constructor(...e){super(...e),this.propertyType=ln.TEXTURE,this.lt=null,this.ft="",this.P=""}copy(e,t=Gn){return super.copy(e,t),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}getMimeType(){return this.ft||Pc.extensionToMimeType(Sg.extension(this.P))}setMimeType(e){return this.ft=e,this}getURI(){return this.P}setURI(e){return this.P=e,this.ft=Pc.extensionToMimeType(Sg.extension(e)),this}getImage(){return this.lt}setImage(e){return this.lt=e,this}getSize(){return this.lt?Pc.getSize(this.lt,this.getMimeType()):null}}class Yi extends kc{constructor(e){super(e),this.propertyType=ln.ROOT,this.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},this.gt=new Set,this.defaultScene=null,this.accessors=[],this.animations=[],this.buffers=[],this.cameras=[],this.materials=[],this.meshes=[],this.nodes=[],this.scenes=[],this.skins=[],this.textures=[],e.on("clone",t=>this.wt(t))}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=Gn){if(super.copy(e,t),t===Gn)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach(r=>this.vt(t(r.getChild()))),e.animations.forEach(r=>this.Tt(t(r.getChild()))),e.buffers.forEach(r=>this.yt(t(r.getChild()))),e.cameras.forEach(r=>this.At(t(r.getChild()))),e.materials.forEach(r=>this.Et(t(r.getChild()))),e.meshes.forEach(r=>this.xt(t(r.getChild()))),e.nodes.forEach(r=>this.St(t(r.getChild()))),e.scenes.forEach(r=>this.Mt(t(r.getChild()))),e.skins.forEach(r=>this.It(t(r.getChild()))),e.textures.forEach(r=>this.bt(t(r.getChild()))),this.setDefaultScene(e.defaultScene?t(e.defaultScene.getChild()):null),this}wt(e){return e instanceof d1?this.Mt(e):e instanceof pa?this.St(e):e instanceof ql?this.At(e):e instanceof jh?this.It(e):e instanceof h1?this.xt(e):e instanceof Hr?this.Et(e):e instanceof JA?this.bt(e):e instanceof Tg?this.Tt(e):e instanceof zt?this.vt(e):e instanceof XA&&this.yt(e),this}getAsset(){return this.dt}listExtensionsUsed(){return Array.from(this.gt)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}Rt(e){return this.gt.add(e),this}Nt(e){return this.gt.delete(e),this}Mt(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}listScenes(){return this.scenes.map(e=>e.getChild())}setDefaultScene(e){return this.defaultScene=this.graph.link("scene",this,e),this}getDefaultScene(){return this.defaultScene?this.defaultScene.getChild():null}St(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}listNodes(){return this.nodes.map(e=>e.getChild())}At(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}listCameras(){return this.cameras.map(e=>e.getChild())}It(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}listSkins(){return this.skins.map(e=>e.getChild())}xt(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}listMeshes(){return this.meshes.map(e=>e.getChild())}Et(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}listMaterials(){return this.materials.map(e=>e.getChild())}bt(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}listTextures(){return this.textures.map(e=>e.getChild())}Tt(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}listAnimations(){return this.animations.map(e=>e.getChild())}vt(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}listAccessors(){return this.accessors.map(e=>e.getChild())}yt(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}listBuffers(){return this.buffers.map(e=>e.getChild())}}$t([Hn],Yi.prototype,"defaultScene",void 0),$t([dr],Yi.prototype,"accessors",void 0),$t([dr],Yi.prototype,"animations",void 0),$t([dr],Yi.prototype,"buffers",void 0),$t([dr],Yi.prototype,"cameras",void 0),$t([dr],Yi.prototype,"materials",void 0),$t([dr],Yi.prototype,"meshes",void 0),$t([dr],Yi.prototype,"nodes",void 0),$t([dr],Yi.prototype,"scenes",void 0),$t([dr],Yi.prototype,"skins",void 0),$t([dr],Yi.prototype,"textures",void 0);class p1{constructor(){this.Ct=new mz,this.Ot=new Yi(this.Ct),this._t=Ui.DEFAULT_INSTANCE}getRoot(){return this.Ot}getGraph(){return this.Ct}getLogger(){return this._t}setLogger(e){return this._t=e,this}clone(){return new p1().merge(this).setLogger(this._t)}merge(e){const t={};for(const c of e.getRoot().listExtensionsUsed()){const h=this.createExtension(c.constructor);c.isRequired()&&h.setRequired(!0),t[h.extensionName]=h}const r=new Set,o=new Map;r.add(e.Ot),o.set(e.Ot,this.Ot);for(const c of e.Ct.getLinks())for(const h of[c.getParent(),c.getChild()]){if(r.has(h))continue;let m;if(h.propertyType===ln.TEXTURE_INFO)m=h;else{const y=h.constructor;m=h instanceof YA?new y(this.Ct,t[h.extensionName]):new y(this.Ct)}o.set(h,m),r.add(h)}const l=c=>{const h=o.get(c);if(!h)throw new Error("Could resolve property.");return h};for(const c of r){const h=o.get(c);if(!h)throw new Error("Could resolve property.");h.copy(c,l)}return this}async transform(...e){const t=e.map(r=>r.name);for(const r of e)await r(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(r=>r.extensionName===t)||new e(this)}createScene(e=""){const t=new d1(this.Ct,e);return this.Ot.Mt(t),t}createNode(e=""){const t=new pa(this.Ct,e);return this.Ot.St(t),t}createCamera(e=""){const t=new ql(this.Ct,e);return this.Ot.At(t),t}createSkin(e=""){const t=new jh(this.Ct,e);return this.Ot.It(t),t}createMesh(e=""){const t=new h1(this.Ct,e);return this.Ot.xt(t),t}createPrimitive(){return new ma(this.Ct)}createPrimitiveTarget(e=""){return new QA(this.Ct,e)}createMaterial(e=""){const t=new Hr(this.Ct,e);return this.Ot.Et(t),t}createTexture(e=""){const t=new JA(this.Ct,e);return this.Ot.bt(t),t}createAnimation(e=""){const t=new Tg(this.Ct,e);return this.Ot.Tt(t),t}createAnimationChannel(e=""){return new Eg(this.Ct,e)}createAnimationSampler(e=""){return new jl(this.Ct,e)}createAccessor(e="",t=null){t||(t=this.getRoot().listBuffers()[0]);const r=new zt(this.Ct,e).setBuffer(t);return this.Ot.vt(r),r}createBuffer(e=""){const t=new XA(this.Ct,e);return this.Ot.yt(t),t}}function Ki(){return(Ki=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s}).apply(this,arguments)}class vz{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),t.texCoord!==void 0&&e.setTexCoord(t.texCoord);const r=this.jsonDoc.json.textures[t.index];if(r.sampler===void 0)return;const o=this.jsonDoc.json.samplers[r.sampler];o.magFilter!==void 0&&e.setMagFilter(o.magFilter),o.minFilter!==void 0&&e.setMinFilter(o.minFilter),o.wrapS!==void 0&&e.setWrapS(o.wrapS),o.wrapT!==void 0&&e.setWrapT(o.wrapT)}}const m1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},eC={logger:Ui.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function Lg(s,e){const t=e.bufferViews[s.bufferView],r=e.jsonDoc.json.bufferViews[s.bufferView],o=m1[s.componentType],l=zt.getElementSize(s.type),c=o.BYTES_PER_ELEMENT;if(r.byteStride!==void 0&&r.byteStride!==l*c)return function(m,y){const b=y.bufferViews[m.bufferView],M=y.jsonDoc.json.bufferViews[m.bufferView],C=m1[m.componentType],I=zt.getElementSize(m.type),O=C.BYTES_PER_ELEMENT,U=m.byteOffset||0,H=new C(m.count*I),P=new DataView(b.buffer,b.byteOffset,b.byteLength),A=M.byteStride;for(let F=0;F<m.count;F++)for(let L=0;L<I;L++){const B=U+F*A+L*O;let z;switch(m.componentType){case zt.ComponentType.FLOAT:z=P.getFloat32(B,!0);break;case zt.ComponentType.UNSIGNED_INT:z=P.getUint32(B,!0);break;case zt.ComponentType.UNSIGNED_SHORT:z=P.getUint16(B,!0);break;case zt.ComponentType.UNSIGNED_BYTE:z=P.getUint8(B);break;case zt.ComponentType.SHORT:z=P.getInt16(B,!0);break;case zt.ComponentType.BYTE:z=P.getInt8(B);break;default:throw new Error(`Unexpected componentType "${m.componentType}".`)}H[F*I+L]=z}return H}(s,e);const h=t.byteOffset+(s.byteOffset||0);return new o(t.buffer.slice(h,h+s.count*l*c))}var qh,Xh;(function(s){s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(qh||(qh={})),function(s){s.ARRAY_BUFFER="ARRAY_BUFFER",s.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",s.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",s.OTHER="OTHER"}(Xh||(Xh={}));class Zi{constructor(e,t,r){this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=e,this.jsonDoc=t,this.options=r;const o=e.getRoot(),l=o.listBuffers().length,c=o.listTextures().length;this.bufferURIGenerator=new tC(l>1,r.basename),this.imageURIGenerator=new tC(c>1,r.basename),this.logger=e.getLogger()}createTextureInfoDef(e,t){const r={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},o=JSON.stringify(r);this.samplerDefIndexMap.has(o)||(this.samplerDefIndexMap.set(o,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const l={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(o)},c=JSON.stringify(l);this.textureDefIndexMap.has(c)||(this.textureDefIndexMap.set(c,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(l));const h={index:this.textureDefIndexMap.get(c)};return t.getTexCoord()!==0&&(h.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,h),h}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some(r=>r.getName()==="POSITION"||r.getName()==="input")&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,r){if(this.options.format===$l.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const o=Pc.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,o),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.Lt.get(e);if(t)return t;for(const r of this.Bt.getGraph().listParentLinks(e)){if(r.getName()==="inverseBindMatrices")return Zi.BufferViewUsage.INVERSE_BIND_MATRICES;if(r instanceof KA)return Zi.BufferViewUsage.ARRAY_BUFFER;if(r instanceof ZA)return Zi.BufferViewUsage.ELEMENT_ARRAY_BUFFER}return Zi.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const r=this.Lt.get(e);if(r&&r!==t)throw new Error(`Accessor with usage "${r}" cannot be reused as "${t}".`);return this.Lt.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,r]of Array.from(this.Lt.entries()))e[r]=e[r]||[],e[r].push(t);return e}}Zi.BufferViewTarget=qh,Zi.BufferViewUsage=Xh,Zi.USAGE_TO_TARGET={[Xh.ARRAY_BUFFER]:qh.ARRAY_BUFFER,[Xh.ELEMENT_ARRAY_BUFFER]:qh.ELEMENT_ARRAY_BUFFER};class tC{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=t}createURI(e,t){return e.getURI()?e.getURI():this.multiple?`${this.basename}_${this.counter++}.${t}`:`${this.basename}.${t}`}}const{BufferViewUsage:g1}=Zi;var Ig;(function(s){s[s.JSON=1313821514]="JSON",s[s.BIN=5130562]="BIN"})(Ig||(Ig={}));class yz{constructor(){this._t=Ui.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=_g.INTERLEAVED}setLogger(e){return this._t=e,this}registerExtensions(e){for(const t of e)this.gt.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.Pt,e),this}setVertexLayout(e){return this.Ut=e,this}kt(e){function t(r){if(r.uri&&!(r.uri in e.resources)&&r.uri.match(/data:/)){const o=`__${dz()}.${Sg.extension(r.uri)}`;e.resources[o]=ci.createBufferFromDataURI(r.uri),r.uri=o}}(e.json.images||[]).forEach(r=>{if(r.bufferView===void 0&&r.uri===void 0)throw new Error("Missing resource URI or buffer view.");t(r)}),(e.json.buffers||[]).forEach(t)}readJSON(e){return e=this.Ft(e),this.kt(e),class{static read(t,r=eC){const o=Ki({},eC,r),{json:l}=t,c=new p1;this.validate(t,o);const h=new vz(t),m=l.asset,y=c.getRoot().getAsset();m.copyright&&(y.copyright=m.copyright),m.extras&&(y.extras=m.extras),l.extras!==void 0&&c.getRoot().setExtras(Ki({},l.extras));const b=l.extensionsUsed||[],M=l.extensionsRequired||[];for(const A of o.extensions)if(b.includes(A.EXTENSION_NAME)){const F=c.createExtension(A).setRequired(M.includes(A.EXTENSION_NAME));for(const L of F.readDependencies)F.install(L,o.dependencies[L])}const C=l.buffers||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.BUFFER)).forEach(A=>A.preread(h,ln.BUFFER)),h.buffers=C.map(A=>{const F=c.createBuffer(A.name);return A.extras&&F.setExtras(A.extras),A.uri&&A.uri.indexOf("__")!==0&&F.setURI(A.uri),F}),h.bufferViewBuffers=(l.bufferViews||[]).map((A,F)=>{if(!h.bufferViews[F]){const L=t.json.buffers[A.buffer],B=new Uint8Array(L.uri?t.resources[L.uri]:t.resources["@glb.bin"],A.byteOffset||0,A.byteLength);h.bufferViews[F]=B}return h.buffers[A.buffer]}),h.accessors=(l.accessors||[]).map(A=>{const F=c.createAccessor(A.name,h.bufferViewBuffers[A.bufferView]).setType(A.type);if(A.extras&&F.setExtras(A.extras),A.normalized!==void 0&&F.setNormalized(A.normalized),A.bufferView===void 0&&!A.sparse)return F;let L;return L=A.sparse!==void 0?function(B,z){const q=m1[B.componentType],Z=zt.getElementSize(B.type);let ae;ae=B.bufferView!==void 0?Lg(B,z):new q(B.count*Z);const ce=B.sparse,ee=ce.count,ue=Ki({},B,ce.indices,{count:ee,type:"SCALAR"}),le=Ki({},B,ce.values,{count:ee}),w=Lg(ue,z),p=Lg(le,z);for(let J=0;J<ue.count;J++)for(let E=0;E<Z;E++)ae[w[J]*Z+E]=p[J*Z+E];return ae}(A,h):Lg(A,h),F.setArray(L),F});const I=l.images||[],O=l.textures||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.TEXTURE)).forEach(A=>A.preread(h,ln.TEXTURE)),h.textures=I.map(A=>{const F=c.createTexture(A.name);if(A.extras&&F.setExtras(A.extras),A.bufferView!==void 0){const L=l.bufferViews[A.bufferView],B=t.json.buffers[L.buffer],z=L.byteOffset||0,q=(B.uri?t.resources[B.uri]:t.resources["@glb.bin"]).slice(z,z+L.byteLength);F.setImage(q)}else A.uri!==void 0&&(F.setImage(t.resources[A.uri]),A.uri.indexOf("__")!==0&&F.setURI(A.uri));if(A.mimeType!==void 0)F.setMimeType(A.mimeType);else if(A.uri){const L=Sg.extension(A.uri);F.setMimeType(Pc.extensionToMimeType(L))}return F}),h.materials=(l.materials||[]).map(A=>{const F=c.createMaterial(A.name);A.extras&&F.setExtras(A.extras),A.alphaMode!==void 0&&F.setAlphaMode(A.alphaMode),A.alphaCutoff!==void 0&&F.setAlphaCutoff(A.alphaCutoff),A.doubleSided!==void 0&&F.setDoubleSided(A.doubleSided);const L=A.pbrMetallicRoughness||{};if(L.baseColorFactor!==void 0&&F.setBaseColorFactor(L.baseColorFactor),A.emissiveFactor!==void 0&&F.setEmissiveFactor(A.emissiveFactor),L.metallicFactor!==void 0&&F.setMetallicFactor(L.metallicFactor),L.roughnessFactor!==void 0&&F.setRoughnessFactor(L.roughnessFactor),L.baseColorTexture!==void 0){const B=L.baseColorTexture;F.setBaseColorTexture(h.textures[O[B.index].source]),h.setTextureInfo(F.getBaseColorTextureInfo(),B)}if(A.emissiveTexture!==void 0){const B=A.emissiveTexture;F.setEmissiveTexture(h.textures[O[B.index].source]),h.setTextureInfo(F.getEmissiveTextureInfo(),B)}if(A.normalTexture!==void 0){const B=A.normalTexture;F.setNormalTexture(h.textures[O[B.index].source]),h.setTextureInfo(F.getNormalTextureInfo(),B),A.normalTexture.scale!==void 0&&F.setNormalScale(A.normalTexture.scale)}if(A.occlusionTexture!==void 0){const B=A.occlusionTexture;F.setOcclusionTexture(h.textures[O[B.index].source]),h.setTextureInfo(F.getOcclusionTextureInfo(),B),A.occlusionTexture.strength!==void 0&&F.setOcclusionStrength(A.occlusionTexture.strength)}if(L.metallicRoughnessTexture!==void 0){const B=L.metallicRoughnessTexture;F.setMetallicRoughnessTexture(h.textures[O[B.index].source]),h.setTextureInfo(F.getMetallicRoughnessTextureInfo(),B)}return F});const U=l.meshes||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.PRIMITIVE)).forEach(A=>A.preread(h,ln.PRIMITIVE)),h.meshes=U.map(A=>{const F=c.createMesh(A.name);return A.extras&&F.setExtras(A.extras),A.weights!==void 0&&F.setWeights(A.weights),(A.primitives||[]).forEach(L=>{const B=c.createPrimitive();L.extras&&B.setExtras(L.extras),L.material!==void 0&&B.setMaterial(h.materials[L.material]),L.mode!==void 0&&B.setMode(L.mode);for(const[q,Z]of Object.entries(L.attributes||{}))B.setAttribute(q,h.accessors[Z]);L.indices!==void 0&&B.setIndices(h.accessors[L.indices]);const z=A.extras&&A.extras.targetNames||[];(L.targets||[]).forEach((q,Z)=>{const ae=z[Z]||Z.toString(),ce=c.createPrimitiveTarget(ae);for(const[ee,ue]of Object.entries(q))ce.setAttribute(ee,h.accessors[ue]);B.addTarget(ce)}),F.addPrimitive(B)}),F}),h.cameras=(l.cameras||[]).map(A=>{const F=c.createCamera(A.name).setType(A.type);if(A.extras&&F.setExtras(A.extras),A.type===ql.Type.PERSPECTIVE){const L=A.perspective;F.setYFov(L.yfov),F.setZNear(L.znear),L.zfar!==void 0&&F.setZFar(L.zfar),L.aspectRatio!==void 0&&F.setAspectRatio(L.aspectRatio)}else{const L=A.orthographic;F.setZNear(L.znear).setZFar(L.zfar).setXMag(L.xmag).setYMag(L.ymag)}return F});const H=l.nodes||[];c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.NODE)).forEach(A=>A.preread(h,ln.NODE)),h.nodes=H.map(A=>{const F=c.createNode(A.name);if(A.extras&&F.setExtras(A.extras),A.translation!==void 0&&F.setTranslation(A.translation),A.rotation!==void 0&&F.setRotation(A.rotation),A.scale!==void 0&&F.setScale(A.scale),A.matrix!==void 0){const L=[0,0,0],B=[0,0,0,1],z=[1,1,1];xr.decompose(A.matrix,L,B,z),F.setTranslation(L),F.setRotation(B),F.setScale(z)}return A.weights!==void 0&&F.setWeights(A.weights),F}),h.skins=(l.skins||[]).map(A=>{const F=c.createSkin(A.name);A.extras&&F.setExtras(A.extras),A.inverseBindMatrices!==void 0&&F.setInverseBindMatrices(h.accessors[A.inverseBindMatrices]),A.skeleton!==void 0&&F.setSkeleton(h.nodes[A.skeleton]);for(const L of A.joints)F.addJoint(h.nodes[L]);return F}),H.map((A,F)=>{const L=h.nodes[F];(A.children||[]).forEach(B=>L.addChild(h.nodes[B])),A.mesh!==void 0&&L.setMesh(h.meshes[A.mesh]),A.camera!==void 0&&L.setCamera(h.cameras[A.camera]),A.skin!==void 0&&L.setSkin(h.skins[A.skin])}),h.animations=(l.animations||[]).map(A=>{const F=c.createAnimation(A.name);A.extras&&F.setExtras(A.extras);const L=(A.samplers||[]).map(B=>{const z=c.createAnimationSampler().setInput(h.accessors[B.input]).setOutput(h.accessors[B.output]).setInterpolation(B.interpolation||jl.Interpolation.LINEAR);return B.extras&&z.setExtras(B.extras),F.addSampler(z),z});return(A.channels||[]).forEach(B=>{const z=c.createAnimationChannel().setSampler(L[B.sampler]).setTargetNode(h.nodes[B.target.node]).setTargetPath(B.target.path);B.extras&&z.setExtras(B.extras),F.addChannel(z)}),F});const P=l.scenes||[];return c.getRoot().listExtensionsUsed().filter(A=>A.prereadTypes.includes(ln.SCENE)).forEach(A=>A.preread(h,ln.SCENE)),h.scenes=P.map(A=>{const F=c.createScene(A.name);return A.extras&&F.setExtras(A.extras),(A.nodes||[]).map(L=>h.nodes[L]).forEach(L=>F.addChild(L)),F}),l.scene!==void 0&&c.getRoot().setDefaultScene(h.scenes[l.scene]),c.getRoot().listExtensionsUsed().forEach(A=>A.read(h)),c}static validate(t,r){const o=t.json;if(o.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${o.asset.version}".`);if(o.extensionsRequired){for(const l of o.extensionsRequired)if(!r.extensions.find(c=>c.EXTENSION_NAME===l))throw new Error(`Missing required extension, "${l}".`)}if(o.extensionsUsed)for(const l of o.extensionsUsed)r.extensions.find(c=>c.EXTENSION_NAME===l)||r.logger.warn(`Missing optional extension, "${l}".`)}}.read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}writeJSON(e,t={}){if(t.format===$l.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0\u20131 buffers.");return class{static write(r,o){const l=r.getRoot(),c={asset:Ki({generator:"glTF-Transform v1.2.4"},l.getAsset()),extras:Ki({},l.getExtras())},h={json:c,resources:{}},m=new Zi(r,h,o),y=o.logger||Ui.DEFAULT_INSTANCE,b=new Set(o.extensions.map(P=>P.EXTENSION_NAME)),M=r.getRoot().listExtensionsUsed().filter(P=>b.has(P.extensionName)),C=r.getRoot().listExtensionsRequired().filter(P=>b.has(P.extensionName));M.length<r.getRoot().listExtensionsUsed().length&&y.debug("Some extensions were not registered for I/O, and will not be written.");for(const P of M)for(const A of P.writeDependencies)P.install(A,o.dependencies[A]);function I(P,A,F,L){const B=[];let z=0;for(const Z of P){const ae=m.createAccessorDef(Z);ae.bufferView=c.bufferViews.length;const ce=ci.pad(Z.getArray().buffer);ae.byteOffset=z,z+=ce.byteLength,B.push(ce),m.accessorIndexMap.set(Z,c.accessors.length),c.accessors.push(ae)}const q={buffer:A,byteOffset:F,byteLength:ci.concat(B).byteLength};return L&&(q.target=L),c.bufferViews.push(q),{buffers:B,byteLength:z}}function O(P,A,F){const L=P[0].getCount();let B=0;for(const ae of P){const ce=m.createAccessorDef(ae);ce.bufferView=c.bufferViews.length,ce.byteOffset=B;const ee=ae.getElementSize(),ue=ae.getComponentSize();B+=ci.padNumber(ee*ue),m.accessorIndexMap.set(ae,c.accessors.length),c.accessors.push(ce)}const z=L*B,q=new ArrayBuffer(z),Z=new DataView(q);for(let ae=0;ae<L;ae++){let ce=0;for(const ee of P){const ue=ee.getElementSize(),le=ee.getComponentSize(),w=ee.getComponentType(),p=ee.getArray();for(let J=0;J<ue;J++){const E=ae*B+ce+J*le,ge=p[ae*ue+J];switch(w){case zt.ComponentType.FLOAT:Z.setFloat32(E,ge,!0);break;case zt.ComponentType.BYTE:Z.setInt8(E,ge);break;case zt.ComponentType.SHORT:Z.setInt16(E,ge,!0);break;case zt.ComponentType.UNSIGNED_BYTE:Z.setUint8(E,ge);break;case zt.ComponentType.UNSIGNED_SHORT:Z.setUint16(E,ge,!0);break;case zt.ComponentType.UNSIGNED_INT:Z.setUint32(E,ge,!0);break;default:throw new Error("Unexpected component type: "+w)}}ce+=ci.padNumber(ue*le)}}return c.bufferViews.push({buffer:A,byteOffset:F,byteLength:z,byteStride:B,target:Zi.BufferViewTarget.ARRAY_BUFFER}),{byteLength:z,buffers:[q]}}const U=new Map;for(const P of r.getGraph().getLinks()){if(P.getParent()===l)continue;const A=P.getChild();if(A instanceof zt){const F=U.get(A)||[];F.push(P),U.set(A,F)}}if(c.accessors=[],c.bufferViews=[],c.samplers=[],c.textures=[],c.images=l.listTextures().map((P,A)=>{const F=m.createPropertyDef(P);P.getMimeType()&&(F.mimeType=P.getMimeType());const L=P.getImage();return L&&m.createImageData(F,L,P),m.imageIndexMap.set(P,A),F}),M.filter(P=>P.prewriteTypes.includes(ln.ACCESSOR)).forEach(P=>P.prewrite(m,ln.ACCESSOR)),l.listAccessors().forEach(P=>{const A=m.accessorUsageGroupedByParent,F=m.accessorParents;if(m.accessorIndexMap.has(P))return;const L=U.get(P)||[],B=m.getAccessorUsage(P);if(m.addAccessorToUsageGroup(P,B),A.has(B)){const z=L[0].getParent(),q=F.get(z)||new Set;q.add(P),F.set(z,q)}}),M.filter(P=>P.prewriteTypes.includes(ln.BUFFER)).forEach(P=>P.prewrite(m,ln.BUFFER)),(l.listAccessors().length>0||l.listTextures().length>0||m.otherBufferViews.size>0)&&l.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");c.buffers=[],l.listBuffers().forEach((P,A)=>{const F=m.createPropertyDef(P),L=m.accessorUsageGroupedByParent,B=m.accessorParents,z=P.listParents().filter(ue=>ue instanceof zt),q=new Set(z),Z=[],ae=c.buffers.length;let ce=0;const ee=m.listAccessorUsageGroups();for(const ue in ee)if(L.has(ue))for(const le of Array.from(B.values())){const w=Array.from(le).filter(p=>q.has(p)).filter(p=>m.getAccessorUsage(p)===ue);if(w.length)if(ue!==g1.ARRAY_BUFFER||o.vertexLayout===_g.INTERLEAVED){const p=ue===g1.ARRAY_BUFFER?O(w,ae,ce):I(w,ae,ce);ce+=p.byteLength,Z.push(...p.buffers)}else for(const p of w){const J=O([p],ae,ce);ce+=J.byteLength,Z.push(...J.buffers)}}else{const le=ee[ue].filter(p=>q.has(p));if(!le.length)continue;const w=I(le,ae,ce,ue===g1.ELEMENT_ARRAY_BUFFER?Zi.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);ce+=w.byteLength,Z.push(...w.buffers)}if(m.imageBufferViews.length&&A===0){for(let ue=0;ue<m.imageBufferViews.length;ue++)if(c.bufferViews[c.images[ue].bufferView].byteOffset=ce,ce+=m.imageBufferViews[ue].byteLength,Z.push(m.imageBufferViews[ue]),ce%8){const le=8-ce%8;ce+=le,Z.push(new ArrayBuffer(le))}}if(m.otherBufferViews.has(P))for(const ue of m.otherBufferViews.get(P))c.bufferViews.push({buffer:ae,byteOffset:ce,byteLength:ue.byteLength}),m.otherBufferViewsIndexMap.set(ue,c.bufferViews.length-1),ce+=ue.byteLength,Z.push(ue);if(ce){let ue;o.format===$l.GLB?ue="@glb.bin":(ue=m.bufferURIGenerator.createURI(P,"bin"),F.uri=ue),F.byteLength=ce,h.resources[ue]=ci.concat(Z)}c.buffers.push(F),m.bufferIndexMap.set(P,A)}),l.listAccessors().find(P=>!P.getBuffer())&&y.warn("Skipped writing one or more Accessors: no Buffer assigned."),c.materials=l.listMaterials().map((P,A)=>{const F=m.createPropertyDef(P);if(P.getAlphaMode()!==Hr.AlphaMode.OPAQUE&&(F.alphaMode=P.getAlphaMode()),P.getAlphaMode()===Hr.AlphaMode.MASK&&(F.alphaCutoff=P.getAlphaCutoff()),P.getDoubleSided()&&(F.doubleSided=!0),F.pbrMetallicRoughness={},xr.eq(P.getBaseColorFactor(),[1,1,1,1])||(F.pbrMetallicRoughness.baseColorFactor=P.getBaseColorFactor()),xr.eq(P.getEmissiveFactor(),[0,0,0])||(F.emissiveFactor=P.getEmissiveFactor()),P.getRoughnessFactor()!==1&&(F.pbrMetallicRoughness.roughnessFactor=P.getRoughnessFactor()),P.getMetallicFactor()!==1&&(F.pbrMetallicRoughness.metallicFactor=P.getMetallicFactor()),P.getBaseColorTexture()){const L=P.getBaseColorTexture(),B=P.getBaseColorTextureInfo();F.pbrMetallicRoughness.baseColorTexture=m.createTextureInfoDef(L,B)}if(P.getEmissiveTexture()){const L=P.getEmissiveTexture(),B=P.getEmissiveTextureInfo();F.emissiveTexture=m.createTextureInfoDef(L,B)}if(P.getNormalTexture()){const L=P.getNormalTexture(),B=P.getNormalTextureInfo(),z=m.createTextureInfoDef(L,B);P.getNormalScale()!==1&&(z.scale=P.getNormalScale()),F.normalTexture=z}if(P.getOcclusionTexture()){const L=P.getOcclusionTexture(),B=P.getOcclusionTextureInfo(),z=m.createTextureInfoDef(L,B);P.getOcclusionStrength()!==1&&(z.strength=P.getOcclusionStrength()),F.occlusionTexture=z}if(P.getMetallicRoughnessTexture()){const L=P.getMetallicRoughnessTexture(),B=P.getMetallicRoughnessTextureInfo();F.pbrMetallicRoughness.metallicRoughnessTexture=m.createTextureInfoDef(L,B)}return m.materialIndexMap.set(P,A),F}),c.meshes=l.listMeshes().map((P,A)=>{const F=m.createPropertyDef(P);let L=null;return F.primitives=P.listPrimitives().map(B=>{const z={attributes:{}};z.mode=B.getMode();const q=B.getMaterial();q&&(z.material=m.materialIndexMap.get(q)),Object.keys(B.getExtras()).length&&(z.extras=B.getExtras());const Z=B.getIndices();Z&&(z.indices=m.accessorIndexMap.get(Z));for(const ae of B.listSemantics())z.attributes[ae]=m.accessorIndexMap.get(B.getAttribute(ae));for(const ae of B.listTargets()){const ce={};for(const ee of ae.listSemantics())ce[ee]=m.accessorIndexMap.get(ae.getAttribute(ee));z.targets=z.targets||[],z.targets.push(ce)}return B.listTargets().length&&!L&&(L=B.listTargets().map(ae=>ae.getName())),z}),P.getWeights().length&&(F.weights=P.getWeights()),L&&(F.extras=F.extras||{},F.extras.targetNames=L),m.meshIndexMap.set(P,A),F}),c.cameras=l.listCameras().map((P,A)=>{const F=m.createPropertyDef(P);if(F.type=P.getType(),F.type===ql.Type.PERSPECTIVE){F.perspective={znear:P.getZNear(),zfar:P.getZFar(),yfov:P.getYFov()};const L=P.getAspectRatio();L!==null&&(F.perspective.aspectRatio=L)}else F.orthographic={znear:P.getZNear(),zfar:P.getZFar(),xmag:P.getXMag(),ymag:P.getYMag()};return m.cameraIndexMap.set(P,A),F}),c.nodes=l.listNodes().map((P,A)=>{const F=m.createPropertyDef(P);return xr.eq(P.getTranslation(),[0,0,0])||(F.translation=P.getTranslation()),xr.eq(P.getRotation(),[0,0,0,1])||(F.rotation=P.getRotation()),xr.eq(P.getScale(),[1,1,1])||(F.scale=P.getScale()),P.getWeights().length&&(F.weights=P.getWeights()),m.nodeIndexMap.set(P,A),F}),c.skins=l.listSkins().map((P,A)=>{const F=m.createPropertyDef(P),L=P.getInverseBindMatrices();L&&(F.inverseBindMatrices=m.accessorIndexMap.get(L));const B=P.getSkeleton();return B&&(F.skeleton=m.nodeIndexMap.get(B)),F.joints=P.listJoints().map(z=>m.nodeIndexMap.get(z)),m.skinIndexMap.set(P,A),F}),l.listNodes().forEach((P,A)=>{const F=c.nodes[A],L=P.getMesh();L&&(F.mesh=m.meshIndexMap.get(L));const B=P.getCamera();B&&(F.camera=m.cameraIndexMap.get(B));const z=P.getSkin();z&&(F.skin=m.skinIndexMap.get(z)),P.listChildren().length>0&&(F.children=P.listChildren().map(q=>m.nodeIndexMap.get(q)))}),c.animations=l.listAnimations().map(P=>{const A=m.createPropertyDef(P),F=new Map;return A.samplers=P.listSamplers().map((L,B)=>{const z=m.createPropertyDef(L);return z.input=m.accessorIndexMap.get(L.getInput()),z.output=m.accessorIndexMap.get(L.getOutput()),z.interpolation=L.getInterpolation(),F.set(L,B),z}),A.channels=P.listChannels().map(L=>{const B=m.createPropertyDef(L);return B.sampler=F.get(L.getSampler()),B.target={node:m.nodeIndexMap.get(L.getTargetNode()),path:L.getTargetPath()},B}),A}),c.scenes=l.listScenes().map(P=>{const A=m.createPropertyDef(P);return A.nodes=P.listChildren().map(F=>m.nodeIndexMap.get(F)),A});const H=l.getDefaultScene();return H&&(c.scene=l.listScenes().indexOf(H)),c.extensionsUsed=M.map(P=>P.extensionName),c.extensionsRequired=C.map(P=>P.extensionName),M.forEach(P=>P.write(m)),function(P){const A=[];for(const F in P){const L=P[F];(Array.isArray(L)&&L.length===0||L===null||L===""||L&&typeof L=="object"&&Object.keys(L).length===0)&&A.push(F)}for(const F of A)delete P[F]}(c),h}}.write(e,{format:t.format||$l.GLTF,basename:t.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:Ki({},this.Pt),extensions:Array.from(this.gt)})}Ft(e){const{images:t,buffers:r}=e.json;return e={json:Ki({},e.json),resources:Ki({},e.resources)},t&&(e.json.images=t.map(o=>Ki({},o))),r&&(e.json.buffers=r.map(o=>Ki({},o))),e}binaryToJSON(e){const t=this.Gt(e);this.kt(t);const r=t.json;if(r.buffers&&r.buffers.some(o=>function(l,c){return c.uri!==void 0&&!(c.uri in l.resources)}(t,o)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some(o=>function(l,c){return c.uri!==void 0&&!(c.uri in l.resources)&&c.bufferView===void 0}(t,o)))throw new Error("Cannot resolve external images with binaryToJSON().");return t}Gt(e){const t=new Uint32Array(e,0,3);if(t[0]!==1179937895)throw new Error("Invalid glTF asset.");if(t[1]!==2)throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const r=new Uint32Array(e,12,2);if(r[1]!==Ig.JSON)throw new Error("Missing required GLB JSON chunk.");const o=r[0],l=ci.decodeText(e.slice(20,20+o)),c=JSON.parse(l),h=20+o;if(e.byteLength<=h)return{json:c,resources:{}};const m=new Uint32Array(e,h,2);if(m[1]!==Ig.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:c,resources:{"@glb.bin":e.slice(h+8,h+8+m[0])}}}readBinary(e){return this.readJSON(this.binaryToJSON(e))}writeBinary(e){const{json:t,resources:r}=this.writeJSON(e,{format:$l.GLB}),o=new Uint32Array([1179937895,2,12]),l=JSON.stringify(t),c=ci.pad(ci.encodeText(l),32),h=new Uint32Array([c.byteLength,1313821514]).buffer,m=ci.concat([h,c]);o[o.length-1]+=m.byteLength;const y=Object.values(r)[0];if(!y||!y.byteLength)return ci.concat([o.buffer,m]);const b=ci.pad(y,0),M=new Uint32Array([b.byteLength,5130562]).buffer,C=ci.concat([M,b]);return o[o.length-1]+=C.byteLength,ci.concat([o.buffer,m,C])}}const xz={};class NG extends yz{constructor(e=xz){super(),this.qt=void 0,this.qt=e}read(e){return this.readAsJSON(e).then(t=>this.readJSON(t))}readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||new URL(e,window.location.href).pathname.match(/\.glb$/)?this.Jt(e):this.zt(e)}Wt(e,t){const r=[...e.json.images||[],...e.json.buffers||[]].map(o=>{const l=o.uri;return!l||l.match(/data:/)?Promise.resolve():fetch(function(c,h){if(!function(b){return!/^(?:[a-zA-Z]+:)?\//.test(b)}(h))return h;const m=c.split("/"),y=h.split("/");m.pop();for(let b=0;b<y.length;b++)y[b]!=="."&&(y[b]===".."?m.pop():m.push(y[b]));return m.join("/")}(t,l),this.qt).then(c=>c.arrayBuffer()).then(c=>{e.resources[l]=c})});return Promise.all(r).then(()=>{})}zt(e){var t=this;const r={json:{},resources:{}};return fetch(e,this.qt).then(o=>o.json()).then(async function(o){return r.json=o,await t.Wt(r,nC(e)),t.kt(r),r})}Jt(e){var t=this;return fetch(e,this.qt).then(r=>r.arrayBuffer()).then(async function(r){const o=t.Gt(r);return await t.Wt(o,nC(e)),t.kt(o),o})}}function nC(s){const e=s.lastIndexOf("/");return e===-1?"./":s.substr(0,e+1)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var rC={},v1=function(s){return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))},iC=function(s){return new Worker(s)};try{URL.revokeObjectURL(v1(""))}catch{v1=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},iC=function(e){return new Worker(e,{type:"module"})}}var _z=function(s,e,t,r,o){var l=iC(rC[e]||(rC[e]=v1(s)));return l.onerror=function(c){return o(c.error,null)},l.onmessage=function(c){return o(null,c.data)},l.postMessage(t,r),l},sn=Uint8Array,Lr=Uint16Array,So=Uint32Array,Oc=new sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dc=new sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yh=new sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sC=function(s,e){for(var t=new Lr(31),r=0;r<31;++r)t[r]=e+=1<<s[r-1];for(var o=new So(t[30]),r=1;r<30;++r)for(var l=t[r];l<t[r+1];++l)o[l]=l-t[r]<<5|r;return[t,o]},oC=sC(Oc,2),y1=oC[0],Pg=oC[1];y1[28]=258,Pg[258]=28;var aC=sC(Dc,0),lC=aC[0],x1=aC[1],Kh=new Lr(32768);for(var In=0;In<32768;++In){var ga=(In&43690)>>>1|(In&21845)<<1;ga=(ga&52428)>>>2|(ga&13107)<<2,ga=(ga&61680)>>>4|(ga&3855)<<4,Kh[In]=((ga&65280)>>>8|(ga&255)<<8)>>>1}var Qi=function(s,e,t){for(var r=s.length,o=0,l=new Lr(e);o<r;++o)++l[s[o]-1];var c=new Lr(e);for(o=0;o<e;++o)c[o]=c[o-1]+l[o-1]<<1;var h;if(t){h=new Lr(1<<e);var m=15-e;for(o=0;o<r;++o)if(s[o])for(var y=o<<4|s[o],b=e-s[o],M=c[s[o]-1]++<<b,C=M|(1<<b)-1;M<=C;++M)h[Kh[M]>>>m]=y}else for(h=new Lr(r),o=0;o<r;++o)s[o]&&(h[o]=Kh[c[s[o]-1]++]>>>15-s[o]);return h},Mo=new sn(288);for(var In=0;In<144;++In)Mo[In]=8;for(var In=144;In<256;++In)Mo[In]=9;for(var In=256;In<280;++In)Mo[In]=7;for(var In=280;In<288;++In)Mo[In]=8;var Nc=new sn(32);for(var In=0;In<32;++In)Nc[In]=5;var uC=Qi(Mo,9,0),cC=Qi(Mo,9,1),fC=Qi(Nc,5,0),hC=Qi(Nc,5,1),kg=function(s){for(var e=s[0],t=1;t<s.length;++t)s[t]>e&&(e=s[t]);return e},Ji=function(s,e,t){var r=e/8|0;return(s[r]|s[r+1]<<8)>>(e&7)&t},Og=function(s,e){var t=e/8|0;return(s[t]|s[t+1]<<8|s[t+2]<<16)>>(e&7)},Zh=function(s){return(s/8|0)+(s&7&&1)},es=function(s,e,t){(e==null||e<0)&&(e=0),(t==null||t>s.length)&&(t=s.length);var r=new(s instanceof Lr?Lr:s instanceof So?So:sn)(t-e);return r.set(s.subarray(e,t)),r},Qh=function(s,e,t){var r=s.length;if(!r||t&&!t.l&&r<5)return e||new sn(0);var o=!e||t,l=!t||t.i;t||(t={}),e||(e=new sn(r*3));var c=function(Ue){var Ce=e.length;if(Ue>Ce){var $e=new sn(Math.max(Ce*2,Ue));$e.set(e),e=$e}},h=t.f||0,m=t.p||0,y=t.b||0,b=t.l,M=t.d,C=t.m,I=t.n,O=r*8;do{if(!b){t.f=h=Ji(s,m,1);var U=Ji(s,m+1,3);if(m+=3,U)if(U==1)b=cC,M=hC,C=9,I=5;else if(U==2){var F=Ji(s,m,31)+257,L=Ji(s,m+10,15)+4,B=F+Ji(s,m+5,31)+1;m+=14;for(var z=new sn(B),q=new sn(19),Z=0;Z<L;++Z)q[Yh[Z]]=Ji(s,m+Z*3,7);m+=L*3;for(var ae=kg(q),ce=(1<<ae)-1,ee=Qi(q,ae,1),Z=0;Z<B;){var ue=ee[Ji(s,m,ce)];m+=ue&15;var H=ue>>>4;if(H<16)z[Z++]=H;else{var le=0,w=0;for(H==16?(w=3+Ji(s,m,3),m+=2,le=z[Z-1]):H==17?(w=3+Ji(s,m,7),m+=3):H==18&&(w=11+Ji(s,m,127),m+=7);w--;)z[Z++]=le}}var p=z.subarray(0,F),J=z.subarray(F);C=kg(p),I=kg(J),b=Qi(p,C,1),M=Qi(J,I,1)}else throw"invalid block type";else{var H=Zh(m)+4,P=s[H-4]|s[H-3]<<8,A=H+P;if(A>r){if(l)throw"unexpected EOF";break}o&&c(y+P),e.set(s.subarray(H,A),y),t.b=y+=P,t.p=m=A*8;continue}if(m>O){if(l)throw"unexpected EOF";break}}o&&c(y+131072);for(var E=(1<<C)-1,ge=(1<<I)-1,ke=m;;ke=m){var le=b[Og(s,m)&E],Se=le>>>4;if(m+=le&15,m>O){if(l)throw"unexpected EOF";break}if(!le)throw"invalid length/literal";if(Se<256)e[y++]=Se;else if(Se==256){ke=m,b=null;break}else{var de=Se-254;if(Se>264){var Z=Se-257,ye=Oc[Z];de=Ji(s,m,(1<<ye)-1)+y1[Z],m+=ye}var Re=M[Og(s,m)&ge],we=Re>>>4;if(!Re)throw"invalid distance";m+=Re&15;var J=lC[we];if(we>3){var ye=Dc[we];J+=Og(s,m)&(1<<ye)-1,m+=ye}if(m>O){if(l)throw"unexpected EOF";break}o&&c(y+131072);for(var be=y+de;y<be;y+=4)e[y]=e[y-J],e[y+1]=e[y+1-J],e[y+2]=e[y+2-J],e[y+3]=e[y+3-J];y=be}}t.l=b,t.p=ke,t.b=y,b&&(h=1,t.m=C,t.d=M,t.n=I)}while(!h);return y==e.length?e:es(e,0,y)},Gs=function(s,e,t){t<<=e&7;var r=e/8|0;s[r]|=t,s[r+1]|=t>>>8},Fc=function(s,e,t){t<<=e&7;var r=e/8|0;s[r]|=t,s[r+1]|=t>>>8,s[r+2]|=t>>>16},Dg=function(s,e){for(var t=[],r=0;r<s.length;++r)s[r]&&t.push({s:r,f:s[r]});var o=t.length,l=t.slice();if(!o)return[To,0];if(o==1){var c=new sn(t[0].s+1);return c[t[0].s]=1,[c,1]}t.sort(function(B,z){return B.f-z.f}),t.push({s:-1,f:25001});var h=t[0],m=t[1],y=0,b=1,M=2;for(t[0]={s:-1,f:h.f+m.f,l:h,r:m};b!=o-1;)h=t[t[y].f<t[M].f?y++:M++],m=t[y!=b&&t[y].f<t[M].f?y++:M++],t[b++]={s:-1,f:h.f+m.f,l:h,r:m};for(var C=l[0].s,r=1;r<o;++r)l[r].s>C&&(C=l[r].s);var I=new Lr(C+1),O=Ng(t[b-1],I,0);if(O>e){var r=0,U=0,H=O-e,P=1<<H;for(l.sort(function(z,q){return I[q.s]-I[z.s]||z.f-q.f});r<o;++r){var A=l[r].s;if(I[A]>e)U+=P-(1<<O-I[A]),I[A]=e;else break}for(U>>>=H;U>0;){var F=l[r].s;I[F]<e?U-=1<<e-I[F]++-1:++r}for(;r>=0&&U;--r){var L=l[r].s;I[L]==e&&(--I[L],++U)}O=e}return[new sn(I),O]},Ng=function(s,e,t){return s.s==-1?Math.max(Ng(s.l,e,t+1),Ng(s.r,e,t+1)):e[s.s]=t},_1=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new Lr(++e),r=0,o=s[0],l=1,c=function(m){t[r++]=m},h=1;h<=e;++h)if(s[h]==o&&h!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(o),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(o);l=1,o=s[h]}return[t.subarray(0,r),e]},Bc=function(s,e){for(var t=0,r=0;r<e.length;++r)t+=s[r]*e[r];return t},Jh=function(s,e,t){var r=t.length,o=Zh(e+2);s[o]=r&255,s[o+1]=r>>>8,s[o+2]=s[o]^255,s[o+3]=s[o+1]^255;for(var l=0;l<r;++l)s[o+l+4]=t[l];return(o+4+r)*8},w1=function(s,e,t,r,o,l,c,h,m,y,b){Gs(e,b++,t),++o[256];for(var M=Dg(o,15),C=M[0],I=M[1],O=Dg(l,15),U=O[0],H=O[1],P=_1(C),A=P[0],F=P[1],L=_1(U),B=L[0],z=L[1],q=new Lr(19),Z=0;Z<A.length;++Z)q[A[Z]&31]++;for(var Z=0;Z<B.length;++Z)q[B[Z]&31]++;for(var ae=Dg(q,7),ce=ae[0],ee=ae[1],ue=19;ue>4&&!ce[Yh[ue-1]];--ue);var le=y+5<<3,w=Bc(o,Mo)+Bc(l,Nc)+c,p=Bc(o,C)+Bc(l,U)+c+14+3*ue+Bc(q,ce)+(2*q[16]+3*q[17]+7*q[18]);if(le<=w&&le<=p)return Jh(e,b,s.subarray(m,m+y));var J,E,ge,ke;if(Gs(e,b,1+(p<w)),b+=2,p<w){J=Qi(C,I,0),E=C,ge=Qi(U,H,0),ke=U;var Se=Qi(ce,ee,0);Gs(e,b,F-257),Gs(e,b+5,z-1),Gs(e,b+10,ue-4),b+=14;for(var Z=0;Z<ue;++Z)Gs(e,b+3*Z,ce[Yh[Z]]);b+=3*ue;for(var de=[A,B],ye=0;ye<2;++ye)for(var Re=de[ye],Z=0;Z<Re.length;++Z){var we=Re[Z]&31;Gs(e,b,Se[we]),b+=ce[we],we>15&&(Gs(e,b,Re[Z]>>>5&127),b+=Re[Z]>>>12)}}else J=uC,E=Mo,ge=fC,ke=Nc;for(var Z=0;Z<h;++Z)if(r[Z]>255){var we=r[Z]>>>18&31;Fc(e,b,J[we+257]),b+=E[we+257],we>7&&(Gs(e,b,r[Z]>>>23&31),b+=Oc[we]);var be=r[Z]&31;Fc(e,b,ge[be]),b+=ke[be],be>3&&(Fc(e,b,r[Z]>>>5&8191),b+=Dc[be])}else Fc(e,b,J[r[Z]]),b+=E[r[Z]];return Fc(e,b,J[256]),b+E[256]},dC=new So([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),To=new sn(0),pC=function(s,e,t,r,o,l){var c=s.length,h=new sn(r+c+5*(1+Math.ceil(c/7e3))+o),m=h.subarray(r,h.length-o),y=0;if(!e||c<8)for(var b=0;b<=c;b+=65535){var M=b+65535;M<c?y=Jh(m,y,s.subarray(b,M)):(m[b]=l,y=Jh(m,y,s.subarray(b,c)))}else{for(var C=dC[e-1],I=C>>>13,O=C&8191,U=(1<<t)-1,H=new Lr(32768),P=new Lr(U+1),A=Math.ceil(t/3),F=2*A,L=function(Ye){return(s[Ye]^s[Ye+1]<<A^s[Ye+2]<<F)&U},B=new So(25e3),z=new Lr(288),q=new Lr(32),Z=0,ae=0,b=0,ce=0,ee=0,ue=0;b<c;++b){var le=L(b),w=b&32767,p=P[le];if(H[w]=p,P[le]=w,ee<=b){var J=c-b;if((Z>7e3||ce>24576)&&J>423){y=w1(s,m,0,B,z,q,ae,ce,ue,b-ue,y),ce=Z=ae=0,ue=b;for(var E=0;E<286;++E)z[E]=0;for(var E=0;E<30;++E)q[E]=0}var ge=2,ke=0,Se=O,de=w-p&32767;if(J>2&&le==L(b-de))for(var ye=Math.min(I,J)-1,Re=Math.min(32767,b),we=Math.min(258,J);de<=Re&&--Se&&w!=p;){if(s[b+ge]==s[b+ge-de]){for(var be=0;be<we&&s[b+be]==s[b+be-de];++be);if(be>ge){if(ge=be,ke=de,be>ye)break;for(var Ue=Math.min(de,be-2),Ce=0,E=0;E<Ue;++E){var $e=b-de+E+32768&32767,ze=H[$e],W=$e-ze+32768&32767;W>Ce&&(Ce=W,p=$e)}}}w=p,p=H[w],de+=w-p+32768&32767}if(ke){B[ce++]=268435456|Pg[ge]<<18|x1[ke];var Ve=Pg[ge]&31,Le=x1[ke]&31;ae+=Oc[Ve]+Dc[Le],++z[257+Ve],++q[Le],ee=b+ge,++Z}else B[ce++]=s[b],++z[s[b]]}}y=w1(s,m,l,B,z,q,ae,ce,ue,b-ue,y),!l&&y&7&&(y=Jh(m,y+1,To))}return es(h,0,r+Zh(y)+o)},mC=function(){for(var s=new So(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;s[e]=t}return s}(),Uc=function(){var s=-1;return{p:function(e){for(var t=s,r=0;r<e.length;++r)t=mC[t&255^e[r]]^t>>>8;s=t},d:function(){return~s}}},b1=function(){var s=1,e=0;return{p:function(t){for(var r=s,o=e,l=t.length,c=0;c!=l;){for(var h=Math.min(c+2655,l);c<h;++c)o+=r+=t[c];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}s=r,e=o},d:function(){return s%=65521,e%=65521,(s&255)<<24|s>>>8<<16|(e&255)<<8|e>>>8}}},Xl=function(s,e,t,r,o){return pC(s,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):12+e.mem,t,r,!o)},ed=function(s,e){var t={};for(var r in s)t[r]=s[r];for(var r in e)t[r]=e[r];return t},gC=function(s,e,t){for(var r=s(),o=s.toString(),l=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),c=0;c<r.length;++c){var h=r[c],m=l[c];if(typeof h=="function"){e+=";"+m+"=";var y=h.toString();if(h.prototype)if(y.indexOf("[native code]")!=-1){var b=y.indexOf(" ",8)+1;e+=y.slice(b,y.indexOf("(",b))}else{e+=y;for(var M in h.prototype)e+=";"+m+".prototype."+M+"="+h.prototype[M].toString()}else e+=y}else t[m]=h}return[e,t]},Fg=[],wz=function(s){var e=[];for(var t in s)(s[t]instanceof sn||s[t]instanceof Lr||s[t]instanceof So)&&e.push((s[t]=new s[t].constructor(s[t])).buffer);return e},vC=function(s,e,t,r){var o;if(!Fg[t]){for(var l="",c={},h=s.length-1,m=0;m<h;++m)o=gC(s[m],l,c),l=o[0],c=o[1];Fg[t]=gC(s[h],l,c)}var y=ed({},Fg[t][1]);return _z(Fg[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,y,wz(y),r)},zc=function(){return[sn,Lr,So,Oc,Dc,Yh,y1,lC,cC,hC,Kh,Qi,kg,Ji,Og,Zh,es,Qh,Wc,va,S1]},Hc=function(){return[sn,Lr,So,Oc,Dc,Yh,Pg,x1,uC,Mo,fC,Nc,Kh,dC,To,Qi,Gs,Fc,Dg,Ng,_1,Bc,Jh,w1,Zh,es,pC,Xl,td,va]},yC=function(){return[T1,A1,pn,Uc,mC]},xC=function(){return[E1,bC]},_C=function(){return[C1,pn,b1]},wC=function(){return[SC]},va=function(s){return postMessage(s,[s.buffer])},S1=function(s){return s&&s.size&&new sn(s.size)},Gc=function(s,e,t,r,o,l){var c=vC(t,r,o,function(h,m){c.terminate(),l(h,m)});return c.postMessage([s,e],e.consume?[s.buffer]:[]),function(){c.terminate()}},ts=function(s){return s.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return s.push(e.data[0],e.data[1])}},Vc=function(s,e,t,r,o){var l,c=vC(s,r,o,function(h,m){h?(c.terminate(),e.ondata.call(e,h)):(m[1]&&c.terminate(),e.ondata.call(e,h,m[0],m[1]))});c.postMessage(t),e.push=function(h,m){if(l)throw"stream finished";if(!e.ondata)throw"no stream handler";c.postMessage([h,l=m],[h.buffer])},e.terminate=function(){c.terminate()}},fi=function(s,e){return s[e]|s[e+1]<<8},sr=function(s,e){return(s[e]|s[e+1]<<8|s[e+2]<<16|s[e+3]<<24)>>>0},M1=function(s,e){return sr(s,e)+sr(s,e+4)*4294967296},pn=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8},T1=function(s,e){var t=e.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=e.level<2?4:e.level==9?2:0,s[9]=3,e.mtime!=0&&pn(s,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){s[3]=8;for(var r=0;r<=t.length;++r)s[r+10]=t.charCodeAt(r)}},E1=function(s){if(s[0]!=31||s[1]!=139||s[2]!=8)throw"invalid gzip data";var e=s[3],t=10;e&4&&(t+=s[10]|(s[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!s[t++]);return t+(e&2)},bC=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},A1=function(s){return 10+(s.filename&&s.filename.length+1||0)},C1=function(s,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;s[0]=120,s[1]=r<<6|(r?32-2*r:1)},SC=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function R1(s,e){return!e&&typeof s=="function"&&(e=s,s={}),this.ondata=e,s}var Vs=function(){function s(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return s.prototype.p=function(e,t){this.ondata(Xl(e,this.o,0,0,!t),t)},s.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},s}(),MC=function(){function s(e,t){Vc([Hc,function(){return[ts,Vs]}],this,R1.call(this,e,t),function(r){var o=new Vs(r.data);onmessage=ts(o)},6)}return s}();function TC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[Hc],function(r){return va(td(r.data[0],r.data[1]))},0,t)}function td(s,e){return Xl(s,e||{},0,0)}var Si=function(){function s(e){this.s={},this.p=new sn(0),this.ondata=e}return s.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new sn(t+e.length);r.set(this.p),r.set(e,t),this.p=r},s.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=Qh(this.p,this.o,this.s);this.ondata(es(r,t,this.s.b),this.d),this.o=es(r,this.s.b-32768),this.s.b=this.o.length,this.p=es(this.p,this.s.p/8|0),this.s.p&=7},s.prototype.push=function(e,t){this.e(e),this.c(t)},s}(),L1=function(){function s(e){this.ondata=e,Vc([zc,function(){return[ts,Si]}],this,0,function(){var t=new Si;onmessage=ts(t)},7)}return s}();function I1(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[zc],function(r){return va(Wc(r.data[0],S1(r.data[1])))},1,t)}function Wc(s,e){return Qh(s,e)}var Bg=function(){function s(e,t){this.c=Uc(),this.l=0,this.v=1,Vs.call(this,e,t)}return s.prototype.push=function(e,t){Vs.prototype.push.call(this,e,t)},s.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Xl(e,this.o,this.v&&A1(this.o),t&&8,!t);this.v&&(T1(r,this.o),this.v=0),t&&(pn(r,r.length-8,this.c.d()),pn(r,r.length-4,this.l)),this.ondata(r,t)},s}(),EC=function(){function s(e,t){Vc([Hc,yC,function(){return[ts,Vs,Bg]}],this,R1.call(this,e,t),function(r){var o=new Bg(r.data);onmessage=ts(o)},8)}return s}();function AC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[Hc,yC,function(){return[Ug]}],function(r){return va(Ug(r.data[0],r.data[1]))},2,t)}function Ug(s,e){e||(e={});var t=Uc(),r=s.length;t.p(s);var o=Xl(s,e,A1(e),8),l=o.length;return T1(o,e),pn(o,l-8,t.d()),pn(o,l-4,r),o}var zg=function(){function s(e){this.v=1,Si.call(this,e)}return s.prototype.push=function(e,t){if(Si.prototype.e.call(this,e),this.v){var r=this.p.length>3?E1(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Si.prototype.c.call(this,t)},s}(),CC=function(){function s(e){this.ondata=e,Vc([zc,xC,function(){return[ts,Si,zg]}],this,0,function(){var t=new zg;onmessage=ts(t)},9)}return s}();function RC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[zc,xC,function(){return[Hg]}],function(r){return va(Hg(r.data[0]))},3,t)}function Hg(s,e){return Qh(s.subarray(E1(s),-8),e||new sn(bC(s)))}var P1=function(){function s(e,t){this.c=b1(),this.v=1,Vs.call(this,e,t)}return s.prototype.push=function(e,t){Vs.prototype.push.call(this,e,t)},s.prototype.p=function(e,t){this.c.p(e);var r=Xl(e,this.o,this.v&&2,t&&4,!t);this.v&&(C1(r,this.o),this.v=0),t&&pn(r,r.length-4,this.c.d()),this.ondata(r,t)},s}(),bz=function(){function s(e,t){Vc([Hc,_C,function(){return[ts,Vs,P1]}],this,R1.call(this,e,t),function(r){var o=new P1(r.data);onmessage=ts(o)},10)}return s}();function Sz(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[Hc,_C,function(){return[k1]}],function(r){return va(k1(r.data[0],r.data[1]))},4,t)}function k1(s,e){e||(e={});var t=b1();t.p(s);var r=Xl(s,e,2,4);return C1(r,e),pn(r,r.length-4,t.d()),r}var Gg=function(){function s(e){this.v=1,Si.call(this,e)}return s.prototype.push=function(e,t){if(Si.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Si.prototype.c.call(this,t)},s}(),LC=function(){function s(e){this.ondata=e,Vc([zc,wC,function(){return[ts,Si,Gg]}],this,0,function(){var t=new Gg;onmessage=ts(t)},11)}return s}();function IC(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gc(s,e,[zc,wC,function(){return[nd]}],function(r){return va(nd(r.data[0],S1(r.data[1])))},5,t)}function nd(s,e){return Qh((SC(s),s.subarray(2,-4)),e)}var PC=function(){function s(e){this.G=zg,this.I=Si,this.Z=Gg,this.ondata=e}return s.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new sn(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,l=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(l):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(l):new this.Z(l),this.s.push(this.p,t),this.p=null}}},s}(),Mz=function(){function s(e){this.G=CC,this.I=L1,this.Z=LC,this.ondata=e}return s.prototype.push=function(e,t){PC.prototype.push.call(this,e,t)},s}();function Tz(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return s[0]==31&&s[1]==139&&s[2]==8?RC(s,e,t):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?I1(s,e,t):IC(s,e,t)}function Ez(s,e){return s[0]==31&&s[1]==139&&s[2]==8?Hg(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Wc(s,e):nd(s,e)}var O1=function(s,e,t,r){for(var o in s){var l=s[o],c=e+o;l instanceof sn?t[c]=[l,r]:Array.isArray(l)?t[c]=[l[0],ed(r,l[1])]:O1(l,c+"/",t,r)}},kC=typeof TextEncoder!="undefined"&&new TextEncoder,D1=typeof TextDecoder!="undefined"&&new TextDecoder,OC=0;try{D1.decode(To,{stream:!0}),OC=1}catch{}var DC=function(s){for(var e="",t=0;;){var r=s[t++],o=(r>127)+(r>223)+(r>239);if(t+o>s.length)return[e,es(s,t-1)];o?o==3?(r=((r&15)<<18|(s[t++]&63)<<12|(s[t++]&63)<<6|s[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?e+=String.fromCharCode((r&31)<<6|s[t++]&63):e+=String.fromCharCode((r&15)<<12|(s[t++]&63)<<6|s[t++]&63):e+=String.fromCharCode(r)}},Az=function(){function s(e){this.ondata=e,OC?this.t=new TextDecoder:this.p=To}return s.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new sn(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=DC(r),l=o[0],c=o[1];if(t){if(c.length)throw"invalid utf-8 data";this.p=null}else this.p=c;this.ondata(l,t)},s}(),Cz=function(){function s(e){this.ondata=e}return s.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(ya(e),this.d=t||!1)},s}();function ya(s,e){if(e){for(var t=new sn(s.length),r=0;r<s.length;++r)t[r]=s.charCodeAt(r);return t}if(kC)return kC.encode(s);for(var o=s.length,l=new sn(s.length+(s.length>>1)),c=0,h=function(b){l[c++]=b},r=0;r<o;++r){if(c+5>l.length){var m=new sn(c+8+(o-r<<1));m.set(l),l=m}var y=s.charCodeAt(r);y<128||e?h(y):y<2048?(h(192|y>>6),h(128|y&63)):y>55295&&y<57344?(y=65536+(y&1023<<10)|s.charCodeAt(++r)&1023,h(240|y>>18),h(128|y>>12&63),h(128|y>>6&63),h(128|y&63)):(h(224|y>>12),h(128|y>>6&63),h(128|y&63))}return es(l,0,c)}function N1(s,e){if(e){for(var t="",r=0;r<s.length;r+=16384)t+=String.fromCharCode.apply(null,s.subarray(r,r+16384));return t}else{if(D1)return D1.decode(s);var o=DC(s),l=o[0],c=o[1];if(c.length)throw"invalid utf-8 data";return l}}var NC=function(s){return s==1?3:s<6?2:s==9?1:0},FC=function(s,e){return e+30+fi(s,e+26)+fi(s,e+28)},BC=function(s,e,t){var r=fi(s,e+28),o=N1(s.subarray(e+46,e+46+r),!(fi(s,e+8)&2048)),l=e+46+r,c=sr(s,e+20),h=t&&c==4294967295?UC(s,l):[c,sr(s,e+24),sr(s,e+42)],m=h[0],y=h[1],b=h[2];return[fi(s,e+10),m,y,o,l+fi(s,e+30)+fi(s,e+32),b]},UC=function(s,e){for(;fi(s,e)!=1;e+=4+fi(s,e+2));return[M1(s,e+12),M1(s,e+4),M1(s,e+20)]},xa=function(s){var e=0;if(s)for(var t in s){var r=s[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},$c=function(s,e,t,r,o,l,c,h){var m=r.length,y=t.extra,b=h&&h.length,M=xa(y);pn(s,e,c!=null?33639248:67324752),e+=4,c!=null&&(s[e++]=20,s[e++]=t.os),s[e]=20,e+=2,s[e++]=t.flag<<1|(l==null&&8),s[e++]=o&&8,s[e++]=t.compression&255,s[e++]=t.compression>>8;var C=new Date(t.mtime==null?Date.now():t.mtime),I=C.getFullYear()-1980;if(I<0||I>119)throw"date not in range 1980-2099";if(pn(s,e,I<<25|C.getMonth()+1<<21|C.getDate()<<16|C.getHours()<<11|C.getMinutes()<<5|C.getSeconds()>>>1),e+=4,l!=null&&(pn(s,e,t.crc),pn(s,e+4,l),pn(s,e+8,t.size)),pn(s,e+12,m),pn(s,e+14,M),e+=16,c!=null&&(pn(s,e,b),pn(s,e+6,t.attrs),pn(s,e+10,c),e+=14),s.set(r,e),e+=m,M)for(var O in y){var U=y[O],H=U.length;pn(s,e,+O),pn(s,e+2,H),s.set(U,e+4),e+=4+H}return b&&(s.set(h,e),e+=b),e},F1=function(s,e,t,r,o){pn(s,e,101010256),pn(s,e+8,t),pn(s,e+10,t),pn(s,e+12,r),pn(s,e+16,o)},rd=function(){function s(e){this.filename=e,this.c=Uc(),this.size=0,this.compression=0}return s.prototype.process=function(e,t){this.ondata(null,e,t)},s.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},s}(),Rz=function(){function s(e,t){var r=this;t||(t={}),rd.call(this,e),this.d=new Vs(t,function(o,l){r.ondata(null,o,l)}),this.compression=8,this.flag=NC(t.level)}return s.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},s.prototype.push=function(e,t){rd.prototype.push.call(this,e,t)},s}(),Lz=function(){function s(e,t){var r=this;t||(t={}),rd.call(this,e),this.d=new MC(t,function(o,l,c){r.ondata(o,l,c)}),this.compression=8,this.flag=NC(t.level),this.terminate=this.d.terminate}return s.prototype.process=function(e,t){this.d.push(e,t)},s.prototype.push=function(e,t){rd.prototype.push.call(this,e,t)},s}(),Iz=function(){function s(e){this.ondata=e,this.u=[],this.d=1}return s.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=ya(e.filename),o=r.length,l=e.comment,c=l&&ya(l),h=o!=e.filename.length||c&&l.length!=c.length,m=o+xa(e.extra)+30;if(o>65535)throw"filename too long";var y=new sn(m);$c(y,0,e,r,h);var b=[y],M=function(){for(var H=0,P=b;H<P.length;H++){var A=P[H];t.ondata(null,A,!1)}b=[]},C=this.d;this.d=0;var I=this.u.length,O=ed(e,{f:r,u:h,o:c,t:function(){e.terminate&&e.terminate()},r:function(){if(M(),C){var H=t.u[I+1];H?H.r():t.d=1}C=1}}),U=0;e.ondata=function(H,P,A){if(H)t.ondata(H,P,A),t.terminate();else if(U+=P.length,b.push(P),A){var F=new sn(16);pn(F,0,134695760),pn(F,4,e.crc),pn(F,8,U),pn(F,12,e.size),b.push(F),O.c=U,O.b=m+U+16,O.crc=e.crc,O.size=e.size,C&&O.r(),C=1}else C&&M()},this.u.push(O)},s.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(e.d&1)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},s.prototype.e=function(){for(var e=0,t=0,r=0,o=0,l=this.u;o<l.length;o++){var c=l[o];r+=46+c.f.length+xa(c.extra)+(c.o?c.o.length:0)}for(var h=new sn(r+22),m=0,y=this.u;m<y.length;m++){var c=y[m];$c(h,e,c,c.f,c.u,c.c,t,c.o),e+=46+c.f.length+xa(c.extra)+(c.o?c.o.length:0),t+=c.b}F1(h,e,this.u.length,r,t),this.ondata(null,h,!0),this.d=2},s.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},s}();function Pz(s,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};O1(s,"",r,e);var o=Object.keys(r),l=o.length,c=0,h=0,m=l,y=new Array(l),b=[],M=function(){for(var U=0;U<b.length;++U)b[U]()},C=function(){var U=new sn(h+22),H=c,P=h-c;h=0;for(var A=0;A<m;++A){var F=y[A];try{var L=F.c.length;$c(U,h,F,F.f,F.u,L);var B=30+F.f.length+xa(F.extra),z=h+B;U.set(F.c,z),$c(U,c,F,F.f,F.u,L,h,F.m),c+=16+B+(F.m?F.m.length:0),h=z+L}catch(q){return t(q,null)}}F1(U,c,y.length,P,H),t(null,U)};l||C();for(var I=function(U){var H=o[U],P=r[H],A=P[0],F=P[1],L=Uc(),B=A.length;L.p(A);var z=ya(H),q=z.length,Z=F.comment,ae=Z&&ya(Z),ce=ae&&ae.length,ee=xa(F.extra),ue=F.level==0?0:8,le=function(w,p){if(w)M(),t(w,null);else{var J=p.length;y[U]=ed(F,{size:B,crc:L.d(),c:p,f:z,m:ae,u:q!=H.length||ae&&Z.length!=ce,compression:ue}),c+=30+q+ee+J,h+=76+2*(q+ee)+(ce||0)+J,--l||C()}};if(q>65535&&le("filename too long",null),!ue)le(null,A);else if(B<16e4)try{le(null,td(A,F))}catch(w){le(w,null)}else b.push(TC(A,F,le))},O=0;O<m;++O)I(O);return M}function kz(s,e){e||(e={});var t={},r=[];O1(s,"",t,e);var o=0,l=0;for(var c in t){var h=t[c],m=h[0],y=h[1],b=y.level==0?0:8,M=ya(c),C=M.length,I=y.comment,O=I&&ya(I),U=O&&O.length,H=xa(y.extra);if(C>65535)throw"filename too long";var P=b?td(m,y):m,A=P.length,F=Uc();F.p(m),r.push(ed(y,{size:m.length,crc:F.d(),c:P,f:M,m:O,u:C!=c.length||O&&I.length!=U,o,compression:b})),o+=30+C+H+A,l+=76+2*(C+H)+(U||0)+A}for(var L=new sn(l+22),B=o,z=l-o,q=0;q<r.length;++q){var M=r[q];$c(L,M.o,M,M.f,M.u,M.c.length);var Z=30+M.f.length+xa(M.extra);L.set(M.c,M.o+Z),$c(L,o,M,M.f,M.u,M.c.length,M.o,M.m),o+=16+Z+(M.m?M.m.length:0)}return F1(L,o,r.length,z,B),L}var zC=function(){function s(){}return s.prototype.push=function(e,t){this.ondata(null,e,t)},s.compression=0,s}(),Oz=function(){function s(){var e=this;this.i=new Si(function(t,r){e.ondata(null,t,r)})}return s.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},s.compression=8,s}(),Dz=function(){function s(e,t){var r=this;t<32e4?this.i=new Si(function(o,l){r.ondata(null,o,l)}):(this.i=new L1(function(o,l,c){r.ondata(o,l,c)}),this.terminate=this.i.terminate)}return s.prototype.push=function(e,t){this.i.terminate&&(e=es(e,0)),this.i.push(e,t)},s.compression=8,s}(),Nz=function(){function s(e){this.onfile=e,this.k=[],this.o={0:zC},this.p=To}return s.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),l=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(l,!this.c):this.k[0].push(l),e=e.subarray(o),e.length)return this.push(e,t)}else{var c=0,h=0,m=void 0,y=void 0;this.p.length?e.length?(y=new sn(this.p.length+e.length),y.set(this.p),y.set(e,this.p.length)):y=this.p:y=e;for(var b=y.length,M=this.c,C=M&&this.d,I=function(){var P,A=sr(y,h);if(A==67324752){c=1,m=h,O.d=null,O.c=0;var F=fi(y,h+6),L=fi(y,h+8),B=F&2048,z=F&8,q=fi(y,h+26),Z=fi(y,h+28);if(b>h+30+q+Z){var ae=[];O.k.unshift(ae),c=2;var ce=sr(y,h+18),ee=sr(y,h+22),ue=N1(y.subarray(h+30,h+=30+q),!B);ce==4294967295?(P=z?[-2]:UC(y,h),ce=P[0],ee=P[1]):z&&(ce=-1),h+=Z,O.c=ce;var le,w={name:ue,compression:L,start:function(){if(!w.ondata)throw"no callback";if(!ce)w.ondata(null,To,!0);else{var p=r.o[L];if(!p)throw"unknown compression type "+L;le=ce<0?new p(ue):new p(ue,ce,ee),le.ondata=function(ke,Se,de){w.ondata(ke,Se,de)};for(var J=0,E=ae;J<E.length;J++){var ge=E[J];le.push(ge,!1)}r.k[0]==ae&&r.c?r.d=le:le.push(To,!0)}},terminate:function(){le&&le.terminate&&le.terminate()}};ce>=0&&(w.size=ce,w.originalSize=ee),O.onfile(w)}return"break"}else if(M){if(A==134695760)return m=h+=12+(M==-2&&8),c=3,O.c=0,"break";if(A==33639248)return m=h-=4,c=3,O.c=0,"break"}},O=this;h<b-4;++h){var U=I();if(U==="break")break}if(this.p=To,M<0){var H=c?y.subarray(0,m-12-(M==-2&&8)-(sr(y,m-16)==134695760&&4)):y.subarray(0,h);C?C.push(H,!!c):this.k[+(c==2)].push(H)}if(c&2)return this.push(y.subarray(h),t);this.p=y.subarray(h)}if(t){if(this.c)throw"invalid zip file";this.p=null}},s.prototype.register=function(e){this.o[e.compression]=e},s}();function Fz(s,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var C=0;C<t.length;++C)t[C]()},o={},l=s.length-22;sr(s,l)!=101010256;--l)if(!l||s.length-l>65558){e("invalid zip file",null);return}var c=fi(s,l+8);c||e(null,{});var h=c,m=sr(s,l+16),y=m==4294967295;if(y){if(l=sr(s,l-12),sr(s,l)!=101075792){e("invalid zip file",null);return}h=c=sr(s,l+32),m=sr(s,l+48)}for(var b=function(C){var I=BC(s,m,y),O=I[0],U=I[1],H=I[2],P=I[3],A=I[4],F=I[5],L=FC(s,F);m=A;var B=function(q,Z){q?(r(),e(q,null)):(o[P]=Z,--c||e(null,o))};if(!O)B(null,es(s,L,L+U));else if(O==8){var z=s.subarray(L,L+U);if(U<32e4)try{B(null,Wc(z,new sn(H)))}catch(q){B(q,null)}else t.push(I1(z,{size:H},B))}else B("unknown compression type "+O,null)},M=0;M<h;++M)b();return r}function Bz(s){for(var e={},t=s.length-22;sr(s,t)!=101010256;--t)if(!t||s.length-t>65558)throw"invalid zip file";var r=fi(s,t+8);if(!r)return{};var o=sr(s,t+16),l=o==4294967295;if(l){if(t=sr(s,t-12),sr(s,t)!=101075792)throw"invalid zip file";r=sr(s,t+32),o=sr(s,t+48)}for(var c=0;c<r;++c){var h=BC(s,o,l),m=h[0],y=h[1],b=h[2],M=h[3],C=h[4],I=h[5],O=FC(s,I);if(o=C,!m)e[M]=es(s,O,O+y);else if(m==8)e[M]=Wc(s.subarray(O,O+y),new sn(b));else throw"unknown compression type "+m}return e}var Uz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Deflate:Vs,AsyncDeflate:MC,deflate:TC,deflateSync:td,Inflate:Si,AsyncInflate:L1,inflate:I1,inflateSync:Wc,Gzip:Bg,AsyncGzip:EC,gzip:AC,gzipSync:Ug,Gunzip:zg,AsyncGunzip:CC,gunzip:RC,gunzipSync:Hg,Zlib:P1,AsyncZlib:bz,zlib:Sz,zlibSync:k1,Unzlib:Gg,AsyncUnzlib:LC,unzlib:IC,unzlibSync:nd,compress:AC,AsyncCompress:EC,compressSync:Ug,Compress:Bg,Decompress:PC,AsyncDecompress:Mz,decompress:Tz,decompressSync:Ez,DecodeUTF8:Az,EncodeUTF8:Cz,strToU8:ya,strFromU8:N1,ZipPassThrough:rd,ZipDeflate:Rz,AsyncZipDeflate:Lz,Zip:Iz,zip:Pz,zipSync:kz,UnzipPassThrough:zC,UnzipInflate:Oz,AsyncUnzipInflate:Dz,Unzip:Nz,unzip:Fz,unzipSync:Bz});function HC(s,e,t){const r=t.length-s-1;if(e>=t[r])return r-1;if(e<=t[s])return s;let o=s,l=r,c=Math.floor((o+l)/2);for(;e<t[c]||e>=t[c+1];)e<t[c]?l=c:o=c,c=Math.floor((o+l)/2);return c}function zz(s,e,t,r){const o=[],l=[],c=[];o[0]=1;for(let h=1;h<=t;++h){l[h]=e-r[s+1-h],c[h]=r[s+h]-e;let m=0;for(let y=0;y<h;++y){const b=c[y+1],M=l[h-y],C=o[y]/(b+M);o[y]=m+b*C,m=M*C}o[h]=m}return o}function Hz(s,e,t,r){const o=HC(s,r,e),l=zz(o,r,s,e),c=new an(0,0,0,0);for(let h=0;h<=s;++h){const m=t[o-s+h],y=l[h],b=m.w*y;c.x+=m.x*b,c.y+=m.y*b,c.z+=m.z*b,c.w+=m.w*y}return c}function Gz(s,e,t,r,o){const l=[];for(let M=0;M<=t;++M)l[M]=0;const c=[];for(let M=0;M<=r;++M)c[M]=l.slice(0);const h=[];for(let M=0;M<=t;++M)h[M]=l.slice(0);h[0][0]=1;const m=l.slice(0),y=l.slice(0);for(let M=1;M<=t;++M){m[M]=e-o[s+1-M],y[M]=o[s+M]-e;let C=0;for(let I=0;I<M;++I){const O=y[I+1],U=m[M-I];h[M][I]=O+U;const H=h[I][M-1]/h[M][I];h[I][M]=C+O*H,C=U*H}h[M][M]=C}for(let M=0;M<=t;++M)c[0][M]=h[M][t];for(let M=0;M<=t;++M){let C=0,I=1;const O=[];for(let U=0;U<=t;++U)O[U]=l.slice(0);O[0][0]=1;for(let U=1;U<=r;++U){let H=0;const P=M-U,A=t-U;M>=U&&(O[I][0]=O[C][0]/h[A+1][P],H=O[I][0]*h[P][A]);const F=P>=-1?1:-P,L=M-1<=A?U-1:t-M;for(let z=F;z<=L;++z)O[I][z]=(O[C][z]-O[C][z-1])/h[A+1][P+z],H+=O[I][z]*h[P+z][A];M<=A&&(O[I][U]=-O[C][U-1]/h[A+1][M],H+=O[I][U]*h[M][A]),c[U][M]=H;const B=C;C=I,I=B}}let b=t;for(let M=1;M<=r;++M){for(let C=0;C<=t;++C)c[M][C]*=b;b*=t-M}return c}function Vz(s,e,t,r,o){const l=o<s?o:s,c=[],h=HC(s,r,e),m=Gz(h,r,s,l,e),y=[];for(let b=0;b<t.length;++b){const M=t[b].clone(),C=M.w;M.x*=C,M.y*=C,M.z*=C,y[b]=M}for(let b=0;b<=l;++b){const M=y[h-s].clone().multiplyScalar(m[b][0]);for(let C=1;C<=s;++C)M.add(y[h-s+C].clone().multiplyScalar(m[b][C]));c[b]=M}for(let b=l+1;b<=o+1;++b)c[b]=new an(0,0,0);return c}function Wz(s,e){let t=1;for(let o=2;o<=s;++o)t*=o;let r=1;for(let o=2;o<=e;++o)r*=o;for(let o=2;o<=s-e;++o)r*=o;return t/r}function $z(s){const e=s.length,t=[],r=[];for(let l=0;l<e;++l){const c=s[l];t[l]=new he(c.x,c.y,c.z),r[l]=c.w}const o=[];for(let l=0;l<e;++l){const c=t[l].clone();for(let h=1;h<=l;++h)c.sub(o[l-h].clone().multiplyScalar(Wz(l,h)*r[h]));o[l]=c.divideScalar(r[0])}return o}function jz(s,e,t,r,o){const l=Vz(s,e,t,r,o);return $z(l)}class GC extends wi{constructor(e,t,r,o,l){super();this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=o||0,this.endKnot=l||this.knots.length-1;for(let c=0;c<r.length;++c){const h=r[c];this.controlPoints[c]=new an(h.x,h.y,h.z,h.w)}}getPoint(e,t=new he){const r=t,o=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),l=Hz(this.degree,this.knots,this.controlPoints,o);return l.w!==1&&l.divideScalar(l.w),r.set(l.x,l.y,l.z)}getTangent(e,t=new he){const r=t,o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=jz(this.degree,this.knots,this.controlPoints,o,1);return r.copy(l[1]).normalize(),r}}let en,or,Mi;class FG extends zr{constructor(e){super(e)}load(e,t,r,o){const l=this,c=l.path===""?bi.extractUrlBase(e):l.path,h=new Bi(this.manager);h.setPath(l.path),h.setResponseType("arraybuffer"),h.setRequestHeader(l.requestHeader),h.setWithCredentials(l.withCredentials),h.load(e,function(m){try{t(l.parse(m,c))}catch(y){o?o(y):console.error(y),l.manager.itemError(e)}},r,o)}parse(e,t){if(Qz(e))en=new Zz().parse(e);else{const o=XC(e);if(!Jz(o))throw new Error("THREE.FBXLoader: Unknown format.");if($C(o)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$C(o));en=new Kz().parse(o)}const r=new Jm(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new qz(r,this.manager).parse(en)}}class qz{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){or=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),o=this.parseDeformers(),l=new Xz().parse(o);return this.parseScene(o,l,r),Mi}parseConnections(){const e=new Map;return"Connections"in en&&en.Connections.connections.forEach(function(r){const o=r[0],l=r[1],c=r[2];e.has(o)||e.set(o,{parents:[],children:[]});const h={ID:l,relationship:c};e.get(o).parents.push(h),e.has(l)||e.set(l,{parents:[],children:[]});const m={ID:o,relationship:c};e.get(l).children.push(m)}),e}parseImages(){const e={},t={};if("Video"in en.Objects){const r=en.Objects.Video;for(const o in r){const l=r[o],c=parseInt(o);if(e[c]=l.RelativeFilename||l.Filename,"Content"in l){const h=l.Content instanceof ArrayBuffer&&l.Content.byteLength>0,m=typeof l.Content=="string"&&l.Content!=="";if(h||m){const y=this.parseImage(r[o]);t[l.RelativeFilename||l.Filename]=y}}}}for(const r in e){const o=e[r];t[o]!==void 0?e[r]=t[o]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,o=r.slice(r.lastIndexOf(".")+1).toLowerCase();let l;switch(o){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),l="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if(typeof t=="string")return"data:"+l+";base64,"+t;{const c=new Uint8Array(t);return window.URL.createObjectURL(new Blob([c],{type:l}))}}parseTextures(e){const t=new Map;if("Texture"in en.Objects){const r=en.Objects.Texture;for(const o in r){const l=this.parseTexture(r[o],e);t.set(parseInt(o),l)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const o=e.WrapModeU,l=e.WrapModeV,c=o!==void 0?o.value:0,h=l!==void 0?l.value:0;if(r.wrapS=c===0?Ls:fr,r.wrapT=h===0?Ls:fr,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}return r}loadTexture(e,t){let r;const o=this.textureLoader.path,l=or.get(e.id).children;l!==void 0&&l.length>0&&t[l[0].ID]!==void 0&&(r=t[l[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let c;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),c=new Dn):(m.setPath(this.textureLoader.path),c=m.load(r))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),c=new Dn):c=this.textureLoader.load(r);return this.textureLoader.setPath(o),c}parseMaterials(e){const t=new Map;if("Material"in en.Objects){const r=en.Objects.Material;for(const o in r){const l=this.parseMaterial(r[o],e);l!==null&&t.set(parseInt(o),l)}}return t}parseMaterial(e,t){const r=e.id,o=e.attrName;let l=e.ShadingModel;if(typeof l=="object"&&(l=l.value),!or.has(r))return null;const c=this.parseParameters(e,t,r);let h;switch(l.toLowerCase()){case"phong":h=new Mc;break;case"lambert":h=new Qm;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),h=new Mc;break}return h.setValues(c),h.name=o,h}parseParameters(e,t,r){const o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=new Ze().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(o.color=new Ze().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=new Ze().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(o.emissive=new Ze().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=new Ze().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(o.specular=new Ze().fromArray(e.SpecularColor.value));const l=this;return or.get(r).children.forEach(function(c){const h=c.relationship;switch(h){case"Bump":o.bumpMap=l.getTexture(t,c.ID);break;case"Maya|TEX_ao_map":o.aoMap=l.getTexture(t,c.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=l.getTexture(t,c.ID),o.map!==void 0&&(o.map.encoding=rn);break;case"DisplacementColor":o.displacementMap=l.getTexture(t,c.ID);break;case"EmissiveColor":o.emissiveMap=l.getTexture(t,c.ID),o.emissiveMap!==void 0&&(o.emissiveMap.encoding=rn);break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=l.getTexture(t,c.ID);break;case"ReflectionColor":o.envMap=l.getTexture(t,c.ID),o.envMap!==void 0&&(o.envMap.mapping=Ou,o.envMap.encoding=rn);break;case"SpecularColor":o.specularMap=l.getTexture(t,c.ID),o.specularMap!==void 0&&(o.specularMap.encoding=rn);break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=l.getTexture(t,c.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),o}getTexture(e,t){return"LayeredTexture"in en.Objects&&t in en.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=or.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in en.Objects){const r=en.Objects.Deformer;for(const o in r){const l=r[o],c=or.get(parseInt(o));if(l.attrType==="Skin"){const h=this.parseSkeleton(c,r);h.ID=o,c.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=c.parents[0].ID,e[o]=h}else if(l.attrType==="BlendShape"){const h={id:o};h.rawTargets=this.parseMorphTargets(c,r),h.id=o,c.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[o]=h}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(o){const l=t[o.ID];if(l.attrType!=="Cluster")return;const c={ID:o.ID,indices:[],weights:[],transformLink:new Je().fromArray(l.TransformLink.a)};"Indexes"in l&&(c.indices=l.Indexes.a,c.weights=l.Weights.a),r.push(c)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let o=0;o<e.children.length;o++){const l=e.children[o],c=t[l.ID],h={name:c.attrName,initialWeight:c.DeformPercent,id:c.id,fullWeights:c.FullWeights.a};if(c.attrType!=="BlendShapeChannel")return;h.geoID=or.get(parseInt(l.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(h)}return r}parseScene(e,t,r){Mi=new Ur;const o=this.parseModels(e.skeletons,t,r),l=en.Objects.Model,c=this;o.forEach(function(m){const y=l[m.ID];c.setLookAtProperties(m,y),or.get(m.ID).parents.forEach(function(M){const C=o.get(M.ID);C!==void 0&&C.add(m)}),m.parent===null&&Mi.add(m)}),this.bindSkeleton(e.skeletons,t,o),this.createAmbientLight(),Mi.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const y=jC(m.userData.transformData);m.applyMatrix4(y),m.updateWorldMatrix()}});const h=new Yz().parse();Mi.children.length===1&&Mi.children[0].isGroup&&(Mi.children[0].animations=h,Mi=Mi.children[0]),Mi.animations=h}parseModels(e,t,r){const o=new Map,l=en.Objects.Model;for(const c in l){const h=parseInt(c),m=l[c],y=or.get(h);let b=this.buildSkeleton(y,e,h,m.attrName);if(!b){switch(m.attrType){case"Camera":b=this.createCamera(y);break;case"Light":b=this.createLight(y);break;case"Mesh":b=this.createMesh(y,t,r);break;case"NurbsCurve":b=this.createCurve(y,t);break;case"LimbNode":case"Root":b=new _l;break;case"Null":default:b=new Ur;break}b.name=m.attrName?Jt.sanitizeNodeName(m.attrName):"",b.ID=h}this.getTransformData(b,m),o.set(h,b)}return o}buildSkeleton(e,t,r,o){let l=null;return e.parents.forEach(function(c){for(const h in t){const m=t[h];m.rawBones.forEach(function(y,b){if(y.ID===c.ID){const M=l;l=new _l,l.matrixWorld.copy(y.transformLink),l.name=o?Jt.sanitizeNodeName(o):"",l.ID=r,m.bones[b]=l,M!==null&&l.add(M)}})}}),l}createCamera(e){let t,r;if(e.children.forEach(function(o){const l=en.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Wt;else{let o=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(o=1);let l=1;r.NearPlane!==void 0&&(l=r.NearPlane.value/1e3);let c=1e3;r.FarPlane!==void 0&&(c=r.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(h=r.AspectWidth.value,m=r.AspectHeight.value);const y=h/m;let b=45;r.FieldOfView!==void 0&&(b=r.FieldOfView.value);const M=r.FocalLength?r.FocalLength.value:null;switch(o){case 0:t=new hr(b,y,l,c),M!==null&&t.setFocalLength(M);break;case 1:t=new vl(-h/2,h/2,m/2,-m/2,l,c);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),t=new Wt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(o){const l=en.Objects.NodeAttribute[o.ID];l!==void 0&&(r=l)}),r===void 0)t=new Wt;else{let o;r.LightType===void 0?o=0:o=r.LightType.value;let l=16777215;r.Color!==void 0&&(l=new Ze().fromArray(r.Color.value));let c=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(c=0);let h=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?h=0:h=r.FarAttenuationEnd.value);const m=1;switch(o){case 0:t=new Ec(l,c,h,m);break;case 1:t=new Fh(l,c);break;case 2:let y=Math.PI/3;r.InnerAngle!==void 0&&(y=yi.degToRad(r.InnerAngle.value));let b=0;r.OuterAngle!==void 0&&(b=yi.degToRad(r.OuterAngle.value),b=Math.max(b,1)),t=new Dh(l,c,h,y,b,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new Ec(l,c);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let o,l=null,c=null;const h=[];return e.children.forEach(function(m){t.has(m.ID)&&(l=t.get(m.ID)),r.has(m.ID)&&h.push(r.get(m.ID))}),h.length>1?c=h:h.length>0?c=h[0]:(c=new Mc({color:13421772}),h.push(c)),"color"in l.attributes&&h.forEach(function(m){m.vertexColors=!0}),l.FBX_Deformer?(o=new xl(l,c),o.normalizeSkinWeights()):o=new Nn(l,c),o}createCurve(e,t){const r=e.children.reduce(function(l,c){return t.has(c.ID)&&(l=t.get(c.ID)),l},null),o=new Fn({color:3342591,linewidth:1});return new Xi(r,o)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=qC(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&or.get(e.ID).children.forEach(function(o){if(o.relationship==="LookAtProperty"){const l=en.Objects.Model[o.ID];if("Lcl_Translation"in l){const c=l.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(c),Mi.add(e.target)):e.lookAt(new he().fromArray(c))}}})}bindSkeleton(e,t,r){const o=this.parsePoseNodes();for(const l in e){const c=e[l];or.get(parseInt(c.ID)).parents.forEach(function(m){if(t.has(m.ID)){const y=m.ID;or.get(y).parents.forEach(function(M){r.has(M.ID)&&r.get(M.ID).bind(new aa(c.bones),o[M.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in en.Objects){const t=en.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const o=t[r].PoseNode;Array.isArray(o)?o.forEach(function(l){e[l.Node]=new Je().fromArray(l.Matrix.a)}):e[o.Node]=new Je().fromArray(o.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in en&&"AmbientColor"in en.GlobalSettings){const e=en.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],o=e[2];if(t!==0||r!==0||o!==0){const l=new Ze(t,r,o);Mi.add(new eg(l,1))}}}}class Xz{parse(e){const t=new Map;if("Geometry"in en.Objects){const r=en.Objects.Geometry;for(const o in r){const l=or.get(parseInt(o)),c=this.parseGeometry(l,r[o],e);t.set(parseInt(o),c)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const o=r.skeletons,l=[],c=e.parents.map(function(M){return en.Objects.Model[M.ID]});if(c.length===0)return;const h=e.children.reduce(function(M,C){return o[C.ID]!==void 0&&(M=o[C.ID]),M},null);e.children.forEach(function(M){r.morphTargets[M.ID]!==void 0&&l.push(r.morphTargets[M.ID])});const m=c[0],y={};"RotationOrder"in m&&(y.eulerOrder=qC(m.RotationOrder.value)),"InheritType"in m&&(y.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(y.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(y.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(y.scale=m.GeometricScaling.value);const b=jC(y);return this.genGeometry(t,h,l,b)}genGeometry(e,t,r,o){const l=new St;e.attrName&&(l.name=e.attrName);const c=this.parseGeoNode(e,t),h=this.genBuffers(c),m=new vt(h.vertex,3);if(m.applyMatrix4(o),l.setAttribute("position",m),h.colors.length>0&&l.setAttribute("color",new vt(h.colors,3)),t&&(l.setAttribute("skinIndex",new mh(h.weightsIndices,4)),l.setAttribute("skinWeight",new vt(h.vertexWeights,4)),l.FBX_Deformer=t),h.normal.length>0){const y=new gn().getNormalMatrix(o),b=new vt(h.normal,3);b.applyNormalMatrix(y),l.setAttribute("normal",b)}if(h.uvs.forEach(function(y,b){let M="uv"+(b+1).toString();b===0&&(M="uv"),l.setAttribute(M,new vt(h.uvs[b],2))}),c.material&&c.material.mappingType!=="AllSame"){let y=h.materialIndex[0],b=0;if(h.materialIndex.forEach(function(M,C){M!==y&&(l.addGroup(b,C-b,y),y=M,b=C)}),l.groups.length>0){const M=l.groups[l.groups.length-1],C=M.start+M.count;C!==h.materialIndex.length&&l.addGroup(C,h.materialIndex.length-C,y)}l.groups.length===0&&l.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(l,e,r,o),l}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let o=0;for(;e.LayerElementUV[o];)e.LayerElementUV[o].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[o])),o++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(o,l){o.indices.forEach(function(c,h){r.weightTable[c]===void 0&&(r.weightTable[c]=[]),r.weightTable[c].push({id:l,weight:o.weights[h]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,o=0,l=!1,c=[],h=[],m=[],y=[],b=[],M=[];const C=this;return e.vertexIndices.forEach(function(I,O){let U,H=!1;I<0&&(I=I^-1,H=!0);let P=[],A=[];if(c.push(I*3,I*3+1,I*3+2),e.color){const F=Vg(O,r,I,e.color);m.push(F[0],F[1],F[2])}if(e.skeleton){if(e.weightTable[I]!==void 0&&e.weightTable[I].forEach(function(F){A.push(F.weight),P.push(F.id)}),A.length>4){l||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),l=!0);const F=[0,0,0,0],L=[0,0,0,0];A.forEach(function(B,z){let q=B,Z=P[z];L.forEach(function(ae,ce,ee){if(q>ae){ee[ce]=q,q=ae;const ue=F[ce];F[ce]=Z,Z=ue}})}),P=F,A=L}for(;A.length<4;)A.push(0),P.push(0);for(let F=0;F<4;++F)b.push(A[F]),M.push(P[F])}if(e.normal){const F=Vg(O,r,I,e.normal);h.push(F[0],F[1],F[2])}e.material&&e.material.mappingType!=="AllSame"&&(U=Vg(O,r,I,e.material)[0]),e.uv&&e.uv.forEach(function(F,L){const B=Vg(O,r,I,F);y[L]===void 0&&(y[L]=[]),y[L].push(B[0]),y[L].push(B[1])}),o++,H&&(C.genFace(t,e,c,U,h,m,y,b,M,o),r++,o=0,c=[],h=[],m=[],y=[],b=[],M=[])}),t}genFace(e,t,r,o,l,c,h,m,y,b){for(let M=2;M<b;M++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(M-1)*3]]),e.vertex.push(t.vertexPositions[r[(M-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(M-1)*3+2]]),e.vertex.push(t.vertexPositions[r[M*3]]),e.vertex.push(t.vertexPositions[r[M*3+1]]),e.vertex.push(t.vertexPositions[r[M*3+2]]),t.skeleton&&(e.vertexWeights.push(m[0]),e.vertexWeights.push(m[1]),e.vertexWeights.push(m[2]),e.vertexWeights.push(m[3]),e.vertexWeights.push(m[(M-1)*4]),e.vertexWeights.push(m[(M-1)*4+1]),e.vertexWeights.push(m[(M-1)*4+2]),e.vertexWeights.push(m[(M-1)*4+3]),e.vertexWeights.push(m[M*4]),e.vertexWeights.push(m[M*4+1]),e.vertexWeights.push(m[M*4+2]),e.vertexWeights.push(m[M*4+3]),e.weightsIndices.push(y[0]),e.weightsIndices.push(y[1]),e.weightsIndices.push(y[2]),e.weightsIndices.push(y[3]),e.weightsIndices.push(y[(M-1)*4]),e.weightsIndices.push(y[(M-1)*4+1]),e.weightsIndices.push(y[(M-1)*4+2]),e.weightsIndices.push(y[(M-1)*4+3]),e.weightsIndices.push(y[M*4]),e.weightsIndices.push(y[M*4+1]),e.weightsIndices.push(y[M*4+2]),e.weightsIndices.push(y[M*4+3])),t.color&&(e.colors.push(c[0]),e.colors.push(c[1]),e.colors.push(c[2]),e.colors.push(c[(M-1)*3]),e.colors.push(c[(M-1)*3+1]),e.colors.push(c[(M-1)*3+2]),e.colors.push(c[M*3]),e.colors.push(c[M*3+1]),e.colors.push(c[M*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(o),e.materialIndex.push(o),e.materialIndex.push(o)),t.normal&&(e.normal.push(l[0]),e.normal.push(l[1]),e.normal.push(l[2]),e.normal.push(l[(M-1)*3]),e.normal.push(l[(M-1)*3+1]),e.normal.push(l[(M-1)*3+2]),e.normal.push(l[M*3]),e.normal.push(l[M*3+1]),e.normal.push(l[M*3+2])),t.uv&&t.uv.forEach(function(C,I){e.uvs[I]===void 0&&(e.uvs[I]=[]),e.uvs[I].push(h[I][0]),e.uvs[I].push(h[I][1]),e.uvs[I].push(h[I][(M-1)*2]),e.uvs[I].push(h[I][(M-1)*2+1]),e.uvs[I].push(h[I][M*2]),e.uvs[I].push(h[I][M*2+1])})}addMorphTargets(e,t,r,o){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const l=this;r.forEach(function(c){c.rawTargets.forEach(function(h){const m=en.Objects.Geometry[h.geoID];m!==void 0&&l.genMorphGeometry(e,t,m,o,h.name)})})}genMorphGeometry(e,t,r,o,l){const c=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],h=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],y=e.attributes.position.count*3,b=new Float32Array(y);for(let O=0;O<m.length;O++){const U=m[O]*3;b[U]=h[O*3],b[U+1]=h[O*3+1],b[U+2]=h[O*3+2]}const M={vertexIndices:c,vertexPositions:b},C=this.genBuffers(M),I=new vt(C.vertex,3);I.name=l||r.attrName,I.applyMatrix4(o),e.morphAttributes.position.push(I)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Normals.a;let l=[];return r==="IndexToDirect"&&("NormalIndex"in e?l=e.NormalIndex.a:"NormalsIndex"in e&&(l=e.NormalsIndex.a)),{dataSize:3,buffer:o,indices:l,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.UV.a;let l=[];return r==="IndexToDirect"&&(l=e.UVIndex.a),{dataSize:2,buffer:o,indices:l,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,o=e.Colors.a;let l=[];return r==="IndexToDirect"&&(l=e.ColorIndex.a),{dataSize:4,buffer:o,indices:l,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const o=e.Materials.a,l=[];for(let c=0;c<o.length;++c)l.push(c);return{dataSize:1,buffer:o,indices:l,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(GC===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new St;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new St;const r=t-1,o=e.KnotVector.a,l=[],c=e.Points.a;for(let M=0,C=c.length;M<C;M+=4)l.push(new an().fromArray(c,M));let h,m;if(e.Form==="Closed")l.push(l[0]);else if(e.Form==="Periodic"){h=r,m=o.length-1-h;for(let M=0;M<r;++M)l.push(l[M])}const b=new GC(r,o,l,h,m).getPoints(l.length*12);return new St().setFromPoints(b)}}class Yz{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const o=t[r],l=this.addClip(o);e.push(l)}return e}parseClips(){if(en.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=en.Objects.AnimationCurveNode,t=new Map;for(const r in e){const o=e[r];if(o.attrName.match(/S|R|T|DeformPercent/)!==null){const l={id:o.id,attr:o.attrName,curves:{}};t.set(l.id,l)}}return t}parseAnimationCurves(e){const t=en.Objects.AnimationCurve;for(const r in t){const o={id:t[r].id,times:t[r].KeyTime.a.map(eH),values:t[r].KeyValueFloat.a},l=or.get(o.id);if(l!==void 0){const c=l.parents[0].ID,h=l.parents[0].relationship;h.match(/X/)?e.get(c).curves.x=o:h.match(/Y/)?e.get(c).curves.y=o:h.match(/Z/)?e.get(c).curves.z=o:h.match(/d|DeformPercent/)&&e.has(c)&&(e.get(c).curves.morph=o)}}}parseAnimationLayers(e){const t=en.Objects.AnimationLayer,r=new Map;for(const o in t){const l=[],c=or.get(parseInt(o));c!==void 0&&(c.children.forEach(function(m,y){if(e.has(m.ID)){const b=e.get(m.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(l[y]===void 0){const M=or.get(m.ID).parents.filter(function(C){return C.relationship!==void 0})[0].ID;if(M!==void 0){const C=en.Objects.Model[M.toString()];if(C===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const I={modelName:C.attrName?Jt.sanitizeNodeName(C.attrName):"",ID:C.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Mi.traverse(function(O){O.ID===C.id&&(I.transform=O.matrix,O.userData.transformData&&(I.eulerOrder=O.userData.transformData.eulerOrder))}),I.transform||(I.transform=new Je),"PreRotation"in C&&(I.preRotation=C.PreRotation.value),"PostRotation"in C&&(I.postRotation=C.PostRotation.value),l[y]=I}}l[y]&&(l[y][b.attr]=b)}else if(b.curves.morph!==void 0){if(l[y]===void 0){const M=or.get(m.ID).parents.filter(function(P){return P.relationship!==void 0})[0].ID,C=or.get(M).parents[0].ID,I=or.get(C).parents[0].ID,O=or.get(I).parents[0].ID,U=en.Objects.Model[O],H={modelName:U.attrName?Jt.sanitizeNodeName(U.attrName):"",morphName:en.Objects.Deformer[M].attrName};l[y]=H}l[y][b.attr]=b}}}),r.set(parseInt(o),l))}return r}parseAnimStacks(e){const t=en.Objects.AnimationStack,r={};for(const o in t){const l=or.get(parseInt(o)).children;l.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const c=e.get(l[0].ID);r[o]={name:t[o].attrName,layer:c}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(o){t=t.concat(r.generateTracks(o))}),new Il(e.name,-1,t)}generateTracks(e){const t=[];let r=new he,o=new Vt,l=new he;if(e.transform&&e.transform.decompose(r,o,l),r=r.toArray(),o=new _i().setFromQuaternion(o,e.eulerOrder).toArray(),l=l.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");c!==void 0&&t.push(c)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const c=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotation,e.postRotation,e.eulerOrder);c!==void 0&&t.push(c)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.S.curves,l,"scale");c!==void 0&&t.push(c)}if(e.DeformPercent!==void 0){const c=this.generateMorphTrack(e);c!==void 0&&t.push(c)}return t}generateVectorTrack(e,t,r,o){const l=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(l,t,r);return new Ll(e+"."+o,l,c)}generateRotationTrack(e,t,r,o,l,c){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(yi.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(yi.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(yi.degToRad));const h=this.getTimesForAllAxes(t),m=this.getKeyframeTrackValues(h,t,r);o!==void 0&&(o=o.map(yi.degToRad),o.push(c),o=new _i().fromArray(o),o=new Vt().setFromEuler(o)),l!==void 0&&(l=l.map(yi.degToRad),l.push(c),l=new _i().fromArray(l),l=new Vt().setFromEuler(l).invert());const y=new Vt,b=new _i,M=[];for(let C=0;C<m.length;C+=3)b.set(m[C],m[C+1],m[C+2],c),y.setFromEuler(b),o!==void 0&&y.premultiply(o),l!==void 0&&y.multiply(l),y.toArray(M,C/3*4);return new yo(e+".quaternion",h,M)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(l){return l/100}),o=Mi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Cl(e.modelName+".morphTargetInfluences["+o+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,o){return r-o}),t.length>1){let r=1,o=t[0];for(let l=1;l<t.length;l++){const c=t[l];c!==o&&(t[r]=c,o=c,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const o=r,l=[];let c=-1,h=-1,m=-1;return e.forEach(function(y){if(t.x&&(c=t.x.times.indexOf(y)),t.y&&(h=t.y.times.indexOf(y)),t.z&&(m=t.z.times.indexOf(y)),c!==-1){const b=t.x.values[c];l.push(b),o[0]=b}else l.push(o[0]);if(h!==-1){const b=t.y.values[h];l.push(b),o[1]=b}else l.push(o[1]);if(m!==-1){const b=t.z.values[m];l.push(b),o[2]=b}else l.push(o[2])}),l}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],o=e.values[t]-r,l=Math.abs(o);if(l>=180){const c=l/180,h=o/c;let m=r+h;const y=e.times[t-1],M=(e.times[t]-y)/c;let C=y+M;const I=[],O=[];for(;C<e.times[t];)I.push(C),C+=M,O.push(m),m+=h;e.times=YC(e.times,t,I),e.values=YC(e.values,t,O)}}}}class Kz{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new WC,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(o,l){const c=o.match(/^[\s\t]*;/),h=o.match(/^[\s\t]*$/);if(c||h)return;const m=o.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),y=o.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=o.match("^\\t{"+(t.currentIndent-1)+"}}");m?t.parseNodeBegin(o,m):y?t.parseNodeProperty(o,y,r[++l]):b?t.popStack():o.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(o)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),o=t[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),l={name:r},c=this.parseNodeAttr(o),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,l):r in h?(r==="PoseNode"?h.PoseNode.push(l):h[r].id!==void 0&&(h[r]={},h[r][h[r].id]=h[r]),c.id!==""&&(h[r][c.id]=l)):typeof c.id=="number"?(h[r]={},h[r][c.id]=l):r!=="Properties70"&&(r==="PoseNode"?h[r]=[l]:h[r]=l),typeof c.id=="number"&&(l.id=c.id),c.name!==""&&(l.attrName=c.name),c.type!==""&&(l.attrType=c.type),this.pushStack(l)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",o="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),o=e[2]),{id:t,name:r,type:o}}parseNodeProperty(e,t,r){let o=t[1].replace(/^"/,"").replace(/"$/,"").trim(),l=t[2].replace(/^"/,"").replace(/"$/,"").trim();o==="Content"&&l===","&&(l=r.replace(/"/g,"").replace(/,$/,"").trim());const c=this.getCurrentNode();if(c.name==="Properties70"){this.parseNodeSpecialProperty(e,o,l);return}if(o==="C"){const m=l.split(",").slice(1),y=parseInt(m[0]),b=parseInt(m[1]);let M=l.split(",").slice(3);M=M.map(function(C){return C.trim().replace(/^"/,"")}),o="connections",l=[y,b],nH(l,M),c[o]===void 0&&(c[o]=[])}o==="Node"&&(c.id=l),o in c&&Array.isArray(c[o])?c[o].push(l):o!=="a"?c[o]=l:c.a=l,this.setCurrentProp(c,o),o==="a"&&l.slice(-1)!==","&&(c.a=U1(l))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=U1(t.a))}parseNodeSpecialProperty(e,t,r){const o=r.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),l=o[0],c=o[1],h=o[2],m=o[3];let y=o[4];switch(c){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":y=parseFloat(y);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":y=U1(y);break}this.getPrevNode()[l]={type:c,type2:h,flag:m,value:y},this.setCurrentProp(this.getPrevNode(),l)}}class Zz{parse(e){const t=new VC(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const o=new WC;for(;!this.endOfContent(t);){const l=this.parseNode(t,r);l!==null&&o.add(l.name,l)}return o}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&~15)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},o=t>=7500?e.getUint64():e.getUint32(),l=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const c=e.getUint8(),h=e.getString(c);if(o===0)return null;const m=[];for(let C=0;C<l;C++)m.push(this.parseProperty(e));const y=m.length>0?m[0]:"",b=m.length>1?m[1]:"",M=m.length>2?m[2]:"";for(r.singleProperty=l===1&&e.getOffset()===o;o>e.getOffset();){const C=this.parseNode(e,t);C!==null&&this.parseSubNode(h,r,C)}return r.propertyList=m,typeof y=="number"&&(r.id=y),b!==""&&(r.attrName=b),M!==""&&(r.attrType=M),h!==""&&(r.name=h),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const o=r.propertyList[0];Array.isArray(o)?(t[r.name]=r,r.a=o):t[r.name]=o}else if(e==="Connections"&&r.name==="C"){const o=[];r.propertyList.forEach(function(l,c){c!==0&&o.push(l)}),t.connections===void 0&&(t.connections=[]),t.connections.push(o)}else if(r.name==="Properties70")Object.keys(r).forEach(function(l){t[l]=r[l]});else if(e==="Properties70"&&r.name==="P"){let o=r.propertyList[0],l=r.propertyList[1];const c=r.propertyList[2],h=r.propertyList[3];let m;o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),l.indexOf("Lcl ")===0&&(l=l.replace("Lcl ","Lcl_")),l==="Color"||l==="ColorRGB"||l==="Vector"||l==="Vector3D"||l.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],t[o]={type:l,type2:c,flag:h,value:m}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const o=e.getUint32(),l=e.getUint32(),c=e.getUint32();if(l===0)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}typeof Uz=="undefined"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const h=nd(new Uint8Array(e.getArrayBuffer(c))),m=new VC(h.buffer);switch(t){case"b":case"c":return m.getBooleanArray(o);case"d":return m.getFloat64Array(o);case"f":return m.getFloat32Array(o);case"i":return m.getInt32Array(o);case"l":return m.getInt64Array(o)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class VC{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)==1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let o=0;o<e;o++)t[o]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),bi.decodeText(new Uint8Array(t))}}class WC{add(e,t){this[e]=t}}function Qz(s){const e="Kaydara FBX Binary  \0";return s.byteLength>=e.length&&e===XC(s,0,e.length)}function Jz(s){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(o){const l=s[o-1];return s=s.slice(t+o),t++,l}for(let o=0;o<e.length;++o)if(r(1)===e[o])return!1;return!0}function $C(s){const e=/FBXVersion: (\d+)/,t=s.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function eH(s){return s/46186158e3}const tH=[];function Vg(s,e,t,r){let o;switch(r.mappingType){case"ByPolygonVertex":o=s;break;case"ByPolygon":o=e;break;case"ByVertice":o=t;break;case"AllSame":o=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(o=r.indices[o]);const l=o*r.dataSize,c=l+r.dataSize;return rH(tH,r.buffer,l,c)}const B1=new _i,jc=new he;function jC(s){const e=new Je,t=new Je,r=new Je,o=new Je,l=new Je,c=new Je,h=new Je,m=new Je,y=new Je,b=new Je,M=new Je,C=new Je,I=s.inheritType?s.inheritType:0;if(s.translation&&e.setPosition(jc.fromArray(s.translation)),s.preRotation){const ce=s.preRotation.map(yi.degToRad);ce.push(s.eulerOrder),t.makeRotationFromEuler(B1.fromArray(ce))}if(s.rotation){const ce=s.rotation.map(yi.degToRad);ce.push(s.eulerOrder),r.makeRotationFromEuler(B1.fromArray(ce))}if(s.postRotation){const ce=s.postRotation.map(yi.degToRad);ce.push(s.eulerOrder),o.makeRotationFromEuler(B1.fromArray(ce)),o.invert()}s.scale&&l.scale(jc.fromArray(s.scale)),s.scalingOffset&&h.setPosition(jc.fromArray(s.scalingOffset)),s.scalingPivot&&c.setPosition(jc.fromArray(s.scalingPivot)),s.rotationOffset&&m.setPosition(jc.fromArray(s.rotationOffset)),s.rotationPivot&&y.setPosition(jc.fromArray(s.rotationPivot)),s.parentMatrixWorld&&(M.copy(s.parentMatrix),b.copy(s.parentMatrixWorld));const O=t.clone().multiply(r).multiply(o),U=new Je;U.extractRotation(b);const H=new Je;H.copyPosition(b);const P=H.clone().invert().multiply(b),A=U.clone().invert().multiply(P),F=l,L=new Je;if(I===0)L.copy(U).multiply(O).multiply(A).multiply(F);else if(I===1)L.copy(U).multiply(A).multiply(O).multiply(F);else{const ee=new Je().scale(new he().setFromMatrixScale(M)).clone().invert(),ue=A.clone().multiply(ee);L.copy(U).multiply(O).multiply(ue).multiply(F)}const B=y.clone().invert(),z=c.clone().invert();let q=e.clone().multiply(m).multiply(y).multiply(t).multiply(r).multiply(o).multiply(B).multiply(h).multiply(c).multiply(l).multiply(z);const Z=new Je().copyPosition(q),ae=b.clone().multiply(Z);return C.copyPosition(ae),q=C.clone().multiply(L),q.premultiply(b.invert()),q}function qC(s){s=s||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return s===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[s]}function U1(s){return s.split(",").map(function(t){return parseFloat(t)})}function XC(s,e,t){return e===void 0&&(e=0),t===void 0&&(t=s.byteLength),bi.decodeText(new Uint8Array(s,e,t))}function nH(s,e){for(let t=0,r=s.length,o=e.length;t<o;t++,r++)s[r]=e[t]}function rH(s,e,t,r){for(let o=t,l=0;o<r;o++,l++)s[l]=e[o];return s}function YC(s,e,t){return s.slice(0,e).concat(t).concat(s.slice(e))}var z1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function iH(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(t){var r=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return s[t]}})}),e}function sH(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KC={};(function(s){var e=typeof z1!="undefined"?z1:window,t=Object.create(e);t.scheduleImmediate=t.setImmediate?function(l){e.setImmediate(l)}:function(l){setTimeout(l,0)},t.exports=s,typeof process!="undefined"&&(t.process=process),typeof __dirname!="undefined"&&(t.__dirname=__dirname),typeof __filename!="undefined"&&(t.__filename=__filename);var r=!e.window;try{typeof WorkerGlobalScope!="undefined"&&e instanceof WorkerGlobalScope&&(r=!1),e.process&&e.process.versions&&e.process.versions.hasOwnProperty("electron")&&e.process.versions.hasOwnProperty("node")&&(r=!0)}catch{}if(r){var o=(typeof __webpack_require__!="undefined"?__non_webpack_require__:sH)("url");t.location={get href(){return o.pathToFileURL?o.pathToFileURL(process.cwd()).href+"/":"file://"+function(){var l=process.cwd();return process.platform!="win32"?l:"/"+l.replace(/\\/g,"/")}()+"/"}},function(){function l(){try{throw new Error}catch(M){var h=M.stack,m=new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","mg"),y=null;do{var b=m.exec(h);b!=null&&(y=b)}while(b!=null);return y[1]}}var c=null;t.document={get currentScript(){return c==null&&(c={src:l()}),c}}}(),t.dartDeferredLibraryLoader=function(l,c,h){try{load(l),c()}catch(m){h(m)}}}(function(){function c(n,i){for(var a=Object.keys(n),f=0;f<a.length;f++){var g=a[f];i[g]=n[g]}}var h=function(){var n=function(){};n.prototype={p:{}};var i=new n;if(!(i.__proto__&&i.__proto__.p===n.prototype.p))return!1;try{if(typeof navigator!="undefined"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if(typeof version=="function"&&version.length==0){var a=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(a))return!0}}catch{}return!1}();function m(n){function i(){}if(typeof i.name!="string")for(var a=0;a<n.length;a++)for(var f=n[a],g=Object.keys(f),v=0;v<g.length;v++){var S=g[v],R=f[S];typeof R=="function"&&(R.name=S)}}function y(n,i){if(n.prototype.constructor=n,n.prototype["$i"+n.name]=n,i!=null){if(h){n.prototype.__proto__=i.prototype;return}var a=Object.create(i.prototype);c(n.prototype,a),n.prototype=a}}function b(n,i){for(var a=0;a<i.length;a++)y(i[a],n)}function M(n,i){c(i.prototype,n.prototype),n.prototype.constructor=n}function C(n,i,a,f){var g=n;n[i]=g,n[a]=function(){n[a]=function(){p.w8(i)};var v,S=f;try{n[i]===g?(v=n[i]=S,v=n[i]=f()):v=n[i]}finally{v===S&&(n[i]=null),n[a]=function(){return this[i]}}return v}}function I(n,i,a,f){var g=n;n[i]=g,n[a]=function(){return n[i]===g&&(n[i]=f()),n[a]=function(){return this[i]},n[i]}}function O(n){return n.immutable$list=Array,n.fixed$length=Array,n}function U(n){return n}function H(n){for(var i=0;i<n.length;++i)U(n[i])}var P=0;function A(n,i,a,f,g){return g?new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+P+++"(receiver) {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, true, name);return new c(this, funcs[0], receiver, name);}")(n,i,a,f,p,null):new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+f+P+++"() {if (c === null) c = H.mX(this, funcs, applyTrampolineIndex, reflectionInfo, false, false, name);return new c(this, funcs[0], null, name);}")(n,i,a,f,p,null)}function F(n,i,a,f,g,v){var S=null;return f?function(){return S===null&&(S=p.mX(this,n,i,a,!0,!1,g).prototype),S}:A(n,i,a,g,v)}var L=0;function B(n,i,a,f,g,v,S,R,k,D){for(var V=[],G=0;G<R.length;G++){var K=R[G];typeof K=="string"&&(K=n[K]),K.$callName=S[G],V.push(K)}var K=V[0];K.$R=g,K.$D=v;var Q=k;typeof Q=="number"&&(Q+=L);var ne=R[0];K.$stubName=ne;var ie=F(V,D||0,Q,a,ne,f);n[i]=ie,a&&(K.$tearOff=ie)}function z(n,i,a,f,g,v,S,R){return B(n,i,!0,!1,a,f,g,v,S,R)}function q(n,i,a,f,g,v,S,R,k){return B(n,i,!1,a,f,g,v,S,R,k)}function Z(n){var i=et.interceptorsByTag;if(!i){et.interceptorsByTag=n;return}c(n,i)}function ae(n){var i=et.leafTags;if(!i){et.leafTags=n;return}c(n,i)}function ce(n){var i=et.types,a=i.length;return i.push.apply(i,n),a}function ee(n,i){return c(i,n),n}var ue=function(){var n=function(a,f,g,v,S){return function(R,k,D,V){return q(R,k,a,f,g,v,[D],V,S)}},i=function(a,f,g,v){return function(S,R,k,D){return z(S,R,a,f,g,[k],D,v)}};return{inherit:y,inheritMany:b,mixin:M,installStaticTearOff:z,installInstanceTearOff:q,_instance_0u:n(0,0,null,["$0"],0),_instance_1u:n(0,1,null,["$1"],0),_instance_2u:n(0,2,null,["$2"],0),_instance_0i:n(1,0,null,["$0"],0),_instance_1i:n(1,1,null,["$1"],0),_instance_2i:n(1,2,null,["$2"],0),_static_0:i(0,null,["$0"],0),_static_1:i(1,null,["$1"],0),_static_2:i(2,null,["$2"],0),makeConstList:O,lazy:I,lazyOld:C,updateHolder:ee,convertToFastObject:U,setFunctionNamesIfNecessary:m,updateTypes:ce,setOrUpdateInterceptorsByTag:Z,setOrUpdateLeafTags:ae}}();function le(n){for(var i=0;i<yt.length;i++)if(yt[i]!=w&&yt[i][n])return yt[i][n]}var w={},p={mD:function(){},fP:function(n,i,a){return i.h("n<0>").b(n)?new p.dC(n,i.h("@<0>").D(a).h("dC<1,2>")):new p.bX(n,i.h("@<0>").D(a).h("bX<1,2>"))},nM:function(n){return new p.eD(n)},m8:function(n){var i,a=n^48;return a<=9?a:(i=n|32,97<=i&&i<=102?i-87:-1)},p5:function(n,i){var a=p.m8(w.a.A(n,i)),f=p.m8(w.a.A(n,i+1));return a*16+f-(f&256)},du:function(n,i,a,f){return E.aU(i,"start"),a!=null&&(E.aU(a,"end"),i>a&&p.a2(E.S(i,0,a,"start",null))),new p.dt(n,i,a,f.h("dt<0>"))},ja:function(n,i,a,f){return X.O.b(n)?new p.c_(n,i,a.h("@<0>").D(f).h("c_<1,2>")):new p.b9(n,i,a.h("@<0>").D(f).h("b9<1,2>"))},o5:function(n,i,a){var f="count";return X.O.b(n)?(E.aM(i,f),E.aU(i,f),new p.cw(n,i,a.h("cw<0>"))):(E.aM(i,f),E.aU(i,f),new p.bc(n,i,a.h("bc<0>")))},mB:function(){return new E.bz("No element")},tg:function(){return new E.bz("Too few elements")},bE:function(){},d3:function(i,a){this.a=i,this.$ti=a},bX:function(i,a){this.a=i,this.$ti=a},dC:function(i,a){this.a=i,this.$ti=a},dx:function(){},b3:function(i,a){this.a=i,this.$ti=a},bY:function(i,a){this.a=i,this.$ti=a},fQ:function(i,a){this.a=i,this.b=a},eD:function(i){this.a=i},cu:function(i){this.a=i},n:function(){},af:function(){},dt:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.$ti=g},a6:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},b9:function(i,a,f){this.a=i,this.b=a,this.$ti=f},c_:function(i,a,f){this.a=i,this.b=a,this.$ti=f},a7:function(i,a,f){var g=this;g.a=null,g.b=i,g.c=a,g.$ti=f},a8:function(i,a,f){this.a=i,this.b=a,this.$ti=f},l_:function(i,a,f){this.a=i,this.b=a,this.$ti=f},cm:function(i,a,f){this.a=i,this.b=a,this.$ti=f},bc:function(i,a,f){this.a=i,this.b=a,this.$ti=f},cw:function(i,a,f){this.a=i,this.b=a,this.$ti=f},dr:function(i,a,f){this.a=i,this.b=a,this.$ti=f},b6:function(i){this.$ti=i},d6:function(i){this.$ti=i},d8:function(){},f7:function(){},cI:function(){},cG:function(i){this.a=i},e4:function(){},t2:function(){throw p.c(E.ab("Cannot modify unmodifiable Map"))},pd:function(n){var i,a=p.pc(n);return a!=null?a:(i="minified:"+n,i)},p1:function(n,i){var a;return i!=null&&(a=i.x,a!=null)?a:X.aU.b(n)},b:function(n){var i;if(typeof n=="string")return n;if(typeof n=="number"){if(n!==0)return""+n}else{if(n===!0)return"true";if(n===!1)return"false";if(n==null)return"null"}if(i=J.ag(n),typeof i!="string")throw p.c(p.bM(n));return i},cj:function(n){var i=n.$identityHash;return i==null&&(i=Math.random()*1073741823|0,n.$identityHash=i),i},o1:function(n,i){var a,f,g,v,S,R,k=null;if(typeof n!="string"&&p.a2(p.bM(n)),a=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(n),a==null)return k;if(f=a[3],i==null)return f!=null?parseInt(n,10):a[2]!=null?parseInt(n,16):k;if(i<2||i>36)throw p.c(E.S(i,2,36,"radix",k));if(i===10&&f!=null)return parseInt(n,10);if(i<10||f==null){for(g=i<=10?47+i:86+i,v=a[1],S=v.length,R=0;R<S;++R)if((w.a.H(v,R)|32)>g)return k}return parseInt(n,i)},ju:function(n){return p.tG(n)},tG:function(n){var i,a,f;if(n instanceof E.e)return p.az(p.ac(n),null);if(J.cq(n)===w.by||X.ak.b(n)){if(i=w.a_(n),p.nV(i))return i;if(a=n.constructor,typeof a=="function"&&(f=a.name,typeof f=="string"&&p.nV(f)))return f}return p.az(p.ac(n),null)},nV:function(n){var i=n!=="Object"&&n!=="";return i},nU:function(n){var i,a,f,g,v=n.length;if(v<=500)return String.fromCharCode.apply(null,n);for(i="",a=0;a<v;a=f)f=a+500,g=f<v?f:v,i+=String.fromCharCode.apply(null,n.slice(a,g));return i},tJ:function(n){var i,a,f,g=p.a([],X.Z);for(i=n.length,a=0;a<n.length;n.length===i||(0,p.cs)(n),++a){if(f=n[a],!p.aJ(f))throw p.c(p.bM(f));if(f<=65535)g.push(f);else if(f<=1114111)g.push(55296+(w.c.ad(f-65536,10)&1023)),g.push(56320+(f&1023));else throw p.c(p.bM(f))}return p.nU(g)},tI:function(n){var i,a,f;for(i=n.length,a=0;a<i;++a){if(f=n[a],!p.aJ(f)||f<0)throw p.c(p.bM(f));if(f>65535)return p.tJ(n)}return p.nU(n)},tK:function(n,i,a){var f,g,v,S;if(a<=500&&i===0&&a===n.length)return String.fromCharCode.apply(null,n);for(f=i,g="";f<a;f=v)v=f+500,S=v<a?v:a,g+=String.fromCharCode.apply(null,n.subarray(f,S));return g},ba:function(n){var i;if(0<=n){if(n<=65535)return String.fromCharCode(n);if(n<=1114111)return i=n-65536,String.fromCharCode((55296|w.c.ad(i,10))>>>0,56320|i&1023)}throw p.c(E.S(n,0,1114111,null,null))},aw:function(n){return n.date===void 0&&(n.date=new Date(n.a)),n.date},eV:function(n){return n.b?p.aw(n).getUTCFullYear()+0:p.aw(n).getFullYear()+0},o_:function(n){return n.b?p.aw(n).getUTCMonth()+1:p.aw(n).getMonth()+1},nW:function(n){return n.b?p.aw(n).getUTCDate()+0:p.aw(n).getDate()+0},nX:function(n){return n.b?p.aw(n).getUTCHours()+0:p.aw(n).getHours()+0},nZ:function(n){return n.b?p.aw(n).getUTCMinutes()+0:p.aw(n).getMinutes()+0},o0:function(n){return n.b?p.aw(n).getUTCSeconds()+0:p.aw(n).getSeconds()+0},nY:function(n){return n.b?p.aw(n).getUTCMilliseconds()+0:p.aw(n).getMilliseconds()+0},bu:function(n,i,a){var f,g,v={};return v.a=0,f=[],g=[],v.a=i.length,w.d.K(f,i),v.b="",a!=null&&a.a!==0&&a.J(0,new p.jt(v,g,f)),""+v.a,J.ry(n,new p.ig(w.d5,0,f,g,0))},tH:function(n,i,a){var f,g,v,S;if(i instanceof Array?f=a==null||a.a===0:f=!1,f){if(g=i,v=g.length,v===0){if(n.$0)return n.$0()}else if(v===1){if(n.$1)return n.$1(g[0])}else if(v===2){if(n.$2)return n.$2(g[0],g[1])}else if(v===3){if(n.$3)return n.$3(g[0],g[1],g[2])}else if(v===4){if(n.$4)return n.$4(g[0],g[1],g[2],g[3])}else if(v===5&&n.$5)return n.$5(g[0],g[1],g[2],g[3],g[4]);if(S=n["$"+v],S!=null)return S.apply(n,g)}return p.tF(n,i,a)},tF:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q,ne,ie;if(i!=null?f=i instanceof Array?i:E.dh(i,!0,X.z):f=[],g=f.length,v=n.$R,g<v)return p.bu(n,f,a);if(S=n.$D,R=S==null,k=R?null:S(),D=J.cq(n),V=D.$C,typeof V=="string"&&(V=D[V]),R)return a!=null&&a.a!==0?p.bu(n,f,a):g===v?V.apply(n,f):p.bu(n,f,a);if(k instanceof Array)return a!=null&&a.a!==0?p.bu(n,f,a):g>v+k.length?p.bu(n,f,null):(w.d.K(f,k.slice(g-v)),V.apply(n,f));if(g>v)return p.bu(n,f,a);if(G=Object.keys(k),a==null)for(R=G.length,K=0;K<G.length;G.length===R||(0,p.cs)(G),++K){if(Q=k[G[K]],w.a4===Q)return p.bu(n,f,a);w.d.B(f,Q)}else{for(R=G.length,ne=0,K=0;K<G.length;G.length===R||(0,p.cs)(G),++K)if(ie=G[K],a.w(ie))++ne,w.d.B(f,a.j(0,ie));else{if(Q=k[ie],w.a4===Q)return p.bu(n,f,a);w.d.B(f,Q)}if(ne!==a.a)return p.bu(n,f,a)}return V.apply(n,f)},ef:function(n,i){var a,f="index";return p.aJ(i)?(a=J.X(n),i<0||i>=a?E.ex(i,n,f,null,a):E.jv(i,f)):new E.ak(!0,i,f,null)},vw:function(n,i,a){return n<0||n>a?E.S(n,0,a,"start",null):i!=null&&(i<n||i>a)?E.S(i,n,a,"end",null):new E.ak(!0,i,"end",null)},bM:function(n){return new E.ak(!0,n,null,null)},c:function(n){var i,a;return n==null&&(n=new E.eR),i=new Error,i.dartException=n,a=p.w9,"defineProperty"in Object?(Object.defineProperty(i,"message",{get:a}),i.name=""):i.toString=a,i},w9:function(){return J.ag(this.dartException)},a2:function(n){throw p.c(n)},cs:function(n){throw p.c(E.ad(n))},bd:function(n){var i,a,f,g,v,S;return n=p.p8(n.replace(String({}),"$receiver$")),i=n.match(/\\\$[a-zA-Z]+\\\$/g),i==null&&(i=p.a([],X.s)),a=i.indexOf("\\$arguments\\$"),f=i.indexOf("\\$argumentsExpr\\$"),g=i.indexOf("\\$expr\\$"),v=i.indexOf("\\$method\\$"),S=i.indexOf("\\$receiver\\$"),new p.kJ(n.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),a,f,g,v,S)},kK:function(n){return function(i){var a="$arguments$";try{i.$method$(a)}catch(f){return f.message}}(n)},o8:function(n){return function(i){try{i.$method$}catch(a){return a.message}}(n)},nT:function(n,i){return new p.eQ(n,i==null?null:i.method)},mE:function(n,i){var a=i==null,f=a?null:i.method;return new p.eC(n,f,a?null:i.receiver)},E:function(n){return n==null?new p.eS(n):n instanceof p.d7?p.bN(n,n.a):typeof n!="object"?n:"dartException"in n?p.bN(n,n.dartException):p.vc(n)},bN:function(n,i){return X.C.b(i)&&i.$thrownJsError==null&&(i.$thrownJsError=n),i},vc:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie=null;if(!("message"in n))return n;if(i=n.message,"number"in n&&typeof n.number=="number"&&(a=n.number,f=a&65535,(w.c.ad(a,16)&8191)==10))switch(f){case 438:return p.bN(n,p.mE(p.b(i)+" (Error "+f+")",ie));case 445:case 5007:return p.bN(n,p.nT(p.b(i)+" (Error "+f+")",ie))}return n instanceof TypeError?(g=j.r9(),v=j.ra(),S=j.rb(),R=j.rc(),k=j.rf(),D=j.rg(),V=j.re(),j.rd(),G=j.ri(),K=j.rh(),Q=g.a4(i),Q!=null?p.bN(n,p.mE(i,Q)):(Q=v.a4(i),Q!=null?(Q.method="call",p.bN(n,p.mE(i,Q))):(Q=S.a4(i),Q==null?(Q=R.a4(i),Q==null?(Q=k.a4(i),Q==null?(Q=D.a4(i),Q==null?(Q=V.a4(i),Q==null?(Q=R.a4(i),Q==null?(Q=G.a4(i),Q==null?(Q=K.a4(i),ne=Q!=null):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0):ne=!0,ne?p.bN(n,p.nT(i,Q)):p.bN(n,new p.f6(typeof i=="string"?i:""))))):n instanceof RangeError?typeof i=="string"&&i.indexOf("call stack")!==-1?new E.ds:(i=function(fe){try{return String(fe)}catch{}return null}(n),p.bN(n,new E.ak(!1,ie,ie,typeof i=="string"?i.replace(/^RangeError:\s*/,""):i))):typeof InternalError=="function"&&n instanceof InternalError&&typeof i=="string"&&i==="too much recursion"?new E.ds:n},aK:function(n){var i;return n instanceof p.d7?n.b:n==null?new p.dS(n):(i=n.$cachedTrace,i!=null?i:n.$cachedTrace=new p.dS(n))},p4:function(n){return n==null||typeof n!="object"?J.aL(n):p.cj(n)},oU:function(n,i){var a,f,g,v=n.length;for(a=0;a<v;a=g)f=a+1,g=f+1,i.m(0,n[a],n[f]);return i},vA:function(n,i){var a,f=n.length;for(a=0;a<f;++a)i.B(0,n[a]);return i},vK:function(n,i,a,f,g,v){switch(i){case 0:return n.$0();case 1:return n.$1(a);case 2:return n.$2(a,f);case 3:return n.$3(a,f,g);case 4:return n.$4(a,f,g,v)}throw p.c(E.t7("Unsupported number of arguments for wrapped closure"))},m0:function(n,i){var a;return n==null?null:(a=n.$identity,a||(a=function(f,g,v){return function(S,R,k,D){return v(f,g,S,R,k,D)}}(n,i,p.vK),n.$identity=a,a))},t1:function(n,i,a,f,g,v,S){var R,k,D,V,G,K,Q,ne=i[0],ie=ne.$callName,fe=Object.create(g?new p.f_().constructor.prototype:new p.ct(null,null,null,"").constructor.prototype);for(fe.$initialize=fe.constructor,g?R=function(){this.$initialize()}:(k=j.b4,j.b4=k+1,k=new Function("a,b,c,d"+k,"this.$initialize(a,b,c,d"+k+")"),R=k),fe.constructor=R,R.prototype=fe,g?(fe.$static_name=S,D=ne):(D=p.nF(n,ne,v),D.$reflectionInfo=f),fe.$S=p.rY(f,g,v),fe[ie]=D,V=D,G=1;G<i.length;++G)K=i[G],Q=K.$callName,Q!=null&&(K=g?K:p.nF(n,K,v),fe[Q]=K),G===a&&(K.$reflectionInfo=f,V=K);return fe.$C=V,fe.$R=ne.$R,fe.$D=ne.$D,R},rY:function(n,i,a){var f;if(typeof n=="number")return function(g,v){return function(){return g(v)}}(p.oZ,n);if(typeof n=="string"){if(i)throw p.c("Cannot compute signature for static tearoff.");return f=a?p.rR:p.rQ,function(g,v){return function(){return v(this,g)}}(n,f)}throw p.c("Error in functionType of tearoff")},rZ:function(n,i,a,f){var g=p.nE;switch(i?-1:n){case 0:return function(v,S){return function(){return S(this)[v]()}}(a,g);case 1:return function(v,S){return function(R){return S(this)[v](R)}}(a,g);case 2:return function(v,S){return function(R,k){return S(this)[v](R,k)}}(a,g);case 3:return function(v,S){return function(R,k,D){return S(this)[v](R,k,D)}}(a,g);case 4:return function(v,S){return function(R,k,D,V){return S(this)[v](R,k,D,V)}}(a,g);case 5:return function(v,S){return function(R,k,D,V,G){return S(this)[v](R,k,D,V,G)}}(a,g);default:return function(v,S){return function(){return v.apply(S(this),arguments)}}(f,g)}},nF:function(n,i,a){var f,g,v,S,R,k,D;return a?p.t0(n,i):(f=i.$stubName,g=i.length,v=n[f],S=i==null?v==null:i===v,R=!S||g>=27,R?p.rZ(g,!S,f,i):g===0?(S=j.b4,j.b4=S+1,k="self"+p.b(S),new Function("return function(){var "+k+" = this."+p.b(p.mA())+";return "+k+"."+p.b(f)+"();}")()):(D="abcdefghijklmnopqrstuvwxyz".split("").splice(0,g).join(","),S=j.b4,j.b4=S+1,D+=p.b(S),new Function("return function("+D+"){return this."+p.b(p.mA())+"."+p.b(f)+"("+D+");}")()))},t_:function(n,i,a,f){var g=p.nE,v=p.rS;switch(i?-1:n){case 0:throw p.c(new p.eZ("Intercepted function with no arguments."));case 1:return function(S,R,k){return function(){return R(this)[S](k(this))}}(a,g,v);case 2:return function(S,R,k){return function(D){return R(this)[S](k(this),D)}}(a,g,v);case 3:return function(S,R,k){return function(D,V){return R(this)[S](k(this),D,V)}}(a,g,v);case 4:return function(S,R,k){return function(D,V,G){return R(this)[S](k(this),D,V,G)}}(a,g,v);case 5:return function(S,R,k){return function(D,V,G,K){return R(this)[S](k(this),D,V,G,K)}}(a,g,v);case 6:return function(S,R,k){return function(D,V,G,K,Q){return R(this)[S](k(this),D,V,G,K,Q)}}(a,g,v);default:return function(S,R,k,D){return function(){return D=[k(this)],Array.prototype.push.apply(D,arguments),S.apply(R(this),D)}}(f,g,v)}},t0:function(n,i){var a,f,g,v,S,R,k=p.mA(),D=j.nC;return D==null&&(D=j.nC=p.nB("receiver")),a=i.$stubName,f=i.length,g=n[a],v=i==null?g==null:i===g,S=!v||f>=28,S?p.t_(f,!v,a,i):f===1?(v="return function(){return this."+p.b(k)+"."+p.b(a)+"(this."+D+");",S=j.b4,j.b4=S+1,new Function(v+p.b(S)+"}")()):(R="abcdefghijklmnopqrstuvwxyz".split("").splice(0,f-1).join(","),v="return function("+R+"){return this."+p.b(k)+"."+p.b(a)+"(this."+D+", "+R+");",S=j.b4,j.b4=S+1,new Function(v+p.b(S)+"}")())},mX:function(n,i,a,f,g,v,S){return p.t1(n,i,a,f,!!g,!!v,S)},rQ:function(n,i){return p.fv(et.typeUniverse,p.ac(n.a),i)},rR:function(n,i){return p.fv(et.typeUniverse,p.ac(n.c),i)},nE:function(n){return n.a},rS:function(n){return n.c},mA:function(){var n=j.nD;return n==null?j.nD=p.nB("self"):n},nB:function(n){var i,a,f,g=new p.ct("self","target","receiver","name"),v=J.mC(Object.getOwnPropertyNames(g));for(i=v.length,a=0;a<i;++a)if(f=v[a],g[f]===n)return f;throw p.c(E.O("Field name "+n+" not found."))},w8:function(n){throw p.c(new E.er(n))},vF:function(n){return et.getIsolateTag(n)},zh:function(n,i,a){Object.defineProperty(n,i,{value:a,enumerable:!1,writable:!0,configurable:!0})},vX:function(n){var i,a,f,g,v,S=j.oY.$1(n),R=j.m1[S];if(R!=null)return Object.defineProperty(n,et.dispatchPropertyName,{value:R,enumerable:!1,writable:!0,configurable:!0}),R.i;if(i=j.mc[S],i!=null)return i;if(a=et.interceptorsByTag[S],a==null&&(f=j.oR.$2(n,S),f!=null)){if(R=j.m1[f],R!=null)return Object.defineProperty(n,et.dispatchPropertyName,{value:R,enumerable:!1,writable:!0,configurable:!0}),R.i;if(i=j.mc[f],i!=null)return i;a=et.interceptorsByTag[f],S=f}if(a==null)return null;if(i=a.prototype,g=S[0],g==="!")return R=p.mp(i),j.m1[S]=R,Object.defineProperty(n,et.dispatchPropertyName,{value:R,enumerable:!1,writable:!0,configurable:!0}),R.i;if(g==="~")return j.mc[S]=i,i;if(g==="-")return v=p.mp(i),Object.defineProperty(Object.getPrototypeOf(n),et.dispatchPropertyName,{value:v,enumerable:!1,writable:!0,configurable:!0}),v.i;if(g==="+")return p.p6(n,i);if(g==="*")throw p.c(E.o9(S));return et.leafTags[S]===!0?(v=p.mp(i),Object.defineProperty(Object.getPrototypeOf(n),et.dispatchPropertyName,{value:v,enumerable:!1,writable:!0,configurable:!0}),v.i):p.p6(n,i)},p6:function(n,i){var a=Object.getPrototypeOf(n);return Object.defineProperty(a,et.dispatchPropertyName,{value:J.n3(i,a,null,null),enumerable:!1,writable:!0,configurable:!0}),i},mp:function(n){return J.n3(n,!1,null,!!n.$iat)},vY:function(n,i,a){var f=i.prototype;return et.leafTags[n]===!0?p.mp(f):J.n3(f,a,null,null)},vI:function(){j.n1!==!0&&(j.n1=!0,p.vJ())},vJ:function(){var n,i,a,f,g,v,S,R;if(j.m1=Object.create(null),j.mc=Object.create(null),p.vH(),n=et.interceptorsByTag,i=Object.getOwnPropertyNames(n),typeof window!="undefined")for(a=function(){},f=0;f<i.length;++f)g=i[f],v=j.p7.$1(g),v!=null&&(S=p.vY(g,n[g],v),S!=null&&(Object.defineProperty(v,et.dispatchPropertyName,{value:S,enumerable:!1,writable:!0,configurable:!0}),a.prototype=v));for(f=0;f<i.length;++f)g=i[f],/^[A-Za-z_]/.test(g)&&(R=n[g],n["!"+g]=R,n["~"+g]=R,n["-"+g]=R,n["+"+g]=R,n["*"+g]=R)},vH:function(){var n,i,a,f,g,v,S=w.b8();if(S=p.d_(w.b9,p.d_(w.ba,p.d_(w.a0,p.d_(w.a0,p.d_(w.bb,p.d_(w.bc,p.d_(w.bd(w.a_),S))))))),typeof dartNativeDispatchHooksTransformer!="undefined"&&(n=dartNativeDispatchHooksTransformer,typeof n=="function"&&(n=[n]),n.constructor==Array))for(i=0;i<n.length;++i)a=n[i],typeof a=="function"&&(S=a(S)||S);f=S.getTag,g=S.getUnknownTag,v=S.prototypeForTag,j.oY=new p.m9(f),j.oR=new p.ma(g),j.p7=new p.mb(v)},d_:function(n,i){return n(i)||i},tj:function(n,i,a,f,g,v){var S=i?"m":"",R=a?"":"i",k=f?"u":"",D=g?"s":"",V=v?"g":"",G=function(K,Q){try{return new RegExp(K,Q)}catch(ne){return ne}}(n,S+R+k+D+V);if(G instanceof RegExp)return G;throw p.c(E.K("Illegal RegExp pattern ("+String(G)+")",n,null))},vx:function(n){return n.indexOf("$",0)>=0?n.replace(/\$/g,"$$$$"):n},p8:function(n){return/[[\]{}()*+?.\\^$|]/.test(n)?n.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&"):n},pa:function(n,i,a){var f=p.w6(n,i,a);return f},w6:function(n,i,a){var f,g,v,S;if(i===""){if(n==="")return a;for(f=n.length,g=a,v=0;v<f;++v)g=g+n[v]+a;return g.charCodeAt(0)==0,g}return S=n.indexOf(i,0),S<0?n:n.length<500||a.indexOf("$",0)>=0?n.split(i).join(a):n.replace(new RegExp(p.p8(i),"g"),p.vx(a))},d4:function(i,a){this.a=i,this.$ti=a},cv:function(){},aq:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.$ti=g},dz:function(i,a){this.a=i,this.$ti=a},al:function(i,a){this.a=i,this.$ti=a},ig:function(i,a,f,g,v){var S=this;S.a=i,S.c=a,S.d=f,S.e=g,S.f=v},jt:function(i,a,f){this.a=i,this.b=a,this.c=f},kJ:function(i,a,f,g,v,S){var R=this;R.a=i,R.b=a,R.c=f,R.d=g,R.e=v,R.f=S},eQ:function(i,a){this.a=i,this.b=a},eC:function(i,a,f){this.a=i,this.b=a,this.c=f},f6:function(i){this.a=i},eS:function(i){this.a=i},d7:function(i,a){this.a=i,this.b=a},dS:function(i){this.a=i,this.b=null},bZ:function(){},f1:function(){},f_:function(){},ct:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},eZ:function(i){this.a=i},lA:function(){},aG:function(i){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=i},im:function(i){this.a=i},j7:function(i,a){this.a=i,this.b=a,this.c=null},au:function(i,a){this.a=i,this.$ti=a},df:function(i,a,f){var g=this;g.a=i,g.b=a,g.d=g.c=null,g.$ti=f},m9:function(i){this.a=i},ma:function(i){this.a=i},mb:function(i){this.a=i},ih:function(i,a){var f=this;f.a=i,f.b=a,f.d=f.c=null},ly:function(i){this.b=i},cW:function(n,i,a){},uH:function(n){return n},jm:function(n,i,a){var f;return p.cW(n,i,a),f=new DataView(n,i),f},ty:function(n){return new Float32Array(n)},tz:function(n){return new Int8Array(n)},nQ:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint16Array(n,i,a),f},nR:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint32Array(n,i,a),f},tA:function(n){return new Uint8Array(n)},mH:function(n,i,a){var f;return p.cW(n,i,a),f=new Uint8Array(n,i,a),f},bf:function(n,i,a){if(n>>>0!==n||n>=a)throw p.c(p.ef(i,n))},bJ:function(n,i,a){var f;if(n>>>0===n?f=i>>>0!==i||n>i||i>a:f=!0,f)throw p.c(p.vw(n,i,a));return i},dm:function(){},cE:function(){},dl:function(){},av:function(){},dk:function(){},eI:function(){},eJ:function(){},eK:function(){},eL:function(){},eM:function(){},eN:function(){},dn:function(){},cf:function(){},dO:function(){},dP:function(){},dQ:function(){},dR:function(){},tN:function(n,i){var a=i.c;return a==null?i.c=p.mP(n,i.z,!0):a},o3:function(n,i){var a=i.c;return a==null?i.c=p.dZ(n,"ae",[i.z]):a},o4:function(n){var i=n.y;return i===6||i===7||i===8?p.o4(n.z):i===11||i===12},tM:function(n){return n.cy},ap:function(n){return p.fu(et.typeUniverse,n,!1)},bL:function(n,i,a,f){var g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe=i.y;switch(Fe){case 5:case 1:case 2:case 3:case 4:return i;case 6:return g=i.z,v=p.bL(n,g,a,f),v===g?i:p.ou(n,v,!0);case 7:return g=i.z,v=p.bL(n,g,a,f),v===g?i:p.mP(n,v,!0);case 8:return g=i.z,v=p.bL(n,g,a,f),v===g?i:p.ot(n,v,!0);case 9:return S=i.Q,R=p.ed(n,S,a,f),R===S?i:p.dZ(n,i.z,R);case 10:return k=i.z,D=p.bL(n,k,a,f),V=i.Q,G=p.ed(n,V,a,f),D===k&&G===V?i:p.mN(n,D,G);case 11:return K=i.z,Q=p.bL(n,K,a,f),ne=i.Q,ie=p.v9(n,ne,a,f),Q===K&&ie===ne?i:p.os(n,Q,ie);case 12:return fe=i.Q,f+=fe.length,me=p.ed(n,fe,a,f),k=i.z,D=p.bL(n,k,a,f),me===fe&&D===k?i:p.mO(n,D,me,!0);case 13:return Ie=i.z,Ie<f||(Xe=a[Ie-f],Xe==null)?i:Xe;default:throw p.c(E.fJ("Attempted to substitute unexpected RTI kind "+Fe))}},ed:function(n,i,a,f){var g,v,S,R,k=i.length,D=[];for(g=!1,v=0;v<k;++v)S=i[v],R=p.bL(n,S,a,f),R!==S&&(g=!0),D.push(R);return g?D:i},va:function(n,i,a,f){var g,v,S,R,k,D,V=i.length,G=[];for(g=!1,v=0;v<V;v+=3)S=i[v],R=i[v+1],k=i[v+2],D=p.bL(n,k,a,f),D!==k&&(g=!0),G.push(S),G.push(R),G.push(D);return g?G:i},v9:function(n,i,a,f){var g,v=i.a,S=p.ed(n,v,a,f),R=i.b,k=p.ed(n,R,a,f),D=i.c,V=p.va(n,D,a,f);return S===v&&k===R&&V===D?i:(g=new p.fj,g.a=S,g.b=k,g.c=V,g)},a:function(n,i){return n[et.arrayRti]=i,n},vt:function(n){var i=n.$S;return i!=null?typeof i=="number"?p.oZ(i):n.$S():null},p0:function(n,i){var a;return p.o4(i)&&n instanceof p.bZ&&(a=p.vt(n),a!=null)?a:p.ac(n)},ac:function(n){var i;return n instanceof E.e?(i=n.$ti,i!=null?i:p.mS(n)):Array.isArray(n)?p.U(n):p.mS(J.cq(n))},U:function(n){var i=n[et.arrayRti],a=X.b;return i==null||i.constructor!==a.constructor?a:i},r:function(n){var i=n.$ti;return i!=null?i:p.mS(n)},mS:function(n){var i=n.constructor,a=i.$ccache;return a!=null?a:p.uR(n,i)},uR:function(n,i){var a=n instanceof p.bZ?n.__proto__.__proto__.constructor:i,f=p.uj(et.typeUniverse,a.name);return i.$ccache=f,f},oZ:function(n){var i,a=et.types,f=a[n];return typeof f=="string"?(i=p.fu(et.typeUniverse,f,!1),a[n]=i,i):f},vu:function(n){var i,a,f,g=n.x;return g!=null?g:(i=n.cy,a=i.replace(/\*/g,""),a===i?n.x=new p.dX(n):(f=p.fu(et.typeUniverse,a,!0),g=f.x,n.x=g==null?f.x=new p.dX(f):g))},B:function(n){return p.vu(p.fu(et.typeUniverse,n,!1))},uQ:function(n){var i,a,f=this,g=X.K;if(f===g)return p.e8(f,n,p.uU);if(p.bh(f)?g=!0:f!==X._?g=f===g:g=!0,g)return p.e8(f,n,p.uX);if(g=f.y,i=g===6?f.z:f,i===X.r?a=p.aJ:i===X.gR||i===X.di?a=p.uT:i===X.S?a=p.uV:a=i===X.cJ?p.e9:null,a!=null)return p.e8(f,n,a);if(i.y===9){if(g=i.z,i.Q.every(p.vL))return f.r="$i"+g,p.e8(f,n,p.uW)}else if(g===7)return p.e8(f,n,p.uK);return p.e8(f,n,p.uI)},e8:function(n,i,a){return n.b=a,n.b(i)},uP:function(n){var i,a,f=this;return p.bh(f)?i=!0:f!==X._?i=f===X.K:i=!0,i?a=p.uB:f===X.K?a=p.uA:a=p.uJ,f.a=a,f.a(n)},v1:function(n){var i,a=n.y;return p.bh(n)?i=!0:n!==X._?i=n===X.K:i=!0,i||n===X.A||a===7||n===X.P||n===X.T},uI:function(n){var i=this;return n==null?p.v1(i):p.a1(et.typeUniverse,p.p0(n,i),null,i,null)},uK:function(n){return n==null?!0:this.z.b(n)},uW:function(n){var i=this,a=i.r;return n instanceof E.e?!!n[a]:!!J.cq(n)[a]},zb:function(n){var i=this;if(n==null)return n;if(i.b(n))return n;p.oF(n,i)},uJ:function(n){var i=this;if(n==null)return n;if(i.b(n))return n;p.oF(n,i)},oF:function(n,i){throw p.c(p.u9(p.ok(n,p.p0(n,i),p.az(i,null))))},ok:function(n,i,a){var f=E.cx(n),g=p.az(i==null?p.ac(n):i,null);return f+": type '"+p.b(g)+"' is not a subtype of type '"+p.b(a)+"'"},u9:function(n){return new p.dY("TypeError: "+n)},ao:function(n,i){return new p.dY("TypeError: "+p.ok(n,null,i))},uU:function(n){return n!=null},uA:function(n){return n},uX:function(n){return!0},uB:function(n){return n},e9:function(n){return n===!0||n===!1},yW:function(n){if(n===!0)return!0;if(n===!1)return!1;throw p.c(p.ao(n,"bool"))},yY:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool"))},yX:function(n){if(n===!0)return!0;if(n===!1)return!1;if(n==null)return n;throw p.c(p.ao(n,"bool?"))},yZ:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"double"))},z0:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double"))},z_:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"double?"))},aJ:function(n){return typeof n=="number"&&Math.floor(n)===n},z1:function(n){if(typeof n=="number"&&Math.floor(n)===n)return n;throw p.c(p.ao(n,"int"))},z3:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int"))},z2:function(n){if(typeof n=="number"&&Math.floor(n)===n||n==null)return n;throw p.c(p.ao(n,"int?"))},uT:function(n){return typeof n=="number"},z4:function(n){if(typeof n=="number")return n;throw p.c(p.ao(n,"num"))},z6:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num"))},z5:function(n){if(typeof n=="number"||n==null)return n;throw p.c(p.ao(n,"num?"))},uV:function(n){return typeof n=="string"},z7:function(n){if(typeof n=="string")return n;throw p.c(p.ao(n,"String"))},z9:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String"))},z8:function(n){if(typeof n=="string"||n==null)return n;throw p.c(p.ao(n,"String?"))},v5:function(n,i){var a,f,g;for(a="",f="",g=0;g<n.length;++g,f=", ")a+=w.a.ah(f,p.az(n[g],i));return a},oH:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt=", ";if(a!=null){for(f=a.length,i==null?(i=p.a([],X.s),g=null):g=i.length,v=i.length,S=f;S>0;--S)i.push("T"+(v+S));for(R=X.x,k=X._,D=X.K,V="<",G="",S=0;S<f;++S,G=pt)V=w.a.ah(V+G,i[i.length-1-S]),K=a[S],Q=K.y,Q===2||Q===3||Q===4||Q===5||K===R?ne=!0:K!==k?ne=K===D:ne=!0,ne||(V+=w.a.ah(" extends ",p.az(K,i)));V+=">"}else V="",g=null;for(R=n.z,ie=n.Q,fe=ie.a,me=fe.length,Ie=ie.b,Xe=Ie.length,Fe=ie.c,mt=Fe.length,at=p.az(R,i),wt="",gt="",S=0;S<me;++S,gt=pt)wt+=w.a.ah(gt,p.az(fe[S],i));if(Xe>0){for(wt+=gt+"[",gt="",S=0;S<Xe;++S,gt=pt)wt+=w.a.ah(gt,p.az(Ie[S],i));wt+="]"}if(mt>0){for(wt+=gt+"{",gt="",S=0;S<mt;S+=3,gt=pt)wt+=gt,Fe[S+1]&&(wt+="required "),wt+=J.ns(p.az(Fe[S+2],i)," ")+Fe[S];wt+="}"}return g!=null&&(i.toString,i.length=g),V+"("+wt+") => "+p.b(at)},az:function(n,i){var a,f,g,v,S,R,k=n.y;return k===5?"erased":k===2?"dynamic":k===3?"void":k===1?"Never":k===4?"any":k===6?(a=p.az(n.z,i),a):k===7?(f=n.z,a=p.az(f,i),g=f.y,J.ns(g===11||g===12?w.a.ah("(",a)+")":a,"?")):k===8?"FutureOr<"+p.b(p.az(n.z,i))+">":k===9?(v=p.vb(n.z),S=n.Q,S.length!==0?v+("<"+p.v5(S,i)+">"):v):k===11?p.oH(n,i,null):k===12?p.oH(n.z,i,n.Q):k===13?(i.toString,R=n.z,i[i.length-1-R]):"?"},vb:function(n){var i,a=p.pc(n);return a!=null?a:(i="minified:"+n,i)},ov:function(n,i){for(var a=n.tR[i];typeof a=="string";)a=n.tR[a];return a},uj:function(n,i){var a,f,g,v,S,R=n.eT,k=R[i];if(k==null)return p.fu(n,i,!1);if(typeof k=="number"){for(a=k,f=p.e_(n,5,"#"),g=[],v=0;v<a;++v)g.push(f);return S=p.dZ(n,i,g),R[i]=S,S}else return k},uh:function(n,i){return p.oD(n.tR,i)},ug:function(n,i){return p.oD(n.eT,i)},fu:function(n,i,a){var f,g=n.eC,v=g.get(i);return v!=null?v:(f=p.or(p.op(n,null,i,a)),g.set(i,f),f)},fv:function(n,i,a){var f,g,v=i.ch;return v==null&&(v=i.ch=new Map),f=v.get(a),f!=null?f:(g=p.or(p.op(n,i,a,!0)),v.set(a,g),g)},ui:function(n,i,a){var f,g,v,S=i.cx;return S==null&&(S=i.cx=new Map),f=a.cy,g=S.get(f),g!=null?g:(v=p.mN(n,i,a.y===10?a.Q:[a]),S.set(f,v),v)},bI:function(n,i){return i.a=p.uP,i.b=p.uQ,i},e_:function(n,i,a){var f,g,v=n.eC.get(a);return v!=null?v:(f=new p.aI(null,null),f.y=i,f.cy=a,g=p.bI(n,f),n.eC.set(a,g),g)},ou:function(n,i,a){var f,g=i.cy+"*",v=n.eC.get(g);return v!=null?v:(f=p.ue(n,i,g,a),n.eC.set(g,f),f)},ue:function(n,i,a,f){var g,v,S;return f&&(g=i.y,p.bh(i)?v=!0:v=i===X.P||i===X.T||g===7||g===6,v)?i:(S=new p.aI(null,null),S.y=6,S.z=i,S.cy=a,p.bI(n,S))},mP:function(n,i,a){var f,g=i.cy+"?",v=n.eC.get(g);return v!=null?v:(f=p.ud(n,i,g,a),n.eC.set(g,f),f)},ud:function(n,i,a,f){var g,v,S,R;if(f){if(g=i.y,p.bh(i)||i===X.P||i===X.T?v=!0:g!==7?v=g===8&&p.md(i.z):v=!0,v)return i;if(g===1||i===X.A)return X.P;if(g===6)return S=i.z,S.y===8&&p.md(S.z)?S:p.tN(n,i)}return R=new p.aI(null,null),R.y=7,R.z=i,R.cy=a,p.bI(n,R)},ot:function(n,i,a){var f,g=i.cy+"/",v=n.eC.get(g);return v!=null?v:(f=p.ub(n,i,g,a),n.eC.set(g,f),f)},ub:function(n,i,a,f){var g,v,S;if(f){if(g=i.y,p.bh(i)?v=!0:i!==X._?v=i===X.K:v=!0,v||i===X.K)return i;if(g===1)return p.dZ(n,"ae",[i]);if(i===X.P||i===X.T)return X.eH}return S=new p.aI(null,null),S.y=8,S.z=i,S.cy=a,p.bI(n,S)},uf:function(n,i){var a,f,g=""+i+"^",v=n.eC.get(g);return v!=null?v:(a=new p.aI(null,null),a.y=13,a.z=i,a.cy=g,f=p.bI(n,a),n.eC.set(g,f),f)},ft:function(n){var i,a,f,g=n.length;for(i="",a="",f=0;f<g;++f,a=",")i+=a+n[f].cy;return i},ua:function(n){var i,a,f,g,v,S,R=n.length;for(i="",a="",f=0;f<R;f+=3,a=",")g=n[f],v=n[f+1]?"!":":",S=n[f+2].cy,i+=a+g+v+S;return i},dZ:function(n,i,a){var f,g,v,S=i;return a.length!==0&&(S+="<"+p.ft(a)+">"),f=n.eC.get(S),f!=null?f:(g=new p.aI(null,null),g.y=9,g.z=i,g.Q=a,a.length>0&&(g.c=a[0]),g.cy=S,v=p.bI(n,g),n.eC.set(S,v),v)},mN:function(n,i,a){var f,g,v,S,R,k;return i.y===10?(f=i.z,g=i.Q.concat(a)):(g=a,f=i),v=f.cy+(";<"+p.ft(g)+">"),S=n.eC.get(v),S!=null?S:(R=new p.aI(null,null),R.y=10,R.z=f,R.Q=g,R.cy=v,k=p.bI(n,R),n.eC.set(v,k),k)},os:function(n,i,a){var f,g,v,S,R,k=i.cy,D=a.a,V=D.length,G=a.b,K=G.length,Q=a.c,ne=Q.length,ie="("+p.ft(D);return K>0&&(f=V>0?",":"",g=p.ft(G),ie+=f+"["+g+"]"),ne>0&&(f=V>0?",":"",g=p.ua(Q),ie+=f+"{"+g+"}"),v=k+(ie+")"),S=n.eC.get(v),S!=null?S:(R=new p.aI(null,null),R.y=11,R.z=i,R.Q=a,R.cy=v,g=p.bI(n,R),n.eC.set(v,g),g)},mO:function(n,i,a,f){var g,v=i.cy+("<"+p.ft(a)+">"),S=n.eC.get(v);return S!=null?S:(g=p.uc(n,i,a,v,f),n.eC.set(v,g),g)},uc:function(n,i,a,f,g){var v,S,R,k,D,V,G,K;if(g){for(v=a.length,S=new Array(v),R=0,k=0;k<v;++k)D=a[k],D.y===1&&(S[k]=D,++R);if(R>0)return V=p.bL(n,i,S,0),G=p.ed(n,a,S,0),p.mO(n,V,G,a!==G)}return K=new p.aI(null,null),K.y=12,K.z=i,K.Q=a,K.cy=f,p.bI(n,K)},op:function(n,i,a,f){return{u:n,e:i,r:a,s:[],p:0,n:f}},or:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q=n.r,ne=n.s;for(i=Q.length,a=0;a<i;)if(f=Q.charCodeAt(a),f>=48&&f<=57)a=p.u4(a+1,f,Q,ne);else if((((f|32)>>>0)-97&65535)<26||f===95||f===36)a=p.oq(n,a,Q,ne,!1);else if(f===46)a=p.oq(n,a,Q,ne,!0);else switch(++a,f){case 44:break;case 58:ne.push(!1);break;case 33:ne.push(!0);break;case 59:ne.push(p.bH(n.u,n.e,ne.pop()));break;case 94:ne.push(p.uf(n.u,ne.pop()));break;case 35:ne.push(p.e_(n.u,5,"#"));break;case 64:ne.push(p.e_(n.u,2,"@"));break;case 126:ne.push(p.e_(n.u,3,"~"));break;case 60:ne.push(n.p),n.p=ne.length;break;case 62:if(g=n.u,v=ne.splice(n.p),p.mM(n.u,n.e,v),n.p=ne.pop(),S=ne.pop(),typeof S=="string")ne.push(p.dZ(g,S,v));else switch(R=p.bH(g,n.e,S),R.y){case 11:ne.push(p.mO(g,R,v,n.n));break;default:ne.push(p.mN(g,R,v));break}break;case 38:p.u5(n,ne);break;case 42:k=n.u,ne.push(p.ou(k,p.bH(k,n.e,ne.pop()),n.n));break;case 63:k=n.u,ne.push(p.mP(k,p.bH(k,n.e,ne.pop()),n.n));break;case 47:k=n.u,ne.push(p.ot(k,p.bH(k,n.e,ne.pop()),n.n));break;case 40:ne.push(n.p),n.p=ne.length;break;case 41:if(g=n.u,D=new p.fj,V=g.sEA,G=g.sEA,S=ne.pop(),typeof S=="number")switch(S){case-1:V=ne.pop();break;case-2:G=ne.pop();break;default:ne.push(S);break}else ne.push(S);v=ne.splice(n.p),p.mM(n.u,n.e,v),n.p=ne.pop(),D.a=v,D.b=V,D.c=G,ne.push(p.os(g,p.bH(g,n.e,ne.pop()),D));break;case 91:ne.push(n.p),n.p=ne.length;break;case 93:v=ne.splice(n.p),p.mM(n.u,n.e,v),n.p=ne.pop(),ne.push(v),ne.push(-1);break;case 123:ne.push(n.p),n.p=ne.length;break;case 125:v=ne.splice(n.p),p.u7(n.u,n.e,v),n.p=ne.pop(),ne.push(v),ne.push(-2);break;default:throw"Bad character "+f}return K=ne.pop(),p.bH(n.u,n.e,K)},u4:function(n,i,a,f){var g,v,S=i-48;for(g=a.length;n<g&&(v=a.charCodeAt(n),v>=48&&v<=57);++n)S=S*10+(v-48);return f.push(S),n},oq:function(n,i,a,f,g){var v,S,R,k,D,V,G=i+1;for(v=a.length;G<v;++G)if(S=a.charCodeAt(G),S===46){if(g)break;g=!0}else if((((S|32)>>>0)-97&65535)<26||S===95||S===36?R=!0:R=S>=48&&S<=57,!R)break;return k=a.substring(i,G),g?(v=n.u,D=n.e,D.y===10&&(D=D.z),V=p.ov(v,D.z)[k],V==null&&p.a2('No "'+k+'" in "'+p.tM(D)+'"'),f.push(p.fv(v,D,V))):f.push(k),G},u5:function(n,i){var a=i.pop();if(a===0){i.push(p.e_(n.u,1,"0&"));return}if(a===1){i.push(p.e_(n.u,4,"1&"));return}throw p.c(E.fJ("Unexpected extended operation "+p.b(a)))},bH:function(n,i,a){return typeof a=="string"?p.dZ(n,a,n.sEA):typeof a=="number"?p.u6(n,i,a):a},mM:function(n,i,a){var f,g=a.length;for(f=0;f<g;++f)a[f]=p.bH(n,i,a[f])},u7:function(n,i,a){var f,g=a.length;for(f=2;f<g;f+=3)a[f]=p.bH(n,i,a[f])},u6:function(n,i,a){var f,g,v=i.y;if(v===10){if(a===0)return i.z;if(f=i.Q,g=f.length,a<=g)return f[a-1];a-=g,i=i.z,v=i.y}else if(a===0)return i;if(v!==9)throw p.c(E.fJ("Indexed base must be an interface type"));if(f=i.Q,a<=f.length)return f[a-1];throw p.c(E.fJ("Bad index "+a+" for "+i.l(0)))},a1:function(n,i,a,f,g){var v,S,R,k,D,V,G,K,Q,ne;if(i===f||(p.bh(f)?v=!0:f!==X._?v=f===X.K:v=!0,v)||(S=i.y,S===4))return!0;if(p.bh(i))return!1;if(i.y!==1?v=i===X.P||i===X.T:v=!0,v||(R=S===13,R&&p.a1(n,a[i.z],a,f,g)))return!0;if(k=f.y,S===6)return p.a1(n,i.z,a,f,g);if(k===6)return v=f.z,p.a1(n,i,a,v,g);if(S===8)return p.a1(n,i.z,a,f,g)?p.a1(n,p.o3(n,i),a,f,g):!1;if(S===7)return v=p.a1(n,i.z,a,f,g),v;if(k===8)return p.a1(n,i,a,f.z,g)?!0:p.a1(n,i,a,p.o3(n,f),g);if(k===7)return v=p.a1(n,i,a,f.z,g),v;if(R)return!1;if(v=S!==11,(!v||S===12)&&f===X.b8)return!0;if(k===12){if(i===X.g)return!0;if(S!==12||(D=i.Q,V=f.Q,G=D.length,G!==V.length))return!1;for(a=a==null?D:D.concat(a),g=g==null?V:V.concat(g),K=0;K<G;++K)if(Q=D[K],ne=V[K],!p.a1(n,Q,a,ne,g)||!p.a1(n,ne,g,Q,a))return!1;return p.oJ(n,i.z,a,f.z,g)}return k===11?i===X.g?!0:v?!1:p.oJ(n,i,a,f,g):S===9?k!==9?!1:p.uS(n,i,a,f,g):!1},oJ:function(n,i,a,f,g){var v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt;if(!p.a1(n,i.z,a,f.z,g)||(v=i.Q,S=f.Q,R=v.a,k=S.a,D=R.length,V=k.length,D>V)||(G=V-D,K=v.b,Q=S.b,ne=K.length,ie=Q.length,D+ne<V+ie))return!1;for(fe=0;fe<D;++fe)if(me=R[fe],!p.a1(n,k[fe],g,me,a))return!1;for(fe=0;fe<G;++fe)if(me=K[fe],!p.a1(n,k[D+fe],g,me,a))return!1;for(fe=0;fe<ie;++fe)if(me=K[G+fe],!p.a1(n,Q[fe],g,me,a))return!1;for(Ie=v.c,Xe=S.c,Fe=Ie.length,mt=Xe.length,at=0,wt=0;wt<mt;wt+=3)for(gt=Xe[wt];;){if(at>=Fe||(pt=Ie[at],at+=3,gt<pt))return!1;if(!(pt<gt)){if(me=Ie[at-1],!p.a1(n,Xe[wt+2],g,me,a))return!1;break}}return!0},uS:function(n,i,a,f,g){var v,S,R,k,D,V,G,K,Q=i.z,ne=f.z;if(Q===ne){for(v=i.Q,S=f.Q,R=v.length,k=0;k<R;++k)if(D=v[k],V=S[k],!p.a1(n,D,a,V,g))return!1;return!0}if(f===X.K)return!0;if(G=p.ov(n,Q),G==null||(K=G[ne],K==null))return!1;for(R=K.length,S=f.Q,k=0;k<R;++k)if(!p.a1(n,p.fv(n,i,K[k]),a,S[k],g))return!1;return!0},md:function(n){var i,a=n.y;return n===X.P||n===X.T||p.bh(n)?i=!0:a!==7?a===6&&p.md(n.z)?i=!0:i=a===8&&p.md(n.z):i=!0,i},vL:function(n){var i;return p.bh(n)?i=!0:n!==X._?i=n===X.K:i=!0,i},bh:function(n){var i=n.y;return i===2||i===3||i===4||i===5||n===X.x},oD:function(n,i){var a,f,g=Object.keys(i),v=g.length;for(a=0;a<v;++a)f=g[a],n[f]=i[f]},aI:function(i,a){var f=this;f.a=i,f.b=a,f.x=f.r=f.c=null,f.y=0,f.cy=f.cx=f.ch=f.Q=f.z=null},fj:function(){this.c=this.b=this.a=null},dX:function(i){this.a=i},fi:function(){},dY:function(i){this.a=i},pc:function(n){return et.mangledGlobalNames[n]}},J={n3:function(n,i,a,f){return{i:n,p:i,e:a,x:f}},fA:function(n){var i,a,f,g,v=n[et.dispatchPropertyName];if(v==null&&j.n1==null&&(p.vI(),v=n[et.dispatchPropertyName]),v!=null){if(i=v.p,i===!1)return v.i;if(i===!0)return n;if(a=Object.getPrototypeOf(n),i===a)return v.i;if(v.e===a)throw p.c(E.o9("Return interceptor for "+p.b(i(n,v))))}return f=n.constructor,g=f==null?null:f[J.nL()],g!=null||(g=p.vX(n),g!=null)?g:typeof n=="function"?w.bF:(i=Object.getPrototypeOf(n),i==null||i===Object.prototype?w.aq:(typeof f=="function"&&Object.defineProperty(f,J.nL(),{value:w.O,enumerable:!1,writable:!0,configurable:!0}),w.O))},nL:function(){var n=j.oo;return n==null?j.oo=et.getIsolateTag("_$dart_js"):n},ie:function(n,i){if(n<0||n>4294967295)throw p.c(E.S(n,0,4294967295,"length",null));return J.eA(new Array(n),i)},th:function(n,i){if(n<0)throw p.c(E.O("Length must be a non-negative integer: "+n));return p.a(new Array(n),i.h("p<0>"))},eA:function(n,i){return J.mC(p.a(n,i.h("p<0>")))},mC:function(n){return n.fixed$length=Array,n},ti:function(n){if(n<256)switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 133:case 160:return!0;default:return!1}switch(n){case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}},nK:function(n,i){for(var a,f;i>0&&(a=i-1,f=w.a.A(n,a),!(f!==32&&f!==13&&!J.ti(f)));i=a);return i},cq:function(n){return typeof n=="number"?Math.floor(n)==n?J.de.prototype:J.eB.prototype:typeof n=="string"?J.br.prototype:n==null?J.cB.prototype:typeof n=="boolean"?J.dd.prototype:n.constructor==Array?J.p.prototype:typeof n!="object"?typeof n=="function"?J.aQ.prototype:n:n instanceof E.e?n:J.fA(n)},vD:function(n){return typeof n=="number"?J.c5.prototype:typeof n=="string"?J.br.prototype:n==null?n:n.constructor==Array?J.p.prototype:typeof n!="object"?typeof n=="function"?J.aQ.prototype:n:n instanceof E.e?n:J.fA(n)},M:function(n){return typeof n=="string"?J.br.prototype:n==null?n:n.constructor==Array?J.p.prototype:typeof n!="object"?typeof n=="function"?J.aQ.prototype:n:n instanceof E.e?n:J.fA(n)},bg:function(n){return n==null?n:n.constructor==Array?J.p.prototype:typeof n!="object"?typeof n=="function"?J.aQ.prototype:n:n instanceof E.e?n:J.fA(n)},vE:function(n){return typeof n=="number"?J.c5.prototype:n==null||n instanceof E.e?n:J.cl.prototype},mZ:function(n){return typeof n=="string"?J.br.prototype:n==null||n instanceof E.e?n:J.cl.prototype},b0:function(n){return n==null?n:typeof n!="object"?typeof n=="function"?J.aQ.prototype:n:n instanceof E.e?n:J.fA(n)},ns:function(n,i){return typeof n=="number"&&typeof i=="number"?n+i:J.vD(n).ah(n,i)},aA:function(n,i){return n==null?i==null:typeof n!="object"?i!=null&&n===i:J.cq(n).N(n,i)},nt:function(n,i){return typeof i=="number"&&(n.constructor==Array||typeof n=="string"||p.p1(n,n[et.dispatchPropertyName]))&&i>>>0===i&&i<n.length?n[i]:J.M(n).j(n,i)},rr:function(n,i,a){return typeof i=="number"&&(n.constructor==Array||p.p1(n,n[et.dispatchPropertyName]))&&!n.immutable$list&&i>>>0===i&&i<n.length?n[i]=a:J.bg(n).m(n,i,a)},rs:function(n,i){return J.mZ(n).H(n,i)},mx:function(n,i){return J.bg(n).B(n,i)},my:function(n,i){return J.bg(n).ae(n,i)},nu:function(n,i){return J.bg(n).F(n,i)},eh:function(n,i){return J.bg(n).S(n,i)},rt:function(n,i,a,f){return J.b0(n).dZ(n,i,a,f)},aL:function(n){return J.cq(n).gG(n)},nv:function(n){return J.M(n).gu(n)},ru:function(n){return J.M(n).ga3(n)},a_:function(n){return J.bg(n).gC(n)},X:function(n){return J.M(n).gi(n)},rv:function(n){return J.b0(n).gep(n)},rw:function(n){return J.b0(n).gc_(n)},rx:function(n,i,a){return J.bg(n).aM(n,i,a)},bl:function(n,i,a){return J.bg(n).ag(n,i,a)},ry:function(n,i){return J.cq(n).bb(n,i)},rz:function(n,i){return J.M(n).si(n,i)},rA:function(n,i){return J.b0(n).sd5(n,i)},rB:function(n,i){return J.b0(n).sey(n,i)},rC:function(n,i){return J.b0(n).seA(n,i)},rD:function(n,i){return J.b0(n).seB(n,i)},nw:function(n,i){return J.bg(n).a1(n,i)},rE:function(n,i){return J.mZ(n).V(n,i)},rF:function(n,i,a){return J.b0(n).cV(n,i,a)},rG:function(n,i,a){return J.b0(n).eq(n,i,a)},rH:function(n){return J.vE(n).cW(n)},fG:function(n,i){return J.bg(n).aL(n,i)},ag:function(n){return J.cq(n).l(n)},rI:function(n){return J.mZ(n).ev(n)},cz:function(){},dd:function(){},cB:function(){},aF:function(){},eU:function(){},cl:function(){},aQ:function(){},p:function(i){this.$ti=i},ii:function(i){this.$ti=i},aC:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},c5:function(){},de:function(){},eB:function(){},br:function(){}},E={tY:function(){var n,i,a={};return t.scheduleImmediate!=null?E.vk():t.MutationObserver!=null&&t.document!=null?(n=t.document.createElement("div"),i=t.document.createElement("span"),a.a=null,new t.MutationObserver(p.m0(new E.lb(a),1)).observe(n,{childList:!0}),new E.la(a,n,i)):t.setImmediate!=null?E.vl():E.vm()},tZ:function(n){t.scheduleImmediate(p.m0(new E.lc(n),0))},u_:function(n){t.setImmediate(p.m0(new E.ld(n),0))},u0:function(n){E.u8(0,n)},u8:function(n,i){var a=new E.lG;return a.d6(n,i),a},ec:function(n){return new E.fc(new E.C(j.x,n.h("C<0>")),n.h("fc<0>"))},e7:function(n,i){return n.$2(0,null),i.b=!0,i.a},cV:function(n,i){E.uC(n,i)},e6:function(n,i){i.T(n)},e5:function(n,i){i.bD(p.E(n),p.aK(n))},uC:function(n,i){var a,f,g=new E.lK(i),v=new E.lL(i);n instanceof E.C?n.cu(g,v,X.z):(a=X.z,X.c.b(n)?n.ao(0,g,v,a):(f=new E.C(j.x,X.eI),f.a=4,f.c=n,f.cu(g,v,a)))},ee:function(n){var i=function(a,f){return function(g,v){for(;;)try{a(g,v);break}catch(S){v=S,g=f}}}(n,1);return j.x.bV(new E.m_(i))},lv:function(n){return new E.cO(n,1)},bF:function(){return w.dy},bG:function(n){return new E.cO(n,3)},bK:function(n,i){return new E.dW(n,i.h("dW<0>"))},ol:function(n,i){var a,f;i.a=1;try{n.ao(0,new E.lm(i),new E.ln(i),X.P)}catch(g){a=p.E(g),f=p.aK(g),E.p9(new E.lo(i,a,f))}},ll:function(n,i){for(var a,f;a=n.a,a===2;)n=n.c;a>=4?(f=i.b1(),i.a=n.a,i.c=n.c,E.cN(i,f)):(f=i.c,i.a=2,i.c=n,n.co(f))},cN:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie=null,fe={},me=fe.a=n;for(a=X.c;;){if(f={},g=me.a===8,i==null){g&&(a=me.c,E.cY(ie,ie,me.b,a.a,a.b));return}for(f.a=i,v=i.a,me=i;v!=null;me=v,v=S)me.a=null,E.cN(fe.a,me),f.a=v,S=v.a;if(R=fe.a,k=R.c,f.b=g,f.c=k,D=!g,D?(V=me.c,V=(V&1)!=0||(V&15)==8):V=!0,V){if(G=me.b.b,g?(V=R.b===G,V=!(V||V)):V=!1,V){E.cY(ie,ie,R.b,k.a,k.b);return}if(K=j.x,K!==G?j.x=G:K=ie,me=me.c,(me&15)==8?new E.lt(f,fe,g).$0():D?(me&1)!=0&&new E.ls(f,k).$0():(me&2)!=0&&new E.lr(fe,f).$0(),K!=null&&(j.x=K),me=f.c,a.b(me)){if(Q=f.a.b,me.a>=4){ne=Q.c,Q.c=null,i=Q.b2(ne),Q.a=me.a,Q.c=me.c,fe.a=me;continue}else E.ll(me,Q);return}}Q=f.a.b,ne=Q.c,Q.c=null,i=Q.b2(ne),me=f.b,R=f.c,me?(Q.a=8,Q.c=R):(Q.a=4,Q.c=R),fe.a=Q,me=Q}},v4:function(n,i){if(X.Q.b(n))return i.bV(n);if(X.bI.b(n))return n;throw p.c(E.nz(n,"onError","Error handler must accept one Object or one Object and a StackTrace as arguments, and return a a valid result"))},v_:function(){var n,i;for(n=j.cX;n!=null;n=j.cX)j.eb=null,i=n.b,j.cX=i,i==null&&(j.ea=null),n.a.$0()},v7:function(){j.mT=!0;try{E.v_()}finally{j.eb=null,j.mT=!1,j.cX!=null&&j.np().$1(E.oS())}},oP:function(n){var i=new E.fd(n),a=j.ea;a==null?(j.cX=j.ea=i,j.mT||j.np().$1(E.oS())):j.ea=a.b=i},v6:function(n){var i,a,f,g=j.cX;if(g==null){E.oP(n),j.eb=j.ea;return}i=new E.fd(n),a=j.eb,a==null?(i.b=g,j.cX=j.eb=i):(f=a.b,i.b=f,j.eb=a.b=i,f==null&&(j.ea=i))},p9:function(n){var i=null,a=j.x;if(w.f===a){E.cZ(i,i,w.f,n);return}E.cZ(i,i,a,a.cw(n))},tR:function(n,i){var a=null,f=i.h("cT<0>"),g=new E.cT(a,a,a,a,f);return n.ao(0,new E.kC(g,i),new E.kD(g),X.P),new E.an(g,f.h("an<1>"))},mI:function(n,i){return new E.dE(new E.kE(n,i),i.h("dE<0>"))},yG:function(n){return E.aM(n,"stream"),new E.fq},o6:function(n,i,a,f){return new E.bD(null,i,a,n,f.h("bD<0>"))},mV:function(n){var i,a,f;if(n!=null)try{n.$0()}catch(g){i=p.E(g),a=p.aK(g),f=j.x,E.cY(null,null,f,i,a)}},oi:function(n,i,a,f){var g=j.x,v=f?1:0,S=E.oj(g,i);return new E.cK(n,S,a,g,v)},oj:function(n,i){if(i==null&&(i=E.vn()),X.k.b(i))return n.bV(i);if(X.d5.b(i))return i;throw p.c(E.O("handleError callback must take either an Object (the error), or both an Object (the error) and a StackTrace."))},v0:function(n,i){E.cY(null,null,j.x,n,i)},fK:function(n,i){var a=i==null?E.el(n):i;return E.aM(n,"error"),new E.ek(n,a)},el:function(n){var i;return X.C.b(n)&&(i=n.gaP(),i!=null)?i:w.bg},cY:function(n,i,a,f,g){E.v6(new E.lY(f,g))},oL:function(n,i,a,f){var g,v=j.x;if(v===a)return f.$0();j.x=a,g=v;try{return v=f.$0(),v}finally{j.x=g}},oN:function(n,i,a,f,g){var v,S=j.x;if(S===a)return f.$1(g);j.x=a,v=S;try{return S=f.$1(g),S}finally{j.x=v}},oM:function(n,i,a,f,g,v){var S,R=j.x;if(R===a)return f.$2(g,v);j.x=a,S=R;try{return R=f.$2(g,v),R}finally{j.x=S}},cZ:function(n,i,a,f){var g=w.f!==a;g&&(f=g?a.cw(f):a.dQ(f,X.H)),E.oP(f)},lb:function(i){this.a=i},la:function(i,a,f){this.a=i,this.b=a,this.c=f},lc:function(i){this.a=i},ld:function(i){this.a=i},lG:function(){},lH:function(i,a){this.a=i,this.b=a},fc:function(i,a){this.a=i,this.b=!1,this.$ti=a},lK:function(i){this.a=i},lL:function(i){this.a=i},m_:function(i){this.a=i},cO:function(i,a){this.a=i,this.b=a},aB:function(i,a){var f=this;f.a=i,f.d=f.c=f.b=null,f.$ti=a},dW:function(i,a){this.a=i,this.$ti=a},ff:function(){},ax:function(i,a){this.a=i,this.$ti=a},cM:function(i,a,f,g){var v=this;v.a=null,v.b=i,v.c=a,v.d=f,v.e=g},C:function(i,a){var f=this;f.a=0,f.b=i,f.c=null,f.$ti=a},li:function(i,a){this.a=i,this.b=a},lq:function(i,a){this.a=i,this.b=a},lm:function(i){this.a=i},ln:function(i){this.a=i},lo:function(i,a,f){this.a=i,this.b=a,this.c=f},lk:function(i,a){this.a=i,this.b=a},lp:function(i,a){this.a=i,this.b=a},lj:function(i,a,f){this.a=i,this.b=a,this.c=f},lt:function(i,a,f){this.a=i,this.b=a,this.c=f},lu:function(i){this.a=i},ls:function(i,a){this.a=i,this.b=a},lr:function(i,a){this.a=i,this.b=a},fd:function(i){this.a=i,this.b=null},aW:function(){},kC:function(i,a){this.a=i,this.b=a},kD:function(i){this.a=i},kE:function(i,a){this.a=i,this.b=a},kF:function(i,a){this.a=i,this.b=a},kG:function(i,a){this.a=i,this.b=a},f0:function(){},cS:function(){},lF:function(i){this.a=i},lE:function(i){this.a=i},fs:function(){},fe:function(){},bD:function(i,a,f,g,v){var S=this;S.a=null,S.b=0,S.c=null,S.d=i,S.e=a,S.f=f,S.r=g,S.$ti=v},cT:function(i,a,f,g,v){var S=this;S.a=null,S.b=0,S.c=null,S.d=i,S.e=a,S.f=f,S.r=g,S.$ti=v},an:function(i,a){this.a=i,this.$ti=a},dA:function(i,a,f,g,v,S){var R=this;R.x=i,R.a=a,R.b=f,R.c=g,R.d=v,R.e=S,R.r=R.f=null},cK:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v,S.r=S.f=null},lg:function(i,a,f){this.a=i,this.b=a,this.c=f},lf:function(i){this.a=i},dT:function(){},dE:function(i,a){this.a=i,this.b=!1,this.$ti=a},dL:function(i){this.b=i,this.a=0},fh:function(){},cn:function(i){this.b=i,this.a=null},dB:function(i,a){this.b=i,this.c=a,this.a=null},lh:function(){},fn:function(){},lz:function(i,a){this.a=i,this.b=a},dU:function(){this.c=this.b=null,this.a=0},fq:function(){},ek:function(i,a){this.a=i,this.b=a},lJ:function(){},lY:function(i,a){this.a=i,this.b=a},lB:function(){},lD:function(i,a,f){this.a=i,this.b=a,this.c=f},lC:function(i,a){this.a=i,this.b=a},om:function(n,i){var a=n[i];return a===n?null:a},mK:function(n,i,a){a==null?n[i]=n:n[i]=a},on:function(){var n=Object.create(null);return E.mK(n,"<non-identifier-key>",n),delete n["<non-identifier-key>"],n},mF:function(n,i,a){return p.oU(n,new p.aG(i.h("@<0>").D(a).h("aG<1,2>")))},a5:function(n,i){return new p.aG(n.h("@<0>").D(i).h("aG<1,2>"))},nN:function(n){return new E.aZ(n.h("aZ<0>"))},aR:function(n){return new E.aZ(n.h("aZ<0>"))},b8:function(n,i){return p.vA(n,new E.aZ(i.h("aZ<0>")))},mL:function(){var n=Object.create(null);return n["<non-identifier-key>"]=n,delete n["<non-identifier-key>"],n},tf:function(n,i,a){var f,g;if(E.mU(n))return i==="("&&a===")"?"(...)":i+"..."+a;f=p.a([],X.s),j.co.push(n);try{E.uY(n,f)}finally{j.co.pop()}return g=E.mJ(i,f,", ")+a,g.charCodeAt(0)==0,g},id:function(n,i,a){var f,g;if(E.mU(n))return i+"..."+a;f=new E.a9(i),j.co.push(n);try{g=f,g.a=E.mJ(g.a,n,", ")}finally{j.co.pop()}return f.a+=a,g=f.a,g.charCodeAt(0)==0,g},mU:function(n){var i,a;for(i=j.co.length,a=0;a<i;++a)if(n===j.co[a])return!0;return!1},uY:function(n,i){for(var a,f,g,v,S,R,k,D=n.gC(n),V=0,G=0;V<80||G<3;){if(!D.n())return;a=p.b(D.gq()),i.push(a),V+=a.length+2,++G}if(D.n())if(v=D.gq(),++G,D.n()){for(S=D.gq(),++G;D.n();v=S,S=R)if(R=D.gq(),++G,G>100){for(;V>75&&G>3;)V-=i.pop().length+2,--G;i.push("...");return}g=p.b(v),f=p.b(S),V+=f.length+g.length+4}else{if(G<=4){i.push(p.b(v));return}f=p.b(v),g=i.pop(),V+=f.length+2}else{if(G<=5)return;f=i.pop(),g=i.pop()}for(G>i.length+2?(V+=5,k="..."):k=null;V>80&&i.length>3;)V-=i.pop().length+2,k==null&&(V+=5,k="...");k!=null&&i.push(k),i.push(g),i.push(f)},tt:function(n,i){var a,f,g=E.nN(i);for(a=n.length,f=0;f<n.length;n.length===a||(0,p.cs)(n),++f)g.B(0,i.a(n[f]));return g},mG:function(n){var i,a={};if(E.mU(n))return"{...}";i=new E.a9("");try{j.co.push(n),i.a+="{",a.a=!0,n.J(0,new E.j8(a,i)),i.a+="}"}finally{j.co.pop()}return a=i.a,a.charCodeAt(0)==0,a},dG:function(){},dJ:function(i){var a=this;a.a=0,a.e=a.d=a.c=a.b=null,a.$ti=i},dH:function(i,a){this.a=i,this.$ti=a},dI:function(i,a,f){var g=this;g.a=i,g.b=a,g.c=0,g.d=null,g.$ti=f},aZ:function(i){var a=this;a.a=0,a.f=a.e=a.d=a.c=a.b=null,a.r=0,a.$ti=i},lx:function(i){this.a=i,this.c=this.b=null},dM:function(i,a,f){var g=this;g.a=i,g.b=a,g.d=g.c=null,g.$ti=f},aX:function(i,a){this.a=i,this.$ti=a},dc:function(){},dg:function(){},m:function(){},di:function(){},j8:function(i,a){this.a=i,this.b=a},I:function(){},j9:function(i){this.a=i},fw:function(){},dj:function(){},be:function(i,a){this.a=i,this.$ti=a},cQ:function(){},e1:function(i,a){this.a=i,this.$ti=a},dN:function(){},e0:function(){},oK:function(n,i){var a,f,g=null;try{g=JSON.parse(n)}catch(v){throw a=p.E(v),f=E.K(String(a),null,null),p.c(f)}return f=E.lN(g),f},lN:function(n){var i;if(n==null)return null;if(typeof n!="object")return n;if(Object.getPrototypeOf(n)!==Array.prototype)return new E.fl(n,Object.create(null));for(i=0;i<n.length;++i)n[i]=E.lN(n[i]);return n},tW:function(n,i,a,f){var g,v;return i instanceof Uint8Array?(g=i,f=g.length,f-a<15||(v=E.tX(n,g,a,f),v!=null&&n&&v.indexOf("\uFFFD")>=0)?null:v):null},tX:function(n,i,a,f){var g=n?j.rk():j.rj();return g==null?null:a===0&&f===i.length?E.od(g,i):E.od(g,i.subarray(a,E.aV(a,f,i.length)))},od:function(n,i){var a;try{return a=n.decode(i),a}catch(f){p.E(f)}return null},nA:function(n,i,a,f,g,v){if(w.c.bg(v,4)!==0)throw p.c(E.K("Invalid base64 padding, padded length must be multiple of four, is "+v,n,a));if(f+g!==v)throw p.c(E.K("Invalid base64 padding, '=' not at the end",n,i));if(g>2)throw p.c(E.K("Invalid base64 padding, more than two '=' characters",n,i))},u3:function(n,i,a,f,g,v){var S,R,k,D,V,G,K="Invalid encoding before padding",Q="Invalid character",ne=w.c.ad(v,2),ie=v&3,fe=j.nq();for(S=i,R=0;S<a;++S){if(k=w.a.A(n,S),R|=k,D=fe[k&127],D>=0){ne=(ne<<6|D)&16777215,ie=ie+1&3,ie===0&&(V=g+1,f[g]=ne>>>16&255,g=V+1,f[V]=ne>>>8&255,V=g+1,f[g]=ne&255,g=V,ne=0);continue}else if(D===-1&&ie>1){if(R>127)break;if(ie===3){if((ne&3)!=0)throw p.c(E.K(K,n,S));f[g]=ne>>>10,f[g+1]=ne>>>2}else{if((ne&15)!=0)throw p.c(E.K(K,n,S));f[g]=ne>>>4}return G=(3-ie)*3,k===37&&(G+=2),E.oh(n,S+1,a,-G-1)}throw p.c(E.K(Q,n,S))}if(R>=0&&R<=127)return(ne<<2|ie)>>>0;for(S=i;S<a&&(k=w.a.A(n,S),!(k>127));++S);throw p.c(E.K(Q,n,S))},u1:function(n,i,a,f){var g=E.u2(n,i,a),v=(f&3)+(g-i),S=w.c.ad(v,2)*3,R=v&3;return R!==0&&g<a&&(S+=R-1),S>0?new Uint8Array(S):j.rl()},u2:function(n,i,a){for(var f,g=a,v=g,S=0;v>i&&S<2;){e:{if(--v,f=w.a.A(n,v),f===61){++S,g=v;break e}if((f|32)==100){if(v===i)break;--v,f=w.a.A(n,v)}if(f===51){if(v===i)break;--v,f=w.a.A(n,v)}if(f===37){++S,g=v;break e}break}}return g},oh:function(n,i,a,f){var g,v;if(i===a)return f;for(g=-f-1;g>0;){if(v=w.a.A(n,i),g===3){if(v===61){g-=3,++i;break}if(v===37){if(--g,++i,i===a)break;v=w.a.A(n,i)}else break}if((g>3?g-3:g)===2){if(v!==51||(++i,--g,i===a))break;v=w.a.A(n,i)}if((v|32)!=100||(++i,--g,i===a))break}if(i!==a)throw p.c(E.K("Invalid padding character",n,i));return-g-1},oC:function(n){switch(n){case 65:return"Missing extension byte";case 67:return"Unexpected extension byte";case 69:return"Invalid UTF-8 byte";case 71:return"Overlong encoding";case 73:return"Out of unicode range";case 75:return"Encoded surrogate";case 77:return"Unfinished UTF-8 octet sequence";default:return""}},uz:function(n,i,a){var f,g,v,S=a-i,R=new Uint8Array(S);for(f=J.M(n),g=0;g<S;++g)v=f.j(n,i+g),R[g]=(v&4294967040)>>>0!=0?255:v;return R},fl:function(i,a){this.a=i,this.b=a,this.c=null},fm:function(i){this.a=i},lw:function(i,a,f){this.b=i,this.c=a,this.a=f},kT:function(){},kU:function(){},fL:function(){},fN:function(){},fM:function(){},le:function(){this.a=0},fO:function(){},em:function(){},fo:function(i,a,f){this.a=i,this.b=a,this.$ti=f},eo:function(){},eq:function(){},hw:function(){},io:function(){},ip:function(i){this.a=i},kH:function(){},kI:function(){},dV:function(){},lI:function(i,a,f){this.a=i,this.b=a,this.c=f},kR:function(){},kS:function(i){this.a=i},fx:function(i){this.a=i,this.b=16,this.c=0},cr:function(n,i){var a=p.o1(n,i);if(a!=null)return a;throw p.c(E.K(n,null,null))},t6:function(n){return n instanceof p.bZ?n.l(0):"Instance of '"+p.b(p.ju(n))+"'"},bt:function(n,i,a,f){var g,v=J.ie(n,f);if(n!==0&&i!=null)for(g=0;g<v.length;++g)v[g]=i;return v},dh:function(n,i,a){var f,g=p.a([],a.h("p<0>"));for(f=J.a_(n);f.n();)g.push(f.gq());return i?g:J.mC(g)},nO:function(n,i,a,f){var g,v=a?J.th(n,f):J.ie(n,f);for(g=0;g<n;++g)v[g]=i.$1(g);return v},o7:function(n,i,a){return X.bm.b(n)?p.tK(n,i,E.aV(i,a,n.length)):E.tS(n,i,a)},tS:function(n,i,a){var f,g,v,S,R,k=null;if(i<0)throw p.c(E.S(i,0,n.length,k,k));if(f=a==null,!f&&a<i)throw p.c(E.S(a,i,n.length,k,k));for(g=new p.a6(n,n.length,p.ac(n).h("a6<m.E>")),v=0;v<i;++v)if(!g.n())throw p.c(E.S(i,0,v,k,k));if(S=[],f)for(;g.n();)R=g.d,S.push(R);else for(v=i;v<a;++v){if(!g.n())throw p.c(E.S(a,i,v,k,k));R=g.d,S.push(R)}return p.tI(S)},o2:function(n){return new p.ih(n,p.tj(n,!1,!0,!1,!1,!1))},mJ:function(n,i,a){var f=J.a_(i);if(!f.n())return n;if(a.length===0)do n+=p.b(f.gq());while(f.n());else for(n+=p.b(f.gq());f.n();)n=n+a+p.b(f.gq());return n},nS:function(n,i,a,f){return new E.eO(n,i,a,f)},nG:function(n){var i=Math.abs(n),a=n<0?"-":"";return i>=1e3?""+n:i>=100?a+"0"+i:i>=10?a+"00"+i:a+"000"+i},t5:function(n){var i=Math.abs(n),a=n<0?"-":"+";return i>=1e5?a+i:a+"0"+i},nH:function(n){return n>=100?""+n:n>=10?"0"+n:"00"+n},b5:function(n){return n>=10?""+n:"0"+n},cx:function(n){return typeof n=="number"||p.e9(n)||n==null?J.ag(n):typeof n=="string"?JSON.stringify(n):E.t6(n)},fJ:function(n){return new E.ej(n)},O:function(n){return new E.ak(!1,null,null,n)},nz:function(n,i,a){return new E.ak(!0,n,i,a)},aM:function(n,i){if(n==null)throw p.c(new E.ak(!1,null,i,"Must not be null"));return n},jv:function(n,i){return new E.dq(null,null,!0,n,i,"Value not in range")},S:function(n,i,a,f,g){return new E.dq(i,a,!0,n,f,"Invalid value")},aV:function(n,i,a){if(0>n||n>a)throw p.c(E.S(n,0,a,"start",null));if(i!=null){if(n>i||i>a)throw p.c(E.S(i,n,a,"end",null));return i}return a},aU:function(n,i){if(n<0)throw p.c(E.S(n,0,null,i,null));return n},ex:function(n,i,a,f,g){var v=g==null?J.X(i):g;return new E.ew(v,!0,n,a,"Index out of range")},ab:function(n){return new E.f8(n)},o9:function(n){return new E.f3(n)},cF:function(n){return new E.bz(n)},ad:function(n){return new E.ep(n)},t7:function(n){return new E.dD(n)},K:function(n,i,a){return new E.aD(n,i,a)},nJ:function(n,i,a){return n<=0?new p.b6(a.h("b6<0>")):new E.dF(n,i,a.h("dF<0>"))},nP:function(n,i,a,f,g){return new p.bY(n,i.h("@<0>").D(a).D(f).D(g).h("bY<1,2,3,4>"))},ob:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt=null,pt=n.length;if(pt>=5){if(i=E.oQ(n,0),i===0)return a=E.kM(pt<pt?w.a.t(n,0,pt):n,5,gt),a.gbd(a);if(i===32)return a=E.kM(w.a.t(n,5,pt),0,gt),a.gbd(a)}return f=E.bt(8,0,!1,X.r),f[0]=0,f[1]=-1,f[2]=-1,f[7]=-1,f[3]=0,f[4]=0,f[5]=pt,f[6]=pt,E.oO(n,0,pt,0,f)>=14&&(f[7]=pt),g=f[1],g>=0&&E.oO(n,0,g,20,f)===20&&(f[7]=g),v=f[2]+1,S=f[3],R=f[4],k=f[5],D=f[6],D<k&&(k=D),R<v?R=k:R<=g&&(R=g+1),S<v&&(S=R),V=f[7]<0,V?v>g+3?(G=gt,V=!1):(a=S>0,a&&S+1===R?(G=gt,V=!1):(k<pt&&k===R+2&&w.a.U(n,"..",R)?K=!0:K=k>R+2&&w.a.U(n,"/..",k-3),K?(G=gt,V=!1):(g===4?w.a.U(n,"file",0)?(v<=0?(w.a.U(n,"/",R)?(Q="file://",ne=2):(Q="file:///",ne=3),n=Q+w.a.t(n,R,pt),g-=0,a=ne-0,k+=a,D+=a,pt=n.length,v=7,S=7,R=7):R===k&&(++D,ie=k+1,n=w.a.az(n,R,k,"/"),++pt,k=ie),G="file"):w.a.U(n,"http",0)?(a&&S+3===R&&w.a.U(n,"80",S+1)&&(D-=3,fe=R-3,k-=3,n=w.a.az(n,S,R,""),pt-=3,R=fe),G="http"):G=gt:g===5&&w.a.U(n,"https",0)?(a&&S+4===R&&w.a.U(n,"443",S+1)&&(D-=4,fe=R-4,k-=4,n=w.a.az(n,S,R,""),pt-=3,R=fe),G="https"):G=gt,V=!0))):G=gt,V?(pt<n.length&&(n=w.a.t(n,0,pt),g-=0,v-=0,S-=0,R-=0,k-=0,D-=0),new E.fp(n,g,v,S,R,k,D,G)):(G==null&&(g>0?G=E.us(n,0,g):(g===0&&E.cU(n,0,"Invalid empty scheme"),G="")),v>0?(me=g+3,Ie=me<v?E.ut(n,me,v-1):"",Xe=E.uo(n,v,S,!1),a=S+1,a<R?(Fe=p.o1(w.a.t(n,a,R),gt),mt=E.uq(Fe==null?p.a2(E.K("Invalid port",n,a)):Fe,G)):mt=gt):(mt=gt,Xe=mt,Ie=""),at=E.up(n,R,k,gt,G,Xe!=null),wt=k<D?E.ur(n,k+1,D,gt):gt,new E.e2(G,Ie,Xe,mt,at,wt,D<pt?E.un(n,D+1,pt):gt))},tV:function(n,i,a){var f,g,v,S,R,k,D="IPv4 address should contain exactly 4 parts",V="each part must be in the range 0..255",G=new E.kN(n),K=new Uint8Array(4);for(f=i,g=f,v=0;f<a;++f)S=w.a.A(n,f),S!==46?(S^48)>9&&G.$2("invalid character",f):(v===3&&G.$2(D,f),R=E.cr(w.a.t(n,g,f),null),R>255&&G.$2(V,g),k=v+1,K[v]=R,g=f+1,v=k);return v!==3&&G.$2(D,a),R=E.cr(w.a.t(n,g,a),null),R>255&&G.$2(V,g),K[v]=R,K},oc:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me=new E.kO(n),Ie=new E.kP(me,n);for(n.length<2&&me.$1("address is too short"),f=p.a([],X.Z),g=i,v=g,S=!1,R=!1;g<a;++g)k=w.a.A(n,g),k===58?(g===i&&(++g,w.a.A(n,g)!==58&&me.$2("invalid start colon.",g),v=g),g===v?(S&&me.$2("only one wildcard `::` is allowed",g),f.push(-1),S=!0):f.push(Ie.$2(v,g)),v=g+1):k===46&&(R=!0);for(f.length===0&&me.$1("too few parts"),D=v===a,V=w.d.gaH(f),D&&V!==-1&&me.$2("expected a part after last `:`",a),D||(R?(G=E.tV(n,v,a),f.push((G[0]<<8|G[1])>>>0),f.push((G[2]<<8|G[3])>>>0)):f.push(Ie.$2(v,a))),S?f.length>7&&me.$1("an address with a wildcard must have less than 7 parts"):f.length!==8&&me.$1("an address without a wildcard must contain exactly 8 parts"),K=new Uint8Array(16),V=f.length,Q=9-V,g=0,ne=0;g<V;++g)if(ie=f[g],ie===-1)for(fe=0;fe<Q;++fe)K[ne]=0,K[ne+1]=0,ne+=2;else K[ne]=w.c.ad(ie,8),K[ne+1]=ie&255,ne+=2;return K},ow:function(n){return n==="http"?80:n==="https"?443:0},cU:function(n,i,a){throw p.c(E.K(a,n,i))},uq:function(n,i){var a=E.ow(i);return n===a?null:n},uo:function(n,i,a,f){var g,v,S,R,k,D;if(i===a)return"";if(w.a.A(n,i)===91)return g=a-1,w.a.A(n,g)!==93&&E.cU(n,i,"Missing end `]` to match `[` in host"),v=i+1,S=E.ul(n,v,g),S<g?(R=S+1,k=E.oB(n,w.a.U(n,"25",R)?S+3:R,g,"%25")):k="",E.oc(n,v,S),w.a.t(n,i,S).toLowerCase()+k+"]";for(D=i;D<a;++D)if(w.a.A(n,D)===58)return S=w.a.b7(n,"%",i),S=S>=i&&S<a?S:a,S<a?(R=S+1,k=E.oB(n,w.a.U(n,"25",R)?S+3:R,a,"%25")):k="",E.oc(n,i,S),"["+w.a.t(n,i,S)+k+"]";return E.uv(n,i,a)},ul:function(n,i,a){var f=w.a.b7(n,"%",i);return f>=i&&f<a?f:a},oB:function(n,i,a,f){var g,v,S,R,k,D,V,G,K,Q,ne=f!==""?new E.a9(f):null;for(g=i,v=g,S=!0;g<a;)if(R=w.a.A(n,g),R===37){if(k=E.mR(n,g,!0),D=k==null,D&&S){g+=3;continue}ne==null&&(ne=new E.a9("")),V=ne.a+=w.a.t(n,v,g),D?k=w.a.t(n,g,g+3):k==="%"&&E.cU(n,g,"ZoneID should not contain % anymore"),ne.a=V+k,g+=3,v=g,S=!0}else R<127&&(w.aj[R>>>4]&1<<(R&15))!=0?(S&&65<=R&&90>=R&&(ne==null&&(ne=new E.a9("")),v<g&&(ne.a+=w.a.t(n,v,g),v=g),S=!1),++g):((R&64512)==55296&&g+1<a?(G=w.a.A(n,g+1),(G&64512)==56320?(R=65536|(R&1023)<<10|G&1023,K=2):K=1):K=1,Q=w.a.t(n,v,g),ne==null&&(ne=new E.a9("")),D=ne,D.a+=Q,D.a+=E.mQ(R),g+=K,v=g);return ne==null?w.a.t(n,i,a):(v<a&&(ne.a+=w.a.t(n,v,a)),D=ne.a,D.charCodeAt(0)==0,D)},uv:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q;for(f=i,g=f,v=null,S=!0;f<a;)if(R=w.a.A(n,f),R===37){if(k=E.mR(n,f,!0),D=k==null,D&&S){f+=3;continue}v==null&&(v=new E.a9("")),V=w.a.t(n,g,f),G=v.a+=S?V:V.toLowerCase(),D?(k=w.a.t(n,f,f+3),K=3):k==="%"?(k="%25",K=1):K=3,v.a=G+k,f+=K,g=f,S=!0}else R<127&&(w.cG[R>>>4]&1<<(R&15))!=0?(S&&65<=R&&90>=R&&(v==null&&(v=new E.a9("")),g<f&&(v.a+=w.a.t(n,g,f),g=f),S=!1),++f):R<=93&&(w.ac[R>>>4]&1<<(R&15))!=0?E.cU(n,f,"Invalid character"):((R&64512)==55296&&f+1<a?(Q=w.a.A(n,f+1),(Q&64512)==56320?(R=65536|(R&1023)<<10|Q&1023,K=2):K=1):K=1,V=w.a.t(n,g,f),S||(V=V.toLowerCase()),v==null&&(v=new E.a9("")),D=v,D.a+=V,D.a+=E.mQ(R),f+=K,g=f);return v==null?w.a.t(n,i,a):(g<a&&(V=w.a.t(n,g,a),v.a+=S?V:V.toLowerCase()),D=v.a,D.charCodeAt(0)==0,D)},us:function(n,i,a){var f,g,v;if(i===a)return"";for(E.oy(w.a.H(n,i))||E.cU(n,i,"Scheme not starting with alphabetic character"),f=i,g=!1;f<a;++f)v=w.a.H(n,f),v<128&&(w.ah[v>>>4]&1<<(v&15))!=0||E.cU(n,f,"Illegal scheme character"),65<=v&&v<=90&&(g=!0);return n=w.a.t(n,i,a),E.uk(g?n.toLowerCase():n)},uk:function(n){return n==="http"?"http":n==="file"?"file":n==="https"?"https":n==="package"?"package":n},ut:function(n,i,a){return E.e3(n,i,a,w.cm,!1)},up:function(n,i,a,f,g,v){var S=g==="file",R=S||v,k=E.e3(n,i,a,w.am,!0);if(k.length===0){if(S)return"/"}else R&&!w.a.V(k,"/")&&(k="/"+k);return E.uu(k,g,v)},uu:function(n,i,a){var f=i.length===0;return f&&!a&&!w.a.V(n,"/")?E.uw(n,!f||a):E.ux(n)},ur:function(n,i,a,f){return E.e3(n,i,a,w.x,!0)},un:function(n,i,a){return E.e3(n,i,a,w.x,!0)},mR:function(n,i,a){var f,g,v,S,R,k=i+2;return k>=n.length||(f=w.a.A(n,i+1),g=w.a.A(n,k),v=p.m8(f),S=p.m8(g),v<0||S<0)?"%":(R=v*16+S,R<127&&(w.aj[w.c.ad(R,4)]&1<<(R&15))!=0?p.ba(a&&65<=R&&90>=R?(R|32)>>>0:R):f>=97||g>=97?w.a.t(n,i,i+3).toUpperCase():null)},mQ:function(n){var i,a,f,g,v,S="0123456789ABCDEF";if(n<128)i=new Uint8Array(3),i[0]=37,i[1]=w.a.H(S,n>>>4),i[2]=w.a.H(S,n&15);else for(n>2047?n>65535?(a=240,f=4):(a=224,f=3):(a=192,f=2),i=new Uint8Array(3*f),g=0;--f,f>=0;a=128)v=w.c.dL(n,6*f)&63|a,i[g]=37,i[g+1]=w.a.H(S,v>>>4),i[g+2]=w.a.H(S,v&15),g+=3;return E.o7(i,0,null)},e3:function(n,i,a,f,g){var v=E.oA(n,i,a,f,g);return v==null?w.a.t(n,i,a):v},oA:function(n,i,a,f,g){var v,S,R,k,D,V,G,K,Q,ne=null;for(v=!g,S=i,R=S,k=ne;S<a;)if(D=w.a.A(n,S),D<127&&(f[D>>>4]&1<<(D&15))!=0)++S;else{if(D===37){if(V=E.mR(n,S,!1),V==null){S+=3;continue}V==="%"?(V="%25",G=1):G=3}else v&&D<=93&&(w.ac[D>>>4]&1<<(D&15))!=0?(E.cU(n,S,"Invalid character"),G=ne,V=G):((D&64512)==55296?(K=S+1,K<a?(Q=w.a.A(n,K),(Q&64512)==56320?(D=65536|(D&1023)<<10|Q&1023,G=2):G=1):G=1):G=1,V=E.mQ(D));k==null&&(k=new E.a9("")),K=k,K.a+=w.a.t(n,R,S),K.a+=p.b(V),S+=G,R=S}return k==null?ne:(R<a&&(k.a+=w.a.t(n,R,a)),v=k.a,v.charCodeAt(0)==0,v)},oz:function(n){return w.a.V(n,".")?!0:w.a.bK(n,"/.")!==-1},ux:function(n){var i,a,f,g,v,S;if(!E.oz(n))return n;for(i=p.a([],X.s),a=n.split("/"),f=a.length,g=!1,v=0;v<f;++v)S=a[v],J.aA(S,"..")?(i.length!==0&&(i.pop(),i.length===0&&i.push("")),g=!0):S==="."?g=!0:(i.push(S),g=!1);return g&&i.push(""),w.d.cL(i,"/")},uw:function(n,i){var a,f,g,v,S,R;if(!E.oz(n))return i?n:E.ox(n);for(a=p.a([],X.s),f=n.split("/"),g=f.length,v=!1,S=0;S<g;++S)R=f[S],R===".."?a.length!==0&&w.d.gaH(a)!==".."?(a.pop(),v=!0):(a.push(".."),v=!1):R==="."?v=!0:(a.push(R),v=!1);return f=a.length,f!==0?f=f===1&&a[0].length===0:f=!0,f?"./":((v||w.d.gaH(a)==="..")&&a.push(""),i||(a[0]=E.ox(a[0])),w.d.cL(a,"/"))},ox:function(n){var i,a,f=n.length;if(f>=2&&E.oy(J.rs(n,0)))for(i=1;i<f;++i){if(a=w.a.H(n,i),a===58)return w.a.t(n,0,i)+"%3A"+w.a.bj(n,i+1);if(a>127||(w.ah[a>>>4]&1<<(a&15))==0)break}return n},um:function(n,i){var a,f,g;for(a=0,f=0;f<2;++f)if(g=w.a.A(n,i+f),48<=g&&g<=57)a=a*16+g-48;else if(g|=32,97<=g&&g<=102)a=a*16+g-87;else throw p.c(E.O("Invalid URL encoding"));return a},uy:function(n,i,a,f,g){for(var v,S,R,k,D=i;;){if(!(D<a)){v=!0;break}if(S=w.a.A(n,D),S<=127&&S!==37?R=!1:R=!0,R){v=!1;break}++D}if(v){if(w.a3!==f?R=!1:R=!0,R)return w.a.t(n,i,a);k=new p.cu(w.a.t(n,i,a))}else for(k=p.a([],X.Z),R=n.length,D=i;D<a;++D){if(S=w.a.A(n,D),S>127)throw p.c(E.O("Illegal percent encoding in URI"));if(S===37){if(D+3>R)throw p.c(E.O("Truncated URI"));k.push(E.um(n,D+1)),D+=2}else k.push(S)}return w.dw.dT(k)},oy:function(n){var i=n|32;return 97<=i&&i<=122},oa:function(n){var i;if(n.length>=5){if(i=E.oQ(n,0),i===0)return E.kM(n,5,null);if(i===32)return E.kM(w.a.bj(n,5),0,null)}throw p.c(E.K("Does not start with 'data:'",n,0))},kM:function(n,i,a){var f,g,v,S,R,k,D,V,G="Invalid MIME type",K=p.a([i-1],X.Z);for(f=n.length,g=i,v=-1,S=null;g<f&&(S=w.a.H(n,g),!(S===44||S===59));++g)if(S===47){if(v<0){v=g;continue}throw p.c(E.K(G,n,g))}if(v<0&&g>i)throw p.c(E.K(G,n,g));for(;S!==44;){for(K.push(g),++g,R=-1;g<f;++g)if(S=w.a.H(n,g),S===61)R<0&&(R=g);else if(S===59||S===44)break;if(R>=0)K.push(R);else{if(k=w.d.gaH(K),S!==44||g!==k+7||!w.a.U(n,"base64",k+1))throw p.c(E.K("Expecting '='",n,g));break}}return K.push(g),D=g+1,(K.length&1)==1?n=w.b5.ec(n,D,f):(V=E.oA(n,D,f,w.x,!0),V!=null&&(n=w.a.az(n,D,f,V))),new E.kL(n,K,a)},uG:function(){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~!$&'()*+,;=",i=".",a=":",f="/",g="?",v="#",S=E.nO(22,new E.lP,!0,X.E),R=new E.lO(S),k=new E.lQ,D=new E.lR,V=R.$2(0,225);return k.$3(V,n,1),k.$3(V,i,14),k.$3(V,a,34),k.$3(V,f,3),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(14,225),k.$3(V,n,1),k.$3(V,i,15),k.$3(V,a,34),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(15,225),k.$3(V,n,1),k.$3(V,"%",225),k.$3(V,a,34),k.$3(V,f,9),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(1,225),k.$3(V,n,1),k.$3(V,a,34),k.$3(V,f,10),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(2,235),k.$3(V,n,139),k.$3(V,f,131),k.$3(V,i,146),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(3,235),k.$3(V,n,11),k.$3(V,f,68),k.$3(V,i,18),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(4,229),k.$3(V,n,5),D.$3(V,"AZ",229),k.$3(V,a,102),k.$3(V,"@",68),k.$3(V,"[",232),k.$3(V,f,138),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(5,229),k.$3(V,n,5),D.$3(V,"AZ",229),k.$3(V,a,102),k.$3(V,"@",68),k.$3(V,f,138),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(6,231),D.$3(V,"19",7),k.$3(V,"@",68),k.$3(V,f,138),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(7,231),D.$3(V,"09",7),k.$3(V,"@",68),k.$3(V,f,138),k.$3(V,g,172),k.$3(V,v,205),k.$3(R.$2(8,8),"]",5),V=R.$2(9,235),k.$3(V,n,11),k.$3(V,i,16),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(16,235),k.$3(V,n,11),k.$3(V,i,17),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(17,235),k.$3(V,n,11),k.$3(V,f,9),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(10,235),k.$3(V,n,11),k.$3(V,i,18),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(18,235),k.$3(V,n,11),k.$3(V,i,19),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(19,235),k.$3(V,n,11),k.$3(V,f,234),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(11,235),k.$3(V,n,11),k.$3(V,f,10),k.$3(V,g,172),k.$3(V,v,205),V=R.$2(12,236),k.$3(V,n,12),k.$3(V,g,12),k.$3(V,v,205),V=R.$2(13,237),k.$3(V,n,13),k.$3(V,g,13),D.$3(R.$2(20,245),"az",21),V=R.$2(21,245),D.$3(V,"az",21),D.$3(V,"09",21),k.$3(V,"+-.",21),S},oO:function(n,i,a,f,g){var v,S,R,k,D=j.rp();for(v=i;v<a;++v)S=D[f],R=w.a.H(n,v)^96,k=S[R>95?31:R],f=k&31,g[k>>>5]=v;return f},oQ:function(n,i){return((w.a.H(n,i+4)^58)*3|w.a.H(n,i)^100|w.a.H(n,i+1)^97|w.a.H(n,i+2)^116|w.a.H(n,i+3)^97)>>>0},jn:function(i,a){this.a=i,this.b=a},d5:function(i,a){this.a=i,this.b=a},F:function(){},ej:function(i){this.a=i},f2:function(){},eR:function(){},ak:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},dq:function(i,a,f,g,v,S){var R=this;R.e=i,R.f=a,R.a=f,R.b=g,R.c=v,R.d=S},ew:function(i,a,f,g,v){var S=this;S.f=i,S.a=a,S.b=f,S.c=g,S.d=v},eO:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},f8:function(i){this.a=i},f3:function(i){this.a=i},bz:function(i){this.a=i},ep:function(i){this.a=i},eT:function(){},ds:function(){},er:function(i){this.a=i},dD:function(i){this.a=i},aD:function(i,a,f){this.a=i,this.b=a,this.c=f},i:function(){},dF:function(i,a,f){this.a=i,this.b=a,this.$ti=f},H:function(){},cC:function(i,a,f){this.a=i,this.b=a,this.$ti=f},k:function(){},e:function(){},fr:function(){},a9:function(i){this.a=i},kN:function(i){this.a=i},kO:function(i){this.a=i},kP:function(i,a){this.a=i,this.b=a},e2:function(i,a,f,g,v,S,R){var k=this;k.a=i,k.b=a,k.c=f,k.d=g,k.e=v,k.f=S,k.r=R,k.z=k.x=null},kL:function(i,a,f){this.a=i,this.b=a,this.c=f},lP:function(){},lO:function(i){this.a=i},lQ:function(){},lR:function(){},fp:function(i,a,f,g,v,S,R,k){var D=this;D.a=i,D.b=a,D.c=f,D.d=g,D.e=v,D.f=S,D.r=R,D.x=k,D.y=null},fg:function(i,a,f,g,v,S,R){var k=this;k.a=i,k.b=a,k.c=f,k.d=g,k.e=v,k.f=S,k.r=R,k.z=k.x=null},n2:function(n){if(!X.I.b(n)&&!X.U.b(n))throw p.c(E.O("object must be a Map or Iterable"));return E.uF(n)},uF:function(n){var i=new E.lM(new E.dJ(X.aH)).$1(n);return i.toString,i},lM:function(i){this.a=i},uE:function(n){var i,a=n.$dart_jsFunction;return a!=null?a:(i=function(f,g){return function(){return f(g,Array.prototype.slice.apply(arguments))}}(E.uD,n),i[j.n6()]=n,n.$dart_jsFunction=i,i)},uD:function(n,i){return p.tH(n,i,null)},cp:function(n){return typeof n=="function"?n:E.uE(n)}},ge={rM:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe="byteOffset",me=null,Ie="normalized";switch(oe.A(n,w.cu,i),a=oe.P(n,"bufferView",i,!1),a===-1?(f=n.w(fe),f&&i.k(j.d1(),p.a(["bufferView"],X.M),fe),g=0):g=oe.W(n,fe,i,0,me,-1,0,!1),v=oe.W(n,"componentType",i,-1,w.c3,-1,0,!0),S=oe.W(n,"count",i,-1,me,-1,1,!0),R=oe.J(n,"type",i,me,w.l.gL(),me,!0),k=oe.oV(n,Ie,i),R!=null&&v!==-1?(D=w.l.j(0,R),D!=null?v===5126?(f=X.V,V=oe.aj(n,"min",i,me,p.a([D],f),1/0,-1/0,!0),G=oe.aj(n,"max",i,me,p.a([D],f),1/0,-1/0,!0)):(V=oe.oW(n,"min",i,v,D),G=oe.oW(n,"max",i,v,D)):(V=me,G=V)):(V=me,G=V),K=oe.V(n,"sparse",i,ge.vf(),!1),k?f=v===5126||v===5125:f=!1,f&&i.p(j.qw(),Ie),(R==="MAT2"||R==="MAT3"||R==="MAT4")&&g!==-1&&(g&3)!=0&&i.p(j.qv(),fe),v){case 5120:case 5121:case 5122:case 5123:case 5125:f=X.w,f.a(G),f.a(V),oe.J(n,"name",i,me,me,me,!1),f=oe.y(n,w.L,i,me),Q=oe.z(n,i),ne=new ge.fb(a,g,v,S,R,k,G,V,K,ke.b_(v),f,Q,!1),V!=null&&(f=i.O(),Q=E.bt(V.length,0,!1,X.e),ie=new Array(V.length),ie.fixed$length=Array,i.W(ne,new ge.eH(Q,p.a(ie,X.V),J.fG(V,!1),f))),G!=null&&(f=i.O(),Q=E.bt(G.length,0,!1,X.e),ie=new Array(G.length),ie.fixed$length=Array,i.W(ne,new ge.eF(Q,p.a(ie,X.V),J.fG(G,!1),f)));break;default:f=X.fy,f.a(G),f.a(V),oe.J(n,"name",i,me,me,me,!1),f=oe.y(n,w.L,i,me),Q=oe.z(n,i),ne=new ge.fa(a,g,v,S,R,k,G,V,K,ke.b_(v),f,Q,!1),i.W(ne,new ge.ez(i.O())),V!=null&&(f=i.O(),Q=E.bt(V.length,0,!1,X.e),ie=new Array(V.length),ie.fixed$length=Array,i.W(ne,new ge.eG(Q,p.a(ie,X.m),J.fG(V,!1),f))),G!=null&&(f=i.O(),Q=E.bt(G.length,0,!1,X.e),ie=new Array(G.length),ie.fixed$length=Array,i.W(ne,new ge.eE(Q,p.a(ie,X.m),J.fG(G,!1),f)));break}return ne},bm:function(n,i,a,f,g,v){var S,R,k="byteOffset";if(n===-1)return!1;if(n%i!=0)if(v!=null)v.k(j.qx(),p.a([n,i],X.M),k);else return!1;if(S=f.y,S===-1)return!1;if(R=S+n,R%i!=0)if(v!=null)v.E(j.pV(),p.a([R,i],X.M));else return!1;if(S=f.z,n>S)if(v!=null)v.k(j.nd(),p.a([n,a,g,S],X.M),k);else return!1;else if(n+a>S)if(v!=null)v.E(j.nd(),p.a([n,a,g,S],X.M));else return!1;return!0},mz:function(n,i,a,f){var g=i.byteLength,v=ke.b_(n);if(g<a+v*f)return null;switch(n){case 5121:return p.mH(i,a,f);case 5123:return p.nQ(i,a,f);case 5125:return p.nR(i,a,f);default:return null}},nx:function(n,i,a,f){var g=i.byteLength,v=ke.b_(n);if(g<a+v*f)return null;switch(n){case 5126:return p.cW(i,a,f),g=new Float32Array(i,a,f),g;default:return null}},ny:function(n,i,a,f){var g=i.byteLength,v=ke.b_(n);if(g<a+v*f)return null;switch(n){case 5120:return p.cW(i,a,f),g=new Int8Array(i,a,f),g;case 5121:return p.mH(i,a,f);case 5122:return p.cW(i,a,f),g=new Int16Array(i,a,f),g;case 5123:return p.nQ(i,a,f);case 5125:return p.nR(i,a,f);default:return null}},rL:function(n,i){var a,f,g;return oe.A(n,w.cf,i),a=oe.W(n,"count",i,-1,null,-1,1,!0),f=oe.V(n,"indices",i,ge.vd(),!0),g=oe.V(n,"values",i,ge.ve(),!0),a===-1||f==null||g==null?null:new ge.bP(a,f,g,oe.y(n,w.d8,i,null),oe.z(n,i),!1)},rJ:function(n,i){return oe.A(n,w.c8,i),new ge.bQ(oe.P(n,"bufferView",i,!0),oe.W(n,"byteOffset",i,0,null,-1,0,!1),oe.W(n,"componentType",i,-1,w.bR,-1,0,!0),oe.y(n,w.d6,i,null),oe.z(n,i),!1)},rK:function(n,i){return oe.A(n,w.cb,i),new ge.bR(oe.P(n,"bufferView",i,!0),oe.W(n,"byteOffset",i,0,null,-1,0,!1),oe.y(n,w.d7,i,null),oe.z(n,i),!1)},a0:function(){},fb:function(i,a,f,g,v,S,R,k,D,V,G,K,Q){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=v,ne.cx=S,ne.cy=R,ne.db=k,ne.dx=D,ne.dy=V,ne.fr=null,ne.fx=0,ne.k2=ne.k1=null,ne.a=G,ne.b=K,ne.a$=Q},l6:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v},l7:function(i){this.a=i},l8:function(){},l9:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v},l4:function(i){this.a=i},l5:function(i){this.a=i},fa:function(i,a,f,g,v,S,R,k,D,V,G,K,Q){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=v,ne.cx=S,ne.cy=R,ne.db=k,ne.dx=D,ne.dy=V,ne.fr=null,ne.fx=0,ne.k2=ne.k1=null,ne.a=G,ne.b=K,ne.a$=Q},l0:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v},l1:function(i){this.a=i},l2:function(){},l3:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v},bP:function(i,a,f,g,v,S){var R=this;R.d=i,R.e=a,R.f=f,R.a=g,R.b=v,R.a$=S},bQ:function(i,a,f,g,v,S){var R=this;R.d=i,R.e=a,R.f=f,R.r=null,R.a=g,R.b=v,R.a$=S},bR:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},ez:function(i){this.a=i},eG:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},eE:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},eH:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},eF:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},oe:function(n,i,a){var f=E.aR(X.X),g=i==null?0:i;return n!=null&&f.K(0,n),new ge.kV(g,f,a)},t4:function(){return new p.a8(w.ak,new ge.fS,X.gw)},t3:function(n){var i,a,f,g,v=X.i,S=p.a([],v),R=X._,k=p.a([],X.d6),D=E.a5(X.al,X.f9),V=p.a([],v),G=p.a([],v),K=p.a([],X.j),Q=p.a([],X.a9);return v=p.a(["image/jpeg","image/png"],v),i=X.aD,a=X.X,f=X.cn,g=E.mF(["POSITION",E.b8([w.k],i),"NORMAL",E.b8([w.k],i),"TANGENT",E.b8([w.u],i),"TEXCOORD",E.b8([w.aV,w.aQ,w.aU],i),"COLOR",E.b8([w.k,w.R,w.T,w.u,w.D,w.E],i),"JOINTS",E.b8([w.aY,w.aZ],i),"WEIGHTS",E.b8([w.u,w.D,w.E],i)],a,f),f=E.mF(["POSITION",E.b8([w.k],i),"NORMAL",E.b8([w.k],i),"TANGENT",E.b8([w.k],i)],a,f),i=n==null?ge.oe(null,null,null):n,f=new ge.j(i,S,E.a5(X.W,X.b7),E.a5(R,R),E.a5(X.f7,X.an),k,E.a5(X.u,X.gz),E.a5(X.cl,X.eG),D,V,G,K,E.aR(X.af),Q,new E.a9(""),v,g,f),g=X.em,f.dx=new E.aX(G,g),f.cy=new E.aX(V,g),f.ch=new E.be(D,X.f8),f.fr=new E.aX(K,X.go),f},kV:function(i,a,f){this.a=i,this.b=a,this.c=f},j:function n(i,a,f,g,v,S,R,k,D,n,V,G,K,Q,ne,ie,fe,me){var Ie=this;Ie.b=i,Ie.c=a,Ie.d=f,Ie.e=g,Ie.f=v,Ie.r=S,Ie.x=R,Ie.y=k,Ie.z=!1,Ie.Q=D,Ie.ch=null,Ie.cx=n,Ie.cy=null,Ie.db=V,Ie.dx=null,Ie.dy=G,Ie.fr=null,Ie.fx=K,Ie.fy=Q,Ie.go=ne,Ie.id=!1,Ie.k1=ie,Ie.k2=fe,Ie.k3=me},fS:function(){},fR:function(){},fT:function(){},fW:function(i){this.a=i},fX:function(i){this.a=i},fU:function(i){this.a=i},fV:function(){},fY:function(i,a){this.a=i,this.b=a},c4:function(){}},ke={rO:function(n,i){var a,f,g,v,S,R,k,D,V,G=null,K="channels",Q="samplers";if(oe.A(n,w.cd,i),a=oe.m6(n,K,i),a!=null){for(f=a.gi(a),g=new Array(f),g.fixed$length=Array,g=p.a(g,X.fr),v=new oe.L(g,f,K,X.eq),f=i.c,f.push(K),S=0;S<a.gi(a);++S)R=a.j(0,S),f.push(w.c.l(S)),oe.A(R,w.cM,i),g[S]=new ke.b1(oe.P(R,"sampler",i,!0),oe.V(R,"target",i,ke.vh(),!0),oe.y(R,w.da,i,G),oe.z(R,i),!1),f.pop();f.pop()}else v=G;if(k=oe.m6(n,Q,i),k!=null){for(f=k.gi(k),g=new Array(f),g.fixed$length=Array,g=p.a(g,X.es),D=new oe.L(g,f,Q,X.az),f=i.c,f.push(Q),S=0;S<k.gi(k);++S)V=k.j(0,S),f.push(w.c.l(S)),oe.A(V,w.cs,i),g[S]=new ke.b2(oe.P(V,"input",i,!0),oe.J(V,"interpolation",i,"LINEAR",w.c0,G,!1),oe.P(V,"output",i,!0),oe.y(V,w.db,i,G),oe.z(V,i),!1),f.pop();f.pop()}else D=G;return oe.J(n,"name",i,G,G,G,!1),new ke.bn(v,D,oe.y(n,w.ar,i,G),oe.z(n,i),!1)},rN:function(n,i){return oe.A(n,w.cy,i),new ke.bT(oe.P(n,"node",i,!1),oe.J(n,"path",i,null,w.an,null,!0),oe.y(n,w.d9,i,null),oe.z(n,i),!1)},bn:function(i,a,f,g,v){var S=this;S.x=i,S.y=a,S.a=f,S.b=g,S.a$=v},fH:function(i,a){this.a=i,this.b=a},fI:function(i,a,f){this.a=i,this.b=a,this.c=f},b1:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},bT:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},b2:function(i,a,f,g,v,S){var R=this;R.d=i,R.e=a,R.f=f,R.x=R.r=null,R.a=g,R.b=v,R.a$=S},ei:function(i){this.a=0,this.b=i},dp:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.e=v.d=0,v.$ti=g},b_:function(n){switch(n){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return-1}},wa:function(n){switch(n){case 5121:case 5123:case 5125:return 0;case 5120:return-128;case 5122:return-32768;case 5124:return-2147483648;default:throw p.c(E.O(null))}},pb:function(n){switch(n){case 5120:return 127;case 5121:return 255;case 5122:return 32767;case 5123:return 65535;case 5124:return 2147483647;case 5125:return 4294967295;default:throw p.c(E.O(null))}}},Se={rP:function(n,i){var a,f,g,v,S=null,R="minVersion";return oe.A(n,w.ca,i),oe.J(n,"copyright",i,S,S,S,!1),a=oe.J(n,"generator",i,S,S,S,!1),f=j.bj(),g=oe.J(n,"version",i,S,S,f,!0),f=oe.J(n,R,i,S,S,f,!1),v=new Se.bo(a,g,f,oe.y(n,w.dc,i,S),oe.z(n,i),!1),a=f!=null&&g!=null,a&&(v.gcM()>v.gb8()?a=!0:a=v.gcM()==v.gb8()&&v.geb()>v.gbO(),a&&i.k(j.qR(),p.a([f,g],X.M),R)),v},bo:function(i,a,f,g,v,S){var R=this;R.e=i,R.f=a,R.r=f,R.a=g,R.b=v,R.a$=S},te:function(n,i){var a,f,g,v,S,R,k,D,V,G="bufferView",K=null;if(oe.A(n,w.cc,i),v=oe.P(n,G,i,!1),S=i.k1,R=oe.J(n,"mimeType",i,K,S,K,!1),a=oe.J(n,"uri",i,K,K,K,!1),k=v===-1,D=!k,D&&R==null&&i.k(j.d1(),p.a(["mimeType"],X.M),G),D&&a!=null?k=!0:k=k&&a==null,k&&i.E(j.nl(),p.a(["bufferView","uri"],X.M)),f=null,a!=null){g=null;try{g=E.oa(a)}catch(Q){if(p.E(Q)instanceof E.aD)f=oe.p_(a,i);else throw Q}g!=null?(i.id&&i.p(j.nc(),"uri"),V=g.cB(),R==null&&(k=w.d.F(S,g.gax()),k||i.k(j.nm(),p.a([g.gax(),S],X.M),"uri"),R=g.gax())):V=K}else V=K;return S=f,oe.J(n,"name",i,K,K,K,!1),new Se.aO(v,R,S,V,oe.y(n,w.au,i,K),oe.z(n,i),!1)},aO:function(i,a,f,g,v,S,R){var k=this;k.x=i,k.y=a,k.z=f,k.Q=g,k.cx=k.ch=null,k.a=v,k.b=S,k.a$=R},tO:function(n,i){var a=null;return oe.A(n,w.cH,i),oe.W(n,"magFilter",i,-1,w.bU,-1,0,!1),oe.W(n,"minFilter",i,-1,w.bX,-1,0,!1),oe.W(n,"wrapS",i,10497,w.ad,-1,0,!1),oe.W(n,"wrapT",i,10497,w.ad,-1,0,!1),oe.J(n,"name",i,a,a,a,!1),new Se.bv(oe.y(n,w.dv,i,a),oe.z(n,i),!1)},bv:function(i,a,f){this.a=i,this.b=a,this.a$=f},tv:function(){return new Se.cD(new Float32Array(16))},tL:function(){return new Se.eW(new Float32Array(4))},og:function(n){var i=new Float32Array(3);return i[2]=n[2],i[1]=n[1],i[0]=n[0],new Se.cJ(i)},of:function(){return new Se.cJ(new Float32Array(3))},cD:function(i){this.a=i},eW:function(i){this.a=i},cJ:function(i){this.a=i},f9:function(i){this.a=i}},de={rU:function(n,i){var a,f,g,v,S,R,k,D,V="byteLength",G=null,K="uri";if(oe.A(n,w.cO,i),v=oe.W(n,V,i,-1,G,-1,1,!0),a=null,S=n.w(K),S)if(f=oe.J(n,K,i,G,G,G,!1),f!=null){g=null;try{g=E.oa(f)}catch(Q){if(p.E(Q)instanceof E.aD)a=oe.p_(f,i);else throw Q}g!=null?(i.id&&i.p(j.nc(),K),g.gax()==="application/octet-stream"||g.gax()==="application/gltf-buffer"?R=g.cB():(i.k(j.qA(),p.a([g.gax()],X.M),K),R=G)):R=G,R!=null&&v!==-1&&R.length!==v&&(k=j.pw(),D=R.length,i.k(k,p.a([D,v],X.M),V),v=D)}else R=G;else R=G;return k=a,oe.J(n,"name",i,G,G,G,!1),new de.aN(k,v,S,R,oe.y(n,w.dd,i,G),oe.z(n,i),!1)},aN:function(i,a,f,g,v,S,R){var k=this;k.x=i,k.y=a,k.z=f,k.Q=g,k.a=v,k.b=S,k.a$=R},p2:function(){var n=new de.mo;J.rB(t.exports,E.cp(new de.mk(n))),J.rC(t.exports,E.cp(new de.ml(n))),J.rD(t.exports,E.cp(new de.mm)),J.rA(t.exports,E.cp(new de.mn))},fB:function(n,i){return de.wc(n,i)},wc:function(n,i){var a=0,f=E.ec(X.t),g,v=2,S,R,k,D,V,G,K=E.ee(function(Q,ne){for(Q===1&&(S=ne,a=v);;)switch(a){case 0:if(!X.a.b(n))throw p.c(E.O("data: Argument must be a Uint8Array."));return V=de.oE(i),R=de.oI(V),k=null,v=4,a=7,E.cV(De.tb(E.mI(p.a([n],X.d),X.w),R),K);case 7:return D=ne,a=8,E.cV(D.bU(),K);case 8:k=ne,v=2,a=6;break;case 4:throw v=3,G=S,p.E(G)instanceof De.db,G;case 3:a=2;break;case 6:g=de.fz(V,R,k),a=1;break;case 1:return E.e6(g,f);case 2:return E.e5(S,f)}});return E.e7(K,f)},n5:function(n,i){var a=0,f=E.ec(X.t),g,v,S,R=E.ee(function(k,D){if(k===1)return E.e5(D,f);for(;;)switch(a){case 0:if(typeof n!="string")throw p.c(E.O("json: Argument must be a string."));v=de.oE(i),S=de.oI(v),g=de.fz(v,S,De.ta(n,S)),a=1;break;case 1:return E.e6(g,f)}});return E.e7(R,f)},oE:function(n){var i;if(n!=null?i=typeof n=="number"||p.e9(n)||typeof n=="string"||X.l.b(n):i=!1,i)throw p.c(E.O("options: Value must be an object."));return X.bv.a(n)},fz:function(n,i,a){var f=0,g=E.ec(X.t),v,S,R,k,D,V=E.ee(function(G,K){if(G===1)return E.e5(K,g);for(;;)switch(f){case 0:if(D=n==null,D)R=null,k=null;else{if(S=J.b0(n),R=de.uM(S.gbd(n)),S.gbE(n)!=null&&!X.b1.b(S.gbE(n)))throw p.c(E.O("options.externalResourceFunction: Value must be a function."));if(k=S.gbE(n),S.gc_(n)!=null&&!p.e9(S.gc_(n)))throw p.c(E.O("options.writeTimestamp: Value must be a boolean."))}f=(a==null?null:a.b)!=null?3:4;break;case 3:return f=5,E.cV(de.uL(i,a,k).aJ(),V);case 5:case 4:D=D?null:J.rw(n),v=new Be.kW(R,i,a,D==null?!0:D).bc(),f=1;break;case 1:return E.e6(v,g)}});return E.e7(V,g)},uM:function(n){var i,a;if(n!=null)if(typeof n=="string")try{return a=E.ob(n),a}catch(f){throw a=p.E(f),a instanceof E.aD?(i=a,p.c(E.O("options.uri: "+p.b(i)+"."))):f}else throw p.c(E.O("options.uri: Value must be a string."));return null},oI:function(n){var i,a,f,g,v,S,R,k,D;if(n!=null){if(i=J.b0(n),i.gb9(n)!=null?a=!p.aJ(i.gb9(n))||i.gb9(n)<0:a=!1,a)throw p.c(E.O("options.maxIssues: Value must be a non-negative integer."));if(i.gb6(n)!=null){if(!X.l.b(i.gb6(n)))throw p.c(E.O("options.ignoredIssues: Value must be an array."));for(f=p.a([],X.i),g=0;g<J.X(i.gb6(n));++g)if(v=J.nt(i.gb6(n),g),typeof v=="string"&&v.length!==0)f.push(v);else throw p.c(E.O("options.ignoredIssues["+g+"]: Value must be a non-empty String."))}else f=null;if(i.gai(n)!=null){if(typeof i.gai(n)=="number"||p.e9(i.gai(n))||typeof i.gai(n)=="string"||X.l.b(i.gai(n)))throw p.c(E.O("options.severityOverrides: Value must be an object."));for(a=X.X,S=E.a5(a,X.dz),a=J.my(t.Object.keys(i.gai(n)),a),a=new p.a6(a,a.gi(a),p.r(a).h("a6<m.E>"));a.n();)if(R=a.d,k=i.gai(n)[R],p.aJ(k)&&k>=0&&k<=3)S.m(0,R,w.cF[k]);else throw p.c(E.O('options.severityOverrides["'+p.b(R)+'"]: Value must be one of [0, 1, 2, 3].'))}else S=null;D=ge.oe(f,i.gb9(n),S)}else D=null;return ge.t3(D)},uL:function(n,i,a){var f=new de.lU(a),g=new E.dD("options.externalResourceFunction is required to load this resource.");return new ze.jw(i.b,n,new de.lS(n,i,a,f,g),new de.lT(a,f,g))},bb:function(){},hx:function(){},cP:function(){},mo:function(){},mk:function(i){this.a=i},mj:function(i,a,f){this.a=i,this.b=a,this.c=f},mg:function(i){this.a=i},mh:function(i,a){this.a=i,this.b=a},ml:function(i){this.a=i},mi:function(i,a,f){this.a=i,this.b=a,this.c=f},me:function(i){this.a=i},mf:function(i,a){this.a=i,this.b=a},mm:function(){},mn:function(){},lU:function(i){this.a=i},lV:function(i){this.a=i},lW:function(i){this.a=i},lS:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v},lT:function(i,a,f){this.a=i,this.b=a,this.c=f},eP:function(i){this.a=i}},ye={rT:function(n,i){var a,f,g,v,S,R=null,k="byteStride";return oe.A(n,w.c_,i),a=oe.W(n,"byteLength",i,-1,R,-1,1,!0),f=oe.W(n,k,i,-1,R,252,4,!1),g=oe.W(n,"target",i,-1,w.bP,-1,0,!1),f!==-1&&(a!==-1&&f>a&&i.k(j.qB(),p.a([f,a],X.M),k),f%4!=0&&i.k(j.qu(),p.a([f,4],X.M),k),g===34963&&i.p(j.mv(),k)),v=oe.P(n,"buffer",i,!0),S=oe.W(n,"byteOffset",i,0,R,-1,0,!1),oe.J(n,"name",i,R,R,R,!1),new ye.bp(v,S,a,f,g,oe.y(n,w.as,i,R),oe.z(n,i),!1)},bp:function(i,a,f,g,v,S,R,k){var D=this;D.x=i,D.y=a,D.z=f,D.Q=g,D.ch=v,D.cy=D.cx=null,D.db=-1,D.a=S,D.b=R,D.a$=k},nI:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt,bn,tn,Sn,mn,pe,Te,Oe,Pe,He,Ae,xt="extensionsRequired",Et="extensionsUsed",Rt=null,Ft=new ye.i0(i);if(Ft.$0(),oe.A(n,w.cQ,i),n.w(xt)&&!n.w(Et)&&i.k(j.d1(),p.a(["extensionsUsed"],X.M),xt),a=oe.oX(n,Et,i),a==null&&(a=p.a([],X.i)),f=oe.oX(n,xt,i),f==null&&(f=p.a([],X.i)),i.e4(a,f),g=new ye.i1(n,Ft,i),v=new ye.i2(Ft,n,i).$1$3$req("asset",Se.vj(),!0,X.gP),(v==null?Rt:v.f)==null)return Rt;if(v.gb8()!==2)return S=j.r5(),R=v.gb8(),i.k(S,p.a([R],X.M),"version"),Rt;for(v.gbO()>0&&(S=j.r6(),R=v.gbO(),i.k(S,p.a([R],X.M),"version")),k=g.$1$2("accessors",ge.vg(),X.W),D=g.$1$2("animations",ke.vi(),X.bj),V=g.$1$2("buffers",de.vo(),X.cT),G=g.$1$2("bufferViews",ye.vp(),X.u),K=g.$1$2("cameras",Re.vs(),X.h2),Q=g.$1$2("images",Se.vG(),X.ec),ne=g.$1$2("materials",we.vZ(),X.fC),ie=g.$1$2("meshes",be.w1(),X.eM),S=X.L,fe=g.$1$2("nodes",ye.w2(),S),me=g.$1$2("samplers",Se.w3(),X.c2),Ie=g.$1$2("scenes",Ue.w4(),X.J),Ft.$0(),Xe=oe.P(n,"scene",i,!1),Fe=Ie.j(0,Xe),R=Xe!==-1&&Fe==null,R&&i.k(j.N(),p.a([Xe],X.M),"scene"),mt=g.$1$2("skins",Ce.w5(),X.aV),at=g.$1$2("textures",$e.w7(),X.ai),Ft.$0(),wt=oe.y(n,w.at,i,Rt),Ft.$0(),gt=new ye.da(a,f,k,D,v,V,G,K,Q,ne,ie,fe,me,Fe,mt,at,wt,oe.z(n,i),!1),pt=new ye.hZ(i,gt),pt.$2(G,w.as),pt.$2(k,w.L),pt.$2(Q,w.au),pt.$2(at,w.N),pt.$2(ne,w.h),pt.$2(ie,w.av),pt.$2(fe,w.M),pt.$2(mt,w.az),pt.$2(D,w.ar),pt.$2(Ie,w.ay),wt.a!==0&&(R=i.c,R.push("extensions"),wt.J(0,new ye.hX(i,gt)),R.pop()),R=i.c,R.push("nodes"),fe.a9(new ye.hY(i,E.aR(S))),R.pop(),bn=[k,V,G,K,Q,ne,ie,fe,me,mt,at],tn=0;tn<11;++tn)if(Sn=bn[tn],Sn.gi(Sn)!==0){for(R.push(Sn.c),S=Sn.b,mn=Sn.a,pe=mn.length,Te=0;Te<S;++Te)Oe=Te>=pe,Oe=Oe?Rt:mn[Te],(Oe==null?Rt:Oe.a$)===!1&&i.X(j.fD(),Te);R.pop()}if(S=i.y,S.a!==0){for(mn=new p.au(S,p.r(S).h("au<1>")),mn=mn.gC(mn);mn.n();)if(pe=mn.d,pe.gi(pe)!==0)for(Pe=S.j(0,pe),w.d.si(R,0),w.d.K(R,Pe),Oe=pe.b,pe=pe.a,He=pe.length,Te=0;Te<Oe;++Te)Ae=Te>=He,Ae=Ae?Rt:pe[Te],(Ae==null?Rt:Ae.ge7())===!1&&i.X(j.fD(),Te);w.d.si(R,0)}return gt},da:function(i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe){var Fe=this;Fe.d=i,Fe.e=a,Fe.f=f,Fe.r=g,Fe.x=v,Fe.y=S,Fe.z=R,Fe.Q=k,Fe.ch=D,Fe.cx=V,Fe.cy=G,Fe.db=K,Fe.dx=Q,Fe.dy=ne,Fe.fx=ie,Fe.fy=fe,Fe.a=me,Fe.b=Ie,Fe.a$=Xe},i0:function(i){this.a=i},i1:function(i,a,f){this.a=i,this.b=a,this.c=f},i2:function(i,a,f){this.a=i,this.b=a,this.c=f},hZ:function(i,a){this.a=i,this.b=a},i_:function(i,a){this.a=i,this.b=a},hX:function(i,a){this.a=i,this.b=a},hY:function(i,a){this.a=i,this.b=a},hV:function(){},hW:function(){},i3:function(i,a){this.a=i,this.b=a},i4:function(i,a){this.a=i,this.b=a},kQ:function(){},o:function(){},es:function(){},fk:function(){},d2:function(n){return new ye.u(n.ch,n.z,n.cx)},bU:function(i){this.a=i},bS:function(i){this.a=i},u:function(i,a,f){this.a=i,this.b=a,this.c=f},tB:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt,bn,tn,Sn,mn,pe,Te=null,Oe="matrix",Pe="translation",He="rotation";return oe.A(n,w.bW,i),n.w(Oe)?(a=oe.aj(n,Oe,i,Te,w.bI,1/0,-1/0,!1),a!=null?(f=new Float32Array(16),g=new Se.cD(f),v=a[0],S=a[1],R=a[2],k=a[3],D=a[4],V=a[5],G=a[6],K=a[7],Q=a[8],ne=a[9],ie=a[10],fe=a[11],me=a[12],Ie=a[13],Xe=a[14],f[15]=a[15],f[14]=Xe,f[13]=Ie,f[12]=me,f[11]=fe,f[10]=ie,f[9]=ne,f[8]=Q,f[7]=K,f[6]=G,f[5]=V,f[4]=D,f[3]=k,f[2]=R,f[1]=S,f[0]=v):g=Te):g=Te,n.w(Pe)?(Fe=oe.aj(n,Pe,i,Te,w.m,1/0,-1/0,!1),mt=Fe!=null?Se.og(Fe):Te):mt=Te,n.w(He)?(at=oe.aj(n,He,i,Te,w.J,1,-1,!1),at!=null?(f=at[0],v=at[1],S=at[2],R=at[3],k=new Float32Array(4),wt=new Se.eW(k),k[0]=f,k[1]=v,k[2]=S,k[3]=R,f=Math.sqrt(wt.gaI()),Math.abs(1-f)>.00769&&i.p(j.r2(),He)):wt=Te):wt=Te,n.w("scale")?(gt=oe.aj(n,"scale",i,Te,w.m,1/0,-1/0,!1),pt=gt!=null?Se.og(gt):Te):pt=Te,bn=oe.P(n,"camera",i,!1),tn=oe.mY(n,"children",i,!1),Sn=oe.P(n,"mesh",i,!1),mn=oe.P(n,"skin",i,!1),pe=oe.aj(n,"weights",i,Te,Te,1/0,-1/0,!1),Sn===-1&&(mn!==-1&&i.k(j.d1(),p.a(["mesh"],X.M),"skin"),pe!=null&&i.k(j.d1(),p.a(["mesh"],X.M),"weights")),g!=null&&((mt!=null||wt!=null||pt!=null)&&i.p(j.qV(),Oe),g.cK()?i.p(j.qT(),Oe):oe.vM(g)||i.p(j.qW(),Oe)),oe.J(n,"name",i,Te,Te,Te,!1),new ye.ah(bn,tn,mn,g,Sn,mt,wt,pt,pe,E.aR(X.J),oe.y(n,w.M,i,Te),oe.z(n,i),!1)},ah:function(i,a,f,g,v,S,R,k,D,V,G,K,Q){var ne=this;ne.x=i,ne.y=a,ne.z=f,ne.Q=g,ne.ch=v,ne.cx=S,ne.cy=R,ne.db=k,ne.dx=D,ne.dy=V,ne.id=ne.go=ne.fy=ne.fx=ne.fr=null,ne.k1=!1,ne.a=G,ne.b=K,ne.a$=Q},jo:function(){},jp:function(){},jq:function(i,a){this.a=i,this.b=a}},Re={rX:function(n,i){var a,f=null,g="orthographic",v="perspective";switch(oe.A(n,w.cN,i),a=n.w(g)&&n.w(v),a&&i.E(j.nl(),w.al),oe.J(n,"type",i,f,w.al,f,!0)){case"orthographic":oe.V(n,g,i,Re.vq(),!0);break;case"perspective":oe.V(n,v,i,Re.vr(),!0);break}return oe.J(n,"name",i,f,f,f,!1),new Re.bq(oe.y(n,w.dg,i,f),oe.z(n,i),!1)},rV:function(n,i){var a,f,g,v;return oe.A(n,w.cP,i),a=oe.R(n,"xmag",i,0/0,1/0,-1/0,1/0,-1/0,!0),f=oe.R(n,"ymag",i,0/0,1/0,-1/0,1/0,-1/0,!0),g=oe.R(n,"zfar",i,0/0,1/0,0,1/0,-1/0,!0),v=oe.R(n,"znear",i,0/0,1/0,-1/0,1/0,0,!0),!isNaN(g)&&!isNaN(v)&&g<=v&&i.R(j.nn()),(a===0||f===0)&&i.R(j.qC()),new Re.bV(oe.y(n,w.de,i,null),oe.z(n,i),!1)},rW:function(n,i){var a,f,g,v;return oe.A(n,w.c9,i),a=oe.R(n,"yfov",i,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(a)&&a>=3.141592653589793,f&&i.R(j.qD()),g=oe.R(n,"zfar",i,0/0,1/0,0,1/0,-1/0,!1),v=oe.R(n,"znear",i,0/0,1/0,0,1/0,-1/0,!0),f=!isNaN(g)&&!isNaN(v)&&g<=v,f&&i.R(j.nn()),oe.R(n,"aspectRatio",i,0/0,1/0,0,1/0,-1/0,!1),new Re.bW(oe.y(n,w.df,i,null),oe.z(n,i),!1)},bq:function(i,a,f){this.a=i,this.b=a,this.a$=f},bV:function(i,a,f){this.a=i,this.b=a,this.a$=f},bW:function(i,a,f){this.a=i,this.b=a,this.a$=f}},we={tu:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q=null,ne="alphaCutoff";for(oe.A(n,w.c2,i),a=oe.V(n,"pbrMetallicRoughness",i,we.w0(),!1),f=oe.V(n,"normalTexture",i,we.p3(),!1),g=oe.V(n,"occlusionTexture",i,we.w_(),!1),v=oe.V(n,"emissiveTexture",i,we.bi(),!1),oe.aj(n,"emissiveFactor",i,w.a8,w.m,1,0,!1),S=oe.J(n,"alphaMode",i,"OPAQUE",w.c1,Q,!1),oe.R(n,ne,i,.5,1/0,-1/0,1/0,0,!1),R=S!=="MASK"&&n.w(ne),R&&i.p(j.qI(),ne),oe.oV(n,"doubleSided",i),k=oe.y(n,w.h,i,Q),oe.J(n,"name",i,Q,Q,Q,!1),D=new we.aS(a,f,g,v,E.a5(X.X,X.e),k,oe.z(n,i),!1),R=p.a([],X.M),R.push(a),R.push(f),R.push(g),R.push(v),V=k.gab(),G=p.r(V),G=new p.a7(J.a_(V.a),V.b,G.h("@<1>").D(G.Q[1]).h("a7<1,2>"));G.n();)K=G.a,R.push(K);return i.aa(D,R),D},tE:function(n,i){var a,f,g,v,S,R,k,D;for(oe.A(n,w.ce,i),oe.aj(n,"baseColorFactor",i,w.aa,w.J,1,0,!1),a=oe.V(n,"baseColorTexture",i,we.bi(),!1),oe.R(n,"metallicFactor",i,1,1/0,-1/0,1,0,!1),oe.R(n,"roughnessFactor",i,1,1/0,-1/0,1,0,!1),f=oe.V(n,"metallicRoughnessTexture",i,we.bi(),!1),g=oe.y(n,w.du,i,null),v=new we.ci(a,f,g,oe.z(n,i),!1),S=p.a([],X.M),S.push(a),S.push(f),R=g.gab(),k=p.r(R),k=new p.a7(J.a_(R.a),R.b,k.h("@<1>").D(k.Q[1]).h("a7<1,2>"));k.n();)D=k.a,S.push(D);return i.aa(v,S),v},tD:function(n,i){var a,f,g,v;return oe.A(n,w.cq,i),a=oe.y(n,w.ax,i,w.h),f=oe.P(n,"index",i,!0),g=oe.W(n,"texCoord",i,0,null,-1,0,!1),oe.R(n,"strength",i,1,1/0,-1/0,1,0,!1),v=new we.ch(f,g,a,oe.z(n,i),!1),i.aa(v,a.gab()),v},tC:function(n,i){var a,f,g,v;return oe.A(n,w.cp,i),a=oe.y(n,w.aw,i,w.h),f=oe.P(n,"index",i,!0),g=oe.W(n,"texCoord",i,0,null,-1,0,!1),oe.R(n,"scale",i,1,1/0,-1/0,1/0,-1/0,!1),v=new we.cg(f,g,a,oe.z(n,i),!1),i.aa(v,a.gab()),v},tT:function(n,i){var a,f;return oe.A(n,w.co,i),a=oe.y(n,w.aA,i,w.h),f=new we.bB(oe.P(n,"index",i,!0),oe.W(n,"texCoord",i,0,null,-1,0,!1),a,oe.z(n,i),!1),i.aa(f,a.gab()),f},aS:function(i,a,f,g,v,S,R,k){var D=this;D.x=i,D.y=a,D.z=f,D.Q=g,D.dx=v,D.a=S,D.b=R,D.a$=k},jb:function(i,a){this.a=i,this.b=a},ci:function(i,a,f,g,v){var S=this;S.e=i,S.x=a,S.a=f,S.b=g,S.a$=v},ch:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},cg:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},bB:function(i,a,f,g,v){var S=this;S.d=i,S.e=a,S.f=null,S.a=f,S.b=g,S.a$=v},td:function(n){var i,a,f={};return f.a=f.b=null,i=new E.C(j.x,X.dD),a=new E.ax(i,X.eP),f.c=!1,f.a=n.bM(new we.i7(f,a),new we.i8(f),new we.i9(f,a)),i},tc:function(n){var i=new we.i6;return i.$2(n,w.bK)?w.aB:i.$2(n,w.bN)?w.aC:i.$2(n,w.bT)?w.aD:null},dK:function(i){this.b=i},dy:function(i,a){this.a=i,this.b=a},cL:function(i,a){this.a=i,this.b=a},c2:function(i,a){this.a=i,this.b=a},c3:function(i,a,f,g,v,S,R,k,D){var V=this;V.a=i,V.b=a,V.c=f,V.d=g,V.e=v,V.f=S,V.r=R,V.x=k,V.y=D},i7:function(i,a){this.a=i,this.b=a},i9:function(i,a){this.a=i,this.b=a},i8:function(i){this.a=i},i6:function(){},i5:function(){},ij:function(i,a){var f=this;f.f=f.e=f.d=f.c=0,f.r=null,f.a=i,f.b=a},il:function(){},ik:function(){},jr:function(i,a,f,g,v,S){var R=this;R.y=R.x=R.r=R.f=R.e=R.d=R.c=0,R.Q=R.z=!1,R.ch=i,R.cx=a,R.cy=!1,R.db=f,R.dx=g,R.a=v,R.b=S},js:function(i){this.a=i},kZ:function(i,a,f){var g=this;g.c=i,g.d=0,g.a=a,g.b=f},dw:function(){},dv:function(){},aP:function(i){this.a=i}},be={tx:function(n,i){var a,f,g,v,S,R,k,D,V,G,K=null,Q="primitives";if(oe.A(n,w.cE,i),a=oe.aj(n,"weights",i,K,K,1/0,-1/0,!1),f=oe.m6(n,Q,i),f!=null){for(g=f.gi(f),v=new Array(g),v.fixed$length=Array,v=p.a(v,X.bZ),S=new oe.L(v,g,Q,X.b_),g=i.c,g.push(Q),R=K,k=-1,D=0;D<f.gi(f);++D)g.push(w.c.l(D)),V=be.tw(f.j(0,D),i),R==null?(G=V.x,R=G==null?K:G.length):(G=V.x,R!==(G==null?K:G.length)&&i.p(j.qQ(),"targets")),k===-1?k=V.cx:k!==V.cx&&i.p(j.qP(),"attributes"),v[D]=V,g.pop();g.pop(),g=R!=null&&a!=null&&R!==a.length,g&&i.k(j.qJ(),p.a([a.length,R],X.M),"weights")}else S=K;return oe.J(n,"name",i,K,K,K,!1),new be.aT(S,oe.y(n,w.av,i,K),oe.z(n,i),!1)},tw:function(n,i){var a,f,g,v,S,R,k="attributes",D={};return oe.A(n,w.ct,i),D.a=D.b=D.c=!1,D.d=0,D.e=-1,D.f=0,D.r=-1,D.x=0,D.y=-1,D.z=0,D.Q=-1,a=oe.W(n,"mode",i,4,null,6,0,!1),f=oe.vB(n,k,i,new be.jc(D,i)),f!=null&&(g=i.c,g.push(k),D.c||i.R(j.qM()),!D.b&&D.a&&i.p(j.qO(),"TANGENT"),D.a&&a===0&&i.p(j.qN(),"TANGENT"),v=new be.jd(i),D.d=v.$3(D.e,D.d,"COLOR"),D.f=v.$3(D.r,D.f,"JOINTS"),D.x=v.$3(D.y,D.x,"WEIGHTS"),D.z=v.$3(D.Q,D.z,"TEXCOORD"),v=D.f,S=D.x,v!==S&&(i.E(j.qL(),p.a([v,S],X.M)),D.x=D.f=0),g.pop()),R=oe.vC(n,"targets",i,new be.je(i)),new be.aH(f,oe.P(n,"indices",i,!1),oe.P(n,"material",i,!1),a,R,D.f,D.x,D.z,E.a5(X.X,X.W),oe.y(n,w.dt,i,null),oe.z(n,i),!1)},aT:function(i,a,f,g){var v=this;v.x=i,v.a=a,v.b=f,v.a$=g},jl:function(i,a){this.a=i,this.b=a},aH:function(i,a,f,g,v,S,R,k,D,V,G,K){var Q=this;Q.d=i,Q.e=a,Q.f=f,Q.r=g,Q.x=v,Q.cx=S,Q.cy=R,Q.db=k,Q.dx=D,Q.fr=Q.dy=-1,Q.go=Q.fy=Q.fx=null,Q.a=V,Q.b=G,Q.a$=K},jc:function(i,a){this.a=i,this.b=a},jd:function(i){this.a=i},je:function(i){this.a=i},jg:function(i,a,f){this.a=i,this.b=a,this.c=f},jh:function(){},ji:function(i,a,f){this.a=i,this.b=a,this.c=f},jj:function(){},jk:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},jf:function(){},ev:function(i,a,f,g,v,S){var R=this;R.a=i,R.b=a,R.c=f,R.x=g,R.ch=R.Q=0,R.cx=v,R.cy=S},tr:function(n,i){return i.toString,oe.A(n,w.ci,i),new be.cc(oe.y(n,w.dr,i,null),oe.z(n,i),!1)},cc:function(i,a,f){this.a=i,this.b=a,this.a$=f}},Ue={tP:function(n,i){var a,f=null;return oe.A(n,w.cz,i),a=oe.mY(n,"nodes",i,!1),oe.J(n,"name",i,f,f,f,!1),new Ue.bw(a,oe.y(n,w.ay,i,f),oe.z(n,i),!1)},bw:function(i,a,f,g){var v=this;v.x=i,v.y=null,v.a=a,v.b=f,v.a$=g},jz:function(i,a){this.a=i,this.b=a},tn:function(n,i){var a,f,g,v,S,R,k,D,V;for(i.toString,oe.A(n,w.bO,i),oe.R(n,"clearcoatFactor",i,0,1/0,-1/0,1,0,!1),a=oe.V(n,"clearcoatTexture",i,we.bi(),!1),oe.R(n,"clearcoatRoughnessFactor",i,0,1/0,-1/0,1,0,!1),f=oe.V(n,"clearcoatRoughnessTexture",i,we.bi(),!1),g=oe.V(n,"clearcoatNormalTexture",i,we.p3(),!1),v=oe.y(n,w.dn,i,null),S=new Ue.c8(a,f,g,v,oe.z(n,i),!1),R=p.a([],X.M),R.push(a),R.push(f),R.push(g),k=v.gab(),D=p.r(k),D=new p.a7(J.a_(k.a),k.b,D.h("@<1>").D(D.Q[1]).h("a7<1,2>"));D.n();)V=D.a,R.push(V);return i.aa(S,R),S},c8:function(i,a,f,g,v,S){var R=this;R.e=i,R.r=a,R.x=f,R.a=g,R.b=v,R.a$=S},tq:function(n,i){var a,f,g,v,S,R,k;for(i.toString,oe.A(n,w.bS,i),oe.R(n,"transmissionFactor",i,0,1/0,-1/0,1,0,!1),a=oe.V(n,"transmissionTexture",i,we.bi(),!1),f=oe.y(n,w.dq,i,null),g=new Ue.cb(a,f,oe.z(n,i),!1),v=p.a([],X.M),v.push(a),S=f.gab(),R=p.r(S),R=new p.a7(J.a_(S.a),S.b,R.h("@<1>").D(R.Q[1]).h("a7<1,2>"));R.n();)k=R.a,v.push(k);return i.aa(g,v),g},cb:function(i,a,f,g){var v=this;v.e=i,v.a=a,v.b=f,v.a$=g}},Ce={tQ:function(n,i){var a,f,g,v=null;return oe.A(n,w.c4,i),a=oe.P(n,"inverseBindMatrices",i,!1),f=oe.P(n,"skeleton",i,!1),g=oe.mY(n,"joints",i,!0),oe.J(n,"name",i,v,v,v,!1),new Ce.by(a,f,g,E.aR(X.L),oe.y(n,w.az,i,v),oe.z(n,i),!1)},by:function(i,a,f,g,v,S,R){var k=this;k.x=i,k.y=a,k.z=f,k.cx=k.ch=k.Q=null,k.cy=g,k.a=v,k.b=S,k.a$=R},kB:function(i){this.a=i},eu:function(i){this.a=i},lX:function(n){return n==null||n.ch==null||n.z===-1||n.Q===-1||n.fr==null&&n.dx==null?null:n},wb:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt;for(n.f.a9(new Ce.mq(i)),Ce.v2(i),a=p.a([],X.B),f=p.a([],X.bd),g=i.c,w.d.si(g,0),g.push("meshes"),v=n.cy,S=v.b,R=n.db,k=R.$ti.h("a6<m.E>"),D=n.fx,v=v.a,V=v.length,G=0;G<S;++G)if(K={},Q=G>=V,ne=Q?null:v[G],(ne==null?null:ne.x)!=null&&(Q=ne.x,!Q.b4(Q,new Ce.mr))){for(K.a=K.b=-1,ie=new p.a6(R,R.gi(R),k);ie.n();)fe=ie.d,fe.fy==ne?(me=fe.id,me=(me==null?null:me.ch)!=null):me=!1,me&&(me=fe.id,Ie=me.ch.length,Xe=K.b,(Xe===-1||Ie<Xe)&&(K.b=Ie,K.a=D.bK(D,me)));K.b<1||(g.push(w.c.l(G)),g.push("primitives"),Q.a9(new Ce.ms(K,i,a,f)),g.pop(),g.pop())}if(g.pop(),a.length!==0)for(;Ce.v8(a);)for(g=f.length,Fe=0;Fe<f.length;f.length===g||(0,p.cs)(f),++Fe)mt=f[Fe],mt.x||mt.dR(i)},v8:function(n){var i,a;for(i=n.length,a=0;a<n.length;n.length===i||(0,p.cs)(n),++a)n[a].n();return n.fixed$length&&p.a2(E.ab("removeWhere")),w.d.dI(n,new Ce.lZ,!0),n.length!==0},v2:function(n){var i,a,f,g,v,S,R,k,D,V,G,K;for(i=n.d.gdY(),i=i.gC(i),a=n.c;i.n();)if(f=i.gq(),g=Ce.lX(f.a),g!=null){for(v=w.l.j(0,g.ch),v==null&&(v=0),S=f.b,w.d.si(a,0),f=g.ac(),f=new E.aB(f.a(),p.r(f).h("aB<1>")),R=J.M(S),k=0,D=0,V=!1;f.n();V=!0){for(G=f.gq(),K=0;K<R.gi(S);++K)!!R.j(S,K).Y(n,k,D,G);++D,D===v&&(D=0),++k}if(V)for(K=0;K<R.gi(S);++K)R.j(S,K).aw(n)}},mq:function(i){this.a=i},mr:function(){},ms:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},lZ:function(){},ey:function(i,a,f,g,v,S){var R=this;R.a=i,R.b=a,R.c=f,R.d=g,R.e=v,R.r=R.f=0,R.x=!1,R.z=R.y=0,R.Q=S}},$e={tU:function(n,i){var a,f,g=null;return oe.A(n,w.cJ,i),a=oe.P(n,"sampler",i,!1),f=oe.P(n,"source",i,!1),oe.J(n,"name",i,g,g,g,!1),new $e.bA(a,f,oe.y(n,w.N,i,g),oe.z(n,i),!1)},bA:function(i,a,f,g,v){var S=this;S.x=i,S.y=a,S.Q=S.z=null,S.a=f,S.b=g,S.a$=v},tp:function(n,i){var a,f,g,v,S,R,k,D;for(i.toString,oe.A(n,w.bM,i),oe.aj(n,"sheenColorFactor",i,w.a8,w.m,1,0,!1),a=oe.V(n,"sheenColorTexture",i,we.bi(),!1),oe.R(n,"sheenRoughnessFactor",i,0,1/0,-1/0,1,0,!1),f=oe.V(n,"sheenRoughnessTexture",i,we.bi(),!1),g=oe.y(n,w.dp,i,null),v=new $e.ca(a,f,g,oe.z(n,i),!1),S=p.a([],X.M),S.push(a),S.push(f),R=g.gab(),k=p.r(R),k=new p.a7(J.a_(R.a),R.b,k.h("@<1>").D(k.Q[1]).h("a7<1,2>"));k.n();)D=k.a,S.push(D);return i.aa(v,S),v},ca:function(i,a,f,g,v){var S=this;S.e=i,S.r=a,S.a=f,S.b=g,S.a$=v},uO:function(n){var i="POSITION",a=n.k2;a.j(0,i).K(0,w.cL),a.j(0,"NORMAL").K(0,w.K),a.j(0,"TANGENT").K(0,w.cR),a.j(0,"TEXCOORD").K(0,w.bQ),a=n.k3,a.j(0,i).K(0,w.c5),a.j(0,"NORMAL").K(0,w.K),a.j(0,"TANGENT").K(0,w.K)}},ze={cR:function(i,a){this.a=i,this.b=a},eX:function(i){var a=this;a.a=i,a.f=a.e=a.d=a.c=a.b=null},jw:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},jx:function(i,a,f){this.a=i,this.b=a,this.c=f},jy:function(i,a){this.a=i,this.b=a}},W={D:function(n,i,a){return new W.fZ(a,n,i)},ai:function(n,i,a){return new W.jA(a,n,i)},q:function(n,i,a){return new W.jR(a,n,i)},v:function(n,i,a){return new W.ir(a,n,i)},ar:function(n,i,a){return new W.hy(a,n,i)},v3:function(n){return"'"+p.b(n)+"'"},uZ:function(n){return typeof n=="string"?"'"+n+"'":J.ag(n)},bx:function(i,a){this.a=i,this.b=a},ic:function(){},fZ:function(i,a,f){this.a=i,this.b=a,this.c=f},h8:function(){},h6:function(){},h5:function(){},hd:function(){},ha:function(){},hb:function(){},h9:function(){},hm:function(){},ho:function(){},hf:function(){},hl:function(){},he:function(){},hk:function(){},hi:function(){},hj:function(){},hh:function(){},hg:function(){},hr:function(){},hq:function(){},hp:function(){},hv:function(){},hu:function(){},h2:function(){},h3:function(){},h4:function(){},ht:function(){},hs:function(){},h7:function(){},hn:function(){},hc:function(){},h1:function(){},h_:function(){},h0:function(){},ia:function(i,a,f){this.a=i,this.b=a,this.c=f},ib:function(){},jA:function(i,a,f){this.a=i,this.b=a,this.c=f},jK:function(){},jL:function(){},jQ:function(){},jO:function(){},jI:function(){},jE:function(){},jM:function(){},jF:function(){},jP:function(){},jB:function(){},jJ:function(){},jD:function(){},jG:function(){},jC:function(){},jN:function(){},jH:function(){},jR:function(i,a,f){this.a=i,this.b=a,this.c=f},kp:function(){},ko:function(){},ke:function(){},kc:function(){},kd:function(){},kb:function(){},k9:function(){},ka:function(){},kk:function(){},kl:function(){},k8:function(){},k7:function(){},k6:function(){},k5:function(){},k3:function(){},k2:function(){},k0:function(){},jV:function(){},kz:function(){},ky:function(){},k_:function(){},jX:function(){},jZ:function(){},jW:function(){},jY:function(){},kx:function(){},kv:function(){},kq:function(){},kf:function(){},kw:function(){},kr:function(){},ks:function(){},kt:function(){},ku:function(){},kj:function(){},ki:function(){},kh:function(){},kg:function(){},kn:function(){},km:function(){},k1:function(){},jT:function(){},jS:function(){},k4:function(){},jU:function(){},ir:function(i,a,f){this.a=i,this.b=a,this.c=f},j0:function(){},j5:function(){},iQ:function(){},iC:function(){},j6:function(){},iy:function(){},ix:function(){},iA:function(){},iB:function(){},iw:function(){},iz:function(){},iv:function(){},iF:function(){},iD:function(){},j4:function(){},iE:function(){},iX:function(){},iI:function(){},iJ:function(){},iG:function(){},iH:function(){},iP:function(){},iO:function(){},iN:function(){},iM:function(){},iR:function(){},iL:function(){},iK:function(){},j3:function(){},iS:function(){},iV:function(){},iU:function(){},iT:function(){},iW:function(){},iY:function(){},iZ:function(){},iu:function(){},it:function(){},is:function(){},j_:function(){},j1:function(){},j2:function(){},hy:function(i,a,f){this.a=i,this.b=a,this.c=f},hE:function(){},hD:function(){},hC:function(){},hM:function(){},hA:function(){},hL:function(){},hH:function(){},hI:function(){},hB:function(){},hz:function(){},hF:function(){},hK:function(){},hJ:function(){},hG:function(){},cA:function(i,a,f,g,v){var S=this;S.a=i,S.b=a,S.c=f,S.d=g,S.e=v}},Ve={uN:function(n){n.k1.push("image/webp")},t8:function(n,i){return i.toString,oe.A(n,w.cK,i),new Ve.c0(oe.P(n,"source",i,!1),oe.y(n,w.di,i,null),oe.z(n,i),!1)},c0:function(i,a,f,g){var v=this;v.d=i,v.e=null,v.a=a,v.b=f,v.a$=g},T:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},a4:function(i,a){this.a=i,this.b=a},c1:function(i,a){this.a=i,this.b=a},ce:function(i,a){this.a=i,this.b=a},eY:function(i,a){this.a=i,this.b=a}},Le={tk:function(n,i){var a,f,g,v,S,R,k,D,V,G,K=null,Q="lights",ne="spot";if(i.toString,oe.A(n,w.cx,i),a=oe.m6(n,Q,i),f=X.dB,g=X.du,a!=null){for(v=a.gi(a),S=new Array(v),S.fixed$length=Array,f=p.a(S,f),R=new oe.L(f,v,Q,g),g=i.c,g.push(Q),k=0;k<a.gi(a);++k)D=a.j(0,k),g.push(w.c.l(k)),oe.A(D,w.bZ,i),oe.aj(D,"color",i,w.a9,w.m,1,0,!1),oe.R(D,"intensity",i,1,1/0,-1/0,1/0,0,!1),V=oe.J(D,"type",i,K,w.ch,K,!0),V==="spot"?oe.V(D,ne,i,Le.vO(),!0):(v=D.w(ne),v&&i.p(j.no(),ne)),G=oe.R(D,"range",i,0/0,1/0,0,1/0,-1/0,!1),v=V==="directional"&&!isNaN(G),v&&i.p(j.no(),"range"),oe.J(D,"name",i,K,K,K,!1),f[k]=new Le.b7(oe.y(D,w.dl,i,K),oe.z(D,i),!1),g.pop();g.pop()}else v=new Array(0),v.fixed$length=Array,R=new oe.L(p.a(v,f),0,Q,g);return new Le.bs(R,oe.y(n,w.dj,i,K),oe.z(n,i),!1)},tl:function(n,i){var a,f,g,v="outerConeAngle";return oe.A(n,w.cr,i),a=oe.R(n,"innerConeAngle",i,0,1.5707963267948966,-1/0,1/0,0,!1),f=oe.R(n,v,i,.7853981633974483,1/0,0,1.5707963267948966,-1/0,!1),g=!isNaN(f)&&!isNaN(a)&&f<=a,g&&i.k(j.qH(),p.a([a,f],X.M),v),new Le.c6(oe.y(n,w.dk,i,null),oe.z(n,i),!1)},tm:function(n,i){return i.toString,oe.A(n,w.cw,i),new Le.c7(oe.P(n,"light",i,!0),oe.y(n,w.dm,i,null),oe.z(n,i),!1)},bs:function(i,a,f,g){var v=this;v.d=i,v.a=a,v.b=f,v.a$=g},iq:function(i,a){this.a=i,this.b=a},b7:function(i,a,f){this.a=i,this.b=a,this.a$=f},c6:function(i,a,f){this.a=i,this.b=a,this.a$=f},c7:function(i,a,f,g){var v=this;v.d=i,v.e=null,v.a=a,v.b=f,v.a$=g}},Be={to:function(n,i){var a,f,g,v,S,R,k,D;for(i.toString,oe.A(n,w.cg,i),oe.aj(n,"diffuseFactor",i,w.aa,w.J,1,0,!1),a=oe.V(n,"diffuseTexture",i,we.bi(),!1),oe.aj(n,"specularFactor",i,w.a9,w.m,1,0,!1),oe.R(n,"glossinessFactor",i,1,1/0,-1/0,1,0,!1),f=oe.V(n,"specularGlossinessTexture",i,we.bi(),!1),g=oe.y(n,w.dh,i,null),v=new Be.c9(a,f,g,oe.z(n,i),!1),S=p.a([],X.M),S.push(a),S.push(f),R=g.gab(),k=p.r(R),k=new p.a7(J.a_(R.a),R.b,k.h("@<1>").D(k.Q[1]).h("a7<1,2>"));k.n();)D=k.a,S.push(D);return i.aa(v,S),v},c9:function(i,a,f,g,v){var S=this;S.e=i,S.x=a,S.a=f,S.b=g,S.a$=v},d9:function(i,a,f){var g=this;g.a=i,g.b=null,g.c=a,g.d=null,g.e=f,g.f=null,g.cx=g.ch=g.Q=g.z=g.y=g.x=g.r=0,g.cy=!1,g.dy=g.dx=g.db=null,g.fr=!1,g.fx=null},hP:function(i){this.a=i},hN:function(i){this.a=i},hO:function(i){this.a=i},kW:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},kY:function(){},kX:function(){},n0:function(n){var i=w.d2.e1(n,0,new Be.m7),a=536870911&i+((67108863&i)<<3);return a^=a>>>11,536870911&a+((16383&a)<<15)},m7:function(){},fy:function(n,i){var a=536870911&n+i;return a=536870911&a+((524287&a)<<10),a^a>>>6},oG:function(n){var i=536870911&n+((67108863&n)<<3);return i^=i>>>11,536870911&i+((16383&i)<<15)}},Ye={ts:function(n,i){return i.toString,oe.A(n,w.cD,i),oe.aj(n,"offset",i,w.bH,w.ab,1/0,-1/0,!1),oe.R(n,"rotation",i,0,1/0,-1/0,1/0,-1/0,!1),oe.aj(n,"scale",i,w.bJ,w.ab,1/0,-1/0,!1),new Ye.cd(oe.W(n,"texCoord",i,-1,null,-1,0,!1),oe.y(n,w.ds,i,null),oe.z(n,i),!1)},cd:function(i,a,f,g){var v=this;v.r=i,v.a=a,v.b=f,v.a$=g}},De={tb:function(n,i){var a,f={},g=new E.C(j.x,X.eD);return f.a=!1,f.b=null,a=E.o6(new De.hR(f),new De.hS(f),new De.hT(f),X.w),f.b=n.e8(new De.hU(f,a,new E.ax(g,X.a_),i),a.gdS()),g},t9:function(n,i){var a=new De.cy(n,new E.ax(new E.C(j.x,X.f),X.G));return a.e=i,a},ta:function(n,i){var a,f,g,v=null,S=null;try{S=w.a1.dV(n)}catch(R){if(g=p.E(R),g instanceof E.aD)return a=g,i.av(j.fF(),p.a([a],X.M),!0),v;throw R}if(X.t.b(S))try{return f=ye.nI(S,i),new De.as("model/gltf+json",f,v)}catch(R){if(p.E(R)instanceof ge.c4)return v;throw R}else return i.av(j.Z(),p.a([S,"object"],X.M),!0),v},as:function(i,a,f){this.a=i,this.b=a,this.c=f},hS:function(i){this.a=i},hT:function(i){this.a=i},hR:function(i){this.a=i},hU:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.d=g},cy:function(i,a){var f=this;f.a=i,f.b=null,f.c=a,f.e=f.d=null,f.f=!0},hQ:function(i){this.a=i},db:function(){}},oe={ay:function(n,i,a,f){var g=n.j(0,i);return g==null&&n.w(i)&&f.k(j.Z(),p.a([null,a],X.M),i),g},P:function(n,i,a,f){var g=oe.ay(n,i,"integer",a);if(p.aJ(g)){if(g>=0)return g;a.p(j.fE(),i)}else g==null?f&&a.E(j.bk(),p.a([i],X.M)):a.k(j.Z(),p.a([g,"integer"],X.M),i);return-1},oV:function(n,i,a){var f=oe.ay(n,i,"boolean",a);return f==null?!1:p.e9(f)?f:(a.k(j.Z(),p.a([f,"boolean"],X.M),i),!1)},W:function(n,i,a,f,g,v,S,R){var k,D=oe.ay(n,i,"integer",a);if(p.aJ(D)){if(g!=null){if(!oe.mW(i,D,g,a,!1))return-1}else if(D<S?k=!0:k=v!==-1&&D>v,k)return a.k(j.mu(),p.a([D],X.M),i),-1;return D}else if(D==null){if(!R)return f;a.E(j.bk(),p.a([i],X.M))}else a.k(j.Z(),p.a([D,"integer"],X.M),i);return-1},R:function(n,i,a,f,g,v,S,R,k){var D=oe.ay(n,i,"number",a);if(typeof D=="number")return D<R||D<=v||D>S||D>=g?(a.k(j.mu(),p.a([D],X.M),i),0/0):D;if(D==null){if(!k)return f;a.E(j.bk(),p.a([i],X.M))}else a.k(j.Z(),p.a([D,"number"],X.M),i);return 0/0},J:function(n,i,a,f,g,v,S){var R,k=oe.ay(n,i,"string",a);if(typeof k=="string"){if(g!=null)oe.mW(i,k,g,a,!1);else if(v==null?R=null:(R=v.b,R=R.test(k)),R===!1)return a.k(j.qs(),p.a([k,v.a],X.M),i),null;return k}else if(k==null){if(!S)return f;a.E(j.bk(),p.a([i],X.M))}else a.k(j.Z(),p.a([k,"string"],X.M),i);return null},p_:function(n,i){var a,f,g;try{return a=E.ob(n),g=a,(g.gcI()||g.gbG()||g.gcH()||g.gbI()||g.gbH())&&i.k(j.r0(),p.a([n],X.M),"uri"),a}catch(v){if(g=p.E(v),g instanceof E.aD)return f=g,i.k(j.qr(),p.a([n,f],X.M),"uri"),null;throw v}},n_:function(n,i,a,f){var g=oe.ay(n,i,"object",a);if(X.t.b(g))return g;if(g==null){if(f)return a.E(j.bk(),p.a([i],X.M)),null}else if(a.k(j.Z(),p.a([g,"object"],X.M),i),f)return null;return E.a5(X.X,X._)},V:function(n,i,a,f,g){var v,S,R=oe.ay(n,i,"object",a);return X.t.b(R)?(v=a.c,v.push(i),S=f.$2(R,a),v.pop(),S):(R==null?g&&a.E(j.bk(),p.a([i],X.M)):a.k(j.Z(),p.a([R,"object"],X.M),i),null)},mY:function(n,i,a,f){var g,v,S,R,k,D,V=oe.ay(n,i,"array",a);if(X.o.b(V)){if(g=J.M(V),g.gu(V))return a.p(j.bO(),i),null;for(v=a.c,v.push(i),S=X.e,R=E.aR(S),k=0;k<g.gi(V);++k)D=g.j(V,k),p.aJ(D)&&D>=0?R.B(0,D)||a.X(j.nj(),k):(g.m(V,k,-1),a.X(j.fE(),k));return v.pop(),g.ae(V,S)}else V==null?f&&a.E(j.bk(),p.a([i],X.M)):a.k(j.Z(),p.a([V,"array"],X.M),i);return null},vB:function(n,i,a,f){var g,v=oe.ay(n,i,"object",a);return X.t.b(v)?v.gu(v)?(a.p(j.bO(),i),null):(g=a.c,g.push(i),v.J(0,new oe.m3(f,v,a)),g.pop(),v.af(0,X.X,X.e)):(g=X.M,v==null?a.E(j.bk(),p.a([i],g)):a.k(j.Z(),p.a([v,"object"],g),i),null)},vC:function(n,i,a,f){var g,v,S,R,k,D,V,G=oe.ay(n,i,"array",a);if(X.o.b(G)){if(g=J.M(G),g.gu(G))return a.p(j.bO(),i),null;for(v=a.c,v.push(i),S=X.M,R=X.t,k=!1,D=0;D<g.gi(G);++D)V=g.j(G,D),R.b(V)?V.gu(V)?(a.X(j.bO(),D),k=!0):(v.push(w.c.l(D)),V.J(0,new oe.m4(f,V,a)),v.pop()):(a.E(j.eg(),p.a([V,"object"],S)),k=!0);return v.pop(),k?null:(g=J.my(G,X.h),v=p.r(g).h("a8<m.E,h<f*,d*>*>"),E.dh(new p.a8(g,new oe.m5,v),!1,v.h("af.E")))}else G!=null&&a.k(j.Z(),p.a([G,"array"],X.M),i);return null},aj:function(n,i,a,f,g,v,S,R){var k,D,V,G,K,Q,ne,ie=null,fe=oe.ay(n,i,"array",a);if(X.o.b(fe)){if(k=J.M(fe),k.gu(fe))return a.p(j.bO(),i),ie;if(g!=null&&!oe.mW(i,k.gi(fe),g,a,!0))return ie;for(D=new Array(k.gi(fe)),D.fixed$length=Array,V=p.a(D,X.m),D=X.M,G=!1,K=0;K<k.gi(fe);++K)Q=k.j(fe,K),typeof Q=="number"?(ne=Q<S||Q>v,ne&&(a.k(j.mu(),p.a([Q],D),i),G=!0),R?(ne=j.nr(),ne[0]=Q,V[K]=ne[0]):V[K]=Q):(a.k(j.eg(),p.a([Q,"number"],D),i),G=!0);return G?ie:V}else{if(fe==null)return f==null?k=ie:k=J.eA(f.slice(0),p.U(f).c),k;a.k(j.Z(),p.a([fe,"array"],X.M),i)}return ie},oW:function(n,i,a,f,g){var v,S,R,k,D,V,G,K,Q,ne=oe.ay(n,i,"array",a);if(X.o.b(ne)){if(v=J.M(ne),v.gi(ne)!==g)return a.k(j.nk(),p.a([v.gi(ne),p.a([g],X.V)],X.M),i),null;for(S=ke.wa(f),R=ke.pb(f),k=oe.vv(f,g),D=X.M,V=!1,G=0;G<v.gi(ne);++G)K=v.j(ne,G),typeof K=="number"&&w.bE.cW(K)===K?(p.aJ(K)||a.k(j.qE(),p.a([K],D),i),Q=K<S||K>R,Q&&(a.k(j.qG(),p.a([K,w.ao.j(0,f)],D),i),V=!0),k[G]=J.rH(K)):(a.k(j.eg(),p.a([K,"integer"],D),i),V=!0);return V?null:k}else ne!=null&&a.k(j.Z(),p.a([ne,"array"],X.M),i);return null},oX:function(n,i,a){var f,g,v,S,R,k,D,V,G=oe.ay(n,i,"array",a);if(X.o.b(G)){if(f=J.M(G),f.gu(G))return a.p(j.bO(),i),null;for(g=a.c,g.push(i),v=X.X,S=E.aR(v),R=X.M,k=!1,D=0;D<f.gi(G);++D)V=f.j(G,D),typeof V=="string"?S.B(0,V)||a.X(j.nj(),D):(a.aE(j.eg(),p.a([V,"string"],R),D),k=!0);return g.pop(),k?null:f.ae(G,v)}else G!=null&&a.k(j.Z(),p.a([G,"array"],X.M),i);return null},m6:function(n,i,a){var f,g,v,S,R,k,D=oe.ay(n,i,"array",a);if(X.o.b(D)){if(f=J.M(D),f.gu(D))return a.p(j.bO(),i),null;for(g=f.gC(D),v=X.t,S=X.M,R=!1;g.n();)k=g.gq(),v.b(k)||(a.k(j.eg(),p.a([k,"object"],S),i),R=!0);return R?null:f.ae(D,v)}else f=X.M,D==null?a.E(j.bk(),p.a([i],f)):a.k(j.Z(),p.a([D,"array"],f),i);return null},y:function(n,i,a,f){var g,v,S,R,k,D,V,G,K,Q,ne,ie,fe="extensions",me=E.a5(X.X,X._),Ie=oe.n_(n,fe,a,!1);if(Ie.gu(Ie))return me;for(g=a.c,g.push(fe),v=Ie.gL(),v=v.gC(v),S=X.ax,R=X.v,k=f==null,D=a.f,V=a.r;v.n();){if(G=v.gq(),K=oe.n_(Ie,G,a,!1),Q=a.dx,!Q.F(Q,G)){me.m(0,G,null),Q=a.cy,Q=Q.F(Q,G),Q||a.p(j.qo(),G);continue}if(ne=a.ch.a.j(0,new Ve.c1(i,G)),ne==null){a.p(j.qp(),G);continue}Ie.gi(Ie)>1&&ne.b&&a.p(j.qS(),G),K!=null&&(g.push(G),ie=ne.a.$2(K,a),me.m(0,G,ie),R.b(ie)&&(G=k?i:f,G=D.bS(G,new oe.m2),Q=p.a(g.slice(0),p.U(g).h("p<1>")),Q.fixed$length=Array,J.mx(G,new Ve.ce(ie,Q))),S.b(ie)&&(G=p.a(g.slice(0),p.U(g).h("p<1>")),G.fixed$length=Array,V.push(new Ve.eY(ie,G))),g.pop())}return g.pop(),me},z:function(n,i){var a=n.j(0,"extras"),f=a!=null&&!X.h.b(a);return f&&i.p(j.r_(),"extras"),a},mW:function(n,i,a,f,g){var v;return J.nu(a,i)?!0:(v=g?j.nk():j.nm(),f.k(v,p.a([i,a],X.M),n),!1)},A:function(n,i,a){var f,g,v;for(f=n.gL(),f=f.gC(f);f.n();)g=f.gq(),w.d.F(i,g)?v=!1:(v=w.d.F(w.cl,g),v=!v),v&&a.p(j.qt(),g)},n4:function(n,i,a,f,g,v){var S,R,k,D,V,G,K=g.c;for(K.push(f),S=X.M,R=a.a,k=R.length,D=0;D<n.gi(n);++D)V=n.j(0,D),V!==-1&&(G=V==null||V<0||V>=k?null:R[V],G!=null?(G.a$=!0,i[D]=G,v.$3(G,V,D)):g.aE(j.N(),p.a([V],S),D));K.pop()},vM:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt,bn,tn,Sn,mn,pe,Te,Oe,Pe,He,Ae=n.a;return Ae[3]!==0||Ae[7]!==0||Ae[11]!==0||Ae[15]!==1||n.cE()===0?!1:(i=j.rq(),a=j.rn(),f=j.ro(),g=new Se.cJ(new Float32Array(3)),g.bi(Ae[0],Ae[1],Ae[2]),v=Math.sqrt(g.gaI()),g.bi(Ae[4],Ae[5],Ae[6]),S=Math.sqrt(g.gaI()),g.bi(Ae[8],Ae[9],Ae[10]),R=Math.sqrt(g.gaI()),n.cE()<0&&(v=-v),i=i.a,i[0]=Ae[12],i[1]=Ae[13],i[2]=Ae[14],k=1/v,D=1/S,V=1/R,Ae=new Float32Array(16),new Se.cD(Ae).d_(n),Ae[0]=Ae[0]*k,Ae[1]=Ae[1]*k,Ae[2]=Ae[2]*k,Ae[4]=Ae[4]*D,Ae[5]=Ae[5]*D,Ae[6]=Ae[6]*D,Ae[8]=Ae[8]*V,Ae[9]=Ae[9]*V,Ae[10]=Ae[10]*V,G=new Float32Array(9),G[0]=Ae[0],G[1]=Ae[1],G[2]=Ae[2],G[3]=Ae[4],G[4]=Ae[5],G[5]=Ae[6],G[6]=Ae[8],G[7]=Ae[9],G[8]=Ae[10],a.toString,Ae=G[0],K=G[4],Q=G[8],ne=0+Ae+K+Q,ne>0?(ie=Math.sqrt(ne+1),Ae=a.a,Ae[3]=ie*.5,ie=.5/ie,Ae[0]=(G[5]-G[7])*ie,Ae[1]=(G[6]-G[2])*ie,Ae[2]=(G[1]-G[3])*ie):(Ae<K?fe=K<Q?2:1:fe=Ae<Q?2:0,me=(fe+1)%3,Ie=(fe+2)%3,Ae=fe*3,K=me*3,Q=Ie*3,ie=Math.sqrt(G[Ae+fe]-G[K+me]-G[Q+Ie]+1),a=a.a,a[fe]=ie*.5,ie=.5/ie,a[3]=(G[K+Ie]-G[Q+me])*ie,a[me]=(G[Ae+me]+G[K+fe])*ie,a[Ie]=(G[Ae+Ie]+G[Q+fe])*ie,Ae=a),f=f.a,f[0]=v,f[1]=S,f[2]=R,a=j.rm(),Xe=Ae[0],Fe=Ae[1],mt=Ae[2],at=Ae[3],wt=Xe+Xe,gt=Fe+Fe,pt=mt+mt,bn=Xe*wt,tn=Xe*gt,Sn=Xe*pt,mn=Fe*gt,pe=Fe*pt,Te=mt*pt,Oe=at*wt,Pe=at*gt,He=at*pt,Ae=a.a,Ae[0]=1-(mn+Te),Ae[1]=tn+He,Ae[2]=Sn-Pe,Ae[3]=0,Ae[4]=tn-He,Ae[5]=1-(bn+Te),Ae[6]=pe+Oe,Ae[7]=0,Ae[8]=Sn+Pe,Ae[9]=pe-Oe,Ae[10]=1-(bn+mn),Ae[11]=0,Ae[12]=i[0],Ae[13]=i[1],Ae[14]=i[2],Ae[15]=1,v=f[0],S=f[1],R=f[2],Ae[0]=Ae[0]*v,Ae[1]=Ae[1]*v,Ae[2]=Ae[2]*v,Ae[3]=Ae[3]*v,Ae[4]=Ae[4]*S,Ae[5]=Ae[5]*S,Ae[6]=Ae[6]*S,Ae[7]=Ae[7]*S,Ae[8]=Ae[8]*R,Ae[9]=Ae[9]*R,Ae[10]=Ae[10]*R,Ae[11]=Ae[11]*R,Ae[12]=Ae[12],Ae[13]=Ae[13],Ae[14]=Ae[14],Ae[15]=Ae[15],Math.abs(a.cJ()-n.cJ())<5e-5)},vv:function(n,i){switch(n){case 5120:return new Int8Array(i);case 5121:return new Uint8Array(i);case 5122:return new Int16Array(i);case 5123:return new Uint16Array(i);case 5124:return new Int32Array(i);case 5125:return new Uint32Array(i);default:throw p.c(E.O(null))}},m3:function(i,a,f){this.a=i,this.b=a,this.c=f},m4:function(i,a,f){this.a=i,this.b=a,this.c=f},m5:function(){},m2:function(){},L:function(i,a,f,g){var v=this;v.a=i,v.b=a,v.c=f,v.$ti=g},Y:function(){},f4:function(i,a){this.a=0,this.b=i,this.c=a},f5:function(i,a){this.a=0,this.b=i,this.c=a},en:function(i){this.a=i}},yt=[w,p,J,E,ge,ke,Se,de,ye,Re,we,be,Ue,Ce,$e,ze,W,Ve,Le,Be,Ye,De,oe];ue.setFunctionNamesIfNecessary(yt);var j={};p.mD.prototype={},J.cz.prototype={N:function(n,i){return n===i},gG:function(n){return p.cj(n)},l:function(n){return"Instance of '"+p.b(p.ju(n))+"'"},bb:function(n,i){throw p.c(E.nS(n,i.gcN(),i.gcR(),i.gcO()))}},J.dd.prototype={l:function(n){return String(n)},gG:function(n){return n?519018:218159},$iQ:1},J.cB.prototype={N:function(n,i){return i==null},l:function(n){return"null"},gG:function(n){return 0},bb:function(n,i){return this.d1(n,i)},$ik:1},J.aF.prototype={gG:function(n){return 0},l:function(n){return String(n)},$ibb:1,$icP:1,gep:function(n){return n.then},cV:function(n,i){return n.then(i)},eq:function(n,i,a){return n.then(i,a)},sey:function(n,i){return n.validateBytes=i},seA:function(n,i){return n.validateString=i},seB:function(n,i){return n.version=i},sd5:function(n,i){return n.supportedExtensions=i},gbd:function(n){return n.uri},gbE:function(n){return n.externalResourceFunction},gc_:function(n){return n.writeTimestamp},gb9:function(n){return n.maxIssues},gb6:function(n){return n.ignoredIssues},gai:function(n){return n.severityOverrides}},J.eU.prototype={},J.cl.prototype={},J.aQ.prototype={l:function(n){var i=n[j.n6()];return i==null?this.d2(n):"JavaScript function for "+p.b(J.ag(i))},$iaE:1},J.p.prototype={ae:function(n,i){return new p.b3(n,p.U(n).h("@<1>").D(i).h("b3<1,2>"))},B:function(n,i){n.fixed$length&&p.a2(E.ab("add")),n.push(i)},dI:function(n,i,a){var f,g,v,S=[],R=n.length;for(f=0;f<R;++f)if(g=n[f],i.$1(g)||S.push(g),n.length!==R)throw p.c(E.ad(n));if(v=S.length,v!==R)for(this.si(n,v),f=0;f<S.length;++f)n[f]=S[f]},K:function(n,i){var a;for(n.fixed$length&&p.a2(E.ab("addAll")),a=J.a_(i);a.n();)n.push(a.gq())},ag:function(n,i,a){return new p.a8(n,i,p.U(n).h("@<1>").D(a).h("a8<1,2>"))},cL:function(n,i){var a,f=E.bt(n.length,"",!1,X.S);for(a=0;a<n.length;++a)f[a]=p.b(n[a]);return f.join(i)},a1:function(n,i){return p.du(n,i,null,p.U(n).c)},b5:function(n,i,a){var f,g,v=n.length;for(f=0;f<v;++f){if(g=n[f],i.$1(g))return g;if(n.length!==v)throw p.c(E.ad(n))}return a.$0()},S:function(n,i){return n[i]},Z:function(n,i,a){if(i<0||i>n.length)throw p.c(E.S(i,0,n.length,"start",null));if(a<i||a>n.length)throw p.c(E.S(a,i,n.length,"end",null));return i===a?p.a([],p.U(n)):p.a(n.slice(i,a),p.U(n))},aM:function(n,i,a){return E.aV(i,a,n.length),p.du(n,i,a,p.U(n).c)},gaH:function(n){var i=n.length;if(i>0)return n[i-1];throw p.c(p.mB())},F:function(n,i){var a;for(a=0;a<n.length;++a)if(J.aA(n[a],i))return!0;return!1},gu:function(n){return n.length===0},ga3:function(n){return n.length!==0},l:function(n){return E.id(n,"[","]")},aL:function(n,i){var a=J.eA(n.slice(0),p.U(n).c);return a},bX:function(n){return E.tt(n,p.U(n).c)},gC:function(n){return new J.aC(n,n.length,p.U(n).h("aC<1>"))},gG:function(n){return p.cj(n)},gi:function(n){return n.length},si:function(n,i){if(n.fixed$length&&p.a2(E.ab("set length")),i<0)throw p.c(E.S(i,0,null,"newLength",null));n.length=i},j:function(n,i){if(i>=n.length||i<0)throw p.c(p.ef(n,i));return n[i]},m:function(n,i,a){if(n.immutable$list&&p.a2(E.ab("indexed set")),i>=n.length||i<0)throw p.c(p.ef(n,i));n[i]=a},$in:1,$ii:1,$il:1},J.ii.prototype={},J.aC.prototype={gq:function(){return this.d},n:function(){var n,i=this,a=i.a,f=a.length;if(i.b!==f)throw p.c(p.cs(a));return n=i.c,n>=f?(i.d=null,!1):(i.d=a[n],i.c=n+1,!0)},$iH:1},J.c5.prototype={cW:function(n){var i;if(n>=-2147483648&&n<=2147483647)return n|0;if(isFinite(n))return i=n<0?Math.ceil(n):Math.floor(n),i+0;throw p.c(E.ab(""+n+".toInt()"))},ap:function(n,i){var a,f,g,v;if(i<2||i>36)throw p.c(E.S(i,2,36,"radix",null));return a=n.toString(i),w.a.A(a,a.length-1)!==41?a:(f=/^([\da-z]+)(?:\.([\da-z]+))?\(e\+(\d+)\)$/.exec(a),f==null&&p.a2(E.ab("Unexpected toString result: "+a)),a=f[1],g=+f[3],v=f[2],v!=null&&(a+=v,g-=v.length),a+w.a.bh("0",g))},l:function(n){return n===0&&1/n<0?"-0.0":""+n},gG:function(n){var i,a,f,g,v=n|0;return n===v?536870911&v:(i=Math.abs(n),a=Math.log(i)/.6931471805599453|0,f=Math.pow(2,a),g=i<1?i/f:f/i,536870911&((g*9007199254740992|0)+(g*3542243181176521|0))*599197+a*1259)},bg:function(n,i){var a=n%i;return a===0?0:a>0?a:i<0?a-i:a+i},aq:function(n,i){return(n|0)===n&&(i>=1||i<-1)?n/i|0:this.cs(n,i)},bA:function(n,i){return(n|0)===n?n/i|0:this.cs(n,i)},cs:function(n,i){var a=n/i;if(a>=-2147483648&&a<=2147483647)return a|0;if(a>0){if(a!==1/0)return Math.floor(a)}else if(a>-1/0)return Math.ceil(a);throw p.c(E.ab("Result of truncating division is "+p.b(a)+": "+p.b(n)+" ~/ "+i))},aA:function(n,i){if(i<0)throw p.c(p.bM(i));return i>31?0:n<<i>>>0},ad:function(n,i){var a;return n>0?a=this.cr(n,i):(a=i>31?31:i,a=n>>a>>>0),a},dL:function(n,i){if(i<0)throw p.c(p.bM(i));return this.cr(n,i)},cr:function(n,i){return i>31?0:n>>>i},$iw:1,$iG:1},J.de.prototype={$id:1},J.eB.prototype={},J.br.prototype={A:function(n,i){if(i<0)throw p.c(p.ef(n,i));return i>=n.length&&p.a2(p.ef(n,i)),n.charCodeAt(i)},H:function(n,i){if(i>=n.length)throw p.c(p.ef(n,i));return n.charCodeAt(i)},ah:function(n,i){if(typeof i!="string")throw p.c(E.nz(i,null,null));return n+i},az:function(n,i,a,f){var g=E.aV(i,a,n.length),v=n.substring(0,i),S=n.substring(g);return v+f+S},U:function(n,i,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=a+i.length,f>n.length?!1:i===n.substring(a,f)},V:function(n,i){return this.U(n,i,0)},t:function(n,i,a){if(a==null&&(a=n.length),i<0||i>a)throw p.c(E.jv(i,null));if(a>n.length)throw p.c(E.jv(a,null));return n.substring(i,a)},bj:function(n,i){return this.t(n,i,null)},ev:function(n){var i,a,f;if(typeof n.trimRight!="undefined"){if(i=n.trimRight(),a=i.length,a===0)return i;f=a-1,this.A(i,f)===133&&(a=J.nK(i,f))}else a=J.nK(n,n.length),i=n;return a===i.length?i:a===0?"":i.substring(0,a)},bh:function(n,i){var a,f;if(0>=i)return"";if(i===1||n.length===0)return n;if(i!==i>>>0)throw p.c(w.be);for(a=n,f="";(i&1)==1&&(f=a+f),i=i>>>1,i!==0;)a+=a;return f},am:function(n,i,a){var f=i-n.length;return f<=0?n:this.bh(a,f)+n},b7:function(n,i,a){var f;if(a<0||a>n.length)throw p.c(E.S(a,0,n.length,null,null));return f=n.indexOf(i,a),f},bK:function(n,i){return this.b7(n,i,0)},l:function(n){return n},gG:function(n){var i,a,f;for(i=n.length,a=0,f=0;f<i;++f)a=536870911&a+n.charCodeAt(f),a=536870911&a+((524287&a)<<10),a^=a>>6;return a=536870911&a+((67108863&a)<<3),a^=a>>11,536870911&a+((16383&a)<<15)},gi:function(n){return n.length},$if:1},p.bE.prototype={gC:function(n){var i=p.r(this);return new p.d3(J.a_(this.ga5()),i.h("@<1>").D(i.Q[1]).h("d3<1,2>"))},gi:function(n){return J.X(this.ga5())},gu:function(n){return J.nv(this.ga5())},ga3:function(n){return J.ru(this.ga5())},a1:function(n,i){var a=p.r(this);return p.fP(J.nw(this.ga5(),i),a.c,a.Q[1])},S:function(n,i){return p.r(this).Q[1].a(J.eh(this.ga5(),i))},F:function(n,i){return J.nu(this.ga5(),i)},l:function(n){return J.ag(this.ga5())}},p.d3.prototype={n:function(){return this.a.n()},gq:function(){return this.$ti.Q[1].a(this.a.gq())},$iH:1},p.bX.prototype={ga5:function(){return this.a}},p.dC.prototype={$in:1},p.dx.prototype={j:function(n,i){return this.$ti.Q[1].a(J.nt(this.a,i))},m:function(n,i,a){J.rr(this.a,i,this.$ti.c.a(a))},si:function(n,i){J.rz(this.a,i)},B:function(n,i){J.mx(this.a,this.$ti.c.a(i))},aM:function(n,i,a){var f=this.$ti;return p.fP(J.rx(this.a,i,a),f.c,f.Q[1])},$in:1,$il:1},p.b3.prototype={ae:function(n,i){return new p.b3(this.a,this.$ti.h("@<1>").D(i).h("b3<1,2>"))},ga5:function(){return this.a}},p.bY.prototype={af:function(n,i,a){var f=this.$ti;return new p.bY(this.a,f.h("@<1>").D(f.Q[1]).D(i).D(a).h("bY<1,2,3,4>"))},w:function(n){return this.a.w(n)},j:function(n,i){return this.$ti.h("4?").a(this.a.j(0,i))},m:function(n,i,a){var f=this.$ti;this.a.m(0,f.c.a(i),f.Q[1].a(a))},J:function(n,i){this.a.J(0,new p.fQ(this,i))},gL:function(){var n=this.$ti;return p.fP(this.a.gL(),n.c,n.Q[2])},gi:function(n){var i=this.a;return i.gi(i)},gu:function(n){var i=this.a;return i.gu(i)}},p.fQ.prototype={$2:function(n,i){var a=this.a.$ti;this.b.$2(a.Q[2].a(n),a.Q[3].a(i))},$S:function(){return this.a.$ti.h("k(1,2)")}},p.eD.prototype={l:function(n){var i="LateInitializationError: "+this.a;return i}},p.cu.prototype={gi:function(n){return this.a.length},j:function(n,i){return w.a.A(this.a,i)}},p.n.prototype={},p.af.prototype={gC:function(n){var i=this;return new p.a6(i,i.gi(i),p.r(i).h("a6<af.E>"))},gu:function(n){return this.gi(this)===0},F:function(n,i){var a,f=this,g=f.gi(f);for(a=0;a<g;++a){if(J.aA(f.S(0,a),i))return!0;if(g!==f.gi(f))throw p.c(E.ad(f))}return!1},ag:function(n,i,a){return new p.a8(this,i,p.r(this).h("@<af.E>").D(a).h("a8<1,2>"))},a1:function(n,i){return p.du(this,i,null,p.r(this).h("af.E"))}},p.dt.prototype={gdj:function(){var n=J.X(this.a),i=this.c;return i==null||i>n?n:i},gdM:function(){var n=J.X(this.a),i=this.b;return i>n?n:i},gi:function(n){var i,a=J.X(this.a),f=this.b;return f>=a?0:(i=this.c,i==null||i>=a?a-f:i-f)},S:function(n,i){var a=this,f=a.gdM()+i;if(i<0||f>=a.gdj())throw p.c(E.ex(i,a,"index",null,null));return J.eh(a.a,f)},a1:function(n,i){var a,f,g=this;return E.aU(i,"count"),a=g.b+i,f=g.c,f!=null&&a>=f?new p.b6(g.$ti.h("b6<1>")):p.du(g.a,a,f,g.$ti.c)},aL:function(n,i){var a,f,g,v=this,S=v.b,R=v.a,k=J.M(R),D=k.gi(R),V=v.c;if(V!=null&&V<D&&(D=V),a=D-S,a<=0)return R=J.ie(0,v.$ti.c),R;for(f=E.bt(a,k.S(R,S),!1,v.$ti.c),g=1;g<a;++g)if(f[g]=k.S(R,S+g),k.gi(R)<D)throw p.c(E.ad(v));return f}},p.a6.prototype={gq:function(){var n=this.d;return n},n:function(){var n,i=this,a=i.a,f=J.M(a),g=f.gi(a);if(i.b!==g)throw p.c(E.ad(a));return n=i.c,n>=g?(i.d=null,!1):(i.d=f.S(a,n),++i.c,!0)},$iH:1},p.b9.prototype={gC:function(n){var i=p.r(this);return new p.a7(J.a_(this.a),this.b,i.h("@<1>").D(i.Q[1]).h("a7<1,2>"))},gi:function(n){return J.X(this.a)},gu:function(n){return J.nv(this.a)},S:function(n,i){return this.b.$1(J.eh(this.a,i))}},p.c_.prototype={$in:1},p.a7.prototype={n:function(){var n=this,i=n.b;return i.n()?(n.a=n.c.$1(i.gq()),!0):(n.a=null,!1)},gq:function(){var n=this.a;return n}},p.a8.prototype={gi:function(n){return J.X(this.a)},S:function(n,i){return this.b.$1(J.eh(this.a,i))}},p.l_.prototype={gC:function(n){return new p.cm(J.a_(this.a),this.b,this.$ti.h("cm<1>"))},ag:function(n,i,a){return new p.b9(this,i,this.$ti.h("@<1>").D(a).h("b9<1,2>"))}},p.cm.prototype={n:function(){var n,i;for(n=this.a,i=this.b;n.n();)if(i.$1(n.gq()))return!0;return!1},gq:function(){return this.a.gq()}},p.bc.prototype={a1:function(n,i){return E.aM(i,"count"),E.aU(i,"count"),new p.bc(this.a,this.b+i,p.r(this).h("bc<1>"))},gC:function(n){return new p.dr(J.a_(this.a),this.b,p.r(this).h("dr<1>"))}},p.cw.prototype={gi:function(n){var i=J.X(this.a)-this.b;return i>=0?i:0},a1:function(n,i){return E.aM(i,"count"),E.aU(i,"count"),new p.cw(this.a,this.b+i,this.$ti)},$in:1},p.dr.prototype={n:function(){var n,i;for(n=this.a,i=0;i<this.b;++i)n.n();return this.b=0,n.n()},gq:function(){return this.a.gq()}},p.b6.prototype={gC:function(n){return w.Y},gu:function(n){return!0},gi:function(n){return 0},S:function(n,i){throw p.c(E.S(i,0,0,"index",null))},F:function(n,i){return!1},ag:function(n,i,a){return new p.b6(a.h("b6<0>"))},a1:function(n,i){return E.aU(i,"count"),this}},p.d6.prototype={n:function(){return!1},gq:function(){throw p.c(p.mB())},$iH:1},p.d8.prototype={si:function(n,i){throw p.c(E.ab("Cannot change the length of a fixed-length list"))},B:function(n,i){throw p.c(E.ab("Cannot add to a fixed-length list"))}},p.f7.prototype={m:function(n,i,a){throw p.c(E.ab("Cannot modify an unmodifiable list"))},si:function(n,i){throw p.c(E.ab("Cannot change the length of an unmodifiable list"))},B:function(n,i){throw p.c(E.ab("Cannot add to an unmodifiable list"))}},p.cI.prototype={},p.cG.prototype={gG:function(n){var i=this._hashCode;return i!=null||(i=536870911&664597*J.aL(this.a),this._hashCode=i),i},l:function(n){return'Symbol("'+p.b(this.a)+'")'},N:function(n,i){return i==null?!1:i instanceof p.cG&&this.a==i.a},$icH:1},p.e4.prototype={},p.d4.prototype={},p.cv.prototype={af:function(n,i,a){var f=p.r(this);return E.nP(this,f.c,f.Q[1],i,a)},gu:function(n){return this.gi(this)===0},l:function(n){return E.mG(this)},m:function(n,i,a){p.t2()},$ih:1},p.aq.prototype={gi:function(n){return this.a},w:function(n){return typeof n!="string"||n==="__proto__"?!1:this.b.hasOwnProperty(n)},j:function(n,i){return this.w(i)?this.ce(i):null},ce:function(n){return this.b[n]},J:function(n,i){var a,f,g,v=this.c;for(a=v.length,f=0;f<a;++f)g=v[f],i.$2(g,this.ce(g))},gL:function(){return new p.dz(this,p.r(this).h("dz<1>"))}},p.dz.prototype={gC:function(n){var i=this.a.c;return new J.aC(i,i.length,p.U(i).h("aC<1>"))},gi:function(n){return this.a.c.length}},p.al.prototype={aD:function(){var n,i=this,a=i.$map;return a==null&&(n=i.$ti,a=new p.aG(n.h("@<1>").D(n.Q[1]).h("aG<1,2>")),p.oU(i.a,a),i.$map=a),a},w:function(n){return this.aD().w(n)},j:function(n,i){return this.aD().j(0,i)},J:function(n,i){this.aD().J(0,i)},gL:function(){var n=this.aD();return new p.au(n,p.r(n).h("au<1>"))},gi:function(n){return this.aD().a}},p.ig.prototype={gcN:function(){var n=this.a;return n},gcR:function(){var n,i,a,f,g=this;if(g.c===1||(n=g.d,i=n.length-g.e.length-g.f,i===0))return w.ai;for(a=[],f=0;f<i;++f)a.push(n[f]);return a.fixed$length=Array,a.immutable$list=Array,a},gcO:function(){var n,i,a,f,g,v,S=this;if(S.c!==0||(n=S.e,i=n.length,a=S.d,f=a.length-i-S.f,i===0))return w.ap;for(g=new p.aG(X.eo),v=0;v<i;++v)g.m(0,new p.cG(n[v]),a[f+v]);return new p.d4(g,X.gF)}},p.jt.prototype={$2:function(n,i){var a=this.a;a.b=a.b+"$"+p.b(n),this.b.push(n),this.c.push(i),++a.a},$S:42},p.kJ.prototype={a4:function(n){var i,a,f=this,g=new RegExp(f.a).exec(n);return g==null?null:(i=Object.create(null),a=f.b,a!==-1&&(i.arguments=g[a+1]),a=f.c,a!==-1&&(i.argumentsExpr=g[a+1]),a=f.d,a!==-1&&(i.expr=g[a+1]),a=f.e,a!==-1&&(i.method=g[a+1]),a=f.f,a!==-1&&(i.receiver=g[a+1]),i)}},p.eQ.prototype={l:function(n){var i=this.b;return i==null?"NoSuchMethodError: "+p.b(this.a):"NoSuchMethodError: method not found: '"+i+"' on null"}},p.eC.prototype={l:function(n){var i,a=this,f="NoSuchMethodError: method not found: '",g=a.b;return g==null?"NoSuchMethodError: "+p.b(a.a):(i=a.c,i==null?f+g+"' ("+p.b(a.a)+")":f+g+"' on '"+i+"' ("+p.b(a.a)+")")}},p.f6.prototype={l:function(n){var i=this.a;return i.length===0?"Error":"Error: "+i}},p.eS.prototype={l:function(n){return"Throw of null ('"+(this.a===null?"null":"undefined")+"' from JavaScript)"},$ia3:1},p.d7.prototype={},p.dS.prototype={l:function(n){var i,a=this.b;return a!=null?a:(a=this.a,i=a!==null&&typeof a=="object"?a.stack:null,this.b=i==null?"":i)},$iam:1},p.bZ.prototype={l:function(n){var i=this.constructor,a=i==null?null:i.name;return"Closure '"+p.pd(a==null?"unknown":a)+"'"},$iaE:1,geC:function(){return this},$C:"$1",$R:1,$D:null},p.f1.prototype={},p.f_.prototype={l:function(n){var i=this.$static_name;return i==null?"Closure of unknown static method":"Closure '"+p.pd(i)+"'"}},p.ct.prototype={N:function(n,i){var a=this;return i==null?!1:a===i?!0:i instanceof p.ct?a.a===i.a&&a.b===i.b&&a.c===i.c:!1},gG:function(n){var i,a=this.c;return a==null?i=p.cj(this.a):i=typeof a!="object"?J.aL(a):p.cj(a),(i^p.cj(this.b))>>>0},l:function(n){var i=this.c;return i==null&&(i=this.a),"Closure '"+p.b(this.d)+"' of "+("Instance of '"+p.b(p.ju(i))+"'")}},p.eZ.prototype={l:function(n){return"RuntimeError: "+this.a}},p.lA.prototype={},p.aG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new p.au(this,p.r(this).h("au<1>"))},gab:function(){var n=p.r(this);return p.ja(new p.au(this,n.h("au<1>")),new p.im(this),n.c,n.Q[1])},w:function(n){var i,a,f=this;return typeof n=="string"?(i=f.b,i==null?!1:f.cc(i,n)):typeof n=="number"&&(n&67108863)===n?(a=f.c,a==null?!1:f.cc(a,n)):f.e5(n)},e5:function(n){var i=this.d;return i==null?!1:this.bL(this.bu(i,J.aL(n)&67108863),n)>=0},j:function(n,i){var a,f,g,v,S=this,R=null;return typeof i=="string"?(a=S.b,a==null?R:(f=S.aW(a,i),g=f==null?R:f.b,g)):typeof i=="number"&&(i&67108863)===i?(v=S.c,v==null?R:(f=S.aW(v,i),g=f==null?R:f.b,g)):S.e6(i)},e6:function(n){var i,a,f=this.d;return f==null||(i=this.bu(f,J.aL(n)&67108863),a=this.bL(i,n),a<0)?null:i[a].b},m:function(n,i,a){var f,g,v,S,R,k,D=this;typeof i=="string"?(f=D.b,D.c2(f==null?D.b=D.bx():f,i,a)):typeof i=="number"&&(i&67108863)===i?(g=D.c,D.c2(g==null?D.c=D.bx():g,i,a)):(v=D.d,v==null&&(v=D.d=D.bx()),S=J.aL(i)&67108863,R=D.bu(v,S),R==null?D.bz(v,S,[D.by(i,a)]):(k=D.bL(R,i),k>=0?R[k].b=a:R.push(D.by(i,a))))},bS:function(n,i){var a;return this.w(n)?this.j(0,n):(a=i.$0(),this.m(0,n,a),a)},J:function(n,i){for(var a=this,f=a.e,g=a.r;f!=null;){if(i.$2(f.a,f.b),g!==a.r)throw p.c(E.ad(a));f=f.c}},c2:function(n,i,a){var f=this.aW(n,i);f==null?this.bz(n,i,this.by(i,a)):f.b=a},by:function(n,i){var a=this,f=new p.j7(n,i);return a.e==null?a.e=a.f=f:a.f=a.f.c=f,++a.a,a.r=a.r+1&67108863,f},bL:function(n,i){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(J.aA(n[f].a,i))return f;return-1},l:function(n){return E.mG(this)},aW:function(n,i){return n[i]},bu:function(n,i){return n[i]},bz:function(n,i,a){n[i]=a},di:function(n,i){delete n[i]},cc:function(n,i){return this.aW(n,i)!=null},bx:function(){var n="<non-identifier-key>",i=Object.create(null);return this.bz(i,n,i),this.di(i,n),i}},p.im.prototype={$1:function(n){return this.a.j(0,n)},$S:function(){return p.r(this.a).h("2(1)")}},p.j7.prototype={},p.au.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var i=this.a,a=new p.df(i,i.r,this.$ti.h("df<1>"));return a.c=i.e,a},F:function(n,i){return this.a.w(i)}},p.df.prototype={gq:function(){return this.d},n:function(){var n,i=this,a=i.a;if(i.b!==a.r)throw p.c(E.ad(a));return n=i.c,n==null?(i.d=null,!1):(i.d=n.a,i.c=n.c,!0)},$iH:1},p.m9.prototype={$1:function(n){return this.a(n)},$S:33},p.ma.prototype={$2:function(n,i){return this.a(n,i)},$S:62},p.mb.prototype={$1:function(n){return this.a(n)},$S:83},p.ih.prototype={l:function(n){return"RegExp/"+this.a+"/"+this.b.flags},aG:function(n){var i;return typeof n!="string"&&p.a2(p.bM(n)),i=this.b.exec(n),i==null?null:new p.ly(i)}},p.ly.prototype={},p.dm.prototype={dv:function(n,i,a,f){var g=E.S(i,0,a,f,null);throw p.c(g)},c8:function(n,i,a,f){(i>>>0!==i||i>a)&&this.dv(n,i,a,f)}},p.cE.prototype={gi:function(n){return n.length},dJ:function(n,i,a,f,g){var v,S,R=n.length;if(this.c8(n,i,R,"start"),this.c8(n,a,R,"end"),i>a)throw p.c(E.S(i,0,a,null,null));if(v=a-i,g<0)throw p.c(E.O(g));if(S=f.length,S-g<v)throw p.c(E.cF("Not enough elements"));(g!==0||S!==v)&&(f=f.subarray(g,g+v)),n.set(f,i)},$iat:1},p.dl.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},m:function(n,i,a){p.bf(i,n,n.length),n[i]=a},$in:1,$ii:1,$il:1},p.av.prototype={m:function(n,i,a){p.bf(i,n,n.length),n[i]=a},a0:function(n,i,a,f,g){if(X.eB.b(f)){this.dJ(n,i,a,f,g);return}this.d3(n,i,a,f,g)},d0:function(n,i,a,f){return this.a0(n,i,a,f,0)},$in:1,$ii:1,$il:1},p.dk.prototype={Z:function(n,i,a){return new Float32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eI.prototype={Z:function(n,i,a){return new Float64Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eJ.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int16Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eK.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eL.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Int8Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eM.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint16Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.eN.prototype={j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint32Array(n.subarray(i,p.bJ(i,a,n.length)))}},p.dn.prototype={gi:function(n){return n.length},j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint8ClampedArray(n.subarray(i,p.bJ(i,a,n.length)))}},p.cf.prototype={gi:function(n){return n.length},j:function(n,i){return p.bf(i,n,n.length),n[i]},Z:function(n,i,a){return new Uint8Array(n.subarray(i,p.bJ(i,a,n.length)))},$icf:1,$iaa:1},p.dO.prototype={},p.dP.prototype={},p.dQ.prototype={},p.dR.prototype={},p.aI.prototype={h:function(n){return p.fv(et.typeUniverse,this,n)},D:function(n){return p.ui(et.typeUniverse,this,n)}},p.fj.prototype={},p.dX.prototype={l:function(n){return p.az(this.a,null)},$ibC:1},p.fi.prototype={l:function(n){return this.a}},p.dY.prototype={},E.lb.prototype={$1:function(n){var i=this.a,a=i.a;i.a=null,a.$0()},$S:13},E.la.prototype={$1:function(n){var i,a;this.a.a=n,i=this.b,a=this.c,i.firstChild?i.removeChild(a):i.appendChild(a)},$S:58},E.lc.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.ld.prototype={$0:function(){this.a.$0()},$C:"$0",$R:0,$S:2},E.lG.prototype={d6:function(n,i){if(t.setTimeout!=null)t.setTimeout(p.m0(new E.lH(this,i),0),n);else throw p.c(E.ab("`setTimeout()` not found."))}},E.lH.prototype={$0:function(){this.b.$0()},$C:"$0",$R:0,$S:1},E.fc.prototype={T:function(n){var i,a=this;a.b?(i=a.a,a.$ti.h("ae<1>").b(n)?i.c6(n):i.ca(n)):a.a.bk(n)},bD:function(n,i){var a;i==null&&(i=E.el(n)),a=this.a,this.b?a.aB(n,i):a.aT(n,i)}},E.lK.prototype={$1:function(n){return this.a.$2(0,n)},$S:116},E.lL.prototype={$2:function(n,i){this.a.$2(1,new p.d7(n,i))},$C:"$2",$R:2,$S:31},E.m_.prototype={$2:function(n,i){this.a(n,i)},$S:32},E.cO.prototype={l:function(n){return"IterationMarker("+this.b+", "+p.b(this.a)+")"}},E.aB.prototype={gq:function(){var n=this.c;return n==null?this.b:n.gq()},n:function(){for(var n,i,a,f,g,v=this;;){if(n=v.c,n!=null){if(n.n())return!0;v.c=null}if(i=function(S,R,k){for(var D,V=R;;)try{return S(V,D)}catch(G){D=G,V=k}}(v.a,0,1),i instanceof E.cO)if(a=i.b,a===2){if(f=v.d,f==null||f.length===0)return v.b=null,!1;v.a=f.pop();continue}else{if(n=i.a,a===3)throw n;if(g=J.a_(n),g instanceof E.aB){n=v.d,n==null&&(n=v.d=[]),n.push(v.a),v.a=g.a;continue}else{v.c=g;continue}}else return v.b=i,!0}return!1},$iH:1},E.dW.prototype={gC:function(n){return new E.aB(this.a(),this.$ti.h("aB<1>"))}},E.ff.prototype={bD:function(n,i){var a;if(E.aM(n,"error"),a=this.a,a.a!==0)throw p.c(E.cF("Future already completed"));i==null&&(i=E.el(n)),a.aT(n,i)},M:function(n){return this.bD(n,null)}},E.ax.prototype={T:function(n){var i=this.a;if(i.a!==0)throw p.c(E.cF("Future already completed"));i.bk(n)},b3:function(){return this.T(null)}},E.cM.prototype={ea:function(n){return(this.c&15)!=6?!0:this.b.b.bW(this.d,n.a)},e2:function(n){var i=this.e,a=this.b.b;return X.Q.b(i)?a.ej(i,n.a,n.b):a.bW(i,n.a)}},E.C.prototype={ao:function(n,i,a,f){var g,v=j.x;return v!==w.f&&(a=a!=null?E.v4(a,v):a),g=new E.C(j.x,f.h("C<0>")),this.aR(new E.cM(g,a==null?1:3,i,a)),g},cV:function(n,i,a){return this.ao(n,i,null,a)},cu:function(n,i,a){var f=new E.C(j.x,a.h("C<0>"));return this.aR(new E.cM(f,19,n,i)),f},be:function(n){var i=new E.C(j.x,this.$ti);return this.aR(new E.cM(i,8,n,null)),i},dK:function(n){this.a=4,this.c=n},aR:function(n){var i,a=this,f=a.a;if(f<=1)n.a=a.c,a.c=n;else{if(f===2){if(f=a.c,i=f.a,i<4){f.aR(n);return}a.a=i,a.c=f.c}E.cZ(null,null,a.b,new E.li(a,n))}},co:function(n){var i,a,f,g,v,S,R=this,k={};if(k.a=n,n!=null)if(i=R.a,i<=1){if(a=R.c,R.c=n,a!=null){for(f=n.a,g=n;f!=null;g=f,f=v)v=f.a;g.a=a}}else{if(i===2){if(i=R.c,S=i.a,S<4){i.co(n);return}R.a=S,R.c=i.c}k.a=R.b2(n),E.cZ(null,null,R.b,new E.lq(k,R))}},b1:function(){var n=this.c;return this.c=null,this.b2(n)},b2:function(n){var i,a,f;for(i=n,a=null;i!=null;a=i,i=f)f=i.a,i.a=a;return a},c9:function(n){var i,a=this,f=a.$ti;f.h("ae<1>").b(n)?f.b(n)?E.ll(n,a):E.ol(n,a):(i=a.b1(),a.a=4,a.c=n,E.cN(a,i))},ca:function(n){var i=this,a=i.b1();i.a=4,i.c=n,E.cN(i,a)},aB:function(n,i){var a=this,f=a.b1(),g=E.fK(n,i);a.a=8,a.c=g,E.cN(a,f)},bk:function(n){if(this.$ti.h("ae<1>").b(n)){this.c6(n);return}this.d9(n)},d9:function(n){this.a=1,E.cZ(null,null,this.b,new E.lk(this,n))},c6:function(n){var i=this;if(i.$ti.b(n)){n.a===8?(i.a=1,E.cZ(null,null,i.b,new E.lp(i,n))):E.ll(n,i);return}E.ol(n,i)},aT:function(n,i){this.a=1,E.cZ(null,null,this.b,new E.lj(this,n,i))},$iae:1},E.li.prototype={$0:function(){E.cN(this.a,this.b)},$S:2},E.lq.prototype={$0:function(){E.cN(this.b,this.a.a)},$S:2},E.lm.prototype={$1:function(n){var i=this.a;i.a=0,i.c9(n)},$S:13},E.ln.prototype={$2:function(n,i){this.a.aB(n,i)},$C:"$2",$R:2,$S:41},E.lo.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lk.prototype={$0:function(){this.a.ca(this.b)},$S:2},E.lp.prototype={$0:function(){E.ll(this.b,this.a)},$S:2},E.lj.prototype={$0:function(){this.a.aB(this.b,this.c)},$S:2},E.lt.prototype={$0:function(){var n,i,a,f,g,v=this,S=null;try{a=v.a.a,S=a.b.b.cS(a.d)}catch(R){n=p.E(R),i=p.aK(R),v.c?(a=v.b.a.c.a,f=n,f=a==null?f==null:a===f,a=f):a=!1,f=v.a,a?f.c=v.b.a.c:f.c=E.fK(n,i),f.b=!0;return}if(S instanceof E.C&&S.a>=4){S.a===8&&(a=v.a,a.c=S.c,a.b=!0);return}X.c.b(S)&&(g=v.b.a,a=v.a,a.c=J.rF(S,new E.lu(g),X.z),a.b=!1)},$S:1},E.lu.prototype={$1:function(n){return this.a},$S:47},E.ls.prototype={$0:function(){var n,i,a,f;try{a=this.a,f=a.a,a.c=f.b.b.bW(f.d,this.b)}catch(g){n=p.E(g),i=p.aK(g),a=this.a,a.c=E.fK(n,i),a.b=!0}},$S:1},E.lr.prototype={$0:function(){var n,i,a,f,g,v,S,R=this;try{n=R.a.a.c,f=R.b,f.a.ea(n)&&f.a.e!=null&&(f.c=f.a.e2(n),f.b=!1)}catch(k){i=p.E(k),a=p.aK(k),f=R.a.a.c,g=f.a,v=i,S=R.b,(g==null?v==null:g===v)?S.c=f:S.c=E.fK(i,a),S.b=!0}},$S:1},E.fd.prototype={},E.aW.prototype={gi:function(n){var i={},a=new E.C(j.x,X.fJ);return i.a=0,this.bN(new E.kF(i,this),!0,new E.kG(i,a),a.gde()),a}},E.kC.prototype={$1:function(n){var i=this.a;i.aS(n),i.aU()},$S:function(){return this.b.h("k(0)")}},E.kD.prototype={$2:function(n,i){var a=this.a;a.aQ(n,i),a.aU()},$C:"$2",$R:2,$S:48},E.kE.prototype={$0:function(){var n=this.a;return new E.dL(new J.aC(n,1,p.U(n).h("aC<1>")))},$S:function(){return this.b.h("dL<0>()")}},E.kF.prototype={$1:function(n){++this.a.a},$S:function(){return p.r(this.b).h("k(1)")}},E.kG.prototype={$0:function(){this.b.c9(this.a.a)},$C:"$0",$R:0,$S:2},E.f0.prototype={},E.cS.prototype={gdE:function(){return(this.b&8)==0?this.a:this.a.gbZ()},aV:function(){var n,i=this;return(i.b&8)==0?(n=i.a,n==null?i.a=new E.dU:n):(n=i.a.gbZ(),n)},gau:function(){var n=this.a;return(this.b&8)!=0?n.gbZ():n},bl:function(){return(this.b&4)!=0?new E.bz("Cannot add event after closing"):new E.bz("Cannot add event while adding a stream")},cd:function(){var n=this.c;return n==null&&(n=this.c=(this.b&2)!=0?j.fC():new E.C(j.x,X.D)),n},B:function(n,i){if(this.b>=4)throw p.c(this.bl());this.aS(i)},a2:function(){var n=this,i=n.b;if((i&4)!=0)return n.cd();if(i>=4)throw p.c(n.bl());return n.aU(),n.cd()},aU:function(){var n=this.b|=4;(n&1)!=0?this.as():(n&3)==0&&this.aV().B(0,w.G)},aS:function(n){var i=this.b;(i&1)!=0?this.ak(n):(i&3)==0&&this.aV().B(0,new E.cn(n))},aQ:function(n,i){var a=this.b;(a&1)!=0?this.at(n,i):(a&3)==0&&this.aV().B(0,new E.dB(n,i))},dN:function(n,i,a,f){var g,v,S,R,k,D,V=this;if((V.b&3)!=0)throw p.c(E.cF("Stream has already been listened to."));return g=j.x,v=f?1:0,S=E.oj(g,i),R=new E.dA(V,n,S,a,g,v),k=V.gdE(),g=V.b|=1,(g&8)!=0?(D=V.a,D.sbZ(R),D.an()):V.a=R,R.cq(k),R.bv(new E.lF(V)),R},dG:function(n){var i,a,f,g,v,S,R=this,k=null;if((R.b&8)!=0&&(k=R.a.I()),R.a=null,R.b=R.b&4294967286|2,i=R.r,i!=null)if(k==null)try{a=i.$0(),X.bq.b(a)&&(k=a)}catch(D){f=p.E(D),g=p.aK(D),v=new E.C(j.x,X.D),v.aT(f,g),k=v}else k=k.be(i);return S=new E.lE(R),k!=null?k=k.be(S):S.$0(),k}},E.lF.prototype={$0:function(){E.mV(this.a.d)},$S:2},E.lE.prototype={$0:function(){var n=this.a.c;n!=null&&n.a===0&&n.bk(null)},$S:1},E.fs.prototype={ak:function(n){this.gau().aS(n)},at:function(n,i){this.gau().aQ(n,i)},as:function(){this.gau().dd()}},E.fe.prototype={ak:function(n){this.gau().ar(new E.cn(n))},at:function(n,i){this.gau().ar(new E.dB(n,i))},as:function(){this.gau().ar(w.G)}},E.bD.prototype={},E.cT.prototype={},E.an.prototype={br:function(n,i,a,f){return this.a.dN(n,i,a,f)},gG:function(n){return(p.cj(this.a)^892482866)>>>0},N:function(n,i){return i==null?!1:this===i?!0:i instanceof E.an&&i.a===this.a}},E.dA.prototype={cl:function(){return this.x.dG(this)},b_:function(){var n=this.x;(n.b&8)!=0&&n.a.aK(),E.mV(n.e)},b0:function(){var n=this.x;(n.b&8)!=0&&n.a.an(),E.mV(n.f)}},E.cK.prototype={cq:function(n){var i=this;n!=null&&(i.r=n,n.gu(n)||(i.e=(i.e|64)>>>0,n.aO(i)))},cQ:function(n){var i,a,f=this,g=f.e;(g&8)==0&&(i=(g+128|4)>>>0,f.e=i,g<128&&(a=f.r,a!=null&&a.a===1&&(a.a=3)),(g&4)==0&&(i&32)==0&&f.bv(f.gcm()))},aK:function(){return this.cQ(null)},an:function(){var n=this,i=n.e;(i&8)==0&&i>=128&&(i=n.e=i-128,i<128&&((i&64)!=0?(i=n.r,i=!i.gu(i)):i=!1,i?n.r.aO(n):(i=(n.e&4294967291)>>>0,n.e=i,(i&32)==0&&n.bv(n.gcn()))))},I:function(){var n=this,i=(n.e&4294967279)>>>0;return n.e=i,(i&8)==0&&n.bm(),i=n.f,i==null?j.fC():i},bm:function(){var n,i=this,a=i.e=(i.e|8)>>>0;(a&64)!=0&&(n=i.r,n.a===1&&(n.a=3)),(a&32)==0&&(i.r=null),i.f=i.cl()},aS:function(n){var i=this.e;(i&8)==0&&(i<32?this.ak(n):this.ar(new E.cn(n)))},aQ:function(n,i){var a=this.e;(a&8)==0&&(a<32?this.at(n,i):this.ar(new E.dB(n,i)))},dd:function(){var n=this,i=n.e;(i&8)==0&&(i=(i|2)>>>0,n.e=i,i<32?n.as():n.ar(w.G))},b_:function(){},b0:function(){},cl:function(){return null},ar:function(n){var i,a=this,f=a.r;f==null&&(f=new E.dU),a.r=f,f.B(0,n),i=a.e,(i&64)==0&&(i=(i|64)>>>0,a.e=i,i<128&&f.aO(a))},ak:function(n){var i=this,a=i.e;i.e=(a|32)>>>0,i.d.cU(i.a,n),i.e=(i.e&4294967263)>>>0,i.bn((a&4)!=0)},at:function(n,i){var a,f=this,g=f.e,v=new E.lg(f,n,i);(g&1)!=0?(f.e=(g|16)>>>0,f.bm(),a=f.f,a!=null&&a!==j.fC()?a.be(v):v.$0()):(v.$0(),f.bn((g&4)!=0))},as:function(){var n,i=this,a=new E.lf(i);i.bm(),i.e=(i.e|16)>>>0,n=i.f,n!=null&&n!==j.fC()?n.be(a):a.$0()},bv:function(n){var i=this,a=i.e;i.e=(a|32)>>>0,n.$0(),i.e=(i.e&4294967263)>>>0,i.bn((a&4)!=0)},bn:function(n){var i,a,f=this;for((f.e&64)!=0?(i=f.r,i=i.gu(i)):i=!1,i&&(i=f.e=(f.e&4294967231)>>>0,(i&4)!=0&&i<128?(i=f.r,i=i==null?null:i.gu(i),i=i!==!1):i=!1,i&&(f.e=(f.e&4294967291)>>>0));;n=a){if(i=f.e,(i&8)!=0){f.r=null;return}if(a=(i&4)!=0,n===a)break;f.e=(i^32)>>>0,a?f.b_():f.b0(),f.e=(f.e&4294967263)>>>0}i=f.e,(i&64)!=0&&i<128&&f.r.aO(f)}},E.lg.prototype={$0:function(){var n,i,a=this.a,f=a.e;(f&8)!=0&&(f&16)==0||(a.e=(f|32)>>>0,n=a.b,f=this.b,i=a.d,X.k.b(n)?i.em(n,f,this.c):i.cU(n,f),a.e=(a.e&4294967263)>>>0)},$S:1},E.lf.prototype={$0:function(){var n=this.a,i=n.e;(i&16)!=0&&(n.e=(i|42)>>>0,n.d.cT(n.c),n.e=(n.e&4294967263)>>>0)},$S:1},E.dT.prototype={bN:function(n,i,a,f){return this.br(n,f,a,i===!0)},bM:function(n,i,a){return this.bN(n,null,i,a)},e8:function(n,i){return this.bN(n,null,i,null)},br:function(n,i,a,f){return E.oi(n,i,a,f)}},E.dE.prototype={br:function(n,i,a,f){var g;if(this.b)throw p.c(E.cF("Stream has already been listened to."));return this.b=!0,g=E.oi(n,i,a,f),g.cq(this.a.$0()),g}},E.dL.prototype={gu:function(n){return this.b==null},cG:function(n){var i,a,f,g=this.b;if(g==null)throw p.c(E.cF("No events pending."));i=!1;try{g.n()?(i=!0,n.ak(g.gq())):(this.b=null,n.as())}catch(v){a=p.E(v),f=p.aK(v),i||(this.b=w.Y),n.at(a,f)}}},E.fh.prototype={gay:function(){return this.a},say:function(n){return this.a=n}},E.cn.prototype={bQ:function(n){n.ak(this.b)}},E.dB.prototype={bQ:function(n){n.at(this.b,this.c)}},E.lh.prototype={bQ:function(n){n.as()},gay:function(){return null},say:function(n){throw p.c(E.cF("No events after a done."))}},E.fn.prototype={aO:function(n){var i=this,a=i.a;if(a!==1){if(a>=1){i.a=1;return}E.p9(new E.lz(i,n)),i.a=1}}},E.lz.prototype={$0:function(){var n=this.a,i=n.a;n.a=0,i!==3&&n.cG(this.b)},$S:2},E.dU.prototype={gu:function(n){return this.c==null},B:function(n,i){var a=this,f=a.c;f==null?a.b=a.c=i:(f.say(i),a.c=i)},cG:function(n){var i=this.b,a=i.gay();this.b=a,a==null&&(this.c=null),i.bQ(n)}},E.fq.prototype={},E.ek.prototype={l:function(n){return p.b(this.a)},$iF:1,gaP:function(){return this.b}},E.lJ.prototype={},E.lY.prototype={$0:function(){var n=p.c(this.a);throw n.stack=J.ag(this.b),n},$S:2},E.lB.prototype={cT:function(n){var i,a,f=null;try{if(w.f===j.x){n.$0();return}E.oL(f,f,this,n)}catch(g){i=p.E(g),a=p.aK(g),E.cY(f,f,this,i,a)}},eo:function(n,i){var a,f,g=null;try{if(w.f===j.x){n.$1(i);return}E.oN(g,g,this,n,i)}catch(v){a=p.E(v),f=p.aK(v),E.cY(g,g,this,a,f)}},cU:function(n,i){return this.eo(n,i,X.z)},el:function(n,i,a){var f,g,v=null;try{if(w.f===j.x){n.$2(i,a);return}E.oM(v,v,this,n,i,a)}catch(S){f=p.E(S),g=p.aK(S),E.cY(v,v,this,f,g)}},em:function(n,i,a){return this.el(n,i,a,X.z,X.z)},dQ:function(n,i){return new E.lD(this,n,i)},cw:function(n){return new E.lC(this,n)},ei:function(n){return j.x===w.f?n.$0():E.oL(null,null,this,n)},cS:function(n){return this.ei(n,X.z)},en:function(n,i){return j.x===w.f?n.$1(i):E.oN(null,null,this,n,i)},bW:function(n,i){return this.en(n,i,X.z,X.z)},ek:function(n,i,a){return j.x===w.f?n.$2(i,a):E.oM(null,null,this,n,i,a)},ej:function(n,i,a){return this.ek(n,i,a,X.z,X.z,X.z)},ef:function(n){return n},bV:function(n){return this.ef(n,X.z,X.z,X.z)}},E.lD.prototype={$0:function(){return this.a.cS(this.b)},$S:function(){return this.c.h("0()")}},E.lC.prototype={$0:function(){return this.a.cT(this.b)},$S:1},E.dG.prototype={gi:function(n){return this.a},gu:function(n){return this.a===0},gL:function(){return new E.dH(this,this.$ti.h("dH<1>"))},w:function(n){var i,a;return typeof n=="string"&&n!=="__proto__"?(i=this.b,i==null?!1:i[n]!=null):typeof n=="number"&&(n&1073741823)===n?(a=this.c,a==null?!1:a[n]!=null):this.dh(n)},dh:function(n){var i=this.d;return i==null?!1:this.aj(this.cf(i,n),n)>=0},j:function(n,i){var a,f,g;return typeof i=="string"&&i!=="__proto__"?(a=this.b,f=a==null?null:E.om(a,i),f):typeof i=="number"&&(i&1073741823)===i?(g=this.c,f=g==null?null:E.om(g,i),f):this.dl(i)},dl:function(n){var i,a,f=this.d;return f==null?null:(i=this.cf(f,n),a=this.aj(i,n),a<0?null:i[a+1])},m:function(n,i,a){var f,g,v,S,R,k=this;typeof i=="string"&&i!=="__proto__"?(f=k.b,k.d8(f==null?k.b=E.on():f,i,a)):(g=k.d,g==null&&(g=k.d=E.on()),v=p.p4(i)&1073741823,S=g[v],S==null?(E.mK(g,v,[i,a]),++k.a,k.e=null):(R=k.aj(S,i),R>=0?S[R+1]=a:(S.push(i,a),++k.a,k.e=null)))},J:function(n,i){var a,f,g,v=this,S=v.cb();for(a=S.length,f=0;f<a;++f)if(g=S[f],i.$2(g,v.j(0,g)),S!==v.e)throw p.c(E.ad(v))},cb:function(){var n,i,a,f,g,v,S,R,k,D,V=this,G=V.e;if(G!=null)return G;if(G=E.bt(V.a,null,!1,X.z),n=V.b,n!=null)for(i=Object.getOwnPropertyNames(n),a=i.length,f=0,g=0;g<a;++g)G[f]=i[g],++f;else f=0;if(v=V.c,v!=null)for(i=Object.getOwnPropertyNames(v),a=i.length,g=0;g<a;++g)G[f]=+i[g],++f;if(S=V.d,S!=null)for(i=Object.getOwnPropertyNames(S),a=i.length,g=0;g<a;++g)for(R=S[i[g]],k=R.length,D=0;D<k;D+=2)G[f]=R[D],++f;return V.e=G},d8:function(n,i,a){n[i]==null&&(++this.a,this.e=null),E.mK(n,i,a)},cf:function(n,i){return n[p.p4(i)&1073741823]}},E.dJ.prototype={aj:function(n,i){var a,f,g;if(n==null)return-1;for(a=n.length,f=0;f<a;f+=2)if(g=n[f],g==null?i==null:g===i)return f;return-1}},E.dH.prototype={gi:function(n){return this.a.a},gu:function(n){return this.a.a===0},gC:function(n){var i=this.a;return new E.dI(i,i.cb(),this.$ti.h("dI<1>"))},F:function(n,i){return this.a.w(i)}},E.dI.prototype={gq:function(){return this.d},n:function(){var n=this,i=n.b,a=n.c,f=n.a;if(i!==f.e)throw p.c(E.ad(f));return a>=i.length?(n.d=null,!1):(n.d=i[a],n.c=a+1,!0)},$iH:1},E.aZ.prototype={gC:function(n){var i=this,a=new E.dM(i,i.r,p.r(i).h("dM<1>"));return a.c=i.e,a},gi:function(n){return this.a},gu:function(n){return this.a===0},ga3:function(n){return this.a!==0},F:function(n,i){var a,f;return typeof i=="string"&&i!=="__proto__"?(a=this.b,a==null?!1:a[i]!=null):typeof i=="number"&&(i&1073741823)===i?(f=this.c,f==null?!1:f[i]!=null):this.dg(i)},dg:function(n){var i=this.d;return i==null?!1:this.aj(i[this.bp(n)],n)>=0},B:function(n,i){var a,f,g=this;return typeof i=="string"&&i!=="__proto__"?(a=g.b,g.c4(a==null?g.b=E.mL():a,i)):typeof i=="number"&&(i&1073741823)===i?(f=g.c,g.c4(f==null?g.c=E.mL():f,i)):g.d7(i)},d7:function(n){var i,a,f=this,g=f.d;if(g==null&&(g=f.d=E.mL()),i=f.bp(n),a=g[i],a==null)g[i]=[f.bo(n)];else{if(f.aj(a,n)>=0)return!1;a.push(f.bo(n))}return!0},eg:function(n,i){var a=this;return typeof i=="string"&&i!=="__proto__"?a.cp(a.b,i):typeof i=="number"&&(i&1073741823)===i?a.cp(a.c,i):a.dH(i)},dH:function(n){var i,a,f,g,v=this,S=v.d;return S==null||(i=v.bp(n),a=S[i],f=v.aj(a,n),f<0)?!1:(g=a.splice(f,1)[0],a.length===0&&delete S[i],v.cv(g),!0)},dk:function(n,i){for(var a,f,g,v,S=this,R=S.e;R!=null;R=f){if(a=R.a,f=R.b,g=S.r,v=n.$1(a),g!==S.r)throw p.c(E.ad(S));v===!1&&S.eg(0,a)}},cz:function(n){var i=this;i.a>0&&(i.b=i.c=i.d=i.e=i.f=null,i.a=0,i.bw())},c4:function(n,i){return n[i]!=null?!1:(n[i]=this.bo(i),!0)},cp:function(n,i){var a;return n==null||(a=n[i],a==null)?!1:(this.cv(a),delete n[i],!0)},bw:function(){this.r=1073741823&this.r+1},bo:function(n){var i,a=this,f=new E.lx(n);return a.e==null?a.e=a.f=f:(i=a.f,i.toString,f.c=i,a.f=i.b=f),++a.a,a.bw(),f},cv:function(n){var i=this,a=n.c,f=n.b;a==null?i.e=f:a.b=f,f==null?i.f=a:f.c=a,--i.a,i.bw()},bp:function(n){return J.aL(n)&1073741823},aj:function(n,i){var a,f;if(n==null)return-1;for(a=n.length,f=0;f<a;++f)if(J.aA(n[f].a,i))return f;return-1}},E.lx.prototype={},E.dM.prototype={gq:function(){return this.d},n:function(){var n=this,i=n.c,a=n.a;if(n.b!==a.r)throw p.c(E.ad(a));return i==null?(n.d=null,!1):(n.d=i.a,n.c=i.b,!0)},$iH:1},E.aX.prototype={ae:function(n,i){return new E.aX(J.my(this.a,i),i.h("aX<0>"))},gi:function(n){return J.X(this.a)},j:function(n,i){return J.eh(this.a,i)}},E.dc.prototype={},E.dg.prototype={$in:1,$ii:1,$il:1},E.m.prototype={gC:function(n){return new p.a6(n,this.gi(n),p.ac(n).h("a6<m.E>"))},S:function(n,i){return this.j(n,i)},gu:function(n){return this.gi(n)===0},ga3:function(n){return!this.gu(n)},gcF:function(n){if(this.gi(n)===0)throw p.c(p.mB());return this.j(n,0)},F:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(J.aA(this.j(n,a),i))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},b4:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(!i.$1(this.j(n,a)))return!1;if(f!==this.gi(n))throw p.c(E.ad(n))}return!0},bC:function(n,i){var a,f=this.gi(n);for(a=0;a<f;++a){if(i.$1(this.j(n,a)))return!0;if(f!==this.gi(n))throw p.c(E.ad(n))}return!1},ag:function(n,i,a){return new p.a8(n,i,p.ac(n).h("@<m.E>").D(a).h("a8<1,2>"))},e0:function(n,i,a){var f,g,v=this.gi(n);for(f=i,g=0;g<v;++g)if(f=a.$2(f,this.j(n,g)),v!==this.gi(n))throw p.c(E.ad(n));return f},e1:function(n,i,a){return this.e0(n,i,a,X.z)},a1:function(n,i){return p.du(n,i,null,p.ac(n).h("m.E"))},aL:function(n,i){var a,f,g,v,S=this;if(S.gu(n))return a=J.ie(0,p.ac(n).h("m.E")),a;for(f=S.j(n,0),g=E.bt(S.gi(n),f,!1,p.ac(n).h("m.E")),v=1;v<S.gi(n);++v)g[v]=S.j(n,v);return g},bX:function(n){var i,a=E.nN(p.ac(n).h("m.E"));for(i=0;i<this.gi(n);++i)a.B(0,this.j(n,i));return a},B:function(n,i){var a=this.gi(n);this.si(n,a+1),this.m(n,a,i)},ae:function(n,i){return new p.b3(n,p.ac(n).h("@<m.E>").D(i).h("b3<1,2>"))},Z:function(n,i,a){var f=this.gi(n);return E.aV(i,a,f),E.dh(this.aM(n,i,a),!0,p.ac(n).h("m.E"))},aM:function(n,i,a){return E.aV(i,a,this.gi(n)),p.du(n,i,a,p.ac(n).h("m.E"))},dZ:function(n,i,a,f){var g;for(E.aV(i,a,this.gi(n)),g=i;g<a;++g)this.m(n,g,f)},a0:function(n,i,a,f,g){var v,S,R,k,D;if(E.aV(i,a,this.gi(n)),v=a-i,v!==0){if(E.aU(g,"skipCount"),p.ac(n).h("l<m.E>").b(f)?(S=g,R=f):(R=J.nw(f,g).aL(0,!1),S=0),k=J.M(R),S+v>k.gi(R))throw p.c(p.tg());if(S<i)for(D=v-1;D>=0;--D)this.m(n,i+D,k.j(R,S+D));else for(D=0;D<v;++D)this.m(n,i+D,k.j(R,S+D))}},bK:function(n,i){var a;for(a=0;a<this.gi(n);++a)if(J.aA(this.j(n,a),i))return a;return-1},l:function(n){return E.id(n,"[","]")}},E.di.prototype={},E.j8.prototype={$2:function(n,i){var a,f=this.a;f.a||(this.b.a+=", "),f.a=!1,f=this.b,a=f.a+=p.b(n),f.a=a+": ",f.a+=p.b(i)},$S:54},E.I.prototype={af:function(n,i,a){var f=p.r(this);return E.nP(this,f.h("I.K"),f.h("I.V"),i,a)},J:function(n,i){var a,f;for(a=this.gL(),a=a.gC(a);a.n();)f=a.gq(),i.$2(f,this.j(0,f))},gdY:function(){return this.gL().ag(0,new E.j9(this),p.r(this).h("cC<I.K,I.V>"))},w:function(n){return this.gL().F(0,n)},gi:function(n){var i=this.gL();return i.gi(i)},gu:function(n){var i=this.gL();return i.gu(i)},l:function(n){return E.mG(this)},$ih:1},E.j9.prototype={$1:function(n){var i=this.a,a=p.r(i);return new E.cC(n,i.j(0,n),a.h("@<I.K>").D(a.h("I.V")).h("cC<1,2>"))},$S:function(){return p.r(this.a).h("cC<I.K,I.V>(I.K)")}},E.fw.prototype={m:function(n,i,a){throw p.c(E.ab("Cannot modify unmodifiable map"))}},E.dj.prototype={af:function(n,i,a){return this.a.af(0,i,a)},j:function(n,i){return this.a.j(0,i)},m:function(n,i,a){this.a.m(0,i,a)},w:function(n){return this.a.w(n)},J:function(n,i){this.a.J(0,i)},gu:function(n){var i=this.a;return i.gu(i)},gi:function(n){var i=this.a;return i.gi(i)},gL:function(){return this.a.gL()},l:function(n){return this.a.l(0)},$ih:1},E.be.prototype={af:function(n,i,a){return new E.be(this.a.af(0,i,a),i.h("@<0>").D(a).h("be<1,2>"))}},E.cQ.prototype={gu:function(n){return this.gi(this)===0},ga3:function(n){return this.gi(this)!==0},K:function(n,i){var a;for(a=J.a_(i);a.n();)this.B(0,a.gq())},ag:function(n,i,a){return new p.c_(this,i,p.r(this).h("@<1>").D(a).h("c_<1,2>"))},l:function(n){return E.id(this,"{","}")},b4:function(n,i){var a;for(a=this.gC(this);a.n();)if(!i.$1(a.gq()))return!1;return!0},a1:function(n,i){return p.o5(this,i,p.r(this).c)},b5:function(n,i,a){var f,g;for(f=this.gC(this);f.n();)if(g=f.gq(),i.$1(g))return g;return a.$0()},S:function(n,i){var a,f,g,v="index";for(E.aM(i,v),E.aU(i,v),a=this.gC(this),f=0;a.n();){if(g=a.gq(),i===f)return g;++f}throw p.c(E.ex(i,this,v,null,f))},$in:1,$ii:1},E.e1.prototype={F:function(n,i){return this.a.w(i)},gC:function(n){var i=this.a.gL();return i.gC(i)},gi:function(n){var i=this.a;return i.gi(i)},B:function(n,i){throw p.c(E.ab("Cannot change unmodifiable set"))}},E.dN.prototype={},E.e0.prototype={},E.fl.prototype={j:function(n,i){var a,f=this.b;return f==null?this.c.j(0,i):typeof i!="string"?null:(a=f[i],typeof a=="undefined"?this.dF(i):a)},gi:function(n){return this.b==null?this.c.a:this.aC().length},gu:function(n){return this.gi(this)===0},gL:function(){if(this.b==null){var n=this.c;return new p.au(n,p.r(n).h("au<1>"))}return new E.fm(this)},m:function(n,i,a){var f,g,v=this;v.b==null?v.c.m(0,i,a):v.w(i)?(f=v.b,f[i]=a,g=v.a,(g==null?f!=null:g!==f)&&(g[i]=null)):v.dO().m(0,i,a)},w:function(n){return this.b==null?this.c.w(n):typeof n!="string"?!1:Object.prototype.hasOwnProperty.call(this.a,n)},J:function(n,i){var a,f,g,v,S=this;if(S.b==null)return S.c.J(0,i);for(a=S.aC(),f=0;f<a.length;++f)if(g=a[f],v=S.b[g],typeof v=="undefined"&&(v=E.lN(S.a[g]),S.b[g]=v),i.$2(g,v),a!==S.c)throw p.c(E.ad(S))},aC:function(){var n=this.c;return n==null&&(n=this.c=p.a(Object.keys(this.a),X.s)),n},dO:function(){var n,i,a,f,g,v=this;if(v.b==null)return v.c;for(n=E.a5(X.S,X.z),i=v.aC(),a=0;f=i.length,a<f;++a)g=i[a],n.m(0,g,v.j(0,g));return f===0?i.push(""):w.d.si(i,0),v.a=v.b=null,v.c=n},dF:function(n){var i;return Object.prototype.hasOwnProperty.call(this.a,n)?(i=E.lN(this.a[n]),this.b[n]=i):null}},E.fm.prototype={gi:function(n){var i=this.a;return i.gi(i)},S:function(n,i){var a=this.a;return a.b==null?a.gL().S(0,i):a.aC()[i]},gC:function(n){var i=this.a;return i.b==null?(i=i.gL(),i=i.gC(i)):(i=i.aC(),i=new J.aC(i,i.length,p.U(i).h("aC<1>"))),i},F:function(n,i){return this.a.w(i)}},E.lw.prototype={a2:function(){var n,i,a,f=this;f.d4(),n=f.a,i=n.a,n.a="",n=f.c,a=n.b,a.push(E.oK((i.charCodeAt(0)==0,i),f.b)),n.a.$1(a)}},E.kT.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!0}),n}catch(i){p.E(i)}return null},$S:4},E.kU.prototype={$0:function(){var n;try{return n=new TextDecoder("utf-8",{fatal:!1}),n}catch(i){p.E(i)}return null},$S:4},E.fL.prototype={ec:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe="Invalid base64 encoding length ";for(a=E.aV(i,a,n.length),f=j.nq(),g=i,v=g,S=null,R=-1,k=-1,D=0;g<a;g=V){if(V=g+1,G=w.a.H(n,g),G===37?(K=V+2,K<=a?(Q=p.p5(n,V),Q===37&&(Q=-1),V=K):Q=-1):Q=G,0<=Q&&Q<=127){if(ne=f[Q],ne>=0){if(Q=w.a.A("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne),Q===G)continue;G=Q}else{if(ne===-1&&(R<0&&(ie=S==null?null:S.a.length,ie==null&&(ie=0),R=ie+(g-v),k=g),++D,G===61))continue;G=Q}if(ne!==-2){S==null&&(S=new E.a9("")),ie=S,ie.a+=w.a.t(n,v,g),ie.a+=p.ba(G),v=V;continue}}throw p.c(E.K("Invalid base64 data",n,g))}if(S!=null){if(ie=S.a+=w.a.t(n,v,a),fe=ie.length,R>=0)E.nA(n,k,a,R,D,fe);else{if(me=w.c.bg(fe-1,4)+1,me===1)throw p.c(E.K(Xe,n,a));for(;me<4;)ie+="=",S.a=ie,++me}return ie=S.a,w.a.az(n,i,a,(ie.charCodeAt(0)==0,ie))}if(Ie=a-i,R>=0)E.nA(n,k,a,R,D,Ie);else{if(me=w.c.bg(Ie,4),me===1)throw p.c(E.K(Xe,n,a));me>1&&(n=w.a.az(n,a,a,me===2?"==":"="))}return n}},E.fN.prototype={},E.fM.prototype={dU:function(n,i){var a,f,g,v=E.aV(i,null,n.length);return i===v?new Uint8Array(0):(a=new E.le,f=a.dW(n,i,v),f.toString,g=a.a,g<-1&&p.a2(E.K("Missing padding character",n,v)),g>0&&p.a2(E.K("Invalid length, must be multiple of four",n,v)),a.a=-1,f)}},E.le.prototype={dW:function(n,i,a){var f,g=this,v=g.a;return v<0?(g.a=E.oh(n,i,a,v),null):i===a?new Uint8Array(0):(f=E.u1(n,i,a,v),g.a=E.u3(n,i,a,f,0,g.a),f)}},E.fO.prototype={},E.em.prototype={},E.fo.prototype={},E.eo.prototype={},E.eq.prototype={},E.hw.prototype={},E.io.prototype={dV:function(n){var i=E.oK(n,this.gcD().a);return i},gcD:function(){return w.bG}},E.ip.prototype={},E.kH.prototype={},E.kI.prototype={},E.dV.prototype={a2:function(){}},E.lI.prototype={a2:function(){this.a.e_(this.c),this.b.a2()},dP:function(n,i,a,f){this.c.a+=this.a.cC(n,i,a,!1)}},E.kR.prototype={},E.kS.prototype={dT:function(n){var i=this.a,a=E.tW(i,n,0,null);return a!=null?a:new E.fx(i).cC(n,0,null,!0)}},E.fx.prototype={cC:function(n,i,a,f){var g,v,S,R,k,D=this,V=E.aV(i,a,J.X(n));if(i===V)return"";if(X.E.b(n)?(g=n,v=0):(g=E.uz(n,i,V),V-=i,v=i,i=0),S=D.bq(g,i,V,f),R=D.b,(R&1)!=0)throw k=E.oC(R),D.b=0,p.c(E.K(k,n,v+D.c));return S},bq:function(n,i,a,f){var g,v,S=this;return a-i>1e3?(g=w.c.bA(i+a,2),v=S.bq(n,i,g,!1),(S.b&1)!=0?v:v+S.bq(n,g,a,f)):S.dX(n,i,a,f)},e_:function(n){var i=this.b;if(this.b=0,!(i<=32))if(this.a)n.a+=p.ba(65533);else throw p.c(E.K(E.oC(77),null,null))},dX:function(n,i,a,f){var g,v,S,R,k,D,V,G=this,K=65533,Q=G.b,ne=G.c,ie=new E.a9(""),fe=i+1,me=n[i];e:for(g=G.a;;){for(;;fe=R){if(v=w.a.H("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFFFFFFFFFFFFFGGGGGGGGGGGGGGGGHHHHHHHHHHHHHHHHHHHHHHHHHHHIHHHJEEBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBKCCCCCCCCCCCCDCLONNNMEEEEEEEEEEE",me)&31,ne=Q<=32?me&61694>>>v:(me&63|ne<<6)>>>0,Q=w.a.H(" \x000:XECCCCCN:lDb \x000:XECCCCCNvlDb \x000:XECCCCCN:lDb AAAAA\0\0\0\0\0AAAAA00000AAAAA:::::AAAAAGG000AAAAA00KKKAAAAAG::::AAAAA:IIIIAAAAA000\x800AAAAA\0\0\0\0 AAAAA",Q+v),Q===0){if(ie.a+=p.ba(ne),fe===a)break e;break}else if((Q&1)!=0){if(g)switch(Q){case 69:case 67:ie.a+=p.ba(K);break;case 65:ie.a+=p.ba(K),--fe;break;default:S=ie.a+=p.ba(K),ie.a=S+p.ba(K);break}else return G.b=Q,G.c=fe-1,"";Q=0}if(fe===a)break e;R=fe+1,me=n[fe]}if(R=fe+1,me=n[fe],me<128){for(;;){if(!(R<a)){k=a;break}if(D=R+1,me=n[R],me>=128){k=D-1,R=D;break}R=D}if(k-fe<20)for(V=fe;V<k;++V)ie.a+=p.ba(n[V]);else ie.a+=E.o7(n,fe,k);if(k===a)break e;fe=R}else fe=R}if(f&&Q>32)if(g)ie.a+=p.ba(K);else return G.b=77,G.c=a,"";return G.b=Q,G.c=ne,g=ie.a,g.charCodeAt(0)==0,g}},E.jn.prototype={$2:function(n,i){var a,f=this.b,g=this.a;f.a+=g.a,a=f.a+=p.b(n.a),f.a=a+": ",f.a+=E.cx(i),g.a=", "},$S:61},E.d5.prototype={N:function(n,i){return i==null?!1:i instanceof E.d5&&this.a===i.a&&this.b===i.b},gG:function(n){var i=this.a;return(i^w.c.ad(i,30))&1073741823},es:function(){var n,i;return this.b?this:(n=this.a,Math.abs(n)<=864e13?i=!1:i=!0,i&&p.a2(E.O("DateTime is outside valid range: "+n)),E.aM(!0,"isUtc"),new E.d5(n,!0))},l:function(n){var i=this,a=E.nG(p.eV(i)),f=E.b5(p.o_(i)),g=E.b5(p.nW(i)),v=E.b5(p.nX(i)),S=E.b5(p.nZ(i)),R=E.b5(p.o0(i)),k=E.nH(p.nY(i));return i.b?a+"-"+f+"-"+g+" "+v+":"+S+":"+R+"."+k+"Z":a+"-"+f+"-"+g+" "+v+":"+S+":"+R+"."+k},er:function(){var n=this,i=p.eV(n)>=-9999&&p.eV(n)<=9999?E.nG(p.eV(n)):E.t5(p.eV(n)),a=E.b5(p.o_(n)),f=E.b5(p.nW(n)),g=E.b5(p.nX(n)),v=E.b5(p.nZ(n)),S=E.b5(p.o0(n)),R=E.nH(p.nY(n));return n.b?i+"-"+a+"-"+f+"T"+g+":"+v+":"+S+"."+R+"Z":i+"-"+a+"-"+f+"T"+g+":"+v+":"+S+"."+R}},E.F.prototype={gaP:function(){return p.aK(this.$thrownJsError)}},E.ej.prototype={l:function(n){var i=this.a;return i!=null?"Assertion failed: "+E.cx(i):"Assertion failed"}},E.f2.prototype={},E.eR.prototype={l:function(n){return"Throw of null."}},E.ak.prototype={gbt:function(){return"Invalid argument"+(this.a?"":"(s)")},gbs:function(){return""},l:function(n){var i,a,f=this,g=f.c,v=g==null?"":" ("+g+")",S=f.d,R=S==null?"":": "+p.b(S),k=f.gbt()+v+R;return f.a?(i=f.gbs(),a=E.cx(f.b),k+i+": "+a):k}},E.dq.prototype={gbt:function(){return"RangeError"},gbs:function(){var n,i=this.e,a=this.f;return i==null?n=a!=null?": Not less than or equal to "+p.b(a):"":a==null?n=": Not greater than or equal to "+p.b(i):a>i?n=": Not in inclusive range "+p.b(i)+".."+p.b(a):n=a<i?": Valid value range is empty":": Only valid value is "+p.b(i),n}},E.ew.prototype={gbt:function(){return"RangeError"},gbs:function(){if(this.b<0)return": index must not be negative";var n=this.f;return n===0?": no indices are valid":": index should be less than "+n},gi:function(n){return this.f}},E.eO.prototype={l:function(n){var i,a,f,g,v,S,R,k,D=this,V={},G=new E.a9("");for(V.a="",i=D.c,a=i.length,f=0,g="",v="";f<a;++f,v=", ")S=i[f],G.a=g+v,g=G.a+=E.cx(S),V.a=", ";return D.d.J(0,new E.jn(V,G)),R=E.cx(D.a),k=G.l(0),a="NoSuchMethodError: method not found: '"+p.b(D.b.a)+`'
Receiver: `+R+`
Arguments: [`+k+"]",a}},E.f8.prototype={l:function(n){return"Unsupported operation: "+this.a}},E.f3.prototype={l:function(n){var i=this.a;return i!=null?"UnimplementedError: "+i:"UnimplementedError"}},E.bz.prototype={l:function(n){return"Bad state: "+this.a}},E.ep.prototype={l:function(n){var i=this.a;return i==null?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+E.cx(i)+"."}},E.eT.prototype={l:function(n){return"Out of Memory"},gaP:function(){return null},$iF:1},E.ds.prototype={l:function(n){return"Stack Overflow"},gaP:function(){return null},$iF:1},E.er.prototype={l:function(n){var i=this.a;return i==null?"Reading static variable during its initialization":"Reading static variable '"+i+"' during its initialization"}},E.dD.prototype={l:function(n){return"Exception: "+this.a},$ia3:1},E.aD.prototype={l:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q=this.a,ne=Q!=null&&Q!==""?"FormatException: "+p.b(Q):"FormatException",ie=this.c,fe=this.b;if(typeof fe=="string"){if(ie!=null?i=ie<0||ie>fe.length:i=!1,i&&(ie=null),ie==null)return fe.length>78&&(fe=w.a.t(fe,0,75)+"..."),ne+`
`+fe;for(a=1,f=0,g=!1,v=0;v<ie;++v)S=w.a.H(fe,v),S===10?((f!==v||!g)&&++a,f=v+1,g=!1):S===13&&(++a,f=v+1,g=!0);for(ne=a>1?ne+(" (at line "+a+", character "+(ie-f+1)+`)
`):ne+(" (at character "+(ie+1)+`)
`),R=fe.length,v=ie;v<R;++v)if(S=w.a.A(fe,v),S===10||S===13){R=v;break}return R-f>78?ie-f<75?(k=f+75,D=f,V="",G="..."):(R-ie<75?(D=R-75,k=R,G=""):(D=ie-36,k=ie+36,G="..."),V="..."):(k=R,D=f,V="",G=""),K=w.a.t(fe,D,k),ne+V+K+G+`
`+w.a.bh(" ",ie-D+V.length)+`^
`}else return ie!=null?ne+(" (at offset "+p.b(ie)+")"):ne},$ia3:1},E.i.prototype={ae:function(n,i){return p.fP(this,p.r(this).h("i.E"),i)},ag:function(n,i,a){return p.ja(this,i,p.r(this).h("i.E"),a)},F:function(n,i){var a;for(a=this.gC(this);a.n();)if(J.aA(a.gq(),i))return!0;return!1},aL:function(n,i){return E.dh(this,!1,p.r(this).h("i.E"))},gi:function(n){var i,a=this.gC(this);for(i=0;a.n();)++i;return i},gu:function(n){return!this.gC(this).n()},ga3:function(n){return!this.gu(this)},a1:function(n,i){return p.o5(this,i,p.r(this).h("i.E"))},S:function(n,i){var a,f,g;for(E.aU(i,"index"),a=this.gC(this),f=0;a.n();){if(g=a.gq(),i===f)return g;++f}throw p.c(E.ex(i,this,"index",null,f))},l:function(n){return E.tf(this,"(",")")}},E.dF.prototype={S:function(n,i){var a=this.a;return(0>i||i>=a)&&p.a2(E.ex(i,this,"index",null,a)),this.b.$1(i)},gi:function(n){return this.a}},E.H.prototype={},E.cC.prototype={l:function(n){return"MapEntry("+p.b(J.ag(this.a))+": "+p.b(J.ag(this.b))+")"}},E.k.prototype={gG:function(n){return E.e.prototype.gG.call(w.bD,this)},l:function(n){return"null"}},E.e.prototype={constructor:E.e,$ie:1,N:function(n,i){return this===i},gG:function(n){return p.cj(this)},l:function(n){return"Instance of '"+p.b(p.ju(this))+"'"},bb:function(n,i){throw p.c(E.nS(this,i.gcN(),i.gcR(),i.gcO()))},toString:function(){return this.l(this)}},E.fr.prototype={l:function(n){return""},$iam:1},E.a9.prototype={gi:function(n){return this.a.length},l:function(n){var i=this.a;return i.charCodeAt(0)==0,i}},E.kN.prototype={$2:function(n,i){throw p.c(E.K("Illegal IPv4 address, "+n,this.a,i))},$S:126},E.kO.prototype={$2:function(n,i){throw p.c(E.K("Illegal IPv6 address, "+n,this.a,i))},$1:function(n){return this.$2(n,null)},$S:68},E.kP.prototype={$2:function(n,i){var a;return i-n>4&&this.a.$2("an IPv6 part can only contain a maximum of 4 hex digits",n),a=E.cr(w.a.t(this.b,n,i),16),(a<0||a>65535)&&this.a.$2("each part must be in the range of `0x0..0xFFFF`",n),a},$S:70},E.e2.prototype={gct:function(){var n,i,a,f=this,g=f.x;return g==null&&(g=f.a,n=g.length!==0?g+":":"",i=f.c,a=i==null,!a||g==="file"?(g=n+"//",n=f.b,n.length!==0&&(g=g+n+"@"),a||(g+=i),n=f.d,n!=null&&(g=g+":"+p.b(n))):g=n,g+=f.e,n=f.f,n!=null&&(g=g+"?"+n),n=f.r,n!=null&&(g=g+"#"+n),g=(g.charCodeAt(0)==0,g),f.x==null?f.x=g:g=p.a2(p.nM("Field '_text' has been assigned during initialization."))),g},gG:function(n){var i=this,a=i.z;return a==null&&(a=w.a.gG(i.gct()),i.z==null?i.z=a:a=p.a2(p.nM("Field 'hashCode' has been assigned during initialization."))),a},gcX:function(){return this.b},gbJ:function(){var n=this.c;return n==null?"":w.a.V(n,"[")?w.a.t(n,1,n.length-1):n},gbR:function(){var n=this.d;return n==null?E.ow(this.a):n},gbT:function(){var n=this.f;return n==null?"":n},gbF:function(){var n=this.r;return n==null?"":n},gcI:function(){return this.a.length!==0},gbG:function(){return this.c!=null},gbI:function(){return this.f!=null},gbH:function(){return this.r!=null},gcH:function(){return w.a.V(this.e,"/")},l:function(n){return this.gct()},N:function(n,i){var a=this;return i==null?!1:a===i?!0:X.n.b(i)&&a.a===i.gc1()&&a.c!=null===i.gbG()&&a.b===i.gcX()&&a.gbJ()===i.gbJ()&&a.gbR()===i.gbR()&&a.e===i.gcP()&&a.f!=null===i.gbI()&&a.gbT()===i.gbT()&&a.r!=null===i.gbH()&&a.gbF()===i.gbF()},$iaY:1,gc1:function(){return this.a},gcP:function(){return this.e}},E.kL.prototype={gbd:function(n){var i,a,f,g,v=this,S=null,R=v.c;return R==null&&(R=v.a,i=v.b[0]+1,a=w.a.b7(R,"?",i),f=R.length,a>=0?(g=E.e3(R,a+1,f,w.x,!1),f=a):g=S,R=v.c=new E.fg("data","",S,S,E.e3(R,i,f,w.am,!1),g,S)),R},gax:function(){var n=this.b,i=n[0]+1,a=n[1];return i===a?"text/plain":E.uy(this.a,i,a,w.a3,!1)},cB:function(){var n,i,a,f,g,v,S,R,k=this.a,D=this.b,V=w.d.gaH(D)+1;if((D.length&1)==1)return w.b6.dU(k,V);for(D=k.length,n=D-V,i=V;i<D;++i)w.a.A(k,i)===37&&(i+=2,n-=2);if(a=new Uint8Array(n),n===D)return w.j.a0(a,0,n,new p.cu(k),V),a;for(i=V,f=0;i<D;++i){if(g=w.a.A(k,i),g!==37)v=f+1,a[f]=g;else{if(S=i+2,S<D&&(R=p.p5(k,i+1),R>=0)){v=f+1,a[f]=R,i=S,f=v;continue}throw p.c(E.K("Invalid percent escape",k,i))}f=v}return a},l:function(n){var i=this.a;return this.b[0]===-1?"data:"+i:i}},E.lP.prototype={$1:function(n){return new Uint8Array(96)},$S:71},E.lO.prototype={$2:function(n,i){var a=this.a[n];return J.rt(a,0,96,i),a},$S:82},E.lQ.prototype={$3:function(n,i,a){var f,g;for(f=i.length,g=0;g<f;++g)n[w.a.H(i,g)^96]=a},$S:16},E.lR.prototype={$3:function(n,i,a){var f,g;for(f=w.a.H(i,0),g=w.a.H(i,1);f<=g;++f)n[(f^96)>>>0]=a},$S:16},E.fp.prototype={gcI:function(){return this.b>0},gbG:function(){return this.c>0},gbI:function(){return this.f<this.r},gbH:function(){return this.r<this.a.length},gci:function(){return this.b===4&&w.a.V(this.a,"http")},gcj:function(){return this.b===5&&w.a.V(this.a,"https")},gcH:function(){return w.a.U(this.a,"/",this.e)},gc1:function(){var n=this.x;return n==null?this.x=this.df():n},df:function(){var n=this,i=n.b;return i<=0?"":n.gci()?"http":n.gcj()?"https":i===4&&w.a.V(n.a,"file")?"file":i===7&&w.a.V(n.a,"package")?"package":w.a.t(n.a,0,i)},gcX:function(){var n=this.c,i=this.b+3;return n>i?w.a.t(this.a,i,n-1):""},gbJ:function(){var n=this.c;return n>0?w.a.t(this.a,n,this.d):""},gbR:function(){var n=this;return n.c>0&&n.d+1<n.e?E.cr(w.a.t(n.a,n.d+1,n.e),null):n.gci()?80:n.gcj()?443:0},gcP:function(){return w.a.t(this.a,this.e,this.f)},gbT:function(){var n=this.f,i=this.r;return n<i?w.a.t(this.a,n+1,i):""},gbF:function(){var n=this.r,i=this.a;return n<i.length?w.a.bj(i,n+1):""},gG:function(n){var i=this.y;return i==null?this.y=w.a.gG(this.a):i},N:function(n,i){return i==null?!1:this===i?!0:X.n.b(i)&&this.a===i.l(0)},l:function(n){return this.a},$iaY:1},E.fg.prototype={},E.lM.prototype={$1:function(n){var i,a,f,g=this.a;if(g.w(n))return g.j(0,n);if(X.I.b(n)){for(i={},g.m(0,n,i),g=n.gL(),g=g.gC(g);g.n();)a=g.gq(),i[a]=this.$1(n.j(0,a));return i}else return X.U.b(n)?(f=[],g.m(0,n,f),w.d.K(f,J.bl(n,this,X.z)),f):n},$S:90},ge.a0.prototype={gck:function(){var n,i=this.z;return i===5121||i===5120?(n=this.ch,n=n==="MAT2"||n==="MAT3"):n=!1,n?i=!0:i=(i===5123||i===5122)&&this.ch==="MAT3",i},ga7:function(){var n=w.l.j(0,this.ch);return n==null?0:n},ga8:function(){var n=this,i=n.z;return i===5121||i===5120?(i=n.ch,i==="MAT2"?6:i==="MAT3"?11:n.ga7()):i===5123||i===5122?n.ch==="MAT3"?22:2*n.ga7():4*n.ga7()},gal:function(){var n=this,i=n.fx;return i!==0?i:(i=n.z,i===5121||i===5120?(i=n.ch,i==="MAT2"?8:i==="MAT3"?12:n.ga7()):i===5123||i===5122?n.ch==="MAT3"?24:2*n.ga7():4*n.ga7())},gaF:function(){return this.gal()*(this.Q-1)+this.ga8()},v:function(n,i){var a,f,g,v=this,S="bufferView",R=n.z,k=v.x,D=v.fr=R.j(0,k),V=D==null;if(!V&&D.Q!==-1&&(v.fx=D.Q),!(v.z===-1||v.Q===-1||v.ch==null)&&(k!==-1&&(V?i.k(j.N(),p.a([k],X.M),S):(D.a$=!0,D=D.Q,D!==-1&&D<v.ga8()&&i.E(j.pU(),p.a([v.fr.Q,v.ga8()],X.M)),ge.bm(v.y,v.dy,v.gaF(),v.fr,k,i))),k=v.dx,k!=null)){if(D=k.d,D!==-1?V=!1:V=!0,V)return;V=i.c,V.push("sparse"),a=v.Q,D>a&&i.k(j.qy(),p.a([D,a],X.M),"count"),a=k.f,f=a.d,a.f=R.j(0,f),V.push("indices"),g=k.e,k=g.d,k!==-1&&(R=g.r=R.j(0,k),R==null?i.k(j.N(),p.a([k],X.M),S):(R.P(w.v,S,i),g.r.Q!==-1&&i.p(j.mv(),S),R=g.f,R!==-1&&ge.bm(g.e,ke.b_(R),ke.b_(R)*D,g.r,k,i))),V.pop(),V.push("values"),f!==-1&&(R=a.f,R==null?i.k(j.N(),p.a([f],X.M),S):(R.P(w.v,S,i),a.f.Q!==-1&&i.p(j.mv(),S),R=v.dy,k=w.l.j(0,v.ch),k==null&&(k=0),ge.bm(a.e,R,R*k*D,a.f,f,i))),V.pop(),V.pop()}},P:function(n,i,a){var f;this.a$=!0,f=this.k2,f==null?this.k2=n:f!==n&&a.k(j.pW(),p.a([f,n],X.M),i)},ex:function(n){var i=this.k1;if(i==null)this.k1=n;else if(i!==n)return!1;return!0},ed:function(n){var i,a,f=this;return!f.cx||f.z===5126?(n.toString,n):(i=f.dy*8,a=f.z,a===5120||a===5122||a===5124?Math.max(n/(w.c.aA(1,i-1)-1),-1):n/(w.c.aA(1,i)-1))}},ge.fb.prototype={ac:function(){var n=this;return E.bK(function(){var i=0,a=2,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe;return function(mt,at){for(mt===1&&(f=at,i=a);;)switch(i){case 0:if(Xe=n.z,Xe===-1||n.Q===-1||n.ch==null){i=1;break}if(g=n.ga7(),v=n.Q,S=n.fr,S!=null){if(S=S.cx,(S==null?null:S.Q)==null){i=1;break}if(n.gal()<n.ga8()){i=1;break}if(S=n.y,R=n.dy,!ge.bm(S,R,n.gaF(),n.fr,null,null)){i=1;break}if(k=n.fr,D=ge.ny(Xe,k.cx.Q.buffer,k.y+S,w.c.aq(n.gaF(),R)),D==null){i=1;break}V=D.length,n.gck()?(S=w.c.aq(n.gal(),R),R=n.ch==="MAT2",k=R?8:12,G=R?2:3,K=new ge.l6(V,D,G,G,S-k).$0()):K=new ge.l7(D).$3(V,g,w.c.aq(n.gal(),R)-g)}else K=E.nJ(v*g,new ge.l8,X.e);if(S=n.dx,S!=null){if(R=S.f,k=R.e,k!==-1?(Q=R.f,Q!=null&&Q.z!==-1&&Q.y!==-1?(Q=Q.cx,(Q==null?null:Q.Q)!=null?(Q=S.e,Q.f!==-1&&Q.e!==-1?(Q=Q.r,Q!=null&&Q.z!==-1&&Q.y!==-1?(Q=Q.cx,Q=(Q==null?null:Q.Q)==null):Q=!0):Q=!0):Q=!0):Q=!0):Q=!0,Q){i=1;break}if(Q=S.d,Q>v){i=1;break}if(v=S.e,S=v.e,ne=v.f,ge.bm(S,ke.b_(ne),ke.b_(ne)*Q,v.r,null,null)?(ie=n.dy,fe=w.l.j(0,n.ch),fe==null&&(fe=0),fe=!ge.bm(k,ie,ie*fe*Q,R.f,null,null),ie=fe):ie=!0,ie){i=1;break}if(v=v.r,me=ge.mz(ne,v.cx.Q.buffer,v.y+S,Q),R=R.f,Ie=ge.ny(Xe,R.cx.Q.buffer,R.y+k,Q*g),me==null||Ie==null){i=1;break}K=new ge.l9(n,me,K,g,Ie).$0()}return i=3,E.lv(K);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},X.e)},bf:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,v,S,R;return function(D,V){for(D===1&&(f=V,i=a);;)switch(i){case 0:S=n.dy*8,R=n.z,R=R===5120||R===5122||R===5124,g=X.F,i=R?2:4;break;case 2:return R=w.c.aA(1,S-1),v=n.ac(),v.toString,i=5,E.lv(p.ja(v,new ge.l4(1/(R-1)),v.$ti.h("i.E"),g));case 5:i=3;break;case 4:return R=w.c.aA(1,S),v=n.ac(),v.toString,i=6,E.lv(p.ja(v,new ge.l5(1/(R-1)),v.$ti.h("i.E"),g));case 6:case 3:return E.bF();case 1:return E.bG(f)}}},X.F)}},ge.l6.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,v,S,R,k,D,V,G;return function(Q,ne){for(Q===1&&(f=ne,i=a);;)switch(i){case 0:g=n.a,v=n.c,S=n.b,R=n.d,k=n.e,D=0,V=0,G=0;case 2:if(!(D<g)){i=3;break}return i=4,S[D];case 4:++D,++V,V===v&&(D+=4-V,++G,G===R&&(D+=k,G=0),V=0),i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},X.e)},$S:17},ge.l7.prototype={$3:function(n,i,a){return this.cZ(n,i,a)},cZ:function(n,i,a){var f=this;return E.bK(function(){var g=n,v=i,S=a,R=0,k=1,D,V,G,K;return function(ne,ie){for(ne===1&&(D=ie,R=k);;)switch(R){case 0:V=f.a,G=0,K=0;case 2:if(!(G<g)){R=3;break}return R=4,V[G];case 4:++G,++K,K===v&&(G+=S,K=0),R=2;break;case 3:return E.bF();case 1:return E.bG(D)}}},X.e)},$S:30},ge.l8.prototype={$1:function(n){return 0},$S:18},ge.l9.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,v,S,R,k,D,V,G,K,Q;return function(ie,fe){for(ie===1&&(f=fe,i=a);;)switch(i){case 0:K=n.b,Q=K[0],g=J.a_(n.c),v=n.d,S=n.a.dx,R=n.e,k=0,D=0,V=0;case 2:if(!g.n()){i=3;break}G=g.gq(),D===v&&(k===Q&&V!==S.d-1&&(++V,Q=K[V]),++k,D=0),i=k===Q?4:6;break;case 4:return i=7,R[V*v+D];case 7:i=5;break;case 6:return i=8,G;case 8:case 5:++D,i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},X.e)},$S:17},ge.l4.prototype={$1:function(n){return Math.max(n*this.a,-1)},$S:5},ge.l5.prototype={$1:function(n){return n*this.a},$S:5},ge.fa.prototype={ac:function(){var n=this;return E.bK(function(){var i=0,a=2,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe;return function(mt,at){for(mt===1&&(f=at,i=a);;)switch(i){case 0:if(Xe=n.z,Xe===-1||n.Q===-1||n.ch==null){i=1;break}if(g=n.ga7(),v=n.Q,S=n.fr,S!=null){if(S=S.cx,(S==null?null:S.Q)==null){i=1;break}if(n.gal()<n.ga8()){i=1;break}if(S=n.y,R=n.dy,!ge.bm(S,R,n.gaF(),n.fr,null,null)){i=1;break}if(k=n.fr,D=ge.nx(Xe,k.cx.Q.buffer,k.y+S,w.c.aq(n.gaF(),R)),D==null){i=1;break}V=D.length,n.gck()?(S=w.c.aq(n.gal(),R),R=n.ch==="MAT2",k=R?8:12,G=R?2:3,K=new ge.l0(V,D,G,G,S-k).$0()):K=new ge.l1(D).$3(V,g,w.c.aq(n.gal(),R)-g)}else K=E.nJ(v*g,new ge.l2,X.F);if(S=n.dx,S!=null){if(R=S.f,k=R.e,k!==-1?(Q=R.f,Q!=null&&Q.z!==-1&&Q.y!==-1?(Q=Q.cx,(Q==null?null:Q.Q)!=null?(Q=S.e,Q.f!==-1&&Q.e!==-1?(Q=Q.r,Q!=null&&Q.z!==-1&&Q.y!==-1?(Q=Q.cx,Q=(Q==null?null:Q.Q)==null):Q=!0):Q=!0):Q=!0):Q=!0):Q=!0,Q){i=1;break}if(Q=S.d,Q>v){i=1;break}if(v=S.e,S=v.e,ne=v.f,ge.bm(S,ke.b_(ne),ke.b_(ne)*Q,v.r,null,null)?(ie=n.dy,fe=w.l.j(0,n.ch),fe==null&&(fe=0),fe=!ge.bm(k,ie,ie*fe*Q,R.f,null,null),ie=fe):ie=!0,ie){i=1;break}if(v=v.r,me=ge.mz(ne,v.cx.Q.buffer,v.y+S,Q),R=R.f,Ie=ge.nx(Xe,R.cx.Q.buffer,R.y+k,Q*g),me==null||Ie==null){i=1;break}K=new ge.l3(n,me,K,g,Ie).$0()}return i=3,E.lv(K);case 3:case 1:return E.bF();case 2:return E.bG(f)}}},X.F)},bf:function(){return this.ac()}},ge.l0.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,v,S,R,k,D,V,G;return function(Q,ne){for(Q===1&&(f=ne,i=a);;)switch(i){case 0:g=n.a,v=n.c,S=n.b,R=n.d,k=n.e,D=0,V=0,G=0;case 2:if(!(D<g)){i=3;break}return i=4,S[D];case 4:++D,++V,V===v&&(D+=4-V,++G,G===R&&(D+=k,G=0),V=0),i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},X.F)},$S:19},ge.l1.prototype={$3:function(n,i,a){return this.cY(n,i,a)},cY:function(n,i,a){var f=this;return E.bK(function(){var g=n,v=i,S=a,R=0,k=1,D,V,G,K;return function(ne,ie){for(ne===1&&(D=ie,R=k);;)switch(R){case 0:V=f.a,G=0,K=0;case 2:if(!(G<g)){R=3;break}return R=4,V[G];case 4:++G,++K,K===v&&(G+=S,K=0),R=2;break;case 3:return E.bF();case 1:return E.bG(D)}}},X.F)},$S:34},ge.l2.prototype={$1:function(n){return 0},$S:5},ge.l3.prototype={$0:function(){var n=this;return E.bK(function(){var i=0,a=1,f,g,v,S,R,k,D,V,G,K,Q;return function(ie,fe){for(ie===1&&(f=fe,i=a);;)switch(i){case 0:K=n.b,Q=K[0],g=J.a_(n.c),v=n.d,S=n.a.dx,R=n.e,k=0,D=0,V=0;case 2:if(!g.n()){i=3;break}G=g.gq(),D===v&&(k===Q&&V!==S.d-1&&(++V,Q=K[V]),++k,D=0),i=k===Q?4:6;break;case 4:return i=7,R[V*v+D];case 7:i=5;break;case 6:return i=8,G;case 8:case 5:++D,i=2;break;case 3:return E.bF();case 1:return E.bG(f)}}},X.F)},$S:19},ge.bP.prototype={ge3:function(){var n=this.e,i=n.r,a=i==null?null:i.cx;return(a==null?null:a.Q)==null?null:ge.mz(n.f,i.cx.Q.buffer,i.y+n.e,this.d)}},ge.bQ.prototype={v:function(n,i){this.r=n.z.j(0,this.d)}},ge.bR.prototype={v:function(n,i){this.f=n.z.j(0,this.d)}},ge.ez.prototype={Y:function(n,i,a,f){return f.toString,f==1/0||f==-1/0||isNaN(f)?(n.k(j.pl(),p.a([i,f],X.M),this.a),!1):!0}},ge.eG.prototype={Y:function(n,i,a,f){var g,v=this;return(i===a||v.b[a]>f)&&(v.b[a]=f),f<v.c[a]&&(g=v.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,v,S,R,k,D,V=this;for(i=V.b,a=i.length,f=V.c,g=V.a,v=V.d,S=X.M,R=0;R<a;++R)J.aA(f[R],i[R])||(k=j.na(),D=v+"/min/"+R,n.k(k,p.a([f[R],i[R]],S),D),g[R]>0&&(k=j.n8(),D=v+"/min/"+R,n.k(k,p.a([g[R],f[R]],S),D)));return!0}},ge.eE.prototype={Y:function(n,i,a,f){var g,v=this;return(i===a||v.b[a]<f)&&(v.b[a]=f),f>v.c[a]&&(g=v.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,v,S,R,k,D,V=this;for(i=V.b,a=i.length,f=V.c,g=V.a,v=V.d,S=X.M,R=0;R<a;++R)J.aA(f[R],i[R])||(k=j.n9(),D=v+"/max/"+R,n.k(k,p.a([f[R],i[R]],S),D),g[R]>0&&(k=j.n7(),D=v+"/max/"+R,n.k(k,p.a([g[R],f[R]],S),D)));return!0}},ge.eH.prototype={Y:function(n,i,a,f){var g,v=this;return(i===a||v.b[a]>f)&&(v.b[a]=f),f<v.c[a]&&(g=v.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,v,S,R,k,D,V=this;for(i=V.b,a=i.length,f=V.c,g=V.a,v=V.d,S=X.M,R=0;R<a;++R)J.aA(f[R],i[R])||(k=j.na(),D=v+"/min/"+R,n.k(k,p.a([f[R],i[R]],S),D),g[R]>0&&(k=j.n8(),D=v+"/min/"+R,n.k(k,p.a([g[R],f[R]],S),D)));return!0}},ge.eF.prototype={Y:function(n,i,a,f){var g,v=this;return(i===a||v.b[a]<f)&&(v.b[a]=f),f>v.c[a]&&(g=v.a,g[a]=g[a]+1),!0},aw:function(n){var i,a,f,g,v,S,R,k,D,V=this;for(i=V.b,a=i.length,f=V.c,g=V.a,v=V.d,S=X.M,R=0;R<a;++R)J.aA(f[R],i[R])||(k=j.n9(),D=v+"/max/"+R,n.k(k,p.a([f[R],i[R]],S),D),g[R]>0&&(k=j.n7(),D=v+"/max/"+R,n.k(k,p.a([g[R],f[R]],S),D)));return!0}},ke.bn.prototype={v:function(n,i){var a,f,g,v,S,R=this,k="samplers",D=R.y;if(!(D==null||R.x==null)){for(a=i.c,a.push(k),D.a9(new ke.fH(i,n)),a.pop(),a.push("channels"),R.x.a9(new ke.fI(R,i,n)),a.pop(),a.push(k),f=D.b,D=D.a,g=D.length,v=0;v<f;++v)S=v>=g,(S?null:D[v]).a$||i.X(j.fD(),v);a.pop()}}},ke.fH.prototype={$2:function(n,i){var a,f,g,v,S="input",R="output",k=this.a,D=k.c;D.push(w.c.l(n)),a=this.b.f,f=i.d,i.r=a.j(0,f),g=i.f,i.x=a.j(0,g),f!==-1&&(a=i.r,a==null?k.k(j.N(),p.a([f],X.M),S):(a.P(w.b_,S,k),a=i.r.fr,a!=null&&a.P(w.v,S,k),D.push(S),v=ye.d2(i.r),v.N(0,w.A)?k.W(i.r,new ke.ei(k.O())):k.E(j.q_(),p.a([v,p.a([w.A],X.p)],X.M)),a=i.r,(a.db==null||a.cy==null)&&k.R(j.q1()),i.e==="CUBICSPLINE"&&i.r.Q<2&&k.E(j.q0(),p.a(["CUBICSPLINE",2,i.r.Q],X.M)),D.pop())),g!==-1&&(a=i.x,a==null?k.k(j.N(),p.a([g],X.M),R):(a.P(w.b0,R,k),a=i.x.fr,a!=null&&a.P(w.v,R,k),i.x.ex(i.e==="CUBICSPLINE"))),D.pop()},$S:35},ke.fI.prototype={$2:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe=null,me="sampler",Ie=this.b,Xe=Ie.c;if(Xe.push(w.c.l(n)),a=this.a,f=i.d,i.f=a.y.j(0,f),g=i.e,v=g!=null,v&&(S=g.d,g.f=this.c.db.j(0,S),S!==-1)){if(Xe.push("target"),R=g.f,R==null)Ie.k(j.N(),p.a([S],X.M),"node");else switch(R.a$=!0,g.e){case"translation":case"rotation":case"scale":R.Q!=null&&Ie.R(j.pX()),g.f.id!=null&&Ie.p(j.qz(),"path");break;case"weights":S=R.fy,S=S==null?fe:S.x,S=S==null?fe:S.gcF(S),(S==null?fe:S.fx)==null&&Ie.R(j.pY());break}Xe.pop()}if(f!==-1){for(S=i.f,S==null?Ie.k(j.N(),p.a([f],X.M),me):(S.a$=!0,v&&S.x!=null&&(f=g.e,f==="rotation"&&(k=S.x,k.ga7()===4&&(Xe.push(me),S=Ie.O(),R=k.z===5126?fe:k.gbP(),Ie.W(k,new ke.dp(i.f.e==="CUBICSPLINE",R,S,X.ed)),Xe.pop()),S=i.f,S.x.toString),D=ye.d2(S.x),V=w.cS.j(0,f),(V==null?fe:w.d.F(V,D))===!1&&Ie.k(j.q3(),p.a([D,V,f],X.M),me),S=i.f,R=S.r,R!=null&&R.Q!==-1&&S.x.Q!==-1&&S.e!=null&&(G=R.Q,S.e==="CUBICSPLINE"&&(G*=3),f==="weights"&&(f=g.f,f=f==null?fe:f.fy,f=f==null?fe:f.x,f=f==null?fe:f.gcF(f),f=f==null?fe:f.fx,K=f==null?fe:f.length,G*=K==null?0:K),G!==0&&G!==i.f.x.Q&&Ie.k(j.q2(),p.a([G,i.f.x.Q],X.M),me)))),Q=n+1,a=a.x,f=a.b,S=X.M,a=a.a,R=a.length;Q<f;++Q)v?(ne=Q>=R,ie=(ne?fe:a[Q]).e,ne=ie!=null&&g.d===ie.d&&g.e==ie.e):ne=!1,ne&&Ie.k(j.pZ(),p.a([Q],S),"target");Xe.pop()}},$S:36},ke.b1.prototype={},ke.bT.prototype={},ke.b2.prototype={},ke.ei.prototype={Y:function(n,i,a,f){var g=this;return f<0?n.k(j.pf(),p.a([i,f],X.M),g.b):(i!==0&&f<=g.a&&n.k(j.pg(),p.a([i,f,g.a],X.M),g.b),g.a=f),!0}},ke.dp.prototype={Y:function(n,i,a,f){var g,v,S=this;return(!S.a||(4&S.d)==4)&&(g=S.b,v=g!=null?g.$1(f):f,g=S.e+v*v,S.e=g,a===3&&(Math.abs(Math.sqrt(g)-1)>.00769&&n.k(j.ph(),p.a([i-3,i,Math.sqrt(S.e)],X.M),S.c),S.e=0)),++S.d==12&&(S.d=0),!0}},Se.bo.prototype={gb8:function(){var n,i=this.f;return i!=null?(n=j.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(j.bj().aG(i).b[1],null)},gbO:function(){var n,i=this.f;return i!=null?(n=j.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(j.bj().aG(i).b[2],null)},gcM:function(){var n,i=this.r;return i!=null?(n=j.bj().b,n=!n.test(i)):n=!0,n?2:E.cr(j.bj().aG(i).b[1],null)},geb:function(){var n,i=this.r;return i!=null?(n=j.bj().b,n=!n.test(i)):n=!0,n?0:E.cr(j.bj().aG(i).b[2],null)}},de.aN.prototype={},ye.bp.prototype={P:function(n,i,a){var f;this.a$=!0,f=this.cy,f==null?this.cy=n:f!==n&&a.k(j.q5(),p.a([f,n],X.M),i)},v:function(n,i){var a,f=this,g=f.x,v=f.cx=n.y.j(0,g);f.db=f.Q,a=f.ch,a===34962?f.cy=w.F:a===34963&&(f.cy=w.X),g!==-1&&(v==null?i.k(j.N(),p.a([g],X.M),"buffer"):(v.a$=!0,v=v.y,v!==-1&&(a=f.y,a>=v?i.k(j.ne(),p.a([g,v],X.M),"byteOffset"):a+f.z>v&&i.k(j.ne(),p.a([g,v],X.M),"byteLength"))))}},Re.bq.prototype={},Re.bV.prototype={},Re.bW.prototype={},ye.da.prototype={ez:function(n){var i,a,f,g,v;for(new ye.i3(this,n).$1(this.fy),i=n.r,a=i.length,f=n.c,g=0;g<i.length;i.length===a||(0,p.cs)(i),++g)v=i[g],w.d.si(f,0),w.d.K(f,v.b),v.a.bY(this,n);w.d.si(f,0)}},ye.i0.prototype={$0:function(){return w.d.si(this.a.c,0),null},$S:1},ye.i1.prototype={$1$2:function(n,i,a){var f,g,v,S,R,k,D,V,G,K,Q=this,ne=Q.a;if(!ne.w(n))return ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,a.h("p<0*>")),0,n,a.h("L<0*>"));if(Q.b.$0(),f=ne.j(0,n),X.o.b(f))if(ne=J.M(f),g=Q.c,v=a.h("p<0*>"),S=a.h("L<0*>"),ne.ga3(f)){for(R=ne.gi(f),k=new Array(R),k.fixed$length=Array,v=p.a(k,v),k=g.c,k.push(n),D=X.M,V=X.t,G=0;G<ne.gi(f);++G)K=ne.j(f,G),V.b(K)?(k.push(w.c.l(G)),v[G]=i.$2(K,g),k.pop()):g.aE(j.Z(),p.a([K,"object"],D),G);return new oe.L(v,R,n,S)}else return g.p(j.bO(),n),ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,v),0,n,S);else return Q.c.k(j.Z(),p.a([f,"array"],X.M),n),ne=new Array(0),ne.fixed$length=Array,new oe.L(p.a(ne,a.h("p<0*>")),0,n,a.h("L<0*>"))},$2:function(n,i){return this.$1$2(n,i,X.z)},$S:37},ye.i2.prototype={$1$3$req:function(n,i,a,f){var g,v;return this.a.$0(),g=this.c,v=oe.n_(this.b,n,g,!0),v==null?null:(g.c.push(n),i.$2(v,g))},$2:function(n,i){return this.$1$3$req(n,i,!1,X.z)},$1$2:function(n,i,a){return this.$1$3$req(n,i,!1,a)},$S:38},ye.hZ.prototype={$2:function(n,i){var a,f,g,v,S,R=this.a,k=R.c;if(k.push(n.c),a=this.b,n.a9(new ye.i_(R,a)),f=R.f.j(0,i),f!=null){for(g=J.eA(k.slice(0),p.U(k).c),v=J.a_(f);v.n();)S=v.gq(),w.d.si(k,0),w.d.K(k,S.b),S.a.v(a,R);w.d.si(k,0),w.d.K(k,g)}k.pop()},$S:39},ye.i_.prototype={$2:function(n,i){var a=this.a,f=a.c;f.push(w.c.l(n)),i.v(this.b,a),f.pop()},$S:40},ye.hX.prototype={$2:function(n,i){var a,f;X.v.b(i)&&(a=this.a,f=a.c,f.push(n),i.v(this.b,a),f.pop())},$S:6},ye.hY.prototype={$2:function(n,i){var a,f,g,v=this;if(!i.k1&&i.fx==null&&i.fy==null&&i.fr==null&&i.a.a===0&&i.b==null&&v.a.X(j.qU(),n),i.go!=null)for(a=v.b,a.cz(0),f=i;f.go!=null;)if(a.B(0,f))f=f.go;else{f===i&&v.a.X(j.qg(),n);break}i.id!=null&&(i.go!=null&&v.a.X(j.qZ(),n),a=i.Q,a==null||a.cK()?(a=i.cx,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0):a=!0,a?(a=i.cy,a!=null?(a=a.a,a=a[0]===0&&a[1]===0&&a[2]===0&&a[3]===1):a=!0,a?(a=i.db,a!=null?(a=a.a,a=a[0]===1&&a[1]===1&&a[2]===1):a=!0):a=!1):a=!1):a=!1,a||v.a.X(j.qY(),n),g=i.id.cy.b5(0,new ye.hV,new ye.hW),g!=null?(a=g.dy,a=!i.dy.b4(0,a.gcA(a))):a=!1,a&&v.a.X(j.qX(),n))},$S:29},ye.hV.prototype={$1:function(n){return n.go==null},$S:43},ye.hW.prototype={$0:function(){return null},$S:2},ye.i3.prototype={$1:function(n){var i=this.b,a=i.c;w.d.si(a,0),a.push(n.c),n.a9(new ye.i4(this.a,i)),a.pop()},$S:44},ye.i4.prototype={$2:function(n,i){var a=this.b,f=a.c;f.push(w.c.l(n)),i.bY(this.a,a),f.pop()},$S:45},ye.kQ.prototype={ge7:function(){return this.a$}},ye.o.prototype={v:function(n,i){},$it:1},ye.es.prototype={},ye.fk.prototype={},Se.aO.prototype={v:function(n,i){var a,f="bufferView",g=this.x;g!==-1&&(a=this.ch=n.z.j(0,g),a==null?i.k(j.N(),p.a([g],X.M),f):(a.P(w.b4,f,i),this.ch.Q!==-1&&i.p(j.q6(),f)))},ew:function(){var n=this.ch,i=n==null?null:n.cx;if((i==null?null:i.Q)!=null)try{this.Q=p.mH(n.cx.Q.buffer,n.y,n.z)}catch(a){if(!(p.E(a)instanceof E.ak))throw a}}},we.aS.prototype={v:function(n,i){var a=this,f=new we.jb(i,n);f.$2(a.x,"pbrMetallicRoughness"),f.$2(a.y,"normalTexture"),f.$2(a.z,"occlusionTexture"),f.$2(a.Q,"emissiveTexture")}},we.jb.prototype={$2:function(n,i){var a,f;n!=null&&(a=this.a,f=a.c,f.push(i),n.v(this.b,a),f.pop())},$S:46},we.ci.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("baseColorTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("metallicRoughnessTexture"),f.v(n,i),a.pop())}},we.ch.prototype={},we.cg.prototype={},we.bB.prototype={v:function(n,i){var a,f=this,g=f.d,v=f.f=n.fy.j(0,g);for(g!==-1&&(v==null?i.k(j.N(),p.a([g],X.M),"index"):v.a$=!0),g=i.e,a=f;a!=null;)if(a=g.j(0,a),a instanceof we.aS){a.dx.m(0,i.O(),f.e);break}}},ye.bU.prototype={l:function(n){return this.a}},ye.bS.prototype={l:function(n){return this.a}},ye.u.prototype={l:function(n){var i="{"+p.b(this.a)+", "+p.b(w.ao.j(0,this.b));return i+(this.c?" normalized":"")+"}"},N:function(n,i){return i==null?!1:i instanceof ye.u&&i.a==this.a&&i.b===this.b&&i.c===this.c},gG:function(n){return Be.oG(Be.fy(Be.fy(Be.fy(0,J.aL(this.a)),w.c.gG(this.b)),w.bC.gG(this.c)))}},be.aT.prototype={v:function(n,i){var a,f=i.c;f.push("primitives"),a=this.x,a!=null&&a.a9(new be.jl(i,n)),f.pop()}},be.jl.prototype={$2:function(n,i){var a=this.a,f=a.c;f.push(w.c.l(n)),i.v(this.b,a),f.pop()},$S:20},be.aH.prototype={geu:function(){switch(this.r){case 4:return w.c.bA(this.dy,3);case 5:case 6:var n=this.dy;return n>2?n-2:0;default:return 0}},v:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q=this,ne="attributes",ie="indices",fe=Q.d;for(fe!=null&&(a=i.c,a.push(ne),fe.J(0,new be.jg(Q,n,i)),a.pop()),fe=Q.e,fe!==-1&&(a=Q.fy=n.f.j(0,fe),a==null?i.k(j.N(),p.a([fe],X.M),ie):(Q.dy=a.Q,a.P(w.b2,ie,i),fe=Q.fy.fr,fe!=null&&fe.P(w.X,ie,i),fe=i.c,fe.push(ie),a=Q.fy.fr,a!=null&&a.Q!==-1&&i.R(j.qb()),f=ye.d2(Q.fy),w.d.F(w.af,f)?(a=Q.fr,g=a!==-1?a-1:-1,a=Q.r,v=a!==-1?w.c.aA(1,a):-1,v!==0&&g>=-1&&(a=Q.fy,S=i.O(),R=w.c.bA(Q.dy,3),k=Q.fy.z,D=new Uint32Array(3),i.W(a,new be.ev(g,R,ke.pb(k),(16&v)==16,D,S)))):i.E(j.qa(),p.a([f,w.af],X.M)),fe.pop())),fe=Q.dy,fe!==-1?(a=Q.r,a===1&&fe%2!=0||(a===2||a===3)&&fe<2||a===4&&fe%3!=0?fe=!0:fe=(a===5||a===6)&&fe<3):fe=!1,fe&&i.E(j.q9(),p.a([Q.dy,w.c7[Q.r]],X.M)),fe=Q.f,Q.go=n.cx.j(0,fe),V=E.nO(Q.db,new be.jh,!1,X.e),fe!==-1&&(a=Q.go,a==null?i.k(j.N(),p.a([fe],X.M),"material"):(a.a$=!0,a.dx.J(0,new be.ji(Q,i,V)))),fe=w.d.gC(V),a=new p.cm(fe,new be.jj,p.U(V).h("cm<1>")),S=i.c;a.n();)R=fe.gq(),S.push(ne),i.p(j.fD(),"TEXCOORD_"+p.b(R)),S.pop();if(fe=Q.x,fe!=null){for(a=i.c,a.push("targets"),S=new Array(fe.length),S.fixed$length=Array,Q.fx=p.a(S,X.ar),S=X.X,R=X.W,G=0;G<fe.length;++G)K=fe[G],Q.fx[G]=E.a5(S,R),a.push(w.c.l(G)),K.J(0,new be.jk(Q,n,i,G)),a.pop();a.pop()}},c7:function(n,i,a){var f,g=n.fr;g.Q===-1&&(f=a.x.bS(g,new be.jf),f.B(0,n)&&f.gi(f)>1&&a.p(j.q8(),i))}},be.jc.prototype={$1:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie=this;if(!(n.length!==0&&w.a.H(n,0)===95))switch(n){case"POSITION":ie.a.c=!0;break;case"NORMAL":ie.a.b=!0;break;case"TANGENT":ie.a.a=!0;break;default:if(i=n.split("_"),a=i[0],!w.d.F(w.bY,a)||i.length!==2){ie.b.p(j.mw(),n);break}if(f=i[1],f.toString,g=new p.cu(f),g.gi(g)===0)v=0,S=!1;else if(R=f.length,R===1)v=w.a.H(f,0)-48,S=!(v<0||v>9)||!1;else for(v=0,k=0;;){if(!(k<R)){S=!0;break}if(D=w.a.H(f,k)-48,D<=9&&D>=0?V=k===0&&D===0:V=!0,V){S=!1;break}v=10*v+D,++k}if(S)switch(a){case"COLOR":f=ie.a,++f.d,G=f.e,f.e=v>G?v:G;break;case"JOINTS":f=ie.a,++f.f,K=f.r,f.r=v>K?v:K;break;case"TEXCOORD":f=ie.a,++f.z,Q=f.Q,f.Q=v>Q?v:Q;break;case"WEIGHTS":f=ie.a,++f.x,ne=f.y,f.y=v>ne?v:ne;break}else ie.b.p(j.mw(),n)}},$S:21},be.jd.prototype={$3:function(n,i,a){var f=n+1;return f!==i?(this.a.E(j.qK(),p.a([a,f,i],X.M)),0):i},$S:49},be.je.prototype={$1:function(n){var i=this.a;!i.k3.w(n)&&!J.rE(n,"_")&&i.p(j.mw(),n)},$S:21},be.jg.prototype={$2:function(n,i){var a,f,g,v,S,R,k,D=this;if(i!==-1){if(a=D.b.f.j(0,i),a==null){D.c.k(j.N(),p.a([i],X.M),n);return}f=D.a,f.dx.m(0,n,a),g=D.c,a.P(w.W,n,g),v=a.fr,v!=null&&v.P(w.F,n,g),n==="POSITION"?v=a.db==null||a.cy==null:v=!1,v&&g.p(j.nh(),"POSITION"),S=ye.d2(a),R=g.k2.j(0,p.a(n.split("_"),X.s)[0]),R!=null&&(R.F(0,S)?n==="NORMAL"?(v=g.c,v.push("NORMAL"),k=g.O(),g.W(a,new oe.f4(k,a.z===5126?null:a.gbP())),v.pop()):n==="TANGENT"?(v=g.c,v.push("TANGENT"),k=g.O(),g.W(a,new oe.f5(k,a.z===5126?null:a.gbP())),v.pop()):w.a.V(n,"COLOR_")&&a.z===5126&&(v=g.c,v.push(n),g.W(a,new oe.en(g.O())),v.pop()):g.k(j.ng(),p.a([S,R],X.M),n)),v=a.y,v!==-1&&v%4!=0?v=!0:a.ga8()%4!=0?(v=a.fr,v=v!=null&&v.Q===-1):v=!1,v&&g.p(j.nf(),n),v=f.fr,v===-1?f.dy=f.fr=a.Q:v!==a.Q&&g.p(j.qf(),n),v=a.fr,v!=null&&v.Q===-1&&(v.db===-1&&(v.db=a.ga8()),f.c7(a,n,g))}},$S:7},be.jh.prototype={$1:function(n){return n},$S:18},be.ji.prototype={$2:function(n,i){i!==-1&&(i+1>this.a.db?this.b.k(j.qe(),p.a([n,i],X.M),"material"):this.c[i]=-1)},$S:7},be.jj.prototype={$1:function(n){return n!==-1},$S:8},be.jk.prototype={$2:function(n,i){var a,f,g,v,S,R,k=this;i!==-1&&(a=k.b.f.j(0,i),a==null?k.c.k(j.N(),p.a([i],X.M),n):(f=k.c,a.P(w.W,n,f),g=a.fr,g!=null&&g.P(w.F,n,f),v=k.a.dx.j(0,n),v==null?f.p(j.qd(),n):v.Q!==a.Q&&f.p(j.qc(),n),n==="POSITION"?g=a.db==null||a.cy==null:g=!1,g&&f.p(j.nh(),"POSITION"),S=ye.d2(a),R=f.k3.j(0,n),R!=null&&!R.F(0,S)&&f.k(j.ng(),p.a([S,R],X.M),n),g=a.y,g!==-1&&g%4!=0?g=!0:a.ga8()%4!=0?(g=a.fr,g=g!=null&&g.Q===-1):g=!1,g&&f.p(j.nf(),n),g=a.fr,g!=null&&g.Q===-1&&(g.db===-1&&(g.db=a.ga8()),k.a.c7(a,n,f))),k.a.fx[k.d].m(0,n,a))},$S:7},be.jf.prototype={$0:function(){return E.aR(X.W)},$S:52},be.ev.prototype={Y:function(n,i,a,f){var g,v,S=this,R=S.a;return f>R&&n.k(j.pi(),p.a([i,f,R],X.M),S.cy),f===S.c&&n.k(j.pj(),p.a([f,i],X.M),S.cy),S.x&&(R=S.cx,g=S.Q,R[g]=f,++g,S.Q=g,g===3&&(S.Q=0,g=R[0],v=R[1],g!==v?(R=R[2],R=v===R||R===g):R=!0,R&&++S.ch)),!0},aw:function(n){var i=this.ch;return i>0&&n.k(j.pk(),p.a([i,this.b],X.M),this.cy),!0}},ye.ah.prototype={v:function(n,i){var a,f,g,v=this,S=v.x;v.fr=n.Q.j(0,S),a=v.z,v.id=n.fx.j(0,a),f=v.ch,v.fy=n.cy.j(0,f),S!==-1&&(g=v.fr,g==null?i.k(j.N(),p.a([S],X.M),"camera"):g.a$=!0),a!==-1&&(S=v.id,S==null?i.k(j.N(),p.a([a],X.M),"skin"):S.a$=!0),f!==-1&&(S=v.fy,S==null?i.k(j.N(),p.a([f],X.M),"mesh"):(S.a$=!0,S=S.x,S!=null&&(a=v.dx,a!=null?(S=S.j(0,0).fx,S=S==null?null:S.length,S=S!==a.length):S=!1,S&&(S=j.qk(),a=a.length,f=v.fy.x.j(0,0).fx,i.k(S,p.a([a,f==null?null:f.length],X.M),"weights")),v.id!=null?(S=v.fy.x,S.b4(S,new ye.jo)&&i.R(j.qi())):(S=v.fy.x,S.bC(S,new ye.jp)&&i.R(j.qj()))))),S=v.y,S!=null&&(a=new Array(S.gi(S)),a.fixed$length=Array,a=p.a(a,X.R),v.fx=a,oe.n4(S,a,n.db,"children",i,new ye.jq(v,i)))},c5:function(n,i){var a,f,g,v,S=this;if(S.dy.B(0,n),!(S.fx==null||!i.B(0,S)))for(a=S.fx,f=a.length,g=0;g<f;++g)v=a[g],v!=null&&v.c5(n,i)}},ye.jo.prototype={$1:function(n){return n.cx===0},$S:3},ye.jp.prototype={$1:function(n){return n.cx!==0},$S:3},ye.jq.prototype={$3:function(n,i,a){n.go!=null&&this.b.aE(j.qh(),p.a([i],X.M),a),n.go=this.a},$S:9},Se.bv.prototype={},Ue.bw.prototype={v:function(n,i){var a,f=this.x;f!=null&&(a=new Array(f.gi(f)),a.fixed$length=Array,a=p.a(a,X.R),this.y=a,oe.n4(f,a,n.db,"nodes",i,new Ue.jz(this,i)))}},Ue.jz.prototype={$3:function(n,i,a){n.go!=null&&this.b.aE(j.ql(),p.a([i],X.M),a),n.c5(this.a,E.aR(X.L))},$S:9},Ce.by.prototype={v:function(n,i){var a,f,g,v,S,R=this,k="inverseBindMatrices",D="skeleton",V=R.x;R.Q=n.f.j(0,V),a=n.db,f=R.y,R.cx=a.j(0,f),g=R.z,g!=null&&(v=new Array(g.gi(g)),v.fixed$length=Array,v=p.a(v,X.R),R.ch=v,oe.n4(g,v,a,"joints",i,new Ce.kB(R)),R.cy.a===0&&i.p(j.r3(),"joints")),V!==-1&&(a=R.Q,a==null?i.k(j.N(),p.a([V],X.M),k):(a.P(w.b1,k,i),V=R.Q.fr,V!=null&&V.P(w.b3,k,i),V=i.c,V.push(k),a=R.Q.fr,a!=null&&a.Q!==-1&&i.R(j.qm()),S=ye.d2(R.Q),S.N(0,w.P)?i.W(R.Q,new Ce.eu(i.O())):i.E(j.qn(),p.a([S,p.a([w.P],X.p)],X.M)),a=R.ch,a!=null&&R.Q.Q!==a.length&&i.E(j.q7(),p.a([a.length,R.Q.Q],X.M)),V.pop())),f!==-1&&(V=R.cx,V==null?i.k(j.N(),p.a([f],X.M),D):R.cy.F(0,V)||i.p(j.r4(),D))}},Ce.kB.prototype={$3:function(n,i,a){var f,g,v;for(n.k1=!0,f=E.aR(X.L),g=n;g!=null&&f.B(0,g);)g=g.go;v=this.a.cy,v.a===0?v.K(0,f):v.dk(f.gcA(f),!1)},$S:9},Ce.eu.prototype={Y:function(n,i,a,f){var g;return a===3&&f!==0||a===7&&f!==0||a===11&&f!==0?g=!0:g=a===15&&f!==1,g&&n.k(j.pm(),p.a([i,a,f],X.M),this.a),!0}},$e.bA.prototype={v:function(n,i){var a,f,g=this,v=g.y;g.Q=n.ch.j(0,v),a=g.x,g.z=n.dx.j(0,a),v!==-1&&(f=g.Q,f==null?i.k(j.N(),p.a([v],X.M),"source"):f.a$=!0),a!==-1&&(v=g.z,v==null?i.k(j.N(),p.a([a],X.M),"sampler"):v.a$=!0)},bY:function(n,i){var a,f=this.Q;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&!w.d.F(w.ae,a)&&i.k(j.ni(),p.a([a,w.ae],X.M),"source")},$ick:1},ge.kV.prototype={},ge.j.prototype={W:function(n,i){J.mx(this.d.bS(n,new ge.fR),i)},aa:function(n,i){var a,f,g;for(a=J.a_(i),f=this.e;a.n();)g=a.gq(),g!=null&&f.m(0,g,n)},c0:function(n){var i,a,f,g=this.c;return g.length===0&&n!=null&&w.a.V(n,"/")?n:(i=n!=null,i&&g.push(n),a=this.go,f=a.a+="/",a.a=E.mJ(f,new p.a8(g,new ge.fT,p.U(g).h("a8<1,f*>")),"/"),i&&g.pop(),g=a.a,a.a="",g.charCodeAt(0)==0,g)},O:function(){return this.c0(null)},e4:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie=this,fe="/extensionsUsed/";for(w.d.K(ie.cx,n),a=J.M(n),f=ie.db,g=ie.fx,v=w.d3.a,S=X.M,R=J.M(i),k=0;k<a.gi(n);++k){if(D=a.j(n,k),V=j.pe().aG(D),G=V==null?null:V.b[1],G==null?ie.p(j.qF(),fe+k):v.w(G)||(V=j.r7(),K=fe+k,ie.k(V,p.a([G],S),K)),Q=g.b5(0,new ge.fW(D),new ge.fX(D)),Q==null){V=j.qq(),K=fe+k,ie.k(V,p.a([D],S),K);continue}Q.b.J(0,new ge.fY(ie,Q)),V=Q.c,V!=null&&V.$1(ie),V=Q.d&&!R.F(i,D),V&&(V=j.r1(),K=fe+k,ie.k(V,p.a([D],S),K)),f.push(D)}for(k=0;k<R.gi(i);++k)ne=R.j(i,k),a.F(n,ne)||(f=j.r8(),g="/extensionsRequired/"+k,ie.k(f,p.a([ne],S),g))},a6:function(n,i,a,f,g,v){var S,R,k,D=this,V=D.b,G=n.b;if(!V.b.F(0,G)){if(S=V.a,S>0&&D.fy.length===S)throw D.z=!0,p.c(w.b7);V=V.c,R=V!=null?V.j(0,G):null,v!=null?D.fy.push(new W.cA(n,R,null,v,i)):(k=a!=null?w.c.l(a):f,V=g?"":D.c0(k),D.fy.push(new W.cA(n,R,V,null,i)))}},p:function(n,i){return this.a6(n,null,null,i,!1,null)},E:function(n,i){return this.a6(n,i,null,null,!1,null)},k:function(n,i,a){return this.a6(n,i,null,a,!1,null)},R:function(n){return this.a6(n,null,null,null,!1,null)},av:function(n,i,a){return this.a6(n,i,null,null,a,null)},X:function(n,i){return this.a6(n,null,i,null,!1,null)},aE:function(n,i,a){return this.a6(n,i,a,null,!1,null)},bB:function(n,i){return this.a6(n,null,null,null,!1,i)},a_:function(n,i,a){return this.a6(n,i,null,null,!1,a)}},ge.fS.prototype={$1:function(n){return n.a},$S:55},ge.fR.prototype={$0:function(){return p.a([],X.gd)},$S:56},ge.fT.prototype={$1:function(n){var i;return n.toString,i=p.pa(n,"~","~0"),p.pa(i,"/","~1")},$S:57},ge.fW.prototype={$1:function(n){return n.a===this.a},$S:22},ge.fX.prototype={$0:function(){return w.d.b5(w.ak,new ge.fU(this.a),new ge.fV)},$S:59},ge.fU.prototype={$1:function(n){return n.a===this.a},$S:22},ge.fV.prototype={$0:function(){return null},$S:2},ge.fY.prototype={$2:function(n,i){this.a.Q.m(0,new Ve.c1(n,this.b.a),i)},$S:60},ge.c4.prototype={$ia3:1},we.dK.prototype={l:function(n){return this.b}},we.dy.prototype={l:function(n){return this.b}},we.cL.prototype={l:function(n){return this.b}},we.c2.prototype={l:function(n){return this.b}},we.c3.prototype={},we.i7.prototype={$1:function(n){var i,a,f,g=this.a;if(!g.c)if(J.X(n)<9){g.a.I(),this.b.M(w.a2);return}else{switch(i=we.tc(n),a=g.a,f=this.b,i){case w.aB:g.b=new we.ij(f,a);break;case w.aC:i=new Uint8Array(13),g.b=new we.jr(w.r,w.p,i,new Uint8Array(32),f,a);break;case w.aD:g.b=new we.kZ(new Uint8Array(30),f,a);break;default:a.I(),f.M(w.bf);return}g.c=!0}g.b.B(0,n)},$S:23},we.i9.prototype={$1:function(n){this.a.a.I(),this.b.M(n)},$S:24},we.i8.prototype={$0:function(){var n=this.a.b;n.b.I(),n=n.a,n.a.a===0&&n.M(w.a2)},$C:"$0",$R:0,$S:2},we.i6.prototype={$2:function(n,i){var a,f,g;for(a=i.length,f=J.M(n),g=0;g<a;++g)if(!J.aA(f.j(n,g),i[g]))return!1;return!0},$S:63},we.i5.prototype={},we.ij.prototype={B:function(n,i){var a,f;try{this.du(i)}catch(g){if(f=p.E(g),f instanceof we.aP)a=f,this.b.I(),this.a.M(a);else throw g}},du:function(n){var i,a,f,g,v,S,R,k,D,V,G=this,K=new we.il,Q=new we.ik;for(i=J.M(n),a=0,f=0;a!==i.gi(n);){switch(g=i.j(n,a),G.c){case 0:if(g===255)G.c=255;else throw p.c(w.bB);break;case 255:Q.$1(g)&&(G.c=1,G.d=g,G.e=G.f=0);break;case 1:G.e=g<<8>>>0,G.c=2;break;case 2:if(v=G.e+g,G.e=v,v<2)throw p.c(w.bA);K.$1(G.d)&&(v=G.e,G.r=new Uint8Array(v-2)),G.c=3;break;case 3:if(f=Math.min(i.gi(n)-a,G.e-G.f-2),v=K.$1(G.d),S=G.f,R=S+f,v){if(v=G.r,G.f=R,(v&&w.j).a0(v,S,R,n,a),G.f===G.e-2){G.b.I(),n=G.r,k=n[0],i=n[1],v=n[2],S=n[3],R=n[4],D=n[5],D===3?V=w.n:V=D===1?w.a5:w.I,G.a.T(new we.c3("image/jpeg",k,V,(S<<8|R)>>>0,(i<<8|v)>>>0,w.p,w.r,!1,!1));return}}else G.f=R,R===G.e-2&&(G.c=255);a+=f;continue}++a}}},we.il.prototype={$1:function(n){return(n&240)==192&&n!==196&&n!==200&&n!==204||n===222},$S:8},we.ik.prototype={$1:function(n){return!(n===1||(n&248)==208||n===216||n===217||n===255)},$S:8},we.jr.prototype={B:function(n,i){var a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe=this,me=new we.js(fe);for(a=J.M(i),f=fe.dx,g=fe.db,v=0,S=0;v!==a.gi(i);){switch(R=a.j(i,v),fe.y){case 0:v+=8,fe.y=1;continue;case 1:fe.c=(fe.c<<8|R)>>>0,++fe.d==4&&(fe.y=2);break;case 2:if(k=(fe.e<<8|R)>>>0,fe.e=k,++fe.f==4){switch(k){case 1229472850:if(fe.c!==13){fe.b.I(),a=fe.a,a.a.a===0&&a.M(w.o);return}fe.z=!0;break;case 1951551059:fe.Q=!0;break;case 1665684045:if(fe.c!==32){fe.b.I(),a=fe.a,a.a.a===0&&a.M(w.o);return}break;case 1934772034:if(fe.c!==1){fe.b.I(),a=fe.a,a.a.a===0&&a.M(w.o);return}break;case 1883789683:if(fe.c!==9){fe.b.I(),a=fe.a,a.a.a===0&&a.M(w.o);return}break;case 1732332865:if(fe.c!==4){fe.b.I(),a=fe.a,a.a.a===0&&a.M(w.o);return}break;case 1766015824:fe.ch=w.z,fe.cx=w.y;break;case 1229209940:switch(fe.b.I(),fe.z||fe.a.M(w.bz),a=g.buffer,i=new DataView(a,0),D=i.getUint32(0,!1),V=i.getUint32(4,!1),G=i.getUint8(8),i.getUint8(9)){case 0:K=fe.Q?w.a6:w.a5;break;case 2:case 3:K=fe.Q?w.w:w.n;break;case 4:K=w.a6;break;case 6:K=w.w;break;default:K=w.I}a=fe.cx,a===w.p&&(a=fe.cx=w.q),f=fe.ch,f===w.r&&(f=fe.ch=w.t),fe.a.T(new we.c3("image/png",G,K,D,V,a,f,fe.cy,!1));return}fe.c===0?fe.y=4:fe.y=3}break;case 3:switch(k=a.gi(i),Q=fe.c,ne=fe.x,S=Math.min(k-v,Q-ne),fe.e){case 1229472850:k=ne+S,fe.x=k,w.j.a0(g,ne,k,i,v);break;case 1665684045:case 1732332865:case 1883789683:k=ne+S,fe.x=k,w.j.a0(f,ne,k,i,v);break;case 1934772034:fe.ch=w.t,fe.cx=w.q,fe.x=ne+1;break;default:fe.x=ne+S}if(fe.x===fe.c){switch(fe.e){case 1665684045:fe.cx===w.p&&fe.da();break;case 1732332865:fe.ch===w.r&&fe.dc();break;case 1883789683:k=f.buffer,ie=new DataView(k,0),ie.getUint32(0,!1)!==ie.getUint32(4,!1)&&(fe.cy=!0);break}fe.y=4}v+=S;continue;case 4:++fe.r==4&&(me.$0(),fe.y=1);break}++v}},dc:function(){var n=this;if(n.ch!==w.t)switch(p.jm(n.dx.buffer,0,null).getUint32(0,!1)){case 45455:n.ch=w.t;break;case 1e5:n.ch=w.dx;break;default:n.ch=w.z}},da:function(){var n,i=this;i.cx!==w.q&&(n=p.jm(i.dx.buffer,0,null),n.getUint32(0,!1)===31270&&n.getUint32(4,!1)===32900&&n.getUint32(8,!1)===64e3&&n.getUint32(12,!1)===33e3&&n.getUint32(16,!1)===3e4&&n.getUint32(20,!1)===6e4&&n.getUint32(24,!1)===15e3&&n.getUint32(28,!1)===6e3?i.cx=w.q:i.cx=w.y)}},we.js.prototype={$0:function(){var n=this.a;n.r=n.x=n.f=n.e=n.d=n.c=0},$S:1},we.kZ.prototype={B:function(n,i){var a,f,g,v,S,R,k,D=this,V=J.X(i),G=D.d,K=D.c;if(V=G+Math.min(V,30-G),D.d=V,w.j.d0(K,G,V,i),V=D.d,V>=25?V=V<30&&K[15]!==76:V=!0,!V){if(D.b.I(),a=p.jm(K.buffer,0,null),a.getUint32(0,!1)!==1380533830||a.getUint32(8,!1)!==1464156752){D.c3(w.a7);return}switch(a.getUint32(12,!1)){case 1448097824:f=a.getUint16(26,!0)&16383,g=a.getUint16(28,!0)&16383,v=w.n,S=!1,R=!1;break;case 1448097868:V=K[21],G=K[22],f=1+((V|(G&63)<<8)>>>0),V=K[23],K=K[24],g=1+((G>>>6|V<<2|(K&15)<<10)>>>0),v=(K&16)==16?w.w:w.n,S=!1,R=!1;break;case 1448097880:k=K[20],R=(k&2)==2,S=(k&32)==32,v=(k&16)==16?w.w:w.n,f=((K[24]|K[25]<<8|K[26]<<16)>>>0)+1,g=((K[27]|K[28]<<8|K[29]<<16)>>>0)+1;break;default:D.c3(w.a7);return}V=S?w.z:w.t,G=S?w.y:w.q,D.a.T(new we.c3("image/webp",8,v,f,g,G,V,!1,R))}},c3:function(n){var i;this.b.I(),i=this.a,i.a.a===0&&i.M(n)}},we.dw.prototype={$ia3:1},we.dv.prototype={$ia3:1},we.aP.prototype={l:function(n){return this.a},$ia3:1},ze.cR.prototype={l:function(n){return this.b}},ze.eX.prototype={bc:function(){var n,i=this,a=X.X,f=X._,g=E.a5(a,f);return g.m(0,"pointer",i.a),n=i.b,n!=null&&g.m(0,"mimeType",n),n=i.c,n!=null&&g.m(0,"storage",w.c6[n.a]),n=i.e,n!=null&&g.m(0,"uri",n),n=i.d,n!=null&&g.m(0,"byteLength",n),n=i.f,n==null?a=null:(a=E.a5(a,f),a.m(0,"width",n.d),a.m(0,"height",n.e),f=n.c,f!==w.I&&a.m(0,"format",w.cI[f.a]),f=n.f,f!==w.p&&a.m(0,"primaries",w.cB[f.a]),f=n.r,f!==w.r&&a.m(0,"transfer",w.cA[f.a]),f=n.b,f>0&&a.m(0,"bits",f)),a!=null&&g.m(0,"image",a),g}},ze.jw.prototype={aJ:function(){return this.e9()},e9:function(){var n=0,i=E.ec(X.H),a,f=2,g,v=this,S,R,k=E.ee(function(D,V){for(D===1&&(g=V,n=f);;)switch(n){case 0:return S=!0,f=4,n=7,E.cV(v.aY(),k);case 7:return n=8,E.cV(v.aZ(),k);case 8:S&&Ce.wb(v.a,v.b),v.a.ez(v.b),f=2,n=6;break;case 4:if(f=3,R=g,p.E(R)instanceof ge.c4){n=1;break}else throw R;case 3:n=2;break;case 6:case 1:return E.e6(a,i);case 2:return E.e5(g,i)}});return E.e7(k,i)},aY:function(){var n=0,i=E.ec(X.H),a=1,f,g=this,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt=E.ee(function(pt,bn){for(pt===1&&(f=bn,n=a);;)switch(n){case 0:Fe=g.b,mt=Fe.c,w.d.si(mt,0),mt.push("buffers"),D=g.a.y,V=D.b,G=Fe.dy,K=X.M,Q=X.y,ne=X.a,D=D.a,ie=D.length,fe=0;case 2:if(!(fe<V)){n=4;break}if(me=fe>=ie,v=me?null:D[fe],v==null){n=3;break}return mt.push(w.c.l(fe)),Ie=new ze.eX(Fe.O()),Ie.b="application/gltf-buffer",S=new ze.jx(g,Ie,fe),R=null,a=6,wt=ne,n=9,E.cV(S.$1(v),gt);case 9:R=wt.a(bn),a=1,n=8;break;case 6:if(a=5,at=f,me=p.E(at),Q.b(me))k=me,Fe.k(j.mt(),p.a([k],K),"uri");else throw at;n=8;break;case 5:n=1;break;case 8:R!=null&&(Ie.d=J.X(R),J.X(R)<v.y?Fe.E(j.px(),p.a([J.X(R),v.y],K)):(Fe.id&&fe===0&&!v.z&&(me=v.y,Xe=me+(4-(me&3)&3),J.X(R)>Xe&&Fe.E(j.py(),p.a([J.X(R)-Xe],K))),me=v,me.Q==null&&(me.Q=R))),G.push(Ie.bc()),mt.pop();case 3:++fe,n=2;break;case 4:return E.e6(null,i);case 1:return E.e5(f,i)}});return E.e7(gt,i)},aZ:function(){var n=0,i=E.ec(X.H),a=1,f,g=this,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me,Ie,Xe,Fe,mt,at,wt,gt,pt=E.ee(function(bn,tn){for(bn===1&&(f=tn,n=a);;)switch(n){case 0:at=g.b,wt=at.c,w.d.si(wt,0),wt.push("images"),K=g.a.ch,Q=K.b,ne=at.dy,ie=X.M,fe=X.y,me=at.k1,K=K.a,Ie=K.length,Xe=0;case 2:if(!(Xe<Q)){n=4;break}if(Fe=Xe>=Ie,v=Fe?null:K[Xe],v==null){n=3;break}wt.push(w.c.l(Xe)),mt=new ze.eX(at.O()),S=new ze.jy(g,mt),R=null;try{R=S.$1(v)}catch(Sn){if(Fe=p.E(Sn),fe.b(Fe))k=Fe,at.k(j.mt(),p.a([k],ie),"uri");else throw Sn}D=null,n=R!=null?5:6;break;case 5:return a=8,n=11,E.cV(we.td(R),pt);case 11:D=tn,Fe=D,w.d.F(me,Fe.a)||at.E(j.pC(),p.a([D.a],ie)),a=1,n=10;break;case 8:if(a=7,gt=f,Fe=p.E(gt),Fe instanceof we.dw)at.R(j.pF());else if(Fe instanceof we.dv)at.R(j.pE());else if(Fe instanceof we.aP)V=Fe,at.E(j.pz(),p.a([V],ie));else if(fe.b(Fe))G=Fe,at.k(j.mt(),p.a([G],ie),"uri");else throw gt;n=10;break;case 7:n=1;break;case 10:D!=null&&(mt.b=D.a,v.y!=null&&v.y!==D.a&&at.E(j.pB(),p.a([D.a,v.y],ie)),Fe=D.d,Fe!==0&&(Fe&Fe-1)>>>0==0?(Fe=D.e,Fe=!(Fe!==0&&(Fe&Fe-1)>>>0==0)):Fe=!0,Fe&&at.E(j.pD(),p.a([D.d,D.e],ie)),Fe=D,(Fe.f===w.y||Fe.r===w.z||D.y||D.x)&&at.R(j.pA()),v.cx=D,mt.f=D);case 6:ne.push(mt.bc()),wt.pop();case 3:++Xe,n=2;break;case 4:return E.e6(null,i);case 1:return E.e5(f,i)}});return E.e7(pt,i)}},ze.jx.prototype={$1:function(n){var i,a,f,g=this;if(n.a.a===0){if(i=n.x,i!=null)return a=g.b,a.c=w.aF,a.e=i.l(0),g.a.c.$1(i);if(i=n.Q,i!=null)return g.b.c=w.aE,i;if(i=g.a,a=i.b,a.id&&g.c===0&&!n.z)return g.b.c=w.dA,f=i.c.$0(),f==null&&a.R(j.q4()),f}return null},$S:64},ze.jy.prototype={$1:function(n){var i,a,f=this;if(n.a.a===0){if(i=n.z,i!=null)return a=f.b,a.c=w.aF,a.e=i.l(0),f.a.d.$1(i);if(i=n.Q,i!=null&&n.y!=null)return f.b.c=w.aE,E.mI(p.a([i],X.d),X.w);if(n.ch!=null&&(f.b.c=w.dz,n.ew(),i=n.Q,i!=null))return E.mI(p.a([i],X.d),X.w)}return null},$S:65},Ce.mq.prototype={$2:function(n,i){var a,f,g,v,S,R,k,D,V=Ce.lX(i);if((V==null?null:V.dx)!=null&&(V=this.a,a=V.c,w.d.si(a,0),a.push("accessors"),a.push(w.c.l(n)),f=i.dx.ge3(),f!=null))for(a=f.length,g=i.Q,v=X.M,S=0,R=-1,k=0;k<a;++k,R=D)D=f[k],R!==-1&&D<=R&&V.k(j.pt(),p.a([S,D,R],v),"sparse"),D>=g&&V.k(j.ps(),p.a([S,D,g],v),"sparse"),++S},$S:66},Ce.mr.prototype={$1:function(n){return n.cx===0},$S:3},Ce.ms.prototype={$2:function(n,i){var a,f,g,v,S,R,k,D,V=this,G=i.fr,K=i.cx,Q=new Array(K);for(Q.fixed$length=Array,a=p.a(Q,X.fK),Q=new Array(K),Q.fixed$length=Array,f=p.a(Q,X.e2),Q=X.hc,v=i.dx,S=0;;){if(!(S<K)){g=!1;break}if(R=Ce.lX(v.j(0,"JOINTS_"+S)),k=Ce.lX(v.j(0,"WEIGHTS_"+S)),(R==null?null:R.Q)===G?D=(k==null?null:k.Q)!==G:D=!0,D){g=!0;break}D=Q.a(R).ac(),a[S]=new E.aB(D.a(),p.r(D).h("aB<1>")),D=k.bf(),f[S]=new E.aB(D.a(),p.r(D).h("aB<1>")),++S}g||(K=V.b,Q=K.c,Q.push(w.c.l(n)),Q.push("attributes"),v=V.c,w.d.K(v,a),w.d.K(v,f),K=K.O(),v=V.a,V.d.push(new Ce.ey(a,f,v.b-1,v.a,K,E.aR(X.e))),Q.pop(),Q.pop())},$S:20},Ce.lZ.prototype={$1:function(n){return n.gq()==null},$S:67},Ce.ey.prototype={dR:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie=this;for(i=ie.a,a=i.length,f=ie.b,g=ie.c,v=ie.e,S=X.M,R=ie.Q,k=ie.d,D=0;D<a;++D){if(V=i[D].gq(),V==null){ie.x=!0;return}if(V>g){G=j.pp(),K=v+"/JOINTS_"+D,n.k(G,p.a([ie.f,ie.r,V,g,k],S),K);continue}Q=f[D].gq(),Q!==0?(R.B(0,V)?ne=!0:(G=j.po(),K=v+"/JOINTS_"+D,n.k(G,p.a([ie.f,ie.r,V],S),K),ne=!1),Q<0?(G=j.pu(),K=v+"/WEIGHTS_"+D,n.k(G,p.a([ie.f,ie.r,Q],S),K)):ne&&(G=ie.y,K=j.nr(),K[0]=G+Q,ie.y=K[0],ie.z+=2e-7)):V!==0&&(G=j.pq(),K=v+"/JOINTS_"+D,n.k(G,p.a([ie.f,ie.r,V],S),K))}if(++ie.r==4){if(Math.abs(ie.y-1)>ie.z)for(D=0;D<a;++D)i=j.pv(),f=v+"/WEIGHTS_"+D,g=ie.f,n.k(i,p.a([g-3,g,ie.y],S),f);R.cz(0),ie.y=ie.z=ie.r=0}++ie.f}},W.bx.prototype={l:function(n){return this.b}},W.ic.prototype={},W.fZ.prototype={},W.h8.prototype={$1:function(n){return"Actual Data URI encoded data length "+p.b(n[0])+" is not equal to the declared buffer byteLength "+p.b(n[1])+"."},$S:0},W.h6.prototype={$1:function(n){return"Actual data length "+p.b(n[0])+" is less than the declared buffer byteLength "+p.b(n[1])+"."},$S:0},W.h5.prototype={$1:function(n){return"GLB-stored BIN chunk contains "+p.b(n[0])+" extra padding byte(s)."},$S:0},W.hd.prototype={$1:function(n){return"Declared minimum value for this component ("+p.b(n[0])+") does not match actual minimum ("+p.b(n[1])+")."},$S:0},W.ha.prototype={$1:function(n){return"Declared maximum value for this component ("+p.b(n[0])+") does not match actual maximum ("+p.b(n[1])+")."},$S:0},W.hb.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) less than declared minimum value "+p.b(n[1])+"."},$S:0},W.h9.prototype={$1:function(n){return"Accessor contains "+p.b(n[0])+" element(s) greater than declared maximum value "+p.b(n[1])+"."},$S:0},W.hm.prototype={$1:function(n){return"Vector3 at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},W.ho.prototype={$1:function(n){return"Vector3 with sign at accessor indices "+p.b(n[0])+".."+p.b(n[1])+" has invalid w component: "+p.b(n[2])+". Must be 1.0 or -1.0."},$S:0},W.hf.prototype={$1:function(n){return"Animation sampler output accessor element at indices "+p.b(n[0])+".."+p.b(n[1])+" is not of unit length: "+p.b(n[2])+"."},$S:0},W.hl.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is not clamped to 0..1 range: "+p.b(n[1])+"."},$S:0},W.he.prototype={$1:function(n){return"Accessor element at index "+p.b(n[0])+" is "+p.b(n[1])+"."},$S:0},W.hk.prototype={$1:function(n){return"Indices accessor element at index "+p.b(n[0])+" has value "+p.b(n[1])+" that is greater than the maximum vertex index available ("+p.b(n[2])+")."},$S:0},W.hi.prototype={$1:function(n){return"Indices accessor contains "+p.b(n[0])+" degenerate triangles (out of "+p.b(n[1])+")."},$S:0},W.hj.prototype={$1:function(n){return"Indices accessor contains primitive restart value ("+p.b(n[0])+") at index "+p.b(n[1])+"."},$S:0},W.hh.prototype={$1:function(n){return Nt.m+p.b(n[0])+" is negative: "+p.b(n[1])+"."},$S:0},W.hg.prototype={$1:function(n){return Nt.m+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},W.hr.prototype={$1:function(n){return Nt.c+p.b(n[0])+" is less than or equal to previous: "+p.b(n[1])+" <= "+p.b(n[2])+"."},$S:0},W.hq.prototype={$1:function(n){return Nt.c+p.b(n[0])+" is greater than or equal to the number of accessor elements: "+p.b(n[1])+" >= "+p.b(n[2])+"."},$S:0},W.hp.prototype={$1:function(n){return"Matrix element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") contains invalid value: "+p.b(n[2])+"."},$S:0},W.hv.prototype={$1:function(n){return"Image data is invalid. "+p.b(n[0])},$S:0},W.hu.prototype={$1:function(n){return"Recognized image format "+("'"+p.b(n[0])+"'")+" does not match declared image format "+("'"+p.b(n[1])+"'")+"."},$S:0},W.h2.prototype={$1:function(n){return"Unexpected end of image stream."},$S:0},W.h3.prototype={$1:function(n){return"Image format not recognized."},$S:0},W.h4.prototype={$1:function(n){return"'"+p.b(n[0])+"' MIME type requires an extension."},$S:0},W.ht.prototype={$1:function(n){return"Image has non-power-of-two dimensions: "+p.b(n[0])+"x"+p.b(n[1])+"."},$S:0},W.hs.prototype={$1:function(n){return"Image contains unsupported features like non-default colorspace information, non-square pixels, or animation."},$S:0},W.h7.prototype={$1:function(n){return"Data URI is used in GLB container."},$S:0},W.hn.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is greater than the maximum joint index ("+p.b(n[3])+") set by skin "+p.b(n[4])+"."},$S:0},W.hc.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has value "+p.b(n[2])+" that is already in use for the vertex."},$S:0},W.h1.prototype={$1:function(n){return"Weights accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") has negative value "+p.b(n[2])+"."},$S:0},W.h_.prototype={$1:function(n){return"Weights accessor elements (at indices "+p.b(n[0])+".."+p.b(n[1])+") have non-normalized sum: "+p.b(n[2])+"."},$S:0},W.h0.prototype={$1:function(n){return"Joints accessor element at index "+p.b(n[0])+" (component index "+p.b(n[1])+") is used with zero weight but has non-zero value ("+p.b(n[2])+")."},$S:0},W.ia.prototype={},W.ib.prototype={$1:function(n){return J.ag(n[0])},$S:0},W.jA.prototype={},W.jK.prototype={$1:function(n){return"Invalid array length "+p.b(n[0])+". Valid lengths are: "+J.bl(X.Y.a(n[1]),W.oT(),X.X).l(0)+"."},$S:0},W.jL.prototype={$1:function(n){var i=n[0];return"Type mismatch. Array element "+p.b(typeof i=="string"?"'"+i+"'":J.ag(i))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jQ.prototype={$1:function(n){return"Duplicate element."},$S:0},W.jO.prototype={$1:function(n){return"Index must be a non-negative integer."},$S:0},W.jI.prototype={$1:function(n){return"Invalid JSON data. Parser output: "+p.b(n[0])},$S:0},W.jE.prototype={$1:function(n){return"Invalid URI "+("'"+p.b(n[0])+"'")+`. Parser output:
`+p.b(n[1])},$S:0},W.jM.prototype={$1:function(n){return"Entity cannot be empty."},$S:0},W.jF.prototype={$1:function(n){return n.toString,"Exactly one of "+new p.a8(n,W.d0(),p.U(n).h("a8<1,f*>")).l(0)+" properties must be defined."},$S:0},W.jP.prototype={$1:function(n){return"Value "+("'"+p.b(n[0])+"'")+" does not match regexp pattern "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jB.prototype={$1:function(n){var i=n[0];return"Type mismatch. Property value "+p.b(typeof i=="string"?"'"+i+"'":J.ag(i))+" is not a "+("'"+p.b(n[1])+"'")+"."},$S:0},W.jJ.prototype={$1:function(n){var i=n[0];return"Invalid value "+p.b(typeof i=="string"?"'"+i+"'":J.ag(i))+". Valid values are "+J.bl(X.Y.a(n[1]),W.oT(),X.X).l(0)+"."},$S:0},W.jD.prototype={$1:function(n){return"Value "+p.b(n[0])+" is out of range."},$S:0},W.jG.prototype={$1:function(n){return"Value "+p.b(n[0])+" is not a multiple of "+p.b(n[1])+"."},$S:0},W.jC.prototype={$1:function(n){return"Property "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},W.jN.prototype={$1:function(n){return"Unexpected property."},$S:0},W.jH.prototype={$1:function(n){return"Dependency failed. "+("'"+p.b(n[0])+"'")+" must be defined."},$S:0},W.jR.prototype={},W.kp.prototype={$1:function(n){return"Unknown glTF major asset version: "+p.b(n[0])+"."},$S:0},W.ko.prototype={$1:function(n){return"Unknown glTF minor asset version: "+p.b(n[0])+"."},$S:0},W.ke.prototype={$1:function(n){return"Asset minVersion "+("'"+p.b(n[0])+"'")+" is greater than version "+("'"+p.b(n[1])+"'")+"."},$S:0},W.kc.prototype={$1:function(n){return"Invalid value "+p.b(n[0])+" for GL type "+("'"+p.b(n[1])+"'")+"."},$S:0},W.kd.prototype={$1:function(n){return"Integer value is written with fractional part: "+p.b(n[0])+"."},$S:0},W.kb.prototype={$1:function(n){return"Only (u)byte and (u)short accessors can be normalized."},$S:0},W.k9.prototype={$1:function(n){return"Offset "+p.b(n[0])+" is not a multiple of componentType length "+p.b(n[1])+"."},$S:0},W.ka.prototype={$1:function(n){return"Matrix accessors must be aligned to 4-byte boundaries."},$S:0},W.kk.prototype={$1:function(n){return"Sparse accessor overrides more elements ("+p.b(n[0])+") than the base accessor contains ("+p.b(n[1])+")."},$S:0},W.kl.prototype={$1:function(n){return"Animated TRS properties will not affect a skinned mesh."},$S:0},W.k8.prototype={$1:function(n){return"Buffer's Data URI MIME-Type must be 'application/octet-stream' or 'application/gltf-buffer'. Found "+("'"+p.b(n[0])+"'")+" instead."},$S:0},W.k7.prototype={$1:function(n){return"Buffer view's byteStride ("+p.b(n[0])+") is greater than byteLength ("+p.b(n[1])+")."},$S:0},W.k6.prototype={$1:function(n){return"Only buffer views with raw vertex data can have byteStride."},$S:0},W.k5.prototype={$1:function(n){return"xmag and ymag must not be zero."},$S:0},W.k3.prototype={$1:function(n){return"yfov should be less than Pi."},$S:0},W.k2.prototype={$1:function(n){return"zfar must be greater than znear."},$S:0},W.k0.prototype={$1:function(n){return"Alpha cutoff is supported only for 'MASK' alpha mode."},$S:0},W.jV.prototype={$1:function(n){return"Invalid attribute name."},$S:0},W.kz.prototype={$1:function(n){return"All primitives must have the same number of morph targets."},$S:0},W.ky.prototype={$1:function(n){return"All primitives should contain the same number of 'JOINTS' and 'WEIGHTS' attribute sets."},$S:0},W.k_.prototype={$1:function(n){return"No POSITION attribute found."},$S:0},W.jX.prototype={$1:function(n){return"Indices for indexed attribute semantic "+("'"+p.b(n[0])+"'")+" must start with 0 and be continuous. Total expected indices: "+p.b(n[1])+", total provided indices: "+p.b(n[2])+"."},$S:0},W.jZ.prototype={$1:function(n){return"TANGENT attribute without NORMAL found."},$S:0},W.jW.prototype={$1:function(n){return"Number of JOINTS attribute semantics ("+p.b(n[0])+") does not match the number of WEIGHTS ("+p.b(n[1])+")."},$S:0},W.jY.prototype={$1:function(n){return"TANGENT attribute defined for POINTS rendering mode."},$S:0},W.kx.prototype={$1:function(n){return"The length of weights array ("+p.b(n[0])+Nt.p+p.b(n[1])+")."},$S:0},W.kv.prototype={$1:function(n){return"A node can have either a matrix or any combination of translation/rotation/scale (TRS) properties."},$S:0},W.kq.prototype={$1:function(n){return"Do not specify default transform matrix."},$S:0},W.kf.prototype={$1:function(n){return"Matrix must be decomposable to TRS."},$S:0},W.kw.prototype={$1:function(n){return"Rotation quaternion must be normalized."},$S:0},W.kr.prototype={$1:function(n){return"Unused extension "+("'"+p.b(n[0])+"'")+" cannot be required."},$S:0},W.ks.prototype={$1:function(n){return"Extension "+("'"+p.b(n[0])+"'")+" cannot be optional."},$S:0},W.kt.prototype={$1:function(n){return"Extension uses unreserved extension prefix "+("'"+p.b(n[0])+"'")+"."},$S:0},W.ku.prototype={$1:function(n){return"Extension name has invalid format."},$S:0},W.kj.prototype={$1:function(n){return"Empty node encountered."},$S:0},W.ki.prototype={$1:function(n){return"Node with a skinned mesh is not root. Parent transforms will not affect a skinned mesh."},$S:0},W.kh.prototype={$1:function(n){return"Local transforms will not affect a skinned mesh."},$S:0},W.kg.prototype={$1:function(n){return"A node with a skinned mesh is used in a scene that does not contain joint nodes."},$S:0},W.kn.prototype={$1:function(n){return"Joints do not have a common root."},$S:0},W.km.prototype={$1:function(n){return"Skeleton node is not a common root."},$S:0},W.k1.prototype={$1:function(n){return"Non-relative URI found: "+("'"+p.b(n[0])+"'")+"."},$S:0},W.jT.prototype={$1:function(n){return"This extension may be incompatible with other extensions for the object."},$S:0},W.jS.prototype={$1:function(n){return"Prefer JSON Objects for extras."},$S:0},W.k4.prototype={$1:function(n){return"This property should not be defined as it will not be used."},$S:0},W.jU.prototype={$1:function(n){return"outerConeAngle ("+p.b(n[1])+") is less than or equal to innerConeAngle ("+p.b(n[0])+")."},$S:0},W.ir.prototype={},W.j0.prototype={$1:function(n){return"Accessor's total byteOffset "+p.b(n[0])+" isn't a multiple of componentType length "+p.b(n[1])+"."},$S:0},W.j5.prototype={$1:function(n){return"Referenced bufferView's byteStride value "+p.b(n[0])+" is less than accessor element's length "+p.b(n[1])+"."},$S:0},W.iQ.prototype={$1:function(n){return"Accessor (offset: "+p.b(n[0])+", length: "+p.b(n[1])+") does not fit referenced bufferView ["+p.b(n[2])+"] length "+p.b(n[3])+"."},$S:0},W.iC.prototype={$1:function(n){return"Override of previously set accessor usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},W.j6.prototype={$1:function(n){return"Animation channel has the same target as channel "+p.b(n[0])+"."},$S:0},W.iy.prototype={$1:function(n){return"Animation channel cannot target TRS properties of a node with defined matrix."},$S:0},W.ix.prototype={$1:function(n){return"Animation channel cannot target WEIGHTS when mesh does not have morph targets."},$S:0},W.iA.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for animation input accessor."},$S:0},W.iB.prototype={$1:function(n){return"Invalid Animation sampler input accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+"."},$S:0},W.iw.prototype={$1:function(n){return"Invalid animation sampler output accessor format "+("'"+p.b(n[0])+"'")+" for path "+("'"+p.b(n[2])+"'")+". Must be one of "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+"."},$S:0},W.iz.prototype={$1:function(n){return"Animation sampler output accessor with "+("'"+p.b(n[0])+"'")+" interpolation must have at least "+p.b(n[1])+" elements. Got "+p.b(n[2])+"."},$S:0},W.iv.prototype={$1:function(n){return"Animation sampler output accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},W.iF.prototype={$1:function(n){return"Buffer refers to an unresolved GLB binary chunk."},$S:0},W.iD.prototype={$1:function(n){return"BufferView does not fit buffer ("+p.b(n[0])+") byteLength ("+p.b(n[1])+")."},$S:0},W.j4.prototype={$1:function(n){return"Override of previously set bufferView target or usage. Initial: "+("'"+p.b(n[0])+"'")+", new: "+("'"+p.b(n[1])+"'")+"."},$S:0},W.iE.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views containing image data."},$S:0},W.iX.prototype={$1:function(n){return"Accessor of count "+p.b(n[0])+" expected. Found "+p.b(n[1])+"."},$S:0},W.iI.prototype={$1:function(n){return"Invalid accessor format "+("'"+p.b(n[0])+"'")+" for this attribute semantic. Must be one of "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+"."},$S:0},W.iJ.prototype={$1:function(n){return"accessor.min and accessor.max must be defined for POSITION attribute accessor."},$S:0},W.iG.prototype={$1:function(n){return"bufferView.byteStride must be defined when two or more accessors use the same buffer view."},$S:0},W.iH.prototype={$1:function(n){return"Vertex attribute data must be aligned to 4-byte boundaries."},$S:0},W.iP.prototype={$1:function(n){return"bufferView.byteStride must not be defined for indices accessor."},$S:0},W.iO.prototype={$1:function(n){return"Invalid indices accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+". "},$S:0},W.iN.prototype={$1:function(n){return"Number of vertices or indices ("+p.b(n[0])+") is not compatible with used drawing mode ("+("'"+p.b(n[1])+"'")+")."},$S:0},W.iM.prototype={$1:function(n){return"Material is incompatible with mesh primitive: Texture binding "+("'"+p.b(n[0])+"'")+" needs 'TEXCOORD_"+p.b(n[1])+"' attribute."},$S:0},W.iR.prototype={$1:function(n){return"All accessors of the same primitive must have the same count."},$S:0},W.iL.prototype={$1:function(n){return"No base accessor for this attribute semantic."},$S:0},W.iK.prototype={$1:function(n){return"Base accessor has different count."},$S:0},W.j3.prototype={$1:function(n){return"Node is a part of a node loop."},$S:0},W.iS.prototype={$1:function(n){return"Value overrides parent of node "+p.b(n[0])+"."},$S:0},W.iV.prototype={$1:function(n){var i="The length of weights array ("+p.b(n[0])+Nt.p,a=n[1];return i+p.b(a==null?0:a)+")."},$S:0},W.iU.prototype={$1:function(n){return"Node has skin defined, but mesh has no joints data."},$S:0},W.iT.prototype={$1:function(n){return"Node uses skinned mesh, but has no skin defined."},$S:0},W.iW.prototype={$1:function(n){return"Node "+p.b(n[0])+" is not a root node."},$S:0},W.iY.prototype={$1:function(n){return"Invalid IBM accessor format "+("'"+p.b(n[0])+"'")+". Must be one of "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+". "},$S:0},W.iZ.prototype={$1:function(n){return"bufferView.byteStride must not be defined for buffer views used by inverse bind matrices accessors."},$S:0},W.iu.prototype={$1:function(n){return"Invalid MIME type "+("'"+p.b(n[0])+"'")+" for the texture source. Valid MIME types are "+J.bl(X.Y.a(n[1]),W.d0(),X.X).l(0)+"."},$S:0},W.it.prototype={$1:function(n){return"Extension is not declared in extensionsUsed."},$S:0},W.is.prototype={$1:function(n){return"Unexpected location for this extension."},$S:0},W.j_.prototype={$1:function(n){return"Unresolved reference: "+p.b(n[0])+"."},$S:0},W.j1.prototype={$1:function(n){return"Cannot validate an extension as it is not supported by the validator: "+("'"+p.b(n[0])+"'")+"."},$S:0},W.j2.prototype={$1:function(n){return"This object may be unused."},$S:0},W.hy.prototype={},W.hE.prototype={$1:function(n){return"Invalid GLB magic value ("+p.b(n[0])+")."},$S:0},W.hD.prototype={$1:function(n){return"Invalid GLB version value "+p.b(n[0])+"."},$S:0},W.hC.prototype={$1:function(n){return"Declared GLB length ("+p.b(n[0])+") is too small."},$S:0},W.hM.prototype={$1:function(n){return"Length of "+p.b(n[0])+" chunk is not aligned to 4-byte boundaries."},$S:0},W.hA.prototype={$1:function(n){return"Declared length ("+p.b(n[0])+") does not match GLB length ("+p.b(n[1])+")."},$S:0},W.hL.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") length ("+p.b(n[1])+") does not fit total GLB length."},$S:0},W.hH.prototype={$1:function(n){return"Chunk ("+p.b(n[0])+") cannot have zero length."},$S:0},W.hI.prototype={$1:function(n){return"Chunk of type "+p.b(n[0])+" has already been used."},$S:0},W.hB.prototype={$1:function(n){return"Unexpected end of chunk header."},$S:0},W.hz.prototype={$1:function(n){return"Unexpected end of chunk data."},$S:0},W.hF.prototype={$1:function(n){return"Unexpected end of header."},$S:0},W.hK.prototype={$1:function(n){return"First chunk must be of JSON type. Found "+p.b(n[0])+" instead."},$S:0},W.hJ.prototype={$1:function(n){return"BIN chunk must be the second chunk."},$S:0},W.hG.prototype={$1:function(n){return"Unknown GLB chunk type: "+p.b(n[0])+"."},$S:0},W.cA.prototype={gba:function(){var n=J.rI(this.a.c.$1(this.e));return n},gG:function(n){return w.a.gG(this.l(0))},N:function(n,i){return i==null?!1:i instanceof W.cA&&i.l(0)===this.l(0)},l:function(n){var i=this,a=i.c;return a!=null&&a.length!==0?p.b(a)+": "+i.gba():(a=i.d,a!=null?"@"+p.b(a)+": "+i.gba():i.gba())}},Ve.c0.prototype={v:function(n,i){var a=this.d,f=this.e=n.ch.j(0,a);a!==-1&&(f==null?i.k(j.N(),p.a([a],X.M),"source"):f.a$=!0)},bY:function(n,i){var a,f=this.e;f=f==null?null:f.cx,a=f==null?null:f.a,a!=null&&a!=="image/webp"&&i.k(j.ni(),p.a([a,w.cC],X.M),"source")},$ick:1},Le.bs.prototype={v:function(n,i){var a,f,g=i.c;g.push("lights"),a=this.d,f=J.eA(g.slice(0),p.U(g).c),i.y.m(0,a,f),a.a9(new Le.iq(i,n)),g.pop()}},Le.iq.prototype={$2:function(n,i){var a=this.a.c;a.push(w.c.l(n)),a.pop()},$S:69},Le.b7.prototype={},Le.c6.prototype={},Le.c7.prototype={v:function(n,i){var a,f,g=n.a.j(0,"KHR_lights_punctual");g instanceof Le.bs?(a=this.d,f=this.e=g.d.j(0,a),a!==-1&&(f==null?i.k(j.N(),p.a([a],X.M),"light"):f.a$=!0)):i.E(j.d1(),p.a(["/extensions/KHR_lights_punctual"],X.M))}},Ue.c8.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("clearcoatTexture"),f.v(n,i),a.pop()),f=this.r,f!=null&&(a=i.c,a.push("clearcoatRoughnessTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("clearcoatNormalTexture"),f.v(n,i),a.pop())}},Be.c9.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("diffuseTexture"),f.v(n,i),a.pop()),f=this.x,f!=null&&(a=i.c,a.push("specularGlossinessTexture"),f.v(n,i),a.pop())}},$e.ca.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("sheenColorTexture"),f.v(n,i),a.pop()),f=this.r,f!=null&&(a=i.c,a.push("sheenRoughnessTexture"),f.v(n,i),a.pop())}},Ue.cb.prototype={v:function(n,i){var a,f=this.e;f!=null&&(a=i.c,a.push("transmissionTexture"),f.v(n,i),a.pop())}},be.cc.prototype={},Ye.cd.prototype={v:function(n,i){var a,f;for(a=i.e,f=this;f!=null;)if(f=a.j(0,f),f instanceof we.aS){f.dx.m(0,i.O(),this.r);break}}},Ve.T.prototype={},Ve.a4.prototype={},Ve.c1.prototype={gG:function(n){var i=J.aL(this.a),a=J.aL(this.b);return Be.oG(Be.fy(Be.fy(0,w.c.gG(i)),w.c.gG(a)))},N:function(n,i){return i==null?!1:i instanceof Ve.c1&&this.b==i.b&&this.a==i.a}},Ve.ce.prototype={},Ve.eY.prototype={},Be.d9.prototype={bU:function(){var n=this,i=n.d=n.c.bM(n.gdn(),n.gdr(),n.gcg()),a=n.dy;return a.e=i.gee(),a.f=i.geh(),a.r=new Be.hP(n),n.e.a},aX:function(){this.d.I();var n=this.e;n.a.a===0&&n.T(new De.as("model/gltf-binary",null,this.fx))},dq:function(n){var i,a,f,g,v,S,R,k,D,V,G,K,Q,ne,ie,fe,me=this,Ie="model/gltf-binary",Xe="0";for(me.d.aK(),i=J.M(n),a=X.f,f=X.G,g=X.M,v=me.a,S=0,R=0;S!==i.gi(n);)switch(me.r){case 0:if(k=i.gi(n),D=me.x,R=Math.min(k-S,12-D),k=D+R,me.x=k,w.j.a0(v,D,k,n,S),S+=R,me.y=R,me.x!==12)break;if(V=me.b.getUint32(0,!0),V!==1179937895){me.f.a_(j.pK(),p.a([V],g),0),me.d.I(),i=me.e,i.a.a===0&&i.T(new De.as(Ie,null,me.fx));return}if(G=me.b.getUint32(4,!0),G!==2){me.f.a_(j.pL(),p.a([G],g),4),me.d.I(),i=me.e,i.a.a===0&&i.T(new De.as(Ie,null,me.fx));return}k=me.z=me.b.getUint32(8,!0),k<=me.y&&me.f.a_(j.pN(),p.a([k],g),8),me.r=1,me.x=0;break;case 1:if(k=i.gi(n),D=me.x,R=Math.min(k-S,8-D),k=D+R,me.x=k,w.j.a0(v,D,k,n,S),S+=R,me.y+=R,me.x!==8)break;switch(me.ch=me.b.getUint32(0,!0),k=me.b.getUint32(4,!0),me.cx=k,(me.ch&3)!=0&&(D=me.f,K=j.pG(),Q=me.y,D.a_(K,p.a(["0x"+w.a.am(w.c.ap(k,16),8,Xe)],g),Q-8)),me.y+me.ch>me.z&&me.f.a_(j.pH(),p.a(["0x"+w.a.am(w.c.ap(me.cx,16),8,Xe),me.ch],g),me.y-8),me.Q===0&&me.cx!==1313821514&&me.f.a_(j.pS(),p.a(["0x"+w.a.am(w.c.ap(me.cx,16),8,Xe)],g),me.y-8),k=me.cx,k===5130562&&me.Q>1&&!me.fr&&me.f.a_(j.pO(),p.a(["0x"+w.a.am(w.c.ap(k,16),8,Xe)],g),me.y-8),ne=new Be.hN(me),k=me.cx,k){case 1313821514:me.ch===0&&(D=me.f,K=j.pJ(),Q=me.y,D.a_(K,p.a(["0x"+w.a.am(w.c.ap(k,16),8,Xe)],g),Q-8)),ne.$1$seen(me.cy),me.cy=!0;break;case 5130562:ne.$1$seen(me.fr),me.fr=!0;break;default:me.f.a_(j.pT(),p.a(["0x"+w.a.am(w.c.ap(k,16),8,Xe)],g),me.y-8),me.r=4294967295}++me.Q,me.x=0;break;case 1313821514:R=Math.min(i.gi(n)-S,me.ch-me.x),me.db==null&&(k=me.dy,D=me.f,k=new De.cy(new E.an(k,p.r(k).h("an<1>")),new E.ax(new E.C(j.x,a),f)),k.e=D,me.db=k,me.dx=k.bU()),k=me.dy,ie=S+R,D=i.Z(n,S,ie),k.b>=4&&p.a2(k.bl()),K=k.b,(K&1)!=0?k.ak(D):(K&3)==0&&(k=k.aV(),D=new E.cn(D),fe=k.c,fe==null?k.b=k.c=D:(fe.say(D),k.c=D)),k=me.x+=R,me.y+=R,k===me.ch&&(me.dy.a2(),me.r=1,me.x=0),S=ie;break;case 5130562:k=i.gi(n),D=me.ch,R=Math.min(k-S,D-me.x),k=me.fx,k==null&&(k=me.fx=new Uint8Array(D)),D=me.x,K=D+R,me.x=K,w.j.a0(k,D,K,n,S),S+=R,me.y+=R,me.x===me.ch&&(me.r=1,me.x=0);break;case 4294967295:k=i.gi(n),D=me.ch,K=me.x,R=Math.min(k-S,D-K),K+=R,me.x=K,S+=R,me.y+=R,K===D&&(me.r=1,me.x=0);break}me.d.an()},ds:function(){var n,i,a=this;switch(a.r){case 0:a.f.bB(j.pR(),a.y),a.aX();break;case 1:a.x!==0?(a.f.bB(j.pQ(),a.y),a.aX()):(n=a.z,i=a.y,n!==i&&a.f.a_(j.pM(),p.a([n,i],X.M),a.y),n=a.dx,n!=null?n.ao(0,new Be.hO(a),a.gcg(),X.P):a.e.T(new De.as("model/gltf-binary",null,a.fx)));break;default:a.ch>0&&a.f.bB(j.pP(),a.y),a.aX()}},dt:function(n){var i;this.d.I(),i=this.e,i.a.a===0&&i.M(n)},$iet:1},Be.hP.prototype={$0:function(){var n=this.a;(n.dy.b&4)!=0?n.d.an():n.aX()},$S:2},Be.hN.prototype={$1$seen:function(n){var i=this.a;n?(i.f.a_(j.pI(),p.a(["0x"+w.a.am(w.c.ap(i.cx,16),8,"0")],X.M),i.y-8),i.r=4294967295):i.r=i.cx},$0:function(){return this.$1$seen(null)},$S:72},Be.hO.prototype={$1:function(n){var i=this.a,a=n==null?null:n.b;i.e.T(new De.as("model/gltf-binary",a,i.fx))},$S:73},De.as.prototype={},De.hS.prototype={$0:function(){return this.a.b.aK()},$S:1},De.hT.prototype={$0:function(){return this.a.b.an()},$S:1},De.hR.prototype={$0:function(){return this.a.b.I()},$S:74},De.hU.prototype={$1:function(n){var i,a,f,g,v=this,S=null,R=v.a;if(!R.a){if(i=J.M(n),i.gu(n)){R.b.I(),v.b.a2(),v.c.M(w.Z);return}if(a=i.j(n,0),a===103)i=v.b,f=v.d,g=new Uint8Array(12),i=new Be.d9(g,new E.an(i,p.r(i).h("an<1>")),new E.ax(new E.C(j.x,X.f),X.G)),f.id=!0,i.f=f,i.b=p.jm(g.buffer,0,S),i.dy=E.o6(S,S,S,X.w),v.c.T(i),R.a=!0;else if(i=a===123||a===9||a===32||a===10||a===13||a===239,f=v.c,g=v.b,i)f.T(De.t9(new E.an(g,p.r(g).h("an<1>")),v.d)),R.a=!0;else{R.b.I(),g.a2(),f.M(w.Z);return}}v.b.B(0,n)},$S:23},De.cy.prototype={bU:function(){var n=this,i=p.a([],X.M),a=new E.a9("");return n.d=new E.lI(new E.fx(!1),new E.lw(w.a1.gcD().a,new E.fo(new De.hQ(n),i,X.cy),a),a),n.b=n.a.bM(n.gdw(),n.gdA(),n.gdC()),n.c.a},dz:function(n){var i,a,f=this;f.b.aK(),f.f&&(a=J.M(n),a.ga3(n)&&a.j(n,0)===239&&f.e.av(j.fF(),p.a(["BOM found at the beginning of UTF-8 stream."],X.M),!0),f.f=!1);try{f.d.dP(n,0,J.X(n),!1),f.b.an()}catch(g){if(a=p.E(g),a instanceof E.aD)i=a,f.e.av(j.fF(),p.a([i],X.M),!0),f.b.I(),f.c.b3();else throw g}},dD:function(n){var i;this.b.I(),i=this.c,i.a.a===0&&i.M(n)},dB:function(){var n,i,a=this;try{a.d.a2()}catch(f){if(i=p.E(f),i instanceof E.aD)n=i,a.e.av(j.fF(),p.a([n],X.M),!0),a.b.I(),a.c.b3();else throw f}},$iet:1},De.hQ.prototype={$1:function(n){var i,a,f=n[0];if(X.t.b(f))try{a=this.a,i=ye.nI(f,a.e),a.c.T(new De.as("model/gltf+json",i,null))}catch(g){if(p.E(g)instanceof ge.c4)a=this.a,a.b.I(),a.c.b3();else throw g}else a=this.a,a.e.av(j.Z(),p.a([f,"object"],X.M),!0),a.b.I(),a.c.b3()},$S:75},De.db.prototype={l:function(n){return"Invalid data: could not detect glTF format."},$ia3:1},oe.m3.prototype={$2:function(n,i){this.a.$1(n),p.aJ(i)&&i>=0||(this.b.m(0,n,-1),this.c.p(j.fE(),n))},$S:6},oe.m4.prototype={$2:function(n,i){this.a.$1(n),p.aJ(i)&&i>=0||(this.b.m(0,n,-1),this.c.p(j.fE(),n))},$S:6},oe.m5.prototype={$1:function(n){return n.af(0,X.X,X.e)},$S:76},oe.m2.prototype={$0:function(){return p.a([],X.bH)},$S:77},oe.L.prototype={j:function(n,i){return i==null||i<0||i>=this.a.length?null:this.a[i]},m:function(n,i,a){this.a[i]=a},gi:function(n){return this.b},si:function(n,i){throw p.c(E.ab("Changing length is not supported"))},l:function(n){return E.id(this.a,"[","]")},a9:function(n){var i,a,f,g;for(i=this.b,a=this.a,f=0;f<i;++f)g=a[f],g!=null&&n.$2(f,g)}},oe.Y.prototype={aw:function(n){return!0}},oe.f4.prototype={Y:function(n,i,a,f){var g=this,v=g.c,S=v!=null?v.$1(f):f;return v=g.a+S*S,g.a=v,a===2&&(Math.abs(Math.sqrt(v)-1)>.00674&&n.k(j.nb(),p.a([i-2,i,Math.sqrt(g.a)],X.M),g.b),g.a=0),!0}},oe.f5.prototype={Y:function(n,i,a,f){var g=this,v=g.c,S=v!=null?v.$1(f):f;return a===3?S!==1&&S!==-1&&n.k(j.pn(),p.a([i-3,i,S],X.M),g.b):(v=g.a+S*S,g.a=v,a===2&&(Math.abs(Math.sqrt(v)-1)>.00674&&n.k(j.nb(),p.a([i-2,i,Math.sqrt(g.a)],X.M),g.b),g.a=0)),!0}},oe.en.prototype={Y:function(n,i,a,f){return(1<f||0>f)&&n.k(j.pr(),p.a([i,f],X.M),this.a),!0}},Be.kW.prototype={bc:function(){var n,i,a,f,g,v,S,R,k,D,V,G,K=this,Q=X.X,ne=X._,ie=E.a5(Q,ne),fe=K.a;for(fe!=null&&ie.m(0,"uri",fe.l(0)),fe=K.c,n=fe==null,(n?null:fe.a)!=null&&ie.m(0,"mimeType",n?null:fe.a),ie.m(0,"validatorVersion","2.0.0-dev.3.3"),K.d&&ie.m(0,"validatedAt",new E.d5(Date.now(),!1).es().er()),fe=K.b,i=fe.fy,a=E.a5(Q,ne),f=p.a([0,0,0,0],X.V),n=new Array(i.length),n.fixed$length=Array,g=p.a(n,X.j),n=g.length,v=0;v<n;++v)S=i[v],R=S.b,k=R==null,D=(k?S.a.a:R).a,f[D]=f[D]+1,D=S.a,V=S.gba(),k&&(R=D.a),G=E.mF(["code",D.b,"message",V,"severity",R.a],Q,ne),R=S.c,R!=null?G.m(0,"pointer",R):(R=S.d,R!=null&&G.m(0,"offset",R)),g[v]=G;return a.m(0,"numErrors",f[0]),a.m(0,"numWarnings",f[1]),a.m(0,"numInfos",f[2]),a.m(0,"numHints",f[3]),a.m(0,"messages",g),a.m(0,"truncated",fe.z),ie.m(0,"issues",a),Q=K.dm(),Q!=null&&ie.m(0,"info",Q),ie},dm:function(){var n,i,a,f,g,v,S,R,k,D,V=null,G=this.c,K=G==null?V:G.b;if(G=K==null?V:K.x,(G==null?V:G.f)==null)return V;for(n=E.a5(X.X,X._),G=K.x,n.m(0,"version",G.f),i=G.r,i!=null&&n.m(0,"minVersion",i),G=G.e,G!=null&&n.m(0,"generator",G),G=K.d,i=J.M(G),i.ga3(G)&&(G=i.bX(G),n.m(0,"extensionsUsed",E.dh(G,!1,p.r(G).c))),G=K.e,i=J.M(G),i.ga3(G)&&(G=i.bX(G),n.m(0,"extensionsRequired",E.dh(G,!1,p.r(G).c))),G=this.b,i=G.fr,i.gu(i)||n.m(0,"resources",G.fr),n.m(0,"animationCount",K.r.b),n.m(0,"materialCount",K.cx.b),G=K.cy,n.m(0,"hasMorphTargets",G.bC(G,new Be.kY)),i=K.fx,n.m(0,"hasSkins",!i.gu(i)),i=K.fy,n.m(0,"hasTextures",!i.gu(i)),n.m(0,"hasDefaultScene",K.dy!=null),G=new p.a6(G,G.gi(G),G.$ti.h("a6<m.E>")),a=0,f=0,g=0,v=0,S=0,R=0;G.n();)if(k=G.d,i=k.x,i!=null)for(a+=i.b,i=new p.a6(i,i.gi(i),i.$ti.h("a6<m.E>"));i.n();)k=i.d,D=k.fr,D!==-1&&(S+=D),R+=k.geu(),f=Math.max(f,k.dx.a),g=Math.max(g,k.db),v=Math.max(v,k.cx*4);return n.m(0,"drawCallCount",a),n.m(0,"totalVertexCount",S),n.m(0,"totalTriangleCount",R),n.m(0,"maxUVs",g),n.m(0,"maxInfluences",v),n.m(0,"maxAttributes",f),n}},Be.kY.prototype={$1:function(n){var i=n.x;return i!=null&&i.bC(i,new Be.kX)},$S:78},Be.kX.prototype={$1:function(n){return n.fx!=null},$S:3},Be.m7.prototype={$2:function(n,i){var a=536870911&n+J.aL(i);return a=536870911&a+((524287&a)<<10),a^a>>>6},$S:79},Se.cD.prototype={d_:function(n){var i=n.a,a=this.a;a[15]=i[15],a[14]=i[14],a[13]=i[13],a[12]=i[12],a[11]=i[11],a[10]=i[10],a[9]=i[9],a[8]=i[8],a[7]=i[7],a[6]=i[6],a[5]=i[5],a[4]=i[4],a[3]=i[3],a[2]=i[2],a[1]=i[1],a[0]=i[0]},l:function(n){var i=this;return"[0] "+i.aN(0).l(0)+`
[1] `+i.aN(1).l(0)+`
[2] `+i.aN(2).l(0)+`
[3] `+i.aN(3).l(0)+`
`},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Se.cD?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]&&a[4]===g[4]&&a[5]===g[5]&&a[6]===g[6]&&a[7]===g[7]&&a[8]===g[8]&&a[9]===g[9]&&a[10]===g[10]&&a[11]===g[11]&&a[12]===g[12]&&a[13]===g[13]&&a[14]===g[14]&&a[15]===g[15]):a=!1,a)},gG:function(n){return Be.n0(this.a)},aN:function(n){var i=new Float32Array(4),a=this.a;return i[0]=a[n],i[1]=a[4+n],i[2]=a[8+n],i[3]=a[12+n],new Se.f9(i)},cE:function(){var n=this.a,i=n[0],a=n[5],f=n[1],g=n[4],v=i*a-f*g,S=n[6],R=n[2],k=i*S-R*g,D=n[7],V=n[3],G=i*D-V*g,K=f*S-R*a,Q=f*D-V*a,ne=R*D-V*S;return S=n[8],V=n[9],D=n[10],R=n[11],-(V*ne-D*Q+R*K)*n[12]+(S*ne-D*G+R*k)*n[13]-(S*Q-V*G+R*v)*n[14]+(S*K-V*k+D*v)*n[15]},cJ:function(){var n=this.a,i=0+Math.abs(n[0])+Math.abs(n[1])+Math.abs(n[2])+Math.abs(n[3]),a=i>0?i:0;return i=0+Math.abs(n[4])+Math.abs(n[5])+Math.abs(n[6])+Math.abs(n[7]),i>a&&(a=i),i=0+Math.abs(n[8])+Math.abs(n[9])+Math.abs(n[10])+Math.abs(n[11]),i>a&&(a=i),i=0+Math.abs(n[12])+Math.abs(n[13])+Math.abs(n[14])+Math.abs(n[15]),i>a?i:a},cK:function(){var n=this.a;return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===0&&n[4]===0&&n[5]===1&&n[6]===0&&n[7]===0&&n[8]===0&&n[9]===0&&n[10]===1&&n[11]===0&&n[12]===0&&n[13]===0&&n[14]===0&&n[15]===1}},Se.eW.prototype={gaI:function(){var n=this.a,i=n[0],a=n[1],f=n[2],g=n[3];return i*i+a*a+f*f+g*g},gi:function(n){var i=this.a,a=i[0],f=i[1],g=i[2],v=i[3];return Math.sqrt(a*a+f*f+g*g+v*v)},l:function(n){var i=this.a;return p.b(i[0])+", "+p.b(i[1])+", "+p.b(i[2])+" @ "+p.b(i[3])}},Se.cJ.prototype={bi:function(n,i,a){var f=this.a;f[0]=n,f[1]=i,f[2]=a},l:function(n){var i=this.a;return"["+p.b(i[0])+","+p.b(i[1])+","+p.b(i[2])+"]"},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Se.cJ?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]):a=!1,a)},gG:function(n){return Be.n0(this.a)},gi:function(n){var i=this.a,a=i[0],f=i[1];return i=i[2],Math.sqrt(a*a+f*f+i*i)},gaI:function(){var n=this.a,i=n[0],a=n[1];return n=n[2],i*i+a*a+n*n}},Se.f9.prototype={l:function(n){var i=this.a;return p.b(i[0])+","+p.b(i[1])+","+p.b(i[2])+","+p.b(i[3])},N:function(n,i){var a,f,g;return i==null?!1:(i instanceof Se.f9?(a=this.a,f=a[0],g=i.a,a=f===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]):a=!1,a)},gG:function(n){return Be.n0(this.a)},gi:function(n){var i=this.a,a=i[0],f=i[1],g=i[2];return i=i[3],Math.sqrt(a*a+f*f+g*g+i*i)}},de.bb.prototype={},de.hx.prototype={},de.cP.prototype={},de.mo.prototype={$3:function(n,i,a){var f=a.$1(J.ag(n));return f},$S:80},de.mk.prototype={$2:function(n,i){return new t.Promise(E.cp(new de.mj(n,i,this.a)),X._)},$C:"$2",$R:2,$S:81},de.mj.prototype={$2:function(n,i){de.fB(this.a,this.b).ao(0,new de.mg(n),new de.mh(this.c,i),X.P)},$C:"$2",$R:2,$S:26},de.mg.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},de.mh.prototype={$2:function(n,i){return this.a.$3(n,i,this.b)},$C:"$2",$R:2,$S:15},de.ml.prototype={$2:function(n,i){return new t.Promise(E.cp(new de.mi(n,i,this.a)),X._)},$C:"$2",$R:2,$S:85},de.mi.prototype={$2:function(n,i){de.n5(this.a,this.b).ao(0,new de.me(n),new de.mf(this.c,i),X.P)},$C:"$2",$R:2,$S:26},de.me.prototype={$1:function(n){this.a.$1(E.n2(n))},$S:27},de.mf.prototype={$2:function(n,i){return this.a.$3(n,i,this.b)},$C:"$2",$R:2,$S:15},de.mm.prototype={$0:function(){return"2.0.0-dev.3.3"},$C:"$0",$R:0,$S:86},de.mn.prototype={$0:function(){return E.n2(ge.t4())},$C:"$0",$R:0,$S:4},de.lU.prototype={$1:function(n){var i=new E.C(j.x,X.q),a=new E.ax(i,X.as),f=this.a.$1(J.ag(n));return(f==null?null:J.rv(f))==null?a.M(new E.ak(!1,null,null,"options.externalResourceFunction: Function must return a Promise.")):J.rG(f,E.cp(new de.lV(a)),E.cp(new de.lW(a))),i},$S:87},de.lV.prototype={$1:function(n){var i=this.a;X.a.b(n)?i.T(n):i.M(new E.ak(!1,null,null,"options.externalResourceFunction: Promise must be fulfilled with Uint8Array or rejected."))},$S:24},de.lW.prototype={$1:function(n){return this.a.M(new de.eP(J.ag(n)))},$S:10},de.lS.prototype={$1:function(n){var i,a,f,g=this;return g.a.id&&n==null?g.b.c:(g.c!=null?i=g.d.$1(n):(a=g.e,E.aM(a,"error"),j.x,w.f,f=E.el(a),i=new E.C(j.x,X.q),i.aT(a,f)),i)},$0:function(){return this.$1(null)},$C:"$1",$R:0,$D:function(){return[null]},$S:88},de.lT.prototype={$1:function(n){var i,a,f,g,v=null;return this.a!=null?(i=this.b.$1(n),i=E.tR(i,p.ac(i).c)):(i=this.c,E.aM(i,"error"),a=X.f1,f=new E.bD(v,v,v,v,a),g=E.el(i),f.aQ(i,g),f.aU(),i=new E.an(f,a.h("an<1>"))),i},$S:89},de.eP.prototype={l:function(n){return"Node Exception: "+p.b(this.a)},$ia3:1},function(){var i=J.cz.prototype;i.d1=i.bb,i=J.aF.prototype,i.d2=i.l,i=E.m.prototype,i.d3=i.a0,i=E.dV.prototype,i.d4=i.a2}(),function(){var i=ue._static_1,a=ue._static_0,f=ue._static_2,g=ue._instance_2u,v=ue._instance_0u,S=ue.installInstanceTearOff,R=ue._instance_1i,k=ue._instance_1u;i(E,"vk","tZ",11),i(E,"vl","u_",11),i(E,"vm","u0",11),a(E,"oS","v7",1),f(E,"vn","v0",14),g(E.C.prototype,"gde","aB",14),v(E.cS.prototype,"gdS","a2",50);var D;v(D=E.dA.prototype,"gcm","b_",1),v(D,"gcn","b0",1),S(D=E.cK.prototype,"gee",0,0,null,["$1","$0"],["cQ","aK"],51,0),v(D,"geh","an",1),v(D,"gcm","b_",1),v(D,"gcn","b0",1),R(E.aZ.prototype,"gcA","F",53),f(ge,"vg","rM",91),f(ge,"vf","rL",92),f(ge,"vd","rJ",93),f(ge,"ve","rK",94),k(ge.a0.prototype,"gbP","ed",115),f(ke,"vi","rO",95),f(ke,"vh","rN",96),f(Se,"vj","rP",97),f(de,"vo","rU",98),f(ye,"vp","rT",99),f(Re,"vs","rX",100),f(Re,"vq","rV",101),f(Re,"vr","rW",102),f(Se,"vG","te",103),f(we,"vZ","tu",104),f(we,"w0","tE",105),f(we,"w_","tD",106),f(we,"p3","tC",107),f(we,"bi","tT",108),f(be,"w1","tx",109),f(ye,"w2","tB",110),f(Se,"w3","tO",111),f(Ue,"w4","tP",112),f(Ce,"w5","tQ",113),f($e,"w7","tU",114),i(W,"d0","v3",28),i(W,"oT","uZ",28),i(Ve,"vz","uN",12),f(Ve,"vy","t8",117),f(Le,"vN","tk",118),f(Le,"vO","tl",119),f(Le,"vP","tm",120),f(Ue,"vQ","tn",121),f(Be,"vR","to",122),f($e,"vS","tp",123),f(Ue,"vT","tq",124),f(be,"vU","tr",125),f(Ye,"vW","ts",84),k(D=Be.d9.prototype,"gdn","dq",25),v(D,"gdr","ds",1),k(D,"gcg","dt",10),k(D=De.cy.prototype,"gdw","dz",25),k(D,"gdC","dD",10),v(D,"gdA","dB",1),i($e,"vV","uO",12)}(),function(){var i=ue.mixin,a=ue.inherit,f=ue.inheritMany;a(E.e,null),f(E.e,[p.mD,J.cz,J.aC,E.i,p.d3,E.I,p.bZ,E.F,E.dN,p.a6,E.H,p.d6,p.d8,p.f7,p.cG,E.dj,p.cv,p.ig,p.kJ,p.eS,p.d7,p.dS,p.lA,p.j7,p.df,p.ih,p.ly,p.aI,p.fj,p.dX,E.lG,E.fc,E.cO,E.aB,E.ff,E.cM,E.C,E.fd,E.aW,E.f0,E.cS,E.fs,E.fe,E.cK,E.fn,E.fh,E.lh,E.fq,E.ek,E.lJ,E.dI,E.cQ,E.lx,E.dM,E.m,E.fw,E.kI,E.eo,E.le,E.em,E.fx,E.d5,E.eT,E.ds,E.dD,E.aD,E.cC,E.k,E.fr,E.a9,E.e2,E.kL,E.fp,ye.fk,oe.Y,ye.kQ,ye.bU,ye.bS,ye.u,ge.kV,ge.j,ge.c4,we.dK,we.dy,we.cL,we.c2,we.c3,we.i5,we.dw,we.dv,we.aP,ze.cR,ze.eX,ze.jw,Ce.ey,W.bx,W.ic,W.cA,Ve.T,Ve.a4,Ve.c1,Ve.ce,Ve.eY,Be.d9,De.as,De.cy,De.db,Be.kW,Se.cD,Se.eW,Se.cJ,Se.f9,de.eP]),f(J.cz,[J.dd,J.cB,J.aF,J.p,J.c5,J.br,p.dm]),f(J.aF,[J.eU,J.cl,J.aQ,de.bb,de.hx,de.cP]),a(J.ii,J.p),f(J.c5,[J.de,J.eB]),f(E.i,[p.bE,p.n,p.b9,p.l_,p.bc,p.dz,E.dc]),f(p.bE,[p.bX,p.e4]),a(p.dC,p.bX),a(p.dx,p.e4),a(p.b3,p.dx),a(E.di,E.I),f(E.di,[p.bY,p.aG,E.dG,E.fl]),f(p.bZ,[p.fQ,p.jt,p.f1,p.im,p.m9,p.ma,p.mb,E.lb,E.la,E.lc,E.ld,E.lH,E.lK,E.lL,E.m_,E.li,E.lq,E.lm,E.ln,E.lo,E.lk,E.lp,E.lj,E.lt,E.lu,E.ls,E.lr,E.kC,E.kD,E.kE,E.kF,E.kG,E.lF,E.lE,E.lg,E.lf,E.lz,E.lY,E.lD,E.lC,E.j8,E.j9,E.kT,E.kU,E.jn,E.kN,E.kO,E.kP,E.lP,E.lO,E.lQ,E.lR,E.lM,ge.l6,ge.l7,ge.l8,ge.l9,ge.l4,ge.l5,ge.l0,ge.l1,ge.l2,ge.l3,ke.fH,ke.fI,ye.i0,ye.i1,ye.i2,ye.hZ,ye.i_,ye.hX,ye.hY,ye.hV,ye.hW,ye.i3,ye.i4,we.jb,be.jl,be.jc,be.jd,be.je,be.jg,be.jh,be.ji,be.jj,be.jk,be.jf,ye.jo,ye.jp,ye.jq,Ue.jz,Ce.kB,ge.fS,ge.fR,ge.fT,ge.fW,ge.fX,ge.fU,ge.fV,ge.fY,we.i7,we.i9,we.i8,we.i6,we.il,we.ik,we.js,ze.jx,ze.jy,Ce.mq,Ce.mr,Ce.ms,Ce.lZ,W.h8,W.h6,W.h5,W.hd,W.ha,W.hb,W.h9,W.hm,W.ho,W.hf,W.hl,W.he,W.hk,W.hi,W.hj,W.hh,W.hg,W.hr,W.hq,W.hp,W.hv,W.hu,W.h2,W.h3,W.h4,W.ht,W.hs,W.h7,W.hn,W.hc,W.h1,W.h_,W.h0,W.ib,W.jK,W.jL,W.jQ,W.jO,W.jI,W.jE,W.jM,W.jF,W.jP,W.jB,W.jJ,W.jD,W.jG,W.jC,W.jN,W.jH,W.kp,W.ko,W.ke,W.kc,W.kd,W.kb,W.k9,W.ka,W.kk,W.kl,W.k8,W.k7,W.k6,W.k5,W.k3,W.k2,W.k0,W.jV,W.kz,W.ky,W.k_,W.jX,W.jZ,W.jW,W.jY,W.kx,W.kv,W.kq,W.kf,W.kw,W.kr,W.ks,W.kt,W.ku,W.kj,W.ki,W.kh,W.kg,W.kn,W.km,W.k1,W.jT,W.jS,W.k4,W.jU,W.j0,W.j5,W.iQ,W.iC,W.j6,W.iy,W.ix,W.iA,W.iB,W.iw,W.iz,W.iv,W.iF,W.iD,W.j4,W.iE,W.iX,W.iI,W.iJ,W.iG,W.iH,W.iP,W.iO,W.iN,W.iM,W.iR,W.iL,W.iK,W.j3,W.iS,W.iV,W.iU,W.iT,W.iW,W.iY,W.iZ,W.iu,W.it,W.is,W.j_,W.j1,W.j2,W.hE,W.hD,W.hC,W.hM,W.hA,W.hL,W.hH,W.hI,W.hB,W.hz,W.hF,W.hK,W.hJ,W.hG,Le.iq,Be.hP,Be.hN,Be.hO,De.hS,De.hT,De.hR,De.hU,De.hQ,oe.m3,oe.m4,oe.m5,oe.m2,Be.kY,Be.kX,Be.m7,de.mo,de.mk,de.mj,de.mg,de.mh,de.ml,de.mi,de.me,de.mf,de.mm,de.mn,de.lU,de.lV,de.lW,de.lS,de.lT]),f(E.F,[p.eD,E.f2,p.eC,p.f6,p.eZ,p.fi,E.ej,E.eR,E.ak,E.eO,E.f8,E.f3,E.bz,E.ep,E.er]),a(E.dg,E.dN),f(E.dg,[p.cI,oe.L]),f(p.cI,[p.cu,E.aX]),f(p.n,[p.af,p.b6,p.au,E.dH]),f(p.af,[p.dt,p.a8,E.fm,E.dF]),a(p.c_,p.b9),f(E.H,[p.a7,p.cm,p.dr]),a(p.cw,p.bc),a(E.e0,E.dj),a(E.be,E.e0),a(p.d4,E.be),f(p.cv,[p.aq,p.al]),a(p.eQ,E.f2),f(p.f1,[p.f_,p.ct]),a(p.cE,p.dm),f(p.cE,[p.dO,p.dQ]),a(p.dP,p.dO),a(p.dl,p.dP),a(p.dR,p.dQ),a(p.av,p.dR),f(p.dl,[p.dk,p.eI]),f(p.av,[p.eJ,p.eK,p.eL,p.eM,p.eN,p.dn,p.cf]),a(p.dY,p.fi),a(E.dW,E.dc),a(E.ax,E.ff),f(E.cS,[E.bD,E.cT]),a(E.dT,E.aW),f(E.dT,[E.an,E.dE]),a(E.dA,E.cK),f(E.fn,[E.dL,E.dU]),f(E.fh,[E.cn,E.dB]),a(E.lB,E.lJ),a(E.dJ,E.dG),f(E.cQ,[E.aZ,E.e1]),a(E.kH,E.kI),a(E.dV,E.kH),a(E.lw,E.dV),f(E.eo,[E.fL,E.hw,E.io]),a(E.eq,E.f0),f(E.eq,[E.fN,E.fM,E.ip,E.kS]),f(E.em,[E.fO,E.fo]),a(E.lI,E.fO),a(E.kR,E.hw),f(E.ak,[E.dq,E.ew]),a(E.fg,E.e2),a(ye.o,ye.fk),f(ye.o,[ye.es,ge.bP,ge.bQ,ge.bR,ke.b1,ke.bT,ke.b2,Se.bo,Re.bV,Re.bW,ye.da,we.ci,we.bB,be.aH,Ve.c0,Le.bs,Le.c6,Le.c7,Ue.c8,Be.c9,$e.ca,Ue.cb,be.cc,Ye.cd]),f(ye.es,[ge.a0,ke.bn,de.aN,ye.bp,Re.bq,Se.aO,we.aS,be.aT,ye.ah,Se.bv,Ue.bw,Ce.by,$e.bA,Le.b7]),f(ge.a0,[ge.fb,ge.fa]),f(oe.Y,[ge.ez,ge.eG,ge.eE,ge.eH,ge.eF,ke.ei,ke.dp,be.ev,Ce.eu,oe.f4,oe.f5,oe.en]),f(we.bB,[we.ch,we.cg]),f(we.i5,[we.ij,we.jr,we.kZ]),f(W.ic,[W.fZ,W.ia,W.jA,W.jR,W.ir,W.hy]),i(p.cI,p.f7),i(p.e4,E.m),i(p.dO,E.m),i(p.dP,p.d8),i(p.dQ,E.m),i(p.dR,p.d8),i(E.bD,E.fe),i(E.cT,E.fs),i(E.dN,E.m),i(E.e0,E.fw),i(ye.fk,ye.kQ)}();var et={typeUniverse:{eC:new Map,tR:{},eT:{},tPV:{},sEA:[]},mangledGlobalNames:{d:"int",w:"double",G:"num",f:"String",Q:"bool",k:"Null",l:"List"},mangledNames:{},getTypeFromName:le,metadata:[],types:["f*(l<@>*)","~()","k()","Q*(aH*)","@()","w*(d*)","k(f*,e*)","k(f*,d*)","Q*(d*)","k(ah*,d*,d*)","~(e*)","~(~())","~(j*)","k(@)","~(e,am)","~(e*,am*)","~(aa,f,d)","i<d*>*()","d*(d*)","i<w*>*()","k(d*,aH*)","~(f*)","Q*(T*)","k(l<d*>*)","k(e*)","~(l<d*>*)","k(~(e*)*,aE*)","k(h<f*,e*>*)","f*(e*)","k(d*,ah*)","i<d*>*(d*,d*,d*)","k(@,am)","k(d,@)","@(@)","i<w*>*(d*,d*,d*)","k(d*,b2*)","k(d*,b1*)","L<0^*>*(f*,0^*(h<f*,e*>*,j*)*)<e*>","0^*(f*,0^*(h<f*,e*>*,j*)*{req:Q*})<e*>","~(L<o*>*,bC*)","k(d*,o*)","k(e,am)","k(f,@)","Q*(ah*)","~(L<ck*>*)","k(d*,ck*)","~(o*,f*)","C<@>(@)","k(@,@)","d*(d*,d*,f*)","ae<@>()","~([ae<~>?])","kA<a0<G*>*>*()","Q(e?)","k(e?,e?)","f*(T*)","l<Y<G*>*>*()","f*(f*)","k(~())","T*()","k(bC*,a4*)","k(cH,@)","@(@,f)","Q*(l<d*>*,l<d*>*)","l<d*>*/*(aN*)","aW<l<d*>*>*(aO*)","k(d*,a0<G*>*)","Q*(H<G*>*)","~(f[@])","k(d*,b7*)","d(d,d)","aa(d)","~({seen:Q*})","k(as*)","ae<~>*()","k(l<e*>*)","h<f*,d*>*(h<@,@>*)","l<ce*>*()","Q*(aT*)","d*(d*,e*)","~(e*,am*,aE*)","bb<1&>*(aa*,e*)","aa(@,@)","@(f)","cd*(h<f*,e*>*,j*)","bb<1&>*(f*,e*)","f*()","ae<aa*>*(aY*)","aa*/*([aY*])","aW<l<d*>*>*(aY*)","e?(e?)","a0<G*>*(h<f*,e*>*,j*)","bP*(h<f*,e*>*,j*)","bQ*(h<f*,e*>*,j*)","bR*(h<f*,e*>*,j*)","bn*(h<f*,e*>*,j*)","bT*(h<f*,e*>*,j*)","bo*(h<f*,e*>*,j*)","aN*(h<f*,e*>*,j*)","bp*(h<f*,e*>*,j*)","bq*(h<f*,e*>*,j*)","bV*(h<f*,e*>*,j*)","bW*(h<f*,e*>*,j*)","aO*(h<f*,e*>*,j*)","aS*(h<f*,e*>*,j*)","ci*(h<f*,e*>*,j*)","ch*(h<f*,e*>*,j*)","cg*(h<f*,e*>*,j*)","bB*(h<f*,e*>*,j*)","aT*(h<f*,e*>*,j*)","ah*(h<f*,e*>*,j*)","bv*(h<f*,e*>*,j*)","bw*(h<f*,e*>*,j*)","by*(h<f*,e*>*,j*)","bA*(h<f*,e*>*,j*)","w*(G*)","~(@)","c0*(h<f*,e*>*,j*)","bs*(h<f*,e*>*,j*)","c6*(h<f*,e*>*,j*)","c7*(h<f*,e*>*,j*)","c8*(h<f*,e*>*,j*)","c9*(h<f*,e*>*,j*)","ca*(h<f*,e*>*,j*)","cb*(h<f*,e*>*,j*)","cc*(h<f*,e*>*,j*)","~(f,d)"],interceptorsByTag:null,leafTags:null,arrayRti:typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol("$ti"):"$ti"};p.uh(et.typeUniverse,JSON.parse('{"bb":"aF","hx":"aF","cP":"aF","eU":"aF","cl":"aF","aQ":"aF","dd":{"Q":[]},"cB":{"k":[]},"aF":{"aE":[],"bb":["1&"],"cP":[]},"p":{"l":["1"],"n":["1"],"i":["1"]},"ii":{"p":["1"],"l":["1"],"n":["1"],"i":["1"]},"aC":{"H":["1"]},"c5":{"w":[],"G":[]},"de":{"w":[],"d":[],"G":[]},"eB":{"w":[],"G":[]},"br":{"f":[]},"bE":{"i":["2"]},"d3":{"H":["2"]},"bX":{"bE":["1","2"],"i":["2"],"i.E":"2"},"dC":{"bX":["1","2"],"bE":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"dx":{"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"]},"b3":{"dx":["1","2"],"m":["2"],"l":["2"],"bE":["1","2"],"n":["2"],"i":["2"],"m.E":"2","i.E":"2"},"bY":{"I":["3","4"],"h":["3","4"],"I.K":"3","I.V":"4"},"eD":{"F":[]},"cu":{"m":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"n":{"i":["1"]},"af":{"n":["1"],"i":["1"]},"dt":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"a6":{"H":["1"]},"b9":{"i":["2"],"i.E":"2"},"c_":{"b9":["1","2"],"n":["2"],"i":["2"],"i.E":"2"},"a7":{"H":["2"]},"a8":{"af":["2"],"n":["2"],"i":["2"],"i.E":"2","af.E":"2"},"l_":{"i":["1"],"i.E":"1"},"cm":{"H":["1"]},"bc":{"i":["1"],"i.E":"1"},"cw":{"bc":["1"],"n":["1"],"i":["1"],"i.E":"1"},"dr":{"H":["1"]},"b6":{"n":["1"],"i":["1"],"i.E":"1"},"d6":{"H":["1"]},"cI":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"cG":{"cH":[]},"d4":{"be":["1","2"],"h":["1","2"]},"cv":{"h":["1","2"]},"aq":{"cv":["1","2"],"h":["1","2"]},"dz":{"i":["1"],"i.E":"1"},"al":{"cv":["1","2"],"h":["1","2"]},"eQ":{"F":[]},"eC":{"F":[]},"f6":{"F":[]},"eS":{"a3":[]},"dS":{"am":[]},"bZ":{"aE":[]},"f1":{"aE":[]},"f_":{"aE":[]},"ct":{"aE":[]},"eZ":{"F":[]},"aG":{"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"au":{"n":["1"],"i":["1"],"i.E":"1"},"df":{"H":["1"]},"cE":{"at":["1"]},"dl":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"]},"av":{"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"]},"dk":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eI":{"m":["w"],"at":["w"],"l":["w"],"n":["w"],"i":["w"],"m.E":"w"},"eJ":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eK":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eL":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eM":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"eN":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dn":{"av":[],"m":["d"],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"cf":{"av":[],"m":["d"],"aa":[],"at":["d"],"l":["d"],"n":["d"],"i":["d"],"m.E":"d"},"dX":{"bC":[]},"fi":{"F":[]},"dY":{"F":[]},"aB":{"H":["1"]},"dW":{"i":["1"],"i.E":"1"},"ax":{"ff":["1"]},"C":{"ae":["1"]},"bD":{"cS":["1"]},"cT":{"cS":["1"]},"an":{"aW":["1"]},"dT":{"aW":["1"]},"dE":{"aW":["1"]},"ek":{"F":[]},"dG":{"I":["1","2"],"h":["1","2"]},"dJ":{"dG":["1","2"],"I":["1","2"],"h":["1","2"],"I.K":"1","I.V":"2"},"dH":{"n":["1"],"i":["1"],"i.E":"1"},"dI":{"H":["1"]},"aZ":{"cQ":["1"],"n":["1"],"i":["1"]},"dM":{"H":["1"]},"aX":{"m":["1"],"l":["1"],"n":["1"],"i":["1"],"m.E":"1"},"dc":{"i":["1"]},"dg":{"m":["1"],"l":["1"],"n":["1"],"i":["1"]},"di":{"I":["1","2"],"h":["1","2"]},"I":{"h":["1","2"]},"dj":{"h":["1","2"]},"be":{"h":["1","2"]},"cQ":{"n":["1"],"i":["1"]},"e1":{"cQ":["1"],"n":["1"],"i":["1"]},"fl":{"I":["f","@"],"h":["f","@"],"I.K":"f","I.V":"@"},"fm":{"af":["f"],"n":["f"],"i":["f"],"i.E":"f","af.E":"f"},"w":{"G":[]},"d":{"G":[]},"l":{"n":["1"],"i":["1"]},"kA":{"n":["1"],"i":["1"]},"ej":{"F":[]},"f2":{"F":[]},"eR":{"F":[]},"ak":{"F":[]},"dq":{"F":[]},"ew":{"F":[]},"eO":{"F":[]},"f8":{"F":[]},"f3":{"F":[]},"bz":{"F":[]},"ep":{"F":[]},"eT":{"F":[]},"ds":{"F":[]},"er":{"F":[]},"dD":{"a3":[]},"aD":{"a3":[]},"dF":{"af":["1"],"n":["1"],"i":["1"],"i.E":"1","af.E":"1"},"fr":{"am":[]},"e2":{"aY":[]},"fp":{"aY":[]},"fg":{"aY":[]},"a0":{"o":[],"t":[]},"fb":{"a0":["d*"],"o":[],"t":[]},"fa":{"a0":["w*"],"o":[],"t":[]},"bP":{"o":[],"t":[]},"bQ":{"o":[],"t":[]},"bR":{"o":[],"t":[]},"ez":{"Y":["w*"]},"eG":{"Y":["w*"]},"eE":{"Y":["w*"]},"eH":{"Y":["d*"]},"eF":{"Y":["d*"]},"bn":{"o":[],"t":[]},"b1":{"o":[],"t":[]},"bT":{"o":[],"t":[]},"b2":{"o":[],"t":[]},"ei":{"Y":["w*"]},"dp":{"Y":["1*"]},"bo":{"o":[],"t":[]},"aN":{"o":[],"t":[]},"bp":{"o":[],"t":[]},"bq":{"o":[],"t":[]},"bV":{"o":[],"t":[]},"bW":{"o":[],"t":[]},"da":{"o":[],"t":[]},"o":{"t":[]},"es":{"o":[],"t":[]},"aO":{"o":[],"t":[]},"aS":{"o":[],"t":[]},"ci":{"o":[],"t":[]},"ch":{"o":[],"t":[]},"cg":{"o":[],"t":[]},"bB":{"o":[],"t":[]},"aT":{"o":[],"t":[]},"aH":{"o":[],"t":[]},"ev":{"Y":["d*"]},"ah":{"o":[],"t":[]},"bv":{"o":[],"t":[]},"bw":{"o":[],"t":[]},"by":{"o":[],"t":[]},"eu":{"Y":["w*"]},"bA":{"o":[],"t":[],"ck":[]},"c4":{"a3":[]},"dw":{"a3":[]},"dv":{"a3":[]},"aP":{"a3":[]},"c0":{"o":[],"t":[],"ck":[]},"bs":{"o":[],"t":[]},"b7":{"o":[],"t":[]},"c6":{"o":[],"t":[]},"c7":{"o":[],"t":[]},"c8":{"o":[],"t":[]},"c9":{"o":[],"t":[]},"ca":{"o":[],"t":[]},"cb":{"o":[],"t":[]},"cc":{"o":[],"t":[]},"cd":{"o":[],"t":[]},"d9":{"et":[]},"cy":{"et":[]},"db":{"a3":[]},"L":{"m":["1*"],"l":["1*"],"n":["1*"],"i":["1*"],"m.E":"1*"},"f4":{"Y":["G*"]},"f5":{"Y":["G*"]},"en":{"Y":["w*"]},"eP":{"a3":[]},"aa":{"l":["d"],"n":["d"],"i":["d"]}}')),p.ug(et.typeUniverse,JSON.parse('{"d8":1,"f7":1,"cI":1,"e4":2,"cE":1,"cM":2,"f0":2,"fs":1,"fe":1,"dA":1,"cK":1,"dT":1,"dL":1,"fh":1,"cn":1,"fn":1,"dU":1,"fq":1,"dc":1,"dg":1,"di":2,"fw":2,"dj":2,"dN":1,"e0":2,"em":1,"eo":2,"eq":2,"dV":1}'));var Nt={p:") does not match the number of morph targets (",c:"Accessor sparse indices element at index ",m:"Animation input accessor element at index "},X=function(){var i=p.ap;return{gF:i("d4<cH,@>"),O:i("n<@>"),C:i("F"),b8:i("aE"),c:i("ae<@>"),bq:i("ae<~>"),N:i("al<bC*,a4*>"),U:i("i<@>"),s:i("p<f>"),b:i("p<@>"),Z:i("p<d>"),p:i("p<u*>"),fr:i("p<b1*>"),es:i("p<b2*>"),gd:i("p<Y<G*>*>"),bd:i("p<ey*>"),a9:i("p<cA*>"),e2:i("p<H<w*>*>"),fK:i("p<H<d*>*>"),B:i("p<H<G*>*>"),dB:i("p<b7*>"),bH:i("p<ce*>"),d:i("p<l<d*>*>"),ar:i("p<h<f*,a0<G*>*>*>"),j:i("p<h<f*,e*>*>"),bZ:i("p<aH*>"),R:i("p<ah*>"),M:i("p<e*>"),d6:i("p<eY*>"),i:i("p<f*>"),m:i("p<w*>"),V:i("p<d*>"),T:i("cB"),g:i("aQ"),aU:i("at<@>"),eo:i("aG<cH,@>"),I:i("h<@,@>"),gw:i("a8<T*,f*>"),eB:i("av"),bm:i("cf"),P:i("k"),K:i("e"),ed:i("dp<G*>"),eq:i("L<b1*>"),az:i("L<b2*>"),du:i("L<b7*>"),b_:i("L<aH*>"),S:i("f"),E:i("aa"),ak:i("cl"),go:i("aX<h<f*,e*>*>"),em:i("aX<f*>"),f8:i("be<c1*,a4*>"),n:i("aY"),a_:i("ax<et*>"),G:i("ax<as*>"),eP:i("ax<c3*>"),as:i("ax<aa*>"),f1:i("bD<l<d*>*>"),eI:i("C<@>"),fJ:i("C<d>"),eD:i("C<et*>"),f:i("C<as*>"),dD:i("C<c3*>"),q:i("C<aa*>"),D:i("C<~>"),aH:i("dJ<@,@>"),cy:i("fo<e*>"),cJ:i("Q"),gR:i("w"),z:i("@"),bI:i("@(e)"),Q:i("@(e,am)"),r:i("d"),aD:i("u*"),hc:i("a0<d*>*"),W:i("a0<G*>*"),bj:i("bn*"),gP:i("bo*"),cT:i("aN*"),u:i("bp*"),h2:i("bq*"),y:i("a3*"),af:i("T*"),f9:i("a4*"),al:i("c1*"),b1:i("aE*"),ec:i("aO*"),Y:i("i<@>*"),v:i("t*"),l:i("l<@>*"),b7:i("l<Y<G*>*>*"),an:i("l<ce*>*"),o:i("l<e*>*"),eG:i("l<f*>*"),fy:i("l<w*>*"),w:i("l<d*>*"),h:i("h<@,@>*"),t:i("h<f*,e*>*"),fC:i("aS*"),eM:i("aT*"),A:i("0&*"),L:i("ah*"),_:i("e*"),ax:i("ck*"),cl:i("L<@>*"),c2:i("bv*"),J:i("bw*"),cn:i("kA<u*>*"),gz:i("kA<a0<G*>*>*"),dz:i("bx*"),aV:i("by*"),X:i("f*"),ai:i("bA*"),f7:i("bC*"),a:i("aa*"),bv:i("cP*"),F:i("w*"),e:i("d*"),eH:i("ae<k>?"),x:i("e?"),di:i("G"),H:i("~"),d5:i("~(e)"),k:i("~(e,am)")}}();(function(){var i=ue.makeConstList;w.by=J.cz.prototype,w.d=J.p.prototype,w.bC=J.dd.prototype,w.c=J.de.prototype,w.bD=J.cB.prototype,w.bE=J.c5.prototype,w.a=J.br.prototype,w.bF=J.aQ.prototype,w.d2=p.dk.prototype,w.j=p.cf.prototype,w.aq=J.eU.prototype,w.O=J.cl.prototype,w.P=new ye.u("MAT4",5126,!1),w.A=new ye.u("SCALAR",5126,!1),w.aQ=new ye.u("VEC2",5121,!0),w.aU=new ye.u("VEC2",5123,!0),w.aV=new ye.u("VEC2",5126,!1),w.R=new ye.u("VEC3",5121,!0),w.T=new ye.u("VEC3",5123,!0),w.k=new ye.u("VEC3",5126,!1),w.aY=new ye.u("VEC4",5121,!1),w.D=new ye.u("VEC4",5121,!0),w.aZ=new ye.u("VEC4",5123,!1),w.E=new ye.u("VEC4",5123,!0),w.u=new ye.u("VEC4",5126,!1),w.b_=new ye.bS("AnimationInput"),w.b0=new ye.bS("AnimationOutput"),w.b1=new ye.bS("IBM"),w.b2=new ye.bS("PrimitiveIndices"),w.W=new ye.bS("VertexAttribute"),w.b3=new ye.bU("IBM"),w.b4=new ye.bU("Image"),w.X=new ye.bU("IndexBuffer"),w.v=new ye.bU("Other"),w.F=new ye.bU("VertexBuffer"),w.dB=new E.fN,w.b5=new E.fL,w.b6=new E.fM,w.Y=new p.d6(p.ap("d6<k>")),w.Z=new De.db,w.b7=new ge.c4,w.a_=function(f){var g=Object.prototype.toString.call(f);return g.substring(8,g.length-1)},w.b8=function(){var a=Object.prototype.toString;function f(D){var V=a.call(D);return V.substring(8,V.length-1)}function g(D,V){if(/^HTML[A-Z].*Element$/.test(V)){var G=a.call(D);return G=="[object Object]"?null:"HTMLElement"}}function v(D,V){return t.HTMLElement&&D instanceof HTMLElement?"HTMLElement":g(D,V)}function S(D){if(typeof window=="undefined"||typeof window[D]=="undefined")return null;var V=window[D];return typeof V!="function"?null:V.prototype}function R(D){return null}var k=typeof navigator=="object";return{getTag:f,getUnknownTag:k?v:g,prototypeForTag:S,discriminator:R}},w.bd=function(a){return function(f){if(typeof navigator!="object")return f;var g=navigator.userAgent;if(g.indexOf("DumpRenderTree")>=0)return f;if(g.indexOf("Chrome")>=0){let v=function(S){return typeof window=="object"&&window[S]&&window[S].name==S};if(v("Window")&&v("HTMLElement"))return f}f.getTag=a}},w.b9=function(a){if(typeof dartExperimentalFixupGetTag!="function")return a;a.getTag=dartExperimentalFixupGetTag(a.getTag)},w.ba=function(a){var f=a.getTag,g=a.prototypeForTag;function v(R){var k=f(R);return k=="Document"?R.xmlVersion?"!Document":"!HTMLDocument":k}function S(R){return R=="Document"?null:g(R)}a.getTag=v,a.prototypeForTag=S},w.bc=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Firefox")==-1)return a;var g=a.getTag,v={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};function S(R){var k=g(R);return v[k]||k}a.getTag=S},w.bb=function(a){var f=typeof navigator=="object"?navigator.userAgent:"";if(f.indexOf("Trident/")==-1)return a;var g=a.getTag,v={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};function S(k){var D=g(k),V=v[D];return V||(D=="Object"&&window.DataView&&k instanceof window.DataView?"DataView":D)}function R(k){var D=window[k];return D==null?null:D.prototype}a.getTag=S,a.prototypeForTag=R},w.a0=function(a){return a},w.a1=new E.io,w.be=new E.eT,w.a2=new we.dv,w.bf=new we.dw,w.a3=new E.kR,w.G=new E.lh,w.a4=new p.lA,w.f=new E.lB,w.bg=new E.fr,w.I=new we.c2(0,"Format.Unknown"),w.n=new we.c2(1,"Format.RGB"),w.w=new we.c2(2,"Format.RGBA"),w.a5=new we.c2(3,"Format.Luminance"),w.a6=new we.c2(4,"Format.LuminanceAlpha"),w.a7=new we.aP("Wrong WebP header."),w.bz=new we.aP("PNG header not found."),w.bA=new we.aP("Invalid JPEG marker segment length."),w.o=new we.aP("Wrong chunk length."),w.bB=new we.aP("Invalid start of file."),w.bG=new E.ip(null),w.bH=p.a(i([0,0]),X.m),w.a8=p.a(i([0,0,0]),X.m),w.bI=p.a(i([16]),X.V),w.bJ=p.a(i([1,1]),X.m),w.a9=p.a(i([1,1,1]),X.m),w.aa=p.a(i([1,1,1,1]),X.m),w.ab=p.a(i([2]),X.V),w.bK=p.a(i([255,216]),X.V),w.bM=p.a(i(["sheenColorFactor","sheenColorTexture","sheenRoughnessFactor","sheenRoughnessTexture"]),X.i),w.ac=p.a(i([0,0,32776,33792,1,10240,0,0]),X.V),w.bN=p.a(i([137,80,78,71,13,10,26,10]),X.V),w.bO=p.a(i(["clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture"]),X.i),w.m=p.a(i([3]),X.V),w.ad=p.a(i([33071,33648,10497]),X.V),w.bP=p.a(i([34962,34963]),X.V),w.J=p.a(i([4]),X.V),w.aN=new ye.u("VEC2",5120,!1),w.aO=new ye.u("VEC2",5120,!0),w.aP=new ye.u("VEC2",5121,!1),w.aR=new ye.u("VEC2",5122,!1),w.aS=new ye.u("VEC2",5122,!0),w.aT=new ye.u("VEC2",5123,!1),w.bQ=p.a(i([w.aN,w.aO,w.aP,w.aR,w.aS,w.aT]),X.p),w.bR=p.a(i([5121,5123,5125]),X.V),w.ae=p.a(i(["image/jpeg","image/png"]),X.i),w.bS=p.a(i(["transmissionFactor","transmissionTexture"]),X.i),w.bT=p.a(i([82,73,70,70]),X.V),w.bU=p.a(i([9728,9729]),X.V),w.aH=new ye.u("SCALAR",5121,!1),w.aK=new ye.u("SCALAR",5123,!1),w.aM=new ye.u("SCALAR",5125,!1),w.af=p.a(i([w.aH,w.aK,w.aM]),X.p),w.bW=p.a(i(["camera","children","skin","matrix","mesh","rotation","scale","translation","weights","name"]),X.i),w.bX=p.a(i([9728,9729,9984,9985,9986,9987]),X.V),w.bY=p.a(i(["COLOR","JOINTS","TEXCOORD","WEIGHTS"]),X.i),w.x=p.a(i([0,0,65490,45055,65535,34815,65534,18431]),X.V),w.bZ=p.a(i(["color","intensity","spot","type","range","name"]),X.i),w.c_=p.a(i(["buffer","byteOffset","byteLength","byteStride","target","name"]),X.i),w.ah=p.a(i([0,0,26624,1023,65534,2047,65534,2047]),X.V),w.c0=p.a(i(["LINEAR","STEP","CUBICSPLINE"]),X.i),w.c1=p.a(i(["OPAQUE","MASK","BLEND"]),X.i),w.c2=p.a(i(["pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","name"]),X.i),w.c3=p.a(i([5120,5121,5122,5123,5125,5126]),X.V),w.c4=p.a(i(["inverseBindMatrices","skeleton","joints","name"]),X.i),w.Q=new ye.u("VEC3",5120,!1),w.B=new ye.u("VEC3",5120,!0),w.S=new ye.u("VEC3",5122,!1),w.C=new ye.u("VEC3",5122,!0),w.c5=p.a(i([w.Q,w.B,w.S,w.C]),X.p),w.c6=p.a(i(["data-uri","buffer-view","glb","external"]),X.i),w.c7=p.a(i(["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]),X.i),w.c8=p.a(i(["bufferView","byteOffset","componentType"]),X.i),w.K=p.a(i([w.B,w.C]),X.p),w.c9=p.a(i(["aspectRatio","yfov","zfar","znear"]),X.i),w.ca=p.a(i(["copyright","generator","version","minVersion"]),X.i),w.cb=p.a(i(["bufferView","byteOffset"]),X.i),w.cc=p.a(i(["bufferView","mimeType","uri","name"]),X.i),w.cd=p.a(i(["channels","samplers","name"]),X.i),w.ce=p.a(i(["baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture"]),X.i),w.cf=p.a(i(["count","indices","values"]),X.i),w.cg=p.a(i(["diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture"]),X.i),w.ch=p.a(i(["directional","point","spot"]),X.i),w.ai=p.a(i([]),X.b),w.ci=p.a(i([]),X.i),w.cl=p.a(i(["extensions","extras"]),X.i),w.cm=p.a(i([0,0,32722,12287,65534,34815,65534,18431]),X.V),w.co=p.a(i(["index","texCoord"]),X.i),w.cp=p.a(i(["index","texCoord","scale"]),X.i),w.cq=p.a(i(["index","texCoord","strength"]),X.i),w.cr=p.a(i(["innerConeAngle","outerConeAngle"]),X.i),w.cs=p.a(i(["input","interpolation","output"]),X.i),w.ct=p.a(i(["attributes","indices","material","mode","targets"]),X.i),w.cu=p.a(i(["bufferView","byteOffset","componentType","count","type","normalized","max","min","sparse","name"]),X.i),w.cw=p.a(i(["light"]),X.i),w.cx=p.a(i(["lights"]),X.i),w.cy=p.a(i(["node","path"]),X.i),w.cz=p.a(i(["nodes","name"]),X.i),w.cA=p.a(i([null,"linear","srgb","custom"]),X.i),w.cB=p.a(i([null,"srgb","custom"]),X.i),w.aj=p.a(i([0,0,24576,1023,65534,34815,65534,18431]),X.V),w.cC=p.a(i(["image/webp"]),X.i),w.cD=p.a(i(["offset","rotation","scale","texCoord"]),X.i),w.N=p.B("bA"),w.bh=new Ve.a4(Ve.vy(),!1),w.d_=new p.al([w.N,w.bh],X.N),w.bu=new Ve.T("EXT_texture_webp",w.d_,Ve.vz(),!1),w.at=p.B("da"),w.M=p.B("ah"),w.bi=new Ve.a4(Le.vN(),!1),w.bj=new Ve.a4(Le.vP(),!1),w.cY=new p.al([w.at,w.bi,w.M,w.bj],X.N),w.bq=new Ve.T("KHR_lights_punctual",w.cY,null,!1),w.h=p.B("aS"),w.bk=new Ve.a4(Ue.vQ(),!1),w.cT=new p.al([w.h,w.bk],X.N),w.bt=new Ve.T("KHR_materials_clearcoat",w.cT,null,!1),w.bn=new Ve.a4(Be.vR(),!0),w.cU=new p.al([w.h,w.bn],X.N),w.bw=new Ve.T("KHR_materials_pbrSpecularGlossiness",w.cU,null,!1),w.bl=new Ve.a4(Ue.vT(),!1),w.cV=new p.al([w.h,w.bl],X.N),w.bs=new Ve.T("KHR_materials_transmission",w.cV,null,!1),w.bm=new Ve.a4($e.vS(),!1),w.cW=new p.al([w.h,w.bm],X.N),w.bp=new Ve.T("KHR_materials_sheen",w.cW,null,!1),w.bo=new Ve.a4(be.vU(),!0),w.cX=new p.al([w.h,w.bo],X.N),w.br=new Ve.T("KHR_materials_unlit",w.cX,null,!1),w.cj=p.a(i([]),p.ap("p<bC*>")),w.d0=new p.aq(0,{},w.cj,p.ap("aq<bC*,a4*>")),w.bx=new Ve.T("KHR_mesh_quantization",w.d0,$e.vV(),!0),w.aA=p.B("bB"),w.aw=p.B("cg"),w.ax=p.B("ch"),w.H=new Ve.a4(Ye.vW(),!1),w.cZ=new p.al([w.aA,w.H,w.aw,w.H,w.ax,w.H],X.N),w.bv=new Ve.T("KHR_texture_transform",w.cZ,null,!1),w.ak=p.a(i([w.bu,w.bq,w.bt,w.bw,w.bs,w.bp,w.br,w.bx,w.bv]),p.ap("p<T*>")),w.al=p.a(i(["orthographic","perspective"]),X.i),w.cE=p.a(i(["primitives","weights","name"]),X.i),w.b=new W.bx(0,"Severity.Error"),w.e=new W.bx(1,"Severity.Warning"),w.i=new W.bx(2,"Severity.Information"),w.d4=new W.bx(3,"Severity.Hint"),w.cF=p.a(i([w.b,w.e,w.i,w.d4]),p.ap("p<bx*>")),w.cG=p.a(i([0,0,32754,11263,65534,34815,65534,18431]),X.V),w.cH=p.a(i(["magFilter","minFilter","wrapS","wrapT","name"]),X.i),w.cI=p.a(i([null,"rgb","rgba","luminance","luminance-alpha"]),X.i),w.am=p.a(i([0,0,65490,12287,65535,34815,65534,18431]),X.V),w.cJ=p.a(i(["sampler","source","name"]),X.i),w.cK=p.a(i(["source"]),X.i),w.aW=new ye.u("VEC3",5121,!1),w.aX=new ye.u("VEC3",5123,!1),w.cL=p.a(i([w.Q,w.B,w.aW,w.R,w.S,w.C,w.aX,w.T]),X.p),w.cM=p.a(i(["target","sampler"]),X.i),w.an=p.a(i(["translation","rotation","scale","weights"]),X.i),w.cN=p.a(i(["type","orthographic","perspective","name"]),X.i),w.cO=p.a(i(["uri","byteLength","name"]),X.i),w.cP=p.a(i(["xmag","ymag","zfar","znear"]),X.i),w.cQ=p.a(i(["extensionsUsed","extensionsRequired","accessors","animations","asset","buffers","bufferViews","cameras","images","materials","meshes","nodes","samplers","scene","scenes","skins","textures"]),X.i),w.U=new ye.u("VEC4",5120,!0),w.V=new ye.u("VEC4",5122,!0),w.cR=p.a(i([w.U,w.V]),X.p),w.ag=p.a(i([w.k]),X.p),w.bL=p.a(i([w.u,w.D,w.U,w.E,w.V]),X.p),w.aI=new ye.u("SCALAR",5121,!0),w.aG=new ye.u("SCALAR",5120,!0),w.aL=new ye.u("SCALAR",5123,!0),w.aJ=new ye.u("SCALAR",5122,!0),w.cn=p.a(i([w.A,w.aI,w.aG,w.aL,w.aJ]),X.p),w.cS=new p.aq(4,{translation:w.ag,rotation:w.bL,scale:w.ag,weights:w.cn},w.an,p.ap("aq<f*,l<u*>*>")),w.bV=p.a(i(["SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4"]),X.i),w.l=new p.aq(7,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w.bV,p.ap("aq<f*,d*>")),w.ao=new p.al([5120,"BYTE",5121,"UNSIGNED_BYTE",5122,"SHORT",5123,"UNSIGNED_SHORT",5124,"INT",5125,"UNSIGNED_INT",5126,"FLOAT",35664,"FLOAT_VEC2",35665,"FLOAT_VEC3",35666,"FLOAT_VEC4",35667,"INT_VEC2",35668,"INT_VEC3",35669,"INT_VEC4",35670,"BOOL",35671,"BOOL_VEC2",35672,"BOOL_VEC3",35673,"BOOL_VEC4",35674,"FLOAT_MAT2",35675,"FLOAT_MAT3",35676,"FLOAT_MAT4",35678,"SAMPLER_2D"],p.ap("al<d*,f*>")),w.ck=p.a(i([]),p.ap("p<cH*>")),w.ap=new p.aq(0,{},w.ck,p.ap("aq<cH*,@>")),w.cv=p.a(i(["KHR","EXT","ADOBE","AGI","AGT","ALCM","ALI","AMZN","ANIMECH","AVR","BLENDER","CAPTURE","CESIUM","CVTOOLS","EPIC","FB","FOXIT","GOOGLE","GRIFFEL","KDAB","LLQ","MAXAR","MESHOPT","MOZ","MPEG","MSFT","NV","OWLII","PANDA3D","POLUTROPON","PTC","S8S","SEIN","SI","SKFB","SKYLINE","SPECTRUM","TRYON","UX3D","VRMC","WEB3D"]),X.i),w.d1=new p.aq(41,{KHR:null,EXT:null,ADOBE:null,AGI:null,AGT:null,ALCM:null,ALI:null,AMZN:null,ANIMECH:null,AVR:null,BLENDER:null,CAPTURE:null,CESIUM:null,CVTOOLS:null,EPIC:null,FB:null,FOXIT:null,GOOGLE:null,GRIFFEL:null,KDAB:null,LLQ:null,MAXAR:null,MESHOPT:null,MOZ:null,MPEG:null,MSFT:null,NV:null,OWLII:null,PANDA3D:null,POLUTROPON:null,PTC:null,S8S:null,SEIN:null,SI:null,SKFB:null,SKYLINE:null,SPECTRUM:null,TRYON:null,UX3D:null,VRMC:null,WEB3D:null},w.cv,p.ap("aq<f*,k>")),w.d3=new E.e1(w.d1,p.ap("e1<f*>")),w.d5=new p.cG("call"),w.d6=p.B("bQ"),w.d7=p.B("bR"),w.d8=p.B("bP"),w.L=p.B("a0<G>"),w.d9=p.B("bT"),w.da=p.B("b1"),w.db=p.B("b2"),w.ar=p.B("bn"),w.dc=p.B("bo"),w.as=p.B("bp"),w.dd=p.B("aN"),w.de=p.B("bV"),w.df=p.B("bW"),w.dg=p.B("bq"),w.dh=p.B("c9"),w.di=p.B("c0"),w.au=p.B("aO"),w.dj=p.B("bs"),w.dk=p.B("c6"),w.dl=p.B("b7"),w.dm=p.B("c7"),w.dn=p.B("c8"),w.dp=p.B("ca"),w.dq=p.B("cb"),w.dr=p.B("cc"),w.ds=p.B("cd"),w.dt=p.B("aH"),w.av=p.B("aT"),w.du=p.B("ci"),w.dv=p.B("bv"),w.ay=p.B("bw"),w.az=p.B("by"),w.dw=new E.kS(!1),w.p=new we.dy(0,"_ColorPrimaries.Unknown"),w.q=new we.dy(1,"_ColorPrimaries.sRGB"),w.y=new we.dy(2,"_ColorPrimaries.Custom"),w.r=new we.cL(0,"_ColorTransfer.Unknown"),w.dx=new we.cL(1,"_ColorTransfer.Linear"),w.t=new we.cL(2,"_ColorTransfer.sRGB"),w.z=new we.cL(3,"_ColorTransfer.Custom"),w.aB=new we.dK("_ImageCodec.JPEG"),w.aC=new we.dK("_ImageCodec.PNG"),w.aD=new we.dK("_ImageCodec.WebP"),w.dy=new E.cO(null,2),w.aE=new ze.cR(0,"_Storage.DataUri"),w.dz=new ze.cR(1,"_Storage.BufferView"),w.dA=new ze.cR(2,"_Storage.GLB"),w.aF=new ze.cR(3,"_Storage.External")})(),function(){j.oo=null,j.b4=0,j.nD=null,j.nC=null,j.oY=null,j.oR=null,j.p7=null,j.m1=null,j.mc=null,j.n1=null,j.cX=null,j.ea=null,j.eb=null,j.mT=!1,j.x=w.f,j.co=p.a([],p.ap("p<e>"))}(),function(){var i=ue.lazy,a=ue.lazyOld;i(j,"wf","n6",function(){return p.vF("_$dart_dartClosure")}),i(j,"yH","r9",function(){return p.bd(p.kK({toString:function(){return"$receiver$"}}))}),i(j,"yI","ra",function(){return p.bd(p.kK({$method$:null,toString:function(){return"$receiver$"}}))}),i(j,"yJ","rb",function(){return p.bd(p.kK(null))}),i(j,"yK","rc",function(){return p.bd(function(){var f="$arguments$";try{null.$method$(f)}catch(g){return g.message}}())}),i(j,"yN","rf",function(){return p.bd(p.kK(void 0))}),i(j,"yO","rg",function(){return p.bd(function(){var f="$arguments$";try{(void 0).$method$(f)}catch(g){return g.message}}())}),i(j,"yM","re",function(){return p.bd(p.o8(null))}),i(j,"yL","rd",function(){return p.bd(function(){try{null.$method$}catch(f){return f.message}}())}),i(j,"yQ","ri",function(){return p.bd(p.o8(void 0))}),i(j,"yP","rh",function(){return p.bd(function(){try{(void 0).$method$}catch(f){return f.message}}())}),i(j,"yT","np",function(){return E.tY()}),i(j,"wN","fC",function(){var f=new E.C(w.f,p.ap("C<k>"));return f.dK(null),f}),i(j,"yR","rj",function(){return new E.kT().$0()}),i(j,"yS","rk",function(){return new E.kU().$0()}),i(j,"yV","nq",function(){return p.tz(p.uH(p.a([-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-1,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2],X.Z)))}),i(j,"yU","rl",function(){return p.tA(0)}),i(j,"zf","rp",function(){return E.uG()}),a(j,"wd","bj",function(){return E.o2("^([0-9]+)\\.([0-9]+)$")}),a(j,"we","pe",function(){return E.o2("^([A-Z0-9]+)_[A-Za-z0-9_]+$")}),a(j,"wC","pw",function(){return W.D("BUFFER_EMBEDDED_BYTELENGTH_MISMATCH",new W.h8,w.b)}),a(j,"wD","px",function(){return W.D("BUFFER_EXTERNAL_BYTELENGTH_MISMATCH",new W.h6,w.b)}),a(j,"wE","py",function(){return W.D("BUFFER_GLB_CHUNK_TOO_BIG",new W.h5,w.e)}),a(j,"wv","na",function(){return W.D("ACCESSOR_MIN_MISMATCH",new W.hd,w.b)}),a(j,"wu","n9",function(){return W.D("ACCESSOR_MAX_MISMATCH",new W.ha,w.b)}),a(j,"wk","n8",function(){return W.D("ACCESSOR_ELEMENT_OUT_OF_MIN_BOUND",new W.hb,w.b)}),a(j,"wj","n7",function(){return W.D("ACCESSOR_ELEMENT_OUT_OF_MAX_BOUND",new W.h9,w.b)}),a(j,"wz","nb",function(){return W.D("ACCESSOR_VECTOR3_NON_UNIT",new W.hm,w.b)}),a(j,"wq","pn",function(){return W.D("ACCESSOR_INVALID_SIGN",new W.ho,w.b)}),a(j,"wi","ph",function(){return W.D("ACCESSOR_ANIMATION_SAMPLER_OUTPUT_NON_NORMALIZED_QUATERNION",new W.hf,w.b)}),a(j,"ww","pr",function(){return W.D("ACCESSOR_NON_CLAMPED",new W.hl,w.b)}),a(j,"wo","pl",function(){return W.D("ACCESSOR_INVALID_FLOAT",new W.he,w.b)}),a(j,"wl","pi",function(){return W.D("ACCESSOR_INDEX_OOB",new W.hk,w.b)}),a(j,"wn","pk",function(){return W.D("ACCESSOR_INDEX_TRIANGLE_DEGENERATE",new W.hi,w.i)}),a(j,"wm","pj",function(){return W.D("ACCESSOR_INDEX_PRIMITIVE_RESTART",new W.hj,w.b)}),a(j,"wg","pf",function(){return W.D("ACCESSOR_ANIMATION_INPUT_NEGATIVE",new W.hh,w.b)}),a(j,"wh","pg",function(){return W.D("ACCESSOR_ANIMATION_INPUT_NON_INCREASING",new W.hg,w.b)}),a(j,"wy","pt",function(){return W.D("ACCESSOR_SPARSE_INDICES_NON_INCREASING",new W.hr,w.b)}),a(j,"wx","ps",function(){return W.D("ACCESSOR_SPARSE_INDEX_OOB",new W.hq,w.b)}),a(j,"wp","pm",function(){return W.D("ACCESSOR_INVALID_IBM",new W.hp,w.b)}),a(j,"wG","pz",function(){return W.D("IMAGE_DATA_INVALID",new W.hv,w.b)}),a(j,"wI","pB",function(){return W.D("IMAGE_MIME_TYPE_INVALID",new W.hu,w.b)}),a(j,"wL","pE",function(){return W.D("IMAGE_UNEXPECTED_EOS",new W.h2,w.b)}),a(j,"wM","pF",function(){return W.D("IMAGE_UNRECOGNIZED_FORMAT",new W.h3,w.e)}),a(j,"wJ","pC",function(){return W.D("IMAGE_NON_ENABLED_MIME_TYPE",new W.h4,w.b)}),a(j,"wK","pD",function(){return W.D("IMAGE_NPOT_DIMENSIONS",new W.ht,w.i)}),a(j,"wH","pA",function(){return W.D("IMAGE_FEATURES_UNSUPPORTED",new W.hs,w.e)}),a(j,"wF","nc",function(){return W.D("DATA_URI_GLB",new W.h7,w.i)}),a(j,"ws","pp",function(){return W.D("ACCESSOR_JOINTS_INDEX_OOB",new W.hn,w.b)}),a(j,"wr","po",function(){return W.D("ACCESSOR_JOINTS_INDEX_DUPLICATE",new W.hc,w.b)}),a(j,"wA","pu",function(){return W.D("ACCESSOR_WEIGHTS_NEGATIVE",new W.h1,w.b)}),a(j,"wB","pv",function(){return W.D("ACCESSOR_WEIGHTS_NON_NORMALIZED",new W.h_,w.b)}),a(j,"wt","pq",function(){return W.D("ACCESSOR_JOINTS_USED_ZERO_WEIGHT",new W.h0,w.e)}),a(j,"x1","mt",function(){return new W.ia(w.b,"IO_ERROR",new W.ib)}),a(j,"xJ","nk",function(){return W.ai("ARRAY_LENGTH_NOT_IN_LIST",new W.jK,w.b)}),a(j,"xK","eg",function(){return W.ai("ARRAY_TYPE_MISMATCH",new W.jL,w.b)}),a(j,"xI","nj",function(){return W.ai("DUPLICATE_ELEMENTS",new W.jQ,w.b)}),a(j,"xM","fE",function(){return W.ai("INVALID_INDEX",new W.jO,w.b)}),a(j,"xN","fF",function(){return W.ai("INVALID_JSON",new W.jI,w.b)}),a(j,"xO","qr",function(){return W.ai("INVALID_URI",new W.jE,w.b)}),a(j,"xL","bO",function(){return W.ai("EMPTY_ENTITY",new W.jM,w.b)}),a(j,"xP","nl",function(){return W.ai("ONE_OF_MISMATCH",new W.jF,w.b)}),a(j,"xQ","qs",function(){return W.ai("PATTERN_MISMATCH",new W.jP,w.b)}),a(j,"xR","Z",function(){return W.ai("TYPE_MISMATCH",new W.jB,w.b)}),a(j,"xW","nm",function(){return W.ai("VALUE_NOT_IN_LIST",new W.jJ,w.e)}),a(j,"xX","mu",function(){return W.ai("VALUE_NOT_IN_RANGE",new W.jD,w.b)}),a(j,"xV","qu",function(){return W.ai("VALUE_MULTIPLE_OF",new W.jG,w.b)}),a(j,"xS","bk",function(){return W.ai("UNDEFINED_PROPERTY",new W.jC,w.b)}),a(j,"xT","qt",function(){return W.ai("UNEXPECTED_PROPERTY",new W.jN,w.e)}),a(j,"xU","d1",function(){return W.ai("UNSATISFIED_DEPENDENCY",new W.jH,w.b)}),a(j,"yC","r5",function(){return W.q("UNKNOWN_ASSET_MAJOR_VERSION",new W.kp,w.b)}),a(j,"yD","r6",function(){return W.q("UNKNOWN_ASSET_MINOR_VERSION",new W.ko,w.e)}),a(j,"yn","qR",function(){return W.q("ASSET_MIN_VERSION_GREATER_THAN_VERSION",new W.ke,w.e)}),a(j,"yb","qG",function(){return W.q("INVALID_GL_VALUE",new W.kc,w.b)}),a(j,"y9","qE",function(){return W.q("INTEGER_WRITTEN_AS_FLOAT",new W.kd,w.e)}),a(j,"xZ","qw",function(){return W.q("ACCESSOR_NORMALIZED_INVALID",new W.kb,w.b)}),a(j,"y_","qx",function(){return W.q("ACCESSOR_OFFSET_ALIGNMENT",new W.k9,w.b)}),a(j,"xY","qv",function(){return W.q("ACCESSOR_MATRIX_ALIGNMENT",new W.ka,w.b)}),a(j,"y0","qy",function(){return W.q("ACCESSOR_SPARSE_COUNT_OUT_OF_RANGE",new W.kk,w.b)}),a(j,"y1","qz",function(){return W.q("ANIMATION_CHANNEL_TARGET_NODE_SKIN",new W.kl,w.e)}),a(j,"y2","qA",function(){return W.q("BUFFER_DATA_URI_MIME_TYPE_INVALID",new W.k8,w.b)}),a(j,"y4","qB",function(){return W.q("BUFFER_VIEW_TOO_BIG_BYTE_STRIDE",new W.k7,w.b)}),a(j,"y3","mv",function(){return W.q("BUFFER_VIEW_INVALID_BYTE_STRIDE",new W.k6,w.b)}),a(j,"y5","qC",function(){return W.q("CAMERA_XMAG_YMAG_ZERO",new W.k5,w.e)}),a(j,"y6","qD",function(){return W.q("CAMERA_YFOV_GEQUAL_PI",new W.k3,w.e)}),a(j,"y7","nn",function(){return W.q("CAMERA_ZFAR_LEQUAL_ZNEAR",new W.k2,w.b)}),a(j,"yd","qI",function(){return W.q("MATERIAL_ALPHA_CUTOFF_INVALID_MODE",new W.k0,w.e)}),a(j,"yg","mw",function(){return W.q("MESH_PRIMITIVE_INVALID_ATTRIBUTE",new W.jV,w.b)}),a(j,"ym","qQ",function(){return W.q("MESH_PRIMITIVES_UNEQUAL_TARGETS_COUNT",new W.kz,w.b)}),a(j,"yl","qP",function(){return W.q("MESH_PRIMITIVES_UNEQUAL_JOINTS_COUNT",new W.ky,w.e)}),a(j,"yi","qM",function(){return W.q("MESH_PRIMITIVE_NO_POSITION",new W.k_,w.e)}),a(j,"yf","qK",function(){return W.q("MESH_PRIMITIVE_INDEXED_SEMANTIC_CONTINUITY",new W.jX,w.b)}),a(j,"yk","qO",function(){return W.q("MESH_PRIMITIVE_TANGENT_WITHOUT_NORMAL",new W.jZ,w.e)}),a(j,"yh","qL",function(){return W.q("MESH_PRIMITIVE_JOINTS_WEIGHTS_MISMATCH",new W.jW,w.b)}),a(j,"yj","qN",function(){return W.q("MESH_PRIMITIVE_TANGENT_POINTS",new W.jY,w.e)}),a(j,"ye","qJ",function(){return W.q("MESH_INVALID_WEIGHTS_COUNT",new W.kx,w.b)}),a(j,"yr","qV",function(){return W.q("NODE_MATRIX_TRS",new W.kv,w.b)}),a(j,"yp","qT",function(){return W.q("NODE_MATRIX_DEFAULT",new W.kq,w.i)}),a(j,"ys","qW",function(){return W.q("NODE_MATRIX_NON_TRS",new W.kf,w.b)}),a(j,"yz","r2",function(){return W.q("ROTATION_NON_UNIT",new W.kw,w.b)}),a(j,"yF","r8",function(){return W.q("UNUSED_EXTENSION_REQUIRED",new W.kr,w.b)}),a(j,"yy","r1",function(){return W.q("NON_REQUIRED_EXTENSION",new W.ks,w.b)}),a(j,"yE","r7",function(){return W.q("UNRESERVED_EXTENSION_PREFIX",new W.kt,w.e)}),a(j,"ya","qF",function(){return W.q("INVALID_EXTENSION_NAME_FORMAT",new W.ku,w.e)}),a(j,"yq","qU",function(){return W.q("NODE_EMPTY",new W.kj,w.i)}),a(j,"yv","qZ",function(){return W.q("NODE_SKINNED_MESH_NON_ROOT",new W.ki,w.e)}),a(j,"yu","qY",function(){return W.q("NODE_SKINNED_MESH_LOCAL_TRANSFORMS",new W.kh,w.e)}),a(j,"yt","qX",function(){return W.q("NODE_SKIN_NO_SCENE",new W.kg,w.b)}),a(j,"yA","r3",function(){return W.q("SKIN_NO_COMMON_ROOT",new W.kn,w.b)}),a(j,"yB","r4",function(){return W.q("SKIN_SKELETON_INVALID",new W.km,w.b)}),a(j,"yx","r0",function(){return W.q("NON_RELATIVE_URI",new W.k1,w.e)}),a(j,"yo","qS",function(){return W.q("MULTIPLE_EXTENSIONS",new W.jT,w.e)}),a(j,"yw","r_",function(){return W.q("NON_OBJECT_EXTRAS",new W.jS,w.i)}),a(j,"y8","no",function(){return W.q("EXTRA_PROPERTY",new W.k4,w.i)}),a(j,"yc","qH",function(){return W.q("KHR_LIGHTS_PUNCTUAL_LIGHT_SPOT_ANGLES",new W.jU,w.b)}),a(j,"x4","pV",function(){return W.v("ACCESSOR_TOTAL_OFFSET_ALIGNMENT",new W.j0,w.b)}),a(j,"x2","pU",function(){return W.v("ACCESSOR_SMALL_BYTESTRIDE",new W.j5,w.b)}),a(j,"x3","nd",function(){return W.v("ACCESSOR_TOO_LONG",new W.iQ,w.b)}),a(j,"x5","pW",function(){return W.v("ACCESSOR_USAGE_OVERRIDE",new W.iC,w.b)}),a(j,"x8","pZ",function(){return W.v("ANIMATION_DUPLICATE_TARGETS",new W.j6,w.b)}),a(j,"x6","pX",function(){return W.v("ANIMATION_CHANNEL_TARGET_NODE_MATRIX",new W.iy,w.b)}),a(j,"x7","pY",function(){return W.v("ANIMATION_CHANNEL_TARGET_NODE_WEIGHTS_NO_MORPHS",new W.ix,w.b)}),a(j,"xb","q1",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_WITHOUT_BOUNDS",new W.iA,w.b)}),a(j,"x9","q_",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_INVALID_FORMAT",new W.iB,w.b)}),a(j,"xd","q3",function(){return W.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_FORMAT",new W.iw,w.b)}),a(j,"xa","q0",function(){return W.v("ANIMATION_SAMPLER_INPUT_ACCESSOR_TOO_FEW_ELEMENTS",new W.iz,w.b)}),a(j,"xc","q2",function(){return W.v("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_COUNT",new W.iv,w.b)}),a(j,"xe","q4",function(){return W.v("BUFFER_MISSING_GLB_DATA",new W.iF,w.b)}),a(j,"xg","ne",function(){return W.v("BUFFER_VIEW_TOO_LONG",new W.iD,w.b)}),a(j,"xf","q5",function(){return W.v("BUFFER_VIEW_TARGET_OVERRIDE",new W.j4,w.b)}),a(j,"xh","q6",function(){return W.v("IMAGE_BUFFER_VIEW_WITH_BYTESTRIDE",new W.iE,w.b)}),a(j,"xi","q7",function(){return W.v("INVALID_IBM_ACCESSOR_COUNT",new W.iX,w.b)}),a(j,"xl","ng",function(){return W.v("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_INVALID_FORMAT",new W.iI,w.b)}),a(j,"xr","nh",function(){return W.v("MESH_PRIMITIVE_POSITION_ACCESSOR_WITHOUT_BOUNDS",new W.iJ,w.b)}),a(j,"xk","q8",function(){return W.v("MESH_PRIMITIVE_ACCESSOR_WITHOUT_BYTESTRIDE",new W.iG,w.b)}),a(j,"xj","nf",function(){return W.v("MESH_PRIMITIVE_ACCESSOR_UNALIGNED",new W.iH,w.b)}),a(j,"xo","qb",function(){return W.v("MESH_PRIMITIVE_INDICES_ACCESSOR_WITH_BYTESTRIDE",new W.iP,w.b)}),a(j,"xn","qa",function(){return W.v("MESH_PRIMITIVE_INDICES_ACCESSOR_INVALID_FORMAT",new W.iO,w.b)}),a(j,"xm","q9",function(){return W.v("MESH_PRIMITIVE_INCOMPATIBLE_MODE",new W.iN,w.e)}),a(j,"xs","qe",function(){return W.v("MESH_PRIMITIVE_TOO_FEW_TEXCOORDS",new W.iM,w.b)}),a(j,"xt","qf",function(){return W.v("MESH_PRIMITIVE_UNEQUAL_ACCESSOR_COUNT",new W.iR,w.b)}),a(j,"xq","qd",function(){return W.v("MESH_PRIMITIVE_MORPH_TARGET_NO_BASE_ACCESSOR",new W.iL,w.b)}),a(j,"xp","qc",function(){return W.v("MESH_PRIMITIVE_MORPH_TARGET_INVALID_ATTRIBUTE_COUNT",new W.iK,w.b)}),a(j,"xu","qg",function(){return W.v("NODE_LOOP",new W.j3,w.b)}),a(j,"xv","qh",function(){return W.v("NODE_PARENT_OVERRIDE",new W.iS,w.b)}),a(j,"xy","qk",function(){return W.v("NODE_WEIGHTS_INVALID",new W.iV,w.b)}),a(j,"xw","qi",function(){return W.v("NODE_SKIN_WITH_NON_SKINNED_MESH",new W.iU,w.b)}),a(j,"xx","qj",function(){return W.v("NODE_SKINNED_MESH_WITHOUT_SKIN",new W.iT,w.e)}),a(j,"xz","ql",function(){return W.v("SCENE_NON_ROOT_NODE",new W.iW,w.b)}),a(j,"xB","qn",function(){return W.v("SKIN_IBM_INVALID_FORMAT",new W.iY,w.b)}),a(j,"xA","qm",function(){return W.v("SKIN_IBM_ACCESSOR_WITH_BYTESTRIDE",new W.iZ,w.b)}),a(j,"xC","ni",function(){return W.v("TEXTURE_INVALID_IMAGE_MIME_TYPE",new W.iu,w.b)}),a(j,"xD","qo",function(){return W.v("UNDECLARED_EXTENSION",new W.it,w.b)}),a(j,"xE","qp",function(){return W.v("UNEXPECTED_EXTENSION_OBJECT",new W.is,w.b)}),a(j,"xF","N",function(){return W.v("UNRESOLVED_REFERENCE",new W.j_,w.b)}),a(j,"xG","qq",function(){return W.v("UNSUPPORTED_EXTENSION",new W.j1,w.e)}),a(j,"xH","fD",function(){return W.v("UNUSED_OBJECT",new W.j2,w.i)}),a(j,"wS","pK",function(){return W.ar("GLB_INVALID_MAGIC",new W.hE,w.b)}),a(j,"wT","pL",function(){return W.ar("GLB_INVALID_VERSION",new W.hD,w.b)}),a(j,"wV","pN",function(){return W.ar("GLB_LENGTH_TOO_SMALL",new W.hC,w.b)}),a(j,"wO","pG",function(){return W.ar("GLB_CHUNK_LENGTH_UNALIGNED",new W.hM,w.b)}),a(j,"wU","pM",function(){return W.ar("GLB_LENGTH_MISMATCH",new W.hA,w.b)}),a(j,"wP","pH",function(){return W.ar("GLB_CHUNK_TOO_BIG",new W.hL,w.b)}),a(j,"wR","pJ",function(){return W.ar("GLB_EMPTY_CHUNK",new W.hH,w.b)}),a(j,"wQ","pI",function(){return W.ar("GLB_DUPLICATE_CHUNK",new W.hI,w.b)}),a(j,"wY","pQ",function(){return W.ar("GLB_UNEXPECTED_END_OF_CHUNK_HEADER",new W.hB,w.b)}),a(j,"wX","pP",function(){return W.ar("GLB_UNEXPECTED_END_OF_CHUNK_DATA",new W.hz,w.b)}),a(j,"wZ","pR",function(){return W.ar("GLB_UNEXPECTED_END_OF_HEADER",new W.hF,w.b)}),a(j,"x_","pS",function(){return W.ar("GLB_UNEXPECTED_FIRST_CHUNK",new W.hK,w.b)}),a(j,"wW","pO",function(){return W.ar("GLB_UNEXPECTED_BIN_CHUNK",new W.hJ,w.b)}),a(j,"x0","pT",function(){return W.ar("GLB_UNKNOWN_CHUNK_TYPE",new W.hG,w.e)}),a(j,"za","nr",function(){return p.ty(1)}),a(j,"zc","rm",function(){return Se.tv()}),a(j,"zg","rq",function(){return Se.of()}),a(j,"zd","rn",function(){var f=Se.tL();return f.a[3]=1,f}),a(j,"ze","ro",function(){return Se.of()})}(),function(){(function(){var i=function(R){var k={};return k[R]=1,Object.keys(ue.convertToFastObject(k))[0]};et.getIsolateTag=function(R){return i("___dart_"+R+et.isolateTag)};for(var a="___dart_isolate_tags_",f=Object[a]||(Object[a]=Object.create(null)),g="_ZxYxX",v=0;;v++){var S=i(g+"_"+v+"_");if(!(S in f)){f[S]=1,et.isolateTag=S;break}}et.dispatchPropertyName=et.getIsolateTag("dispatch_record")})(),ue.setOrUpdateInterceptorsByTag({ArrayBuffer:J.cz,DataView:p.dm,ArrayBufferView:p.dm,Float32Array:p.dk,Float64Array:p.eI,Int16Array:p.eJ,Int32Array:p.eK,Int8Array:p.eL,Uint16Array:p.eM,Uint32Array:p.eN,Uint8ClampedArray:p.dn,CanvasPixelArray:p.dn,Uint8Array:p.cf}),ue.setOrUpdateLeafTags({ArrayBuffer:!0,DataView:!0,ArrayBufferView:!1,Float32Array:!0,Float64Array:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Uint16Array:!0,Uint32Array:!0,Uint8ClampedArray:!0,CanvasPixelArray:!0,Uint8Array:!1}),p.cE.$nativeSuperclassTag="ArrayBufferView",p.dO.$nativeSuperclassTag="ArrayBufferView",p.dP.$nativeSuperclassTag="ArrayBufferView",p.dl.$nativeSuperclassTag="ArrayBufferView",p.dQ.$nativeSuperclassTag="ArrayBufferView",p.dR.$nativeSuperclassTag="ArrayBufferView",p.av.$nativeSuperclassTag="ArrayBufferView"}(),Function.prototype.$1=function(n){return this(n)},Function.prototype.$0=function(){return this()},Function.prototype.$2=function(n,i){return this(n,i)},Function.prototype.$1$1=function(n){return this(n)},Function.prototype.$3=function(n,i,a){return this(n,i,a)},Function.prototype.$1$0=function(){return this()},Function.prototype.$4=function(n,i,a,f){return this(n,i,a,f)},Function.prototype.$1$2=function(n,i){return this(n,i)},Function.prototype.$2$0=function(){return this()},H(yt),function(n){if(typeof document=="undefined"){n(null);return}if(typeof document.currentScript!="undefined"){n(document.currentScript);return}var i=document.scripts;function a(g){for(var v=0;v<i.length;++v)i[v].removeEventListener("load",a,!1);n(g.target)}for(var f=0;f<i.length;++f)i[f].addEventListener("load",a,!1)}(function(n){et.currentScript=n,typeof dartMainRunner=="function"?dartMainRunner(de.p2,[]):de.p2([])})})()})(KC);const BG=(s,e)=>KC.validateBytes(s,e);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H1=function(s,e){return H1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},H1(s,e)};function oH(s,e){H1(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Bt;(function(s){s[s.NONE=0]="NONE",s[s.ROTATE=1]="ROTATE",s[s.TRUCK=2]="TRUCK",s[s.OFFSET=3]="OFFSET",s[s.DOLLY=4]="DOLLY",s[s.ZOOM=5]="ZOOM",s[s.TOUCH_ROTATE=6]="TOUCH_ROTATE",s[s.TOUCH_TRUCK=7]="TOUCH_TRUCK",s[s.TOUCH_OFFSET=8]="TOUCH_OFFSET",s[s.TOUCH_DOLLY=9]="TOUCH_DOLLY",s[s.TOUCH_ZOOM=10]="TOUCH_ZOOM",s[s.TOUCH_DOLLY_TRUCK=11]="TOUCH_DOLLY_TRUCK",s[s.TOUCH_DOLLY_OFFSET=12]="TOUCH_DOLLY_OFFSET",s[s.TOUCH_ZOOM_TRUCK=13]="TOUCH_ZOOM_TRUCK",s[s.TOUCH_ZOOM_OFFSET=14]="TOUCH_ZOOM_OFFSET"})(Bt||(Bt={}));var qc=Math.PI*2,ZC=Math.PI/2,aH=1/.016,lH=1e-5;function Ti(s){return Math.abs(s)<lH}function uH(s,e){return Ti(s-e)}function QC(s,e){return Math.round(s/e)*e}function id(s){return isFinite(s)?s:s<0?-Number.MAX_VALUE:Number.MAX_VALUE}function sd(s){return Math.abs(s)<Number.MAX_VALUE?s:s*(1/0)}function JC(s){return"TouchEvent"in window&&s instanceof TouchEvent}function e2(s,e){if(e.set(0,0),JC(s)){for(var t=s,r=0;r<t.touches.length;r++)e.x+=t.touches[r].clientX,e.y+=t.touches[r].clientY;return e.x/=t.touches.length,e.y/=t.touches.length,e}else{var o=s;return e.set(o.clientX,o.clientY),e}}function Wg(s,e){return s.isPerspectiveCamera?!1:(console.warn(e+" is not supported in OrthographicCamera"),!0)}function t2(s){return s.invert?s.invert():s.inverse(),s}var cH=function(){function s(){this._listeners={}}return s.prototype.addEventListener=function(e,t){var r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)},s.prototype.removeEventListener=function(e,t){var r=this._listeners,o=r[e];if(o!==void 0){var l=o.indexOf(t);l!==-1&&o.splice(l,1)}},s.prototype.removeAllEventListeners=function(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)},s.prototype.dispatchEvent=function(e){var t=this._listeners,r=t[e.type];if(r!==void 0){e.target=this;for(var o=r.slice(0),l=0,c=o.length;l<c;l++)o[l].call(this,e)}},s}(),fH=typeof window!="undefined",hH=fH&&/Mac/.test(navigator.platform),dH=Object.freeze(Bt),$g=1/8,Lt,n2,jg,G1,ns,yn,En,qg,Yl,Kl,Xg,_s,od,ad,r2,V1,i2,s2,W1,Yg,UG=function(s){oH(e,s);function e(t,r){var o=s.call(this)||this;if(o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.minDistance=0,o.maxDistance=1/0,o.infinityDolly=!1,o.minZoom=.01,o.maxZoom=1/0,o.dampingFactor=.05,o.draggingDampingFactor=.25,o.azimuthRotateSpeed=1,o.polarRotateSpeed=1,o.dollySpeed=1,o.truckSpeed=2,o.dollyToCursor=!1,o.dragToOffset=!1,o.verticalDragToForward=!1,o.boundaryFriction=0,o.colliderMeshes=[],o.cancel=function(){},o._enabled=!0,o._state=Bt.NONE,o._viewport=null,o._dollyControlAmount=0,o._boundaryEnclosesCamera=!1,o._needsUpdate=!0,o._updatedLastTime=!1,typeof Lt=="undefined"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),o._camera=t,o._yAxisUpSpace=new Lt.Quaternion().setFromUnitVectors(o._camera.up,jg),o._yAxisUpSpaceInverse=t2(o._yAxisUpSpace.clone()),o._state=Bt.NONE,o._domElement=r,o._target=new Lt.Vector3,o._targetEnd=o._target.clone(),o._focalOffset=new Lt.Vector3,o._focalOffsetEnd=o._focalOffset.clone(),o._spherical=new Lt.Spherical().setFromVector3(yn.copy(o._camera.position).applyQuaternion(o._yAxisUpSpace)),o._sphericalEnd=o._spherical.clone(),o._zoom=o._camera.zoom,o._zoomEnd=o._zoom,o._nearPlaneCorners=[new Lt.Vector3,new Lt.Vector3,new Lt.Vector3,new Lt.Vector3],o._updateNearPlaneCorners(),o._boundary=new Lt.Box3(new Lt.Vector3(-1/0,-1/0,-1/0),new Lt.Vector3(1/0,1/0,1/0)),o._target0=o._target.clone(),o._position0=o._camera.position.clone(),o._zoom0=o._zoom,o._focalOffset0=o._focalOffset.clone(),o._dollyControlAmount=0,o._dollyControlCoord=new Lt.Vector2,o.mouseButtons={left:Bt.ROTATE,middle:Bt.DOLLY,right:Bt.TRUCK,wheel:o._camera.isPerspectiveCamera?Bt.DOLLY:o._camera.isOrthographicCamera?Bt.ZOOM:Bt.NONE},o.touches={one:Bt.TOUCH_ROTATE,two:o._camera.isPerspectiveCamera?Bt.TOUCH_DOLLY_TRUCK:o._camera.isOrthographicCamera?Bt.TOUCH_ZOOM_TRUCK:Bt.NONE,three:Bt.TOUCH_TRUCK},o._domElement){var l=new Lt.Vector2,c=new Lt.Vector2,h=new Lt.Vector2,m=new Lt.Vector4,y=function(z,q,Z){if(o._camera.isPerspectiveCamera){var ae=o._camera,ce=yn.copy(ae.position).sub(o._target),ee=ae.getEffectiveFOV()*Lt.MathUtils.DEG2RAD,ue=ce.length()*Math.tan(ee*.5),le=o.truckSpeed*z*ue/m.w,w=o.truckSpeed*q*ue/m.w;o.verticalDragToForward?(Z?o.setFocalOffset(o._focalOffsetEnd.x+le,o._focalOffsetEnd.y,o._focalOffsetEnd.z,!0):o.truck(le,0,!0),o.forward(-w,!0)):Z?o.setFocalOffset(o._focalOffsetEnd.x+le,o._focalOffsetEnd.y+w,o._focalOffsetEnd.z,!0):o.truck(le,w,!0)}else if(o._camera.isOrthographicCamera){var p=o._camera,le=z*(p.right-p.left)/p.zoom/m.z,w=q*(p.top-p.bottom)/p.zoom/m.w;Z?o.setFocalOffset(o._focalOffsetEnd.x+le,o._focalOffsetEnd.y+w,o._focalOffsetEnd.z,!0):o.truck(le,w,!0)}},b=function(z,q){var Z=qc*o.azimuthRotateSpeed*z/m.w,ae=qc*o.polarRotateSpeed*q/m.w;o.rotate(Z,ae,!0)},M=function(z,q,Z){var ae=Math.pow(.95,-z*o.dollySpeed),ce=o._sphericalEnd.radius*ae,ee=o._sphericalEnd.radius;o.dollyTo(ce),o.infinityDolly&&ce<o.minDistance&&(o._camera.getWorldDirection(yn),o._targetEnd.add(yn.normalize().multiplyScalar(ee)),o._target.add(yn.normalize().multiplyScalar(ee))),o.dollyToCursor&&(o._dollyControlAmount+=o._sphericalEnd.radius-ee,o._dollyControlCoord.set(q,Z))},C=function(z){var q=Math.pow(.95,z*o.dollySpeed);o.zoomTo(o._zoom*q)},I=function(){o._state=Bt.NONE,document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L,{passive:!1}),document.removeEventListener("mouseup",B),document.removeEventListener("touchend",B)},O=function(z){if(!!o._enabled){switch(I(),z.button){case Lt.MOUSE.LEFT:o._state=o.mouseButtons.left;break;case Lt.MOUSE.MIDDLE:o._state=o.mouseButtons.middle;break;case Lt.MOUSE.RIGHT:o._state=o.mouseButtons.right;break}F(z)}},U=function(z){if(!!o._enabled){switch(I(),z.touches.length){case 1:o._state=o.touches.one;break;case 2:o._state=o.touches.two;break;case 3:o._state=o.touches.three;break}F(z)}},H=-1,P=function(z){if(!(!o._enabled||o.mouseButtons.wheel===Bt.NONE)){if(z.preventDefault(),o.dollyToCursor||o.mouseButtons.wheel===Bt.ROTATE||o.mouseButtons.wheel===Bt.TRUCK){var q=performance.now();H-q<1e3&&o._getClientRect(m),H=q}var Z=hH?-1:-3,ae=z.deltaMode===1?z.deltaY/Z:z.deltaY/(Z*10),ce=o.dollyToCursor?(z.clientX-m.x)/m.z*2-1:0,ee=o.dollyToCursor?(z.clientY-m.y)/m.w*-2+1:0;switch(o.mouseButtons.wheel){case Bt.ROTATE:{b(z.deltaX,z.deltaY);break}case Bt.TRUCK:{y(z.deltaX,z.deltaY,!1);break}case Bt.OFFSET:{y(z.deltaX,z.deltaY,!0);break}case Bt.DOLLY:{M(-ae,ce,ee);break}case Bt.ZOOM:{C(-ae);break}}o.dispatchEvent({type:"control",originalEvent:z})}},A=function(z){!o._enabled||z.preventDefault()},F=function(z){if(!!o._enabled){e2(z,ns),o._getClientRect(m),l.copy(ns),c.copy(ns);var q=JC(z)&&z.touches.length>=2;if(q){var Z=z,ae=ns.x-Z.touches[1].clientX,ce=ns.y-Z.touches[1].clientY,ee=Math.sqrt(ae*ae+ce*ce);h.set(0,ee);var ue=(Z.touches[0].clientX+Z.touches[1].clientX)*.5,le=(Z.touches[0].clientY+Z.touches[1].clientY)*.5;c.set(ue,le)}document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("mouseup",B),document.addEventListener("touchend",B),o.dispatchEvent({type:"controlstart",originalEvent:z})}},L=function(z){if(!!o._enabled){z.preventDefault(),e2(z,ns);var q=c.x-ns.x,Z=c.y-ns.y;switch(c.copy(ns),o._state){case Bt.ROTATE:case Bt.TOUCH_ROTATE:{b(q,Z);break}case Bt.DOLLY:case Bt.ZOOM:{var ae=o.dollyToCursor?(l.x-m.x)/m.z*2-1:0,ce=o.dollyToCursor?(l.y-m.y)/m.w*-2+1:0;o._state===Bt.DOLLY?M(Z*$g,ae,ce):C(Z*$g);break}case Bt.TOUCH_DOLLY:case Bt.TOUCH_ZOOM:case Bt.TOUCH_DOLLY_TRUCK:case Bt.TOUCH_ZOOM_TRUCK:case Bt.TOUCH_DOLLY_OFFSET:case Bt.TOUCH_ZOOM_OFFSET:{var ee=z,ue=ns.x-ee.touches[1].clientX,le=ns.y-ee.touches[1].clientY,w=Math.sqrt(ue*ue+le*le),p=h.y-w;h.set(0,w);var ae=o.dollyToCursor?(c.x-m.x)/m.z*2-1:0,ce=o.dollyToCursor?(c.y-m.y)/m.w*-2+1:0;o._state===Bt.TOUCH_DOLLY||o._state===Bt.TOUCH_DOLLY_TRUCK?M(p*$g,ae,ce):C(p*$g),o._state===Bt.TOUCH_DOLLY_TRUCK||o._state===Bt.TOUCH_ZOOM_TRUCK?y(q,Z,!1):(o._state===Bt.TOUCH_DOLLY_OFFSET||o._state===Bt.TOUCH_ZOOM_OFFSET)&&y(q,Z,!0);break}case Bt.TRUCK:case Bt.TOUCH_TRUCK:{y(q,Z,!1);break}case Bt.OFFSET:case Bt.TOUCH_OFFSET:{y(q,Z,!0);break}}o.dispatchEvent({type:"control",originalEvent:z})}},B=function(z){!o._enabled||(I(),o.dispatchEvent({type:"controlend",originalEvent:z}))};o._domElement.addEventListener("mousedown",O),o._domElement.addEventListener("touchstart",U),o._domElement.addEventListener("wheel",P),o._domElement.addEventListener("contextmenu",A),o._removeAllEventListeners=function(){o._domElement.removeEventListener("mousedown",O),o._domElement.removeEventListener("touchstart",U),o._domElement.removeEventListener("wheel",P),o._domElement.removeEventListener("contextmenu",A),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L,{passive:!1}),document.removeEventListener("mouseup",B),document.removeEventListener("touchend",B)},o.cancel=function(){I(),o.dispatchEvent({type:"controlend",originalEvent:null})}}return o.update(0),o}return e.install=function(t){Lt=t.THREE,n2=Object.freeze(new Lt.Vector3(0,0,0)),jg=Object.freeze(new Lt.Vector3(0,1,0)),G1=Object.freeze(new Lt.Vector3(0,0,1)),ns=new Lt.Vector2,yn=new Lt.Vector3,En=new Lt.Vector3,qg=new Lt.Vector3,Yl=new Lt.Vector3,Kl=new Lt.Vector3,Xg=new Lt.Vector3,_s=new Lt.Spherical,od=new Lt.Spherical,ad=new Lt.Box3,r2=new Lt.Box3,V1=new Lt.Sphere,i2=new Lt.Quaternion,s2=new Lt.Quaternion,W1=new Lt.Matrix4,Yg=new Lt.Raycaster},Object.defineProperty(e,"ACTION",{get:function(){return dH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,t||this.cancel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAction",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._spherical.radius},set:function(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"azimuthAngle",{get:function(){return this._spherical.theta},set:function(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polarAngle",{get:function(){return this._spherical.phi},set:function(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phiSpeed",{set:function(t){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thetaSpeed",{set:function(t){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(t,r){s.prototype.addEventListener.call(this,t,r)},e.prototype.removeEventListener=function(t,r){s.prototype.removeEventListener.call(this,t,r)},e.prototype.rotate=function(t,r,o){o===void 0&&(o=!1),this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,o)},e.prototype.rotateTo=function(t,r,o){o===void 0&&(o=!1);var l=Lt.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),c=Lt.MathUtils.clamp(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=l,this._sphericalEnd.phi=c,this._sphericalEnd.makeSafe(),o||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._needsUpdate=!0},e.prototype.dolly=function(t,r){r===void 0&&(r=!1),this.dollyTo(this._sphericalEnd.radius-t,r)},e.prototype.dollyTo=function(t,r){r===void 0&&(r=!1),!Wg(this._camera,"dolly")&&(this._sphericalEnd.radius=Lt.MathUtils.clamp(t,this.minDistance,this.maxDistance),r||(this._spherical.radius=this._sphericalEnd.radius),this._needsUpdate=!0)},e.prototype.zoom=function(t,r){r===void 0&&(r=!1),this.zoomTo(this._zoomEnd+t,r)},e.prototype.zoomTo=function(t,r){r===void 0&&(r=!1),this._zoomEnd=Lt.MathUtils.clamp(t,this.minZoom,this.maxZoom),r||(this._zoom=this._zoomEnd),this._needsUpdate=!0},e.prototype.pan=function(t,r,o){o===void 0&&(o=!1),console.log("`pan` has been renamed to `truck`"),this.truck(t,r,o)},e.prototype.truck=function(t,r,o){o===void 0&&(o=!1),this._camera.updateMatrix(),Yl.setFromMatrixColumn(this._camera.matrix,0),Kl.setFromMatrixColumn(this._camera.matrix,1),Yl.multiplyScalar(t),Kl.multiplyScalar(-r);var l=yn.copy(Yl).add(Kl);this._encloseToBoundary(this._targetEnd,l,this.boundaryFriction),o||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.forward=function(t,r){r===void 0&&(r=!1),yn.setFromMatrixColumn(this._camera.matrix,0),yn.crossVectors(this._camera.up,yn),yn.multiplyScalar(t),this._encloseToBoundary(this._targetEnd,yn,this.boundaryFriction),r||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.moveTo=function(t,r,o,l){l===void 0&&(l=!1),this._targetEnd.set(t,r,o),l||this._target.copy(this._targetEnd),this._needsUpdate=!0},e.prototype.fitToBox=function(t,r,o){var l=o===void 0?{}:o,c=l.paddingLeft,h=c===void 0?0:c,m=l.paddingRight,y=m===void 0?0:m,b=l.paddingBottom,M=b===void 0?0:b,C=l.paddingTop,I=C===void 0?0:C,O=t.isBox3?ad.copy(t):ad.setFromObject(t);if(O.isEmpty()){console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting");return}var U=QC(this._sphericalEnd.theta,ZC),H=QC(this._sphericalEnd.phi,ZC);this.rotateTo(U,H,r);var P=yn.setFromSpherical(this._sphericalEnd).normalize(),A=i2.setFromUnitVectors(P,G1),F=uH(Math.abs(P.y),1);F&&A.multiply(s2.setFromAxisAngle(jg,U));var L=r2.makeEmpty();En.copy(O.min).applyQuaternion(A),L.expandByPoint(En),En.copy(O.min).setX(O.max.x).applyQuaternion(A),L.expandByPoint(En),En.copy(O.min).setY(O.max.y).applyQuaternion(A),L.expandByPoint(En),En.copy(O.max).setZ(O.min.z).applyQuaternion(A),L.expandByPoint(En),En.copy(O.min).setZ(O.max.z).applyQuaternion(A),L.expandByPoint(En),En.copy(O.max).setY(O.min.y).applyQuaternion(A),L.expandByPoint(En),En.copy(O.max).setX(O.min.x).applyQuaternion(A),L.expandByPoint(En),En.copy(O.max).applyQuaternion(A),L.expandByPoint(En),A.setFromUnitVectors(G1,P),L.min.x-=h,L.min.y-=M,L.max.x+=y,L.max.y+=I;var B=L.getSize(yn),z=L.getCenter(En).applyQuaternion(A),q=this._camera.isPerspectiveCamera,Z=this._camera.isOrthographicCamera;if(q){var ae=this.getDistanceToFitBox(B.x,B.y,B.z);this.moveTo(z.x,z.y,z.z,r),this.dollyTo(ae,r),this.setFocalOffset(0,0,0,r);return}else if(Z){var ce=this._camera,ee=ce.right-ce.left,ue=ce.top-ce.bottom,le=Math.min(ee/B.x,ue/B.y);this.moveTo(z.x,z.y,z.z,r),this.zoomTo(le,r),this.setFocalOffset(0,0,0,r);return}},e.prototype.fitTo=function(t,r,o){o===void 0&&(o={}),console.warn("camera-controls: fitTo() has been renamed to fitToBox()"),this.fitToBox(t,r,o)},e.prototype.fitToSphere=function(t,r){var o=t instanceof Lt.Sphere,l=o?V1.copy(t):pH(t,V1),c=this.getDistanceToFitSphere(l.radius);this.moveTo(l.center.x,l.center.y,l.center.z,r),this.dollyTo(c,r),this.setFocalOffset(0,0,0,r)},e.prototype.setLookAt=function(t,r,o,l,c,h,m){m===void 0&&(m=!1);var y=yn.set(t,r,o),b=En.set(l,c,h);this._targetEnd.copy(b),this._sphericalEnd.setFromVector3(y.sub(b).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.lerpLookAt=function(t,r,o,l,c,h,m,y,b,M,C,I,O,U){U===void 0&&(U=!1);var H=yn.set(t,r,o),P=En.set(l,c,h);_s.setFromVector3(H.sub(P).applyQuaternion(this._yAxisUpSpace));var A=yn.set(M,C,I);this._targetEnd.copy(P).lerp(A,O);var F=En.set(m,y,b);od.setFromVector3(F.sub(A).applyQuaternion(this._yAxisUpSpace));var L=od.theta-_s.theta,B=od.phi-_s.phi,z=od.radius-_s.radius;this._sphericalEnd.set(_s.radius+z*O,_s.phi+B*O,_s.theta+L*O),this.normalizeRotations(),U||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._needsUpdate=!0},e.prototype.setPosition=function(t,r,o,l){l===void 0&&(l=!1),this.setLookAt(t,r,o,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,l)},e.prototype.setTarget=function(t,r,o,l){l===void 0&&(l=!1);var c=this.getPosition(yn);this.setLookAt(c.x,c.y,c.z,t,r,o,l)},e.prototype.setFocalOffset=function(t,r,o,l){l===void 0&&(l=!1),this._focalOffsetEnd.set(t,r,o),l||this._focalOffset.copy(this._focalOffsetEnd),this._needsUpdate=!0},e.prototype.setBoundary=function(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0},e.prototype.setViewport=function(t,r,o,l){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Lt.Vector4,typeof t=="number"?this._viewport.set(t,r,o,l):this._viewport.copy(t)},e.prototype.getDistanceToFitBox=function(t,r,o){if(Wg(this._camera,"getDistanceToFit"))return this._spherical.radius;var l=this._camera,c=t/r,h=l.getEffectiveFOV()*Lt.MathUtils.DEG2RAD,m=l.aspect,y=c<m?r:t/m;return y*.5/Math.tan(h*.5)+o*.5},e.prototype.getDistanceToFit=function(t,r,o){return console.warn("camera-controls: getDistanceToFit() has been renamed to getDistanceToFitBox()"),this.getDistanceToFitBox(t,r,o)},e.prototype.getDistanceToFitSphere=function(t){if(Wg(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var r=this._camera,o=r.getEffectiveFOV()*Lt.MathUtils.DEG2RAD,l=Math.atan(Math.tan(o*.5)*r.aspect)*2,c=1<r.aspect?o:l;return t/Math.sin(c*.5)},e.prototype.getTarget=function(t){var r=!!t&&t.isVector3?t:new Lt.Vector3;return r.copy(this._targetEnd)},e.prototype.getPosition=function(t){var r=!!t&&t.isVector3?t:new Lt.Vector3;return r.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},e.prototype.getFocalOffset=function(t){var r=!!t&&t.isVector3?t:new Lt.Vector3;return r.copy(this._focalOffsetEnd)},e.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%qc,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=qc),this._spherical.theta+=qc*Math.round((this._sphericalEnd.theta-this._spherical.theta)/qc)},e.prototype.reset=function(t){t===void 0&&(t=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)},e.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},e.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,jg),t2(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))},e.prototype.update=function(t){var r=this._state===Bt.NONE?this.dampingFactor:this.draggingDampingFactor,o=1-Math.exp(-r*t*aH),l=this._sphericalEnd.theta-this._spherical.theta,c=this._sphericalEnd.phi-this._spherical.phi,h=this._sphericalEnd.radius-this._spherical.radius,m=yn.subVectors(this._targetEnd,this._target),y=En.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Ti(l)||!Ti(c)||!Ti(h)||!Ti(m.x)||!Ti(m.y)||!Ti(m.z)||!Ti(y.x)||!Ti(y.y)||!Ti(y.z)?(this._spherical.set(this._spherical.radius+h*o,this._spherical.phi+c*o,this._spherical.theta+l*o),this._target.add(m.multiplyScalar(o)),this._focalOffset.add(y.multiplyScalar(o)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(this._camera.isPerspectiveCamera){var b=this._camera,M=yn.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),C=En.copy(M).cross(b.up).normalize();C.lengthSq()===0&&(C.x=1);var I=qg.crossVectors(C,M),O=this._sphericalEnd.radius*Math.tan(b.getEffectiveFOV()*Lt.MathUtils.DEG2RAD*.5),U=this._sphericalEnd.radius-this._dollyControlAmount,H=(U-this._sphericalEnd.radius)/this._sphericalEnd.radius,P=yn.copy(this._targetEnd).add(C.multiplyScalar(this._dollyControlCoord.x*O*b.aspect)).add(I.multiplyScalar(this._dollyControlCoord.y*O));this._targetEnd.lerp(P,H),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var A=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,A),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);var F=!Ti(this._focalOffset.x)||!Ti(this._focalOffset.y)||!Ti(this._focalOffset.z);F&&(this._camera.updateMatrix(),Yl.setFromMatrixColumn(this._camera.matrix,0),Kl.setFromMatrixColumn(this._camera.matrix,1),Xg.setFromMatrixColumn(this._camera.matrix,2),Yl.multiplyScalar(this._focalOffset.x),Kl.multiplyScalar(-this._focalOffset.y),Xg.multiplyScalar(this._focalOffset.z),yn.copy(Yl).add(Kl).add(Xg),this._camera.position.add(yn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),yn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var L=this._zoomEnd-this._zoom;this._zoom+=L*o,this._camera.zoom!==this._zoom&&(Ti(L)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var B=this._needsUpdate;return B&&!this._updatedLastTime?(this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):B?this.dispatchEvent({type:"update"}):!B&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=B,this._needsUpdate=!1,B},e.prototype.toJSON=function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:id(this.maxDistance),minZoom:this.minZoom,maxZoom:id(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:id(this.maxPolarAngle),minAzimuthAngle:id(this.minAzimuthAngle),maxAzimuthAngle:id(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:yn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})},e.prototype.fromJSON=function(t,r){r===void 0&&(r=!1);var o=JSON.parse(t),l=yn.fromArray(o.position);this.enabled=o.enabled,this.minDistance=o.minDistance,this.maxDistance=sd(o.maxDistance),this.minZoom=o.minZoom,this.maxZoom=sd(o.maxZoom),this.minPolarAngle=o.minPolarAngle,this.maxPolarAngle=sd(o.maxPolarAngle),this.minAzimuthAngle=sd(o.minAzimuthAngle),this.maxAzimuthAngle=sd(o.maxAzimuthAngle),this.dampingFactor=o.dampingFactor,this.draggingDampingFactor=o.draggingDampingFactor,this.dollySpeed=o.dollySpeed,this.truckSpeed=o.truckSpeed,this.dollyToCursor=o.dollyToCursor,this.verticalDragToForward=o.verticalDragToForward,this._target0.fromArray(o.target0),this._position0.fromArray(o.position0),this._zoom0=o.zoom0,this._focalOffset0.fromArray(o.focalOffset0),this.moveTo(o.target[0],o.target[1],o.target[2],r),_s.setFromVector3(l.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_s.theta,_s.phi,r),this.zoomTo(o.zoom,r),this.setFocalOffset(o.focalOffset[0],o.focalOffset[1],o.focalOffset[2],r),this._needsUpdate=!0},e.prototype.dispose=function(){this._removeAllEventListeners()},e.prototype._encloseToBoundary=function(t,r,o){var l=r.lengthSq();if(l===0)return t;var c=En.copy(r).add(t),h=this._boundary.clampPoint(c,qg),m=h.sub(c),y=m.lengthSq();if(y===0)return t.add(r);if(y===l)return t;if(o===0)return t.add(r).add(m);var b=1+o*y/r.dot(m);return t.add(En.copy(r).multiplyScalar(b)).add(m.multiplyScalar(1-o))},e.prototype._updateNearPlaneCorners=function(){if(this._camera.isPerspectiveCamera){var t=this._camera,r=t.near,o=t.getEffectiveFOV()*Lt.MathUtils.DEG2RAD,l=Math.tan(o*.5)*r,c=l*t.aspect;this._nearPlaneCorners[0].set(-c,-l,0),this._nearPlaneCorners[1].set(c,-l,0),this._nearPlaneCorners[2].set(c,l,0),this._nearPlaneCorners[3].set(-c,l,0)}else if(this._camera.isOrthographicCamera){var t=this._camera,h=1/t.zoom,m=t.left*h,y=t.right*h,b=t.top*h,M=t.bottom*h;this._nearPlaneCorners[0].set(m,b,0),this._nearPlaneCorners[1].set(y,b,0),this._nearPlaneCorners[2].set(y,M,0),this._nearPlaneCorners[3].set(m,M,0)}},e.prototype._collisionTest=function(){var t=1/0,r=this.colliderMeshes.length>=1;if(!r||Wg(this._camera,"_collisionTest"))return t;t=this._spherical.radius;var o=yn.setFromSpherical(this._spherical).divideScalar(t);W1.lookAt(n2,o,this._camera.up);for(var l=0;l<4;l++){var c=En.copy(this._nearPlaneCorners[l]);c.applyMatrix4(W1);var h=qg.addVectors(this._target,c);Yg.set(h,o),Yg.far=t;var m=Yg.intersectObjects(this.colliderMeshes);m.length!==0&&m[0].distance<t&&(t=m[0].distance)}return t},e.prototype._getClientRect=function(t){var r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.z=this._viewport.z,t.w=this._viewport.w):(t.z=r.width,t.w=r.height),t},e.prototype._removeAllEventListeners=function(){},e}(cH);function pH(s,e){var t=e,r=t.center;s.traverse(function(l){!l.isMesh||ad.expandByObject(l)}),ad.getCenter(r);var o=0;return s.traverse(function(l){if(!!l.isMesh){var c=l,h=c.geometry.clone();if(h.applyMatrix4(c.matrixWorld),c.geometry.isBufferGeometry)for(var m=h,y=m.attributes.position,b=0,M=y.count;b<M;b++)yn.fromBufferAttribute(y,b),o=Math.max(o,r.distanceToSquared(yn));else for(var C=h.vertices,b=0,M=C.length;b<M;b++)o=Math.max(o,r.distanceToSquared(C[b]))}}),t.radius=Math.sqrt(o),t}var ld={exports:{}},un={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o2=Object.getOwnPropertySymbols,mH=Object.prototype.hasOwnProperty,gH=Object.prototype.propertyIsEnumerable;function vH(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function yH(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(l){return e[l]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var a2=yH()?Object.assign:function(s,e){for(var t,r=vH(s),o,l=1;l<arguments.length;l++){t=Object(arguments[l]);for(var c in t)mH.call(t,c)&&(r[c]=t[c]);if(o2){o=o2(t);for(var h=0;h<o.length;h++)gH.call(t,o[h])&&(r[o[h]]=t[o[h]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=a2,Xc=60103,l2=60106;un.Fragment=60107;un.StrictMode=60108;un.Profiler=60114;var u2=60109,c2=60110,f2=60112;un.Suspense=60113;var h2=60115,d2=60116;if(typeof Symbol=="function"&&Symbol.for){var ws=Symbol.for;Xc=ws("react.element"),l2=ws("react.portal"),un.Fragment=ws("react.fragment"),un.StrictMode=ws("react.strict_mode"),un.Profiler=ws("react.profiler"),u2=ws("react.provider"),c2=ws("react.context"),f2=ws("react.forward_ref"),un.Suspense=ws("react.suspense"),h2=ws("react.memo"),d2=ws("react.lazy")}var p2=typeof Symbol=="function"&&Symbol.iterator;function xH(s){return s===null||typeof s!="object"?null:(s=p2&&s[p2]||s["@@iterator"],typeof s=="function"?s:null)}function ud(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g2={};function Yc(s,e,t){this.props=s,this.context=e,this.refs=g2,this.updater=t||m2}Yc.prototype.isReactComponent={};Yc.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error(ud(85));this.updater.enqueueSetState(this,s,e,"setState")};Yc.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function v2(){}v2.prototype=Yc.prototype;function j1(s,e,t){this.props=s,this.context=e,this.refs=g2,this.updater=t||m2}var q1=j1.prototype=new v2;q1.constructor=j1;$1(q1,Yc.prototype);q1.isPureReactComponent=!0;var X1={current:null},y2=Object.prototype.hasOwnProperty,x2={key:!0,ref:!0,__self:!0,__source:!0};function _2(s,e,t){var r,o={},l=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(l=""+e.key),e)y2.call(e,r)&&!x2.hasOwnProperty(r)&&(o[r]=e[r]);var h=arguments.length-2;if(h===1)o.children=t;else if(1<h){for(var m=Array(h),y=0;y<h;y++)m[y]=arguments[y+2];o.children=m}if(s&&s.defaultProps)for(r in h=s.defaultProps,h)o[r]===void 0&&(o[r]=h[r]);return{$$typeof:Xc,type:s,key:l,ref:c,props:o,_owner:X1.current}}function _H(s,e){return{$$typeof:Xc,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function Y1(s){return typeof s=="object"&&s!==null&&s.$$typeof===Xc}function wH(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var w2=/\/+/g;function K1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?wH(""+s.key):e.toString(36)}function Kg(s,e,t,r,o){var l=typeof s;(l==="undefined"||l==="boolean")&&(s=null);var c=!1;if(s===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(s.$$typeof){case Xc:case l2:c=!0}}if(c)return c=s,o=o(c),s=r===""?"."+K1(c,0):r,Array.isArray(o)?(t="",s!=null&&(t=s.replace(w2,"$&/")+"/"),Kg(o,e,t,"",function(y){return y})):o!=null&&(Y1(o)&&(o=_H(o,t+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(w2,"$&/")+"/")+s)),e.push(o)),1;if(c=0,r=r===""?".":r+":",Array.isArray(s))for(var h=0;h<s.length;h++){l=s[h];var m=r+K1(l,h);c+=Kg(l,e,t,m,o)}else if(m=xH(s),typeof m=="function")for(s=m.call(s),h=0;!(l=s.next()).done;)l=l.value,m=r+K1(l,h++),c+=Kg(l,e,t,m,o);else if(l==="object")throw e=""+s,Error(ud(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e));return c}function Zg(s,e,t){if(s==null)return s;var r=[],o=0;return Kg(s,r,"","",function(l){return e.call(t,l,o++)}),r}function bH(s){if(s._status===-1){var e=s._result;e=e(),s._status=0,s._result=e,e.then(function(t){s._status===0&&(t=t.default,s._status=1,s._result=t)},function(t){s._status===0&&(s._status=2,s._result=t)})}if(s._status===1)return s._result;throw s._result}var b2={current:null};function Eo(){var s=b2.current;if(s===null)throw Error(ud(321));return s}var SH={ReactCurrentDispatcher:b2,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:X1,IsSomeRendererActing:{current:!1},assign:$1};un.Children={map:Zg,forEach:function(s,e,t){Zg(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return Zg(s,function(){e++}),e},toArray:function(s){return Zg(s,function(e){return e})||[]},only:function(s){if(!Y1(s))throw Error(ud(143));return s}};un.Component=Yc;un.PureComponent=j1;un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SH;un.cloneElement=function(s,e,t){if(s==null)throw Error(ud(267,s));var r=$1({},s.props),o=s.key,l=s.ref,c=s._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,c=X1.current),e.key!==void 0&&(o=""+e.key),s.type&&s.type.defaultProps)var h=s.type.defaultProps;for(m in e)y2.call(e,m)&&!x2.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=t;else if(1<m){h=Array(m);for(var y=0;y<m;y++)h[y]=arguments[y+2];r.children=h}return{$$typeof:Xc,type:s.type,key:o,ref:l,props:r,_owner:c}};un.createContext=function(s,e){return e===void 0&&(e=null),s={$$typeof:c2,_calculateChangedBits:e,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider={$$typeof:u2,_context:s},s.Consumer=s};un.createElement=_2;un.createFactory=function(s){var e=_2.bind(null,s);return e.type=s,e};un.createRef=function(){return{current:null}};un.forwardRef=function(s){return{$$typeof:f2,render:s}};un.isValidElement=Y1;un.lazy=function(s){return{$$typeof:d2,_payload:{_status:-1,_result:s},_init:bH}};un.memo=function(s,e){return{$$typeof:h2,type:s,compare:e===void 0?null:e}};un.useCallback=function(s,e){return Eo().useCallback(s,e)};un.useContext=function(s,e){return Eo().useContext(s,e)};un.useDebugValue=function(){};un.useEffect=function(s,e){return Eo().useEffect(s,e)};un.useImperativeHandle=function(s,e,t){return Eo().useImperativeHandle(s,e,t)};un.useLayoutEffect=function(s,e){return Eo().useLayoutEffect(s,e)};un.useMemo=function(s,e){return Eo().useMemo(s,e)};un.useReducer=function(s,e,t){return Eo().useReducer(s,e,t)};un.useRef=function(s){return Eo().useRef(s)};un.useState=function(s){return Eo().useState(s)};un.version="17.0.2";ld.exports=un;var zG=ld.exports,Qg={exports:{}},cd={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MH=ld.exports,S2=60103;cd.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var M2=Symbol.for;S2=M2("react.element"),cd.Fragment=M2("react.fragment")}var TH=MH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EH=Object.prototype.hasOwnProperty,AH={key:!0,ref:!0,__self:!0,__source:!0};function T2(s,e,t){var r,o={},l=null,c=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)EH.call(e,r)&&!AH.hasOwnProperty(r)&&(o[r]=e[r]);if(s&&s.defaultProps)for(r in e=s.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:S2,type:s,key:l,ref:c,props:o,_owner:TH.current}}cd.jsx=T2;cd.jsxs=T2;Qg.exports=cd;const CH=Qg.exports.jsx,RH=Qg.exports.jsxs,LH=Qg.exports.Fragment;var IH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsx:CH,jsxs:RH,Fragment:LH}),Zl={exports:{}};(function(s,e){(function(t,r){s.exports=r()})(z1,function(){var t=navigator.userAgent,r=navigator.platform,o=/gecko\/\d/i.test(t),l=/MSIE \d/.test(t),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),h=/Edge\/(\d+)/.exec(t),m=l||c||h,y=m&&(l?document.documentMode||6:+(h||c)[1]),b=!h&&/WebKit\//.test(t),M=b&&/Qt\/\d+\.\d+/.test(t),C=!h&&/Chrome\//.test(t),I=/Opera\//.test(t),O=/Apple Computer/.test(navigator.vendor),U=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),H=/PhantomJS/.test(t),P=O&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),A=/Android/.test(t),F=P||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),L=P||/Mac/.test(r),B=/\bCrOS\b/.test(t),z=/win/i.test(r),q=I&&t.match(/Version\/(\d*\.\d*)/);q&&(q=Number(q[1])),q&&q>=15&&(I=!1,b=!0);var Z=L&&(M||I&&(q==null||q<12.11)),ae=o||m&&y>=9;function ce(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var ee=function(u,d){var _=u.className,x=ce(d).exec(_);if(x){var T=_.slice(x.index+x[0].length);u.className=_.slice(0,x.index)+(T?x[1]+T:"")}};function ue(u){for(var d=u.childNodes.length;d>0;--d)u.removeChild(u.firstChild);return u}function le(u,d){return ue(u).appendChild(d)}function w(u,d,_,x){var T=document.createElement(u);if(_&&(T.className=_),x&&(T.style.cssText=x),typeof d=="string")T.appendChild(document.createTextNode(d));else if(d)for(var N=0;N<d.length;++N)T.appendChild(d[N]);return T}function p(u,d,_,x){var T=w(u,d,_,x);return T.setAttribute("role","presentation"),T}var J;document.createRange?J=function(u,d,_,x){var T=document.createRange();return T.setEnd(x||u,_),T.setStart(u,d),T}:J=function(u,d,_){var x=document.body.createTextRange();try{x.moveToElementText(u.parentNode)}catch{return x}return x.collapse(!0),x.moveEnd("character",_),x.moveStart("character",d),x};function E(u,d){if(d.nodeType==3&&(d=d.parentNode),u.contains)return u.contains(d);do if(d.nodeType==11&&(d=d.host),d==u)return!0;while(d=d.parentNode)}function ge(){var u;try{u=document.activeElement}catch{u=document.body||null}for(;u&&u.shadowRoot&&u.shadowRoot.activeElement;)u=u.shadowRoot.activeElement;return u}function ke(u,d){var _=u.className;ce(d).test(_)||(u.className+=(_?" ":"")+d)}function Se(u,d){for(var _=u.split(" "),x=0;x<_.length;x++)_[x]&&!ce(_[x]).test(d)&&(d+=" "+_[x]);return d}var de=function(u){u.select()};P?de=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:m&&(de=function(u){try{u.select()}catch{}});function ye(u){var d=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,d)}}function Re(u,d,_){d||(d={});for(var x in u)u.hasOwnProperty(x)&&(_!==!1||!d.hasOwnProperty(x))&&(d[x]=u[x]);return d}function we(u,d,_,x,T){d==null&&(d=u.search(/[^\s\u00a0]/),d==-1&&(d=u.length));for(var N=x||0,$=T||0;;){var Y=u.indexOf("	",N);if(Y<0||Y>=d)return $+(d-N);$+=Y-N,$+=_-$%_,N=Y+1}}var be=function(){this.id=null,this.f=null,this.time=0,this.handler=ye(this.onTimeout,this)};be.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},be.prototype.set=function(u,d){this.f=d;var _=+new Date+u;(!this.id||_<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=_)};function Ue(u,d){for(var _=0;_<u.length;++_)if(u[_]==d)return _;return-1}var Ce=50,$e={toString:function(){return"CodeMirror.Pass"}},ze={scroll:!1},W={origin:"*mouse"},Ve={origin:"+move"};function Le(u,d,_){for(var x=0,T=0;;){var N=u.indexOf("	",x);N==-1&&(N=u.length);var $=N-x;if(N==u.length||T+$>=d)return x+Math.min($,d-T);if(T+=N-x,T+=_-T%_,x=N+1,T>=d)return x}}var Be=[""];function Ye(u){for(;Be.length<=u;)Be.push(De(Be)+" ");return Be[u]}function De(u){return u[u.length-1]}function oe(u,d){for(var _=[],x=0;x<u.length;x++)_[x]=d(u[x],x);return _}function yt(u,d,_){for(var x=0,T=_(d);x<u.length&&_(u[x])<=T;)x++;u.splice(x,0,d)}function j(){}function et(u,d){var _;return Object.create?_=Object.create(u):(j.prototype=u,_=new j),d&&Re(d,_),_}var Nt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function X(u){return/\w/.test(u)||u>"\x80"&&(u.toUpperCase()!=u.toLowerCase()||Nt.test(u))}function n(u,d){return d?d.source.indexOf("\\w")>-1&&X(u)?!0:d.test(u):X(u)}function i(u){for(var d in u)if(u.hasOwnProperty(d)&&u[d])return!1;return!0}var a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function f(u){return u.charCodeAt(0)>=768&&a.test(u)}function g(u,d,_){for(;(_<0?d>0:d<u.length)&&f(u.charAt(d));)d+=_;return d}function v(u,d,_){for(var x=d>_?-1:1;;){if(d==_)return d;var T=(d+_)/2,N=x<0?Math.ceil(T):Math.floor(T);if(N==d)return u(N)?d:_;u(N)?_=N:d=N+x}}function S(u,d,_,x){if(!u)return x(d,_,"ltr",0);for(var T=!1,N=0;N<u.length;++N){var $=u[N];($.from<_&&$.to>d||d==_&&$.to==d)&&(x(Math.max($.from,d),Math.min($.to,_),$.level==1?"rtl":"ltr",N),T=!0)}T||x(d,_,"ltr")}var R=null;function k(u,d,_){var x;R=null;for(var T=0;T<u.length;++T){var N=u[T];if(N.from<d&&N.to>d)return T;N.to==d&&(N.from!=N.to&&_=="before"?x=T:R=T),N.from==d&&(N.from!=N.to&&_!="before"?x=T:R=T)}return x!=null?x:R}var D=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function _(re){return re<=247?u.charAt(re):1424<=re&&re<=1524?"R":1536<=re&&re<=1785?d.charAt(re-1536):1774<=re&&re<=2220?"r":8192<=re&&re<=8203?"w":re==8204?"b":"L"}var x=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,N=/[LRr]/,$=/[Lb1n]/,Y=/[1n]/;function te(re,ve,xe){this.level=re,this.from=ve,this.to=xe}return function(re,ve){var xe=ve=="ltr"?"L":"R";if(re.length==0||ve=="ltr"&&!x.test(re))return!1;for(var Ee=re.length,Me=[],Ne=0;Ne<Ee;++Ne)Me.push(_(re.charCodeAt(Ne)));for(var We=0,Qe=xe;We<Ee;++We){var nt=Me[We];nt=="m"?Me[We]=Qe:Qe=nt}for(var ut=0,rt=xe;ut<Ee;++ut){var dt=Me[ut];dt=="1"&&rt=="r"?Me[ut]="n":N.test(dt)&&(rt=dt,dt=="r"&&(Me[ut]="R"))}for(var Ct=1,Tt=Me[0];Ct<Ee-1;++Ct){var qt=Me[Ct];qt=="+"&&Tt=="1"&&Me[Ct+1]=="1"?Me[Ct]="1":qt==","&&Tt==Me[Ct+1]&&(Tt=="1"||Tt=="n")&&(Me[Ct]=Tt),Tt=qt}for(var wn=0;wn<Ee;++wn){var vr=Me[wn];if(vr==",")Me[wn]="N";else if(vr=="%"){var On=void 0;for(On=wn+1;On<Ee&&Me[On]=="%";++On);for(var gi=wn&&Me[wn-1]=="!"||On<Ee&&Me[On]=="1"?"1":"N",oi=wn;oi<On;++oi)Me[oi]=gi;wn=On-1}}for(var Jn=0,ai=xe;Jn<Ee;++Jn){var Tr=Me[Jn];ai=="L"&&Tr=="1"?Me[Jn]="L":N.test(Tr)&&(ai=Tr)}for(var cr=0;cr<Ee;++cr)if(T.test(Me[cr])){var er=void 0;for(er=cr+1;er<Ee&&T.test(Me[er]);++er);for(var Un=(cr?Me[cr-1]:xe)=="L",li=(er<Ee?Me[er]:xe)=="L",Lu=Un==li?Un?"L":"R":xe,$o=cr;$o<er;++$o)Me[$o]=Lu;cr=er-1}for(var Nr=[],Cs,yr=0;yr<Ee;)if($.test(Me[yr])){var jv=yr;for(++yr;yr<Ee&&$.test(Me[yr]);++yr);Nr.push(new te(0,jv,yr))}else{var no=yr,el=Nr.length,tl=ve=="rtl"?1:0;for(++yr;yr<Ee&&Me[yr]!="L";++yr);for(var Xr=no;Xr<yr;)if(Y.test(Me[Xr])){no<Xr&&(Nr.splice(el,0,new te(1,no,Xr)),el+=tl);var Iu=Xr;for(++Xr;Xr<yr&&Y.test(Me[Xr]);++Xr);Nr.splice(el,0,new te(2,Iu,Xr)),el+=tl,no=Xr}else++Xr;no<yr&&Nr.splice(el,0,new te(1,no,yr))}return ve=="ltr"&&(Nr[0].level==1&&(Cs=re.match(/^\s+/))&&(Nr[0].from=Cs[0].length,Nr.unshift(new te(0,0,Cs[0].length))),De(Nr).level==1&&(Cs=re.match(/\s+$/))&&(De(Nr).to-=Cs[0].length,Nr.push(new te(0,Ee-Cs[0].length,Ee)))),ve=="rtl"?Nr.reverse():Nr}}();function V(u,d){var _=u.order;return _==null&&(_=u.order=D(u.text,d)),_}var G=[],K=function(u,d,_){if(u.addEventListener)u.addEventListener(d,_,!1);else if(u.attachEvent)u.attachEvent("on"+d,_);else{var x=u._handlers||(u._handlers={});x[d]=(x[d]||G).concat(_)}};function Q(u,d){return u._handlers&&u._handlers[d]||G}function ne(u,d,_){if(u.removeEventListener)u.removeEventListener(d,_,!1);else if(u.detachEvent)u.detachEvent("on"+d,_);else{var x=u._handlers,T=x&&x[d];if(T){var N=Ue(T,_);N>-1&&(x[d]=T.slice(0,N).concat(T.slice(N+1)))}}}function ie(u,d){var _=Q(u,d);if(!!_.length)for(var x=Array.prototype.slice.call(arguments,2),T=0;T<_.length;++T)_[T].apply(null,x)}function fe(u,d,_){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),ie(u,_||d.type,u,d),at(d)||d.codemirrorIgnore}function me(u){var d=u._handlers&&u._handlers.cursorActivity;if(!!d)for(var _=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),x=0;x<d.length;++x)Ue(_,d[x])==-1&&_.push(d[x])}function Ie(u,d){return Q(u,d).length>0}function Xe(u){u.prototype.on=function(d,_){K(this,d,_)},u.prototype.off=function(d,_){ne(this,d,_)}}function Fe(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function mt(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function at(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function wt(u){Fe(u),mt(u)}function gt(u){return u.target||u.srcElement}function pt(u){var d=u.which;return d==null&&(u.button&1?d=1:u.button&2?d=3:u.button&4&&(d=2)),L&&u.ctrlKey&&d==1&&(d=3),d}var bn=function(){if(m&&y<9)return!1;var u=w("div");return"draggable"in u||"dragDrop"in u}(),tn;function Sn(u){if(tn==null){var d=w("span","\u200B");le(u,w("span",[d,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(tn=d.offsetWidth<=1&&d.offsetHeight>2&&!(m&&y<8))}var _=tn?w("span","\u200B"):w("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return _.setAttribute("cm-text",""),_}var mn;function pe(u){if(mn!=null)return mn;var d=le(u,document.createTextNode("A\u062EA")),_=J(d,0,1).getBoundingClientRect(),x=J(d,1,2).getBoundingClientRect();return ue(u),!_||_.left==_.right?!1:mn=x.right-_.right<3}var Te=`

b`.split(/\n/).length!=3?function(u){for(var d=0,_=[],x=u.length;d<=x;){var T=u.indexOf(`
`,d);T==-1&&(T=u.length);var N=u.slice(d,u.charAt(T-1)=="\r"?T-1:T),$=N.indexOf("\r");$!=-1?(_.push(N.slice(0,$)),d+=$+1):(_.push(N),d=T+1)}return _}:function(u){return u.split(/\r\n?|\n/)},Oe=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var d;try{d=u.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=u?!1:d.compareEndPoints("StartToEnd",d)!=0},Pe=function(){var u=w("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),He=null;function Ae(u){if(He!=null)return He;var d=le(u,w("span","x")),_=d.getBoundingClientRect(),x=J(d,0,1).getBoundingClientRect();return He=Math.abs(_.left-x.left)>1}var xt={},Et={};function Rt(u,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),xt[u]=d}function Ft(u,d){Et[u]=d}function jt(u){if(typeof u=="string"&&Et.hasOwnProperty(u))u=Et[u];else if(u&&typeof u.name=="string"&&Et.hasOwnProperty(u.name)){var d=Et[u.name];typeof d=="string"&&(d={name:d}),u=et(d,u),u.name=d.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return jt("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return jt("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function Xt(u,d){d=jt(d);var _=xt[d.name];if(!_)return Xt(u,"text/plain");var x=_(u,d);if(nn.hasOwnProperty(d.name)){var T=nn[d.name];for(var N in T)!T.hasOwnProperty(N)||(x.hasOwnProperty(N)&&(x["_"+N]=x[N]),x[N]=T[N])}if(x.name=d.name,d.helperType&&(x.helperType=d.helperType),d.modeProps)for(var $ in d.modeProps)x[$]=d.modeProps[$];return x}var nn={};function Kn(u,d){var _=nn.hasOwnProperty(u)?nn[u]:nn[u]={};Re(d,_)}function Vn(u,d){if(d===!0)return d;if(u.copyState)return u.copyState(d);var _={};for(var x in d){var T=d[x];T instanceof Array&&(T=T.concat([])),_[x]=T}return _}function Yt(u,d){for(var _;u.innerMode&&(_=u.innerMode(d),!(!_||_.mode==u));)d=_.state,u=_.mode;return _||{mode:u,state:d}}function wr(u,d,_){return u.startState?u.startState(d,_):!0}var Gt=function(u,d,_){this.pos=this.start=0,this.string=u,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=_};Gt.prototype.eol=function(){return this.pos>=this.string.length},Gt.prototype.sol=function(){return this.pos==this.lineStart},Gt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Gt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Gt.prototype.eat=function(u){var d=this.string.charAt(this.pos),_;if(typeof u=="string"?_=d==u:_=d&&(u.test?u.test(d):u(d)),_)return++this.pos,d},Gt.prototype.eatWhile=function(u){for(var d=this.pos;this.eat(u););return this.pos>d},Gt.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},Gt.prototype.skipToEnd=function(){this.pos=this.string.length},Gt.prototype.skipTo=function(u){var d=this.string.indexOf(u,this.pos);if(d>-1)return this.pos=d,!0},Gt.prototype.backUp=function(u){this.pos-=u},Gt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=we(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.indentation=function(){return we(this.string,null,this.tabSize)-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.match=function(u,d,_){if(typeof u=="string"){var x=function($){return _?$.toLowerCase():$},T=this.string.substr(this.pos,u.length);if(x(T)==x(u))return d!==!1&&(this.pos+=u.length),!0}else{var N=this.string.slice(this.pos).match(u);return N&&N.index>0?null:(N&&d!==!1&&(this.pos+=N[0].length),N)}},Gt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Gt.prototype.hideFirstChars=function(u,d){this.lineStart+=u;try{return d()}finally{this.lineStart-=u}},Gt.prototype.lookAhead=function(u){var d=this.lineOracle;return d&&d.lookAhead(u)},Gt.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function lt(u,d){if(d-=u.first,d<0||d>=u.size)throw new Error("There is no line "+(d+u.first)+" in the document.");for(var _=u;!_.lines;)for(var x=0;;++x){var T=_.children[x],N=T.chunkSize();if(d<N){_=T;break}d-=N}return _.lines[d]}function kr(u,d,_){var x=[],T=d.line;return u.iter(d.line,_.line+1,function(N){var $=N.text;T==_.line&&($=$.slice(0,_.ch)),T==d.line&&($=$.slice(d.ch)),x.push($),++T}),x}function br(u,d,_){var x=[];return u.iter(d,_,function(T){x.push(T.text)}),x}function Mn(u,d){var _=d-u.height;if(_)for(var x=u;x;x=x.parent)x.height+=_}function Pt(u){if(u.parent==null)return null;for(var d=u.parent,_=Ue(d.lines,u),x=d.parent;x;d=x,x=x.parent)for(var T=0;x.children[T]!=d;++T)_+=x.children[T].chunkSize();return _+d.first}function Sr(u,d){var _=u.first;e:do{for(var x=0;x<u.children.length;++x){var T=u.children[x],N=T.height;if(d<N){u=T;continue e}d-=N,_+=T.chunkSize()}return _}while(!u.lines);for(var $=0;$<u.lines.length;++$){var Y=u.lines[$],te=Y.height;if(d<te)break;d-=te}return _+$}function Zn(u,d){return d>=u.first&&d<u.first+u.size}function za(u,d){return String(u.lineNumberFormatter(d+u.firstLineNumber))}function qe(u,d,_){if(_===void 0&&(_=null),!(this instanceof qe))return new qe(u,d,_);this.line=u,this.ch=d,this.sticky=_}function se(u,d){return u.line-d.line||u.ch-d.ch}function _e(u,d){return u.sticky==d.sticky&&se(u,d)==0}function Ge(u){return qe(u.line,u.ch)}function Ke(u,d){return se(u,d)<0?d:u}function It(u,d){return se(u,d)<0?u:d}function Zt(u,d){return Math.max(u.first,Math.min(d,u.first+u.size-1))}function ct(u,d){if(d.line<u.first)return qe(u.first,0);var _=u.first+u.size-1;return d.line>_?qe(_,lt(u,_).text.length):pr(d,lt(u,d.line).text.length)}function pr(u,d){var _=u.ch;return _==null||_>d?qe(u.line,d):_<0?qe(u.line,0):u}function ni(u,d){for(var _=[],x=0;x<d.length;x++)_[x]=ct(u,d[x]);return _}var ko=function(u,d){this.state=u,this.lookAhead=d},Wi=function(u,d,_,x){this.state=d,this.doc=u,this.line=_,this.maxLookAhead=x||0,this.baseTokens=null,this.baseTokenPos=1};Wi.prototype.lookAhead=function(u){var d=this.doc.getLine(this.line+u);return d!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),d},Wi.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},Wi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Wi.fromSaved=function(u,d,_){return d instanceof ko?new Wi(u,Vn(u.mode,d.state),_,d.lookAhead):new Wi(u,Vn(u.mode,d),_)},Wi.prototype.save=function(u){var d=u!==!1?Vn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ko(d,this.maxLookAhead):d};function ap(u,d,_,x){var T=[u.state.modeGen],N={};Cf(u,d.text,u.doc.mode,_,function(re,ve){return T.push(re,ve)},N,x);for(var $=_.state,Y=function(re){_.baseTokens=T;var ve=u.state.overlays[re],xe=1,Ee=0;_.state=!0,Cf(u,d.text,ve.mode,_,function(Me,Ne){for(var We=xe;Ee<Me;){var Qe=T[xe];Qe>Me&&T.splice(xe,1,Me,T[xe+1],Qe),xe+=2,Ee=Math.min(Me,Qe)}if(!!Ne)if(ve.opaque)T.splice(We,xe-We,Me,"overlay "+Ne),xe=We+2;else for(;We<xe;We+=2){var nt=T[We+1];T[We+1]=(nt?nt+" ":"")+"overlay "+Ne}},N),_.state=$,_.baseTokens=null,_.baseTokenPos=1},te=0;te<u.state.overlays.length;++te)Y(te);return{styles:T,classes:N.bgClass||N.textClass?N:null}}function lp(u,d,_){if(!d.styles||d.styles[0]!=u.state.modeGen){var x=Oo(u,Pt(d)),T=d.text.length>u.options.maxHighlightLength&&Vn(u.doc.mode,x.state),N=ap(u,d,x);T&&(x.state=T),d.stateAfter=x.save(!T),d.styles=N.styles,N.classes?d.styleClasses=N.classes:d.styleClasses&&(d.styleClasses=null),_===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return d.styles}function Oo(u,d,_){var x=u.doc,T=u.display;if(!x.mode.startState)return new Wi(x,!0,d);var N=At(u,d,_),$=N>x.first&&lt(x,N-1).stateAfter,Y=$?Wi.fromSaved(x,$,N):new Wi(x,wr(x.mode),N);return x.iter(N,d,function(te){Tf(u,te.text,Y);var re=Y.line;te.stateAfter=re==d-1||re%5==0||re>=T.viewFrom&&re<T.viewTo?Y.save():null,Y.nextLine()}),_&&(x.modeFrontier=Y.line),Y}function Tf(u,d,_,x){var T=u.doc.mode,N=new Gt(d,u.options.tabSize,_);for(N.start=N.pos=x||0,d==""&&up(T,_.state);!N.eol();)Ef(T,N,_.state),N.start=N.pos}function up(u,d){if(u.blankLine)return u.blankLine(d);if(!!u.innerMode){var _=Yt(u,d);if(_.mode.blankLine)return _.mode.blankLine(_.state)}}function Ef(u,d,_,x){for(var T=0;T<10;T++){x&&(x[0]=Yt(u,_).mode);var N=u.token(d,_);if(d.pos>d.start)return N}throw new Error("Mode "+u.name+" failed to advance stream.")}var cp=function(u,d,_){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=d||null,this.state=_};function fp(u,d,_,x){var T=u.doc,N=T.mode,$;d=ct(T,d);var Y=lt(T,d.line),te=Oo(u,d.line,_),re=new Gt(Y.text,u.options.tabSize,te),ve;for(x&&(ve=[]);(x||re.pos<d.ch)&&!re.eol();)re.start=re.pos,$=Ef(N,re,te.state),x&&ve.push(new cp(re,$,Vn(T.mode,te.state)));return x?ve:new cp(re,$,te.state)}function Af(u,d){if(u)for(;;){var _=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!_)break;u=u.slice(0,_.index)+u.slice(_.index+_[0].length);var x=_[1]?"bgClass":"textClass";d[x]==null?d[x]=_[2]:new RegExp("(?:^|\\s)"+_[2]+"(?:$|\\s)").test(d[x])||(d[x]+=" "+_[2])}return u}function Cf(u,d,_,x,T,N,$){var Y=_.flattenSpans;Y==null&&(Y=u.options.flattenSpans);var te=0,re=null,ve=new Gt(d,u.options.tabSize,x),xe,Ee=u.options.addModeClass&&[null];for(d==""&&Af(up(_,x.state),N);!ve.eol();){if(ve.pos>u.options.maxHighlightLength?(Y=!1,$&&Tf(u,d,x,ve.pos),ve.pos=d.length,xe=null):xe=Af(Ef(_,ve,x.state,Ee),N),Ee){var Me=Ee[0].name;Me&&(xe="m-"+(xe?Me+" "+xe:Me))}if(!Y||re!=xe){for(;te<ve.start;)te=Math.min(ve.start,te+5e3),T(te,re);re=xe}ve.start=ve.pos}for(;te<ve.pos;){var Ne=Math.min(ve.pos,te+5e3);T(Ne,re),te=Ne}}function At(u,d,_){for(var x,T,N=u.doc,$=_?-1:d-(u.doc.mode.innerMode?1e3:100),Y=d;Y>$;--Y){if(Y<=N.first)return N.first;var te=lt(N,Y-1),re=te.stateAfter;if(re&&(!_||Y+(re instanceof ko?re.lookAhead:0)<=N.modeFrontier))return Y;var ve=we(te.text,null,u.options.tabSize);(T==null||x>ve)&&(T=Y-1,x=ve)}return T}function it(u,d){if(u.modeFrontier=Math.min(u.modeFrontier,d),!(u.highlightFrontier<d-10)){for(var _=u.first,x=d-1;x>_;x--){var T=lt(u,x).stateAfter;if(T&&(!(T instanceof ko)||x+T.lookAhead<d)){_=x+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,_)}}var xn=!1,_n=!1;function lr(){xn=!0}function ur(){_n=!0}function us(u,d,_){this.marker=u,this.from=d,this.to=_}function $i(u,d){if(u)for(var _=0;_<u.length;++_){var x=u[_];if(x.marker==d)return x}}function Ms(u,d){for(var _,x=0;x<u.length;++x)u[x]!=d&&(_||(_=[])).push(u[x]);return _}function hp(u,d,_){var x=_&&window.WeakSet&&(_.markedSpans||(_.markedSpans=new WeakSet));x&&x.has(u.markedSpans)?u.markedSpans.push(d):(u.markedSpans=u.markedSpans?u.markedSpans.concat([d]):[d],x&&x.add(u.markedSpans)),d.marker.attachLine(u)}function Or(u,d,_){var x;if(u)for(var T=0;T<u.length;++T){var N=u[T],$=N.marker,Y=N.from==null||($.inclusiveLeft?N.from<=d:N.from<d);if(Y||N.from==d&&$.type=="bookmark"&&(!_||!N.marker.insertLeft)){var te=N.to==null||($.inclusiveRight?N.to>=d:N.to>d);(x||(x=[])).push(new us($,N.from,te?null:N.to))}}return x}function Do(u,d,_){var x;if(u)for(var T=0;T<u.length;++T){var N=u[T],$=N.marker,Y=N.to==null||($.inclusiveRight?N.to>=d:N.to>d);if(Y||N.from==d&&$.type=="bookmark"&&(!_||N.marker.insertLeft)){var te=N.from==null||($.inclusiveLeft?N.from<=d:N.from<d);(x||(x=[])).push(new us($,te?null:N.from-d,N.to==null?null:N.to-d))}}return x}function Li(u,d){if(d.full)return null;var _=Zn(u,d.from.line)&&lt(u,d.from.line).markedSpans,x=Zn(u,d.to.line)&&lt(u,d.to.line).markedSpans;if(!_&&!x)return null;var T=d.from.ch,N=d.to.ch,$=se(d.from,d.to)==0,Y=Or(_,T,$),te=Do(x,N,$),re=d.text.length==1,ve=De(d.text).length+(re?T:0);if(Y)for(var xe=0;xe<Y.length;++xe){var Ee=Y[xe];if(Ee.to==null){var Me=$i(te,Ee.marker);Me?re&&(Ee.to=Me.to==null?null:Me.to+ve):Ee.to=T}}if(te)for(var Ne=0;Ne<te.length;++Ne){var We=te[Ne];if(We.to!=null&&(We.to+=ve),We.from==null){var Qe=$i(Y,We.marker);Qe||(We.from=ve,re&&(Y||(Y=[])).push(We))}else We.from+=ve,re&&(Y||(Y=[])).push(We)}Y&&(Y=Rf(Y)),te&&te!=Y&&(te=Rf(te));var nt=[Y];if(!re){var ut=d.text.length-2,rt;if(ut>0&&Y)for(var dt=0;dt<Y.length;++dt)Y[dt].to==null&&(rt||(rt=[])).push(new us(Y[dt].marker,null,null));for(var Ct=0;Ct<ut;++Ct)nt.push(rt);nt.push(te)}return nt}function Rf(u){for(var d=0;d<u.length;++d){var _=u[d];_.from!=null&&_.from==_.to&&_.marker.clearWhenEmpty!==!1&&u.splice(d--,1)}return u.length?u:null}function No(u,d,_){var x=null;if(u.iter(d.line,_.line+1,function(Me){if(Me.markedSpans)for(var Ne=0;Ne<Me.markedSpans.length;++Ne){var We=Me.markedSpans[Ne].marker;We.readOnly&&(!x||Ue(x,We)==-1)&&(x||(x=[])).push(We)}}),!x)return null;for(var T=[{from:d,to:_}],N=0;N<x.length;++N)for(var $=x[N],Y=$.find(0),te=0;te<T.length;++te){var re=T[te];if(!(se(re.to,Y.from)<0||se(re.from,Y.to)>0)){var ve=[te,1],xe=se(re.from,Y.from),Ee=se(re.to,Y.to);(xe<0||!$.inclusiveLeft&&!xe)&&ve.push({from:re.from,to:Y.from}),(Ee>0||!$.inclusiveRight&&!Ee)&&ve.push({from:Y.to,to:re.to}),T.splice.apply(T,ve),te+=ve.length-3}}return T}function pi(u){var d=u.markedSpans;if(!!d){for(var _=0;_<d.length;++_)d[_].marker.detachLine(u);u.markedSpans=null}}function ri(u,d){if(!!d){for(var _=0;_<d.length;++_)d[_].marker.attachLine(u);u.markedSpans=d}}function Ha(u){return u.inclusiveLeft?-1:0}function Ga(u){return u.inclusiveRight?1:0}function Va(u,d){var _=u.lines.length-d.lines.length;if(_!=0)return _;var x=u.find(),T=d.find(),N=se(x.from,T.from)||Ha(u)-Ha(d);if(N)return-N;var $=se(x.to,T.to)||Ga(u)-Ga(d);return $||d.id-u.id}function Fo(u,d){var _=_n&&u.markedSpans,x;if(_)for(var T=void 0,N=0;N<_.length;++N)T=_[N],T.marker.collapsed&&(d?T.from:T.to)==null&&(!x||Va(x,T.marker)<0)&&(x=T.marker);return x}function hu(u){return Fo(u,!0)}function Zs(u){return Fo(u,!1)}function iv(u,d){var _=_n&&u.markedSpans,x;if(_)for(var T=0;T<_.length;++T){var N=_[T];N.marker.collapsed&&(N.from==null||N.from<d)&&(N.to==null||N.to>d)&&(!x||Va(x,N.marker)<0)&&(x=N.marker)}return x}function dp(u,d,_,x,T){var N=lt(u,d),$=_n&&N.markedSpans;if($)for(var Y=0;Y<$.length;++Y){var te=$[Y];if(!!te.marker.collapsed){var re=te.marker.find(0),ve=se(re.from,_)||Ha(te.marker)-Ha(T),xe=se(re.to,x)||Ga(te.marker)-Ga(T);if(!(ve>=0&&xe<=0||ve<=0&&xe>=0)&&(ve<=0&&(te.marker.inclusiveRight&&T.inclusiveLeft?se(re.to,_)>=0:se(re.to,_)>0)||ve>=0&&(te.marker.inclusiveRight&&T.inclusiveLeft?se(re.from,x)<=0:se(re.from,x)<0)))return!0}}}function Ii(u){for(var d;d=hu(u);)u=d.find(-1,!0).line;return u}function sv(u){for(var d;d=Zs(u);)u=d.find(1,!0).line;return u}function ov(u){for(var d,_;d=Zs(u);)u=d.find(1,!0).line,(_||(_=[])).push(u);return _}function Lf(u,d){var _=lt(u,d),x=Ii(_);return _==x?d:Pt(x)}function pp(u,d){if(d>u.lastLine())return d;var _=lt(u,d),x;if(!Ts(u,_))return d;for(;x=Zs(_);)_=x.find(1,!0).line;return Pt(_)+1}function Ts(u,d){var _=_n&&d.markedSpans;if(_){for(var x=void 0,T=0;T<_.length;++T)if(x=_[T],!!x.marker.collapsed){if(x.from==null)return!0;if(!x.marker.widgetNode&&x.from==0&&x.marker.inclusiveLeft&&du(u,d,x))return!0}}}function du(u,d,_){if(_.to==null){var x=_.marker.find(1,!0);return du(u,x.line,$i(x.line.markedSpans,_.marker))}if(_.marker.inclusiveRight&&_.to==d.text.length)return!0;for(var T=void 0,N=0;N<d.markedSpans.length;++N)if(T=d.markedSpans[N],T.marker.collapsed&&!T.marker.widgetNode&&T.from==_.to&&(T.to==null||T.to!=_.from)&&(T.marker.inclusiveLeft||_.marker.inclusiveRight)&&du(u,d,T))return!0}function Mr(u){u=Ii(u);for(var d=0,_=u.parent,x=0;x<_.lines.length;++x){var T=_.lines[x];if(T==u)break;d+=T.height}for(var N=_.parent;N;_=N,N=_.parent)for(var $=0;$<N.children.length;++$){var Y=N.children[$];if(Y==_)break;d+=Y.height}return d}function ji(u){if(u.height==0)return 0;for(var d=u.text.length,_,x=u;_=hu(x);){var T=_.find(0,!0);x=T.from.line,d+=T.from.ch-T.to.ch}for(x=u;_=Zs(x);){var N=_.find(0,!0);d-=x.text.length-N.from.ch,x=N.to.line,d+=x.text.length-N.to.ch}return d}function pu(u){var d=u.display,_=u.doc;d.maxLine=lt(_,_.first),d.maxLineLength=ji(d.maxLine),d.maxLineChanged=!0,_.iter(function(x){var T=ji(x);T>d.maxLineLength&&(d.maxLineLength=T,d.maxLine=x)})}var Qs=function(u,d,_){this.text=u,ri(this,d),this.height=_?_(this):1};Qs.prototype.lineNo=function(){return Pt(this)},Xe(Qs);function If(u,d,_,x){u.text=d,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),pi(u),ri(u,_);var T=x?x(u):1;T!=u.height&&Mn(u,T)}function av(u){u.parent=null,pi(u)}var mp={},lv={};function gp(u,d){if(!u||/^\s*$/.test(u))return null;var _=d.addModeClass?lv:mp;return _[u]||(_[u]=u.replace(/\S+/g,"cm-$&"))}function st(u,d){var _=p("span",null,null,b?"padding-right: .1px":null),x={pre:p("pre",[_],"CodeMirror-line"),content:_,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};d.measure={};for(var T=0;T<=(d.rest?d.rest.length:0);T++){var N=T?d.rest[T-1]:d.line,$=void 0;x.pos=0,x.addToken=ht,pe(u.display.measure)&&($=V(N,u.doc.direction))&&(x.addToken=Mt(x.addToken,$)),x.map=[];var Y=d!=u.display.externalMeasured&&Pt(N);Ot(N,x,lp(u,N,Y)),N.styleClasses&&(N.styleClasses.bgClass&&(x.bgClass=Se(N.styleClasses.bgClass,x.bgClass||"")),N.styleClasses.textClass&&(x.textClass=Se(N.styleClasses.textClass,x.textClass||""))),x.map.length==0&&x.map.push(0,0,x.content.appendChild(Sn(u.display.measure))),T==0?(d.measure.map=x.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(x.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(b){var te=x.content.lastChild;(/\bcm-tab\b/.test(te.className)||te.querySelector&&te.querySelector(".cm-tab"))&&(x.content.className="cm-tab-wrap-hack")}return ie(u,"renderLine",u,d.line,x.pre),x.pre.className&&(x.textClass=Se(x.pre.className,x.textClass||"")),x}function bt(u){var d=w("span","\u2022","cm-invalidchar");return d.title="\\u"+u.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function ht(u,d,_,x,T,N,$){if(!!d){var Y=u.splitSpaces?ft(d,u.trailingSpace):d,te=u.cm.state.specialChars,re=!1,ve;if(!te.test(d))u.col+=d.length,ve=document.createTextNode(Y),u.map.push(u.pos,u.pos+d.length,ve),m&&y<9&&(re=!0),u.pos+=d.length;else{ve=document.createDocumentFragment();for(var xe=0;;){te.lastIndex=xe;var Ee=te.exec(d),Me=Ee?Ee.index-xe:d.length-xe;if(Me){var Ne=document.createTextNode(Y.slice(xe,xe+Me));m&&y<9?ve.appendChild(w("span",[Ne])):ve.appendChild(Ne),u.map.push(u.pos,u.pos+Me,Ne),u.col+=Me,u.pos+=Me}if(!Ee)break;xe+=Me+1;var We=void 0;if(Ee[0]=="	"){var Qe=u.cm.options.tabSize,nt=Qe-u.col%Qe;We=ve.appendChild(w("span",Ye(nt),"cm-tab")),We.setAttribute("role","presentation"),We.setAttribute("cm-text","	"),u.col+=nt}else Ee[0]=="\r"||Ee[0]==`
`?(We=ve.appendChild(w("span",Ee[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),We.setAttribute("cm-text",Ee[0]),u.col+=1):(We=u.cm.options.specialCharPlaceholder(Ee[0]),We.setAttribute("cm-text",Ee[0]),m&&y<9?ve.appendChild(w("span",[We])):ve.appendChild(We),u.col+=1);u.map.push(u.pos,u.pos+1,We),u.pos++}}if(u.trailingSpace=Y.charCodeAt(d.length-1)==32,_||x||T||re||N||$){var ut=_||"";x&&(ut+=x),T&&(ut+=T);var rt=w("span",[ve],ut,N);if($)for(var dt in $)$.hasOwnProperty(dt)&&dt!="style"&&dt!="class"&&rt.setAttribute(dt,$[dt]);return u.content.appendChild(rt)}u.content.appendChild(ve)}}function ft(u,d){if(u.length>1&&!/  /.test(u))return u;for(var _=d,x="",T=0;T<u.length;T++){var N=u.charAt(T);N==" "&&_&&(T==u.length-1||u.charCodeAt(T+1)==32)&&(N="\xA0"),x+=N,_=N==" "}return x}function Mt(u,d){return function(_,x,T,N,$,Y,te){T=T?T+" cm-force-border":"cm-force-border";for(var re=_.pos,ve=re+x.length;;){for(var xe=void 0,Ee=0;Ee<d.length&&(xe=d[Ee],!(xe.to>re&&xe.from<=re));Ee++);if(xe.to>=ve)return u(_,x,T,N,$,Y,te);u(_,x.slice(0,xe.to-re),T,N,null,Y,te),N=null,x=x.slice(xe.to-re),re=xe.to}}}function kt(u,d,_,x){var T=!x&&_.widgetNode;T&&u.map.push(u.pos,u.pos+d,T),!x&&u.cm.display.input.needsContentAttribute&&(T||(T=u.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",_.id)),T&&(u.cm.display.input.setUneditable(T),u.content.appendChild(T)),u.pos+=d,u.trailingSpace=!1}function Ot(u,d,_){var x=u.markedSpans,T=u.text,N=0;if(!x){for(var $=1;$<_.length;$+=2)d.addToken(d,T.slice(N,N=_[$]),gp(_[$+1],d.cm.options));return}for(var Y=T.length,te=0,re=1,ve="",xe,Ee,Me=0,Ne,We,Qe,nt,ut;;){if(Me==te){Ne=We=Qe=Ee="",ut=null,nt=null,Me=1/0;for(var rt=[],dt=void 0,Ct=0;Ct<x.length;++Ct){var Tt=x[Ct],qt=Tt.marker;if(qt.type=="bookmark"&&Tt.from==te&&qt.widgetNode)rt.push(qt);else if(Tt.from<=te&&(Tt.to==null||Tt.to>te||qt.collapsed&&Tt.to==te&&Tt.from==te)){if(Tt.to!=null&&Tt.to!=te&&Me>Tt.to&&(Me=Tt.to,We=""),qt.className&&(Ne+=" "+qt.className),qt.css&&(Ee=(Ee?Ee+";":"")+qt.css),qt.startStyle&&Tt.from==te&&(Qe+=" "+qt.startStyle),qt.endStyle&&Tt.to==Me&&(dt||(dt=[])).push(qt.endStyle,Tt.to),qt.title&&((ut||(ut={})).title=qt.title),qt.attributes)for(var wn in qt.attributes)(ut||(ut={}))[wn]=qt.attributes[wn];qt.collapsed&&(!nt||Va(nt.marker,qt)<0)&&(nt=Tt)}else Tt.from>te&&Me>Tt.from&&(Me=Tt.from)}if(dt)for(var vr=0;vr<dt.length;vr+=2)dt[vr+1]==Me&&(We+=" "+dt[vr]);if(!nt||nt.from==te)for(var On=0;On<rt.length;++On)kt(d,0,rt[On]);if(nt&&(nt.from||0)==te){if(kt(d,(nt.to==null?Y+1:nt.to)-te,nt.marker,nt.from==null),nt.to==null)return;nt.to==te&&(nt=!1)}}if(te>=Y)break;for(var gi=Math.min(Y,Me);;){if(ve){var oi=te+ve.length;if(!nt){var Jn=oi>gi?ve.slice(0,gi-te):ve;d.addToken(d,Jn,xe?xe+Ne:Ne,Qe,te+Jn.length==Me?We:"",Ee,ut)}if(oi>=gi){ve=ve.slice(gi-te),te=gi;break}te=oi,Qe=""}ve=T.slice(N,N=_[re++]),xe=gp(_[re++],d.cm.options)}}}function Ut(u,d,_){this.line=d,this.rest=ov(d),this.size=this.rest?Pt(De(this.rest))-_+1:1,this.node=this.text=null,this.hidden=Ts(u,d)}function Kt(u,d,_){for(var x=[],T,N=d;N<_;N=T){var $=new Ut(u.doc,lt(u.doc,N),N);T=N+$.size,x.push($)}return x}var hn=null;function $r(u){hn?hn.ops.push(u):u.ownsGroup=hn={ops:[u],delayedCallbacks:[]}}function jr(u){var d=u.delayedCallbacks,_=0;do{for(;_<d.length;_++)d[_].call(null);for(var x=0;x<u.ops.length;x++){var T=u.ops[x];if(T.cursorActivityHandlers)for(;T.cursorActivityCalled<T.cursorActivityHandlers.length;)T.cursorActivityHandlers[T.cursorActivityCalled++].call(null,T.cm)}}while(_<d.length)}function Wa(u,d){var _=u.ownsGroup;if(!!_)try{jr(_)}finally{hn=null,d(_)}}var $a=null;function Qn(u,d){var _=Q(u,d);if(!!_.length){var x=Array.prototype.slice.call(arguments,2),T;hn?T=hn.delayedCallbacks:$a?T=$a:(T=$a=[],setTimeout(Pf,0));for(var N=function(Y){T.push(function(){return _[Y].apply(null,x)})},$=0;$<_.length;++$)N($)}}function Pf(){var u=$a;$a=null;for(var d=0;d<u.length;++d)u[d]()}function Qw(u,d,_,x){for(var T=0;T<d.changes.length;T++){var N=d.changes[T];N=="text"?b3(u,d):N=="gutter"?eb(u,d,_,x):N=="class"?uv(u,d):N=="widget"&&S3(u,d,x)}d.changes=null}function kf(u){return u.node==u.text&&(u.node=w("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),m&&y<8&&(u.node.style.zIndex=2)),u.node}function w3(u,d){var _=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(_&&(_+=" CodeMirror-linebackground"),d.background)_?d.background.className=_:(d.background.parentNode.removeChild(d.background),d.background=null);else if(_){var x=kf(d);d.background=x.insertBefore(w("div",null,_),x.firstChild),u.display.input.setUneditable(d.background)}}function Jw(u,d){var _=u.display.externalMeasured;return _&&_.line==d.line?(u.display.externalMeasured=null,d.measure=_.measure,_.built):st(u,d)}function b3(u,d){var _=d.text.className,x=Jw(u,d);d.text==d.node&&(d.node=x.pre),d.text.parentNode.replaceChild(x.pre,d.text),d.text=x.pre,x.bgClass!=d.bgClass||x.textClass!=d.textClass?(d.bgClass=x.bgClass,d.textClass=x.textClass,uv(u,d)):_&&(d.text.className=_)}function uv(u,d){w3(u,d),d.line.wrapClass?kf(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var _=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=_||""}function eb(u,d,_,x){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var T=kf(d);d.gutterBackground=w("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(u.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px; width: "+x.gutterTotalWidth+"px"),u.display.input.setUneditable(d.gutterBackground),T.insertBefore(d.gutterBackground,d.text)}var N=d.line.gutterMarkers;if(u.options.lineNumbers||N){var $=kf(d),Y=d.gutter=w("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px");if(Y.setAttribute("aria-hidden","true"),u.display.input.setUneditable(Y),$.insertBefore(Y,d.text),d.line.gutterClass&&(Y.className+=" "+d.line.gutterClass),u.options.lineNumbers&&(!N||!N["CodeMirror-linenumbers"])&&(d.lineNumber=Y.appendChild(w("div",za(u.options,_),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+x.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),N)for(var te=0;te<u.display.gutterSpecs.length;++te){var re=u.display.gutterSpecs[te].className,ve=N.hasOwnProperty(re)&&N[re];ve&&Y.appendChild(w("div",[ve],"CodeMirror-gutter-elt","left: "+x.gutterLeft[re]+"px; width: "+x.gutterWidth[re]+"px"))}}}function S3(u,d,_){d.alignable&&(d.alignable=null);for(var x=ce("CodeMirror-linewidget"),T=d.node.firstChild,N=void 0;T;T=N)N=T.nextSibling,x.test(T.className)&&d.node.removeChild(T);tb(u,d,_)}function M3(u,d,_,x){var T=Jw(u,d);return d.text=d.node=T.pre,T.bgClass&&(d.bgClass=T.bgClass),T.textClass&&(d.textClass=T.textClass),uv(u,d),eb(u,d,_,x),tb(u,d,x),d.node}function tb(u,d,_){if(nb(u,d.line,d,_,!0),d.rest)for(var x=0;x<d.rest.length;x++)nb(u,d.rest[x],d,_,!1)}function nb(u,d,_,x,T){if(!!d.widgets)for(var N=kf(_),$=0,Y=d.widgets;$<Y.length;++$){var te=Y[$],re=w("div",[te.node],"CodeMirror-linewidget"+(te.className?" "+te.className:""));te.handleMouseEvents||re.setAttribute("cm-ignore-events","true"),T3(te,re,_,x),u.display.input.setUneditable(re),T&&te.above?N.insertBefore(re,_.gutter||_.text):N.appendChild(re),Qn(te,"redraw")}}function T3(u,d,_,x){if(u.noHScroll){(_.alignable||(_.alignable=[])).push(d);var T=x.wrapperWidth;d.style.left=x.fixedPos+"px",u.coverGutter||(T-=x.gutterTotalWidth,d.style.paddingLeft=x.gutterTotalWidth+"px"),d.style.width=T+"px"}u.coverGutter&&(d.style.zIndex=5,d.style.position="relative",u.noHScroll||(d.style.marginLeft=-x.gutterTotalWidth+"px"))}function Of(u){if(u.height!=null)return u.height;var d=u.doc.cm;if(!d)return 0;if(!E(document.body,u.node)){var _="position: relative;";u.coverGutter&&(_+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),u.noHScroll&&(_+="width: "+d.display.wrapper.clientWidth+"px;"),le(d.display.measure,w("div",[u.node],null,_))}return u.height=u.node.parentNode.offsetHeight}function Js(u,d){for(var _=gt(d);_!=u.wrapper;_=_.parentNode)if(!_||_.nodeType==1&&_.getAttribute("cm-ignore-events")=="true"||_.parentNode==u.sizer&&_!=u.mover)return!0}function vp(u){return u.lineSpace.offsetTop}function cv(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function rb(u){if(u.cachedPaddingH)return u.cachedPaddingH;var d=le(u.measure,w("pre","x","CodeMirror-line-like")),_=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,x={left:parseInt(_.paddingLeft),right:parseInt(_.paddingRight)};return!isNaN(x.left)&&!isNaN(x.right)&&(u.cachedPaddingH=x),x}function Es(u){return Ce-u.display.nativeBarWidth}function ja(u){return u.display.scroller.clientWidth-Es(u)-u.display.barWidth}function fv(u){return u.display.scroller.clientHeight-Es(u)-u.display.barHeight}function E3(u,d,_){var x=u.options.lineWrapping,T=x&&ja(u);if(!d.measure.heights||x&&d.measure.width!=T){var N=d.measure.heights=[];if(x){d.measure.width=T;for(var $=d.text.firstChild.getClientRects(),Y=0;Y<$.length-1;Y++){var te=$[Y],re=$[Y+1];Math.abs(te.bottom-re.bottom)>2&&N.push((te.bottom+re.top)/2-_.top)}}N.push(_.bottom-_.top)}}function ib(u,d,_){if(u.line==d)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var x=0;x<u.rest.length;x++)if(u.rest[x]==d)return{map:u.measure.maps[x],cache:u.measure.caches[x]};for(var T=0;T<u.rest.length;T++)if(Pt(u.rest[T])>_)return{map:u.measure.maps[T],cache:u.measure.caches[T],before:!0}}}function A3(u,d){d=Ii(d);var _=Pt(d),x=u.display.externalMeasured=new Ut(u.doc,d,_);x.lineN=_;var T=x.built=st(u,x);return x.text=T.pre,le(u.display.lineMeasure,T.pre),x}function sb(u,d,_,x){return As(u,mu(u,d),_,x)}function hv(u,d){if(d>=u.display.viewFrom&&d<u.display.viewTo)return u.display.view[Ya(u,d)];var _=u.display.externalMeasured;if(_&&d>=_.lineN&&d<_.lineN+_.size)return _}function mu(u,d){var _=Pt(d),x=hv(u,_);x&&!x.text?x=null:x&&x.changes&&(Qw(u,x,_,vv(u)),u.curOp.forceUpdate=!0),x||(x=A3(u,d));var T=ib(x,d,_);return{line:d,view:x,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function As(u,d,_,x,T){d.before&&(_=-1);var N=_+(x||""),$;return d.cache.hasOwnProperty(N)?$=d.cache[N]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(E3(u,d.view,d.rect),d.hasHeights=!0),$=R3(u,d,_,x),$.bogus||(d.cache[N]=$)),{left:$.left,right:$.right,top:T?$.rtop:$.top,bottom:T?$.rbottom:$.bottom}}var ob={left:0,right:0,top:0,bottom:0};function ab(u,d,_){for(var x,T,N,$,Y,te,re=0;re<u.length;re+=3)if(Y=u[re],te=u[re+1],d<Y?(T=0,N=1,$="left"):d<te?(T=d-Y,N=T+1):(re==u.length-3||d==te&&u[re+3]>d)&&(N=te-Y,T=N-1,d>=te&&($="right")),T!=null){if(x=u[re+2],Y==te&&_==(x.insertLeft?"left":"right")&&($=_),_=="left"&&T==0)for(;re&&u[re-2]==u[re-3]&&u[re-1].insertLeft;)x=u[(re-=3)+2],$="left";if(_=="right"&&T==te-Y)for(;re<u.length-3&&u[re+3]==u[re+4]&&!u[re+5].insertLeft;)x=u[(re+=3)+2],$="right";break}return{node:x,start:T,end:N,collapse:$,coverStart:Y,coverEnd:te}}function C3(u,d){var _=ob;if(d=="left")for(var x=0;x<u.length&&(_=u[x]).left==_.right;x++);else for(var T=u.length-1;T>=0&&(_=u[T]).left==_.right;T--);return _}function R3(u,d,_,x){var T=ab(d.map,_,x),N=T.node,$=T.start,Y=T.end,te=T.collapse,re;if(N.nodeType==3){for(var ve=0;ve<4;ve++){for(;$&&f(d.line.text.charAt(T.coverStart+$));)--$;for(;T.coverStart+Y<T.coverEnd&&f(d.line.text.charAt(T.coverStart+Y));)++Y;if(m&&y<9&&$==0&&Y==T.coverEnd-T.coverStart?re=N.parentNode.getBoundingClientRect():re=C3(J(N,$,Y).getClientRects(),x),re.left||re.right||$==0)break;Y=$,$=$-1,te="right"}m&&y<11&&(re=L3(u.display.measure,re))}else{$>0&&(te=x="right");var xe;u.options.lineWrapping&&(xe=N.getClientRects()).length>1?re=xe[x=="right"?xe.length-1:0]:re=N.getBoundingClientRect()}if(m&&y<9&&!$&&(!re||!re.left&&!re.right)){var Ee=N.parentNode.getClientRects()[0];Ee?re={left:Ee.left,right:Ee.left+vu(u.display),top:Ee.top,bottom:Ee.bottom}:re=ob}for(var Me=re.top-d.rect.top,Ne=re.bottom-d.rect.top,We=(Me+Ne)/2,Qe=d.view.measure.heights,nt=0;nt<Qe.length-1&&!(We<Qe[nt]);nt++);var ut=nt?Qe[nt-1]:0,rt=Qe[nt],dt={left:(te=="right"?re.right:re.left)-d.rect.left,right:(te=="left"?re.left:re.right)-d.rect.left,top:ut,bottom:rt};return!re.left&&!re.right&&(dt.bogus=!0),u.options.singleCursorHeightPerLine||(dt.rtop=Me,dt.rbottom=Ne),dt}function L3(u,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ae(u))return d;var _=screen.logicalXDPI/screen.deviceXDPI,x=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*_,right:d.right*_,top:d.top*x,bottom:d.bottom*x}}function lb(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var d=0;d<u.rest.length;d++)u.measure.caches[d]={}}function ub(u){u.display.externalMeasure=null,ue(u.display.lineMeasure);for(var d=0;d<u.display.view.length;d++)lb(u.display.view[d])}function Df(u){ub(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function cb(){return C&&A?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fb(){return C&&A?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function dv(u){var d=Ii(u),_=d.widgets,x=0;if(_)for(var T=0;T<_.length;++T)_[T].above&&(x+=Of(_[T]));return x}function yp(u,d,_,x,T){if(!T){var N=dv(d);_.top+=N,_.bottom+=N}if(x=="line")return _;x||(x="local");var $=Mr(d);if(x=="local"?$+=vp(u.display):$-=u.display.viewOffset,x=="page"||x=="window"){var Y=u.display.lineSpace.getBoundingClientRect();$+=Y.top+(x=="window"?0:fb());var te=Y.left+(x=="window"?0:cb());_.left+=te,_.right+=te}return _.top+=$,_.bottom+=$,_}function hb(u,d,_){if(_=="div")return d;var x=d.left,T=d.top;if(_=="page")x-=cb(),T-=fb();else if(_=="local"||!_){var N=u.display.sizer.getBoundingClientRect();x+=N.left,T+=N.top}var $=u.display.lineSpace.getBoundingClientRect();return{left:x-$.left,top:T-$.top}}function xp(u,d,_,x,T){return x||(x=lt(u.doc,d.line)),yp(u,x,sb(u,x,d.ch,T),_)}function cs(u,d,_,x,T,N){x=x||lt(u.doc,d.line),T||(T=mu(u,x));function $(Ne,We){var Qe=As(u,T,Ne,We?"right":"left",N);return We?Qe.left=Qe.right:Qe.right=Qe.left,yp(u,x,Qe,_)}var Y=V(x,u.doc.direction),te=d.ch,re=d.sticky;if(te>=x.text.length?(te=x.text.length,re="before"):te<=0&&(te=0,re="after"),!Y)return $(re=="before"?te-1:te,re=="before");function ve(Ne,We,Qe){var nt=Y[We],ut=nt.level==1;return $(Qe?Ne-1:Ne,ut!=Qe)}var xe=k(Y,te,re),Ee=R,Me=ve(te,xe,re=="before");return Ee!=null&&(Me.other=ve(te,Ee,re!="before")),Me}function db(u,d){var _=0;d=ct(u.doc,d),u.options.lineWrapping||(_=vu(u.display)*d.ch);var x=lt(u.doc,d.line),T=Mr(x)+vp(u.display);return{left:_,right:_,top:T,bottom:T+x.height}}function pv(u,d,_,x,T){var N=qe(u,d,_);return N.xRel=T,x&&(N.outside=x),N}function mv(u,d,_){var x=u.doc;if(_+=u.display.viewOffset,_<0)return pv(x.first,0,null,-1,-1);var T=Sr(x,_),N=x.first+x.size-1;if(T>N)return pv(x.first+x.size-1,lt(x,N).text.length,null,1,1);d<0&&(d=0);for(var $=lt(x,T);;){var Y=I3(u,$,T,d,_),te=iv($,Y.ch+(Y.xRel>0||Y.outside>0?1:0));if(!te)return Y;var re=te.find(1);if(re.line==T)return re;$=lt(x,T=re.line)}}function pb(u,d,_,x){x-=dv(d);var T=d.text.length,N=v(function($){return As(u,_,$-1).bottom<=x},T,0);return T=v(function($){return As(u,_,$).top>x},N,T),{begin:N,end:T}}function mb(u,d,_,x){_||(_=mu(u,d));var T=yp(u,d,As(u,_,x),"line").top;return pb(u,d,_,T)}function gv(u,d,_,x){return u.bottom<=_?!1:u.top>_?!0:(x?u.left:u.right)>d}function I3(u,d,_,x,T){T-=Mr(d);var N=mu(u,d),$=dv(d),Y=0,te=d.text.length,re=!0,ve=V(d,u.doc.direction);if(ve){var xe=(u.options.lineWrapping?k3:P3)(u,d,_,N,ve,x,T);re=xe.level!=1,Y=re?xe.from:xe.to-1,te=re?xe.to:xe.from-1}var Ee=null,Me=null,Ne=v(function(Ct){var Tt=As(u,N,Ct);return Tt.top+=$,Tt.bottom+=$,gv(Tt,x,T,!1)?(Tt.top<=T&&Tt.left<=x&&(Ee=Ct,Me=Tt),!0):!1},Y,te),We,Qe,nt=!1;if(Me){var ut=x-Me.left<Me.right-x,rt=ut==re;Ne=Ee+(rt?0:1),Qe=rt?"after":"before",We=ut?Me.left:Me.right}else{!re&&(Ne==te||Ne==Y)&&Ne++,Qe=Ne==0?"after":Ne==d.text.length?"before":As(u,N,Ne-(re?1:0)).bottom+$<=T==re?"after":"before";var dt=cs(u,qe(_,Ne,Qe),"line",d,N);We=dt.left,nt=T<dt.top?-1:T>=dt.bottom?1:0}return Ne=g(d.text,Ne,1),pv(_,Ne,Qe,nt,x-We)}function P3(u,d,_,x,T,N,$){var Y=v(function(xe){var Ee=T[xe],Me=Ee.level!=1;return gv(cs(u,qe(_,Me?Ee.to:Ee.from,Me?"before":"after"),"line",d,x),N,$,!0)},0,T.length-1),te=T[Y];if(Y>0){var re=te.level!=1,ve=cs(u,qe(_,re?te.from:te.to,re?"after":"before"),"line",d,x);gv(ve,N,$,!0)&&ve.top>$&&(te=T[Y-1])}return te}function k3(u,d,_,x,T,N,$){var Y=pb(u,d,x,$),te=Y.begin,re=Y.end;/\s/.test(d.text.charAt(re-1))&&re--;for(var ve=null,xe=null,Ee=0;Ee<T.length;Ee++){var Me=T[Ee];if(!(Me.from>=re||Me.to<=te)){var Ne=Me.level!=1,We=As(u,x,Ne?Math.min(re,Me.to)-1:Math.max(te,Me.from)).right,Qe=We<N?N-We+1e9:We-N;(!ve||xe>Qe)&&(ve=Me,xe=Qe)}}return ve||(ve=T[T.length-1]),ve.from<te&&(ve={from:te,to:ve.to,level:ve.level}),ve.to>re&&(ve={from:ve.from,to:re,level:ve.level}),ve}var qa;function gu(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(qa==null){qa=w("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)qa.appendChild(document.createTextNode("x")),qa.appendChild(w("br"));qa.appendChild(document.createTextNode("x"))}le(u.measure,qa);var _=qa.offsetHeight/50;return _>3&&(u.cachedTextHeight=_),ue(u.measure),_||1}function vu(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var d=w("span","xxxxxxxxxx"),_=w("pre",[d],"CodeMirror-line-like");le(u.measure,_);var x=d.getBoundingClientRect(),T=(x.right-x.left)/10;return T>2&&(u.cachedCharWidth=T),T||10}function vv(u){for(var d=u.display,_={},x={},T=d.gutters.clientLeft,N=d.gutters.firstChild,$=0;N;N=N.nextSibling,++$){var Y=u.display.gutterSpecs[$].className;_[Y]=N.offsetLeft+N.clientLeft+T,x[Y]=N.clientWidth}return{fixedPos:yv(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:_,gutterWidth:x,wrapperWidth:d.wrapper.clientWidth}}function yv(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function gb(u){var d=gu(u.display),_=u.options.lineWrapping,x=_&&Math.max(5,u.display.scroller.clientWidth/vu(u.display)-3);return function(T){if(Ts(u.doc,T))return 0;var N=0;if(T.widgets)for(var $=0;$<T.widgets.length;$++)T.widgets[$].height&&(N+=T.widgets[$].height);return _?N+(Math.ceil(T.text.length/x)||1)*d:N+d}}function xv(u){var d=u.doc,_=gb(u);d.iter(function(x){var T=_(x);T!=x.height&&Mn(x,T)})}function Xa(u,d,_,x){var T=u.display;if(!_&&gt(d).getAttribute("cm-not-content")=="true")return null;var N,$,Y=T.lineSpace.getBoundingClientRect();try{N=d.clientX-Y.left,$=d.clientY-Y.top}catch{return null}var te=mv(u,N,$),re;if(x&&te.xRel>0&&(re=lt(u.doc,te.line).text).length==te.ch){var ve=we(re,re.length,u.options.tabSize)-re.length;te=qe(te.line,Math.max(0,Math.round((N-rb(u.display).left)/vu(u.display))-ve))}return te}function Ya(u,d){if(d>=u.display.viewTo||(d-=u.display.viewFrom,d<0))return null;for(var _=u.display.view,x=0;x<_.length;x++)if(d-=_[x].size,d<0)return x}function ii(u,d,_,x){d==null&&(d=u.doc.first),_==null&&(_=u.doc.first+u.doc.size),x||(x=0);var T=u.display;if(x&&_<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>d)&&(T.updateLineNumbers=d),u.curOp.viewChanged=!0,d>=T.viewTo)_n&&Lf(u.doc,d)<T.viewTo&&Uo(u);else if(_<=T.viewFrom)_n&&pp(u.doc,_+x)>T.viewFrom?Uo(u):(T.viewFrom+=x,T.viewTo+=x);else if(d<=T.viewFrom&&_>=T.viewTo)Uo(u);else if(d<=T.viewFrom){var N=_p(u,_,_+x,1);N?(T.view=T.view.slice(N.index),T.viewFrom=N.lineN,T.viewTo+=x):Uo(u)}else if(_>=T.viewTo){var $=_p(u,d,d,-1);$?(T.view=T.view.slice(0,$.index),T.viewTo=$.lineN):Uo(u)}else{var Y=_p(u,d,d,-1),te=_p(u,_,_+x,1);Y&&te?(T.view=T.view.slice(0,Y.index).concat(Kt(u,Y.lineN,te.lineN)).concat(T.view.slice(te.index)),T.viewTo+=x):Uo(u)}var re=T.externalMeasured;re&&(_<re.lineN?re.lineN+=x:d<re.lineN+re.size&&(T.externalMeasured=null))}function Bo(u,d,_){u.curOp.viewChanged=!0;var x=u.display,T=u.display.externalMeasured;if(T&&d>=T.lineN&&d<T.lineN+T.size&&(x.externalMeasured=null),!(d<x.viewFrom||d>=x.viewTo)){var N=x.view[Ya(u,d)];if(N.node!=null){var $=N.changes||(N.changes=[]);Ue($,_)==-1&&$.push(_)}}}function Uo(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function _p(u,d,_,x){var T=Ya(u,d),N,$=u.display.view;if(!_n||_==u.doc.first+u.doc.size)return{index:T,lineN:_};for(var Y=u.display.viewFrom,te=0;te<T;te++)Y+=$[te].size;if(Y!=d){if(x>0){if(T==$.length-1)return null;N=Y+$[T].size-d,T++}else N=Y-d;d+=N,_+=N}for(;Lf(u.doc,_)!=_;){if(T==(x<0?0:$.length-1))return null;_+=x*$[T-(x<0?1:0)].size,T+=x}return{index:T,lineN:_}}function O3(u,d,_){var x=u.display,T=x.view;T.length==0||d>=x.viewTo||_<=x.viewFrom?(x.view=Kt(u,d,_),x.viewFrom=d):(x.viewFrom>d?x.view=Kt(u,d,x.viewFrom).concat(x.view):x.viewFrom<d&&(x.view=x.view.slice(Ya(u,d))),x.viewFrom=d,x.viewTo<_?x.view=x.view.concat(Kt(u,x.viewTo,_)):x.viewTo>_&&(x.view=x.view.slice(0,Ya(u,_)))),x.viewTo=_}function vb(u){for(var d=u.display.view,_=0,x=0;x<d.length;x++){var T=d[x];!T.hidden&&(!T.node||T.changes)&&++_}return _}function Nf(u){u.display.input.showSelection(u.display.input.prepareSelection())}function yb(u,d){d===void 0&&(d=!0);var _=u.doc,x={},T=x.cursors=document.createDocumentFragment(),N=x.selection=document.createDocumentFragment(),$=u.options.$customCursor;$&&(d=!0);for(var Y=0;Y<_.sel.ranges.length;Y++)if(!(!d&&Y==_.sel.primIndex)){var te=_.sel.ranges[Y];if(!(te.from().line>=u.display.viewTo||te.to().line<u.display.viewFrom)){var re=te.empty();if($){var ve=$(u,te);ve&&_v(u,ve,T)}else(re||u.options.showCursorWhenSelecting)&&_v(u,te.head,T);re||D3(u,te,N)}}return x}function _v(u,d,_){var x=cs(u,d,"div",null,null,!u.options.singleCursorHeightPerLine),T=_.appendChild(w("div","\xA0","CodeMirror-cursor"));if(T.style.left=x.left+"px",T.style.top=x.top+"px",T.style.height=Math.max(0,x.bottom-x.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var N=xp(u,d,"div",null,null),$=N.right-N.left;T.style.width=($>0?$:u.defaultCharWidth())+"px"}if(x.other){var Y=_.appendChild(w("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));Y.style.display="",Y.style.left=x.other.left+"px",Y.style.top=x.other.top+"px",Y.style.height=(x.other.bottom-x.other.top)*.85+"px"}}function wp(u,d){return u.top-d.top||u.left-d.left}function D3(u,d,_){var x=u.display,T=u.doc,N=document.createDocumentFragment(),$=rb(u.display),Y=$.left,te=Math.max(x.sizerWidth,ja(u)-x.sizer.offsetLeft)-$.right,re=T.direction=="ltr";function ve(rt,dt,Ct,Tt){dt<0&&(dt=0),dt=Math.round(dt),Tt=Math.round(Tt),N.appendChild(w("div",null,"CodeMirror-selected","position: absolute; left: "+rt+`px;
                             top: `+dt+"px; width: "+(Ct==null?te-rt:Ct)+`px;
                             height: `+(Tt-dt)+"px"))}function xe(rt,dt,Ct){var Tt=lt(T,rt),qt=Tt.text.length,wn,vr;function On(Jn,ai){return xp(u,qe(rt,Jn),"div",Tt,ai)}function gi(Jn,ai,Tr){var cr=mb(u,Tt,null,Jn),er=ai=="ltr"==(Tr=="after")?"left":"right",Un=Tr=="after"?cr.begin:cr.end-(/\s/.test(Tt.text.charAt(cr.end-1))?2:1);return On(Un,er)[er]}var oi=V(Tt,T.direction);return S(oi,dt||0,Ct==null?qt:Ct,function(Jn,ai,Tr,cr){var er=Tr=="ltr",Un=On(Jn,er?"left":"right"),li=On(ai-1,er?"right":"left"),Lu=dt==null&&Jn==0,$o=Ct==null&&ai==qt,Nr=cr==0,Cs=!oi||cr==oi.length-1;if(li.top-Un.top<=3){var yr=(re?Lu:$o)&&Nr,jv=(re?$o:Lu)&&Cs,no=yr?Y:(er?Un:li).left,el=jv?te:(er?li:Un).right;ve(no,Un.top,el-no,Un.bottom)}else{var tl,Xr,Iu,qv;er?(tl=re&&Lu&&Nr?Y:Un.left,Xr=re?te:gi(Jn,Tr,"before"),Iu=re?Y:gi(ai,Tr,"after"),qv=re&&$o&&Cs?te:li.right):(tl=re?gi(Jn,Tr,"before"):Y,Xr=!re&&Lu&&Nr?te:Un.right,Iu=!re&&$o&&Cs?Y:li.left,qv=re?gi(ai,Tr,"after"):te),ve(tl,Un.top,Xr-tl,Un.bottom),Un.bottom<li.top&&ve(Y,Un.bottom,null,li.top),ve(Iu,li.top,qv-Iu,li.bottom)}(!wn||wp(Un,wn)<0)&&(wn=Un),wp(li,wn)<0&&(wn=li),(!vr||wp(Un,vr)<0)&&(vr=Un),wp(li,vr)<0&&(vr=li)}),{start:wn,end:vr}}var Ee=d.from(),Me=d.to();if(Ee.line==Me.line)xe(Ee.line,Ee.ch,Me.ch);else{var Ne=lt(T,Ee.line),We=lt(T,Me.line),Qe=Ii(Ne)==Ii(We),nt=xe(Ee.line,Ee.ch,Qe?Ne.text.length+1:null).end,ut=xe(Me.line,Qe?0:null,Me.ch).start;Qe&&(nt.top<ut.top-2?(ve(nt.right,nt.top,null,nt.bottom),ve(Y,ut.top,ut.left,ut.bottom)):ve(nt.right,nt.top,ut.left-nt.right,nt.bottom)),nt.bottom<ut.top&&ve(Y,nt.bottom,null,ut.top)}_.appendChild(N)}function wv(u){if(!!u.state.focused){var d=u.display;clearInterval(d.blinker);var _=!0;d.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?d.blinker=setInterval(function(){u.hasFocus()||yu(u),d.cursorDiv.style.visibility=(_=!_)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function xb(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||Sv(u))}function bv(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&yu(u))},100)}function Sv(u,d){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(ie(u,"focus",u,d),u.state.focused=!0,ke(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),b&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),wv(u))}function yu(u,d){u.state.delayingBlurEvent||(u.state.focused&&(ie(u,"blur",u,d),u.state.focused=!1,ee(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function bp(u){for(var d=u.display,_=d.lineDiv.offsetTop,x=Math.max(0,d.scroller.getBoundingClientRect().top),T=d.lineDiv.getBoundingClientRect().top,N=0,$=0;$<d.view.length;$++){var Y=d.view[$],te=u.options.lineWrapping,re=void 0,ve=0;if(!Y.hidden){if(T+=Y.line.height,m&&y<8){var xe=Y.node.offsetTop+Y.node.offsetHeight;re=xe-_,_=xe}else{var Ee=Y.node.getBoundingClientRect();re=Ee.bottom-Ee.top,!te&&Y.text.firstChild&&(ve=Y.text.firstChild.getBoundingClientRect().right-Ee.left-1)}var Me=Y.line.height-re;if((Me>.005||Me<-.005)&&(T<x&&(N-=Me),Mn(Y.line,re),_b(Y.line),Y.rest))for(var Ne=0;Ne<Y.rest.length;Ne++)_b(Y.rest[Ne]);if(ve>u.display.sizerWidth){var We=Math.ceil(ve/vu(u.display));We>u.display.maxLineLength&&(u.display.maxLineLength=We,u.display.maxLine=Y.line,u.display.maxLineChanged=!0)}}}Math.abs(N)>2&&(d.scroller.scrollTop+=N)}function _b(u){if(u.widgets)for(var d=0;d<u.widgets.length;++d){var _=u.widgets[d],x=_.node.parentNode;x&&(_.height=x.offsetHeight)}}function Sp(u,d,_){var x=_&&_.top!=null?Math.max(0,_.top):u.scroller.scrollTop;x=Math.floor(x-vp(u));var T=_&&_.bottom!=null?_.bottom:x+u.wrapper.clientHeight,N=Sr(d,x),$=Sr(d,T);if(_&&_.ensure){var Y=_.ensure.from.line,te=_.ensure.to.line;Y<N?(N=Y,$=Sr(d,Mr(lt(d,Y))+u.wrapper.clientHeight)):Math.min(te,d.lastLine())>=$&&(N=Sr(d,Mr(lt(d,te))-u.wrapper.clientHeight),$=te)}return{from:N,to:Math.max($,N+1)}}function N3(u,d){if(!fe(u,"scrollCursorIntoView")){var _=u.display,x=_.sizer.getBoundingClientRect(),T=null;if(d.top+x.top<0?T=!0:d.bottom+x.top>(window.innerHeight||document.documentElement.clientHeight)&&(T=!1),T!=null&&!H){var N=w("div","\u200B",null,`position: absolute;
                         top: `+(d.top-_.viewOffset-vp(u.display))+`px;
                         height: `+(d.bottom-d.top+Es(u)+_.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");u.display.lineSpace.appendChild(N),N.scrollIntoView(T),u.display.lineSpace.removeChild(N)}}}function F3(u,d,_,x){x==null&&(x=0);var T;!u.options.lineWrapping&&d==_&&(_=d.sticky=="before"?qe(d.line,d.ch+1,"before"):d,d=d.ch?qe(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var N=0;N<5;N++){var $=!1,Y=cs(u,d),te=!_||_==d?Y:cs(u,_);T={left:Math.min(Y.left,te.left),top:Math.min(Y.top,te.top)-x,right:Math.max(Y.left,te.left),bottom:Math.max(Y.bottom,te.bottom)+x};var re=Mv(u,T),ve=u.doc.scrollTop,xe=u.doc.scrollLeft;if(re.scrollTop!=null&&(Bf(u,re.scrollTop),Math.abs(u.doc.scrollTop-ve)>1&&($=!0)),re.scrollLeft!=null&&(Ka(u,re.scrollLeft),Math.abs(u.doc.scrollLeft-xe)>1&&($=!0)),!$)break}return T}function B3(u,d){var _=Mv(u,d);_.scrollTop!=null&&Bf(u,_.scrollTop),_.scrollLeft!=null&&Ka(u,_.scrollLeft)}function Mv(u,d){var _=u.display,x=gu(u.display);d.top<0&&(d.top=0);var T=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:_.scroller.scrollTop,N=fv(u),$={};d.bottom-d.top>N&&(d.bottom=d.top+N);var Y=u.doc.height+cv(_),te=d.top<x,re=d.bottom>Y-x;if(d.top<T)$.scrollTop=te?0:d.top;else if(d.bottom>T+N){var ve=Math.min(d.top,(re?Y:d.bottom)-N);ve!=T&&($.scrollTop=ve)}var xe=u.options.fixedGutter?0:_.gutters.offsetWidth,Ee=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:_.scroller.scrollLeft-xe,Me=ja(u)-_.gutters.offsetWidth,Ne=d.right-d.left>Me;return Ne&&(d.right=d.left+Me),d.left<10?$.scrollLeft=0:d.left<Ee?$.scrollLeft=Math.max(0,d.left+xe-(Ne?0:10)):d.right>Me+Ee-3&&($.scrollLeft=d.right+(Ne?0:10)-Me),$}function Tv(u,d){d!=null&&(Mp(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+d)}function xu(u){Mp(u);var d=u.getCursor();u.curOp.scrollToPos={from:d,to:d,margin:u.options.cursorScrollMargin}}function Ff(u,d,_){(d!=null||_!=null)&&Mp(u),d!=null&&(u.curOp.scrollLeft=d),_!=null&&(u.curOp.scrollTop=_)}function U3(u,d){Mp(u),u.curOp.scrollToPos=d}function Mp(u){var d=u.curOp.scrollToPos;if(d){u.curOp.scrollToPos=null;var _=db(u,d.from),x=db(u,d.to);wb(u,_,x,d.margin)}}function wb(u,d,_,x){var T=Mv(u,{left:Math.min(d.left,_.left),top:Math.min(d.top,_.top)-x,right:Math.max(d.right,_.right),bottom:Math.max(d.bottom,_.bottom)+x});Ff(u,T.scrollLeft,T.scrollTop)}function Bf(u,d){Math.abs(u.doc.scrollTop-d)<2||(o||Av(u,{top:d}),bb(u,d,!0),o&&Av(u),Hf(u,100))}function bb(u,d,_){d=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,d)),!(u.display.scroller.scrollTop==d&&!_)&&(u.doc.scrollTop=d,u.display.scrollbars.setScrollTop(d),u.display.scroller.scrollTop!=d&&(u.display.scroller.scrollTop=d))}function Ka(u,d,_,x){d=Math.max(0,Math.min(d,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((_?d==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-d)<2)&&!x)&&(u.doc.scrollLeft=d,Ab(u),u.display.scroller.scrollLeft!=d&&(u.display.scroller.scrollLeft=d),u.display.scrollbars.setScrollLeft(d))}function Uf(u){var d=u.display,_=d.gutters.offsetWidth,x=Math.round(u.doc.height+cv(u.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:u.options.fixedGutter?_:0,docHeight:x,scrollHeight:x+Es(u)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:_}}var Za=function(u,d,_){this.cm=_;var x=this.vert=w("div",[w("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=w("div",[w("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");x.tabIndex=T.tabIndex=-1,u(x),u(T),K(x,"scroll",function(){x.clientHeight&&d(x.scrollTop,"vertical")}),K(T,"scroll",function(){T.clientWidth&&d(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&y<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Za.prototype.update=function(u){var d=u.scrollWidth>u.clientWidth+1,_=u.scrollHeight>u.clientHeight+1,x=u.nativeBarWidth;if(_){this.vert.style.display="block",this.vert.style.bottom=d?x+"px":"0";var T=u.viewHeight-(d?x:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=_?x+"px":"0",this.horiz.style.left=u.barLeft+"px";var N=u.viewWidth-u.barLeft-(_?x:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+N)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(x==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:_?x:0,bottom:d?x:0}},Za.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Za.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Za.prototype.zeroWidthHack=function(){var u=L&&!U?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new be,this.disableVert=new be},Za.prototype.enableZeroWidthBar=function(u,d,_){u.style.pointerEvents="auto";function x(){var T=u.getBoundingClientRect(),N=_=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1);N!=u?u.style.pointerEvents="none":d.set(1e3,x)}d.set(1e3,x)},Za.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var zf=function(){};zf.prototype.update=function(){return{bottom:0,right:0}},zf.prototype.setScrollLeft=function(){},zf.prototype.setScrollTop=function(){},zf.prototype.clear=function(){};function _u(u,d){d||(d=Uf(u));var _=u.display.barWidth,x=u.display.barHeight;Sb(u,d);for(var T=0;T<4&&_!=u.display.barWidth||x!=u.display.barHeight;T++)_!=u.display.barWidth&&u.options.lineWrapping&&bp(u),Sb(u,Uf(u)),_=u.display.barWidth,x=u.display.barHeight}function Sb(u,d){var _=u.display,x=_.scrollbars.update(d);_.sizer.style.paddingRight=(_.barWidth=x.right)+"px",_.sizer.style.paddingBottom=(_.barHeight=x.bottom)+"px",_.heightForcer.style.borderBottom=x.bottom+"px solid transparent",x.right&&x.bottom?(_.scrollbarFiller.style.display="block",_.scrollbarFiller.style.height=x.bottom+"px",_.scrollbarFiller.style.width=x.right+"px"):_.scrollbarFiller.style.display="",x.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(_.gutterFiller.style.display="block",_.gutterFiller.style.height=x.bottom+"px",_.gutterFiller.style.width=d.gutterWidth+"px"):_.gutterFiller.style.display=""}var Mb={native:Za,null:zf};function Tb(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&ee(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new Mb[u.options.scrollbarStyle](function(d){u.display.wrapper.insertBefore(d,u.display.scrollbarFiller),K(d,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,_){_=="horizontal"?Ka(u,d):Bf(u,d)},u),u.display.scrollbars.addClass&&ke(u.display.wrapper,u.display.scrollbars.addClass)}var z3=0;function Qa(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++z3,markArrays:null},$r(u.curOp)}function Ja(u){var d=u.curOp;d&&Wa(d,function(_){for(var x=0;x<_.ops.length;x++)_.ops[x].cm.curOp=null;H3(_)})}function H3(u){for(var d=u.ops,_=0;_<d.length;_++)G3(d[_]);for(var x=0;x<d.length;x++)V3(d[x]);for(var T=0;T<d.length;T++)W3(d[T]);for(var N=0;N<d.length;N++)$3(d[N]);for(var $=0;$<d.length;$++)j3(d[$])}function G3(u){var d=u.cm,_=d.display;X3(d),u.updateMaxLine&&pu(d),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<_.viewFrom||u.scrollToPos.to.line>=_.viewTo)||_.maxLineChanged&&d.options.lineWrapping,u.update=u.mustUpdate&&new Tp(d,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function V3(u){u.updatedDisplay=u.mustUpdate&&Ev(u.cm,u.update)}function W3(u){var d=u.cm,_=d.display;u.updatedDisplay&&bp(d),u.barMeasure=Uf(d),_.maxLineChanged&&!d.options.lineWrapping&&(u.adjustWidthTo=sb(d,_.maxLine,_.maxLine.text.length).left+3,d.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(_.scroller.clientWidth,_.sizer.offsetLeft+u.adjustWidthTo+Es(d)+d.display.barWidth),u.maxScrollLeft=Math.max(0,_.sizer.offsetLeft+u.adjustWidthTo-ja(d))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=_.input.prepareSelection())}function $3(u){var d=u.cm;u.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<d.doc.scrollLeft&&Ka(d,Math.min(d.display.scroller.scrollLeft,u.maxScrollLeft),!0),d.display.maxLineChanged=!1);var _=u.focus&&u.focus==ge();u.preparedSelection&&d.display.input.showSelection(u.preparedSelection,_),(u.updatedDisplay||u.startHeight!=d.doc.height)&&_u(d,u.barMeasure),u.updatedDisplay&&Rv(d,u.barMeasure),u.selectionChanged&&wv(d),d.state.focused&&u.updateInput&&d.display.input.reset(u.typing),_&&xb(u.cm)}function j3(u){var d=u.cm,_=d.display,x=d.doc;if(u.updatedDisplay&&Eb(d,u.update),_.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(_.wheelStartX=_.wheelStartY=null),u.scrollTop!=null&&bb(d,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&Ka(d,u.scrollLeft,!0,!0),u.scrollToPos){var T=F3(d,ct(x,u.scrollToPos.from),ct(x,u.scrollToPos.to),u.scrollToPos.margin);N3(d,T)}var N=u.maybeHiddenMarkers,$=u.maybeUnhiddenMarkers;if(N)for(var Y=0;Y<N.length;++Y)N[Y].lines.length||ie(N[Y],"hide");if($)for(var te=0;te<$.length;++te)$[te].lines.length&&ie($[te],"unhide");_.wrapper.offsetHeight&&(x.scrollTop=d.display.scroller.scrollTop),u.changeObjs&&ie(d,"changes",d,u.changeObjs),u.update&&u.update.finish()}function mi(u,d){if(u.curOp)return d();Qa(u);try{return d()}finally{Ja(u)}}function mr(u,d){return function(){if(u.curOp)return d.apply(u,arguments);Qa(u);try{return d.apply(u,arguments)}finally{Ja(u)}}}function qr(u){return function(){if(this.curOp)return u.apply(this,arguments);Qa(this);try{return u.apply(this,arguments)}finally{Ja(this)}}}function gr(u){return function(){var d=this.cm;if(!d||d.curOp)return u.apply(this,arguments);Qa(d);try{return u.apply(this,arguments)}finally{Ja(d)}}}function Hf(u,d){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(d,ye(q3,u))}function q3(u){var d=u.doc;if(!(d.highlightFrontier>=u.display.viewTo)){var _=+new Date+u.options.workTime,x=Oo(u,d.highlightFrontier),T=[];d.iter(x.line,Math.min(d.first+d.size,u.display.viewTo+500),function(N){if(x.line>=u.display.viewFrom){var $=N.styles,Y=N.text.length>u.options.maxHighlightLength?Vn(d.mode,x.state):null,te=ap(u,N,x,!0);Y&&(x.state=Y),N.styles=te.styles;var re=N.styleClasses,ve=te.classes;ve?N.styleClasses=ve:re&&(N.styleClasses=null);for(var xe=!$||$.length!=N.styles.length||re!=ve&&(!re||!ve||re.bgClass!=ve.bgClass||re.textClass!=ve.textClass),Ee=0;!xe&&Ee<$.length;++Ee)xe=$[Ee]!=N.styles[Ee];xe&&T.push(x.line),N.stateAfter=x.save(),x.nextLine()}else N.text.length<=u.options.maxHighlightLength&&Tf(u,N.text,x),N.stateAfter=x.line%5==0?x.save():null,x.nextLine();if(+new Date>_)return Hf(u,u.options.workDelay),!0}),d.highlightFrontier=x.line,d.modeFrontier=Math.max(d.modeFrontier,x.line),T.length&&mi(u,function(){for(var N=0;N<T.length;N++)Bo(u,T[N],"text")})}}var Tp=function(u,d,_){var x=u.display;this.viewport=d,this.visible=Sp(x,u.doc,d),this.editorIsHidden=!x.wrapper.offsetWidth,this.wrapperHeight=x.wrapper.clientHeight,this.wrapperWidth=x.wrapper.clientWidth,this.oldDisplayWidth=ja(u),this.force=_,this.dims=vv(u),this.events=[]};Tp.prototype.signal=function(u,d){Ie(u,d)&&this.events.push(arguments)},Tp.prototype.finish=function(){for(var u=0;u<this.events.length;u++)ie.apply(null,this.events[u])};function X3(u){var d=u.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=Es(u)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=Es(u)+"px",d.scrollbarsClipped=!0)}function Y3(u){if(u.hasFocus())return null;var d=ge();if(!d||!E(u.display.lineDiv,d))return null;var _={activeElt:d};if(window.getSelection){var x=window.getSelection();x.anchorNode&&x.extend&&E(u.display.lineDiv,x.anchorNode)&&(_.anchorNode=x.anchorNode,_.anchorOffset=x.anchorOffset,_.focusNode=x.focusNode,_.focusOffset=x.focusOffset)}return _}function K3(u){if(!(!u||!u.activeElt||u.activeElt==ge())&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&E(document.body,u.anchorNode)&&E(document.body,u.focusNode))){var d=window.getSelection(),_=document.createRange();_.setEnd(u.anchorNode,u.anchorOffset),_.collapse(!1),d.removeAllRanges(),d.addRange(_),d.extend(u.focusNode,u.focusOffset)}}function Ev(u,d){var _=u.display,x=u.doc;if(d.editorIsHidden)return Uo(u),!1;if(!d.force&&d.visible.from>=_.viewFrom&&d.visible.to<=_.viewTo&&(_.updateLineNumbers==null||_.updateLineNumbers>=_.viewTo)&&_.renderedView==_.view&&vb(u)==0)return!1;Cb(u)&&(Uo(u),d.dims=vv(u));var T=x.first+x.size,N=Math.max(d.visible.from-u.options.viewportMargin,x.first),$=Math.min(T,d.visible.to+u.options.viewportMargin);_.viewFrom<N&&N-_.viewFrom<20&&(N=Math.max(x.first,_.viewFrom)),_.viewTo>$&&_.viewTo-$<20&&($=Math.min(T,_.viewTo)),_n&&(N=Lf(u.doc,N),$=pp(u.doc,$));var Y=N!=_.viewFrom||$!=_.viewTo||_.lastWrapHeight!=d.wrapperHeight||_.lastWrapWidth!=d.wrapperWidth;O3(u,N,$),_.viewOffset=Mr(lt(u.doc,_.viewFrom)),u.display.mover.style.top=_.viewOffset+"px";var te=vb(u);if(!Y&&te==0&&!d.force&&_.renderedView==_.view&&(_.updateLineNumbers==null||_.updateLineNumbers>=_.viewTo))return!1;var re=Y3(u);return te>4&&(_.lineDiv.style.display="none"),Z3(u,_.updateLineNumbers,d.dims),te>4&&(_.lineDiv.style.display=""),_.renderedView=_.view,K3(re),ue(_.cursorDiv),ue(_.selectionDiv),_.gutters.style.height=_.sizer.style.minHeight=0,Y&&(_.lastWrapHeight=d.wrapperHeight,_.lastWrapWidth=d.wrapperWidth,Hf(u,400)),_.updateLineNumbers=null,!0}function Eb(u,d){for(var _=d.viewport,x=!0;;x=!1){if(!x||!u.options.lineWrapping||d.oldDisplayWidth==ja(u)){if(_&&_.top!=null&&(_={top:Math.min(u.doc.height+cv(u.display)-fv(u),_.top)}),d.visible=Sp(u.display,u.doc,_),d.visible.from>=u.display.viewFrom&&d.visible.to<=u.display.viewTo)break}else x&&(d.visible=Sp(u.display,u.doc,_));if(!Ev(u,d))break;bp(u);var T=Uf(u);Nf(u),_u(u,T),Rv(u,T),d.force=!1}d.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(d.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function Av(u,d){var _=new Tp(u,d);if(Ev(u,_)){bp(u),Eb(u,_);var x=Uf(u);Nf(u),_u(u,x),Rv(u,x),_.finish()}}function Z3(u,d,_){var x=u.display,T=u.options.lineNumbers,N=x.lineDiv,$=N.firstChild;function Y(Ne){var We=Ne.nextSibling;return b&&L&&u.display.currentWheelTarget==Ne?Ne.style.display="none":Ne.parentNode.removeChild(Ne),We}for(var te=x.view,re=x.viewFrom,ve=0;ve<te.length;ve++){var xe=te[ve];if(!xe.hidden)if(!xe.node||xe.node.parentNode!=N){var Ee=M3(u,xe,re,_);N.insertBefore(Ee,$)}else{for(;$!=xe.node;)$=Y($);var Me=T&&d!=null&&d<=re&&xe.lineNumber;xe.changes&&(Ue(xe.changes,"gutter")>-1&&(Me=!1),Qw(u,xe,re,_)),Me&&(ue(xe.lineNumber),xe.lineNumber.appendChild(document.createTextNode(za(u.options,re)))),$=xe.node.nextSibling}re+=xe.size}for(;$;)$=Y($)}function Cv(u){var d=u.gutters.offsetWidth;u.sizer.style.marginLeft=d+"px",Qn(u,"gutterChanged",u)}function Rv(u,d){u.display.sizer.style.minHeight=d.docHeight+"px",u.display.heightForcer.style.top=d.docHeight+"px",u.display.gutters.style.height=d.docHeight+u.display.barHeight+Es(u)+"px"}function Ab(u){var d=u.display,_=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!u.options.fixedGutter))){for(var x=yv(d)-d.scroller.scrollLeft+u.doc.scrollLeft,T=d.gutters.offsetWidth,N=x+"px",$=0;$<_.length;$++)if(!_[$].hidden){u.options.fixedGutter&&(_[$].gutter&&(_[$].gutter.style.left=N),_[$].gutterBackground&&(_[$].gutterBackground.style.left=N));var Y=_[$].alignable;if(Y)for(var te=0;te<Y.length;te++)Y[te].style.left=N}u.options.fixedGutter&&(d.gutters.style.left=x+T+"px")}}function Cb(u){if(!u.options.lineNumbers)return!1;var d=u.doc,_=za(u.options,d.first+d.size-1),x=u.display;if(_.length!=x.lineNumChars){var T=x.measure.appendChild(w("div",[w("div",_)],"CodeMirror-linenumber CodeMirror-gutter-elt")),N=T.firstChild.offsetWidth,$=T.offsetWidth-N;return x.lineGutter.style.width="",x.lineNumInnerWidth=Math.max(N,x.lineGutter.offsetWidth-$)+1,x.lineNumWidth=x.lineNumInnerWidth+$,x.lineNumChars=x.lineNumInnerWidth?_.length:-1,x.lineGutter.style.width=x.lineNumWidth+"px",Cv(u.display),!0}return!1}function Lv(u,d){for(var _=[],x=!1,T=0;T<u.length;T++){var N=u[T],$=null;if(typeof N!="string"&&($=N.style,N=N.className),N=="CodeMirror-linenumbers")if(d)x=!0;else continue;_.push({className:N,style:$})}return d&&!x&&_.push({className:"CodeMirror-linenumbers",style:null}),_}function Rb(u){var d=u.gutters,_=u.gutterSpecs;ue(d),u.lineGutter=null;for(var x=0;x<_.length;++x){var T=_[x],N=T.className,$=T.style,Y=d.appendChild(w("div",null,"CodeMirror-gutter "+N));$&&(Y.style.cssText=$),N=="CodeMirror-linenumbers"&&(u.lineGutter=Y,Y.style.width=(u.lineNumWidth||1)+"px")}d.style.display=_.length?"":"none",Cv(u)}function Gf(u){Rb(u.display),ii(u),Ab(u)}function Q3(u,d,_,x){var T=this;this.input=_,T.scrollbarFiller=w("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=w("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=p("div",null,"CodeMirror-code"),T.selectionDiv=w("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=w("div",null,"CodeMirror-cursors"),T.measure=w("div",null,"CodeMirror-measure"),T.lineMeasure=w("div",null,"CodeMirror-measure"),T.lineSpace=p("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var N=p("div",[T.lineSpace],"CodeMirror-lines");T.mover=w("div",[N],null,"position: relative"),T.sizer=w("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=w("div",null,null,"position: absolute; height: "+Ce+"px; width: 1px;"),T.gutters=w("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=w("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=w("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),T.wrapper.setAttribute("translate","no"),m&&y<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),!b&&!(o&&F)&&(T.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(T.wrapper):u(T.wrapper)),T.viewFrom=T.viewTo=d.first,T.reportedViewFrom=T.reportedViewTo=d.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=Lv(x.gutters,x.lineNumbers),Rb(T),_.init(T)}var Ep=0,eo=null;m?eo=-.53:o?eo=15:C?eo=-.7:O&&(eo=-1/3);function Lb(u){var d=u.wheelDeltaX,_=u.wheelDeltaY;return d==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(d=u.detail),_==null&&u.detail&&u.axis==u.VERTICAL_AXIS?_=u.detail:_==null&&(_=u.wheelDelta),{x:d,y:_}}function J3(u){var d=Lb(u);return d.x*=eo,d.y*=eo,d}function Ib(u,d){var _=Lb(d),x=_.x,T=_.y,N=eo;d.deltaMode===0&&(x=d.deltaX,T=d.deltaY,N=1);var $=u.display,Y=$.scroller,te=Y.scrollWidth>Y.clientWidth,re=Y.scrollHeight>Y.clientHeight;if(!!(x&&te||T&&re)){if(T&&L&&b){e:for(var ve=d.target,xe=$.view;ve!=Y;ve=ve.parentNode)for(var Ee=0;Ee<xe.length;Ee++)if(xe[Ee].node==ve){u.display.currentWheelTarget=ve;break e}}if(x&&!o&&!I&&N!=null){T&&re&&Bf(u,Math.max(0,Y.scrollTop+T*N)),Ka(u,Math.max(0,Y.scrollLeft+x*N)),(!T||T&&re)&&Fe(d),$.wheelStartX=null;return}if(T&&N!=null){var Me=T*N,Ne=u.doc.scrollTop,We=Ne+$.wrapper.clientHeight;Me<0?Ne=Math.max(0,Ne+Me-50):We=Math.min(u.doc.height,We+Me+50),Av(u,{top:Ne,bottom:We})}Ep<20&&d.deltaMode!==0&&($.wheelStartX==null?($.wheelStartX=Y.scrollLeft,$.wheelStartY=Y.scrollTop,$.wheelDX=x,$.wheelDY=T,setTimeout(function(){if($.wheelStartX!=null){var Qe=Y.scrollLeft-$.wheelStartX,nt=Y.scrollTop-$.wheelStartY,ut=nt&&$.wheelDY&&nt/$.wheelDY||Qe&&$.wheelDX&&Qe/$.wheelDX;$.wheelStartX=$.wheelStartY=null,!!ut&&(eo=(eo*Ep+ut)/(Ep+1),++Ep)}},200)):($.wheelDX+=x,$.wheelDY+=T))}}var Pi=function(u,d){this.ranges=u,this.primIndex=d};Pi.prototype.primary=function(){return this.ranges[this.primIndex]},Pi.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var _=this.ranges[d],x=u.ranges[d];if(!_e(_.anchor,x.anchor)||!_e(_.head,x.head))return!1}return!0},Pi.prototype.deepCopy=function(){for(var u=[],d=0;d<this.ranges.length;d++)u[d]=new cn(Ge(this.ranges[d].anchor),Ge(this.ranges[d].head));return new Pi(u,this.primIndex)},Pi.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},Pi.prototype.contains=function(u,d){d||(d=u);for(var _=0;_<this.ranges.length;_++){var x=this.ranges[_];if(se(d,x.from())>=0&&se(u,x.to())<=0)return _}return-1};var cn=function(u,d){this.anchor=u,this.head=d};cn.prototype.from=function(){return It(this.anchor,this.head)},cn.prototype.to=function(){return Ke(this.anchor,this.head)},cn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function fs(u,d,_){var x=u&&u.options.selectionsMayTouch,T=d[_];d.sort(function(Ee,Me){return se(Ee.from(),Me.from())}),_=Ue(d,T);for(var N=1;N<d.length;N++){var $=d[N],Y=d[N-1],te=se(Y.to(),$.from());if(x&&!$.empty()?te>0:te>=0){var re=It(Y.from(),$.from()),ve=Ke(Y.to(),$.to()),xe=Y.empty()?$.from()==$.head:Y.from()==Y.head;N<=_&&--_,d.splice(--N,2,new cn(xe?ve:re,xe?re:ve))}}return new Pi(d,_)}function zo(u,d){return new Pi([new cn(u,d||u)],0)}function Ho(u){return u.text?qe(u.from.line+u.text.length-1,De(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function Pb(u,d){if(se(u,d.from)<0)return u;if(se(u,d.to)<=0)return Ho(d);var _=u.line+d.text.length-(d.to.line-d.from.line)-1,x=u.ch;return u.line==d.to.line&&(x+=Ho(d).ch-d.to.ch),qe(_,x)}function Iv(u,d){for(var _=[],x=0;x<u.sel.ranges.length;x++){var T=u.sel.ranges[x];_.push(new cn(Pb(T.anchor,d),Pb(T.head,d)))}return fs(u.cm,_,u.sel.primIndex)}function kb(u,d,_){return u.line==d.line?qe(_.line,u.ch-d.ch+_.ch):qe(_.line+(u.line-d.line),u.ch)}function eI(u,d,_){for(var x=[],T=qe(u.first,0),N=T,$=0;$<d.length;$++){var Y=d[$],te=kb(Y.from,T,N),re=kb(Ho(Y),T,N);if(T=Y.to,N=re,_=="around"){var ve=u.sel.ranges[$],xe=se(ve.head,ve.anchor)<0;x[$]=new cn(xe?re:te,xe?te:re)}else x[$]=new cn(te,te)}return new Pi(x,u.sel.primIndex)}function Pv(u){u.doc.mode=Xt(u.options,u.doc.modeOption),Vf(u)}function Vf(u){u.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,Hf(u,100),u.state.modeGen++,u.curOp&&ii(u)}function Ob(u,d){return d.from.ch==0&&d.to.ch==0&&De(d.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function kv(u,d,_,x){function T(ut){return _?_[ut]:null}function N(ut,rt,dt){If(ut,rt,dt,x),Qn(ut,"change",ut,d)}function $(ut,rt){for(var dt=[],Ct=ut;Ct<rt;++Ct)dt.push(new Qs(re[Ct],T(Ct),x));return dt}var Y=d.from,te=d.to,re=d.text,ve=lt(u,Y.line),xe=lt(u,te.line),Ee=De(re),Me=T(re.length-1),Ne=te.line-Y.line;if(d.full)u.insert(0,$(0,re.length)),u.remove(re.length,u.size-re.length);else if(Ob(u,d)){var We=$(0,re.length-1);N(xe,xe.text,Me),Ne&&u.remove(Y.line,Ne),We.length&&u.insert(Y.line,We)}else if(ve==xe)if(re.length==1)N(ve,ve.text.slice(0,Y.ch)+Ee+ve.text.slice(te.ch),Me);else{var Qe=$(1,re.length-1);Qe.push(new Qs(Ee+ve.text.slice(te.ch),Me,x)),N(ve,ve.text.slice(0,Y.ch)+re[0],T(0)),u.insert(Y.line+1,Qe)}else if(re.length==1)N(ve,ve.text.slice(0,Y.ch)+re[0]+xe.text.slice(te.ch),T(0)),u.remove(Y.line+1,Ne);else{N(ve,ve.text.slice(0,Y.ch)+re[0],T(0)),N(xe,Ee+xe.text.slice(te.ch),Me);var nt=$(1,re.length-1);Ne>1&&u.remove(Y.line+1,Ne-1),u.insert(Y.line+1,nt)}Qn(u,"change",u,d)}function Go(u,d,_){function x(T,N,$){if(T.linked)for(var Y=0;Y<T.linked.length;++Y){var te=T.linked[Y];if(te.doc!=N){var re=$&&te.sharedHist;_&&!re||(d(te.doc,re),x(te.doc,T,re))}}}x(u,null,!0)}function Db(u,d){if(d.cm)throw new Error("This document is already in use.");u.doc=d,d.cm=u,xv(u),Pv(u),Nb(u),u.options.direction=d.direction,u.options.lineWrapping||pu(u),u.options.mode=d.modeOption,ii(u)}function Nb(u){(u.doc.direction=="rtl"?ke:ee)(u.display.lineDiv,"CodeMirror-rtl")}function tI(u){mi(u,function(){Nb(u),ii(u)})}function Ap(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function Ov(u,d){var _={from:Ge(d.from),to:Ho(d),text:kr(u,d.from,d.to)};return Ub(u,_,d.from.line,d.to.line+1),Go(u,function(x){return Ub(x,_,d.from.line,d.to.line+1)},!0),_}function Fb(u){for(;u.length;){var d=De(u);if(d.ranges)u.pop();else break}}function nI(u,d){if(d)return Fb(u.done),De(u.done);if(u.done.length&&!De(u.done).ranges)return De(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),De(u.done)}function Bb(u,d,_,x){var T=u.history;T.undone.length=0;var N=+new Date,$,Y;if((T.lastOp==x||T.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&T.lastModTime>N-(u.cm?u.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&($=nI(T,T.lastOp==x)))Y=De($.changes),se(d.from,d.to)==0&&se(d.from,Y.to)==0?Y.to=Ho(d):$.changes.push(Ov(u,d));else{var te=De(T.done);for((!te||!te.ranges)&&Cp(u.sel,T.done),$={changes:[Ov(u,d)],generation:T.generation},T.done.push($);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(_),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=N,T.lastOp=T.lastSelOp=x,T.lastOrigin=T.lastSelOrigin=d.origin,Y||ie(u,"historyAdded")}function rI(u,d,_,x){var T=d.charAt(0);return T=="*"||T=="+"&&_.ranges.length==x.ranges.length&&_.somethingSelected()==x.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function iI(u,d,_,x){var T=u.history,N=x&&x.origin;_==T.lastSelOp||N&&T.lastSelOrigin==N&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==N||rI(u,N,De(T.done),d))?T.done[T.done.length-1]=d:Cp(d,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=N,T.lastSelOp=_,x&&x.clearRedo!==!1&&Fb(T.undone)}function Cp(u,d){var _=De(d);_&&_.ranges&&_.equals(u)||d.push(u)}function Ub(u,d,_,x){var T=d["spans_"+u.id],N=0;u.iter(Math.max(u.first,_),Math.min(u.first+u.size,x),function($){$.markedSpans&&((T||(T=d["spans_"+u.id]={}))[N]=$.markedSpans),++N})}function sI(u){if(!u)return null;for(var d,_=0;_<u.length;++_)u[_].marker.explicitlyCleared?d||(d=u.slice(0,_)):d&&d.push(u[_]);return d?d.length?d:null:u}function oI(u,d){var _=d["spans_"+u.id];if(!_)return null;for(var x=[],T=0;T<d.text.length;++T)x.push(sI(_[T]));return x}function zb(u,d){var _=oI(u,d),x=Li(u,d);if(!_)return x;if(!x)return _;for(var T=0;T<_.length;++T){var N=_[T],$=x[T];if(N&&$){e:for(var Y=0;Y<$.length;++Y){for(var te=$[Y],re=0;re<N.length;++re)if(N[re].marker==te.marker)continue e;N.push(te)}}else $&&(_[T]=$)}return _}function wu(u,d,_){for(var x=[],T=0;T<u.length;++T){var N=u[T];if(N.ranges){x.push(_?Pi.prototype.deepCopy.call(N):N);continue}var $=N.changes,Y=[];x.push({changes:Y});for(var te=0;te<$.length;++te){var re=$[te],ve=void 0;if(Y.push({from:re.from,to:re.to,text:re.text}),d)for(var xe in re)(ve=xe.match(/^spans_(\d+)$/))&&Ue(d,Number(ve[1]))>-1&&(De(Y)[xe]=re[xe],delete re[xe])}}return x}function Dv(u,d,_,x){if(x){var T=u.anchor;if(_){var N=se(d,T)<0;N!=se(_,T)<0?(T=d,d=_):N!=se(d,_)<0&&(d=_)}return new cn(T,d)}else return new cn(_||d,d)}function Rp(u,d,_,x,T){T==null&&(T=u.cm&&(u.cm.display.shift||u.extend)),Dr(u,new Pi([Dv(u.sel.primary(),d,_,T)],0),x)}function Hb(u,d,_){for(var x=[],T=u.cm&&(u.cm.display.shift||u.extend),N=0;N<u.sel.ranges.length;N++)x[N]=Dv(u.sel.ranges[N],d[N],null,T);var $=fs(u.cm,x,u.sel.primIndex);Dr(u,$,_)}function Nv(u,d,_,x){var T=u.sel.ranges.slice(0);T[d]=_,Dr(u,fs(u.cm,T,u.sel.primIndex),x)}function Gb(u,d,_,x){Dr(u,zo(d,_),x)}function aI(u,d,_){var x={ranges:d.ranges,update:function(T){this.ranges=[];for(var N=0;N<T.length;N++)this.ranges[N]=new cn(ct(u,T[N].anchor),ct(u,T[N].head))},origin:_&&_.origin};return ie(u,"beforeSelectionChange",u,x),u.cm&&ie(u.cm,"beforeSelectionChange",u.cm,x),x.ranges!=d.ranges?fs(u.cm,x.ranges,x.ranges.length-1):d}function Vb(u,d,_){var x=u.history.done,T=De(x);T&&T.ranges?(x[x.length-1]=d,Lp(u,d,_)):Dr(u,d,_)}function Dr(u,d,_){Lp(u,d,_),iI(u,u.sel,u.cm?u.cm.curOp.id:NaN,_)}function Lp(u,d,_){(Ie(u,"beforeSelectionChange")||u.cm&&Ie(u.cm,"beforeSelectionChange"))&&(d=aI(u,d,_));var x=_&&_.bias||(se(d.primary().head,u.sel.primary().head)<0?-1:1);Wb(u,jb(u,d,x,!0)),!(_&&_.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&xu(u.cm)}function Wb(u,d){d.equals(u.sel)||(u.sel=d,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,me(u.cm)),Qn(u,"cursorActivity",u))}function $b(u){Wb(u,jb(u,u.sel,null,!1))}function jb(u,d,_,x){for(var T,N=0;N<d.ranges.length;N++){var $=d.ranges[N],Y=d.ranges.length==u.sel.ranges.length&&u.sel.ranges[N],te=Ip(u,$.anchor,Y&&Y.anchor,_,x),re=Ip(u,$.head,Y&&Y.head,_,x);(T||te!=$.anchor||re!=$.head)&&(T||(T=d.ranges.slice(0,N)),T[N]=new cn(te,re))}return T?fs(u.cm,T,d.primIndex):d}function bu(u,d,_,x,T){var N=lt(u,d.line);if(N.markedSpans)for(var $=0;$<N.markedSpans.length;++$){var Y=N.markedSpans[$],te=Y.marker,re="selectLeft"in te?!te.selectLeft:te.inclusiveLeft,ve="selectRight"in te?!te.selectRight:te.inclusiveRight;if((Y.from==null||(re?Y.from<=d.ch:Y.from<d.ch))&&(Y.to==null||(ve?Y.to>=d.ch:Y.to>d.ch))){if(T&&(ie(te,"beforeCursorEnter"),te.explicitlyCleared))if(N.markedSpans){--$;continue}else break;if(!te.atomic)continue;if(_){var xe=te.find(x<0?1:-1),Ee=void 0;if((x<0?ve:re)&&(xe=qb(u,xe,-x,xe&&xe.line==d.line?N:null)),xe&&xe.line==d.line&&(Ee=se(xe,_))&&(x<0?Ee<0:Ee>0))return bu(u,xe,d,x,T)}var Me=te.find(x<0?-1:1);return(x<0?re:ve)&&(Me=qb(u,Me,x,Me.line==d.line?N:null)),Me?bu(u,Me,d,x,T):null}}return d}function Ip(u,d,_,x,T){var N=x||1,$=bu(u,d,_,N,T)||!T&&bu(u,d,_,N,!0)||bu(u,d,_,-N,T)||!T&&bu(u,d,_,-N,!0);return $||(u.cantEdit=!0,qe(u.first,0))}function qb(u,d,_,x){return _<0&&d.ch==0?d.line>u.first?ct(u,qe(d.line-1)):null:_>0&&d.ch==(x||lt(u,d.line)).text.length?d.line<u.first+u.size-1?qe(d.line+1,0):null:new qe(d.line,d.ch+_)}function Xb(u){u.setSelection(qe(u.firstLine(),0),qe(u.lastLine()),ze)}function Yb(u,d,_){var x={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return x.canceled=!0}};return _&&(x.update=function(T,N,$,Y){T&&(x.from=ct(u,T)),N&&(x.to=ct(u,N)),$&&(x.text=$),Y!==void 0&&(x.origin=Y)}),ie(u,"beforeChange",u,x),u.cm&&ie(u.cm,"beforeChange",u.cm,x),x.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:x.from,to:x.to,text:x.text,origin:x.origin}}function Su(u,d,_){if(u.cm){if(!u.cm.curOp)return mr(u.cm,Su)(u,d,_);if(u.cm.state.suppressEdits)return}if(!((Ie(u,"beforeChange")||u.cm&&Ie(u.cm,"beforeChange"))&&(d=Yb(u,d,!0),!d))){var x=xn&&!_&&No(u,d.from,d.to);if(x)for(var T=x.length-1;T>=0;--T)Kb(u,{from:x[T].from,to:x[T].to,text:T?[""]:d.text,origin:d.origin});else Kb(u,d)}}function Kb(u,d){if(!(d.text.length==1&&d.text[0]==""&&se(d.from,d.to)==0)){var _=Iv(u,d);Bb(u,d,_,u.cm?u.cm.curOp.id:NaN),Wf(u,d,_,Li(u,d));var x=[];Go(u,function(T,N){!N&&Ue(x,T.history)==-1&&(eS(T.history,d),x.push(T.history)),Wf(T,d,null,Li(T,d))})}}function Pp(u,d,_){var x=u.cm&&u.cm.state.suppressEdits;if(!(x&&!_)){for(var T=u.history,N,$=u.sel,Y=d=="undo"?T.done:T.undone,te=d=="undo"?T.undone:T.done,re=0;re<Y.length&&(N=Y[re],!(_?N.ranges&&!N.equals(u.sel):!N.ranges));re++);if(re!=Y.length){for(T.lastOrigin=T.lastSelOrigin=null;;)if(N=Y.pop(),N.ranges){if(Cp(N,te),_&&!N.equals(u.sel)){Dr(u,N,{clearRedo:!1});return}$=N}else if(x){Y.push(N);return}else break;var ve=[];Cp($,te),te.push({changes:ve,generation:T.generation}),T.generation=N.generation||++T.maxGeneration;for(var xe=Ie(u,"beforeChange")||u.cm&&Ie(u.cm,"beforeChange"),Ee=function(We){var Qe=N.changes[We];if(Qe.origin=d,xe&&!Yb(u,Qe,!1))return Y.length=0,{};ve.push(Ov(u,Qe));var nt=We?Iv(u,Qe):De(Y);Wf(u,Qe,nt,zb(u,Qe)),!We&&u.cm&&u.cm.scrollIntoView({from:Qe.from,to:Ho(Qe)});var ut=[];Go(u,function(rt,dt){!dt&&Ue(ut,rt.history)==-1&&(eS(rt.history,Qe),ut.push(rt.history)),Wf(rt,Qe,null,zb(rt,Qe))})},Me=N.changes.length-1;Me>=0;--Me){var Ne=Ee(Me);if(Ne)return Ne.v}}}}function Zb(u,d){if(d!=0&&(u.first+=d,u.sel=new Pi(oe(u.sel.ranges,function(T){return new cn(qe(T.anchor.line+d,T.anchor.ch),qe(T.head.line+d,T.head.ch))}),u.sel.primIndex),u.cm)){ii(u.cm,u.first,u.first-d,d);for(var _=u.cm.display,x=_.viewFrom;x<_.viewTo;x++)Bo(u.cm,x,"gutter")}}function Wf(u,d,_,x){if(u.cm&&!u.cm.curOp)return mr(u.cm,Wf)(u,d,_,x);if(d.to.line<u.first){Zb(u,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>u.lastLine())){if(d.from.line<u.first){var T=d.text.length-1-(u.first-d.from.line);Zb(u,T),d={from:qe(u.first,0),to:qe(d.to.line+T,d.to.ch),text:[De(d.text)],origin:d.origin}}var N=u.lastLine();d.to.line>N&&(d={from:d.from,to:qe(N,lt(u,N).text.length),text:[d.text[0]],origin:d.origin}),d.removed=kr(u,d.from,d.to),_||(_=Iv(u,d)),u.cm?lI(u.cm,d,x):kv(u,d,x),Lp(u,_,ze),u.cantEdit&&Ip(u,qe(u.firstLine(),0))&&(u.cantEdit=!1)}}function lI(u,d,_){var x=u.doc,T=u.display,N=d.from,$=d.to,Y=!1,te=N.line;u.options.lineWrapping||(te=Pt(Ii(lt(x,N.line))),x.iter(te,$.line+1,function(Me){if(Me==T.maxLine)return Y=!0,!0})),x.sel.contains(d.from,d.to)>-1&&me(u),kv(x,d,_,gb(u)),u.options.lineWrapping||(x.iter(te,N.line+d.text.length,function(Me){var Ne=ji(Me);Ne>T.maxLineLength&&(T.maxLine=Me,T.maxLineLength=Ne,T.maxLineChanged=!0,Y=!1)}),Y&&(u.curOp.updateMaxLine=!0)),it(x,N.line),Hf(u,400);var re=d.text.length-($.line-N.line)-1;d.full?ii(u):N.line==$.line&&d.text.length==1&&!Ob(u.doc,d)?Bo(u,N.line,"text"):ii(u,N.line,$.line+1,re);var ve=Ie(u,"changes"),xe=Ie(u,"change");if(xe||ve){var Ee={from:N,to:$,text:d.text,removed:d.removed,origin:d.origin};xe&&Qn(u,"change",u,Ee),ve&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(Ee)}u.display.selForContextMenu=null}function Mu(u,d,_,x,T){var N;x||(x=_),se(x,_)<0&&(N=[x,_],_=N[0],x=N[1]),typeof d=="string"&&(d=u.splitLines(d)),Su(u,{from:_,to:x,text:d,origin:T})}function Qb(u,d,_,x){_<u.line?u.line+=x:d<u.line&&(u.line=d,u.ch=0)}function Jb(u,d,_,x){for(var T=0;T<u.length;++T){var N=u[T],$=!0;if(N.ranges){N.copied||(N=u[T]=N.deepCopy(),N.copied=!0);for(var Y=0;Y<N.ranges.length;Y++)Qb(N.ranges[Y].anchor,d,_,x),Qb(N.ranges[Y].head,d,_,x);continue}for(var te=0;te<N.changes.length;++te){var re=N.changes[te];if(_<re.from.line)re.from=qe(re.from.line+x,re.from.ch),re.to=qe(re.to.line+x,re.to.ch);else if(d<=re.to.line){$=!1;break}}$||(u.splice(0,T+1),T=0)}}function eS(u,d){var _=d.from.line,x=d.to.line,T=d.text.length-(x-_)-1;Jb(u.done,_,x,T),Jb(u.undone,_,x,T)}function $f(u,d,_,x){var T=d,N=d;return typeof d=="number"?N=lt(u,Zt(u,d)):T=Pt(d),T==null?null:(x(N,T)&&u.cm&&Bo(u.cm,T,_),N)}function jf(u){this.lines=u,this.parent=null;for(var d=0,_=0;_<u.length;++_)u[_].parent=this,d+=u[_].height;this.height=d}jf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,d){for(var _=u,x=u+d;_<x;++_){var T=this.lines[_];this.height-=T.height,av(T),Qn(T,"delete")}this.lines.splice(u,d)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,d,_){this.height+=_,this.lines=this.lines.slice(0,u).concat(d).concat(this.lines.slice(u));for(var x=0;x<d.length;++x)d[x].parent=this},iterN:function(u,d,_){for(var x=u+d;u<x;++u)if(_(this.lines[u]))return!0}};function qf(u){this.children=u;for(var d=0,_=0,x=0;x<u.length;++x){var T=u[x];d+=T.chunkSize(),_+=T.height,T.parent=this}this.size=d,this.height=_,this.parent=null}qf.prototype={chunkSize:function(){return this.size},removeInner:function(u,d){this.size-=d;for(var _=0;_<this.children.length;++_){var x=this.children[_],T=x.chunkSize();if(u<T){var N=Math.min(d,T-u),$=x.height;if(x.removeInner(u,N),this.height-=$-x.height,T==N&&(this.children.splice(_--,1),x.parent=null),(d-=N)==0)break;u=0}else u-=T}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof jf))){var Y=[];this.collapse(Y),this.children=[new jf(Y)],this.children[0].parent=this}},collapse:function(u){for(var d=0;d<this.children.length;++d)this.children[d].collapse(u)},insertInner:function(u,d,_){this.size+=d.length,this.height+=_;for(var x=0;x<this.children.length;++x){var T=this.children[x],N=T.chunkSize();if(u<=N){if(T.insertInner(u,d,_),T.lines&&T.lines.length>50){for(var $=T.lines.length%25+25,Y=$;Y<T.lines.length;){var te=new jf(T.lines.slice(Y,Y+=25));T.height-=te.height,this.children.splice(++x,0,te),te.parent=this}T.lines=T.lines.slice(0,$),this.maybeSpill()}break}u-=N}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var d=u.children.splice(u.children.length-5,5),_=new qf(d);if(u.parent){u.size-=_.size,u.height-=_.height;var T=Ue(u.parent.children,u);u.parent.children.splice(T+1,0,_)}else{var x=new qf(u.children);x.parent=u,u.children=[x,_],u=x}_.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,d,_){for(var x=0;x<this.children.length;++x){var T=this.children[x],N=T.chunkSize();if(u<N){var $=Math.min(d,N-u);if(T.iterN(u,$,_))return!0;if((d-=$)==0)break;u=0}else u-=N}}};var Xf=function(u,d,_){if(_)for(var x in _)_.hasOwnProperty(x)&&(this[x]=_[x]);this.doc=u,this.node=d};Xf.prototype.clear=function(){var u=this.doc.cm,d=this.line.widgets,_=this.line,x=Pt(_);if(!(x==null||!d)){for(var T=0;T<d.length;++T)d[T]==this&&d.splice(T--,1);d.length||(_.widgets=null);var N=Of(this);Mn(_,Math.max(0,_.height-N)),u&&(mi(u,function(){tS(u,_,-N),Bo(u,x,"widget")}),Qn(u,"lineWidgetCleared",u,this,x))}},Xf.prototype.changed=function(){var u=this,d=this.height,_=this.doc.cm,x=this.line;this.height=null;var T=Of(this)-d;!T||(Ts(this.doc,x)||Mn(x,x.height+T),_&&mi(_,function(){_.curOp.forceUpdate=!0,tS(_,x,T),Qn(_,"lineWidgetChanged",_,u,Pt(x))}))},Xe(Xf);function tS(u,d,_){Mr(d)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&Tv(u,_)}function uI(u,d,_,x){var T=new Xf(u,_,x),N=u.cm;return N&&T.noHScroll&&(N.display.alignWidgets=!0),$f(u,d,"widget",function($){var Y=$.widgets||($.widgets=[]);if(T.insertAt==null?Y.push(T):Y.splice(Math.min(Y.length,Math.max(0,T.insertAt)),0,T),T.line=$,N&&!Ts(u,$)){var te=Mr($)<u.scrollTop;Mn($,$.height+Of(T)),te&&Tv(N,T.height),N.curOp.forceUpdate=!0}return!0}),N&&Qn(N,"lineWidgetAdded",N,T,typeof d=="number"?d:Pt(d)),T}var nS=0,Vo=function(u,d){this.lines=[],this.type=d,this.doc=u,this.id=++nS};Vo.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,d=u&&!u.curOp;if(d&&Qa(u),Ie(this,"clear")){var _=this.find();_&&Qn(this,"clear",_.from,_.to)}for(var x=null,T=null,N=0;N<this.lines.length;++N){var $=this.lines[N],Y=$i($.markedSpans,this);u&&!this.collapsed?Bo(u,Pt($),"text"):u&&(Y.to!=null&&(T=Pt($)),Y.from!=null&&(x=Pt($))),$.markedSpans=Ms($.markedSpans,Y),Y.from==null&&this.collapsed&&!Ts(this.doc,$)&&u&&Mn($,gu(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var te=0;te<this.lines.length;++te){var re=Ii(this.lines[te]),ve=ji(re);ve>u.display.maxLineLength&&(u.display.maxLine=re,u.display.maxLineLength=ve,u.display.maxLineChanged=!0)}x!=null&&u&&this.collapsed&&ii(u,x,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&$b(u.doc)),u&&Qn(u,"markerCleared",u,this,x,T),d&&Ja(u),this.parent&&this.parent.clear()}},Vo.prototype.find=function(u,d){u==null&&this.type=="bookmark"&&(u=1);for(var _,x,T=0;T<this.lines.length;++T){var N=this.lines[T],$=$i(N.markedSpans,this);if($.from!=null&&(_=qe(d?N:Pt(N),$.from),u==-1))return _;if($.to!=null&&(x=qe(d?N:Pt(N),$.to),u==1))return x}return _&&{from:_,to:x}},Vo.prototype.changed=function(){var u=this,d=this.find(-1,!0),_=this,x=this.doc.cm;!d||!x||mi(x,function(){var T=d.line,N=Pt(d.line),$=hv(x,N);if($&&(lb($),x.curOp.selectionChanged=x.curOp.forceUpdate=!0),x.curOp.updateMaxLine=!0,!Ts(_.doc,T)&&_.height!=null){var Y=_.height;_.height=null;var te=Of(_)-Y;te&&Mn(T,T.height+te)}Qn(x,"markerChanged",x,u)})},Vo.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||Ue(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},Vo.prototype.detachLine=function(u){if(this.lines.splice(Ue(this.lines,u),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Xe(Vo);function Tu(u,d,_,x,T){if(x&&x.shared)return cI(u,d,_,x,T);if(u.cm&&!u.cm.curOp)return mr(u.cm,Tu)(u,d,_,x,T);var N=new Vo(u,T),$=se(d,_);if(x&&Re(x,N,!1),$>0||$==0&&N.clearWhenEmpty!==!1)return N;if(N.replacedWith&&(N.collapsed=!0,N.widgetNode=p("span",[N.replacedWith],"CodeMirror-widget"),x.handleMouseEvents||N.widgetNode.setAttribute("cm-ignore-events","true"),x.insertLeft&&(N.widgetNode.insertLeft=!0)),N.collapsed){if(dp(u,d.line,d,_,N)||d.line!=_.line&&dp(u,_.line,d,_,N))throw new Error("Inserting collapsed marker partially overlapping an existing one");ur()}N.addToHistory&&Bb(u,{from:d,to:_,origin:"markText"},u.sel,NaN);var Y=d.line,te=u.cm,re;if(u.iter(Y,_.line+1,function(xe){te&&N.collapsed&&!te.options.lineWrapping&&Ii(xe)==te.display.maxLine&&(re=!0),N.collapsed&&Y!=d.line&&Mn(xe,0),hp(xe,new us(N,Y==d.line?d.ch:null,Y==_.line?_.ch:null),u.cm&&u.cm.curOp),++Y}),N.collapsed&&u.iter(d.line,_.line+1,function(xe){Ts(u,xe)&&Mn(xe,0)}),N.clearOnEnter&&K(N,"beforeCursorEnter",function(){return N.clear()}),N.readOnly&&(lr(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),N.collapsed&&(N.id=++nS,N.atomic=!0),te){if(re&&(te.curOp.updateMaxLine=!0),N.collapsed)ii(te,d.line,_.line+1);else if(N.className||N.startStyle||N.endStyle||N.css||N.attributes||N.title)for(var ve=d.line;ve<=_.line;ve++)Bo(te,ve,"text");N.atomic&&$b(te.doc),Qn(te,"markerAdded",te,N)}return N}var Yf=function(u,d){this.markers=u,this.primary=d;for(var _=0;_<u.length;++_)u[_].parent=this};Yf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();Qn(this,"clear")}},Yf.prototype.find=function(u,d){return this.primary.find(u,d)},Xe(Yf);function cI(u,d,_,x,T){x=Re(x),x.shared=!1;var N=[Tu(u,d,_,x,T)],$=N[0],Y=x.widgetNode;return Go(u,function(te){Y&&(x.widgetNode=Y.cloneNode(!0)),N.push(Tu(te,ct(te,d),ct(te,_),x,T));for(var re=0;re<te.linked.length;++re)if(te.linked[re].isParent)return;$=De(N)}),new Yf(N,$)}function rS(u){return u.findMarks(qe(u.first,0),u.clipPos(qe(u.lastLine())),function(d){return d.parent})}function fI(u,d){for(var _=0;_<d.length;_++){var x=d[_],T=x.find(),N=u.clipPos(T.from),$=u.clipPos(T.to);if(se(N,$)){var Y=Tu(u,N,$,x.primary,x.primary.type);x.markers.push(Y),Y.parent=x}}}function hI(u){for(var d=function(x){var T=u[x],N=[T.primary.doc];Go(T.primary.doc,function(te){return N.push(te)});for(var $=0;$<T.markers.length;$++){var Y=T.markers[$];Ue(N,Y.doc)==-1&&(Y.parent=null,T.markers.splice($--,1))}},_=0;_<u.length;_++)d(_)}var dI=0,si=function(u,d,_,x,T){if(!(this instanceof si))return new si(u,d,_,x,T);_==null&&(_=0),qf.call(this,[new jf([new Qs("",null)])]),this.first=_,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=_;var N=qe(_,0);this.sel=zo(N),this.history=new Ap(null),this.id=++dI,this.modeOption=d,this.lineSep=x,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),kv(this,{from:N,to:N,text:u}),Dr(this,zo(N),ze)};si.prototype=et(qf.prototype,{constructor:si,iter:function(u,d,_){_?this.iterN(u-this.first,d-u,_):this.iterN(this.first,this.first+this.size,u)},insert:function(u,d){for(var _=0,x=0;x<d.length;++x)_+=d[x].height;this.insertInner(u-this.first,d,_)},remove:function(u,d){this.removeInner(u-this.first,d)},getValue:function(u){var d=br(this,this.first,this.first+this.size);return u===!1?d:d.join(u||this.lineSeparator())},setValue:gr(function(u){var d=qe(this.first,0),_=this.first+this.size-1;Su(this,{from:d,to:qe(_,lt(this,_).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&Ff(this.cm,0,0),Dr(this,zo(d),ze)}),replaceRange:function(u,d,_,x){d=ct(this,d),_=_?ct(this,_):d,Mu(this,u,d,_,x)},getRange:function(u,d,_){var x=kr(this,ct(this,u),ct(this,d));return _===!1?x:_===""?x.join(""):x.join(_||this.lineSeparator())},getLine:function(u){var d=this.getLineHandle(u);return d&&d.text},getLineHandle:function(u){if(Zn(this,u))return lt(this,u)},getLineNumber:function(u){return Pt(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=lt(this,u)),Ii(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return ct(this,u)},getCursor:function(u){var d=this.sel.primary(),_;return u==null||u=="head"?_=d.head:u=="anchor"?_=d.anchor:u=="end"||u=="to"||u===!1?_=d.to():_=d.from(),_},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gr(function(u,d,_){Gb(this,ct(this,typeof u=="number"?qe(u,d||0):u),null,_)}),setSelection:gr(function(u,d,_){Gb(this,ct(this,u),ct(this,d||u),_)}),extendSelection:gr(function(u,d,_){Rp(this,ct(this,u),d&&ct(this,d),_)}),extendSelections:gr(function(u,d){Hb(this,ni(this,u),d)}),extendSelectionsBy:gr(function(u,d){var _=oe(this.sel.ranges,u);Hb(this,ni(this,_),d)}),setSelections:gr(function(u,d,_){if(!!u.length){for(var x=[],T=0;T<u.length;T++)x[T]=new cn(ct(this,u[T].anchor),ct(this,u[T].head||u[T].anchor));d==null&&(d=Math.min(u.length-1,this.sel.primIndex)),Dr(this,fs(this.cm,x,d),_)}}),addSelection:gr(function(u,d,_){var x=this.sel.ranges.slice(0);x.push(new cn(ct(this,u),ct(this,d||u))),Dr(this,fs(this.cm,x,x.length-1),_)}),getSelection:function(u){for(var d=this.sel.ranges,_,x=0;x<d.length;x++){var T=kr(this,d[x].from(),d[x].to());_=_?_.concat(T):T}return u===!1?_:_.join(u||this.lineSeparator())},getSelections:function(u){for(var d=[],_=this.sel.ranges,x=0;x<_.length;x++){var T=kr(this,_[x].from(),_[x].to());u!==!1&&(T=T.join(u||this.lineSeparator())),d[x]=T}return d},replaceSelection:function(u,d,_){for(var x=[],T=0;T<this.sel.ranges.length;T++)x[T]=u;this.replaceSelections(x,d,_||"+input")},replaceSelections:gr(function(u,d,_){for(var x=[],T=this.sel,N=0;N<T.ranges.length;N++){var $=T.ranges[N];x[N]={from:$.from(),to:$.to(),text:this.splitLines(u[N]),origin:_}}for(var Y=d&&d!="end"&&eI(this,x,d),te=x.length-1;te>=0;te--)Su(this,x[te]);Y?Vb(this,Y):this.cm&&xu(this.cm)}),undo:gr(function(){Pp(this,"undo")}),redo:gr(function(){Pp(this,"redo")}),undoSelection:gr(function(){Pp(this,"undo",!0)}),redoSelection:gr(function(){Pp(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,d=0,_=0,x=0;x<u.done.length;x++)u.done[x].ranges||++d;for(var T=0;T<u.undone.length;T++)u.undone[T].ranges||++_;return{undo:d,redo:_}},clearHistory:function(){var u=this;this.history=new Ap(this.history),Go(this,function(d){return d.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:wu(this.history.done),undone:wu(this.history.undone)}},setHistory:function(u){var d=this.history=new Ap(this.history);d.done=wu(u.done.slice(0),null,!0),d.undone=wu(u.undone.slice(0),null,!0)},setGutterMarker:gr(function(u,d,_){return $f(this,u,"gutter",function(x){var T=x.gutterMarkers||(x.gutterMarkers={});return T[d]=_,!_&&i(T)&&(x.gutterMarkers=null),!0})}),clearGutter:gr(function(u){var d=this;this.iter(function(_){_.gutterMarkers&&_.gutterMarkers[u]&&$f(d,_,"gutter",function(){return _.gutterMarkers[u]=null,i(_.gutterMarkers)&&(_.gutterMarkers=null),!0})})}),lineInfo:function(u){var d;if(typeof u=="number"){if(!Zn(this,u)||(d=u,u=lt(this,u),!u))return null}else if(d=Pt(u),d==null)return null;return{line:d,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:gr(function(u,d,_){return $f(this,u,d=="gutter"?"gutter":"class",function(x){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!x[T])x[T]=_;else{if(ce(_).test(x[T]))return!1;x[T]+=" "+_}return!0})}),removeLineClass:gr(function(u,d,_){return $f(this,u,d=="gutter"?"gutter":"class",function(x){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",N=x[T];if(N)if(_==null)x[T]=null;else{var $=N.match(ce(_));if(!$)return!1;var Y=$.index+$[0].length;x[T]=N.slice(0,$.index)+(!$.index||Y==N.length?"":" ")+N.slice(Y)||null}else return!1;return!0})}),addLineWidget:gr(function(u,d,_){return uI(this,u,d,_)}),removeLineWidget:function(u){u.clear()},markText:function(u,d,_){return Tu(this,ct(this,u),ct(this,d),_,_&&_.type||"range")},setBookmark:function(u,d){var _={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return u=ct(this,u),Tu(this,u,u,_,"bookmark")},findMarksAt:function(u){u=ct(this,u);var d=[],_=lt(this,u.line).markedSpans;if(_)for(var x=0;x<_.length;++x){var T=_[x];(T.from==null||T.from<=u.ch)&&(T.to==null||T.to>=u.ch)&&d.push(T.marker.parent||T.marker)}return d},findMarks:function(u,d,_){u=ct(this,u),d=ct(this,d);var x=[],T=u.line;return this.iter(u.line,d.line+1,function(N){var $=N.markedSpans;if($)for(var Y=0;Y<$.length;Y++){var te=$[Y];!(te.to!=null&&T==u.line&&u.ch>=te.to||te.from==null&&T!=u.line||te.from!=null&&T==d.line&&te.from>=d.ch)&&(!_||_(te.marker))&&x.push(te.marker.parent||te.marker)}++T}),x},getAllMarks:function(){var u=[];return this.iter(function(d){var _=d.markedSpans;if(_)for(var x=0;x<_.length;++x)_[x].from!=null&&u.push(_[x].marker)}),u},posFromIndex:function(u){var d,_=this.first,x=this.lineSeparator().length;return this.iter(function(T){var N=T.text.length+x;if(N>u)return d=u,!0;u-=N,++_}),ct(this,qe(_,d))},indexFromPos:function(u){u=ct(this,u);var d=u.ch;if(u.line<this.first||u.ch<0)return 0;var _=this.lineSeparator().length;return this.iter(this.first,u.line,function(x){d+=x.text.length+_}),d},copy:function(u){var d=new si(br(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,u&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(u){u||(u={});var d=this.first,_=this.first+this.size;u.from!=null&&u.from>d&&(d=u.from),u.to!=null&&u.to<_&&(_=u.to);var x=new si(br(this,d,_),u.mode||this.modeOption,d,this.lineSep,this.direction);return u.sharedHist&&(x.history=this.history),(this.linked||(this.linked=[])).push({doc:x,sharedHist:u.sharedHist}),x.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],fI(x,rS(this)),x},unlinkDoc:function(u){if(u instanceof Cn&&(u=u.doc),this.linked)for(var d=0;d<this.linked.length;++d){var _=this.linked[d];if(_.doc==u){this.linked.splice(d,1),u.unlinkDoc(this),hI(rS(this));break}}if(u.history==this.history){var x=[u.id];Go(u,function(T){return x.push(T.id)},!0),u.history=new Ap(null),u.history.done=wu(this.history.done,x),u.history.undone=wu(this.history.undone,x)}},iterLinkedDocs:function(u){Go(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):Te(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:gr(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(d){return d.order=null}),this.cm&&tI(this.cm))})}),si.prototype.eachLine=si.prototype.iter;var iS=0;function pI(u){var d=this;if(sS(d),!(fe(d,u)||Js(d.display,u))){Fe(u),m&&(iS=+new Date);var _=Xa(d,u,!0),x=u.dataTransfer.files;if(!(!_||d.isReadOnly()))if(x&&x.length&&window.FileReader&&window.File)for(var T=x.length,N=Array(T),$=0,Y=function(){++$==T&&mr(d,function(){_=ct(d.doc,_);var Me={from:_,to:_,text:d.doc.splitLines(N.filter(function(Ne){return Ne!=null}).join(d.doc.lineSeparator())),origin:"paste"};Su(d.doc,Me),Vb(d.doc,zo(ct(d.doc,_),ct(d.doc,Ho(Me))))})()},te=function(Me,Ne){if(d.options.allowDropFileTypes&&Ue(d.options.allowDropFileTypes,Me.type)==-1){Y();return}var We=new FileReader;We.onerror=function(){return Y()},We.onload=function(){var Qe=We.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Qe)){Y();return}N[Ne]=Qe,Y()},We.readAsText(Me)},re=0;re<x.length;re++)te(x[re],re);else{if(d.state.draggingText&&d.doc.sel.contains(_)>-1){d.state.draggingText(u),setTimeout(function(){return d.display.input.focus()},20);return}try{var ve=u.dataTransfer.getData("Text");if(ve){var xe;if(d.state.draggingText&&!d.state.draggingText.copy&&(xe=d.listSelections()),Lp(d.doc,zo(_,_)),xe)for(var Ee=0;Ee<xe.length;++Ee)Mu(d.doc,"",xe[Ee].anchor,xe[Ee].head,"drag");d.replaceSelection(ve,"around","paste"),d.display.input.focus()}}catch{}}}}function mI(u,d){if(m&&(!u.state.draggingText||+new Date-iS<100)){wt(d);return}if(!(fe(u,d)||Js(u.display,d))&&(d.dataTransfer.setData("Text",u.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!O)){var _=w("img",null,null,"position: fixed; left: 0; top: 0;");_.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",I&&(_.width=_.height=1,u.display.wrapper.appendChild(_),_._top=_.offsetTop),d.dataTransfer.setDragImage(_,0,0),I&&_.parentNode.removeChild(_)}}function gI(u,d){var _=Xa(u,d);if(!!_){var x=document.createDocumentFragment();_v(u,_,x),u.display.dragCursor||(u.display.dragCursor=w("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),le(u.display.dragCursor,x)}}function sS(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function oS(u){if(!!document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),_=[],x=0;x<d.length;x++){var T=d[x].CodeMirror;T&&_.push(T)}_.length&&_[0].operation(function(){for(var N=0;N<_.length;N++)u(_[N])})}}var aS=!1;function vI(){aS||(yI(),aS=!0)}function yI(){var u;K(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,oS(xI)},100))}),K(window,"blur",function(){return oS(yu)})}function xI(u){var d=u.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,u.setSize()}for(var Wo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Kf=0;Kf<10;Kf++)Wo[Kf+48]=Wo[Kf+96]=String(Kf);for(var kp=65;kp<=90;kp++)Wo[kp]=String.fromCharCode(kp);for(var Zf=1;Zf<=12;Zf++)Wo[Zf+111]=Wo[Zf+63235]="F"+Zf;var to={};to.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},to.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},to.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},to.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},to.default=L?to.macDefault:to.pcDefault;function _I(u){var d=u.split(/-(?!$)/);u=d[d.length-1];for(var _,x,T,N,$=0;$<d.length-1;$++){var Y=d[$];if(/^(cmd|meta|m)$/i.test(Y))N=!0;else if(/^a(lt)?$/i.test(Y))_=!0;else if(/^(c|ctrl|control)$/i.test(Y))x=!0;else if(/^s(hift)?$/i.test(Y))T=!0;else throw new Error("Unrecognized modifier name: "+Y)}return _&&(u="Alt-"+u),x&&(u="Ctrl-"+u),N&&(u="Cmd-"+u),T&&(u="Shift-"+u),u}function wI(u){var d={};for(var _ in u)if(u.hasOwnProperty(_)){var x=u[_];if(/^(name|fallthrough|(de|at)tach)$/.test(_))continue;if(x=="..."){delete u[_];continue}for(var T=oe(_.split(" "),_I),N=0;N<T.length;N++){var $=void 0,Y=void 0;N==T.length-1?(Y=T.join(" "),$=x):(Y=T.slice(0,N+1).join(" "),$="...");var te=d[Y];if(!te)d[Y]=$;else if(te!=$)throw new Error("Inconsistent bindings for "+Y)}delete u[_]}for(var re in d)u[re]=d[re];return u}function Eu(u,d,_,x){d=Op(d);var T=d.call?d.call(u,x):d[u];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&_(T))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return Eu(u,d.fallthrough,_,x);for(var N=0;N<d.fallthrough.length;N++){var $=Eu(u,d.fallthrough[N],_,x);if($)return $}}}function lS(u){var d=typeof u=="string"?u:Wo[u.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function uS(u,d,_){var x=u;return d.altKey&&x!="Alt"&&(u="Alt-"+u),(Z?d.metaKey:d.ctrlKey)&&x!="Ctrl"&&(u="Ctrl-"+u),(Z?d.ctrlKey:d.metaKey)&&x!="Mod"&&(u="Cmd-"+u),!_&&d.shiftKey&&x!="Shift"&&(u="Shift-"+u),u}function cS(u,d){if(I&&u.keyCode==34&&u.char)return!1;var _=Wo[u.keyCode];return _==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(_=u.code),uS(_,u,d))}function Op(u){return typeof u=="string"?to[u]:u}function Au(u,d){for(var _=u.doc.sel.ranges,x=[],T=0;T<_.length;T++){for(var N=d(_[T]);x.length&&se(N.from,De(x).to)<=0;){var $=x.pop();if(se($.from,N.from)<0){N.from=$.from;break}}x.push(N)}mi(u,function(){for(var Y=x.length-1;Y>=0;Y--)Mu(u.doc,"",x[Y].from,x[Y].to,"+delete");xu(u)})}function Fv(u,d,_){var x=g(u.text,d+_,_);return x<0||x>u.text.length?null:x}function Bv(u,d,_){var x=Fv(u,d.ch,_);return x==null?null:new qe(d.line,x,_<0?"after":"before")}function Uv(u,d,_,x,T){if(u){d.doc.direction=="rtl"&&(T=-T);var N=V(_,d.doc.direction);if(N){var $=T<0?De(N):N[0],Y=T<0==($.level==1),te=Y?"after":"before",re;if($.level>0||d.doc.direction=="rtl"){var ve=mu(d,_);re=T<0?_.text.length-1:0;var xe=As(d,ve,re).top;re=v(function(Ee){return As(d,ve,Ee).top==xe},T<0==($.level==1)?$.from:$.to-1,re),te=="before"&&(re=Fv(_,re,1))}else re=T<0?$.to:$.from;return new qe(x,re,te)}}return new qe(x,T<0?_.text.length:0,T<0?"before":"after")}function bI(u,d,_,x){var T=V(d,u.doc.direction);if(!T)return Bv(d,_,x);_.ch>=d.text.length?(_.ch=d.text.length,_.sticky="before"):_.ch<=0&&(_.ch=0,_.sticky="after");var N=k(T,_.ch,_.sticky),$=T[N];if(u.doc.direction=="ltr"&&$.level%2==0&&(x>0?$.to>_.ch:$.from<_.ch))return Bv(d,_,x);var Y=function(nt,ut){return Fv(d,nt instanceof qe?nt.ch:nt,ut)},te,re=function(nt){return u.options.lineWrapping?(te=te||mu(u,d),mb(u,d,te,nt)):{begin:0,end:d.text.length}},ve=re(_.sticky=="before"?Y(_,-1):_.ch);if(u.doc.direction=="rtl"||$.level==1){var xe=$.level==1==x<0,Ee=Y(_,xe?1:-1);if(Ee!=null&&(xe?Ee<=$.to&&Ee<=ve.end:Ee>=$.from&&Ee>=ve.begin)){var Me=xe?"before":"after";return new qe(_.line,Ee,Me)}}var Ne=function(nt,ut,rt){for(var dt=function(wn,vr){return vr?new qe(_.line,Y(wn,1),"before"):new qe(_.line,wn,"after")};nt>=0&&nt<T.length;nt+=ut){var Ct=T[nt],Tt=ut>0==(Ct.level!=1),qt=Tt?rt.begin:Y(rt.end,-1);if(Ct.from<=qt&&qt<Ct.to||(qt=Tt?Ct.from:Y(Ct.to,-1),rt.begin<=qt&&qt<rt.end))return dt(qt,Tt)}},We=Ne(N+x,x,ve);if(We)return We;var Qe=x>0?ve.end:Y(ve.begin,-1);return Qe!=null&&!(x>0&&Qe==d.text.length)&&(We=Ne(x>0?0:T.length-1,x,re(Qe)),We)?We:null}var Qf={selectAll:Xb,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),ze)},killLine:function(u){return Au(u,function(d){if(d.empty()){var _=lt(u.doc,d.head.line).text.length;return d.head.ch==_&&d.head.line<u.lastLine()?{from:d.head,to:qe(d.head.line+1,0)}:{from:d.head,to:qe(d.head.line,_)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(u){return Au(u,function(d){return{from:qe(d.from().line,0),to:ct(u.doc,qe(d.to().line+1,0))}})},delLineLeft:function(u){return Au(u,function(d){return{from:qe(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(u){return Au(u,function(d){var _=u.charCoords(d.head,"div").top+5,x=u.coordsChar({left:0,top:_},"div");return{from:x,to:d.from()}})},delWrappedLineRight:function(u){return Au(u,function(d){var _=u.charCoords(d.head,"div").top+5,x=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:_},"div");return{from:d.from(),to:x}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(qe(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(qe(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(d){return fS(u,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(d){return hS(u,d.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(d){return SI(u,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(d){var _=u.cursorCoords(d.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:_},"div")},Ve)},goLineLeft:function(u){return u.extendSelectionsBy(function(d){var _=u.cursorCoords(d.head,"div").top+5;return u.coordsChar({left:0,top:_},"div")},Ve)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(d){var _=u.cursorCoords(d.head,"div").top+5,x=u.coordsChar({left:0,top:_},"div");return x.ch<u.getLine(x.line).search(/\S/)?hS(u,d.head):x},Ve)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var d=[],_=u.listSelections(),x=u.options.tabSize,T=0;T<_.length;T++){var N=_[T].from(),$=we(u.getLine(N.line),N.ch,x);d.push(Ye(x-$%x))}u.replaceSelections(d)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return mi(u,function(){for(var d=u.listSelections(),_=[],x=0;x<d.length;x++)if(!!d[x].empty()){var T=d[x].head,N=lt(u.doc,T.line).text;if(N){if(T.ch==N.length&&(T=new qe(T.line,T.ch-1)),T.ch>0)T=new qe(T.line,T.ch+1),u.replaceRange(N.charAt(T.ch-1)+N.charAt(T.ch-2),qe(T.line,T.ch-2),T,"+transpose");else if(T.line>u.doc.first){var $=lt(u.doc,T.line-1).text;$&&(T=new qe(T.line,1),u.replaceRange(N.charAt(0)+u.doc.lineSeparator()+$.charAt($.length-1),qe(T.line-1,$.length-1),T,"+transpose"))}}_.push(new cn(T,T))}u.setSelections(_)})},newlineAndIndent:function(u){return mi(u,function(){for(var d=u.listSelections(),_=d.length-1;_>=0;_--)u.replaceRange(u.doc.lineSeparator(),d[_].anchor,d[_].head,"+input");d=u.listSelections();for(var x=0;x<d.length;x++)u.indentLine(d[x].from().line,null,!0);xu(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function fS(u,d){var _=lt(u.doc,d),x=Ii(_);return x!=_&&(d=Pt(x)),Uv(!0,u,x,d,1)}function SI(u,d){var _=lt(u.doc,d),x=sv(_);return x!=_&&(d=Pt(x)),Uv(!0,u,_,d,-1)}function hS(u,d){var _=fS(u,d.line),x=lt(u.doc,_.line),T=V(x,u.doc.direction);if(!T||T[0].level==0){var N=Math.max(_.ch,x.text.search(/\S/)),$=d.line==_.line&&d.ch<=N&&d.ch;return qe(_.line,$?0:N,_.sticky)}return _}function Dp(u,d,_){if(typeof d=="string"&&(d=Qf[d],!d))return!1;u.display.input.ensurePolled();var x=u.display.shift,T=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),_&&(u.display.shift=!1),T=d(u)!=$e}finally{u.display.shift=x,u.state.suppressEdits=!1}return T}function MI(u,d,_){for(var x=0;x<u.state.keyMaps.length;x++){var T=Eu(d,u.state.keyMaps[x],_,u);if(T)return T}return u.options.extraKeys&&Eu(d,u.options.extraKeys,_,u)||Eu(d,u.options.keyMap,_,u)}var TI=new be;function Jf(u,d,_,x){var T=u.state.keySeq;if(T){if(lS(d))return"handled";if(/\'$/.test(d)?u.state.keySeq=null:TI.set(50,function(){u.state.keySeq==T&&(u.state.keySeq=null,u.display.input.reset())}),dS(u,T+" "+d,_,x))return!0}return dS(u,d,_,x)}function dS(u,d,_,x){var T=MI(u,d,x);return T=="multi"&&(u.state.keySeq=d),T=="handled"&&Qn(u,"keyHandled",u,d,_),(T=="handled"||T=="multi")&&(Fe(_),wv(u)),!!T}function pS(u,d){var _=cS(d,!0);return _?d.shiftKey&&!u.state.keySeq?Jf(u,"Shift-"+_,d,function(x){return Dp(u,x,!0)})||Jf(u,_,d,function(x){if(typeof x=="string"?/^go[A-Z]/.test(x):x.motion)return Dp(u,x)}):Jf(u,_,d,function(x){return Dp(u,x)}):!1}function EI(u,d,_){return Jf(u,"'"+_+"'",d,function(x){return Dp(u,x,!0)})}var zv=null;function mS(u){var d=this;if(!(u.target&&u.target!=d.display.input.getField())&&(d.curOp.focus=ge(),!fe(d,u))){m&&y<11&&u.keyCode==27&&(u.returnValue=!1);var _=u.keyCode;d.display.shift=_==16||u.shiftKey;var x=pS(d,u);I&&(zv=x?_:null,!x&&_==88&&!Pe&&(L?u.metaKey:u.ctrlKey)&&d.replaceSelection("",null,"cut")),o&&!L&&!x&&_==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),_==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&AI(d)}}function AI(u){var d=u.display.lineDiv;ke(d,"CodeMirror-crosshair");function _(x){(x.keyCode==18||!x.altKey)&&(ee(d,"CodeMirror-crosshair"),ne(document,"keyup",_),ne(document,"mouseover",_))}K(document,"keyup",_),K(document,"mouseover",_)}function gS(u){u.keyCode==16&&(this.doc.sel.shift=!1),fe(this,u)}function vS(u){var d=this;if(!(u.target&&u.target!=d.display.input.getField())&&!(Js(d.display,u)||fe(d,u)||u.ctrlKey&&!u.altKey||L&&u.metaKey)){var _=u.keyCode,x=u.charCode;if(I&&_==zv){zv=null,Fe(u);return}if(!(I&&(!u.which||u.which<10)&&pS(d,u))){var T=String.fromCharCode(x==null?_:x);T!="\b"&&(EI(d,u,T)||d.display.input.onKeyPress(u))}}}var CI=400,Hv=function(u,d,_){this.time=u,this.pos=d,this.button=_};Hv.prototype.compare=function(u,d,_){return this.time+CI>u&&se(d,this.pos)==0&&_==this.button};var eh,th;function RI(u,d){var _=+new Date;return th&&th.compare(_,u,d)?(eh=th=null,"triple"):eh&&eh.compare(_,u,d)?(th=new Hv(_,u,d),eh=null,"double"):(eh=new Hv(_,u,d),th=null,"single")}function yS(u){var d=this,_=d.display;if(!(fe(d,u)||_.activeTouch&&_.input.supportsTouch())){if(_.input.ensurePolled(),_.shift=u.shiftKey,Js(_,u)){b||(_.scroller.draggable=!1,setTimeout(function(){return _.scroller.draggable=!0},100));return}if(!Gv(d,u)){var x=Xa(d,u),T=pt(u),N=x?RI(x,T):"single";window.focus(),T==1&&d.state.selectingText&&d.state.selectingText(u),!(x&&LI(d,T,x,N,u))&&(T==1?x?PI(d,x,N,u):gt(u)==_.scroller&&Fe(u):T==2?(x&&Rp(d.doc,x),setTimeout(function(){return _.input.focus()},20)):T==3&&(ae?d.display.input.onContextMenu(u):bv(d)))}}}function LI(u,d,_,x,T){var N="Click";return x=="double"?N="Double"+N:x=="triple"&&(N="Triple"+N),N=(d==1?"Left":d==2?"Middle":"Right")+N,Jf(u,uS(N,T),T,function($){if(typeof $=="string"&&($=Qf[$]),!$)return!1;var Y=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),Y=$(u,_)!=$e}finally{u.state.suppressEdits=!1}return Y})}function II(u,d,_){var x=u.getOption("configureMouse"),T=x?x(u,d,_):{};if(T.unit==null){var N=B?_.shiftKey&&_.metaKey:_.altKey;T.unit=N?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(T.extend==null||u.doc.extend)&&(T.extend=u.doc.extend||_.shiftKey),T.addNew==null&&(T.addNew=L?_.metaKey:_.ctrlKey),T.moveOnDrag==null&&(T.moveOnDrag=!(L?_.altKey:_.ctrlKey)),T}function PI(u,d,_,x){m?setTimeout(ye(xb,u),0):u.curOp.focus=ge();var T=II(u,_,x),N=u.doc.sel,$;u.options.dragDrop&&bn&&!u.isReadOnly()&&_=="single"&&($=N.contains(d))>-1&&(se(($=N.ranges[$]).from(),d)<0||d.xRel>0)&&(se($.to(),d)>0||d.xRel<0)?kI(u,x,d,T):OI(u,x,d,T)}function kI(u,d,_,x){var T=u.display,N=!1,$=mr(u,function(re){b&&(T.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:bv(u)),ne(T.wrapper.ownerDocument,"mouseup",$),ne(T.wrapper.ownerDocument,"mousemove",Y),ne(T.scroller,"dragstart",te),ne(T.scroller,"drop",$),N||(Fe(re),x.addNew||Rp(u.doc,_,null,null,x.extend),b&&!O||m&&y==9?setTimeout(function(){T.wrapper.ownerDocument.body.focus({preventScroll:!0}),T.input.focus()},20):T.input.focus())}),Y=function(re){N=N||Math.abs(d.clientX-re.clientX)+Math.abs(d.clientY-re.clientY)>=10},te=function(){return N=!0};b&&(T.scroller.draggable=!0),u.state.draggingText=$,$.copy=!x.moveOnDrag,K(T.wrapper.ownerDocument,"mouseup",$),K(T.wrapper.ownerDocument,"mousemove",Y),K(T.scroller,"dragstart",te),K(T.scroller,"drop",$),u.state.delayingBlurEvent=!0,setTimeout(function(){return T.input.focus()},20),T.scroller.dragDrop&&T.scroller.dragDrop()}function xS(u,d,_){if(_=="char")return new cn(d,d);if(_=="word")return u.findWordAt(d);if(_=="line")return new cn(qe(d.line,0),ct(u.doc,qe(d.line+1,0)));var x=_(u,d);return new cn(x.from,x.to)}function OI(u,d,_,x){m&&bv(u);var T=u.display,N=u.doc;Fe(d);var $,Y,te=N.sel,re=te.ranges;if(x.addNew&&!x.extend?(Y=N.sel.contains(_),Y>-1?$=re[Y]:$=new cn(_,_)):($=N.sel.primary(),Y=N.sel.primIndex),x.unit=="rectangle")x.addNew||($=new cn(_,_)),_=Xa(u,d,!0,!0),Y=-1;else{var ve=xS(u,_,x.unit);x.extend?$=Dv($,ve.anchor,ve.head,x.extend):$=ve}x.addNew?Y==-1?(Y=re.length,Dr(N,fs(u,re.concat([$]),Y),{scroll:!1,origin:"*mouse"})):re.length>1&&re[Y].empty()&&x.unit=="char"&&!x.extend?(Dr(N,fs(u,re.slice(0,Y).concat(re.slice(Y+1)),0),{scroll:!1,origin:"*mouse"}),te=N.sel):Nv(N,Y,$,W):(Y=0,Dr(N,new Pi([$],0),W),te=N.sel);var xe=_;function Ee(rt){if(se(xe,rt)!=0)if(xe=rt,x.unit=="rectangle"){for(var dt=[],Ct=u.options.tabSize,Tt=we(lt(N,_.line).text,_.ch,Ct),qt=we(lt(N,rt.line).text,rt.ch,Ct),wn=Math.min(Tt,qt),vr=Math.max(Tt,qt),On=Math.min(_.line,rt.line),gi=Math.min(u.lastLine(),Math.max(_.line,rt.line));On<=gi;On++){var oi=lt(N,On).text,Jn=Le(oi,wn,Ct);wn==vr?dt.push(new cn(qe(On,Jn),qe(On,Jn))):oi.length>Jn&&dt.push(new cn(qe(On,Jn),qe(On,Le(oi,vr,Ct))))}dt.length||dt.push(new cn(_,_)),Dr(N,fs(u,te.ranges.slice(0,Y).concat(dt),Y),{origin:"*mouse",scroll:!1}),u.scrollIntoView(rt)}else{var ai=$,Tr=xS(u,rt,x.unit),cr=ai.anchor,er;se(Tr.anchor,cr)>0?(er=Tr.head,cr=It(ai.from(),Tr.anchor)):(er=Tr.anchor,cr=Ke(ai.to(),Tr.head));var Un=te.ranges.slice(0);Un[Y]=DI(u,new cn(ct(N,cr),er)),Dr(N,fs(u,Un,Y),W)}}var Me=T.wrapper.getBoundingClientRect(),Ne=0;function We(rt){var dt=++Ne,Ct=Xa(u,rt,!0,x.unit=="rectangle");if(!!Ct)if(se(Ct,xe)!=0){u.curOp.focus=ge(),Ee(Ct);var Tt=Sp(T,N);(Ct.line>=Tt.to||Ct.line<Tt.from)&&setTimeout(mr(u,function(){Ne==dt&&We(rt)}),150)}else{var qt=rt.clientY<Me.top?-20:rt.clientY>Me.bottom?20:0;qt&&setTimeout(mr(u,function(){Ne==dt&&(T.scroller.scrollTop+=qt,We(rt))}),50)}}function Qe(rt){u.state.selectingText=!1,Ne=1/0,rt&&(Fe(rt),T.input.focus()),ne(T.wrapper.ownerDocument,"mousemove",nt),ne(T.wrapper.ownerDocument,"mouseup",ut),N.history.lastSelOrigin=null}var nt=mr(u,function(rt){rt.buttons===0||!pt(rt)?Qe(rt):We(rt)}),ut=mr(u,Qe);u.state.selectingText=ut,K(T.wrapper.ownerDocument,"mousemove",nt),K(T.wrapper.ownerDocument,"mouseup",ut)}function DI(u,d){var _=d.anchor,x=d.head,T=lt(u.doc,_.line);if(se(_,x)==0&&_.sticky==x.sticky)return d;var N=V(T);if(!N)return d;var $=k(N,_.ch,_.sticky),Y=N[$];if(Y.from!=_.ch&&Y.to!=_.ch)return d;var te=$+(Y.from==_.ch==(Y.level!=1)?0:1);if(te==0||te==N.length)return d;var re;if(x.line!=_.line)re=(x.line-_.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var ve=k(N,x.ch,x.sticky),xe=ve-$||(x.ch-_.ch)*(Y.level==1?-1:1);ve==te-1||ve==te?re=xe<0:re=xe>0}var Ee=N[te+(re?-1:0)],Me=re==(Ee.level==1),Ne=Me?Ee.from:Ee.to,We=Me?"after":"before";return _.ch==Ne&&_.sticky==We?d:new cn(new qe(_.line,Ne,We),x)}function _S(u,d,_,x){var T,N;if(d.touches)T=d.touches[0].clientX,N=d.touches[0].clientY;else try{T=d.clientX,N=d.clientY}catch{return!1}if(T>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;x&&Fe(d);var $=u.display,Y=$.lineDiv.getBoundingClientRect();if(N>Y.bottom||!Ie(u,_))return at(d);N-=Y.top-$.viewOffset;for(var te=0;te<u.display.gutterSpecs.length;++te){var re=$.gutters.childNodes[te];if(re&&re.getBoundingClientRect().right>=T){var ve=Sr(u.doc,N),xe=u.display.gutterSpecs[te];return ie(u,_,u,ve,xe.className,d),at(d)}}}function Gv(u,d){return _S(u,d,"gutterClick",!0)}function wS(u,d){Js(u.display,d)||NI(u,d)||fe(u,d,"contextmenu")||ae||u.display.input.onContextMenu(d)}function NI(u,d){return Ie(u,"gutterContextMenu")?_S(u,d,"gutterContextMenu",!1):!1}function bS(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Df(u)}var Cu={toString:function(){return"CodeMirror.Init"}},SS={},Np={};function FI(u){var d=u.optionHandlers;function _(x,T,N,$){u.defaults[x]=T,N&&(d[x]=$?function(Y,te,re){re!=Cu&&N(Y,te,re)}:N)}u.defineOption=_,u.Init=Cu,_("value","",function(x,T){return x.setValue(T)},!0),_("mode",null,function(x,T){x.doc.modeOption=T,Pv(x)},!0),_("indentUnit",2,Pv,!0),_("indentWithTabs",!1),_("smartIndent",!0),_("tabSize",4,function(x){Vf(x),Df(x),ii(x)},!0),_("lineSeparator",null,function(x,T){if(x.doc.lineSep=T,!!T){var N=[],$=x.doc.first;x.doc.iter(function(te){for(var re=0;;){var ve=te.text.indexOf(T,re);if(ve==-1)break;re=ve+T.length,N.push(qe($,ve))}$++});for(var Y=N.length-1;Y>=0;Y--)Mu(x.doc,T,N[Y],qe(N[Y].line,N[Y].ch+T.length))}}),_("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(x,T,N){x.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),N!=Cu&&x.refresh()}),_("specialCharPlaceholder",bt,function(x){return x.refresh()},!0),_("electricChars",!0),_("inputStyle",F?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),_("spellcheck",!1,function(x,T){return x.getInputField().spellcheck=T},!0),_("autocorrect",!1,function(x,T){return x.getInputField().autocorrect=T},!0),_("autocapitalize",!1,function(x,T){return x.getInputField().autocapitalize=T},!0),_("rtlMoveVisually",!z),_("wholeLineUpdateBefore",!0),_("theme","default",function(x){bS(x),Gf(x)},!0),_("keyMap","default",function(x,T,N){var $=Op(T),Y=N!=Cu&&Op(N);Y&&Y.detach&&Y.detach(x,$),$.attach&&$.attach(x,Y||null)}),_("extraKeys",null),_("configureMouse",null),_("lineWrapping",!1,UI,!0),_("gutters",[],function(x,T){x.display.gutterSpecs=Lv(T,x.options.lineNumbers),Gf(x)},!0),_("fixedGutter",!0,function(x,T){x.display.gutters.style.left=T?yv(x.display)+"px":"0",x.refresh()},!0),_("coverGutterNextToScrollbar",!1,function(x){return _u(x)},!0),_("scrollbarStyle","native",function(x){Tb(x),_u(x),x.display.scrollbars.setScrollTop(x.doc.scrollTop),x.display.scrollbars.setScrollLeft(x.doc.scrollLeft)},!0),_("lineNumbers",!1,function(x,T){x.display.gutterSpecs=Lv(x.options.gutters,T),Gf(x)},!0),_("firstLineNumber",1,Gf,!0),_("lineNumberFormatter",function(x){return x},Gf,!0),_("showCursorWhenSelecting",!1,Nf,!0),_("resetSelectionOnContextMenu",!0),_("lineWiseCopyCut",!0),_("pasteLinesPerSelection",!0),_("selectionsMayTouch",!1),_("readOnly",!1,function(x,T){T=="nocursor"&&(yu(x),x.display.input.blur()),x.display.input.readOnlyChanged(T)}),_("screenReaderLabel",null,function(x,T){T=T===""?null:T,x.display.input.screenReaderLabelChanged(T)}),_("disableInput",!1,function(x,T){T||x.display.input.reset()},!0),_("dragDrop",!0,BI),_("allowDropFileTypes",null),_("cursorBlinkRate",530),_("cursorScrollMargin",0),_("cursorHeight",1,Nf,!0),_("singleCursorHeightPerLine",!0,Nf,!0),_("workTime",100),_("workDelay",100),_("flattenSpans",!0,Vf,!0),_("addModeClass",!1,Vf,!0),_("pollInterval",100),_("undoDepth",200,function(x,T){return x.doc.history.undoDepth=T}),_("historyEventDelay",1250),_("viewportMargin",10,function(x){return x.refresh()},!0),_("maxHighlightLength",1e4,Vf,!0),_("moveInputWithCursor",!0,function(x,T){T||x.display.input.resetPosition()}),_("tabindex",null,function(x,T){return x.display.input.getField().tabIndex=T||""}),_("autofocus",null),_("direction","ltr",function(x,T){return x.doc.setDirection(T)},!0),_("phrases",null)}function BI(u,d,_){var x=_&&_!=Cu;if(!d!=!x){var T=u.display.dragFunctions,N=d?K:ne;N(u.display.scroller,"dragstart",T.start),N(u.display.scroller,"dragenter",T.enter),N(u.display.scroller,"dragover",T.over),N(u.display.scroller,"dragleave",T.leave),N(u.display.scroller,"drop",T.drop)}}function UI(u){u.options.lineWrapping?(ke(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(ee(u.display.wrapper,"CodeMirror-wrap"),pu(u)),xv(u),ii(u),Df(u),setTimeout(function(){return _u(u)},100)}function Cn(u,d){var _=this;if(!(this instanceof Cn))return new Cn(u,d);this.options=d=d?Re(d):{},Re(SS,d,!1);var x=d.value;typeof x=="string"?x=new si(x,d.mode,null,d.lineSeparator,d.direction):d.mode&&(x.modeOption=d.mode),this.doc=x;var T=new Cn.inputStyles[d.inputStyle](this),N=this.display=new Q3(u,x,T,d);N.wrapper.CodeMirror=this,bS(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Tb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new be,keySeq:null,specialChars:null},d.autofocus&&!F&&N.input.focus(),m&&y<11&&setTimeout(function(){return _.display.input.reset(!0)},20),zI(this),vI(),Qa(this),this.curOp.forceUpdate=!0,Db(this,x),d.autofocus&&!F||this.hasFocus()?setTimeout(function(){_.hasFocus()&&!_.state.focused&&Sv(_)},20):yu(this);for(var $ in Np)Np.hasOwnProperty($)&&Np[$](this,d[$],Cu);Cb(this),d.finishInit&&d.finishInit(this);for(var Y=0;Y<Vv.length;++Y)Vv[Y](this);Ja(this),b&&d.lineWrapping&&getComputedStyle(N.lineDiv).textRendering=="optimizelegibility"&&(N.lineDiv.style.textRendering="auto")}Cn.defaults=SS,Cn.optionHandlers=Np;function zI(u){var d=u.display;K(d.scroller,"mousedown",mr(u,yS)),m&&y<11?K(d.scroller,"dblclick",mr(u,function(te){if(!fe(u,te)){var re=Xa(u,te);if(!(!re||Gv(u,te)||Js(u.display,te))){Fe(te);var ve=u.findWordAt(re);Rp(u.doc,ve.anchor,ve.head)}}})):K(d.scroller,"dblclick",function(te){return fe(u,te)||Fe(te)}),K(d.scroller,"contextmenu",function(te){return wS(u,te)}),K(d.input.getField(),"contextmenu",function(te){d.scroller.contains(te.target)||wS(u,te)});var _,x={end:0};function T(){d.activeTouch&&(_=setTimeout(function(){return d.activeTouch=null},1e3),x=d.activeTouch,x.end=+new Date)}function N(te){if(te.touches.length!=1)return!1;var re=te.touches[0];return re.radiusX<=1&&re.radiusY<=1}function $(te,re){if(re.left==null)return!0;var ve=re.left-te.left,xe=re.top-te.top;return ve*ve+xe*xe>20*20}K(d.scroller,"touchstart",function(te){if(!fe(u,te)&&!N(te)&&!Gv(u,te)){d.input.ensurePolled(),clearTimeout(_);var re=+new Date;d.activeTouch={start:re,moved:!1,prev:re-x.end<=300?x:null},te.touches.length==1&&(d.activeTouch.left=te.touches[0].pageX,d.activeTouch.top=te.touches[0].pageY)}}),K(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),K(d.scroller,"touchend",function(te){var re=d.activeTouch;if(re&&!Js(d,te)&&re.left!=null&&!re.moved&&new Date-re.start<300){var ve=u.coordsChar(d.activeTouch,"page"),xe;!re.prev||$(re,re.prev)?xe=new cn(ve,ve):!re.prev.prev||$(re,re.prev.prev)?xe=u.findWordAt(ve):xe=new cn(qe(ve.line,0),ct(u.doc,qe(ve.line+1,0))),u.setSelection(xe.anchor,xe.head),u.focus(),Fe(te)}T()}),K(d.scroller,"touchcancel",T),K(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Bf(u,d.scroller.scrollTop),Ka(u,d.scroller.scrollLeft,!0),ie(u,"scroll",u))}),K(d.scroller,"mousewheel",function(te){return Ib(u,te)}),K(d.scroller,"DOMMouseScroll",function(te){return Ib(u,te)}),K(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(te){fe(u,te)||wt(te)},over:function(te){fe(u,te)||(gI(u,te),wt(te))},start:function(te){return mI(u,te)},drop:mr(u,pI),leave:function(te){fe(u,te)||sS(u)}};var Y=d.input.getField();K(Y,"keyup",function(te){return gS.call(u,te)}),K(Y,"keydown",mr(u,mS)),K(Y,"keypress",mr(u,vS)),K(Y,"focus",function(te){return Sv(u,te)}),K(Y,"blur",function(te){return yu(u,te)})}var Vv=[];Cn.defineInitHook=function(u){return Vv.push(u)};function nh(u,d,_,x){var T=u.doc,N;_==null&&(_="add"),_=="smart"&&(T.mode.indent?N=Oo(u,d).state:_="prev");var $=u.options.tabSize,Y=lt(T,d),te=we(Y.text,null,$);Y.stateAfter&&(Y.stateAfter=null);var re=Y.text.match(/^\s*/)[0],ve;if(!x&&!/\S/.test(Y.text))ve=0,_="not";else if(_=="smart"&&(ve=T.mode.indent(N,Y.text.slice(re.length),Y.text),ve==$e||ve>150)){if(!x)return;_="prev"}_=="prev"?d>T.first?ve=we(lt(T,d-1).text,null,$):ve=0:_=="add"?ve=te+u.options.indentUnit:_=="subtract"?ve=te-u.options.indentUnit:typeof _=="number"&&(ve=te+_),ve=Math.max(0,ve);var xe="",Ee=0;if(u.options.indentWithTabs)for(var Me=Math.floor(ve/$);Me;--Me)Ee+=$,xe+="	";if(Ee<ve&&(xe+=Ye(ve-Ee)),xe!=re)return Mu(T,xe,qe(d,0),qe(d,re.length),"+input"),Y.stateAfter=null,!0;for(var Ne=0;Ne<T.sel.ranges.length;Ne++){var We=T.sel.ranges[Ne];if(We.head.line==d&&We.head.ch<re.length){var Qe=qe(d,re.length);Nv(T,Ne,new cn(Qe,Qe));break}}}var hs=null;function Fp(u){hs=u}function Wv(u,d,_,x,T){var N=u.doc;u.display.shift=!1,x||(x=N.sel);var $=+new Date-200,Y=T=="paste"||u.state.pasteIncoming>$,te=Te(d),re=null;if(Y&&x.ranges.length>1)if(hs&&hs.text.join(`
`)==d){if(x.ranges.length%hs.text.length==0){re=[];for(var ve=0;ve<hs.text.length;ve++)re.push(N.splitLines(hs.text[ve]))}}else te.length==x.ranges.length&&u.options.pasteLinesPerSelection&&(re=oe(te,function(nt){return[nt]}));for(var xe=u.curOp.updateInput,Ee=x.ranges.length-1;Ee>=0;Ee--){var Me=x.ranges[Ee],Ne=Me.from(),We=Me.to();Me.empty()&&(_&&_>0?Ne=qe(Ne.line,Ne.ch-_):u.state.overwrite&&!Y?We=qe(We.line,Math.min(lt(N,We.line).text.length,We.ch+De(te).length)):Y&&hs&&hs.lineWise&&hs.text.join(`
`)==te.join(`
`)&&(Ne=We=qe(Ne.line,0)));var Qe={from:Ne,to:We,text:re?re[Ee%re.length]:te,origin:T||(Y?"paste":u.state.cutIncoming>$?"cut":"+input")};Su(u.doc,Qe),Qn(u,"inputRead",u,Qe)}d&&!Y&&TS(u,d),xu(u),u.curOp.updateInput<2&&(u.curOp.updateInput=xe),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function MS(u,d){var _=u.clipboardData&&u.clipboardData.getData("Text");if(_)return u.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&mi(d,function(){return Wv(d,_,0,null,"paste")}),!0}function TS(u,d){if(!(!u.options.electricChars||!u.options.smartIndent))for(var _=u.doc.sel,x=_.ranges.length-1;x>=0;x--){var T=_.ranges[x];if(!(T.head.ch>100||x&&_.ranges[x-1].head.line==T.head.line)){var N=u.getModeAt(T.head),$=!1;if(N.electricChars){for(var Y=0;Y<N.electricChars.length;Y++)if(d.indexOf(N.electricChars.charAt(Y))>-1){$=nh(u,T.head.line,"smart");break}}else N.electricInput&&N.electricInput.test(lt(u.doc,T.head.line).text.slice(0,T.head.ch))&&($=nh(u,T.head.line,"smart"));$&&Qn(u,"electricInput",u,T.head.line)}}}function ES(u){for(var d=[],_=[],x=0;x<u.doc.sel.ranges.length;x++){var T=u.doc.sel.ranges[x].head.line,N={anchor:qe(T,0),head:qe(T+1,0)};_.push(N),d.push(u.getRange(N.anchor,N.head))}return{text:d,ranges:_}}function AS(u,d,_,x){u.setAttribute("autocorrect",_?"":"off"),u.setAttribute("autocapitalize",x?"":"off"),u.setAttribute("spellcheck",!!d)}function CS(){var u=w("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=w("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?u.style.width="1000px":u.setAttribute("wrap","off"),P&&(u.style.border="1px solid black"),AS(u),d}function HI(u){var d=u.optionHandlers,_=u.helpers={};u.prototype={constructor:u,focus:function(){window.focus(),this.display.input.focus()},setOption:function(x,T){var N=this.options,$=N[x];N[x]==T&&x!="mode"||(N[x]=T,d.hasOwnProperty(x)&&mr(this,d[x])(this,T,$),ie(this,"optionChange",this,x))},getOption:function(x){return this.options[x]},getDoc:function(){return this.doc},addKeyMap:function(x,T){this.state.keyMaps[T?"push":"unshift"](Op(x))},removeKeyMap:function(x){for(var T=this.state.keyMaps,N=0;N<T.length;++N)if(T[N]==x||T[N].name==x)return T.splice(N,1),!0},addOverlay:qr(function(x,T){var N=x.token?x:u.getMode(this.options,x);if(N.startState)throw new Error("Overlays may not be stateful.");yt(this.state.overlays,{mode:N,modeSpec:x,opaque:T&&T.opaque,priority:T&&T.priority||0},function($){return $.priority}),this.state.modeGen++,ii(this)}),removeOverlay:qr(function(x){for(var T=this.state.overlays,N=0;N<T.length;++N){var $=T[N].modeSpec;if($==x||typeof x=="string"&&$.name==x){T.splice(N,1),this.state.modeGen++,ii(this);return}}}),indentLine:qr(function(x,T,N){typeof T!="string"&&typeof T!="number"&&(T==null?T=this.options.smartIndent?"smart":"prev":T=T?"add":"subtract"),Zn(this.doc,x)&&nh(this,x,T,N)}),indentSelection:qr(function(x){for(var T=this.doc.sel.ranges,N=-1,$=0;$<T.length;$++){var Y=T[$];if(Y.empty())Y.head.line>N&&(nh(this,Y.head.line,x,!0),N=Y.head.line,$==this.doc.sel.primIndex&&xu(this));else{var te=Y.from(),re=Y.to(),ve=Math.max(N,te.line);N=Math.min(this.lastLine(),re.line-(re.ch?0:1))+1;for(var xe=ve;xe<N;++xe)nh(this,xe,x);var Ee=this.doc.sel.ranges;te.ch==0&&T.length==Ee.length&&Ee[$].from().ch>0&&Nv(this.doc,$,new cn(te,Ee[$].to()),ze)}}}),getTokenAt:function(x,T){return fp(this,x,T)},getLineTokens:function(x,T){return fp(this,qe(x),T,!0)},getTokenTypeAt:function(x){x=ct(this.doc,x);var T=lp(this,lt(this.doc,x.line)),N=0,$=(T.length-1)/2,Y=x.ch,te;if(Y==0)te=T[2];else for(;;){var re=N+$>>1;if((re?T[re*2-1]:0)>=Y)$=re;else if(T[re*2+1]<Y)N=re+1;else{te=T[re*2+2];break}}var ve=te?te.indexOf("overlay "):-1;return ve<0?te:ve==0?null:te.slice(0,ve-1)},getModeAt:function(x){var T=this.doc.mode;return T.innerMode?u.innerMode(T,this.getTokenAt(x).state).mode:T},getHelper:function(x,T){return this.getHelpers(x,T)[0]},getHelpers:function(x,T){var N=[];if(!_.hasOwnProperty(T))return N;var $=_[T],Y=this.getModeAt(x);if(typeof Y[T]=="string")$[Y[T]]&&N.push($[Y[T]]);else if(Y[T])for(var te=0;te<Y[T].length;te++){var re=$[Y[T][te]];re&&N.push(re)}else Y.helperType&&$[Y.helperType]?N.push($[Y.helperType]):$[Y.name]&&N.push($[Y.name]);for(var ve=0;ve<$._global.length;ve++){var xe=$._global[ve];xe.pred(Y,this)&&Ue(N,xe.val)==-1&&N.push(xe.val)}return N},getStateAfter:function(x,T){var N=this.doc;return x=Zt(N,x==null?N.first+N.size-1:x),Oo(this,x+1,T).state},cursorCoords:function(x,T){var N,$=this.doc.sel.primary();return x==null?N=$.head:typeof x=="object"?N=ct(this.doc,x):N=x?$.from():$.to(),cs(this,N,T||"page")},charCoords:function(x,T){return xp(this,ct(this.doc,x),T||"page")},coordsChar:function(x,T){return x=hb(this,x,T||"page"),mv(this,x.left,x.top)},lineAtHeight:function(x,T){return x=hb(this,{top:x,left:0},T||"page").top,Sr(this.doc,x+this.display.viewOffset)},heightAtLine:function(x,T,N){var $=!1,Y;if(typeof x=="number"){var te=this.doc.first+this.doc.size-1;x<this.doc.first?x=this.doc.first:x>te&&(x=te,$=!0),Y=lt(this.doc,x)}else Y=x;return yp(this,Y,{top:0,left:0},T||"page",N||$).top+($?this.doc.height-Mr(Y):0)},defaultTextHeight:function(){return gu(this.display)},defaultCharWidth:function(){return vu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(x,T,N,$,Y){var te=this.display;x=cs(this,ct(this.doc,x));var re=x.bottom,ve=x.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),te.sizer.appendChild(T),$=="over")re=x.top;else if($=="above"||$=="near"){var xe=Math.max(te.wrapper.clientHeight,this.doc.height),Ee=Math.max(te.sizer.clientWidth,te.lineSpace.clientWidth);($=="above"||x.bottom+T.offsetHeight>xe)&&x.top>T.offsetHeight?re=x.top-T.offsetHeight:x.bottom+T.offsetHeight<=xe&&(re=x.bottom),ve+T.offsetWidth>Ee&&(ve=Ee-T.offsetWidth)}T.style.top=re+"px",T.style.left=T.style.right="",Y=="right"?(ve=te.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(Y=="left"?ve=0:Y=="middle"&&(ve=(te.sizer.clientWidth-T.offsetWidth)/2),T.style.left=ve+"px"),N&&B3(this,{left:ve,top:re,right:ve+T.offsetWidth,bottom:re+T.offsetHeight})},triggerOnKeyDown:qr(mS),triggerOnKeyPress:qr(vS),triggerOnKeyUp:gS,triggerOnMouseDown:qr(yS),execCommand:function(x){if(Qf.hasOwnProperty(x))return Qf[x].call(null,this)},triggerElectric:qr(function(x){TS(this,x)}),findPosH:function(x,T,N,$){var Y=1;T<0&&(Y=-1,T=-T);for(var te=ct(this.doc,x),re=0;re<T&&(te=$v(this.doc,te,Y,N,$),!te.hitSide);++re);return te},moveH:qr(function(x,T){var N=this;this.extendSelectionsBy(function($){return N.display.shift||N.doc.extend||$.empty()?$v(N.doc,$.head,x,T,N.options.rtlMoveVisually):x<0?$.from():$.to()},Ve)}),deleteH:qr(function(x,T){var N=this.doc.sel,$=this.doc;N.somethingSelected()?$.replaceSelection("",null,"+delete"):Au(this,function(Y){var te=$v($,Y.head,x,T,!1);return x<0?{from:te,to:Y.head}:{from:Y.head,to:te}})}),findPosV:function(x,T,N,$){var Y=1,te=$;T<0&&(Y=-1,T=-T);for(var re=ct(this.doc,x),ve=0;ve<T;++ve){var xe=cs(this,re,"div");if(te==null?te=xe.left:xe.left=te,re=RS(this,xe,Y,N),re.hitSide)break}return re},moveV:qr(function(x,T){var N=this,$=this.doc,Y=[],te=!this.display.shift&&!$.extend&&$.sel.somethingSelected();if($.extendSelectionsBy(function(ve){if(te)return x<0?ve.from():ve.to();var xe=cs(N,ve.head,"div");ve.goalColumn!=null&&(xe.left=ve.goalColumn),Y.push(xe.left);var Ee=RS(N,xe,x,T);return T=="page"&&ve==$.sel.primary()&&Tv(N,xp(N,Ee,"div").top-xe.top),Ee},Ve),Y.length)for(var re=0;re<$.sel.ranges.length;re++)$.sel.ranges[re].goalColumn=Y[re]}),findWordAt:function(x){var T=this.doc,N=lt(T,x.line).text,$=x.ch,Y=x.ch;if(N){var te=this.getHelper(x,"wordChars");(x.sticky=="before"||Y==N.length)&&$?--$:++Y;for(var re=N.charAt($),ve=n(re,te)?function(xe){return n(xe,te)}:/\s/.test(re)?function(xe){return/\s/.test(xe)}:function(xe){return!/\s/.test(xe)&&!n(xe)};$>0&&ve(N.charAt($-1));)--$;for(;Y<N.length&&ve(N.charAt(Y));)++Y}return new cn(qe(x.line,$),qe(x.line,Y))},toggleOverwrite:function(x){x!=null&&x==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ke(this.display.cursorDiv,"CodeMirror-overwrite"):ee(this.display.cursorDiv,"CodeMirror-overwrite"),ie(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ge()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:qr(function(x,T){Ff(this,x,T)}),getScrollInfo:function(){var x=this.display.scroller;return{left:x.scrollLeft,top:x.scrollTop,height:x.scrollHeight-Es(this)-this.display.barHeight,width:x.scrollWidth-Es(this)-this.display.barWidth,clientHeight:fv(this),clientWidth:ja(this)}},scrollIntoView:qr(function(x,T){x==null?(x={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof x=="number"?x={from:qe(x,0),to:null}:x.from==null&&(x={from:x,to:null}),x.to||(x.to=x.from),x.margin=T||0,x.from.line!=null?U3(this,x):wb(this,x.from,x.to,x.margin)}),setSize:qr(function(x,T){var N=this,$=function(te){return typeof te=="number"||/^\d+$/.test(String(te))?te+"px":te};x!=null&&(this.display.wrapper.style.width=$(x)),T!=null&&(this.display.wrapper.style.height=$(T)),this.options.lineWrapping&&ub(this);var Y=this.display.viewFrom;this.doc.iter(Y,this.display.viewTo,function(te){if(te.widgets){for(var re=0;re<te.widgets.length;re++)if(te.widgets[re].noHScroll){Bo(N,Y,"widget");break}}++Y}),this.curOp.forceUpdate=!0,ie(this,"refresh",this)}),operation:function(x){return mi(this,x)},startOperation:function(){return Qa(this)},endOperation:function(){return Ja(this)},refresh:qr(function(){var x=this.display.cachedTextHeight;ii(this),this.curOp.forceUpdate=!0,Df(this),Ff(this,this.doc.scrollLeft,this.doc.scrollTop),Cv(this.display),(x==null||Math.abs(x-gu(this.display))>.5||this.options.lineWrapping)&&xv(this),ie(this,"refresh",this)}),swapDoc:qr(function(x){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),Db(this,x),Df(this),this.display.input.reset(),Ff(this,x.scrollLeft,x.scrollTop),this.curOp.forceScroll=!0,Qn(this,"swapDoc",this,T),T}),phrase:function(x){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,x)?T[x]:x},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xe(u),u.registerHelper=function(x,T,N){_.hasOwnProperty(x)||(_[x]=u[x]={_global:[]}),_[x][T]=N},u.registerGlobalHelper=function(x,T,N,$){u.registerHelper(x,T,$),_[x]._global.push({pred:N,val:$})}}function $v(u,d,_,x,T){var N=d,$=_,Y=lt(u,d.line),te=T&&u.direction=="rtl"?-_:_;function re(){var ut=d.line+te;return ut<u.first||ut>=u.first+u.size?!1:(d=new qe(ut,d.ch,d.sticky),Y=lt(u,ut))}function ve(ut){var rt;if(x=="codepoint"){var dt=Y.text.charCodeAt(d.ch+(_>0?0:-1));if(isNaN(dt))rt=null;else{var Ct=_>0?dt>=55296&&dt<56320:dt>=56320&&dt<57343;rt=new qe(d.line,Math.max(0,Math.min(Y.text.length,d.ch+_*(Ct?2:1))),-_)}}else T?rt=bI(u.cm,Y,d,_):rt=Bv(Y,d,_);if(rt==null)if(!ut&&re())d=Uv(T,u.cm,Y,d.line,te);else return!1;else d=rt;return!0}if(x=="char"||x=="codepoint")ve();else if(x=="column")ve(!0);else if(x=="word"||x=="group")for(var xe=null,Ee=x=="group",Me=u.cm&&u.cm.getHelper(d,"wordChars"),Ne=!0;!(_<0&&!ve(!Ne));Ne=!1){var We=Y.text.charAt(d.ch)||`
`,Qe=n(We,Me)?"w":Ee&&We==`
`?"n":!Ee||/\s/.test(We)?null:"p";if(Ee&&!Ne&&!Qe&&(Qe="s"),xe&&xe!=Qe){_<0&&(_=1,ve(),d.sticky="after");break}if(Qe&&(xe=Qe),_>0&&!ve(!Ne))break}var nt=Ip(u,d,N,$,!0);return _e(N,nt)&&(nt.hitSide=!0),nt}function RS(u,d,_,x){var T=u.doc,N=d.left,$;if(x=="page"){var Y=Math.min(u.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),te=Math.max(Y-.5*gu(u.display),3);$=(_>0?d.bottom:d.top)+_*te}else x=="line"&&($=_>0?d.bottom+3:d.top-3);for(var re;re=mv(u,N,$),!!re.outside;){if(_<0?$<=0:$>=T.height){re.hitSide=!0;break}$+=_*5}return re}var dn=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};dn.prototype.init=function(u){var d=this,_=this,x=_.cm,T=_.div=u.lineDiv;T.contentEditable=!0,AS(T,x.options.spellcheck,x.options.autocorrect,x.options.autocapitalize);function N(Y){for(var te=Y.target;te;te=te.parentNode){if(te==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(te.className))break}return!1}K(T,"paste",function(Y){!N(Y)||fe(x,Y)||MS(Y,x)||y<=11&&setTimeout(mr(x,function(){return d.updateFromDOM()}),20)}),K(T,"compositionstart",function(Y){d.composing={data:Y.data,done:!1}}),K(T,"compositionupdate",function(Y){d.composing||(d.composing={data:Y.data,done:!1})}),K(T,"compositionend",function(Y){d.composing&&(Y.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),K(T,"touchstart",function(){return _.forceCompositionEnd()}),K(T,"input",function(){d.composing||d.readFromDOMSoon()});function $(Y){if(!(!N(Y)||fe(x,Y))){if(x.somethingSelected())Fp({lineWise:!1,text:x.getSelections()}),Y.type=="cut"&&x.replaceSelection("",null,"cut");else if(x.options.lineWiseCopyCut){var te=ES(x);Fp({lineWise:!0,text:te.text}),Y.type=="cut"&&x.operation(function(){x.setSelections(te.ranges,0,ze),x.replaceSelection("",null,"cut")})}else return;if(Y.clipboardData){Y.clipboardData.clearData();var re=hs.text.join(`
`);if(Y.clipboardData.setData("Text",re),Y.clipboardData.getData("Text")==re){Y.preventDefault();return}}var ve=CS(),xe=ve.firstChild;x.display.lineSpace.insertBefore(ve,x.display.lineSpace.firstChild),xe.value=hs.text.join(`
`);var Ee=ge();de(xe),setTimeout(function(){x.display.lineSpace.removeChild(ve),Ee.focus(),Ee==T&&_.showPrimarySelection()},50)}}K(T,"copy",$),K(T,"cut",$)},dn.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},dn.prototype.prepareSelection=function(){var u=yb(this.cm,!1);return u.focus=ge()==this.div,u},dn.prototype.showSelection=function(u,d){!u||!this.cm.display.view.length||((u.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(u))},dn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},dn.prototype.showPrimarySelection=function(){var u=this.getSelection(),d=this.cm,_=d.doc.sel.primary(),x=_.from(),T=_.to();if(d.display.viewTo==d.display.viewFrom||x.line>=d.display.viewTo||T.line<d.display.viewFrom){u.removeAllRanges();return}var N=Bp(d,u.anchorNode,u.anchorOffset),$=Bp(d,u.focusNode,u.focusOffset);if(!(N&&!N.bad&&$&&!$.bad&&se(It(N,$),x)==0&&se(Ke(N,$),T)==0)){var Y=d.display.view,te=x.line>=d.display.viewFrom&&LS(d,x)||{node:Y[0].measure.map[2],offset:0},re=T.line<d.display.viewTo&&LS(d,T);if(!re){var ve=Y[Y.length-1].measure,xe=ve.maps?ve.maps[ve.maps.length-1]:ve.map;re={node:xe[xe.length-1],offset:xe[xe.length-2]-xe[xe.length-3]}}if(!te||!re){u.removeAllRanges();return}var Ee=u.rangeCount&&u.getRangeAt(0),Me;try{Me=J(te.node,te.offset,re.offset,re.node)}catch{}Me&&(!o&&d.state.focused?(u.collapse(te.node,te.offset),Me.collapsed||(u.removeAllRanges(),u.addRange(Me))):(u.removeAllRanges(),u.addRange(Me)),Ee&&u.anchorNode==null?u.addRange(Ee):o&&this.startGracePeriod()),this.rememberSelection()}},dn.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},dn.prototype.showMultipleSelections=function(u){le(this.cm.display.cursorDiv,u.cursors),le(this.cm.display.selectionDiv,u.selection)},dn.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},dn.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var d=u.getRangeAt(0).commonAncestorContainer;return E(this.div,d)},dn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ge()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},dn.prototype.blur=function(){this.div.blur()},dn.prototype.getField=function(){return this.div},dn.prototype.supportsTouch=function(){return!0},dn.prototype.receivedFocus=function(){var u=this,d=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):mi(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function _(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,_))}this.polling.set(this.cm.options.pollInterval,_)},dn.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},dn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),d=this.cm;if(A&&C&&this.cm.display.gutterSpecs.length&&GI(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var _=Bp(d,u.anchorNode,u.anchorOffset),x=Bp(d,u.focusNode,u.focusOffset);_&&x&&mi(d,function(){Dr(d.doc,zo(_,x),ze),(_.bad||x.bad)&&(d.curOp.selectionChanged=!0)})}}},dn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,d=u.display,_=u.doc.sel.primary(),x=_.from(),T=_.to();if(x.ch==0&&x.line>u.firstLine()&&(x=qe(x.line-1,lt(u.doc,x.line-1).length)),T.ch==lt(u.doc,T.line).text.length&&T.line<u.lastLine()&&(T=qe(T.line+1,0)),x.line<d.viewFrom||T.line>d.viewTo-1)return!1;var N,$,Y;x.line==d.viewFrom||(N=Ya(u,x.line))==0?($=Pt(d.view[0].line),Y=d.view[0].node):($=Pt(d.view[N].line),Y=d.view[N-1].node.nextSibling);var te=Ya(u,T.line),re,ve;if(te==d.view.length-1?(re=d.viewTo-1,ve=d.lineDiv.lastChild):(re=Pt(d.view[te+1].line)-1,ve=d.view[te+1].node.previousSibling),!Y)return!1;for(var xe=u.doc.splitLines(VI(u,Y,ve,$,re)),Ee=kr(u.doc,qe($,0),qe(re,lt(u.doc,re).text.length));xe.length>1&&Ee.length>1;)if(De(xe)==De(Ee))xe.pop(),Ee.pop(),re--;else if(xe[0]==Ee[0])xe.shift(),Ee.shift(),$++;else break;for(var Me=0,Ne=0,We=xe[0],Qe=Ee[0],nt=Math.min(We.length,Qe.length);Me<nt&&We.charCodeAt(Me)==Qe.charCodeAt(Me);)++Me;for(var ut=De(xe),rt=De(Ee),dt=Math.min(ut.length-(xe.length==1?Me:0),rt.length-(Ee.length==1?Me:0));Ne<dt&&ut.charCodeAt(ut.length-Ne-1)==rt.charCodeAt(rt.length-Ne-1);)++Ne;if(xe.length==1&&Ee.length==1&&$==x.line)for(;Me&&Me>x.ch&&ut.charCodeAt(ut.length-Ne-1)==rt.charCodeAt(rt.length-Ne-1);)Me--,Ne++;xe[xe.length-1]=ut.slice(0,ut.length-Ne).replace(/^\u200b+/,""),xe[0]=xe[0].slice(Me).replace(/\u200b+$/,"");var Ct=qe($,Me),Tt=qe(re,Ee.length?De(Ee).length-Ne:0);if(xe.length>1||xe[0]||se(Ct,Tt))return Mu(u.doc,xe,Ct,Tt,"+input"),!0},dn.prototype.ensurePolled=function(){this.forceCompositionEnd()},dn.prototype.reset=function(){this.forceCompositionEnd()},dn.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},dn.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},dn.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&mi(this.cm,function(){return ii(u.cm)})},dn.prototype.setUneditable=function(u){u.contentEditable="false"},dn.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||mr(this.cm,Wv)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},dn.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},dn.prototype.onContextMenu=function(){},dn.prototype.resetPosition=function(){},dn.prototype.needsContentAttribute=!0;function LS(u,d){var _=hv(u,d.line);if(!_||_.hidden)return null;var x=lt(u.doc,d.line),T=ib(_,x,d.line),N=V(x,u.doc.direction),$="left";if(N){var Y=k(N,d.ch);$=Y%2?"right":"left"}var te=ab(T.map,d.ch,$);return te.offset=te.collapse=="right"?te.end:te.start,te}function GI(u){for(var d=u;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Ru(u,d){return d&&(u.bad=!0),u}function VI(u,d,_,x,T){var N="",$=!1,Y=u.doc.lineSeparator(),te=!1;function re(Me){return function(Ne){return Ne.id==Me}}function ve(){$&&(N+=Y,te&&(N+=Y),$=te=!1)}function xe(Me){Me&&(ve(),N+=Me)}function Ee(Me){if(Me.nodeType==1){var Ne=Me.getAttribute("cm-text");if(Ne){xe(Ne);return}var We=Me.getAttribute("cm-marker"),Qe;if(We){var nt=u.findMarks(qe(x,0),qe(T+1,0),re(+We));nt.length&&(Qe=nt[0].find(0))&&xe(kr(u.doc,Qe.from,Qe.to).join(Y));return}if(Me.getAttribute("contenteditable")=="false")return;var ut=/^(pre|div|p|li|table|br)$/i.test(Me.nodeName);if(!/^br$/i.test(Me.nodeName)&&Me.textContent.length==0)return;ut&&ve();for(var rt=0;rt<Me.childNodes.length;rt++)Ee(Me.childNodes[rt]);/^(pre|p)$/i.test(Me.nodeName)&&(te=!0),ut&&($=!0)}else Me.nodeType==3&&xe(Me.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ee(d),d!=_;)d=d.nextSibling,te=!1;return N}function Bp(u,d,_){var x;if(d==u.display.lineDiv){if(x=u.display.lineDiv.childNodes[_],!x)return Ru(u.clipPos(qe(u.display.viewTo-1)),!0);d=null,_=0}else for(x=d;;x=x.parentNode){if(!x||x==u.display.lineDiv)return null;if(x.parentNode&&x.parentNode==u.display.lineDiv)break}for(var T=0;T<u.display.view.length;T++){var N=u.display.view[T];if(N.node==x)return WI(N,d,_)}}function WI(u,d,_){var x=u.text.firstChild,T=!1;if(!d||!E(x,d))return Ru(qe(Pt(u.line),0),!0);if(d==x&&(T=!0,d=x.childNodes[_],_=0,!d)){var N=u.rest?De(u.rest):u.line;return Ru(qe(Pt(N),N.text.length),T)}var $=d.nodeType==3?d:null,Y=d;for(!$&&d.childNodes.length==1&&d.firstChild.nodeType==3&&($=d.firstChild,_&&(_=$.nodeValue.length));Y.parentNode!=x;)Y=Y.parentNode;var te=u.measure,re=te.maps;function ve(Qe,nt,ut){for(var rt=-1;rt<(re?re.length:0);rt++)for(var dt=rt<0?te.map:re[rt],Ct=0;Ct<dt.length;Ct+=3){var Tt=dt[Ct+2];if(Tt==Qe||Tt==nt){var qt=Pt(rt<0?u.line:u.rest[rt]),wn=dt[Ct]+ut;return(ut<0||Tt!=Qe)&&(wn=dt[Ct+(ut?1:0)]),qe(qt,wn)}}}var xe=ve($,Y,_);if(xe)return Ru(xe,T);for(var Ee=Y.nextSibling,Me=$?$.nodeValue.length-_:0;Ee;Ee=Ee.nextSibling){if(xe=ve(Ee,Ee.firstChild,0),xe)return Ru(qe(xe.line,xe.ch-Me),T);Me+=Ee.textContent.length}for(var Ne=Y.previousSibling,We=_;Ne;Ne=Ne.previousSibling){if(xe=ve(Ne,Ne.firstChild,-1),xe)return Ru(qe(xe.line,xe.ch+We),T);We+=Ne.textContent.length}}var Wn=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new be,this.hasSelection=!1,this.composing=null};Wn.prototype.init=function(u){var d=this,_=this,x=this.cm;this.createField(u);var T=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),P&&(T.style.width="0px"),K(T,"input",function(){m&&y>=9&&d.hasSelection&&(d.hasSelection=null),_.poll()}),K(T,"paste",function($){fe(x,$)||MS($,x)||(x.state.pasteIncoming=+new Date,_.fastPoll())});function N($){if(!fe(x,$)){if(x.somethingSelected())Fp({lineWise:!1,text:x.getSelections()});else if(x.options.lineWiseCopyCut){var Y=ES(x);Fp({lineWise:!0,text:Y.text}),$.type=="cut"?x.setSelections(Y.ranges,null,ze):(_.prevInput="",T.value=Y.text.join(`
`),de(T))}else return;$.type=="cut"&&(x.state.cutIncoming=+new Date)}}K(T,"cut",N),K(T,"copy",N),K(u.scroller,"paste",function($){if(!(Js(u,$)||fe(x,$))){if(!T.dispatchEvent){x.state.pasteIncoming=+new Date,_.focus();return}var Y=new Event("paste");Y.clipboardData=$.clipboardData,T.dispatchEvent(Y)}}),K(u.lineSpace,"selectstart",function($){Js(u,$)||Fe($)}),K(T,"compositionstart",function(){var $=x.getCursor("from");_.composing&&_.composing.range.clear(),_.composing={start:$,range:x.markText($,x.getCursor("to"),{className:"CodeMirror-composing"})}}),K(T,"compositionend",function(){_.composing&&(_.poll(),_.composing.range.clear(),_.composing=null)})},Wn.prototype.createField=function(u){this.wrapper=CS(),this.textarea=this.wrapper.firstChild},Wn.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},Wn.prototype.prepareSelection=function(){var u=this.cm,d=u.display,_=u.doc,x=yb(u);if(u.options.moveInputWithCursor){var T=cs(u,_.sel.primary().head,"div"),N=d.wrapper.getBoundingClientRect(),$=d.lineDiv.getBoundingClientRect();x.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,T.top+$.top-N.top)),x.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,T.left+$.left-N.left))}return x},Wn.prototype.showSelection=function(u){var d=this.cm,_=d.display;le(_.cursorDiv,u.cursors),le(_.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},Wn.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing)){var d=this.cm;if(d.somethingSelected()){this.prevInput="";var _=d.getSelection();this.textarea.value=_,d.state.focused&&de(this.textarea),m&&y>=9&&(this.hasSelection=_)}else u||(this.prevInput=this.textarea.value="",m&&y>=9&&(this.hasSelection=null))}},Wn.prototype.getField=function(){return this.textarea},Wn.prototype.supportsTouch=function(){return!1},Wn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!F||ge()!=this.textarea))try{this.textarea.focus()}catch{}},Wn.prototype.blur=function(){this.textarea.blur()},Wn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Wn.prototype.receivedFocus=function(){this.slowPoll()},Wn.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},Wn.prototype.fastPoll=function(){var u=!1,d=this;d.pollingFast=!0;function _(){var x=d.poll();!x&&!u?(u=!0,d.polling.set(60,_)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,_)},Wn.prototype.poll=function(){var u=this,d=this.cm,_=this.textarea,x=this.prevInput;if(this.contextMenuPending||!d.state.focused||Oe(_)&&!x&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var T=_.value;if(T==x&&!d.somethingSelected())return!1;if(m&&y>=9&&this.hasSelection===T||L&&/[\uf700-\uf7ff]/.test(T))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var N=T.charCodeAt(0);if(N==8203&&!x&&(x="\u200B"),N==8666)return this.reset(),this.cm.execCommand("undo")}for(var $=0,Y=Math.min(x.length,T.length);$<Y&&x.charCodeAt($)==T.charCodeAt($);)++$;return mi(d,function(){Wv(d,T.slice($),x.length-$,null,u.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?_.value=u.prevInput="":u.prevInput=T,u.composing&&(u.composing.range.clear(),u.composing.range=d.markText(u.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Wn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Wn.prototype.onKeyPress=function(){m&&y>=9&&(this.hasSelection=null),this.fastPoll()},Wn.prototype.onContextMenu=function(u){var d=this,_=d.cm,x=_.display,T=d.textarea;d.contextMenuPending&&d.contextMenuPending();var N=Xa(_,u),$=x.scroller.scrollTop;if(!N||I)return;var Y=_.options.resetSelectionOnContextMenu;Y&&_.doc.sel.contains(N)==-1&&mr(_,Dr)(_.doc,zo(N),ze);var te=T.style.cssText,re=d.wrapper.style.cssText,ve=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-ve.top-5)+"px; left: "+(u.clientX-ve.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var xe;b&&(xe=window.scrollY),x.input.focus(),b&&window.scrollTo(null,xe),x.input.reset(),_.somethingSelected()||(T.value=d.prevInput=" "),d.contextMenuPending=Me,x.selForContextMenu=_.doc.sel,clearTimeout(x.detectingSelectAll);function Ee(){if(T.selectionStart!=null){var We=_.somethingSelected(),Qe="\u200B"+(We?T.value:"");T.value="\u21DA",T.value=Qe,d.prevInput=We?"":"\u200B",T.selectionStart=1,T.selectionEnd=Qe.length,x.selForContextMenu=_.doc.sel}}function Me(){if(d.contextMenuPending==Me&&(d.contextMenuPending=!1,d.wrapper.style.cssText=re,T.style.cssText=te,m&&y<9&&x.scrollbars.setScrollTop(x.scroller.scrollTop=$),T.selectionStart!=null)){(!m||m&&y<9)&&Ee();var We=0,Qe=function(){x.selForContextMenu==_.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&d.prevInput=="\u200B"?mr(_,Xb)(_):We++<10?x.detectingSelectAll=setTimeout(Qe,500):(x.selForContextMenu=null,x.input.reset())};x.detectingSelectAll=setTimeout(Qe,200)}}if(m&&y>=9&&Ee(),ae){wt(u);var Ne=function(){ne(window,"mouseup",Ne),setTimeout(Me,20)};K(window,"mouseup",Ne)}else setTimeout(Me,50)},Wn.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},Wn.prototype.setUneditable=function(){},Wn.prototype.needsContentAttribute=!1;function $I(u,d){if(d=d?Re(d):{},d.value=u.value,!d.tabindex&&u.tabIndex&&(d.tabindex=u.tabIndex),!d.placeholder&&u.placeholder&&(d.placeholder=u.placeholder),d.autofocus==null){var _=ge();d.autofocus=_==u||u.getAttribute("autofocus")!=null&&_==document.body}function x(){u.value=Y.getValue()}var T;if(u.form&&(K(u.form,"submit",x),!d.leaveSubmitMethodAlone)){var N=u.form;T=N.submit;try{var $=N.submit=function(){x(),N.submit=T,N.submit(),N.submit=$}}catch{}}d.finishInit=function(te){te.save=x,te.getTextArea=function(){return u},te.toTextArea=function(){te.toTextArea=isNaN,x(),u.parentNode.removeChild(te.getWrapperElement()),u.style.display="",u.form&&(ne(u.form,"submit",x),!d.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=T))}},u.style.display="none";var Y=Cn(function(te){return u.parentNode.insertBefore(te,u.nextSibling)},d);return Y}function jI(u){u.off=ne,u.on=K,u.wheelEventPixels=J3,u.Doc=si,u.splitLines=Te,u.countColumn=we,u.findColumn=Le,u.isWordChar=X,u.Pass=$e,u.signal=ie,u.Line=Qs,u.changeEnd=Ho,u.scrollbarModel=Mb,u.Pos=qe,u.cmpPos=se,u.modes=xt,u.mimeModes=Et,u.resolveMode=jt,u.getMode=Xt,u.modeExtensions=nn,u.extendMode=Kn,u.copyState=Vn,u.startState=wr,u.innerMode=Yt,u.commands=Qf,u.keyMap=to,u.keyName=cS,u.isModifierKey=lS,u.lookupKey=Eu,u.normalizeKeyMap=wI,u.StringStream=Gt,u.SharedTextMarker=Yf,u.TextMarker=Vo,u.LineWidget=Xf,u.e_preventDefault=Fe,u.e_stopPropagation=mt,u.e_stop=wt,u.addClass=ke,u.contains=E,u.rmClass=ee,u.keyNames=Wo}FI(Cn),HI(Cn);var qI="iter insert remove copy getEditor constructor".split(" ");for(var Up in si.prototype)si.prototype.hasOwnProperty(Up)&&Ue(qI,Up)<0&&(Cn.prototype[Up]=function(u){return function(){return u.apply(this.doc,arguments)}}(si.prototype[Up]));return Xe(si),Cn.inputStyles={textarea:Wn,contenteditable:dn},Cn.defineMode=function(u){!Cn.defaults.mode&&u!="null"&&(Cn.defaults.mode=u),Rt.apply(this,arguments)},Cn.defineMIME=Ft,Cn.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),Cn.defineMIME("text/plain","null"),Cn.defineExtension=function(u,d){Cn.prototype[u]=d},Cn.defineDocExtension=function(u,d){si.prototype[u]=d},Cn.fromTextArea=$I,jI(Cn),Cn.version="5.65.1",Cn})})(Zl);(function(s,e){(function(t){t(Zl.exports)})(function(t){var r={},o=/[^\s\u00a0]/,l=t.Pos,c=t.cmpPos;function h(b){var M=b.search(o);return M==-1?0:M}t.commands.toggleComment=function(b){b.toggleComment()},t.defineExtension("toggleComment",function(b){b||(b=r);for(var M=this,C=1/0,I=this.listSelections(),O=null,U=I.length-1;U>=0;U--){var H=I[U].from(),P=I[U].to();H.line>=C||(P.line>=C&&(P=l(C,0)),C=H.line,O==null?M.uncomment(H,P,b)?O="un":(M.lineComment(H,P,b),O="line"):O=="un"?M.uncomment(H,P,b):M.lineComment(H,P,b))}});function m(b,M,C){return/\bstring\b/.test(b.getTokenTypeAt(l(M.line,0)))&&!/^[\'\"\`]/.test(C)}function y(b,M){var C=b.getMode();return C.useInnerComments===!1||!C.innerMode?C:b.getModeAt(M)}t.defineExtension("lineComment",function(b,M,C){C||(C=r);var I=this,O=y(I,b),U=I.getLine(b.line);if(!(U==null||m(I,b,U))){var H=C.lineComment||O.lineComment;if(!H){(C.blockCommentStart||O.blockCommentStart)&&(C.fullLines=!0,I.blockComment(b,M,C));return}var P=Math.min(M.ch!=0||M.line==b.line?M.line+1:M.line,I.lastLine()+1),A=C.padding==null?" ":C.padding,F=C.commentBlankLines||b.line==M.line;I.operation(function(){if(C.indent){for(var L=null,B=b.line;B<P;++B){var z=I.getLine(B),q=z.slice(0,h(z));(L==null||L.length>q.length)&&(L=q)}for(var B=b.line;B<P;++B){var z=I.getLine(B),Z=L.length;!F&&!o.test(z)||(z.slice(0,Z)!=L&&(Z=h(z)),I.replaceRange(L+H+A,l(B,0),l(B,Z)))}}else for(var B=b.line;B<P;++B)(F||o.test(I.getLine(B)))&&I.replaceRange(H+A,l(B,0))})}}),t.defineExtension("blockComment",function(b,M,C){C||(C=r);var I=this,O=y(I,b),U=C.blockCommentStart||O.blockCommentStart,H=C.blockCommentEnd||O.blockCommentEnd;if(!U||!H){(C.lineComment||O.lineComment)&&C.fullLines!=!1&&I.lineComment(b,M,C);return}if(!/\bcomment\b/.test(I.getTokenTypeAt(l(b.line,0)))){var P=Math.min(M.line,I.lastLine());P!=b.line&&M.ch==0&&o.test(I.getLine(P))&&--P;var A=C.padding==null?" ":C.padding;b.line>P||I.operation(function(){if(C.fullLines!=!1){var F=o.test(I.getLine(P));I.replaceRange(A+H,l(P)),I.replaceRange(U+A,l(b.line,0));var L=C.blockCommentLead||O.blockCommentLead;if(L!=null)for(var B=b.line+1;B<=P;++B)(B!=P||F)&&I.replaceRange(L+A,l(B,0))}else{var z=c(I.getCursor("to"),M)==0,q=!I.somethingSelected();I.replaceRange(H,M),z&&I.setSelection(q?M:I.getCursor("from"),M),I.replaceRange(U,b)}})}}),t.defineExtension("uncomment",function(b,M,C){C||(C=r);var I=this,O=y(I,b),U=Math.min(M.ch!=0||M.line==b.line?M.line:M.line-1,I.lastLine()),H=Math.min(b.line,U),P=C.lineComment||O.lineComment,A=[],F=C.padding==null?" ":C.padding,L;e:{if(!P)break e;for(var B=H;B<=U;++B){var z=I.getLine(B),q=z.indexOf(P);if(q>-1&&!/comment/.test(I.getTokenTypeAt(l(B,q+1)))&&(q=-1),q==-1&&o.test(z)||q>-1&&o.test(z.slice(0,q)))break e;A.push(z)}if(I.operation(function(){for(var Se=H;Se<=U;++Se){var de=A[Se-H],ye=de.indexOf(P),Re=ye+P.length;ye<0||(de.slice(Re,Re+F.length)==F&&(Re+=F.length),L=!0,I.replaceRange("",l(Se,ye),l(Se,Re)))}}),L)return!0}var Z=C.blockCommentStart||O.blockCommentStart,ae=C.blockCommentEnd||O.blockCommentEnd;if(!Z||!ae)return!1;var ce=C.blockCommentLead||O.blockCommentLead,ee=I.getLine(H),ue=ee.indexOf(Z);if(ue==-1)return!1;var le=U==H?ee:I.getLine(U),w=le.indexOf(ae,U==H?ue+Z.length:0),p=l(H,ue+1),J=l(U,w+1);if(w==-1||!/comment/.test(I.getTokenTypeAt(p))||!/comment/.test(I.getTokenTypeAt(J))||I.getRange(p,J,`
`).indexOf(ae)>-1)return!1;var E=ee.lastIndexOf(Z,b.ch),ge=E==-1?-1:ee.slice(0,b.ch).indexOf(ae,E+Z.length);if(E!=-1&&ge!=-1&&ge+ae.length!=b.ch)return!1;ge=le.indexOf(ae,M.ch);var ke=le.slice(M.ch).lastIndexOf(Z,ge-M.ch);return E=ge==-1||ke==-1?-1:M.ch+ke,ge!=-1&&E!=-1&&E!=M.ch?!1:(I.operation(function(){I.replaceRange("",l(U,w-(F&&le.slice(w-F.length,w)==F?F.length:0)),l(U,w+ae.length));var Se=ue+Z.length;if(F&&ee.slice(Se,Se+F.length)==F&&(Se+=F.length),I.replaceRange("",l(H,ue),l(H,Se)),ce)for(var de=H+1;de<=U;++de){var ye=I.getLine(de),Re=ye.indexOf(ce);if(!(Re==-1||o.test(ye.slice(0,Re)))){var we=Re+ce.length;F&&ye.slice(we,we+F.length)==F&&(we+=F.length),I.replaceRange("",l(de,Re),l(de,we))}}}),!0)})})})();var PH={exports:{}};(function(s,e){(function(t){t(Zl.exports)})(function(t){var r=t.Pos;function o(A){var F=A.flags;return F!=null?F:(A.ignoreCase?"i":"")+(A.global?"g":"")+(A.multiline?"m":"")}function l(A,F){for(var L=o(A),B=L,z=0;z<F.length;z++)B.indexOf(F.charAt(z))==-1&&(B+=F.charAt(z));return L==B?A:new RegExp(A.source,B)}function c(A){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(A.source)}function h(A,F,L){F=l(F,"g");for(var B=L.line,z=L.ch,q=A.lastLine();B<=q;B++,z=0){F.lastIndex=z;var Z=A.getLine(B),ae=F.exec(Z);if(ae)return{from:r(B,ae.index),to:r(B,ae.index+ae[0].length),match:ae}}}function m(A,F,L){if(!c(F))return h(A,F,L);F=l(F,"gm");for(var B,z=1,q=L.line,Z=A.lastLine();q<=Z;){for(var ae=0;ae<z&&!(q>Z);ae++){var ce=A.getLine(q++);B=B==null?ce:B+`
`+ce}z=z*2,F.lastIndex=L.ch;var ee=F.exec(B);if(ee){var ue=B.slice(0,ee.index).split(`
`),le=ee[0].split(`
`),w=L.line+ue.length-1,p=ue[ue.length-1].length;return{from:r(w,p),to:r(w+le.length-1,le.length==1?p+le[0].length:le[le.length-1].length),match:ee}}}}function y(A,F,L){for(var B,z=0;z<=A.length;){F.lastIndex=z;var q=F.exec(A);if(!q)break;var Z=q.index+q[0].length;if(Z>A.length-L)break;(!B||Z>B.index+B[0].length)&&(B=q),z=q.index+1}return B}function b(A,F,L){F=l(F,"g");for(var B=L.line,z=L.ch,q=A.firstLine();B>=q;B--,z=-1){var Z=A.getLine(B),ae=y(Z,F,z<0?0:Z.length-z);if(ae)return{from:r(B,ae.index),to:r(B,ae.index+ae[0].length),match:ae}}}function M(A,F,L){if(!c(F))return b(A,F,L);F=l(F,"gm");for(var B,z=1,q=A.getLine(L.line).length-L.ch,Z=L.line,ae=A.firstLine();Z>=ae;){for(var ce=0;ce<z&&Z>=ae;ce++){var ee=A.getLine(Z--);B=B==null?ee:ee+`
`+B}z*=2;var ue=y(B,F,q);if(ue){var le=B.slice(0,ue.index).split(`
`),w=ue[0].split(`
`),p=Z+le.length,J=le[le.length-1].length;return{from:r(p,J),to:r(p+w.length-1,w.length==1?J+w[0].length:w[w.length-1].length),match:ue}}}}var C,I;String.prototype.normalize?(C=function(A){return A.normalize("NFD").toLowerCase()},I=function(A){return A.normalize("NFD")}):(C=function(A){return A.toLowerCase()},I=function(A){return A});function O(A,F,L,B){if(A.length==F.length)return L;for(var z=0,q=L+Math.max(0,A.length-F.length);;){if(z==q)return z;var Z=z+q>>1,ae=B(A.slice(0,Z)).length;if(ae==L)return Z;ae>L?q=Z:z=Z+1}}function U(A,F,L,B){if(!F.length)return null;var z=B?C:I,q=z(F).split(/\r|\n\r?/);e:for(var Z=L.line,ae=L.ch,ce=A.lastLine()+1-q.length;Z<=ce;Z++,ae=0){var ee=A.getLine(Z).slice(ae),ue=z(ee);if(q.length==1){var le=ue.indexOf(q[0]);if(le==-1)continue e;var L=O(ee,ue,le,z)+ae;return{from:r(Z,O(ee,ue,le,z)+ae),to:r(Z,O(ee,ue,le+q[0].length,z)+ae)}}else{var w=ue.length-q[0].length;if(ue.slice(w)!=q[0])continue e;for(var p=1;p<q.length-1;p++)if(z(A.getLine(Z+p))!=q[p])continue e;var J=A.getLine(Z+q.length-1),E=z(J),ge=q[q.length-1];if(E.slice(0,ge.length)!=ge)continue e;return{from:r(Z,O(ee,ue,w,z)+ae),to:r(Z+q.length-1,O(J,E,ge.length,z))}}}}function H(A,F,L,B){if(!F.length)return null;var z=B?C:I,q=z(F).split(/\r|\n\r?/);e:for(var Z=L.line,ae=L.ch,ce=A.firstLine()-1+q.length;Z>=ce;Z--,ae=-1){var ee=A.getLine(Z);ae>-1&&(ee=ee.slice(0,ae));var ue=z(ee);if(q.length==1){var le=ue.lastIndexOf(q[0]);if(le==-1)continue e;return{from:r(Z,O(ee,ue,le,z)),to:r(Z,O(ee,ue,le+q[0].length,z))}}else{var w=q[q.length-1];if(ue.slice(0,w.length)!=w)continue e;for(var p=1,L=Z-q.length+1;p<q.length-1;p++)if(z(A.getLine(L+p))!=q[p])continue e;var J=A.getLine(Z+1-q.length),E=z(J);if(E.slice(E.length-q[0].length)!=q[0])continue e;return{from:r(Z+1-q.length,O(J,E,J.length-q[0].length,z)),to:r(Z,O(ee,ue,w.length,z))}}}}function P(A,F,L,B){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=A,L=L?A.clipPos(L):r(0,0),this.pos={from:L,to:L};var z;typeof B=="object"?z=B.caseFold:(z=B,B=null),typeof F=="string"?(z==null&&(z=!1),this.matches=function(q,Z){return(q?H:U)(A,F,Z,z)}):(F=l(F,"gm"),!B||B.multiline!==!1?this.matches=function(q,Z){return(q?M:m)(A,F,Z)}:this.matches=function(q,Z){return(q?b:h)(A,F,Z)})}P.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(A){var F=this.doc.clipPos(A?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(F=r(F.line,F.ch),A?(F.ch--,F.ch<0&&(F.line--,F.ch=(this.doc.getLine(F.line)||"").length)):(F.ch++,F.ch>(this.doc.getLine(F.line)||"").length&&(F.ch=0,F.line++)),t.cmpPos(F,this.doc.clipPos(F))!=0))return this.atOccurrence=!1;var L=this.matches(A,F);if(this.afterEmptyMatch=L&&t.cmpPos(L.from,L.to)==0,L)return this.pos=L,this.atOccurrence=!0,this.pos.match||!0;var B=r(A?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:B,to:B},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(A,F){if(!!this.atOccurrence){var L=t.splitLines(A);this.doc.replaceRange(L,this.pos.from,this.pos.to,F),this.pos.to=r(this.pos.from.line+L.length-1,L[L.length-1].length+(L.length==1?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(A,F,L){return new P(this.doc,A,F,L)}),t.defineDocExtension("getSearchCursor",function(A,F,L){return new P(this,A,F,L)}),t.defineExtension("selectMatches",function(A,F){for(var L=[],B=this.getSearchCursor(A,this.getCursor("from"),F);B.findNext()&&!(t.cmpPos(B.to(),this.getCursor("to"))>0);)L.push({anchor:B.from(),head:B.to()});L.length&&this.setSelections(L,0)})})})();var kH={exports:{}};(function(s,e){(function(t){t(Zl.exports)})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),o=t.Pos,l={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function c(C){return C&&C.bracketRegex||/[(){}[\]]/}function h(C,I,O){var U=C.getLineHandle(I.line),H=I.ch-1,P=O&&O.afterCursor;P==null&&(P=/(^| )cm-fat-cursor($| )/.test(C.getWrapperElement().className));var A=c(O),F=!P&&H>=0&&A.test(U.text.charAt(H))&&l[U.text.charAt(H)]||A.test(U.text.charAt(H+1))&&l[U.text.charAt(++H)];if(!F)return null;var L=F.charAt(1)==">"?1:-1;if(O&&O.strict&&L>0!=(H==I.ch))return null;var B=C.getTokenTypeAt(o(I.line,H+1)),z=m(C,o(I.line,H+(L>0?1:0)),L,B,O);return z==null?null:{from:o(I.line,H),to:z&&z.pos,match:z&&z.ch==F.charAt(0),forward:L>0}}function m(C,I,O,U,H){for(var P=H&&H.maxScanLineLength||1e4,A=H&&H.maxScanLines||1e3,F=[],L=c(H),B=O>0?Math.min(I.line+A,C.lastLine()+1):Math.max(C.firstLine()-1,I.line-A),z=I.line;z!=B;z+=O){var q=C.getLine(z);if(!!q){var Z=O>0?0:q.length-1,ae=O>0?q.length:-1;if(!(q.length>P))for(z==I.line&&(Z=I.ch-(O<0?1:0));Z!=ae;Z+=O){var ce=q.charAt(Z);if(L.test(ce)&&(U===void 0||(C.getTokenTypeAt(o(z,Z+1))||"")==(U||""))){var ee=l[ce];if(ee&&ee.charAt(1)==">"==O>0)F.push(ce);else if(F.length)F.pop();else return{pos:o(z,Z),ch:ce}}}}}return z-O==(O>0?C.lastLine():C.firstLine())?!1:null}function y(C,I,O){for(var U=C.state.matchBrackets.maxHighlightLineLength||1e3,H=O&&O.highlightNonMatching,P=[],A=C.listSelections(),F=0;F<A.length;F++){var L=A[F].empty()&&h(C,A[F].head,O);if(L&&(L.match||H!==!1)&&C.getLine(L.from.line).length<=U){var B=L.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";P.push(C.markText(L.from,o(L.from.line,L.from.ch+1),{className:B})),L.to&&C.getLine(L.to.line).length<=U&&P.push(C.markText(L.to,o(L.to.line,L.to.ch+1),{className:B}))}}if(P.length){r&&C.state.focused&&C.focus();var z=function(){C.operation(function(){for(var q=0;q<P.length;q++)P[q].clear()})};if(I)setTimeout(z,800);else return z}}function b(C){C.operation(function(){C.state.matchBrackets.currentlyHighlighted&&(C.state.matchBrackets.currentlyHighlighted(),C.state.matchBrackets.currentlyHighlighted=null),C.state.matchBrackets.currentlyHighlighted=y(C,!1,C.state.matchBrackets)})}function M(C){C.state.matchBrackets&&C.state.matchBrackets.currentlyHighlighted&&(C.state.matchBrackets.currentlyHighlighted(),C.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(C,I,O){O&&O!=t.Init&&(C.off("cursorActivity",b),C.off("focus",b),C.off("blur",M),M(C)),I&&(C.state.matchBrackets=typeof I=="object"?I:{},C.on("cursorActivity",b),C.on("focus",b),C.on("blur",M))}),t.defineExtension("matchBrackets",function(){y(this,!0)}),t.defineExtension("findMatchingBracket",function(C,I,O){return(O||typeof I=="boolean")&&(O?(O.strict=I,I=O):I=I?{strict:!0}:null),h(this,C,I)}),t.defineExtension("scanForBracket",function(C,I,O,U){return m(this,C,I,O,U)})})})();(function(s,e){(function(t){t(Zl.exports,PH.exports,kH.exports)})(function(t){var r=t.commands,o=t.Pos;function l(L,B,z){if(z<0&&B.ch==0)return L.clipPos(o(B.line-1));var q=L.getLine(B.line);if(z>0&&B.ch>=q.length)return L.clipPos(o(B.line+1,0));for(var Z="start",ae,ce=B.ch,ee=ce,ue=z<0?0:q.length,le=0;ee!=ue;ee+=z,le++){var w=q.charAt(z<0?ee-1:ee),p=w!="_"&&t.isWordChar(w)?"w":"o";if(p=="w"&&w.toUpperCase()==w&&(p="W"),Z=="start")p!="o"?(Z="in",ae=p):ce=ee+z;else if(Z=="in"&&ae!=p){if(ae=="w"&&p=="W"&&z<0&&ee--,ae=="W"&&p=="w"&&z>0)if(ee==ce+1){ae="w";continue}else ee--;break}}return o(B.line,ee)}function c(L,B){L.extendSelectionsBy(function(z){return L.display.shift||L.doc.extend||z.empty()?l(L.doc,z.head,B):B<0?z.from():z.to()})}r.goSubwordLeft=function(L){c(L,-1)},r.goSubwordRight=function(L){c(L,1)},r.scrollLineUp=function(L){var B=L.getScrollInfo();if(!L.somethingSelected()){var z=L.lineAtHeight(B.top+B.clientHeight,"local");L.getCursor().line>=z&&L.execCommand("goLineUp")}L.scrollTo(null,B.top-L.defaultTextHeight())},r.scrollLineDown=function(L){var B=L.getScrollInfo();if(!L.somethingSelected()){var z=L.lineAtHeight(B.top,"local")+1;L.getCursor().line<=z&&L.execCommand("goLineDown")}L.scrollTo(null,B.top+L.defaultTextHeight())},r.splitSelectionByLine=function(L){for(var B=L.listSelections(),z=[],q=0;q<B.length;q++)for(var Z=B[q].from(),ae=B[q].to(),ce=Z.line;ce<=ae.line;++ce)ae.line>Z.line&&ce==ae.line&&ae.ch==0||z.push({anchor:ce==Z.line?Z:o(ce,0),head:ce==ae.line?ae:o(ce)});L.setSelections(z,0)},r.singleSelectionTop=function(L){var B=L.listSelections()[0];L.setSelection(B.anchor,B.head,{scroll:!1})},r.selectLine=function(L){for(var B=L.listSelections(),z=[],q=0;q<B.length;q++){var Z=B[q];z.push({anchor:o(Z.from().line,0),head:o(Z.to().line+1,0)})}L.setSelections(z)};function h(L,B){if(L.isReadOnly())return t.Pass;L.operation(function(){for(var z=L.listSelections().length,q=[],Z=-1,ae=0;ae<z;ae++){var ce=L.listSelections()[ae].head;if(!(ce.line<=Z)){var ee=o(ce.line+(B?0:1),0);L.replaceRange(`
`,ee,null,"+insertLine"),L.indentLine(ee.line,null,!0),q.push({head:ee,anchor:ee}),Z=ce.line+1}}L.setSelections(q)}),L.execCommand("indentAuto")}r.insertLineAfter=function(L){return h(L,!1)},r.insertLineBefore=function(L){return h(L,!0)};function m(L,B){for(var z=B.ch,q=z,Z=L.getLine(B.line);z&&t.isWordChar(Z.charAt(z-1));)--z;for(;q<Z.length&&t.isWordChar(Z.charAt(q));)++q;return{from:o(B.line,z),to:o(B.line,q),word:Z.slice(z,q)}}r.selectNextOccurrence=function(L){var B=L.getCursor("from"),z=L.getCursor("to"),q=L.state.sublimeFindFullWord==L.doc.sel;if(t.cmpPos(B,z)==0){var Z=m(L,B);if(!Z.word)return;L.setSelection(Z.from,Z.to),q=!0}else{var ae=L.getRange(B,z),ce=q?new RegExp("\\b"+ae+"\\b"):ae,ee=L.getSearchCursor(ce,z),ue=ee.findNext();if(ue||(ee=L.getSearchCursor(ce,o(L.firstLine(),0)),ue=ee.findNext()),!ue||b(L.listSelections(),ee.from(),ee.to()))return;L.addSelection(ee.from(),ee.to())}q&&(L.state.sublimeFindFullWord=L.doc.sel)},r.skipAndSelectNextOccurrence=function(L){var B=L.getCursor("anchor"),z=L.getCursor("head");r.selectNextOccurrence(L),t.cmpPos(B,z)!=0&&L.doc.setSelections(L.doc.listSelections().filter(function(q){return q.anchor!=B||q.head!=z}))};function y(L,B){for(var z=L.listSelections(),q=[],Z=0;Z<z.length;Z++){var ae=z[Z],ce=L.findPosV(ae.anchor,B,"line",ae.anchor.goalColumn),ee=L.findPosV(ae.head,B,"line",ae.head.goalColumn);ce.goalColumn=ae.anchor.goalColumn!=null?ae.anchor.goalColumn:L.cursorCoords(ae.anchor,"div").left,ee.goalColumn=ae.head.goalColumn!=null?ae.head.goalColumn:L.cursorCoords(ae.head,"div").left;var ue={anchor:ce,head:ee};q.push(ae),q.push(ue)}L.setSelections(q)}r.addCursorToPrevLine=function(L){y(L,-1)},r.addCursorToNextLine=function(L){y(L,1)};function b(L,B,z){for(var q=0;q<L.length;q++)if(t.cmpPos(L[q].from(),B)==0&&t.cmpPos(L[q].to(),z)==0)return!0;return!1}var M="(){}[]";function C(L){for(var B=L.listSelections(),z=[],q=0;q<B.length;q++){var Z=B[q],ae=Z.head,ce=L.scanForBracket(ae,-1);if(!ce)return!1;for(;;){var ee=L.scanForBracket(ae,1);if(!ee)return!1;if(ee.ch==M.charAt(M.indexOf(ce.ch)+1)){var ue=o(ce.pos.line,ce.pos.ch+1);if(t.cmpPos(ue,Z.from())==0&&t.cmpPos(ee.pos,Z.to())==0){if(ce=L.scanForBracket(ce.pos,-1),!ce)return!1}else{z.push({anchor:ue,head:ee.pos});break}}ae=o(ee.pos.line,ee.pos.ch+1)}}return L.setSelections(z),!0}r.selectScope=function(L){C(L)||L.execCommand("selectAll")},r.selectBetweenBrackets=function(L){if(!C(L))return t.Pass};function I(L){return L?/\bpunctuation\b/.test(L)?L:void 0:null}r.goToBracket=function(L){L.extendSelectionsBy(function(B){var z=L.scanForBracket(B.head,1,I(L.getTokenTypeAt(B.head)));if(z&&t.cmpPos(z.pos,B.head)!=0)return z.pos;var q=L.scanForBracket(B.head,-1,I(L.getTokenTypeAt(o(B.head.line,B.head.ch+1))));return q&&o(q.pos.line,q.pos.ch+1)||B.head})},r.swapLineUp=function(L){if(L.isReadOnly())return t.Pass;for(var B=L.listSelections(),z=[],q=L.firstLine()-1,Z=[],ae=0;ae<B.length;ae++){var ce=B[ae],ee=ce.from().line-1,ue=ce.to().line;Z.push({anchor:o(ce.anchor.line-1,ce.anchor.ch),head:o(ce.head.line-1,ce.head.ch)}),ce.to().ch==0&&!ce.empty()&&--ue,ee>q?z.push(ee,ue):z.length&&(z[z.length-1]=ue),q=ue}L.operation(function(){for(var le=0;le<z.length;le+=2){var w=z[le],p=z[le+1],J=L.getLine(w);L.replaceRange("",o(w,0),o(w+1,0),"+swapLine"),p>L.lastLine()?L.replaceRange(`
`+J,o(L.lastLine()),null,"+swapLine"):L.replaceRange(J+`
`,o(p,0),null,"+swapLine")}L.setSelections(Z),L.scrollIntoView()})},r.swapLineDown=function(L){if(L.isReadOnly())return t.Pass;for(var B=L.listSelections(),z=[],q=L.lastLine()+1,Z=B.length-1;Z>=0;Z--){var ae=B[Z],ce=ae.to().line+1,ee=ae.from().line;ae.to().ch==0&&!ae.empty()&&ce--,ce<q?z.push(ce,ee):z.length&&(z[z.length-1]=ee),q=ee}L.operation(function(){for(var ue=z.length-2;ue>=0;ue-=2){var le=z[ue],w=z[ue+1],p=L.getLine(le);le==L.lastLine()?L.replaceRange("",o(le-1),o(le),"+swapLine"):L.replaceRange("",o(le,0),o(le+1,0),"+swapLine"),L.replaceRange(p+`
`,o(w,0),null,"+swapLine")}L.scrollIntoView()})},r.toggleCommentIndented=function(L){L.toggleComment({indent:!0})},r.joinLines=function(L){for(var B=L.listSelections(),z=[],q=0;q<B.length;q++){for(var Z=B[q],ae=Z.from(),ce=ae.line,ee=Z.to().line;q<B.length-1&&B[q+1].from().line==ee;)ee=B[++q].to().line;z.push({start:ce,end:ee,anchor:!Z.empty()&&ae})}L.operation(function(){for(var ue=0,le=[],w=0;w<z.length;w++){for(var p=z[w],J=p.anchor&&o(p.anchor.line-ue,p.anchor.ch),E,ge=p.start;ge<=p.end;ge++){var ke=ge-ue;ge==p.end&&(E=o(ke,L.getLine(ke).length+1)),ke<L.lastLine()&&(L.replaceRange(" ",o(ke),o(ke+1,/^\s*/.exec(L.getLine(ke+1))[0].length)),++ue)}le.push({anchor:J||E,head:E})}L.setSelections(le,0)})},r.duplicateLine=function(L){L.operation(function(){for(var B=L.listSelections().length,z=0;z<B;z++){var q=L.listSelections()[z];q.empty()?L.replaceRange(L.getLine(q.head.line)+`
`,o(q.head.line,0)):L.replaceRange(L.getRange(q.from(),q.to()),q.from())}L.scrollIntoView()})};function O(L,B,z){if(L.isReadOnly())return t.Pass;for(var q=L.listSelections(),Z=[],ae,ce=0;ce<q.length;ce++){var ee=q[ce];if(!ee.empty()){for(var ue=ee.from().line,le=ee.to().line;ce<q.length-1&&q[ce+1].from().line==le;)le=q[++ce].to().line;q[ce].to().ch||le--,Z.push(ue,le)}}Z.length?ae=!0:Z.push(L.firstLine(),L.lastLine()),L.operation(function(){for(var w=[],p=0;p<Z.length;p+=2){var J=Z[p],E=Z[p+1],ge=o(J,0),ke=o(E),Se=L.getRange(ge,ke,!1);B?Se.sort(function(de,ye){return de<ye?-z:de==ye?0:z}):Se.sort(function(de,ye){var Re=de.toUpperCase(),we=ye.toUpperCase();return Re!=we&&(de=Re,ye=we),de<ye?-z:de==ye?0:z}),L.replaceRange(Se,ge,ke),ae&&w.push({anchor:ge,head:o(E+1,0)})}ae&&L.setSelections(w,0)})}r.sortLines=function(L){O(L,!0,1)},r.reverseSortLines=function(L){O(L,!0,-1)},r.sortLinesInsensitive=function(L){O(L,!1,1)},r.reverseSortLinesInsensitive=function(L){O(L,!1,-1)},r.nextBookmark=function(L){var B=L.state.sublimeBookmarks;if(B)for(;B.length;){var z=B.shift(),q=z.find();if(q)return B.push(z),L.setSelection(q.from,q.to)}},r.prevBookmark=function(L){var B=L.state.sublimeBookmarks;if(B)for(;B.length;){B.unshift(B.pop());var z=B[B.length-1].find();if(!z)B.pop();else return L.setSelection(z.from,z.to)}},r.toggleBookmark=function(L){for(var B=L.listSelections(),z=L.state.sublimeBookmarks||(L.state.sublimeBookmarks=[]),q=0;q<B.length;q++){for(var Z=B[q].from(),ae=B[q].to(),ce=B[q].empty()?L.findMarksAt(Z):L.findMarks(Z,ae),ee=0;ee<ce.length;ee++)if(ce[ee].sublimeBookmark){ce[ee].clear();for(var ue=0;ue<z.length;ue++)z[ue]==ce[ee]&&z.splice(ue--,1);break}ee==ce.length&&z.push(L.markText(Z,ae,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},r.clearBookmarks=function(L){var B=L.state.sublimeBookmarks;if(B)for(var z=0;z<B.length;z++)B[z].clear();B.length=0},r.selectBookmarks=function(L){var B=L.state.sublimeBookmarks,z=[];if(B)for(var q=0;q<B.length;q++){var Z=B[q].find();Z?z.push({anchor:Z.from,head:Z.to}):B.splice(q--,0)}z.length&&L.setSelections(z,0)};function U(L,B){L.operation(function(){for(var z=L.listSelections(),q=[],Z=[],ae=0;ae<z.length;ae++){var ce=z[ae];ce.empty()?(q.push(ae),Z.push("")):Z.push(B(L.getRange(ce.from(),ce.to())))}L.replaceSelections(Z,"around","case");for(var ae=q.length-1,ee;ae>=0;ae--){var ce=z[q[ae]];if(!(ee&&t.cmpPos(ce.head,ee)>0)){var ue=m(L,ce.head);ee=ue.from,L.replaceRange(B(ue.word),ue.from,ue.to)}}})}r.smartBackspace=function(L){if(L.somethingSelected())return t.Pass;L.operation(function(){for(var B=L.listSelections(),z=L.getOption("indentUnit"),q=B.length-1;q>=0;q--){var Z=B[q].head,ae=L.getRange({line:Z.line,ch:0},Z),ce=t.countColumn(ae,null,L.getOption("tabSize")),ee=L.findPosH(Z,-1,"char",!1);if(ae&&!/\S/.test(ae)&&ce%z==0){var ue=new o(Z.line,t.findColumn(ae,ce-z,z));ue.ch!=Z.ch&&(ee=ue)}L.replaceRange("",ee,Z,"+delete")}})},r.delLineRight=function(L){L.operation(function(){for(var B=L.listSelections(),z=B.length-1;z>=0;z--)L.replaceRange("",B[z].anchor,o(B[z].to().line),"+delete");L.scrollIntoView()})},r.upcaseAtCursor=function(L){U(L,function(B){return B.toUpperCase()})},r.downcaseAtCursor=function(L){U(L,function(B){return B.toLowerCase()})},r.setSublimeMark=function(L){L.state.sublimeMark&&L.state.sublimeMark.clear(),L.state.sublimeMark=L.setBookmark(L.getCursor())},r.selectToSublimeMark=function(L){var B=L.state.sublimeMark&&L.state.sublimeMark.find();B&&L.setSelection(L.getCursor(),B)},r.deleteToSublimeMark=function(L){var B=L.state.sublimeMark&&L.state.sublimeMark.find();if(B){var z=L.getCursor(),q=B;if(t.cmpPos(z,q)>0){var Z=q;q=z,z=Z}L.state.sublimeKilled=L.getRange(z,q),L.replaceRange("",z,q)}},r.swapWithSublimeMark=function(L){var B=L.state.sublimeMark&&L.state.sublimeMark.find();B&&(L.state.sublimeMark.clear(),L.state.sublimeMark=L.setBookmark(L.getCursor()),L.setCursor(B))},r.sublimeYank=function(L){L.state.sublimeKilled!=null&&L.replaceSelection(L.state.sublimeKilled,null,"paste")},r.showInCenter=function(L){var B=L.cursorCoords(null,"local");L.scrollTo(null,(B.top+B.bottom)/2-L.getScrollInfo().clientHeight/2)};function H(L){var B=L.getCursor("from"),z=L.getCursor("to");if(t.cmpPos(B,z)==0){var q=m(L,B);if(!q.word)return;B=q.from,z=q.to}return{from:B,to:z,query:L.getRange(B,z),word:q}}function P(L,B){var z=H(L);if(!!z){var q=z.query,Z=L.getSearchCursor(q,B?z.to:z.from);(B?Z.findNext():Z.findPrevious())?L.setSelection(Z.from(),Z.to()):(Z=L.getSearchCursor(q,B?o(L.firstLine(),0):L.clipPos(o(L.lastLine()))),(B?Z.findNext():Z.findPrevious())?L.setSelection(Z.from(),Z.to()):z.word&&L.setSelection(z.from,z.to))}}r.findUnder=function(L){P(L,!0)},r.findUnderPrevious=function(L){P(L,!1)},r.findAllUnder=function(L){var B=H(L);if(!!B){for(var z=L.getSearchCursor(B.query),q=[],Z=-1;z.findNext();)q.push({anchor:z.from(),head:z.to()}),z.from().line<=B.from.line&&z.from().ch<=B.from.ch&&Z++;L.setSelections(q,Z)}};var A=t.keyMap;A.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},t.normalizeKeyMap(A.macSublime),A.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},t.normalizeKeyMap(A.pcSublime);var F=A.default==A.macDefault;A.sublime=F?A.macSublime:A.pcSublime})})();(function(s,e){(function(t){t(Zl.exports)})(function(t){t.defineMode("javascript",function(r,o){var l=r.indentUnit,c=o.statementIndent,h=o.jsonld,m=o.json||h,y=o.trackScope!==!1,b=o.typescript,M=o.wordCharacters||/[\w$\xa1-\uffff]/,C=function(){function se(pr){return{type:pr,style:"keyword"}}var _e=se("keyword a"),Ge=se("keyword b"),Ke=se("keyword c"),It=se("keyword d"),Zt=se("operator"),ct={type:"atom",style:"atom"};return{if:se("if"),while:_e,with:_e,else:Ge,do:Ge,try:Ge,finally:Ge,return:It,break:It,continue:It,new:se("new"),delete:Ke,void:Ke,throw:Ke,debugger:se("debugger"),var:se("var"),const:se("var"),let:se("var"),function:se("function"),catch:se("catch"),for:se("for"),switch:se("switch"),case:se("case"),default:se("default"),in:Zt,typeof:Zt,instanceof:Zt,true:ct,false:ct,null:ct,undefined:ct,NaN:ct,Infinity:ct,this:se("this"),class:se("class"),super:se("atom"),yield:Ke,export:se("export"),import:se("import"),extends:Ke,await:Ke}}(),I=/[+\-*&%=<>!?|~^@]/,O=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function U(se){for(var _e=!1,Ge,Ke=!1;(Ge=se.next())!=null;){if(!_e){if(Ge=="/"&&!Ke)return;Ge=="["?Ke=!0:Ke&&Ge=="]"&&(Ke=!1)}_e=!_e&&Ge=="\\"}}var H,P;function A(se,_e,Ge){return H=se,P=Ge,_e}function F(se,_e){var Ge=se.next();if(Ge=='"'||Ge=="'")return _e.tokenize=L(Ge),_e.tokenize(se,_e);if(Ge=="."&&se.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(Ge=="."&&se.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ge))return A(Ge);if(Ge=="="&&se.eat(">"))return A("=>","operator");if(Ge=="0"&&se.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(Ge))return se.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(Ge=="/")return se.eat("*")?(_e.tokenize=B,B(se,_e)):se.eat("/")?(se.skipToEnd(),A("comment","comment")):qe(se,_e,1)?(U(se),se.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(se.eat("="),A("operator","operator",se.current()));if(Ge=="`")return _e.tokenize=z,z(se,_e);if(Ge=="#"&&se.peek()=="!")return se.skipToEnd(),A("meta","meta");if(Ge=="#"&&se.eatWhile(M))return A("variable","property");if(Ge=="<"&&se.match("!--")||Ge=="-"&&se.match("->")&&!/\S/.test(se.string.slice(0,se.start)))return se.skipToEnd(),A("comment","comment");if(I.test(Ge))return(Ge!=">"||!_e.lexical||_e.lexical.type!=">")&&(se.eat("=")?(Ge=="!"||Ge=="=")&&se.eat("="):/[<>*+\-|&?]/.test(Ge)&&(se.eat(Ge),Ge==">"&&se.eat(Ge))),Ge=="?"&&se.eat(".")?A("."):A("operator","operator",se.current());if(M.test(Ge)){se.eatWhile(M);var Ke=se.current();if(_e.lastType!="."){if(C.propertyIsEnumerable(Ke)){var It=C[Ke];return A(It.type,It.style,Ke)}if(Ke=="async"&&se.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",Ke)}return A("variable","variable",Ke)}}function L(se){return function(_e,Ge){var Ke=!1,It;if(h&&_e.peek()=="@"&&_e.match(O))return Ge.tokenize=F,A("jsonld-keyword","meta");for(;(It=_e.next())!=null&&!(It==se&&!Ke);)Ke=!Ke&&It=="\\";return Ke||(Ge.tokenize=F),A("string","string")}}function B(se,_e){for(var Ge=!1,Ke;Ke=se.next();){if(Ke=="/"&&Ge){_e.tokenize=F;break}Ge=Ke=="*"}return A("comment","comment")}function z(se,_e){for(var Ge=!1,Ke;(Ke=se.next())!=null;){if(!Ge&&(Ke=="`"||Ke=="$"&&se.eat("{"))){_e.tokenize=F;break}Ge=!Ge&&Ke=="\\"}return A("quasi","string-2",se.current())}var q="([{}])";function Z(se,_e){_e.fatArrowAt&&(_e.fatArrowAt=null);var Ge=se.string.indexOf("=>",se.start);if(!(Ge<0)){if(b){var Ke=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(se.string.slice(se.start,Ge));Ke&&(Ge=Ke.index)}for(var It=0,Zt=!1,ct=Ge-1;ct>=0;--ct){var pr=se.string.charAt(ct),ni=q.indexOf(pr);if(ni>=0&&ni<3){if(!It){++ct;break}if(--It==0){pr=="("&&(Zt=!0);break}}else if(ni>=3&&ni<6)++It;else if(M.test(pr))Zt=!0;else if(/["'\/`]/.test(pr))for(;;--ct){if(ct==0)return;var ko=se.string.charAt(ct-1);if(ko==pr&&se.string.charAt(ct-2)!="\\"){ct--;break}}else if(Zt&&!It){++ct;break}}Zt&&!It&&(_e.fatArrowAt=ct)}}var ae={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ce(se,_e,Ge,Ke,It,Zt){this.indented=se,this.column=_e,this.type=Ge,this.prev=It,this.info=Zt,Ke!=null&&(this.align=Ke)}function ee(se,_e){if(!y)return!1;for(var Ge=se.localVars;Ge;Ge=Ge.next)if(Ge.name==_e)return!0;for(var Ke=se.context;Ke;Ke=Ke.prev)for(var Ge=Ke.vars;Ge;Ge=Ge.next)if(Ge.name==_e)return!0}function ue(se,_e,Ge,Ke,It){var Zt=se.cc;for(le.state=se,le.stream=It,le.marked=null,le.cc=Zt,le.style=_e,se.lexical.hasOwnProperty("align")||(se.lexical.align=!0);;){var ct=Zt.length?Zt.pop():m?Ve:ze;if(ct(Ge,Ke)){for(;Zt.length&&Zt[Zt.length-1].lex;)Zt.pop()();return le.marked?le.marked:Ge=="variable"&&ee(se,Ke)?"variable-2":_e}}}var le={state:null,column:null,marked:null,cc:null};function w(){for(var se=arguments.length-1;se>=0;se--)le.cc.push(arguments[se])}function p(){return w.apply(null,arguments),!0}function J(se,_e){for(var Ge=_e;Ge;Ge=Ge.next)if(Ge.name==se)return!0;return!1}function E(se){var _e=le.state;if(le.marked="def",!!y){if(_e.context){if(_e.lexical.info=="var"&&_e.context&&_e.context.block){var Ge=ge(se,_e.context);if(Ge!=null){_e.context=Ge;return}}else if(!J(se,_e.localVars)){_e.localVars=new de(se,_e.localVars);return}}o.globalVars&&!J(se,_e.globalVars)&&(_e.globalVars=new de(se,_e.globalVars))}}function ge(se,_e){if(_e)if(_e.block){var Ge=ge(se,_e.prev);return Ge?Ge==_e.prev?_e:new Se(Ge,_e.vars,!0):null}else return J(se,_e.vars)?_e:new Se(_e.prev,new de(se,_e.vars),!1);else return null}function ke(se){return se=="public"||se=="private"||se=="protected"||se=="abstract"||se=="readonly"}function Se(se,_e,Ge){this.prev=se,this.vars=_e,this.block=Ge}function de(se,_e){this.name=se,this.next=_e}var ye=new de("this",new de("arguments",null));function Re(){le.state.context=new Se(le.state.context,le.state.localVars,!1),le.state.localVars=ye}function we(){le.state.context=new Se(le.state.context,le.state.localVars,!0),le.state.localVars=null}Re.lex=we.lex=!0;function be(){le.state.localVars=le.state.context.vars,le.state.context=le.state.context.prev}be.lex=!0;function Ue(se,_e){var Ge=function(){var Ke=le.state,It=Ke.indented;if(Ke.lexical.type=="stat")It=Ke.lexical.indented;else for(var Zt=Ke.lexical;Zt&&Zt.type==")"&&Zt.align;Zt=Zt.prev)It=Zt.indented;Ke.lexical=new ce(It,le.stream.column(),se,null,Ke.lexical,_e)};return Ge.lex=!0,Ge}function Ce(){var se=le.state;se.lexical.prev&&(se.lexical.type==")"&&(se.indented=se.lexical.indented),se.lexical=se.lexical.prev)}Ce.lex=!0;function $e(se){function _e(Ge){return Ge==se?p():se==";"||Ge=="}"||Ge==")"||Ge=="]"?w():p(_e)}return _e}function ze(se,_e){return se=="var"?p(Ue("vardef",_e),bn,$e(";"),Ce):se=="keyword a"?p(Ue("form"),Be,ze,Ce):se=="keyword b"?p(Ue("form"),ze,Ce):se=="keyword d"?le.stream.match(/^\s*$/,!1)?p():p(Ue("stat"),De,$e(";"),Ce):se=="debugger"?p($e(";")):se=="{"?p(Ue("}"),we,V,Ce,be):se==";"?p():se=="if"?(le.state.lexical.info=="else"&&le.state.cc[le.state.cc.length-1]==Ce&&le.state.cc.pop()(),p(Ue("form"),Be,ze,Ce,Oe)):se=="function"?p(xt):se=="for"?p(Ue("form"),we,Pe,ze,be,Ce):se=="class"||b&&_e=="interface"?(le.marked="keyword",p(Ue("form",se=="class"?se:_e),Xt,Ce)):se=="variable"?b&&_e=="declare"?(le.marked="keyword",p(ze)):b&&(_e=="module"||_e=="enum"||_e=="type")&&le.stream.match(/^\s*\w/,!1)?(le.marked="keyword",_e=="enum"?p(Sr):_e=="type"?p(Rt,$e("operator"),ie,$e(";")):p(Ue("form"),tn,$e("{"),Ue("}"),V,Ce,Ce)):b&&_e=="namespace"?(le.marked="keyword",p(Ue("form"),Ve,ze,Ce)):b&&_e=="abstract"?(le.marked="keyword",p(ze)):p(Ue("stat"),f):se=="switch"?p(Ue("form"),Be,$e("{"),Ue("}","switch"),we,V,Ce,Ce,be):se=="case"?p(Ve,$e(":")):se=="default"?p($e(":")):se=="catch"?p(Ue("form"),Re,W,ze,Ce,be):se=="export"?p(Ue("stat"),Yt,Ce):se=="import"?p(Ue("stat"),Gt,Ce):se=="async"?p(ze):_e=="@"?p(Ve,ze):w(Ue("stat"),Ve,$e(";"),Ce)}function W(se){if(se=="(")return p(Ft,$e(")"))}function Ve(se,_e){return Ye(se,_e,!1)}function Le(se,_e){return Ye(se,_e,!0)}function Be(se){return se!="("?w():p(Ue(")"),De,$e(")"),Ce)}function Ye(se,_e,Ge){if(le.state.fatArrowAt==le.stream.start){var Ke=Ge?X:Nt;if(se=="(")return p(Re,Ue(")"),k(Ft,")"),Ce,$e("=>"),Ke,be);if(se=="variable")return w(Re,tn,$e("=>"),Ke,be)}var It=Ge?yt:oe;return ae.hasOwnProperty(se)?p(It):se=="function"?p(xt,It):se=="class"||b&&_e=="interface"?(le.marked="keyword",p(Ue("form"),jt,Ce)):se=="keyword c"||se=="async"?p(Ge?Le:Ve):se=="("?p(Ue(")"),De,$e(")"),Ce,It):se=="operator"||se=="spread"?p(Ge?Le:Ve):se=="["?p(Ue("]"),Pt,Ce,It):se=="{"?D(v,"}",null,It):se=="quasi"?w(j,It):se=="new"?p(n(Ge)):p()}function De(se){return se.match(/[;\}\)\],]/)?w():w(Ve)}function oe(se,_e){return se==","?p(De):yt(se,_e,!1)}function yt(se,_e,Ge){var Ke=Ge==!1?oe:yt,It=Ge==!1?Ve:Le;if(se=="=>")return p(Re,Ge?X:Nt,be);if(se=="operator")return/\+\+|--/.test(_e)||b&&_e=="!"?p(Ke):b&&_e=="<"&&le.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?p(Ue(">"),k(ie,">"),Ce,Ke):_e=="?"?p(Ve,$e(":"),It):p(It);if(se=="quasi")return w(j,Ke);if(se!=";"){if(se=="(")return D(Le,")","call",Ke);if(se==".")return p(g,Ke);if(se=="[")return p(Ue("]"),De,$e("]"),Ce,Ke);if(b&&_e=="as")return le.marked="keyword",p(ie,Ke);if(se=="regexp")return le.state.lastType=le.marked="operator",le.stream.backUp(le.stream.pos-le.stream.start-1),p(It)}}function j(se,_e){return se!="quasi"?w():_e.slice(_e.length-2)!="${"?p(j):p(De,et)}function et(se){if(se=="}")return le.marked="string-2",le.state.tokenize=z,p(j)}function Nt(se){return Z(le.stream,le.state),w(se=="{"?ze:Ve)}function X(se){return Z(le.stream,le.state),w(se=="{"?ze:Le)}function n(se){return function(_e){return _e=="."?p(se?a:i):_e=="variable"&&b?p(wt,se?yt:oe):w(se?Le:Ve)}}function i(se,_e){if(_e=="target")return le.marked="keyword",p(oe)}function a(se,_e){if(_e=="target")return le.marked="keyword",p(yt)}function f(se){return se==":"?p(Ce,ze):w(oe,$e(";"),Ce)}function g(se){if(se=="variable")return le.marked="property",p()}function v(se,_e){if(se=="async")return le.marked="property",p(v);if(se=="variable"||le.style=="keyword"){if(le.marked="property",_e=="get"||_e=="set")return p(S);var Ge;return b&&le.state.fatArrowAt==le.stream.start&&(Ge=le.stream.match(/^\s*:\s*/,!1))&&(le.state.fatArrowAt=le.stream.pos+Ge[0].length),p(R)}else{if(se=="number"||se=="string")return le.marked=h?"property":le.style+" property",p(R);if(se=="jsonld-keyword")return p(R);if(b&&ke(_e))return le.marked="keyword",p(v);if(se=="[")return p(Ve,G,$e("]"),R);if(se=="spread")return p(Le,R);if(_e=="*")return le.marked="keyword",p(v);if(se==":")return w(R)}}function S(se){return se!="variable"?w(R):(le.marked="property",p(xt))}function R(se){if(se==":")return p(Le);if(se=="(")return w(xt)}function k(se,_e,Ge){function Ke(It,Zt){if(Ge?Ge.indexOf(It)>-1:It==","){var ct=le.state.lexical;return ct.info=="call"&&(ct.pos=(ct.pos||0)+1),p(function(pr,ni){return pr==_e||ni==_e?w():w(se)},Ke)}return It==_e||Zt==_e?p():Ge&&Ge.indexOf(";")>-1?w(se):p($e(_e))}return function(It,Zt){return It==_e||Zt==_e?p():w(se,Ke)}}function D(se,_e,Ge){for(var Ke=3;Ke<arguments.length;Ke++)le.cc.push(arguments[Ke]);return p(Ue(_e,Ge),k(se,_e),Ce)}function V(se){return se=="}"?p():w(ze,V)}function G(se,_e){if(b){if(se==":")return p(ie);if(_e=="?")return p(G)}}function K(se,_e){if(b&&(se==":"||_e=="in"))return p(ie)}function Q(se){if(b&&se==":")return le.stream.match(/^\s*\w+\s+is\b/,!1)?p(Ve,ne,ie):p(ie)}function ne(se,_e){if(_e=="is")return le.marked="keyword",p()}function ie(se,_e){if(_e=="keyof"||_e=="typeof"||_e=="infer"||_e=="readonly")return le.marked="keyword",p(_e=="typeof"?Le:ie);if(se=="variable"||_e=="void")return le.marked="type",p(at);if(_e=="|"||_e=="&")return p(ie);if(se=="string"||se=="number"||se=="atom")return p(at);if(se=="[")return p(Ue("]"),k(ie,"]",","),Ce,at);if(se=="{")return p(Ue("}"),me,Ce,at);if(se=="(")return p(k(mt,")"),fe,at);if(se=="<")return p(k(ie,">"),ie);if(se=="quasi")return w(Xe,at)}function fe(se){if(se=="=>")return p(ie)}function me(se){return se.match(/[\}\)\]]/)?p():se==","||se==";"?p(me):w(Ie,me)}function Ie(se,_e){if(se=="variable"||le.style=="keyword")return le.marked="property",p(Ie);if(_e=="?"||se=="number"||se=="string")return p(Ie);if(se==":")return p(ie);if(se=="[")return p($e("variable"),K,$e("]"),Ie);if(se=="(")return w(Et,Ie);if(!se.match(/[;\}\)\],]/))return p()}function Xe(se,_e){return se!="quasi"?w():_e.slice(_e.length-2)!="${"?p(Xe):p(ie,Fe)}function Fe(se){if(se=="}")return le.marked="string-2",le.state.tokenize=z,p(Xe)}function mt(se,_e){return se=="variable"&&le.stream.match(/^\s*[?:]/,!1)||_e=="?"?p(mt):se==":"?p(ie):se=="spread"?p(mt):w(ie)}function at(se,_e){if(_e=="<")return p(Ue(">"),k(ie,">"),Ce,at);if(_e=="|"||se=="."||_e=="&")return p(ie);if(se=="[")return p(ie,$e("]"),at);if(_e=="extends"||_e=="implements")return le.marked="keyword",p(ie);if(_e=="?")return p(ie,$e(":"),ie)}function wt(se,_e){if(_e=="<")return p(Ue(">"),k(ie,">"),Ce,at)}function gt(){return w(ie,pt)}function pt(se,_e){if(_e=="=")return p(ie)}function bn(se,_e){return _e=="enum"?(le.marked="keyword",p(Sr)):w(tn,G,pe,Te)}function tn(se,_e){if(b&&ke(_e))return le.marked="keyword",p(tn);if(se=="variable")return E(_e),p();if(se=="spread")return p(tn);if(se=="[")return D(mn,"]");if(se=="{")return D(Sn,"}")}function Sn(se,_e){return se=="variable"&&!le.stream.match(/^\s*:/,!1)?(E(_e),p(pe)):(se=="variable"&&(le.marked="property"),se=="spread"?p(tn):se=="}"?w():se=="["?p(Ve,$e("]"),$e(":"),Sn):p($e(":"),tn,pe))}function mn(){return w(tn,pe)}function pe(se,_e){if(_e=="=")return p(Le)}function Te(se){if(se==",")return p(bn)}function Oe(se,_e){if(se=="keyword b"&&_e=="else")return p(Ue("form","else"),ze,Ce)}function Pe(se,_e){if(_e=="await")return p(Pe);if(se=="(")return p(Ue(")"),He,Ce)}function He(se){return se=="var"?p(bn,Ae):se=="variable"?p(Ae):w(Ae)}function Ae(se,_e){return se==")"?p():se==";"?p(Ae):_e=="in"||_e=="of"?(le.marked="keyword",p(Ve,Ae)):w(Ve,Ae)}function xt(se,_e){if(_e=="*")return le.marked="keyword",p(xt);if(se=="variable")return E(_e),p(xt);if(se=="(")return p(Re,Ue(")"),k(Ft,")"),Ce,Q,ze,be);if(b&&_e=="<")return p(Ue(">"),k(gt,">"),Ce,xt)}function Et(se,_e){if(_e=="*")return le.marked="keyword",p(Et);if(se=="variable")return E(_e),p(Et);if(se=="(")return p(Re,Ue(")"),k(Ft,")"),Ce,Q,be);if(b&&_e=="<")return p(Ue(">"),k(gt,">"),Ce,Et)}function Rt(se,_e){if(se=="keyword"||se=="variable")return le.marked="type",p(Rt);if(_e=="<")return p(Ue(">"),k(gt,">"),Ce)}function Ft(se,_e){return _e=="@"&&p(Ve,Ft),se=="spread"?p(Ft):b&&ke(_e)?(le.marked="keyword",p(Ft)):b&&se=="this"?p(G,pe):w(tn,G,pe)}function jt(se,_e){return se=="variable"?Xt(se,_e):nn(se,_e)}function Xt(se,_e){if(se=="variable")return E(_e),p(nn)}function nn(se,_e){if(_e=="<")return p(Ue(">"),k(gt,">"),Ce,nn);if(_e=="extends"||_e=="implements"||b&&se==",")return _e=="implements"&&(le.marked="keyword"),p(b?ie:Ve,nn);if(se=="{")return p(Ue("}"),Kn,Ce)}function Kn(se,_e){if(se=="async"||se=="variable"&&(_e=="static"||_e=="get"||_e=="set"||b&&ke(_e))&&le.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return le.marked="keyword",p(Kn);if(se=="variable"||le.style=="keyword")return le.marked="property",p(Vn,Kn);if(se=="number"||se=="string")return p(Vn,Kn);if(se=="[")return p(Ve,G,$e("]"),Vn,Kn);if(_e=="*")return le.marked="keyword",p(Kn);if(b&&se=="(")return w(Et,Kn);if(se==";"||se==",")return p(Kn);if(se=="}")return p();if(_e=="@")return p(Ve,Kn)}function Vn(se,_e){if(_e=="!"||_e=="?")return p(Vn);if(se==":")return p(ie,pe);if(_e=="=")return p(Le);var Ge=le.state.lexical.prev,Ke=Ge&&Ge.info=="interface";return w(Ke?Et:xt)}function Yt(se,_e){return _e=="*"?(le.marked="keyword",p(Mn,$e(";"))):_e=="default"?(le.marked="keyword",p(Ve,$e(";"))):se=="{"?p(k(wr,"}"),Mn,$e(";")):w(ze)}function wr(se,_e){if(_e=="as")return le.marked="keyword",p($e("variable"));if(se=="variable")return w(Le,wr)}function Gt(se){return se=="string"?p():se=="("?w(Ve):se=="."?w(oe):w(lt,kr,Mn)}function lt(se,_e){return se=="{"?D(lt,"}"):(se=="variable"&&E(_e),_e=="*"&&(le.marked="keyword"),p(br))}function kr(se){if(se==",")return p(lt,kr)}function br(se,_e){if(_e=="as")return le.marked="keyword",p(lt)}function Mn(se,_e){if(_e=="from")return le.marked="keyword",p(Ve)}function Pt(se){return se=="]"?p():w(k(Le,"]"))}function Sr(){return w(Ue("form"),tn,$e("{"),Ue("}"),k(Zn,"}"),Ce,Ce)}function Zn(){return w(tn,pe)}function za(se,_e){return se.lastType=="operator"||se.lastType==","||I.test(_e.charAt(0))||/[,.]/.test(_e.charAt(0))}function qe(se,_e,Ge){return _e.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(_e.lastType)||_e.lastType=="quasi"&&/\{\s*$/.test(se.string.slice(0,se.pos-(Ge||0)))}return{startState:function(se){var _e={tokenize:F,lastType:"sof",cc:[],lexical:new ce((se||0)-l,0,"block",!1),localVars:o.localVars,context:o.localVars&&new Se(null,null,!1),indented:se||0};return o.globalVars&&typeof o.globalVars=="object"&&(_e.globalVars=o.globalVars),_e},token:function(se,_e){if(se.sol()&&(_e.lexical.hasOwnProperty("align")||(_e.lexical.align=!1),_e.indented=se.indentation(),Z(se,_e)),_e.tokenize!=B&&se.eatSpace())return null;var Ge=_e.tokenize(se,_e);return H=="comment"?Ge:(_e.lastType=H=="operator"&&(P=="++"||P=="--")?"incdec":H,ue(_e,Ge,H,P,se))},indent:function(se,_e){if(se.tokenize==B||se.tokenize==z)return t.Pass;if(se.tokenize!=F)return 0;var Ge=_e&&_e.charAt(0),Ke=se.lexical,It;if(!/^\s*else\b/.test(_e))for(var Zt=se.cc.length-1;Zt>=0;--Zt){var ct=se.cc[Zt];if(ct==Ce)Ke=Ke.prev;else if(ct!=Oe&&ct!=be)break}for(;(Ke.type=="stat"||Ke.type=="form")&&(Ge=="}"||(It=se.cc[se.cc.length-1])&&(It==oe||It==yt)&&!/^[,\.=+\-*:?[\(]/.test(_e));)Ke=Ke.prev;c&&Ke.type==")"&&Ke.prev.type=="stat"&&(Ke=Ke.prev);var pr=Ke.type,ni=Ge==pr;return pr=="vardef"?Ke.indented+(se.lastType=="operator"||se.lastType==","?Ke.info.length+1:0):pr=="form"&&Ge=="{"?Ke.indented:pr=="form"?Ke.indented+l:pr=="stat"?Ke.indented+(za(se,_e)?c||l:0):Ke.info=="switch"&&!ni&&o.doubleIndentSwitch!=!1?Ke.indented+(/^(?:case|default)\b/.test(_e)?l:2*l):Ke.align?Ke.column+(ni?0:1):Ke.indented+(ni?0:l)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:h,jsonMode:m,expressionAllowed:qe,skipExpression:function(se){ue(se,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var fd={},OH=iH(IH),E2=OH.jsx;function Jg(){return Jg=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Jg.apply(this,arguments)}function hd(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hd=function(t){return typeof t}:hd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(s)}var A2=function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)l.hasOwnProperty(c)&&(o[c]=l[c])},s(t,r)};return function(e,t){s(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(fd,"__esModule",{value:!0});fd.UnControlled=NH=fd.Controlled=void 0;var C2=ld.exports,Hi=typeof navigator=="undefined",Ws;Hi||(Ws=Zl.exports);var Z1=function(){function s(){}return s.equals=function(e,t){var r=this,o=Object.keys,l=hd(e),c=hd(t);return e&&t&&l==="object"&&l===c?o(e).length===o(t).length&&o(e).every(function(h){return r.equals(e[h],t[h])}):e===t},s}(),R2=function(){function s(e,t){this.editor=e,this.props=t}return s.prototype.delegateCursor=function(e,t,r){var o=this.editor.getDoc();r&&this.editor.focus(),t?o.setCursor(e):o.setCursor(e,null,{scroll:!1})},s.prototype.delegateScroll=function(e){this.editor.scrollTo(e.x,e.y)},s.prototype.delegateSelection=function(e,t){var r=this.editor.getDoc();r.setSelections(e),t&&this.editor.focus()},s.prototype.apply=function(e){e&&e.selection&&e.selection.ranges&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),e&&e.cursor&&this.delegateCursor(e.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1),e&&e.scroll&&this.delegateScroll(e.scroll)},s.prototype.applyNext=function(e,t,r){e&&e.selection&&e.selection.ranges&&t&&t.selection&&t.selection.ranges&&!Z1.equals(e.selection.ranges,t.selection.ranges)&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),e&&e.cursor&&t&&t.cursor&&!Z1.equals(e.cursor,t.cursor)&&this.delegateCursor(r.cursor||t.cursor,t.autoScroll||!1,t.autoCursor||!1),e&&e.scroll&&t&&t.scroll&&!Z1.equals(e.scroll,t.scroll)&&this.delegateScroll(t.scroll)},s.prototype.applyUserDefined=function(e,t){t&&t.cursor&&this.delegateCursor(t.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1)},s.prototype.wire=function(e){var t=this;Object.keys(e||{}).filter(function(r){return/^on/.test(r)}).forEach(function(r){switch(r){case"onBlur":t.editor.on("blur",function(o,l){t.props.onBlur(t.editor,l)});break;case"onContextMenu":{t.editor.on("contextmenu",function(o,l){t.props.onContextMenu(t.editor,l)});break}case"onCopy":{t.editor.on("copy",function(o,l){t.props.onCopy(t.editor,l)});break}case"onCursor":t.editor.on("cursorActivity",function(o){t.props.onCursor(t.editor,t.editor.getDoc().getCursor())});break;case"onCursorActivity":t.editor.on("cursorActivity",function(o){t.props.onCursorActivity(t.editor)});break;case"onCut":{t.editor.on("cut",function(o,l){t.props.onCut(t.editor,l)});break}case"onDblClick":{t.editor.on("dblclick",function(o,l){t.props.onDblClick(t.editor,l)});break}case"onDragEnter":t.editor.on("dragenter",function(o,l){t.props.onDragEnter(t.editor,l)});break;case"onDragLeave":{t.editor.on("dragleave",function(o,l){t.props.onDragLeave(t.editor,l)});break}case"onDragOver":t.editor.on("dragover",function(o,l){t.props.onDragOver(t.editor,l)});break;case"onDragStart":{t.editor.on("dragstart",function(o,l){t.props.onDragStart(t.editor,l)});break}case"onDrop":t.editor.on("drop",function(o,l){t.props.onDrop(t.editor,l)});break;case"onFocus":t.editor.on("focus",function(o,l){t.props.onFocus(t.editor,l)});break;case"onGutterClick":t.editor.on("gutterClick",function(o,l,c,h){t.props.onGutterClick(t.editor,l,c,h)});break;case"onInputRead":t.editor.on("inputRead",function(o,l){t.props.onInputRead(t.editor,l)});break;case"onKeyDown":t.editor.on("keydown",function(o,l){t.props.onKeyDown(t.editor,l)});break;case"onKeyHandled":t.editor.on("keyHandled",function(o,l,c){t.props.onKeyHandled(t.editor,l,c)});break;case"onKeyPress":t.editor.on("keypress",function(o,l){t.props.onKeyPress(t.editor,l)});break;case"onKeyUp":t.editor.on("keyup",function(o,l){t.props.onKeyUp(t.editor,l)});break;case"onMouseDown":{t.editor.on("mousedown",function(o,l){t.props.onMouseDown(t.editor,l)});break}case"onPaste":{t.editor.on("paste",function(o,l){t.props.onPaste(t.editor,l)});break}case"onRenderLine":{t.editor.on("renderLine",function(o,l,c){t.props.onRenderLine(t.editor,l,c)});break}case"onScroll":t.editor.on("scroll",function(o){t.props.onScroll(t.editor,t.editor.getScrollInfo())});break;case"onSelection":t.editor.on("beforeSelectionChange",function(o,l){t.props.onSelection(t.editor,l)});break;case"onTouchStart":{t.editor.on("touchstart",function(o,l){t.props.onTouchStart(t.editor,l)});break}case"onUpdate":t.editor.on("update",function(o){t.props.onUpdate(t.editor)});break;case"onViewportChange":t.editor.on("viewportChange",function(o,l,c){t.props.onViewportChange(t.editor,l,c)});break}})},s}(),DH=function(s){A2(e,s);function e(t){var r=s.call(this,t)||this;return Hi||(r.applied=!1,r.appliedNext=!1,r.appliedUserDefined=!1,r.deferred=null,r.emulating=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=Jg({},Ws.defaults,this.editor.options,o),c=Object.keys(l).some(function(h){return r.editor.getOption(h)!==l[h]});c&&Object.keys(l).forEach(function(h){o.hasOwnProperty(h)&&r.editor.getOption(h)!==l[h]&&(r.editor.setOption(h,l[h]),r.mirror.setOption(h,l[h]))}),this.hydrated||(this.deferred?this.resolveChange(t.value):this.initChange(t.value||"")),this.hydrated=!0},e.prototype.initChange=function(t){this.emulating=!0;var r=this.editor.getDoc(),o=r.lastLine(),l=r.getLine(r.lastLine()).length;r.replaceRange(t||"",{line:0,ch:0},{line:o,ch:l}),this.mirror.setValue(t),r.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},e.prototype.resolveChange=function(t){this.emulating=!0;var r=this.editor.getDoc();if(this.deferred.origin==="undo"?r.undo():this.deferred.origin==="redo"?r.redo():r.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),t&&t!==r.getValue()){var o=r.getCursor();r.setValue(t),r.setCursor(o)}this.emulating=!1,this.deferred=null},e.prototype.mirrorChange=function(t){var r=this.editor.getDoc();return t.origin==="undo"?(r.setHistory(this.mirror.getHistory()),this.mirror.undo()):t.origin==="redo"?(r.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(t.text,t.from,t.to,t.origin),this.mirror.getValue()},e.prototype.componentDidMount=function(){var t=this;Hi||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&Ws.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=Ws(this.ref,this.props.options),this.shared=new R2(this.editor,this.props),this.mirror=Ws(function(){},this.props.options),this.editor.on("electricInput",function(){t.mirror.setHistory(t.editor.getDoc().getHistory())}),this.editor.on("cursorActivity",function(){t.mirror.setCursor(t.editor.getDoc().getCursor())}),this.editor.on("beforeChange",function(r,o){if(!t.emulating){o.cancel(),t.deferred=o;var l=t.mirrorChange(t.deferred);t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,t.deferred,l)}}),this.editor.on("change",function(r,o){!t.mounted||t.props.onChange&&t.props.onChange(t.editor,o,t.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(!Hi){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1),!this.props.autoCursor&&this.props.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(t,this.props,r),this.appliedNext=!0),this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0}},e.prototype.componentWillUnmount=function(){Hi||this.props.editorWillUnmount&&this.props.editorWillUnmount(Ws)},e.prototype.shouldComponentUpdate=function(t,r){return!Hi},e.prototype.render=function(){var t=this;if(Hi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return E2("div",{className:r,ref:function(l){return t.ref=l}})},e}(C2.Component),NH=fd.Controlled=DH,FH=function(s){A2(e,s);function e(t){var r=s.call(this,t)||this;return Hi||(r.applied=!1,r.appliedUserDefined=!1,r.continueChange=!1,r.detached=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1,r.onBeforeChangeCb=function(){r.continueChange=!0}),r}return e.prototype.hydrate=function(t){var r=this,o=t&&t.options?t.options:{},l=Jg({},Ws.defaults,this.editor.options,o),c=Object.keys(l).some(function(b){return r.editor.getOption(b)!==l[b]});if(c&&Object.keys(l).forEach(function(b){o.hasOwnProperty(b)&&r.editor.getOption(b)!==l[b]&&r.editor.setOption(b,l[b])}),!this.hydrated){var h=this.editor.getDoc(),m=h.lastLine(),y=h.getLine(h.lastLine()).length;h.replaceRange(t.value||"",{line:0,ch:0},{line:m,ch:y})}this.hydrated=!0},e.prototype.componentDidMount=function(){var t=this;Hi||(this.detached=this.props.detach===!0,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&Ws.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=Ws(this.ref,this.props.options),this.shared=new R2(this.editor,this.props),this.editor.on("beforeChange",function(r,o){t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,o,t.editor.getValue(),t.onBeforeChangeCb)}),this.editor.on("change",function(r,o){!t.mounted||!t.props.onChange||(t.props.onBeforeChange?t.continueChange&&t.props.onChange(t.editor,o,t.editor.getValue()):t.props.onChange(t.editor,o,t.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentDidUpdate=function(t){if(this.detached&&this.props.detach===!1&&(this.detached=!1,t.editorDidAttach&&t.editorDidAttach(this.editor)),!this.detached&&this.props.detach===!0&&(this.detached=!0,t.editorDidDetach&&t.editorDidDetach(this.editor)),!(Hi||this.detached)){var r={cursor:null};this.props.value!==t.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),!t.autoCursor&&t.autoCursor!==void 0&&(r.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(t),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(t,r),this.appliedUserDefined=!0)}},e.prototype.componentWillUnmount=function(){Hi||this.props.editorWillUnmount&&this.props.editorWillUnmount(Ws)},e.prototype.shouldComponentUpdate=function(t,r){var o=!0;return Hi&&(o=!1),this.detached&&t.detach&&(o=!1),o},e.prototype.render=function(){var t=this;if(Hi)return null;var r=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return E2("div",{className:r,ref:function(l){return t.ref=l}})},e}(C2.Component);fd.UnControlled=FH;var L2={exports:{}},rs={},I2={exports:{}},P2={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){var e,t,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();s.unstable_now=function(){return c.now()-h}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var m=null,y=null,b=function(){if(m!==null)try{var de=s.unstable_now();m(!0,de),m=null}catch(ye){throw setTimeout(b,0),ye}};e=function(de){m!==null?setTimeout(e,0,de):(m=de,setTimeout(b,0))},t=function(de,ye){y=setTimeout(de,ye)},r=function(){clearTimeout(y)},s.unstable_shouldYield=function(){return!1},o=s.unstable_forceFrameRate=function(){}}else{var M=window.setTimeout,C=window.clearTimeout;if(typeof console!="undefined"){var I=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof I!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var O=!1,U=null,H=-1,P=5,A=0;s.unstable_shouldYield=function(){return s.unstable_now()>=A},o=function(){},s.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<de?Math.floor(1e3/de):5};var F=new MessageChannel,L=F.port2;F.port1.onmessage=function(){if(U!==null){var de=s.unstable_now();A=de+P;try{U(!0,de)?L.postMessage(null):(O=!1,U=null)}catch(ye){throw L.postMessage(null),ye}}else O=!1},e=function(de){U=de,O||(O=!0,L.postMessage(null))},t=function(de,ye){H=M(function(){de(s.unstable_now())},ye)},r=function(){C(H),H=-1}}function B(de,ye){var Re=de.length;de.push(ye);e:for(;;){var we=Re-1>>>1,be=de[we];if(be!==void 0&&0<Z(be,ye))de[we]=ye,de[Re]=be,Re=we;else break e}}function z(de){return de=de[0],de===void 0?null:de}function q(de){var ye=de[0];if(ye!==void 0){var Re=de.pop();if(Re!==ye){de[0]=Re;e:for(var we=0,be=de.length;we<be;){var Ue=2*(we+1)-1,Ce=de[Ue],$e=Ue+1,ze=de[$e];if(Ce!==void 0&&0>Z(Ce,Re))ze!==void 0&&0>Z(ze,Ce)?(de[we]=ze,de[$e]=Re,we=$e):(de[we]=Ce,de[Ue]=Re,we=Ue);else if(ze!==void 0&&0>Z(ze,Re))de[we]=ze,de[$e]=Re,we=$e;else break e}}return ye}return null}function Z(de,ye){var Re=de.sortIndex-ye.sortIndex;return Re!==0?Re:de.id-ye.id}var ae=[],ce=[],ee=1,ue=null,le=3,w=!1,p=!1,J=!1;function E(de){for(var ye=z(ce);ye!==null;){if(ye.callback===null)q(ce);else if(ye.startTime<=de)q(ce),ye.sortIndex=ye.expirationTime,B(ae,ye);else break;ye=z(ce)}}function ge(de){if(J=!1,E(de),!p)if(z(ae)!==null)p=!0,e(ke);else{var ye=z(ce);ye!==null&&t(ge,ye.startTime-de)}}function ke(de,ye){p=!1,J&&(J=!1,r()),w=!0;var Re=le;try{for(E(ye),ue=z(ae);ue!==null&&(!(ue.expirationTime>ye)||de&&!s.unstable_shouldYield());){var we=ue.callback;if(typeof we=="function"){ue.callback=null,le=ue.priorityLevel;var be=we(ue.expirationTime<=ye);ye=s.unstable_now(),typeof be=="function"?ue.callback=be:ue===z(ae)&&q(ae),E(ye)}else q(ae);ue=z(ae)}if(ue!==null)var Ue=!0;else{var Ce=z(ce);Ce!==null&&t(ge,Ce.startTime-ye),Ue=!1}return Ue}finally{ue=null,le=Re,w=!1}}var Se=o;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(de){de.callback=null},s.unstable_continueExecution=function(){p||w||(p=!0,e(ke))},s.unstable_getCurrentPriorityLevel=function(){return le},s.unstable_getFirstCallbackNode=function(){return z(ae)},s.unstable_next=function(de){switch(le){case 1:case 2:case 3:var ye=3;break;default:ye=le}var Re=le;le=ye;try{return de()}finally{le=Re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=Se,s.unstable_runWithPriority=function(de,ye){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Re=le;le=de;try{return ye()}finally{le=Re}},s.unstable_scheduleCallback=function(de,ye,Re){var we=s.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?we+Re:we):Re=we,de){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Re+be,de={id:ee++,callback:ye,priorityLevel:de,startTime:Re,expirationTime:be,sortIndex:-1},Re>we?(de.sortIndex=Re,B(ce,de),z(ae)===null&&de===z(ce)&&(J?r():J=!0,t(ge,Re-we))):(de.sortIndex=be,B(ae,de),p||w||(p=!0,e(ke))),de},s.unstable_wrapCallback=function(de){var ye=le;return function(){var Re=le;le=ye;try{return de.apply(this,arguments)}finally{le=Re}}}})(P2);I2.exports=P2;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0=ld.exports,Bn=a2,Ir=I2.exports;function tt(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!e0)throw Error(tt(227));var k2=new Set,dd={};function Ql(s,e){Kc(s,e),Kc(s+"Capture",e)}function Kc(s,e){for(dd[s]=e,s=0;s<e.length;s++)k2.add(e[s])}var Ao=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),BH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O2=Object.prototype.hasOwnProperty,D2={},N2={};function UH(s){return O2.call(N2,s)?!0:O2.call(D2,s)?!1:BH.test(s)?N2[s]=!0:(D2[s]=!0,!1)}function zH(s,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function HH(s,e,t,r){if(e===null||typeof e=="undefined"||zH(s,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hi(s,e,t,r,o,l,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=l,this.removeEmptyString=c}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Gr[s]=new hi(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Gr[e]=new hi(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Gr[s]=new hi(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Gr[s]=new hi(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Gr[s]=new hi(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Gr[s]=new hi(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Gr[s]=new hi(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Gr[s]=new hi(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Gr[s]=new hi(s,5,!1,s.toLowerCase(),null,!1,!1)});var Q1=/[\-:]([a-z])/g;function J1(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(Q1,J1);Gr[e]=new hi(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(Q1,J1);Gr[e]=new hi(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(Q1,J1);Gr[e]=new hi(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Gr[s]=new hi(s,1,!1,s.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Gr[s]=new hi(s,1,!1,s.toLowerCase(),null,!0,!0)});function e_(s,e,t,r){var o=Gr.hasOwnProperty(e)?Gr[e]:null,l=o!==null?o.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");l||(HH(e,t,o,r)&&(t=null),r||o===null?UH(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):o.mustUseProperty?s[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?s.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?s.setAttributeNS(r,e,t):s.setAttribute(e,t))))}var Jl=e0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=60103,eu=60106,_a=60107,t_=60108,md=60114,n_=60109,r_=60110,t0=60112,gd=60113,n0=60120,r0=60115,i_=60116,s_=60121,o_=60128,F2=60129,a_=60130,l_=60131;if(typeof Symbol=="function"&&Symbol.for){var Pr=Symbol.for;pd=Pr("react.element"),eu=Pr("react.portal"),_a=Pr("react.fragment"),t_=Pr("react.strict_mode"),md=Pr("react.profiler"),n_=Pr("react.provider"),r_=Pr("react.context"),t0=Pr("react.forward_ref"),gd=Pr("react.suspense"),n0=Pr("react.suspense_list"),r0=Pr("react.memo"),i_=Pr("react.lazy"),s_=Pr("react.block"),Pr("react.scope"),o_=Pr("react.opaque.id"),F2=Pr("react.debug_trace_mode"),a_=Pr("react.offscreen"),l_=Pr("react.legacy_hidden")}var B2=typeof Symbol=="function"&&Symbol.iterator;function vd(s){return s===null||typeof s!="object"?null:(s=B2&&s[B2]||s["@@iterator"],typeof s=="function"?s:null)}var u_;function yd(s){if(u_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);u_=e&&e[1]||""}return`
`+u_+s}var c_=!1;function i0(s,e){if(!s||c_)return"";c_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(s,[],e)}else{try{e.call()}catch(m){r=m}s.call(e.prototype)}else{try{throw Error()}catch(m){r=m}s()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=r.stack.split(`
`),c=o.length-1,h=l.length-1;1<=c&&0<=h&&o[c]!==l[h];)h--;for(;1<=c&&0<=h;c--,h--)if(o[c]!==l[h]){if(c!==1||h!==1)do if(c--,h--,0>h||o[c]!==l[h])return`
`+o[c].replace(" at new "," at ");while(1<=c&&0<=h);break}}}finally{c_=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?yd(s):""}function GH(s){switch(s.tag){case 5:return yd(s.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return s=i0(s.type,!1),s;case 11:return s=i0(s.type.render,!1),s;case 22:return s=i0(s.type._render,!1),s;case 1:return s=i0(s.type,!0),s;default:return""}}function Zc(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _a:return"Fragment";case eu:return"Portal";case md:return"Profiler";case t_:return"StrictMode";case gd:return"Suspense";case n0:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case r_:return(s.displayName||"Context")+".Consumer";case n_:return(s._context.displayName||"Context")+".Provider";case t0:var e=s.render;return e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case r0:return Zc(s.type);case s_:return Zc(s._render);case i_:e=s._payload,s=s._init;try{return Zc(s(e))}catch{}}return null}function wa(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function U2(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VH(s){var e=U2(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),r=""+s[e];if(!s.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,l=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return o.call(this)},set:function(c){r=""+c,l.call(this,c)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function s0(s){s._valueTracker||(s._valueTracker=VH(s))}function z2(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return s&&(r=U2(s)?s.checked?"true":"false":s.value),s=r,s!==t?(e.setValue(s),!0):!1}function o0(s){if(s=s||(typeof document!="undefined"?document:void 0),typeof s=="undefined")return null;try{return s.activeElement||s.body}catch{return s.body}}function f_(s,e){var t=e.checked;return Bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:s._wrapperState.initialChecked})}function H2(s,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=wa(e.value!=null?e.value:t),s._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G2(s,e){e=e.checked,e!=null&&e_(s,"checked",e,!1)}function h_(s,e){G2(s,e);var t=wa(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(r==="submit"||r==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?d_(s,e.type,t):e.hasOwnProperty("defaultValue")&&d_(s,e.type,wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function V2(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function d_(s,e,t){(e!=="number"||o0(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}function WH(s){var e="";return e0.Children.forEach(s,function(t){t!=null&&(e+=t)}),e}function p_(s,e){return s=Bn({children:void 0},e),(e=WH(e.children))&&(s.children=e),s}function Qc(s,e,t,r){if(s=s.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<s.length;t++)o=e.hasOwnProperty("$"+s[t].value),s[t].selected!==o&&(s[t].selected=o),o&&r&&(s[t].defaultSelected=!0)}else{for(t=""+wa(t),e=null,o=0;o<s.length;o++){if(s[o].value===t){s[o].selected=!0,r&&(s[o].defaultSelected=!0);return}e!==null||s[o].disabled||(e=s[o])}e!==null&&(e.selected=!0)}}function m_(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Bn({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function W2(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(tt(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(tt(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:wa(t)}}function $2(s,e){var t=wa(e.value),r=wa(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),r!=null&&(s.defaultValue=""+r)}function j2(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}var g_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function q2(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v_(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?q2(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var a0,X2=function(s){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return s(e,t,r,o)})}:s}(function(s,e){if(s.namespaceURI!==g_.svg||"innerHTML"in s)s.innerHTML=e;else{for(a0=a0||document.createElement("div"),a0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=a0.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function xd(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var _d={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$H=["Webkit","ms","Moz","O"];Object.keys(_d).forEach(function(s){$H.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),_d[e]=_d[s]})});function Y2(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_d.hasOwnProperty(s)&&_d[s]?(""+e).trim():e+"px"}function K2(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=Y2(t,e[t],r);t==="float"&&(t="cssFloat"),r?s.setProperty(t,o):s[t]=o}}var jH=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function y_(s,e){if(e){if(jH[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function x_(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function __(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var w_=null,Jc=null,ef=null;function Z2(s){if(s=Ud(s)){if(typeof w_!="function")throw Error(tt(280));var e=s.stateNode;e&&(e=T0(e),w_(s.stateNode,s.type,e))}}function Q2(s){Jc?ef?ef.push(s):ef=[s]:Jc=s}function J2(){if(Jc){var s=Jc,e=ef;if(ef=Jc=null,Z2(s),e)for(s=0;s<e.length;s++)Z2(e[s])}}function b_(s,e){return s(e)}function eR(s,e,t,r,o){return s(e,t,r,o)}function S_(){}var tR=b_,tu=!1,M_=!1;function T_(){(Jc!==null||ef!==null)&&(S_(),J2())}function qH(s,e,t){if(M_)return s(e,t);M_=!0;try{return tR(s,e,t)}finally{M_=!1,T_()}}function wd(s,e){var t=s.stateNode;if(t===null)return null;var r=T0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(s=s.type,r=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!r;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(tt(231,e,typeof t));return t}var E_=!1;if(Ao)try{var bd={};Object.defineProperty(bd,"passive",{get:function(){E_=!0}}),window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{E_=!1}function XH(s,e,t,r,o,l,c,h,m){var y=Array.prototype.slice.call(arguments,3);try{e.apply(t,y)}catch(b){this.onError(b)}}var Sd=!1,l0=null,u0=!1,A_=null,YH={onError:function(s){Sd=!0,l0=s}};function KH(s,e,t,r,o,l,c,h,m){Sd=!1,l0=null,XH.apply(YH,arguments)}function ZH(s,e,t,r,o,l,c,h,m){if(KH.apply(this,arguments),Sd){if(Sd){var y=l0;Sd=!1,l0=null}else throw Error(tt(198));u0||(u0=!0,A_=y)}}function nu(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,(e.flags&1026)!=0&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function nR(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function rR(s){if(nu(s)!==s)throw Error(tt(188))}function QH(s){var e=s.alternate;if(!e){if(e=nu(s),e===null)throw Error(tt(188));return e!==s?null:s}for(var t=s,r=e;;){var o=t.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===t)return rR(o),s;if(l===r)return rR(o),e;l=l.sibling}throw Error(tt(188))}if(t.return!==r.return)t=o,r=l;else{for(var c=!1,h=o.child;h;){if(h===t){c=!0,t=o,r=l;break}if(h===r){c=!0,r=o,t=l;break}h=h.sibling}if(!c){for(h=l.child;h;){if(h===t){c=!0,t=l,r=o;break}if(h===r){c=!0,r=l,t=o;break}h=h.sibling}if(!c)throw Error(tt(189))}}if(t.alternate!==r)throw Error(tt(190))}if(t.tag!==3)throw Error(tt(188));return t.stateNode.current===t?s:e}function iR(s){if(s=QH(s),!s)return null;for(var e=s;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===s)break;for(;!e.sibling;){if(!e.return||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function sR(s,e){for(var t=s.alternate;e!==null;){if(e===s||e===t)return!0;e=e.return}return!1}var oR,C_,aR,lR,R_=!1,$s=[],ba=null,Sa=null,Ma=null,Md=new Map,Td=new Map,Ed=[],uR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L_(s,e,t,r,o){return{blockedOn:s,domEventName:e,eventSystemFlags:t|16,nativeEvent:o,targetContainers:[r]}}function cR(s,e){switch(s){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function Ad(s,e,t,r,o,l){return s===null||s.nativeEvent!==l?(s=L_(e,t,r,o,l),e!==null&&(e=Ud(e),e!==null&&C_(e)),s):(s.eventSystemFlags|=r,e=s.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),s)}function JH(s,e,t,r,o){switch(e){case"focusin":return ba=Ad(ba,s,e,t,r,o),!0;case"dragenter":return Sa=Ad(Sa,s,e,t,r,o),!0;case"mouseover":return Ma=Ad(Ma,s,e,t,r,o),!0;case"pointerover":var l=o.pointerId;return Md.set(l,Ad(Md.get(l)||null,s,e,t,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Td.set(l,Ad(Td.get(l)||null,s,e,t,r,o)),!0}return!1}function e5(s){var e=ru(s.target);if(e!==null){var t=nu(e);if(t!==null){if(e=t.tag,e===13){if(e=nR(t),e!==null){s.blockedOn=e,lR(s.lanePriority,function(){Ir.unstable_runWithPriority(s.priority,function(){aR(t)})});return}}else if(e===3&&t.stateNode.hydrate){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function c0(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=N_(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t!==null)return e=Ud(t),e!==null&&C_(e),s.blockedOn=t,!1;e.shift()}return!0}function fR(s,e,t){c0(s)&&t.delete(e)}function t5(){for(R_=!1;0<$s.length;){var s=$s[0];if(s.blockedOn!==null){s=Ud(s.blockedOn),s!==null&&oR(s);break}for(var e=s.targetContainers;0<e.length;){var t=N_(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t!==null){s.blockedOn=t;break}e.shift()}s.blockedOn===null&&$s.shift()}ba!==null&&c0(ba)&&(ba=null),Sa!==null&&c0(Sa)&&(Sa=null),Ma!==null&&c0(Ma)&&(Ma=null),Md.forEach(fR),Td.forEach(fR)}function Cd(s,e){s.blockedOn===e&&(s.blockedOn=null,R_||(R_=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,t5)))}function hR(s){function e(o){return Cd(o,s)}if(0<$s.length){Cd($s[0],s);for(var t=1;t<$s.length;t++){var r=$s[t];r.blockedOn===s&&(r.blockedOn=null)}}for(ba!==null&&Cd(ba,s),Sa!==null&&Cd(Sa,s),Ma!==null&&Cd(Ma,s),Md.forEach(e),Td.forEach(e),t=0;t<Ed.length;t++)r=Ed[t],r.blockedOn===s&&(r.blockedOn=null);for(;0<Ed.length&&(t=Ed[0],t.blockedOn===null);)e5(t),t.blockedOn===null&&Ed.shift()}function f0(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var tf={animationend:f0("Animation","AnimationEnd"),animationiteration:f0("Animation","AnimationIteration"),animationstart:f0("Animation","AnimationStart"),transitionend:f0("Transition","TransitionEnd")},I_={},dR={};Ao&&(dR=document.createElement("div").style,"AnimationEvent"in window||(delete tf.animationend.animation,delete tf.animationiteration.animation,delete tf.animationstart.animation),"TransitionEvent"in window||delete tf.transitionend.transition);function h0(s){if(I_[s])return I_[s];if(!tf[s])return s;var e=tf[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in dR)return I_[s]=e[t];return s}var pR=h0("animationend"),mR=h0("animationiteration"),gR=h0("animationstart"),vR=h0("transitionend"),yR=new Map,P_=new Map,n5=["abort","abort",pR,"animationEnd",mR,"animationIteration",gR,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",vR,"transitionEnd","waiting","waiting"];function k_(s,e){for(var t=0;t<s.length;t+=2){var r=s[t],o=s[t+1];o="on"+(o[0].toUpperCase()+o.slice(1)),P_.set(r,e),yR.set(r,o),Ql(o,[r])}}var r5=Ir.unstable_now;r5();var An=8;function nf(s){if((1&s)!=0)return An=15,1;if((2&s)!=0)return An=14,2;if((4&s)!=0)return An=13,4;var e=24&s;return e!==0?(An=12,e):(s&32)!=0?(An=11,32):(e=192&s,e!==0?(An=10,e):(s&256)!=0?(An=9,256):(e=3584&s,e!==0?(An=8,e):(s&4096)!=0?(An=7,4096):(e=4186112&s,e!==0?(An=6,e):(e=62914560&s,e!==0?(An=5,e):s&67108864?(An=4,67108864):(s&134217728)!=0?(An=3,134217728):(e=805306368&s,e!==0?(An=2,e):(1073741824&s)!=0?(An=1,1073741824):(An=8,s))))))}function i5(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function s5(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(tt(358,s))}}function Rd(s,e){var t=s.pendingLanes;if(t===0)return An=0;var r=0,o=0,l=s.expiredLanes,c=s.suspendedLanes,h=s.pingedLanes;if(l!==0)r=l,o=An=15;else if(l=t&134217727,l!==0){var m=l&~c;m!==0?(r=nf(m),o=An):(h&=l,h!==0&&(r=nf(h),o=An))}else l=t&~c,l!==0?(r=nf(l),o=An):h!==0&&(r=nf(h),o=An);if(r===0)return 0;if(r=31-Ta(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&c)==0){if(nf(e),o<=An)return e;An=o}if(e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=r;0<e;)t=31-Ta(e),o=1<<t,r|=s[t],e&=~o;return r}function xR(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function d0(s,e){switch(s){case 15:return 1;case 14:return 2;case 12:return s=rf(24&~e),s===0?d0(10,e):s;case 10:return s=rf(192&~e),s===0?d0(8,e):s;case 8:return s=rf(3584&~e),s===0&&(s=rf(4186112&~e),s===0&&(s=512)),s;case 2:return e=rf(805306368&~e),e===0&&(e=268435456),e}throw Error(tt(358,s))}function rf(s){return s&-s}function O_(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function p0(s,e,t){s.pendingLanes|=e;var r=e-1;s.suspendedLanes&=r,s.pingedLanes&=r,s=s.eventTimes,e=31-Ta(e),s[e]=t}var Ta=Math.clz32?Math.clz32:l5,o5=Math.log,a5=Math.LN2;function l5(s){return s===0?32:31-(o5(s)/a5|0)|0}var u5=Ir.unstable_UserBlockingPriority,c5=Ir.unstable_runWithPriority,m0=!0;function f5(s,e,t,r){tu||S_();var o=D_,l=tu;tu=!0;try{eR(o,s,e,t,r)}finally{(tu=l)||T_()}}function h5(s,e,t,r){c5(u5,D_.bind(null,s,e,t,r))}function D_(s,e,t,r){if(m0){var o;if((o=(e&4)==0)&&0<$s.length&&-1<uR.indexOf(s))s=L_(null,s,e,t,r),$s.push(s);else{var l=N_(s,e,t,r);if(l===null)o&&cR(s,r);else{if(o){if(-1<uR.indexOf(s)){s=L_(l,s,e,t,r),$s.push(s);return}if(JH(l,s,e,t,r))return;cR(s,r)}YR(s,e,r,null,t)}}}}function N_(s,e,t,r){var o=__(r);if(o=ru(o),o!==null){var l=nu(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=nR(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.hydrate)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return YR(s,e,r,o,t),null}var Ea=null,F_=null,g0=null;function _R(){if(g0)return g0;var s,e=F_,t=e.length,r,o="value"in Ea?Ea.value:Ea.textContent,l=o.length;for(s=0;s<t&&e[s]===o[s];s++);var c=t-s;for(r=1;r<=c&&e[t-r]===o[l-r];r++);return g0=o.slice(s,1<r?1-r:void 0)}function v0(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function y0(){return!0}function wR(){return!1}function Gi(s){function e(t,r,o,l,c){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var h in s)s.hasOwnProperty(h)&&(t=s[h],this[h]=t?t(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?y0:wR,this.isPropagationStopped=wR,this}return Bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=y0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=y0)},persist:function(){},isPersistent:y0}),e}var sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B_=Gi(sf),Ld=Bn({},sf,{view:0,detail:0}),d5=Gi(Ld),U_,z_,Id,x0=Bn({},Ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G_,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Id&&(Id&&s.type==="mousemove"?(U_=s.screenX-Id.screenX,z_=s.screenY-Id.screenY):z_=U_=0,Id=s),U_)},movementY:function(s){return"movementY"in s?s.movementY:z_}}),bR=Gi(x0),p5=Bn({},x0,{dataTransfer:0}),m5=Gi(p5),g5=Bn({},Ld,{relatedTarget:0}),H_=Gi(g5),v5=Bn({},sf,{animationName:0,elapsedTime:0,pseudoElement:0}),y5=Gi(v5),x5=Bn({},sf,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_5=Gi(x5),w5=Bn({},sf,{data:0}),SR=Gi(w5),b5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T5(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=M5[s])?!!e[s]:!1}function G_(){return T5}var E5=Bn({},Ld,{key:function(s){if(s.key){var e=b5[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=v0(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?S5[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G_,charCode:function(s){return s.type==="keypress"?v0(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?v0(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),A5=Gi(E5),C5=Bn({},x0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MR=Gi(C5),R5=Bn({},Ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G_}),L5=Gi(R5),I5=Bn({},sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5=Gi(I5),k5=Bn({},x0,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),O5=Gi(k5),D5=[9,13,27,32],V_=Ao&&"CompositionEvent"in window,Pd=null;Ao&&"documentMode"in document&&(Pd=document.documentMode);var N5=Ao&&"TextEvent"in window&&!Pd,TR=Ao&&(!V_||Pd&&8<Pd&&11>=Pd),ER=String.fromCharCode(32),AR=!1;function CR(s,e){switch(s){case"keyup":return D5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RR(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var of=!1;function F5(s,e){switch(s){case"compositionend":return RR(e);case"keypress":return e.which!==32?null:(AR=!0,ER);case"textInput":return s=e.data,s===ER&&AR?null:s;default:return null}}function B5(s,e){if(of)return s==="compositionend"||!V_&&CR(s,e)?(s=_R(),g0=F_=Ea=null,of=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TR&&e.locale!=="ko"?null:e.data;default:return null}}var U5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LR(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!U5[s.type]:e==="textarea"}function IR(s,e,t,r){Q2(r),e=w0(e,"onChange"),0<e.length&&(t=new B_("onChange","change",null,t,r),s.push({event:t,listeners:e}))}var kd=null,Od=null;function z5(s){WR(s,0)}function _0(s){var e=ff(s);if(z2(e))return s}function H5(s,e){if(s==="change")return e}var PR=!1;if(Ao){var W_;if(Ao){var $_="oninput"in document;if(!$_){var kR=document.createElement("div");kR.setAttribute("oninput","return;"),$_=typeof kR.oninput=="function"}W_=$_}else W_=!1;PR=W_&&(!document.documentMode||9<document.documentMode)}function OR(){kd&&(kd.detachEvent("onpropertychange",DR),Od=kd=null)}function DR(s){if(s.propertyName==="value"&&_0(Od)){var e=[];if(IR(e,Od,s,__(s)),s=z5,tu)s(e);else{tu=!0;try{b_(s,e)}finally{tu=!1,T_()}}}}function G5(s,e,t){s==="focusin"?(OR(),kd=e,Od=t,kd.attachEvent("onpropertychange",DR)):s==="focusout"&&OR()}function V5(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return _0(Od)}function W5(s,e){if(s==="click")return _0(e)}function $5(s,e){if(s==="input"||s==="change")return _0(e)}function j5(s,e){return s===e&&(s!==0||1/s==1/e)||s!==s&&e!==e}var is=typeof Object.is=="function"?Object.is:j5,q5=Object.prototype.hasOwnProperty;function Dd(s,e){if(is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!q5.call(e,t[r])||!is(s[t[r]],e[t[r]]))return!1;return!0}function NR(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function FR(s,e){var t=NR(s);s=0;for(var r;t;){if(t.nodeType===3){if(r=s+t.textContent.length,s<=e&&r>=e)return{node:t,offset:e-s};s=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=NR(t)}}function BR(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?BR(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function UR(){for(var s=window,e=o0();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=o0(s.document)}return e}function j_(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}var X5=Ao&&"documentMode"in document&&11>=document.documentMode,af=null,q_=null,Nd=null,X_=!1;function zR(s,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;X_||af==null||af!==o0(r)||(r=af,"selectionStart"in r&&j_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nd&&Dd(Nd,r)||(Nd=r,r=w0(q_,"onSelect"),0<r.length&&(e=new B_("onSelect","select",null,e,t),s.push({event:e,listeners:r}),e.target=af)))}k_("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);k_("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);k_(n5,2);for(var HR="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Y_=0;Y_<HR.length;Y_++)P_.set(HR[Y_],0);Kc("onMouseEnter",["mouseout","mouseover"]);Kc("onMouseLeave",["mouseout","mouseover"]);Kc("onPointerEnter",["pointerout","pointerover"]);Kc("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fd));function VR(s,e,t){var r=s.type||"unknown-event";s.currentTarget=t,ZH(r,e,void 0,s),s.currentTarget=null}function WR(s,e){e=(e&4)!=0;for(var t=0;t<s.length;t++){var r=s[t],o=r.event;r=r.listeners;e:{var l=void 0;if(e)for(var c=r.length-1;0<=c;c--){var h=r[c],m=h.instance,y=h.currentTarget;if(h=h.listener,m!==l&&o.isPropagationStopped())break e;VR(o,h,y),l=m}else for(c=0;c<r.length;c++){if(h=r[c],m=h.instance,y=h.currentTarget,h=h.listener,m!==l&&o.isPropagationStopped())break e;VR(o,h,y),l=m}}}if(u0)throw s=A_,u0=!1,A_=null,s}function Pn(s,e){var t=tL(e),r=s+"__bubble";t.has(r)||(XR(e,s,2,!1),t.add(r))}var $R="_reactListening"+Math.random().toString(36).slice(2);function jR(s){s[$R]||(s[$R]=!0,k2.forEach(function(e){GR.has(e)||qR(e,!1,s,null),qR(e,!0,s,null)}))}function qR(s,e,t,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,l=t;if(s==="selectionchange"&&t.nodeType!==9&&(l=t.ownerDocument),r!==null&&!e&&GR.has(s)){if(s!=="scroll")return;o|=2,l=r}var c=tL(l),h=s+"__"+(e?"capture":"bubble");c.has(h)||(e&&(o|=4),XR(l,s,o,e),c.add(h))}function XR(s,e,t,r){var o=P_.get(e);switch(o===void 0?2:o){case 0:o=f5;break;case 1:o=h5;break;default:o=D_}t=o.bind(null,e,t,s),o=void 0,!E_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?s.addEventListener(e,t,{capture:!0,passive:o}):s.addEventListener(e,t,!0):o!==void 0?s.addEventListener(e,t,{passive:o}):s.addEventListener(e,t,!1)}function YR(s,e,t,r,o){var l=r;if((e&1)==0&&(e&2)==0&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var h=r.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(c===4)for(c=r.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;c=c.return}for(;h!==null;){if(c=ru(h),c===null)return;if(m=c.tag,m===5||m===6){r=l=c;continue e}h=h.parentNode}}r=r.return}qH(function(){var y=l,b=__(t),M=[];e:{var C=yR.get(s);if(C!==void 0){var I=B_,O=s;switch(s){case"keypress":if(v0(t)===0)break e;case"keydown":case"keyup":I=A5;break;case"focusin":O="focus",I=H_;break;case"focusout":O="blur",I=H_;break;case"beforeblur":case"afterblur":I=H_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=bR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=m5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=L5;break;case pR:case mR:case gR:I=y5;break;case vR:I=P5;break;case"scroll":I=d5;break;case"wheel":I=O5;break;case"copy":case"cut":case"paste":I=_5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=MR}var U=(e&4)!=0,H=!U&&s==="scroll",P=U?C!==null?C+"Capture":null:C;U=[];for(var A=y,F;A!==null;){F=A;var L=F.stateNode;if(F.tag===5&&L!==null&&(F=L,P!==null&&(L=wd(A,P),L!=null&&U.push(Bd(A,L,F)))),H)break;A=A.return}0<U.length&&(C=new I(C,O,null,t,b),M.push({event:C,listeners:U}))}}if((e&7)==0){e:{if(C=s==="mouseover"||s==="pointerover",I=s==="mouseout"||s==="pointerout",C&&(e&16)==0&&(O=t.relatedTarget||t.fromElement)&&(ru(O)||O[cf]))break e;if((I||C)&&(C=b.window===b?b:(C=b.ownerDocument)?C.defaultView||C.parentWindow:window,I?(O=t.relatedTarget||t.toElement,I=y,O=O?ru(O):null,O!==null&&(H=nu(O),O!==H||O.tag!==5&&O.tag!==6)&&(O=null)):(I=null,O=y),I!==O)){if(U=bR,L="onMouseLeave",P="onMouseEnter",A="mouse",(s==="pointerout"||s==="pointerover")&&(U=MR,L="onPointerLeave",P="onPointerEnter",A="pointer"),H=I==null?C:ff(I),F=O==null?C:ff(O),C=new U(L,A+"leave",I,t,b),C.target=H,C.relatedTarget=F,L=null,ru(b)===y&&(U=new U(P,A+"enter",O,t,b),U.target=F,U.relatedTarget=H,L=U),H=L,I&&O)t:{for(U=I,P=O,A=0,F=U;F;F=lf(F))A++;for(F=0,L=P;L;L=lf(L))F++;for(;0<A-F;)U=lf(U),A--;for(;0<F-A;)P=lf(P),F--;for(;A--;){if(U===P||P!==null&&U===P.alternate)break t;U=lf(U),P=lf(P)}U=null}else U=null;I!==null&&KR(M,C,I,U,!1),O!==null&&H!==null&&KR(M,H,O,U,!0)}}e:{if(C=y?ff(y):window,I=C.nodeName&&C.nodeName.toLowerCase(),I==="select"||I==="input"&&C.type==="file")var B=H5;else if(LR(C))if(PR)B=$5;else{B=V5;var z=G5}else(I=C.nodeName)&&I.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(B=W5);if(B&&(B=B(s,y))){IR(M,B,t,b);break e}z&&z(s,C,y),s==="focusout"&&(z=C._wrapperState)&&z.controlled&&C.type==="number"&&d_(C,"number",C.value)}switch(z=y?ff(y):window,s){case"focusin":(LR(z)||z.contentEditable==="true")&&(af=z,q_=y,Nd=null);break;case"focusout":Nd=q_=af=null;break;case"mousedown":X_=!0;break;case"contextmenu":case"mouseup":case"dragend":X_=!1,zR(M,t,b);break;case"selectionchange":if(X5)break;case"keydown":case"keyup":zR(M,t,b)}var q;if(V_)e:{switch(s){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else of?CR(s,t)&&(Z="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(Z="onCompositionStart");Z&&(TR&&t.locale!=="ko"&&(of||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&of&&(q=_R()):(Ea=b,F_="value"in Ea?Ea.value:Ea.textContent,of=!0)),z=w0(y,Z),0<z.length&&(Z=new SR(Z,s,null,t,b),M.push({event:Z,listeners:z}),q?Z.data=q:(q=RR(t),q!==null&&(Z.data=q)))),(q=N5?F5(s,t):B5(s,t))&&(y=w0(y,"onBeforeInput"),0<y.length&&(b=new SR("onBeforeInput","beforeinput",null,t,b),M.push({event:b,listeners:y}),b.data=q))}WR(M,e)})}function Bd(s,e,t){return{instance:s,listener:e,currentTarget:t}}function w0(s,e){for(var t=e+"Capture",r=[];s!==null;){var o=s,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=wd(s,t),l!=null&&r.unshift(Bd(s,l,o)),l=wd(s,e),l!=null&&r.push(Bd(s,l,o))),s=s.return}return r}function lf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function KR(s,e,t,r,o){for(var l=e._reactName,c=[];t!==null&&t!==r;){var h=t,m=h.alternate,y=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&y!==null&&(h=y,o?(m=wd(t,l),m!=null&&c.unshift(Bd(t,m,h))):o||(m=wd(t,l),m!=null&&c.push(Bd(t,m,h)))),t=t.return}c.length!==0&&s.push({event:e,listeners:c})}function b0(){}var K_=null,Z_=null;function ZR(s,e){switch(s){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Q_(s,e){return s==="textarea"||s==="option"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var QR=typeof setTimeout=="function"?setTimeout:void 0,Y5=typeof clearTimeout=="function"?clearTimeout:void 0;function J_(s){s.nodeType===1?s.textContent="":s.nodeType===9&&(s=s.body,s!=null&&(s.textContent=""))}function uf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break}return s}function JR(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var ew=0;function K5(s){return{$$typeof:o_,toString:s,valueOf:s}}var S0=Math.random().toString(36).slice(2),Aa="__reactFiber$"+S0,M0="__reactProps$"+S0,cf="__reactContainer$"+S0,eL="__reactEvents$"+S0;function ru(s){var e=s[Aa];if(e)return e;for(var t=s.parentNode;t;){if(e=t[cf]||t[Aa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=JR(s);s!==null;){if(t=s[Aa])return t;s=JR(s)}return e}s=t,t=s.parentNode}return null}function Ud(s){return s=s[Aa]||s[cf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ff(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(tt(33))}function T0(s){return s[M0]||null}function tL(s){var e=s[eL];return e===void 0&&(e=s[eL]=new Set),e}var tw=[],hf=-1;function Ca(s){return{current:s}}function kn(s){0>hf||(s.current=tw[hf],tw[hf]=null,hf--)}function Xn(s,e){hf++,tw[hf]=s.current,s.current=e}var Ra={},Qr=Ca(Ra),Ei=Ca(!1),iu=Ra;function df(s,e){var t=s.type.contextTypes;if(!t)return Ra;var r=s.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in t)o[l]=e[l];return r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(s){return s=s.childContextTypes,s!=null}function E0(){kn(Ei),kn(Qr)}function nL(s,e,t){if(Qr.current!==Ra)throw Error(tt(168));Xn(Qr,e),Xn(Ei,t)}function rL(s,e,t){var r=s.stateNode;if(s=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in s))throw Error(tt(108,Zc(e)||"Unknown",o));return Bn({},t,r)}function A0(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ra,iu=Qr.current,Xn(Qr,s),Xn(Ei,Ei.current),!0}function iL(s,e,t){var r=s.stateNode;if(!r)throw Error(tt(169));t?(s=rL(s,e,iu),r.__reactInternalMemoizedMergedChildContext=s,kn(Ei),kn(Qr),Xn(Qr,s)):kn(Ei),Xn(Ei,t)}var nw=null,su=null,Z5=Ir.unstable_runWithPriority,rw=Ir.unstable_scheduleCallback,iw=Ir.unstable_cancelCallback,Q5=Ir.unstable_shouldYield,sL=Ir.unstable_requestPaint,sw=Ir.unstable_now,J5=Ir.unstable_getCurrentPriorityLevel,C0=Ir.unstable_ImmediatePriority,oL=Ir.unstable_UserBlockingPriority,aL=Ir.unstable_NormalPriority,lL=Ir.unstable_LowPriority,uL=Ir.unstable_IdlePriority,ow={},eG=sL!==void 0?sL:function(){},Co=null,R0=null,aw=!1,cL=sw(),Jr=1e4>cL?sw:function(){return sw()-cL};function pf(){switch(J5()){case C0:return 99;case oL:return 98;case aL:return 97;case lL:return 96;case uL:return 95;default:throw Error(tt(332))}}function fL(s){switch(s){case 99:return C0;case 98:return oL;case 97:return aL;case 96:return lL;case 95:return uL;default:throw Error(tt(332))}}function ou(s,e){return s=fL(s),Z5(s,e)}function zd(s,e,t){return s=fL(s),rw(s,e,t)}function js(){if(R0!==null){var s=R0;R0=null,iw(s)}hL()}function hL(){if(!aw&&Co!==null){aw=!0;var s=0;try{var e=Co;ou(99,function(){for(;s<e.length;s++){var t=e[s];do t=t(!0);while(t!==null)}}),Co=null}catch(t){throw Co!==null&&(Co=Co.slice(s+1)),rw(C0,js),t}finally{aw=!1}}}var tG=Jl.ReactCurrentBatchConfig;function bs(s,e){if(s&&s.defaultProps){e=Bn({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}var L0=Ca(null),I0=null,mf=null,P0=null;function lw(){P0=mf=I0=null}function uw(s){var e=L0.current;kn(L0),s.type._context._currentValue=e}function dL(s,e){for(;s!==null;){var t=s.alternate;if((s.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else s.childLanes|=e,t!==null&&(t.childLanes|=e);s=s.return}}function gf(s,e){I0=s,P0=mf=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&e)!=0&&(Ss=!0),s.firstContext=null)}function ss(s,e){if(P0!==s&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(P0=s,e=1073741823),e={context:s,observedBits:e,next:null},mf===null){if(I0===null)throw Error(tt(308));mf=e,I0.dependencies={lanes:0,firstContext:e,responders:null}}else mf=mf.next=e;return s._currentValue}var La=!1;function cw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pL(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ia(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(s,e){if(s=s.updateQueue,s!==null){s=s.shared;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}}function mL(s,e){var t=s.updateQueue,r=s.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,l=null;if(t=t.firstBaseUpdate,t!==null){do{var c={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};l===null?o=l=c:l=l.next=c,t=t.next}while(t!==null);l===null?o=l=e:l=l.next=e}else o=l=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function Hd(s,e,t,r){var o=s.updateQueue;La=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var m=h,y=m.next;m.next=null,c===null?l=y:c.next=y,c=m;var b=s.alternate;if(b!==null){b=b.updateQueue;var M=b.lastBaseUpdate;M!==c&&(M===null?b.firstBaseUpdate=y:M.next=y,b.lastBaseUpdate=m)}}if(l!==null){M=o.baseState,c=0,b=y=m=null;do{h=l.lane;var C=l.eventTime;if((r&h)===h){b!==null&&(b=b.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=s,O=l;switch(h=e,C=t,O.tag){case 1:if(I=O.payload,typeof I=="function"){M=I.call(C,M,h);break e}M=I;break e;case 3:I.flags=I.flags&-4097|64;case 0:if(I=O.payload,h=typeof I=="function"?I.call(C,M,h):I,h==null)break e;M=Bn({},M,h);break e;case 2:La=!0}}l.callback!==null&&(s.flags|=32,h=o.effects,h===null?o.effects=[l]:h.push(l))}else C={eventTime:C,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},b===null?(y=b=C,m=M):b=b.next=C,c|=h;if(l=l.next,l===null){if(h=o.shared.pending,h===null)break;l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);b===null&&(m=M),o.baseState=m,o.firstBaseUpdate=y,o.lastBaseUpdate=b,Jd|=c,s.lanes=c,s.memoizedState=M}}function gL(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var r=s[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(tt(191,o));o.call(r)}}}var vL=new e0.Component().refs;function k0(s,e,t,r){e=s.memoizedState,t=t(r,e),t=t==null?e:Bn({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var O0={isMounted:function(s){return(s=s._reactInternals)?nu(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var r=Vi(),o=Da(s),l=Ia(r,o);l.payload=e,t!=null&&(l.callback=t),Pa(s,l),Na(s,o,r)},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var r=Vi(),o=Da(s),l=Ia(r,o);l.tag=1,l.payload=e,t!=null&&(l.callback=t),Pa(s,l),Na(s,o,r)},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=Vi(),r=Da(s),o=Ia(t,r);o.tag=2,e!=null&&(o.callback=e),Pa(s,o),Na(s,r,t)}};function yL(s,e,t,r,o,l,c){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(r,l,c):e.prototype&&e.prototype.isPureReactComponent?!Dd(t,r)||!Dd(o,l):!0}function xL(s,e,t){var r=!1,o=Ra,l=e.contextType;return typeof l=="object"&&l!==null?l=ss(l):(o=Ai(e)?iu:Qr.current,r=e.contextTypes,l=(r=r!=null)?df(s,o):Ra),e=new e(t,l),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=O0,s.stateNode=e,e._reactInternals=s,r&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=l),e}function _L(s,e,t,r){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==s&&O0.enqueueReplaceState(e,e.state,null)}function fw(s,e,t,r){var o=s.stateNode;o.props=t,o.state=s.memoizedState,o.refs=vL,cw(s);var l=e.contextType;typeof l=="object"&&l!==null?o.context=ss(l):(l=Ai(e)?iu:Qr.current,o.context=df(s,l)),Hd(s,t,o,r),o.state=s.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(k0(s,e,l,t),o.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&O0.enqueueReplaceState(o,o.state,null),Hd(s,t,o,r),o.state=s.memoizedState),typeof o.componentDidMount=="function"&&(s.flags|=4)}var D0=Array.isArray;function Gd(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(tt(309));var r=t.stateNode}if(!r)throw Error(tt(147,s));var o=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=r.refs;c===vL&&(c=r.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof s!="string")throw Error(tt(284));if(!t._owner)throw Error(tt(290,s))}return s}function N0(s,e){if(s.type!=="textarea")throw Error(tt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function wL(s){function e(H,P){if(s){var A=H.lastEffect;A!==null?(A.nextEffect=P,H.lastEffect=P):H.firstEffect=H.lastEffect=P,P.nextEffect=null,P.flags=8}}function t(H,P){if(!s)return null;for(;P!==null;)e(H,P),P=P.sibling;return null}function r(H,P){for(H=new Map;P!==null;)P.key!==null?H.set(P.key,P):H.set(P.index,P),P=P.sibling;return H}function o(H,P){return H=Ua(H,P),H.index=0,H.sibling=null,H}function l(H,P,A){return H.index=A,s?(A=H.alternate,A!==null?(A=A.index,A<P?(H.flags=2,P):A):(H.flags=2,P)):P}function c(H){return s&&H.alternate===null&&(H.flags=2),H}function h(H,P,A,F){return P===null||P.tag!==6?(P=qw(A,H.mode,F),P.return=H,P):(P=o(P,A),P.return=H,P)}function m(H,P,A,F){return P!==null&&P.elementType===A.type?(F=o(P,A.props),F.ref=Gd(H,P,A),F.return=H,F):(F=ev(A.type,A.key,A.props,null,H.mode,F),F.ref=Gd(H,P,A),F.return=H,F)}function y(H,P,A,F){return P===null||P.tag!==4||P.stateNode.containerInfo!==A.containerInfo||P.stateNode.implementation!==A.implementation?(P=Xw(A,H.mode,F),P.return=H,P):(P=o(P,A.children||[]),P.return=H,P)}function b(H,P,A,F,L){return P===null||P.tag!==7?(P=Mf(A,H.mode,F,L),P.return=H,P):(P=o(P,A),P.return=H,P)}function M(H,P,A){if(typeof P=="string"||typeof P=="number")return P=qw(""+P,H.mode,A),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case pd:return A=ev(P.type,P.key,P.props,null,H.mode,A),A.ref=Gd(H,null,P),A.return=H,A;case eu:return P=Xw(P,H.mode,A),P.return=H,P}if(D0(P)||vd(P))return P=Mf(P,H.mode,A,null),P.return=H,P;N0(H,P)}return null}function C(H,P,A,F){var L=P!==null?P.key:null;if(typeof A=="string"||typeof A=="number")return L!==null?null:h(H,P,""+A,F);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case pd:return A.key===L?A.type===_a?b(H,P,A.props.children,F,L):m(H,P,A,F):null;case eu:return A.key===L?y(H,P,A,F):null}if(D0(A)||vd(A))return L!==null?null:b(H,P,A,F,null);N0(H,A)}return null}function I(H,P,A,F,L){if(typeof F=="string"||typeof F=="number")return H=H.get(A)||null,h(P,H,""+F,L);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case pd:return H=H.get(F.key===null?A:F.key)||null,F.type===_a?b(P,H,F.props.children,L,F.key):m(P,H,F,L);case eu:return H=H.get(F.key===null?A:F.key)||null,y(P,H,F,L)}if(D0(F)||vd(F))return H=H.get(A)||null,b(P,H,F,L,null);N0(P,F)}return null}function O(H,P,A,F){for(var L=null,B=null,z=P,q=P=0,Z=null;z!==null&&q<A.length;q++){z.index>q?(Z=z,z=null):Z=z.sibling;var ae=C(H,z,A[q],F);if(ae===null){z===null&&(z=Z);break}s&&z&&ae.alternate===null&&e(H,z),P=l(ae,P,q),B===null?L=ae:B.sibling=ae,B=ae,z=Z}if(q===A.length)return t(H,z),L;if(z===null){for(;q<A.length;q++)z=M(H,A[q],F),z!==null&&(P=l(z,P,q),B===null?L=z:B.sibling=z,B=z);return L}for(z=r(H,z);q<A.length;q++)Z=I(z,H,q,A[q],F),Z!==null&&(s&&Z.alternate!==null&&z.delete(Z.key===null?q:Z.key),P=l(Z,P,q),B===null?L=Z:B.sibling=Z,B=Z);return s&&z.forEach(function(ce){return e(H,ce)}),L}function U(H,P,A,F){var L=vd(A);if(typeof L!="function")throw Error(tt(150));if(A=L.call(A),A==null)throw Error(tt(151));for(var B=L=null,z=P,q=P=0,Z=null,ae=A.next();z!==null&&!ae.done;q++,ae=A.next()){z.index>q?(Z=z,z=null):Z=z.sibling;var ce=C(H,z,ae.value,F);if(ce===null){z===null&&(z=Z);break}s&&z&&ce.alternate===null&&e(H,z),P=l(ce,P,q),B===null?L=ce:B.sibling=ce,B=ce,z=Z}if(ae.done)return t(H,z),L;if(z===null){for(;!ae.done;q++,ae=A.next())ae=M(H,ae.value,F),ae!==null&&(P=l(ae,P,q),B===null?L=ae:B.sibling=ae,B=ae);return L}for(z=r(H,z);!ae.done;q++,ae=A.next())ae=I(z,H,q,ae.value,F),ae!==null&&(s&&ae.alternate!==null&&z.delete(ae.key===null?q:ae.key),P=l(ae,P,q),B===null?L=ae:B.sibling=ae,B=ae);return s&&z.forEach(function(ee){return e(H,ee)}),L}return function(H,P,A,F){var L=typeof A=="object"&&A!==null&&A.type===_a&&A.key===null;L&&(A=A.props.children);var B=typeof A=="object"&&A!==null;if(B)switch(A.$$typeof){case pd:e:{for(B=A.key,L=P;L!==null;){if(L.key===B){switch(L.tag){case 7:if(A.type===_a){t(H,L.sibling),P=o(L,A.props.children),P.return=H,H=P;break e}break;default:if(L.elementType===A.type){t(H,L.sibling),P=o(L,A.props),P.ref=Gd(H,L,A),P.return=H,H=P;break e}}t(H,L);break}else e(H,L);L=L.sibling}A.type===_a?(P=Mf(A.props.children,H.mode,F,A.key),P.return=H,H=P):(F=ev(A.type,A.key,A.props,null,H.mode,F),F.ref=Gd(H,P,A),F.return=H,H=F)}return c(H);case eu:e:{for(L=A.key;P!==null;){if(P.key===L)if(P.tag===4&&P.stateNode.containerInfo===A.containerInfo&&P.stateNode.implementation===A.implementation){t(H,P.sibling),P=o(P,A.children||[]),P.return=H,H=P;break e}else{t(H,P);break}else e(H,P);P=P.sibling}P=Xw(A,H.mode,F),P.return=H,H=P}return c(H)}if(typeof A=="string"||typeof A=="number")return A=""+A,P!==null&&P.tag===6?(t(H,P.sibling),P=o(P,A),P.return=H,H=P):(t(H,P),P=qw(A,H.mode,F),P.return=H,H=P),c(H);if(D0(A))return O(H,P,A,F);if(vd(A))return U(H,P,A,F);if(B&&N0(H,A),typeof A=="undefined"&&!L)switch(H.tag){case 1:case 22:case 0:case 11:case 15:throw Error(tt(152,Zc(H.type)||"Component"))}return t(H,P)}}var F0=wL(!0),bL=wL(!1),Vd={},qs=Ca(Vd),Wd=Ca(Vd),$d=Ca(Vd);function au(s){if(s===Vd)throw Error(tt(174));return s}function hw(s,e){switch(Xn($d,e),Xn(Wd,s),Xn(qs,Vd),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v_(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=v_(e,s)}kn(qs),Xn(qs,e)}function vf(){kn(qs),kn(Wd),kn($d)}function SL(s){au($d.current);var e=au(qs.current),t=v_(e,s.type);e!==t&&(Xn(Wd,s),Xn(qs,t))}function dw(s){Wd.current===s&&(kn(qs),kn(Wd))}var Yn=Ca(0);function B0(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ro=null,ka=null,Xs=!1;function ML(s,e){var t=ls(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=s,t.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=t,s.lastEffect=t):s.firstEffect=s.lastEffect=t}function TL(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function pw(s){if(Xs){var e=ka;if(e){var t=e;if(!TL(s,e)){if(e=uf(t.nextSibling),!e||!TL(s,e)){s.flags=s.flags&-1025|2,Xs=!1,Ro=s;return}ML(Ro,t)}Ro=s,ka=uf(e.firstChild)}else s.flags=s.flags&-1025|2,Xs=!1,Ro=s}}function EL(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ro=s}function U0(s){if(s!==Ro)return!1;if(!Xs)return EL(s),Xs=!0,!1;var e=s.type;if(s.tag!==5||e!=="head"&&e!=="body"&&!Q_(e,s.memoizedProps))for(e=ka;e;)ML(s,e),e=uf(e.nextSibling);if(EL(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){ka=uf(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}ka=null}}else ka=Ro?uf(s.stateNode.nextSibling):null;return!0}function mw(){ka=Ro=null,Xs=!1}var yf=[];function gw(){for(var s=0;s<yf.length;s++)yf[s]._workInProgressVersionPrimary=null;yf.length=0}var jd=Jl.ReactCurrentDispatcher,os=Jl.ReactCurrentBatchConfig,qd=0,ar=null,ei=null,Vr=null,z0=!1,Xd=!1;function Ci(){throw Error(tt(321))}function vw(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!is(s[t],e[t]))return!1;return!0}function yw(s,e,t,r,o,l){if(qd=l,ar=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jd.current=s===null||s.memoizedState===null?rG:iG,s=t(r,o),Xd){l=0;do{if(Xd=!1,!(25>l))throw Error(tt(301));l+=1,Vr=ei=null,e.updateQueue=null,jd.current=sG,s=t(r,o)}while(Xd)}if(jd.current=W0,e=ei!==null&&ei.next!==null,qd=0,Vr=ei=ar=null,z0=!1,e)throw Error(tt(300));return s}function lu(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?ar.memoizedState=Vr=s:Vr=Vr.next=s,Vr}function uu(){if(ei===null){var s=ar.alternate;s=s!==null?s.memoizedState:null}else s=ei.next;var e=Vr===null?ar.memoizedState:Vr.next;if(e!==null)Vr=e,ei=s;else{if(s===null)throw Error(tt(310));ei=s,s={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},Vr===null?ar.memoizedState=Vr=s:Vr=Vr.next=s}return Vr}function Ys(s,e){return typeof e=="function"?e(s):e}function Yd(s){var e=uu(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=s;var r=ei,o=r.baseQueue,l=t.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}r.baseQueue=o=l,t.pending=null}if(o!==null){o=o.next,r=r.baseState;var h=c=l=null,m=o;do{var y=m.lane;if((qd&y)===y)h!==null&&(h=h.next={lane:0,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),r=m.eagerReducer===s?m.eagerState:s(r,m.action);else{var b={lane:y,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null};h===null?(c=h=b,l=r):h=h.next=b,ar.lanes|=y,Jd|=y}m=m.next}while(m!==null&&m!==o);h===null?l=r:h.next=c,is(r,e.memoizedState)||(Ss=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=h,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function Kd(s){var e=uu(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=s;var r=t.dispatch,o=t.pending,l=e.memoizedState;if(o!==null){t.pending=null;var c=o=o.next;do l=s(l,c.action),c=c.next;while(c!==o);is(l,e.memoizedState)||(Ss=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),t.lastRenderedState=l}return[l,r]}function AL(s,e,t){var r=e._getVersion;r=r(e._source);var o=e._workInProgressVersionPrimary;if(o!==null?s=o===r:(s=s.mutableReadLanes,(s=(qd&s)===s)&&(e._workInProgressVersionPrimary=r,yf.push(e))),s)return t(e._source);throw yf.push(e),Error(tt(350))}function CL(s,e,t,r){var o=di;if(o===null)throw Error(tt(349));var l=e._getVersion,c=l(e._source),h=jd.current,m=h.useState(function(){return AL(o,e,t)}),y=m[1],b=m[0];m=Vr;var M=s.memoizedState,C=M.refs,I=C.getSnapshot,O=M.source;M=M.subscribe;var U=ar;return s.memoizedState={refs:C,source:e,subscribe:r},h.useEffect(function(){C.getSnapshot=t,C.setSnapshot=y;var H=l(e._source);if(!is(c,H)){H=t(e._source),is(b,H)||(y(H),H=Da(U),o.mutableReadLanes|=H&o.pendingLanes),H=o.mutableReadLanes,o.entangledLanes|=H;for(var P=o.entanglements,A=H;0<A;){var F=31-Ta(A),L=1<<F;P[F]|=H,A&=~L}}},[t,e,r]),h.useEffect(function(){return r(e._source,function(){var H=C.getSnapshot,P=C.setSnapshot;try{P(H(e._source));var A=Da(U);o.mutableReadLanes|=A&o.pendingLanes}catch(F){P(function(){throw F})}})},[e,r]),is(I,t)&&is(O,e)&&is(M,r)||(s={pending:null,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:b},s.dispatch=y=bw.bind(null,ar,s),m.queue=s,m.baseQueue=null,b=AL(o,e,t),m.memoizedState=m.baseState=b),b}function RL(s,e,t){var r=uu();return CL(r,s,e,t)}function Zd(s){var e=lu();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s=e.queue={pending:null,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:s},s=s.dispatch=bw.bind(null,ar,s),[e.memoizedState,s]}function H0(s,e,t,r){return s={tag:s,create:e,destroy:t,deps:r,next:null},e=ar.updateQueue,e===null?(e={lastEffect:null},ar.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(r=t.next,t.next=s,s.next=r,e.lastEffect=s)),s}function LL(s){var e=lu();return s={current:s},e.memoizedState=s}function G0(){return uu().memoizedState}function xw(s,e,t,r){var o=lu();ar.flags|=s,o.memoizedState=H0(1|e,t,void 0,r===void 0?null:r)}function _w(s,e,t,r){var o=uu();r=r===void 0?null:r;var l=void 0;if(ei!==null){var c=ei.memoizedState;if(l=c.destroy,r!==null&&vw(r,c.deps)){H0(e,t,l,r);return}}ar.flags|=s,o.memoizedState=H0(1|e,t,l,r)}function IL(s,e){return xw(516,4,s,e)}function V0(s,e){return _w(516,4,s,e)}function PL(s,e){return _w(4,2,s,e)}function kL(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function OL(s,e,t){return t=t!=null?t.concat([s]):null,_w(4,2,kL.bind(null,e,s),t)}function ww(){}function DL(s,e){var t=uu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vw(e,r[1])?r[0]:(t.memoizedState=[s,e],s)}function NL(s,e){var t=uu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vw(e,r[1])?r[0]:(s=s(),t.memoizedState=[s,e],s)}function nG(s,e){var t=pf();ou(98>t?98:t,function(){s(!0)}),ou(97<t?97:t,function(){var r=os.transition;os.transition=1;try{s(!1),e()}finally{os.transition=r}})}function bw(s,e,t){var r=Vi(),o=Da(s),l={lane:o,action:t,eagerReducer:null,eagerState:null,next:null},c=e.pending;if(c===null?l.next=l:(l.next=c.next,c.next=l),e.pending=l,c=s.alternate,s===ar||c!==null&&c===ar)Xd=z0=!0;else{if(s.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var h=e.lastRenderedState,m=c(h,t);if(l.eagerReducer=c,l.eagerState=m,is(m,h))return}catch{}finally{}Na(s,o,r)}}var W0={readContext:ss,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useMutableSource:Ci,useOpaqueIdentifier:Ci,unstable_isNewReconciler:!1},rG={readContext:ss,useCallback:function(s,e){return lu().memoizedState=[s,e===void 0?null:e],s},useContext:ss,useEffect:IL,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,xw(4,2,kL.bind(null,e,s),t)},useLayoutEffect:function(s,e){return xw(4,2,s,e)},useMemo:function(s,e){var t=lu();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var r=lu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,s=r.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},s=s.dispatch=bw.bind(null,ar,s),[r.memoizedState,s]},useRef:LL,useState:Zd,useDebugValue:ww,useDeferredValue:function(s){var e=Zd(s),t=e[0],r=e[1];return IL(function(){var o=os.transition;os.transition=1;try{r(s)}finally{os.transition=o}},[s]),t},useTransition:function(){var s=Zd(!1),e=s[0];return s=nG.bind(null,s[1]),LL(s),[s,e]},useMutableSource:function(s,e,t){var r=lu();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:s,subscribe:t},CL(r,s,e,t)},useOpaqueIdentifier:function(){if(Xs){var s=!1,e=K5(function(){throw s||(s=!0,t("r:"+(ew++).toString(36))),Error(tt(355))}),t=Zd(e)[1];return(ar.mode&2)==0&&(ar.flags|=516,H0(5,function(){t("r:"+(ew++).toString(36))},void 0,null)),e}return e="r:"+(ew++).toString(36),Zd(e),e},unstable_isNewReconciler:!1},iG={readContext:ss,useCallback:DL,useContext:ss,useEffect:V0,useImperativeHandle:OL,useLayoutEffect:PL,useMemo:NL,useReducer:Yd,useRef:G0,useState:function(){return Yd(Ys)},useDebugValue:ww,useDeferredValue:function(s){var e=Yd(Ys),t=e[0],r=e[1];return V0(function(){var o=os.transition;os.transition=1;try{r(s)}finally{os.transition=o}},[s]),t},useTransition:function(){var s=Yd(Ys)[0];return[G0().current,s]},useMutableSource:RL,useOpaqueIdentifier:function(){return Yd(Ys)[0]},unstable_isNewReconciler:!1},sG={readContext:ss,useCallback:DL,useContext:ss,useEffect:V0,useImperativeHandle:OL,useLayoutEffect:PL,useMemo:NL,useReducer:Kd,useRef:G0,useState:function(){return Kd(Ys)},useDebugValue:ww,useDeferredValue:function(s){var e=Kd(Ys),t=e[0],r=e[1];return V0(function(){var o=os.transition;os.transition=1;try{r(s)}finally{os.transition=o}},[s]),t},useTransition:function(){var s=Kd(Ys)[0];return[G0().current,s]},useMutableSource:RL,useOpaqueIdentifier:function(){return Kd(Ys)[0]},unstable_isNewReconciler:!1},oG=Jl.ReactCurrentOwner,Ss=!1;function Ri(s,e,t,r){e.child=s===null?bL(e,null,t,r):F0(e,s.child,t,r)}function FL(s,e,t,r,o){t=t.render;var l=e.ref;return gf(e,o),r=yw(s,e,t,r,l,o),s!==null&&!Ss?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~o,Lo(s,e,o)):(e.flags|=1,Ri(s,e,r,o),e.child)}function BL(s,e,t,r,o,l){if(s===null){var c=t.type;return typeof c=="function"&&!$w(c)&&c.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=c,UL(s,e,c,r,o,l)):(s=ev(t.type,null,r,e,e.mode,l),s.ref=e.ref,s.return=e,e.child=s)}return c=s.child,(o&l)==0&&(o=c.memoizedProps,t=t.compare,t=t!==null?t:Dd,t(o,r)&&s.ref===e.ref)?Lo(s,e,l):(e.flags|=1,s=Ua(c,r),s.ref=e.ref,s.return=e,e.child=s)}function UL(s,e,t,r,o,l){if(s!==null&&Dd(s.memoizedProps,r)&&s.ref===e.ref)if(Ss=!1,(l&o)!=0)(s.flags&16384)!=0&&(Ss=!0);else return e.lanes=s.lanes,Lo(s,e,l);return Mw(s,e,t,r,l)}function Sw(s,e,t){var r=e.pendingProps,o=r.children,l=s!==null?s.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},J0(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},J0(e,l!==null?l.baseLanes:t);else return s=l!==null?l.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s},J0(e,s),null;else l!==null?(r=l.baseLanes|t,e.memoizedState=null):r=t,J0(e,r);return Ri(s,e,o,t),e.child}function zL(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=128)}function Mw(s,e,t,r,o){var l=Ai(t)?iu:Qr.current;return l=df(e,l),gf(e,o),t=yw(s,e,t,r,l,o),s!==null&&!Ss?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~o,Lo(s,e,o)):(e.flags|=1,Ri(s,e,t,o),e.child)}function HL(s,e,t,r,o){if(Ai(t)){var l=!0;A0(e)}else l=!1;if(gf(e,o),e.stateNode===null)s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),xL(e,t,r),fw(e,t,r,o),r=!0;else if(s===null){var c=e.stateNode,h=e.memoizedProps;c.props=h;var m=c.context,y=t.contextType;typeof y=="object"&&y!==null?y=ss(y):(y=Ai(t)?iu:Qr.current,y=df(e,y));var b=t.getDerivedStateFromProps,M=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function";M||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==r||m!==y)&&_L(e,c,r,y),La=!1;var C=e.memoizedState;c.state=C,Hd(e,r,c,o),m=e.memoizedState,h!==r||C!==m||Ei.current||La?(typeof b=="function"&&(k0(e,t,b,r),m=e.memoizedState),(h=La||yL(e,t,h,r,C,m,y))?(M||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4)):(typeof c.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=m),c.props=r,c.state=m,c.context=y,r=h):(typeof c.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{c=e.stateNode,pL(s,e),h=e.memoizedProps,y=e.type===e.elementType?h:bs(e.type,h),c.props=y,M=e.pendingProps,C=c.context,m=t.contextType,typeof m=="object"&&m!==null?m=ss(m):(m=Ai(t)?iu:Qr.current,m=df(e,m));var I=t.getDerivedStateFromProps;(b=typeof I=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==M||C!==m)&&_L(e,c,r,m),La=!1,C=e.memoizedState,c.state=C,Hd(e,r,c,o);var O=e.memoizedState;h!==M||C!==O||Ei.current||La?(typeof I=="function"&&(k0(e,t,I,r),O=e.memoizedState),(y=La||yL(e,t,y,r,C,O,m))?(b||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,O,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,O,m)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof c.componentDidUpdate!="function"||h===s.memoizedProps&&C===s.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&C===s.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=O),c.props=r,c.state=O,c.context=m,r=y):(typeof c.componentDidUpdate!="function"||h===s.memoizedProps&&C===s.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&C===s.memoizedState||(e.flags|=256),r=!1)}return Tw(s,e,t,r,l,o)}function Tw(s,e,t,r,o,l){zL(s,e);var c=(e.flags&64)!=0;if(!r&&!c)return o&&iL(e,t,!1),Lo(s,e,l);r=e.stateNode,oG.current=e;var h=c&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,s!==null&&c?(e.child=F0(e,s.child,null,l),e.child=F0(e,null,h,l)):Ri(s,e,h,l),e.memoizedState=r.state,o&&iL(e,t,!0),e.child}function GL(s){var e=s.stateNode;e.pendingContext?nL(s,e.pendingContext,e.pendingContext!==e.context):e.context&&nL(s,e.context,!1),hw(s,e.containerInfo)}var $0={dehydrated:null,retryLane:0};function VL(s,e,t){var r=e.pendingProps,o=Yn.current,l=!1,c;return(c=(e.flags&64)!=0)||(c=s!==null&&s.memoizedState===null?!1:(o&2)!=0),c?(l=!0,e.flags&=-65):s!==null&&s.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(o|=1),Xn(Yn,o&1),s===null?(r.fallback!==void 0&&pw(e),s=r.children,o=r.fallback,l?(s=WL(e,s,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=$0,s):typeof r.unstable_expectedLoadTime=="number"?(s=WL(e,s,o,t),e.child.memoizedState={baseLanes:t},e.memoizedState=$0,e.lanes=33554432,s):(t=jw({mode:"visible",children:s},e.mode,t,null),t.return=e,e.child=t)):s.memoizedState!==null?l?(r=jL(s,e,r.children,r.fallback,t),l=e.child,o=s.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=s.childLanes&~t,e.memoizedState=$0,r):(t=$L(s,e,r.children,t),e.memoizedState=null,t):l?(r=jL(s,e,r.children,r.fallback,t),l=e.child,o=s.child.memoizedState,l.memoizedState=o===null?{baseLanes:t}:{baseLanes:o.baseLanes|t},l.childLanes=s.childLanes&~t,e.memoizedState=$0,r):(t=$L(s,e,r.children,t),e.memoizedState=null,t)}function WL(s,e,t,r){var o=s.mode,l=s.child;return e={mode:"hidden",children:e},(o&2)==0&&l!==null?(l.childLanes=0,l.pendingProps=e):l=jw(e,o,0,null),t=Mf(t,o,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,t}function $L(s,e,t,r){var o=s.child;return s=o.sibling,t=Ua(o,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=r),t.return=e,t.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,e.firstEffect=e.lastEffect=s),e.child=t}function jL(s,e,t,r,o){var l=e.mode,c=s.child;s=c.sibling;var h={mode:"hidden",children:t};return(l&2)==0&&e.child!==c?(t=e.child,t.childLanes=0,t.pendingProps=h,c=t.lastEffect,c!==null?(e.firstEffect=t.firstEffect,e.lastEffect=c,c.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Ua(c,h),s!==null?r=Ua(s,r):(r=Mf(r,l,o,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function qL(s,e){s.lanes|=e;var t=s.alternate;t!==null&&(t.lanes|=e),dL(s.return,e)}function Ew(s,e,t,r,o,l){var c=s.memoizedState;c===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o,lastEffect:l}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=t,c.tailMode=o,c.lastEffect=l)}function XL(s,e,t){var r=e.pendingProps,o=r.revealOrder,l=r.tail;if(Ri(s,e,r.children,t),r=Yn.current,(r&2)!=0)r=r&1|2,e.flags|=64;else{if(s!==null&&(s.flags&64)!=0)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&qL(s,t);else if(s.tag===19)qL(s,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r&=1}if(Xn(Yn,r),(e.mode&2)==0)e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)s=t.alternate,s!==null&&B0(s)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),Ew(e,!1,o,t,l,e.lastEffect);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(s=o.alternate,s!==null&&B0(s)===null){e.child=o;break}s=o.sibling,o.sibling=t,t=o,o=s}Ew(e,!0,t,null,l,e.lastEffect);break;case"together":Ew(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Lo(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),Jd|=e.lanes,(t&e.childLanes)!=0){if(s!==null&&e.child!==s.child)throw Error(tt(153));if(e.child!==null){for(s=e.child,t=Ua(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=Ua(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var YL,Aw,KL,ZL;YL=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Aw=function(){};KL=function(s,e,t,r){var o=s.memoizedProps;if(o!==r){s=e.stateNode,au(qs.current);var l=null;switch(t){case"input":o=f_(s,o),r=f_(s,r),l=[];break;case"option":o=p_(s,o),r=p_(s,r),l=[];break;case"select":o=Bn({},o,{value:void 0}),r=Bn({},r,{value:void 0}),l=[];break;case"textarea":o=m_(s,o),r=m_(s,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(s.onclick=b0)}y_(t,r);var c;t=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var h=o[y];for(c in h)h.hasOwnProperty(c)&&(t||(t={}),t[c]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(dd.hasOwnProperty(y)?l||(l=[]):(l=l||[]).push(y,null));for(y in r){var m=r[y];if(h=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&m!==h&&(m!=null||h!=null))if(y==="style")if(h){for(c in h)!h.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(t||(t={}),t[c]="");for(c in m)m.hasOwnProperty(c)&&h[c]!==m[c]&&(t||(t={}),t[c]=m[c])}else t||(l||(l=[]),l.push(y,t)),t=m;else y==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(l=l||[]).push(y,m)):y==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(y,""+m):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(dd.hasOwnProperty(y)?(m!=null&&y==="onScroll"&&Pn("scroll",s),l||h===m||(l=[])):typeof m=="object"&&m!==null&&m.$$typeof===o_?m.toString():(l=l||[]).push(y,m))}t&&(l=l||[]).push("style",t);var y=l;(e.updateQueue=y)&&(e.flags|=4)}};ZL=function(s,e,t,r){t!==r&&(e.flags|=4)};function Qd(s,e){if(!Xs)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:r.sibling=null}}function aG(s,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ai(e.type)&&E0(),null;case 3:return vf(),kn(Ei),kn(Qr),gw(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(U0(e)?e.flags|=4:r.hydrate||(e.flags|=256)),Aw(e),null;case 5:dw(e);var o=au($d.current);if(t=e.type,s!==null&&e.stateNode!=null)KL(s,e,t,r,o),s.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(tt(166));return null}if(s=au(qs.current),U0(e)){r=e.stateNode,t=e.type;var l=e.memoizedProps;switch(r[Aa]=e,r[M0]=l,t){case"dialog":Pn("cancel",r),Pn("close",r);break;case"iframe":case"object":case"embed":Pn("load",r);break;case"video":case"audio":for(s=0;s<Fd.length;s++)Pn(Fd[s],r);break;case"source":Pn("error",r);break;case"img":case"image":case"link":Pn("error",r),Pn("load",r);break;case"details":Pn("toggle",r);break;case"input":H2(r,l),Pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Pn("invalid",r);break;case"textarea":W2(r,l),Pn("invalid",r)}y_(t,l),s=null;for(var c in l)l.hasOwnProperty(c)&&(o=l[c],c==="children"?typeof o=="string"?r.textContent!==o&&(s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s=["children",""+o]):dd.hasOwnProperty(c)&&o!=null&&c==="onScroll"&&Pn("scroll",r));switch(t){case"input":s0(r),V2(r,l,!0);break;case"textarea":s0(r),j2(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=b0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(c=o.nodeType===9?o:o.ownerDocument,s===g_.html&&(s=q2(t)),s===g_.html?t==="script"?(s=c.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof r.is=="string"?s=c.createElement(t,{is:r.is}):(s=c.createElement(t),t==="select"&&(c=s,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):s=c.createElementNS(s,t),s[Aa]=e,s[M0]=r,YL(s,e,!1,!1),e.stateNode=s,c=x_(t,r),t){case"dialog":Pn("cancel",s),Pn("close",s),o=r;break;case"iframe":case"object":case"embed":Pn("load",s),o=r;break;case"video":case"audio":for(o=0;o<Fd.length;o++)Pn(Fd[o],s);o=r;break;case"source":Pn("error",s),o=r;break;case"img":case"image":case"link":Pn("error",s),Pn("load",s),o=r;break;case"details":Pn("toggle",s),o=r;break;case"input":H2(s,r),o=f_(s,r),Pn("invalid",s);break;case"option":o=p_(s,r);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},o=Bn({},r,{value:void 0}),Pn("invalid",s);break;case"textarea":W2(s,r),o=m_(s,r),Pn("invalid",s);break;default:o=r}y_(t,o);var h=o;for(l in h)if(h.hasOwnProperty(l)){var m=h[l];l==="style"?K2(s,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&X2(s,m)):l==="children"?typeof m=="string"?(t!=="textarea"||m!=="")&&xd(s,m):typeof m=="number"&&xd(s,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dd.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Pn("scroll",s):m!=null&&e_(s,l,m,c))}switch(t){case"input":s0(s),V2(s,r,!1);break;case"textarea":s0(s),j2(s);break;case"option":r.value!=null&&s.setAttribute("value",""+wa(r.value));break;case"select":s.multiple=!!r.multiple,l=r.value,l!=null?Qc(s,!!r.multiple,l,!1):r.defaultValue!=null&&Qc(s,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(s.onclick=b0)}ZR(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(s&&e.stateNode!=null)ZL(s,e,s.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(tt(166));t=au($d.current),au(qs.current),U0(e)?(r=e.stateNode,t=e.memoizedProps,r[Aa]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Aa]=e,e.stateNode=r)}return null;case 13:return kn(Yn),r=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(r=r!==null,t=!1,s===null?e.memoizedProps.fallback!==void 0&&U0(e):t=s.memoizedState!==null,r&&!t&&(e.mode&2)!=0&&(s===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Yn.current&1)!=0?Wr===0&&(Wr=3):((Wr===0||Wr===3)&&(Wr=4),di===null||(Jd&134217727)==0&&(_f&134217727)==0||bf(di,ti))),(r||t)&&(e.flags|=4),null);case 4:return vf(),Aw(e),s===null&&jR(e.stateNode.containerInfo),null;case 10:return uw(e),null;case 17:return Ai(e.type)&&E0(),null;case 19:if(kn(Yn),r=e.memoizedState,r===null)return null;if(l=(e.flags&64)!=0,c=r.rendering,c===null)if(l)Qd(r,!1);else{if(Wr!==0||s!==null&&(s.flags&64)!=0)for(s=e.child;s!==null;){if(c=B0(s),c!==null){for(e.flags|=64,Qd(r,!1),l=c.updateQueue,l!==null&&(e.updateQueue=l,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)l=t,s=r,l.flags&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,c=l.alternate,c===null?(l.childLanes=0,l.lanes=s,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,s=c.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return Xn(Yn,Yn.current&1|2),e.child}s=s.sibling}r.tail!==null&&Jr()>Bw&&(e.flags|=64,l=!0,Qd(r,!1),e.lanes=33554432)}else{if(!l)if(s=B0(c),s!==null){if(e.flags|=64,l=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Qd(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!Xs)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Jr()-r.renderingStartTime>Bw&&t!==1073741824&&(e.flags|=64,l=!0,Qd(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(t=r.last,t!==null?t.sibling=c:e.child=c,r.last=c)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Jr(),t.sibling=null,e=Yn.current,Xn(Yn,l?e&1|2:e&1),t):null;case 23:case 24:return Ww(),s!==null&&s.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(tt(156,e.tag))}function lG(s){switch(s.tag){case 1:Ai(s.type)&&E0();var e=s.flags;return e&4096?(s.flags=e&-4097|64,s):null;case 3:if(vf(),kn(Ei),kn(Qr),gw(),e=s.flags,(e&64)!=0)throw Error(tt(285));return s.flags=e&-4097|64,s;case 5:return dw(s),null;case 13:return kn(Yn),e=s.flags,e&4096?(s.flags=e&-4097|64,s):null;case 19:return kn(Yn),null;case 4:return vf(),null;case 10:return uw(s),null;case 23:case 24:return Ww(),null;default:return null}}function Cw(s,e){try{var t="",r=e;do t+=GH(r),r=r.return;while(r);var o=t}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:s,source:e,stack:o}}function Rw(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var uG=typeof WeakMap=="function"?WeakMap:Map;function QL(s,e,t){t=Ia(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){X0||(X0=!0,Uw=r),Rw(s,e)},t}function JL(s,e,t){t=Ia(-1,t),t.tag=3;var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return Rw(s,e),r(o)}}var l=s.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this),Rw(s,e));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),t}var cG=typeof WeakSet=="function"?WeakSet:Set;function e3(s){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Ba(s,t)}else e.current=null}function fG(s,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&s!==null){var t=s.memoizedProps,r=s.memoizedState;s=e.stateNode,e=s.getSnapshotBeforeUpdate(e.elementType===e.type?t:bs(e.type,t),r),s.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&J_(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(tt(163))}function hG(s,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{if((s.tag&3)==3){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{var o=s;r=o.next,o=o.tag,(o&4)!=0&&(o&1)!=0&&(m3(t,s),_G(t,s)),s=r}while(s!==e)}return;case 1:s=t.stateNode,t.flags&4&&(e===null?s.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:bs(t.type,e.memoizedProps),s.componentDidUpdate(r,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&gL(t,e,s);return;case 3:if(e=t.updateQueue,e!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}gL(t,e,s)}return;case 5:s=t.stateNode,e===null&&t.flags&4&&ZR(t.type,t.memoizedProps)&&s.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&hR(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(tt(163))}function t3(s,e){for(var t=s;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var o=t.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,r.style.display=Y2("display",o)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function n3(s,e){if(su&&typeof su.onCommitFiberUnmount=="function")try{su.onCommitFiberUnmount(nw,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var t=s=s.next;do{var r=t,o=r.destroy;if(r=r.tag,o!==void 0)if((r&4)!=0)m3(e,t);else{r=e;try{o()}catch(l){Ba(r,l)}}t=t.next}while(t!==s)}break;case 1:if(e3(e),s=e.stateNode,typeof s.componentWillUnmount=="function")try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(l){Ba(e,l)}break;case 5:e3(e);break;case 4:o3(s,e)}}function r3(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function i3(s){return s.tag===5||s.tag===3||s.tag===4}function s3(s){e:{for(var e=s.return;e!==null;){if(i3(e))break e;e=e.return}throw Error(tt(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(tt(161))}t.flags&16&&(xd(e,""),t.flags&=-17);e:t:for(t=s;;){for(;t.sibling===null;){if(t.return===null||i3(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?Lw(s,t,e):Iw(s,t,e)}function Lw(s,e,t){var r=s.tag,o=r===5||r===6;if(o)s=o?s.stateNode:s.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=b0));else if(r!==4&&(s=s.child,s!==null))for(Lw(s,e,t),s=s.sibling;s!==null;)Lw(s,e,t),s=s.sibling}function Iw(s,e,t){var r=s.tag,o=r===5||r===6;if(o)s=o?s.stateNode:s.stateNode.instance,e?t.insertBefore(s,e):t.appendChild(s);else if(r!==4&&(s=s.child,s!==null))for(Iw(s,e,t),s=s.sibling;s!==null;)Iw(s,e,t),s=s.sibling}function o3(s,e){for(var t=e,r=!1,o,l;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(tt(160));switch(o=r.stateNode,r.tag){case 5:l=!1;break e;case 3:o=o.containerInfo,l=!0;break e;case 4:o=o.containerInfo,l=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var c=s,h=t,m=h;;)if(n3(c,m),m.child!==null&&m.tag!==4)m.child.return=m,m=m.child;else{if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}l?(c=o,h=t.stateNode,c.nodeType===8?c.parentNode.removeChild(h):c.removeChild(h)):o.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){o=t.stateNode.containerInfo,l=!0,t.child.return=t,t=t.child;continue}}else if(n3(s,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function Pw(s,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)==3&&(s=r.destroy,r.destroy=void 0,s!==void 0&&s()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var o=s!==null?s.memoizedProps:r;s=e.type;var l=e.updateQueue;if(e.updateQueue=null,l!==null){for(t[M0]=r,s==="input"&&r.type==="radio"&&r.name!=null&&G2(t,r),x_(s,o),e=x_(s,r),o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?K2(t,h):c==="dangerouslySetInnerHTML"?X2(t,h):c==="children"?xd(t,h):e_(t,c,h,e)}switch(s){case"input":h_(t,r);break;case"textarea":$2(t,r);break;case"select":s=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,l=r.value,l!=null?Qc(t,!!r.multiple,l,!1):s!==!!r.multiple&&(r.defaultValue!=null?Qc(t,!!r.multiple,r.defaultValue,!0):Qc(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(tt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,hR(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Fw=Jr(),t3(e.child,!0)),a3(e);return;case 19:a3(e);return;case 17:return;case 23:case 24:t3(e,e.memoizedState!==null);return}throw Error(tt(163))}function a3(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new cG),e.forEach(function(r){var o=SG.bind(null,s,r);t.has(r)||(t.add(r),r.then(o,o))})}}function dG(s,e){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var pG=Math.ceil,j0=Jl.ReactCurrentDispatcher,kw=Jl.ReactCurrentOwner,Ht=0,di=null,_r=null,ti=0,cu=0,Ow=Ca(0),Wr=0,q0=null,xf=0,Jd=0,_f=0,Dw=0,Nw=null,Fw=0,Bw=1/0;function wf(){Bw=Jr()+500}var _t=null,X0=!1,Uw=null,Ks=null,Oa=!1,ep=null,tp=90,zw=[],Hw=[],Io=null,np=0,Gw=null,Y0=-1,Po=0,K0=0,rp=null,Z0=!1;function Vi(){return(Ht&48)!=0?Jr():Y0!==-1?Y0:Y0=Jr()}function Da(s){if(s=s.mode,(s&2)==0)return 1;if((s&4)==0)return pf()===99?1:2;if(Po===0&&(Po=xf),tG.transition!==0){K0!==0&&(K0=Nw!==null?Nw.pendingLanes:0),s=Po;var e=4186112&~K0;return e&=-e,e===0&&(s=4186112&~s,e=s&-s,e===0&&(e=8192)),e}return s=pf(),(Ht&4)!=0&&s===98?s=d0(12,Po):(s=i5(s),s=d0(s,Po)),s}function Na(s,e,t){if(50<np)throw np=0,Gw=null,Error(tt(185));if(s=Q0(s,e),s===null)return null;p0(s,e,t),s===di&&(_f|=e,Wr===4&&bf(s,ti));var r=pf();e===1?(Ht&8)!=0&&(Ht&48)==0?Vw(s):(as(s,t),Ht===0&&(wf(),js())):((Ht&4)==0||r!==98&&r!==99||(Io===null?Io=new Set([s]):Io.add(s)),as(s,t)),Nw=s}function Q0(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}function as(s,e){for(var t=s.callbackNode,r=s.suspendedLanes,o=s.pingedLanes,l=s.expirationTimes,c=s.pendingLanes;0<c;){var h=31-Ta(c),m=1<<h,y=l[h];if(y===-1){if((m&r)==0||(m&o)!=0){y=e,nf(m);var b=An;l[h]=10<=b?y+250:6<=b?y+5e3:-1}}else y<=e&&(s.expiredLanes|=m);c&=~m}if(r=Rd(s,s===di?ti:0),e=An,r===0)t!==null&&(t!==ow&&iw(t),s.callbackNode=null,s.callbackPriority=0);else{if(t!==null){if(s.callbackPriority===e)return;t!==ow&&iw(t)}e===15?(t=Vw.bind(null,s),Co===null?(Co=[t],R0=rw(C0,hL)):Co.push(t),t=ow):e===14?t=zd(99,Vw.bind(null,s)):(t=s5(e),t=zd(t,l3.bind(null,s))),s.callbackPriority=e,s.callbackNode=t}}function l3(s){if(Y0=-1,K0=Po=0,(Ht&48)!=0)throw Error(tt(327));var e=s.callbackNode;if(Fa()&&s.callbackNode!==e)return null;var t=Rd(s,s===di?ti:0);if(t===0)return null;var r=t,o=Ht;Ht|=16;var l=h3();(di!==s||ti!==r)&&(wf(),Sf(s,r));do try{vG();break}catch(h){f3(s,h)}while(1);if(lw(),j0.current=l,Ht=o,_r!==null?r=0:(di=null,ti=0,r=Wr),(xf&_f)!=0)Sf(s,0);else if(r!==0){if(r===2&&(Ht|=64,s.hydrate&&(s.hydrate=!1,J_(s.containerInfo)),t=xR(s),t!==0&&(r=ip(s,t))),r===1)throw e=q0,Sf(s,0),bf(s,t),as(s,Jr()),e;switch(s.finishedWork=s.current.alternate,s.finishedLanes=t,r){case 0:case 1:throw Error(tt(345));case 2:fu(s);break;case 3:if(bf(s,t),(t&62914560)===t&&(r=Fw+500-Jr(),10<r)){if(Rd(s,0)!==0)break;if(o=s.suspendedLanes,(o&t)!==t){Vi(),s.pingedLanes|=s.suspendedLanes&o;break}s.timeoutHandle=QR(fu.bind(null,s),r);break}fu(s);break;case 4:if(bf(s,t),(t&4186112)===t)break;for(r=s.eventTimes,o=-1;0<t;){var c=31-Ta(t);l=1<<c,c=r[c],c>o&&(o=c),t&=~l}if(t=o,t=Jr()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*pG(t/1960))-t,10<t){s.timeoutHandle=QR(fu.bind(null,s),t);break}fu(s);break;case 5:fu(s);break;default:throw Error(tt(329))}}return as(s,Jr()),s.callbackNode===e?l3.bind(null,s):null}function bf(s,e){for(e&=~Dw,e&=~_f,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-Ta(e),r=1<<t;s[t]=-1,e&=~r}}function Vw(s){if((Ht&48)!=0)throw Error(tt(327));if(Fa(),s===di&&(s.expiredLanes&ti)!=0){var e=ti,t=ip(s,e);(xf&_f)!=0&&(e=Rd(s,e),t=ip(s,e))}else e=Rd(s,0),t=ip(s,e);if(s.tag!==0&&t===2&&(Ht|=64,s.hydrate&&(s.hydrate=!1,J_(s.containerInfo)),e=xR(s),e!==0&&(t=ip(s,e))),t===1)throw t=q0,Sf(s,0),bf(s,e),as(s,Jr()),t;return s.finishedWork=s.current.alternate,s.finishedLanes=e,fu(s),as(s,Jr()),null}function mG(){if(Io!==null){var s=Io;Io=null,s.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,as(e,Jr())})}js()}function u3(s,e){var t=Ht;Ht|=1;try{return s(e)}finally{Ht=t,Ht===0&&(wf(),js())}}function c3(s,e){var t=Ht;Ht&=-2,Ht|=8;try{return s(e)}finally{Ht=t,Ht===0&&(wf(),js())}}function J0(s,e){Xn(Ow,cu),cu|=e,xf|=e}function Ww(){cu=Ow.current,kn(Ow)}function Sf(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,Y5(t)),_r!==null)for(t=_r.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&E0();break;case 3:vf(),kn(Ei),kn(Qr),gw();break;case 5:dw(r);break;case 4:vf();break;case 13:kn(Yn);break;case 19:kn(Yn);break;case 10:uw(r);break;case 23:case 24:Ww()}t=t.return}di=s,_r=Ua(s.current,null),ti=cu=xf=e,Wr=0,q0=null,Dw=_f=Jd=0}function f3(s,e){do{var t=_r;try{if(lw(),jd.current=W0,z0){for(var r=ar.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}z0=!1}if(qd=0,Vr=ei=ar=null,Xd=!1,kw.current=null,t===null||t.return===null){Wr=1,q0=e,_r=null;break}e:{var l=s,c=t.return,h=t,m=e;if(e=ti,h.flags|=2048,h.firstEffect=h.lastEffect=null,m!==null&&typeof m=="object"&&typeof m.then=="function"){var y=m;if((h.mode&2)==0){var b=h.alternate;b?(h.updateQueue=b.updateQueue,h.memoizedState=b.memoizedState,h.lanes=b.lanes):(h.updateQueue=null,h.memoizedState=null)}var M=(Yn.current&1)!=0,C=c;do{var I;if(I=C.tag===13){var O=C.memoizedState;if(O!==null)I=O.dehydrated!==null;else{var U=C.memoizedProps;I=U.fallback===void 0?!1:U.unstable_avoidThisFallback!==!0?!0:!M}}if(I){var H=C.updateQueue;if(H===null){var P=new Set;P.add(y),C.updateQueue=P}else H.add(y);if((C.mode&2)==0){if(C.flags|=64,h.flags|=16384,h.flags&=-2981,h.tag===1)if(h.alternate===null)h.tag=17;else{var A=Ia(-1,1);A.tag=2,Pa(h,A)}h.lanes|=1;break e}m=void 0,h=e;var F=l.pingCache;if(F===null?(F=l.pingCache=new uG,m=new Set,F.set(y,m)):(m=F.get(y),m===void 0&&(m=new Set,F.set(y,m))),!m.has(h)){m.add(h);var L=bG.bind(null,l,y,h);y.then(L,L)}C.flags|=4096,C.lanes=e;break e}C=C.return}while(C!==null);m=Error((Zc(h.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Wr!==5&&(Wr=2),m=Cw(m,h),C=c;do{switch(C.tag){case 3:l=m,C.flags|=4096,e&=-e,C.lanes|=e;var B=QL(C,l,e);mL(C,B);break e;case 1:l=m;var z=C.type,q=C.stateNode;if((C.flags&64)==0&&(typeof z.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ks===null||!Ks.has(q)))){C.flags|=4096,e&=-e,C.lanes|=e;var Z=JL(C,l,e);mL(C,Z);break e}}C=C.return}while(C!==null)}p3(t)}catch(ae){e=ae,_r===t&&t!==null&&(_r=t=t.return);continue}break}while(1)}function h3(){var s=j0.current;return j0.current=W0,s===null?W0:s}function ip(s,e){var t=Ht;Ht|=16;var r=h3();di===s&&ti===e||Sf(s,e);do try{gG();break}catch(o){f3(s,o)}while(1);if(lw(),Ht=t,j0.current=r,_r!==null)throw Error(tt(261));return di=null,ti=0,Wr}function gG(){for(;_r!==null;)d3(_r)}function vG(){for(;_r!==null&&!Q5();)d3(_r)}function d3(s){var e=v3(s.alternate,s,cu);s.memoizedProps=s.pendingProps,e===null?p3(s):_r=e,kw.current=null}function p3(s){var e=s;do{var t=e.alternate;if(s=e.return,(e.flags&2048)==0){if(t=aG(t,e,cu),t!==null){_r=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(cu&1073741824)!=0||(t.mode&4)==0){for(var r=0,o=t.child;o!==null;)r|=o.lanes|o.childLanes,o=o.sibling;t.childLanes=r}s!==null&&(s.flags&2048)==0&&(s.firstEffect===null&&(s.firstEffect=e.firstEffect),e.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=e.firstEffect),s.lastEffect=e.lastEffect),1<e.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=e:s.firstEffect=e,s.lastEffect=e))}else{if(t=lG(e),t!==null){t.flags&=2047,_r=t;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(e=e.sibling,e!==null){_r=e;return}_r=e=s}while(e!==null);Wr===0&&(Wr=5)}function fu(s){var e=pf();return ou(99,yG.bind(null,s,e)),null}function yG(s,e){do Fa();while(ep!==null);if((Ht&48)!=0)throw Error(tt(327));var t=s.finishedWork;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(tt(177));s.callbackNode=null;var r=t.lanes|t.childLanes,o=r,l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;for(var c=s.eventTimes,h=s.expirationTimes;0<l;){var m=31-Ta(l),y=1<<m;o[m]=0,c[m]=-1,h[m]=-1,l&=~y}if(Io!==null&&(r&24)==0&&Io.has(s)&&Io.delete(s),s===di&&(_r=di=null,ti=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(o=Ht,Ht|=32,kw.current=null,K_=m0,c=UR(),j_(c)){if("selectionStart"in c)h={start:c.selectionStart,end:c.selectionEnd};else e:if(h=(h=c.ownerDocument)&&h.defaultView||window,(y=h.getSelection&&h.getSelection())&&y.rangeCount!==0){h=y.anchorNode,l=y.anchorOffset,m=y.focusNode,y=y.focusOffset;try{h.nodeType,m.nodeType}catch{h=null;break e}var b=0,M=-1,C=-1,I=0,O=0,U=c,H=null;t:for(;;){for(var P;U!==h||l!==0&&U.nodeType!==3||(M=b+l),U!==m||y!==0&&U.nodeType!==3||(C=b+y),U.nodeType===3&&(b+=U.nodeValue.length),(P=U.firstChild)!==null;)H=U,U=P;for(;;){if(U===c)break t;if(H===h&&++I===l&&(M=b),H===m&&++O===y&&(C=b),(P=U.nextSibling)!==null)break;U=H,H=U.parentNode}U=P}h=M===-1||C===-1?null:{start:M,end:C}}else h=null;h=h||{start:0,end:0}}else h=null;Z_={focusedElem:c,selectionRange:h},m0=!1,rp=null,Z0=!1,_t=r;do try{xG()}catch(ae){if(_t===null)throw Error(tt(330));Ba(_t,ae),_t=_t.nextEffect}while(_t!==null);rp=null,_t=r;do try{for(c=s;_t!==null;){var A=_t.flags;if(A&16&&xd(_t.stateNode,""),A&128){var F=_t.alternate;if(F!==null){var L=F.ref;L!==null&&(typeof L=="function"?L(null):L.current=null)}}switch(A&1038){case 2:s3(_t),_t.flags&=-3;break;case 6:s3(_t),_t.flags&=-3,Pw(_t.alternate,_t);break;case 1024:_t.flags&=-1025;break;case 1028:_t.flags&=-1025,Pw(_t.alternate,_t);break;case 4:Pw(_t.alternate,_t);break;case 8:h=_t,o3(c,h);var B=h.alternate;r3(h),B!==null&&r3(B)}_t=_t.nextEffect}}catch(ae){if(_t===null)throw Error(tt(330));Ba(_t,ae),_t=_t.nextEffect}while(_t!==null);if(L=Z_,F=UR(),A=L.focusedElem,c=L.selectionRange,F!==A&&A&&A.ownerDocument&&BR(A.ownerDocument.documentElement,A)){for(c!==null&&j_(A)&&(F=c.start,L=c.end,L===void 0&&(L=F),"selectionStart"in A?(A.selectionStart=F,A.selectionEnd=Math.min(L,A.value.length)):(L=(F=A.ownerDocument||document)&&F.defaultView||window,L.getSelection&&(L=L.getSelection(),h=A.textContent.length,B=Math.min(c.start,h),c=c.end===void 0?B:Math.min(c.end,h),!L.extend&&B>c&&(h=c,c=B,B=h),h=FR(A,B),l=FR(A,c),h&&l&&(L.rangeCount!==1||L.anchorNode!==h.node||L.anchorOffset!==h.offset||L.focusNode!==l.node||L.focusOffset!==l.offset)&&(F=F.createRange(),F.setStart(h.node,h.offset),L.removeAllRanges(),B>c?(L.addRange(F),L.extend(l.node,l.offset)):(F.setEnd(l.node,l.offset),L.addRange(F)))))),F=[],L=A;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<F.length;A++)L=F[A],L.element.scrollLeft=L.left,L.element.scrollTop=L.top}m0=!!K_,Z_=K_=null,s.current=t,_t=r;do try{for(A=s;_t!==null;){var z=_t.flags;if(z&36&&hG(A,_t.alternate,_t),z&128){F=void 0;var q=_t.ref;if(q!==null){var Z=_t.stateNode;switch(_t.tag){case 5:F=Z;break;default:F=Z}typeof q=="function"?q(F):q.current=F}}_t=_t.nextEffect}}catch(ae){if(_t===null)throw Error(tt(330));Ba(_t,ae),_t=_t.nextEffect}while(_t!==null);_t=null,eG(),Ht=o}else s.current=t;if(Oa)Oa=!1,ep=s,tp=e;else for(_t=r;_t!==null;)e=_t.nextEffect,_t.nextEffect=null,_t.flags&8&&(z=_t,z.sibling=null,z.stateNode=null),_t=e;if(r=s.pendingLanes,r===0&&(Ks=null),r===1?s===Gw?np++:(np=0,Gw=s):np=0,t=t.stateNode,su&&typeof su.onCommitFiberRoot=="function")try{su.onCommitFiberRoot(nw,t,void 0,(t.current.flags&64)==64)}catch{}if(as(s,Jr()),X0)throw X0=!1,s=Uw,Uw=null,s;return(Ht&8)!=0||js(),null}function xG(){for(;_t!==null;){var s=_t.alternate;Z0||rp===null||((_t.flags&8)!=0?sR(_t,rp)&&(Z0=!0):_t.tag===13&&dG(s,_t)&&sR(_t,rp)&&(Z0=!0));var e=_t.flags;(e&256)!=0&&fG(s,_t),(e&512)==0||Oa||(Oa=!0,zd(97,function(){return Fa(),null})),_t=_t.nextEffect}}function Fa(){if(tp!==90){var s=97<tp?97:tp;return tp=90,ou(s,wG)}return!1}function _G(s,e){zw.push(e,s),Oa||(Oa=!0,zd(97,function(){return Fa(),null}))}function m3(s,e){Hw.push(e,s),Oa||(Oa=!0,zd(97,function(){return Fa(),null}))}function wG(){if(ep===null)return!1;var s=ep;if(ep=null,(Ht&48)!=0)throw Error(tt(331));var e=Ht;Ht|=32;var t=Hw;Hw=[];for(var r=0;r<t.length;r+=2){var o=t[r],l=t[r+1],c=o.destroy;if(o.destroy=void 0,typeof c=="function")try{c()}catch(m){if(l===null)throw Error(tt(330));Ba(l,m)}}for(t=zw,zw=[],r=0;r<t.length;r+=2){o=t[r],l=t[r+1];try{var h=o.create;o.destroy=h()}catch(m){if(l===null)throw Error(tt(330));Ba(l,m)}}for(h=s.current.firstEffect;h!==null;)s=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=null,h.stateNode=null),h=s;return Ht=e,js(),!0}function g3(s,e,t){e=Cw(t,e),e=QL(s,e,1),Pa(s,e),e=Vi(),s=Q0(s,1),s!==null&&(p0(s,1,e),as(s,e))}function Ba(s,e){if(s.tag===3)g3(s,s,e);else for(var t=s.return;t!==null;){if(t.tag===3){g3(t,s,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){s=Cw(e,s);var o=JL(t,s,1);if(Pa(t,o),o=Vi(),t=Q0(t,1),t!==null)p0(t,1,o),as(t,o);else if(typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r)))try{r.componentDidCatch(e,s)}catch{}break}}t=t.return}}function bG(s,e,t){var r=s.pingCache;r!==null&&r.delete(e),e=Vi(),s.pingedLanes|=s.suspendedLanes&t,di===s&&(ti&t)===t&&(Wr===4||Wr===3&&(ti&62914560)===ti&&500>Jr()-Fw?Sf(s,0):Dw|=t),as(s,e)}function SG(s,e){var t=s.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=s.mode,(e&2)==0?e=1:(e&4)==0?e=pf()===99?1:2:(Po===0&&(Po=xf),e=rf(62914560&~Po),e===0&&(e=4194304))),t=Vi(),s=Q0(s,e),s!==null&&(p0(s,e,t),as(s,t))}var v3;v3=function(s,e,t){var r=e.lanes;if(s!==null)if(s.memoizedProps!==e.pendingProps||Ei.current)Ss=!0;else if((t&r)!=0)Ss=(s.flags&16384)!=0;else{switch(Ss=!1,e.tag){case 3:GL(e),mw();break;case 5:SL(e);break;case 1:Ai(e.type)&&A0(e);break;case 4:hw(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var o=e.type._context;Xn(L0,o._currentValue),o._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?VL(s,e,t):(Xn(Yn,Yn.current&1),e=Lo(s,e,t),e!==null?e.sibling:null);Xn(Yn,Yn.current&1);break;case 19:if(r=(t&e.childLanes)!=0,(s.flags&64)!=0){if(r)return XL(s,e,t);e.flags|=64}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Xn(Yn,Yn.current),r)break;return null;case 23:case 24:return e.lanes=0,Sw(s,e,t)}return Lo(s,e,t)}else Ss=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,o=df(e,Qr.current),gf(e,t),o=yw(null,e,r,s,o,t),e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)){var l=!0;A0(e)}else l=!1;e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,cw(e);var c=r.getDerivedStateFromProps;typeof c=="function"&&k0(e,r,c,s),o.updater=O0,e.stateNode=o,o._reactInternals=e,fw(e,r,s,t),e=Tw(null,e,r,!0,l,t)}else e.tag=0,Ri(null,e,o,t),e=e.child;return e;case 16:o=e.elementType;e:{switch(s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,l=o._init,o=l(o._payload),e.type=o,l=e.tag=TG(o),s=bs(o,s),l){case 0:e=Mw(null,e,o,s,t);break e;case 1:e=HL(null,e,o,s,t);break e;case 11:e=FL(null,e,o,s,t);break e;case 14:e=BL(null,e,o,bs(o.type,s),r,t);break e}throw Error(tt(306,o,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bs(r,o),Mw(s,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bs(r,o),HL(s,e,r,o,t);case 3:if(GL(e),r=e.updateQueue,s===null||r===null)throw Error(tt(282));if(r=e.pendingProps,o=e.memoizedState,o=o!==null?o.element:null,pL(s,e),Hd(e,r,null,t),r=e.memoizedState.element,r===o)mw(),e=Lo(s,e,t);else{if(o=e.stateNode,(l=o.hydrate)&&(ka=uf(e.stateNode.containerInfo.firstChild),Ro=e,l=Xs=!0),l){if(s=o.mutableSourceEagerHydrationData,s!=null)for(o=0;o<s.length;o+=2)l=s[o],l._workInProgressVersionPrimary=s[o+1],yf.push(l);for(t=bL(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Ri(s,e,r,t),mw();e=e.child}return e;case 5:return SL(e),s===null&&pw(e),r=e.type,o=e.pendingProps,l=s!==null?s.memoizedProps:null,c=o.children,Q_(r,o)?c=null:l!==null&&Q_(r,l)&&(e.flags|=16),zL(s,e),Ri(s,e,c,t),e.child;case 6:return s===null&&pw(e),null;case 13:return VL(s,e,t);case 4:return hw(e,e.stateNode.containerInfo),r=e.pendingProps,s===null?e.child=F0(e,null,r,t):Ri(s,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bs(r,o),FL(s,e,r,o,t);case 7:return Ri(s,e,e.pendingProps,t),e.child;case 8:return Ri(s,e,e.pendingProps.children,t),e.child;case 12:return Ri(s,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,o=e.pendingProps,c=e.memoizedProps,l=o.value;var h=e.type._context;if(Xn(L0,h._currentValue),h._currentValue=l,c!==null)if(h=c.value,l=is(h,l)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(h,l):1073741823)|0,l===0){if(c.children===o.children&&!Ei.current){e=Lo(s,e,t);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var m=h.dependencies;if(m!==null){c=h.child;for(var y=m.firstContext;y!==null;){if(y.context===r&&(y.observedBits&l)!=0){h.tag===1&&(y=Ia(-1,t&-t),y.tag=2,Pa(h,y)),h.lanes|=t,y=h.alternate,y!==null&&(y.lanes|=t),dL(h.return,t),m.lanes|=t;break}y=y.next}}else c=h.tag===10&&h.type===e.type?null:h.child;if(c!==null)c.return=h;else for(c=h;c!==null;){if(c===e){c=null;break}if(h=c.sibling,h!==null){h.return=c.return,c=h;break}c=c.return}h=c}Ri(s,e,o.children,t),e=e.child}return e;case 9:return o=e.type,l=e.pendingProps,r=l.children,gf(e,t),o=ss(o,l.unstable_observedBits),r=r(o),e.flags|=1,Ri(s,e,r,t),e.child;case 14:return o=e.type,l=bs(o,e.pendingProps),l=bs(o.type,l),BL(s,e,o,l,r,t);case 15:return UL(s,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bs(r,o),s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ai(r)?(s=!0,A0(e)):s=!1,gf(e,t),xL(e,r,o),fw(e,r,o,t),Tw(null,e,r,!0,s,t);case 19:return XL(s,e,t);case 23:return Sw(s,e,t);case 24:return Sw(s,e,t)}throw Error(tt(156,e.tag))};function MG(s,e,t,r){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(s,e,t,r){return new MG(s,e,t,r)}function $w(s){return s=s.prototype,!(!s||!s.isReactComponent)}function TG(s){if(typeof s=="function")return $w(s)?1:0;if(s!=null){if(s=s.$$typeof,s===t0)return 11;if(s===r0)return 14}return 2}function Ua(s,e){var t=s.alternate;return t===null?(t=ls(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function ev(s,e,t,r,o,l){var c=2;if(r=s,typeof s=="function")$w(s)&&(c=1);else if(typeof s=="string")c=5;else e:switch(s){case _a:return Mf(t.children,o,l,e);case F2:c=8,o|=16;break;case t_:c=8,o|=1;break;case md:return s=ls(12,t,e,o|8),s.elementType=md,s.type=md,s.lanes=l,s;case gd:return s=ls(13,t,e,o),s.type=gd,s.elementType=gd,s.lanes=l,s;case n0:return s=ls(19,t,e,o),s.elementType=n0,s.lanes=l,s;case a_:return jw(t,o,l,e);case l_:return s=ls(24,t,e,o),s.elementType=l_,s.lanes=l,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case n_:c=10;break e;case r_:c=9;break e;case t0:c=11;break e;case r0:c=14;break e;case i_:c=16,r=null;break e;case s_:c=22;break e}throw Error(tt(130,s==null?s:typeof s,""))}return e=ls(c,t,e,o),e.elementType=s,e.type=r,e.lanes=l,e}function Mf(s,e,t,r){return s=ls(7,s,r,e),s.lanes=t,s}function jw(s,e,t,r){return s=ls(23,s,r,e),s.elementType=a_,s.lanes=t,s}function qw(s,e,t){return s=ls(6,s,null,e),s.lanes=t,s}function Xw(s,e,t){return e=ls(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function EG(s,e,t){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=O_(0),this.expirationTimes=O_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O_(0),this.mutableSourceEagerHydrationData=null}function AG(s,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eu,key:r==null?null:""+r,children:s,containerInfo:e,implementation:t}}function tv(s,e,t,r){var o=e.current,l=Vi(),c=Da(o);e:if(t){t=t._reactInternals;t:{if(nu(t)!==t||t.tag!==1)throw Error(tt(170));var h=t;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(Ai(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(h!==null);throw Error(tt(171))}if(t.tag===1){var m=t.type;if(Ai(m)){t=rL(t,m,h);break e}}t=h}else t=Ra;return e.context===null?e.context=t:e.pendingContext=t,e=Ia(l,c),e.payload={element:s},r=r===void 0?null:r,r!==null&&(e.callback=r),Pa(o,e),Na(o,c,l),c}function Yw(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function y3(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function Kw(s,e){y3(s,e),(s=s.alternate)&&y3(s,e)}function CG(){return null}function Zw(s,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new EG(s,e,t!=null&&t.hydrate===!0),e=ls(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,cw(e),s[cf]=t.current,jR(s.nodeType===8?s.parentNode:s),r)for(s=0;s<r.length;s++){e=r[s];var o=e._getVersion;o=o(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,o]:t.mutableSourceEagerHydrationData.push(e,o)}this._internalRoot=t}Zw.prototype.render=function(s){tv(s,this._internalRoot,null,null)};Zw.prototype.unmount=function(){var s=this._internalRoot,e=s.containerInfo;tv(null,s,null,function(){e[cf]=null})};function sp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function RG(s,e){if(e||(e=s?s.nodeType===9?s.documentElement:s.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=s.lastChild;)s.removeChild(t);return new Zw(s,0,e?{hydrate:!0}:void 0)}function nv(s,e,t,r,o){var l=t._reactRootContainer;if(l){var c=l._internalRoot;if(typeof o=="function"){var h=o;o=function(){var y=Yw(c);h.call(y)}}tv(e,c,s,o)}else{if(l=t._reactRootContainer=RG(t,r),c=l._internalRoot,typeof o=="function"){var m=o;o=function(){var y=Yw(c);m.call(y)}}c3(function(){tv(e,c,s,o)})}return Yw(c)}oR=function(s){if(s.tag===13){var e=Vi();Na(s,4,e),Kw(s,4)}};C_=function(s){if(s.tag===13){var e=Vi();Na(s,67108864,e),Kw(s,67108864)}};aR=function(s){if(s.tag===13){var e=Vi(),t=Da(s);Na(s,t,e),Kw(s,t)}};lR=function(s,e){return e()};w_=function(s,e,t){switch(e){case"input":if(h_(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==s&&r.form===s.form){var o=T0(r);if(!o)throw Error(tt(90));z2(r),h_(r,o)}}}break;case"textarea":$2(s,t);break;case"select":e=t.value,e!=null&&Qc(s,!!t.multiple,e,!1)}};b_=u3;eR=function(s,e,t,r,o){var l=Ht;Ht|=4;try{return ou(98,s.bind(null,e,t,r,o))}finally{Ht=l,Ht===0&&(wf(),js())}};S_=function(){(Ht&49)==0&&(mG(),Fa())};tR=function(s,e){var t=Ht;Ht|=2;try{return s(e)}finally{Ht=t,Ht===0&&(wf(),js())}};function x3(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sp(e))throw Error(tt(200));return AG(s,e,null,t)}var LG={Events:[Ud,ff,T0,Q2,J2,Fa,{current:!1}]},op={findFiberByHostInstance:ru,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},IG={bundleType:op.bundleType,version:op.version,rendererPackageName:op.rendererPackageName,rendererConfig:op.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=iR(s),s===null?null:s.stateNode},findFiberByHostInstance:op.findFiberByHostInstance||CG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var rv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rv.isDisabled&&rv.supportsFiber)try{nw=rv.inject(IG),su=rv}catch{}}rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LG;rs.createPortal=x3;rs.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(tt(188)):Error(tt(268,Object.keys(s)));return s=iR(e),s=s===null?null:s.stateNode,s};rs.flushSync=function(s,e){var t=Ht;if((t&48)!=0)return s(e);Ht|=1;try{if(s)return ou(99,s.bind(null,e))}finally{Ht=t,js()}};rs.hydrate=function(s,e,t){if(!sp(e))throw Error(tt(200));return nv(null,s,e,!0,t)};rs.render=function(s,e,t){if(!sp(e))throw Error(tt(200));return nv(null,s,e,!1,t)};rs.unmountComponentAtNode=function(s){if(!sp(s))throw Error(tt(40));return s._reactRootContainer?(c3(function(){nv(null,null,s,!1,function(){s._reactRootContainer=null,s[cf]=null})}),!0):!1};rs.unstable_batchedUpdates=u3;rs.unstable_createPortal=function(s,e){return x3(s,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};rs.unstable_renderSubtreeIntoContainer=function(s,e,t,r){if(!sp(t))throw Error(tt(200));if(s==null||s._reactInternals===void 0)throw Error(tt(38));return nv(s,e,t,!1,r)};rs.version="17.0.2";function _3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_3)}catch(s){console.error(s)}}_3(),L2.exports=rs;var HG=L2.exports;export{aA as A,xi as B,Ze as C,Fh as D,NG as E,FG as F,Ur as G,HG as H,Yr as M,hr as P,Vt as Q,zG as R,Tl as S,kG as T,he as V,vn as W,Nn as a,Cx as b,Il as c,yo as d,Ll as e,UG as f,Rm as g,nA as h,OG as i,DG as j,l4 as k,Ic as l,xg as m,WE as n,xE as o,Jm as p,m4 as q,FE as r,rn as s,CH as t,ld as u,BG as v,RH as w,Qx as x,LH as y,NH as z};
