var ke=Object.defineProperty,He=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ee=(A,t,e)=>t in A?ke(A,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):A[t]=e,x=(A,t)=>{for(var e in t||(t={}))De.call(t,e)&&ee(A,e,t[e]);if(de)for(var e of de(t))Ue.call(t,e)&&ee(A,e,t[e]);return A},v=(A,t)=>He(A,Se(t));var E=(A,t,e)=>(ee(A,typeof t!="symbol"?t+"":t,e),e);import{C as me,M as te,S as Te,a as Ne,b as ge,A as pe,V as Z,Q as G,F as Ve,c as ue,d as fe,e as Ee,f as Be,T as Ge,P as Fe,g as je,G as Ae,D as We,h as Oe,i as Ze,j as Ye,Z as Ke,I as Je,k as Y,v as Xe,l as qe,W as $e,s as et,B as tt,m as At,n as nt,o as K,R as xe,p as rt,q as ne,r as d,t as C,u as ot}from"./vendor.6dddaba4.js";const st=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}};st();const F={black:"#000000",white:"#ffffff",back1:"#191a1f",fore:"#d0edff",titleBarBg:"#30343b",accent:"#ff0066",gray:"#75848f",uiBackground:"rgba( 25, 26, 31, 0.8 )",error:"#ff0066",warning:"#f7f025",severityInfo:"#53c5ff",constant:"#ff0066",number:"#8a8aff",string:"#f7f025"},it=new me(F.constant),at=new te({color:it,transparent:!0,wireframe:!0,depthTest:!1,depthWrite:!1}),lt=new Te(.2);function ve(A=lt){const t=new Ne(A,at);return t.frustumCulled=!1,t.renderOrder=1e4,t}function ct(A,t,e){const o=A.parser.json.nodes[t].mesh;if(o==null)return null;const i=A.parser.json.meshes[o].primitives.length,l=[];return e.traverse(a=>{l.length<i&&a.isMesh&&l.push(a)}),l}async function J(A,t){const e=await A.parser.getDependency("node",t);return ct(A,t,e)}const ht=new ge({transparent:!0,depthTest:!1,depthWrite:!1});function j(A,t=ht){const e=new Map;return A.forEach(n=>{Array.isArray(n.material)&&(e.set(n,n.material[0]),n.material[0]=t)}),()=>{for(const[n,o]of e)n.material[0]=o}}function re(A){const t=new Map;return A.forEach(e=>{const n=ve();e.add(n),t.set(e,n)}),()=>{A.forEach(e=>{const n=t.get(e);e.remove(n)})}}class dt extends ge{constructor(t){super(t);E(this,"_skinIndexVisualize");E(this,"_uniforms");this._skinIndexVisualize=0,this.onBeforeCompile=e=>{this._uniforms=e.uniforms,this._uniforms.skinIndexVisualize={value:this._skinIndexVisualize},e.vertexShader=e.vertexShader.replace("#include <common>",`#include <common>

        varying float vWeightVisualize;
        uniform float skinIndexVisualize;`),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`#ifdef USE_SKINNING
          vWeightVisualize = (
            skinIndex.x == skinIndexVisualize ? skinWeight.x : 0.0 +
            skinIndex.y == skinIndexVisualize ? skinWeight.y : 0.0 +
            skinIndex.z == skinIndexVisualize ? skinWeight.z : 0.0 +
            skinIndex.w == skinIndexVisualize ? skinWeight.w : 0.0
          );
        #else
          vWeightVisualize = 0.0;
        #endif

        #include <begin_vertex>`),e.fragmentShader=e.fragmentShader.replace("#include <packing>",`#include <packing>

        varying float vWeightVisualize;`),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( packNormalToRGB( normal ), opacity );",`gl_FragColor = vec4(
          clamp( 2.0 - abs( vec3( 4.0, 2.0, 0.0 ) - 4.0 * vWeightVisualize ), 0.0, 1.0 ),
          opacity
        );`)}}get skinIndexVisualize(){return this._skinIndexVisualize}set skinIndexVisualize(t){this._uniforms&&(this._uniforms.skinIndexVisualize={value:t}),this._skinIndexVisualize=t}}const Re=new dt({transparent:!0,depthTest:!1,depthWrite:!1}),mt=new me(F.constant);class gt{constructor(t){E(this,"_inspector");this._inspector=t}highlight(t){const e=this._inspector,n=t.split("/");if(n.length===3&&n[1]==="nodes"){const o=parseInt(n.pop());let s;return e.gltf.parser.getDependency("node",o).then(l=>{s=re([l])}),()=>{s&&s()}}else if(n.length===3&&n[1]==="meshes"){const o=parseInt(n.pop());let s;const i=e.gltf,l=i.parser.json.nodes,a=[];return l.forEach((h,g)=>{h.mesh===o&&a.push(g)}),Promise.all(a.map(h=>J(i,h))).then(h=>h.flat()).then(h=>{s=j(h)}),()=>{s&&s()}}else if(n.length===5&&n[1]==="meshes"&&n[3]==="primitives"){const o=parseInt(n[2]),s=parseInt(n[4]);let i;return e.gltf.parser.getDependency("mesh",o).then(a=>{a.children.length!==0&&(a=a.children[s]),i=j([a])}),()=>{i&&i()}}else if(n.length===7&&n[1]==="meshes"&&n[3]==="primitives"&&n[5]==="targets"){const o=parseInt(n[2]),s=parseInt(n[4]),i=parseInt(n[6]);let l;return e.gltf.parser.getDependency("mesh",o).then(m=>{m.children.length!==0&&(m=m.children[s]);const h=m;h.morphTargetInfluences&&(h.morphTargetInfluences[i]=1),l=()=>{h.morphTargetInfluences&&(h.morphTargetInfluences[i]=0)}}),()=>{l&&l()}}else if(n.length===6&&n[1]==="meshes"&&n[3]==="extras"&&n[4]==="targetNames"){const o=parseInt(n[2]),s=parseInt(n[5]);let i;const l=e.gltf,a=l.parser.json.nodes,m=[];return a.forEach((g,p)=>{g.mesh===o&&m.push(p)}),Promise.all(m.map(g=>J(l,g))).then(g=>g.flat()).then(g=>{g.forEach(p=>{p.morphTargetInfluences&&(p.morphTargetInfluences[s]=1)}),i=()=>{g.forEach(p=>{p.morphTargetInfluences&&(p.morphTargetInfluences[s]=0)})}}),()=>{i&&i()}}else if(n.length===3&&n[1]==="skins"){const o=parseInt(n[2]);let s;const i=e.gltf,l=i.parser.json.nodes,a=[];return l.forEach((h,g)=>{h.skin===o&&a.push(g)}),Promise.all(a.map(h=>J(i,h))).then(h=>h.flat()).then(h=>{s=j(h)}),()=>{s&&s()}}else if(n.length===5&&n[1]==="skins"&&n[3]==="joints"){const o=parseInt(n[2]),s=parseInt(n[4]),i=[],l=e.gltf,a=l.parser.json.skins[o].joints[s];l.parser.getDependency("node",a).then(p=>{i.push(re([p]))});const m=l.parser.json.nodes,h=[];return m.forEach((p,f)=>{p.skin===o&&h.push(f)}),Promise.all(h.map(p=>J(l,p))).then(p=>p.flat()).then(p=>{i.push(j(p,Re)),Re.skinIndexVisualize=s}),()=>{i.forEach(p=>p())}}else if(n.length===3&&n[1]==="materials"||n.length===5&&n[2]==="VRM"&&n[3]==="materialProperties"){const o=parseInt(n.pop());let s;const i=e.gltf.parser;return i.getDependencies("mesh").then(l=>{const a=[];i.json.meshes.forEach((h,g)=>{h.primitives.forEach((f,w)=>{if(o===f.material){let M=l[g];M.children.length!==0&&(M=M.children[w]);const u=M;a.push(u)}})}),s=j(a)}),()=>{s&&s()}}else if(n.length===6&&n[2]==="VRM"&&n[3]==="humanoid"&&n[4]==="humanBones"){const o=parseInt(t.split("/").pop()),a=e.gltf.parser.json.extensions.VRM.humanoid.humanBones[o].bone,m=e.vrm.humanoid.getBoneNode(a);return re([m])}else if(n.length===4&&n[2]==="VRM"&&n[3]==="firstPerson"){const o=ve();return e.vrm.lookAt.getLookAtWorldPosition(o.position),e.scene.add(o),()=>{e.scene.remove(o)}}else{if(n.length===5&&n[2]==="VRM"&&n[3]==="firstPerson"&&n[4]==="meshAnnotations")return e.layerMode="firstPerson",()=>{e.layerMode="thirdPerson"};if(n.length===6&&n[2]==="VRM"&&n[3]==="blendShapeMaster"&&n[4]==="blendShapeGroups"){const o=parseInt(t.split("/").pop()),m=e.gltf.parser.json.extensions.VRM.blendShapeMaster.blendShapeGroups[o].name,h=e.vrm.expressionManager.getValue(m);return e.vrm.expressionManager.setValue(m,1),()=>{e.vrm.expressionManager.setValue(m,h)}}else if(n.length===6&&n[2]==="VRM"&&n[3]==="secondaryAnimation"&&n[4]==="boneGroups"){const o=parseInt(t.split("/").pop()),s=e.gltf.parser,a=s.json.extensions.VRM.secondaryAnimation,m=a==null?void 0:a.boneGroups[o].bones,h=e.vrm.springBoneManager,g=new Map;for(const u of h.springBones)g.set(u.bone,u);const p=e.springBoneJointHelperRoot,f=new Map;p.children.forEach(u=>{const y=u;f.set(y.springBone,y)});const w=[],M=new Set;return m.forEach(u=>{s.getDependency("node",u).then(y=>{y.traverse(b=>{const I=g.get(b),B=f.get(I);M.add(B);const k=B.children[0].material,D=k.color.clone();k.color.copy(mt),w.push(()=>{k.color.copy(D)})})})}),()=>{w.forEach(u=>u())}}}}}class pt{constructor(){E(this,"_eventListeners")}on(t,e){this._eventListeners=this._eventListeners||new Map;let n=this._eventListeners.get(t);n||(n=[],this._eventListeners.set(t,n)),n.push(e)}off(t,e){this._eventListeners=this._eventListeners||new Map;let n=this._eventListeners.get(t);n||(n=[],this._eventListeners.set(t,n));const o=n.indexOf(e);o!==-1&&n.splice(o,1)}_emit(...[t,e]){var n;this._eventListeners=this._eventListeners||new Map,(n=this._eventListeners.get(t))==null||n.forEach(o=>o(e))}}function ut(A,t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{Object.defineProperty(A.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))})})}function ft(A){var e;const t=(e=A.humanoid)==null?void 0:e.humanBones;if(t)for(const n of Object.values(t)){const o=new pe(.1);o.renderOrder=1e4,o.material.depthTest=!1,o.material.depthWrite=!1,n==null||n.node.add(o)}}function Et(A,t){const e=new Set,n=A.material;if(Array.isArray(n))n.forEach(s=>{e.add(s)});else{const o=n;e.add(o)}for(const o of e)t(o)}function we(A,t){const e=[];let n=[],o=0;return Array.from(A).forEach(s=>{o<=0&&(o=t,n=[],e.push(n)),n.push(s),o--}),e}const Bt=new Z,xt=new G;function vt(A){const t=A.humanoid;if(t==null)return null;const e=t.getPose(),n={};return Object.entries(t.humanBones).map(([o,s])=>{if(s!=null){const i=s.node;n[o]={position:i.getWorldPosition(Bt).toArray(),rotation:i.getWorldQuaternion(xt).toArray()}}}),t.setPose(e),n}const Rt={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbProximal",mixamorigLeftHandThumb2:"leftThumbIntermediate",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbProximal",mixamorigRightHandThumb2:"rightThumbIntermediate",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"},wt=new G,Mt=new G,It=new G,yt=new G,Ct=new Z,bt=new Z;async function Qt(A,t){const e=t.humanoid;if(e==null)return null;const o=await new Ve().loadAsync(A),s=ue.findByName(o.animations,"mixamo.com"),i=[],l=vt(t);return s.tracks.forEach(a=>{var p,f,w,M;const m=a.name.split("."),h=m[0],g=Rt[h];if(g!=null){const u=e.restPose[g],y=l==null?void 0:l[g],b=(p=e.getBoneNode(g))==null?void 0:p.name;if(b!=null){const I=m[1],B=(f=u==null?void 0:u.position)!=null?f:[0,0,0],L=Ct.fromArray(B);let k=.01;g==="hips"&&(k*=L.length(),L.multiplyScalar(0));const D=(w=u==null?void 0:u.rotation)!=null?w:[0,0,0,1],T=wt.fromArray(D),O=(M=y==null?void 0:y.rotation)!=null?M:[0,0,0,1],N=Mt.fromArray(O).multiply(T),V=It.copy(N).invert();a instanceof fe?i.push(new fe(`${b}.${I}`,a.times,we(a.values,4).flatMap(U=>yt.fromArray(U).multiply(N).premultiply(V).multiply(T).toArray()))):a instanceof Ee&&i.push(new Ee(`${b}.${I}`,a.times,we(a.values,3).flatMap(U=>bt.fromArray(U).applyQuaternion(V).multiplyScalar(k).add(L).toArray())))}}}),new ue("vrmAnimation",s.duration,i)}var zt="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQQBBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAH7v5JqzrodJxSqKZUVyCEgj6EZBH0IyCMgjIPPQ8kEZB5IOwqeJbISlsqmFVgVTCEpSE5SuctkJxZCZZCZZCZZGZZCwITDrvqOe5Si6Wznvls57osouLKLiyi4souLKbiym4spuKpvCm4Sq4squLNHQma5ujrlLm6OuUubo65y5mlpnLmaWmcuZpaZy5mlpnLmaWmcubpaZy5ujpnLnaPecudo6Zy5+hpnLwaGmcvB36Zy5bzvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8QAIBABAQEBAAIABwAAAAAAAAAAABIREwECAwQQFDBQcP/aAAgBAQABBQL39vWPm/Hivb833ftnxPenn9DjGMZ9MYxjGMYxjGMYxjGMYxjEpSlKUpSlKUpSlCEIQhCEIQhCEIcnJxcXFxcXFxcXFxcXJycv4D//xAAbEQEBAAIDAQAAAAAAAAAAAAAAEQEwAhJgcP/aAAgBAwEBPwFy39mc775CIiIiIiIiIifAf//EABwRAQEBAAMAAwAAAAAAAAAAAAATEQESMAJQcP/aAAgBAgEBPwF8Pfo4498Z9/rWt8ta1RRRRRRRRRRRRRRR3/Af/8QAGRAAAgMBAAAAAAAAAAAAAAAAATEAITBw/9oACAEBAAY/AjYUO77h/8QAHhABAQEAAQQDAAAAAAAAAAAAABEBIRAgMEFQUWD/2gAIAQEAAT8hpdhXtxr7YbidIndERnCrru4iIiIiIiIrda3ERERERERERuN7QTxgPvn83m/HAAH/AP2fzcuV1dXV1dXf3P8A/9oADAMBAAIAAwAAABD1v+TzxSRCCCBACADDAiKLNsvk00302/8AvbJpdNFF1BBwgxRRMk0QwyyyyCSf/wD407777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDnDndwzOhLnvM6uXRyzMz2M7szOjOzMzMzPhKUpSlKUpzn6nKcvsSIiIiIiIiIi//EABwRAQEBAQADAQEAAAAAAAAAABEAUQEQIDBAcP/aAAgBAgEBPxDnOt10ufbvMdz1Ij1I8hHg+Z8j5kfJ/IDMzM8nkzz0A2Gw2Gx2Ox2Ox2Ow2Gw2Gw2O/wAB/8QAIBABAQACAgMBAAMAAAAAAAAAAQARUWGREHGhIDAxYP/aAAgBAQABPxASIw/o5ye7N8cZWFfExJ8GLFixY8hE58WNyNVzmOV8TGP8IAJmTsc+FrWv6/KUq58kYx/ZAhCMY+AxjH85IQhHjPG4Zep4zxnjPGz1el6XrHCOMcY4ytStS9S9S9S9S9S9S9WerLULULULULUPU8D5PE+TwJeiVol6JeiXqXo+Weiy0WerPVno+WWi9Szs9tnZ7bke25HtuR7bke25HtuR7bLt7bLt7bLt7bLt7bLt7bLt7bLt7bLt7f8AY//Z",Lt="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDAgT/2gAMAwEAAhADEAAAAc6XpYoSCEpSEpSMoISCPQ50OdDnQ5IOdDklOSlOSDnQssWKpylc4srmWVzLK5lQmFcwhMITCMwhMIzEjMsjMsjML76Tz3lnm9BZ5ryzz3lnnvK898pRdKUXylF8pTdKU3ylN8pTeFVwVXCe7Rma5ujpnLm6WmcuXp6Zy5enpnLl6eucuXp6Zy5enpnLl6emcuZp98S5ul3nLm6Wmcudo6Zy5+hpnL4NDTOXwe/TOXLed6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITMFBw/9oACAEBAAEFAvRTzRERERERERERERERERERERGWWWWWWWWWWWWWWWWHNzc3Nzc3NzYYYYYYYcnFxcXBwcHBwcHFxcXFycvgP//EABcRAQEBAQAAAAAAAAAAAAAAABEAYHD/2gAIAQMBAT8B2BERERERERERwH//xAAbEQEBAQEAAwEAAAAAAAAAAAAAExEBEjBgcP/aAAgBAgEBPwH6DWt9etaoooooopxTinFOKKKKKPP8B//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEABj8CAH//xAAcEAEBAQADAAMAAAAAAAAAAAARAAEQMEBQYHH/2gAIAQEAAT8hIiOkjgiIiIiIiIiIiI4ERERERERHwYAAf/8A++DwAt8wD9YfjoZOzs7Ozs7O/ev/2gAMAwEAAgADAAAAEBAOuj73333736qgkCm3XVdBNNNBNNRXX8QYcQQqmqqmqqoAEemjrrgkssqz7z0w07777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABsRAQEBAAIDAAAAAAAAAAAAABEAIEBREDBg/9oACAEDAQE/EJ4b6HTlmds+WdM4cM7Z2zPKU5SlKc5zn1PqU5S+xIiIiIiIiIiL/8QAHREBAQEAAgMBAQAAAAAAAAAAEQBRMGEBECBAcP/aAAgBAgEBPxD8B8HOcRxERHIfJH5gTM+J8TMzM+g9BsNhsdjsdu67rsuyOw2Gw2Gx3+A//8QAHRABAQADAQEBAQEAAAAAAAAAAQARUWGRIHFgof/aAAgBAQABPxBjGMSxYsWLFixEIERrGsY/ICEIQhGtY1r9flKUpWtaxjH5AQhCEa1rWMfkBCEIR4ni4TxPErU835s9Wer8xzHMcxzHMvUrUmpWpWpWpWpWrLVnqz1D1D1C1C1D1fknklaP8l6JWiVol6JeiVpK0WerLRZ6LLRZavyXR9bo+t0fW6PrdH1uj63R9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9bLt9f7H/9k=",_t="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAasKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQABBQIAf//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8BAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/AQB//8QAFBABAAAAAAAAAAAAAAAAAAAAgP/aAAgBAQAGPwIAf//EABQQAQAAAAAAAAAAAAAAAAAAAID/2gAIAQEAAT8hAH//2gAMAwEAAgADAAAAEM8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888//EABQRAQAAAAAAAAAAAAAAAAAAAID/2gAIAQMBAT8QAH//xAAUEQEAAAAAAAAAAAAAAAAAAACA/9oACAECAQE/EAB//8QAFhABAQEAAAAAAAAAAAAAAAAAABFw/9oACAEBAAE/ENwiIiIiIiIiIj//2Q==",Pt="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAQEBAQEAAAAAAAAAAAAAAQACAwQG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB+6+NdXO8q2eY0ywUAEBCCWEWCAgICBrIaA0WHo5qb5y2OJSEIsICAcggICCoQgaAQNAdCiAhCAgICBYBAQEBAYEJdBGgN1BQEABAsBSEWFBQUCA1g1CBqI1AQEBARRIEFBQUFBQME0SDEagICAiwiilBgIKCgoJCVKBiGDSGYBDKGUsIoQGUGUGUEKCRJCQkFUywZQygIZQEsEszosEsEBCQkJCg/8QAHRAAAQQCAwAAAAAAAAAAAAAAAgADERIBMAQUcP/aAAgBAQABBQIzCnLixbu2UOOWWd1lPr//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQMBAT8BJb2G+3//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISMHD/2gAIAQIBAT8BIb0Eu3//xAAZEAACAwEAAAAAAAAAAAAAAAABMQAhMHD/2gAIAQEABj8CNhQ7vuH/xAAgEAEAAgEDBQEAAAAAAAAAAAABABEQIDBgITFAQVBR/9oACAEBAAE/Ib+sK9k7F+4Om9Fy8nRWwHHeMrHduXF4c8AfAfof/9oADAMBAAIAAwAAABC0w8HDHUfe8+/9+8colvcc/wDf/LKL/P8A38MRzzz2sAAAEIMm34b7/wBrCRSyyxyQBAP+++sATwwwwxwyCAM888EBixwxxyyhBP8Av/vnhQgIIIgQxnvvrPv/AD9xQYRV9/zz3//EABwRAAEDBQAAAAAAAAAAAAAAAAEQEUAAITBQcP/aAAgBAwEBPxAmyDABVsb0+gEATxxD/8QAGxEAAwADAQEAAAAAAAAAAAAAAAERECAwUGD/2gAIAQIBAT8QSdGcFvdKXEUgLtCfUXK6P0J7H//EAB0QAQEBAQACAwEAAAAAAAAAAAEAERAgMSFBUWH/2gAIAQEAAT8QAAo+E3T+MW/rq9mUsssvGtra9Nhl75Z+zpV23WUsstttttttsMNr9nfu3lLLLbbbbbbbDbMeBZZZZbbbbbYYYZZZZZZZZbbbbbYYYlllllllttttthhhiWWWWWWW223mxERLMyyyz5ERHDMzM93hERE+5mZmeMcIiImZmZ8iIiJmZmZ5llkEEEEcMzMlllllkEEEEEJmSSSyyyyyCCCCCZJJJLLLLLLIIIIIJJJJLLLLLLLIIIIIL//Z",kt="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGgABAAMBAQEAAAAAAAAAAAAAAAIDBQEEBv/EABgBAQEBAQEAAAAAAAAAAAAAAAABAwIE/9oADAMBAAIQAxAAAAHOl6WKEgjII9CMgjIIyDnQ5IOdDkg5IEglKDSo466n3HyWGuueJPRwrsCuZZXMshMshMshMshNbIzlIylIzCNgRmCUtnUtnUtkbhKLiyi4sovKouCm4Sm4spuLKriyq4squLKriyq9bKrpbKrpSq+Cfvma5+hpnLnaGmcudo6Zy52jpnLnaOucudpaZy5ulpnLnaWmcudpaZy52lpnLnaWmcufo6Zy5+jplLn6OuUvg0NM5cN53oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/EACEQAQEBAQABAgcAAAAAAAAAAAASERMCATADBBAUIEBw/9oACAEBAAEFAvd8Xynp6V4eXjHu+j4fnL7vyz9DGMYxjPpjGMZ+GMYxjGMYxjGMYxKUpSlKUpSlKUpQhCEIQhCEIQhCHJycnFxcXFxcXFxcXFxcnL+A/wD/xAAcEQEBAAICAwAAAAAAAAAAAAARAAFAAhIwYHD/2gAIAQMBAT8B83HQxm7aD6CREREREREREfAf/8QAHREBAQEAAgIDAAAAAAAAAAAAABMRATACEkBQcP/aAAgBAgEBPwHu8/gc8PTvxn2Otb1a1rXuoooooooooooooop+A//EABoQAAICAwAAAAAAAAAAAAAAAAExACEwQHD/2gAIAQEABj8CzCCwtB9h/8QAHxABAQEAAQMFAAAAAAAAAAAAABEBIRAgMEBBUFFg/9oACAEBAAE/IYid0TpGYw519qXIR7oiIiIiIiMzr28KkRERERERGYxmr4AE7QwzETy+z56HwAGfFh//ANn87q6urq6uuXP7H//aAAwDAQACAAMAAAAQAgAQgggQkU88k/b9/vN9NNN5LbziiIwwRRxgwBB1FFNdpJbvTj//AH0gsssssENJDL777777777777777zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz//EABwRAQEAAgIDAAAAAAAAAAAAABEAECABMEBRYP/aAAgBAwEBPxDDM4d+MOO7iDJ0curPYZmZ1Zmd2cszMzM7M+CpynP1OcpSlKUpS+xIiIiIiIiIiL//xAAcEQEBAQEBAQADAAAAAAAAAAARAFEBMCAQQHD/2gAIAQIBAT8Q9e3XS7zrEfJEfPZ7nPmfgjwDyPIj9V+A8meTyZmZ+QOw2Gw2Gw2Ox2Ox2Ox2Gw2Gw3+A/wD/xAAgEAEBAAICAwEAAwAAAAAAAAABABFRYZEQcaEgMDFg/9oACAEBAAE/EHyMWLFix4ECPCypZvjjCUCEP6GMHuf4QAQh4RwkjEcYg48WNzWv6/KUp4pxOWbMY/sEQh5CQcxjH8pKQh4BCEeM8Z4zwvW9L0hajjHGOMcYerhjjHGXqVqVqVqVqy1Z6h6h6h6h6h6h6h6hahavUstFno+WerPVlos9EPR8h6h6IeiFoh6I4EcT5HA+WXb22Xb22Xb22Xb22Xb22Xb22Xb22Xb23I9tyPbcj23I9tyPbcj22dnts7Pb/sf/2Q==",Ht="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgEBAQEBAUFBQUFBQYGBgYGBgYGBgYGBgYHBwcICAgHBwcGBgcHCAgICAkJCQgICAgJCQoKCgwMCwsODg4RERT/wgARCACAAIADARIAAhIAAxIA/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBQEE/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAEDBAL/2gAMAwEAAhADEAAAAc7vSxRkEJSkJSkewRkEehzoc6HOhyQckEZKclKckHJBKZFcyyuZZXMsrmVCYVzCEwhMIzCEwjMSMyyMyyM1I2Sk7hKLivPeHnvlPPfKUXSlF8pRfKU3SlN8pTeFN4lN5ZT6Cym8spvLL/fM1z9DTOXO0NM5c7R0zlzdLTOXN0tM5czT08S5mnpnLm6emcubp6Zy5unpnLm6fvOXN09M5c7S0zlztHTOXP0dM5cVzugAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//xAAaEAEBAQEAAwAAAAAAAAAAAAAAERITEFBw/9oACAEBAAEFAvWzzEREREREREREREREREREREZZZZZZZZZZZZZZZZYYYYYYYc3Nzc3Nzc3NhycnFxcXFwcHBwcHBxcXFy+A/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAARAGBw/9oACAEDAQE/AdgREREREREREcB//8QAGxEBAQEBAAMBAAAAAAAAAAAAABMRARIwYHD/2gAIAQIBAT8B+g1rfXrWvNRRRRRTinFOKcUUUUUU/Af/xAAUEAEAAAAAAAAAAAAAAAAAAACA/9oACAEBAAY/AgB//8QAHBABAQEAAwADAAAAAAAAAAAAEQABEDBAUGBx/9oACAEBAAE/ITgjpIiIiIiIiIiIiIiIiIiIiIjgR8cAAH//AIAfPB34GdRTfjxBrs7Ozs7Ozv3H/9oADAMBAAIAAwAAABBAKqp+9999+8/roAR90XXQTTTQTRV11spECCqpqqpqoIHGEHFMNM+8+vLJIK645rq+++++++++++++++888888888888888888888888888888888888888888888888//xAAbEQEBAAIDAQAAAAAAAAAAAAARACAwEEBRYP/aAAgBAwEBPxDc4uh1szi5M5M8s8s5s4OpmeqpTlPyfk5znKUpTl9iREREREREREX/xAAdEQEBAQABBQEAAAAAAAAAAAARAFFhARAgMEBw/9oACAECAQE/EPrPA7nqPSREesjxPoDsZmZmek9JmHcOw2Gw2Gx25Lkua5o7HY7DYbDfwH//xAAdEAEBAAMBAQEBAQAAAAAAAAABABFRYZEgcWCh/9oACAEBAAE/EGJMZixYsWLFiCIQhGMYxj8gIQhSFa1rX6/KUpClYxjH5AQhCFKVjGMfkBCEKUpXmeZ5nmeb82erPV+Y5hajiOLhHEcS9StStS9S9WerPVlqFqFqFqFqFqTULUPV+Sy1ZaLPRZaLPULRC0h6IeiFohaIeiFo/wAjkvyWXb62Xb62Xb62Xb62Xb62Xb62Xb62Xb62Xb63R9bo+t0fW6PrdH1uj63R9f7H/9k=";const St=new Z;Be.install({THREE:Ge});class X{constructor(){E(this,"_scene");E(this,"_lookAtHelperRoot");E(this,"_springBoneJointHelperRoot");E(this,"_springBoneColliderHelperRoot");E(this,"_camera");E(this,"_renderer");E(this,"_controls");E(this,"_gltf");E(this,"_validationReport");E(this,"_vrm");E(this,"_currentModelScene");E(this,"_animationMixer");E(this,"_currentAnimationAction");E(this,"_currentAnimationURL");E(this,"_stats",null);E(this,"_webglMemory",null);E(this,"_webglMemoryInfo",null);E(this,"_loader");E(this,"_canvas");E(this,"_layerMode","thirdPerson");E(this,"_handleResize");E(this,"_ongoingRequestEnvMap");this._camera=new Fe(30,window.innerWidth/window.innerHeight,.1,20),this._camera.position.set(0,1,5),this._scene=new je,this._lookAtHelperRoot=new Ae,this._lookAtHelperRoot.renderOrder=1e4,this._scene.add(this._lookAtHelperRoot),this._springBoneJointHelperRoot=new Ae,this._springBoneJointHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneJointHelperRoot),this._springBoneColliderHelperRoot=new Ae,this._springBoneColliderHelperRoot.renderOrder=1e4,this._scene.add(this._springBoneColliderHelperRoot);const t=new We(16777215);t.position.set(1,1,1).normalize(),this._scene.add(t);const e=new Oe(10,10);this._scene.add(e);const n=new pe(5);this._scene.add(n),this._loader=new Ze,this._loader.register(o=>new Ye(o,{lookAtPlugin:new Ke(o,{helperRoot:this._lookAtHelperRoot}),springBonePlugin:new Je(o,{jointHelperRoot:this._springBoneJointHelperRoot,colliderHelperRoot:this._springBoneColliderHelperRoot})}))}static get VALIDATOR_MAX_ISSUES(){return 100}get scene(){return this._scene}get lookAtHelperRoot(){return this._lookAtHelperRoot}get springBoneJointHelperRoot(){return this._springBoneJointHelperRoot}get springBoneColliderHelperRoot(){return this._springBoneColliderHelperRoot}get gltf(){return this._gltf}get validationReport(){return this._validationReport}get vrm(){return this._vrm}get stats(){return this._stats}get webglMemoryInfo(){return this._webglMemoryInfo}get canvas(){return this._canvas}get layerMode(){return this._layerMode}set layerMode(t){this._layerMode=t,this._updateLayerMode()}unloadVRM(){this._currentModelScene&&this._scene.remove(this._currentModelScene),this._vrm&&(Y.deepDispose(this._vrm.scene),this._emit("unload")),this._animationMixer=null,this._currentAnimationAction=null,this._springBoneJointHelperRoot.children.concat().forEach(t=>{this._springBoneJointHelperRoot.remove(t),t.dispose()}),this._springBoneColliderHelperRoot.children.concat().forEach(t=>{this._springBoneColliderHelperRoot.remove(t),t.dispose()})}async loadVRM(t){var i,l,a;const e=await fetch(t).then(m=>m.arrayBuffer()),n=await Xe(new Uint8Array(e),{maxIssues:X.VALIDATOR_MAX_ISSUES}).catch(m=>console.error("Validation failed: ",m));this._validationReport=n,this._emit("validate",n),this.unloadVRM();const o=await new Promise((m,h)=>{this._loader.crossOrigin="anonymous",this._loader.load(t,g=>{m(g)},g=>{this._emit("progress",g)},g=>{this._emit("error",g),h(g)})});this._gltf=o,Y.removeUnnecessaryVertices(o.scene),Y.removeUnnecessaryJoints(o.scene);const s=this._vrm=(i=o.userData.vrm)!=null?i:null;return s==null&&console.warn("Failed to load the model as a VRM. Fallback to treat the model as a mere GLTF"),this._stats=await this._prepareStats(o,s),s&&ft(s),this._currentModelScene=(l=s==null?void 0:s.scene)!=null?l:o.scene,this._scene.add(this._currentModelScene),s&&((a=s.firstPerson)==null||a.setup(),this._updateLayerMode(),s.scene.traverse(m=>{"isMesh"in m&&Et(m,async h=>{"isMeshStandardMaterial"in h&&(h.envMap=await this._requestEnvMap())})}),Y.rotateVRM0(s),this._animationMixer=new qe(s.scene),this._currentAnimationURL!=null&&this.loadMixamoAnimation(this._currentAnimationURL)),this._emit("load",s),s}async exportBufferView(t){const e=this._gltf;if(e==null)return;const n=await e.parser.getDependency("bufferView",t),o=new Blob([n]),s=URL.createObjectURL(o),i=document.createElement("a");i.href=s,i.download=`${t}.bin`,i.click(),URL.revokeObjectURL(s)}setup(t){this._canvas=t,this._renderer=new $e({canvas:this._canvas}),this._renderer.outputEncoding=et,this._renderer.setSize(window.innerWidth,window.innerHeight),this._renderer.setPixelRatio(window.devicePixelRatio),this._controls=new Be(this._camera,this._canvas),this._controls.setTarget(0,1,0),this._handleResize&&window.removeEventListener("resize",this._handleResize),this._handleResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this._handleResize),this._webglMemory=this._renderer.getContext().getExtension("GMAN_webgl_memory")}registerDnD(t){const e=o=>{o.preventDefault()},n=o=>{o.preventDefault();const s=o.dataTransfer.files;if(!s)return;const i=s[0];if(!i)return;const l=new Blob([i],{type:"application/octet-stream"}),a=URL.createObjectURL(l);this.loadVRM(a)};return t.addEventListener("dragover",e),t.addEventListener("drop",n),()=>{t.removeEventListener("dragover",e),t.removeEventListener("drop",n)}}loadMixamoAnimation(t){const e=this._vrm,n=this._animationMixer;!e||!n||(this._currentAnimationAction&&this.clearMixamoAnimation(),Qt(t,e).then(o=>{o&&(this._currentAnimationURL=t,this._currentAnimationAction=n.clipAction(o),this._currentAnimationAction.play())}))}clearMixamoAnimation(){var n;const t=this._vrm,e=this._currentAnimationAction;!t||!e||(this._currentAnimationURL=null,e.stop(),this._currentAnimationAction=null,(n=t.humanoid)==null||n.resetPose())}update(t){this._controls&&this._controls.update(t),this._animationMixer&&this._animationMixer.update(t),this._vrm&&this._vrm.update(t),this._renderer&&this._renderer.render(this._scene,this._camera),this._webglMemory&&(this._webglMemoryInfo=this._webglMemory.getMemoryInfo())}async _prepareStats(t,e){var f,w,M;const n=new tt,o=new Set;let s=0,i=0,l=0;const a=u=>{var I,B;i++;const y=u.geometry;n.expandByObject(u);const b=y.getAttribute("position");o.add(b),l+=((B=(I=y.index)==null?void 0:I.count)!=null?B:b.count)/3};(await t.parser.getDependencies("mesh")).forEach(u=>{s++,u.isMesh?a(u):u.children.forEach(b=>{a(b)})});let h=0;for(const u of o)h+=u.count;const g=await t.parser.getDependencies("material"),p=(M=(w=(f=e==null?void 0:e.springBoneManager)==null?void 0:f.springBones)==null?void 0:w.size)!=null?M:0;return{dimension:n.getSize(St).toArray(),vertices:h,polygons:l,meshes:s,primitives:i,materials:g.length,springBones:p}}_requestEnvMap(){const t=[Lt,zt,Pt,_t,Ht,kt];if(!this._ongoingRequestEnvMap){const e=new At;this._ongoingRequestEnvMap=new Promise((n,o)=>{e.load(t,s=>n(s),void 0,s=>o(s))})}return this._ongoingRequestEnvMap}_updateLayerMode(){var e;const t=(e=this._vrm)==null?void 0:e.firstPerson;!t||(this._layerMode==="firstPerson"?(this._camera.layers.enable(t.firstPersonOnlyLayer),this._camera.layers.disable(t.thirdPersonOnlyLayer)):(this._camera.layers.disable(t.firstPersonOnlyLayer),this._camera.layers.enable(t.thirdPersonOnlyLayer)))}}ut(X,[pt]);var Dt="./assets/uv-grid.cfc47a74.png",H;(function(A){A[A.None=0]="None",A[A.GLTFFallback=1]="GLTFFallback",A[A.MToonNormal=2]="MToonNormal",A[A.MToonLitShadeRate=3]="MToonLitShadeRate",A[A.MToonUV=4]="MToonUV",A[A.UVGrid=5]="UVGrid"})(H||(H={}));const Me=new te({visible:!1}),Ut=new Promise(A=>{new nt().load(Dt,e=>{e.flipY=!1,A(e)})});function Ie(){const A=new te({color:16711935});return Ut.then(t=>{A.map=t,A.color.set(16777215)}),A}function ye(A,t){if("isMToonMaterial"in A){const e=A;e.debugMode=t}}function Ce(A){return"isMToonMaterial"in A?A.isOutline:!1}class Tt{constructor(t){E(this,"_currentMode",0);E(this,"_vrmMaterialsByMesh",new Map);E(this,"_inspector");this._inspector=t,this._inspector.on("load",()=>this._handleLoad()),this._inspector.on("unload",()=>this._handleUnload())}applyMode(t){t===0?this._applyModeMToon(K.None):t===2?this._applyModeMToon(K.Normal):t===3?this._applyModeMToon(K.LitShadeRate):t===4?this._applyModeMToon(K.UV):t===5&&this._applyModeUVGrid(),this._currentMode=t}_applyModeMToon(t){for(const[e,n]of this._vrmMaterialsByMesh.entries())Array.isArray(n)?n.forEach((o,s)=>{ye(o,t),e.material[s]=o}):(ye(n,t),e.material=n)}_applyModeUVGrid(){for(const[t,e]of this._vrmMaterialsByMesh.entries())Array.isArray(e)?e.forEach((n,o)=>{Ce(n)?t.material[o]=Me:t.material[o]=Ie()}):Ce(e)?t.material=Me:t.material=Ie()}async _handleLoad(){(await this._inspector.gltf.parser.getDependencies("mesh")).forEach(e=>{if("isGroup"in e)e.children.forEach(o=>{const s=o;this._addManagedMesh(s)});else{const n=e;this._addManagedMesh(n)}}),this.applyMode(this._currentMode)}_addManagedMesh(t){Array.isArray(t.material)?this._vrmMaterialsByMesh.set(t,t.material.concat()):this._vrmMaterialsByMesh.set(t,t.material)}_handleUnload(){this._vrmMaterialsByMesh.clear()}}var be="./assets/three-vrm-girl-vrm0.0.e6e179de.vrm";function Nt(A){console.error(A)}const S=new X;S.loadVRM(be).catch(Nt);S.registerDnD(document.body);const Vt=new gt(S),Gt=new Tt(S);console.info(S);const Ft=new rt;function Qe(){requestAnimationFrame(Qe);const A=Ft.getDelta();S.update(A)}Qe();const Q=xe.createContext({inspector:S,highlighter:Vt,materialDebugger:Gt}),r=ne.exports.jsx,R=ne.exports.jsxs,z=ne.exports.Fragment,ze=({href:A,widthClass:t})=>A==null?null:r("a",{href:A,target:"_blank",rel:"noreferrer",className:`font-bold truncate inline-block align-top underline text-sky-500 ${t!=null?t:"w-64"}`,children:A});function jt(A,t){let e=!1,n,o={x:0,y:0};const s=()=>{e||(requestAnimationFrame(s),n&&(A(n,o),n=void 0,o={x:0,y:0}))};s();const i=a=>{n=a,o.x+=a.movementX,o.y+=a.movementY},l=a=>{e||(t&&t(a),e=!0),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",l),window.removeEventListener("mousedown",l)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",l),setTimeout(()=>window.addEventListener("mousedown",l))}function Wt(){const A=d.exports.useRef(-1/0);return d.exports.useCallback(e=>{const n=performance.now();n-A.current<250?(e(),A.current=-1/0):A.current=n},[A])}const _=A=>{var m,h,g;const[t,e]=d.exports.useState((m=A.initPosition)!=null?m:{left:0,top:0}),[n,o]=d.exports.useState((h=A.initOpening)!=null?h:!1),s=Wt(),i=d.exports.useCallback(p=>{var f;(f=A.onClick)==null||f.call(A,p,A.paneKey)},[A.onClick,A.paneKey]),l=d.exports.useCallback(p=>{p.preventDefault();let f=t.left,w=t.top;jt((M,u)=>{M.preventDefault(),M.stopPropagation(),f+=u.x,w+=u.y,e({left:f,top:w})}),s(()=>{o(!n)})},[n,t]),a=d.exports.useCallback(p=>{var f;p.preventDefault(),p.stopPropagation(),(f=A.onClick)==null||f.call(A,p,A.paneKey),o(!n)},[n,A.onClick,A.paneKey]);return R("div",{style:{left:t.left,top:t.top,minWidth:"15rem",boxShadow:"0 0 10px rgba(0, 0, 0, 1.0)"},className:`absolute shadow ${A.className}`,onMouseDown:i,children:[R("div",{className:"h-5 leading-5 w-full bg-gray-700 cursor-move",onMouseDown:l,children:[r("div",{className:"inline-block w-5 h-5 text-center cursor-pointer hover:text-sky-500",onMouseDown:a,children:n?"-":"+"}),A.title]}),n&&((g=A.children)!=null?g:null)]})},P=({className:A,paddingClass:t,children:e})=>r("div",{className:`bg-gray-900/80 backdrop-blur ${t!=null?t:"p-2"} ${A}`,children:e}),Ot=A=>r(_,v(x({},A),{children:R(P,{children:[r("div",{children:"three-vrm-inspector"}),r("div",{children:"Three.js based VRM inspector"}),R("div",{children:["Source: ",r(ze,{widthClass:"w-min",href:"https://github.com/0b5vr/three-vrm-inspector"})]})]})})),Le=({name:A,isAvailable:t})=>{const{inspector:e}=d.exports.useContext(Q),n=d.exports.useCallback(o=>{var s,i;(i=(s=e.vrm)==null?void 0:s.expressionManager)==null||i.setValue(A,parseFloat(o.target.value))},[]);return R("div",{className:"flex items-center",children:[r("input",{className:"mr-2",type:"range",min:"0",max:"1",step:"0.001",defaultValue:"0",disabled:!t,onChange:n}),t?A:r("span",{className:"text-gray-500",children:A})]})},oe=()=>r("div",{className:"w-full h-0.5 my-2 bg-gray-500"}),_e=[C.Neutral,C.Happy,C.Angry,C.Sad,C.Relaxed,C.Surprised,C.Blink,C.BlinkLeft,C.BlinkRight,C.Aa,C.Ee,C.Ih,C.Oh,C.Ou,C.LookLeft,C.LookRight,C.LookDown,C.LookUp],Zt=new Set(_e),Yt=A=>{var i,l;const{inspector:t}=d.exports.useContext(Q),e=(i=t.vrm)==null?void 0:i.expressionManager,n=e==null?void 0:e.expressionMap,o=[];n&&Array.from(Object.keys(n)).forEach(a=>{Zt.has(a)||o.push(a)});const s=((l=o==null?void 0:o.length)!=null?l:0)>=1;return r(_,v(x({},A),{children:r(P,{children:e?R(z,{children:[_e.map(a=>r(Le,{name:a,isAvailable:(e==null?void 0:e.getExpression(a))!=null},a)),r(oe,{}),o==null?void 0:o.map(a=>r(Le,{name:a,isAvailable:!0},a)),!s&&r("span",{className:"text-gray-500",children:"(No custom expressions)"})]}):"No blendShapeProxy detected."})}))},Kt=A=>{const{inspector:t}=d.exports.useContext(Q),e=d.exports.useRef(null),n=d.exports.useCallback(o=>{var i;o.preventDefault();const s=(i=e.current)==null?void 0:i.value;if(s!=null&&s!==""){const l=parseInt(s,10);t.exportBufferView(l)}},[t]);return r(_,v(x({},A),{children:r(P,{children:R("form",{onSubmit:n,children:[r("input",{type:"number",ref:e,defaultValue:0,className:"w-24 px-1 bg-gray-800 border border-gray-500",required:!0}),r("input",{type:"submit",className:"ml-1 px-1 bg-gray-800 border border-gray-500",value:"Export"})]})})}))},se=({callback:A,label:t})=>{const[e,n]=d.exports.useState(!0),o=d.exports.useCallback(({target:s})=>{A(s.checked),n(s.checked)},[A]);return R("div",{children:[r("input",{type:"checkbox",checked:e,onChange:o}),t]})},Jt=A=>{const{inspector:t}=d.exports.useContext(Q),e=d.exports.useCallback(s=>{t.lookAtHelperRoot.visible=s},[t]),n=d.exports.useCallback(s=>{t.springBoneJointHelperRoot.visible=s},[t]),o=d.exports.useCallback(s=>{t.springBoneColliderHelperRoot.visible=s},[t]);return r(_,v(x({},A),{children:R(P,{children:[r(se,{callback:e,label:"LookAt"}),r(se,{callback:n,label:"Spring Bones"}),r(se,{callback:o,label:"Spring Bone Colliders"})]})}))},q=({children:A,onClick:t,onMouseEnter:e,onMouseLeave:n})=>r("span",{className:"select-none cursor-pointer",onClick:t,onMouseEnter:e,onMouseLeave:n,children:A}),Pe=({children:A})=>r("div",{style:{marginLeft:"1.13em"},children:A}),ie=({name:A,value:t,fullPath:e=""})=>{const{highlighter:n}=d.exports.useContext(Q),[o,s]=d.exports.useState(!1),[i,l]=d.exports.useState(!1),[a,m]=d.exports.useState([void 0]),h=d.exports.useCallback(B=>{B.stopPropagation(),s(!o)},[s,o]),g=d.exports.useCallback(()=>{l(!0),m([n.highlight(e)])},[l,m,n,e]),p=d.exports.useCallback(()=>{var B;l(!1),(B=a[0])==null||B.call(a)},[l,a]),f=Array.isArray(t),w=t==null,M=typeof t=="number",u=typeof t=="boolean",y=typeof t=="string",b=!f&&!w&&!M&&!u&&!y,I={onClick:h,onMouseEnter:g,onMouseLeave:p,isHovering:i};return R("div",{className:"select-auto",children:[r("span",v(x({className:`cursor-pointer ${i&&"text-sky-500"}`},I),{children:A?`${A}: `:""})),f&&R(z,{children:[r(q,v(x({},I),{children:"["})),o&&r(Pe,{children:t.map((B,L)=>r("div",{children:r(ie,{name:L.toString()+((B==null?void 0:B.name)?` (${B.name})`:""),value:B,fullPath:`${e}/${L}`})},L))}),r(q,v(x({},I),{children:` ${o?"":t.length} ]`}))]}),b&&R(z,{children:[r(q,v(x({},I),{children:"{"})),o&&r(Pe,{children:Object.keys(t).map((B,L)=>r("div",{children:r(ie,{name:B,value:t[B],fullPath:`${e}/${B}`})},L))}),r(q,v(x({},I),{children:` ${o?"":Object.keys(t).join(", ")} }`}))]}),w&&r(z,{children:r("span",v(x({className:"text-pink-500"},I),{children:t}))}),M&&r(z,{children:r("span",v(x({className:"text-indigo-400"},I),{children:t}))}),u&&r(z,{children:r("span",v(x({className:"text-indigo-400"},I),{children:String(t)}))}),y&&r(z,{children:R("span",v(x({className:"text-yellow-300"},I),{children:['"',t,'"']}))})]})},Xt=A=>{const{inspector:t}=d.exports.useContext(Q),[e,n]=d.exports.useState(void 0);return d.exports.useEffect(()=>{const o=()=>{n(t.gltf.parser.json)};return t.on("load",o),()=>{t.off("load",o)}},[t]),r(_,v(x({},A),{children:r(P,{className:"w-120 h-80 overflow-scroll whitespace-nowrap resize font-mono text-xs leading-tight",paddingClass:"p-0",children:r(ie,{value:e})})}))},qt=A=>{const{materialDebugger:t}=d.exports.useContext(Q),e=d.exports.useCallback(n=>{const o=parseInt(n.target.value);t.applyMode(o)},[t]);return r(_,v(x({},A),{children:r(P,{children:R("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:[r("option",{value:H.None,children:"None"}),r("option",{value:H.MToonNormal,children:"MToon Normal"}),r("option",{value:H.MToonLitShadeRate,children:"MToon LitShadeRate"}),r("option",{value:H.MToonUV,children:"MToon UV"}),r("option",{value:H.UVGrid,children:"UV Grid"})]})})}))},c=({name:A,value:t,href:e})=>R("div",{children:[A,":"," ",t!=null&&r("span",{className:"font-bold",children:t}),e&&r(ze,{href:e})]}),$t=({meta:A})=>R(z,{children:[r(c,{name:"Title",value:A.title}),r(c,{name:"Author",value:A.author}),r(c,{name:"Version",value:A.version}),r(c,{name:"Reference",value:A.reference}),r(c,{name:"Contact Information",value:A.contactInformation}),r(c,{name:"Allowed User Name",value:A.allowedUserName}),r(c,{name:"Violent Ussage Name",value:A.violentUssageName}),r(c,{name:"Sexual Ussage Name",value:A.sexualUssageName}),r(c,{name:"Commercial Ussage Name",value:A.commercialUssageName}),r(c,{name:"Other Permission URL",href:A.otherPermissionUrl}),r(c,{name:"License Name",value:A.licenseName}),r(c,{name:"Other License URL",href:A.otherLicenseUrl})]}),eA=({meta:A})=>{var t;return R(z,{children:[r(c,{name:"Name",value:A.name}),r(c,{name:"Version",value:A.version}),r(c,{name:"Authors",value:A.authors.join(", ")}),r(c,{name:"Copyright Information",value:A.copyrightInformation}),r(c,{name:"Contact Information",value:A.contactInformation}),r(c,{name:"References",value:(t=A.references)==null?void 0:t.join(", ")}),r(c,{name:"Third Party Licenses",value:A.thirdPartyLicenses}),r(c,{name:"License URL",href:A.licenseUrl}),r(c,{name:"Avatar Permission",value:A.avatarPermission}),r(c,{name:"Allow Excessively Violent Usage",value:String(A.allowExcessivelyViolentUsage)}),r(c,{name:"Allow Excessively Sexual Usage",value:String(A.allowExcessivelySexualUsage)}),r(c,{name:"Commercial Usage Name",value:A.commercialUsage}),r(c,{name:"Allow Political or Religious Usage",value:String(A.allowPoliticalOrReligiousUsage)}),r(c,{name:"Allow Antisocial or Hate Usage",value:String(A.allowAntisocialOrHateUsage)}),r(c,{name:"Credit Notation",value:A.creditNotation}),r(c,{name:"Allow Redistribution",value:String(A.allowRedistribution)}),r(c,{name:"Modification",value:A.modification}),r(c,{name:"Other License URL",href:A.otherLicenseUrl})]})},tA=A=>{var o;const{inspector:t}=d.exports.useContext(Q),e=(o=t.vrm)==null?void 0:o.meta;let n=r(z,{children:"No meta detected."});return(e==null?void 0:e.metaVersion)==="1"?n=r(eA,{meta:e}):(e==null?void 0:e.metaVersion)==="0"&&(n=r($t,{meta:e})),r(_,v(x({},A),{children:r(P,{children:n})}))};var AA="./assets/dancing.2665f039.fbx",nA="./assets/gangnam-style.119f68a4.fbx",rA="./assets/jump.a8a08f02.fbx",oA="./assets/running.c854d669.fbx",sA="./assets/standing-clap.9fc941e1.fbx",iA="./assets/walking.ed38b4d6.fbx";const aA=[{name:"(No Animation)",url:"-"},{name:"Walking",url:iA},{name:"Running",url:oA},{name:"Jump",url:rA},{name:"Dancing",url:AA},{name:"Standing Clap",url:sA},{name:"Gangnam Style",url:nA}],lA=A=>{const{inspector:t}=d.exports.useContext(Q),e=d.exports.useCallback(n=>{const o=n.target.value;o==="-"?t.clearMixamoAnimation():t.loadMixamoAnimation(o)},[t]);return r(_,v(x({},A),{children:r(P,{children:r("select",{className:"bg-gray-800 border border-gray-500 w-full",onChange:e,children:aA.map(({name:n,url:o})=>r("option",{value:o,children:n},o))})})}))},cA=({name:A,url:t})=>{const{inspector:e}=d.exports.useContext(Q),n=d.exports.useCallback(()=>{e.loadVRM(t)},[e]);return r("button",{value:A,className:"bg-gray-800 border border-gray-500 px-1 py-0 block",onClick:n,children:A})};var hA="./assets/three-vrm-girl.2076a024.vrm";const dA=[{name:"three-vrm-girl (VRM0.X)",url:be},{name:"three-vrm-girl (VRM1.0-beta)",url:hA}],mA=A=>r(_,v(x({},A),{children:r(P,{children:dA.map(({name:t,url:e})=>r(cA,{name:t,url:e},t))})})),gA=A=>{var o,s,i,l,a,m,h,g,p,f;const{inspector:t}=d.exports.useContext(Q),e=(o=t.stats)==null?void 0:o.dimension.map(w=>w.toFixed(3)),n=`( ${(s=e==null?void 0:e[0])!=null?s:0}, ${(i=e==null?void 0:e[1])!=null?i:0}, ${(l=e==null?void 0:e[2])!=null?l:0} )`;return r(_,v(x({},A),{children:R(P,{children:[r(c,{name:"Dimension",value:n}),r(c,{name:"Vertices",value:(a=t.stats)==null?void 0:a.vertices}),r(c,{name:"Polygons",value:(m=t.stats)==null?void 0:m.polygons}),r(c,{name:"Meshes",value:(h=t.stats)==null?void 0:h.meshes}),r(c,{name:"Primitives",value:(g=t.stats)==null?void 0:g.primitives}),r(c,{name:"Materials",value:(p=t.stats)==null?void 0:p.materials}),r(c,{name:"Spring Bones",value:(f=t.stats)==null?void 0:f.springBones})]})}))},pA=({children:A})=>r("div",{style:{marginLeft:"1.13em"},children:A}),uA=A=>{const[t,e]=d.exports.useState(!1),n=A.severity===0?F.error:A.severity===1?F.warning:F.severityInfo,o=d.exports.useCallback(()=>{e(!t)},[t]);return R("div",{className:"group cursor-pointer",onClick:o,children:[r("span",{className:"group-hover:text-sky-500",children:t?"- ":"+ "}),r("span",{style:{color:n},children:A.code}),r("span",{className:"text-gray-500",children:" - "+A.pointer}),t&&r(pA,{children:A.message})]})},$=({count:A,colorClass:t})=>r("span",{className:A?t:"text-gray-500",children:A}),fA=A=>{var n,o;const{inspector:t}=d.exports.useContext(Q),e=(n=t.validationReport)==null?void 0:n.issues;return r(_,v(x({},A),{children:R(P,{className:"w-120 h-80 resize overflow-y-scroll",children:[r(c,{name:"Validator Version",value:(o=t.validationReport)==null?void 0:o.validatorVersion}),r(c,{name:"Errors",value:r($,{count:e==null?void 0:e.numErrors,colorClass:"text-red-500"})}),r(c,{name:"Warnings",value:r($,{count:e==null?void 0:e.numWarnings,colorClass:"text-yellow-300"})}),r(c,{name:"Infos",value:r($,{count:e==null?void 0:e.numInfos,colorClass:"text-sky-500"})}),r(c,{name:"Hints",value:r($,{count:e==null?void 0:e.numHints,colorClass:"text-sky-500"})}),r(oe,{}),(e==null?void 0:e.truncated)&&r("div",{className:"m-1 font-bold",children:"There are too many issues! Showing only 100 entries."}),r("div",{className:"w-full font-mono leading-tight text-xs",children:e==null?void 0:e.messages.map((s,i)=>r(uA,{code:s.code,message:s.message,severity:s.severity,pointer:s.pointer},i))})]})}))},W=A=>(A/1048576).toFixed(3)+" MB",EA=A=>{var n,o,s,i,l,a,m,h,g,p,f,w,M,u,y,b,I,B,L,k,D,T,O,N,V,U,ae,le,ce,he;const{inspector:t}=d.exports.useContext(Q),e=t.webglMemoryInfo;return r(_,v(x({},A),{children:R(P,{children:[r(c,{name:"Buffer",value:W((o=(n=e==null?void 0:e.memory)==null?void 0:n.buffer)!=null?o:0)}),r(c,{name:"Texture",value:W((i=(s=e==null?void 0:e.memory)==null?void 0:s.texture)!=null?i:0)}),r(c,{name:"Render Buffer",value:W((a=(l=e==null?void 0:e.memory)==null?void 0:l.renderbuffer)!=null?a:0)}),r(c,{name:"Drawing Buffer",value:W((h=(m=e==null?void 0:e.memory)==null?void 0:m.drawingbuffer)!=null?h:0)}),r(c,{name:"Total",value:W((p=(g=e==null?void 0:e.memory)==null?void 0:g.total)!=null?p:0)}),r(oe,{}),r(c,{name:"Buffer",value:(w=(f=e==null?void 0:e.resources)==null?void 0:f.buffer)!=null?w:0}),r(c,{name:"Render Buffer",value:(u=(M=e==null?void 0:e.resources)==null?void 0:M.renderbuffer)!=null?u:0}),r(c,{name:"Program",value:(b=(y=e==null?void 0:e.resources)==null?void 0:y.program)!=null?b:0}),r(c,{name:"Query",value:(B=(I=e==null?void 0:e.resources)==null?void 0:I.query)!=null?B:0}),r(c,{name:"Sampler",value:(k=(L=e==null?void 0:e.resources)==null?void 0:L.sampler)!=null?k:0}),r(c,{name:"Shader",value:(T=(D=e==null?void 0:e.resources)==null?void 0:D.shader)!=null?T:0}),r(c,{name:"Sync",value:(N=(O=e==null?void 0:e.resources)==null?void 0:O.sync)!=null?N:0}),r(c,{name:"Texture",value:(U=(V=e==null?void 0:e.resources)==null?void 0:V.texture)!=null?U:0}),r(c,{name:"Transform Feedback",value:(le=(ae=e==null?void 0:e.resources)==null?void 0:ae.transformFeedback)!=null?le:0}),r(c,{name:"Vertex Array",value:(he=(ce=e==null?void 0:e.resources)==null?void 0:ce.vertexArray)!=null?he:0})]})}))},BA=()=>{const[A,t]=d.exports.useState(["jsonTree","materialDebugger","meta","stats","webglMemory","blendShape","validationReport","sampleModels","helpers","exportBufferView","mixamoAnimations","about"]),e=d.exports.useCallback((o,s)=>{const i=A.concat();i.splice(A.indexOf(s),1),i.push(s),t(i)},[A]),n={jsonTree:r(Xt,{paneKey:"jsonTree",title:"JSON Tree",onClick:e,initPosition:{left:0,top:0}},"jsonTree"),materialDebugger:r(qt,{paneKey:"materialDebugger",title:"MToon Material Debugger",onClick:e,initPosition:{left:0,top:20}},"materialDebugger"),meta:r(tA,{paneKey:"meta",title:"Meta",onClick:e,initPosition:{left:0,top:40}},"meta"),stats:r(gA,{paneKey:"stats",title:"Stats",onClick:e,initPosition:{left:0,top:60}},"stats"),webglMemory:r(EA,{paneKey:"webglMemory",title:"WebGL Memory",onClick:e,initPosition:{left:0,top:80}},"webglMemory"),blendShape:r(Yt,{paneKey:"blendShape",title:"Blend Shape Proxy",onClick:e,initPosition:{left:0,top:100}},"blendShape"),validationReport:r(fA,{paneKey:"validationReport",title:"Validation Report",onClick:e,initPosition:{left:0,top:120}},"validationReport"),sampleModels:r(mA,{paneKey:"sampleModels",title:"Sample Models",onClick:e,initPosition:{left:0,top:140}},"sampleModels"),helpers:r(Jt,{paneKey:"helpers",title:"Helpers",onClick:e,initPosition:{left:0,top:160}},"helpers"),exportBufferView:r(Kt,{paneKey:"exportBufferView",title:"Export Buffer View",onClick:e,initPosition:{left:0,top:180}},"exportBufferView"),mixamoAnimations:r(lA,{paneKey:"mixamoAnimations",title:"Mixamo Animations",onClick:e,initPosition:{left:0,top:200}},"mixamoAnimations"),about:r(Ot,{paneKey:"about",title:"About",onClick:e,initPosition:{left:0,top:220}},"about")};return r(z,{children:A.map(o=>n[o])})},xA=()=>{const{inspector:A}=d.exports.useContext(Q),[t,e]=d.exports.useState(null);d.exports.useEffect(()=>{const o=()=>{e(null)},s=i=>{e(i)};return A.on("load",o),A.on("progress",s),()=>{A.off("load",o),A.off("progress",s)}});const n=d.exports.useMemo(()=>t?t.loaded/t.total:null,[t]);return r(z,{children:r("div",{className:"w-full h-full absolute text-center pointer-events-none",children:r("div",{children:n?(100*n).toFixed(2):"yay"})})})},vA=()=>{const{inspector:A}=d.exports.useContext(Q),t=d.exports.useCallback(e=>{e&&A.setup(e)},[]);return r(z,{children:R("div",{className:"w-full h-full text-sm absolute overflow-hidden text-gray-100",children:[r("canvas",{ref:t,className:"w-full h-full absolute"}),r(BA,{}),r(xA,{})]})})},RA=()=>r(z,{children:r(vA,{})});ot.render(r(xe.StrictMode,{children:r(RA,{})}),document.getElementById("root"));
